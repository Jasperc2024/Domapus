function NT(e,n){for(var i=0;i<n.length;i++){const a=n[i];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(e,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function i(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=i(u);fetch(u.href,f)}})();var IV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zv={exports:{}},im={},Hv={exports:{}},ni={};var Ib;function QT(){if(Ib)return ni;Ib=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.iterator;function O(Le){return Le===null||typeof Le!="object"?null:(Le=D&&Le[D]||Le["@@iterator"],typeof Le=="function"?Le:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,H={};function z(Le,ie,Ce){this.props=Le,this.context=ie,this.refs=H,this.updater=Ce||P}z.prototype.isReactComponent={},z.prototype.setState=function(Le,ie){if(typeof Le!="object"&&typeof Le!="function"&&Le!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Le,ie,"setState")},z.prototype.forceUpdate=function(Le){this.updater.enqueueForceUpdate(this,Le,"forceUpdate")};function Z(){}Z.prototype=z.prototype;function se(Le,ie,Ce){this.props=Le,this.context=ie,this.refs=H,this.updater=Ce||P}var ae=se.prototype=new Z;ae.constructor=se,W(ae,z.prototype),ae.isPureReactComponent=!0;var fe=Array.isArray,Fe=Object.prototype.hasOwnProperty,He={current:null},Ve={key:!0,ref:!0,__self:!0,__source:!0};function Oe(Le,ie,Ce){var Me,qe={},at=null,et=null;if(ie!=null)for(Me in ie.ref!==void 0&&(et=ie.ref),ie.key!==void 0&&(at=""+ie.key),ie)Fe.call(ie,Me)&&!Ve.hasOwnProperty(Me)&&(qe[Me]=ie[Me]);var _t=arguments.length-2;if(_t===1)qe.children=Ce;else if(1<_t){for(var Et=Array(_t),Pt=0;Pt<_t;Pt++)Et[Pt]=arguments[Pt+2];qe.children=Et}if(Le&&Le.defaultProps)for(Me in _t=Le.defaultProps,_t)qe[Me]===void 0&&(qe[Me]=_t[Me]);return{$$typeof:e,type:Le,key:at,ref:et,props:qe,_owner:He.current}}function be(Le,ie){return{$$typeof:e,type:Le.type,key:ie,ref:Le.ref,props:Le.props,_owner:Le._owner}}function rt(Le){return typeof Le=="object"&&Le!==null&&Le.$$typeof===e}function ue(Le){var ie={"=":"=0",":":"=2"};return"$"+Le.replace(/[=:]/g,function(Ce){return ie[Ce]})}var me=/\/+/g;function Ue(Le,ie){return typeof Le=="object"&&Le!==null&&Le.key!=null?ue(""+Le.key):ie.toString(36)}function Ie(Le,ie,Ce,Me,qe){var at=typeof Le;(at==="undefined"||at==="boolean")&&(Le=null);var et=!1;if(Le===null)et=!0;else switch(at){case"string":case"number":et=!0;break;case"object":switch(Le.$$typeof){case e:case n:et=!0}}if(et)return et=Le,qe=qe(et),Le=Me===""?"."+Ue(et,0):Me,fe(qe)?(Ce="",Le!=null&&(Ce=Le.replace(me,"$&/")+"/"),Ie(qe,ie,Ce,"",function(Pt){return Pt})):qe!=null&&(rt(qe)&&(qe=be(qe,Ce+(!qe.key||et&&et.key===qe.key?"":(""+qe.key).replace(me,"$&/")+"/")+Le)),ie.push(qe)),1;if(et=0,Me=Me===""?".":Me+":",fe(Le))for(var _t=0;_t<Le.length;_t++){at=Le[_t];var Et=Me+Ue(at,_t);et+=Ie(at,ie,Ce,Et,qe)}else if(Et=O(Le),typeof Et=="function")for(Le=Et.call(Le),_t=0;!(at=Le.next()).done;)at=at.value,Et=Me+Ue(at,_t++),et+=Ie(at,ie,Ce,Et,qe);else if(at==="object")throw ie=String(Le),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(Le).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return et}function pt(Le,ie,Ce){if(Le==null)return Le;var Me=[],qe=0;return Ie(Le,Me,"","",function(at){return ie.call(Ce,at,qe++)}),Me}function lt(Le){if(Le._status===-1){var ie=Le._result;ie=ie(),ie.then(function(Ce){(Le._status===0||Le._status===-1)&&(Le._status=1,Le._result=Ce)},function(Ce){(Le._status===0||Le._status===-1)&&(Le._status=2,Le._result=Ce)}),Le._status===-1&&(Le._status=0,Le._result=ie)}if(Le._status===1)return Le._result.default;throw Le._result}var ot={current:null},Ne={transition:null},Te={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:Ne,ReactCurrentOwner:He};function yt(){throw Error("act(...) is not supported in production builds of React.")}return ni.Children={map:pt,forEach:function(Le,ie,Ce){pt(Le,function(){ie.apply(this,arguments)},Ce)},count:function(Le){var ie=0;return pt(Le,function(){ie++}),ie},toArray:function(Le){return pt(Le,function(ie){return ie})||[]},only:function(Le){if(!rt(Le))throw Error("React.Children.only expected to receive a single React element child.");return Le}},ni.Component=z,ni.Fragment=i,ni.Profiler=u,ni.PureComponent=se,ni.StrictMode=a,ni.Suspense=w,ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Te,ni.act=yt,ni.cloneElement=function(Le,ie,Ce){if(Le==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Le+".");var Me=W({},Le.props),qe=Le.key,at=Le.ref,et=Le._owner;if(ie!=null){if(ie.ref!==void 0&&(at=ie.ref,et=He.current),ie.key!==void 0&&(qe=""+ie.key),Le.type&&Le.type.defaultProps)var _t=Le.type.defaultProps;for(Et in ie)Fe.call(ie,Et)&&!Ve.hasOwnProperty(Et)&&(Me[Et]=ie[Et]===void 0&&_t!==void 0?_t[Et]:ie[Et])}var Et=arguments.length-2;if(Et===1)Me.children=Ce;else if(1<Et){_t=Array(Et);for(var Pt=0;Pt<Et;Pt++)_t[Pt]=arguments[Pt+2];Me.children=_t}return{$$typeof:e,type:Le.type,key:qe,ref:at,props:Me,_owner:et}},ni.createContext=function(Le){return Le={$$typeof:m,_currentValue:Le,_currentValue2:Le,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Le.Provider={$$typeof:f,_context:Le},Le.Consumer=Le},ni.createElement=Oe,ni.createFactory=function(Le){var ie=Oe.bind(null,Le);return ie.type=Le,ie},ni.createRef=function(){return{current:null}},ni.forwardRef=function(Le){return{$$typeof:o,render:Le}},ni.isValidElement=rt,ni.lazy=function(Le){return{$$typeof:I,_payload:{_status:-1,_result:Le},_init:lt}},ni.memo=function(Le,ie){return{$$typeof:E,type:Le,compare:ie===void 0?null:ie}},ni.startTransition=function(Le){var ie=Ne.transition;Ne.transition={};try{Le()}finally{Ne.transition=ie}},ni.unstable_act=yt,ni.useCallback=function(Le,ie){return ot.current.useCallback(Le,ie)},ni.useContext=function(Le){return ot.current.useContext(Le)},ni.useDebugValue=function(){},ni.useDeferredValue=function(Le){return ot.current.useDeferredValue(Le)},ni.useEffect=function(Le,ie){return ot.current.useEffect(Le,ie)},ni.useId=function(){return ot.current.useId()},ni.useImperativeHandle=function(Le,ie,Ce){return ot.current.useImperativeHandle(Le,ie,Ce)},ni.useInsertionEffect=function(Le,ie){return ot.current.useInsertionEffect(Le,ie)},ni.useLayoutEffect=function(Le,ie){return ot.current.useLayoutEffect(Le,ie)},ni.useMemo=function(Le,ie){return ot.current.useMemo(Le,ie)},ni.useReducer=function(Le,ie,Ce){return ot.current.useReducer(Le,ie,Ce)},ni.useRef=function(Le){return ot.current.useRef(Le)},ni.useState=function(Le){return ot.current.useState(Le)},ni.useSyncExternalStore=function(Le,ie,Ce){return ot.current.useSyncExternalStore(Le,ie,Ce)},ni.useTransition=function(){return ot.current.useTransition()},ni.version="18.3.1",ni}var Tb;function mw(){return Tb||(Tb=1,Hv.exports=QT()),Hv.exports}var Pb;function OT(){if(Pb)return im;Pb=1;var e=mw(),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function m(o,w,E){var I,D={},O=null,P=null;E!==void 0&&(O=""+E),w.key!==void 0&&(O=""+w.key),w.ref!==void 0&&(P=w.ref);for(I in w)a.call(w,I)&&!f.hasOwnProperty(I)&&(D[I]=w[I]);if(o&&o.defaultProps)for(I in w=o.defaultProps,w)D[I]===void 0&&(D[I]=w[I]);return{$$typeof:n,type:o,key:O,ref:P,props:D,_owner:u.current}}return im.Fragment=i,im.jsx=m,im.jsxs=m,im}var Lb;function zT(){return Lb||(Lb=1,zv.exports=OT()),zv.exports}var ce=zT(),Qg={},jv={exports:{}},Yc={},Vv={exports:{}},Gv={};var Mb;function HT(){return Mb||(Mb=1,(function(e){function n(Ne,Te){var yt=Ne.length;Ne.push(Te);e:for(;0<yt;){var Le=yt-1>>>1,ie=Ne[Le];if(0<u(ie,Te))Ne[Le]=Te,Ne[yt]=ie,yt=Le;else break e}}function i(Ne){return Ne.length===0?null:Ne[0]}function a(Ne){if(Ne.length===0)return null;var Te=Ne[0],yt=Ne.pop();if(yt!==Te){Ne[0]=yt;e:for(var Le=0,ie=Ne.length,Ce=ie>>>1;Le<Ce;){var Me=2*(Le+1)-1,qe=Ne[Me],at=Me+1,et=Ne[at];if(0>u(qe,yt))at<ie&&0>u(et,qe)?(Ne[Le]=et,Ne[at]=yt,Le=at):(Ne[Le]=qe,Ne[Me]=yt,Le=Me);else if(at<ie&&0>u(et,yt))Ne[Le]=et,Ne[at]=yt,Le=at;else break e}}return Te}function u(Ne,Te){var yt=Ne.sortIndex-Te.sortIndex;return yt!==0?yt:Ne.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var m=Date,o=m.now();e.unstable_now=function(){return m.now()-o}}var w=[],E=[],I=1,D=null,O=3,P=!1,W=!1,H=!1,z=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(Ne){for(var Te=i(E);Te!==null;){if(Te.callback===null)a(E);else if(Te.startTime<=Ne)a(E),Te.sortIndex=Te.expirationTime,n(w,Te);else break;Te=i(E)}}function fe(Ne){if(H=!1,ae(Ne),!W)if(i(w)!==null)W=!0,lt(Fe);else{var Te=i(E);Te!==null&&ot(fe,Te.startTime-Ne)}}function Fe(Ne,Te){W=!1,H&&(H=!1,Z(Oe),Oe=-1),P=!0;var yt=O;try{for(ae(Te),D=i(w);D!==null&&(!(D.expirationTime>Te)||Ne&&!ue());){var Le=D.callback;if(typeof Le=="function"){D.callback=null,O=D.priorityLevel;var ie=Le(D.expirationTime<=Te);Te=e.unstable_now(),typeof ie=="function"?D.callback=ie:D===i(w)&&a(w),ae(Te)}else a(w);D=i(w)}if(D!==null)var Ce=!0;else{var Me=i(E);Me!==null&&ot(fe,Me.startTime-Te),Ce=!1}return Ce}finally{D=null,O=yt,P=!1}}var He=!1,Ve=null,Oe=-1,be=5,rt=-1;function ue(){return!(e.unstable_now()-rt<be)}function me(){if(Ve!==null){var Ne=e.unstable_now();rt=Ne;var Te=!0;try{Te=Ve(!0,Ne)}finally{Te?Ue():(He=!1,Ve=null)}}else He=!1}var Ue;if(typeof se=="function")Ue=function(){se(me)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,pt=Ie.port2;Ie.port1.onmessage=me,Ue=function(){pt.postMessage(null)}}else Ue=function(){z(me,0)};function lt(Ne){Ve=Ne,He||(He=!0,Ue())}function ot(Ne,Te){Oe=z(function(){Ne(e.unstable_now())},Te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){W||P||(W=!0,lt(Fe))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return i(w)},e.unstable_next=function(Ne){switch(O){case 1:case 2:case 3:var Te=3;break;default:Te=O}var yt=O;O=Te;try{return Ne()}finally{O=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,Te){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var yt=O;O=Ne;try{return Te()}finally{O=yt}},e.unstable_scheduleCallback=function(Ne,Te,yt){var Le=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Le+yt:Le):yt=Le,Ne){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=yt+ie,Ne={id:I++,callback:Te,priorityLevel:Ne,startTime:yt,expirationTime:ie,sortIndex:-1},yt>Le?(Ne.sortIndex=yt,n(E,Ne),i(w)===null&&Ne===i(E)&&(H?(Z(Oe),Oe=-1):H=!0,ot(fe,yt-Le))):(Ne.sortIndex=ie,n(w,Ne),W||P||(W=!0,lt(Fe))),Ne},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(Ne){var Te=O;return function(){var yt=O;O=Te;try{return Ne.apply(this,arguments)}finally{O=yt}}}})(Gv)),Gv}var kb;function jT(){return kb||(kb=1,Vv.exports=HT()),Vv.exports}var Ub;function VT(){if(Ub)return Yc;Ub=1;var e=mw(),n=jT();function i(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,C=1;C<arguments.length;C++)g+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function f(h,g){m(h,g),m(h+"Capture",g)}function m(h,g){for(u[h]=g,h=0;h<g.length;h++)a.add(g[h])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},D={};function O(h){return w.call(D,h)?!0:w.call(I,h)?!1:E.test(h)?D[h]=!0:(I[h]=!0,!1)}function P(h,g,C,k){if(C!==null&&C.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return k?!1:C!==null?!C.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function W(h,g,C,k){if(g===null||typeof g>"u"||P(h,g,C,k))return!0;if(k)return!1;if(C!==null)switch(C.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function H(h,g,C,k,G,Y,xe){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=k,this.attributeNamespace=G,this.mustUseProperty=C,this.propertyName=h,this.type=g,this.sanitizeURL=Y,this.removeEmptyString=xe}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){z[h]=new H(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var g=h[0];z[g]=new H(g,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){z[h]=new H(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){z[h]=new H(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){z[h]=new H(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){z[h]=new H(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){z[h]=new H(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){z[h]=new H(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){z[h]=new H(h,5,!1,h.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function se(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var g=h.replace(Z,se);z[g]=new H(g,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var g=h.replace(Z,se);z[g]=new H(g,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var g=h.replace(Z,se);z[g]=new H(g,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){z[h]=new H(h,1,!1,h.toLowerCase(),null,!1,!1)}),z.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){z[h]=new H(h,1,!1,h.toLowerCase(),null,!0,!0)});function ae(h,g,C,k){var G=z.hasOwnProperty(g)?z[g]:null;(G!==null?G.type!==0:k||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(W(g,C,G,k)&&(C=null),k||G===null?O(g)&&(C===null?h.removeAttribute(g):h.setAttribute(g,""+C)):G.mustUseProperty?h[G.propertyName]=C===null?G.type===3?!1:"":C:(g=G.attributeName,k=G.attributeNamespace,C===null?h.removeAttribute(g):(G=G.type,C=G===3||G===4&&C===!0?"":""+C,k?h.setAttributeNS(k,g,C):h.setAttribute(g,C))))}var fe=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fe=Symbol.for("react.element"),He=Symbol.for("react.portal"),Ve=Symbol.for("react.fragment"),Oe=Symbol.for("react.strict_mode"),be=Symbol.for("react.profiler"),rt=Symbol.for("react.provider"),ue=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),lt=Symbol.for("react.lazy"),ot=Symbol.for("react.offscreen"),Ne=Symbol.iterator;function Te(h){return h===null||typeof h!="object"?null:(h=Ne&&h[Ne]||h["@@iterator"],typeof h=="function"?h:null)}var yt=Object.assign,Le;function ie(h){if(Le===void 0)try{throw Error()}catch(C){var g=C.stack.trim().match(/\n( *(at )?)/);Le=g&&g[1]||""}return`
`+Le+h}var Ce=!1;function Me(h,g){if(!h||Ce)return"";Ce=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(jt){var k=jt}Reflect.construct(h,[],g)}else{try{g.call()}catch(jt){k=jt}h.call(g.prototype)}else{try{throw Error()}catch(jt){k=jt}h()}}catch(jt){if(jt&&k&&typeof jt.stack=="string"){for(var G=jt.stack.split(`
`),Y=k.stack.split(`
`),xe=G.length-1,ut=Y.length-1;1<=xe&&0<=ut&&G[xe]!==Y[ut];)ut--;for(;1<=xe&&0<=ut;xe--,ut--)if(G[xe]!==Y[ut]){if(xe!==1||ut!==1)do if(xe--,ut--,0>ut||G[xe]!==Y[ut]){var xt=`
`+G[xe].replace(" at new "," at ");return h.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",h.displayName)),xt}while(1<=xe&&0<=ut);break}}}finally{Ce=!1,Error.prepareStackTrace=C}return(h=h?h.displayName||h.name:"")?ie(h):""}function qe(h){switch(h.tag){case 5:return ie(h.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return h=Me(h.type,!1),h;case 11:return h=Me(h.type.render,!1),h;case 1:return h=Me(h.type,!0),h;default:return""}}function at(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Ve:return"Fragment";case He:return"Portal";case be:return"Profiler";case Oe:return"StrictMode";case Ue:return"Suspense";case Ie:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case ue:return(h.displayName||"Context")+".Consumer";case rt:return(h._context.displayName||"Context")+".Provider";case me:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case pt:return g=h.displayName||null,g!==null?g:at(h.type)||"Memo";case lt:g=h._payload,h=h._init;try{return at(h(g))}catch{}}return null}function et(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return at(g);case 8:return g===Oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function _t(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Et(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Pt(h){var g=Et(h)?"checked":"value",C=Object.getOwnPropertyDescriptor(h.constructor.prototype,g),k=""+h[g];if(!h.hasOwnProperty(g)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var G=C.get,Y=C.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return G.call(this)},set:function(xe){k=""+xe,Y.call(this,xe)}}),Object.defineProperty(h,g,{enumerable:C.enumerable}),{getValue:function(){return k},setValue:function(xe){k=""+xe},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function Kt(h){h._valueTracker||(h._valueTracker=Pt(h))}function ar(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var C=g.getValue(),k="";return h&&(k=Et(h)?h.checked?"true":"false":h.value),h=k,h!==C?(g.setValue(h),!0):!1}function hr(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Cr(h,g){var C=g.checked;return yt({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??h._wrapperState.initialChecked})}function je(h,g){var C=g.defaultValue==null?"":g.defaultValue,k=g.checked!=null?g.checked:g.defaultChecked;C=_t(g.value!=null?g.value:C),h._wrapperState={initialChecked:k,initialValue:C,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function vr(h,g){g=g.checked,g!=null&&ae(h,"checked",g,!1)}function Ur(h,g){vr(h,g);var C=_t(g.value),k=g.type;if(C!=null)k==="number"?(C===0&&h.value===""||h.value!=C)&&(h.value=""+C):h.value!==""+C&&(h.value=""+C);else if(k==="submit"||k==="reset"){h.removeAttribute("value");return}g.hasOwnProperty("value")?lr(h,g.type,C):g.hasOwnProperty("defaultValue")&&lr(h,g.type,_t(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(h.defaultChecked=!!g.defaultChecked)}function $r(h,g,C){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var k=g.type;if(!(k!=="submit"&&k!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+h._wrapperState.initialValue,C||g===h.value||(h.value=g),h.defaultValue=g}C=h.name,C!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,C!==""&&(h.name=C)}function lr(h,g,C){(g!=="number"||hr(h.ownerDocument)!==h)&&(C==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+C&&(h.defaultValue=""+C))}var Wr=Array.isArray;function Sr(h,g,C,k){if(h=h.options,g){g={};for(var G=0;G<C.length;G++)g["$"+C[G]]=!0;for(C=0;C<h.length;C++)G=g.hasOwnProperty("$"+h[C].value),h[C].selected!==G&&(h[C].selected=G),G&&k&&(h[C].defaultSelected=!0)}else{for(C=""+_t(C),g=null,G=0;G<h.length;G++){if(h[G].value===C){h[G].selected=!0,k&&(h[G].defaultSelected=!0);return}g!==null||h[G].disabled||(g=h[G])}g!==null&&(g.selected=!0)}}function Or(h,g){if(g.dangerouslySetInnerHTML!=null)throw Error(i(91));return yt({},g,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Rr(h,g){var C=g.value;if(C==null){if(C=g.children,g=g.defaultValue,C!=null){if(g!=null)throw Error(i(92));if(Wr(C)){if(1<C.length)throw Error(i(93));C=C[0]}g=C}g==null&&(g=""),C=g}h._wrapperState={initialValue:_t(C)}}function On(h,g){var C=_t(g.value),k=_t(g.defaultValue);C!=null&&(C=""+C,C!==h.value&&(h.value=C),g.defaultValue==null&&h.defaultValue!==C&&(h.defaultValue=C)),k!=null&&(h.defaultValue=""+k)}function hn(h){var g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function dt(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(h,g){return h==null||h==="http://www.w3.org/1999/xhtml"?dt(g):h==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var pe,ve=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,C,k,G){MSApp.execUnsafeLocalFunction(function(){return h(g,C,k,G)})}:h})(function(h,g){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=g;else{for(pe=pe||document.createElement("div"),pe.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=pe.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;g.firstChild;)h.appendChild(g.firstChild)}});function $e(h,g){if(g){var C=h.firstChild;if(C&&C===h.lastChild&&C.nodeType===3){C.nodeValue=g;return}}h.textContent=g}var Ze={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ct=["Webkit","ms","Moz","O"];Object.keys(Ze).forEach(function(h){Ct.forEach(function(g){g=g+h.charAt(0).toUpperCase()+h.substring(1),Ze[g]=Ze[h]})});function vt(h,g,C){return g==null||typeof g=="boolean"||g===""?"":C||typeof g!="number"||g===0||Ze.hasOwnProperty(h)&&Ze[h]?(""+g).trim():g+"px"}function ct(h,g){h=h.style;for(var C in g)if(g.hasOwnProperty(C)){var k=C.indexOf("--")===0,G=vt(C,g[C],k);C==="float"&&(C="cssFloat"),k?h.setProperty(C,G):h[C]=G}}var bt=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ht(h,g){if(g){if(bt[h]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(i(137,h));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(i(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(i(61))}if(g.style!=null&&typeof g.style!="object")throw Error(i(62))}}function Ft(h,g){if(h.indexOf("-")===-1)return typeof g.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function Jt(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var dr=null,rn=null,Tr=null;function mt(h){if(h=Ra(h)){if(typeof dr!="function")throw Error(i(280));var g=h.stateNode;g&&(g=HA(g),dr(h.stateNode,h.type,g))}}function tn(h){rn?Tr?Tr.push(h):Tr=[h]:rn=h}function Nr(){if(rn){var h=rn,g=Tr;if(Tr=rn=null,mt(h),g)for(h=0;h<g.length;h++)mt(g[h])}}function mr(h,g){return h(g)}function Kr(){}var Dn=!1;function wr(h,g,C){if(Dn)return h(g,C);Dn=!0;try{return mr(h,g,C)}finally{Dn=!1,(rn!==null||Tr!==null)&&(Kr(),Nr())}}function Tn(h,g){var C=h.stateNode;if(C===null)return null;var k=HA(C);if(k===null)return null;C=k[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(C&&typeof C!="function")throw Error(i(231,g,typeof C));return C}var Bn=!1;if(o)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Bn=!1}function Di(h,g,C,k,G,Y,xe,ut,xt){var jt=Array.prototype.slice.call(arguments,3);try{g.apply(C,jt)}catch(fr){this.onError(fr)}}var ai=!1,Yt=null,Zn=!1,$i=null,sl={onError:function(h){ai=!0,Yt=h}};function ns(h,g,C,k,G,Y,xe,ut,xt){ai=!1,Yt=null,Di.apply(sl,arguments)}function pr(h,g,C,k,G,Y,xe,ut,xt){if(ns.apply(this,arguments),ai){if(ai){var jt=Yt;ai=!1,Yt=null}else throw Error(i(198));Zn||(Zn=!0,$i=jt)}}function nn(h){var g=h,C=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(C=g.return),h=g.return;while(h)}return g.tag===3?C:null}function un(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function Ri(h){if(nn(h)!==h)throw Error(i(188))}function El(h){var g=h.alternate;if(!g){if(g=nn(h),g===null)throw Error(i(188));return g!==h?null:h}for(var C=h,k=g;;){var G=C.return;if(G===null)break;var Y=G.alternate;if(Y===null){if(k=G.return,k!==null){C=k;continue}break}if(G.child===Y.child){for(Y=G.child;Y;){if(Y===C)return Ri(G),h;if(Y===k)return Ri(G),g;Y=Y.sibling}throw Error(i(188))}if(C.return!==k.return)C=G,k=Y;else{for(var xe=!1,ut=G.child;ut;){if(ut===C){xe=!0,C=G,k=Y;break}if(ut===k){xe=!0,k=G,C=Y;break}ut=ut.sibling}if(!xe){for(ut=Y.child;ut;){if(ut===C){xe=!0,C=Y,k=G;break}if(ut===k){xe=!0,k=Y,C=G;break}ut=ut.sibling}if(!xe)throw Error(i(189))}}if(C.alternate!==k)throw Error(i(190))}if(C.tag!==3)throw Error(i(188));return C.stateNode.current===C?h:g}function ks(h){return h=El(h),h!==null?fn(h):null}function fn(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=fn(h);if(g!==null)return g;h=h.sibling}return null}var ol=n.unstable_scheduleCallback,al=n.unstable_cancelCallback,ec=n.unstable_shouldYield,Ec=n.unstable_requestPaint,di=n.unstable_now,tc=n.unstable_getCurrentPriorityLevel,Sl=n.unstable_ImmediatePriority,Ci=n.unstable_UserBlockingPriority,jn=n.unstable_NormalPriority,rA=n.unstable_LowPriority,ll=n.unstable_IdlePriority,cl=null,Us=null;function Ro(h){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(cl,h,void 0,(h.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:Mn,Ba=Math.log,IA=Math.LN2;function Mn(h){return h>>>=0,h===0?32:31-(Ba(h)/IA|0)|0}var Sc=64,No=4194304;function Qo(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Fc(h,g){var C=h.pendingLanes;if(C===0)return 0;var k=0,G=h.suspendedLanes,Y=h.pingedLanes,xe=C&268435455;if(xe!==0){var ut=xe&~G;ut!==0?k=Qo(ut):(Y&=xe,Y!==0&&(k=Qo(Y)))}else xe=C&~G,xe!==0?k=Qo(xe):Y!==0&&(k=Qo(Y));if(k===0)return 0;if(g!==0&&g!==k&&(g&G)===0&&(G=k&-k,Y=g&-g,G>=Y||G===16&&(Y&4194240)!==0))return g;if((k&4)!==0&&(k|=C&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=k;0<g;)C=31-ds(g),G=1<<C,k|=h[C],g&=~G;return k}function la(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(h,g){for(var C=h.suspendedLanes,k=h.pingedLanes,G=h.expirationTimes,Y=h.pendingLanes;0<Y;){var xe=31-ds(Y),ut=1<<xe,xt=G[xe];xt===-1?((ut&C)===0||(ut&k)!==0)&&(G[xe]=la(ut,g)):xt<=g&&(h.expiredLanes|=ut),Y&=~ut}}function Oo(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function nA(){var h=Sc;return Sc<<=1,(Sc&4194240)===0&&(Sc=64),h}function iA(h){for(var g=[],C=0;31>C;C++)g.push(h);return g}function rc(h,g,C){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-ds(g),h[g]=C}function Ca(h,g){var C=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var k=h.eventTimes;for(h=h.expirationTimes;0<C;){var G=31-ds(C),Y=1<<G;g[G]=0,k[G]=-1,h[G]=-1,C&=~Y}}function TA(h,g){var C=h.entangledLanes|=g;for(h=h.entanglements;C;){var k=31-ds(C),G=1<<k;G&g|h[k]&g&&(h[k]|=g),C&=~G}}var Kn=0;function Fl(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var nc,Il,PA,Ic,ca,Al=!1,an=[],Ea=null,zo=null,Ho=null,vs=new Map,qr=new Map,Jn=[],cn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(h,g){switch(h){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Ho=null;break;case"pointerover":case"pointerout":vs.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(g.pointerId)}}function _s(h,g,C,k,G,Y){return h===null||h.nativeEvent!==Y?(h={blockedOn:g,domEventName:C,eventSystemFlags:k,nativeEvent:Y,targetContainers:[G]},g!==null&&(g=Ra(g),g!==null&&Il(g)),h):(h.eventSystemFlags|=k,g=h.targetContainers,G!==null&&g.indexOf(G)===-1&&g.push(G),h)}function Wi(h,g,C,k,G){switch(g){case"focusin":return Ea=_s(Ea,h,g,C,k,G),!0;case"dragenter":return zo=_s(zo,h,g,C,k,G),!0;case"mouseover":return Ho=_s(Ho,h,g,C,k,G),!0;case"pointerover":var Y=G.pointerId;return vs.set(Y,_s(vs.get(Y)||null,h,g,C,k,G)),!0;case"gotpointercapture":return Y=G.pointerId,qr.set(Y,_s(qr.get(Y)||null,h,g,C,k,G)),!0}return!1}function uo(h){var g=Da(h.target);if(g!==null){var C=nn(g);if(C!==null){if(g=C.tag,g===13){if(g=un(C),g!==null){h.blockedOn=g,ca(h.priority,function(){PA(C)});return}}else if(g===3&&C.stateNode.current.memoizedState.isDehydrated){h.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}h.blockedOn=null}function ws(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var C=sc(h.domEventName,h.eventSystemFlags,g[0],h.nativeEvent);if(C===null){C=h.nativeEvent;var k=new C.constructor(C.type,C);cr=k,C.target.dispatchEvent(k),cr=null}else return g=Ra(C),g!==null&&Il(g),h.blockedOn=C,!1;g.shift()}return!0}function Sa(h,g,C){ws(h)&&C.delete(g)}function Fa(){Al=!1,Ea!==null&&ws(Ea)&&(Ea=null),zo!==null&&ws(zo)&&(zo=null),Ho!==null&&ws(Ho)&&(Ho=null),vs.forEach(Sa),qr.forEach(Sa)}function ti(h,g){h.blockedOn===g&&(h.blockedOn=null,Al||(Al=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Fa)))}function Aa(h){function g(G){return ti(G,h)}if(0<an.length){ti(an[0],h);for(var C=1;C<an.length;C++){var k=an[C];k.blockedOn===h&&(k.blockedOn=null)}}for(Ea!==null&&ti(Ea,h),zo!==null&&ti(zo,h),Ho!==null&&ti(Ho,h),vs.forEach(g),qr.forEach(g),C=0;C<Jn.length;C++)k=Jn[C],k.blockedOn===h&&(k.blockedOn=null);for(;0<Jn.length&&(C=Jn[0],C.blockedOn===null);)uo(C),C.blockedOn===null&&Jn.shift()}var Zi=fe.ReactCurrentBatchConfig,ic=!0;function qs(h,g,C,k){var G=Kn,Y=Zi.transition;Zi.transition=null;try{Kn=1,jo(h,g,C,k)}finally{Kn=G,Zi.transition=Y}}function ul(h,g,C,k){var G=Kn,Y=Zi.transition;Zi.transition=null;try{Kn=4,jo(h,g,C,k)}finally{Kn=G,Zi.transition=Y}}function jo(h,g,C,k){if(ic){var G=sc(h,g,C,k);if(G===null)Qc(h,g,k,ua,C),ii(h,k);else if(Wi(G,h,g,C,k))k.stopPropagation();else if(ii(h,k),g&4&&-1<cn.indexOf(h)){for(;G!==null;){var Y=Ra(G);if(Y!==null&&nc(Y),Y=sc(h,g,C,k),Y===null&&Qc(h,g,k,ua,C),Y===G)break;G=Y}G!==null&&k.stopPropagation()}else Qc(h,g,k,null,C)}}var ua=null;function sc(h,g,C,k){if(ua=null,h=Jt(k),h=Da(h),h!==null)if(g=nn(h),g===null)h=null;else if(C=g.tag,C===13){if(h=un(g),h!==null)return h;h=null}else if(C===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null);return ua=h,null}function ha(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tc()){case Sl:return 1;case Ci:return 4;case jn:case rA:return 16;case ll:return 536870912;default:return 16}default:return 16}}var Nn=null,Vo=null,En=null;function mn(){if(En)return En;var h,g=Vo,C=g.length,k,G="value"in Nn?Nn.value:Nn.textContent,Y=G.length;for(h=0;h<C&&g[h]===G[h];h++);var xe=C-h;for(k=1;k<=xe&&g[C-k]===G[Y-k];k++);return En=G.slice(h,1<k?1-k:void 0)}function Ia(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function bn(){return!0}function Go(){return!1}function Ei(h){function g(C,k,G,Y,xe){this._reactName=C,this._targetInst=G,this.type=k,this.nativeEvent=Y,this.target=xe,this.currentTarget=null;for(var ut in h)h.hasOwnProperty(ut)&&(C=h[ut],this[ut]=C?C(Y):Y[ut]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?bn:Go,this.isPropagationStopped=Go,this}return yt(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=bn)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=bn)},persist:function(){},isPersistent:bn}),g}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=Ei(ao),V=yt({},ao,{view:0,detail:0}),ye=Ei(V),Je,gt,It,Gt=yt({},V,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==It&&(It&&h.type==="mousemove"?(Je=h.screenX-It.screenX,gt=h.screenY-It.screenY):gt=Je=0,It=h),Je)},movementY:function(h){return"movementY"in h?h.movementY:gt}}),sr=Ei(Gt),br=yt({},Gt,{dataTransfer:0}),Vr=Ei(br),gn=yt({},V,{relatedTarget:0}),yn=Ei(gn),An=yt({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),ji=Ei(An),is=yt({},ao,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Si=Ei(is),Ds=yt({},ao,{data:0}),Mi=Ei(Ds),xs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pa(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=da[h])?!!g[h]:!1}function Ta(){return pa}var hl=yt({},V,{key:function(h){if(h.key){var g=xs[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=Ia(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Ko[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(h){return h.type==="keypress"?Ia(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Ia(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Fi=Ei(hl),Tc=yt({},Gt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=Ei(Tc),Pa=yt({},V,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),Xi=Ei(Pa),sA=yt({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tl=Ei(sA),ou=yt({},Gt,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Pl=Ei(ou),$s=[9,13,27,32],La=o&&"CompositionEvent"in window,fl=null;o&&"documentMode"in document&&(fl=document.documentMode);var LA=o&&"TextEvent"in window&&!fl,Bo=o&&(!La||fl&&8<fl&&11>=fl),Ll=" ",oA=!1;function aA(h,g){switch(h){case"keyup":return $s.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ml(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Ws=!1;function qo(h,g){switch(h){case"compositionend":return Ml(g);case"keypress":return g.which!==32?null:(oA=!0,Ll);case"textInput":return h=g.data,h===Ll&&oA?null:h;default:return null}}function Co(h,g){if(Ws)return h==="compositionend"||!La&&aA(h,g)?(h=mn(),En=Vo=Nn=null,Ws=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Bo&&g.locale!=="ko"?null:g.data;default:return null}}var ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dl(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!ga[h.type]:g==="textarea"}function Ma(h,g,C,k){tn(k),g=NA(g,"onChange"),0<g.length&&(C=new fa("onChange","change",null,C,k),h.push({event:C,listeners:g}))}var oc=null,kl=null;function ss(h){lu(h,0)}function pl(h){var g=Na(h);if(ar(g))return h}function ml(h,g){if(h==="change")return g}var ya=!1;if(o){var Pc;if(o){var Ul="oninput"in document;if(!Ul){var ho=document.createElement("div");ho.setAttribute("oninput","return;"),Ul=typeof ho.oninput=="function"}Pc=Ul}else Pc=!1;ya=Pc&&(!document.documentMode||9<document.documentMode)}function ac(){oc&&(oc.detachEvent("onpropertychange",gl),kl=oc=null)}function gl(h){if(h.propertyName==="value"&&pl(kl)){var g=[];Ma(g,kl,h,Jt(h)),wr(ss,g)}}function Dl(h,g,C){h==="focusin"?(ac(),oc=g,kl=C,oc.attachEvent("onpropertychange",gl)):h==="focusout"&&ac()}function Rl(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return pl(kl)}function Nl(h,g){if(h==="click")return pl(g)}function $o(h,g){if(h==="input"||h==="change")return pl(g)}function lc(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var os=typeof Object.is=="function"?Object.is:lc;function Eo(h,g){if(os(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var C=Object.keys(h),k=Object.keys(g);if(C.length!==k.length)return!1;for(k=0;k<C.length;k++){var G=C[k];if(!w.call(g,G)||!os(h[G],g[G]))return!1}return!0}function si(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function _i(h,g){var C=si(h);h=0;for(var k;C;){if(C.nodeType===3){if(k=h+C.textContent.length,h<=g&&k>=g)return{node:C,offset:g-h};h=k}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=si(C)}}function Yi(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?Yi(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function bs(){for(var h=window,g=hr();g instanceof h.HTMLIFrameElement;){try{var C=typeof g.contentWindow.location.href=="string"}catch{C=!1}if(C)h=g.contentWindow;else break;g=hr(h.document)}return g}function Pn(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}function Lc(h){var g=bs(),C=h.focusedElem,k=h.selectionRange;if(g!==C&&C&&C.ownerDocument&&Yi(C.ownerDocument.documentElement,C)){if(k!==null&&Pn(C)){if(g=k.start,h=k.end,h===void 0&&(h=g),"selectionStart"in C)C.selectionStart=g,C.selectionEnd=Math.min(h,C.value.length);else if(h=(g=C.ownerDocument||document)&&g.defaultView||window,h.getSelection){h=h.getSelection();var G=C.textContent.length,Y=Math.min(k.start,G);k=k.end===void 0?Y:Math.min(k.end,G),!h.extend&&Y>k&&(G=k,k=Y,Y=G),G=_i(C,Y);var xe=_i(C,k);G&&xe&&(h.rangeCount!==1||h.anchorNode!==G.node||h.anchorOffset!==G.offset||h.focusNode!==xe.node||h.focusOffset!==xe.offset)&&(g=g.createRange(),g.setStart(G.node,G.offset),h.removeAllRanges(),Y>k?(h.addRange(g),h.extend(xe.node,xe.offset)):(g.setEnd(xe.node,xe.offset),h.addRange(g)))}}for(g=[],h=C;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<g.length;C++)h=g[C],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var cc=o&&"documentMode"in document&&11>=document.documentMode,ka=null,MA=null,Ua=null,Mc=!1;function kc(h,g,C){var k=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;Mc||ka==null||ka!==hr(k)||(k=ka,"selectionStart"in k&&Pn(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Ua&&Eo(Ua,k)||(Ua=k,k=NA(MA,"onSelect"),0<k.length&&(g=new fa("onSelect","select",null,g,C),h.push({event:g,listeners:k}),g.target=ka)))}function fo(h,g){var C={};return C[h.toLowerCase()]=g.toLowerCase(),C["Webkit"+h]="webkit"+g,C["Moz"+h]="moz"+g,C}var Uc={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},Dc={},au={};o&&(au=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function yl(h){if(Dc[h])return Dc[h];if(!Uc[h])return h;var g=Uc[h],C;for(C in g)if(g.hasOwnProperty(C)&&C in au)return Dc[h]=g[C];return h}var kA=yl("animationend"),UA=yl("animationiteration"),lA=yl("animationstart"),DA=yl("transitionend"),Uu=new Map,Rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(h,g){Uu.set(h,g),f(g,[h])}for(var cA=0;cA<Rc.length;cA++){var lo=Rc[cA],pn=lo.toLowerCase(),AA=lo[0].toUpperCase()+lo.slice(1);So(pn,"on"+AA)}So(kA,"onAnimationEnd"),So(UA,"onAnimationIteration"),So(lA,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(DA,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ch=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nc));function Ac(h,g,C){var k=h.type||"unknown-event";h.currentTarget=C,pr(k,g,void 0,h),h.currentTarget=null}function lu(h,g){g=(g&4)!==0;for(var C=0;C<h.length;C++){var k=h[C],G=k.event;k=k.listeners;e:{var Y=void 0;if(g)for(var xe=k.length-1;0<=xe;xe--){var ut=k[xe],xt=ut.instance,jt=ut.currentTarget;if(ut=ut.listener,xt!==Y&&G.isPropagationStopped())break e;Ac(G,ut,jt),Y=xt}else for(xe=0;xe<k.length;xe++){if(ut=k[xe],xt=ut.instance,jt=ut.currentTarget,ut=ut.listener,xt!==Y&&G.isPropagationStopped())break e;Ac(G,ut,jt),Y=xt}}}if(Zn)throw h=$i,Zn=!1,$i=null,h}function Ii(h,g){var C=g[Zs];C===void 0&&(C=g[Zs]=new Set);var k=h+"__bubble";C.has(k)||(Ql(g,h,2,!1),C.add(k))}function cu(h,g,C){var k=0;g&&(k|=4),Ql(C,h,k,g)}var RA="_reactListening"+Math.random().toString(36).slice(2);function uc(h){if(!h[RA]){h[RA]=!0,a.forEach(function(C){C!=="selectionchange"&&(ch.has(C)||cu(C,!1,h),cu(C,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[RA]||(g[RA]=!0,cu("selectionchange",!1,g))}}function Ql(h,g,C,k){switch(ha(g)){case 1:var G=qs;break;case 4:G=ul;break;default:G=jo}C=G.bind(null,g,C,h),G=void 0,!Bn||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(G=!0),k?G!==void 0?h.addEventListener(g,C,{capture:!0,passive:G}):h.addEventListener(g,C,!0):G!==void 0?h.addEventListener(g,C,{passive:G}):h.addEventListener(g,C,!1)}function Qc(h,g,C,k,G){var Y=k;if((g&1)===0&&(g&2)===0&&k!==null)e:for(;;){if(k===null)return;var xe=k.tag;if(xe===3||xe===4){var ut=k.stateNode.containerInfo;if(ut===G||ut.nodeType===8&&ut.parentNode===G)break;if(xe===4)for(xe=k.return;xe!==null;){var xt=xe.tag;if((xt===3||xt===4)&&(xt=xe.stateNode.containerInfo,xt===G||xt.nodeType===8&&xt.parentNode===G))return;xe=xe.return}for(;ut!==null;){if(xe=Da(ut),xe===null)return;if(xt=xe.tag,xt===5||xt===6){k=Y=xe;continue e}ut=ut.parentNode}}k=k.return}wr(function(){var jt=Y,fr=Jt(C),yr=[];e:{var ur=Uu.get(h);if(ur!==void 0){var Qr=fa,en=h;switch(h){case"keypress":if(Ia(C)===0)break e;case"keydown":case"keyup":Qr=Fi;break;case"focusin":en="focus",Qr=yn;break;case"focusout":en="blur",Qr=yn;break;case"beforeblur":case"afterblur":Qr=yn;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qr=sr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qr=Vr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qr=Xi;break;case kA:case UA:case lA:Qr=ji;break;case DA:Qr=Tl;break;case"scroll":Qr=ye;break;case"wheel":Qr=Pl;break;case"copy":case"cut":case"paste":Qr=Si;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qr=ma}var Gr=(g&4)!==0,Ps=!Gr&&h==="scroll",Nt=Gr?ur!==null?ur+"Capture":null:ur;Gr=[];for(var St=jt,zt;St!==null;){zt=St;var Br=zt.stateNode;if(zt.tag===5&&Br!==null&&(zt=Br,Nt!==null&&(Br=Tn(St,Nt),Br!=null&&Gr.push(Oc(St,Br,zt)))),Ps)break;St=St.return}0<Gr.length&&(ur=new Qr(ur,en,null,C,fr),yr.push({event:ur,listeners:Gr}))}}if((g&7)===0){e:{if(ur=h==="mouseover"||h==="pointerover",Qr=h==="mouseout"||h==="pointerout",ur&&C!==cr&&(en=C.relatedTarget||C.fromElement)&&(Da(en)||en[Rs]))break e;if((Qr||ur)&&(ur=fr.window===fr?fr:(ur=fr.ownerDocument)?ur.defaultView||ur.parentWindow:window,Qr?(en=C.relatedTarget||C.toElement,Qr=jt,en=en?Da(en):null,en!==null&&(Ps=nn(en),en!==Ps||en.tag!==5&&en.tag!==6)&&(en=null)):(Qr=null,en=jt),Qr!==en)){if(Gr=sr,Br="onMouseLeave",Nt="onMouseEnter",St="mouse",(h==="pointerout"||h==="pointerover")&&(Gr=ma,Br="onPointerLeave",Nt="onPointerEnter",St="pointer"),Ps=Qr==null?ur:Na(Qr),zt=en==null?ur:Na(en),ur=new Gr(Br,St+"leave",Qr,C,fr),ur.target=Ps,ur.relatedTarget=zt,Br=null,Da(fr)===jt&&(Gr=new Gr(Nt,St+"enter",en,C,fr),Gr.target=zt,Gr.relatedTarget=Ps,Br=Gr),Ps=Br,Qr&&en)t:{for(Gr=Qr,Nt=en,St=0,zt=Gr;zt;zt=hc(zt))St++;for(zt=0,Br=Nt;Br;Br=hc(Br))zt++;for(;0<St-zt;)Gr=hc(Gr),St--;for(;0<zt-St;)Nt=hc(Nt),zt--;for(;St--;){if(Gr===Nt||Nt!==null&&Gr===Nt.alternate)break t;Gr=hc(Gr),Nt=hc(Nt)}Gr=null}else Gr=null;Qr!==null&&Au(yr,ur,Qr,Gr,!1),en!==null&&Ps!==null&&Au(yr,Ps,en,Gr,!0)}}e:{if(ur=jt?Na(jt):window,Qr=ur.nodeName&&ur.nodeName.toLowerCase(),Qr==="select"||Qr==="input"&&ur.type==="file")var ln=ml;else if(dl(ur))if(ya)ln=$o;else{ln=Rl;var _n=Dl}else(Qr=ur.nodeName)&&Qr.toLowerCase()==="input"&&(ur.type==="checkbox"||ur.type==="radio")&&(ln=Nl);if(ln&&(ln=ln(h,jt))){Ma(yr,ln,C,fr);break e}_n&&_n(h,ur,jt),h==="focusout"&&(_n=ur._wrapperState)&&_n.controlled&&ur.type==="number"&&lr(ur,"number",ur.value)}switch(_n=jt?Na(jt):window,h){case"focusin":(dl(_n)||_n.contentEditable==="true")&&(ka=_n,MA=jt,Ua=null);break;case"focusout":Ua=MA=ka=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,kc(yr,C,fr);break;case"selectionchange":if(cc)break;case"keydown":case"keyup":kc(yr,C,fr)}var wn;if(La)e:{switch(h){case"compositionstart":var Ln="onCompositionStart";break e;case"compositionend":Ln="onCompositionEnd";break e;case"compositionupdate":Ln="onCompositionUpdate";break e}Ln=void 0}else Ws?aA(h,C)&&(Ln="onCompositionEnd"):h==="keydown"&&C.keyCode===229&&(Ln="onCompositionStart");Ln&&(Bo&&C.locale!=="ko"&&(Ws||Ln!=="onCompositionStart"?Ln==="onCompositionEnd"&&Ws&&(wn=mn()):(Nn=fr,Vo="value"in Nn?Nn.value:Nn.textContent,Ws=!0)),_n=NA(jt,Ln),0<_n.length&&(Ln=new Mi(Ln,h,null,C,fr),yr.push({event:Ln,listeners:_n}),wn?Ln.data=wn:(wn=Ml(C),wn!==null&&(Ln.data=wn)))),(wn=LA?qo(h,C):Co(h,C))&&(jt=NA(jt,"onBeforeInput"),0<jt.length&&(fr=new Mi("onBeforeInput","beforeinput",null,C,fr),yr.push({event:fr,listeners:jt}),fr.data=wn))}lu(yr,g)})}function Oc(h,g,C){return{instance:h,listener:g,currentTarget:C}}function NA(h,g){for(var C=g+"Capture",k=[];h!==null;){var G=h,Y=G.stateNode;G.tag===5&&Y!==null&&(G=Y,Y=Tn(h,C),Y!=null&&k.unshift(Oc(h,Y,G)),Y=Tn(h,g),Y!=null&&k.push(Oc(h,Y,G))),h=h.return}return k}function hc(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Au(h,g,C,k,G){for(var Y=g._reactName,xe=[];C!==null&&C!==k;){var ut=C,xt=ut.alternate,jt=ut.stateNode;if(xt!==null&&xt===k)break;ut.tag===5&&jt!==null&&(ut=jt,G?(xt=Tn(C,Y),xt!=null&&xe.unshift(Oc(C,xt,ut))):G||(xt=Tn(C,Y),xt!=null&&xe.push(Oc(C,xt,ut)))),C=C.return}xe.length!==0&&h.push({event:g,listeners:xe})}var Du=/\r\n?/g,uA=/\u0000|\uFFFD/g;function zc(h){return(typeof h=="string"?h:""+h).replace(Du,`
`).replace(uA,"")}function QA(h,g,C){if(g=zc(g),zc(h)!==g&&C)throw Error(i(425))}function OA(){}var fc=null,hA=null;function Ru(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var fA=typeof setTimeout=="function"?setTimeout:void 0,uu=typeof clearTimeout=="function"?clearTimeout:void 0,Ah=typeof Promise=="function"?Promise:void 0,jh=typeof queueMicrotask=="function"?queueMicrotask:typeof Ah<"u"?function(h){return Ah.resolve(null).then(h).catch(hu)}:fA;function hu(h){setTimeout(function(){throw h})}function zA(h,g){var C=g,k=0;do{var G=C.nextSibling;if(h.removeChild(C),G&&G.nodeType===8)if(C=G.data,C==="/$"){if(k===0){h.removeChild(G),Aa(g);return}k--}else C!=="$"&&C!=="$?"&&C!=="$!"||k++;C=G}while(C);Aa(g)}function po(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return h}function va(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var C=h.data;if(C==="$"||C==="$!"||C==="$?"){if(g===0)return h;g--}else C==="/$"&&g++}h=h.previousSibling}return null}var $n=Math.random().toString(36).slice(2),mo="__reactFiber$"+$n,co="__reactProps$"+$n,Rs="__reactContainer$"+$n,Zs="__reactEvents$"+$n,Nu="__reactListeners$"+$n,Hc="__reactHandles$"+$n;function Da(h){var g=h[mo];if(g)return g;for(var C=h.parentNode;C;){if(g=C[Rs]||C[mo]){if(C=g.alternate,g.child!==null||C!==null&&C.child!==null)for(h=va(h);h!==null;){if(C=h[mo])return C;h=va(h)}return g}h=C,C=h.parentNode}return null}function Ra(h){return h=h[mo]||h[Rs],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Na(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(i(33))}function HA(h){return h[co]||null}var Qu=[],Ol=-1;function Qa(h){return{current:h}}function li(h){0>Ol||(h.current=Qu[Ol],Qu[Ol]=null,Ol--)}function Xn(h,g){Ol++,Qu[Ol]=h.current,h.current=g}var zl={},Ns=Qa(zl),Xs=Qa(!1),jc=zl;function Vc(h,g){var C=h.type.contextTypes;if(!C)return zl;var k=h.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===g)return k.__reactInternalMemoizedMaskedChildContext;var G={},Y;for(Y in C)G[Y]=g[Y];return k&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=G),G}function go(h){return h=h.childContextTypes,h!=null}function fu(){li(Xs),li(Ns)}function Ou(h,g,C){if(Ns.current!==zl)throw Error(i(168));Xn(Ns,g),Xn(Xs,C)}function dA(h,g,C){var k=h.stateNode;if(g=g.childContextTypes,typeof k.getChildContext!="function")return C;k=k.getChildContext();for(var G in k)if(!(G in g))throw Error(i(108,et(h)||"Unknown",G));return yt({},C,k)}function Oa(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||zl,jc=Ns.current,Xn(Ns,h),Xn(Xs,Xs.current),!0}function _a(h,g,C){var k=h.stateNode;if(!k)throw Error(i(169));C?(h=dA(h,g,jc),k.__reactInternalMemoizedMergedChildContext=h,li(Xs),li(Ns),Xn(Ns,h)):li(Xs),Xn(Xs,C)}var Qs=null,jA=!1,T=!1;function R(h){Qs===null?Qs=[h]:Qs.push(h)}function $(h){jA=!0,R(h)}function re(){if(!T&&Qs!==null){T=!0;var h=0,g=Kn;try{var C=Qs;for(Kn=1;h<C.length;h++){var k=C[h];do k=k(!0);while(k!==null)}Qs=null,jA=!1}catch(G){throw Qs!==null&&(Qs=Qs.slice(h+1)),ol(Sl,re),G}finally{Kn=g,T=!1}}return null}var ge=[],we=0,Ee=null,Pe=0,Re=[],Ke=0,We=null,kt=1,Ye="";function Bt(h,g){ge[we++]=Pe,ge[we++]=Ee,Ee=h,Pe=g}function Tt(h,g,C){Re[Ke++]=kt,Re[Ke++]=Ye,Re[Ke++]=We,We=h;var k=kt;h=Ye;var G=32-ds(k)-1;k&=~(1<<G),C+=1;var Y=32-ds(g)+G;if(30<Y){var xe=G-G%5;Y=(k&(1<<xe)-1).toString(32),k>>=xe,G-=xe,kt=1<<32-ds(g)+G|C<<G|k,Ye=Y+h}else kt=1<<Y|C<<G|k,Ye=h}function Zt(h){h.return!==null&&(Bt(h,1),Tt(h,1,0))}function Ut(h){for(;h===Ee;)Ee=ge[--we],ge[we]=null,Pe=ge[--we],ge[we]=null;for(;h===We;)We=Re[--Ke],Re[Ke]=null,Ye=Re[--Ke],Re[Ke]=null,kt=Re[--Ke],Re[Ke]=null}var qt=null,Wt=null,tr=!1,er=null;function sn(h,g){var C=_c(5,null,null,0);C.elementType="DELETED",C.stateNode=g,C.return=h,g=h.deletions,g===null?(h.deletions=[C],h.flags|=16):g.push(C)}function zr(h,g){switch(h.tag){case 5:var C=h.type;return g=g.nodeType!==1||C.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(h.stateNode=g,qt=h,Wt=po(g.firstChild),!0):!1;case 6:return g=h.pendingProps===""||g.nodeType!==3?null:g,g!==null?(h.stateNode=g,qt=h,Wt=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(C=We!==null?{id:kt,overflow:Ye}:null,h.memoizedState={dehydrated:g,treeContext:C,retryLane:1073741824},C=_c(18,null,null,0),C.stateNode=g,C.return=h,h.child=C,qt=h,Wt=null,!0):!1;default:return!1}}function Cn(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Zr(h){if(tr){var g=Wt;if(g){var C=g;if(!zr(h,g)){if(Cn(h))throw Error(i(418));g=po(C.nextSibling);var k=qt;g&&zr(h,g)?sn(k,C):(h.flags=h.flags&-4097|2,tr=!1,qt=h)}}else{if(Cn(h))throw Error(i(418));h.flags=h.flags&-4097|2,tr=!1,qt=h}}}function Qn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;qt=h}function Ni(h){if(h!==qt)return!1;if(!tr)return Qn(h),tr=!0,!1;var g;if((g=h.tag!==3)&&!(g=h.tag!==5)&&(g=h.type,g=g!=="head"&&g!=="body"&&!Ru(h.type,h.memoizedProps)),g&&(g=Wt)){if(Cn(h))throw Sn(),Error(i(418));for(;g;)sn(h,g),g=po(g.nextSibling)}if(Qn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));e:{for(h=h.nextSibling,g=0;h;){if(h.nodeType===8){var C=h.data;if(C==="/$"){if(g===0){Wt=po(h.nextSibling);break e}g--}else C!=="$"&&C!=="$!"&&C!=="$?"||g++}h=h.nextSibling}Wt=null}}else Wt=qt?po(h.stateNode.nextSibling):null;return!0}function Sn(){for(var h=Wt;h;)h=po(h.nextSibling)}function Hr(){Wt=qt=null,tr=!1}function Fr(h){er===null?er=[h]:er.push(h)}var pi=fe.ReactCurrentBatchConfig;function Mr(h,g,C){if(h=C.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(i(309));var k=C.stateNode}if(!k)throw Error(i(147,h));var G=k,Y=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===Y?g.ref:(g=function(xe){var ut=G.refs;xe===null?delete ut[Y]:ut[Y]=xe},g._stringRef=Y,g)}if(typeof h!="string")throw Error(i(284));if(!C._owner)throw Error(i(290,h))}return h}function zn(h,g){throw h=Object.prototype.toString.call(g),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function mi(h){var g=h._init;return g(h._payload)}function as(h){function g(Nt,St){if(h){var zt=Nt.deletions;zt===null?(Nt.deletions=[St],Nt.flags|=16):zt.push(St)}}function C(Nt,St){if(!h)return null;for(;St!==null;)g(Nt,St),St=St.sibling;return null}function k(Nt,St){for(Nt=new Map;St!==null;)St.key!==null?Nt.set(St.key,St):Nt.set(St.index,St),St=St.sibling;return Nt}function G(Nt,St){return Nt=yu(Nt,St),Nt.index=0,Nt.sibling=null,Nt}function Y(Nt,St,zt){return Nt.index=zt,h?(zt=Nt.alternate,zt!==null?(zt=zt.index,zt<St?(Nt.flags|=2,St):zt):(Nt.flags|=2,St)):(Nt.flags|=1048576,St)}function xe(Nt){return h&&Nt.alternate===null&&(Nt.flags|=2),Nt}function ut(Nt,St,zt,Br){return St===null||St.tag!==6?(St=Vp(zt,Nt.mode,Br),St.return=Nt,St):(St=G(St,zt),St.return=Nt,St)}function xt(Nt,St,zt,Br){var ln=zt.type;return ln===Ve?fr(Nt,St,zt.props.children,Br,zt.key):St!==null&&(St.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===lt&&mi(ln)===St.type)?(Br=G(St,zt.props),Br.ref=Mr(Nt,St,zt),Br.return=Nt,Br):(Br=Qf(zt.type,zt.key,zt.props,null,Nt.mode,Br),Br.ref=Mr(Nt,St,zt),Br.return=Nt,Br)}function jt(Nt,St,zt,Br){return St===null||St.tag!==4||St.stateNode.containerInfo!==zt.containerInfo||St.stateNode.implementation!==zt.implementation?(St=Bd(zt,Nt.mode,Br),St.return=Nt,St):(St=G(St,zt.children||[]),St.return=Nt,St)}function fr(Nt,St,zt,Br,ln){return St===null||St.tag!==7?(St=Eh(zt,Nt.mode,Br,ln),St.return=Nt,St):(St=G(St,zt),St.return=Nt,St)}function yr(Nt,St,zt){if(typeof St=="string"&&St!==""||typeof St=="number")return St=Vp(""+St,Nt.mode,zt),St.return=Nt,St;if(typeof St=="object"&&St!==null){switch(St.$$typeof){case Fe:return zt=Qf(St.type,St.key,St.props,null,Nt.mode,zt),zt.ref=Mr(Nt,null,St),zt.return=Nt,zt;case He:return St=Bd(St,Nt.mode,zt),St.return=Nt,St;case lt:var Br=St._init;return yr(Nt,Br(St._payload),zt)}if(Wr(St)||Te(St))return St=Eh(St,Nt.mode,zt,null),St.return=Nt,St;zn(Nt,St)}return null}function ur(Nt,St,zt,Br){var ln=St!==null?St.key:null;if(typeof zt=="string"&&zt!==""||typeof zt=="number")return ln!==null?null:ut(Nt,St,""+zt,Br);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case Fe:return zt.key===ln?xt(Nt,St,zt,Br):null;case He:return zt.key===ln?jt(Nt,St,zt,Br):null;case lt:return ln=zt._init,ur(Nt,St,ln(zt._payload),Br)}if(Wr(zt)||Te(zt))return ln!==null?null:fr(Nt,St,zt,Br,null);zn(Nt,zt)}return null}function Qr(Nt,St,zt,Br,ln){if(typeof Br=="string"&&Br!==""||typeof Br=="number")return Nt=Nt.get(zt)||null,ut(St,Nt,""+Br,ln);if(typeof Br=="object"&&Br!==null){switch(Br.$$typeof){case Fe:return Nt=Nt.get(Br.key===null?zt:Br.key)||null,xt(St,Nt,Br,ln);case He:return Nt=Nt.get(Br.key===null?zt:Br.key)||null,jt(St,Nt,Br,ln);case lt:var _n=Br._init;return Qr(Nt,St,zt,_n(Br._payload),ln)}if(Wr(Br)||Te(Br))return Nt=Nt.get(zt)||null,fr(St,Nt,Br,ln,null);zn(St,Br)}return null}function en(Nt,St,zt,Br){for(var ln=null,_n=null,wn=St,Ln=St=0,Po=null;wn!==null&&Ln<zt.length;Ln++){wn.index>Ln?(Po=wn,wn=null):Po=wn.sibling;var vi=ur(Nt,wn,zt[Ln],Br);if(vi===null){wn===null&&(wn=Po);break}h&&wn&&vi.alternate===null&&g(Nt,wn),St=Y(vi,St,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi,wn=Po}if(Ln===zt.length)return C(Nt,wn),tr&&Bt(Nt,Ln),ln;if(wn===null){for(;Ln<zt.length;Ln++)wn=yr(Nt,zt[Ln],Br),wn!==null&&(St=Y(wn,St,Ln),_n===null?ln=wn:_n.sibling=wn,_n=wn);return tr&&Bt(Nt,Ln),ln}for(wn=k(Nt,wn);Ln<zt.length;Ln++)Po=Qr(wn,Nt,Ln,zt[Ln],Br),Po!==null&&(h&&Po.alternate!==null&&wn.delete(Po.key===null?Ln:Po.key),St=Y(Po,St,Ln),_n===null?ln=Po:_n.sibling=Po,_n=Po);return h&&wn.forEach(function(Za){return g(Nt,Za)}),tr&&Bt(Nt,Ln),ln}function Gr(Nt,St,zt,Br){var ln=Te(zt);if(typeof ln!="function")throw Error(i(150));if(zt=ln.call(zt),zt==null)throw Error(i(151));for(var _n=ln=null,wn=St,Ln=St=0,Po=null,vi=zt.next();wn!==null&&!vi.done;Ln++,vi=zt.next()){wn.index>Ln?(Po=wn,wn=null):Po=wn.sibling;var Za=ur(Nt,wn,vi.value,Br);if(Za===null){wn===null&&(wn=Po);break}h&&wn&&Za.alternate===null&&g(Nt,wn),St=Y(Za,St,Ln),_n===null?ln=Za:_n.sibling=Za,_n=Za,wn=Po}if(vi.done)return C(Nt,wn),tr&&Bt(Nt,Ln),ln;if(wn===null){for(;!vi.done;Ln++,vi=zt.next())vi=yr(Nt,vi.value,Br),vi!==null&&(St=Y(vi,St,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi);return tr&&Bt(Nt,Ln),ln}for(wn=k(Nt,wn);!vi.done;Ln++,vi=zt.next())vi=Qr(wn,Nt,Ln,vi.value,Br),vi!==null&&(h&&vi.alternate!==null&&wn.delete(vi.key===null?Ln:vi.key),St=Y(vi,St,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi);return h&&wn.forEach(function($u){return g(Nt,$u)}),tr&&Bt(Nt,Ln),ln}function Ps(Nt,St,zt,Br){if(typeof zt=="object"&&zt!==null&&zt.type===Ve&&zt.key===null&&(zt=zt.props.children),typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case Fe:e:{for(var ln=zt.key,_n=St;_n!==null;){if(_n.key===ln){if(ln=zt.type,ln===Ve){if(_n.tag===7){C(Nt,_n.sibling),St=G(_n,zt.props.children),St.return=Nt,Nt=St;break e}}else if(_n.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===lt&&mi(ln)===_n.type){C(Nt,_n.sibling),St=G(_n,zt.props),St.ref=Mr(Nt,_n,zt),St.return=Nt,Nt=St;break e}C(Nt,_n);break}else g(Nt,_n);_n=_n.sibling}zt.type===Ve?(St=Eh(zt.props.children,Nt.mode,Br,zt.key),St.return=Nt,Nt=St):(Br=Qf(zt.type,zt.key,zt.props,null,Nt.mode,Br),Br.ref=Mr(Nt,St,zt),Br.return=Nt,Nt=Br)}return xe(Nt);case He:e:{for(_n=zt.key;St!==null;){if(St.key===_n)if(St.tag===4&&St.stateNode.containerInfo===zt.containerInfo&&St.stateNode.implementation===zt.implementation){C(Nt,St.sibling),St=G(St,zt.children||[]),St.return=Nt,Nt=St;break e}else{C(Nt,St);break}else g(Nt,St);St=St.sibling}St=Bd(zt,Nt.mode,Br),St.return=Nt,Nt=St}return xe(Nt);case lt:return _n=zt._init,Ps(Nt,St,_n(zt._payload),Br)}if(Wr(zt))return en(Nt,St,zt,Br);if(Te(zt))return Gr(Nt,St,zt,Br);zn(Nt,zt)}return typeof zt=="string"&&zt!==""||typeof zt=="number"?(zt=""+zt,St!==null&&St.tag===6?(C(Nt,St.sibling),St=G(St,zt),St.return=Nt,Nt=St):(C(Nt,St),St=Vp(zt,Nt.mode,Br),St.return=Nt,Nt=St),xe(Nt)):C(Nt,St)}return Ps}var ls=as(!0),Qi=as(!1),Bs=Qa(null),Cs=null,Oi=null,Fn=null;function Yn(){Fn=Oi=Cs=null}function gr(h){var g=Bs.current;li(Bs),h._currentValue=g}function xr(h,g,C){for(;h!==null;){var k=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,k!==null&&(k.childLanes|=g)):k!==null&&(k.childLanes&g)!==g&&(k.childLanes|=g),h===C)break;h=h.return}}function Ti(h,g){Cs=h,Fn=Oi=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&g)!==0&&(qa=!0),h.firstContext=null)}function Vi(h){var g=h._currentValue;if(Fn!==h)if(h={context:h,memoizedValue:g,next:null},Oi===null){if(Cs===null)throw Error(i(308));Oi=h,Cs.dependencies={lanes:0,firstContext:h}}else Oi=Oi.next=h;return g}var ei=null;function ci(h){ei===null?ei=[h]:ei.push(h)}function Rn(h,g,C,k){var G=g.interleaved;return G===null?(C.next=C,ci(g)):(C.next=G.next,G.next=C),g.interleaved=C,wi(h,k)}function wi(h,g){h.lanes|=g;var C=h.alternate;for(C!==null&&(C.lanes|=g),C=h,h=h.return;h!==null;)h.childLanes|=g,C=h.alternate,C!==null&&(C.childLanes|=g),C=h,h=h.return;return C.tag===3?C.stateNode:null}var Es=!1;function Ys(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ki(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function In(h,g,C){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,(yi&2)!==0){var G=k.pending;return G===null?g.next=g:(g.next=G.next,G.next=g),k.pending=g,wi(h,C)}return G=k.interleaved,G===null?(g.next=g,ci(k)):(g.next=G.next,G.next=g),k.interleaved=g,wi(h,C)}function Vn(h,g,C){if(g=g.updateQueue,g!==null&&(g=g.shared,(C&4194240)!==0)){var k=g.lanes;k&=h.pendingLanes,C|=k,g.lanes=C,TA(h,C)}}function xi(h,g){var C=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,C===k)){var G=null,Y=null;if(C=C.firstBaseUpdate,C!==null){do{var xe={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};Y===null?G=Y=xe:Y=Y.next=xe,C=C.next}while(C!==null);Y===null?G=Y=g:Y=Y.next=g}else G=Y=g;C={baseState:k.baseState,firstBaseUpdate:G,lastBaseUpdate:Y,shared:k.shared,effects:k.effects},h.updateQueue=C;return}h=C.lastBaseUpdate,h===null?C.firstBaseUpdate=g:h.next=g,C.lastBaseUpdate=g}function Ss(h,g,C,k){var G=h.updateQueue;Es=!1;var Y=G.firstBaseUpdate,xe=G.lastBaseUpdate,ut=G.shared.pending;if(ut!==null){G.shared.pending=null;var xt=ut,jt=xt.next;xt.next=null,xe===null?Y=jt:xe.next=jt,xe=xt;var fr=h.alternate;fr!==null&&(fr=fr.updateQueue,ut=fr.lastBaseUpdate,ut!==xe&&(ut===null?fr.firstBaseUpdate=jt:ut.next=jt,fr.lastBaseUpdate=xt))}if(Y!==null){var yr=G.baseState;xe=0,fr=jt=xt=null,ut=Y;do{var ur=ut.lane,Qr=ut.eventTime;if((k&ur)===ur){fr!==null&&(fr=fr.next={eventTime:Qr,lane:0,tag:ut.tag,payload:ut.payload,callback:ut.callback,next:null});e:{var en=h,Gr=ut;switch(ur=g,Qr=C,Gr.tag){case 1:if(en=Gr.payload,typeof en=="function"){yr=en.call(Qr,yr,ur);break e}yr=en;break e;case 3:en.flags=en.flags&-65537|128;case 0:if(en=Gr.payload,ur=typeof en=="function"?en.call(Qr,yr,ur):en,ur==null)break e;yr=yt({},yr,ur);break e;case 2:Es=!0}}ut.callback!==null&&ut.lane!==0&&(h.flags|=64,ur=G.effects,ur===null?G.effects=[ut]:ur.push(ut))}else Qr={eventTime:Qr,lane:ur,tag:ut.tag,payload:ut.payload,callback:ut.callback,next:null},fr===null?(jt=fr=Qr,xt=yr):fr=fr.next=Qr,xe|=ur;if(ut=ut.next,ut===null){if(ut=G.shared.pending,ut===null)break;ur=ut,ut=ur.next,ur.next=null,G.lastBaseUpdate=ur,G.shared.pending=null}}while(!0);if(fr===null&&(xt=yr),G.baseState=xt,G.firstBaseUpdate=jt,G.lastBaseUpdate=fr,g=G.shared.interleaved,g!==null){G=g;do xe|=G.lane,G=G.next;while(G!==g)}else Y===null&&(G.shared.lanes=0);Hi|=xe,h.lanes=xe,h.memoizedState=yr}}function Io(h,g,C){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var k=h[g],G=k.callback;if(G!==null){if(k.callback=null,k=C,typeof G!="function")throw Error(i(191,G));G.call(k)}}}var Js={},Fs=Qa(Js),Ji=Qa(Js),za=Qa(Js);function Ha(h){if(h===Js)throw Error(i(174));return h}function Gc(h,g){switch(Xn(za,g),Xn(Ji,h),Xn(Fs,Js),h=g.nodeType,h){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:de(null,"");break;default:h=h===8?g.parentNode:g,g=h.namespaceURI||null,h=h.tagName,g=de(g,h)}li(Fs),Xn(Fs,g)}function ja(){li(Fs),li(Ji),li(za)}function Hl(h){Ha(za.current);var g=Ha(Fs.current),C=de(g,h.type);g!==C&&(Xn(Ji,h),Xn(Fs,C))}function VA(h){Ji.current===h&&(li(Fs),li(Ji))}var gi=Qa(0);function Wo(h){for(var g=h;g!==null;){if(g.tag===13){var C=g.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var pA=[];function du(){for(var h=0;h<pA.length;h++)pA[h]._workInProgressVersionPrimary=null;pA.length=0}var jl=fe.ReactCurrentDispatcher,Vl=fe.ReactCurrentBatchConfig,Va=0,bi=null,Ui=null,es=null,Kc=!1,Ga=!1,qc=0,x=0;function r(){throw Error(i(321))}function c(h,g){if(g===null)return!1;for(var C=0;C<g.length&&C<h.length;C++)if(!os(h[C],g[C]))return!1;return!0}function d(h,g,C,k,G,Y){if(Va=Y,bi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,jl.current=h===null||h.memoizedState===null?Ki:eo,h=C(k,G),Ga){Y=0;do{if(Ga=!1,qc=0,25<=Y)throw Error(i(301));Y+=1,es=Ui=null,g.updateQueue=null,jl.current=Ts,h=C(k,G)}while(Ga)}if(jl.current=Is,g=Ui!==null&&Ui.next!==null,Va=0,es=Ui=bi=null,Kc=!1,g)throw Error(i(300));return h}function y(){var h=qc!==0;return qc=0,h}function b(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?bi.memoizedState=es=h:es=es.next=h,es}function S(){if(Ui===null){var h=bi.alternate;h=h!==null?h.memoizedState:null}else h=Ui.next;var g=es===null?bi.memoizedState:es.next;if(g!==null)es=g,Ui=h;else{if(h===null)throw Error(i(310));Ui=h,h={memoizedState:Ui.memoizedState,baseState:Ui.baseState,baseQueue:Ui.baseQueue,queue:Ui.queue,next:null},es===null?bi.memoizedState=es=h:es=es.next=h}return es}function M(h,g){return typeof g=="function"?g(h):g}function N(h){var g=S(),C=g.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=h;var k=Ui,G=k.baseQueue,Y=C.pending;if(Y!==null){if(G!==null){var xe=G.next;G.next=Y.next,Y.next=xe}k.baseQueue=G=Y,C.pending=null}if(G!==null){Y=G.next,k=k.baseState;var ut=xe=null,xt=null,jt=Y;do{var fr=jt.lane;if((Va&fr)===fr)xt!==null&&(xt=xt.next={lane:0,action:jt.action,hasEagerState:jt.hasEagerState,eagerState:jt.eagerState,next:null}),k=jt.hasEagerState?jt.eagerState:h(k,jt.action);else{var yr={lane:fr,action:jt.action,hasEagerState:jt.hasEagerState,eagerState:jt.eagerState,next:null};xt===null?(ut=xt=yr,xe=k):xt=xt.next=yr,bi.lanes|=fr,Hi|=fr}jt=jt.next}while(jt!==null&&jt!==Y);xt===null?xe=k:xt.next=ut,os(k,g.memoizedState)||(qa=!0),g.memoizedState=k,g.baseState=xe,g.baseQueue=xt,C.lastRenderedState=k}if(h=C.interleaved,h!==null){G=h;do Y=G.lane,bi.lanes|=Y,Hi|=Y,G=G.next;while(G!==h)}else G===null&&(C.lanes=0);return[g.memoizedState,C.dispatch]}function j(h){var g=S(),C=g.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=h;var k=C.dispatch,G=C.pending,Y=g.memoizedState;if(G!==null){C.pending=null;var xe=G=G.next;do Y=h(Y,xe.action),xe=xe.next;while(xe!==G);os(Y,g.memoizedState)||(qa=!0),g.memoizedState=Y,g.baseQueue===null&&(g.baseState=Y),C.lastRenderedState=Y}return[Y,k]}function q(){}function ne(h,g){var C=bi,k=S(),G=g(),Y=!os(k.memoizedState,G);if(Y&&(k.memoizedState=G,qa=!0),k=k.queue,nt(_e.bind(null,C,k,h),[h]),k.getSnapshot!==g||Y||es!==null&&es.memoizedState.tag&1){if(C.flags|=2048,Ge(9,Ae.bind(null,C,k,G,g),void 0,null),ta===null)throw Error(i(349));(Va&30)!==0||ee(C,g,G)}return G}function ee(h,g,C){h.flags|=16384,h={getSnapshot:g,value:C},g=bi.updateQueue,g===null?(g={lastEffect:null,stores:null},bi.updateQueue=g,g.stores=[h]):(C=g.stores,C===null?g.stores=[h]:C.push(h))}function Ae(h,g,C,k){g.value=C,g.getSnapshot=k,De(g)&&ze(h)}function _e(h,g,C){return C(function(){De(g)&&ze(h)})}function De(h){var g=h.getSnapshot;h=h.value;try{var C=g();return!os(h,C)}catch{return!0}}function ze(h){var g=wi(h,1);g!==null&&vc(g,h,1,-1)}function Qe(h){var g=b();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:h},g.queue=h,h=h.dispatch=zi.bind(null,bi,h),[g.memoizedState,h]}function Ge(h,g,C,k){return h={tag:h,create:g,destroy:C,deps:k,next:null},g=bi.updateQueue,g===null?(g={lastEffect:null,stores:null},bi.updateQueue=g,g.lastEffect=h.next=h):(C=g.lastEffect,C===null?g.lastEffect=h.next=h:(k=C.next,C.next=h,h.next=k,g.lastEffect=h)),h}function st(){return S().memoizedState}function Xe(h,g,C,k){var G=b();bi.flags|=h,G.memoizedState=Ge(1|g,C,void 0,k===void 0?null:k)}function At(h,g,C,k){var G=S();k=k===void 0?null:k;var Y=void 0;if(Ui!==null){var xe=Ui.memoizedState;if(Y=xe.destroy,k!==null&&c(k,xe.deps)){G.memoizedState=Ge(g,C,Y,k);return}}bi.flags|=h,G.memoizedState=Ge(1|g,C,Y,k)}function ft(h,g){return Xe(8390656,8,h,g)}function nt(h,g){return At(2048,8,h,g)}function wt(h,g){return At(4,2,h,g)}function Dt(h,g){return At(4,4,h,g)}function Lt(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function Rt(h,g,C){return C=C!=null?C.concat([h]):null,At(4,4,Lt.bind(null,g,h),C)}function Qt(){}function nr(h,g){var C=S();g=g===void 0?null:g;var k=C.memoizedState;return k!==null&&g!==null&&c(g,k[1])?k[0]:(C.memoizedState=[h,g],h)}function Ar(h,g){var C=S();g=g===void 0?null:g;var k=C.memoizedState;return k!==null&&g!==null&&c(g,k[1])?k[0]:(h=h(),C.memoizedState=[h,g],h)}function rr(h,g,C){return(Va&21)===0?(h.baseState&&(h.baseState=!1,qa=!0),h.memoizedState=C):(os(C,g)||(C=nA(),bi.lanes|=C,Hi|=C,h.baseState=!0),g)}function Dr(h,g){var C=Kn;Kn=C!==0&&4>C?C:4,h(!0);var k=Vl.transition;Vl.transition={};try{h(!1),g()}finally{Kn=C,Vl.transition=k}}function vn(){return S().memoizedState}function Ai(h,g,C){var k=Zc(h);if(C={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null},ui(h))Gi(g,C);else if(C=Rn(h,g,C,k),C!==null){var G=Wa();vc(C,h,k,G),Pi(C,g,k)}}function zi(h,g,C){var k=Zc(h),G={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null};if(ui(h))Gi(g,G);else{var Y=h.alternate;if(h.lanes===0&&(Y===null||Y.lanes===0)&&(Y=g.lastRenderedReducer,Y!==null))try{var xe=g.lastRenderedState,ut=Y(xe,C);if(G.hasEagerState=!0,G.eagerState=ut,os(ut,xe)){var xt=g.interleaved;xt===null?(G.next=G,ci(g)):(G.next=xt.next,xt.next=G),g.interleaved=G;return}}catch{}finally{}C=Rn(h,g,G,k),C!==null&&(G=Wa(),vc(C,h,k,G),Pi(C,g,k))}}function ui(h){var g=h.alternate;return h===bi||g!==null&&g===bi}function Gi(h,g){Ga=Kc=!0;var C=h.pending;C===null?g.next=g:(g.next=C.next,C.next=g),h.pending=g}function Pi(h,g,C){if((C&4194240)!==0){var k=g.lanes;k&=h.pendingLanes,C|=k,g.lanes=C,TA(h,C)}}var Is={readContext:Vi,useCallback:r,useContext:r,useEffect:r,useImperativeHandle:r,useInsertionEffect:r,useLayoutEffect:r,useMemo:r,useReducer:r,useRef:r,useState:r,useDebugValue:r,useDeferredValue:r,useTransition:r,useMutableSource:r,useSyncExternalStore:r,useId:r,unstable_isNewReconciler:!1},Ki={readContext:Vi,useCallback:function(h,g){return b().memoizedState=[h,g===void 0?null:g],h},useContext:Vi,useEffect:ft,useImperativeHandle:function(h,g,C){return C=C!=null?C.concat([h]):null,Xe(4194308,4,Lt.bind(null,g,h),C)},useLayoutEffect:function(h,g){return Xe(4194308,4,h,g)},useInsertionEffect:function(h,g){return Xe(4,2,h,g)},useMemo:function(h,g){var C=b();return g=g===void 0?null:g,h=h(),C.memoizedState=[h,g],h},useReducer:function(h,g,C){var k=b();return g=C!==void 0?C(g):g,k.memoizedState=k.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},k.queue=h,h=h.dispatch=Ai.bind(null,bi,h),[k.memoizedState,h]},useRef:function(h){var g=b();return h={current:h},g.memoizedState=h},useState:Qe,useDebugValue:Qt,useDeferredValue:function(h){return b().memoizedState=h},useTransition:function(){var h=Qe(!1),g=h[0];return h=Dr.bind(null,h[1]),b().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,C){var k=bi,G=b();if(tr){if(C===void 0)throw Error(i(407));C=C()}else{if(C=g(),ta===null)throw Error(i(349));(Va&30)!==0||ee(k,g,C)}G.memoizedState=C;var Y={value:C,getSnapshot:g};return G.queue=Y,ft(_e.bind(null,k,Y,h),[h]),k.flags|=2048,Ge(9,Ae.bind(null,k,Y,C,g),void 0,null),C},useId:function(){var h=b(),g=ta.identifierPrefix;if(tr){var C=Ye,k=kt;C=(k&~(1<<32-ds(k)-1)).toString(32)+C,g=":"+g+"R"+C,C=qc++,0<C&&(g+="H"+C.toString(32)),g+=":"}else C=x++,g=":"+g+"r"+C.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},eo={readContext:Vi,useCallback:nr,useContext:Vi,useEffect:nt,useImperativeHandle:Rt,useInsertionEffect:wt,useLayoutEffect:Dt,useMemo:Ar,useReducer:N,useRef:st,useState:function(){return N(M)},useDebugValue:Qt,useDeferredValue:function(h){var g=S();return rr(g,Ui.memoizedState,h)},useTransition:function(){var h=N(M)[0],g=S().memoizedState;return[h,g]},useMutableSource:q,useSyncExternalStore:ne,useId:vn,unstable_isNewReconciler:!1},Ts={readContext:Vi,useCallback:nr,useContext:Vi,useEffect:nt,useImperativeHandle:Rt,useInsertionEffect:wt,useLayoutEffect:Dt,useMemo:Ar,useReducer:j,useRef:st,useState:function(){return j(M)},useDebugValue:Qt,useDeferredValue:function(h){var g=S();return Ui===null?g.memoizedState=h:rr(g,Ui.memoizedState,h)},useTransition:function(){var h=j(M)[0],g=S().memoizedState;return[h,g]},useMutableSource:q,useSyncExternalStore:ne,useId:vn,unstable_isNewReconciler:!1};function hi(h,g){if(h&&h.defaultProps){g=yt({},g),h=h.defaultProps;for(var C in h)g[C]===void 0&&(g[C]=h[C]);return g}return g}function Ao(h,g,C,k){g=h.memoizedState,C=C(k,g),C=C==null?g:yt({},g,C),h.memoizedState=C,h.lanes===0&&(h.updateQueue.baseState=C)}var yo={isMounted:function(h){return(h=h._reactInternals)?nn(h)===h:!1},enqueueSetState:function(h,g,C){h=h._reactInternals;var k=Wa(),G=Zc(h),Y=ki(k,G);Y.payload=g,C!=null&&(Y.callback=C),g=In(h,Y,G),g!==null&&(vc(g,h,G,k),Vn(g,h,G))},enqueueReplaceState:function(h,g,C){h=h._reactInternals;var k=Wa(),G=Zc(h),Y=ki(k,G);Y.tag=1,Y.payload=g,C!=null&&(Y.callback=C),g=In(h,Y,G),g!==null&&(vc(g,h,G,k),Vn(g,h,G))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var C=Wa(),k=Zc(h),G=ki(C,k);G.tag=2,g!=null&&(G.callback=g),g=In(h,G,k),g!==null&&(vc(g,h,k,C),Vn(g,h,k))}};function dc(h,g,C,k,G,Y,xe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,Y,xe):g.prototype&&g.prototype.isPureReactComponent?!Eo(C,k)||!Eo(G,Y):!0}function mA(h,g,C){var k=!1,G=zl,Y=g.contextType;return typeof Y=="object"&&Y!==null?Y=Vi(Y):(G=go(g)?jc:Ns.current,k=g.contextTypes,Y=(k=k!=null)?Vc(h,G):zl),g=new g(C,Y),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=yo,h.stateNode=g,g._reactInternals=h,k&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=G,h.__reactInternalMemoizedMaskedChildContext=Y),g}function GA(h,g,C,k){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(C,k),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(C,k),g.state!==h&&yo.enqueueReplaceState(g,g.state,null)}function zu(h,g,C,k){var G=h.stateNode;G.props=C,G.state=h.memoizedState,G.refs={},Ys(h);var Y=g.contextType;typeof Y=="object"&&Y!==null?G.context=Vi(Y):(Y=go(g)?jc:Ns.current,G.context=Vc(h,Y)),G.state=h.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(Ao(h,g,Y,C),G.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(g=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),g!==G.state&&yo.enqueueReplaceState(G,G.state,null),Ss(h,C,G,k),G.state=h.memoizedState),typeof G.componentDidMount=="function"&&(h.flags|=4194308)}function pc(h,g){try{var C="",k=g;do C+=qe(k),k=k.return;while(k);var G=C}catch(Y){G=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:h,source:g,stack:G,digest:null}}function Gl(h,g,C){return{value:h,source:null,stack:C??null,digest:g??null}}function to(h,g){try{console.error(g.value)}catch(C){setTimeout(function(){throw C})}}var Zo=typeof WeakMap=="function"?WeakMap:Map;function vo(h,g,C){C=ki(-1,C),C.tag=3,C.payload={element:null};var k=g.value;return C.callback=function(){Vu||(Vu=!0,kf=k),to(h,g)},C}function vl(h,g,C){C=ki(-1,C),C.tag=3;var k=h.type.getDerivedStateFromError;if(typeof k=="function"){var G=g.value;C.payload=function(){return k(G)},C.callback=function(){to(h,g)}}var Y=h.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(C.callback=function(){to(h,g),typeof k!="function"&&(gc===null?gc=new Set([this]):gc.add(this));var xe=g.stack;this.componentDidCatch(g.value,{componentStack:xe!==null?xe:""})}),C}function Os(h,g,C){var k=h.pingCache;if(k===null){k=h.pingCache=new Zo;var G=new Set;k.set(g,G)}else G=k.get(g),G===void 0&&(G=new Set,k.set(g,G));G.has(C)||(G.add(C),h=Rf.bind(null,h,g,C),g.then(h,h))}function ro(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function Ka(h,g,C,k,G){return(h.mode&1)===0?(h===g?h.flags|=65536:(h.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(g=ki(-1,1),g.tag=2,In(C,g,1))),C.lanes|=1),h):(h.flags|=65536,h.lanes=G,h)}var cs=fe.ReactCurrentOwner,qa=!1;function Xo(h,g,C,k){g.child=h===null?Qi(g,null,C,k):ls(g,h.child,C,k)}function Vh(h,g,C,k,G){C=C.render;var Y=g.ref;return Ti(g,G),k=d(h,g,C,k,Y,G),C=y(),h!==null&&!qa?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~G,$c(h,g,G)):(tr&&C&&Zt(g),g.flags|=1,Xo(h,g,k,G),g.child)}function Ff(h,g,C,k,G){if(h===null){var Y=C.type;return typeof Y=="function"&&!Nf(Y)&&Y.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(g.tag=15,g.type=Y,KA(h,g,Y,k,G)):(h=Qf(C.type,null,k,g,g.mode,G),h.ref=g.ref,h.return=g,g.child=h)}if(Y=h.child,(h.lanes&G)===0){var xe=Y.memoizedProps;if(C=C.compare,C=C!==null?C:Eo,C(xe,k)&&h.ref===g.ref)return $c(h,g,G)}return g.flags|=1,h=yu(Y,k),h.ref=g.ref,h.return=g,g.child=h}function KA(h,g,C,k,G){if(h!==null){var Y=h.memoizedProps;if(Eo(Y,k)&&h.ref===g.ref)if(qa=!1,g.pendingProps=k=Y,(h.lanes&G)!==0)(h.flags&131072)!==0&&(qa=!0);else return g.lanes=h.lanes,$c(h,g,G)}return Gh(h,g,C,k,G)}function qA(h,g,C){var k=g.pendingProps,G=k.children,Y=h!==null?h.memoizedState:null;if(k.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(gh,mc),mc|=C;else{if((C&1073741824)===0)return h=Y!==null?Y.baseLanes|C:C,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,Xn(gh,mc),mc|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=Y!==null?Y.baseLanes:C,Xn(gh,mc),mc|=k}else Y!==null?(k=Y.baseLanes|C,g.memoizedState=null):k=C,Xn(gh,mc),mc|=k;return Xo(h,g,G,C),g.child}function gA(h,g){var C=g.ref;(h===null&&C!==null||h!==null&&h.ref!==C)&&(g.flags|=512,g.flags|=2097152)}function Gh(h,g,C,k,G){var Y=go(C)?jc:Ns.current;return Y=Vc(g,Y),Ti(g,G),C=d(h,g,C,k,Y,G),k=y(),h!==null&&!qa?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~G,$c(h,g,G)):(tr&&k&&Zt(g),g.flags|=1,Xo(h,g,C,G),g.child)}function uh(h,g,C,k,G){if(go(C)){var Y=!0;Oa(g)}else Y=!1;if(Ti(g,G),g.stateNode===null)mh(h,g),mA(g,C,k),zu(g,C,k,G),k=!0;else if(h===null){var xe=g.stateNode,ut=g.memoizedProps;xe.props=ut;var xt=xe.context,jt=C.contextType;typeof jt=="object"&&jt!==null?jt=Vi(jt):(jt=go(C)?jc:Ns.current,jt=Vc(g,jt));var fr=C.getDerivedStateFromProps,yr=typeof fr=="function"||typeof xe.getSnapshotBeforeUpdate=="function";yr||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(ut!==k||xt!==jt)&&GA(g,xe,k,jt),Es=!1;var ur=g.memoizedState;xe.state=ur,Ss(g,k,xe,G),xt=g.memoizedState,ut!==k||ur!==xt||Xs.current||Es?(typeof fr=="function"&&(Ao(g,C,fr,k),xt=g.memoizedState),(ut=Es||dc(g,C,ut,k,ur,xt,jt))?(yr||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(g.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=k,g.memoizedState=xt),xe.props=k,xe.state=xt,xe.context=jt,k=ut):(typeof xe.componentDidMount=="function"&&(g.flags|=4194308),k=!1)}else{xe=g.stateNode,Fo(h,g),ut=g.memoizedProps,jt=g.type===g.elementType?ut:hi(g.type,ut),xe.props=jt,yr=g.pendingProps,ur=xe.context,xt=C.contextType,typeof xt=="object"&&xt!==null?xt=Vi(xt):(xt=go(C)?jc:Ns.current,xt=Vc(g,xt));var Qr=C.getDerivedStateFromProps;(fr=typeof Qr=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(ut!==yr||ur!==xt)&&GA(g,xe,k,xt),Es=!1,ur=g.memoizedState,xe.state=ur,Ss(g,k,xe,G);var en=g.memoizedState;ut!==yr||ur!==en||Xs.current||Es?(typeof Qr=="function"&&(Ao(g,C,Qr,k),en=g.memoizedState),(jt=Es||dc(g,C,jt,k,ur,en,xt)||!1)?(fr||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(k,en,xt),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(k,en,xt)),typeof xe.componentDidUpdate=="function"&&(g.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof xe.componentDidUpdate!="function"||ut===h.memoizedProps&&ur===h.memoizedState||(g.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||ut===h.memoizedProps&&ur===h.memoizedState||(g.flags|=1024),g.memoizedProps=k,g.memoizedState=en),xe.props=k,xe.state=en,xe.context=xt,k=jt):(typeof xe.componentDidUpdate!="function"||ut===h.memoizedProps&&ur===h.memoizedState||(g.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||ut===h.memoizedProps&&ur===h.memoizedState||(g.flags|=1024),k=!1)}return hh(h,g,C,k,Y,G)}function hh(h,g,C,k,G,Y){gA(h,g);var xe=(g.flags&128)!==0;if(!k&&!xe)return G&&_a(g,C,!1),$c(h,g,Y);k=g.stateNode,cs.current=g;var ut=xe&&typeof C.getDerivedStateFromError!="function"?null:k.render();return g.flags|=1,h!==null&&xe?(g.child=ls(g,h.child,null,Y),g.child=ls(g,null,ut,Y)):Xo(h,g,ut,Y),g.memoizedState=k.state,G&&_a(g,C,!0),g.child}function pu(h){var g=h.stateNode;g.pendingContext?Ou(h,g.pendingContext,g.pendingContext!==g.context):g.context&&Ou(h,g.context,!1),Gc(h,g.containerInfo)}function Kh(h,g,C,k,G){return Hr(),Fr(G),g.flags|=256,Xo(h,g,C,k),g.child}var fh={dehydrated:null,treeContext:null,retryLane:0};function If(h){return{baseLanes:h,cachePool:null,transitions:null}}function rg(h,g,C){var k=g.pendingProps,G=gi.current,Y=!1,xe=(g.flags&128)!==0,ut;if((ut=xe)||(ut=h!==null&&h.memoizedState===null?!1:(G&2)!==0),ut?(Y=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(G|=1),Xn(gi,G&1),h===null)return Zr(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((g.mode&1)===0?g.lanes=1:h.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(xe=k.children,h=k.fallback,Y?(k=g.mode,Y=g.child,xe={mode:"hidden",children:xe},(k&1)===0&&Y!==null?(Y.childLanes=0,Y.pendingProps=xe):Y=Sh(xe,k,0,null),h=Eh(h,k,C,null),Y.return=g,h.return=g,Y.sibling=h,g.child=Y,g.child.memoizedState=If(C),g.memoizedState=fh,h):Tf(g,xe));if(G=h.memoizedState,G!==null&&(ut=G.dehydrated,ut!==null))return ng(h,g,xe,k,ut,G,C);if(Y){Y=k.fallback,xe=g.mode,G=h.child,ut=G.sibling;var xt={mode:"hidden",children:k.children};return(xe&1)===0&&g.child!==G?(k=g.child,k.childLanes=0,k.pendingProps=xt,g.deletions=null):(k=yu(G,xt),k.subtreeFlags=G.subtreeFlags&14680064),ut!==null?Y=yu(ut,Y):(Y=Eh(Y,xe,C,null),Y.flags|=2),Y.return=g,k.return=g,k.sibling=Y,g.child=k,k=Y,Y=g.child,xe=h.child.memoizedState,xe=xe===null?If(C):{baseLanes:xe.baseLanes|C,cachePool:null,transitions:xe.transitions},Y.memoizedState=xe,Y.childLanes=h.childLanes&~C,g.memoizedState=fh,k}return Y=h.child,h=Y.sibling,k=yu(Y,{mode:"visible",children:k.children}),(g.mode&1)===0&&(k.lanes=C),k.return=g,k.sibling=null,h!==null&&(C=g.deletions,C===null?(g.deletions=[h],g.flags|=16):C.push(h)),g.child=k,g.memoizedState=null,k}function Tf(h,g){return g=Sh({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function Pf(h,g,C,k){return k!==null&&Fr(k),ls(g,h.child,null,C),h=Tf(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function ng(h,g,C,k,G,Y,xe){if(C)return g.flags&256?(g.flags&=-257,k=Gl(Error(i(422))),Pf(h,g,xe,k)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(Y=k.fallback,G=g.mode,k=Sh({mode:"visible",children:k.children},G,0,null),Y=Eh(Y,G,xe,null),Y.flags|=2,k.return=g,Y.return=g,k.sibling=Y,g.child=k,(g.mode&1)!==0&&ls(g,h.child,null,xe),g.child.memoizedState=If(xe),g.memoizedState=fh,Y);if((g.mode&1)===0)return Pf(h,g,xe,null);if(G.data==="$!"){if(k=G.nextSibling&&G.nextSibling.dataset,k)var ut=k.dgst;return k=ut,Y=Error(i(419)),k=Gl(Y,k,void 0),Pf(h,g,xe,k)}if(ut=(xe&h.childLanes)!==0,qa||ut){if(k=ta,k!==null){switch(xe&-xe){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}G=(G&(k.suspendedLanes|xe))!==0?0:G,G!==0&&G!==Y.retryLane&&(Y.retryLane=G,wi(h,G),vc(k,h,G,-1))}return wd(),k=Gl(Error(i(421))),Pf(h,g,xe,k)}return G.data==="$?"?(g.flags|=128,g.child=h.child,g=tv.bind(null,h),G._reactRetry=g,null):(h=Y.treeContext,Wt=po(G.nextSibling),qt=g,tr=!0,er=null,h!==null&&(Re[Ke++]=kt,Re[Ke++]=Ye,Re[Ke++]=We,kt=h.id,Ye=h.overflow,We=g),g=Tf(g,k.children),g.flags|=4096,g)}function dh(h,g,C){h.lanes|=g;var k=h.alternate;k!==null&&(k.lanes|=g),xr(h.return,g,C)}function Fp(h,g,C,k,G){var Y=h.memoizedState;Y===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:k,tail:C,tailMode:G}:(Y.isBackwards=g,Y.rendering=null,Y.renderingStartTime=0,Y.last=k,Y.tail=C,Y.tailMode=G)}function ph(h,g,C){var k=g.pendingProps,G=k.revealOrder,Y=k.tail;if(Xo(h,g,k.children,C),k=gi.current,(k&2)!==0)k=k&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&dh(h,C,g);else if(h.tag===19)dh(h,C,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}if(Xn(gi,k),(g.mode&1)===0)g.memoizedState=null;else switch(G){case"forwards":for(C=g.child,G=null;C!==null;)h=C.alternate,h!==null&&Wo(h)===null&&(G=C),C=C.sibling;C=G,C===null?(G=g.child,g.child=null):(G=C.sibling,C.sibling=null),Fp(g,!1,G,C,Y);break;case"backwards":for(C=null,G=g.child,g.child=null;G!==null;){if(h=G.alternate,h!==null&&Wo(h)===null){g.child=G;break}h=G.sibling,G.sibling=C,C=G,G=h}Fp(g,!0,C,null,Y);break;case"together":Fp(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function mh(h,g){(g.mode&1)===0&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function $c(h,g,C){if(h!==null&&(g.dependencies=h.dependencies),Hi|=g.lanes,(C&g.childLanes)===0)return null;if(h!==null&&g.child!==h.child)throw Error(i(153));if(g.child!==null){for(h=g.child,C=yu(h,h.pendingProps),g.child=C,C.return=g;h.sibling!==null;)h=h.sibling,C=C.sibling=yu(h,h.pendingProps),C.return=g;C.sibling=null}return g.child}function Yy(h,g,C){switch(g.tag){case 3:pu(g),Hr();break;case 5:Hl(g);break;case 1:go(g.type)&&Oa(g);break;case 4:Gc(g,g.stateNode.containerInfo);break;case 10:var k=g.type._context,G=g.memoizedProps.value;Xn(Bs,k._currentValue),k._currentValue=G;break;case 13:if(k=g.memoizedState,k!==null)return k.dehydrated!==null?(Xn(gi,gi.current&1),g.flags|=128,null):(C&g.child.childLanes)!==0?rg(h,g,C):(Xn(gi,gi.current&1),h=$c(h,g,C),h!==null?h.sibling:null);Xn(gi,gi.current&1);break;case 19:if(k=(C&g.childLanes)!==0,(h.flags&128)!==0){if(k)return ph(h,g,C);g.flags|=128}if(G=g.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),Xn(gi,gi.current),k)break;return null;case 22:case 23:return g.lanes=0,qA(h,g,C)}return $c(h,g,C)}var ig,Ip,sg,og;ig=function(h,g){for(var C=g.child;C!==null;){if(C.tag===5||C.tag===6)h.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===g)break;for(;C.sibling===null;){if(C.return===null||C.return===g)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Ip=function(){},sg=function(h,g,C,k){var G=h.memoizedProps;if(G!==k){h=g.stateNode,Ha(Fs.current);var Y=null;switch(C){case"input":G=Cr(h,G),k=Cr(h,k),Y=[];break;case"select":G=yt({},G,{value:void 0}),k=yt({},k,{value:void 0}),Y=[];break;case"textarea":G=Or(h,G),k=Or(h,k),Y=[];break;default:typeof G.onClick!="function"&&typeof k.onClick=="function"&&(h.onclick=OA)}Ht(C,k);var xe;C=null;for(jt in G)if(!k.hasOwnProperty(jt)&&G.hasOwnProperty(jt)&&G[jt]!=null)if(jt==="style"){var ut=G[jt];for(xe in ut)ut.hasOwnProperty(xe)&&(C||(C={}),C[xe]="")}else jt!=="dangerouslySetInnerHTML"&&jt!=="children"&&jt!=="suppressContentEditableWarning"&&jt!=="suppressHydrationWarning"&&jt!=="autoFocus"&&(u.hasOwnProperty(jt)?Y||(Y=[]):(Y=Y||[]).push(jt,null));for(jt in k){var xt=k[jt];if(ut=G?.[jt],k.hasOwnProperty(jt)&&xt!==ut&&(xt!=null||ut!=null))if(jt==="style")if(ut){for(xe in ut)!ut.hasOwnProperty(xe)||xt&&xt.hasOwnProperty(xe)||(C||(C={}),C[xe]="");for(xe in xt)xt.hasOwnProperty(xe)&&ut[xe]!==xt[xe]&&(C||(C={}),C[xe]=xt[xe])}else C||(Y||(Y=[]),Y.push(jt,C)),C=xt;else jt==="dangerouslySetInnerHTML"?(xt=xt?xt.__html:void 0,ut=ut?ut.__html:void 0,xt!=null&&ut!==xt&&(Y=Y||[]).push(jt,xt)):jt==="children"?typeof xt!="string"&&typeof xt!="number"||(Y=Y||[]).push(jt,""+xt):jt!=="suppressContentEditableWarning"&&jt!=="suppressHydrationWarning"&&(u.hasOwnProperty(jt)?(xt!=null&&jt==="onScroll"&&Ii("scroll",h),Y||ut===xt||(Y=[])):(Y=Y||[]).push(jt,xt))}C&&(Y=Y||[]).push("style",C);var jt=Y;(g.updateQueue=jt)&&(g.flags|=4)}},og=function(h,g,C,k){C!==k&&(g.flags|=4)};function qh(h,g){if(!tr)switch(h.tailMode){case"hidden":g=h.tail;for(var C=null;g!==null;)g.alternate!==null&&(C=g),g=g.sibling;C===null?h.tail=null:C.sibling=null;break;case"collapsed":C=h.tail;for(var k=null;C!==null;)C.alternate!==null&&(k=C),C=C.sibling;k===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function Yo(h){var g=h.alternate!==null&&h.alternate.child===h.child,C=0,k=0;if(g)for(var G=h.child;G!==null;)C|=G.lanes|G.childLanes,k|=G.subtreeFlags&14680064,k|=G.flags&14680064,G.return=h,G=G.sibling;else for(G=h.child;G!==null;)C|=G.lanes|G.childLanes,k|=G.subtreeFlags,k|=G.flags,G.return=h,G=G.sibling;return h.subtreeFlags|=k,h.childLanes=C,g}function ag(h,g,C){var k=g.pendingProps;switch(Ut(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(g),null;case 1:return go(g.type)&&fu(),Yo(g),null;case 3:return k=g.stateNode,ja(),li(Xs),li(Ns),du(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(Ni(g)?g.flags|=4:h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,er!==null&&(zp(er),er=null))),Ip(h,g),Yo(g),null;case 5:VA(g);var G=Ha(za.current);if(C=g.type,h!==null&&g.stateNode!=null)sg(h,g,C,k,G),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!k){if(g.stateNode===null)throw Error(i(166));return Yo(g),null}if(h=Ha(Fs.current),Ni(g)){k=g.stateNode,C=g.type;var Y=g.memoizedProps;switch(k[mo]=g,k[co]=Y,h=(g.mode&1)!==0,C){case"dialog":Ii("cancel",k),Ii("close",k);break;case"iframe":case"object":case"embed":Ii("load",k);break;case"video":case"audio":for(G=0;G<Nc.length;G++)Ii(Nc[G],k);break;case"source":Ii("error",k);break;case"img":case"image":case"link":Ii("error",k),Ii("load",k);break;case"details":Ii("toggle",k);break;case"input":je(k,Y),Ii("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!Y.multiple},Ii("invalid",k);break;case"textarea":Rr(k,Y),Ii("invalid",k)}Ht(C,Y),G=null;for(var xe in Y)if(Y.hasOwnProperty(xe)){var ut=Y[xe];xe==="children"?typeof ut=="string"?k.textContent!==ut&&(Y.suppressHydrationWarning!==!0&&QA(k.textContent,ut,h),G=["children",ut]):typeof ut=="number"&&k.textContent!==""+ut&&(Y.suppressHydrationWarning!==!0&&QA(k.textContent,ut,h),G=["children",""+ut]):u.hasOwnProperty(xe)&&ut!=null&&xe==="onScroll"&&Ii("scroll",k)}switch(C){case"input":Kt(k),$r(k,Y,!0);break;case"textarea":Kt(k),hn(k);break;case"select":case"option":break;default:typeof Y.onClick=="function"&&(k.onclick=OA)}k=G,g.updateQueue=k,k!==null&&(g.flags|=4)}else{xe=G.nodeType===9?G:G.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=dt(C)),h==="http://www.w3.org/1999/xhtml"?C==="script"?(h=xe.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof k.is=="string"?h=xe.createElement(C,{is:k.is}):(h=xe.createElement(C),C==="select"&&(xe=h,k.multiple?xe.multiple=!0:k.size&&(xe.size=k.size))):h=xe.createElementNS(h,C),h[mo]=g,h[co]=k,ig(h,g,!1,!1),g.stateNode=h;e:{switch(xe=Ft(C,k),C){case"dialog":Ii("cancel",h),Ii("close",h),G=k;break;case"iframe":case"object":case"embed":Ii("load",h),G=k;break;case"video":case"audio":for(G=0;G<Nc.length;G++)Ii(Nc[G],h);G=k;break;case"source":Ii("error",h),G=k;break;case"img":case"image":case"link":Ii("error",h),Ii("load",h),G=k;break;case"details":Ii("toggle",h),G=k;break;case"input":je(h,k),G=Cr(h,k),Ii("invalid",h);break;case"option":G=k;break;case"select":h._wrapperState={wasMultiple:!!k.multiple},G=yt({},k,{value:void 0}),Ii("invalid",h);break;case"textarea":Rr(h,k),G=Or(h,k),Ii("invalid",h);break;default:G=k}Ht(C,G),ut=G;for(Y in ut)if(ut.hasOwnProperty(Y)){var xt=ut[Y];Y==="style"?ct(h,xt):Y==="dangerouslySetInnerHTML"?(xt=xt?xt.__html:void 0,xt!=null&&ve(h,xt)):Y==="children"?typeof xt=="string"?(C!=="textarea"||xt!=="")&&$e(h,xt):typeof xt=="number"&&$e(h,""+xt):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(u.hasOwnProperty(Y)?xt!=null&&Y==="onScroll"&&Ii("scroll",h):xt!=null&&ae(h,Y,xt,xe))}switch(C){case"input":Kt(h),$r(h,k,!1);break;case"textarea":Kt(h),hn(h);break;case"option":k.value!=null&&h.setAttribute("value",""+_t(k.value));break;case"select":h.multiple=!!k.multiple,Y=k.value,Y!=null?Sr(h,!!k.multiple,Y,!1):k.defaultValue!=null&&Sr(h,!!k.multiple,k.defaultValue,!0);break;default:typeof G.onClick=="function"&&(h.onclick=OA)}switch(C){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Yo(g),null;case 6:if(h&&g.stateNode!=null)og(h,g,h.memoizedProps,k);else{if(typeof k!="string"&&g.stateNode===null)throw Error(i(166));if(C=Ha(za.current),Ha(Fs.current),Ni(g)){if(k=g.stateNode,C=g.memoizedProps,k[mo]=g,(Y=k.nodeValue!==C)&&(h=qt,h!==null))switch(h.tag){case 3:QA(k.nodeValue,C,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&QA(k.nodeValue,C,(h.mode&1)!==0)}Y&&(g.flags|=4)}else k=(C.nodeType===9?C:C.ownerDocument).createTextNode(k),k[mo]=g,g.stateNode=k}return Yo(g),null;case 13:if(li(gi),k=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(tr&&Wt!==null&&(g.mode&1)!==0&&(g.flags&128)===0)Sn(),Hr(),g.flags|=98560,Y=!1;else if(Y=Ni(g),k!==null&&k.dehydrated!==null){if(h===null){if(!Y)throw Error(i(318));if(Y=g.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(i(317));Y[mo]=g}else Hr(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Yo(g),Y=!1}else er!==null&&(zp(er),er=null),Y=!0;if(!Y)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=C,g):(k=k!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(g.child.flags|=8192,(g.mode&1)!==0&&(h===null||(gi.current&1)!==0?zs===0&&(zs=3):wd())),g.updateQueue!==null&&(g.flags|=4),Yo(g),null);case 4:return ja(),Ip(h,g),h===null&&uc(g.stateNode.containerInfo),Yo(g),null;case 10:return gr(g.type._context),Yo(g),null;case 17:return go(g.type)&&fu(),Yo(g),null;case 19:if(li(gi),Y=g.memoizedState,Y===null)return Yo(g),null;if(k=(g.flags&128)!==0,xe=Y.rendering,xe===null)if(k)qh(Y,!1);else{if(zs!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(xe=Wo(h),xe!==null){for(g.flags|=128,qh(Y,!1),k=xe.updateQueue,k!==null&&(g.updateQueue=k,g.flags|=4),g.subtreeFlags=0,k=C,C=g.child;C!==null;)Y=C,h=k,Y.flags&=14680066,xe=Y.alternate,xe===null?(Y.childLanes=0,Y.lanes=h,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=xe.childLanes,Y.lanes=xe.lanes,Y.child=xe.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=xe.memoizedProps,Y.memoizedState=xe.memoizedState,Y.updateQueue=xe.updateQueue,Y.type=xe.type,h=xe.dependencies,Y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),C=C.sibling;return Xn(gi,gi.current&1|2),g.child}h=h.sibling}Y.tail!==null&&di()>vh&&(g.flags|=128,k=!0,qh(Y,!1),g.lanes=4194304)}else{if(!k)if(h=Wo(xe),h!==null){if(g.flags|=128,k=!0,C=h.updateQueue,C!==null&&(g.updateQueue=C,g.flags|=4),qh(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!xe.alternate&&!tr)return Yo(g),null}else 2*di()-Y.renderingStartTime>vh&&C!==1073741824&&(g.flags|=128,k=!0,qh(Y,!1),g.lanes=4194304);Y.isBackwards?(xe.sibling=g.child,g.child=xe):(C=Y.last,C!==null?C.sibling=xe:g.child=xe,Y.last=xe)}return Y.tail!==null?(g=Y.tail,Y.rendering=g,Y.tail=g.sibling,Y.renderingStartTime=di(),g.sibling=null,C=gi.current,Xn(gi,k?C&1|2:C&1),g):(Yo(g),null);case 22:case 23:return _d(),k=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(g.flags|=8192),k&&(g.mode&1)!==0?(mc&1073741824)!==0&&(Yo(g),g.subtreeFlags&6&&(g.flags|=8192)):Yo(g),null;case 24:return null;case 25:return null}throw Error(i(156,g.tag))}function lg(h,g){switch(Ut(g),g.tag){case 1:return go(g.type)&&fu(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return ja(),li(Xs),li(Ns),du(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 5:return VA(g),null;case 13:if(li(gi),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Hr()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return li(gi),null;case 4:return ja(),null;case 10:return gr(g.type._context),null;case 22:case 23:return _d(),null;case 24:return null;default:return null}}var ud=!1,$a=!1,cg=typeof WeakSet=="function"?WeakSet:Set,Xr=null;function $h(h,g){var C=h.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(k){no(h,g,k)}else C.current=null}function Lf(h,g,C){try{C()}catch(k){no(h,g,k)}}var Tp=!1;function Pp(h,g){if(fc=ic,h=bs(),Pn(h)){if("selectionStart"in h)var C={start:h.selectionStart,end:h.selectionEnd};else e:{C=(C=h.ownerDocument)&&C.defaultView||window;var k=C.getSelection&&C.getSelection();if(k&&k.rangeCount!==0){C=k.anchorNode;var G=k.anchorOffset,Y=k.focusNode;k=k.focusOffset;try{C.nodeType,Y.nodeType}catch{C=null;break e}var xe=0,ut=-1,xt=-1,jt=0,fr=0,yr=h,ur=null;t:for(;;){for(var Qr;yr!==C||G!==0&&yr.nodeType!==3||(ut=xe+G),yr!==Y||k!==0&&yr.nodeType!==3||(xt=xe+k),yr.nodeType===3&&(xe+=yr.nodeValue.length),(Qr=yr.firstChild)!==null;)ur=yr,yr=Qr;for(;;){if(yr===h)break t;if(ur===C&&++jt===G&&(ut=xe),ur===Y&&++fr===k&&(xt=xe),(Qr=yr.nextSibling)!==null)break;yr=ur,ur=yr.parentNode}yr=Qr}C=ut===-1||xt===-1?null:{start:ut,end:xt}}else C=null}C=C||{start:0,end:0}}else C=null;for(hA={focusedElem:h,selectionRange:C},ic=!1,Xr=g;Xr!==null;)if(g=Xr,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,Xr=h;else for(;Xr!==null;){g=Xr;try{var en=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(en!==null){var Gr=en.memoizedProps,Ps=en.memoizedState,Nt=g.stateNode,St=Nt.getSnapshotBeforeUpdate(g.elementType===g.type?Gr:hi(g.type,Gr),Ps);Nt.__reactInternalSnapshotBeforeUpdate=St}break;case 3:var zt=g.stateNode.containerInfo;zt.nodeType===1?zt.textContent="":zt.nodeType===9&&zt.documentElement&&zt.removeChild(zt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Br){no(g,g.return,Br)}if(h=g.sibling,h!==null){h.return=g.return,Xr=h;break}Xr=g.return}return en=Tp,Tp=!1,en}function mu(h,g,C){var k=g.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var G=k=k.next;do{if((G.tag&h)===h){var Y=G.destroy;G.destroy=void 0,Y!==void 0&&Lf(g,C,Y)}G=G.next}while(G!==k)}}function Jo(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&h)===h){var k=C.create;C.destroy=k()}C=C.next}while(C!==g)}}function hd(h){var g=h.ref;if(g!==null){var C=h.stateNode;switch(h.tag){case 5:h=C;break;default:h=C}typeof g=="function"?g(h):g.current=h}}function fd(h){var g=h.alternate;g!==null&&(h.alternate=null,fd(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&(delete g[mo],delete g[co],delete g[Zs],delete g[Nu],delete g[Hc])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Ag(h){return h.tag===5||h.tag===3||h.tag===4}function Lp(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Ag(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Mp(h,g,C){var k=h.tag;if(k===5||k===6)h=h.stateNode,g?C.nodeType===8?C.parentNode.insertBefore(h,g):C.insertBefore(h,g):(C.nodeType===8?(g=C.parentNode,g.insertBefore(h,C)):(g=C,g.appendChild(h)),C=C._reactRootContainer,C!=null||g.onclick!==null||(g.onclick=OA));else if(k!==4&&(h=h.child,h!==null))for(Mp(h,g,C),h=h.sibling;h!==null;)Mp(h,g,C),h=h.sibling}function kp(h,g,C){var k=h.tag;if(k===5||k===6)h=h.stateNode,g?C.insertBefore(h,g):C.appendChild(h);else if(k!==4&&(h=h.child,h!==null))for(kp(h,g,C),h=h.sibling;h!==null;)kp(h,g,C),h=h.sibling}var ea=null,yA=!1;function $A(h,g,C){for(C=C.child;C!==null;)Up(h,g,C),C=C.sibling}function Up(h,g,C){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(cl,C)}catch{}switch(C.tag){case 5:$a||$h(C,g);case 6:var k=ea,G=yA;ea=null,$A(h,g,C),ea=k,yA=G,ea!==null&&(yA?(h=ea,C=C.stateNode,h.nodeType===8?h.parentNode.removeChild(C):h.removeChild(C)):ea.removeChild(C.stateNode));break;case 18:ea!==null&&(yA?(h=ea,C=C.stateNode,h.nodeType===8?zA(h.parentNode,C):h.nodeType===1&&zA(h,C),Aa(h)):zA(ea,C.stateNode));break;case 4:k=ea,G=yA,ea=C.stateNode.containerInfo,yA=!0,$A(h,g,C),ea=k,yA=G;break;case 0:case 11:case 14:case 15:if(!$a&&(k=C.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){G=k=k.next;do{var Y=G,xe=Y.destroy;Y=Y.tag,xe!==void 0&&((Y&2)!==0||(Y&4)!==0)&&Lf(C,g,xe),G=G.next}while(G!==k)}$A(h,g,C);break;case 1:if(!$a&&($h(C,g),k=C.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=C.memoizedProps,k.state=C.memoizedState,k.componentWillUnmount()}catch(ut){no(C,g,ut)}$A(h,g,C);break;case 21:$A(h,g,C);break;case 22:C.mode&1?($a=(k=$a)||C.memoizedState!==null,$A(h,g,C),$a=k):$A(h,g,C);break;default:$A(h,g,C)}}function Dp(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var C=h.stateNode;C===null&&(C=h.stateNode=new cg),g.forEach(function(k){var G=rv.bind(null,h,k);C.has(k)||(C.add(k),k.then(G,G))})}}function vA(h,g){var C=g.deletions;if(C!==null)for(var k=0;k<C.length;k++){var G=C[k];try{var Y=h,xe=g,ut=xe;e:for(;ut!==null;){switch(ut.tag){case 5:ea=ut.stateNode,yA=!1;break e;case 3:ea=ut.stateNode.containerInfo,yA=!0;break e;case 4:ea=ut.stateNode.containerInfo,yA=!0;break e}ut=ut.return}if(ea===null)throw Error(i(160));Up(Y,xe,G),ea=null,yA=!1;var xt=G.alternate;xt!==null&&(xt.return=null),G.return=null}catch(jt){no(G,g,jt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)ug(g,h),g=g.sibling}function ug(h,g){var C=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(vA(g,h),WA(h),k&4){try{mu(3,h,h.return),Jo(3,h)}catch(Gr){no(h,h.return,Gr)}try{mu(5,h,h.return)}catch(Gr){no(h,h.return,Gr)}}break;case 1:vA(g,h),WA(h),k&512&&C!==null&&$h(C,C.return);break;case 5:if(vA(g,h),WA(h),k&512&&C!==null&&$h(C,C.return),h.flags&32){var G=h.stateNode;try{$e(G,"")}catch(Gr){no(h,h.return,Gr)}}if(k&4&&(G=h.stateNode,G!=null)){var Y=h.memoizedProps,xe=C!==null?C.memoizedProps:Y,ut=h.type,xt=h.updateQueue;if(h.updateQueue=null,xt!==null)try{ut==="input"&&Y.type==="radio"&&Y.name!=null&&vr(G,Y),Ft(ut,xe);var jt=Ft(ut,Y);for(xe=0;xe<xt.length;xe+=2){var fr=xt[xe],yr=xt[xe+1];fr==="style"?ct(G,yr):fr==="dangerouslySetInnerHTML"?ve(G,yr):fr==="children"?$e(G,yr):ae(G,fr,yr,jt)}switch(ut){case"input":Ur(G,Y);break;case"textarea":On(G,Y);break;case"select":var ur=G._wrapperState.wasMultiple;G._wrapperState.wasMultiple=!!Y.multiple;var Qr=Y.value;Qr!=null?Sr(G,!!Y.multiple,Qr,!1):ur!==!!Y.multiple&&(Y.defaultValue!=null?Sr(G,!!Y.multiple,Y.defaultValue,!0):Sr(G,!!Y.multiple,Y.multiple?[]:"",!1))}G[co]=Y}catch(Gr){no(h,h.return,Gr)}}break;case 6:if(vA(g,h),WA(h),k&4){if(h.stateNode===null)throw Error(i(162));G=h.stateNode,Y=h.memoizedProps;try{G.nodeValue=Y}catch(Gr){no(h,h.return,Gr)}}break;case 3:if(vA(g,h),WA(h),k&4&&C!==null&&C.memoizedState.isDehydrated)try{Aa(g.containerInfo)}catch(Gr){no(h,h.return,Gr)}break;case 4:vA(g,h),WA(h);break;case 13:vA(g,h),WA(h),G=h.child,G.flags&8192&&(Y=G.memoizedState!==null,G.stateNode.isHidden=Y,!Y||G.alternate!==null&&G.alternate.memoizedState!==null||(yh=di())),k&4&&Dp(h);break;case 22:if(fr=C!==null&&C.memoizedState!==null,h.mode&1?($a=(jt=$a)||fr,vA(g,h),$a=jt):vA(g,h),WA(h),k&8192){if(jt=h.memoizedState!==null,(h.stateNode.isHidden=jt)&&!fr&&(h.mode&1)!==0)for(Xr=h,fr=h.child;fr!==null;){for(yr=Xr=fr;Xr!==null;){switch(ur=Xr,Qr=ur.child,ur.tag){case 0:case 11:case 14:case 15:mu(4,ur,ur.return);break;case 1:$h(ur,ur.return);var en=ur.stateNode;if(typeof en.componentWillUnmount=="function"){k=ur,C=ur.return;try{g=k,en.props=g.memoizedProps,en.state=g.memoizedState,en.componentWillUnmount()}catch(Gr){no(k,C,Gr)}}break;case 5:$h(ur,ur.return);break;case 22:if(ur.memoizedState!==null){Hu(yr);continue}}Qr!==null?(Qr.return=ur,Xr=Qr):Hu(yr)}fr=fr.sibling}e:for(fr=null,yr=h;;){if(yr.tag===5){if(fr===null){fr=yr;try{G=yr.stateNode,jt?(Y=G.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none"):(ut=yr.stateNode,xt=yr.memoizedProps.style,xe=xt!=null&&xt.hasOwnProperty("display")?xt.display:null,ut.style.display=vt("display",xe))}catch(Gr){no(h,h.return,Gr)}}}else if(yr.tag===6){if(fr===null)try{yr.stateNode.nodeValue=jt?"":yr.memoizedProps}catch(Gr){no(h,h.return,Gr)}}else if((yr.tag!==22&&yr.tag!==23||yr.memoizedState===null||yr===h)&&yr.child!==null){yr.child.return=yr,yr=yr.child;continue}if(yr===h)break e;for(;yr.sibling===null;){if(yr.return===null||yr.return===h)break e;fr===yr&&(fr=null),yr=yr.return}fr===yr&&(fr=null),yr.sibling.return=yr.return,yr=yr.sibling}}break;case 19:vA(g,h),WA(h),k&4&&Dp(h);break;case 21:break;default:vA(g,h),WA(h)}}function WA(h){var g=h.flags;if(g&2){try{e:{for(var C=h.return;C!==null;){if(Ag(C)){var k=C;break e}C=C.return}throw Error(i(160))}switch(k.tag){case 5:var G=k.stateNode;k.flags&32&&($e(G,""),k.flags&=-33);var Y=Lp(h);kp(h,Y,G);break;case 3:case 4:var xe=k.stateNode.containerInfo,ut=Lp(h);Mp(h,ut,xe);break;default:throw Error(i(161))}}catch(xt){no(h,h.return,xt)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function dd(h,g,C){Xr=h,pd(h)}function pd(h,g,C){for(var k=(h.mode&1)!==0;Xr!==null;){var G=Xr,Y=G.child;if(G.tag===22&&k){var xe=G.memoizedState!==null||ud;if(!xe){var ut=G.alternate,xt=ut!==null&&ut.memoizedState!==null||$a;ut=ud;var jt=$a;if(ud=xe,($a=xt)&&!jt)for(Xr=G;Xr!==null;)xe=Xr,xt=xe.child,xe.tag===22&&xe.memoizedState!==null?Wh(G):xt!==null?(xt.return=xe,Xr=xt):Wh(G);for(;Y!==null;)Xr=Y,pd(Y),Y=Y.sibling;Xr=G,ud=ut,$a=jt}Rp(h)}else(G.subtreeFlags&8772)!==0&&Y!==null?(Y.return=G,Xr=Y):Rp(h)}}function Rp(h){for(;Xr!==null;){var g=Xr;if((g.flags&8772)!==0){var C=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:$a||Jo(5,g);break;case 1:var k=g.stateNode;if(g.flags&4&&!$a)if(C===null)k.componentDidMount();else{var G=g.elementType===g.type?C.memoizedProps:hi(g.type,C.memoizedProps);k.componentDidUpdate(G,C.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var Y=g.updateQueue;Y!==null&&Io(g,Y,k);break;case 3:var xe=g.updateQueue;if(xe!==null){if(C=null,g.child!==null)switch(g.child.tag){case 5:C=g.child.stateNode;break;case 1:C=g.child.stateNode}Io(g,xe,C)}break;case 5:var ut=g.stateNode;if(C===null&&g.flags&4){C=ut;var xt=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":xt.autoFocus&&C.focus();break;case"img":xt.src&&(C.src=xt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var jt=g.alternate;if(jt!==null){var fr=jt.memoizedState;if(fr!==null){var yr=fr.dehydrated;yr!==null&&Aa(yr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}$a||g.flags&512&&hd(g)}catch(ur){no(g,g.return,ur)}}if(g===h){Xr=null;break}if(C=g.sibling,C!==null){C.return=g.return,Xr=C;break}Xr=g.return}}function Hu(h){for(;Xr!==null;){var g=Xr;if(g===h){Xr=null;break}var C=g.sibling;if(C!==null){C.return=g.return,Xr=C;break}Xr=g.return}}function Wh(h){for(;Xr!==null;){var g=Xr;try{switch(g.tag){case 0:case 11:case 15:var C=g.return;try{Jo(4,g)}catch(xt){no(g,C,xt)}break;case 1:var k=g.stateNode;if(typeof k.componentDidMount=="function"){var G=g.return;try{k.componentDidMount()}catch(xt){no(g,G,xt)}}var Y=g.return;try{hd(g)}catch(xt){no(g,Y,xt)}break;case 5:var xe=g.return;try{hd(g)}catch(xt){no(g,xe,xt)}}}catch(xt){no(g,g.return,xt)}if(g===h){Xr=null;break}var ut=g.sibling;if(ut!==null){ut.return=g.return,Xr=ut;break}Xr=g.return}}var Jy=Math.ceil,md=fe.ReactCurrentDispatcher,Np=fe.ReactCurrentOwner,Wc=fe.ReactCurrentBatchConfig,yi=0,ta=null,_o=null,To=0,mc=0,gh=Qa(0),zs=0,Mf=null,Hi=0,gu=0,gd=0,ju=null,wa=null,yh=0,vh=1/0,ZA=null,Vu=!1,kf=null,gc=null,_h=!1,yc=null,Gu=0,Uf=0,yd=null,XA=-1,vd=0;function Wa(){return(yi&6)!==0?di():XA!==-1?XA:XA=di()}function Zc(h){return(h.mode&1)===0?1:(yi&2)!==0&&To!==0?To&-To:pi.transition!==null?(vd===0&&(vd=nA()),vd):(h=Kn,h!==0||(h=window.event,h=h===void 0?16:ha(h.type)),h)}function vc(h,g,C,k){if(50<Uf)throw Uf=0,yd=null,Error(i(185));rc(h,C,k),((yi&2)===0||h!==ta)&&(h===ta&&((yi&2)===0&&(gu|=C),zs===4&&Ku(h,To)),_l(h,k),C===1&&yi===0&&(g.mode&1)===0&&(vh=di()+500,jA&&re()))}function _l(h,g){var C=h.callbackNode;ys(h,g);var k=Fc(h,h===ta?To:0);if(k===0)C!==null&&al(C),h.callbackNode=null,h.callbackPriority=0;else if(g=k&-k,h.callbackPriority!==g){if(C!=null&&al(C),g===1)h.tag===0?$(hg.bind(null,h)):R(hg.bind(null,h)),jh(function(){(yi&6)===0&&re()}),C=null;else{switch(Fl(k)){case 1:C=Sl;break;case 4:C=Ci;break;case 16:C=jn;break;case 536870912:C=ll;break;default:C=jn}C=vg(C,Qp.bind(null,h))}h.callbackPriority=g,h.callbackNode=C}}function Qp(h,g){if(XA=-1,vd=0,(yi&6)!==0)throw Error(i(327));var C=h.callbackNode;if(Ch()&&h.callbackNode!==C)return null;var k=Fc(h,h===ta?To:0);if(k===0)return null;if((k&30)!==0||(k&h.expiredLanes)!==0||g)g=xd(h,k);else{g=k;var G=yi;yi|=2;var Y=dg();(ta!==h||To!==g)&&(ZA=null,vh=di()+500,bh(h,g));do try{Df();break}catch(ut){fg(h,ut)}while(!0);Yn(),md.current=Y,yi=G,_o!==null?g=0:(ta=null,To=0,g=zs)}if(g!==0){if(g===2&&(G=Oo(h),G!==0&&(k=G,g=Op(h,G))),g===1)throw C=Mf,bh(h,0),Ku(h,k),_l(h,di()),C;if(g===6)Ku(h,k);else{if(G=h.current.alternate,(k&30)===0&&!ev(G)&&(g=xd(h,k),g===2&&(Y=Oo(h),Y!==0&&(k=Y,g=Op(h,Y))),g===1))throw C=Mf,bh(h,0),Ku(h,k),_l(h,di()),C;switch(h.finishedWork=G,h.finishedLanes=k,g){case 0:case 1:throw Error(i(345));case 2:Bh(h,wa,ZA);break;case 3:if(Ku(h,k),(k&130023424)===k&&(g=yh+500-di(),10<g)){if(Fc(h,0)!==0)break;if(G=h.suspendedLanes,(G&k)!==k){Wa(),h.pingedLanes|=h.suspendedLanes&G;break}h.timeoutHandle=fA(Bh.bind(null,h,wa,ZA),g);break}Bh(h,wa,ZA);break;case 4:if(Ku(h,k),(k&4194240)===k)break;for(g=h.eventTimes,G=-1;0<k;){var xe=31-ds(k);Y=1<<xe,xe=g[xe],xe>G&&(G=xe),k&=~Y}if(k=G,k=di()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*Jy(k/1960))-k,10<k){h.timeoutHandle=fA(Bh.bind(null,h,wa,ZA),k);break}Bh(h,wa,ZA);break;case 5:Bh(h,wa,ZA);break;default:throw Error(i(329))}}}return _l(h,di()),h.callbackNode===C?Qp.bind(null,h):null}function Op(h,g){var C=ju;return h.current.memoizedState.isDehydrated&&(bh(h,g).flags|=256),h=xd(h,g),h!==2&&(g=wa,wa=C,g!==null&&zp(g)),h}function zp(h){wa===null?wa=h:wa.push.apply(wa,h)}function ev(h){for(var g=h;;){if(g.flags&16384){var C=g.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var k=0;k<C.length;k++){var G=C[k],Y=G.getSnapshot;G=G.value;try{if(!os(Y(),G))return!1}catch{return!1}}}if(C=g.child,g.subtreeFlags&16384&&C!==null)C.return=g,g=C;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ku(h,g){for(g&=~gd,g&=~gu,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var C=31-ds(g),k=1<<C;h[C]=-1,g&=~k}}function hg(h){if((yi&6)!==0)throw Error(i(327));Ch();var g=Fc(h,0);if((g&1)===0)return _l(h,di()),null;var C=xd(h,g);if(h.tag!==0&&C===2){var k=Oo(h);k!==0&&(g=k,C=Op(h,k))}if(C===1)throw C=Mf,bh(h,0),Ku(h,g),_l(h,di()),C;if(C===6)throw Error(i(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,Bh(h,wa,ZA),_l(h,di()),null}function wh(h,g){var C=yi;yi|=1;try{return h(g)}finally{yi=C,yi===0&&(vh=di()+500,jA&&re())}}function xh(h){yc!==null&&yc.tag===0&&(yi&6)===0&&Ch();var g=yi;yi|=1;var C=Wc.transition,k=Kn;try{if(Wc.transition=null,Kn=1,h)return h()}finally{Kn=k,Wc.transition=C,yi=g,(yi&6)===0&&re()}}function _d(){mc=gh.current,li(gh)}function bh(h,g){h.finishedWork=null,h.finishedLanes=0;var C=h.timeoutHandle;if(C!==-1&&(h.timeoutHandle=-1,uu(C)),_o!==null)for(C=_o.return;C!==null;){var k=C;switch(Ut(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&fu();break;case 3:ja(),li(Xs),li(Ns),du();break;case 5:VA(k);break;case 4:ja();break;case 13:li(gi);break;case 19:li(gi);break;case 10:gr(k.type._context);break;case 22:case 23:_d()}C=C.return}if(ta=h,_o=h=yu(h.current,null),To=mc=g,zs=0,Mf=null,gd=gu=Hi=0,wa=ju=null,ei!==null){for(g=0;g<ei.length;g++)if(C=ei[g],k=C.interleaved,k!==null){C.interleaved=null;var G=k.next,Y=C.pending;if(Y!==null){var xe=Y.next;Y.next=G,k.next=xe}C.pending=k}ei=null}return h}function fg(h,g){do{var C=_o;try{if(Yn(),jl.current=Is,Kc){for(var k=bi.memoizedState;k!==null;){var G=k.queue;G!==null&&(G.pending=null),k=k.next}Kc=!1}if(Va=0,es=Ui=bi=null,Ga=!1,qc=0,Np.current=null,C===null||C.return===null){zs=1,Mf=g,_o=null;break}e:{var Y=h,xe=C.return,ut=C,xt=g;if(g=To,ut.flags|=32768,xt!==null&&typeof xt=="object"&&typeof xt.then=="function"){var jt=xt,fr=ut,yr=fr.tag;if((fr.mode&1)===0&&(yr===0||yr===11||yr===15)){var ur=fr.alternate;ur?(fr.updateQueue=ur.updateQueue,fr.memoizedState=ur.memoizedState,fr.lanes=ur.lanes):(fr.updateQueue=null,fr.memoizedState=null)}var Qr=ro(xe);if(Qr!==null){Qr.flags&=-257,Ka(Qr,xe,ut,Y,g),Qr.mode&1&&Os(Y,jt,g),g=Qr,xt=jt;var en=g.updateQueue;if(en===null){var Gr=new Set;Gr.add(xt),g.updateQueue=Gr}else en.add(xt);break e}else{if((g&1)===0){Os(Y,jt,g),wd();break e}xt=Error(i(426))}}else if(tr&&ut.mode&1){var Ps=ro(xe);if(Ps!==null){(Ps.flags&65536)===0&&(Ps.flags|=256),Ka(Ps,xe,ut,Y,g),Fr(pc(xt,ut));break e}}Y=xt=pc(xt,ut),zs!==4&&(zs=2),ju===null?ju=[Y]:ju.push(Y),Y=xe;do{switch(Y.tag){case 3:Y.flags|=65536,g&=-g,Y.lanes|=g;var Nt=vo(Y,xt,g);xi(Y,Nt);break e;case 1:ut=xt;var St=Y.type,zt=Y.stateNode;if((Y.flags&128)===0&&(typeof St.getDerivedStateFromError=="function"||zt!==null&&typeof zt.componentDidCatch=="function"&&(gc===null||!gc.has(zt)))){Y.flags|=65536,g&=-g,Y.lanes|=g;var Br=vl(Y,ut,g);xi(Y,Br);break e}}Y=Y.return}while(Y!==null)}pg(C)}catch(ln){g=ln,_o===C&&C!==null&&(_o=C=C.return);continue}break}while(!0)}function dg(){var h=md.current;return md.current=Is,h===null?Is:h}function wd(){(zs===0||zs===3||zs===2)&&(zs=4),ta===null||(Hi&268435455)===0&&(gu&268435455)===0||Ku(ta,To)}function xd(h,g){var C=yi;yi|=2;var k=dg();(ta!==h||To!==g)&&(ZA=null,bh(h,g));do try{Hp();break}catch(G){fg(h,G)}while(!0);if(Yn(),yi=C,md.current=k,_o!==null)throw Error(i(261));return ta=null,To=0,zs}function Hp(){for(;_o!==null;)bd(_o)}function Df(){for(;_o!==null&&!ec();)bd(_o)}function bd(h){var g=yg(h.alternate,h,mc);h.memoizedProps=h.pendingProps,g===null?pg(h):_o=g,Np.current=null}function pg(h){var g=h;do{var C=g.alternate;if(h=g.return,(g.flags&32768)===0){if(C=ag(C,g,mc),C!==null){_o=C;return}}else{if(C=lg(C,g),C!==null){C.flags&=32767,_o=C;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{zs=6,_o=null;return}}if(g=g.sibling,g!==null){_o=g;return}_o=g=h}while(g!==null);zs===0&&(zs=5)}function Bh(h,g,C){var k=Kn,G=Wc.transition;try{Wc.transition=null,Kn=1,mg(h,g,C,k)}finally{Wc.transition=G,Kn=k}return null}function mg(h,g,C,k){do Ch();while(yc!==null);if((yi&6)!==0)throw Error(i(327));C=h.finishedWork;var G=h.finishedLanes;if(C===null)return null;if(h.finishedWork=null,h.finishedLanes=0,C===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0;var Y=C.lanes|C.childLanes;if(Ca(h,Y),h===ta&&(_o=ta=null,To=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||_h||(_h=!0,vg(jn,function(){return Ch(),null})),Y=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||Y){Y=Wc.transition,Wc.transition=null;var xe=Kn;Kn=1;var ut=yi;yi|=4,Np.current=null,Pp(h,C),ug(C,h),Lc(hA),ic=!!fc,hA=fc=null,h.current=C,dd(C),Ec(),yi=ut,Kn=xe,Wc.transition=Y}else h.current=C;if(_h&&(_h=!1,yc=h,Gu=G),Y=h.pendingLanes,Y===0&&(gc=null),Ro(C.stateNode),_l(h,di()),g!==null)for(k=h.onRecoverableError,C=0;C<g.length;C++)G=g[C],k(G.value,{componentStack:G.stack,digest:G.digest});if(Vu)throw Vu=!1,h=kf,kf=null,h;return(Gu&1)!==0&&h.tag!==0&&Ch(),Y=h.pendingLanes,(Y&1)!==0?h===yd?Uf++:(Uf=0,yd=h):Uf=0,re(),null}function Ch(){if(yc!==null){var h=Fl(Gu),g=Wc.transition,C=Kn;try{if(Wc.transition=null,Kn=16>h?16:h,yc===null)var k=!1;else{if(h=yc,yc=null,Gu=0,(yi&6)!==0)throw Error(i(331));var G=yi;for(yi|=4,Xr=h.current;Xr!==null;){var Y=Xr,xe=Y.child;if((Xr.flags&16)!==0){var ut=Y.deletions;if(ut!==null){for(var xt=0;xt<ut.length;xt++){var jt=ut[xt];for(Xr=jt;Xr!==null;){var fr=Xr;switch(fr.tag){case 0:case 11:case 15:mu(8,fr,Y)}var yr=fr.child;if(yr!==null)yr.return=fr,Xr=yr;else for(;Xr!==null;){fr=Xr;var ur=fr.sibling,Qr=fr.return;if(fd(fr),fr===jt){Xr=null;break}if(ur!==null){ur.return=Qr,Xr=ur;break}Xr=Qr}}}var en=Y.alternate;if(en!==null){var Gr=en.child;if(Gr!==null){en.child=null;do{var Ps=Gr.sibling;Gr.sibling=null,Gr=Ps}while(Gr!==null)}}Xr=Y}}if((Y.subtreeFlags&2064)!==0&&xe!==null)xe.return=Y,Xr=xe;else e:for(;Xr!==null;){if(Y=Xr,(Y.flags&2048)!==0)switch(Y.tag){case 0:case 11:case 15:mu(9,Y,Y.return)}var Nt=Y.sibling;if(Nt!==null){Nt.return=Y.return,Xr=Nt;break e}Xr=Y.return}}var St=h.current;for(Xr=St;Xr!==null;){xe=Xr;var zt=xe.child;if((xe.subtreeFlags&2064)!==0&&zt!==null)zt.return=xe,Xr=zt;else e:for(xe=St;Xr!==null;){if(ut=Xr,(ut.flags&2048)!==0)try{switch(ut.tag){case 0:case 11:case 15:Jo(9,ut)}}catch(ln){no(ut,ut.return,ln)}if(ut===xe){Xr=null;break e}var Br=ut.sibling;if(Br!==null){Br.return=ut.return,Xr=Br;break e}Xr=ut.return}}if(yi=G,re(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(cl,h)}catch{}k=!0}return k}finally{Kn=C,Wc.transition=g}}return!1}function gg(h,g,C){g=pc(C,g),g=vo(h,g,1),h=In(h,g,1),g=Wa(),h!==null&&(rc(h,1,g),_l(h,g))}function no(h,g,C){if(h.tag===3)gg(h,h,C);else for(;g!==null;){if(g.tag===3){gg(g,h,C);break}else if(g.tag===1){var k=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(gc===null||!gc.has(k))){h=pc(C,h),h=vl(g,h,1),g=In(g,h,1),h=Wa(),g!==null&&(rc(g,1,h),_l(g,h));break}}g=g.return}}function Rf(h,g,C){var k=h.pingCache;k!==null&&k.delete(g),g=Wa(),h.pingedLanes|=h.suspendedLanes&C,ta===h&&(To&C)===C&&(zs===4||zs===3&&(To&130023424)===To&&500>di()-yh?bh(h,0):gd|=C),_l(h,g)}function jp(h,g){g===0&&((h.mode&1)===0?g=1:(g=No,No<<=1,(No&130023424)===0&&(No=4194304)));var C=Wa();h=wi(h,g),h!==null&&(rc(h,g,C),_l(h,C))}function tv(h){var g=h.memoizedState,C=0;g!==null&&(C=g.retryLane),jp(h,C)}function rv(h,g){var C=0;switch(h.tag){case 13:var k=h.stateNode,G=h.memoizedState;G!==null&&(C=G.retryLane);break;case 19:k=h.stateNode;break;default:throw Error(i(314))}k!==null&&k.delete(g),jp(h,C)}var yg;yg=function(h,g,C){if(h!==null)if(h.memoizedProps!==g.pendingProps||Xs.current)qa=!0;else{if((h.lanes&C)===0&&(g.flags&128)===0)return qa=!1,Yy(h,g,C);qa=(h.flags&131072)!==0}else qa=!1,tr&&(g.flags&1048576)!==0&&Tt(g,Pe,g.index);switch(g.lanes=0,g.tag){case 2:var k=g.type;mh(h,g),h=g.pendingProps;var G=Vc(g,Ns.current);Ti(g,C),G=d(null,g,k,h,G,C);var Y=y();return g.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,go(k)?(Y=!0,Oa(g)):Y=!1,g.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,Ys(g),G.updater=yo,g.stateNode=G,G._reactInternals=g,zu(g,k,h,C),g=hh(null,g,k,!0,Y,C)):(g.tag=0,tr&&Y&&Zt(g),Xo(null,g,G,C),g=g.child),g;case 16:k=g.elementType;e:{switch(mh(h,g),h=g.pendingProps,G=k._init,k=G(k._payload),g.type=k,G=g.tag=_g(k),h=hi(k,h),G){case 0:g=Gh(null,g,k,h,C);break e;case 1:g=uh(null,g,k,h,C);break e;case 11:g=Vh(null,g,k,h,C);break e;case 14:g=Ff(null,g,k,hi(k.type,h),C);break e}throw Error(i(306,k,""))}return g;case 0:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),Gh(h,g,k,G,C);case 1:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),uh(h,g,k,G,C);case 3:e:{if(pu(g),h===null)throw Error(i(387));k=g.pendingProps,Y=g.memoizedState,G=Y.element,Fo(h,g),Ss(g,k,null,C);var xe=g.memoizedState;if(k=xe.element,Y.isDehydrated)if(Y={element:k,isDehydrated:!1,cache:xe.cache,pendingSuspenseBoundaries:xe.pendingSuspenseBoundaries,transitions:xe.transitions},g.updateQueue.baseState=Y,g.memoizedState=Y,g.flags&256){G=pc(Error(i(423)),g),g=Kh(h,g,k,C,G);break e}else if(k!==G){G=pc(Error(i(424)),g),g=Kh(h,g,k,C,G);break e}else for(Wt=po(g.stateNode.containerInfo.firstChild),qt=g,tr=!0,er=null,C=Qi(g,null,k,C),g.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Hr(),k===G){g=$c(h,g,C);break e}Xo(h,g,k,C)}g=g.child}return g;case 5:return Hl(g),h===null&&Zr(g),k=g.type,G=g.pendingProps,Y=h!==null?h.memoizedProps:null,xe=G.children,Ru(k,G)?xe=null:Y!==null&&Ru(k,Y)&&(g.flags|=32),gA(h,g),Xo(h,g,xe,C),g.child;case 6:return h===null&&Zr(g),null;case 13:return rg(h,g,C);case 4:return Gc(g,g.stateNode.containerInfo),k=g.pendingProps,h===null?g.child=ls(g,null,k,C):Xo(h,g,k,C),g.child;case 11:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),Vh(h,g,k,G,C);case 7:return Xo(h,g,g.pendingProps,C),g.child;case 8:return Xo(h,g,g.pendingProps.children,C),g.child;case 12:return Xo(h,g,g.pendingProps.children,C),g.child;case 10:e:{if(k=g.type._context,G=g.pendingProps,Y=g.memoizedProps,xe=G.value,Xn(Bs,k._currentValue),k._currentValue=xe,Y!==null)if(os(Y.value,xe)){if(Y.children===G.children&&!Xs.current){g=$c(h,g,C);break e}}else for(Y=g.child,Y!==null&&(Y.return=g);Y!==null;){var ut=Y.dependencies;if(ut!==null){xe=Y.child;for(var xt=ut.firstContext;xt!==null;){if(xt.context===k){if(Y.tag===1){xt=ki(-1,C&-C),xt.tag=2;var jt=Y.updateQueue;if(jt!==null){jt=jt.shared;var fr=jt.pending;fr===null?xt.next=xt:(xt.next=fr.next,fr.next=xt),jt.pending=xt}}Y.lanes|=C,xt=Y.alternate,xt!==null&&(xt.lanes|=C),xr(Y.return,C,g),ut.lanes|=C;break}xt=xt.next}}else if(Y.tag===10)xe=Y.type===g.type?null:Y.child;else if(Y.tag===18){if(xe=Y.return,xe===null)throw Error(i(341));xe.lanes|=C,ut=xe.alternate,ut!==null&&(ut.lanes|=C),xr(xe,C,g),xe=Y.sibling}else xe=Y.child;if(xe!==null)xe.return=Y;else for(xe=Y;xe!==null;){if(xe===g){xe=null;break}if(Y=xe.sibling,Y!==null){Y.return=xe.return,xe=Y;break}xe=xe.return}Y=xe}Xo(h,g,G.children,C),g=g.child}return g;case 9:return G=g.type,k=g.pendingProps.children,Ti(g,C),G=Vi(G),k=k(G),g.flags|=1,Xo(h,g,k,C),g.child;case 14:return k=g.type,G=hi(k,g.pendingProps),G=hi(k.type,G),Ff(h,g,k,G,C);case 15:return KA(h,g,g.type,g.pendingProps,C);case 17:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),mh(h,g),g.tag=1,go(k)?(h=!0,Oa(g)):h=!1,Ti(g,C),mA(g,k,G),zu(g,k,G,C),hh(null,g,k,!0,h,C);case 19:return ph(h,g,C);case 22:return qA(h,g,C)}throw Error(i(156,g.tag))};function vg(h,g){return ol(h,g)}function nv(h,g,C,k){this.tag=h,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(h,g,C,k){return new nv(h,g,C,k)}function Nf(h){return h=h.prototype,!(!h||!h.isReactComponent)}function _g(h){if(typeof h=="function")return Nf(h)?1:0;if(h!=null){if(h=h.$$typeof,h===me)return 11;if(h===pt)return 14}return 2}function yu(h,g){var C=h.alternate;return C===null?(C=_c(h.tag,g,h.key,h.mode),C.elementType=h.elementType,C.type=h.type,C.stateNode=h.stateNode,C.alternate=h,h.alternate=C):(C.pendingProps=g,C.type=h.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=h.flags&14680064,C.childLanes=h.childLanes,C.lanes=h.lanes,C.child=h.child,C.memoizedProps=h.memoizedProps,C.memoizedState=h.memoizedState,C.updateQueue=h.updateQueue,g=h.dependencies,C.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},C.sibling=h.sibling,C.index=h.index,C.ref=h.ref,C}function Qf(h,g,C,k,G,Y){var xe=2;if(k=h,typeof h=="function")Nf(h)&&(xe=1);else if(typeof h=="string")xe=5;else e:switch(h){case Ve:return Eh(C.children,G,Y,g);case Oe:xe=8,G|=8;break;case be:return h=_c(12,C,g,G|2),h.elementType=be,h.lanes=Y,h;case Ue:return h=_c(13,C,g,G),h.elementType=Ue,h.lanes=Y,h;case Ie:return h=_c(19,C,g,G),h.elementType=Ie,h.lanes=Y,h;case ot:return Sh(C,G,Y,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case rt:xe=10;break e;case ue:xe=9;break e;case me:xe=11;break e;case pt:xe=14;break e;case lt:xe=16,k=null;break e}throw Error(i(130,h==null?h:typeof h,""))}return g=_c(xe,C,g,G),g.elementType=h,g.type=k,g.lanes=Y,g}function Eh(h,g,C,k){return h=_c(7,h,k,g),h.lanes=C,h}function Sh(h,g,C,k){return h=_c(22,h,k,g),h.elementType=ot,h.lanes=C,h.stateNode={isHidden:!1},h}function Vp(h,g,C){return h=_c(6,h,null,g),h.lanes=C,h}function Bd(h,g,C){return g=_c(4,h.children!==null?h.children:[],h.key,g),g.lanes=C,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function iv(h,g,C,k,G){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iA(0),this.expirationTimes=iA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iA(0),this.identifierPrefix=k,this.onRecoverableError=G,this.mutableSourceEagerHydrationData=null}function Gp(h,g,C,k,G,Y,xe,ut,xt){return h=new iv(h,g,C,ut,xt),g===1?(g=1,Y===!0&&(g|=8)):g=0,Y=_c(3,null,null,g),h.current=Y,Y.stateNode=h,Y.memoizedState={element:k,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ys(Y),h}function sv(h,g,C){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:He,key:k==null?null:""+k,children:h,containerInfo:g,implementation:C}}function Kp(h){if(!h)return zl;h=h._reactInternals;e:{if(nn(h)!==h||h.tag!==1)throw Error(i(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(go(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(i(171))}if(h.tag===1){var C=h.type;if(go(C))return dA(h,C,g)}return g}function wg(h,g,C,k,G,Y,xe,ut,xt){return h=Gp(C,k,!0,h,G,Y,xe,ut,xt),h.context=Kp(null),C=h.current,k=Wa(),G=Zc(C),Y=ki(k,G),Y.callback=g??null,In(C,Y,G),h.current.lanes=G,rc(h,G,k),_l(h,k),h}function Cd(h,g,C,k){var G=g.current,Y=Wa(),xe=Zc(G);return C=Kp(C),g.context===null?g.context=C:g.pendingContext=C,g=ki(Y,xe),g.payload={element:h},k=k===void 0?null:k,k!==null&&(g.callback=k),h=In(G,g,xe),h!==null&&(vc(h,G,xe,Y),Vn(h,G,xe)),xe}function Hs(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function Zh(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var C=h.retryLane;h.retryLane=C!==0&&C<g?C:g}}function qp(h,g){Zh(h,g),(h=h.alternate)&&Zh(h,g)}function ov(){return null}var $p=typeof reportError=="function"?reportError:function(h){console.error(h)};function Ed(h){this._internalRoot=h}Sd.prototype.render=Ed.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(i(409));Cd(h,g,null,null)},Sd.prototype.unmount=Ed.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;xh(function(){Cd(null,h,null,null)}),g[Rs]=null}};function Sd(h){this._internalRoot=h}Sd.prototype.unstable_scheduleHydration=function(h){if(h){var g=Ic();h={blockedOn:null,target:h,priority:g};for(var C=0;C<Jn.length&&g!==0&&g<Jn[C].priority;C++);Jn.splice(C,0,h),C===0&&uo(h)}};function Fd(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Of(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function Fh(){}function Wp(h,g,C,k,G){if(G){if(typeof k=="function"){var Y=k;k=function(){var jt=Hs(xe);Y.call(jt)}}var xe=wg(g,k,h,0,null,!1,!1,"",Fh);return h._reactRootContainer=xe,h[Rs]=xe.current,uc(h.nodeType===8?h.parentNode:h),xh(),xe}for(;G=h.lastChild;)h.removeChild(G);if(typeof k=="function"){var ut=k;k=function(){var jt=Hs(xt);ut.call(jt)}}var xt=Gp(h,0,!1,null,null,!1,!1,"",Fh);return h._reactRootContainer=xt,h[Rs]=xt.current,uc(h.nodeType===8?h.parentNode:h),xh(function(){Cd(g,xt,C,k)}),xt}function zf(h,g,C,k,G){var Y=C._reactRootContainer;if(Y){var xe=Y;if(typeof G=="function"){var ut=G;G=function(){var xt=Hs(xe);ut.call(xt)}}Cd(g,xe,h,G)}else xe=Wp(C,g,h,G,k);return Hs(xe)}nc=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var C=Qo(g.pendingLanes);C!==0&&(TA(g,C|1),_l(g,di()),(yi&6)===0&&(vh=di()+500,re()))}break;case 13:xh(function(){var k=wi(h,1);if(k!==null){var G=Wa();vc(k,h,1,G)}}),qp(h,1)}},Il=function(h){if(h.tag===13){var g=wi(h,134217728);if(g!==null){var C=Wa();vc(g,h,134217728,C)}qp(h,134217728)}},PA=function(h){if(h.tag===13){var g=Zc(h),C=wi(h,g);if(C!==null){var k=Wa();vc(C,h,g,k)}qp(h,g)}},Ic=function(){return Kn},ca=function(h,g){var C=Kn;try{return Kn=h,g()}finally{Kn=C}},dr=function(h,g,C){switch(g){case"input":if(Ur(h,C),g=C.name,C.type==="radio"&&g!=null){for(C=h;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<C.length;g++){var k=C[g];if(k!==h&&k.form===h.form){var G=HA(k);if(!G)throw Error(i(90));ar(k),Ur(k,G)}}}break;case"textarea":On(h,C);break;case"select":g=C.value,g!=null&&Sr(h,!!C.multiple,g,!1)}},mr=wh,Kr=xh;var xg={usingClientEntryPoint:!1,Events:[Ra,Na,HA,tn,Nr,wh]},qu={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xh={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fe.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=ks(h),h===null?null:h.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance||ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{cl=Hf.inject(Xh),Us=Hf}catch{}}return Yc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xg,Yc.createPortal=function(h,g){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fd(g))throw Error(i(200));return sv(h,g,null,C)},Yc.createRoot=function(h,g){if(!Fd(h))throw Error(i(299));var C=!1,k="",G=$p;return g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(k=g.identifierPrefix),g.onRecoverableError!==void 0&&(G=g.onRecoverableError)),g=Gp(h,1,!1,null,null,C,!1,k,G),h[Rs]=g.current,uc(h.nodeType===8?h.parentNode:h),new Ed(g)},Yc.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=ks(g),h=h===null?null:h.stateNode,h},Yc.flushSync=function(h){return xh(h)},Yc.hydrate=function(h,g,C){if(!Of(g))throw Error(i(200));return zf(null,h,g,!0,C)},Yc.hydrateRoot=function(h,g,C){if(!Fd(h))throw Error(i(405));var k=C!=null&&C.hydratedSources||null,G=!1,Y="",xe=$p;if(C!=null&&(C.unstable_strictMode===!0&&(G=!0),C.identifierPrefix!==void 0&&(Y=C.identifierPrefix),C.onRecoverableError!==void 0&&(xe=C.onRecoverableError)),g=wg(g,null,h,1,C??null,G,!1,Y,xe),h[Rs]=g.current,uc(h),k)for(h=0;h<k.length;h++)C=k[h],G=C._getVersion,G=G(C._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[C,G]:g.mutableSourceEagerHydrationData.push(C,G);return new Sd(g)},Yc.render=function(h,g,C){if(!Of(g))throw Error(i(200));return zf(null,h,g,!1,C)},Yc.unmountComponentAtNode=function(h){if(!Of(h))throw Error(i(40));return h._reactRootContainer?(xh(function(){zf(null,null,h,!1,function(){h._reactRootContainer=null,h[Rs]=null})}),!0):!1},Yc.unstable_batchedUpdates=wh,Yc.unstable_renderSubtreeIntoContainer=function(h,g,C,k){if(!Of(C))throw Error(i(200));if(h==null||h._reactInternals===void 0)throw Error(i(38));return zf(h,g,C,!1,k)},Yc.version="18.3.1-next-f1338f8080-20240426",Yc}var Db;function l5(){if(Db)return jv.exports;Db=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),jv.exports=VT(),jv.exports}var Rb;function GT(){if(Rb)return Qg;Rb=1;var e=l5();return Qg.createRoot=e.createRoot,Qg.hydrateRoot=e.hydrateRoot,Qg}var KT=GT(),te=mw();const Pr=pw(te),dy=NT({__proto__:null,default:Pr},[te]),qT=1,$T=1e6;let Kv=0;function WT(){return Kv=(Kv+1)%Number.MAX_SAFE_INTEGER,Kv.toString()}const qv=new Map,Nb=e=>{if(qv.has(e))return;const n=setTimeout(()=>{qv.delete(e),Cm({type:"REMOVE_TOAST",toastId:e})},$T);qv.set(e,n)},ZT=(e,n)=>{switch(n.type){case"ADD_TOAST":return{...e,toasts:[n.toast,...e.toasts].slice(0,qT)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(i=>i.id===n.toast.id?{...i,...n.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=n;return i?Nb(i):e.toasts.forEach(a=>{Nb(a.id)}),{...e,toasts:e.toasts.map(a=>a.id===i||i===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==n.toastId)}}},I0=[];let T0={toasts:[]};function Cm(e){T0=ZT(T0,e),I0.forEach(n=>{n(T0)})}function i_({...e}){const n=WT(),i=u=>Cm({type:"UPDATE_TOAST",toast:{...u,id:n}}),a=()=>Cm({type:"DISMISS_TOAST",toastId:n});return Cm({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:u=>{u||a()}}}),{id:n,dismiss:a,update:i}}function XT(){const[e,n]=te.useState(T0);return te.useEffect(()=>(I0.push(n),()=>{const i=I0.indexOf(n);i>-1&&I0.splice(i,1)}),[e]),{...e,toast:i_,dismiss:i=>Cm({type:"DISMISS_TOAST",toastId:i})}}var _p=l5();const c5=pw(_p);function Un(e,n,{checkForDefaultPrevented:i=!0}={}){return function(u){if(e?.(u),i===!1||!u.defaultPrevented)return n?.(u)}}function Qb(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Gm(...e){return n=>{let i=!1;const a=e.map(u=>{const f=Qb(u,n);return!i&&typeof f=="function"&&(i=!0),f});if(i)return()=>{for(let u=0;u<a.length;u++){const f=a[u];typeof f=="function"?f():Qb(e[u],null)}}}}function fs(...e){return te.useCallback(Gm(...e),e)}function Hh(e,n=[]){let i=[];function a(f,m){const o=te.createContext(m),w=i.length;i=[...i,m];const E=D=>{const{scope:O,children:P,...W}=D,H=O?.[e]?.[w]||o,z=te.useMemo(()=>W,Object.values(W));return ce.jsx(H.Provider,{value:z,children:P})};E.displayName=f+"Provider";function I(D,O){const P=O?.[e]?.[w]||o,W=te.useContext(P);if(W)return W;if(m!==void 0)return m;throw new Error(`\`${D}\` must be used within \`${f}\``)}return[E,I]}const u=()=>{const f=i.map(m=>te.createContext(m));return function(o){const w=o?.[e]||f;return te.useMemo(()=>({[`__scope${e}`]:{...o,[e]:w}}),[o,w])}};return u.scopeName=e,[a,YT(u,...n)]}function YT(...e){const n=e[0];if(e.length===1)return n;const i=()=>{const a=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(f){const m=a.reduce((o,{useScope:w,scopeName:E})=>{const D=w(f)[`__scope${E}`];return{...o,...D}},{});return te.useMemo(()=>({[`__scope${n.scopeName}`]:m}),[m])}};return i.scopeName=n.scopeName,i}function Ob(e){const n=JT(e),i=te.forwardRef((a,u)=>{const{children:f,...m}=a,o=te.Children.toArray(f),w=o.find(t3);if(w){const E=w.props.children,I=o.map(D=>D===w?te.Children.count(E)>1?te.Children.only(null):te.isValidElement(E)?E.props.children:null:D);return ce.jsx(n,{...m,ref:u,children:te.isValidElement(E)?te.cloneElement(E,void 0,I):null})}return ce.jsx(n,{...m,ref:u,children:f})});return i.displayName=`${e}.Slot`,i}function JT(e){const n=te.forwardRef((i,a)=>{const{children:u,...f}=i;if(te.isValidElement(u)){const m=n3(u),o=r3(f,u.props);return u.type!==te.Fragment&&(o.ref=a?Gm(a,m):m),te.cloneElement(u,o)}return te.Children.count(u)>1?te.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var e3=Symbol("radix.slottable");function t3(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===e3}function r3(e,n){const i={...n};for(const a in n){const u=e[a],f=n[a];/^on[A-Z]/.test(a)?u&&f?i[a]=(...o)=>{const w=f(...o);return u(...o),w}:u&&(i[a]=u):a==="style"?i[a]={...u,...f}:a==="className"&&(i[a]=[u,f].filter(Boolean).join(" "))}return{...e,...i}}function n3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function gw(e){const n=e+"CollectionProvider",[i,a]=Hh(n),[u,f]=i(n,{collectionRef:{current:null},itemMap:new Map}),m=H=>{const{scope:z,children:Z}=H,se=Pr.useRef(null),ae=Pr.useRef(new Map).current;return ce.jsx(u,{scope:z,itemMap:ae,collectionRef:se,children:Z})};m.displayName=n;const o=e+"CollectionSlot",w=Ob(o),E=Pr.forwardRef((H,z)=>{const{scope:Z,children:se}=H,ae=f(o,Z),fe=fs(z,ae.collectionRef);return ce.jsx(w,{ref:fe,children:se})});E.displayName=o;const I=e+"CollectionItemSlot",D="data-radix-collection-item",O=Ob(I),P=Pr.forwardRef((H,z)=>{const{scope:Z,children:se,...ae}=H,fe=Pr.useRef(null),Fe=fs(z,fe),He=f(I,Z);return Pr.useEffect(()=>(He.itemMap.set(fe,{ref:fe,...ae}),()=>void He.itemMap.delete(fe))),ce.jsx(O,{[D]:"",ref:Fe,children:se})});P.displayName=I;function W(H){const z=f(e+"CollectionConsumer",H);return Pr.useCallback(()=>{const se=z.collectionRef.current;if(!se)return[];const ae=Array.from(se.querySelectorAll(`[${D}]`));return Array.from(z.itemMap.values()).sort((He,Ve)=>ae.indexOf(He.ref.current)-ae.indexOf(Ve.ref.current))},[z.collectionRef,z.itemMap])}return[{Provider:m,Slot:E,ItemSlot:P},W,a]}function i3(e){const n=s3(e),i=te.forwardRef((a,u)=>{const{children:f,...m}=a,o=te.Children.toArray(f),w=o.find(a3);if(w){const E=w.props.children,I=o.map(D=>D===w?te.Children.count(E)>1?te.Children.only(null):te.isValidElement(E)?E.props.children:null:D);return ce.jsx(n,{...m,ref:u,children:te.isValidElement(E)?te.cloneElement(E,void 0,I):null})}return ce.jsx(n,{...m,ref:u,children:f})});return i.displayName=`${e}.Slot`,i}function s3(e){const n=te.forwardRef((i,a)=>{const{children:u,...f}=i;if(te.isValidElement(u)){const m=c3(u),o=l3(f,u.props);return u.type!==te.Fragment&&(o.ref=a?Gm(a,m):m),te.cloneElement(u,o)}return te.Children.count(u)>1?te.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var o3=Symbol("radix.slottable");function a3(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===o3}function l3(e,n){const i={...n};for(const a in n){const u=e[a],f=n[a];/^on[A-Z]/.test(a)?u&&f?i[a]=(...o)=>{const w=f(...o);return u(...o),w}:u&&(i[a]=u):a==="style"?i[a]={...u,...f}:a==="className"&&(i[a]=[u,f].filter(Boolean).join(" "))}return{...e,...i}}function c3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var A3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oi=A3.reduce((e,n)=>{const i=i3(`Primitive.${n}`),a=te.forwardRef((u,f)=>{const{asChild:m,...o}=u,w=m?i:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ce.jsx(w,{...o,ref:f})});return a.displayName=`Primitive.${n}`,{...e,[n]:a}},{});function A5(e,n){e&&_p.flushSync(()=>e.dispatchEvent(n))}function iu(e){const n=te.useRef(e);return te.useEffect(()=>{n.current=e}),te.useMemo(()=>(...i)=>n.current?.(...i),[])}function u3(e,n=globalThis?.document){const i=iu(e);te.useEffect(()=>{const a=u=>{u.key==="Escape"&&i(u)};return n.addEventListener("keydown",a,{capture:!0}),()=>n.removeEventListener("keydown",a,{capture:!0})},[i,n])}var h3="DismissableLayer",s_="dismissableLayer.update",f3="dismissableLayer.pointerDownOutside",d3="dismissableLayer.focusOutside",zb,u5=te.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),py=te.forwardRef((e,n)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:o,...w}=e,E=te.useContext(u5),[I,D]=te.useState(null),O=I?.ownerDocument??globalThis?.document,[,P]=te.useState({}),W=fs(n,Ve=>D(Ve)),H=Array.from(E.layers),[z]=[...E.layersWithOutsidePointerEventsDisabled].slice(-1),Z=H.indexOf(z),se=I?H.indexOf(I):-1,ae=E.layersWithOutsidePointerEventsDisabled.size>0,fe=se>=Z,Fe=m3(Ve=>{const Oe=Ve.target,be=[...E.branches].some(rt=>rt.contains(Oe));!fe||be||(u?.(Ve),m?.(Ve),Ve.defaultPrevented||o?.())},O),He=g3(Ve=>{const Oe=Ve.target;[...E.branches].some(rt=>rt.contains(Oe))||(f?.(Ve),m?.(Ve),Ve.defaultPrevented||o?.())},O);return u3(Ve=>{se===E.layers.size-1&&(a?.(Ve),!Ve.defaultPrevented&&o&&(Ve.preventDefault(),o()))},O),te.useEffect(()=>{if(I)return i&&(E.layersWithOutsidePointerEventsDisabled.size===0&&(zb=O.body.style.pointerEvents,O.body.style.pointerEvents="none"),E.layersWithOutsidePointerEventsDisabled.add(I)),E.layers.add(I),Hb(),()=>{i&&E.layersWithOutsidePointerEventsDisabled.size===1&&(O.body.style.pointerEvents=zb)}},[I,O,i,E]),te.useEffect(()=>()=>{I&&(E.layers.delete(I),E.layersWithOutsidePointerEventsDisabled.delete(I),Hb())},[I,E]),te.useEffect(()=>{const Ve=()=>P({});return document.addEventListener(s_,Ve),()=>document.removeEventListener(s_,Ve)},[]),ce.jsx(oi.div,{...w,ref:W,style:{pointerEvents:ae?fe?"auto":"none":void 0,...e.style},onFocusCapture:Un(e.onFocusCapture,He.onFocusCapture),onBlurCapture:Un(e.onBlurCapture,He.onBlurCapture),onPointerDownCapture:Un(e.onPointerDownCapture,Fe.onPointerDownCapture)})});py.displayName=h3;var p3="DismissableLayerBranch",h5=te.forwardRef((e,n)=>{const i=te.useContext(u5),a=te.useRef(null),u=fs(n,a);return te.useEffect(()=>{const f=a.current;if(f)return i.branches.add(f),()=>{i.branches.delete(f)}},[i.branches]),ce.jsx(oi.div,{...e,ref:u})});h5.displayName=p3;function m3(e,n=globalThis?.document){const i=iu(e),a=te.useRef(!1),u=te.useRef(()=>{});return te.useEffect(()=>{const f=o=>{if(o.target&&!a.current){let w=function(){f5(f3,i,E,{discrete:!0})};const E={originalEvent:o};o.pointerType==="touch"?(n.removeEventListener("click",u.current),u.current=w,n.addEventListener("click",u.current,{once:!0})):w()}else n.removeEventListener("click",u.current);a.current=!1},m=window.setTimeout(()=>{n.addEventListener("pointerdown",f)},0);return()=>{window.clearTimeout(m),n.removeEventListener("pointerdown",f),n.removeEventListener("click",u.current)}},[n,i]),{onPointerDownCapture:()=>a.current=!0}}function g3(e,n=globalThis?.document){const i=iu(e),a=te.useRef(!1);return te.useEffect(()=>{const u=f=>{f.target&&!a.current&&f5(d3,i,{originalEvent:f},{discrete:!1})};return n.addEventListener("focusin",u),()=>n.removeEventListener("focusin",u)},[n,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Hb(){const e=new CustomEvent(s_);document.dispatchEvent(e)}function f5(e,n,i,{discrete:a}){const u=i.originalEvent.target,f=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});n&&u.addEventListener(e,n,{once:!0}),a?A5(u,f):u.dispatchEvent(f)}var y3=py,v3=h5,Cl=globalThis?.document?te.useLayoutEffect:()=>{},_3="Portal",yw=te.forwardRef((e,n)=>{const{container:i,...a}=e,[u,f]=te.useState(!1);Cl(()=>f(!0),[]);const m=i||u&&globalThis?.document?.body;return m?c5.createPortal(ce.jsx(oi.div,{...a,ref:n}),m):null});yw.displayName=_3;function w3(e,n){return te.useReducer((i,a)=>n[i][a]??i,e)}var Km=e=>{const{present:n,children:i}=e,a=x3(n),u=typeof i=="function"?i({present:a.isPresent}):te.Children.only(i),f=fs(a.ref,b3(u));return typeof i=="function"||a.isPresent?te.cloneElement(u,{ref:f}):null};Km.displayName="Presence";function x3(e){const[n,i]=te.useState(),a=te.useRef(null),u=te.useRef(e),f=te.useRef("none"),m=e?"mounted":"unmounted",[o,w]=w3(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return te.useEffect(()=>{const E=Og(a.current);f.current=o==="mounted"?E:"none"},[o]),Cl(()=>{const E=a.current,I=u.current;if(I!==e){const O=f.current,P=Og(E);e?w("MOUNT"):P==="none"||E?.display==="none"?w("UNMOUNT"):w(I&&O!==P?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,w]),Cl(()=>{if(n){let E;const I=n.ownerDocument.defaultView??window,D=P=>{const H=Og(a.current).includes(CSS.escape(P.animationName));if(P.target===n&&H&&(w("ANIMATION_END"),!u.current)){const z=n.style.animationFillMode;n.style.animationFillMode="forwards",E=I.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=z)})}},O=P=>{P.target===n&&(f.current=Og(a.current))};return n.addEventListener("animationstart",O),n.addEventListener("animationcancel",D),n.addEventListener("animationend",D),()=>{I.clearTimeout(E),n.removeEventListener("animationstart",O),n.removeEventListener("animationcancel",D),n.removeEventListener("animationend",D)}}else w("ANIMATION_END")},[n,w]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:te.useCallback(E=>{a.current=E?getComputedStyle(E):null,i(E)},[])}}function Og(e){return e?.animationName||"none"}function b3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var B3=dy[" useInsertionEffect ".trim().toString()]||Cl;function mp({prop:e,defaultProp:n,onChange:i=()=>{},caller:a}){const[u,f,m]=C3({defaultProp:n,onChange:i}),o=e!==void 0,w=o?e:u;{const I=te.useRef(e!==void 0);te.useEffect(()=>{const D=I.current;D!==o&&console.warn(`${a} is changing from ${D?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),I.current=o},[o,a])}const E=te.useCallback(I=>{if(o){const D=E3(I)?I(e):I;D!==e&&m.current?.(D)}else f(I)},[o,e,f,m]);return[w,E]}function C3({defaultProp:e,onChange:n}){const[i,a]=te.useState(e),u=te.useRef(i),f=te.useRef(n);return B3(()=>{f.current=n},[n]),te.useEffect(()=>{u.current!==i&&(f.current?.(i),u.current=i)},[i,u]),[i,a,f]}function E3(e){return typeof e=="function"}var d5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),S3="VisuallyHidden",my=te.forwardRef((e,n)=>ce.jsx(oi.span,{...e,ref:n,style:{...d5,...e.style}}));my.displayName=S3;var F3=my,vw="ToastProvider",[_w,I3,T3]=gw("Toast"),[p5]=Hh("Toast",[T3]),[P3,gy]=p5(vw),m5=e=>{const{__scopeToast:n,label:i="Notification",duration:a=5e3,swipeDirection:u="right",swipeThreshold:f=50,children:m}=e,[o,w]=te.useState(null),[E,I]=te.useState(0),D=te.useRef(!1),O=te.useRef(!1);return i.trim()||console.error(`Invalid prop \`label\` supplied to \`${vw}\`. Expected non-empty \`string\`.`),ce.jsx(_w.Provider,{scope:n,children:ce.jsx(P3,{scope:n,label:i,duration:a,swipeDirection:u,swipeThreshold:f,toastCount:E,viewport:o,onViewportChange:w,onToastAdd:te.useCallback(()=>I(P=>P+1),[]),onToastRemove:te.useCallback(()=>I(P=>P-1),[]),isFocusedToastEscapeKeyDownRef:D,isClosePausedRef:O,children:m})})};m5.displayName=vw;var g5="ToastViewport",L3=["F8"],o_="toast.viewportPause",a_="toast.viewportResume",y5=te.forwardRef((e,n)=>{const{__scopeToast:i,hotkey:a=L3,label:u="Notifications ({hotkey})",...f}=e,m=gy(g5,i),o=I3(i),w=te.useRef(null),E=te.useRef(null),I=te.useRef(null),D=te.useRef(null),O=fs(n,D,m.onViewportChange),P=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=m.toastCount>0;te.useEffect(()=>{const z=Z=>{a.length!==0&&a.every(ae=>Z[ae]||Z.code===ae)&&D.current?.focus()};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[a]),te.useEffect(()=>{const z=w.current,Z=D.current;if(W&&z&&Z){const se=()=>{if(!m.isClosePausedRef.current){const He=new CustomEvent(o_);Z.dispatchEvent(He),m.isClosePausedRef.current=!0}},ae=()=>{if(m.isClosePausedRef.current){const He=new CustomEvent(a_);Z.dispatchEvent(He),m.isClosePausedRef.current=!1}},fe=He=>{!z.contains(He.relatedTarget)&&ae()},Fe=()=>{z.contains(document.activeElement)||ae()};return z.addEventListener("focusin",se),z.addEventListener("focusout",fe),z.addEventListener("pointermove",se),z.addEventListener("pointerleave",Fe),window.addEventListener("blur",se),window.addEventListener("focus",ae),()=>{z.removeEventListener("focusin",se),z.removeEventListener("focusout",fe),z.removeEventListener("pointermove",se),z.removeEventListener("pointerleave",Fe),window.removeEventListener("blur",se),window.removeEventListener("focus",ae)}}},[W,m.isClosePausedRef]);const H=te.useCallback(({tabbingDirection:z})=>{const se=o().map(ae=>{const fe=ae.ref.current,Fe=[fe,...G3(fe)];return z==="forwards"?Fe:Fe.reverse()});return(z==="forwards"?se.reverse():se).flat()},[o]);return te.useEffect(()=>{const z=D.current;if(z){const Z=se=>{const ae=se.altKey||se.ctrlKey||se.metaKey;if(se.key==="Tab"&&!ae){const Fe=document.activeElement,He=se.shiftKey;if(se.target===z&&He){E.current?.focus();return}const be=H({tabbingDirection:He?"backwards":"forwards"}),rt=be.findIndex(ue=>ue===Fe);$v(be.slice(rt+1))?se.preventDefault():He?E.current?.focus():I.current?.focus()}};return z.addEventListener("keydown",Z),()=>z.removeEventListener("keydown",Z)}},[o,H]),ce.jsxs(v3,{ref:w,role:"region","aria-label":u.replace("{hotkey}",P),tabIndex:-1,style:{pointerEvents:W?void 0:"none"},children:[W&&ce.jsx(l_,{ref:E,onFocusFromOutsideViewport:()=>{const z=H({tabbingDirection:"forwards"});$v(z)}}),ce.jsx(_w.Slot,{scope:i,children:ce.jsx(oi.ol,{tabIndex:-1,...f,ref:O})}),W&&ce.jsx(l_,{ref:I,onFocusFromOutsideViewport:()=>{const z=H({tabbingDirection:"backwards"});$v(z)}})]})});y5.displayName=g5;var v5="ToastFocusProxy",l_=te.forwardRef((e,n)=>{const{__scopeToast:i,onFocusFromOutsideViewport:a,...u}=e,f=gy(v5,i);return ce.jsx(my,{tabIndex:0,...u,ref:n,style:{position:"fixed"},onFocus:m=>{const o=m.relatedTarget;!f.viewport?.contains(o)&&a()}})});l_.displayName=v5;var qm="Toast",M3="toast.swipeStart",k3="toast.swipeMove",U3="toast.swipeCancel",D3="toast.swipeEnd",_5=te.forwardRef((e,n)=>{const{forceMount:i,open:a,defaultOpen:u,onOpenChange:f,...m}=e,[o,w]=mp({prop:a,defaultProp:u??!0,onChange:f,caller:qm});return ce.jsx(Km,{present:i||o,children:ce.jsx(Q3,{open:o,...m,ref:n,onClose:()=>w(!1),onPause:iu(e.onPause),onResume:iu(e.onResume),onSwipeStart:Un(e.onSwipeStart,E=>{E.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Un(e.onSwipeMove,E=>{const{x:I,y:D}=E.detail.delta;E.currentTarget.setAttribute("data-swipe","move"),E.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${I}px`),E.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${D}px`)}),onSwipeCancel:Un(e.onSwipeCancel,E=>{E.currentTarget.setAttribute("data-swipe","cancel"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),E.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Un(e.onSwipeEnd,E=>{const{x:I,y:D}=E.detail.delta;E.currentTarget.setAttribute("data-swipe","end"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),E.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${I}px`),E.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${D}px`),w(!1)})})})});_5.displayName=qm;var[R3,N3]=p5(qm,{onClose(){}}),Q3=te.forwardRef((e,n)=>{const{__scopeToast:i,type:a="foreground",duration:u,open:f,onClose:m,onEscapeKeyDown:o,onPause:w,onResume:E,onSwipeStart:I,onSwipeMove:D,onSwipeCancel:O,onSwipeEnd:P,...W}=e,H=gy(qm,i),[z,Z]=te.useState(null),se=fs(n,Ie=>Z(Ie)),ae=te.useRef(null),fe=te.useRef(null),Fe=u||H.duration,He=te.useRef(0),Ve=te.useRef(Fe),Oe=te.useRef(0),{onToastAdd:be,onToastRemove:rt}=H,ue=iu(()=>{z?.contains(document.activeElement)&&H.viewport?.focus(),m()}),me=te.useCallback(Ie=>{!Ie||Ie===1/0||(window.clearTimeout(Oe.current),He.current=new Date().getTime(),Oe.current=window.setTimeout(ue,Ie))},[ue]);te.useEffect(()=>{const Ie=H.viewport;if(Ie){const pt=()=>{me(Ve.current),E?.()},lt=()=>{const ot=new Date().getTime()-He.current;Ve.current=Ve.current-ot,window.clearTimeout(Oe.current),w?.()};return Ie.addEventListener(o_,lt),Ie.addEventListener(a_,pt),()=>{Ie.removeEventListener(o_,lt),Ie.removeEventListener(a_,pt)}}},[H.viewport,Fe,w,E,me]),te.useEffect(()=>{f&&!H.isClosePausedRef.current&&me(Fe)},[f,Fe,H.isClosePausedRef,me]),te.useEffect(()=>(be(),()=>rt()),[be,rt]);const Ue=te.useMemo(()=>z?S5(z):null,[z]);return H.viewport?ce.jsxs(ce.Fragment,{children:[Ue&&ce.jsx(O3,{__scopeToast:i,role:"status","aria-live":a==="foreground"?"assertive":"polite",children:Ue}),ce.jsx(R3,{scope:i,onClose:ue,children:_p.createPortal(ce.jsx(_w.ItemSlot,{scope:i,children:ce.jsx(y3,{asChild:!0,onEscapeKeyDown:Un(o,()=>{H.isFocusedToastEscapeKeyDownRef.current||ue(),H.isFocusedToastEscapeKeyDownRef.current=!1}),children:ce.jsx(oi.li,{tabIndex:0,"data-state":f?"open":"closed","data-swipe-direction":H.swipeDirection,...W,ref:se,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Un(e.onKeyDown,Ie=>{Ie.key==="Escape"&&(o?.(Ie.nativeEvent),Ie.nativeEvent.defaultPrevented||(H.isFocusedToastEscapeKeyDownRef.current=!0,ue()))}),onPointerDown:Un(e.onPointerDown,Ie=>{Ie.button===0&&(ae.current={x:Ie.clientX,y:Ie.clientY})}),onPointerMove:Un(e.onPointerMove,Ie=>{if(!ae.current)return;const pt=Ie.clientX-ae.current.x,lt=Ie.clientY-ae.current.y,ot=!!fe.current,Ne=["left","right"].includes(H.swipeDirection),Te=["left","up"].includes(H.swipeDirection)?Math.min:Math.max,yt=Ne?Te(0,pt):0,Le=Ne?0:Te(0,lt),ie=Ie.pointerType==="touch"?10:2,Ce={x:yt,y:Le},Me={originalEvent:Ie,delta:Ce};ot?(fe.current=Ce,zg(k3,D,Me,{discrete:!1})):jb(Ce,H.swipeDirection,ie)?(fe.current=Ce,zg(M3,I,Me,{discrete:!1}),Ie.target.setPointerCapture(Ie.pointerId)):(Math.abs(pt)>ie||Math.abs(lt)>ie)&&(ae.current=null)}),onPointerUp:Un(e.onPointerUp,Ie=>{const pt=fe.current,lt=Ie.target;if(lt.hasPointerCapture(Ie.pointerId)&&lt.releasePointerCapture(Ie.pointerId),fe.current=null,ae.current=null,pt){const ot=Ie.currentTarget,Ne={originalEvent:Ie,delta:pt};jb(pt,H.swipeDirection,H.swipeThreshold)?zg(D3,P,Ne,{discrete:!0}):zg(U3,O,Ne,{discrete:!0}),ot.addEventListener("click",Te=>Te.preventDefault(),{once:!0})}})})})}),H.viewport)})]}):null}),O3=e=>{const{__scopeToast:n,children:i,...a}=e,u=gy(qm,n),[f,m]=te.useState(!1),[o,w]=te.useState(!1);return j3(()=>m(!0)),te.useEffect(()=>{const E=window.setTimeout(()=>w(!0),1e3);return()=>window.clearTimeout(E)},[]),o?null:ce.jsx(yw,{asChild:!0,children:ce.jsx(my,{...a,children:f&&ce.jsxs(ce.Fragment,{children:[u.label," ",i]})})})},z3="ToastTitle",w5=te.forwardRef((e,n)=>{const{__scopeToast:i,...a}=e;return ce.jsx(oi.div,{...a,ref:n})});w5.displayName=z3;var H3="ToastDescription",x5=te.forwardRef((e,n)=>{const{__scopeToast:i,...a}=e;return ce.jsx(oi.div,{...a,ref:n})});x5.displayName=H3;var b5="ToastAction",B5=te.forwardRef((e,n)=>{const{altText:i,...a}=e;return i.trim()?ce.jsx(E5,{altText:i,asChild:!0,children:ce.jsx(ww,{...a,ref:n})}):(console.error(`Invalid prop \`altText\` supplied to \`${b5}\`. Expected non-empty \`string\`.`),null)});B5.displayName=b5;var C5="ToastClose",ww=te.forwardRef((e,n)=>{const{__scopeToast:i,...a}=e,u=N3(C5,i);return ce.jsx(E5,{asChild:!0,children:ce.jsx(oi.button,{type:"button",...a,ref:n,onClick:Un(e.onClick,u.onClose)})})});ww.displayName=C5;var E5=te.forwardRef((e,n)=>{const{__scopeToast:i,altText:a,...u}=e;return ce.jsx(oi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...u,ref:n})});function S5(e){const n=[];return Array.from(e.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&n.push(a.textContent),V3(a)){const u=a.ariaHidden||a.hidden||a.style.display==="none",f=a.dataset.radixToastAnnounceExclude==="";if(!u)if(f){const m=a.dataset.radixToastAnnounceAlt;m&&n.push(m)}else n.push(...S5(a))}}),n}function zg(e,n,i,{discrete:a}){const u=i.originalEvent.currentTarget,f=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:i});n&&u.addEventListener(e,n,{once:!0}),a?A5(u,f):u.dispatchEvent(f)}var jb=(e,n,i=0)=>{const a=Math.abs(e.x),u=Math.abs(e.y),f=a>u;return n==="left"||n==="right"?f&&a>i:!f&&u>i};function j3(e=()=>{}){const n=iu(e);Cl(()=>{let i=0,a=0;return i=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(n)),()=>{window.cancelAnimationFrame(i),window.cancelAnimationFrame(a)}},[n])}function V3(e){return e.nodeType===e.ELEMENT_NODE}function G3(e){const n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const u=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||u?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function $v(e){const n=document.activeElement;return e.some(i=>i===n?!0:(i.focus(),document.activeElement!==n))}var K3=m5,F5=y5,I5=_5,T5=w5,P5=x5,L5=B5,M5=ww;function k5(e){var n,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(n=0;n<u;n++)e[n]&&(i=k5(e[n]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function U5(){for(var e,n,i=0,a="",u=arguments.length;i<u;i++)(e=arguments[i])&&(n=k5(e))&&(a&&(a+=" "),a+=n);return a}const Vb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Gb=U5,yy=(e,n)=>i=>{var a;if(n?.variants==null)return Gb(e,i?.class,i?.className);const{variants:u,defaultVariants:f}=n,m=Object.keys(u).map(E=>{const I=i?.[E],D=f?.[E];if(I===null)return null;const O=Vb(I)||Vb(D);return u[E][O]}),o=i&&Object.entries(i).reduce((E,I)=>{let[D,O]=I;return O===void 0||(E[D]=O),E},{}),w=n==null||(a=n.compoundVariants)===null||a===void 0?void 0:a.reduce((E,I)=>{let{class:D,className:O,...P}=I;return Object.entries(P).every(W=>{let[H,z]=W;return Array.isArray(z)?z.includes({...f,...o}[H]):{...f,...o}[H]===z})?[...E,D,O]:E},[]);return Gb(e,m,w,i?.class,i?.className)};const q3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D5=(...e)=>e.filter((n,i,a)=>!!n&&n.trim()!==""&&a.indexOf(n)===i).join(" ").trim();var $3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const W3=te.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:u="",children:f,iconNode:m,...o},w)=>te.createElement("svg",{ref:w,...$3,width:n,height:n,stroke:e,strokeWidth:a?Number(i)*24/Number(n):i,className:D5("lucide",u),...o},[...m.map(([E,I])=>te.createElement(E,I)),...Array.isArray(f)?f:[f]]));const il=(e,n)=>{const i=te.forwardRef(({className:a,...u},f)=>te.createElement(W3,{ref:f,iconNode:n,className:D5(`lucide-${q3(e)}`,a),...u}));return i.displayName=`${e}`,i};const Z3=il("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const X3=il("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Y3=il("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const R5=il("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const N5=il("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const J3=il("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const eP=il("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Q5=il("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const tP=il("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);const rP=il("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const c_=il("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const nP=il("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const iP=il("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const xw=il("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const sP=il("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Kb=il("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const qb=il("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const $m=il("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),bw="-",oP=e=>{const n=lP(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:m=>{const o=m.split(bw);return o[0]===""&&o.length!==1&&o.shift(),O5(o,n)||aP(m)},getConflictingClassGroupIds:(m,o)=>{const w=i[m]||[];return o&&a[m]?[...w,...a[m]]:w}}},O5=(e,n)=>{if(e.length===0)return n.classGroupId;const i=e[0],a=n.nextPart.get(i),u=a?O5(e.slice(1),a):void 0;if(u)return u;if(n.validators.length===0)return;const f=e.join(bw);return n.validators.find(({validator:m})=>m(f))?.classGroupId},$b=/^\[(.+)\]$/,aP=e=>{if($b.test(e)){const n=$b.exec(e)[1],i=n?.substring(0,n.indexOf(":"));if(i)return"arbitrary.."+i}},lP=e=>{const{theme:n,prefix:i}=e,a={nextPart:new Map,validators:[]};return AP(Object.entries(e.classGroups),i).forEach(([f,m])=>{A_(m,a,f,n)}),a},A_=(e,n,i,a)=>{e.forEach(u=>{if(typeof u=="string"){const f=u===""?n:Wb(n,u);f.classGroupId=i;return}if(typeof u=="function"){if(cP(u)){A_(u(a),n,i,a);return}n.validators.push({validator:u,classGroupId:i});return}Object.entries(u).forEach(([f,m])=>{A_(m,Wb(n,f),i,a)})})},Wb=(e,n)=>{let i=e;return n.split(bw).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},cP=e=>e.isThemeGetter,AP=(e,n)=>n?e.map(([i,a])=>{const u=a.map(f=>typeof f=="string"?n+f:typeof f=="object"?Object.fromEntries(Object.entries(f).map(([m,o])=>[n+m,o])):f);return[i,u]}):e,uP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,i=new Map,a=new Map;const u=(f,m)=>{i.set(f,m),n++,n>e&&(n=0,a=i,i=new Map)};return{get(f){let m=i.get(f);if(m!==void 0)return m;if((m=a.get(f))!==void 0)return u(f,m),m},set(f,m){i.has(f)?i.set(f,m):u(f,m)}}},z5="!",hP=e=>{const{separator:n,experimentalParseClassName:i}=e,a=n.length===1,u=n[0],f=n.length,m=o=>{const w=[];let E=0,I=0,D;for(let z=0;z<o.length;z++){let Z=o[z];if(E===0){if(Z===u&&(a||o.slice(z,z+f)===n)){w.push(o.slice(I,z)),I=z+f;continue}if(Z==="/"){D=z;continue}}Z==="["?E++:Z==="]"&&E--}const O=w.length===0?o:o.substring(I),P=O.startsWith(z5),W=P?O.substring(1):O,H=D&&D>I?D-I:void 0;return{modifiers:w,hasImportantModifier:P,baseClassName:W,maybePostfixModifierPosition:H}};return i?o=>i({className:o,parseClassName:m}):m},fP=e=>{if(e.length<=1)return e;const n=[];let i=[];return e.forEach(a=>{a[0]==="["?(n.push(...i.sort(),a),i=[]):i.push(a)}),n.push(...i.sort()),n},dP=e=>({cache:uP(e.cacheSize),parseClassName:hP(e),...oP(e)}),pP=/\s+/,mP=(e,n)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:u}=n,f=[],m=e.trim().split(pP);let o="";for(let w=m.length-1;w>=0;w-=1){const E=m[w],{modifiers:I,hasImportantModifier:D,baseClassName:O,maybePostfixModifierPosition:P}=i(E);let W=!!P,H=a(W?O.substring(0,P):O);if(!H){if(!W){o=E+(o.length>0?" "+o:o);continue}if(H=a(O),!H){o=E+(o.length>0?" "+o:o);continue}W=!1}const z=fP(I).join(":"),Z=D?z+z5:z,se=Z+H;if(f.includes(se))continue;f.push(se);const ae=u(H,W);for(let fe=0;fe<ae.length;++fe){const Fe=ae[fe];f.push(Z+Fe)}o=E+(o.length>0?" "+o:o)}return o};function gP(){let e=0,n,i,a="";for(;e<arguments.length;)(n=arguments[e++])&&(i=H5(n))&&(a&&(a+=" "),a+=i);return a}const H5=e=>{if(typeof e=="string")return e;let n,i="";for(let a=0;a<e.length;a++)e[a]&&(n=H5(e[a]))&&(i&&(i+=" "),i+=n);return i};function yP(e,...n){let i,a,u,f=m;function m(w){const E=n.reduce((I,D)=>D(I),e());return i=dP(E),a=i.cache.get,u=i.cache.set,f=o,o(w)}function o(w){const E=a(w);if(E)return E;const I=mP(w,i);return u(w,I),I}return function(){return f(gP.apply(null,arguments))}}const Gs=e=>{const n=i=>i[e]||[];return n.isThemeGetter=!0,n},j5=/^\[(?:([a-z-]+):)?(.+)\]$/i,vP=/^\d+\/\d+$/,_P=new Set(["px","full","screen"]),wP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lh=e=>lp(e)||_P.has(e)||vP.test(e),rf=e=>wp(e,"length",MP),lp=e=>!!e&&!Number.isNaN(Number(e)),Wv=e=>wp(e,"number",lp),sm=e=>!!e&&Number.isInteger(Number(e)),EP=e=>e.endsWith("%")&&lp(e.slice(0,-1)),Wn=e=>j5.test(e),nf=e=>wP.test(e),SP=new Set(["length","size","percentage"]),FP=e=>wp(e,SP,V5),IP=e=>wp(e,"position",V5),TP=new Set(["image","url"]),PP=e=>wp(e,TP,UP),LP=e=>wp(e,"",kP),om=()=>!0,wp=(e,n,i)=>{const a=j5.exec(e);return a?a[1]?typeof n=="string"?a[1]===n:n.has(a[1]):i(a[2]):!1},MP=e=>xP.test(e)&&!bP.test(e),V5=()=>!1,kP=e=>BP.test(e),UP=e=>CP.test(e),DP=()=>{const e=Gs("colors"),n=Gs("spacing"),i=Gs("blur"),a=Gs("brightness"),u=Gs("borderColor"),f=Gs("borderRadius"),m=Gs("borderSpacing"),o=Gs("borderWidth"),w=Gs("contrast"),E=Gs("grayscale"),I=Gs("hueRotate"),D=Gs("invert"),O=Gs("gap"),P=Gs("gradientColorStops"),W=Gs("gradientColorStopPositions"),H=Gs("inset"),z=Gs("margin"),Z=Gs("opacity"),se=Gs("padding"),ae=Gs("saturate"),fe=Gs("scale"),Fe=Gs("sepia"),He=Gs("skew"),Ve=Gs("space"),Oe=Gs("translate"),be=()=>["auto","contain","none"],rt=()=>["auto","hidden","clip","visible","scroll"],ue=()=>["auto",Wn,n],me=()=>[Wn,n],Ue=()=>["",Lh,rf],Ie=()=>["auto",lp,Wn],pt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],lt=()=>["solid","dashed","dotted","double","none"],ot=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>["start","end","center","between","around","evenly","stretch"],Te=()=>["","0",Wn],yt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Le=()=>[lp,Wn];return{cacheSize:500,separator:":",theme:{colors:[om],spacing:[Lh,rf],blur:["none","",nf,Wn],brightness:Le(),borderColor:[e],borderRadius:["none","","full",nf,Wn],borderSpacing:me(),borderWidth:Ue(),contrast:Le(),grayscale:Te(),hueRotate:Le(),invert:Te(),gap:me(),gradientColorStops:[e],gradientColorStopPositions:[EP,rf],inset:ue(),margin:ue(),opacity:Le(),padding:me(),saturate:Le(),scale:Le(),sepia:Te(),skew:Le(),space:me(),translate:me()},classGroups:{aspect:[{aspect:["auto","square","video",Wn]}],container:["container"],columns:[{columns:[nf]}],"break-after":[{"break-after":yt()}],"break-before":[{"break-before":yt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...pt(),Wn]}],overflow:[{overflow:rt()}],"overflow-x":[{"overflow-x":rt()}],"overflow-y":[{"overflow-y":rt()}],overscroll:[{overscroll:be()}],"overscroll-x":[{"overscroll-x":be()}],"overscroll-y":[{"overscroll-y":be()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[H]}],"inset-x":[{"inset-x":[H]}],"inset-y":[{"inset-y":[H]}],start:[{start:[H]}],end:[{end:[H]}],top:[{top:[H]}],right:[{right:[H]}],bottom:[{bottom:[H]}],left:[{left:[H]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sm,Wn]}],basis:[{basis:ue()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wn]}],grow:[{grow:Te()}],shrink:[{shrink:Te()}],order:[{order:["first","last","none",sm,Wn]}],"grid-cols":[{"grid-cols":[om]}],"col-start-end":[{col:["auto",{span:["full",sm,Wn]},Wn]}],"col-start":[{"col-start":Ie()}],"col-end":[{"col-end":Ie()}],"grid-rows":[{"grid-rows":[om]}],"row-start-end":[{row:["auto",{span:[sm,Wn]},Wn]}],"row-start":[{"row-start":Ie()}],"row-end":[{"row-end":Ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wn]}],gap:[{gap:[O]}],"gap-x":[{"gap-x":[O]}],"gap-y":[{"gap-y":[O]}],"justify-content":[{justify:["normal",...Ne()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ne(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ne(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[se]}],px:[{px:[se]}],py:[{py:[se]}],ps:[{ps:[se]}],pe:[{pe:[se]}],pt:[{pt:[se]}],pr:[{pr:[se]}],pb:[{pb:[se]}],pl:[{pl:[se]}],m:[{m:[z]}],mx:[{mx:[z]}],my:[{my:[z]}],ms:[{ms:[z]}],me:[{me:[z]}],mt:[{mt:[z]}],mr:[{mr:[z]}],mb:[{mb:[z]}],ml:[{ml:[z]}],"space-x":[{"space-x":[Ve]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Ve]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wn,n]}],"min-w":[{"min-w":[Wn,n,"min","max","fit"]}],"max-w":[{"max-w":[Wn,n,"none","full","min","max","fit","prose",{screen:[nf]},nf]}],h:[{h:[Wn,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wn,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wn,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wn,n,"auto","min","max","fit"]}],"font-size":[{text:["base",nf,rf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wv]}],"font-family":[{font:[om]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wn]}],"line-clamp":[{"line-clamp":["none",lp,Wv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lh,Wn]}],"list-image":[{"list-image":["none",Wn]}],"list-style-type":[{list:["none","disc","decimal",Wn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[Z]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[Z]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...lt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lh,rf]}],"underline-offset":[{"underline-offset":["auto",Lh,Wn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:me()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Z]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...pt(),IP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},PP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[W]}],"gradient-via-pos":[{via:[W]}],"gradient-to-pos":[{to:[W]}],"gradient-from":[{from:[P]}],"gradient-via":[{via:[P]}],"gradient-to":[{to:[P]}],rounded:[{rounded:[f]}],"rounded-s":[{"rounded-s":[f]}],"rounded-e":[{"rounded-e":[f]}],"rounded-t":[{"rounded-t":[f]}],"rounded-r":[{"rounded-r":[f]}],"rounded-b":[{"rounded-b":[f]}],"rounded-l":[{"rounded-l":[f]}],"rounded-ss":[{"rounded-ss":[f]}],"rounded-se":[{"rounded-se":[f]}],"rounded-ee":[{"rounded-ee":[f]}],"rounded-es":[{"rounded-es":[f]}],"rounded-tl":[{"rounded-tl":[f]}],"rounded-tr":[{"rounded-tr":[f]}],"rounded-br":[{"rounded-br":[f]}],"rounded-bl":[{"rounded-bl":[f]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[Z]}],"border-style":[{border:[...lt(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Z]}],"divide-style":[{divide:lt()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-s":[{"border-s":[u]}],"border-color-e":[{"border-e":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:["",...lt()]}],"outline-offset":[{"outline-offset":[Lh,Wn]}],"outline-w":[{outline:[Lh,rf]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[Z]}],"ring-offset-w":[{"ring-offset":[Lh,rf]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",nf,LP]}],"shadow-color":[{shadow:[om]}],opacity:[{opacity:[Z]}],"mix-blend":[{"mix-blend":[...ot(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ot()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[a]}],contrast:[{contrast:[w]}],"drop-shadow":[{"drop-shadow":["","none",nf,Wn]}],grayscale:[{grayscale:[E]}],"hue-rotate":[{"hue-rotate":[I]}],invert:[{invert:[D]}],saturate:[{saturate:[ae]}],sepia:[{sepia:[Fe]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[w]}],"backdrop-grayscale":[{"backdrop-grayscale":[E]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[I]}],"backdrop-invert":[{"backdrop-invert":[D]}],"backdrop-opacity":[{"backdrop-opacity":[Z]}],"backdrop-saturate":[{"backdrop-saturate":[ae]}],"backdrop-sepia":[{"backdrop-sepia":[Fe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[m]}],"border-spacing-x":[{"border-spacing-x":[m]}],"border-spacing-y":[{"border-spacing-y":[m]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wn]}],duration:[{duration:Le()}],ease:[{ease:["linear","in","out","in-out",Wn]}],delay:[{delay:Le()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[fe]}],"scale-x":[{"scale-x":[fe]}],"scale-y":[{"scale-y":[fe]}],rotate:[{rotate:[sm,Wn]}],"translate-x":[{"translate-x":[Oe]}],"translate-y":[{"translate-y":[Oe]}],"skew-x":[{"skew-x":[He]}],"skew-y":[{"skew-y":[He]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":me()}],"scroll-mx":[{"scroll-mx":me()}],"scroll-my":[{"scroll-my":me()}],"scroll-ms":[{"scroll-ms":me()}],"scroll-me":[{"scroll-me":me()}],"scroll-mt":[{"scroll-mt":me()}],"scroll-mr":[{"scroll-mr":me()}],"scroll-mb":[{"scroll-mb":me()}],"scroll-ml":[{"scroll-ml":me()}],"scroll-p":[{"scroll-p":me()}],"scroll-px":[{"scroll-px":me()}],"scroll-py":[{"scroll-py":me()}],"scroll-ps":[{"scroll-ps":me()}],"scroll-pe":[{"scroll-pe":me()}],"scroll-pt":[{"scroll-pt":me()}],"scroll-pr":[{"scroll-pr":me()}],"scroll-pb":[{"scroll-pb":me()}],"scroll-pl":[{"scroll-pl":me()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Lh,rf,Wv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},RP=yP(DP);function Li(...e){return RP(U5(e))}const NP=K3,G5=te.forwardRef(({className:e,...n},i)=>ce.jsx(F5,{ref:i,className:Li("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...n}));G5.displayName=F5.displayName;const QP=yy("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),K5=te.forwardRef(({className:e,variant:n,...i},a)=>ce.jsx(I5,{ref:a,className:Li(QP({variant:n}),e),...i}));K5.displayName=I5.displayName;const OP=te.forwardRef(({className:e,...n},i)=>ce.jsx(L5,{ref:i,className:Li("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...n}));OP.displayName=L5.displayName;const q5=te.forwardRef(({className:e,...n},i)=>ce.jsx(M5,{ref:i,className:Li("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...n,children:ce.jsx($m,{className:"h-4 w-4"})}));q5.displayName=M5.displayName;const $5=te.forwardRef(({className:e,...n},i)=>ce.jsx(T5,{ref:i,className:Li("text-sm font-semibold",e),...n}));$5.displayName=T5.displayName;const W5=te.forwardRef(({className:e,...n},i)=>ce.jsx(P5,{ref:i,className:Li("text-sm opacity-90",e),...n}));W5.displayName=P5.displayName;function zP(){const{toasts:e}=XT();return ce.jsxs(NP,{children:[e.map(function({id:n,title:i,description:a,action:u,...f}){return ce.jsxs(K5,{...f,children:[ce.jsxs("div",{className:"grid gap-1",children:[i&&ce.jsx($5,{children:i}),a&&ce.jsx(W5,{children:a})]}),u,ce.jsx(q5,{})]},n)}),ce.jsx(G5,{})]})}var Zb=["light","dark"],HP="(prefers-color-scheme: dark)",jP=te.createContext(void 0),VP={setTheme:e=>{},themes:[]},GP=()=>{var e;return(e=te.useContext(jP))!=null?e:VP};te.memo(({forcedTheme:e,storageKey:n,attribute:i,enableSystem:a,enableColorScheme:u,defaultTheme:f,value:m,attrs:o,nonce:w})=>{let E=f==="system",I=i==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(W=>`'${W}'`).join(",")})`};`:`var d=document.documentElement,n='${i}',s='setAttribute';`,D=u?Zb.includes(f)&&f?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${f}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",O=(W,H=!1,z=!0)=>{let Z=m?m[W]:W,se=H?W+"|| ''":`'${Z}'`,ae="";return u&&z&&!H&&Zb.includes(W)&&(ae+=`d.style.colorScheme = '${W}';`),i==="class"?H||Z?ae+=`c.add(${se})`:ae+="null":Z&&(ae+=`d[s](n,${se})`),ae},P=e?`!function(){${I}${O(e)}}()`:a?`!function(){try{${I}var e=localStorage.getItem('${n}');if('system'===e||(!e&&${E})){var t='${HP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${O("dark")}}else{${O("light")}}}else if(e){${m?`var x=${JSON.stringify(m)};`:""}${O(m?"x[e]":"e",!0)}}${E?"":"else{"+O(f,!1,!1)+"}"}${D}}catch(e){}}()`:`!function(){try{${I}var e=localStorage.getItem('${n}');if(e){${m?`var x=${JSON.stringify(m)};`:""}${O(m?"x[e]":"e",!0)}}else{${O(f,!1,!1)};}${D}}catch(t){}}();`;return te.createElement("script",{nonce:w,dangerouslySetInnerHTML:{__html:P}})});var KP=e=>{switch(e){case"success":return WP;case"info":return XP;case"warning":return ZP;case"error":return YP;default:return null}},qP=Array(12).fill(0),$P=({visible:e,className:n})=>Pr.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":e},Pr.createElement("div",{className:"sonner-spinner"},qP.map((i,a)=>Pr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),WP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ZP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),XP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),YP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),JP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Pr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Pr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),eL=()=>{let[e,n]=Pr.useState(document.hidden);return Pr.useEffect(()=>{let i=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e},u_=1,tL=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let i=this.subscribers.indexOf(n);this.subscribers.splice(i,1)}),this.publish=n=>{this.subscribers.forEach(i=>i(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var i;let{message:a,...u}=n,f=typeof n?.id=="number"||((i=n.id)==null?void 0:i.length)>0?n.id:u_++,m=this.toasts.find(w=>w.id===f),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(f)&&this.dismissedToasts.delete(f),m?this.toasts=this.toasts.map(w=>w.id===f?(this.publish({...w,...n,id:f,title:a}),{...w,...n,id:f,dismissible:o,title:a}):w):this.addToast({title:a,...u,dismissible:o,id:f}),f},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(i=>{this.subscribers.forEach(a=>a({id:i.id,dismiss:!0}))}),this.subscribers.forEach(i=>i({id:n,dismiss:!0})),n),this.message=(n,i)=>this.create({...i,message:n}),this.error=(n,i)=>this.create({...i,message:n,type:"error"}),this.success=(n,i)=>this.create({...i,type:"success",message:n}),this.info=(n,i)=>this.create({...i,type:"info",message:n}),this.warning=(n,i)=>this.create({...i,type:"warning",message:n}),this.loading=(n,i)=>this.create({...i,type:"loading",message:n}),this.promise=(n,i)=>{if(!i)return;let a;i.loading!==void 0&&(a=this.create({...i,promise:n,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));let u=n instanceof Promise?n:n(),f=a!==void 0,m,o=u.then(async E=>{if(m=["resolve",E],Pr.isValidElement(E))f=!1,this.create({id:a,type:"default",message:E});else if(nL(E)&&!E.ok){f=!1;let I=typeof i.error=="function"?await i.error(`HTTP error! status: ${E.status}`):i.error,D=typeof i.description=="function"?await i.description(`HTTP error! status: ${E.status}`):i.description;this.create({id:a,type:"error",message:I,description:D})}else if(i.success!==void 0){f=!1;let I=typeof i.success=="function"?await i.success(E):i.success,D=typeof i.description=="function"?await i.description(E):i.description;this.create({id:a,type:"success",message:I,description:D})}}).catch(async E=>{if(m=["reject",E],i.error!==void 0){f=!1;let I=typeof i.error=="function"?await i.error(E):i.error,D=typeof i.description=="function"?await i.description(E):i.description;this.create({id:a,type:"error",message:I,description:D})}}).finally(()=>{var E;f&&(this.dismiss(a),a=void 0),(E=i.finally)==null||E.call(i)}),w=()=>new Promise((E,I)=>o.then(()=>m[0]==="reject"?I(m[1]):E(m[1])).catch(I));return typeof a!="string"&&typeof a!="number"?{unwrap:w}:Object.assign(a,{unwrap:w})},this.custom=(n,i)=>{let a=i?.id||u_++;return this.create({jsx:n(a),id:a,...i}),a},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Jc=new tL,rL=(e,n)=>{let i=n?.id||u_++;return Jc.addToast({title:e,...n,id:i}),i},nL=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",iL=rL,sL=()=>Jc.toasts,oL=()=>Jc.getActiveToasts();Object.assign(iL,{success:Jc.success,info:Jc.info,warning:Jc.warning,error:Jc.error,custom:Jc.custom,message:Jc.message,promise:Jc.promise,dismiss:Jc.dismiss,loading:Jc.loading},{getHistory:sL,getToasts:oL});function aL(e,{insertAt:n}={}){if(typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}aL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Hg(e){return e.label!==void 0}var lL=3,cL="32px",AL="16px",Xb=4e3,uL=356,hL=14,fL=20,dL=200;function Bu(...e){return e.filter(Boolean).join(" ")}function pL(e){let[n,i]=e.split("-"),a=[];return n&&a.push(n),i&&a.push(i),a}var mL=e=>{var n,i,a,u,f,m,o,w,E,I,D;let{invert:O,toast:P,unstyled:W,interacting:H,setHeights:z,visibleToasts:Z,heights:se,index:ae,toasts:fe,expanded:Fe,removeToast:He,defaultRichColors:Ve,closeButton:Oe,style:be,cancelButtonStyle:rt,actionButtonStyle:ue,className:me="",descriptionClassName:Ue="",duration:Ie,position:pt,gap:lt,loadingIcon:ot,expandByDefault:Ne,classNames:Te,icons:yt,closeButtonAriaLabel:Le="Close toast",pauseWhenPageIsHidden:ie}=e,[Ce,Me]=Pr.useState(null),[qe,at]=Pr.useState(null),[et,_t]=Pr.useState(!1),[Et,Pt]=Pr.useState(!1),[Kt,ar]=Pr.useState(!1),[hr,Cr]=Pr.useState(!1),[je,vr]=Pr.useState(!1),[Ur,$r]=Pr.useState(0),[lr,Wr]=Pr.useState(0),Sr=Pr.useRef(P.duration||Ie||Xb),Or=Pr.useRef(null),Rr=Pr.useRef(null),On=ae===0,hn=ae+1<=Z,dt=P.type,de=P.dismissible!==!1,pe=P.className||"",ve=P.descriptionClassName||"",$e=Pr.useMemo(()=>se.findIndex(Nr=>Nr.toastId===P.id)||0,[se,P.id]),Ze=Pr.useMemo(()=>{var Nr;return(Nr=P.closeButton)!=null?Nr:Oe},[P.closeButton,Oe]),Ct=Pr.useMemo(()=>P.duration||Ie||Xb,[P.duration,Ie]),vt=Pr.useRef(0),ct=Pr.useRef(0),bt=Pr.useRef(0),Ht=Pr.useRef(null),[Ft,cr]=pt.split("-"),Jt=Pr.useMemo(()=>se.reduce((Nr,mr,Kr)=>Kr>=$e?Nr:Nr+mr.height,0),[se,$e]),dr=eL(),rn=P.invert||O,Tr=dt==="loading";ct.current=Pr.useMemo(()=>$e*lt+Jt,[$e,Jt]),Pr.useEffect(()=>{Sr.current=Ct},[Ct]),Pr.useEffect(()=>{_t(!0)},[]),Pr.useEffect(()=>{let Nr=Rr.current;if(Nr){let mr=Nr.getBoundingClientRect().height;return Wr(mr),z(Kr=>[{toastId:P.id,height:mr,position:P.position},...Kr]),()=>z(Kr=>Kr.filter(Dn=>Dn.toastId!==P.id))}},[z,P.id]),Pr.useLayoutEffect(()=>{if(!et)return;let Nr=Rr.current,mr=Nr.style.height;Nr.style.height="auto";let Kr=Nr.getBoundingClientRect().height;Nr.style.height=mr,Wr(Kr),z(Dn=>Dn.find(wr=>wr.toastId===P.id)?Dn.map(wr=>wr.toastId===P.id?{...wr,height:Kr}:wr):[{toastId:P.id,height:Kr,position:P.position},...Dn])},[et,P.title,P.description,z,P.id]);let mt=Pr.useCallback(()=>{Pt(!0),$r(ct.current),z(Nr=>Nr.filter(mr=>mr.toastId!==P.id)),setTimeout(()=>{He(P)},dL)},[P,He,z,ct]);Pr.useEffect(()=>{if(P.promise&&dt==="loading"||P.duration===1/0||P.type==="loading")return;let Nr;return Fe||H||ie&&dr?(()=>{if(bt.current<vt.current){let mr=new Date().getTime()-vt.current;Sr.current=Sr.current-mr}bt.current=new Date().getTime()})():Sr.current!==1/0&&(vt.current=new Date().getTime(),Nr=setTimeout(()=>{var mr;(mr=P.onAutoClose)==null||mr.call(P,P),mt()},Sr.current)),()=>clearTimeout(Nr)},[Fe,H,P,dt,ie,dr,mt]),Pr.useEffect(()=>{P.delete&&mt()},[mt,P.delete]);function tn(){var Nr,mr,Kr;return yt!=null&&yt.loading?Pr.createElement("div",{className:Bu(Te?.loader,(Nr=P?.classNames)==null?void 0:Nr.loader,"sonner-loader"),"data-visible":dt==="loading"},yt.loading):ot?Pr.createElement("div",{className:Bu(Te?.loader,(mr=P?.classNames)==null?void 0:mr.loader,"sonner-loader"),"data-visible":dt==="loading"},ot):Pr.createElement($P,{className:Bu(Te?.loader,(Kr=P?.classNames)==null?void 0:Kr.loader),visible:dt==="loading"})}return Pr.createElement("li",{tabIndex:0,ref:Rr,className:Bu(me,pe,Te?.toast,(n=P?.classNames)==null?void 0:n.toast,Te?.default,Te?.[dt],(i=P?.classNames)==null?void 0:i[dt]),"data-sonner-toast":"","data-rich-colors":(a=P.richColors)!=null?a:Ve,"data-styled":!(P.jsx||P.unstyled||W),"data-mounted":et,"data-promise":!!P.promise,"data-swiped":je,"data-removed":Et,"data-visible":hn,"data-y-position":Ft,"data-x-position":cr,"data-index":ae,"data-front":On,"data-swiping":Kt,"data-dismissible":de,"data-type":dt,"data-invert":rn,"data-swipe-out":hr,"data-swipe-direction":qe,"data-expanded":!!(Fe||Ne&&et),style:{"--index":ae,"--toasts-before":ae,"--z-index":fe.length-ae,"--offset":`${Et?Ur:ct.current}px`,"--initial-height":Ne?"auto":`${lr}px`,...be,...P.style},onDragEnd:()=>{ar(!1),Me(null),Ht.current=null},onPointerDown:Nr=>{Tr||!de||(Or.current=new Date,$r(ct.current),Nr.target.setPointerCapture(Nr.pointerId),Nr.target.tagName!=="BUTTON"&&(ar(!0),Ht.current={x:Nr.clientX,y:Nr.clientY}))},onPointerUp:()=>{var Nr,mr,Kr,Dn;if(hr||!de)return;Ht.current=null;let wr=Number(((Nr=Rr.current)==null?void 0:Nr.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Tn=Number(((mr=Rr.current)==null?void 0:mr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Bn=new Date().getTime()-((Kr=Or.current)==null?void 0:Kr.getTime()),xn=Ce==="x"?wr:Tn,Di=Math.abs(xn)/Bn;if(Math.abs(xn)>=fL||Di>.11){$r(ct.current),(Dn=P.onDismiss)==null||Dn.call(P,P),at(Ce==="x"?wr>0?"right":"left":Tn>0?"down":"up"),mt(),Cr(!0),vr(!1);return}ar(!1),Me(null)},onPointerMove:Nr=>{var mr,Kr,Dn,wr;if(!Ht.current||!de||((mr=window.getSelection())==null?void 0:mr.toString().length)>0)return;let Tn=Nr.clientY-Ht.current.y,Bn=Nr.clientX-Ht.current.x,xn=(Kr=e.swipeDirections)!=null?Kr:pL(pt);!Ce&&(Math.abs(Bn)>1||Math.abs(Tn)>1)&&Me(Math.abs(Bn)>Math.abs(Tn)?"x":"y");let Di={x:0,y:0};Ce==="y"?(xn.includes("top")||xn.includes("bottom"))&&(xn.includes("top")&&Tn<0||xn.includes("bottom")&&Tn>0)&&(Di.y=Tn):Ce==="x"&&(xn.includes("left")||xn.includes("right"))&&(xn.includes("left")&&Bn<0||xn.includes("right")&&Bn>0)&&(Di.x=Bn),(Math.abs(Di.x)>0||Math.abs(Di.y)>0)&&vr(!0),(Dn=Rr.current)==null||Dn.style.setProperty("--swipe-amount-x",`${Di.x}px`),(wr=Rr.current)==null||wr.style.setProperty("--swipe-amount-y",`${Di.y}px`)}},Ze&&!P.jsx?Pr.createElement("button",{"aria-label":Le,"data-disabled":Tr,"data-close-button":!0,onClick:Tr||!de?()=>{}:()=>{var Nr;mt(),(Nr=P.onDismiss)==null||Nr.call(P,P)},className:Bu(Te?.closeButton,(u=P?.classNames)==null?void 0:u.closeButton)},(f=yt?.close)!=null?f:JP):null,P.jsx||te.isValidElement(P.title)?P.jsx?P.jsx:typeof P.title=="function"?P.title():P.title:Pr.createElement(Pr.Fragment,null,dt||P.icon||P.promise?Pr.createElement("div",{"data-icon":"",className:Bu(Te?.icon,(m=P?.classNames)==null?void 0:m.icon)},P.promise||P.type==="loading"&&!P.icon?P.icon||tn():null,P.type!=="loading"?P.icon||yt?.[dt]||KP(dt):null):null,Pr.createElement("div",{"data-content":"",className:Bu(Te?.content,(o=P?.classNames)==null?void 0:o.content)},Pr.createElement("div",{"data-title":"",className:Bu(Te?.title,(w=P?.classNames)==null?void 0:w.title)},typeof P.title=="function"?P.title():P.title),P.description?Pr.createElement("div",{"data-description":"",className:Bu(Ue,ve,Te?.description,(E=P?.classNames)==null?void 0:E.description)},typeof P.description=="function"?P.description():P.description):null),te.isValidElement(P.cancel)?P.cancel:P.cancel&&Hg(P.cancel)?Pr.createElement("button",{"data-button":!0,"data-cancel":!0,style:P.cancelButtonStyle||rt,onClick:Nr=>{var mr,Kr;Hg(P.cancel)&&de&&((Kr=(mr=P.cancel).onClick)==null||Kr.call(mr,Nr),mt())},className:Bu(Te?.cancelButton,(I=P?.classNames)==null?void 0:I.cancelButton)},P.cancel.label):null,te.isValidElement(P.action)?P.action:P.action&&Hg(P.action)?Pr.createElement("button",{"data-button":!0,"data-action":!0,style:P.actionButtonStyle||ue,onClick:Nr=>{var mr,Kr;Hg(P.action)&&((Kr=(mr=P.action).onClick)==null||Kr.call(mr,Nr),!Nr.defaultPrevented&&mt())},className:Bu(Te?.actionButton,(D=P?.classNames)==null?void 0:D.actionButton)},P.action.label):null))};function Yb(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function gL(e,n){let i={};return[e,n].forEach((a,u)=>{let f=u===1,m=f?"--mobile-offset":"--offset",o=f?AL:cL;function w(E){["top","right","bottom","left"].forEach(I=>{i[`${m}-${I}`]=typeof E=="number"?`${E}px`:E})}typeof a=="number"||typeof a=="string"?w(a):typeof a=="object"?["top","right","bottom","left"].forEach(E=>{a[E]===void 0?i[`${m}-${E}`]=o:i[`${m}-${E}`]=typeof a[E]=="number"?`${a[E]}px`:a[E]}):w(o)}),i}var yL=te.forwardRef(function(e,n){let{invert:i,position:a="bottom-right",hotkey:u=["altKey","KeyT"],expand:f,closeButton:m,className:o,offset:w,mobileOffset:E,theme:I="light",richColors:D,duration:O,style:P,visibleToasts:W=lL,toastOptions:H,dir:z=Yb(),gap:Z=hL,loadingIcon:se,icons:ae,containerAriaLabel:fe="Notifications",pauseWhenPageIsHidden:Fe}=e,[He,Ve]=Pr.useState([]),Oe=Pr.useMemo(()=>Array.from(new Set([a].concat(He.filter(ie=>ie.position).map(ie=>ie.position)))),[He,a]),[be,rt]=Pr.useState([]),[ue,me]=Pr.useState(!1),[Ue,Ie]=Pr.useState(!1),[pt,lt]=Pr.useState(I!=="system"?I:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ot=Pr.useRef(null),Ne=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),Te=Pr.useRef(null),yt=Pr.useRef(!1),Le=Pr.useCallback(ie=>{Ve(Ce=>{var Me;return(Me=Ce.find(qe=>qe.id===ie.id))!=null&&Me.delete||Jc.dismiss(ie.id),Ce.filter(({id:qe})=>qe!==ie.id)})},[]);return Pr.useEffect(()=>Jc.subscribe(ie=>{if(ie.dismiss){Ve(Ce=>Ce.map(Me=>Me.id===ie.id?{...Me,delete:!0}:Me));return}setTimeout(()=>{c5.flushSync(()=>{Ve(Ce=>{let Me=Ce.findIndex(qe=>qe.id===ie.id);return Me!==-1?[...Ce.slice(0,Me),{...Ce[Me],...ie},...Ce.slice(Me+1)]:[ie,...Ce]})})})}),[]),Pr.useEffect(()=>{if(I!=="system"){lt(I);return}if(I==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?lt("dark"):lt("light")),typeof window>"u")return;let ie=window.matchMedia("(prefers-color-scheme: dark)");try{ie.addEventListener("change",({matches:Ce})=>{lt(Ce?"dark":"light")})}catch{ie.addListener(({matches:Me})=>{try{lt(Me?"dark":"light")}catch(qe){console.error(qe)}})}},[I]),Pr.useEffect(()=>{He.length<=1&&me(!1)},[He]),Pr.useEffect(()=>{let ie=Ce=>{var Me,qe;u.every(at=>Ce[at]||Ce.code===at)&&(me(!0),(Me=ot.current)==null||Me.focus()),Ce.code==="Escape"&&(document.activeElement===ot.current||(qe=ot.current)!=null&&qe.contains(document.activeElement))&&me(!1)};return document.addEventListener("keydown",ie),()=>document.removeEventListener("keydown",ie)},[u]),Pr.useEffect(()=>{if(ot.current)return()=>{Te.current&&(Te.current.focus({preventScroll:!0}),Te.current=null,yt.current=!1)}},[ot.current]),Pr.createElement("section",{ref:n,"aria-label":`${fe} ${Ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Oe.map((ie,Ce)=>{var Me;let[qe,at]=ie.split("-");return He.length?Pr.createElement("ol",{key:ie,dir:z==="auto"?Yb():z,tabIndex:-1,ref:ot,className:o,"data-sonner-toaster":!0,"data-theme":pt,"data-y-position":qe,"data-lifted":ue&&He.length>1&&!f,"data-x-position":at,style:{"--front-toast-height":`${((Me=be[0])==null?void 0:Me.height)||0}px`,"--width":`${uL}px`,"--gap":`${Z}px`,...P,...gL(w,E)},onBlur:et=>{yt.current&&!et.currentTarget.contains(et.relatedTarget)&&(yt.current=!1,Te.current&&(Te.current.focus({preventScroll:!0}),Te.current=null))},onFocus:et=>{et.target instanceof HTMLElement&&et.target.dataset.dismissible==="false"||yt.current||(yt.current=!0,Te.current=et.relatedTarget)},onMouseEnter:()=>me(!0),onMouseMove:()=>me(!0),onMouseLeave:()=>{Ue||me(!1)},onDragEnd:()=>me(!1),onPointerDown:et=>{et.target instanceof HTMLElement&&et.target.dataset.dismissible==="false"||Ie(!0)},onPointerUp:()=>Ie(!1)},He.filter(et=>!et.position&&Ce===0||et.position===ie).map((et,_t)=>{var Et,Pt;return Pr.createElement(mL,{key:et.id,icons:ae,index:_t,toast:et,defaultRichColors:D,duration:(Et=H?.duration)!=null?Et:O,className:H?.className,descriptionClassName:H?.descriptionClassName,invert:i,visibleToasts:W,closeButton:(Pt=H?.closeButton)!=null?Pt:m,interacting:Ue,position:ie,style:H?.style,unstyled:H?.unstyled,classNames:H?.classNames,cancelButtonStyle:H?.cancelButtonStyle,actionButtonStyle:H?.actionButtonStyle,removeToast:Le,toasts:He.filter(Kt=>Kt.position==et.position),heights:be.filter(Kt=>Kt.position==et.position),setHeights:rt,expandByDefault:f,gap:Z,loadingIcon:se,expanded:ue,pauseWhenPageIsHidden:Fe,swipeDirections:e.swipeDirections})})):null}))});const vL=({...e})=>{const{theme:n="system"}=GP();return ce.jsx(yL,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var _L=dy[" useId ".trim().toString()]||(()=>{}),wL=0;function vy(e){const[n,i]=te.useState(_L());return Cl(()=>{i(a=>a??String(wL++))},[e]),n?`radix-${n}`:""}const xL=["top","right","bottom","left"],wf=Math.min,EA=Math.max,G0=Math.round,jg=Math.floor,rh=e=>({x:e,y:e}),bL={left:"right",right:"left",bottom:"top",top:"bottom"},BL={start:"end",end:"start"};function h_(e,n,i){return EA(e,wf(n,i))}function Qh(e,n){return typeof e=="function"?e(n):e}function Oh(e){return e.split("-")[0]}function xp(e){return e.split("-")[1]}function Bw(e){return e==="x"?"y":"x"}function Cw(e){return e==="y"?"height":"width"}const CL=new Set(["top","bottom"]);function eh(e){return CL.has(Oh(e))?"y":"x"}function Ew(e){return Bw(eh(e))}function EL(e,n,i){i===void 0&&(i=!1);const a=xp(e),u=Ew(e),f=Cw(u);let m=u==="x"?a===(i?"end":"start")?"right":"left":a==="start"?"bottom":"top";return n.reference[f]>n.floating[f]&&(m=K0(m)),[m,K0(m)]}function SL(e){const n=K0(e);return[f_(e),n,f_(n)]}function f_(e){return e.replace(/start|end/g,n=>BL[n])}const Jb=["left","right"],e2=["right","left"],FL=["top","bottom"],IL=["bottom","top"];function TL(e,n,i){switch(e){case"top":case"bottom":return i?n?e2:Jb:n?Jb:e2;case"left":case"right":return n?FL:IL;default:return[]}}function PL(e,n,i,a){const u=xp(e);let f=TL(Oh(e),i==="start",a);return u&&(f=f.map(m=>m+"-"+u),n&&(f=f.concat(f.map(f_)))),f}function K0(e){return e.replace(/left|right|bottom|top/g,n=>bL[n])}function LL(e){return{top:0,right:0,bottom:0,left:0,...e}}function Z5(e){return typeof e!="number"?LL(e):{top:e,right:e,bottom:e,left:e}}function q0(e){const{x:n,y:i,width:a,height:u}=e;return{width:a,height:u,top:i,left:n,right:n+a,bottom:i+u,x:n,y:i}}function t2(e,n,i){let{reference:a,floating:u}=e;const f=eh(n),m=Ew(n),o=Cw(m),w=Oh(n),E=f==="y",I=a.x+a.width/2-u.width/2,D=a.y+a.height/2-u.height/2,O=a[o]/2-u[o]/2;let P;switch(w){case"top":P={x:I,y:a.y-u.height};break;case"bottom":P={x:I,y:a.y+a.height};break;case"right":P={x:a.x+a.width,y:D};break;case"left":P={x:a.x-u.width,y:D};break;default:P={x:a.x,y:a.y}}switch(xp(n)){case"start":P[m]-=O*(i&&E?-1:1);break;case"end":P[m]+=O*(i&&E?-1:1);break}return P}const ML=async(e,n,i)=>{const{placement:a="bottom",strategy:u="absolute",middleware:f=[],platform:m}=i,o=f.filter(Boolean),w=await(m.isRTL==null?void 0:m.isRTL(n));let E=await m.getElementRects({reference:e,floating:n,strategy:u}),{x:I,y:D}=t2(E,a,w),O=a,P={},W=0;for(let H=0;H<o.length;H++){const{name:z,fn:Z}=o[H],{x:se,y:ae,data:fe,reset:Fe}=await Z({x:I,y:D,initialPlacement:a,placement:O,strategy:u,middlewareData:P,rects:E,platform:m,elements:{reference:e,floating:n}});I=se??I,D=ae??D,P={...P,[z]:{...P[z],...fe}},Fe&&W<=50&&(W++,typeof Fe=="object"&&(Fe.placement&&(O=Fe.placement),Fe.rects&&(E=Fe.rects===!0?await m.getElementRects({reference:e,floating:n,strategy:u}):Fe.rects),{x:I,y:D}=t2(E,O,w)),H=-1)}return{x:I,y:D,placement:O,strategy:u,middlewareData:P}};async function Mm(e,n){var i;n===void 0&&(n={});const{x:a,y:u,platform:f,rects:m,elements:o,strategy:w}=e,{boundary:E="clippingAncestors",rootBoundary:I="viewport",elementContext:D="floating",altBoundary:O=!1,padding:P=0}=Qh(n,e),W=Z5(P),z=o[O?D==="floating"?"reference":"floating":D],Z=q0(await f.getClippingRect({element:(i=await(f.isElement==null?void 0:f.isElement(z)))==null||i?z:z.contextElement||await(f.getDocumentElement==null?void 0:f.getDocumentElement(o.floating)),boundary:E,rootBoundary:I,strategy:w})),se=D==="floating"?{x:a,y:u,width:m.floating.width,height:m.floating.height}:m.reference,ae=await(f.getOffsetParent==null?void 0:f.getOffsetParent(o.floating)),fe=await(f.isElement==null?void 0:f.isElement(ae))?await(f.getScale==null?void 0:f.getScale(ae))||{x:1,y:1}:{x:1,y:1},Fe=q0(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:se,offsetParent:ae,strategy:w}):se);return{top:(Z.top-Fe.top+W.top)/fe.y,bottom:(Fe.bottom-Z.bottom+W.bottom)/fe.y,left:(Z.left-Fe.left+W.left)/fe.x,right:(Fe.right-Z.right+W.right)/fe.x}}const kL=e=>({name:"arrow",options:e,async fn(n){const{x:i,y:a,placement:u,rects:f,platform:m,elements:o,middlewareData:w}=n,{element:E,padding:I=0}=Qh(e,n)||{};if(E==null)return{};const D=Z5(I),O={x:i,y:a},P=Ew(u),W=Cw(P),H=await m.getDimensions(E),z=P==="y",Z=z?"top":"left",se=z?"bottom":"right",ae=z?"clientHeight":"clientWidth",fe=f.reference[W]+f.reference[P]-O[P]-f.floating[W],Fe=O[P]-f.reference[P],He=await(m.getOffsetParent==null?void 0:m.getOffsetParent(E));let Ve=He?He[ae]:0;(!Ve||!await(m.isElement==null?void 0:m.isElement(He)))&&(Ve=o.floating[ae]||f.floating[W]);const Oe=fe/2-Fe/2,be=Ve/2-H[W]/2-1,rt=wf(D[Z],be),ue=wf(D[se],be),me=rt,Ue=Ve-H[W]-ue,Ie=Ve/2-H[W]/2+Oe,pt=h_(me,Ie,Ue),lt=!w.arrow&&xp(u)!=null&&Ie!==pt&&f.reference[W]/2-(Ie<me?rt:ue)-H[W]/2<0,ot=lt?Ie<me?Ie-me:Ie-Ue:0;return{[P]:O[P]+ot,data:{[P]:pt,centerOffset:Ie-pt-ot,...lt&&{alignmentOffset:ot}},reset:lt}}}),UL=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var i,a;const{placement:u,middlewareData:f,rects:m,initialPlacement:o,platform:w,elements:E}=n,{mainAxis:I=!0,crossAxis:D=!0,fallbackPlacements:O,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:W="none",flipAlignment:H=!0,...z}=Qh(e,n);if((i=f.arrow)!=null&&i.alignmentOffset)return{};const Z=Oh(u),se=eh(o),ae=Oh(o)===o,fe=await(w.isRTL==null?void 0:w.isRTL(E.floating)),Fe=O||(ae||!H?[K0(o)]:SL(o)),He=W!=="none";!O&&He&&Fe.push(...PL(o,H,W,fe));const Ve=[o,...Fe],Oe=await Mm(n,z),be=[];let rt=((a=f.flip)==null?void 0:a.overflows)||[];if(I&&be.push(Oe[Z]),D){const Ie=EL(u,m,fe);be.push(Oe[Ie[0]],Oe[Ie[1]])}if(rt=[...rt,{placement:u,overflows:be}],!be.every(Ie=>Ie<=0)){var ue,me;const Ie=(((ue=f.flip)==null?void 0:ue.index)||0)+1,pt=Ve[Ie];if(pt&&(!(D==="alignment"?se!==eh(pt):!1)||rt.every(Ne=>eh(Ne.placement)===se?Ne.overflows[0]>0:!0)))return{data:{index:Ie,overflows:rt},reset:{placement:pt}};let lt=(me=rt.filter(ot=>ot.overflows[0]<=0).sort((ot,Ne)=>ot.overflows[1]-Ne.overflows[1])[0])==null?void 0:me.placement;if(!lt)switch(P){case"bestFit":{var Ue;const ot=(Ue=rt.filter(Ne=>{if(He){const Te=eh(Ne.placement);return Te===se||Te==="y"}return!0}).map(Ne=>[Ne.placement,Ne.overflows.filter(Te=>Te>0).reduce((Te,yt)=>Te+yt,0)]).sort((Ne,Te)=>Ne[1]-Te[1])[0])==null?void 0:Ue[0];ot&&(lt=ot);break}case"initialPlacement":lt=o;break}if(u!==lt)return{reset:{placement:lt}}}return{}}}};function r2(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function n2(e){return xL.some(n=>e[n]>=0)}const DL=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:i}=n,{strategy:a="referenceHidden",...u}=Qh(e,n);switch(a){case"referenceHidden":{const f=await Mm(n,{...u,elementContext:"reference"}),m=r2(f,i.reference);return{data:{referenceHiddenOffsets:m,referenceHidden:n2(m)}}}case"escaped":{const f=await Mm(n,{...u,altBoundary:!0}),m=r2(f,i.floating);return{data:{escapedOffsets:m,escaped:n2(m)}}}default:return{}}}}},X5=new Set(["left","top"]);async function RL(e,n){const{placement:i,platform:a,elements:u}=e,f=await(a.isRTL==null?void 0:a.isRTL(u.floating)),m=Oh(i),o=xp(i),w=eh(i)==="y",E=X5.has(m)?-1:1,I=f&&w?-1:1,D=Qh(n,e);let{mainAxis:O,crossAxis:P,alignmentAxis:W}=typeof D=="number"?{mainAxis:D,crossAxis:0,alignmentAxis:null}:{mainAxis:D.mainAxis||0,crossAxis:D.crossAxis||0,alignmentAxis:D.alignmentAxis};return o&&typeof W=="number"&&(P=o==="end"?W*-1:W),w?{x:P*I,y:O*E}:{x:O*E,y:P*I}}const NL=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var i,a;const{x:u,y:f,placement:m,middlewareData:o}=n,w=await RL(n,e);return m===((i=o.offset)==null?void 0:i.placement)&&(a=o.arrow)!=null&&a.alignmentOffset?{}:{x:u+w.x,y:f+w.y,data:{...w,placement:m}}}}},QL=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:i,y:a,placement:u}=n,{mainAxis:f=!0,crossAxis:m=!1,limiter:o={fn:z=>{let{x:Z,y:se}=z;return{x:Z,y:se}}},...w}=Qh(e,n),E={x:i,y:a},I=await Mm(n,w),D=eh(Oh(u)),O=Bw(D);let P=E[O],W=E[D];if(f){const z=O==="y"?"top":"left",Z=O==="y"?"bottom":"right",se=P+I[z],ae=P-I[Z];P=h_(se,P,ae)}if(m){const z=D==="y"?"top":"left",Z=D==="y"?"bottom":"right",se=W+I[z],ae=W-I[Z];W=h_(se,W,ae)}const H=o.fn({...n,[O]:P,[D]:W});return{...H,data:{x:H.x-i,y:H.y-a,enabled:{[O]:f,[D]:m}}}}}},OL=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:i,y:a,placement:u,rects:f,middlewareData:m}=n,{offset:o=0,mainAxis:w=!0,crossAxis:E=!0}=Qh(e,n),I={x:i,y:a},D=eh(u),O=Bw(D);let P=I[O],W=I[D];const H=Qh(o,n),z=typeof H=="number"?{mainAxis:H,crossAxis:0}:{mainAxis:0,crossAxis:0,...H};if(w){const ae=O==="y"?"height":"width",fe=f.reference[O]-f.floating[ae]+z.mainAxis,Fe=f.reference[O]+f.reference[ae]-z.mainAxis;P<fe?P=fe:P>Fe&&(P=Fe)}if(E){var Z,se;const ae=O==="y"?"width":"height",fe=X5.has(Oh(u)),Fe=f.reference[D]-f.floating[ae]+(fe&&((Z=m.offset)==null?void 0:Z[D])||0)+(fe?0:z.crossAxis),He=f.reference[D]+f.reference[ae]+(fe?0:((se=m.offset)==null?void 0:se[D])||0)-(fe?z.crossAxis:0);W<Fe?W=Fe:W>He&&(W=He)}return{[O]:P,[D]:W}}}},zL=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var i,a;const{placement:u,rects:f,platform:m,elements:o}=n,{apply:w=()=>{},...E}=Qh(e,n),I=await Mm(n,E),D=Oh(u),O=xp(u),P=eh(u)==="y",{width:W,height:H}=f.floating;let z,Z;D==="top"||D==="bottom"?(z=D,Z=O===(await(m.isRTL==null?void 0:m.isRTL(o.floating))?"start":"end")?"left":"right"):(Z=D,z=O==="end"?"top":"bottom");const se=H-I.top-I.bottom,ae=W-I.left-I.right,fe=wf(H-I[z],se),Fe=wf(W-I[Z],ae),He=!n.middlewareData.shift;let Ve=fe,Oe=Fe;if((i=n.middlewareData.shift)!=null&&i.enabled.x&&(Oe=ae),(a=n.middlewareData.shift)!=null&&a.enabled.y&&(Ve=se),He&&!O){const rt=EA(I.left,0),ue=EA(I.right,0),me=EA(I.top,0),Ue=EA(I.bottom,0);P?Oe=W-2*(rt!==0||ue!==0?rt+ue:EA(I.left,I.right)):Ve=H-2*(me!==0||Ue!==0?me+Ue:EA(I.top,I.bottom))}await w({...n,availableWidth:Oe,availableHeight:Ve});const be=await m.getDimensions(o.floating);return W!==be.width||H!==be.height?{reset:{rects:!0}}:{}}}};function _y(){return typeof window<"u"}function bp(e){return Y5(e)?(e.nodeName||"").toLowerCase():"#document"}function FA(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function sh(e){var n;return(n=(Y5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function Y5(e){return _y()?e instanceof Node||e instanceof FA(e).Node:!1}function Tu(e){return _y()?e instanceof Element||e instanceof FA(e).Element:!1}function ih(e){return _y()?e instanceof HTMLElement||e instanceof FA(e).HTMLElement:!1}function i2(e){return!_y()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof FA(e).ShadowRoot}const HL=new Set(["inline","contents"]);function Wm(e){const{overflow:n,overflowX:i,overflowY:a,display:u}=Pu(e);return/auto|scroll|overlay|hidden|clip/.test(n+a+i)&&!HL.has(u)}const jL=new Set(["table","td","th"]);function VL(e){return jL.has(bp(e))}const GL=[":popover-open",":modal"];function wy(e){return GL.some(n=>{try{return e.matches(n)}catch{return!1}})}const KL=["transform","translate","scale","rotate","perspective"],qL=["transform","translate","scale","rotate","perspective","filter"],$L=["paint","layout","strict","content"];function Sw(e){const n=Fw(),i=Tu(e)?Pu(e):e;return KL.some(a=>i[a]?i[a]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!n&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!n&&(i.filter?i.filter!=="none":!1)||qL.some(a=>(i.willChange||"").includes(a))||$L.some(a=>(i.contain||"").includes(a))}function WL(e){let n=xf(e);for(;ih(n)&&!gp(n);){if(Sw(n))return n;if(wy(n))return null;n=xf(n)}return null}function Fw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZL=new Set(["html","body","#document"]);function gp(e){return ZL.has(bp(e))}function Pu(e){return FA(e).getComputedStyle(e)}function xy(e){return Tu(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xf(e){if(bp(e)==="html")return e;const n=e.assignedSlot||e.parentNode||i2(e)&&e.host||sh(e);return i2(n)?n.host:n}function J5(e){const n=xf(e);return gp(n)?e.ownerDocument?e.ownerDocument.body:e.body:ih(n)&&Wm(n)?n:J5(n)}function km(e,n,i){var a;n===void 0&&(n=[]),i===void 0&&(i=!0);const u=J5(e),f=u===((a=e.ownerDocument)==null?void 0:a.body),m=FA(u);if(f){const o=d_(m);return n.concat(m,m.visualViewport||[],Wm(u)?u:[],o&&i?km(o):[])}return n.concat(u,km(u,[],i))}function d_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eE(e){const n=Pu(e);let i=parseFloat(n.width)||0,a=parseFloat(n.height)||0;const u=ih(e),f=u?e.offsetWidth:i,m=u?e.offsetHeight:a,o=G0(i)!==f||G0(a)!==m;return o&&(i=f,a=m),{width:i,height:a,$:o}}function Iw(e){return Tu(e)?e:e.contextElement}function cp(e){const n=Iw(e);if(!ih(n))return rh(1);const i=n.getBoundingClientRect(),{width:a,height:u,$:f}=eE(n);let m=(f?G0(i.width):i.width)/a,o=(f?G0(i.height):i.height)/u;return(!m||!Number.isFinite(m))&&(m=1),(!o||!Number.isFinite(o))&&(o=1),{x:m,y:o}}const XL=rh(0);function tE(e){const n=FA(e);return!Fw()||!n.visualViewport?XL:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function YL(e,n,i){return n===void 0&&(n=!1),!i||n&&i!==FA(e)?!1:n}function nd(e,n,i,a){n===void 0&&(n=!1),i===void 0&&(i=!1);const u=e.getBoundingClientRect(),f=Iw(e);let m=rh(1);n&&(a?Tu(a)&&(m=cp(a)):m=cp(e));const o=YL(f,i,a)?tE(f):rh(0);let w=(u.left+o.x)/m.x,E=(u.top+o.y)/m.y,I=u.width/m.x,D=u.height/m.y;if(f){const O=FA(f),P=a&&Tu(a)?FA(a):a;let W=O,H=d_(W);for(;H&&a&&P!==W;){const z=cp(H),Z=H.getBoundingClientRect(),se=Pu(H),ae=Z.left+(H.clientLeft+parseFloat(se.paddingLeft))*z.x,fe=Z.top+(H.clientTop+parseFloat(se.paddingTop))*z.y;w*=z.x,E*=z.y,I*=z.x,D*=z.y,w+=ae,E+=fe,W=FA(H),H=d_(W)}}return q0({width:I,height:D,x:w,y:E})}function by(e,n){const i=xy(e).scrollLeft;return n?n.left+i:nd(sh(e)).left+i}function rE(e,n){const i=e.getBoundingClientRect(),a=i.left+n.scrollLeft-by(e,i),u=i.top+n.scrollTop;return{x:a,y:u}}function JL(e){let{elements:n,rect:i,offsetParent:a,strategy:u}=e;const f=u==="fixed",m=sh(a),o=n?wy(n.floating):!1;if(a===m||o&&f)return i;let w={scrollLeft:0,scrollTop:0},E=rh(1);const I=rh(0),D=ih(a);if((D||!D&&!f)&&((bp(a)!=="body"||Wm(m))&&(w=xy(a)),ih(a))){const P=nd(a);E=cp(a),I.x=P.x+a.clientLeft,I.y=P.y+a.clientTop}const O=m&&!D&&!f?rE(m,w):rh(0);return{width:i.width*E.x,height:i.height*E.y,x:i.x*E.x-w.scrollLeft*E.x+I.x+O.x,y:i.y*E.y-w.scrollTop*E.y+I.y+O.y}}function eM(e){return Array.from(e.getClientRects())}function tM(e){const n=sh(e),i=xy(e),a=e.ownerDocument.body,u=EA(n.scrollWidth,n.clientWidth,a.scrollWidth,a.clientWidth),f=EA(n.scrollHeight,n.clientHeight,a.scrollHeight,a.clientHeight);let m=-i.scrollLeft+by(e);const o=-i.scrollTop;return Pu(a).direction==="rtl"&&(m+=EA(n.clientWidth,a.clientWidth)-u),{width:u,height:f,x:m,y:o}}const s2=25;function rM(e,n){const i=FA(e),a=sh(e),u=i.visualViewport;let f=a.clientWidth,m=a.clientHeight,o=0,w=0;if(u){f=u.width,m=u.height;const I=Fw();(!I||I&&n==="fixed")&&(o=u.offsetLeft,w=u.offsetTop)}const E=by(a);if(E<=0){const I=a.ownerDocument,D=I.body,O=getComputedStyle(D),P=I.compatMode==="CSS1Compat"&&parseFloat(O.marginLeft)+parseFloat(O.marginRight)||0,W=Math.abs(a.clientWidth-D.clientWidth-P);W<=s2&&(f-=W)}else E<=s2&&(f+=E);return{width:f,height:m,x:o,y:w}}const nM=new Set(["absolute","fixed"]);function iM(e,n){const i=nd(e,!0,n==="fixed"),a=i.top+e.clientTop,u=i.left+e.clientLeft,f=ih(e)?cp(e):rh(1),m=e.clientWidth*f.x,o=e.clientHeight*f.y,w=u*f.x,E=a*f.y;return{width:m,height:o,x:w,y:E}}function o2(e,n,i){let a;if(n==="viewport")a=rM(e,i);else if(n==="document")a=tM(sh(e));else if(Tu(n))a=iM(n,i);else{const u=tE(e);a={x:n.x-u.x,y:n.y-u.y,width:n.width,height:n.height}}return q0(a)}function nE(e,n){const i=xf(e);return i===n||!Tu(i)||gp(i)?!1:Pu(i).position==="fixed"||nE(i,n)}function sM(e,n){const i=n.get(e);if(i)return i;let a=km(e,[],!1).filter(o=>Tu(o)&&bp(o)!=="body"),u=null;const f=Pu(e).position==="fixed";let m=f?xf(e):e;for(;Tu(m)&&!gp(m);){const o=Pu(m),w=Sw(m);!w&&o.position==="fixed"&&(u=null),(f?!w&&!u:!w&&o.position==="static"&&!!u&&nM.has(u.position)||Wm(m)&&!w&&nE(e,m))?a=a.filter(I=>I!==m):u=o,m=xf(m)}return n.set(e,a),a}function oM(e){let{element:n,boundary:i,rootBoundary:a,strategy:u}=e;const m=[...i==="clippingAncestors"?wy(n)?[]:sM(n,this._c):[].concat(i),a],o=m[0],w=m.reduce((E,I)=>{const D=o2(n,I,u);return E.top=EA(D.top,E.top),E.right=wf(D.right,E.right),E.bottom=wf(D.bottom,E.bottom),E.left=EA(D.left,E.left),E},o2(n,o,u));return{width:w.right-w.left,height:w.bottom-w.top,x:w.left,y:w.top}}function aM(e){const{width:n,height:i}=eE(e);return{width:n,height:i}}function lM(e,n,i){const a=ih(n),u=sh(n),f=i==="fixed",m=nd(e,!0,f,n);let o={scrollLeft:0,scrollTop:0};const w=rh(0);function E(){w.x=by(u)}if(a||!a&&!f)if((bp(n)!=="body"||Wm(u))&&(o=xy(n)),a){const P=nd(n,!0,f,n);w.x=P.x+n.clientLeft,w.y=P.y+n.clientTop}else u&&E();f&&!a&&u&&E();const I=u&&!a&&!f?rE(u,o):rh(0),D=m.left+o.scrollLeft-w.x-I.x,O=m.top+o.scrollTop-w.y-I.y;return{x:D,y:O,width:m.width,height:m.height}}function Zv(e){return Pu(e).position==="static"}function a2(e,n){if(!ih(e)||Pu(e).position==="fixed")return null;if(n)return n(e);let i=e.offsetParent;return sh(e)===i&&(i=i.ownerDocument.body),i}function iE(e,n){const i=FA(e);if(wy(e))return i;if(!ih(e)){let u=xf(e);for(;u&&!gp(u);){if(Tu(u)&&!Zv(u))return u;u=xf(u)}return i}let a=a2(e,n);for(;a&&VL(a)&&Zv(a);)a=a2(a,n);return a&&gp(a)&&Zv(a)&&!Sw(a)?i:a||WL(e)||i}const cM=async function(e){const n=this.getOffsetParent||iE,i=this.getDimensions,a=await i(e.floating);return{reference:lM(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function AM(e){return Pu(e).direction==="rtl"}const uM={convertOffsetParentRelativeRectToViewportRelativeRect:JL,getDocumentElement:sh,getClippingRect:oM,getOffsetParent:iE,getElementRects:cM,getClientRects:eM,getDimensions:aM,getScale:cp,isElement:Tu,isRTL:AM};function sE(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function hM(e,n){let i=null,a;const u=sh(e);function f(){var o;clearTimeout(a),(o=i)==null||o.disconnect(),i=null}function m(o,w){o===void 0&&(o=!1),w===void 0&&(w=1),f();const E=e.getBoundingClientRect(),{left:I,top:D,width:O,height:P}=E;if(o||n(),!O||!P)return;const W=jg(D),H=jg(u.clientWidth-(I+O)),z=jg(u.clientHeight-(D+P)),Z=jg(I),ae={rootMargin:-W+"px "+-H+"px "+-z+"px "+-Z+"px",threshold:EA(0,wf(1,w))||1};let fe=!0;function Fe(He){const Ve=He[0].intersectionRatio;if(Ve!==w){if(!fe)return m();Ve?m(!1,Ve):a=setTimeout(()=>{m(!1,1e-7)},1e3)}Ve===1&&!sE(E,e.getBoundingClientRect())&&m(),fe=!1}try{i=new IntersectionObserver(Fe,{...ae,root:u.ownerDocument})}catch{i=new IntersectionObserver(Fe,ae)}i.observe(e)}return m(!0),f}function fM(e,n,i,a){a===void 0&&(a={});const{ancestorScroll:u=!0,ancestorResize:f=!0,elementResize:m=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:w=!1}=a,E=Iw(e),I=u||f?[...E?km(E):[],...km(n)]:[];I.forEach(Z=>{u&&Z.addEventListener("scroll",i,{passive:!0}),f&&Z.addEventListener("resize",i)});const D=E&&o?hM(E,i):null;let O=-1,P=null;m&&(P=new ResizeObserver(Z=>{let[se]=Z;se&&se.target===E&&P&&(P.unobserve(n),cancelAnimationFrame(O),O=requestAnimationFrame(()=>{var ae;(ae=P)==null||ae.observe(n)})),i()}),E&&!w&&P.observe(E),P.observe(n));let W,H=w?nd(e):null;w&&z();function z(){const Z=nd(e);H&&!sE(H,Z)&&i(),H=Z,W=requestAnimationFrame(z)}return i(),()=>{var Z;I.forEach(se=>{u&&se.removeEventListener("scroll",i),f&&se.removeEventListener("resize",i)}),D?.(),(Z=P)==null||Z.disconnect(),P=null,w&&cancelAnimationFrame(W)}}const dM=NL,pM=QL,mM=UL,gM=zL,yM=DL,l2=kL,vM=OL,_M=(e,n,i)=>{const a=new Map,u={platform:uM,...i},f={...u.platform,_c:a};return ML(e,n,{...u,platform:f})};var wM=typeof document<"u",xM=function(){},P0=wM?te.useLayoutEffect:xM;function $0(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let i,a,u;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==n.length)return!1;for(a=i;a--!==0;)if(!$0(e[a],n[a]))return!1;return!0}if(u=Object.keys(e),i=u.length,i!==Object.keys(n).length)return!1;for(a=i;a--!==0;)if(!{}.hasOwnProperty.call(n,u[a]))return!1;for(a=i;a--!==0;){const f=u[a];if(!(f==="_owner"&&e.$$typeof)&&!$0(e[f],n[f]))return!1}return!0}return e!==e&&n!==n}function oE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function c2(e,n){const i=oE(e);return Math.round(n*i)/i}function Xv(e){const n=te.useRef(e);return P0(()=>{n.current=e}),n}function bM(e){e===void 0&&(e={});const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:u,elements:{reference:f,floating:m}={},transform:o=!0,whileElementsMounted:w,open:E}=e,[I,D]=te.useState({x:0,y:0,strategy:i,placement:n,middlewareData:{},isPositioned:!1}),[O,P]=te.useState(a);$0(O,a)||P(a);const[W,H]=te.useState(null),[z,Z]=te.useState(null),se=te.useCallback(Ne=>{Ne!==He.current&&(He.current=Ne,H(Ne))},[]),ae=te.useCallback(Ne=>{Ne!==Ve.current&&(Ve.current=Ne,Z(Ne))},[]),fe=f||W,Fe=m||z,He=te.useRef(null),Ve=te.useRef(null),Oe=te.useRef(I),be=w!=null,rt=Xv(w),ue=Xv(u),me=Xv(E),Ue=te.useCallback(()=>{if(!He.current||!Ve.current)return;const Ne={placement:n,strategy:i,middleware:O};ue.current&&(Ne.platform=ue.current),_M(He.current,Ve.current,Ne).then(Te=>{const yt={...Te,isPositioned:me.current!==!1};Ie.current&&!$0(Oe.current,yt)&&(Oe.current=yt,_p.flushSync(()=>{D(yt)}))})},[O,n,i,ue,me]);P0(()=>{E===!1&&Oe.current.isPositioned&&(Oe.current.isPositioned=!1,D(Ne=>({...Ne,isPositioned:!1})))},[E]);const Ie=te.useRef(!1);P0(()=>(Ie.current=!0,()=>{Ie.current=!1}),[]),P0(()=>{if(fe&&(He.current=fe),Fe&&(Ve.current=Fe),fe&&Fe){if(rt.current)return rt.current(fe,Fe,Ue);Ue()}},[fe,Fe,Ue,rt,be]);const pt=te.useMemo(()=>({reference:He,floating:Ve,setReference:se,setFloating:ae}),[se,ae]),lt=te.useMemo(()=>({reference:fe,floating:Fe}),[fe,Fe]),ot=te.useMemo(()=>{const Ne={position:i,left:0,top:0};if(!lt.floating)return Ne;const Te=c2(lt.floating,I.x),yt=c2(lt.floating,I.y);return o?{...Ne,transform:"translate("+Te+"px, "+yt+"px)",...oE(lt.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:Te,top:yt}},[i,o,lt.floating,I.x,I.y]);return te.useMemo(()=>({...I,update:Ue,refs:pt,elements:lt,floatingStyles:ot}),[I,Ue,pt,lt,ot])}const BM=e=>{function n(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:a,padding:u}=typeof e=="function"?e(i):e;return a&&n(a)?a.current!=null?l2({element:a.current,padding:u}).fn(i):{}:a?l2({element:a,padding:u}).fn(i):{}}}},CM=(e,n)=>({...dM(e),options:[e,n]}),EM=(e,n)=>({...pM(e),options:[e,n]}),SM=(e,n)=>({...vM(e),options:[e,n]}),FM=(e,n)=>({...mM(e),options:[e,n]}),IM=(e,n)=>({...gM(e),options:[e,n]}),TM=(e,n)=>({...yM(e),options:[e,n]}),PM=(e,n)=>({...BM(e),options:[e,n]});var LM="Arrow",aE=te.forwardRef((e,n)=>{const{children:i,width:a=10,height:u=5,...f}=e;return ce.jsx(oi.svg,{...f,ref:n,width:a,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:ce.jsx("polygon",{points:"0,0 30,0 15,10"})})});aE.displayName=LM;var MM=aE;function Tw(e){const[n,i]=te.useState(void 0);return Cl(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const f=u[0];let m,o;if("borderBoxSize"in f){const w=f.borderBoxSize,E=Array.isArray(w)?w[0]:w;m=E.inlineSize,o=E.blockSize}else m=e.offsetWidth,o=e.offsetHeight;i({width:m,height:o})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else i(void 0)},[e]),n}var Pw="Popper",[lE,By]=Hh(Pw),[kM,cE]=lE(Pw),AE=e=>{const{__scopePopper:n,children:i}=e,[a,u]=te.useState(null);return ce.jsx(kM,{scope:n,anchor:a,onAnchorChange:u,children:i})};AE.displayName=Pw;var uE="PopperAnchor",hE=te.forwardRef((e,n)=>{const{__scopePopper:i,virtualRef:a,...u}=e,f=cE(uE,i),m=te.useRef(null),o=fs(n,m),w=te.useRef(null);return te.useEffect(()=>{const E=w.current;w.current=a?.current||m.current,E!==w.current&&f.onAnchorChange(w.current)}),a?null:ce.jsx(oi.div,{...u,ref:o})});hE.displayName=uE;var Lw="PopperContent",[UM,DM]=lE(Lw),fE=te.forwardRef((e,n)=>{const{__scopePopper:i,side:a="bottom",sideOffset:u=0,align:f="center",alignOffset:m=0,arrowPadding:o=0,avoidCollisions:w=!0,collisionBoundary:E=[],collisionPadding:I=0,sticky:D="partial",hideWhenDetached:O=!1,updatePositionStrategy:P="optimized",onPlaced:W,...H}=e,z=cE(Lw,i),[Z,se]=te.useState(null),ae=fs(n,et=>se(et)),[fe,Fe]=te.useState(null),He=Tw(fe),Ve=He?.width??0,Oe=He?.height??0,be=a+(f!=="center"?"-"+f:""),rt=typeof I=="number"?I:{top:0,right:0,bottom:0,left:0,...I},ue=Array.isArray(E)?E:[E],me=ue.length>0,Ue={padding:rt,boundary:ue.filter(NM),altBoundary:me},{refs:Ie,floatingStyles:pt,placement:lt,isPositioned:ot,middlewareData:Ne}=bM({strategy:"fixed",placement:be,whileElementsMounted:(...et)=>fM(...et,{animationFrame:P==="always"}),elements:{reference:z.anchor},middleware:[CM({mainAxis:u+Oe,alignmentAxis:m}),w&&EM({mainAxis:!0,crossAxis:!1,limiter:D==="partial"?SM():void 0,...Ue}),w&&FM({...Ue}),IM({...Ue,apply:({elements:et,rects:_t,availableWidth:Et,availableHeight:Pt})=>{const{width:Kt,height:ar}=_t.reference,hr=et.floating.style;hr.setProperty("--radix-popper-available-width",`${Et}px`),hr.setProperty("--radix-popper-available-height",`${Pt}px`),hr.setProperty("--radix-popper-anchor-width",`${Kt}px`),hr.setProperty("--radix-popper-anchor-height",`${ar}px`)}}),fe&&PM({element:fe,padding:o}),QM({arrowWidth:Ve,arrowHeight:Oe}),O&&TM({strategy:"referenceHidden",...Ue})]}),[Te,yt]=mE(lt),Le=iu(W);Cl(()=>{ot&&Le?.()},[ot,Le]);const ie=Ne.arrow?.x,Ce=Ne.arrow?.y,Me=Ne.arrow?.centerOffset!==0,[qe,at]=te.useState();return Cl(()=>{Z&&at(window.getComputedStyle(Z).zIndex)},[Z]),ce.jsx("div",{ref:Ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...pt,transform:ot?pt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:qe,"--radix-popper-transform-origin":[Ne.transformOrigin?.x,Ne.transformOrigin?.y].join(" "),...Ne.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:ce.jsx(UM,{scope:i,placedSide:Te,onArrowChange:Fe,arrowX:ie,arrowY:Ce,shouldHideArrow:Me,children:ce.jsx(oi.div,{"data-side":Te,"data-align":yt,...H,ref:ae,style:{...H.style,animation:ot?void 0:"none"}})})})});fE.displayName=Lw;var dE="PopperArrow",RM={top:"bottom",right:"left",bottom:"top",left:"right"},pE=te.forwardRef(function(n,i){const{__scopePopper:a,...u}=n,f=DM(dE,a),m=RM[f.placedSide];return ce.jsx("span",{ref:f.onArrowChange,style:{position:"absolute",left:f.arrowX,top:f.arrowY,[m]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[f.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[f.placedSide],visibility:f.shouldHideArrow?"hidden":void 0},children:ce.jsx(MM,{...u,ref:i,style:{...u.style,display:"block"}})})});pE.displayName=dE;function NM(e){return e!==null}var QM=e=>({name:"transformOrigin",options:e,fn(n){const{placement:i,rects:a,middlewareData:u}=n,m=u.arrow?.centerOffset!==0,o=m?0:e.arrowWidth,w=m?0:e.arrowHeight,[E,I]=mE(i),D={start:"0%",center:"50%",end:"100%"}[I],O=(u.arrow?.x??0)+o/2,P=(u.arrow?.y??0)+w/2;let W="",H="";return E==="bottom"?(W=m?D:`${O}px`,H=`${-w}px`):E==="top"?(W=m?D:`${O}px`,H=`${a.floating.height+w}px`):E==="right"?(W=`${-w}px`,H=m?D:`${P}px`):E==="left"&&(W=`${a.floating.width+w}px`,H=m?D:`${P}px`),{data:{x:W,y:H}}}});function mE(e){const[n,i="center"]=e.split("-");return[n,i]}var OM=AE,gE=hE,yE=fE,vE=pE,zM=Symbol("radix.slottable");function HM(e){const n=({children:i})=>ce.jsx(ce.Fragment,{children:i});return n.displayName=`${e}.Slottable`,n.__radixId=zM,n}var[Cy]=Hh("Tooltip",[By]),Mw=By(),_E="TooltipProvider",jM=700,A2="tooltip.open",[VM,wE]=Cy(_E),xE=e=>{const{__scopeTooltip:n,delayDuration:i=jM,skipDelayDuration:a=300,disableHoverableContent:u=!1,children:f}=e,m=te.useRef(!0),o=te.useRef(!1),w=te.useRef(0);return te.useEffect(()=>{const E=w.current;return()=>window.clearTimeout(E)},[]),ce.jsx(VM,{scope:n,isOpenDelayedRef:m,delayDuration:i,onOpen:te.useCallback(()=>{window.clearTimeout(w.current),m.current=!1},[]),onClose:te.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>m.current=!0,a)},[a]),isPointerInTransitRef:o,onPointerInTransitChange:te.useCallback(E=>{o.current=E},[]),disableHoverableContent:u,children:f})};xE.displayName=_E;var bE="Tooltip",[PV,Ey]=Cy(bE),p_="TooltipTrigger",GM=te.forwardRef((e,n)=>{const{__scopeTooltip:i,...a}=e,u=Ey(p_,i),f=wE(p_,i),m=Mw(i),o=te.useRef(null),w=fs(n,o,u.onTriggerChange),E=te.useRef(!1),I=te.useRef(!1),D=te.useCallback(()=>E.current=!1,[]);return te.useEffect(()=>()=>document.removeEventListener("pointerup",D),[D]),ce.jsx(gE,{asChild:!0,...m,children:ce.jsx(oi.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...a,ref:w,onPointerMove:Un(e.onPointerMove,O=>{O.pointerType!=="touch"&&!I.current&&!f.isPointerInTransitRef.current&&(u.onTriggerEnter(),I.current=!0)}),onPointerLeave:Un(e.onPointerLeave,()=>{u.onTriggerLeave(),I.current=!1}),onPointerDown:Un(e.onPointerDown,()=>{u.open&&u.onClose(),E.current=!0,document.addEventListener("pointerup",D,{once:!0})}),onFocus:Un(e.onFocus,()=>{E.current||u.onOpen()}),onBlur:Un(e.onBlur,u.onClose),onClick:Un(e.onClick,u.onClose)})})});GM.displayName=p_;var KM="TooltipPortal",[LV,qM]=Cy(KM,{forceMount:void 0}),yp="TooltipContent",BE=te.forwardRef((e,n)=>{const i=qM(yp,e.__scopeTooltip),{forceMount:a=i.forceMount,side:u="top",...f}=e,m=Ey(yp,e.__scopeTooltip);return ce.jsx(Km,{present:a||m.open,children:m.disableHoverableContent?ce.jsx(CE,{side:u,...f,ref:n}):ce.jsx($M,{side:u,...f,ref:n})})}),$M=te.forwardRef((e,n)=>{const i=Ey(yp,e.__scopeTooltip),a=wE(yp,e.__scopeTooltip),u=te.useRef(null),f=fs(n,u),[m,o]=te.useState(null),{trigger:w,onClose:E}=i,I=u.current,{onPointerInTransitChange:D}=a,O=te.useCallback(()=>{o(null),D(!1)},[D]),P=te.useCallback((W,H)=>{const z=W.currentTarget,Z={x:W.clientX,y:W.clientY},se=JM(Z,z.getBoundingClientRect()),ae=ek(Z,se),fe=tk(H.getBoundingClientRect()),Fe=nk([...ae,...fe]);o(Fe),D(!0)},[D]);return te.useEffect(()=>()=>O(),[O]),te.useEffect(()=>{if(w&&I){const W=z=>P(z,I),H=z=>P(z,w);return w.addEventListener("pointerleave",W),I.addEventListener("pointerleave",H),()=>{w.removeEventListener("pointerleave",W),I.removeEventListener("pointerleave",H)}}},[w,I,P,O]),te.useEffect(()=>{if(m){const W=H=>{const z=H.target,Z={x:H.clientX,y:H.clientY},se=w?.contains(z)||I?.contains(z),ae=!rk(Z,m);se?O():ae&&(O(),E())};return document.addEventListener("pointermove",W),()=>document.removeEventListener("pointermove",W)}},[w,I,m,E,O]),ce.jsx(CE,{...e,ref:f})}),[WM,ZM]=Cy(bE,{isInside:!1}),XM=HM("TooltipContent"),CE=te.forwardRef((e,n)=>{const{__scopeTooltip:i,children:a,"aria-label":u,onEscapeKeyDown:f,onPointerDownOutside:m,...o}=e,w=Ey(yp,i),E=Mw(i),{onClose:I}=w;return te.useEffect(()=>(document.addEventListener(A2,I),()=>document.removeEventListener(A2,I)),[I]),te.useEffect(()=>{if(w.trigger){const D=O=>{O.target?.contains(w.trigger)&&I()};return window.addEventListener("scroll",D,{capture:!0}),()=>window.removeEventListener("scroll",D,{capture:!0})}},[w.trigger,I]),ce.jsx(py,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:D=>D.preventDefault(),onDismiss:I,children:ce.jsxs(yE,{"data-state":w.stateAttribute,...E,...o,ref:n,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[ce.jsx(XM,{children:a}),ce.jsx(WM,{scope:i,isInside:!0,children:ce.jsx(F3,{id:w.contentId,role:"tooltip",children:u||a})})]})})});BE.displayName=yp;var EE="TooltipArrow",YM=te.forwardRef((e,n)=>{const{__scopeTooltip:i,...a}=e,u=Mw(i);return ZM(EE,i).isInside?null:ce.jsx(vE,{...u,...a,ref:n})});YM.displayName=EE;function JM(e,n){const i=Math.abs(n.top-e.y),a=Math.abs(n.bottom-e.y),u=Math.abs(n.right-e.x),f=Math.abs(n.left-e.x);switch(Math.min(i,a,u,f)){case f:return"left";case u:return"right";case i:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function ek(e,n,i=5){const a=[];switch(n){case"top":a.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":a.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":a.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":a.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i});break}return a}function tk(e){const{top:n,right:i,bottom:a,left:u}=e;return[{x:u,y:n},{x:i,y:n},{x:i,y:a},{x:u,y:a}]}function rk(e,n){const{x:i,y:a}=e;let u=!1;for(let f=0,m=n.length-1;f<n.length;m=f++){const o=n[f],w=n[m],E=o.x,I=o.y,D=w.x,O=w.y;I>a!=O>a&&i<(D-E)*(a-I)/(O-I)+E&&(u=!u)}return u}function nk(e){const n=e.slice();return n.sort((i,a)=>i.x<a.x?-1:i.x>a.x?1:i.y<a.y?-1:i.y>a.y?1:0),ik(n)}function ik(e){if(e.length<=1)return e.slice();const n=[];for(let a=0;a<e.length;a++){const u=e[a];for(;n.length>=2;){const f=n[n.length-1],m=n[n.length-2];if((f.x-m.x)*(u.y-m.y)>=(f.y-m.y)*(u.x-m.x))n.pop();else break}n.push(u)}n.pop();const i=[];for(let a=e.length-1;a>=0;a--){const u=e[a];for(;i.length>=2;){const f=i[i.length-1],m=i[i.length-2];if((f.x-m.x)*(u.y-m.y)>=(f.y-m.y)*(u.x-m.x))i.pop();else break}i.push(u)}return i.pop(),n.length===1&&i.length===1&&n[0].x===i[0].x&&n[0].y===i[0].y?n:n.concat(i)}var sk=xE,SE=BE;const ok=sk,ak=te.forwardRef(({className:e,sideOffset:n=4,...i},a)=>ce.jsx(SE,{ref:a,sideOffset:n,className:Li("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i}));ak.displayName=SE.displayName;var Sy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lk={setTimeout:(e,n)=>setTimeout(e,n),clearTimeout:e=>clearTimeout(e),setInterval:(e,n)=>setInterval(e,n),clearInterval:e=>clearInterval(e)},ck=class{#e=lk;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,n){return this.#e.setTimeout(e,n)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,n){return this.#e.setInterval(e,n)}clearInterval(e){this.#e.clearInterval(e)}},m_=new ck;function Ak(e){setTimeout(e,0)}var Fy=typeof window>"u"||"Deno"in globalThis;function Iu(){}function uk(e,n){return typeof e=="function"?e(n):e}function hk(e){return typeof e=="number"&&e>=0&&e!==1/0}function fk(e,n){return Math.max(e+(n||0)-Date.now(),0)}function g_(e,n){return typeof e=="function"?e(n):e}function dk(e,n){return typeof e=="function"?e(n):e}function u2(e,n){const{type:i="all",exact:a,fetchStatus:u,predicate:f,queryKey:m,stale:o}=e;if(m){if(a){if(n.queryHash!==kw(m,n.options))return!1}else if(!Dm(n.queryKey,m))return!1}if(i!=="all"){const w=n.isActive();if(i==="active"&&!w||i==="inactive"&&w)return!1}return!(typeof o=="boolean"&&n.isStale()!==o||u&&u!==n.state.fetchStatus||f&&!f(n))}function h2(e,n){const{exact:i,status:a,predicate:u,mutationKey:f}=e;if(f){if(!n.options.mutationKey)return!1;if(i){if(Um(n.options.mutationKey)!==Um(f))return!1}else if(!Dm(n.options.mutationKey,f))return!1}return!(a&&n.state.status!==a||u&&!u(n))}function kw(e,n){return(n?.queryKeyHashFn||Um)(e)}function Um(e){return JSON.stringify(e,(n,i)=>y_(i)?Object.keys(i).sort().reduce((a,u)=>(a[u]=i[u],a),{}):i)}function Dm(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(i=>Dm(e[i],n[i])):!1}var pk=Object.prototype.hasOwnProperty;function FE(e,n){if(e===n)return e;const i=f2(e)&&f2(n);if(!i&&!(y_(e)&&y_(n)))return n;const u=(i?e:Object.keys(e)).length,f=i?n:Object.keys(n),m=f.length,o=i?new Array(m):{};let w=0;for(let E=0;E<m;E++){const I=i?E:f[E],D=e[I],O=n[I];if(D===O){o[I]=D,(i?E<u:pk.call(e,I))&&w++;continue}if(D===null||O===null||typeof D!="object"||typeof O!="object"){o[I]=O;continue}const P=FE(D,O);o[I]=P,P===D&&w++}return u===m&&w===u?e:o}function f2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function y_(e){if(!d2(e))return!1;const n=e.constructor;if(n===void 0)return!0;const i=n.prototype;return!(!d2(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function d2(e){return Object.prototype.toString.call(e)==="[object Object]"}function mk(e){return new Promise(n=>{m_.setTimeout(n,e)})}function gk(e,n,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,n):i.structuralSharing!==!1?FE(e,n):n}function yk(e,n,i=0){const a=[...e,n];return i&&a.length>i?a.slice(1):a}function vk(e,n,i=0){const a=[n,...e];return i&&a.length>i?a.slice(0,-1):a}var Uw=Symbol();function IE(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===Uw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var _k=class extends Sy{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Fy&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},TE=new _k;function wk(){let e,n;const i=new Promise((u,f)=>{e=u,n=f});i.status="pending",i.catch(()=>{});function a(u){Object.assign(i,u),delete i.resolve,delete i.reject}return i.resolve=u=>{a({status:"fulfilled",value:u}),e(u)},i.reject=u=>{a({status:"rejected",reason:u}),n(u)},i}var xk=Ak;function bk(){let e=[],n=0,i=o=>{o()},a=o=>{o()},u=xk;const f=o=>{n?e.push(o):u(()=>{i(o)})},m=()=>{const o=e;e=[],o.length&&u(()=>{a(()=>{o.forEach(w=>{i(w)})})})};return{batch:o=>{let w;n++;try{w=o()}finally{n--,n||m()}return w},batchCalls:o=>(...w)=>{f(()=>{o(...w)})},schedule:f,setNotifyFunction:o=>{i=o},setBatchNotifyFunction:o=>{a=o},setScheduler:o=>{u=o}}}var Bc=bk(),Bk=class extends Sy{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Fy&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(i=>{i(e)}))}isOnline(){return this.#e}},W0=new Bk;function Ck(e){return Math.min(1e3*2**e,3e4)}function PE(e){return(e??"online")==="online"?W0.isOnline():!0}var v_=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function LE(e){let n=!1,i=0,a;const u=wk(),f=()=>u.status!=="pending",m=H=>{if(!f()){const z=new v_(H);O(z),e.onCancel?.(z)}},o=()=>{n=!0},w=()=>{n=!1},E=()=>TE.isFocused()&&(e.networkMode==="always"||W0.isOnline())&&e.canRun(),I=()=>PE(e.networkMode)&&e.canRun(),D=H=>{f()||(a?.(),u.resolve(H))},O=H=>{f()||(a?.(),u.reject(H))},P=()=>new Promise(H=>{a=z=>{(f()||E())&&H(z)},e.onPause?.()}).then(()=>{a=void 0,f()||e.onContinue?.()}),W=()=>{if(f())return;let H;const z=i===0?e.initialPromise:void 0;try{H=z??e.fn()}catch(Z){H=Promise.reject(Z)}Promise.resolve(H).then(D).catch(Z=>{if(f())return;const se=e.retry??(Fy?0:3),ae=e.retryDelay??Ck,fe=typeof ae=="function"?ae(i,Z):ae,Fe=se===!0||typeof se=="number"&&i<se||typeof se=="function"&&se(i,Z);if(n||!Fe){O(Z);return}i++,e.onFail?.(i,Z),mk(fe).then(()=>E()?void 0:P()).then(()=>{n?O(Z):W()})})};return{promise:u,status:()=>u.status,cancel:m,continue:()=>(a?.(),u),cancelRetry:o,continueRetry:w,canStart:I,start:()=>(I()?W():P().then(W),u)}}var ME=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hk(this.gcTime)&&(this.#e=m_.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Fy?1/0:300*1e3))}clearGcTimeout(){this.#e&&(m_.clearTimeout(this.#e),this.#e=void 0)}},Ek=class extends ME{#e;#t;#r;#i;#n;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=m2(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=m2(this.options);n.data!==void 0&&(this.setState(p2(n.data,n.dataUpdatedAt)),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,n){const i=gk(this.state.data,e,this.options);return this.#s({data:i,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),i}setState(e,n){this.#s({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#n?.promise;return this.#n?.cancel(e),n?n.then(Iu).catch(Iu):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>dk(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Uw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>g_(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!fk(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(w=>w.options.queryFn);o&&this.setOptions(o.options)}const i=new AbortController,a=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#a=!0,i.signal)})},u=()=>{const o=IE(this.options,n),E=(()=>{const I={client:this.#i,queryKey:this.queryKey,meta:this.meta};return a(I),I})();return this.#a=!1,this.options.persister?this.options.persister(o,E,this):o(E)},m=(()=>{const o={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:u};return a(o),o})();this.options.behavior?.onFetch(m,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==m.fetchOptions?.meta)&&this.#s({type:"fetch",meta:m.fetchOptions?.meta}),this.#n=LE({initialPromise:n?.initialPromise,fn:m.fetchFn,onCancel:o=>{o instanceof v_&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),i.abort()},onFail:(o,w)=>{this.#s({type:"failed",failureCount:o,error:w})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0});try{const o=await this.#n.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#r.config.onSuccess?.(o,this),this.#r.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof v_){if(o.silent)return this.#n.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#s({type:"error",error:o}),this.#r.config.onError?.(o,this),this.#r.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#s(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Sk(i.data,this.options),fetchMeta:e.meta??null};case"success":const a={...i,...p2(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const u=e.error;return{...i,error:u,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),Bc.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Sk(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PE(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function p2(e,n){return{data:e,dataUpdatedAt:n??Date.now(),error:null,isInvalidated:!1,status:"success"}}function m2(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,i=n!==void 0,a=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:i?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}function g2(e){return{onFetch:(n,i)=>{const a=n.options,u=n.fetchOptions?.meta?.fetchMore?.direction,f=n.state.data?.pages||[],m=n.state.data?.pageParams||[];let o={pages:[],pageParams:[]},w=0;const E=async()=>{let I=!1;const D=W=>{Object.defineProperty(W,"signal",{enumerable:!0,get:()=>(n.signal.aborted?I=!0:n.signal.addEventListener("abort",()=>{I=!0}),n.signal)})},O=IE(n.options,n.fetchOptions),P=async(W,H,z)=>{if(I)return Promise.reject();if(H==null&&W.pages.length)return Promise.resolve(W);const se=(()=>{const He={client:n.client,queryKey:n.queryKey,pageParam:H,direction:z?"backward":"forward",meta:n.options.meta};return D(He),He})(),ae=await O(se),{maxPages:fe}=n.options,Fe=z?vk:yk;return{pages:Fe(W.pages,ae,fe),pageParams:Fe(W.pageParams,H,fe)}};if(u&&f.length){const W=u==="backward",H=W?Fk:y2,z={pages:f,pageParams:m},Z=H(a,z);o=await P(z,Z,W)}else{const W=e??f.length;do{const H=w===0?m[0]??a.initialPageParam:y2(a,o);if(w>0&&H==null)break;o=await P(o,H),w++}while(w<W)}return o};n.options.persister?n.fetchFn=()=>n.options.persister?.(E,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},i):n.fetchFn=E}}}function y2(e,{pages:n,pageParams:i}){const a=n.length-1;return n.length>0?e.getNextPageParam(n[a],n,i[a],i):void 0}function Fk(e,{pages:n,pageParams:i}){return n.length>0?e.getPreviousPageParam?.(n[0],n,i[0],i):void 0}var Ik=class extends ME{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Tk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#n({type:"continue"})},i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=LE({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(f,m)=>{this.#n({type:"failed",failureCount:f,error:m})},onPause:()=>{this.#n({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",u=!this.#i.canStart();try{if(a)n();else{this.#n({type:"pending",variables:e,isPaused:u}),await this.#r.config.onMutate?.(e,this,i);const m=await this.options.onMutate?.(e,i);m!==this.state.context&&this.#n({type:"pending",context:m,variables:e,isPaused:u})}const f=await this.#i.start();return await this.#r.config.onSuccess?.(f,e,this.state.context,this,i),await this.options.onSuccess?.(f,e,this.state.context,i),await this.#r.config.onSettled?.(f,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(f,null,e,this.state.context,i),this.#n({type:"success",data:f}),f}catch(f){try{throw await this.#r.config.onError?.(f,e,this.state.context,this,i),await this.options.onError?.(f,e,this.state.context,i),await this.#r.config.onSettled?.(void 0,f,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,f,e,this.state.context,i),f}finally{this.#n({type:"error",error:f})}}finally{this.#r.runNext(this)}}#n(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Bc.batch(()=>{this.#t.forEach(i=>{i.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Tk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pk=class extends Sy{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,n,i){const a=new Ik({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(n),state:i});return this.add(a),a}add(e){this.#e.add(e);const n=Vg(e);if(typeof n=="string"){const i=this.#t.get(n);i?i.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=Vg(e);if(typeof n=="string"){const i=this.#t.get(n);if(i)if(i.length>1){const a=i.indexOf(e);a!==-1&&i.splice(a,1)}else i[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Vg(e);if(typeof n=="string"){const a=this.#t.get(n)?.find(u=>u.state.status==="pending");return!a||a===e}else return!0}runNext(e){const n=Vg(e);return typeof n=="string"?this.#t.get(n)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Bc.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(i=>h2(n,i))}findAll(e={}){return this.getAll().filter(n=>h2(e,n))}notify(e){Bc.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Bc.batch(()=>Promise.all(e.map(n=>n.continue().catch(Iu))))}};function Vg(e){return e.options.scope?.id}var Lk=class extends Sy{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,i){const a=n.queryKey,u=n.queryHash??kw(a,n);let f=this.get(u);return f||(f=new Ek({client:e,queryKey:a,queryHash:u,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(a)}),this.add(f)),f}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bc.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>u2(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>u2(e,i)):n}notify(e){Bc.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Bc.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bc.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Mk=class{#e;#t;#r;#i;#n;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new Lk,this.#t=e.mutationCache||new Pk,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=TE.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=W0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),i=this.#e.build(this,n),a=i.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(g_(n.staleTime,i))&&this.prefetchQuery(n),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:i})=>{const a=i.data;return[n,a]})}setQueryData(e,n,i){const a=this.defaultQueryOptions({queryKey:e}),f=this.#e.get(a.queryHash)?.state.data,m=uk(n,f);if(m!==void 0)return this.#e.build(this,a).setData(m,{...i,manual:!0})}setQueriesData(e,n,i){return Bc.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,n,i)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;Bc.batch(()=>{n.findAll(e).forEach(i=>{n.remove(i)})})}resetQueries(e,n){const i=this.#e;return Bc.batch(()=>(i.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const i={revert:!0,...n},a=Bc.batch(()=>this.#e.findAll(e).map(u=>u.cancel(i)));return Promise.all(a).then(Iu).catch(Iu)}invalidateQueries(e,n={}){return Bc.batch(()=>(this.#e.findAll(e).forEach(i=>{i.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const i={...n,cancelRefetch:n.cancelRefetch??!0},a=Bc.batch(()=>this.#e.findAll(e).filter(u=>!u.isDisabled()&&!u.isStatic()).map(u=>{let f=u.fetch(void 0,i);return i.throwOnError||(f=f.catch(Iu)),u.state.fetchStatus==="paused"?Promise.resolve():f}));return Promise.all(a).then(Iu)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const i=this.#e.build(this,n);return i.isStaleByTime(g_(n.staleTime,i))?i.fetch(n):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Iu).catch(Iu)}fetchInfiniteQuery(e){return e.behavior=g2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Iu).catch(Iu)}ensureInfiniteQueryData(e){return e.behavior=g2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return W0.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,n){this.#i.set(Um(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#i.values()],i={};return n.forEach(a=>{Dm(e,a.queryKey)&&Object.assign(i,a.defaultOptions)}),i}setMutationDefaults(e,n){this.#n.set(Um(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#n.values()],i={};return n.forEach(a=>{Dm(e,a.mutationKey)&&Object.assign(i,a.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=kw(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===Uw&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},kk=te.createContext(void 0),Uk=({client:e,children:n})=>(te.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ce.jsx(kk.Provider,{value:e,children:n}));function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Rm.apply(this,arguments)}var hf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(hf||(hf={}));const v2="popstate";function Dk(e){e===void 0&&(e={});function n(a,u){let{pathname:f,search:m,hash:o}=a.location;return __("",{pathname:f,search:m,hash:o},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(a,u){return typeof u=="string"?u:Z0(u)}return Nk(n,i,null,e)}function aa(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Dw(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Rk(){return Math.random().toString(36).substr(2,8)}function _2(e,n){return{usr:e.state,key:e.key,idx:n}}function __(e,n,i,a){return i===void 0&&(i=null),Rm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Bp(n):n,{state:i,key:n&&n.key||a||Rk()})}function Z0(e){let{pathname:n="/",search:i="",hash:a=""}=e;return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function Bp(e){let n={};if(e){let i=e.indexOf("#");i>=0&&(n.hash=e.substr(i),e=e.substr(0,i));let a=e.indexOf("?");a>=0&&(n.search=e.substr(a),e=e.substr(0,a)),e&&(n.pathname=e)}return n}function Nk(e,n,i,a){a===void 0&&(a={});let{window:u=document.defaultView,v5Compat:f=!1}=a,m=u.history,o=hf.Pop,w=null,E=I();E==null&&(E=0,m.replaceState(Rm({},m.state,{idx:E}),""));function I(){return(m.state||{idx:null}).idx}function D(){o=hf.Pop;let z=I(),Z=z==null?null:z-E;E=z,w&&w({action:o,location:H.location,delta:Z})}function O(z,Z){o=hf.Push;let se=__(H.location,z,Z);E=I()+1;let ae=_2(se,E),fe=H.createHref(se);try{m.pushState(ae,"",fe)}catch(Fe){if(Fe instanceof DOMException&&Fe.name==="DataCloneError")throw Fe;u.location.assign(fe)}f&&w&&w({action:o,location:H.location,delta:1})}function P(z,Z){o=hf.Replace;let se=__(H.location,z,Z);E=I();let ae=_2(se,E),fe=H.createHref(se);m.replaceState(ae,"",fe),f&&w&&w({action:o,location:H.location,delta:0})}function W(z){let Z=u.location.origin!=="null"?u.location.origin:u.location.href,se=typeof z=="string"?z:Z0(z);return se=se.replace(/ $/,"%20"),aa(Z,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,Z)}let H={get action(){return o},get location(){return e(u,m)},listen(z){if(w)throw new Error("A history only accepts one active listener");return u.addEventListener(v2,D),w=z,()=>{u.removeEventListener(v2,D),w=null}},createHref(z){return n(u,z)},createURL:W,encodeLocation(z){let Z=W(z);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:O,replace:P,go(z){return m.go(z)}};return H}var w2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(w2||(w2={}));function Qk(e,n,i){return i===void 0&&(i="/"),Ok(e,n,i)}function Ok(e,n,i,a){let u=typeof n=="string"?Bp(n):n,f=Rw(u.pathname||"/",i);if(f==null)return null;let m=kE(e);zk(m);let o=null;for(let w=0;o==null&&w<m.length;++w){let E=Jk(f);o=Zk(m[w],E)}return o}function kE(e,n,i,a){n===void 0&&(n=[]),i===void 0&&(i=[]),a===void 0&&(a="");let u=(f,m,o)=>{let w={relativePath:o===void 0?f.path||"":o,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};w.relativePath.startsWith("/")&&(aa(w.relativePath.startsWith(a),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(a.length));let E=gf([a,w.relativePath]),I=i.concat(w);f.children&&f.children.length>0&&(aa(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),kE(f.children,n,I,E)),!(f.path==null&&!f.index)&&n.push({path:E,score:$k(E,f.index),routesMeta:I})};return e.forEach((f,m)=>{var o;if(f.path===""||!((o=f.path)!=null&&o.includes("?")))u(f,m);else for(let w of UE(f.path))u(f,m,w)}),n}function UE(e){let n=e.split("/");if(n.length===0)return[];let[i,...a]=n,u=i.endsWith("?"),f=i.replace(/\?$/,"");if(a.length===0)return u?[f,""]:[f];let m=UE(a.join("/")),o=[];return o.push(...m.map(w=>w===""?f:[f,w].join("/"))),u&&o.push(...m),o.map(w=>e.startsWith("/")&&w===""?"/":w)}function zk(e){e.sort((n,i)=>n.score!==i.score?i.score-n.score:Wk(n.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}const Hk=/^:[\w-]+$/,jk=3,Vk=2,Gk=1,Kk=10,qk=-2,x2=e=>e==="*";function $k(e,n){let i=e.split("/"),a=i.length;return i.some(x2)&&(a+=qk),n&&(a+=Vk),i.filter(u=>!x2(u)).reduce((u,f)=>u+(Hk.test(f)?jk:f===""?Gk:Kk),a)}function Wk(e,n){return e.length===n.length&&e.slice(0,-1).every((a,u)=>a===n[u])?e[e.length-1]-n[n.length-1]:0}function Zk(e,n,i){let{routesMeta:a}=e,u={},f="/",m=[];for(let o=0;o<a.length;++o){let w=a[o],E=o===a.length-1,I=f==="/"?n:n.slice(f.length)||"/",D=Xk({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},I),O=w.route;if(!D)return null;Object.assign(u,D.params),m.push({params:u,pathname:gf([f,D.pathname]),pathnameBase:iU(gf([f,D.pathnameBase])),route:O}),D.pathnameBase!=="/"&&(f=gf([f,D.pathnameBase]))}return m}function Xk(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=Yk(e.path,e.caseSensitive,e.end),u=n.match(i);if(!u)return null;let f=u[0],m=f.replace(/(.)\/+$/,"$1"),o=u.slice(1);return{params:a.reduce((E,I,D)=>{let{paramName:O,isOptional:P}=I;if(O==="*"){let H=o[D]||"";m=f.slice(0,f.length-H.length).replace(/(.)\/+$/,"$1")}const W=o[D];return P&&!W?E[O]=void 0:E[O]=(W||"").replace(/%2F/g,"/"),E},{}),pathname:f,pathnameBase:m,pattern:e}}function Yk(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=!0),Dw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,o,w)=>(a.push({paramName:o,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,n?void 0:"i"),a]}function Jk(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Dw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Rw(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}const eU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tU=e=>eU.test(e);function rU(e,n){n===void 0&&(n="/");let{pathname:i,search:a="",hash:u=""}=typeof e=="string"?Bp(e):e,f;if(i)if(tU(i))f=i;else{if(i.includes("//")){let m=i;i=i.replace(/\/\/+/g,"/"),Dw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(m+" -> "+i))}i.startsWith("/")?f=b2(i.substring(1),"/"):f=b2(i,n)}else f=n;return{pathname:f,search:sU(a),hash:oU(u)}}function b2(e,n){let i=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?i.length>1&&i.pop():u!=="."&&i.push(u)}),i.length>1?i.join("/"):"/"}function Yv(e,n,i,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nU(e){return e.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function DE(e,n){let i=nU(e);return n?i.map((a,u)=>u===i.length-1?a.pathname:a.pathnameBase):i.map(a=>a.pathnameBase)}function RE(e,n,i,a){a===void 0&&(a=!1);let u;typeof e=="string"?u=Bp(e):(u=Rm({},e),aa(!u.pathname||!u.pathname.includes("?"),Yv("?","pathname","search",u)),aa(!u.pathname||!u.pathname.includes("#"),Yv("#","pathname","hash",u)),aa(!u.search||!u.search.includes("#"),Yv("#","search","hash",u)));let f=e===""||u.pathname==="",m=f?"/":u.pathname,o;if(m==null)o=i;else{let D=n.length-1;if(!a&&m.startsWith("..")){let O=m.split("/");for(;O[0]==="..";)O.shift(),D-=1;u.pathname=O.join("/")}o=D>=0?n[D]:"/"}let w=rU(u,o),E=m&&m!=="/"&&m.endsWith("/"),I=(f||m===".")&&i.endsWith("/");return!w.pathname.endsWith("/")&&(E||I)&&(w.pathname+="/"),w}const gf=e=>e.join("/").replace(/\/\/+/g,"/"),iU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function aU(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const NE=["post","put","patch","delete"];new Set(NE);const lU=["get",...NE];new Set(lU);function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Nm.apply(this,arguments)}const Nw=te.createContext(null),cU=te.createContext(null),ad=te.createContext(null),Iy=te.createContext(null),ld=te.createContext({outlet:null,matches:[],isDataRoute:!1}),QE=te.createContext(null);function AU(e,n){let{relative:i}=n===void 0?{}:n;Zm()||aa(!1);let{basename:a,navigator:u}=te.useContext(ad),{hash:f,pathname:m,search:o}=zE(e,{relative:i}),w=m;return a!=="/"&&(w=m==="/"?a:gf([a,m])),u.createHref({pathname:w,search:o,hash:f})}function Zm(){return te.useContext(Iy)!=null}function Xm(){return Zm()||aa(!1),te.useContext(Iy).location}function OE(e){te.useContext(ad).static||te.useLayoutEffect(e)}function uU(){let{isDataRoute:e}=te.useContext(ld);return e?BU():hU()}function hU(){Zm()||aa(!1);let e=te.useContext(Nw),{basename:n,future:i,navigator:a}=te.useContext(ad),{matches:u}=te.useContext(ld),{pathname:f}=Xm(),m=JSON.stringify(DE(u,i.v7_relativeSplatPath)),o=te.useRef(!1);return OE(()=>{o.current=!0}),te.useCallback(function(E,I){if(I===void 0&&(I={}),!o.current)return;if(typeof E=="number"){a.go(E);return}let D=RE(E,JSON.parse(m),f,I.relative==="path");e==null&&n!=="/"&&(D.pathname=D.pathname==="/"?n:gf([n,D.pathname])),(I.replace?a.replace:a.push)(D,I.state,I)},[n,a,m,f,e])}function zE(e,n){let{relative:i}=n===void 0?{}:n,{future:a}=te.useContext(ad),{matches:u}=te.useContext(ld),{pathname:f}=Xm(),m=JSON.stringify(DE(u,a.v7_relativeSplatPath));return te.useMemo(()=>RE(e,JSON.parse(m),f,i==="path"),[e,m,f,i])}function fU(e,n){return dU(e,n)}function dU(e,n,i,a){Zm()||aa(!1);let{navigator:u}=te.useContext(ad),{matches:f}=te.useContext(ld),m=f[f.length-1],o=m?m.params:{};m&&m.pathname;let w=m?m.pathnameBase:"/";m&&m.route;let E=Xm(),I;if(n){var D;let z=typeof n=="string"?Bp(n):n;w==="/"||(D=z.pathname)!=null&&D.startsWith(w)||aa(!1),I=z}else I=E;let O=I.pathname||"/",P=O;if(w!=="/"){let z=w.replace(/^\//,"").split("/");P="/"+O.replace(/^\//,"").split("/").slice(z.length).join("/")}let W=Qk(e,{pathname:P}),H=vU(W&&W.map(z=>Object.assign({},z,{params:Object.assign({},o,z.params),pathname:gf([w,u.encodeLocation?u.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?w:gf([w,u.encodeLocation?u.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),f,i,a);return n&&H?te.createElement(Iy.Provider,{value:{location:Nm({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:hf.Pop}},H):H}function pU(){let e=bU(),n=aU(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},n),i?te.createElement("pre",{style:u},i):null,null)}const mU=te.createElement(pU,null);class gU extends te.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,i){return i.location!==n.location||i.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:i.error,location:i.location,revalidation:n.revalidation||i.revalidation}}componentDidCatch(n,i){console.error("React Router caught the following error during render",n,i)}render(){return this.state.error!==void 0?te.createElement(ld.Provider,{value:this.props.routeContext},te.createElement(QE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yU(e){let{routeContext:n,match:i,children:a}=e,u=te.useContext(Nw);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),te.createElement(ld.Provider,{value:n},a)}function vU(e,n,i,a){var u;if(n===void 0&&(n=[]),i===void 0&&(i=null),a===void 0&&(a=null),e==null){var f;if(!i)return null;if(i.errors)e=i.matches;else if((f=a)!=null&&f.v7_partialHydration&&n.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let m=e,o=(u=i)==null?void 0:u.errors;if(o!=null){let I=m.findIndex(D=>D.route.id&&o?.[D.route.id]!==void 0);I>=0||aa(!1),m=m.slice(0,Math.min(m.length,I+1))}let w=!1,E=-1;if(i&&a&&a.v7_partialHydration)for(let I=0;I<m.length;I++){let D=m[I];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(E=I),D.route.id){let{loaderData:O,errors:P}=i,W=D.route.loader&&O[D.route.id]===void 0&&(!P||P[D.route.id]===void 0);if(D.route.lazy||W){w=!0,E>=0?m=m.slice(0,E+1):m=[m[0]];break}}}return m.reduceRight((I,D,O)=>{let P,W=!1,H=null,z=null;i&&(P=o&&D.route.id?o[D.route.id]:void 0,H=D.route.errorElement||mU,w&&(E<0&&O===0?(CU("route-fallback"),W=!0,z=null):E===O&&(W=!0,z=D.route.hydrateFallbackElement||null)));let Z=n.concat(m.slice(0,O+1)),se=()=>{let ae;return P?ae=H:W?ae=z:D.route.Component?ae=te.createElement(D.route.Component,null):D.route.element?ae=D.route.element:ae=I,te.createElement(yU,{match:D,routeContext:{outlet:I,matches:Z,isDataRoute:i!=null},children:ae})};return i&&(D.route.ErrorBoundary||D.route.errorElement||O===0)?te.createElement(gU,{location:i.location,revalidation:i.revalidation,component:H,error:P,children:se(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):se()},null)}var HE=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(HE||{}),jE=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(jE||{});function _U(e){let n=te.useContext(Nw);return n||aa(!1),n}function wU(e){let n=te.useContext(cU);return n||aa(!1),n}function xU(e){let n=te.useContext(ld);return n||aa(!1),n}function VE(e){let n=xU(),i=n.matches[n.matches.length-1];return i.route.id||aa(!1),i.route.id}function bU(){var e;let n=te.useContext(QE),i=wU(),a=VE();return n!==void 0?n:(e=i.errors)==null?void 0:e[a]}function BU(){let{router:e}=_U(HE.UseNavigateStable),n=VE(jE.UseNavigateStable),i=te.useRef(!1);return OE(()=>{i.current=!0}),te.useCallback(function(u,f){f===void 0&&(f={}),i.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,Nm({fromRouteId:n},f)))},[e,n])}const B2={};function CU(e,n,i){B2[e]||(B2[e]=!0)}function EU(e,n){e?.v7_startTransition,e?.v7_relativeSplatPath}function w_(e){aa(!1)}function SU(e){let{basename:n="/",children:i=null,location:a,navigationType:u=hf.Pop,navigator:f,static:m=!1,future:o}=e;Zm()&&aa(!1);let w=n.replace(/^\/*/,"/"),E=te.useMemo(()=>({basename:w,navigator:f,static:m,future:Nm({v7_relativeSplatPath:!1},o)}),[w,o,f,m]);typeof a=="string"&&(a=Bp(a));let{pathname:I="/",search:D="",hash:O="",state:P=null,key:W="default"}=a,H=te.useMemo(()=>{let z=Rw(I,w);return z==null?null:{location:{pathname:z,search:D,hash:O,state:P,key:W},navigationType:u}},[w,I,D,O,P,W,u]);return H==null?null:te.createElement(ad.Provider,{value:E},te.createElement(Iy.Provider,{children:i,value:H}))}function FU(e){let{children:n,location:i}=e;return fU(x_(n),i)}new Promise(()=>{});function x_(e,n){n===void 0&&(n=[]);let i=[];return te.Children.forEach(e,(a,u)=>{if(!te.isValidElement(a))return;let f=[...n,u];if(a.type===te.Fragment){i.push.apply(i,x_(a.props.children,f));return}a.type!==w_&&aa(!1),!a.props.index||!a.props.children||aa(!1);let m={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(m.children=x_(a.props.children,f)),i.push(m)}),i}function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},b_.apply(this,arguments)}function IU(e,n){if(e==null)return{};var i={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(n.indexOf(u)>=0)&&(i[u]=e[u]);return i}function TU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PU(e,n){return e.button===0&&(!n||n==="_self")&&!TU(e)}const LU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MU="6";try{window.__reactRouterVersion=MU}catch{}const kU="startTransition",C2=dy[kU];function UU(e){let{basename:n,children:i,future:a,window:u}=e,f=te.useRef();f.current==null&&(f.current=Dk({window:u,v5Compat:!0}));let m=f.current,[o,w]=te.useState({action:m.action,location:m.location}),{v7_startTransition:E}=a||{},I=te.useCallback(D=>{E&&C2?C2(()=>w(D)):w(D)},[w,E]);return te.useLayoutEffect(()=>m.listen(I),[m,I]),te.useEffect(()=>EU(a),[a]),te.createElement(SU,{basename:n,children:i,location:o.location,navigationType:o.action,navigator:m,future:a})}const DU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NU=te.forwardRef(function(n,i){let{onClick:a,relative:u,reloadDocument:f,replace:m,state:o,target:w,to:E,preventScrollReset:I,viewTransition:D}=n,O=IU(n,LU),{basename:P}=te.useContext(ad),W,H=!1;if(typeof E=="string"&&RU.test(E)&&(W=E,DU))try{let ae=new URL(window.location.href),fe=E.startsWith("//")?new URL(ae.protocol+E):new URL(E),Fe=Rw(fe.pathname,P);fe.origin===ae.origin&&Fe!=null?E=Fe+fe.search+fe.hash:H=!0}catch{}let z=AU(E,{relative:u}),Z=QU(E,{replace:m,state:o,target:w,preventScrollReset:I,relative:u,viewTransition:D});function se(ae){a&&a(ae),ae.defaultPrevented||Z(ae)}return te.createElement("a",b_({},O,{href:W||z,onClick:H||f?a:se,ref:i,target:w}))});var E2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(E2||(E2={}));var S2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(S2||(S2={}));function QU(e,n){let{target:i,replace:a,state:u,preventScrollReset:f,relative:m,viewTransition:o}=n===void 0?{}:n,w=uU(),E=Xm(),I=zE(e,{relative:m});return te.useCallback(D=>{if(PU(D,i)){D.preventDefault();let O=a!==void 0?a:Z0(E)===Z0(I);w(e,{replace:O,state:u,preventScrollReset:f,relative:m,viewTransition:o})}},[E,w,I,a,u,i,e,f,m,o])}function OU(e){return new Worker("/Domapus/assets/data-processor-BM1X7qjO.js",{name:e?.name})}function zU(){const e=te.useRef(null),[n,i]=te.useState(!1),[a,u]=te.useState({phase:""}),f=te.useRef(new Map),m=te.useRef(!1);return console.log("[useDataWorker] Hook initialized"),te.useEffect(()=>{if(m.current)return;console.log("[useDataWorker] Creating worker instance");const w=new OU;return e.current=w,m.current=!0,w.onmessage=E=>{const{id:I,type:D,data:O,error:P}=E.data;switch(console.log("[useDataWorker] Received message from worker:",D,{id:I}),D){case"PROGRESS":console.log("[useDataWorker] Progress update:",O.phase),u(O);break;case"ERROR":{console.error("[useDataWorker] Worker error:",P),i(!1);const W=f.current.get(I);W&&(W.reject(new Error(P)),f.current.delete(I));break}default:{console.log(`[useDataWorker] ${D} completed for request ${I}`),i(!1);const W=f.current.get(I);W&&(W.resolve(O),f.current.delete(I));break}}},w.onerror=E=>{console.error("[useDataWorker] Unhandled worker error:",E),i(!1),f.current.forEach(I=>I.reject(E)),f.current.clear()},()=>{console.log("[useDataWorker] Terminating worker"),e.current&&(e.current.terminate(),e.current=null),m.current=!1}},[]),{processData:te.useCallback(w=>{const E=e.current;return!E||!m.current?(console.error("[useDataWorker] Worker not available"),Promise.reject(new Error("Worker is not initialized"))):new Promise((I,D)=>{const O=`${Date.now()}-${Math.random()}`;console.log(`[useDataWorker] Sending message to worker: ${w.type}, request ID: ${O}`),f.current.set(O,{resolve:I,reject:D}),i(!0),E.postMessage({id:O,...w})})},[]),isLoading:n,progress:a}}var HU=Symbol.for("react.lazy"),X0=dy[" use ".trim().toString()];function jU(e){return typeof e=="object"&&e!==null&&"then"in e}function GE(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===HU&&"_payload"in e&&jU(e._payload)}function KE(e){const n=GU(e),i=te.forwardRef((a,u)=>{let{children:f,...m}=a;GE(f)&&typeof X0=="function"&&(f=X0(f._payload));const o=te.Children.toArray(f),w=o.find(qU);if(w){const E=w.props.children,I=o.map(D=>D===w?te.Children.count(E)>1?te.Children.only(null):te.isValidElement(E)?E.props.children:null:D);return ce.jsx(n,{...m,ref:u,children:te.isValidElement(E)?te.cloneElement(E,void 0,I):null})}return ce.jsx(n,{...m,ref:u,children:f})});return i.displayName=`${e}.Slot`,i}var VU=KE("Slot");function GU(e){const n=te.forwardRef((i,a)=>{let{children:u,...f}=i;if(GE(u)&&typeof X0=="function"&&(u=X0(u._payload)),te.isValidElement(u)){const m=WU(u),o=$U(f,u.props);return u.type!==te.Fragment&&(o.ref=a?Gm(a,m):m),te.cloneElement(u,o)}return te.Children.count(u)>1?te.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var KU=Symbol("radix.slottable");function qU(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===KU}function $U(e,n){const i={...n};for(const a in n){const u=e[a],f=n[a];/^on[A-Z]/.test(a)?u&&f?i[a]=(...o)=>{const w=f(...o);return u(...o),w}:u&&(i[a]=u):a==="style"?i[a]={...u,...f}:a==="className"&&(i[a]=[u,f].filter(Boolean).join(" "))}return{...e,...i}}function WU(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}const ZU=yy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Cc=te.forwardRef(({className:e,variant:n,size:i,asChild:a=!1,...u},f)=>{const m=a?VU:"button";return ce.jsx(m,{className:Li(ZU({variant:n,size:i,className:e})),ref:f,...u})});Cc.displayName="Button";var XU=te.createContext(void 0);function Qw(e){const n=te.useContext(XU);return e||n||"ltr"}var Jv="rovingFocusGroup.onEntryFocus",YU={bubbles:!1,cancelable:!0},Ym="RovingFocusGroup",[B_,qE,JU]=gw(Ym),[eD,$E]=Hh(Ym,[JU]),[tD,rD]=eD(Ym),WE=te.forwardRef((e,n)=>ce.jsx(B_.Provider,{scope:e.__scopeRovingFocusGroup,children:ce.jsx(B_.Slot,{scope:e.__scopeRovingFocusGroup,children:ce.jsx(nD,{...e,ref:n})})}));WE.displayName=Ym;var nD=te.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:i,orientation:a,loop:u=!1,dir:f,currentTabStopId:m,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:w,onEntryFocus:E,preventScrollOnEntryFocus:I=!1,...D}=e,O=te.useRef(null),P=fs(n,O),W=Qw(f),[H,z]=mp({prop:m,defaultProp:o??null,onChange:w,caller:Ym}),[Z,se]=te.useState(!1),ae=iu(E),fe=qE(i),Fe=te.useRef(!1),[He,Ve]=te.useState(0);return te.useEffect(()=>{const Oe=O.current;if(Oe)return Oe.addEventListener(Jv,ae),()=>Oe.removeEventListener(Jv,ae)},[ae]),ce.jsx(tD,{scope:i,orientation:a,dir:W,loop:u,currentTabStopId:H,onItemFocus:te.useCallback(Oe=>z(Oe),[z]),onItemShiftTab:te.useCallback(()=>se(!0),[]),onFocusableItemAdd:te.useCallback(()=>Ve(Oe=>Oe+1),[]),onFocusableItemRemove:te.useCallback(()=>Ve(Oe=>Oe-1),[]),children:ce.jsx(oi.div,{tabIndex:Z||He===0?-1:0,"data-orientation":a,...D,ref:P,style:{outline:"none",...e.style},onMouseDown:Un(e.onMouseDown,()=>{Fe.current=!0}),onFocus:Un(e.onFocus,Oe=>{const be=!Fe.current;if(Oe.target===Oe.currentTarget&&be&&!Z){const rt=new CustomEvent(Jv,YU);if(Oe.currentTarget.dispatchEvent(rt),!rt.defaultPrevented){const ue=fe().filter(lt=>lt.focusable),me=ue.find(lt=>lt.active),Ue=ue.find(lt=>lt.id===H),pt=[me,Ue,...ue].filter(Boolean).map(lt=>lt.ref.current);YE(pt,I)}}Fe.current=!1}),onBlur:Un(e.onBlur,()=>se(!1))})})}),ZE="RovingFocusGroupItem",XE=te.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:i,focusable:a=!0,active:u=!1,tabStopId:f,children:m,...o}=e,w=vy(),E=f||w,I=rD(ZE,i),D=I.currentTabStopId===E,O=qE(i),{onFocusableItemAdd:P,onFocusableItemRemove:W,currentTabStopId:H}=I;return te.useEffect(()=>{if(a)return P(),()=>W()},[a,P,W]),ce.jsx(B_.ItemSlot,{scope:i,id:E,focusable:a,active:u,children:ce.jsx(oi.span,{tabIndex:D?0:-1,"data-orientation":I.orientation,...o,ref:n,onMouseDown:Un(e.onMouseDown,z=>{a?I.onItemFocus(E):z.preventDefault()}),onFocus:Un(e.onFocus,()=>I.onItemFocus(E)),onKeyDown:Un(e.onKeyDown,z=>{if(z.key==="Tab"&&z.shiftKey){I.onItemShiftTab();return}if(z.target!==z.currentTarget)return;const Z=oD(z,I.orientation,I.dir);if(Z!==void 0){if(z.metaKey||z.ctrlKey||z.altKey||z.shiftKey)return;z.preventDefault();let ae=O().filter(fe=>fe.focusable).map(fe=>fe.ref.current);if(Z==="last")ae.reverse();else if(Z==="prev"||Z==="next"){Z==="prev"&&ae.reverse();const fe=ae.indexOf(z.currentTarget);ae=I.loop?aD(ae,fe+1):ae.slice(fe+1)}setTimeout(()=>YE(ae))}}),children:typeof m=="function"?m({isCurrentTabStop:D,hasTabStop:H!=null}):m})})});XE.displayName=ZE;var iD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sD(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oD(e,n,i){const a=sD(e.key,i);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return iD[a]}function YE(e,n=!1){const i=document.activeElement;for(const a of e)if(a===i||(a.focus({preventScroll:n}),document.activeElement!==i))return}function aD(e,n){return e.map((i,a)=>e[(n+a)%e.length])}var lD=WE,cD=XE;function Ow(e){const n=te.useRef({value:e,previous:e});return te.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}var zw="Radio",[AD,JE]=Hh(zw),[uD,hD]=AD(zw),eS=te.forwardRef((e,n)=>{const{__scopeRadio:i,name:a,checked:u=!1,required:f,disabled:m,value:o="on",onCheck:w,form:E,...I}=e,[D,O]=te.useState(null),P=fs(n,z=>O(z)),W=te.useRef(!1),H=D?E||!!D.closest("form"):!0;return ce.jsxs(uD,{scope:i,checked:u,disabled:m,children:[ce.jsx(oi.button,{type:"button",role:"radio","aria-checked":u,"data-state":iS(u),"data-disabled":m?"":void 0,disabled:m,value:o,...I,ref:P,onClick:Un(e.onClick,z=>{u||w?.(),H&&(W.current=z.isPropagationStopped(),W.current||z.stopPropagation())})}),H&&ce.jsx(nS,{control:D,bubbles:!W.current,name:a,value:o,checked:u,required:f,disabled:m,form:E,style:{transform:"translateX(-100%)"}})]})});eS.displayName=zw;var tS="RadioIndicator",rS=te.forwardRef((e,n)=>{const{__scopeRadio:i,forceMount:a,...u}=e,f=hD(tS,i);return ce.jsx(Km,{present:a||f.checked,children:ce.jsx(oi.span,{"data-state":iS(f.checked),"data-disabled":f.disabled?"":void 0,...u,ref:n})})});rS.displayName=tS;var fD="RadioBubbleInput",nS=te.forwardRef(({__scopeRadio:e,control:n,checked:i,bubbles:a=!0,...u},f)=>{const m=te.useRef(null),o=fs(m,f),w=Ow(i),E=Tw(n);return te.useEffect(()=>{const I=m.current;if(!I)return;const D=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(D,"checked").set;if(w!==i&&P){const W=new Event("click",{bubbles:a});P.call(I,i),I.dispatchEvent(W)}},[w,i,a]),ce.jsx(oi.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...u,tabIndex:-1,ref:o,style:{...u.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nS.displayName=fD;function iS(e){return e?"checked":"unchecked"}var dD=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ty="RadioGroup",[pD]=Hh(Ty,[$E,JE]),sS=$E(),oS=JE(),[mD,gD]=pD(Ty),aS=te.forwardRef((e,n)=>{const{__scopeRadioGroup:i,name:a,defaultValue:u,value:f,required:m=!1,disabled:o=!1,orientation:w,dir:E,loop:I=!0,onValueChange:D,...O}=e,P=sS(i),W=Qw(E),[H,z]=mp({prop:f,defaultProp:u??null,onChange:D,caller:Ty});return ce.jsx(mD,{scope:i,name:a,required:m,disabled:o,value:H,onValueChange:z,children:ce.jsx(lD,{asChild:!0,...P,orientation:w,dir:W,loop:I,children:ce.jsx(oi.div,{role:"radiogroup","aria-required":m,"aria-orientation":w,"data-disabled":o?"":void 0,dir:W,...O,ref:n})})})});aS.displayName=Ty;var lS="RadioGroupItem",cS=te.forwardRef((e,n)=>{const{__scopeRadioGroup:i,disabled:a,...u}=e,f=gD(lS,i),m=f.disabled||a,o=sS(i),w=oS(i),E=te.useRef(null),I=fs(n,E),D=f.value===u.value,O=te.useRef(!1);return te.useEffect(()=>{const P=H=>{dD.includes(H.key)&&(O.current=!0)},W=()=>O.current=!1;return document.addEventListener("keydown",P),document.addEventListener("keyup",W),()=>{document.removeEventListener("keydown",P),document.removeEventListener("keyup",W)}},[]),ce.jsx(cD,{asChild:!0,...o,focusable:!m,active:D,children:ce.jsx(eS,{disabled:m,required:f.required,checked:D,...w,...u,name:f.name,ref:I,onCheck:()=>f.onValueChange(u.value),onKeyDown:Un(P=>{P.key==="Enter"&&P.preventDefault()}),onFocus:Un(u.onFocus,()=>{O.current&&E.current?.click()})})})});cS.displayName=lS;var yD="RadioGroupIndicator",AS=te.forwardRef((e,n)=>{const{__scopeRadioGroup:i,...a}=e,u=oS(i);return ce.jsx(rS,{...u,...a,ref:n})});AS.displayName=yD;var uS=aS,hS=cS,vD=AS;const C_=te.forwardRef(({className:e,...n},i)=>ce.jsx(uS,{className:Li("grid gap-2",e),...n,ref:i}));C_.displayName=uS.displayName;const Yd=te.forwardRef(({className:e,...n},i)=>ce.jsx(hS,{ref:i,className:Li("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:ce.jsx(vD,{className:"flex items-center justify-center",children:ce.jsx(eP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Yd.displayName=hS.displayName;var _D=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wD=_D.reduce((e,n)=>{const i=KE(`Primitive.${n}`),a=te.forwardRef((u,f)=>{const{asChild:m,...o}=u,w=m?i:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ce.jsx(w,{...o,ref:f})});return a.displayName=`Primitive.${n}`,{...e,[n]:a}},{}),xD="Label",fS=te.forwardRef((e,n)=>ce.jsx(wD.label,{...e,ref:n,onMouseDown:i=>{i.target.closest("button, input, select, textarea")||(e.onMouseDown?.(i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));fS.displayName=xD;var dS=fS;const bD=yy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),af=te.forwardRef(({className:e,...n},i)=>ce.jsx(dS,{ref:i,className:Li(bD(),e),...n}));af.displayName=dS.displayName;function F2(e,[n,i]){return Math.min(i,Math.max(n,e))}var e1=0;function BD(){te.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??I2()),document.body.insertAdjacentElement("beforeend",e[1]??I2()),e1++,()=>{e1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),e1--}},[])}function I2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var t1="focusScope.autoFocusOnMount",r1="focusScope.autoFocusOnUnmount",T2={bubbles:!1,cancelable:!0},CD="FocusScope",pS=te.forwardRef((e,n)=>{const{loop:i=!1,trapped:a=!1,onMountAutoFocus:u,onUnmountAutoFocus:f,...m}=e,[o,w]=te.useState(null),E=iu(u),I=iu(f),D=te.useRef(null),O=fs(n,H=>w(H)),P=te.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;te.useEffect(()=>{if(a){let H=function(ae){if(P.paused||!o)return;const fe=ae.target;o.contains(fe)?D.current=fe:lf(D.current,{select:!0})},z=function(ae){if(P.paused||!o)return;const fe=ae.relatedTarget;fe!==null&&(o.contains(fe)||lf(D.current,{select:!0}))},Z=function(ae){if(document.activeElement===document.body)for(const Fe of ae)Fe.removedNodes.length>0&&lf(o)};document.addEventListener("focusin",H),document.addEventListener("focusout",z);const se=new MutationObserver(Z);return o&&se.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",H),document.removeEventListener("focusout",z),se.disconnect()}}},[a,o,P.paused]),te.useEffect(()=>{if(o){L2.add(P);const H=document.activeElement;if(!o.contains(H)){const Z=new CustomEvent(t1,T2);o.addEventListener(t1,E),o.dispatchEvent(Z),Z.defaultPrevented||(ED(PD(mS(o)),{select:!0}),document.activeElement===H&&lf(o))}return()=>{o.removeEventListener(t1,E),setTimeout(()=>{const Z=new CustomEvent(r1,T2);o.addEventListener(r1,I),o.dispatchEvent(Z),Z.defaultPrevented||lf(H??document.body,{select:!0}),o.removeEventListener(r1,I),L2.remove(P)},0)}}},[o,E,I,P]);const W=te.useCallback(H=>{if(!i&&!a||P.paused)return;const z=H.key==="Tab"&&!H.altKey&&!H.ctrlKey&&!H.metaKey,Z=document.activeElement;if(z&&Z){const se=H.currentTarget,[ae,fe]=SD(se);ae&&fe?!H.shiftKey&&Z===fe?(H.preventDefault(),i&&lf(ae,{select:!0})):H.shiftKey&&Z===ae&&(H.preventDefault(),i&&lf(fe,{select:!0})):Z===se&&H.preventDefault()}},[i,a,P.paused]);return ce.jsx(oi.div,{tabIndex:-1,...m,ref:O,onKeyDown:W})});pS.displayName=CD;function ED(e,{select:n=!1}={}){const i=document.activeElement;for(const a of e)if(lf(a,{select:n}),document.activeElement!==i)return}function SD(e){const n=mS(e),i=P2(n,e),a=P2(n.reverse(),e);return[i,a]}function mS(e){const n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const u=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||u?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function P2(e,n){for(const i of e)if(!FD(i,{upTo:n}))return i}function FD(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ID(e){return e instanceof HTMLInputElement&&"select"in e}function lf(e,{select:n=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&ID(e)&&n&&e.select()}}var L2=TD();function TD(){let e=[];return{add(n){const i=e[0];n!==i&&i?.pause(),e=M2(e,n),e.unshift(n)},remove(n){e=M2(e,n),e[0]?.resume()}}}function M2(e,n){const i=[...e],a=i.indexOf(n);return a!==-1&&i.splice(a,1),i}function PD(e){return e.filter(n=>n.tagName!=="A")}function LD(e){const n=MD(e),i=te.forwardRef((a,u)=>{const{children:f,...m}=a,o=te.Children.toArray(f),w=o.find(UD);if(w){const E=w.props.children,I=o.map(D=>D===w?te.Children.count(E)>1?te.Children.only(null):te.isValidElement(E)?E.props.children:null:D);return ce.jsx(n,{...m,ref:u,children:te.isValidElement(E)?te.cloneElement(E,void 0,I):null})}return ce.jsx(n,{...m,ref:u,children:f})});return i.displayName=`${e}.Slot`,i}function MD(e){const n=te.forwardRef((i,a)=>{const{children:u,...f}=i;if(te.isValidElement(u)){const m=RD(u),o=DD(f,u.props);return u.type!==te.Fragment&&(o.ref=a?Gm(a,m):m),te.cloneElement(u,o)}return te.Children.count(u)>1?te.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var kD=Symbol("radix.slottable");function UD(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===kD}function DD(e,n){const i={...n};for(const a in n){const u=e[a],f=n[a];/^on[A-Z]/.test(a)?u&&f?i[a]=(...o)=>{const w=f(...o);return u(...o),w}:u&&(i[a]=u):a==="style"?i[a]={...u,...f}:a==="className"&&(i[a]=[u,f].filter(Boolean).join(" "))}return{...e,...i}}function RD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var ND=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Qd=new WeakMap,Gg=new WeakMap,Kg={},n1=0,gS=function(e){return e&&(e.host||gS(e.parentNode))},QD=function(e,n){return n.map(function(i){if(e.contains(i))return i;var a=gS(i);return a&&e.contains(a)?a:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},OD=function(e,n,i,a){var u=QD(n,Array.isArray(e)?e:[e]);Kg[i]||(Kg[i]=new WeakMap);var f=Kg[i],m=[],o=new Set,w=new Set(u),E=function(D){!D||o.has(D)||(o.add(D),E(D.parentNode))};u.forEach(E);var I=function(D){!D||w.has(D)||Array.prototype.forEach.call(D.children,function(O){if(o.has(O))I(O);else try{var P=O.getAttribute(a),W=P!==null&&P!=="false",H=(Qd.get(O)||0)+1,z=(f.get(O)||0)+1;Qd.set(O,H),f.set(O,z),m.push(O),H===1&&W&&Gg.set(O,!0),z===1&&O.setAttribute(i,"true"),W||O.setAttribute(a,"true")}catch(Z){console.error("aria-hidden: cannot operate on ",O,Z)}})};return I(n),o.clear(),n1++,function(){m.forEach(function(D){var O=Qd.get(D)-1,P=f.get(D)-1;Qd.set(D,O),f.set(D,P),O||(Gg.has(D)||D.removeAttribute(a),Gg.delete(D)),P||D.removeAttribute(i)}),n1--,n1||(Qd=new WeakMap,Qd=new WeakMap,Gg=new WeakMap,Kg={})}},zD=function(e,n,i){i===void 0&&(i="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),u=ND(e);return u?(a.push.apply(a,Array.from(u.querySelectorAll("[aria-live], script"))),OD(a,u,i,"aria-hidden")):function(){return null}},Ju=function(){return Ju=Object.assign||function(n){for(var i,a=1,u=arguments.length;a<u;a++){i=arguments[a];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(n[f]=i[f])}return n},Ju.apply(this,arguments)};function yS(e,n){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(e);u<a.length;u++)n.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(e,a[u])&&(i[a[u]]=e[a[u]]);return i}function HD(e,n,i){if(i||arguments.length===2)for(var a=0,u=n.length,f;a<u;a++)(f||!(a in n))&&(f||(f=Array.prototype.slice.call(n,0,a)),f[a]=n[a]);return e.concat(f||Array.prototype.slice.call(n))}var L0="right-scroll-bar-position",M0="width-before-scroll-bar",jD="with-scroll-bars-hidden",VD="--removed-body-scroll-bar-size";function i1(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function GD(e,n){var i=te.useState(function(){return{value:e,callback:n,facade:{get current(){return i.value},set current(a){var u=i.value;u!==a&&(i.value=a,i.callback(a,u))}}}})[0];return i.callback=n,i.facade}var KD=typeof window<"u"?te.useLayoutEffect:te.useEffect,k2=new WeakMap;function qD(e,n){var i=GD(null,function(a){return e.forEach(function(u){return i1(u,a)})});return KD(function(){var a=k2.get(i);if(a){var u=new Set(a),f=new Set(e),m=i.current;u.forEach(function(o){f.has(o)||i1(o,null)}),f.forEach(function(o){u.has(o)||i1(o,m)})}k2.set(i,e)},[e]),i}function $D(e){return e}function WD(e,n){n===void 0&&(n=$D);var i=[],a=!1,u={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(f){var m=n(f,a);return i.push(m),function(){i=i.filter(function(o){return o!==m})}},assignSyncMedium:function(f){for(a=!0;i.length;){var m=i;i=[],m.forEach(f)}i={push:function(o){return f(o)},filter:function(){return i}}},assignMedium:function(f){a=!0;var m=[];if(i.length){var o=i;i=[],o.forEach(f),m=i}var w=function(){var I=m;m=[],I.forEach(f)},E=function(){return Promise.resolve().then(w)};E(),i={push:function(I){m.push(I),E()},filter:function(I){return m=m.filter(I),i}}}};return u}function ZD(e){e===void 0&&(e={});var n=WD(null);return n.options=Ju({async:!0,ssr:!1},e),n}var vS=function(e){var n=e.sideCar,i=yS(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=n.read();if(!a)throw new Error("Sidecar medium not found");return te.createElement(a,Ju({},i))};vS.isSideCarExport=!0;function XD(e,n){return e.useMedium(n),vS}var _S=ZD(),s1=function(){},Py=te.forwardRef(function(e,n){var i=te.useRef(null),a=te.useState({onScrollCapture:s1,onWheelCapture:s1,onTouchMoveCapture:s1}),u=a[0],f=a[1],m=e.forwardProps,o=e.children,w=e.className,E=e.removeScrollBar,I=e.enabled,D=e.shards,O=e.sideCar,P=e.noRelative,W=e.noIsolation,H=e.inert,z=e.allowPinchZoom,Z=e.as,se=Z===void 0?"div":Z,ae=e.gapMode,fe=yS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Fe=O,He=qD([i,n]),Ve=Ju(Ju({},fe),u);return te.createElement(te.Fragment,null,I&&te.createElement(Fe,{sideCar:_S,removeScrollBar:E,shards:D,noRelative:P,noIsolation:W,inert:H,setCallbacks:f,allowPinchZoom:!!z,lockRef:i,gapMode:ae}),m?te.cloneElement(te.Children.only(o),Ju(Ju({},Ve),{ref:He})):te.createElement(se,Ju({},Ve,{className:w,ref:He}),o))});Py.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Py.classNames={fullWidth:M0,zeroRight:L0};var YD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=YD();return n&&e.setAttribute("nonce",n),e}function eR(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function tR(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var rR=function(){var e=0,n=null;return{add:function(i){e==0&&(n=JD())&&(eR(n,i),tR(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},nR=function(){var e=rR();return function(n,i){te.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&i])}},wS=function(){var e=nR(),n=function(i){var a=i.styles,u=i.dynamic;return e(a,u),null};return n},iR={left:0,top:0,right:0,gap:0},o1=function(e){return parseInt(e||"",10)||0},sR=function(e){var n=window.getComputedStyle(document.body),i=n[e==="padding"?"paddingLeft":"marginLeft"],a=n[e==="padding"?"paddingTop":"marginTop"],u=n[e==="padding"?"paddingRight":"marginRight"];return[o1(i),o1(a),o1(u)]},oR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return iR;var n=sR(e),i=document.documentElement.clientWidth,a=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,a-i+n[2]-n[0])}},aR=wS(),Ap="data-scroll-locked",lR=function(e,n,i,a){var u=e.left,f=e.top,m=e.right,o=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(jD,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(o,"px ").concat(a,`;
  }
  body[`).concat(Ap,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(a,";"),i==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(f,`px;
    padding-right: `).concat(m,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(a,`;
    `),i==="padding"&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(L0,` {
    right: `).concat(o,"px ").concat(a,`;
  }
  
  .`).concat(M0,` {
    margin-right: `).concat(o,"px ").concat(a,`;
  }
  
  .`).concat(L0," .").concat(L0,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(M0," .").concat(M0,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Ap,`] {
    `).concat(VD,": ").concat(o,`px;
  }
`)},U2=function(){var e=parseInt(document.body.getAttribute(Ap)||"0",10);return isFinite(e)?e:0},cR=function(){te.useEffect(function(){return document.body.setAttribute(Ap,(U2()+1).toString()),function(){var e=U2()-1;e<=0?document.body.removeAttribute(Ap):document.body.setAttribute(Ap,e.toString())}},[])},AR=function(e){var n=e.noRelative,i=e.noImportant,a=e.gapMode,u=a===void 0?"margin":a;cR();var f=te.useMemo(function(){return oR(u)},[u]);return te.createElement(aR,{styles:lR(f,!n,u,i?"":"!important")})},E_=!1;if(typeof window<"u")try{var qg=Object.defineProperty({},"passive",{get:function(){return E_=!0,!0}});window.addEventListener("test",qg,qg),window.removeEventListener("test",qg,qg)}catch{E_=!1}var Od=E_?{passive:!1}:!1,uR=function(e){return e.tagName==="TEXTAREA"},xS=function(e,n){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[n]!=="hidden"&&!(i.overflowY===i.overflowX&&!uR(e)&&i[n]==="visible")},hR=function(e){return xS(e,"overflowY")},fR=function(e){return xS(e,"overflowX")},D2=function(e,n){var i=n.ownerDocument,a=n;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var u=bS(e,a);if(u){var f=BS(e,a),m=f[1],o=f[2];if(m>o)return!0}a=a.parentNode}while(a&&a!==i.body);return!1},dR=function(e){var n=e.scrollTop,i=e.scrollHeight,a=e.clientHeight;return[n,i,a]},pR=function(e){var n=e.scrollLeft,i=e.scrollWidth,a=e.clientWidth;return[n,i,a]},bS=function(e,n){return e==="v"?hR(n):fR(n)},BS=function(e,n){return e==="v"?dR(n):pR(n)},mR=function(e,n){return e==="h"&&n==="rtl"?-1:1},gR=function(e,n,i,a,u){var f=mR(e,window.getComputedStyle(n).direction),m=f*a,o=i.target,w=n.contains(o),E=!1,I=m>0,D=0,O=0;do{if(!o)break;var P=BS(e,o),W=P[0],H=P[1],z=P[2],Z=H-z-f*W;(W||Z)&&bS(e,o)&&(D+=Z,O+=W);var se=o.parentNode;o=se&&se.nodeType===Node.DOCUMENT_FRAGMENT_NODE?se.host:se}while(!w&&o!==document.body||w&&(n.contains(o)||n===o));return(I&&Math.abs(D)<1||!I&&Math.abs(O)<1)&&(E=!0),E},$g=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},R2=function(e){return[e.deltaX,e.deltaY]},N2=function(e){return e&&"current"in e?e.current:e},yR=function(e,n){return e[0]===n[0]&&e[1]===n[1]},vR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_R=0,zd=[];function wR(e){var n=te.useRef([]),i=te.useRef([0,0]),a=te.useRef(),u=te.useState(_R++)[0],f=te.useState(wS)[0],m=te.useRef(e);te.useEffect(function(){m.current=e},[e]),te.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(u));var H=HD([e.lockRef.current],(e.shards||[]).map(N2),!0).filter(Boolean);return H.forEach(function(z){return z.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),H.forEach(function(z){return z.classList.remove("allow-interactivity-".concat(u))})}}},[e.inert,e.lockRef.current,e.shards]);var o=te.useCallback(function(H,z){if("touches"in H&&H.touches.length===2||H.type==="wheel"&&H.ctrlKey)return!m.current.allowPinchZoom;var Z=$g(H),se=i.current,ae="deltaX"in H?H.deltaX:se[0]-Z[0],fe="deltaY"in H?H.deltaY:se[1]-Z[1],Fe,He=H.target,Ve=Math.abs(ae)>Math.abs(fe)?"h":"v";if("touches"in H&&Ve==="h"&&He.type==="range")return!1;var Oe=window.getSelection(),be=Oe&&Oe.anchorNode,rt=be?be===He||be.contains(He):!1;if(rt)return!1;var ue=D2(Ve,He);if(!ue)return!0;if(ue?Fe=Ve:(Fe=Ve==="v"?"h":"v",ue=D2(Ve,He)),!ue)return!1;if(!a.current&&"changedTouches"in H&&(ae||fe)&&(a.current=Fe),!Fe)return!0;var me=a.current||Fe;return gR(me,z,H,me==="h"?ae:fe)},[]),w=te.useCallback(function(H){var z=H;if(!(!zd.length||zd[zd.length-1]!==f)){var Z="deltaY"in z?R2(z):$g(z),se=n.current.filter(function(Fe){return Fe.name===z.type&&(Fe.target===z.target||z.target===Fe.shadowParent)&&yR(Fe.delta,Z)})[0];if(se&&se.should){z.cancelable&&z.preventDefault();return}if(!se){var ae=(m.current.shards||[]).map(N2).filter(Boolean).filter(function(Fe){return Fe.contains(z.target)}),fe=ae.length>0?o(z,ae[0]):!m.current.noIsolation;fe&&z.cancelable&&z.preventDefault()}}},[]),E=te.useCallback(function(H,z,Z,se){var ae={name:H,delta:z,target:Z,should:se,shadowParent:xR(Z)};n.current.push(ae),setTimeout(function(){n.current=n.current.filter(function(fe){return fe!==ae})},1)},[]),I=te.useCallback(function(H){i.current=$g(H),a.current=void 0},[]),D=te.useCallback(function(H){E(H.type,R2(H),H.target,o(H,e.lockRef.current))},[]),O=te.useCallback(function(H){E(H.type,$g(H),H.target,o(H,e.lockRef.current))},[]);te.useEffect(function(){return zd.push(f),e.setCallbacks({onScrollCapture:D,onWheelCapture:D,onTouchMoveCapture:O}),document.addEventListener("wheel",w,Od),document.addEventListener("touchmove",w,Od),document.addEventListener("touchstart",I,Od),function(){zd=zd.filter(function(H){return H!==f}),document.removeEventListener("wheel",w,Od),document.removeEventListener("touchmove",w,Od),document.removeEventListener("touchstart",I,Od)}},[]);var P=e.removeScrollBar,W=e.inert;return te.createElement(te.Fragment,null,W?te.createElement(f,{styles:vR(u)}):null,P?te.createElement(AR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function xR(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const bR=XD(_S,wR);var CS=te.forwardRef(function(e,n){return te.createElement(Py,Ju({},e,{ref:n,sideCar:bR}))});CS.classNames=Py.classNames;var BR=[" ","Enter","ArrowUp","ArrowDown"],CR=[" ","Enter"],id="Select",[Ly,My,ER]=gw(id),[Cp]=Hh(id,[ER,By]),ky=By(),[SR,Ef]=Cp(id),[FR,IR]=Cp(id),ES=e=>{const{__scopeSelect:n,children:i,open:a,defaultOpen:u,onOpenChange:f,value:m,defaultValue:o,onValueChange:w,dir:E,name:I,autoComplete:D,disabled:O,required:P,form:W}=e,H=ky(n),[z,Z]=te.useState(null),[se,ae]=te.useState(null),[fe,Fe]=te.useState(!1),He=Qw(E),[Ve,Oe]=mp({prop:a,defaultProp:u??!1,onChange:f,caller:id}),[be,rt]=mp({prop:m,defaultProp:o,onChange:w,caller:id}),ue=te.useRef(null),me=z?W||!!z.closest("form"):!0,[Ue,Ie]=te.useState(new Set),pt=Array.from(Ue).map(lt=>lt.props.value).join(";");return ce.jsx(OM,{...H,children:ce.jsxs(SR,{required:P,scope:n,trigger:z,onTriggerChange:Z,valueNode:se,onValueNodeChange:ae,valueNodeHasChildren:fe,onValueNodeHasChildrenChange:Fe,contentId:vy(),value:be,onValueChange:rt,open:Ve,onOpenChange:Oe,dir:He,triggerPointerDownPosRef:ue,disabled:O,children:[ce.jsx(Ly.Provider,{scope:n,children:ce.jsx(FR,{scope:e.__scopeSelect,onNativeOptionAdd:te.useCallback(lt=>{Ie(ot=>new Set(ot).add(lt))},[]),onNativeOptionRemove:te.useCallback(lt=>{Ie(ot=>{const Ne=new Set(ot);return Ne.delete(lt),Ne})},[]),children:i})}),me?ce.jsxs(ZS,{"aria-hidden":!0,required:P,tabIndex:-1,name:I,autoComplete:D,value:be,onChange:lt=>rt(lt.target.value),disabled:O,form:W,children:[be===void 0?ce.jsx("option",{value:""}):null,Array.from(Ue)]},pt):null]})})};ES.displayName=id;var SS="SelectTrigger",FS=te.forwardRef((e,n)=>{const{__scopeSelect:i,disabled:a=!1,...u}=e,f=ky(i),m=Ef(SS,i),o=m.disabled||a,w=fs(n,m.onTriggerChange),E=My(i),I=te.useRef("touch"),[D,O,P]=YS(H=>{const z=E().filter(ae=>!ae.disabled),Z=z.find(ae=>ae.value===m.value),se=JS(z,H,Z);se!==void 0&&m.onValueChange(se.value)}),W=H=>{o||(m.onOpenChange(!0),P()),H&&(m.triggerPointerDownPosRef.current={x:Math.round(H.pageX),y:Math.round(H.pageY)})};return ce.jsx(gE,{asChild:!0,...f,children:ce.jsx(oi.button,{type:"button",role:"combobox","aria-controls":m.contentId,"aria-expanded":m.open,"aria-required":m.required,"aria-autocomplete":"none",dir:m.dir,"data-state":m.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":XS(m.value)?"":void 0,...u,ref:w,onClick:Un(u.onClick,H=>{H.currentTarget.focus(),I.current!=="mouse"&&W(H)}),onPointerDown:Un(u.onPointerDown,H=>{I.current=H.pointerType;const z=H.target;z.hasPointerCapture(H.pointerId)&&z.releasePointerCapture(H.pointerId),H.button===0&&H.ctrlKey===!1&&H.pointerType==="mouse"&&(W(H),H.preventDefault())}),onKeyDown:Un(u.onKeyDown,H=>{const z=D.current!=="";!(H.ctrlKey||H.altKey||H.metaKey)&&H.key.length===1&&O(H.key),!(z&&H.key===" ")&&BR.includes(H.key)&&(W(),H.preventDefault())})})})});FS.displayName=SS;var IS="SelectValue",TS=te.forwardRef((e,n)=>{const{__scopeSelect:i,className:a,style:u,children:f,placeholder:m="",...o}=e,w=Ef(IS,i),{onValueNodeHasChildrenChange:E}=w,I=f!==void 0,D=fs(n,w.onValueNodeChange);return Cl(()=>{E(I)},[E,I]),ce.jsx(oi.span,{...o,ref:D,style:{pointerEvents:"none"},children:XS(w.value)?ce.jsx(ce.Fragment,{children:m}):f})});TS.displayName=IS;var TR="SelectIcon",PS=te.forwardRef((e,n)=>{const{__scopeSelect:i,children:a,...u}=e;return ce.jsx(oi.span,{"aria-hidden":!0,...u,ref:n,children:a||""})});PS.displayName=TR;var PR="SelectPortal",LS=e=>ce.jsx(yw,{asChild:!0,...e});LS.displayName=PR;var sd="SelectContent",MS=te.forwardRef((e,n)=>{const i=Ef(sd,e.__scopeSelect),[a,u]=te.useState();if(Cl(()=>{u(new DocumentFragment)},[]),!i.open){const f=a;return f?_p.createPortal(ce.jsx(kS,{scope:e.__scopeSelect,children:ce.jsx(Ly.Slot,{scope:e.__scopeSelect,children:ce.jsx("div",{children:e.children})})}),f):null}return ce.jsx(US,{...e,ref:n})});MS.displayName=sd;var Fu=10,[kS,Sf]=Cp(sd),LR="SelectContentImpl",MR=LD("SelectContent.RemoveScroll"),US=te.forwardRef((e,n)=>{const{__scopeSelect:i,position:a="item-aligned",onCloseAutoFocus:u,onEscapeKeyDown:f,onPointerDownOutside:m,side:o,sideOffset:w,align:E,alignOffset:I,arrowPadding:D,collisionBoundary:O,collisionPadding:P,sticky:W,hideWhenDetached:H,avoidCollisions:z,...Z}=e,se=Ef(sd,i),[ae,fe]=te.useState(null),[Fe,He]=te.useState(null),Ve=fs(n,et=>fe(et)),[Oe,be]=te.useState(null),[rt,ue]=te.useState(null),me=My(i),[Ue,Ie]=te.useState(!1),pt=te.useRef(!1);te.useEffect(()=>{if(ae)return zD(ae)},[ae]),BD();const lt=te.useCallback(et=>{const[_t,...Et]=me().map(ar=>ar.ref.current),[Pt]=Et.slice(-1),Kt=document.activeElement;for(const ar of et)if(ar===Kt||(ar?.scrollIntoView({block:"nearest"}),ar===_t&&Fe&&(Fe.scrollTop=0),ar===Pt&&Fe&&(Fe.scrollTop=Fe.scrollHeight),ar?.focus(),document.activeElement!==Kt))return},[me,Fe]),ot=te.useCallback(()=>lt([Oe,ae]),[lt,Oe,ae]);te.useEffect(()=>{Ue&&ot()},[Ue,ot]);const{onOpenChange:Ne,triggerPointerDownPosRef:Te}=se;te.useEffect(()=>{if(ae){let et={x:0,y:0};const _t=Pt=>{et={x:Math.abs(Math.round(Pt.pageX)-(Te.current?.x??0)),y:Math.abs(Math.round(Pt.pageY)-(Te.current?.y??0))}},Et=Pt=>{et.x<=10&&et.y<=10?Pt.preventDefault():ae.contains(Pt.target)||Ne(!1),document.removeEventListener("pointermove",_t),Te.current=null};return Te.current!==null&&(document.addEventListener("pointermove",_t),document.addEventListener("pointerup",Et,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_t),document.removeEventListener("pointerup",Et,{capture:!0})}}},[ae,Ne,Te]),te.useEffect(()=>{const et=()=>Ne(!1);return window.addEventListener("blur",et),window.addEventListener("resize",et),()=>{window.removeEventListener("blur",et),window.removeEventListener("resize",et)}},[Ne]);const[yt,Le]=YS(et=>{const _t=me().filter(Kt=>!Kt.disabled),Et=_t.find(Kt=>Kt.ref.current===document.activeElement),Pt=JS(_t,et,Et);Pt&&setTimeout(()=>Pt.ref.current.focus())}),ie=te.useCallback((et,_t,Et)=>{const Pt=!pt.current&&!Et;(se.value!==void 0&&se.value===_t||Pt)&&(be(et),Pt&&(pt.current=!0))},[se.value]),Ce=te.useCallback(()=>ae?.focus(),[ae]),Me=te.useCallback((et,_t,Et)=>{const Pt=!pt.current&&!Et;(se.value!==void 0&&se.value===_t||Pt)&&ue(et)},[se.value]),qe=a==="popper"?S_:DS,at=qe===S_?{side:o,sideOffset:w,align:E,alignOffset:I,arrowPadding:D,collisionBoundary:O,collisionPadding:P,sticky:W,hideWhenDetached:H,avoidCollisions:z}:{};return ce.jsx(kS,{scope:i,content:ae,viewport:Fe,onViewportChange:He,itemRefCallback:ie,selectedItem:Oe,onItemLeave:Ce,itemTextRefCallback:Me,focusSelectedItem:ot,selectedItemText:rt,position:a,isPositioned:Ue,searchRef:yt,children:ce.jsx(CS,{as:MR,allowPinchZoom:!0,children:ce.jsx(pS,{asChild:!0,trapped:se.open,onMountAutoFocus:et=>{et.preventDefault()},onUnmountAutoFocus:Un(u,et=>{se.trigger?.focus({preventScroll:!0}),et.preventDefault()}),children:ce.jsx(py,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:et=>et.preventDefault(),onDismiss:()=>se.onOpenChange(!1),children:ce.jsx(qe,{role:"listbox",id:se.contentId,"data-state":se.open?"open":"closed",dir:se.dir,onContextMenu:et=>et.preventDefault(),...Z,...at,onPlaced:()=>Ie(!0),ref:Ve,style:{display:"flex",flexDirection:"column",outline:"none",...Z.style},onKeyDown:Un(Z.onKeyDown,et=>{const _t=et.ctrlKey||et.altKey||et.metaKey;if(et.key==="Tab"&&et.preventDefault(),!_t&&et.key.length===1&&Le(et.key),["ArrowUp","ArrowDown","Home","End"].includes(et.key)){let Pt=me().filter(Kt=>!Kt.disabled).map(Kt=>Kt.ref.current);if(["ArrowUp","End"].includes(et.key)&&(Pt=Pt.slice().reverse()),["ArrowUp","ArrowDown"].includes(et.key)){const Kt=et.target,ar=Pt.indexOf(Kt);Pt=Pt.slice(ar+1)}setTimeout(()=>lt(Pt)),et.preventDefault()}})})})})})})});US.displayName=LR;var kR="SelectItemAlignedPosition",DS=te.forwardRef((e,n)=>{const{__scopeSelect:i,onPlaced:a,...u}=e,f=Ef(sd,i),m=Sf(sd,i),[o,w]=te.useState(null),[E,I]=te.useState(null),D=fs(n,Ve=>I(Ve)),O=My(i),P=te.useRef(!1),W=te.useRef(!0),{viewport:H,selectedItem:z,selectedItemText:Z,focusSelectedItem:se}=m,ae=te.useCallback(()=>{if(f.trigger&&f.valueNode&&o&&E&&H&&z&&Z){const Ve=f.trigger.getBoundingClientRect(),Oe=E.getBoundingClientRect(),be=f.valueNode.getBoundingClientRect(),rt=Z.getBoundingClientRect();if(f.dir!=="rtl"){const Kt=rt.left-Oe.left,ar=be.left-Kt,hr=Ve.left-ar,Cr=Ve.width+hr,je=Math.max(Cr,Oe.width),vr=window.innerWidth-Fu,Ur=F2(ar,[Fu,Math.max(Fu,vr-je)]);o.style.minWidth=Cr+"px",o.style.left=Ur+"px"}else{const Kt=Oe.right-rt.right,ar=window.innerWidth-be.right-Kt,hr=window.innerWidth-Ve.right-ar,Cr=Ve.width+hr,je=Math.max(Cr,Oe.width),vr=window.innerWidth-Fu,Ur=F2(ar,[Fu,Math.max(Fu,vr-je)]);o.style.minWidth=Cr+"px",o.style.right=Ur+"px"}const ue=O(),me=window.innerHeight-Fu*2,Ue=H.scrollHeight,Ie=window.getComputedStyle(E),pt=parseInt(Ie.borderTopWidth,10),lt=parseInt(Ie.paddingTop,10),ot=parseInt(Ie.borderBottomWidth,10),Ne=parseInt(Ie.paddingBottom,10),Te=pt+lt+Ue+Ne+ot,yt=Math.min(z.offsetHeight*5,Te),Le=window.getComputedStyle(H),ie=parseInt(Le.paddingTop,10),Ce=parseInt(Le.paddingBottom,10),Me=Ve.top+Ve.height/2-Fu,qe=me-Me,at=z.offsetHeight/2,et=z.offsetTop+at,_t=pt+lt+et,Et=Te-_t;if(_t<=Me){const Kt=ue.length>0&&z===ue[ue.length-1].ref.current;o.style.bottom="0px";const ar=E.clientHeight-H.offsetTop-H.offsetHeight,hr=Math.max(qe,at+(Kt?Ce:0)+ar+ot),Cr=_t+hr;o.style.height=Cr+"px"}else{const Kt=ue.length>0&&z===ue[0].ref.current;o.style.top="0px";const hr=Math.max(Me,pt+H.offsetTop+(Kt?ie:0)+at)+Et;o.style.height=hr+"px",H.scrollTop=_t-Me+H.offsetTop}o.style.margin=`${Fu}px 0`,o.style.minHeight=yt+"px",o.style.maxHeight=me+"px",a?.(),requestAnimationFrame(()=>P.current=!0)}},[O,f.trigger,f.valueNode,o,E,H,z,Z,f.dir,a]);Cl(()=>ae(),[ae]);const[fe,Fe]=te.useState();Cl(()=>{E&&Fe(window.getComputedStyle(E).zIndex)},[E]);const He=te.useCallback(Ve=>{Ve&&W.current===!0&&(ae(),se?.(),W.current=!1)},[ae,se]);return ce.jsx(DR,{scope:i,contentWrapper:o,shouldExpandOnScrollRef:P,onScrollButtonChange:He,children:ce.jsx("div",{ref:w,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:fe},children:ce.jsx(oi.div,{...u,ref:D,style:{boxSizing:"border-box",maxHeight:"100%",...u.style}})})})});DS.displayName=kR;var UR="SelectPopperPosition",S_=te.forwardRef((e,n)=>{const{__scopeSelect:i,align:a="start",collisionPadding:u=Fu,...f}=e,m=ky(i);return ce.jsx(yE,{...m,...f,ref:n,align:a,collisionPadding:u,style:{boxSizing:"border-box",...f.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});S_.displayName=UR;var[DR,Hw]=Cp(sd,{}),F_="SelectViewport",RS=te.forwardRef((e,n)=>{const{__scopeSelect:i,nonce:a,...u}=e,f=Sf(F_,i),m=Hw(F_,i),o=fs(n,f.onViewportChange),w=te.useRef(0);return ce.jsxs(ce.Fragment,{children:[ce.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),ce.jsx(Ly.Slot,{scope:i,children:ce.jsx(oi.div,{"data-radix-select-viewport":"",role:"presentation",...u,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...u.style},onScroll:Un(u.onScroll,E=>{const I=E.currentTarget,{contentWrapper:D,shouldExpandOnScrollRef:O}=m;if(O?.current&&D){const P=Math.abs(w.current-I.scrollTop);if(P>0){const W=window.innerHeight-Fu*2,H=parseFloat(D.style.minHeight),z=parseFloat(D.style.height),Z=Math.max(H,z);if(Z<W){const se=Z+P,ae=Math.min(W,se),fe=se-ae;D.style.height=ae+"px",D.style.bottom==="0px"&&(I.scrollTop=fe>0?fe:0,D.style.justifyContent="flex-end")}}}w.current=I.scrollTop})})})]})});RS.displayName=F_;var NS="SelectGroup",[RR,NR]=Cp(NS),QR=te.forwardRef((e,n)=>{const{__scopeSelect:i,...a}=e,u=vy();return ce.jsx(RR,{scope:i,id:u,children:ce.jsx(oi.div,{role:"group","aria-labelledby":u,...a,ref:n})})});QR.displayName=NS;var QS="SelectLabel",OS=te.forwardRef((e,n)=>{const{__scopeSelect:i,...a}=e,u=NR(QS,i);return ce.jsx(oi.div,{id:u.id,...a,ref:n})});OS.displayName=QS;var Y0="SelectItem",[OR,zS]=Cp(Y0),HS=te.forwardRef((e,n)=>{const{__scopeSelect:i,value:a,disabled:u=!1,textValue:f,...m}=e,o=Ef(Y0,i),w=Sf(Y0,i),E=o.value===a,[I,D]=te.useState(f??""),[O,P]=te.useState(!1),W=fs(n,se=>w.itemRefCallback?.(se,a,u)),H=vy(),z=te.useRef("touch"),Z=()=>{u||(o.onValueChange(a),o.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return ce.jsx(OR,{scope:i,value:a,disabled:u,textId:H,isSelected:E,onItemTextChange:te.useCallback(se=>{D(ae=>ae||(se?.textContent??"").trim())},[]),children:ce.jsx(Ly.ItemSlot,{scope:i,value:a,disabled:u,textValue:I,children:ce.jsx(oi.div,{role:"option","aria-labelledby":H,"data-highlighted":O?"":void 0,"aria-selected":E&&O,"data-state":E?"checked":"unchecked","aria-disabled":u||void 0,"data-disabled":u?"":void 0,tabIndex:u?void 0:-1,...m,ref:W,onFocus:Un(m.onFocus,()=>P(!0)),onBlur:Un(m.onBlur,()=>P(!1)),onClick:Un(m.onClick,()=>{z.current!=="mouse"&&Z()}),onPointerUp:Un(m.onPointerUp,()=>{z.current==="mouse"&&Z()}),onPointerDown:Un(m.onPointerDown,se=>{z.current=se.pointerType}),onPointerMove:Un(m.onPointerMove,se=>{z.current=se.pointerType,u?w.onItemLeave?.():z.current==="mouse"&&se.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Un(m.onPointerLeave,se=>{se.currentTarget===document.activeElement&&w.onItemLeave?.()}),onKeyDown:Un(m.onKeyDown,se=>{w.searchRef?.current!==""&&se.key===" "||(CR.includes(se.key)&&Z(),se.key===" "&&se.preventDefault())})})})})});HS.displayName=Y0;var pm="SelectItemText",jS=te.forwardRef((e,n)=>{const{__scopeSelect:i,className:a,style:u,...f}=e,m=Ef(pm,i),o=Sf(pm,i),w=zS(pm,i),E=IR(pm,i),[I,D]=te.useState(null),O=fs(n,Z=>D(Z),w.onItemTextChange,Z=>o.itemTextRefCallback?.(Z,w.value,w.disabled)),P=I?.textContent,W=te.useMemo(()=>ce.jsx("option",{value:w.value,disabled:w.disabled,children:P},w.value),[w.disabled,w.value,P]),{onNativeOptionAdd:H,onNativeOptionRemove:z}=E;return Cl(()=>(H(W),()=>z(W)),[H,z,W]),ce.jsxs(ce.Fragment,{children:[ce.jsx(oi.span,{id:w.textId,...f,ref:O}),w.isSelected&&m.valueNode&&!m.valueNodeHasChildren?_p.createPortal(f.children,m.valueNode):null]})});jS.displayName=pm;var VS="SelectItemIndicator",GS=te.forwardRef((e,n)=>{const{__scopeSelect:i,...a}=e;return zS(VS,i).isSelected?ce.jsx(oi.span,{"aria-hidden":!0,...a,ref:n}):null});GS.displayName=VS;var I_="SelectScrollUpButton",KS=te.forwardRef((e,n)=>{const i=Sf(I_,e.__scopeSelect),a=Hw(I_,e.__scopeSelect),[u,f]=te.useState(!1),m=fs(n,a.onScrollButtonChange);return Cl(()=>{if(i.viewport&&i.isPositioned){let o=function(){const E=w.scrollTop>0;f(E)};const w=i.viewport;return o(),w.addEventListener("scroll",o),()=>w.removeEventListener("scroll",o)}},[i.viewport,i.isPositioned]),u?ce.jsx($S,{...e,ref:m,onAutoScroll:()=>{const{viewport:o,selectedItem:w}=i;o&&w&&(o.scrollTop=o.scrollTop-w.offsetHeight)}}):null});KS.displayName=I_;var T_="SelectScrollDownButton",qS=te.forwardRef((e,n)=>{const i=Sf(T_,e.__scopeSelect),a=Hw(T_,e.__scopeSelect),[u,f]=te.useState(!1),m=fs(n,a.onScrollButtonChange);return Cl(()=>{if(i.viewport&&i.isPositioned){let o=function(){const E=w.scrollHeight-w.clientHeight,I=Math.ceil(w.scrollTop)<E;f(I)};const w=i.viewport;return o(),w.addEventListener("scroll",o),()=>w.removeEventListener("scroll",o)}},[i.viewport,i.isPositioned]),u?ce.jsx($S,{...e,ref:m,onAutoScroll:()=>{const{viewport:o,selectedItem:w}=i;o&&w&&(o.scrollTop=o.scrollTop+w.offsetHeight)}}):null});qS.displayName=T_;var $S=te.forwardRef((e,n)=>{const{__scopeSelect:i,onAutoScroll:a,...u}=e,f=Sf("SelectScrollButton",i),m=te.useRef(null),o=My(i),w=te.useCallback(()=>{m.current!==null&&(window.clearInterval(m.current),m.current=null)},[]);return te.useEffect(()=>()=>w(),[w]),Cl(()=>{o().find(I=>I.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),ce.jsx(oi.div,{"aria-hidden":!0,...u,ref:n,style:{flexShrink:0,...u.style},onPointerDown:Un(u.onPointerDown,()=>{m.current===null&&(m.current=window.setInterval(a,50))}),onPointerMove:Un(u.onPointerMove,()=>{f.onItemLeave?.(),m.current===null&&(m.current=window.setInterval(a,50))}),onPointerLeave:Un(u.onPointerLeave,()=>{w()})})}),zR="SelectSeparator",WS=te.forwardRef((e,n)=>{const{__scopeSelect:i,...a}=e;return ce.jsx(oi.div,{"aria-hidden":!0,...a,ref:n})});WS.displayName=zR;var P_="SelectArrow",HR=te.forwardRef((e,n)=>{const{__scopeSelect:i,...a}=e,u=ky(i),f=Ef(P_,i),m=Sf(P_,i);return f.open&&m.position==="popper"?ce.jsx(vE,{...u,...a,ref:n}):null});HR.displayName=P_;var jR="SelectBubbleInput",ZS=te.forwardRef(({__scopeSelect:e,value:n,...i},a)=>{const u=te.useRef(null),f=fs(a,u),m=Ow(n);return te.useEffect(()=>{const o=u.current;if(!o)return;const w=window.HTMLSelectElement.prototype,I=Object.getOwnPropertyDescriptor(w,"value").set;if(m!==n&&I){const D=new Event("change",{bubbles:!0});I.call(o,n),o.dispatchEvent(D)}},[m,n]),ce.jsx(oi.select,{...i,style:{...d5,...i.style},ref:f,defaultValue:n})});ZS.displayName=jR;function XS(e){return e===""||e===void 0}function YS(e){const n=iu(e),i=te.useRef(""),a=te.useRef(0),u=te.useCallback(m=>{const o=i.current+m;n(o),(function w(E){i.current=E,window.clearTimeout(a.current),E!==""&&(a.current=window.setTimeout(()=>w(""),1e3))})(o)},[n]),f=te.useCallback(()=>{i.current="",window.clearTimeout(a.current)},[]);return te.useEffect(()=>()=>window.clearTimeout(a.current),[]),[i,u,f]}function JS(e,n,i){const u=n.length>1&&Array.from(n).every(E=>E===n[0])?n[0]:n,f=i?e.indexOf(i):-1;let m=VR(e,Math.max(f,0));u.length===1&&(m=m.filter(E=>E!==i));const w=m.find(E=>E.textValue.toLowerCase().startsWith(u.toLowerCase()));return w!==i?w:void 0}function VR(e,n){return e.map((i,a)=>e[(n+a)%e.length])}var GR=ES,eF=FS,KR=TS,qR=PS,$R=LS,tF=MS,WR=RS,rF=OS,nF=HS,ZR=jS,XR=GS,iF=KS,sF=qS,oF=WS;const aF=GR,lF=KR,jw=te.forwardRef(({className:e,children:n,...i},a)=>ce.jsxs(eF,{ref:a,className:Li("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...i,children:[n,ce.jsx(qR,{asChild:!0,children:ce.jsx(N5,{className:"h-4 w-4 opacity-50"})})]}));jw.displayName=eF.displayName;const cF=te.forwardRef(({className:e,...n},i)=>ce.jsx(iF,{ref:i,className:Li("flex cursor-default items-center justify-center py-1",e),...n,children:ce.jsx(J3,{className:"h-4 w-4"})}));cF.displayName=iF.displayName;const AF=te.forwardRef(({className:e,...n},i)=>ce.jsx(sF,{ref:i,className:Li("flex cursor-default items-center justify-center py-1",e),...n,children:ce.jsx(N5,{className:"h-4 w-4"})}));AF.displayName=sF.displayName;const Vw=te.forwardRef(({className:e,children:n,position:i="popper",...a},u)=>ce.jsx($R,{children:ce.jsxs(tF,{ref:u,className:Li("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:i,...a,children:[ce.jsx(cF,{}),ce.jsx(WR,{className:Li("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),ce.jsx(AF,{})]})}));Vw.displayName=tF.displayName;const YR=te.forwardRef(({className:e,...n},i)=>ce.jsx(rF,{ref:i,className:Li("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...n}));YR.displayName=rF.displayName;const Gw=te.forwardRef(({className:e,children:n,...i},a)=>ce.jsxs(nF,{ref:a,className:Li("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...i,children:[ce.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ce.jsx(XR,{children:ce.jsx(R5,{className:"h-4 w-4"})})}),ce.jsx(ZR,{children:n})]}));Gw.displayName=nF.displayName;const JR=te.forwardRef(({className:e,...n},i)=>ce.jsx(oF,{ref:i,className:Li("-mx-1 my-1 h-px bg-muted",e),...n}));JR.displayName=oF.displayName;var Uy="Checkbox",[e6]=Hh(Uy),[t6,Kw]=e6(Uy);function r6(e){const{__scopeCheckbox:n,checked:i,children:a,defaultChecked:u,disabled:f,form:m,name:o,onCheckedChange:w,required:E,value:I="on",internal_do_not_use_render:D}=e,[O,P]=mp({prop:i,defaultProp:u??!1,onChange:w,caller:Uy}),[W,H]=te.useState(null),[z,Z]=te.useState(null),se=te.useRef(!1),ae=W?!!m||!!W.closest("form"):!0,fe={checked:O,disabled:f,setChecked:P,control:W,setControl:H,name:o,form:m,value:I,hasConsumerStoppedPropagationRef:se,required:E,defaultChecked:yf(u)?!1:u,isFormControl:ae,bubbleInput:z,setBubbleInput:Z};return ce.jsx(t6,{scope:n,...fe,children:n6(D)?D(fe):a})}var uF="CheckboxTrigger",hF=te.forwardRef(({__scopeCheckbox:e,onKeyDown:n,onClick:i,...a},u)=>{const{control:f,value:m,disabled:o,checked:w,required:E,setControl:I,setChecked:D,hasConsumerStoppedPropagationRef:O,isFormControl:P,bubbleInput:W}=Kw(uF,e),H=fs(u,I),z=te.useRef(w);return te.useEffect(()=>{const Z=f?.form;if(Z){const se=()=>D(z.current);return Z.addEventListener("reset",se),()=>Z.removeEventListener("reset",se)}},[f,D]),ce.jsx(oi.button,{type:"button",role:"checkbox","aria-checked":yf(w)?"mixed":w,"aria-required":E,"data-state":gF(w),"data-disabled":o?"":void 0,disabled:o,value:m,...a,ref:H,onKeyDown:Un(n,Z=>{Z.key==="Enter"&&Z.preventDefault()}),onClick:Un(i,Z=>{D(se=>yf(se)?!0:!se),W&&P&&(O.current=Z.isPropagationStopped(),O.current||Z.stopPropagation())})})});hF.displayName=uF;var qw=te.forwardRef((e,n)=>{const{__scopeCheckbox:i,name:a,checked:u,defaultChecked:f,required:m,disabled:o,value:w,onCheckedChange:E,form:I,...D}=e;return ce.jsx(r6,{__scopeCheckbox:i,checked:u,defaultChecked:f,disabled:o,required:m,onCheckedChange:E,name:a,form:I,value:w,internal_do_not_use_render:({isFormControl:O})=>ce.jsxs(ce.Fragment,{children:[ce.jsx(hF,{...D,ref:n,__scopeCheckbox:i}),O&&ce.jsx(mF,{__scopeCheckbox:i})]})})});qw.displayName=Uy;var fF="CheckboxIndicator",dF=te.forwardRef((e,n)=>{const{__scopeCheckbox:i,forceMount:a,...u}=e,f=Kw(fF,i);return ce.jsx(Km,{present:a||yf(f.checked)||f.checked===!0,children:ce.jsx(oi.span,{"data-state":gF(f.checked),"data-disabled":f.disabled?"":void 0,...u,ref:n,style:{pointerEvents:"none",...e.style}})})});dF.displayName=fF;var pF="CheckboxBubbleInput",mF=te.forwardRef(({__scopeCheckbox:e,...n},i)=>{const{control:a,hasConsumerStoppedPropagationRef:u,checked:f,defaultChecked:m,required:o,disabled:w,name:E,value:I,form:D,bubbleInput:O,setBubbleInput:P}=Kw(pF,e),W=fs(i,P),H=Ow(f),z=Tw(a);te.useEffect(()=>{const se=O;if(!se)return;const ae=window.HTMLInputElement.prototype,Fe=Object.getOwnPropertyDescriptor(ae,"checked").set,He=!u.current;if(H!==f&&Fe){const Ve=new Event("click",{bubbles:He});se.indeterminate=yf(f),Fe.call(se,yf(f)?!1:f),se.dispatchEvent(Ve)}},[O,H,f,u]);const Z=te.useRef(yf(f)?!1:f);return ce.jsx(oi.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??Z.current,required:o,disabled:w,name:E,value:I,form:D,...n,tabIndex:-1,ref:W,style:{...n.style,...z,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});mF.displayName=pF;function n6(e){return typeof e=="function"}function yf(e){return e==="indeterminate"}function gF(e){return yf(e)?"indeterminate":e?"checked":"unchecked"}const L_=te.forwardRef(({className:e,...n},i)=>ce.jsx(qw,{ref:i,className:Li("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...n,children:ce.jsx(dF,{className:Li("flex items-center justify-center text-current"),children:ce.jsx(R5,{className:"h-4 w-4"})})}));L_.displayName=qw.displayName;const Dy=te.forwardRef(({className:e,type:n,...i},a)=>ce.jsx("input",{type:n,className:Li("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...i}));Dy.displayName="Input";var k0={exports:{}};var i6=k0.exports,Q2;function s6(){return Q2||(Q2=1,(function(e,n){(function(i,a){e.exports=a()})(i6,(function(){var i={},a={};function u(m,o,w){if(a[m]=w,m==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}u("shared",["exports"],(function(m){function o(l,t,s,A){return new(s||(s=Promise))((function(p,v){function _(U){try{F(A.next(U))}catch(Q){v(Q)}}function B(U){try{F(A.throw(U))}catch(Q){v(Q)}}function F(U){var Q;U.done?p(U.value):(Q=U.value,Q instanceof s?Q:new s((function(K){K(Q)}))).then(_,B)}F((A=A.apply(l,t||[])).next())}))}function w(l,t){this.x=l,this.y=t}function E(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var I,D;typeof SuppressedError=="function"&&SuppressedError,w.prototype={clone(){return new w(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,t){return this.clone()._rotateAround(l,t)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const t=l.x-this.x,s=l.y-this.y;return t*t+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,t){return Math.atan2(this.x*t-this.y*l,this.x*l+this.y*t)},_matMult(l){const t=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=t,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const t=Math.cos(l),s=Math.sin(l),A=s*this.x+t*this.y;return this.x=t*this.x-s*this.y,this.y=A,this},_rotateAround(l,t){const s=Math.cos(l),A=Math.sin(l),p=t.y+A*(this.x-t.x)+s*(this.y-t.y);return this.x=t.x+s*(this.x-t.x)-A*(this.y-t.y),this.y=p,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:w},w.convert=function(l){if(l instanceof w)return l;if(Array.isArray(l))return new w(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new w(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var O=(function(){if(D)return I;function l(t,s,A,p){this.cx=3*t,this.bx=3*(A-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=s,this.p2x=A,this.p2y=p}return D=1,I=l,l.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,s){if(s===void 0&&(s=1e-6),t<0)return 0;if(t>1)return 1;for(var A=t,p=0;p<8;p++){var v=this.sampleCurveX(A)-t;if(Math.abs(v)<s)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=v/_}var B=0,F=1;for(A=t,p=0;p<20&&(v=this.sampleCurveX(A),!(Math.abs(v-t)<s));p++)t>v?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))}},I})(),P=E(O);let W,H;function z(){return W==null&&(W=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),W}function Z(){if(H==null&&(H=!1,z())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let A=0;A<25;A++){const p=4*A;t.fillStyle=`rgb(${p},${p+1},${p+2})`,t.fillRect(A%5,Math.floor(A/5),1,1)}const s=t.getImageData(0,0,5,5).data;for(let A=0;A<100;A++)if(A%4!=3&&s[A]!==A){H=!0;break}}}return H||!1}var se=1e-6,ae=typeof Float32Array<"u"?Float32Array:Array;function fe(){var l=new ae(9);return ae!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function Fe(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function He(){var l=new ae(3);return ae!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function Ve(l){var t=l[0],s=l[1],A=l[2];return Math.sqrt(t*t+s*s+A*A)}function Oe(l,t,s){var A=new ae(3);return A[0]=l,A[1]=t,A[2]=s,A}function be(l,t,s){return l[0]=t[0]+s[0],l[1]=t[1]+s[1],l[2]=t[2]+s[2],l}function rt(l,t,s){return l[0]=t[0]*s,l[1]=t[1]*s,l[2]=t[2]*s,l}function ue(l,t,s){var A=t[0],p=t[1],v=t[2],_=s[0],B=s[1],F=s[2];return l[0]=p*F-v*B,l[1]=v*_-A*F,l[2]=A*B-p*_,l}var me,Ue=Ve;function Ie(l,t,s){var A=t[0],p=t[1],v=t[2],_=t[3];return l[0]=s[0]*A+s[4]*p+s[8]*v+s[12]*_,l[1]=s[1]*A+s[5]*p+s[9]*v+s[13]*_,l[2]=s[2]*A+s[6]*p+s[10]*v+s[14]*_,l[3]=s[3]*A+s[7]*p+s[11]*v+s[15]*_,l}function pt(){var l=new ae(4);return ae!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function lt(l,t,s,A){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",v=Math.PI/360;t*=v,A*=v,s*=v;var _=Math.sin(t),B=Math.cos(t),F=Math.sin(s),U=Math.cos(s),Q=Math.sin(A),K=Math.cos(A);switch(p){case"xyz":l[0]=_*U*K+B*F*Q,l[1]=B*F*K-_*U*Q,l[2]=B*U*Q+_*F*K,l[3]=B*U*K-_*F*Q;break;case"xzy":l[0]=_*U*K-B*F*Q,l[1]=B*F*K-_*U*Q,l[2]=B*U*Q+_*F*K,l[3]=B*U*K+_*F*Q;break;case"yxz":l[0]=_*U*K+B*F*Q,l[1]=B*F*K-_*U*Q,l[2]=B*U*Q-_*F*K,l[3]=B*U*K+_*F*Q;break;case"yzx":l[0]=_*U*K+B*F*Q,l[1]=B*F*K+_*U*Q,l[2]=B*U*Q-_*F*K,l[3]=B*U*K-_*F*Q;break;case"zxy":l[0]=_*U*K-B*F*Q,l[1]=B*F*K+_*U*Q,l[2]=B*U*Q+_*F*K,l[3]=B*U*K-_*F*Q;break;case"zyx":l[0]=_*U*K-B*F*Q,l[1]=B*F*K+_*U*Q,l[2]=B*U*Q-_*F*K,l[3]=B*U*K+_*F*Q;break;default:throw new Error("Unknown angle order "+p)}return l}function ot(){var l=new ae(2);return ae!=Float32Array&&(l[0]=0,l[1]=0),l}function Ne(l,t){var s=new ae(2);return s[0]=l,s[1]=t,s}He(),me=new ae(4),ae!=Float32Array&&(me[0]=0,me[1]=0,me[2]=0,me[3]=0),He(),Oe(1,0,0),Oe(0,1,0),pt(),pt(),fe(),ot();const Te=8192;function yt(l,t,s){return t*(Te/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function Le(l,t){return(l%t+t)%t}function ie(l,t,s){return l*(1-s)+t*s}function Ce(l){if(l<=0)return 0;if(l>=1)return 1;const t=l*l,s=t*l;return 4*(l<.5?s:3*(l-t)+s-.75)}function Me(l,t,s,A){const p=new P(l,t,s,A);return v=>p.solve(v)}const qe=Me(.25,.1,.25,1);function at(l,t,s){return Math.min(s,Math.max(t,l))}function et(l,t,s){const A=s-t,p=((l-t)%A+A)%A+t;return p===t?s:p}function _t(l,...t){for(const s of t)for(const A in s)l[A]=s[A];return l}let Et=1;function Pt(l,t,s){const A={};for(const p in l)A[p]=t.call(this,l[p],p,l);return A}function Kt(l,t,s){const A={};for(const p in l)t.call(this,l[p],p,l)&&(A[p]=l[p]);return A}function ar(l){return Array.isArray(l)?l.map(ar):typeof l=="object"&&l?Pt(l,ar):l}const hr={};function Cr(l){hr[l]||(typeof console<"u"&&console.warn(l),hr[l]=!0)}function je(l,t,s){return(s.y-l.y)*(t.x-l.x)>(t.y-l.y)*(s.x-l.x)}function vr(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let Ur=null;function $r(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Wr(l,t,s,A,p){return o(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(l,{timestamp:0});try{const _=v?.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const B=_.startsWith("BGR"),F=new Uint8ClampedArray(A*p*4);if(yield v.copyTo(F,(function(U,Q,K,X,J){const oe=4*Math.max(-Q,0),le=(Math.max(0,K)-K)*X*4+oe,he=4*X,Be=Math.max(0,Q),tt=Math.max(0,K);return{rect:{x:Be,y:tt,width:Math.min(U.width,Q+X)-Be,height:Math.min(U.height,K+J)-tt},layout:[{offset:le,stride:he}]}})(l,t,s,A,p)),B)for(let U=0;U<F.length;U+=4){const Q=F[U];F[U]=F[U+2],F[U+2]=Q}return F}finally{v.close()}}))}let Sr,Or;function Rr(l,t,s,A){return l.addEventListener(t,s,A),{unsubscribe:()=>{l.removeEventListener(t,s,A)}}}function On(l){return l*Math.PI/180}function hn(l){return l/Math.PI*180}const dt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},de={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},pe="AbortError";class ve extends Error{constructor(t=pe){super(t instanceof Error?t.message:t),this.name=pe,t instanceof Error&&t.stack&&(this.stack=t.stack)}}function $e(l){return l.name===pe}const Ze={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ct(l){return Ze.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const vt="global-dispatcher";class ct extends Error{constructor(t,s,A,p){super(`AJAXError: ${s} (${t}): ${A}`),this.status=t,this.statusText=s,this.url=A,this.body=p}}const bt=()=>vr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ht=function(l,t){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const A=Ct(l.url);if(A)return A(l,t);if(vr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:vt},t)}if(!(/^file:/.test(s=l.url)||/^file:/.test(bt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(A,p){return o(this,void 0,void 0,(function*(){const v=new Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,cache:A.cache,referrer:bt(),signal:p.signal});let _,B;A.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{_=yield fetch(v)}catch(U){throw $e(U)?U:new ct(0,U.message,A.url,new Blob)}if(!_.ok){const U=yield _.blob();throw new ct(_.status,_.statusText,A.url,U)}B=A.type==="arrayBuffer"||A.type==="image"?_.arrayBuffer():A.type==="json"?_.json():_.text();const F=yield B;return p.signal.throwIfAborted(),{data:F,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}}))})(l,t);if(vr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:vt},t)}var s;return(function(A,p){return new Promise(((v,_)=>{var B;const F=new XMLHttpRequest;F.open(A.method||"GET",A.url,!0),A.type!=="arrayBuffer"&&A.type!=="image"||(F.responseType="arraybuffer");for(const U in A.headers)F.setRequestHeader(U,A.headers[U]);A.type==="json"&&(F.responseType="text",!((B=A.headers)===null||B===void 0)&&B.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=A.credentials==="include",F.onerror=()=>{_(new Error(F.statusText))},F.onload=()=>{if(!p.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let U=F.response;if(A.type==="json")try{U=JSON.parse(F.response)}catch(Q){return void _(Q)}v({data:U,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const U=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});_(new ct(F.status,F.statusText,A.url,U))}},p.signal.addEventListener("abort",(()=>{F.abort(),_(new ve(p.signal.reason))})),F.send(A.body)}))})(l,t)};function Ft(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const t=new URL(l),s=window.location;return t.protocol===s.protocol&&t.host===s.host}function cr(l,t,s){s[l]&&s[l].indexOf(t)!==-1||(s[l]=s[l]||[],s[l].push(t))}function Jt(l,t,s){if(s&&s[l]){const A=s[l].indexOf(t);A!==-1&&s[l].splice(A,1)}}class dr{constructor(t,s={}){_t(this,s),this.type=t}}class rn extends dr{constructor(t,s={}){super("error",_t({error:t},s))}}class Tr{on(t,s){return this._listeners=this._listeners||{},cr(t,s,this._listeners),{unsubscribe:()=>{this.off(t,s)}}}off(t,s){return Jt(t,s,this._listeners),Jt(t,s,this._oneTimeListeners),this}once(t,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},cr(t,s,this._oneTimeListeners),this):new Promise((A=>this.once(t,A)))}fire(t,s){typeof t=="string"&&(t=new dr(t,s||{}));const A=t.type;if(this.listens(A)){t.target=this;const p=this._listeners&&this._listeners[A]?this._listeners[A].slice():[];for(const B of p)B.call(this,t);const v=this._oneTimeListeners&&this._oneTimeListeners[A]?this._oneTimeListeners[A].slice():[];for(const B of v)Jt(A,B,this._oneTimeListeners),B.call(this,t);const _=this._eventedParent;_&&(_t(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof rn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,s){return this._eventedParent=t,this._eventedParentData=s,this}}var mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const tn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Nr(l,t){const s={};for(const A in l)A!=="ref"&&(s[A]=l[A]);return tn.forEach((A=>{A in t&&(s[A]=t[A])})),s}function mr(l,t){if(Array.isArray(l)){if(!Array.isArray(t)||l.length!==t.length)return!1;for(let s=0;s<l.length;s++)if(!mr(l[s],t[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&t!==null){if(typeof t!="object"||Object.keys(l).length!==Object.keys(t).length)return!1;for(const s in l)if(!mr(l[s],t[s]))return!1;return!0}return l===t}function Kr(l,t){l.push(t)}function Dn(l,t,s){Kr(s,{command:"addSource",args:[l,t[l]]})}function wr(l,t,s){Kr(t,{command:"removeSource",args:[l]}),s[l]=!0}function Tn(l,t,s,A){wr(l,s,A),Dn(l,t,s)}function Bn(l,t,s){let A;for(A in l[s])if(Object.prototype.hasOwnProperty.call(l[s],A)&&A!=="data"&&!mr(l[s][A],t[s][A]))return!1;for(A in t[s])if(Object.prototype.hasOwnProperty.call(t[s],A)&&A!=="data"&&!mr(l[s][A],t[s][A]))return!1;return!0}function xn(l,t,s,A,p,v){l=l||{},t=t||{};for(const _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(mr(l[_],t[_])||s.push({command:v,args:[A,_,t[_],p]}));for(const _ in t)Object.prototype.hasOwnProperty.call(t,_)&&!Object.prototype.hasOwnProperty.call(l,_)&&(mr(l[_],t[_])||s.push({command:v,args:[A,_,t[_],p]}))}function Di(l){return l.id}function ai(l,t){return l[t.id]=t,l}class Yt{constructor(t,s,A,p){this.message=(t?`${t}: `:"")+A,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function Zn(l,...t){for(const s of t)for(const A in s)l[A]=s[A];return l}class $i extends Error{constructor(t,s){super(s),this.message=s,this.key=t}}class sl{constructor(t,s=[]){this.parent=t,this.bindings={};for(const[A,p]of s)this.bindings[A]=p}concat(t){return new sl(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ns={kind:"null"},pr={kind:"number"},nn={kind:"string"},un={kind:"boolean"},Ri={kind:"color"},El={kind:"projectionDefinition"},ks={kind:"object"},fn={kind:"value"},ol={kind:"collator"},al={kind:"formatted"},ec={kind:"padding"},Ec={kind:"colorArray"},di={kind:"numberArray"},tc={kind:"resolvedImage"},Sl={kind:"variableAnchorOffsetCollection"};function Ci(l,t){return{kind:"array",itemType:l,N:t}}function jn(l){if(l.kind==="array"){const t=jn(l.itemType);return typeof l.N=="number"?`array<${t}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${t}>`}return l.kind}const rA=[ns,pr,nn,un,Ri,El,al,ks,Ci(fn),ec,di,Ec,tc,Sl];function ll(l,t){if(t.kind==="error")return null;if(l.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!ll(l.itemType,t.itemType))&&(typeof l.N!="number"||l.N===t.N))return null}else{if(l.kind===t.kind)return null;if(l.kind==="value"){for(const s of rA)if(!ll(s,t))return null}}return`Expected ${jn(l)} but found ${jn(t)} instead.`}function cl(l,t){return t.some((s=>s.kind===l.kind))}function Us(l,t){return t.some((s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l))}function Ro(l,t){return l.kind==="array"&&t.kind==="array"?l.itemType.kind===t.itemType.kind&&typeof l.N=="number":l.kind===t.kind}const ds=.96422,Ba=.82521,IA=4/29,Mn=6/29,Sc=3*Mn*Mn,No=Mn*Mn*Mn,Qo=Math.PI/180,Fc=180/Math.PI;function la(l){return(l%=360)<0&&(l+=360),l}function ys([l,t,s,A]){let p,v;const _=nA((.2225045*(l=Oo(l))+.7168786*(t=Oo(t))+.0606169*(s=Oo(s)))/1);l===t&&t===s?p=v=_:(p=nA((.4360747*l+.3850649*t+.1430804*s)/ds),v=nA((.0139322*l+.0971045*t+.7141733*s)/Ba));const B=116*_-16;return[B<0?0:B,500*(p-_),200*(_-v),A]}function Oo(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function nA(l){return l>No?Math.pow(l,1/3):l/Sc+IA}function iA([l,t,s,A]){let p=(l+16)/116,v=isNaN(t)?p:p+t/500,_=isNaN(s)?p:p-s/200;return p=1*Ca(p),v=ds*Ca(v),_=Ba*Ca(_),[rc(3.1338561*v-1.6168667*p-.4906146*_),rc(-.9787684*v+1.9161415*p+.033454*_),rc(.0719453*v-.2289914*p+1.4052427*_),A]}function rc(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Ca(l){return l>Mn?l*l*l:Sc*(l-IA)}const TA=Object.hasOwn||function(l,t){return Object.prototype.hasOwnProperty.call(l,t)};function Kn(l,t){return TA(l,t)?l[t]:void 0}function Fl(l){return parseInt(l.padEnd(2,l),16)/255}function nc(l,t){return Il(t?l/100:l,0,1)}function Il(l,t,s){return Math.min(Math.max(t,l),s)}function PA(l){return!l.some(Number.isNaN)}const Ic={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ca(l,t,s){return l+s*(t-l)}function Al(l,t,s){return l.map(((A,p)=>ca(A,t[p],s)))}class an{constructor(t,s,A,p=1,v=!0){this.r=t,this.g=s,this.b=A,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[t,s,A,p]))}static parse(t){if(t instanceof an)return t;if(typeof t!="string")return;const s=(function(A){if((A=A.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=Kn(Ic,A);if(p){const[_,B,F]=p;return[_/255,B/255,F/255,1]}if(A.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(A)){const _=A.length<6?1:2;let B=1;return[Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+_)||"ff")]}if(A.startsWith("rgb")){const _=A.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[B,F,U,Q,K,X,J,oe,le,he,Be,tt]=_,Se=[Q||" ",J||" ",he].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const ke=[U,X,le].join(""),it=ke==="%%%"?100:ke===""?255:0;if(it){const ht=[Il(+F/it,0,1),Il(+K/it,0,1),Il(+oe/it,0,1),Be?nc(+Be,tt):1];if(PA(ht))return ht}}return}}const v=A.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,B,F,U,Q,K,X,J,oe]=v,le=[F||" ",Q||" ",X].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const he=[+B,Il(+U,0,100),Il(+K,0,100),J?nc(+J,oe):1];if(PA(he))return(function([Be,tt,Se,ke]){function it(ht){const Mt=(ht+Be/30)%12,Xt=tt*Math.min(Se,1-Se);return Se-Xt*Math.max(-1,Math.min(Mt-3,9-Mt,1))}return Be=la(Be),tt/=100,Se/=100,[it(0),it(8),it(4),ke]})(he)}}})(t);return s?new an(...s,!1):void 0}get rgb(){const{r:t,g:s,b:A,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[t/v,s/v,A/v,p])}get hcl(){return this.overwriteGetter("hcl",(function(t){const[s,A,p,v]=ys(t),_=Math.sqrt(A*A+p*p);return[Math.round(1e4*_)?la(Math.atan2(p,A)*Fc):NaN,_,s,v]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ys(this.rgb))}overwriteGetter(t,s){return Object.defineProperty(this,t,{value:s}),s}toString(){const[t,s,A,p]=this.rgb;return`rgba(${[t,s,A].map((v=>Math.round(255*v))).join(",")},${p})`}static interpolate(t,s,A,p="rgb"){switch(p){case"rgb":{const[v,_,B,F]=Al(t.rgb,s.rgb,A);return new an(v,_,B,F,!1)}case"hcl":{const[v,_,B,F]=t.hcl,[U,Q,K,X]=s.hcl;let J,oe;if(isNaN(v)||isNaN(U))isNaN(v)?isNaN(U)?J=NaN:(J=U,B!==1&&B!==0||(oe=Q)):(J=v,K!==1&&K!==0||(oe=_));else{let Se=U-v;U>v&&Se>180?Se-=360:U<v&&v-U>180&&(Se+=360),J=v+A*Se}const[le,he,Be,tt]=(function([Se,ke,it,ht]){return Se=isNaN(Se)?0:Se*Qo,iA([it,Math.cos(Se)*ke,Math.sin(Se)*ke,ht])})([J,oe??ca(_,Q,A),ca(B,K,A),ca(F,X,A)]);return new an(le,he,Be,tt,!1)}case"lab":{const[v,_,B,F]=iA(Al(t.lab,s.lab,A));return new an(v,_,B,F,!1)}}}}an.black=new an(0,0,0,1),an.white=new an(1,1,1,1),an.transparent=new an(0,0,0,0),an.red=new an(1,0,0,1);class Ea{constructor(t,s,A){this.sensitivity=t?s?"variant":"case":s?"accent":"base",this.locale=A,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,s){return this.collator.compare(t,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const zo=["bottom","center","top"];class Ho{constructor(t,s,A,p,v,_){this.text=t,this.image=s,this.scale=A,this.fontStack=p,this.textColor=v,this.verticalAlign=_}}class vs{constructor(t){this.sections=t}static fromString(t){return new vs([new Ho(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((t=>t.text.length!==0||t.image&&t.image.name.length!==0))}static factory(t){return t instanceof vs?t:vs.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map((t=>t.text)).join("")}}class qr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof qr)return t;if(typeof t=="number")return new qr([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const s of t)if(typeof s!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new qr(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){return new qr(Al(t.values,s.values,A))}}class Jn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Jn)return t;if(typeof t=="number")return new Jn([t]);if(Array.isArray(t)){for(const s of t)if(typeof s!="number")return;return new Jn(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){return new Jn(Al(t.values,s.values,A))}}class cn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof cn)return t;if(typeof t=="string"){const A=an.parse(t);return A?new cn([A]):void 0}if(!Array.isArray(t))return;const s=[];for(const A of t){if(typeof A!="string")return;const p=an.parse(A);if(!p)return;s.push(p)}return new cn(s)}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A,p="rgb"){const v=[];if(t.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let _=0;_<t.values.length;_++)v.push(an.interpolate(t.values[_],s.values[_],A,p));return new cn(v)}}class ii extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const _s=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Wi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Wi)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let s=0;s<t.length;s+=2){const A=t[s],p=t[s+1];if(typeof A!="string"||!_s.has(A)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Wi(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){const p=t.values,v=s.values;if(p.length!==v.length)throw new ii(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${s.toString()}`);const _=[];for(let B=0;B<p.length;B+=2){if(p[B]!==v[B])throw new ii(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${p[B]}, to[${B}]: ${v[B]}`);_.push(p[B]);const[F,U]=p[B+1],[Q,K]=v[B+1];_.push([ca(F,Q,A),ca(U,K,A)])}return new Wi(_)}}class uo{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new uo({name:t,available:!1}):null}}class ws{constructor(t,s,A){this.from=t,this.to=s,this.transition=A}static interpolate(t,s,A){return new ws(t,s,A)}static parse(t){return t instanceof ws?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new ws(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new ws(t.from,t.to,t.transition):typeof t=="string"?new ws(t,t,1):void 0}}function Sa(l,t,s,A){return typeof l=="number"&&l>=0&&l<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof s=="number"&&s>=0&&s<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:`Invalid rgba value [${[l,t,s,A].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof A=="number"?[l,t,s,A]:[l,t,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fa(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof ws||l instanceof an||l instanceof Ea||l instanceof vs||l instanceof qr||l instanceof Jn||l instanceof cn||l instanceof Wi||l instanceof uo)return!0;if(Array.isArray(l)){for(const t of l)if(!Fa(t))return!1;return!0}if(typeof l=="object"){for(const t in l)if(!Fa(l[t]))return!1;return!0}return!1}function ti(l){if(l===null)return ns;if(typeof l=="string")return nn;if(typeof l=="boolean")return un;if(typeof l=="number")return pr;if(l instanceof an)return Ri;if(l instanceof ws)return El;if(l instanceof Ea)return ol;if(l instanceof vs)return al;if(l instanceof qr)return ec;if(l instanceof Jn)return di;if(l instanceof cn)return Ec;if(l instanceof Wi)return Sl;if(l instanceof uo)return tc;if(Array.isArray(l)){const t=l.length;let s;for(const A of l){const p=ti(A);if(s){if(s===p)continue;s=fn;break}s=p}return Ci(s||fn,t)}return ks}function Aa(l){const t=typeof l;return l===null?"":t==="string"||t==="number"||t==="boolean"?String(l):l instanceof an||l instanceof ws||l instanceof vs||l instanceof qr||l instanceof Jn||l instanceof cn||l instanceof Wi||l instanceof uo?l.toString():JSON.stringify(l)}class Zi{constructor(t,s){this.type=t,this.value=s}static parse(t,s){if(t.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Fa(t[1]))return s.error("invalid value");const A=t[1];let p=ti(A);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new Zi(p,A)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ic={string:nn,number:pr,boolean:un,object:ks};class qs{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let A,p=1;const v=t[0];if(v==="array"){let B,F;if(t.length>2){const U=t[1];if(typeof U!="string"||!(U in ic)||U==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);B=ic[U],p++}else B=fn;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return s.error('The length argument to "array" must be a positive integer literal',2);F=t[2],p++}A=Ci(B,F)}else{if(!ic[v])throw new Error(`Types doesn't contain name = ${v}`);A=ic[v]}const _=[];for(;p<t.length;p++){const B=s.parse(t[p],p,fn);if(!B)return null;_.push(B)}return new qs(A,_)}evaluate(t){for(let s=0;s<this.args.length;s++){const A=this.args[s].evaluate(t);if(!ll(this.type,ti(A)))return A;if(s===this.args.length-1)throw new ii(`Expected value to be of type ${jn(this.type)}, but found ${jn(ti(A))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ul={"to-boolean":un,"to-color":Ri,"to-number":pr,"to-string":nn};class jo{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const A=t[0];if(!ul[A])throw new Error(`Can't parse ${A} as it is not part of the known types`);if((A==="to-boolean"||A==="to-string")&&t.length!==2)return s.error("Expected one argument.");const p=ul[A],v=[];for(let _=1;_<t.length;_++){const B=s.parse(t[_],_,fn);if(!B)return null;v.push(B)}return new jo(p,v)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let s,A;for(const p of this.args){if(s=p.evaluate(t),A=null,s instanceof an)return s;if(typeof s=="string"){const v=t.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(A=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Sa(s[0],s[1],s[2],s[3]),!A))return new an(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ii(A||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const A of this.args){s=A.evaluate(t);const p=qr.parse(s);if(p)return p}throw new ii(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const A of this.args){s=A.evaluate(t);const p=Jn.parse(s);if(p)return p}throw new ii(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const A of this.args){s=A.evaluate(t);const p=cn.parse(s);if(p)return p}throw new ii(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const A of this.args){s=A.evaluate(t);const p=Wi.parse(s);if(p)return p}throw new ii(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const A of this.args){if(s=A.evaluate(t),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new ii(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return vs.fromString(Aa(this.args[0].evaluate(t)));case"resolvedImage":return uo.fromString(Aa(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Aa(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ua=["Unknown","Point","LineString","Polygon"];class sc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ua[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let s=this._parseColorCache.get(t);return s||(s=an.parse(t),this._parseColorCache.set(t,s)),s}}class ha{constructor(t,s,A=[],p,v=new sl,_=[]){this.registry=t,this.path=A,this.key=A.map((B=>`[${B}]`)).join(""),this.scope=v,this.errors=_,this.expectedType=p,this._isConstant=s}parse(t,s,A,p,v={}){return s?this.concat(s,A,p)._parse(t,v):this._parse(t,v)}_parse(t,s){function A(p,v,_){return _==="assert"?new qs(v,[p]):_==="coerce"?new jo(v,[p]):p}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=t[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let _=v.parse(t,this);if(!_)return null;if(this.expectedType){const B=this.expectedType,F=_.type;if(B.kind!=="string"&&B.kind!=="number"&&B.kind!=="boolean"&&B.kind!=="object"&&B.kind!=="array"||F.kind!=="value"){if(B.kind==="projectionDefinition"&&["string","array"].includes(F.kind)||["color","formatted","resolvedImage"].includes(B.kind)&&["value","string"].includes(F.kind)||["padding","numberArray"].includes(B.kind)&&["value","number","array"].includes(F.kind)||B.kind==="colorArray"&&["value","string","array"].includes(F.kind)||B.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(F.kind))_=A(_,B,s.typeAnnotation||"coerce");else if(this.checkSubtype(B,F))return null}else _=A(_,B,s.typeAnnotation||"assert")}if(!(_ instanceof Zi)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const B=new sc;try{_=new Zi(_.type,_.evaluate(B))}catch(F){return this.error(F.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,s,A){const p=typeof t=="number"?this.path.concat(t):this.path,v=A?this.scope.concat(A):this.scope;return new ha(this.registry,this._isConstant,p,s||null,v,this.errors)}error(t,...s){const A=`${this.key}${s.map((p=>`[${p}]`)).join("")}`;this.errors.push(new $i(A,t))}checkSubtype(t,s){const A=ll(t,s);return A&&this.error(A),A}}class Nn{constructor(t,s){this.type=s.type,this.bindings=[].concat(t),this.result=s}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const s of this.bindings)t(s[1]);t(this.result)}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const A=[];for(let v=1;v<t.length-1;v+=2){const _=t[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const B=s.parse(t[v+1],v+1);if(!B)return null;A.push([_,B])}const p=s.parse(t[t.length-1],t.length-1,s.expectedType,A);return p?new Nn(A,p):null}outputDefined(){return this.result.outputDefined()}}class Vo{constructor(t,s){this.type=s.type,this.name=t,this.boundExpression=s}static parse(t,s){if(t.length!==2||typeof t[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const A=t[1];return s.scope.has(A)?new Vo(A,s.scope.get(A)):s.error(`Unknown variable "${A}". Make sure "${A}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class En{constructor(t,s,A){this.type=t,this.index=s,this.input=A}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,pr),p=s.parse(t[2],2,Ci(s.expectedType||fn));return A&&p?new En(p.type.itemType,A,p):null}evaluate(t){const s=this.index.evaluate(t),A=this.input.evaluate(t);if(s<0)throw new ii(`Array index out of bounds: ${s} < 0.`);if(s>=A.length)throw new ii(`Array index out of bounds: ${s} > ${A.length-1}.`);if(s!==Math.floor(s))throw new ii(`Array index must be an integer, but found ${s} instead.`);return A[s]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class mn{constructor(t,s){this.type=un,this.needle=t,this.haystack=s}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,fn),p=s.parse(t[2],2,fn);return A&&p?cl(A.type,[un,nn,pr,ns,fn])?new mn(A,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${jn(A.type)} instead`):null}evaluate(t){const s=this.needle.evaluate(t),A=this.haystack.evaluate(t);if(!A)return!1;if(!Us(s,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${jn(ti(s))} instead.`);if(!Us(A,["string","array"]))throw new ii(`Expected second argument to be of type array or string, but found ${jn(ti(A))} instead.`);return A.indexOf(s)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ia{constructor(t,s,A){this.type=pr,this.needle=t,this.haystack=s,this.fromIndex=A}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,fn),p=s.parse(t[2],2,fn);if(!A||!p)return null;if(!cl(A.type,[un,nn,pr,ns,fn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${jn(A.type)} instead`);if(t.length===4){const v=s.parse(t[3],3,pr);return v?new Ia(A,p,v):null}return new Ia(A,p)}evaluate(t){const s=this.needle.evaluate(t),A=this.haystack.evaluate(t);if(!Us(s,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${jn(ti(s))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(t)),Us(A,["string"])){const v=A.indexOf(s,p);return v===-1?-1:[...A.slice(0,v)].length}if(Us(A,["array"]))return A.indexOf(s,p);throw new ii(`Expected second argument to be of type array or string, but found ${jn(ti(A))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class bn{constructor(t,s,A,p,v,_){this.inputType=t,this.type=s,this.input=A,this.cases=p,this.outputs=v,this.otherwise=_}static parse(t,s){if(t.length<5)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return s.error("Expected an even number of arguments.");let A,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},_=[];for(let U=2;U<t.length-1;U+=2){let Q=t[U];const K=t[U+1];Array.isArray(Q)||(Q=[Q]);const X=s.concat(U);if(Q.length===0)return X.error("Expected at least one branch label.");for(const oe of Q){if(typeof oe!="number"&&typeof oe!="string")return X.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return X.error("Numeric branch labels must be integer values.");if(A){if(X.checkSubtype(A,ti(oe)))return null}else A=ti(oe);if(v[String(oe)]!==void 0)return X.error("Branch labels must be unique.");v[String(oe)]=_.length}const J=s.parse(K,U,p);if(!J)return null;p=p||J.type,_.push(J)}const B=s.parse(t[1],1,fn);if(!B)return null;const F=s.parse(t[t.length-1],t.length-1,p);return F?B.type.kind!=="value"&&s.concat(1).checkSubtype(A,B.type)?null:new bn(A,p,B,v,_,F):null}evaluate(t){const s=this.input.evaluate(t);return(ti(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Go{constructor(t,s,A){this.type=t,this.branches=s,this.otherwise=A}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return s.error("Expected an odd number of arguments.");let A;s.expectedType&&s.expectedType.kind!=="value"&&(A=s.expectedType);const p=[];for(let _=1;_<t.length-1;_+=2){const B=s.parse(t[_],_,un);if(!B)return null;const F=s.parse(t[_+1],_+1,A);if(!F)return null;p.push([B,F]),A=A||F.type}const v=s.parse(t[t.length-1],t.length-1,A);if(!v)return null;if(!A)throw new Error("Can't infer output type");return new Go(A,p,v)}evaluate(t){for(const[s,A]of this.branches)if(s.evaluate(t))return A.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[s,A]of this.branches)t(s),t(A);t(this.otherwise)}outputDefined(){return this.branches.every((([t,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class Ei{constructor(t,s,A,p){this.type=t,this.input=s,this.beginIndex=A,this.endIndex=p}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,fn),p=s.parse(t[2],2,pr);if(!A||!p)return null;if(!cl(A.type,[Ci(fn),nn,fn]))return s.error(`Expected first argument to be of type array or string, but found ${jn(A.type)} instead`);if(t.length===4){const v=s.parse(t[3],3,pr);return v?new Ei(A.type,A,p,v):null}return new Ei(A.type,A,p)}evaluate(t){const s=this.input.evaluate(t),A=this.beginIndex.evaluate(t);let p;if(this.endIndex&&(p=this.endIndex.evaluate(t)),Us(s,["string"]))return[...s].slice(A,p).join("");if(Us(s,["array"]))return s.slice(A,p);throw new ii(`Expected first argument to be of type array or string, but found ${jn(ti(s))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ao(l,t){const s=l.length-1;let A,p,v=0,_=s,B=0;for(;v<=_;)if(B=Math.floor((v+_)/2),A=l[B],p=l[B+1],A<=t){if(B===s||t<p)return B;v=B+1}else{if(!(A>t))throw new ii("Input is not a number.");_=B-1}return 0}class fa{constructor(t,s,A){this.type=t,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of A)this.labels.push(p),this.outputs.push(v)}static parse(t,s){if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");const A=s.parse(t[1],1,pr);if(!A)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<t.length;_+=2){const B=_===1?-1/0:t[_],F=t[_+1],U=_,Q=_+1;if(typeof B!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(p.length&&p[p.length-1][0]>=B)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const K=s.parse(F,Q,v);if(!K)return null;v=v||K.type,p.push([B,K])}return new fa(v,A,p)}evaluate(t){const s=this.labels,A=this.outputs;if(s.length===1)return A[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return A[0].evaluate(t);const v=s.length;return p>=s[v-1]?A[v-1].evaluate(t):A[ao(s,p)].evaluate(t)}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function V(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var ye,Je,gt=(function(){if(Je)return ye;function l(t,s,A,p){this.cx=3*t,this.bx=3*(A-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=s,this.p2x=A,this.p2y=p}return Je=1,ye=l,l.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,s){if(s===void 0&&(s=1e-6),t<0)return 0;if(t>1)return 1;for(var A=t,p=0;p<8;p++){var v=this.sampleCurveX(A)-t;if(Math.abs(v)<s)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=v/_}var B=0,F=1;for(A=t,p=0;p<20&&(v=this.sampleCurveX(A),!(Math.abs(v-t)<s));p++)t>v?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))}},ye})(),It=V(gt);class Gt{constructor(t,s,A,p,v){this.type=t,this.operator=s,this.interpolation=A,this.input=p,this.labels=[],this.outputs=[];for(const[_,B]of v)this.labels.push(_),this.outputs.push(B)}static interpolationFactor(t,s,A,p){let v=0;if(t.name==="exponential")v=sr(s,t.base,A,p);else if(t.name==="linear")v=sr(s,1,A,p);else if(t.name==="cubic-bezier"){const _=t.controlPoints;v=new It(_[0],_[1],_[2],_[3]).solve(sr(s,1,A,p))}return v}static parse(t,s){let[A,p,v,..._]=t;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const U=p[1];if(typeof U!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:U}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const U=p.slice(1);if(U.length!==4||U.some((Q=>typeof Q!="number"||Q<0||Q>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:U}}}if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,pr),!v)return null;const B=[];let F=null;A!=="interpolate-hcl"&&A!=="interpolate-lab"||s.expectedType==Ec?s.expectedType&&s.expectedType.kind!=="value"&&(F=s.expectedType):F=Ri;for(let U=0;U<_.length;U+=2){const Q=_[U],K=_[U+1],X=U+3,J=U+4;if(typeof Q!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(B.length&&B[B.length-1][0]>=Q)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const oe=s.parse(K,J,F);if(!oe)return null;F=F||oe.type,B.push([Q,oe])}return Ro(F,pr)||Ro(F,El)||Ro(F,Ri)||Ro(F,ec)||Ro(F,di)||Ro(F,Ec)||Ro(F,Sl)||Ro(F,Ci(pr))?new Gt(F,A,p,v,B):s.error(`Type ${jn(F)} is not interpolatable.`)}evaluate(t){const s=this.labels,A=this.outputs;if(s.length===1)return A[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return A[0].evaluate(t);const v=s.length;if(p>=s[v-1])return A[v-1].evaluate(t);const _=ao(s,p),B=Gt.interpolationFactor(this.interpolation,p,s[_],s[_+1]),F=A[_].evaluate(t),U=A[_+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ca(F,U,B);case"color":return an.interpolate(F,U,B);case"padding":return qr.interpolate(F,U,B);case"colorArray":return cn.interpolate(F,U,B);case"numberArray":return Jn.interpolate(F,U,B);case"variableAnchorOffsetCollection":return Wi.interpolate(F,U,B);case"array":return Al(F,U,B);case"projectionDefinition":return ws.interpolate(F,U,B)}case"interpolate-hcl":switch(this.type.kind){case"color":return an.interpolate(F,U,B,"hcl");case"colorArray":return cn.interpolate(F,U,B,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return an.interpolate(F,U,B,"lab");case"colorArray":return cn.interpolate(F,U,B,"lab")}}}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function sr(l,t,s,A){const p=A-s,v=l-s;return p===0?0:t===1?v/p:(Math.pow(t,v)-1)/(Math.pow(t,p)-1)}const br={color:an.interpolate,number:ca,padding:qr.interpolate,numberArray:Jn.interpolate,colorArray:cn.interpolate,variableAnchorOffsetCollection:Wi.interpolate,array:Al};class Vr{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let A=null;const p=s.expectedType;p&&p.kind!=="value"&&(A=p);const v=[];for(const B of t.slice(1)){const F=s.parse(B,1+v.length,A,void 0,{typeAnnotation:"omit"});if(!F)return null;A=A||F.type,v.push(F)}if(!A)throw new Error("No output type");const _=p&&v.some((B=>ll(p,B.type)));return new Vr(_?fn:A,v)}evaluate(t){let s,A=null,p=0;for(const v of this.args)if(p++,A=v.evaluate(t),A&&A instanceof uo&&!A.available&&(s||(s=A.name),A=null,p===this.args.length&&(A=s)),A!==null)break;return A}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function gn(l,t){return l==="=="||l==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function yn(l,t,s,A){return A.compare(t,s)===0}function An(l,t,s){const A=l!=="=="&&l!=="!=";return class yF{constructor(v,_,B){this.type=un,this.lhs=v,this.rhs=_,this.collator=B,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const B=v[0];let F=_.parse(v[1],1,fn);if(!F)return null;if(!gn(B,F.type))return _.concat(1).error(`"${B}" comparisons are not supported for type '${jn(F.type)}'.`);let U=_.parse(v[2],2,fn);if(!U)return null;if(!gn(B,U.type))return _.concat(2).error(`"${B}" comparisons are not supported for type '${jn(U.type)}'.`);if(F.type.kind!==U.type.kind&&F.type.kind!=="value"&&U.type.kind!=="value")return _.error(`Cannot compare types '${jn(F.type)}' and '${jn(U.type)}'.`);A&&(F.type.kind==="value"&&U.type.kind!=="value"?F=new qs(U.type,[F]):F.type.kind!=="value"&&U.type.kind==="value"&&(U=new qs(F.type,[U])));let Q=null;if(v.length===4){if(F.type.kind!=="string"&&U.type.kind!=="string"&&F.type.kind!=="value"&&U.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(Q=_.parse(v[3],3,ol),!Q)return null}return new yF(F,U,Q)}evaluate(v){const _=this.lhs.evaluate(v),B=this.rhs.evaluate(v);if(A&&this.hasUntypedArgument){const F=ti(_),U=ti(B);if(F.kind!==U.kind||F.kind!=="string"&&F.kind!=="number")throw new ii(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${F.kind}, ${U.kind}) instead.`)}if(this.collator&&!A&&this.hasUntypedArgument){const F=ti(_),U=ti(B);if(F.kind!=="string"||U.kind!=="string")return t(v,_,B)}return this.collator?s(v,_,B,this.collator.evaluate(v)):t(v,_,B)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const ji=An("==",(function(l,t,s){return t===s}),yn),is=An("!=",(function(l,t,s){return t!==s}),(function(l,t,s,A){return!yn(0,t,s,A)})),Si=An("<",(function(l,t,s){return t<s}),(function(l,t,s,A){return A.compare(t,s)<0})),Ds=An(">",(function(l,t,s){return t>s}),(function(l,t,s,A){return A.compare(t,s)>0})),Mi=An("<=",(function(l,t,s){return t<=s}),(function(l,t,s,A){return A.compare(t,s)<=0})),xs=An(">=",(function(l,t,s){return t>=s}),(function(l,t,s,A){return A.compare(t,s)>=0}));class Ko{constructor(t,s,A){this.type=ol,this.locale=A,this.caseSensitive=t,this.diacriticSensitive=s}static parse(t,s){if(t.length!==2)return s.error("Expected one argument.");const A=t[1];if(typeof A!="object"||Array.isArray(A))return s.error("Collator options argument must be an object.");const p=s.parse(A["case-sensitive"]!==void 0&&A["case-sensitive"],1,un);if(!p)return null;const v=s.parse(A["diacritic-sensitive"]!==void 0&&A["diacritic-sensitive"],1,un);if(!v)return null;let _=null;return A.locale&&(_=s.parse(A.locale,1,nn),!_)?null:new Ko(p,v,_)}evaluate(t){return new Ea(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class da{constructor(t,s,A,p,v){this.type=nn,this.number=t,this.locale=s,this.currency=A,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(t,s){if(t.length!==3)return s.error("Expected two arguments.");const A=s.parse(t[1],1,pr);if(!A)return null;const p=t[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,nn),!v))return null;let _=null;if(p.currency&&(_=s.parse(p.currency,1,nn),!_))return null;let B=null;if(p["min-fraction-digits"]&&(B=s.parse(p["min-fraction-digits"],1,pr),!B))return null;let F=null;return p["max-fraction-digits"]&&(F=s.parse(p["max-fraction-digits"],1,pr),!F)?null:new da(A,v,_,B,F)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class pa{constructor(t){this.type=al,this.sections=t}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const A=t[1];if(!Array.isArray(A)&&typeof A=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let _=1;_<=t.length-1;++_){const B=t[_];if(v&&typeof B=="object"&&!Array.isArray(B)){v=!1;let F=null;if(B["font-scale"]&&(F=s.parse(B["font-scale"],1,pr),!F))return null;let U=null;if(B["text-font"]&&(U=s.parse(B["text-font"],1,Ci(nn)),!U))return null;let Q=null;if(B["text-color"]&&(Q=s.parse(B["text-color"],1,Ri),!Q))return null;let K=null;if(B["vertical-align"]){if(typeof B["vertical-align"]=="string"&&!zo.includes(B["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${B["vertical-align"]}' instead.`);if(K=s.parse(B["vertical-align"],1,nn),!K)return null}const X=p[p.length-1];X.scale=F,X.font=U,X.textColor=Q,X.verticalAlign=K}else{const F=s.parse(t[_],1,fn);if(!F)return null;const U=F.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new pa(p)}evaluate(t){return new vs(this.sections.map((s=>{const A=s.content.evaluate(t);return ti(A)===tc?new Ho("",A,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(t):null):new Ho(Aa(A),null,s.scale?s.scale.evaluate(t):null,s.font?s.font.evaluate(t).join(","):null,s.textColor?s.textColor.evaluate(t):null,s.verticalAlign?s.verticalAlign.evaluate(t):null)})))}eachChild(t){for(const s of this.sections)t(s.content),s.scale&&t(s.scale),s.font&&t(s.font),s.textColor&&t(s.textColor),s.verticalAlign&&t(s.verticalAlign)}outputDefined(){return!1}}class Ta{constructor(t){this.type=tc,this.input=t}static parse(t,s){if(t.length!==2)return s.error("Expected two arguments.");const A=s.parse(t[1],1,nn);return A?new Ta(A):s.error("No image name provided.")}evaluate(t){const s=this.input.evaluate(t),A=uo.fromString(s);return A&&t.availableImages&&(A.available=t.availableImages.indexOf(s)>-1),A}eachChild(t){t(this.input)}outputDefined(){return!1}}class hl{constructor(t){this.type=pr,this.input=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const A=s.parse(t[1],1);return A?A.type.kind!=="array"&&A.type.kind!=="string"&&A.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${jn(A.type)} instead.`):new hl(A):null}evaluate(t){const s=this.input.evaluate(t);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new ii(`Expected value to be of type string or array, but found ${jn(ti(s))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Fi=8192;function Tc(l,t){const s=(180+l[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(s*p*Fi),Math.round(A*p*Fi)]}function ma(l,t){const s=Math.pow(2,t.z);return[(p=(l[0]/Fi+t.x)/s,360*p-180),(A=(l[1]/Fi+t.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90)];var A,p}function Pa(l,t){l[0]=Math.min(l[0],t[0]),l[1]=Math.min(l[1],t[1]),l[2]=Math.max(l[2],t[0]),l[3]=Math.max(l[3],t[1])}function Xi(l,t){return!(l[0]<=t[0]||l[2]>=t[2]||l[1]<=t[1]||l[3]>=t[3])}function sA(l,t,s){const A=l[0]-t[0],p=l[1]-t[1],v=l[0]-s[0],_=l[1]-s[1];return A*_-v*p==0&&A*v<=0&&p*_<=0}function Tl(l,t,s,A){return(p=[A[0]-s[0],A[1]-s[1]])[0]*(v=[t[0]-l[0],t[1]-l[1]])[1]-p[1]*v[0]!=0&&!(!LA(l,t,s,A)||!LA(s,A,l,t));var p,v}function ou(l,t,s){for(const A of s)for(let p=0;p<A.length-1;++p)if(Tl(l,t,A[p],A[p+1]))return!0;return!1}function Pl(l,t,s=!1){let A=!1;for(const B of t)for(let F=0;F<B.length-1;F++){if(sA(l,B[F],B[F+1]))return s;(v=B[F])[1]>(p=l)[1]!=(_=B[F+1])[1]>p[1]&&p[0]<(_[0]-v[0])*(p[1]-v[1])/(_[1]-v[1])+v[0]&&(A=!A)}var p,v,_;return A}function $s(l,t){for(const s of t)if(Pl(l,s))return!0;return!1}function La(l,t){for(const s of l)if(!Pl(s,t))return!1;for(let s=0;s<l.length-1;++s)if(ou(l[s],l[s+1],t))return!1;return!0}function fl(l,t){for(const s of t)if(La(l,s))return!0;return!1}function LA(l,t,s,A){const p=A[0]-s[0],v=A[1]-s[1],_=(l[0]-s[0])*v-p*(l[1]-s[1]),B=(t[0]-s[0])*v-p*(t[1]-s[1]);return _>0&&B<0||_<0&&B>0}function Bo(l,t,s){const A=[];for(let p=0;p<l.length;p++){const v=[];for(let _=0;_<l[p].length;_++){const B=Tc(l[p][_],s);Pa(t,B),v.push(B)}A.push(v)}return A}function Ll(l,t,s){const A=[];for(let p=0;p<l.length;p++){const v=Bo(l[p],t,s);A.push(v)}return A}function oA(l,t,s,A){if(l[0]<s[0]||l[0]>s[2]){const p=.5*A;let v=l[0]-s[0]>p?-A:s[0]-l[0]>p?A:0;v===0&&(v=l[0]-s[2]>p?-A:s[2]-l[0]>p?A:0),l[0]+=v}Pa(t,l)}function aA(l,t,s,A){const p=Math.pow(2,A.z)*Fi,v=[A.x*Fi,A.y*Fi],_=[];for(const B of l)for(const F of B){const U=[F.x+v[0],F.y+v[1]];oA(U,t,s,p),_.push(U)}return _}function Ml(l,t,s,A){const p=Math.pow(2,A.z)*Fi,v=[A.x*Fi,A.y*Fi],_=[];for(const F of l){const U=[];for(const Q of F){const K=[Q.x+v[0],Q.y+v[1]];Pa(t,K),U.push(K)}_.push(U)}if(t[2]-t[0]<=p/2){(B=t)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const F of _)for(const U of F)oA(U,t,s,p)}var B;return _}class Ws{constructor(t,s){this.type=un,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fa(t[1])){const A=t[1];if(A.type==="FeatureCollection"){const p=[];for(const v of A.features){const{type:_,coordinates:B}=v.geometry;_==="Polygon"&&p.push(B),_==="MultiPolygon"&&p.push(...B)}if(p.length)return new Ws(A,{type:"MultiPolygon",coordinates:p})}else if(A.type==="Feature"){const p=A.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Ws(A,A.geometry)}else if(A.type==="Polygon"||A.type==="MultiPolygon")return new Ws(A,A)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(s,A){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(A.type==="Polygon"){const B=Bo(A.coordinates,v,_),F=aA(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!Pl(U,B))return!1}if(A.type==="MultiPolygon"){const B=Ll(A.coordinates,v,_),F=aA(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!$s(U,B))return!1}return!0})(t,this.geometries);if(t.geometryType()==="LineString")return(function(s,A){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(A.type==="Polygon"){const B=Bo(A.coordinates,v,_),F=Ml(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!La(U,B))return!1}if(A.type==="MultiPolygon"){const B=Ll(A.coordinates,v,_),F=Ml(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!fl(U,B))return!1}return!0})(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let qo=class{constructor(l=[],t=(s,A)=>s<A?-1:s>A?1:0){if(this.data=l,this.length=this.data.length,this.compare=t,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:t,compare:s}=this,A=t[l];for(;l>0;){const p=l-1>>1,v=t[p];if(s(A,v)>=0)break;t[l]=v,l=p}t[l]=A}_down(l){const{data:t,compare:s}=this,A=this.length>>1,p=t[l];for(;l<A;){let v=1+(l<<1);const _=v+1;if(_<this.length&&s(t[_],t[v])<0&&(v=_),s(t[v],p)>=0)break;t[l]=t[v],l=v}t[l]=p}};function Co(l,t,s=0,A=l.length-1,p=dl){for(;A>s;){if(A-s>600){const F=A-s+1,U=t-s+1,Q=Math.log(F),K=.5*Math.exp(2*Q/3),X=.5*Math.sqrt(Q*K*(F-K)/F)*(U-F/2<0?-1:1);Co(l,t,Math.max(s,Math.floor(t-U*K/F+X)),Math.min(A,Math.floor(t+(F-U)*K/F+X)),p)}const v=l[t];let _=s,B=A;for(ga(l,s,t),p(l[A],v)>0&&ga(l,s,A);_<B;){for(ga(l,_,B),_++,B--;p(l[_],v)<0;)_++;for(;p(l[B],v)>0;)B--}p(l[s],v)===0?ga(l,s,B):(B++,ga(l,B,A)),B<=t&&(s=B+1),t<=B&&(A=B-1)}}function ga(l,t,s){const A=l[t];l[t]=l[s],l[s]=A}function dl(l,t){return l<t?-1:l>t?1:0}function Ma(l,t){if(l.length<=1)return[l];const s=[];let A,p;for(const v of l){const _=kl(v);_!==0&&(v.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(A&&s.push(A),A=[v]):A.push(v))}if(A&&s.push(A),t>1)for(let v=0;v<s.length;v++)s[v].length<=t||(Co(s[v],t,1,s[v].length-1,oc),s[v]=s[v].slice(0,t));return s}function oc(l,t){return t.area-l.area}function kl(l){let t=0;for(let s,A,p=0,v=l.length,_=v-1;p<v;_=p++)s=l[p],A=l[_],t+=(A.x-s.x)*(s.y+A.y);return t}const ss=1/298.257223563,pl=ss*(2-ss),ml=Math.PI/180;class ya{constructor(t){const s=6378.137*ml*1e3,A=Math.cos(t*ml),p=1/(1-pl*(1-A*A)),v=Math.sqrt(p);this.kx=s*v*A,this.ky=s*v*p*(1-pl)}distance(t,s){const A=this.wrap(t[0]-s[0])*this.kx,p=(t[1]-s[1])*this.ky;return Math.sqrt(A*A+p*p)}pointOnLine(t,s){let A,p,v,_,B=1/0;for(let F=0;F<t.length-1;F++){let U=t[F][0],Q=t[F][1],K=this.wrap(t[F+1][0]-U)*this.kx,X=(t[F+1][1]-Q)*this.ky,J=0;K===0&&X===0||(J=(this.wrap(s[0]-U)*this.kx*K+(s[1]-Q)*this.ky*X)/(K*K+X*X),J>1?(U=t[F+1][0],Q=t[F+1][1]):J>0&&(U+=K/this.kx*J,Q+=X/this.ky*J)),K=this.wrap(s[0]-U)*this.kx,X=(s[1]-Q)*this.ky;const oe=K*K+X*X;oe<B&&(B=oe,A=U,p=Q,v=F,_=J)}return{point:[A,p],index:v,t:Math.max(0,Math.min(1,_))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Pc(l,t){return t[0]-l[0]}function Ul(l){return l[1]-l[0]+1}function ho(l,t){return l[1]>=l[0]&&l[1]<t}function ac(l,t){if(l[0]>l[1])return[null,null];const s=Ul(l);if(t){if(s===2)return[l,null];const p=Math.floor(s/2);return[[l[0],l[0]+p],[l[0]+p,l[1]]]}if(s===1)return[l,null];const A=Math.floor(s/2)-1;return[[l[0],l[0]+A],[l[0]+A+1,l[1]]]}function gl(l,t){if(!ho(t,l.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let A=t[0];A<=t[1];++A)Pa(s,l[A]);return s}function Dl(l){const t=[1/0,1/0,-1/0,-1/0];for(const s of l)for(const A of s)Pa(t,A);return t}function Rl(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Nl(l,t,s){if(!Rl(l)||!Rl(t))return NaN;let A=0,p=0;return l[2]<t[0]&&(A=t[0]-l[2]),l[0]>t[2]&&(A=l[0]-t[2]),l[1]>t[3]&&(p=l[1]-t[3]),l[3]<t[1]&&(p=t[1]-l[3]),s.distance([0,0],[A,p])}function $o(l,t,s){const A=s.pointOnLine(t,l);return s.distance(l,A.point)}function lc(l,t,s,A,p){const v=Math.min($o(l,[s,A],p),$o(t,[s,A],p)),_=Math.min($o(s,[l,t],p),$o(A,[l,t],p));return Math.min(v,_)}function os(l,t,s,A,p){if(!ho(t,l.length)||!ho(A,s.length))return 1/0;let v=1/0;for(let _=t[0];_<t[1];++_){const B=l[_],F=l[_+1];for(let U=A[0];U<A[1];++U){const Q=s[U],K=s[U+1];if(Tl(B,F,Q,K))return 0;v=Math.min(v,lc(B,F,Q,K,p))}}return v}function Eo(l,t,s,A,p){if(!ho(t,l.length)||!ho(A,s.length))return NaN;let v=1/0;for(let _=t[0];_<=t[1];++_)for(let B=A[0];B<=A[1];++B)if(v=Math.min(v,p.distance(l[_],s[B])),v===0)return v;return v}function si(l,t,s){if(Pl(l,t,!0))return 0;let A=1/0;for(const p of t){const v=p[0],_=p[p.length-1];if(v!==_&&(A=Math.min(A,$o(l,[_,v],s)),A===0))return A;const B=s.pointOnLine(p,l);if(A=Math.min(A,s.distance(l,B.point)),A===0)return A}return A}function _i(l,t,s,A){if(!ho(t,l.length))return NaN;for(let v=t[0];v<=t[1];++v)if(Pl(l[v],s,!0))return 0;let p=1/0;for(let v=t[0];v<t[1];++v){const _=l[v],B=l[v+1];for(const F of s)for(let U=0,Q=F.length,K=Q-1;U<Q;K=U++){const X=F[K],J=F[U];if(Tl(_,B,X,J))return 0;p=Math.min(p,lc(_,B,X,J,A))}}return p}function Yi(l,t){for(const s of l)for(const A of s)if(Pl(A,t,!0))return!0;return!1}function bs(l,t,s,A=1/0){const p=Dl(l),v=Dl(t);if(A!==1/0&&Nl(p,v,s)>=A)return A;if(Xi(p,v)){if(Yi(l,t))return 0}else if(Yi(t,l))return 0;let _=1/0;for(const B of l)for(let F=0,U=B.length,Q=U-1;F<U;Q=F++){const K=B[Q],X=B[F];for(const J of t)for(let oe=0,le=J.length,he=le-1;oe<le;he=oe++){const Be=J[he],tt=J[oe];if(Tl(K,X,Be,tt))return 0;_=Math.min(_,lc(K,X,Be,tt,s))}}return _}function Pn(l,t,s,A,p,v){if(!v)return;const _=Nl(gl(A,v),p,s);_<t&&l.push([_,v,[0,0]])}function Lc(l,t,s,A,p,v,_){if(!v||!_)return;const B=Nl(gl(A,v),gl(p,_),s);B<t&&l.push([B,v,_])}function cc(l,t,s,A,p=1/0){let v=Math.min(A.distance(l[0],s[0][0]),p);if(v===0)return v;const _=new qo([[0,[0,l.length-1],[0,0]]],Pc),B=Dl(s);for(;_.length>0;){const F=_.pop();if(F[0]>=v)continue;const U=F[1],Q=t?50:100;if(Ul(U)<=Q){if(!ho(U,l.length))return NaN;if(t){const K=_i(l,U,s,A);if(isNaN(K)||K===0)return K;v=Math.min(v,K)}else for(let K=U[0];K<=U[1];++K){const X=si(l[K],s,A);if(v=Math.min(v,X),v===0)return 0}}else{const K=ac(U,t);Pn(_,v,A,l,B,K[0]),Pn(_,v,A,l,B,K[1])}}return v}function ka(l,t,s,A,p,v=1/0){let _=Math.min(v,p.distance(l[0],s[0]));if(_===0)return _;const B=new qo([[0,[0,l.length-1],[0,s.length-1]]],Pc);for(;B.length>0;){const F=B.pop();if(F[0]>=_)continue;const U=F[1],Q=F[2],K=t?50:100,X=A?50:100;if(Ul(U)<=K&&Ul(Q)<=X){if(!ho(U,l.length)&&ho(Q,s.length))return NaN;let J;if(t&&A)J=os(l,U,s,Q,p),_=Math.min(_,J);else if(t&&!A){const oe=l.slice(U[0],U[1]+1);for(let le=Q[0];le<=Q[1];++le)if(J=$o(s[le],oe,p),_=Math.min(_,J),_===0)return _}else if(!t&&A){const oe=s.slice(Q[0],Q[1]+1);for(let le=U[0];le<=U[1];++le)if(J=$o(l[le],oe,p),_=Math.min(_,J),_===0)return _}else J=Eo(l,U,s,Q,p),_=Math.min(_,J)}else{const J=ac(U,t),oe=ac(Q,A);Lc(B,_,p,l,s,J[0],oe[0]),Lc(B,_,p,l,s,J[0],oe[1]),Lc(B,_,p,l,s,J[1],oe[0]),Lc(B,_,p,l,s,J[1],oe[1])}}return _}function MA(l){return l.type==="MultiPolygon"?l.coordinates.map((t=>({type:"Polygon",coordinates:t}))):l.type==="MultiLineString"?l.coordinates.map((t=>({type:"LineString",coordinates:t}))):l.type==="MultiPoint"?l.coordinates.map((t=>({type:"Point",coordinates:t}))):[l]}class Ua{constructor(t,s){this.type=pr,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fa(t[1])){const A=t[1];if(A.type==="FeatureCollection")return new Ua(A,A.features.map((p=>MA(p.geometry))).flat());if(A.type==="Feature")return new Ua(A,MA(A.geometry));if("type"in A&&"coordinates"in A)return new Ua(A,MA(A))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(s,A){const p=s.geometry(),v=p.flat().map((F=>ma([F.x,F.y],s.canonical)));if(p.length===0)return NaN;const _=new ya(v[0][1]);let B=1/0;for(const F of A){switch(F.type){case"Point":B=Math.min(B,ka(v,!1,[F.coordinates],!1,_,B));break;case"LineString":B=Math.min(B,ka(v,!1,F.coordinates,!0,_,B));break;case"Polygon":B=Math.min(B,cc(v,!1,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries);if(t.geometryType()==="LineString")return(function(s,A){const p=s.geometry(),v=p.flat().map((F=>ma([F.x,F.y],s.canonical)));if(p.length===0)return NaN;const _=new ya(v[0][1]);let B=1/0;for(const F of A){switch(F.type){case"Point":B=Math.min(B,ka(v,!0,[F.coordinates],!1,_,B));break;case"LineString":B=Math.min(B,ka(v,!0,F.coordinates,!0,_,B));break;case"Polygon":B=Math.min(B,cc(v,!0,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries);if(t.geometryType()==="Polygon")return(function(s,A){const p=s.geometry();if(p.length===0||p[0].length===0)return NaN;const v=Ma(p,0).map((F=>F.map((U=>U.map((Q=>ma([Q.x,Q.y],s.canonical))))))),_=new ya(v[0][0][0][1]);let B=1/0;for(const F of A)for(const U of v){switch(F.type){case"Point":B=Math.min(B,cc([F.coordinates],!1,U,_,B));break;case"LineString":B=Math.min(B,cc(F.coordinates,!0,U,_,B));break;case"Polygon":B=Math.min(B,bs(U,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Mc{constructor(t){this.type=fn,this.key=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const A=t[1];return A==null?s.error("Global state property must be defined."):typeof A!="string"?s.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Mc(A)}evaluate(t){var s;const A=(s=t.globals)===null||s===void 0?void 0:s.globalState;return A&&Object.keys(A).length!==0?Kn(A,this.key):null}eachChild(){}outputDefined(){return!1}}const kc={"==":ji,"!=":is,">":Ds,"<":Si,">=":xs,"<=":Mi,array:qs,at:En,boolean:qs,case:Go,coalesce:Vr,collator:Ko,format:pa,image:Ta,in:mn,"index-of":Ia,interpolate:Gt,"interpolate-hcl":Gt,"interpolate-lab":Gt,length:hl,let:Nn,literal:Zi,match:bn,number:qs,"number-format":da,object:qs,slice:Ei,step:fa,string:qs,"to-boolean":jo,"to-color":jo,"to-number":jo,"to-string":jo,var:Vo,within:Ws,distance:Ua,"global-state":Mc};class fo{constructor(t,s,A,p){this.name=t,this.type=s,this._evaluate=A,this.args=p}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,s){const A=t[0],p=fo.definitions[A];if(!p)return s.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,B=_.filter((([U])=>!Array.isArray(U)||U.length===t.length-1));let F=null;for(const[U,Q]of B){F=new ha(s.registry,kA,s.path,null,s.scope);const K=[];let X=!1;for(let J=1;J<t.length;J++){const oe=t[J],le=Array.isArray(U)?U[J-1]:U.type,he=F.parse(oe,1+K.length,le);if(!he){X=!0;break}K.push(he)}if(!X)if(Array.isArray(U)&&U.length!==K.length)F.error(`Expected ${U.length} arguments, but found ${K.length} instead.`);else{for(let J=0;J<K.length;J++){const oe=Array.isArray(U)?U[J]:U.type,le=K[J];F.concat(J+1).checkSubtype(oe,le.type)}if(F.errors.length===0)return new fo(A,v,Q,K)}}if(B.length===1)s.errors.push(...F.errors);else{const U=(B.length?B:_).map((([K])=>{return X=K,Array.isArray(X)?`(${X.map(jn).join(", ")})`:`(${jn(X.type)}...)`;var X})).join(" | "),Q=[];for(let K=1;K<t.length;K++){const X=s.parse(t[K],1+Q.length);if(!X)return null;Q.push(jn(X.type))}s.error(`Expected arguments of type ${U}, but found (${Q.join(", ")}) instead.`)}return null}static register(t,s){fo.definitions=s;for(const A in s)t[A]=fo}}function Uc(l,[t,s,A,p]){t=t.evaluate(l),s=s.evaluate(l),A=A.evaluate(l);const v=p?p.evaluate(l):1,_=Sa(t,s,A,v);if(_)throw new ii(_);return new an(t/255,s/255,A/255,v,!1)}function Dc(l,t){return l in t}function au(l,t){const s=t[l];return s===void 0?null:s}function yl(l){return{type:l}}function kA(l){if(l instanceof Vo)return kA(l.boundExpression);if(l instanceof fo&&l.name==="error"||l instanceof Ko||l instanceof Ws||l instanceof Ua||l instanceof Mc)return!1;const t=l instanceof jo||l instanceof qs;let s=!0;return l.eachChild((A=>{s=t?s&&kA(A):s&&A instanceof Zi})),!!s&&UA(l)&&DA(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function UA(l){if(l instanceof fo&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Ws||l instanceof Ua)return!1;let t=!0;return l.eachChild((s=>{t&&!UA(s)&&(t=!1)})),t}function lA(l){if(l instanceof fo&&l.name==="feature-state")return!1;let t=!0;return l.eachChild((s=>{t&&!lA(s)&&(t=!1)})),t}function DA(l,t){if(l instanceof fo&&t.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild((A=>{s&&!DA(A,t)&&(s=!1)})),s}function Uu(l){return{result:"success",value:l}}function Rc(l){return{result:"error",value:l}}function So(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function cA(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function lo(l){return!!l.expression&&l.expression.interpolated}function pn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function AA(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&ti(l)===ks}function Nc(l){return l}function ch(l,t){const s=l.stops&&typeof l.stops[0][0]=="object",A=s||!(s||l.property!==void 0),p=l.type||(lo(t)?"exponential":"interval"),v=(function(Q){switch(Q.type){case"color":return an.parse;case"padding":return qr.parse;case"numberArray":return Jn.parse;case"colorArray":return cn.parse;default:return null}})(t);if(v&&((l=Zn({},l)).stops&&(l.stops=l.stops.map((Q=>[Q[0],v(Q[1])]))),l.default=v(l.default?l.default:t.default)),l.colorSpace&&(_=l.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var _;const B=(function(Q){switch(Q){case"exponential":return cu;case"interval":return Ii;case"categorical":return lu;case"identity":return RA;default:throw new Error(`Unknown function type "${Q}"`)}})(p);let F,U;if(p==="categorical"){F=Object.create(null);for(const Q of l.stops)F[Q[0]]=Q[1];U=typeof l.stops[0][0]}if(s){const Q={},K=[];for(let oe=0;oe<l.stops.length;oe++){const le=l.stops[oe],he=le[0].zoom;Q[he]===void 0&&(Q[he]={zoom:he,type:l.type,property:l.property,default:l.default,stops:[]},K.push(he)),Q[he].stops.push([le[0].value,le[1]])}const X=[];for(const oe of K)X.push([Q[oe].zoom,ch(Q[oe],t)]);const J={name:"linear"};return{kind:"composite",interpolationType:J,interpolationFactor:Gt.interpolationFactor.bind(void 0,J),zoomStops:X.map((oe=>oe[0])),evaluate:({zoom:oe},le)=>cu({stops:X,base:l.base},t,oe).evaluate(oe,le)}}if(A){const Q=p==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:Q,interpolationFactor:Gt.interpolationFactor.bind(void 0,Q),zoomStops:l.stops.map((K=>K[0])),evaluate:({zoom:K})=>B(l,t,K,F,U)}}return{kind:"source",evaluate(Q,K){const X=K&&K.properties?K.properties[l.property]:void 0;return X===void 0?Ac(l.default,t.default):B(l,t,X,F,U)}}}function Ac(l,t,s){return l!==void 0?l:t!==void 0?t:s!==void 0?s:void 0}function lu(l,t,s,A,p){return Ac(typeof s===p?A[s]:void 0,l.default,t.default)}function Ii(l,t,s){if(pn(s)!=="number")return Ac(l.default,t.default);const A=l.stops.length;if(A===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[A-1][0])return l.stops[A-1][1];const p=ao(l.stops.map((v=>v[0])),s);return l.stops[p][1]}function cu(l,t,s){const A=l.base!==void 0?l.base:1;if(pn(s)!=="number")return Ac(l.default,t.default);const p=l.stops.length;if(p===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[p-1][0])return l.stops[p-1][1];const v=ao(l.stops.map((Q=>Q[0])),s),_=(function(Q,K,X,J){const oe=J-X,le=Q-X;return oe===0?0:K===1?le/oe:(Math.pow(K,le)-1)/(Math.pow(K,oe)-1)})(s,A,l.stops[v][0],l.stops[v+1][0]),B=l.stops[v][1],F=l.stops[v+1][1],U=br[t.type]||Nc;return typeof B.evaluate=="function"?{evaluate(...Q){const K=B.evaluate.apply(void 0,Q),X=F.evaluate.apply(void 0,Q);if(K!==void 0&&X!==void 0)return U(K,X,_,l.colorSpace)}}:U(B,F,_,l.colorSpace)}function RA(l,t,s){switch(t.type){case"color":s=an.parse(s);break;case"formatted":s=vs.fromString(s.toString());break;case"resolvedImage":s=uo.fromString(s.toString());break;case"padding":s=qr.parse(s);break;case"colorArray":s=cn.parse(s);break;case"numberArray":s=Jn.parse(s);break;default:pn(s)===t.type||t.type==="enum"&&t.values[s]||(s=void 0)}return Ac(s,l.default,t.default)}fo.register(kc,{error:[{kind:"error"},[nn],(l,[t])=>{throw new ii(t.evaluate(l))}],typeof:[nn,[fn],(l,[t])=>jn(ti(t.evaluate(l)))],"to-rgba":[Ci(pr,4),[Ri],(l,[t])=>{const[s,A,p,v]=t.evaluate(l).rgb;return[255*s,255*A,255*p,v]}],rgb:[Ri,[pr,pr,pr],Uc],rgba:[Ri,[pr,pr,pr,pr],Uc],has:{type:un,overloads:[[[nn],(l,[t])=>Dc(t.evaluate(l),l.properties())],[[nn,ks],(l,[t,s])=>Dc(t.evaluate(l),s.evaluate(l))]]},get:{type:fn,overloads:[[[nn],(l,[t])=>au(t.evaluate(l),l.properties())],[[nn,ks],(l,[t,s])=>au(t.evaluate(l),s.evaluate(l))]]},"feature-state":[fn,[nn],(l,[t])=>au(t.evaluate(l),l.featureState||{})],properties:[ks,[],l=>l.properties()],"geometry-type":[nn,[],l=>l.geometryType()],id:[fn,[],l=>l.id()],zoom:[pr,[],l=>l.globals.zoom],"heatmap-density":[pr,[],l=>l.globals.heatmapDensity||0],elevation:[pr,[],l=>l.globals.elevation||0],"line-progress":[pr,[],l=>l.globals.lineProgress||0],accumulated:[fn,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[pr,yl(pr),(l,t)=>{let s=0;for(const A of t)s+=A.evaluate(l);return s}],"*":[pr,yl(pr),(l,t)=>{let s=1;for(const A of t)s*=A.evaluate(l);return s}],"-":{type:pr,overloads:[[[pr,pr],(l,[t,s])=>t.evaluate(l)-s.evaluate(l)],[[pr],(l,[t])=>-t.evaluate(l)]]},"/":[pr,[pr,pr],(l,[t,s])=>t.evaluate(l)/s.evaluate(l)],"%":[pr,[pr,pr],(l,[t,s])=>t.evaluate(l)%s.evaluate(l)],ln2:[pr,[],()=>Math.LN2],pi:[pr,[],()=>Math.PI],e:[pr,[],()=>Math.E],"^":[pr,[pr,pr],(l,[t,s])=>Math.pow(t.evaluate(l),s.evaluate(l))],sqrt:[pr,[pr],(l,[t])=>Math.sqrt(t.evaluate(l))],log10:[pr,[pr],(l,[t])=>Math.log(t.evaluate(l))/Math.LN10],ln:[pr,[pr],(l,[t])=>Math.log(t.evaluate(l))],log2:[pr,[pr],(l,[t])=>Math.log(t.evaluate(l))/Math.LN2],sin:[pr,[pr],(l,[t])=>Math.sin(t.evaluate(l))],cos:[pr,[pr],(l,[t])=>Math.cos(t.evaluate(l))],tan:[pr,[pr],(l,[t])=>Math.tan(t.evaluate(l))],asin:[pr,[pr],(l,[t])=>Math.asin(t.evaluate(l))],acos:[pr,[pr],(l,[t])=>Math.acos(t.evaluate(l))],atan:[pr,[pr],(l,[t])=>Math.atan(t.evaluate(l))],min:[pr,yl(pr),(l,t)=>Math.min(...t.map((s=>s.evaluate(l))))],max:[pr,yl(pr),(l,t)=>Math.max(...t.map((s=>s.evaluate(l))))],abs:[pr,[pr],(l,[t])=>Math.abs(t.evaluate(l))],round:[pr,[pr],(l,[t])=>{const s=t.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[pr,[pr],(l,[t])=>Math.floor(t.evaluate(l))],ceil:[pr,[pr],(l,[t])=>Math.ceil(t.evaluate(l))],"filter-==":[un,[nn,fn],(l,[t,s])=>l.properties()[t.value]===s.value],"filter-id-==":[un,[fn],(l,[t])=>l.id()===t.value],"filter-type-==":[un,[nn],(l,[t])=>l.geometryType()===t.value],"filter-<":[un,[nn,fn],(l,[t,s])=>{const A=l.properties()[t.value],p=s.value;return typeof A==typeof p&&A<p}],"filter-id-<":[un,[fn],(l,[t])=>{const s=l.id(),A=t.value;return typeof s==typeof A&&s<A}],"filter->":[un,[nn,fn],(l,[t,s])=>{const A=l.properties()[t.value],p=s.value;return typeof A==typeof p&&A>p}],"filter-id->":[un,[fn],(l,[t])=>{const s=l.id(),A=t.value;return typeof s==typeof A&&s>A}],"filter-<=":[un,[nn,fn],(l,[t,s])=>{const A=l.properties()[t.value],p=s.value;return typeof A==typeof p&&A<=p}],"filter-id-<=":[un,[fn],(l,[t])=>{const s=l.id(),A=t.value;return typeof s==typeof A&&s<=A}],"filter->=":[un,[nn,fn],(l,[t,s])=>{const A=l.properties()[t.value],p=s.value;return typeof A==typeof p&&A>=p}],"filter-id->=":[un,[fn],(l,[t])=>{const s=l.id(),A=t.value;return typeof s==typeof A&&s>=A}],"filter-has":[un,[fn],(l,[t])=>t.value in l.properties()],"filter-has-id":[un,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[un,[Ci(nn)],(l,[t])=>t.value.indexOf(l.geometryType())>=0],"filter-id-in":[un,[Ci(fn)],(l,[t])=>t.value.indexOf(l.id())>=0],"filter-in-small":[un,[nn,Ci(fn)],(l,[t,s])=>s.value.indexOf(l.properties()[t.value])>=0],"filter-in-large":[un,[nn,Ci(fn)],(l,[t,s])=>(function(A,p,v,_){for(;v<=_;){const B=v+_>>1;if(p[B]===A)return!0;p[B]>A?_=B-1:v=B+1}return!1})(l.properties()[t.value],s.value,0,s.value.length-1)],all:{type:un,overloads:[[[un,un],(l,[t,s])=>t.evaluate(l)&&s.evaluate(l)],[yl(un),(l,t)=>{for(const s of t)if(!s.evaluate(l))return!1;return!0}]]},any:{type:un,overloads:[[[un,un],(l,[t,s])=>t.evaluate(l)||s.evaluate(l)],[yl(un),(l,t)=>{for(const s of t)if(s.evaluate(l))return!0;return!1}]]},"!":[un,[un],(l,[t])=>!t.evaluate(l)],"is-supported-script":[un,[nn],(l,[t])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(t.evaluate(l))}],upcase:[nn,[nn],(l,[t])=>t.evaluate(l).toUpperCase()],downcase:[nn,[nn],(l,[t])=>t.evaluate(l).toLowerCase()],concat:[nn,yl(fn),(l,t)=>t.map((s=>Aa(s.evaluate(l)))).join("")],"resolved-locale":[nn,[ol],(l,[t])=>t.evaluate(l).resolvedLocale()]});class uc{constructor(t,s,A){this.expression=t,this._warningHistory={},this._evaluator=new sc,this._defaultValue=s?(function(p){if(p.type==="color"&&AA(p.default))return new an(0,0,0,0);switch(p.type){case"color":return an.parse(p.default)||null;case"padding":return qr.parse(p.default)||null;case"numberArray":return Jn.parse(p.default)||null;case"colorArray":return cn.parse(p.default)||null;case"variableAnchorOffsetCollection":return Wi.parse(p.default)||null;case"projectionDefinition":return ws.parse(p.default)||null;default:return p.default===void 0?null:p.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=A}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=s,this._evaluator.featureState=A,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(t,s,A,p,v,_){this._globalState&&(t=zc(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=s||null,this._evaluator.featureState=A||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new ii(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){return this._warningHistory[B.message]||(this._warningHistory[B.message]=!0,typeof console<"u"&&console.warn(B.message)),this._defaultValue}}}function Ql(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in kc}function Qc(l,t,s){const A=new ha(kc,kA,[],t?(function(v){const _={color:Ri,string:nn,number:pr,enum:nn,boolean:un,formatted:al,padding:ec,numberArray:di,colorArray:Ec,projectionDefinition:El,resolvedImage:tc,variableAnchorOffsetCollection:Sl};return v.type==="array"?Ci(_[v.value]||fn,v.length):_[v.type]})(t):void 0),p=A.parse(l,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Uu(new uc(p,t,s)):Rc(A.errors)}class Oc{constructor(t,s,A){this.kind=t,this._styleExpression=s,this.isStateDependent=t!=="constant"&&!lA(s.expression),this.globalStateRefs=uA(s.expression),this._globalState=A}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,s,A,p,v,_)}evaluate(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluate(t,s,A,p,v,_)}}class NA{constructor(t,s,A,p,v){this.kind=t,this.zoomStops=A,this._styleExpression=s,this.isStateDependent=t!=="camera"&&!lA(s.expression),this.globalStateRefs=uA(s.expression),this.interpolationType=p,this._globalState=v}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,s,A,p,v,_)}evaluate(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluate(t,s,A,p,v,_)}interpolationFactor(t,s,A){return this.interpolationType?Gt.interpolationFactor(this.interpolationType,t,s,A):0}}function hc(l,t,s){const A=Qc(l,t,s);if(A.result==="error")return A;const p=A.value.expression,v=UA(p);if(!v&&!So(t))return Rc([new $i("","data expressions not supported")]);const _=DA(p,["zoom"]);if(!_&&!cA(t))return Rc([new $i("","zoom expressions not supported")]);const B=Du(p);return B||_?B instanceof $i?Rc([B]):B instanceof Gt&&!lo(t)?Rc([new $i("",'"interpolate" expressions cannot be used with this property')]):Uu(B?new NA(v?"camera":"composite",A.value,B.labels,B instanceof Gt?B.interpolation:void 0,s):new Oc(v?"constant":"source",A.value,s)):Rc([new $i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Au{constructor(t,s){this._parameters=t,this._specification=s,Zn(this,ch(this._parameters,this._specification))}static deserialize(t){return new Au(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Du(l){let t=null;if(l instanceof Nn)t=Du(l.result);else if(l instanceof Vr){for(const s of l.args)if(t=Du(s),t)break}else(l instanceof fa||l instanceof Gt)&&l.input instanceof fo&&l.input.name==="zoom"&&(t=l);return t instanceof $i||l.eachChild((s=>{const A=Du(s);A instanceof $i?t=A:!t&&A?t=new $i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&A&&t!==A&&(t=new $i("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function uA(l,t=new Set){return l instanceof Mc&&t.add(l.key),l.eachChild((s=>{uA(s,t)})),t}function zc(l,t){const{zoom:s,heatmapDensity:A,elevation:p,lineProgress:v,isSupportedScript:_,accumulated:B}=l??{};return{zoom:s,heatmapDensity:A,elevation:p,lineProgress:v,isSupportedScript:_,accumulated:B,globalState:t}}function QA(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const t of l.slice(1))if(!QA(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const OA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fc(l,t){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};QA(l)||(l=fA(l));const s=Qc(l,OA,t);if(s.result==="error")throw new Error(s.value.map((A=>`${A.key}: ${A.message}`)).join(", "));return{filter:(A,p,v)=>s.value.evaluate(A,p,{},v),needGeometry:Ru(l),getGlobalStateRefs:()=>uA(s.value.expression)}}function hA(l,t){return l<t?-1:l>t?1:0}function Ru(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let t=1;t<l.length;t++)if(Ru(l[t]))return!0;return!1}function fA(l){if(!l)return!0;const t=l[0];return l.length<=1?t!=="any":t==="=="?uu(l[1],l[2],"=="):t==="!="?hu(uu(l[1],l[2],"==")):t==="<"||t===">"||t==="<="||t===">="?uu(l[1],l[2],t):t==="any"?(s=l.slice(1),["any"].concat(s.map(fA))):t==="all"?["all"].concat(l.slice(1).map(fA)):t==="none"?["all"].concat(l.slice(1).map(fA).map(hu)):t==="in"?Ah(l[1],l.slice(2)):t==="!in"?hu(Ah(l[1],l.slice(2))):t==="has"?jh(l[1]):t!=="!has"||hu(jh(l[1]));var s}function uu(l,t,s){switch(l){case"$type":return[`filter-type-${s}`,t];case"$id":return[`filter-id-${s}`,t];default:return[`filter-${s}`,l,t]}}function Ah(l,t){if(t.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((s=>typeof s!=typeof t[0]))?["filter-in-large",l,["literal",t.sort(hA)]]:["filter-in-small",l,["literal",t]]}}function jh(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function hu(l){return["!",l]}function zA(l){const t=typeof l;if(t==="number"||t==="boolean"||t==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let p="[";for(const v of l)p+=`${zA(v)},`;return`${p}]`}const s=Object.keys(l).sort();let A="{";for(let p=0;p<s.length;p++)A+=`${JSON.stringify(s[p])}:${zA(l[s[p]])},`;return`${A}}`}function po(l){let t="";for(const s of tn)t+=`/${zA(l[s])}`;return t}function va(l){const t=l.value;return t?[new Yt(l.key,t,"constants have been deprecated as of v8")]:[]}function $n(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function mo(l){if(Array.isArray(l))return l.map(mo);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const t={};for(const s in l)t[s]=mo(l[s]);return t}return $n(l)}function co(l){const t=l.key,s=l.value,A=l.valueSpec||{},p=l.objectElementValidators||{},v=l.style,_=l.styleSpec,B=l.validateSpec;let F=[];const U=pn(s);if(U!=="object")return[new Yt(t,s,`object expected, ${U} found`)];for(const Q in s){const K=Q.split(".")[0],X=Kn(A,K)||A["*"];let J;if(Kn(p,K))J=p[K];else if(Kn(A,K))J=B;else if(p["*"])J=p["*"];else{if(!A["*"]){F.push(new Yt(t,s[Q],`unknown property "${Q}"`));continue}J=B}F=F.concat(J({key:(t&&`${t}.`)+Q,value:s[Q],valueSpec:X,style:v,styleSpec:_,object:s,objectKey:Q,validateSpec:B},s))}for(const Q in A)p[Q]||A[Q].required&&A[Q].default===void 0&&s[Q]===void 0&&F.push(new Yt(t,s,`missing required property "${Q}"`));return F}function Rs(l){const t=l.value,s=l.valueSpec,A=l.style,p=l.styleSpec,v=l.key,_=l.arrayElementValidator||l.validateSpec;if(pn(t)!=="array")return[new Yt(v,t,`array expected, ${pn(t)} found`)];if(s.length&&t.length!==s.length)return[new Yt(v,t,`array length ${s.length} expected, length ${t.length} found`)];if(s["min-length"]&&t.length<s["min-length"])return[new Yt(v,t,`array length at least ${s["min-length"]} expected, length ${t.length} found`)];let B={type:s.value,values:s.values};p.$version<7&&(B.function=s.function),pn(s.value)==="object"&&(B=s.value);let F=[];for(let U=0;U<t.length;U++)F=F.concat(_({array:t,arrayIndex:U,value:t[U],valueSpec:B,validateSpec:l.validateSpec,style:A,styleSpec:p,key:`${v}[${U}]`}));return F}function Zs(l){const t=l.key,s=l.value,A=l.valueSpec;let p=pn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Yt(t,s,`number expected, ${p} found`)]:"minimum"in A&&s<A.minimum?[new Yt(t,s,`${s} is less than the minimum value ${A.minimum}`)]:"maximum"in A&&s>A.maximum?[new Yt(t,s,`${s} is greater than the maximum value ${A.maximum}`)]:[]}function Nu(l){const t=l.valueSpec,s=$n(l.value.type);let A,p,v,_={};const B=s!=="categorical"&&l.value.property===void 0,F=!B,U=pn(l.value.stops)==="array"&&pn(l.value.stops[0])==="array"&&pn(l.value.stops[0][0])==="object",Q=co({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(J){if(s==="identity")return[new Yt(J.key,J.value,'identity function may not have a "stops" property')];let oe=[];const le=J.value;return oe=oe.concat(Rs({key:J.key,value:le,valueSpec:J.valueSpec,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:K})),pn(le)==="array"&&le.length===0&&oe.push(new Yt(J.key,le,"array must have at least one stop")),oe},default:function(J){return J.validateSpec({key:J.key,value:J.value,valueSpec:t,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec})}}});return s==="identity"&&B&&Q.push(new Yt(l.key,l.value,'missing required property "property"')),s==="identity"||l.value.stops||Q.push(new Yt(l.key,l.value,'missing required property "stops"')),s==="exponential"&&l.valueSpec.expression&&!lo(l.valueSpec)&&Q.push(new Yt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(F&&!So(l.valueSpec)?Q.push(new Yt(l.key,l.value,"property functions not supported")):B&&!cA(l.valueSpec)&&Q.push(new Yt(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!U||l.value.property!==void 0||Q.push(new Yt(l.key,l.value,'"property" property is required')),Q;function K(J){let oe=[];const le=J.value,he=J.key;if(pn(le)!=="array")return[new Yt(he,le,`array expected, ${pn(le)} found`)];if(le.length!==2)return[new Yt(he,le,`array length 2 expected, length ${le.length} found`)];if(U){if(pn(le[0])!=="object")return[new Yt(he,le,`object expected, ${pn(le[0])} found`)];if(le[0].zoom===void 0)return[new Yt(he,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new Yt(he,le,"object stop key must have value")];if(v&&v>$n(le[0].zoom))return[new Yt(he,le[0].zoom,"stop zoom values must appear in ascending order")];$n(le[0].zoom)!==v&&(v=$n(le[0].zoom),p=void 0,_={}),oe=oe.concat(co({key:`${he}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Zs,value:X}}))}else oe=oe.concat(X({key:`${he}[0]`,value:le[0],validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec},le));return Ql(mo(le[1]))?oe.concat([new Yt(`${he}[1]`,le[1],"expressions are not allowed in function stops.")]):oe.concat(J.validateSpec({key:`${he}[1]`,value:le[1],valueSpec:t,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec}))}function X(J,oe){const le=pn(J.value),he=$n(J.value),Be=J.value!==null?J.value:oe;if(A){if(le!==A)return[new Yt(J.key,Be,`${le} stop domain type must match previous stop domain type ${A}`)]}else A=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new Yt(J.key,Be,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&s!=="categorical"){let tt=`number expected, ${le} found`;return So(t)&&s===void 0&&(tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yt(J.key,Be,tt)]}return s!=="categorical"||le!=="number"||isFinite(he)&&Math.floor(he)===he?s!=="categorical"&&le==="number"&&p!==void 0&&he<p?[new Yt(J.key,Be,"stop domain values must appear in ascending order")]:(p=he,s==="categorical"&&he in _?[new Yt(J.key,Be,"stop domain values must be unique")]:(_[he]=!0,[])):[new Yt(J.key,Be,`integer expected, found ${he}`)]}}function Hc(l){const t=(l.expressionContext==="property"?hc:Qc)(mo(l.value),l.valueSpec);if(t.result==="error")return t.value.map((A=>new Yt(`${l.key}${A.key}`,l.value,A.message)));const s=t.value.expression||t.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new Yt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!lA(s))return[new Yt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!lA(s))return[new Yt(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!DA(s,["zoom","feature-state"]))return[new Yt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!UA(s))return[new Yt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Da(l){const t=l.key,s=l.value,A=pn(s);return A!=="string"?[new Yt(t,s,`color expected, ${A} found`)]:an.parse(String(s))?[]:[new Yt(t,s,`color expected, "${s}" found`)]}function Ra(l){const t=l.key,s=l.value,A=l.valueSpec,p=[];return Array.isArray(A.values)?A.values.indexOf($n(s))===-1&&p.push(new Yt(t,s,`expected one of [${A.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(A.values).indexOf($n(s))===-1&&p.push(new Yt(t,s,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Na(l){return QA(mo(l.value))?Hc(Zn({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):HA(l)}function HA(l){const t=l.value,s=l.key;if(pn(t)!=="array")return[new Yt(s,t,`array expected, ${pn(t)} found`)];const A=l.styleSpec;let p,v=[];if(t.length<1)return[new Yt(s,t,"filter array must have at least 1 element")];switch(v=v.concat(Ra({key:`${s}[0]`,value:t[0],valueSpec:A.filter_operator,style:l.style,styleSpec:l.styleSpec})),$n(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&$n(t[1])==="$type"&&v.push(new Yt(s,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&v.push(new Yt(s,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(p=pn(t[1]),p!=="string"&&v.push(new Yt(`${s}[1]`,t[1],`string expected, ${p} found`)));for(let _=2;_<t.length;_++)p=pn(t[_]),$n(t[1])==="$type"?v=v.concat(Ra({key:`${s}[${_}]`,value:t[_],valueSpec:A.geometry_type,style:l.style,styleSpec:l.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new Yt(`${s}[${_}]`,t[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<t.length;_++)v=v.concat(HA({key:`${s}[${_}]`,value:t[_],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":p=pn(t[1]),t.length!==2?v.push(new Yt(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new Yt(`${s}[1]`,t[1],`string expected, ${p} found`))}return v}function Qu(l,t){const s=l.key,A=l.validateSpec,p=l.style,v=l.styleSpec,_=l.value,B=l.objectKey,F=v[`${t}_${l.layerType}`];if(!F)return[];const U=B.match(/^(.*)-transition$/);if(t==="paint"&&U&&F[U[1]]&&F[U[1]].transition)return A({key:s,value:_,valueSpec:v.transition,style:p,styleSpec:v});const Q=l.valueSpec||F[B];if(!Q)return[new Yt(s,_,`unknown property "${B}"`)];let K;if(pn(_)==="string"&&So(Q)&&!Q.tokens&&(K=/^{([^}]+)}$/.exec(_)))return[new Yt(s,_,`"${B}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(K[1])} }\`.`)];const X=[];return l.layerType==="symbol"&&B==="text-font"&&AA(mo(_))&&$n(_.type)==="identity"&&X.push(new Yt(s,_,'"text-font" does not support identity functions')),X.concat(A({key:l.key,value:_,valueSpec:Q,style:p,styleSpec:v,expressionContext:"property",propertyType:t,propertyKey:B}))}function Ol(l){return Qu(l,"paint")}function Qa(l){return Qu(l,"layout")}function li(l){let t=[];const s=l.value,A=l.key,p=l.style,v=l.styleSpec;if(pn(s)!=="object")return[new Yt(A,s,`object expected, ${pn(s)} found`)];s.type||s.ref||t.push(new Yt(A,s,'either "type" or "ref" is required'));let _=$n(s.type);const B=$n(s.ref);if(s.id){const F=$n(s.id);for(let U=0;U<l.arrayIndex;U++){const Q=p.layers[U];$n(Q.id)===F&&t.push(new Yt(A,s.id,`duplicate layer id "${s.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in s){let F;["type","source","source-layer","filter","layout"].forEach((U=>{U in s&&t.push(new Yt(A,s[U],`"${U}" is prohibited for ref layers`))})),p.layers.forEach((U=>{$n(U.id)===B&&(F=U)})),F?F.ref?t.push(new Yt(A,s.ref,"ref cannot reference another ref layer")):_=$n(F.type):t.push(new Yt(A,s.ref,`ref layer "${B}" not found`))}else if(_!=="background")if(s.source){const F=p.sources&&p.sources[s.source],U=F&&$n(F.type);F?U==="vector"&&_==="raster"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a raster source`)):U!=="raster-dem"&&_==="hillshade"||U!=="raster-dem"&&_==="color-relief"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a raster-dem source`)):U==="raster"&&_!=="raster"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a vector source`)):U!=="vector"||s["source-layer"]?U==="raster-dem"&&_!=="hillshade"&&_!=="color-relief"?t.push(new Yt(A,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||U==="geojson"&&F.lineMetrics||t.push(new Yt(A,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Yt(A,s,`layer "${s.id}" must specify a "source-layer"`)):t.push(new Yt(A,s.source,`source "${s.source}" not found`))}else t.push(new Yt(A,s,'missing required property "source"'));return t=t.concat(co({key:A,value:s,valueSpec:v.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${A}.type`,value:s.type,valueSpec:v.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:Na,layout:F=>co({layer:s,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":U=>Qa(Zn({layerType:_},U))}}),paint:F=>co({layer:s,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":U=>Ol(Zn({layerType:_},U))}})}})),t}function Xn(l){const t=l.value,s=l.key,A=pn(t);return A!=="string"?[new Yt(s,t,`string expected, ${A} found`)]:[]}const zl={promoteId:function({key:l,value:t}){if(pn(t)==="string")return Xn({key:l,value:t});{const s=[];for(const A in t)s.push(...Xn({key:`${l}.${A}`,value:t[A]}));return s}}};function Ns(l){const t=l.value,s=l.key,A=l.styleSpec,p=l.style,v=l.validateSpec;if(!t.type)return[new Yt(s,t,'"type" is required')];const _=$n(t.type);let B;switch(_){case"vector":case"raster":return B=co({key:s,value:t,valueSpec:A[`source_${_.replace("-","_")}`],style:l.style,styleSpec:A,objectElementValidators:zl,validateSpec:v}),B;case"raster-dem":return B=(function(F){var U;const Q=(U=F.sourceName)!==null&&U!==void 0?U:"",K=F.value,X=F.styleSpec,J=X.source_raster_dem,oe=F.style;let le=[];const he=pn(K);if(K===void 0)return le;if(he!=="object")return le.push(new Yt("source_raster_dem",K,`object expected, ${he} found`)),le;const Be=$n(K.encoding)==="custom",tt=["redFactor","greenFactor","blueFactor","baseShift"],Se=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const ke in K)!Be&&tt.includes(ke)?le.push(new Yt(ke,K[ke],`In "${Q}": "${ke}" is only valid when "encoding" is set to "custom". ${Se} encoding found`)):J[ke]?le=le.concat(F.validateSpec({key:ke,value:K[ke],valueSpec:J[ke],validateSpec:F.validateSpec,style:oe,styleSpec:X})):le.push(new Yt(ke,K[ke],`unknown property "${ke}"`));return le})({sourceName:s,value:t,style:l.style,styleSpec:A,validateSpec:v}),B;case"geojson":if(B=co({key:s,value:t,valueSpec:A.source_geojson,style:p,styleSpec:A,validateSpec:v,objectElementValidators:zl}),t.cluster)for(const F in t.clusterProperties){const[U,Q]=t.clusterProperties[F],K=typeof U=="string"?[U,["accumulated"],["get",F]]:U;B.push(...Hc({key:`${s}.${F}.map`,value:Q,expressionContext:"cluster-map"})),B.push(...Hc({key:`${s}.${F}.reduce`,value:K,expressionContext:"cluster-reduce"}))}return B;case"video":return co({key:s,value:t,valueSpec:A.source_video,style:p,validateSpec:v,styleSpec:A});case"image":return co({key:s,value:t,valueSpec:A.source_image,style:p,validateSpec:v,styleSpec:A});case"canvas":return[new Yt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ra({key:`${s}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Xs(l){const t=l.value,s=l.styleSpec,A=s.light,p=l.style;let v=[];const _=pn(t);if(t===void 0)return v;if(_!=="object")return v=v.concat([new Yt("light",t,`object expected, ${_} found`)]),v;for(const B in t){const F=B.match(/^(.*)-transition$/);v=v.concat(F&&A[F[1]]&&A[F[1]].transition?l.validateSpec({key:B,value:t[B],valueSpec:s.transition,validateSpec:l.validateSpec,style:p,styleSpec:s}):A[B]?l.validateSpec({key:B,value:t[B],valueSpec:A[B],validateSpec:l.validateSpec,style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)])}return v}function jc(l){const t=l.value,s=l.styleSpec,A=s.sky,p=l.style,v=pn(t);if(t===void 0)return[];if(v!=="object")return[new Yt("sky",t,`object expected, ${v} found`)];let _=[];for(const B in t)_=_.concat(A[B]?l.validateSpec({key:B,value:t[B],valueSpec:A[B],style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return _}function Vc(l){const t=l.value,s=l.styleSpec,A=s.terrain,p=l.style;let v=[];const _=pn(t);if(t===void 0)return v;if(_!=="object")return v=v.concat([new Yt("terrain",t,`object expected, ${_} found`)]),v;for(const B in t)v=v.concat(A[B]?l.validateSpec({key:B,value:t[B],valueSpec:A[B],validateSpec:l.validateSpec,style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return v}function go(l){let t=[];const s=l.value,A=l.key;if(Array.isArray(s)){const p=[],v=[];for(const _ in s)s[_].id&&p.includes(s[_].id)&&t.push(new Yt(A,s,`all the sprites' ids must be unique, but ${s[_].id} is duplicated`)),p.push(s[_].id),s[_].url&&v.includes(s[_].url)&&t.push(new Yt(A,s,`all the sprites' URLs must be unique, but ${s[_].url} is duplicated`)),v.push(s[_].url),t=t.concat(co({key:`${A}[${_}]`,value:s[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return t}return Xn({key:A,value:s})}function fu(l){return t=l.value,t&&t.constructor===Object?[]:[new Yt(l.key,l.value,`object expected, ${pn(l.value)} found`)];var t}const Ou={"*":()=>[],array:Rs,boolean:function(l){const t=l.value,s=l.key,A=pn(t);return A!=="boolean"?[new Yt(s,t,`boolean expected, ${A} found`)]:[]},number:Zs,color:Da,constants:va,enum:Ra,filter:Na,function:Nu,layer:li,object:co,source:Ns,light:Xs,sky:jc,terrain:Vc,projection:function(l){const t=l.value,s=l.styleSpec,A=s.projection,p=l.style,v=pn(t);if(t===void 0)return[];if(v!=="object")return[new Yt("projection",t,`object expected, ${v} found`)];let _=[];for(const B in t)_=_.concat(A[B]?l.validateSpec({key:B,value:t[B],valueSpec:A[B],style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return _},projectionDefinition:function(l){const t=l.key;let s=l.value;s=s instanceof String?s.valueOf():s;const A=pn(s);return A!=="array"||(function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"})(s)||(function(p){return!!["interpolate","step","literal"].includes(p[0])})(s)?["array","string"].includes(A)?[]:[new Yt(t,s,`projection expected, invalid type "${A}" found`)]:[new Yt(t,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:Xn,formatted:function(l){return Xn(l).length===0?[]:Hc(l)},resolvedImage:function(l){return Xn(l).length===0?[]:Hc(l)},padding:function(l){const t=l.key,s=l.value;if(pn(s)==="array"){if(s.length<1||s.length>4)return[new Yt(t,s,`padding requires 1 to 4 values; ${s.length} values found`)];const A={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(l.validateSpec({key:`${t}[${v}]`,value:s[v],validateSpec:l.validateSpec,valueSpec:A}));return p}return Zs({key:t,value:s,valueSpec:{}})},numberArray:function(l){const t=l.key,s=l.value;if(pn(s)==="array"){const A={type:"number"};if(s.length<1)return[new Yt(t,s,"array length at least 1 expected, length 0 found")];let p=[];for(let v=0;v<s.length;v++)p=p.concat(l.validateSpec({key:`${t}[${v}]`,value:s[v],validateSpec:l.validateSpec,valueSpec:A}));return p}return Zs({key:t,value:s,valueSpec:{}})},colorArray:function(l){const t=l.key,s=l.value;if(pn(s)==="array"){if(s.length<1)return[new Yt(t,s,"array length at least 1 expected, length 0 found")];let A=[];for(let p=0;p<s.length;p++)A=A.concat(Da({key:`${t}[${p}]`,value:s[p]}));return A}return Da({key:t,value:s})},variableAnchorOffsetCollection:function(l){const t=l.key,s=l.value,A=pn(s),p=l.styleSpec;if(A!=="array"||s.length<1||s.length%2!=0)return[new Yt(t,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<s.length;_+=2)v=v.concat(Ra({key:`${t}[${_}]`,value:s[_],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Rs({key:`${t}[${_+1}]`,value:s[_+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:p}));return v},sprite:go,state:fu};function dA(l){const t=l.value,s=l.valueSpec,A=l.styleSpec;return l.validateSpec=dA,s.expression&&AA($n(t))?Nu(l):s.expression&&Ql(mo(t))?Hc(l):s.type&&Ou[s.type]?Ou[s.type](l):co(Zn({},l,{valueSpec:s.type?A[s.type]:s}))}function Oa(l){const t=l.value,s=l.key,A=Xn(l);return A.length||(t.indexOf("{fontstack}")===-1&&A.push(new Yt(s,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&A.push(new Yt(s,t,'"glyphs" url must include a "{range}" token'))),A}function _a(l,t=mt){let s=[];return s=s.concat(dA({key:"",value:l,valueSpec:t.$root,styleSpec:t,style:l,validateSpec:dA,objectElementValidators:{glyphs:Oa,"*":()=>[]}})),l.constants&&(s=s.concat(va({key:"constants",value:l.constants}))),jA(s)}function Qs(l){return function(t){return l(Object.assign({},t,{validateSpec:dA}))}}function jA(l){return[].concat(l).sort(((t,s)=>t.line-s.line))}function T(l){return function(...t){return jA(l.apply(this,t))}}_a.source=T(Qs(Ns)),_a.sprite=T(Qs(go)),_a.glyphs=T(Qs(Oa)),_a.light=T(Qs(Xs)),_a.sky=T(Qs(jc)),_a.terrain=T(Qs(Vc)),_a.state=T(Qs(fu)),_a.layer=T(Qs(li)),_a.filter=T(Qs(Na)),_a.paintProperty=T(Qs(Ol)),_a.layoutProperty=T(Qs(Qa));const R=mt,$=_a,re=$.light,ge=$.sky,we=$.paintProperty,Ee=$.layoutProperty;function Pe(l,t){let s=!1;if(t&&t.length)for(const A of t)l.fire(new rn(new Error(A.message))),s=!0;return s}class Re{constructor(t,s,A){const p=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const _=new Int32Array(this.arrayBuffer);t=_[0],this.d=(s=_[1])+2*(A=_[2]);for(let F=0;F<this.d*this.d;F++){const U=_[3+F],Q=_[3+F+1];p.push(U===Q?null:_.subarray(U,Q))}const B=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],B),this.bboxes=_.subarray(B),this.insert=this._insertReadonly}else{this.d=s+2*A;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=t,this.padding=A,this.scale=s/t,this.uid=0;const v=A/s*t;this.min=-v,this.max=t+v}insert(t,s,A,p,v){this._forEachCell(s,A,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(s),this.bboxes.push(A),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,s,A,p,v,_){this.cells[v].push(_)}query(t,s,A,p,v){const _=this.min,B=this.max;if(t<=_&&s<=_&&B<=A&&B<=p&&!v)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(t,s,A,p,this._queryCell,F,{},v),F}}_queryCell(t,s,A,p,v,_,B,F){const U=this.cells[v];if(U!==null){const Q=this.keys,K=this.bboxes;for(let X=0;X<U.length;X++){const J=U[X];if(B[J]===void 0){const oe=4*J;(F?F(K[oe+0],K[oe+1],K[oe+2],K[oe+3]):t<=K[oe+2]&&s<=K[oe+3]&&A>=K[oe+0]&&p>=K[oe+1])?(B[J]=!0,_.push(Q[J])):B[J]=!1}}}}_forEachCell(t,s,A,p,v,_,B,F){const U=this._convertToCellCoord(t),Q=this._convertToCellCoord(s),K=this._convertToCellCoord(A),X=this._convertToCellCoord(p);for(let J=U;J<=K;J++)for(let oe=Q;oe<=X;oe++){const le=this.d*oe+J;if((!F||F(this._convertFromCellCoord(J),this._convertFromCellCoord(oe),this._convertFromCellCoord(J+1),this._convertFromCellCoord(oe+1)))&&v.call(this,t,s,A,p,le,_,B,F))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,s=3+this.cells.length+1+1;let A=0;for(let _=0;_<this.cells.length;_++)A+=this.cells[_].length;const p=new Int32Array(s+A+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let _=0;_<t.length;_++){const B=t[_];p[3+_]=v,p.set(B,v),v+=B.length}return p[3+t.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+t.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(t,s){const A=t.toArrayBuffer();return s&&s.push(A),{buffer:A}}static deserialize(t){return new Re(t.buffer)}}const Ke={};function We(l,t,s={}){if(Ke[l])throw new Error(`${l} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:l,writeable:!1}),Ke[l]={klass:t,omit:s.omit||[],shallow:s.shallow||[]}}We("Object",Object),We("Set",Set),We("TransferableGridIndex",Re),We("Color",an),We("Error",Error),We("AJAXError",ct),We("ResolvedImage",uo),We("StylePropertyFunction",Au),We("StyleExpression",uc,{omit:["_evaluator"]}),We("ZoomDependentExpression",NA),We("ZoomConstantExpression",Oc),We("CompoundExpression",fo,{omit:["_evaluate"]});for(const l in kc)kc[l]._classRegistryKey||We(`Expression_${l}`,kc[l]);function kt(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Ye(l){return l.$name||l.constructor._classRegistryKey}function Bt(l){return!(function(t){if(t===null||typeof t!="object")return!1;const s=Ye(t);return!(!s||s==="Object")})(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||kt(l)||$r(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function Tt(l,t){if(Bt(l))return(kt(l)||$r(l))&&t&&t.push(l),ArrayBuffer.isView(l)&&t&&t.push(l.buffer),l instanceof ImageData&&t&&t.push(l.data.buffer),l;if(Array.isArray(l)){const v=[];for(const _ of l)v.push(Tt(_,t));return v}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const s=Ye(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Ke[s])throw new Error(`${s} is not registered.`);const{klass:A}=Ke[s],p=A.serialize?A.serialize(l,t):{};if(A.serialize){if(t&&p===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in l){if(!l.hasOwnProperty(v)||Ke[s].omit.indexOf(v)>=0)continue;const _=l[v];p[v]=Ke[s].shallow.indexOf(v)>=0?_:Tt(_,t)}l instanceof Error&&(p.message=l.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(p.$name=s),p}function Zt(l){if(Bt(l))return l;if(Array.isArray(l))return l.map(Zt);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const t=Ye(l)||"Object";if(!Ke[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:s}=Ke[t];if(!s)throw new Error(`can't deserialize unregistered class ${t}`);if(s.deserialize)return s.deserialize(l);const A=Object.create(s.prototype);for(const p of Object.keys(l)){if(p==="$name")continue;const v=l[p];A[p]=Ke[t].shallow.indexOf(p)>=0?v:Zt(v)}return A}class Ut{constructor(){this.first=!0}update(t,s){const A=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=A,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=A,!0):(this.lastFloorZoom>A?(this.lastIntegerZoom=A+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<A&&(this.lastIntegerZoom=A,this.lastIntegerZoomTime=s),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=A,!0))}}function qt(l){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))}function Wt(l){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))}function tr(l){return/\s/u.test(String.fromCodePoint(l))}function er(l){for(const t of l)if(Wt(t.codePointAt(0)))return!0;return!1}function sn(l){for(const t of l)if(!Zr(t.codePointAt(0)))return!1;return!0}function zr(l){const t=l.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(t.join("|"),"u")}const Cn=zr(["Arab","Dupl","Mong","Ougr","Syrc"]);function Zr(l){return!Cn.test(String.fromCodePoint(l))}function Qn(l){return!(Wt(l)||(t=l,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(t))));var t}const Ni=zr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sn(l){return Ni.test(String.fromCodePoint(l))}function Hr(l,t){return!(!t&&Sn(l)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(l)))}function Fr(l){for(const t of l)if(Sn(t.codePointAt(0)))return!0;return!1}const pi=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(pi.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,t){return o(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const s=l.pluginURL,A=new Promise((v=>{this.loadScriptResolve=v}));t(s);const p=new Promise((v=>setTimeout((()=>v()),this.TIMEOUT)));if(yield Promise.race([A,p]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:s};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Mr{constructor(t,s){this.isSupportedScript=zn,this.zoom=t,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Ut,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ut,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,s=t-Math.floor(t),A=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*A}:{fromScale:.5,toScale:1,t:1-(1-A)*s}}}function zn(l){return(function(t,s){for(const A of t)if(!Hr(A.codePointAt(0),s))return!1;return!0})(l,pi.getRTLTextPluginStatus()==="loaded")}const mi="-transition";class as{constructor(t,s,A){this.property=t,this.value=s,this.expression=(function(p,v,_){if(AA(p))return new Au(p,v);if(Ql(p)){const B=hc(p,v,_);if(B.result==="error")throw new Error(B.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return B.value}{let B=p;return v.type==="color"&&typeof p=="string"?B=an.parse(p):v.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?v.type!=="numberArray"||typeof p!="number"&&!Array.isArray(p)?v.type!=="colorArray"||typeof p!="string"&&!Array.isArray(p)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?B=Wi.parse(p):v.type==="projectionDefinition"&&typeof p=="string"&&(B=ws.parse(p)):B=cn.parse(p):B=Jn.parse(p):B=qr.parse(p),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>B}}})(s===void 0?t.specification.default:s,t.specification,A)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,s,A){return this.property.possiblyEvaluate(this,t,s,A)}}class ls{constructor(t,s){this.property=t,this.value=new as(t,void 0,s)}transitioned(t,s){return new Bs(this.property,this.value,s,_t({},t.transition,this.transition),t.now)}untransitioned(){return new Bs(this.property,this.value,null,{},0)}}class Qi{constructor(t,s){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._globalState=s}getValue(t){return ar(this._values[t].value.value)}setValue(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ls(this._values[t].property,this._globalState)),this._values[t].value=new as(this._values[t].property,s===null?void 0:ar(s),this._globalState)}getTransition(t){return ar(this._values[t].transition)}setTransition(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ls(this._values[t].property,this._globalState)),this._values[t].transition=ar(s)||void 0}serialize(){const t={};for(const s of Object.keys(this._values)){const A=this.getValue(s);A!==void 0&&(t[s]=A);const p=this.getTransition(s);p!==void 0&&(t[`${s}${mi}`]=p)}return t}transitioned(t,s){const A=new Cs(this._properties);for(const p of Object.keys(this._values))A._values[p]=this._values[p].transitioned(t,s._values[p]);return A}untransitioned(){const t=new Cs(this._properties);for(const s of Object.keys(this._values))t._values[s]=this._values[s].untransitioned();return t}}class Bs{constructor(t,s,A,p,v){this.property=t,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,t.specification.transition&&(p.delay||p.duration)&&(this.prior=A)}possiblyEvaluate(t,s,A){const p=t.now||0,v=this.value.possiblyEvaluate(t,s,A),_=this.prior;if(_){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return _.possiblyEvaluate(t,s,A);{const B=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(t,s,A),v,Ce(B))}}return v}}class Cs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,s,A){const p=new Yn(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(t,s,A);return p}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Oi{constructor(t,s){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._globalState=s}hasValue(t){return this._values[t].value!==void 0}getValue(t){return ar(this._values[t].value)}setValue(t,s){this._values[t]=new as(this._values[t].property,s===null?void 0:ar(s),this._globalState)}serialize(){const t={};for(const s of Object.keys(this._values)){const A=this.getValue(s);A!==void 0&&(t[s]=A)}return t}possiblyEvaluate(t,s,A){const p=new Yn(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(t,s,A);return p}}class Fn{constructor(t,s,A){this.property=t,this.value=s,this.parameters=A}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,s,A,p){return this.property.evaluate(this.value,this.parameters,t,s,A,p)}}class Yn{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class gr{constructor(t){this.specification=t}possiblyEvaluate(t,s){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(s)}interpolate(t,s,A){const p=br[this.specification.type];return p?p(t,s,A):t}}class xr{constructor(t,s){this.specification=t,this.overrides=s}possiblyEvaluate(t,s,A,p){return new Fn(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(s,null,{},A,p)}:t.expression,s)}interpolate(t,s,A){if(t.value.kind!=="constant"||s.value.kind!=="constant")return t;if(t.value.value===void 0||s.value.value===void 0)return new Fn(this,{kind:"constant",value:void 0},t.parameters);const p=br[this.specification.type];if(p){const v=p(t.value.value,s.value.value,A);return new Fn(this,{kind:"constant",value:v},t.parameters)}return t}evaluate(t,s,A,p,v,_){return t.kind==="constant"?t.value:t.evaluate(s,A,p,v,_)}}class Ti extends xr{possiblyEvaluate(t,s,A,p){if(t.value===void 0)return new Fn(this,{kind:"constant",value:void 0},s);if(t.expression.kind==="constant"){const v=t.expression.evaluate(s,null,{},A,p),_=t.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,B=this._calculate(_,_,_,s);return new Fn(this,{kind:"constant",value:B},s)}if(t.expression.kind==="camera"){const v=this._calculate(t.expression.evaluate({zoom:s.zoom-1}),t.expression.evaluate({zoom:s.zoom}),t.expression.evaluate({zoom:s.zoom+1}),s);return new Fn(this,{kind:"constant",value:v},s)}return new Fn(this,t.expression,s)}evaluate(t,s,A,p,v,_){if(t.kind==="source"){const B=t.evaluate(s,A,p,v,_);return this._calculate(B,B,B,s)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(s.zoom)-1},A,p),t.evaluate({zoom:Math.floor(s.zoom)},A,p),t.evaluate({zoom:Math.floor(s.zoom)+1},A,p),s):t.value}_calculate(t,s,A,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:A,to:s}}interpolate(t){return t}}class Vi{constructor(t){this.specification=t}possiblyEvaluate(t,s,A,p){if(t.value!==void 0){if(t.expression.kind==="constant"){const v=t.expression.evaluate(s,null,{},A,p);return this._calculate(v,v,v,s)}return this._calculate(t.expression.evaluate(new Mr(Math.floor(s.zoom-1),s)),t.expression.evaluate(new Mr(Math.floor(s.zoom),s)),t.expression.evaluate(new Mr(Math.floor(s.zoom+1),s)),s)}}_calculate(t,s,A,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:A,to:s}}interpolate(t){return t}}class ei{constructor(t){this.specification=t}possiblyEvaluate(t,s,A,p){return!!t.expression.evaluate(s,null,{},A,p)}interpolate(){return!1}}class ci{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in t){const A=t[s];A.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new as(A,void 0,void 0),v=this.defaultTransitionablePropertyValues[s]=new ls(A,void 0);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}We("DataDrivenProperty",xr),We("DataConstantProperty",gr),We("CrossFadedDataDrivenProperty",Ti),We("CrossFadedProperty",Vi),We("ColorRampProperty",ei);class Rn extends Tr{constructor(t,s,A){if(super(),this.id=t.id,this.type=t.type,this._globalState=A,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter,this._featureFilter=fc(t.filter,A)),s.layout&&(this._unevaluatedLayout=new Oi(s.layout,A)),s.paint)){this._transitionablePaint=new Qi(s.paint,A);for(const p in t.paint)this.setPaintProperty(p,t.paint[p],{validate:!1});for(const p in t.layout)this.setLayoutProperty(p,t.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yn(s.paint)}}setFilter(t){this.filter=t,this._featureFilter=fc(t,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}getLayoutAffectingGlobalStateRefs(){const t=new Set;if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const A=this._unevaluatedLayout._values[s];for(const p of A.getGlobalStateRefs())t.add(p)}for(const s of this._featureFilter.getGlobalStateRefs())t.add(s);return t}getPaintAffectingGlobalStateRefs(){var t;const s=new globalThis.Map;if(this._transitionablePaint)for(const A in this._transitionablePaint._values){const p=this._transitionablePaint._values[A].value;for(const v of p.getGlobalStateRefs()){const _=(t=s.get(v))!==null&&t!==void 0?t:[];_.push({name:A,value:p.value}),s.set(v,_)}}return s}setLayoutProperty(t,s,A={}){s!=null&&this._validate(Ee,`layers.${this.id}.layout.${t}`,t,s,A)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,s):this.visibility=s)}getPaintProperty(t){return t.endsWith(mi)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,s,A={}){if(s!=null&&this._validate(we,`layers.${this.id}.paint.${t}`,t,s,A))return!1;if(t.endsWith(mi))return this._transitionablePaint.setTransition(t.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[t],v=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),B=p.value;this._transitionablePaint.setValue(t,s),this._handleSpecialPaintPropertyUpdate(t);const F=this._transitionablePaint._values[t].value;return F.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(t,B,F)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,s,A){return!1}isHidden(t,s=!1){return!!(this.minzoom&&t<(s?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,s){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,s)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Kt(t,((s,A)=>!(s===void 0||A==="layout"&&!Object.keys(s).length||A==="paint"&&!Object.keys(s).length)))}_validate(t,s,A,p,v={}){return(!v||v.validate!==!1)&&Pe(this,t.call($,{key:s,layerType:this.type,objectKey:A,value:p,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const s=this.paint.get(t);if(s instanceof Fn&&So(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let wi;var Es={get paint(){return wi=wi||new ci({"raster-opacity":new gr(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new gr(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gr(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gr(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new gr(mt.paint_raster["raster-saturation"]),"raster-contrast":new gr(mt.paint_raster["raster-contrast"]),"raster-resampling":new gr(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new gr(mt.paint_raster["raster-fade-duration"])})}};class Ys extends Rn{constructor(t,s){super(t,Es,s)}}const Fo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ki{constructor(t,s){this._structArray=t,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class In{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,s){return t._trim(),s&&(t.isTransferred=!0,s.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const s=Object.create(this.prototype);return s.arrayBuffer=t.arrayBuffer,s.length=t.length,s.capacity=t.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Vn(l,t=1){let s=0,A=0;return{members:l.map((p=>{const v=Fo[p.type].BYTES_PER_ELEMENT,_=s=xi(s,Math.max(t,v)),B=p.components||1;return A=Math.max(A,v),s+=v*B,{name:p.name,type:p.type,components:B,offset:_}})),size:xi(s,Math.max(A,t)),alignment:t}}function xi(l,t){return Math.ceil(l/t)*t}class Ss extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.int16[p+0]=s,this.int16[p+1]=A,t}}Ss.prototype.bytesPerElement=4,We("StructArrayLayout2i4",Ss);class Io extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.int16[v+0]=s,this.int16[v+1]=A,this.int16[v+2]=p,t}}Io.prototype.bytesPerElement=6,We("StructArrayLayout3i6",Io);class Js extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p){const v=this.length;return this.resize(v+1),this.emplace(v,t,s,A,p)}emplace(t,s,A,p,v){const _=4*t;return this.int16[_+0]=s,this.int16[_+1]=A,this.int16[_+2]=p,this.int16[_+3]=v,t}}Js.prototype.bytesPerElement=8,We("StructArrayLayout4i8",Js);class Fs extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=6*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.int16[F+2]=p,this.int16[F+3]=v,this.int16[F+4]=_,this.int16[F+5]=B,t}}Fs.prototype.bytesPerElement=12,We("StructArrayLayout2i4i12",Fs);class Ji extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=4*t,U=8*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.uint8[U+4]=p,this.uint8[U+5]=v,this.uint8[U+6]=_,this.uint8[U+7]=B,t}}Ji.prototype.bytesPerElement=8,We("StructArrayLayout2i4ub8",Ji);class za extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.float32[p+0]=s,this.float32[p+1]=A,t}}za.prototype.bytesPerElement=8,We("StructArrayLayout2f8",za);class Ha extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q){const K=this.length;return this.resize(K+1),this.emplace(K,t,s,A,p,v,_,B,F,U,Q)}emplace(t,s,A,p,v,_,B,F,U,Q,K){const X=10*t;return this.uint16[X+0]=s,this.uint16[X+1]=A,this.uint16[X+2]=p,this.uint16[X+3]=v,this.uint16[X+4]=_,this.uint16[X+5]=B,this.uint16[X+6]=F,this.uint16[X+7]=U,this.uint16[X+8]=Q,this.uint16[X+9]=K,t}}Ha.prototype.bytesPerElement=20,We("StructArrayLayout10ui20",Ha);class Gc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F){const U=this.length;return this.resize(U+1),this.emplace(U,t,s,A,p,v,_,B,F)}emplace(t,s,A,p,v,_,B,F,U){const Q=8*t;return this.uint16[Q+0]=s,this.uint16[Q+1]=A,this.uint16[Q+2]=p,this.uint16[Q+3]=v,this.uint16[Q+4]=_,this.uint16[Q+5]=B,this.uint16[Q+6]=F,this.uint16[Q+7]=U,t}}Gc.prototype.bytesPerElement=16,We("StructArrayLayout8ui16",Gc);class ja extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X){const J=this.length;return this.resize(J+1),this.emplace(J,t,s,A,p,v,_,B,F,U,Q,K,X)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J){const oe=12*t;return this.int16[oe+0]=s,this.int16[oe+1]=A,this.int16[oe+2]=p,this.int16[oe+3]=v,this.uint16[oe+4]=_,this.uint16[oe+5]=B,this.uint16[oe+6]=F,this.uint16[oe+7]=U,this.int16[oe+8]=Q,this.int16[oe+9]=K,this.int16[oe+10]=X,this.int16[oe+11]=J,t}}ja.prototype.bytesPerElement=24,We("StructArrayLayout4i4ui4i24",ja);class Hl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.float32[v+0]=s,this.float32[v+1]=A,this.float32[v+2]=p,t}}Hl.prototype.bytesPerElement=12,We("StructArrayLayout3f12",Hl);class VA extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint32[1*t+0]=s,t}}VA.prototype.bytesPerElement=4,We("StructArrayLayout1ul4",VA);class gi extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U){const Q=this.length;return this.resize(Q+1),this.emplace(Q,t,s,A,p,v,_,B,F,U)}emplace(t,s,A,p,v,_,B,F,U,Q){const K=10*t,X=5*t;return this.int16[K+0]=s,this.int16[K+1]=A,this.int16[K+2]=p,this.int16[K+3]=v,this.int16[K+4]=_,this.int16[K+5]=B,this.uint32[X+3]=F,this.uint16[K+8]=U,this.uint16[K+9]=Q,t}}gi.prototype.bytesPerElement=20,We("StructArrayLayout6i1ul2ui20",gi);class Wo extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=6*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.int16[F+2]=p,this.int16[F+3]=v,this.int16[F+4]=_,this.int16[F+5]=B,t}}Wo.prototype.bytesPerElement=12,We("StructArrayLayout2i2i2i12",Wo);class pA extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v){const _=this.length;return this.resize(_+1),this.emplace(_,t,s,A,p,v)}emplace(t,s,A,p,v,_){const B=4*t,F=8*t;return this.float32[B+0]=s,this.float32[B+1]=A,this.float32[B+2]=p,this.int16[F+6]=v,this.int16[F+7]=_,t}}pA.prototype.bytesPerElement=16,We("StructArrayLayout2f1f2i16",pA);class du extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=16*t,U=4*t,Q=8*t;return this.uint8[F+0]=s,this.uint8[F+1]=A,this.float32[U+1]=p,this.float32[U+2]=v,this.int16[Q+6]=_,this.int16[Q+7]=B,t}}du.prototype.bytesPerElement=16,We("StructArrayLayout2ub2f2i16",du);class jl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.uint16[v+0]=s,this.uint16[v+1]=A,this.uint16[v+2]=p,t}}jl.prototype.bytesPerElement=6,We("StructArrayLayout3ui6",jl);class Vl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,Be){const tt=this.length;return this.resize(tt+1),this.emplace(tt,t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,Be)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,Be,tt){const Se=24*t,ke=12*t,it=48*t;return this.int16[Se+0]=s,this.int16[Se+1]=A,this.uint16[Se+2]=p,this.uint16[Se+3]=v,this.uint32[ke+2]=_,this.uint32[ke+3]=B,this.uint32[ke+4]=F,this.uint16[Se+10]=U,this.uint16[Se+11]=Q,this.uint16[Se+12]=K,this.float32[ke+7]=X,this.float32[ke+8]=J,this.uint8[it+36]=oe,this.uint8[it+37]=le,this.uint8[it+38]=he,this.uint32[ke+10]=Be,this.int16[Se+22]=tt,t}}Vl.prototype.bytesPerElement=48,We("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Vl);class Va extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,Be,tt,Se,ke,it,ht,Mt,Xt,Vt,ir,_r,or){const $t=this.length;return this.resize($t+1),this.emplace($t,t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,Be,tt,Se,ke,it,ht,Mt,Xt,Vt,ir,_r,or)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,Be,tt,Se,ke,it,ht,Mt,Xt,Vt,ir,_r,or,$t){const Ot=32*t,Lr=16*t;return this.int16[Ot+0]=s,this.int16[Ot+1]=A,this.int16[Ot+2]=p,this.int16[Ot+3]=v,this.int16[Ot+4]=_,this.int16[Ot+5]=B,this.int16[Ot+6]=F,this.int16[Ot+7]=U,this.uint16[Ot+8]=Q,this.uint16[Ot+9]=K,this.uint16[Ot+10]=X,this.uint16[Ot+11]=J,this.uint16[Ot+12]=oe,this.uint16[Ot+13]=le,this.uint16[Ot+14]=he,this.uint16[Ot+15]=Be,this.uint16[Ot+16]=tt,this.uint16[Ot+17]=Se,this.uint16[Ot+18]=ke,this.uint16[Ot+19]=it,this.uint16[Ot+20]=ht,this.uint16[Ot+21]=Mt,this.uint16[Ot+22]=Xt,this.uint32[Lr+12]=Vt,this.float32[Lr+13]=ir,this.float32[Lr+14]=_r,this.uint16[Ot+30]=or,this.uint16[Ot+31]=$t,t}}Va.prototype.bytesPerElement=64,We("StructArrayLayout8i15ui1ul2f2ui64",Va);class bi extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.float32[1*t+0]=s,t}}bi.prototype.bytesPerElement=4,We("StructArrayLayout1f4",bi);class Ui extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.uint16[6*t+0]=s,this.float32[v+1]=A,this.float32[v+2]=p,t}}Ui.prototype.bytesPerElement=12,We("StructArrayLayout1ui2f12",Ui);class es extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=4*t;return this.uint32[2*t+0]=s,this.uint16[v+2]=A,this.uint16[v+3]=p,t}}es.prototype.bytesPerElement=8,We("StructArrayLayout1ul2ui8",es);class Kc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.uint16[p+0]=s,this.uint16[p+1]=A,t}}Kc.prototype.bytesPerElement=4,We("StructArrayLayout2ui4",Kc);class Ga extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint16[1*t+0]=s,t}}Ga.prototype.bytesPerElement=2,We("StructArrayLayout1ui2",Ga);class qc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p){const v=this.length;return this.resize(v+1),this.emplace(v,t,s,A,p)}emplace(t,s,A,p,v){const _=4*t;return this.float32[_+0]=s,this.float32[_+1]=A,this.float32[_+2]=p,this.float32[_+3]=v,t}}qc.prototype.bytesPerElement=16,We("StructArrayLayout4f16",qc);class x extends ki{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}x.prototype.size=20;class r extends gi{get(t){return new x(this,t)}}We("CollisionBoxArray",r);class c extends ki{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}c.prototype.size=48;class d extends Vl{get(t){return new c(this,t)}}We("PlacedSymbolArray",d);class y extends ki{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}y.prototype.size=64;class b extends Va{get(t){return new y(this,t)}}We("SymbolInstanceArray",b);class S extends bi{getoffsetX(t){return this.float32[1*t+0]}}We("GlyphOffsetArray",S);class M extends Io{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}We("SymbolLineVertexArray",M);class N extends ki{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}N.prototype.size=12;class j extends Ui{get(t){return new N(this,t)}}We("TextAnchorOffsetArray",j);class q extends ki{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}q.prototype.size=8;class ne extends es{get(t){return new q(this,t)}}We("FeatureIndexArray",ne);class ee extends Ss{}class Ae extends Ss{}class _e extends Ss{}class De extends Fs{}class ze extends Ji{}class Qe extends za{}class Ge extends Ha{}class st extends Gc{}class Xe extends ja{}class At extends Hl{}class ft extends VA{}class nt extends Wo{}class wt extends du{}class Dt extends jl{}class Lt extends Kc{}const Rt=Vn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qt}=Rt;class nr{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,s,A,p){const v=this.segments[this.segments.length-1];return t>nr.MAX_VERTEX_ARRAY_LENGTH&&Cr(`Max vertices per segment is ${nr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${nr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+t>nr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p?this.createNewSegment(s,A,p):v}createNewSegment(t,s,A){const p={vertexOffset:t.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return A!==void 0&&(p.sortKey=A),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(t,s,A){return this.prepareSegment(0,t,s,A)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const s in t.vaos)t.vaos[s].destroy()}static simpleSegment(t,s,A,p){return new nr([{vertexOffset:t,primitiveOffset:s,vertexLength:A,primitiveLength:p,vaos:{},sortKey:0}])}}function Ar(l,t){return 256*(l=at(Math.floor(l),0,255))+at(Math.floor(t),0,255)}nr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,We("SegmentVector",nr);const rr=Vn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Dr=Vn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var vn,Ai,zi,ui={exports:{}},Gi={exports:{}},Pi={exports:{}},Is=(function(){if(zi)return ui.exports;zi=1;var l=(vn||(vn=1,Gi.exports=function(s,A){var p,v,_,B,F,U,Q,K;for(v=s.length-(p=3&s.length),_=A,F=3432918353,U=461845907,K=0;K<v;)Q=255&s.charCodeAt(K)|(255&s.charCodeAt(++K))<<8|(255&s.charCodeAt(++K))<<16|(255&s.charCodeAt(++K))<<24,++K,_=27492+(65535&(B=5*(65535&(_=(_^=Q=(65535&(Q=(Q=(65535&Q)*F+(((Q>>>16)*F&65535)<<16)&4294967295)<<15|Q>>>17))*U+(((Q>>>16)*U&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(Q=0,p){case 3:Q^=(255&s.charCodeAt(K+2))<<16;case 2:Q^=(255&s.charCodeAt(K+1))<<8;case 1:_^=Q=(65535&(Q=(Q=(65535&(Q^=255&s.charCodeAt(K)))*F+(((Q>>>16)*F&65535)<<16)&4294967295)<<15|Q>>>17))*U+(((Q>>>16)*U&65535)<<16)&4294967295}return _^=s.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Gi.exports),t=(Ai||(Ai=1,Pi.exports=function(s,A){for(var p,v=s.length,_=A^v,B=0;v>=4;)p=1540483477*(65535&(p=255&s.charCodeAt(B)|(255&s.charCodeAt(++B))<<8|(255&s.charCodeAt(++B))<<16|(255&s.charCodeAt(++B))<<24))+((1540483477*(p>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),v-=4,++B;switch(v){case 3:_^=(255&s.charCodeAt(B+2))<<16;case 2:_^=(255&s.charCodeAt(B+1))<<8;case 1:_=1540483477*(65535&(_^=255&s.charCodeAt(B)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Pi.exports);return ui.exports=l,ui.exports.murmur3=l,ui.exports.murmur2=t,ui.exports})(),Ki=E(Is);class eo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,s,A,p){this.ids.push(Ts(t)),this.positions.push(s,A,p)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Ts(t);let A=0,p=this.ids.length-1;for(;A<p;){const _=A+p>>1;this.ids[_]>=s?p=_:A=_+1}const v=[];for(;this.ids[A]===s;)v.push({index:this.positions[3*A],start:this.positions[3*A+1],end:this.positions[3*A+2]}),A++;return v}static serialize(t,s){const A=new Float64Array(t.ids),p=new Uint32Array(t.positions);return hi(A,p,0,A.length-1),s&&s.push(A.buffer,p.buffer),{ids:A,positions:p}}static deserialize(t){const s=new eo;return s.ids=t.ids,s.positions=t.positions,s.indexed=!0,s}}function Ts(l){const t=+l;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Ki(String(l))}function hi(l,t,s,A){for(;s<A;){const p=l[s+A>>1];let v=s-1,_=A+1;for(;;){do v++;while(l[v]<p);do _--;while(l[_]>p);if(v>=_)break;Ao(l,v,_),Ao(t,3*v,3*_),Ao(t,3*v+1,3*_+1),Ao(t,3*v+2,3*_+2)}_-s<A-_?(hi(l,t,s,_),s=_+1):(hi(l,t,_+1,A),A=_)}}function Ao(l,t,s){const A=l[t];l[t]=l[s],l[s]=A}We("FeaturePositionMap",eo);class yo{constructor(t,s){this.gl=t.gl,this.location=s}}class dc extends yo{constructor(t,s){super(t,s),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class mA extends yo{constructor(t,s){super(t,s),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class GA extends yo{constructor(t,s){super(t,s),this.current=an.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const zu=new Float32Array(16);function pc(l){return[Ar(255*l.r,255*l.g),Ar(255*l.b,255*l.a)]}class Gl{constructor(t,s,A){this.value=t,this.uniformNames=s.map((p=>`u_${p}`)),this.type=A}setUniform(t,s,A){t.set(A.constantOr(this.value))}getBinding(t,s,A){return this.type==="color"?new GA(t,s):new dc(t,s)}}class to{constructor(t,s){this.uniformNames=s.map((A=>`u_${A}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=t.tlbr}setConstantDashPositions(t,s){this.dashTo=[0,t.y,t.height,t.width],this.dashFrom=[0,s.y,s.height,s.width]}setUniform(t,s,A,p){let v=null;p==="u_pattern_to"?v=this.patternTo:p==="u_pattern_from"?v=this.patternFrom:p==="u_dasharray_to"?v=this.dashTo:p==="u_dasharray_from"?v=this.dashFrom:p==="u_pixel_ratio_to"?v=this.pixelRatioTo:p==="u_pixel_ratio_from"&&(v=this.pixelRatioFrom),v!==null&&t.set(v)}getBinding(t,s,A){return A.substr(0,9)==="u_pattern"||A.substr(0,12)==="u_dasharray_"?new mA(t,s):new dc(t,s)}}class Zo{constructor(t,s,A,p){this.expression=t,this.type=A,this.maxValue=0,this.paintVertexAttributes=s.map((v=>({name:`a_${v}`,type:"Float32",components:A==="color"?2:1,offset:0}))),this.paintVertexArray=new p}populatePaintArray(t,s,A){const p=this.paintVertexArray.length,v=this.expression.evaluate(new Mr(0,A),s,{},A.canonical,[],A.formattedSection);this.paintVertexArray.resize(t),this._setPaintValue(p,t,v)}updatePaintArray(t,s,A,p,v){const _=this.expression.evaluate(new Mr(0,v),A,p);this._setPaintValue(t,s,_)}_setPaintValue(t,s,A){if(this.type==="color"){const p=pc(A);for(let v=t;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=t;p<s;p++)this.paintVertexArray.emplace(p,A);this.maxValue=Math.max(this.maxValue,Math.abs(A))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vo{constructor(t,s,A,p,v,_){this.expression=t,this.uniformNames=s.map((B=>`u_${B}_t`)),this.type=A,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map((B=>({name:`a_${B}`,type:"Float32",components:A==="color"?4:2,offset:0}))),this.paintVertexArray=new _}populatePaintArray(t,s,A){const p=this.expression.evaluate(new Mr(this.zoom,A),s,{},A.canonical,[],A.formattedSection),v=this.expression.evaluate(new Mr(this.zoom+1,A),s,{},A.canonical,[],A.formattedSection),_=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(_,t,p,v)}updatePaintArray(t,s,A,p,v){const _=this.expression.evaluate(new Mr(this.zoom,v),A,p),B=this.expression.evaluate(new Mr(this.zoom+1,v),A,p);this._setPaintValue(t,s,_,B)}_setPaintValue(t,s,A,p){if(this.type==="color"){const v=pc(A),_=pc(p);for(let B=t;B<s;B++)this.paintVertexArray.emplace(B,v[0],v[1],_[0],_[1])}else{for(let v=t;v<s;v++)this.paintVertexArray.emplace(v,A,p);this.maxValue=Math.max(this.maxValue,Math.abs(A),Math.abs(p))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,s){const A=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=at(this.expression.interpolationFactor(A,this.zoom,this.zoom+1),0,1);t.set(p)}getBinding(t,s,A){return new dc(t,s)}}class vl{constructor(t,s,A,p,v,_){this.expression=t,this.type=s,this.useIntegerZoom=A,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(t,s,A){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(p,t,this.getPositionIds(s),A)}updatePaintArray(t,s,A,p,v){this._setPaintValues(t,s,this.getPositionIds(A),v)}_setPaintValues(t,s,A,p){const v=this.getPositions(p);if(!v||!A)return;const _=v[A.min],B=v[A.mid],F=v[A.max];if(_&&B&&F)for(let U=t;U<s;U++)this.emplace(this.zoomInPaintVertexArray,U,B,_),this.emplace(this.zoomOutPaintVertexArray,U,B,F)}upload(t){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const s=this.getVertexAttributes();this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,s,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,s,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Os extends vl{getPositions(t){return t.imagePositions}getPositionIds(t){return t.patterns&&t.patterns[this.layerId]}getVertexAttributes(){return rr.members}emplace(t,s,A,p){t.emplace(s,A.tlbr[0],A.tlbr[1],A.tlbr[2],A.tlbr[3],p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],A.pixelRatio,p.pixelRatio)}}class ro extends vl{getPositions(t){return t.dashPositions}getPositionIds(t){return t.dashes&&t.dashes[this.layerId]}getVertexAttributes(){return Dr.members}emplace(t,s,A,p){t.emplace(s,0,A.y,A.height,A.width,0,p.y,p.height,p.width)}}class Ka{constructor(t,s,A){this.binders={},this._buffers=[];const p=[];for(const v in t.paint._values){if(!A(v))continue;const _=t.paint.get(v);if(!(_ instanceof Fn&&So(_.property.specification)))continue;const B=qa(v,t.type),F=_.value,U=_.property.specification.type,Q=_.property.useIntegerZoom,K=_.property.specification["property-type"],X=K==="cross-faded"||K==="cross-faded-data-driven";if(F.kind==="constant")this.binders[v]=X?new to(F.value,B):new Gl(F.value,B,U),p.push(`/u_${v}`);else if(F.kind==="source"||X){const J=Xo(v,U,"source");this.binders[v]=X?v==="line-dasharray"?new ro(F,U,Q,s,J,t.id):new Os(F,U,Q,s,J,t.id):new Zo(F,B,U,J),p.push(`/a_${v}`)}else{const J=Xo(v,U,"composite");this.binders[v]=new vo(F,B,U,Q,s,J),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(t){const s=this.binders[t];return s instanceof Zo||s instanceof vo?s.maxValue:0}populatePaintArrays(t,s,A){for(const p in this.binders){const v=this.binders[p];(v instanceof Zo||v instanceof vo||v instanceof vl)&&v.populatePaintArray(t,s,A)}}setConstantPatternPositions(t,s){for(const A in this.binders){const p=this.binders[A];p instanceof to&&p.setConstantPatternPositions(t,s)}}setConstantDashPositions(t,s){for(const A in this.binders){const p=this.binders[A];p instanceof to&&p.setConstantDashPositions(t,s)}}updatePaintArrays(t,s,A,p,v){let _=!1;for(const B in t){const F=s.getPositions(B);for(const U of F){const Q=A.feature(U.index);for(const K in this.binders){const X=this.binders[K];if((X instanceof Zo||X instanceof vo||X instanceof vl)&&X.expression.isStateDependent===!0){const J=p.paint.get(K);X.expression=J.value,X.updatePaintArray(U.start,U.end,Q,t[B],v),_=!0}}}}return _}defines(){const t=[];for(const s in this.binders){const A=this.binders[s];(A instanceof Gl||A instanceof to)&&t.push(...A.uniformNames.map((p=>`#define HAS_UNIFORM_${p}`)))}return t}getBinderAttributes(){const t=[];for(const s in this.binders){const A=this.binders[s];if(A instanceof Zo||A instanceof vo)for(let p=0;p<A.paintVertexAttributes.length;p++)t.push(A.paintVertexAttributes[p].name);else if(A instanceof vl){const p=A.getVertexAttributes();for(const v of p)t.push(v.name)}}return t}getBinderUniforms(){const t=[];for(const s in this.binders){const A=this.binders[s];if(A instanceof Gl||A instanceof to||A instanceof vo)for(const p of A.uniformNames)t.push(p)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,s){const A=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Gl||v instanceof to||v instanceof vo){for(const _ of v.uniformNames)if(s[_]){const B=v.getBinding(t,s[_],_);A.push({name:_,property:p,binding:B})}}}return A}setUniforms(t,s,A,p){for(const{name:v,property:_,binding:B}of s)this.binders[_].setUniform(B,p,A.get(_),v)}updatePaintBuffers(t){this._buffers=[];for(const s in this.binders){const A=this.binders[s];if(t&&A instanceof vl){const p=t.fromScale===2?A.zoomInPaintVertexBuffer:A.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(A instanceof Zo||A instanceof vo)&&A.paintVertexBuffer&&this._buffers.push(A.paintVertexBuffer)}}upload(t){for(const s in this.binders){const A=this.binders[s];(A instanceof Zo||A instanceof vo||A instanceof vl)&&A.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const s=this.binders[t];(s instanceof Zo||s instanceof vo||s instanceof vl)&&s.destroy()}}}class cs{constructor(t,s,A=()=>!0){this.programConfigurations={};for(const p of t)this.programConfigurations[p.id]=new Ka(p,s,A);this.needsUpload=!1,this._featureMap=new eo,this._bufferOffset=0}populatePaintArrays(t,s,A,p){for(const v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(t,s,p);s.id!==void 0&&this._featureMap.add(s.id,A,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,s,A,p){for(const v of A)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(t,this._featureMap,s,v,p)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function qa(l,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${t}-`,"").replace(/-/g,"_")]}function Xo(l,t,s){const A={color:{source:za,composite:qc},number:{source:bi,composite:za}},p=(function(v){return{"line-pattern":{source:Ge,composite:Ge},"fill-pattern":{source:Ge,composite:Ge},"fill-extrusion-pattern":{source:Ge,composite:Ge},"line-dasharray":{source:st,composite:st}}[v]})(l);return p&&p[s]||A[t][s]}We("ConstantBinder",Gl),We("CrossFadedConstantBinder",to),We("SourceExpressionBinder",Zo),We("CrossFadedPatternBinder",Os),We("CrossFadedDasharrayBinder",ro),We("CompositeExpressionBinder",vo),We("ProgramConfiguration",Ka,{omit:["_buffers"]}),We("ProgramConfigurationSet",cs);const Vh=Math.pow(2,14)-1,Ff=-Vh-1;function KA(l){const t=Te/l.extent,s=l.loadGeometry();for(let A=0;A<s.length;A++){const p=s[A];for(let v=0;v<p.length;v++){const _=p[v],B=Math.round(_.x*t),F=Math.round(_.y*t);_.x=at(B,Ff,Vh),_.y=at(F,Ff,Vh),(B<_.x||B>_.x+1||F<_.y||F>_.y+1)&&Cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function qA(l,t){return{type:l.type,id:l.id,properties:l.properties,geometry:t?KA(l):[]}}const gA=-32768;function Gh(l,t,s,A,p){l.emplaceBack(gA+8*t+A,gA+8*s+p)}class uh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new Ae,this.indexArray=new Dt,this.segments=new nr,this.programConfigurations=new cs(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){const p=this.layers[0],v=[];let _=null,B=!1,F=p.type==="heatmap";if(p.type==="circle"){const Q=p;_=Q.layout.get("circle-sort-key"),B=!_.isConstant(),F=F||Q.paint.get("circle-pitch-alignment")==="map"}const U=F?s.subdivisionGranularity.circle:1;for(const{feature:Q,id:K,index:X,sourceLayerIndex:J}of t){const oe=this.layers[0]._featureFilter.needGeometry,le=qA(Q,oe);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),le,A))continue;const he=B?_.evaluate(le,{},A):void 0,Be={id:K,properties:Q.properties,type:Q.type,sourceLayerIndex:J,index:X,geometry:oe?le.geometry:KA(Q),patterns:{},sortKey:he};v.push(Be)}B&&v.sort(((Q,K)=>Q.sortKey-K.sortKey));for(const Q of v){const{geometry:K,index:X,sourceLayerIndex:J}=Q,oe=t[X].feature;this.addFeature(Q,K,X,A,U),s.featureIndex.insert(oe,K,X,J,this.index)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qt),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,s,A,p,v=1){let _;switch(v){case 1:_=[0,7];break;case 3:_=[0,2,5,7];break;case 5:_=[0,1,3,4,6,7];break;case 7:_=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const B=_.length;for(const F of s)for(const U of F){const Q=U.x,K=U.y;if(Q<0||Q>=Te||K<0||K>=Te)continue;const X=this.segments.prepareSegment(B*B,this.layoutVertexArray,this.indexArray,t.sortKey),J=X.vertexLength;for(let oe=0;oe<B;oe++)for(let le=0;le<B;le++)Gh(this.layoutVertexArray,Q,K,_[le],_[oe]);for(let oe=0;oe<B-1;oe++)for(let le=0;le<B-1;le++){const he=J+oe*B+le,Be=J+(oe+1)*B+le;this.indexArray.emplaceBack(he,Be+1,he+1),this.indexArray.emplaceBack(he,Be,Be+1)}X.vertexLength+=B*B,X.primitiveLength+=(B-1)*(B-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:{},canonical:p})}}function hh(l,t){for(let s=0;s<l.length;s++)if(dh(t,l[s]))return!0;for(let s=0;s<t.length;s++)if(dh(l,t[s]))return!0;return!!If(l,t)}function pu(l,t,s){return!!dh(l,t)||!!Tf(t,l,s)}function Kh(l,t){if(l.length===1)return ng(t,l[0]);for(let s=0;s<t.length;s++){const A=t[s];for(let p=0;p<A.length;p++)if(dh(l,A[p]))return!0}for(let s=0;s<l.length;s++)if(ng(t,l[s]))return!0;for(let s=0;s<t.length;s++)if(If(l,t[s]))return!0;return!1}function fh(l,t,s){if(l.length>1){if(If(l,t))return!0;for(let A=0;A<t.length;A++)if(Tf(t[A],l,s))return!0}for(let A=0;A<l.length;A++)if(Tf(l[A],t,s))return!0;return!1}function If(l,t){if(l.length===0||t.length===0)return!1;for(let s=0;s<l.length-1;s++){const A=l[s],p=l[s+1];for(let v=0;v<t.length-1;v++)if(rg(A,p,t[v],t[v+1]))return!0}return!1}function rg(l,t,s,A){return je(l,s,A)!==je(t,s,A)&&je(l,t,s)!==je(l,t,A)}function Tf(l,t,s){const A=s*s;if(t.length===1)return l.distSqr(t[0])<A;for(let p=1;p<t.length;p++)if(Pf(l,t[p-1],t[p])<A)return!0;return!1}function Pf(l,t,s){const A=t.distSqr(s);if(A===0)return l.distSqr(t);const p=((l.x-t.x)*(s.x-t.x)+(l.y-t.y)*(s.y-t.y))/A;return l.distSqr(p<0?t:p>1?s:s.sub(t)._mult(p)._add(t))}function ng(l,t){let s,A,p,v=!1;for(let _=0;_<l.length;_++){s=l[_];for(let B=0,F=s.length-1;B<s.length;F=B++)A=s[B],p=s[F],A.y>t.y!=p.y>t.y&&t.x<(p.x-A.x)*(t.y-A.y)/(p.y-A.y)+A.x&&(v=!v)}return v}function dh(l,t){let s=!1;for(let A=0,p=l.length-1;A<l.length;p=A++){const v=l[A],_=l[p];v.y>t.y!=_.y>t.y&&t.x<(_.x-v.x)*(t.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function Fp(l,t,s){const A=s[0],p=s[2];if(l.x<A.x&&t.x<A.x||l.x>p.x&&t.x>p.x||l.y<A.y&&t.y<A.y||l.y>p.y&&t.y>p.y)return!1;const v=je(l,t,s[0]);return v!==je(l,t,s[1])||v!==je(l,t,s[2])||v!==je(l,t,s[3])}function ph(l,t,s){const A=t.paint.get(l).value;return A.kind==="constant"?A.value:s.programConfigurations.get(t.id).getMaxValue(l)}function mh(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function $c(l,t,s,A,p){if(!t[0]&&!t[1])return l;const v=w.convert(t)._mult(p);s==="viewport"&&v._rotate(-A);const _=[];for(let B=0;B<l.length;B++)_.push(l[B].sub(v));return _}function Yy(l){const t=[];for(let s=0;s<l.length;s++){const A=l[s],p=t.at(-1);(s===0||p&&!A.equals(p))&&t.push(A)}return t}function ig({queryGeometry:l,size:t},s){return pu(l,s,t)}function Ip({queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){return pu(l,v,t*(s.projectTileCoordinates(v.x,v.y,A,p).signedDistanceFromCamera/s.cameraToCenterDistance))}function sg({queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){const _=s.projectTileCoordinates(v.x,v.y,A,p).signedDistanceFromCamera,B=t*(s.cameraToCenterDistance/_);return pu(l,Yo(v,s,A,p),B)}function og({queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){return pu(l,Yo(v,s,A,p),t)}function qh({queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p,pitchAlignment:v="map",pitchScale:_="map"},B){const F=v==="map"?_==="map"?ig:Ip:_==="map"?sg:og,U={queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p};for(const Q of B)for(const K of Q)if(F(U,K))return!0;return!1}function Yo(l,t,s,A){const p=t.projectTileCoordinates(l.x,l.y,s,A).point;return new w((.5*p.x+.5)*t.width,(.5*-p.y+.5)*t.height)}let ag,lg;We("CircleBucket",uh,{omit:["layers"]});var ud={get paint(){return lg=lg||new ci({"circle-radius":new xr(mt.paint_circle["circle-radius"]),"circle-color":new xr(mt.paint_circle["circle-color"]),"circle-blur":new xr(mt.paint_circle["circle-blur"]),"circle-opacity":new xr(mt.paint_circle["circle-opacity"]),"circle-translate":new gr(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new gr(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gr(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gr(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xr(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xr(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xr(mt.paint_circle["circle-stroke-opacity"])})},get layout(){return ag=ag||new ci({"circle-sort-key":new xr(mt.layout_circle["circle-sort-key"])})}};class $a extends Rn{constructor(t,s){super(t,ud,s)}createBucket(t){return new uh(t)}queryRadius(t){const s=t;return ph("circle-radius",this,s)+ph("circle-stroke-width",this,s)+mh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,unwrappedTileID:B,getElevation:F}){const U=$c(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,_),Q=this.paint.get("circle-radius").evaluate(s,A)+this.paint.get("circle-stroke-width").evaluate(s,A),K=this.paint.get("circle-pitch-scale"),X=this.paint.get("circle-pitch-alignment");let J,oe;return X==="map"?(J=U,oe=Q*_):(J=(function(le,he,Be,tt){return le.map((Se=>Yo(Se,he,Be,tt)))})(U,v,B,F),oe=Q),qh({queryGeometry:J,size:oe,transform:v,unwrappedTileID:B,getElevation:F,pitchAlignment:X,pitchScale:K},p)}}class cg extends uh{}let Xr;We("HeatmapBucket",cg,{omit:["layers"]});var $h={get paint(){return Xr=Xr||new ci({"heatmap-radius":new xr(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xr(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gr(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ei(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gr(mt.paint_heatmap["heatmap-opacity"])})}};function Lf(l,{width:t,height:s},A,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==t*s*A)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${t*s*A}`)}else p=new Uint8Array(t*s*A);return l.width=t,l.height=s,l.data=p,l}function Tp(l,{width:t,height:s},A){if(t===l.width&&s===l.height)return;const p=Lf({},{width:t,height:s},A);Pp(l,p,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,t),height:Math.min(l.height,s)},A),l.width=t,l.height=s,l.data=p.data}function Pp(l,t,s,A,p,v){if(p.width===0||p.height===0)return t;if(p.width>l.width||p.height>l.height||s.x>l.width-p.width||s.y>l.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||A.x>t.width-p.width||A.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=l.data,B=t.data;if(_===B)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<p.height;F++){const U=((s.y+F)*l.width+s.x)*v,Q=((A.y+F)*t.width+A.x)*v;for(let K=0;K<p.width*v;K++)B[Q+K]=_[U+K]}return t}class mu{constructor(t,s){Lf(this,t,1,s)}resize(t){Tp(this,t,1)}clone(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,A,p,v){Pp(t,s,A,p,v,1)}}class Jo{constructor(t,s){Lf(this,t,4,s)}resize(t){Tp(this,t,4)}replace(t,s){s?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Jo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,A,p,v){Pp(t,s,A,p,v,4)}setPixel(t,s,A){const p=4*(t*this.width+s);this.data[p+0]=Math.round(255*A.r/A.a),this.data[p+1]=Math.round(255*A.g/A.a),this.data[p+2]=Math.round(255*A.b/A.a),this.data[p+3]=Math.round(255*A.a)}}function hd(l){const t={},s=l.resolution||256,A=l.clips?l.clips.length:1,p=l.image||new Jo({width:s,height:A});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(_,B,F)=>{t[l.evaluationKey]=F;const U=l.expression.evaluate(t);p.setPixel(_/4/s,B/4,U)};if(l.clips)for(let _=0,B=0;_<A;++_,B+=4*s)for(let F=0,U=0;F<s;F++,U+=4){const Q=F/(s-1),{start:K,end:X}=l.clips[_];v(B,U,K*(1-Q)+X*Q)}else for(let _=0,B=0;_<s;_++,B+=4)v(0,B,_/(s-1));return p}We("AlphaImage",mu),We("RGBAImage",Jo);const fd="big-fb";class Ag extends Rn{createBucket(t){return new cg(t)}constructor(t,s){super(t,$h,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(fd)&&this.heatmapFbos.delete(fd)}queryRadius(t){return ph("heatmap-radius",this,t)}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,unwrappedTileID:B,getElevation:F}){return qh({queryGeometry:t,size:this.paint.get("heatmap-radius").evaluate(s,A)*_,transform:v,unwrappedTileID:B,getElevation:F},p)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Lp;var Mp={get paint(){return Lp=Lp||new ci({"hillshade-illumination-direction":new gr(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new gr(mt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new gr(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gr(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gr(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gr(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gr(mt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new gr(mt.paint_hillshade["hillshade-method"])})}};class kp extends Rn{constructor(t,s){super(t,Mp,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,A=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values;const v=Math.max(t.length,s.length,A.length,p.length);t=t.concat(Array(v-t.length).fill(t.at(-1))),s=s.concat(Array(v-s.length).fill(s.at(-1))),A=A.concat(Array(v-A.length).fill(A.at(-1))),p=p.concat(Array(v-p.length).fill(p.at(-1)));const _=s.map(On);return{directionRadians:t.map(On),altitudeRadians:_,shadowColor:p,highlightColor:A}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let ea;var yA={get paint(){return ea=ea||new ci({"color-relief-opacity":new gr(mt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ei(mt["paint_color-relief"]["color-relief-color"])})}};class $A{constructor(t,s,A,p){this.context=t,this.format=A,this.texture=t.gl.createTexture(),this.update(s,p)}update(t,s,A){const{width:p,height:v}=t,_=!(this.size&&this.size[0]===p&&this.size[1]===v||A),{context:B}=this,{gl:F}=B;if(this.useMipmap=!!(s&&s.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!s||s.premultiply!==!1)),_)this.size=[p,v],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||$r(t)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,t):F.texImage2D(F.TEXTURE_2D,0,this.format,p,v,0,this.format,F.UNSIGNED_BYTE,t.data);else{const{x:U,y:Q}=A||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||$r(t)?F.texSubImage2D(F.TEXTURE_2D,0,U,Q,F.RGBA,F.UNSIGNED_BYTE,t):F.texSubImage2D(F.TEXTURE_2D,0,U,Q,p,v,F.RGBA,F.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D),B.pixelStoreUnpackFlipY.setDefault(),B.pixelStoreUnpack.setDefault(),B.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,s,A){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),A!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(A=v.LINEAR),t!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,t),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,A||t),this.filter=t),s!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Up{constructor(t,s,A,p=1,v=1,_=1,B=0){if(this.uid=t,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(A&&!["mapbox","terrarium","custom"].includes(A))return void Cr(`"${A}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const F=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),A){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=_,this.baseShift=B;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let U=0;U<F;U++)this.data[this._idx(-1,U)]=this.data[this._idx(0,U)],this.data[this._idx(F,U)]=this.data[this._idx(F-1,U)],this.data[this._idx(U,-1)]=this.data[this._idx(U,0)],this.data[this._idx(U,F)]=this.data[this._idx(U,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let U=0;U<F;U++)for(let Q=0;Q<F;Q++){const K=this.get(U,Q);K>this.max&&(this.max=K),K<this.min&&(this.min=K)}}get(t,s){const A=new Uint8Array(this.data.buffer),p=4*this._idx(t,s);return this.unpack(A[p],A[p+1],A[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,s){if(t<-1||t>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(t+1)}unpack(t,s,A){return t*this.redFactor+s*this.greenFactor+A*this.blueFactor-this.baseShift}pack(t){return Dp(t,this.getUnpackVector())}getPixels(){return new Jo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,s,A){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,_=A*this.dim,B=A*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(A){case-1:_=B-1;break;case 1:B=_+1}const F=-s*this.dim,U=-A*this.dim;for(let Q=_;Q<B;Q++)for(let K=p;K<v;K++)this.data[this._idx(K,Q)]=t.data[this._idx(K+F,Q+U)]}}function Dp(l,t){const s=t[0],A=t[1],p=t[2],v=t[3],_=Math.min(s,A,p),B=Math.round((l+v)/_);return{r:Math.floor(B*_/s)%256,g:Math.floor(B*_/A)%256,b:Math.floor(B*_/p)%256}}We("DEMData",Up);class vA extends Rn{constructor(t,s){super(t,yA,s)}_createColorRamp(t){const s={elevationStops:[],colorStops:[]},A=this._transitionablePaint._values["color-relief-color"].value.expression;if(A instanceof Oc&&A._styleExpression.expression instanceof Gt){this.colorRampExpression=A;const _=A._styleExpression.expression;s.elevationStops=_.labels,s.colorStops=[];for(const B of s.elevationStops)s.colorStops.push(_.evaluate({globals:{elevation:B}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[an.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=t)return s;const p={elevationStops:[],colorStops:[]},v=(s.elevationStops.length-1)/(t-1);for(let _=0;_<s.elevationStops.length-.5;_+=v)p.elevationStops.push(s.elevationStops[Math.round(_)]),p.colorStops.push(s.colorStops[Math.round(_)]);return Cr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${t}, provided: ${s.elevationStops.length}`),p}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(t,s,A){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const p=this._createColorRamp(s),v=new Jo({width:p.colorStops.length,height:1}),_=new Jo({width:p.colorStops.length,height:1});for(let B=0;B<p.elevationStops.length;B++){const F=Dp(p.elevationStops[B],A);_.setPixel(0,B,new an(F.r/255,F.g/255,F.b/255,1)),v.setPixel(0,B,p.colorStops[B])}return this.colorRampTextures={elevationTexture:new $A(t,_,t.gl.RGBA),colorTexture:new $A(t,v,t.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const ug=Vn([{name:"a_pos",components:2,type:"Int16"}],4),{members:WA}=ug;function dd(l,t,s){const A=s.patternDependencies;let p=!1;for(const v of t){const _=v.paint.get(`${l}-pattern`);_.isConstant()||(p=!0);const B=_.constantOr(null);B&&(p=!0,A[B.to]=!0,A[B.from]=!0)}return p}function pd(l,t,s,A,p){const{zoom:v}=A,_=p.patternDependencies;for(const B of t){const F=B.paint.get(`${l}-pattern`).value;if(F.kind!=="constant"){let U=F.evaluate({zoom:v-1},s,{},p.availableImages),Q=F.evaluate({zoom:v},s,{},p.availableImages),K=F.evaluate({zoom:v+1},s,{},p.availableImages);U=U&&U.name?U.name:U,Q=Q&&Q.name?Q.name:Q,K=K&&K.name?K.name:K,_[U]=!0,_[Q]=!0,_[K]=!0,s.patterns[B.id]={min:U,mid:Q,max:K}}}return s}function Rp(l,t,s,A,p){let v;if(p===(function(_,B,F,U){let Q=0;for(let K=B,X=F-U;K<F;K+=U)Q+=(_[X]-_[K])*(_[K+1]+_[X+1]),X=K;return Q})(l,t,s,A)>0)for(let _=t;_<s;_+=A)v=ZA(_/A|0,l[_],l[_+1],v);else for(let _=s-A;_>=t;_-=A)v=ZA(_/A|0,l[_],l[_+1],v);return v&&gu(v,v.next)&&(Vu(v),v=v.next),v}function Hu(l,t){if(!l)return l;t||(t=l);let s,A=l;do if(s=!1,A.steiner||!gu(A,A.next)&&Hi(A.prev,A,A.next)!==0)A=A.next;else{if(Vu(A),A=t=A.prev,A===A.next)break;s=!0}while(s||A!==t);return t}function Wh(l,t,s,A,p,v,_){if(!l)return;!_&&v&&(function(F,U,Q,K){let X=F;do X.z===0&&(X.z=To(X.x,X.y,U,Q,K)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==F);X.prevZ.nextZ=null,X.prevZ=null,(function(J){let oe,le=1;do{let he,Be=J;J=null;let tt=null;for(oe=0;Be;){oe++;let Se=Be,ke=0;for(let ht=0;ht<le&&(ke++,Se=Se.nextZ,Se);ht++);let it=le;for(;ke>0||it>0&&Se;)ke!==0&&(it===0||!Se||Be.z<=Se.z)?(he=Be,Be=Be.nextZ,ke--):(he=Se,Se=Se.nextZ,it--),tt?tt.nextZ=he:J=he,he.prevZ=tt,tt=he;Be=Se}tt.nextZ=null,le*=2}while(oe>1)})(X)})(l,A,p,v);let B=l;for(;l.prev!==l.next;){const F=l.prev,U=l.next;if(v?md(l,A,p,v):Jy(l))t.push(F.i,l.i,U.i),Vu(l),l=U.next,B=U.next;else if((l=U)===B){_?_===1?Wh(l=Np(Hu(l),t),t,s,A,p,v,2):_===2&&Wc(l,t,s,A,p,v):Wh(Hu(l),t,s,A,p,v,1);break}}}function Jy(l){const t=l.prev,s=l,A=l.next;if(Hi(t,s,A)>=0)return!1;const p=t.x,v=s.x,_=A.x,B=t.y,F=s.y,U=A.y,Q=Math.min(p,v,_),K=Math.min(B,F,U),X=Math.max(p,v,_),J=Math.max(B,F,U);let oe=A.next;for(;oe!==t;){if(oe.x>=Q&&oe.x<=X&&oe.y>=K&&oe.y<=J&&zs(p,B,v,F,_,U,oe.x,oe.y)&&Hi(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function md(l,t,s,A){const p=l.prev,v=l,_=l.next;if(Hi(p,v,_)>=0)return!1;const B=p.x,F=v.x,U=_.x,Q=p.y,K=v.y,X=_.y,J=Math.min(B,F,U),oe=Math.min(Q,K,X),le=Math.max(B,F,U),he=Math.max(Q,K,X),Be=To(J,oe,t,s,A),tt=To(le,he,t,s,A);let Se=l.prevZ,ke=l.nextZ;for(;Se&&Se.z>=Be&&ke&&ke.z<=tt;){if(Se.x>=J&&Se.x<=le&&Se.y>=oe&&Se.y<=he&&Se!==p&&Se!==_&&zs(B,Q,F,K,U,X,Se.x,Se.y)&&Hi(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,ke.x>=J&&ke.x<=le&&ke.y>=oe&&ke.y<=he&&ke!==p&&ke!==_&&zs(B,Q,F,K,U,X,ke.x,ke.y)&&Hi(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;Se&&Se.z>=Be;){if(Se.x>=J&&Se.x<=le&&Se.y>=oe&&Se.y<=he&&Se!==p&&Se!==_&&zs(B,Q,F,K,U,X,Se.x,Se.y)&&Hi(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;ke&&ke.z<=tt;){if(ke.x>=J&&ke.x<=le&&ke.y>=oe&&ke.y<=he&&ke!==p&&ke!==_&&zs(B,Q,F,K,U,X,ke.x,ke.y)&&Hi(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function Np(l,t){let s=l;do{const A=s.prev,p=s.next.next;!gu(A,p)&&gd(A,s,s.next,p)&&yh(A,p)&&yh(p,A)&&(t.push(A.i,s.i,p.i),Vu(s),Vu(s.next),s=l=p),s=s.next}while(s!==l);return Hu(s)}function Wc(l,t,s,A,p,v){let _=l;do{let B=_.next.next;for(;B!==_.prev;){if(_.i!==B.i&&Mf(_,B)){let F=vh(_,B);return _=Hu(_,_.next),F=Hu(F,F.next),Wh(_,t,s,A,p,v,0),void Wh(F,t,s,A,p,v,0)}B=B.next}_=_.next}while(_!==l)}function yi(l,t){let s=l.x-t.x;return s===0&&(s=l.y-t.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(t.next.y-t.y)/(t.next.x-t.x)),s}function ta(l,t){const s=(function(p,v){let _=v;const B=p.x,F=p.y;let U,Q=-1/0;if(gu(p,_))return _;do{if(gu(p,_.next))return _.next;if(F<=_.y&&F>=_.next.y&&_.next.y!==_.y){const le=_.x+(F-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(le<=B&&le>Q&&(Q=le,U=_.x<_.next.x?_:_.next,le===B))return U}_=_.next}while(_!==v);if(!U)return null;const K=U,X=U.x,J=U.y;let oe=1/0;_=U;do{if(B>=_.x&&_.x>=X&&B!==_.x&&gh(F<J?B:Q,F,X,J,F<J?Q:B,F,_.x,_.y)){const le=Math.abs(F-_.y)/(B-_.x);yh(_,p)&&(le<oe||le===oe&&(_.x>U.x||_.x===U.x&&_o(U,_)))&&(U=_,oe=le)}_=_.next}while(_!==K);return U})(l,t);if(!s)return t;const A=vh(s,l);return Hu(A,A.next),Hu(s,s.next)}function _o(l,t){return Hi(l.prev,l,t.prev)<0&&Hi(t.next,l,l.next)<0}function To(l,t,s,A,p){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*p|0)|l<<8))|l<<4))|l<<2))|l<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-A)*p|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function mc(l){let t=l,s=l;do(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next;while(t!==l);return s}function gh(l,t,s,A,p,v,_,B){return(p-_)*(t-B)>=(l-_)*(v-B)&&(l-_)*(A-B)>=(s-_)*(t-B)&&(s-_)*(v-B)>=(p-_)*(A-B)}function zs(l,t,s,A,p,v,_,B){return!(l===_&&t===B)&&gh(l,t,s,A,p,v,_,B)}function Mf(l,t){return l.next.i!==t.i&&l.prev.i!==t.i&&!(function(s,A){let p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==A.i&&p.next.i!==A.i&&gd(p,p.next,s,A))return!0;p=p.next}while(p!==s);return!1})(l,t)&&(yh(l,t)&&yh(t,l)&&(function(s,A){let p=s,v=!1;const _=(s.x+A.x)/2,B=(s.y+A.y)/2;do p.y>B!=p.next.y>B&&p.next.y!==p.y&&_<(p.next.x-p.x)*(B-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v})(l,t)&&(Hi(l.prev,l,t.prev)||Hi(l,t.prev,t))||gu(l,t)&&Hi(l.prev,l,l.next)>0&&Hi(t.prev,t,t.next)>0)}function Hi(l,t,s){return(t.y-l.y)*(s.x-t.x)-(t.x-l.x)*(s.y-t.y)}function gu(l,t){return l.x===t.x&&l.y===t.y}function gd(l,t,s,A){const p=wa(Hi(l,t,s)),v=wa(Hi(l,t,A)),_=wa(Hi(s,A,l)),B=wa(Hi(s,A,t));return p!==v&&_!==B||!(p!==0||!ju(l,s,t))||!(v!==0||!ju(l,A,t))||!(_!==0||!ju(s,l,A))||!(B!==0||!ju(s,t,A))}function ju(l,t,s){return t.x<=Math.max(l.x,s.x)&&t.x>=Math.min(l.x,s.x)&&t.y<=Math.max(l.y,s.y)&&t.y>=Math.min(l.y,s.y)}function wa(l){return l>0?1:l<0?-1:0}function yh(l,t){return Hi(l.prev,l,l.next)<0?Hi(l,t,l.next)>=0&&Hi(l,l.prev,t)>=0:Hi(l,t,l.prev)<0||Hi(l,l.next,t)<0}function vh(l,t){const s=kf(l.i,l.x,l.y),A=kf(t.i,t.x,t.y),p=l.next,v=t.prev;return l.next=t,t.prev=l,s.next=p,p.prev=s,A.next=s,s.prev=A,v.next=A,A.prev=v,A}function ZA(l,t,s,A){const p=kf(l,t,s);return A?(p.next=A.next,p.prev=A,A.next.prev=p,A.next=p):(p.prev=p,p.next=p),p}function Vu(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function kf(l,t,s){return{i:l,x:t,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class gc{constructor(t,s){if(s>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=s}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class _h{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}_h.noSubdivision=new _h({fill:new gc(0,0),line:new gc(0,0),tile:new gc(0,0),stencil:new gc(0,0),circle:1}),We("SubdivisionGranularityExpression",gc),We("SubdivisionGranularitySetting",_h);const yc=-32768,Gu=32767;class Uf{constructor(t,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=Te/t,this._canonical=s}_getKey(t,s){return(t+=32768)<<16|s+32768}_vertexToIndex(t,s){if(t<-32768||s<-32768||t>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const A=0|Math.round(t),p=0|Math.round(s),v=this._getKey(A,p);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const _=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,_),this._vertexBuffer.push(A,p),_}_subdivideTrianglesScanline(t){if(this._granularity<2)return(function(p,v){const _=[];for(let B=0;B<v.length;B+=3){const F=v[B],U=v[B+1],Q=v[B+2],K=p[2*F],X=p[2*F+1];(p[2*U]-K)*(p[2*Q+1]-X)-(p[2*U+1]-X)*(p[2*Q]-K)>0?(_.push(F),_.push(Q),_.push(U)):(_.push(F),_.push(U),_.push(Q))}return _})(this._vertexBuffer,t);const s=[],A=t.length;for(let p=0;p<A;p+=3){const v=[t[p+0],t[p+1],t[p+2]],_=[this._vertexBuffer[2*t[p+0]+0],this._vertexBuffer[2*t[p+0]+1],this._vertexBuffer[2*t[p+1]+0],this._vertexBuffer[2*t[p+1]+1],this._vertexBuffer[2*t[p+2]+0],this._vertexBuffer[2*t[p+2]+1]];let B=1/0,F=1/0,U=-1/0,Q=-1/0;for(let le=0;le<3;le++){const he=_[2*le],Be=_[2*le+1];B=Math.min(B,he),U=Math.max(U,he),F=Math.min(F,Be),Q=Math.max(Q,Be)}if(B===U||F===Q)continue;const K=Math.floor(B/this._granularityCellSize),X=Math.ceil(U/this._granularityCellSize),J=Math.floor(F/this._granularityCellSize),oe=Math.ceil(Q/this._granularityCellSize);if(K!==X||J!==oe)for(let le=J;le<oe;le++){const he=this._scanlineGenerateVertexRingForCellRow(le,_,v);vd(this._vertexBuffer,he,s)}else s.push(...v)}return s}_scanlineGenerateVertexRingForCellRow(t,s,A){const p=t*this._granularityCellSize,v=p+this._granularityCellSize,_=[];for(let B=0;B<3;B++){const F=s[2*B],U=s[2*B+1],Q=s[2*(B+1)%6],K=s[(2*(B+1)+1)%6],X=s[2*(B+2)%6],J=s[(2*(B+2)+1)%6],oe=Q-F,le=K-U,he=oe===0,Be=le===0,tt=(p-U)/le,Se=(v-U)/le,ke=Math.min(tt,Se),it=Math.max(tt,Se);if(!Be&&(ke>=1||it<=0)||Be&&(U<p||U>v)){K>=p&&K<=v&&_.push(A[(B+1)%3]);continue}!Be&&ke>0&&_.push(this._vertexToIndex(F+oe*ke,U+le*ke));const ht=F+oe*Math.max(ke,0),Mt=F+oe*Math.min(it,1);he||this._generateIntraEdgeVertices(_,F,U,Q,K,ht,Mt),!Be&&it<1&&_.push(this._vertexToIndex(F+oe*it,U+le*it)),(Be||K>=p&&K<=v)&&_.push(A[(B+1)%3]),!Be&&(K<=p||K>=v)&&this._generateInterEdgeVertices(_,F,U,Q,K,X,J,Mt,p,v)}return _}_generateIntraEdgeVertices(t,s,A,p,v,_,B){const F=p-s,U=v-A,Q=U===0,K=Q?Math.min(s,p):Math.min(_,B),X=Q?Math.max(s,p):Math.max(_,B),J=Math.floor(K/this._granularityCellSize)+1,oe=Math.ceil(X/this._granularityCellSize)-1;if(Q?s<p:_<B)for(let le=J;le<=oe;le++){const he=le*this._granularityCellSize;t.push(this._vertexToIndex(he,A+U*(he-s)/F))}else for(let le=oe;le>=J;le--){const he=le*this._granularityCellSize;t.push(this._vertexToIndex(he,A+U*(he-s)/F))}}_generateInterEdgeVertices(t,s,A,p,v,_,B,F,U,Q){const K=v-A,X=_-p,J=B-v,oe=(U-v)/J,le=(Q-v)/J,he=Math.min(oe,le),Be=Math.max(oe,le),tt=p+X*he;let Se=Math.floor(Math.min(tt,F)/this._granularityCellSize)+1,ke=Math.ceil(Math.max(tt,F)/this._granularityCellSize)-1,it=F<tt;const ht=J===0;if(ht&&(B===U||B===Q))return;if(ht||he>=1||Be<=0){const Xt=A-B,Vt=_+(s-_)*Math.min((U-B)/Xt,(Q-B)/Xt);Se=Math.floor(Math.min(Vt,F)/this._granularityCellSize)+1,ke=Math.ceil(Math.max(Vt,F)/this._granularityCellSize)-1,it=F<Vt}const Mt=K>0?Q:U;if(it)for(let Xt=Se;Xt<=ke;Xt++)t.push(this._vertexToIndex(Xt*this._granularityCellSize,Mt));else for(let Xt=ke;Xt>=Se;Xt--)t.push(this._vertexToIndex(Xt*this._granularityCellSize,Mt))}_generateOutline(t){const s=[];for(const A of t){const p=XA(A,this._granularity,!0),v=this._pointArrayToIndices(p),_=[];for(let B=1;B<v.length;B++)_.push(v[B-1]),_.push(v[B]);s.push(_)}return s}_handlePoles(t){let s=!1,A=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(A=!0)),(s||A)&&this._fillPoles(t,s,A)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let s=0;s<t.length;s+=2){const A=t[s+1];A===yc&&(t[s+1]=-32767),A===Gu&&(t[s+1]=32766)}}_generatePoleQuad(t,s,A,p,v,_){p>v!=(_===yc)?(t.push(s),t.push(A),t.push(this._vertexToIndex(p,_)),t.push(A),t.push(this._vertexToIndex(v,_)),t.push(this._vertexToIndex(p,_))):(t.push(A),t.push(s),t.push(this._vertexToIndex(p,_)),t.push(this._vertexToIndex(v,_)),t.push(A),t.push(this._vertexToIndex(p,_)))}_fillPoles(t,s,A){const p=this._vertexBuffer,v=Te,_=t.length;for(let B=2;B<_;B+=3){const F=t[B-2],U=t[B-1],Q=t[B],K=p[2*F],X=p[2*F+1],J=p[2*U],oe=p[2*U+1],le=p[2*Q],he=p[2*Q+1];s&&(X===0&&oe===0&&this._generatePoleQuad(t,F,U,K,J,yc),oe===0&&he===0&&this._generatePoleQuad(t,U,Q,J,le,yc),he===0&&X===0&&this._generatePoleQuad(t,Q,F,le,K,yc)),A&&(X===v&&oe===v&&this._generatePoleQuad(t,F,U,K,J,Gu),oe===v&&he===v&&this._generatePoleQuad(t,U,Q,J,le,Gu),he===v&&X===v&&this._generatePoleQuad(t,Q,F,le,K,Gu))}}_initializeVertices(t){for(let s=0;s<t.length;s+=2)this._vertexToIndex(t[s],t[s+1])}subdividePolygonInternal(t,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:A,holeIndices:p}=(function(B){const F=[],U=[];for(const Q of B)if(Q.length!==0){Q!==B[0]&&F.push(U.length/2);for(let K=0;K<Q.length;K++)U.push(Q[K].x),U.push(Q[K].y)}return{flattened:U,holeIndices:F}})(t);let v;this._initializeVertices(A);try{const B=(function(U,Q,K=2){const X=Q&&Q.length,J=X?Q[0]*K:U.length;let oe=Rp(U,0,J,K,!0);const le=[];if(!oe||oe.next===oe.prev)return le;let he,Be,tt;if(X&&(oe=(function(Se,ke,it,ht){const Mt=[];for(let Xt=0,Vt=ke.length;Xt<Vt;Xt++){const ir=Rp(Se,ke[Xt]*ht,Xt<Vt-1?ke[Xt+1]*ht:Se.length,ht,!1);ir===ir.next&&(ir.steiner=!0),Mt.push(mc(ir))}Mt.sort(yi);for(let Xt=0;Xt<Mt.length;Xt++)it=ta(Mt[Xt],it);return it})(U,Q,oe,K)),U.length>80*K){he=U[0],Be=U[1];let Se=he,ke=Be;for(let it=K;it<J;it+=K){const ht=U[it],Mt=U[it+1];ht<he&&(he=ht),Mt<Be&&(Be=Mt),ht>Se&&(Se=ht),Mt>ke&&(ke=Mt)}tt=Math.max(Se-he,ke-Be),tt=tt!==0?32767/tt:0}return Wh(oe,le,K,he,Be,tt,0),le})(A,p),F=this._convertIndices(A,B);v=this._subdivideTrianglesScanline(F)}catch(B){console.error(B)}let _=[];return s&&(_=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:_}}_convertIndices(t,s){const A=[];for(let p=0;p<s.length;p++)A.push(this._vertexToIndex(t[2*s[p]],t[2*s[p]+1]));return A}_pointArrayToIndices(t){const s=[];for(let A=0;A<t.length;A++){const p=t[A];s.push(this._vertexToIndex(p.x,p.y))}return s}}function yd(l,t,s,A=!0){return new Uf(s,t).subdividePolygonInternal(l,A)}function XA(l,t,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const A=l[0],p=l[l.length-1],v=s&&(A.x!==p.x||A.y!==p.y);if(t<2)return v?[...l,l[0]]:[...l];const _=Math.floor(Te/t),B=[];B.push(new w(l[0].x,l[0].y));const F=l.length,U=v?F:F-1;for(let Q=0;Q<U;Q++){const K=l[Q],X=Q<F-1?l[Q+1]:l[0],J=K.x,oe=K.y,le=X.x,he=X.y,Be=J!==le,tt=oe!==he;if(!Be&&!tt)continue;const Se=le-J,ke=he-oe,it=Math.abs(Se),ht=Math.abs(ke);let Mt=J,Xt=oe;for(;;){const ir=Se>0?(Math.floor(Mt/_)+1)*_:(Math.ceil(Mt/_)-1)*_,_r=ke>0?(Math.floor(Xt/_)+1)*_:(Math.ceil(Xt/_)-1)*_,or=Math.abs(Mt-ir),$t=Math.abs(Xt-_r),Ot=Math.abs(Mt-le),Lr=Math.abs(Xt-he),Ir=Be?or/it:Number.POSITIVE_INFINITY,kr=tt?$t/ht:Number.POSITIVE_INFINITY;if((Ot<=or||!Be)&&(Lr<=$t||!tt))break;if(Ir<kr&&Be||!tt){Mt=ir,Xt+=ke*Ir;const Er=new w(Mt,Math.round(Xt));B[B.length-1].x===Er.x&&B[B.length-1].y===Er.y||B.push(Er)}else{Mt+=Se*kr,Xt=_r;const Er=new w(Math.round(Mt),Xt);B[B.length-1].x===Er.x&&B[B.length-1].y===Er.y||B.push(Er)}}const Vt=new w(le,he);B[B.length-1].x===Vt.x&&B[B.length-1].y===Vt.y||B.push(Vt)}return B}function vd(l,t,s){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let A=0,p=l[2*t[0]];for(let F=1;F<t.length;F++){const U=l[2*t[F]];U<p&&(p=U,A=F)}const v=t.length;let _=A,B=(_+1)%v;for(;;){const F=_-1>=0?_-1:v-1,U=(B+1)%v,Q=l[2*t[F]],K=l[2*t[U]],X=l[2*t[_]],J=l[2*t[_]+1],oe=l[2*t[B]+1];let le=!1;if(Q<K)le=!0;else if(Q>K)le=!1;else{const he=oe-J,Be=-(l[2*t[B]]-X),tt=J<oe?1:-1;((Q-X)*he+(l[2*t[F]+1]-J)*Be)*tt>((K-X)*he+(l[2*t[U]+1]-J)*Be)*tt&&(le=!0)}if(le){const he=t[F],Be=t[_],tt=t[B];he!==Be&&he!==tt&&Be!==tt&&s.push(tt,Be,he),_--,_<0&&(_=v-1)}else{const he=t[U],Be=t[_],tt=t[B];he!==Be&&he!==tt&&Be!==tt&&s.push(tt,Be,he),B++,B>=v&&(B=0)}if(F===U)break}}function Wa(l,t,s,A,p,v,_,B,F){const U=p.length/2,Q=_&&B&&F;if(U<nr.MAX_VERTEX_ARRAY_LENGTH){const K=t.prepareSegment(U,s,A),X=K.vertexLength;for(let le=0;le<v.length;le+=3)A.emplaceBack(X+v[le],X+v[le+1],X+v[le+2]);let J,oe;K.vertexLength+=U,K.primitiveLength+=v.length/3,Q&&(oe=_.prepareSegment(U,s,B),J=oe.vertexLength,oe.vertexLength+=U);for(let le=0;le<p.length;le+=2)l(p[le],p[le+1]);if(Q)for(let le=0;le<F.length;le++){const he=F[le];for(let Be=1;Be<he.length;Be+=2)B.emplaceBack(J+he[Be-1],J+he[Be]);oe.primitiveLength+=he.length/2}}else(function(K,X,J,oe,le,he){const Be=[];for(let ht=0;ht<oe.length/2;ht++)Be.push(-1);const tt={count:0};let Se=0,ke=K.getOrCreateLatestSegment(X,J),it=ke.vertexLength;for(let ht=2;ht<le.length;ht+=3){const Mt=le[ht-2],Xt=le[ht-1],Vt=le[ht];let ir=Be[Mt]<Se,_r=Be[Xt]<Se,or=Be[Vt]<Se;ke.vertexLength+((ir?1:0)+(_r?1:0)+(or?1:0))>nr.MAX_VERTEX_ARRAY_LENGTH&&(ke=K.createNewSegment(X,J),Se=tt.count,ir=!0,_r=!0,or=!0,it=0);const $t=Zc(Be,oe,he,tt,Mt,ir,ke),Ot=Zc(Be,oe,he,tt,Xt,_r,ke),Lr=Zc(Be,oe,he,tt,Vt,or,ke);J.emplaceBack(it+$t-Se,it+Ot-Se,it+Lr-Se),ke.primitiveLength++}})(t,s,A,p,v,l),Q&&(function(K,X,J,oe,le,he){const Be=[];for(let ht=0;ht<oe.length/2;ht++)Be.push(-1);const tt={count:0};let Se=0,ke=K.getOrCreateLatestSegment(X,J),it=ke.vertexLength;for(let ht=0;ht<le.length;ht++){const Mt=le[ht];for(let Xt=1;Xt<le[ht].length;Xt+=2){const Vt=Mt[Xt-1],ir=Mt[Xt];let _r=Be[Vt]<Se,or=Be[ir]<Se;ke.vertexLength+((_r?1:0)+(or?1:0))>nr.MAX_VERTEX_ARRAY_LENGTH&&(ke=K.createNewSegment(X,J),Se=tt.count,_r=!0,or=!0,it=0);const $t=Zc(Be,oe,he,tt,Vt,_r,ke),Ot=Zc(Be,oe,he,tt,ir,or,ke);J.emplaceBack(it+$t-Se,it+Ot-Se),ke.primitiveLength++}}})(_,s,B,p,F,l),t.forceNewSegmentOnNextPrepare(),_?.forceNewSegmentOnNextPrepare()}function Zc(l,t,s,A,p,v,_){if(v){const B=A.count;return s(t[2*p],t[2*p+1]),l[p]=A.count,A.count++,_.vertexLength++,B}return l[p]}class vc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new _e,this.indexArray=new Dt,this.indexArray2=new Lt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.segments2=new nr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.hasDependencies=dd("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),_=[];for(const{feature:B,id:F,index:U,sourceLayerIndex:Q}of t){const K=this.layers[0]._featureFilter.needGeometry,X=qA(B,K);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),X,A))continue;const J=v?p.evaluate(X,{},A,s.availableImages):void 0,oe={id:F,properties:B.properties,type:B.type,sourceLayerIndex:Q,index:U,geometry:K?X.geometry:KA(B),patterns:{},sortKey:J};_.push(oe)}v&&_.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of _){const{geometry:F,index:U,sourceLayerIndex:Q}=B;if(this.hasDependencies){const K=pd("fill",this.layers,B,{zoom:this.zoom},s);this.patternFeatures.push(K)}else this.addFeature(B,F,U,A,{},s.subdivisionGranularity);s.featureIndex.insert(t[U].feature,F,U,Q,this.index)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}addFeatures(t,s,A){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,A,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,WA),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,s,A,p,v,_){for(const B of Ma(s,500)){const F=yd(B,p,_.fill.getGranularityForZoomLevel(p.z)),U=this.layoutVertexArray;Wa(((Q,K)=>{U.emplaceBack(Q,K)}),this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,canonical:p})}}let _l,Qp;We("FillBucket",vc,{omit:["layers","patternFeatures"]});var Op={get paint(){return Qp=Qp||new ci({"fill-antialias":new gr(mt.paint_fill["fill-antialias"]),"fill-opacity":new xr(mt.paint_fill["fill-opacity"]),"fill-color":new xr(mt.paint_fill["fill-color"]),"fill-outline-color":new xr(mt.paint_fill["fill-outline-color"]),"fill-translate":new gr(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new gr(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ti(mt.paint_fill["fill-pattern"])})},get layout(){return _l=_l||new ci({"fill-sort-key":new xr(mt.layout_fill["fill-sort-key"])})}};class zp extends Rn{constructor(t,s){super(t,Op,s)}recalculate(t,s){super.recalculate(t,s);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new vc(t)}queryRadius(){return mh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:s,transform:A,pixelsToTileUnits:p}){return Kh($c(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-A.bearingInRadians,p),s)}isTileClipped(){return!0}}const ev=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ku=Vn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hg}=ev;class wh{constructor(t,s,A,p,v){this.properties={},this.extent=A,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=p,this._values=v,t.readFields(xh,this,s)}loadGeometry(){const t=this._pbf;t.pos=this._geometry;const s=t.readVarint()+t.pos,A=[];let p,v=1,_=0,B=0,F=0;for(;t.pos<s;){if(_<=0){const U=t.readVarint();v=7&U,_=U>>3}if(_--,v===1||v===2)B+=t.readSVarint(),F+=t.readSVarint(),v===1&&(p&&A.push(p),p=[]),p&&p.push(new w(B,F));else{if(v!==7)throw new Error(`unknown command ${v}`);p&&p.push(p[0].clone())}}return p&&A.push(p),A}bbox(){const t=this._pbf;t.pos=this._geometry;const s=t.readVarint()+t.pos;let A=1,p=0,v=0,_=0,B=1/0,F=-1/0,U=1/0,Q=-1/0;for(;t.pos<s;){if(p<=0){const K=t.readVarint();A=7&K,p=K>>3}if(p--,A===1||A===2)v+=t.readSVarint(),_+=t.readSVarint(),v<B&&(B=v),v>F&&(F=v),_<U&&(U=_),_>Q&&(Q=_);else if(A!==7)throw new Error(`unknown command ${A}`)}return[B,U,F,Q]}toGeoJSON(t,s,A){const p=this.extent*Math.pow(2,A),v=this.extent*t,_=this.extent*s,B=this.loadGeometry();function F(X){return[360*(X.x+v)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(X.y+_)/p)*Math.PI))-90]}function U(X){return X.map(F)}let Q;if(this.type===1){const X=[];for(const oe of B)X.push(oe[0]);const J=U(X);Q=X.length===1?{type:"Point",coordinates:J[0]}:{type:"MultiPoint",coordinates:J}}else if(this.type===2){const X=B.map(U);Q=X.length===1?{type:"LineString",coordinates:X[0]}:{type:"MultiLineString",coordinates:X}}else{if(this.type!==3)throw new Error("unknown feature type");{const X=_d(B),J=[];for(const oe of X)J.push(oe.map(U));Q=J.length===1?{type:"Polygon",coordinates:J[0]}:{type:"MultiPolygon",coordinates:J}}}const K={type:"Feature",geometry:Q,properties:this.properties};return this.id!=null&&(K.id=this.id),K}}function xh(l,t,s){l===1?t.id=s.readVarint():l===2?(function(A,p){const v=A.readVarint()+A.pos;for(;A.pos<v;){const _=p._keys[A.readVarint()],B=p._values[A.readVarint()];p.properties[_]=B}})(s,t):l===3?t.type=s.readVarint():l===4&&(t._geometry=s.pos)}function _d(l){const t=l.length;if(t<=1)return[l];const s=[];let A,p;for(let v=0;v<t;v++){const _=bh(l[v]);_!==0&&(p===void 0&&(p=_<0),p===_<0?(A&&s.push(A),A=[l[v]]):A&&A.push(l[v]))}return A&&s.push(A),s}function bh(l){let t=0;for(let s,A,p=0,v=l.length,_=v-1;p<v;_=p++)s=l[p],A=l[_],t+=(A.x-s.x)*(s.y+A.y);return t}wh.types=["Unknown","Point","LineString","Polygon"];class fg{constructor(t,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(dg,this,s),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const s=this._pbf.readVarint()+this._pbf.pos;return new wh(this._pbf,s,this.extent,this._keys,this._values)}}function dg(l,t,s){l===15?t.version=s.readVarint():l===1?t.name=s.readString():l===5?t.extent=s.readVarint():l===2?t._features.push(s.pos):l===3?t._keys.push(s.readString()):l===4&&t._values.push((function(A){let p=null;const v=A.readVarint()+A.pos;for(;A.pos<v;){const _=A.readVarint()>>3;p=_===1?A.readString():_===2?A.readFloat():_===3?A.readDouble():_===4?A.readVarint64():_===5?A.readVarint():_===6?A.readSVarint():_===7?A.readBoolean():null}if(p==null)throw new Error("unknown feature value");return p})(s))}class wd{constructor(t,s){this.layers=t.readFields(xd,{},s)}}function xd(l,t,s){if(l===3){const A=new fg(s,s.readVarint()+s.pos);A.length&&(t[A.name]=A)}}const Hp=Math.pow(2,13);function Df(l,t,s,A,p,v,_,B){l.emplaceBack(t,s,2*Math.floor(A*Hp)+_,p*Hp*2,v*Hp*2,Math.round(B))}class bd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new De,this.centroidVertexArray=new ee,this.indexArray=new Dt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.features=[],this.hasDependencies=dd("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:_,sourceLayerIndex:B}of t){const F=this.layers[0]._featureFilter.needGeometry,U=qA(p,F);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),U,A))continue;const Q={id:v,sourceLayerIndex:B,index:_,geometry:F?U.geometry:KA(p),properties:p.properties,type:p.type,patterns:{}};this.hasDependencies?this.features.push(pd("fill-extrusion",this.layers,Q,{zoom:this.zoom},s)):this.addFeature(Q,Q.geometry,_,A,{},s.subdivisionGranularity),s.featureIndex.insert(p,Q.geometry,_,B,this.index,!0)}}addFeatures(t,s,A){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,A,t.subdivisionGranularity)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hg),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Ku.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,s,A,p,v,_){for(const B of Ma(s,500)){const F={x:0,y:0,sampleCount:0},U=this.layoutVertexArray.length;this.processPolygon(F,p,t,B,_);const Q=this.layoutVertexArray.length-U,K=Math.floor(F.x/F.sampleCount),X=Math.floor(F.y/F.sampleCount);for(let J=0;J<Q;J++)this.centroidVertexArray.emplaceBack(K,X)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,canonical:p})}processPolygon(t,s,A,p,v){if(p.length<1||mg(p[0]))return;for(const K of p)K.length!==0&&pg(t,K);const _={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},B=v.fill.getGranularityForZoomLevel(s.z),F=wh.types[A.type]==="Polygon";for(const K of p){if(K.length===0||mg(K))continue;const X=XA(K,B,F);this._generateSideFaces(X,_)}if(!F)return;const U=yd(p,s,B,!1),Q=this.layoutVertexArray;Wa(((K,X)=>{Df(Q,K,X,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,U.verticesFlattened,U.indicesTriangles)}_generateSideFaces(t,s){let A=0;for(let p=1;p<t.length;p++){const v=t[p],_=t[p-1];if(Bh(v,_))continue;s.segment.vertexLength+4>nr.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const B=v.sub(_)._perp()._unit(),F=_.dist(v);A+F>32768&&(A=0),Df(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,0,A),Df(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,1,A),A+=F,Df(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,0,A),Df(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,1,A);const U=s.segment.vertexLength;this.indexArray.emplaceBack(U,U+2,U+1),this.indexArray.emplaceBack(U+1,U+2,U+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function pg(l,t){for(let s=0;s<t.length;s++){const A=t[s];s===t.length-1&&t[0].x===A.x&&t[0].y===A.y||(l.x+=A.x,l.y+=A.y,l.sampleCount++)}}function Bh(l,t){return l.x===t.x&&(l.x<0||l.x>Te)||l.y===t.y&&(l.y<0||l.y>Te)}function mg(l){return l.every((t=>t.x<0))||l.every((t=>t.x>Te))||l.every((t=>t.y<0))||l.every((t=>t.y>Te))}let Ch;We("FillExtrusionBucket",bd,{omit:["layers","features"]});var gg={get paint(){return Ch=Ch||new ci({"fill-extrusion-opacity":new gr(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xr(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gr(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gr(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ti(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xr(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xr(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gr(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class no extends Rn{constructor(t,s){super(t,gg,s)}createBucket(t){return new bd(t)}queryRadius(){return mh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,pixelPosMatrix:B}){const F=$c(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,_),U=this.paint.get("fill-extrusion-height").evaluate(s,A),Q=this.paint.get("fill-extrusion-base").evaluate(s,A),K=(function(J,oe){const le=[];for(const he of J){const Be=[he.x,he.y,0,1];Ie(Be,Be,oe),le.push(new w(Be[0]/Be[3],Be[1]/Be[3]))}return le})(F,B),X=(function(J,oe,le,he){const Be=[],tt=[],Se=he[8]*oe,ke=he[9]*oe,it=he[10]*oe,ht=he[11]*oe,Mt=he[8]*le,Xt=he[9]*le,Vt=he[10]*le,ir=he[11]*le;for(const _r of J){const or=[],$t=[];for(const Ot of _r){const Lr=Ot.x,Ir=Ot.y,kr=he[0]*Lr+he[4]*Ir+he[12],Er=he[1]*Lr+he[5]*Ir+he[13],Jr=he[2]*Lr+he[6]*Ir+he[14],ri=he[3]*Lr+he[7]*Ir+he[15],Gn=Jr+it,ps=ri+ht,Ja=kr+Mt,wo=Er+Xt,ms=Jr+Vt,As=ri+ir,Bi=new w((kr+Se)/ps,(Er+ke)/ps);Bi.z=Gn/ps,or.push(Bi);const js=new w(Ja/As,wo/As);js.z=ms/As,$t.push(js)}Be.push(or),tt.push($t)}return[Be,tt]})(p,Q,U,B);return(function(J,oe,le){let he=1/0;Kh(le,oe)&&(he=jp(le,oe[0]));for(let Be=0;Be<oe.length;Be++){const tt=oe[Be],Se=J[Be];for(let ke=0;ke<tt.length-1;ke++){const it=tt[ke],ht=[it,tt[ke+1],Se[ke+1],Se[ke],it];hh(le,ht)&&(he=Math.min(he,jp(le,ht)))}}return he!==1/0&&he})(X[0],X[1],K)}}function Rf(l,t){return l.x*t.x+l.y*t.y}function jp(l,t){if(l.length===1){let s=0;const A=t[s++];let p;for(;!p||A.equals(p);)if(p=t[s++],!p)return 1/0;for(;s<t.length;s++){const v=t[s],_=l[0],B=p.sub(A),F=v.sub(A),U=_.sub(A),Q=Rf(B,B),K=Rf(B,F),X=Rf(F,F),J=Rf(U,B),oe=Rf(U,F),le=Q*X-K*K,he=(X*J-K*oe)/le,Be=(Q*oe-K*J)/le,tt=A.z*(1-he-Be)+p.z*he+v.z*Be;if(isFinite(tt))return tt}return 1/0}{let s=1/0;for(const A of t)s=Math.min(s,A.z);return s}}const tv=Vn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rv}=tv,yg=Vn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:vg}=yg,nv=Math.cos(Math.PI/180*37.5),_c=Math.pow(2,14)/.5;class Nf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new ze,this.layoutVertexArray2=new Qe,this.indexArray=new Dt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.hasDependencies=dd("line",this.layers,s)||this.hasLineDasharray(this.layers);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),_=[];for(const{feature:B,id:F,index:U,sourceLayerIndex:Q}of t){const K=this.layers[0]._featureFilter.needGeometry,X=qA(B,K);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),X,A))continue;const J=v?p.evaluate(X,{},A):void 0,oe={id:F,properties:B.properties,type:B.type,sourceLayerIndex:Q,index:U,geometry:K?X.geometry:KA(B),patterns:{},dashes:{},sortKey:J};_.push(oe)}v&&_.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of _){const{geometry:F,index:U,sourceLayerIndex:Q}=B;this.hasDependencies?(dd("line",this.layers,s)?pd("line",this.layers,B,{zoom:this.zoom},s):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,B,this.zoom,s),this.patternFeatures.push(B)):this.addFeature(B,F,U,A,{},{},s.subdivisionGranularity),s.featureIndex.insert(t[U].feature,F,U,Q,this.index)}}update(t,s,A,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A,dashPositions:p})}addFeatures(t,s,A,p){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,A,p,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,vg)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rv),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,s,A,p,v,_,B){const F=this.layers[0].layout,U=F.get("line-join").evaluate(t,{}),Q=F.get("line-cap"),K=F.get("line-miter-limit"),X=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const J of s)this.addLine(J,t,U,Q,K,X,p,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,dashPositions:_,canonical:p})}addLine(t,s,A,p,v,_,B,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=XA(t,B?F.line.getGranularityForZoomLevel(B.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Se=0;Se<t.length-1;Se++)this.totalDistance+=t[Se].dist(t[Se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const U=wh.types[s.type]==="Polygon";let Q=t.length;for(;Q>=2&&t[Q-1].equals(t[Q-2]);)Q--;let K=0;for(;K<Q-1&&t[K].equals(t[K+1]);)K++;if(Q<(U?3:2))return;A==="bevel"&&(v=1.05);const X=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*Q,this.layoutVertexArray,this.indexArray);let oe,le,he,Be,tt;this.e1=this.e2=-1,U&&(oe=t[Q-2],tt=t[K].sub(oe)._unit()._perp());for(let Se=K;Se<Q;Se++){if(he=Se===Q-1?U?t[K+1]:void 0:t[Se+1],he&&t[Se].equals(he))continue;tt&&(Be=tt),oe&&(le=oe),oe=t[Se],tt=he?he.sub(oe)._unit()._perp():Be,Be=Be||tt;let ke=Be.add(tt);ke.x===0&&ke.y===0||ke._unit();const it=Be.x*tt.x+Be.y*tt.y,ht=ke.x*tt.x+ke.y*tt.y,Mt=ht!==0?1/ht:1/0,Xt=2*Math.sqrt(2-2*ht),Vt=ht<nv&&le&&he,ir=Be.x*tt.y-Be.y*tt.x>0;if(Vt&&Se>K){const $t=oe.dist(le);if($t>2*X){const Ot=oe.sub(oe.sub(le)._mult(X/$t)._round());this.updateDistance(le,Ot),this.addCurrentVertex(Ot,Be,0,0,J),le=Ot}}const _r=le&&he;let or=_r?A:U?"butt":p;if(_r&&or==="round"&&(Mt<_?or="miter":Mt<=2&&(or="fakeround")),or==="miter"&&Mt>v&&(or="bevel"),or==="bevel"&&(Mt>2&&(or="flipbevel"),Mt<v&&(or="miter")),le&&this.updateDistance(le,oe),or==="miter")ke._mult(Mt),this.addCurrentVertex(oe,ke,0,0,J);else if(or==="flipbevel"){if(Mt>100)ke=tt.mult(-1);else{const $t=Mt*Be.add(tt).mag()/Be.sub(tt).mag();ke._perp()._mult($t*(ir?-1:1))}this.addCurrentVertex(oe,ke,0,0,J),this.addCurrentVertex(oe,ke.mult(-1),0,0,J)}else if(or==="bevel"||or==="fakeround"){const $t=-Math.sqrt(Mt*Mt-1),Ot=ir?$t:0,Lr=ir?0:$t;if(le&&this.addCurrentVertex(oe,Be,Ot,Lr,J),or==="fakeround"){const Ir=Math.round(180*Xt/Math.PI/20);for(let kr=1;kr<Ir;kr++){let Er=kr/Ir;if(Er!==.5){const ri=Er-.5;Er+=Er*ri*(Er-1)*((1.0904+it*(it*(3.55645-1.43519*it)-3.2452))*ri*ri+(.848013+it*(.215638*it-1.06021)))}const Jr=tt.sub(Be)._mult(Er)._add(Be)._unit()._mult(ir?-1:1);this.addHalfVertex(oe,Jr.x,Jr.y,!1,ir,0,J)}}he&&this.addCurrentVertex(oe,tt,-Ot,-Lr,J)}else if(or==="butt")this.addCurrentVertex(oe,ke,0,0,J);else if(or==="square"){const $t=le?1:-1;this.addCurrentVertex(oe,ke,$t,$t,J)}else or==="round"&&(le&&(this.addCurrentVertex(oe,Be,0,0,J),this.addCurrentVertex(oe,Be,1,1,J,!0)),he&&(this.addCurrentVertex(oe,tt,-1,-1,J,!0),this.addCurrentVertex(oe,tt,0,0,J)));if(Vt&&Se<Q-1){const $t=oe.dist(he);if($t>2*X){const Ot=oe.add(he.sub(oe)._mult(X/$t)._round());this.updateDistance(oe,Ot),this.addCurrentVertex(Ot,tt,0,0,J),oe=Ot}}}}addCurrentVertex(t,s,A,p,v,_=!1){const B=s.y*p-s.x,F=-s.y-s.x*p;this.addHalfVertex(t,s.x+s.y*A,s.y-s.x*A,_,!1,A,v),this.addHalfVertex(t,B,F,_,!0,-p,v),this.distance>_c/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,s,A,p,v,_))}addHalfVertex({x:t,y:s},A,p,v,_,B,F){const U=.5*(this.lineClips?this.scaledDistance*(_c-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*A)+128,Math.round(63*p)+128,1+(B===0?0:B<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Q=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Q,this.e2),F.primitiveLength++),_?this.e2=Q:this.e1=Q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,s){this.distance+=t.dist(s),this.updateScaledDistance()}hasLineDasharray(t){for(const s of t){const A=s.paint.get("line-dasharray");if(A&&!A.isConstant())return!0}return!1}addLineDashDependencies(t,s,A,p){for(const v of t){const _=v.paint.get("line-dasharray");if(!_||_.value.kind==="constant")continue;const B=v.layout.get("line-cap")==="round",F={dasharray:_.value.evaluate({zoom:A-1},s,{}),round:B},U={dasharray:_.value.evaluate({zoom:A},s,{}),round:B},Q={dasharray:_.value.evaluate({zoom:A+1},s,{}),round:B},K=`${F.dasharray.join(",")},${F.round}`,X=`${U.dasharray.join(",")},${U.round}`,J=`${Q.dasharray.join(",")},${Q.round}`;p.dashDependencies[K]=F,p.dashDependencies[X]=U,p.dashDependencies[J]=Q,s.dashes[v.id]={min:K,mid:X,max:J}}}}let _g,yu;We("LineBucket",Nf,{omit:["layers","patternFeatures"]});var Qf={get paint(){return yu=yu||new ci({"line-opacity":new xr(mt.paint_line["line-opacity"]),"line-color":new xr(mt.paint_line["line-color"]),"line-translate":new gr(mt.paint_line["line-translate"]),"line-translate-anchor":new gr(mt.paint_line["line-translate-anchor"]),"line-width":new xr(mt.paint_line["line-width"]),"line-gap-width":new xr(mt.paint_line["line-gap-width"]),"line-offset":new xr(mt.paint_line["line-offset"]),"line-blur":new xr(mt.paint_line["line-blur"]),"line-dasharray":new Ti(mt.paint_line["line-dasharray"]),"line-pattern":new Ti(mt.paint_line["line-pattern"]),"line-gradient":new ei(mt.paint_line["line-gradient"])})},get layout(){return _g=_g||new ci({"line-cap":new gr(mt.layout_line["line-cap"]),"line-join":new xr(mt.layout_line["line-join"]),"line-miter-limit":new gr(mt.layout_line["line-miter-limit"]),"line-round-limit":new gr(mt.layout_line["line-round-limit"]),"line-sort-key":new xr(mt.layout_line["line-sort-key"])})}};class Eh extends xr{possiblyEvaluate(t,s){return s=new Mr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(t,s)}evaluate(t,s,A,p){return s=_t({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(t,s,A,p)}}let Sh;class Vp extends Rn{constructor(t,s){super(t,Qf,s),this.gradientVersion=0,Sh||(Sh=new Eh(Qf.paint.properties["line-width"].specification),Sh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(A){return A._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof fa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,s){super.recalculate(t,s),this.paint._values["line-floorwidth"]=Sh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Nf(t)}queryRadius(t){const s=t,A=Bd(ph("line-width",this,s),ph("line-gap-width",this,s)),p=ph("line-offset",this,s);return A/2+Math.abs(p)+mh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_}){const B=$c(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,_),F=_/2*Bd(this.paint.get("line-width").evaluate(s,A),this.paint.get("line-gap-width").evaluate(s,A)),U=this.paint.get("line-offset").evaluate(s,A);return U&&(p=(function(Q,K){const X=[];for(let J=0;J<Q.length;J++){const oe=Yy(Q[J]),le=[];for(let he=0;he<oe.length;he++){const Be=oe[he],tt=oe[he-1],Se=oe[he+1],ke=he===0?new w(0,0):Be.sub(tt)._unit()._perp(),it=he===oe.length-1?new w(0,0):Se.sub(Be)._unit()._perp(),ht=ke._add(it)._unit(),Mt=ht.x*it.x+ht.y*it.y;Mt!==0&&ht._mult(1/Mt),le.push(ht._mult(K)._add(Be))}X.push(le)}return X})(p,U*_)),(function(Q,K,X){for(let J=0;J<K.length;J++){const oe=K[J];if(Q.length>=3){for(let le=0;le<oe.length;le++)if(dh(Q,oe[le]))return!0}if(fh(Q,oe,X))return!0}return!1})(B,p,F)}isTileClipped(){return!0}}function Bd(l,t){return t>0?t+2*l:l}const iv=Vn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Gp=Vn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Vn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const sv=Vn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Vn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Kp=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wg=Vn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Cd(l,t,s){return l.sections.forEach((A=>{A.text=(function(p,v,_){const B=v.layout.get("text-transform").evaluate(_,{});return B==="uppercase"?p=p.toLocaleUpperCase():B==="lowercase"&&(p=p.toLocaleLowerCase()),pi.applyArabicShaping&&(p=pi.applyArabicShaping(p)),p})(A.text,t,s)})),l}Vn([{name:"triangle",components:3,type:"Uint16"}]),Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Vn([{type:"Float32",name:"offsetX"}]),Vn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Vn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Hs=24;const Zh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},qp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ov={40:!0};function $p(l,t,s,A,p,v){if("fontStack"in t){const _=s[t.fontStack],B=_&&_[l];return B?B.metrics.advance*t.scale+p:0}{const _=A[t.imageName];return _?_.displaySize[0]*t.scale*Hs/v+p:0}}function Ed(l,t,s,A){const p=Math.pow(l-t,2);return A?l<t?p/2:2*p:p+Math.abs(s)*s}function Sd(l,t,s){let A=0;return l===10&&(A-=1e4),s&&(A+=150),l!==40&&l!==65288||(A+=50),t!==41&&t!==65289||(A+=50),A}function Fd(l,t,s,A,p,v){let _=null,B=Ed(t,s,p,v);for(const F of A){const U=Ed(t-F.x,s,p,v)+F.badness;U<=B&&(_=F,B=U)}return{index:l,x:t,priorBreak:_,badness:B}}function Of(l){return l?Of(l.priorBreak).concat(l.index):[]}class Fh{constructor(t="",s=[],A=[]){this.text=t,this.sections=s,this.sectionIndex=A,this.imageSectionID=null}static fromFeature(t,s){const A=new Fh;for(let p=0;p<t.sections.length;p++){const v=t.sections[p];v.image?A.addImageSection(v):A.addTextSection(v,s)}return A}length(){return[...this.text].length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}verticalizePunctuation(){this.text=(function(t){let s="",A={premature:!0,value:void 0};const p=t[Symbol.iterator]();let v=p.next();const _=t[Symbol.iterator]();_.next();let B=_.next();for(;!v.done;)s+=!B.done&&Qn(B.value.codePointAt(0))&&!Zh[B.value]||!A.premature&&Qn(A.value.codePointAt(0))&&!Zh[A.value]||!Zh[v.value]?v.value:Zh[v.value],A={value:v.value,premature:!1},v=p.next(),B=_.next();return s})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const t=this.text.match(/^\s*/),s=t?t[0].length:0,A=this.text.match(/\S\s*$/),p=A?A[0].length-1:0;this.text=this.text.substring(s,this.text.length-p),this.sectionIndex=this.sectionIndex.slice(s,this.sectionIndex.length-p)}substring(t,s){const A=[...this.text].slice(t,s).join(""),p=this.sectionIndex.slice(t,s);return new Fh(A,this.sections,p)}toCodeUnitIndex(t){return[...this.text].slice(0,t).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,s)=>Math.max(t,this.sections[s].scale)),0)}getMaxImageSize(t){let s=0,A=0;for(let p=0;p<this.length();p++){const v=this.getSection(p);if("imageName"in v){const _=t[v.imageName];if(!_)continue;const B=_.displaySize;s=Math.max(s,B[0]),A=Math.max(A,B[1])}}return{maxImageWidth:s,maxImageHeight:A}}addTextSection(t,s){this.text+=t.text,this.sections.push({scale:t.scale||1,verticalAlign:t.verticalAlign||"bottom",fontStack:t.fontStack||s});const A=this.sections.length-1;this.sectionIndex.push(...[...t.text].map((()=>A)))}addImageSection(t){const s=t.image?t.image.name:"";if(s.length===0)return void Cr("Can't add FormattedSection with an empty image.");const A=this.getNextImageSectionCharCode();A?(this.text+=String.fromCharCode(A),this.sections.push({scale:1,verticalAlign:t.verticalAlign||"bottom",imageName:s}),this.sectionIndex.push(this.sections.length-1)):Cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(t,s,A,p,v){const _=[],B=this.determineAverageLineWidth(t,s,A,p,v),F=this.hasZeroWidthSpaces();let U=0,Q=0;const K=this.text[Symbol.iterator]();let X=K.next();const J=this.text[Symbol.iterator]();J.next();let oe=J.next();const le=this.text[Symbol.iterator]();le.next(),le.next();let he=le.next();for(;!X.done;){const Be=this.getSection(Q),tt=X.value.codePointAt(0);if(tr(tt)||(U+=$p(tt,Be,A,p,t,v)),!oe.done){const Se=qt(tt),ke=oe.value.codePointAt(0);(qp[tt]||Se||"imageName"in Be||!he.done&&ov[ke])&&_.push(Fd(Q+1,U,B,_,Sd(tt,ke,Se&&F),!1))}Q++,X=K.next(),oe=J.next(),he=le.next()}return Of(Fd(this.length(),U,B,_,0,!0))}determineAverageLineWidth(t,s,A,p,v){let _=0,B=0;for(const F of this.text){const U=this.getSection(B);_+=$p(F.codePointAt(0),U,A,p,t,v),B++}return _/Math.max(1,Math.ceil(_/s))}}const Wp=4294967296,zf=1/Wp,xg=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class qu{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,s,A=this.length){for(;this.pos<A;){const p=this.readVarint(),v=p>>3,_=this.pos;this.type=7&p,t(v,s,this),this.pos===_&&this.skip(p)}return s}readMessage(t,s){return this.readFields(t,s,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Wp;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Wp;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const s=this.buf;let A,p;return p=s[this.pos++],A=127&p,p<128?A:(p=s[this.pos++],A|=(127&p)<<7,p<128?A:(p=s[this.pos++],A|=(127&p)<<14,p<128?A:(p=s[this.pos++],A|=(127&p)<<21,p<128?A:(p=s[this.pos],A|=(15&p)<<28,(function(v,_,B){const F=B.buf;let U,Q;if(Q=F[B.pos++],U=(112&Q)>>4,Q<128||(Q=F[B.pos++],U|=(127&Q)<<3,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<10,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<17,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<24,Q<128)||(Q=F[B.pos++],U|=(1&Q)<<31,Q<128))return Xh(v,U,_);throw new Error("Expected varint not more than 10 bytes")})(A,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,s=this.pos;return this.pos=t,t-s>=12&&xg?xg.decode(this.buf.subarray(s,t)):(function(A,p,v){let _="",B=p;for(;B<v;){const F=A[B];let U,Q,K,X=null,J=F>239?4:F>223?3:F>191?2:1;if(B+J>v)break;J===1?F<128&&(X=F):J===2?(U=A[B+1],(192&U)==128&&(X=(31&F)<<6|63&U,X<=127&&(X=null))):J===3?(U=A[B+1],Q=A[B+2],(192&U)==128&&(192&Q)==128&&(X=(15&F)<<12|(63&U)<<6|63&Q,(X<=2047||X>=55296&&X<=57343)&&(X=null))):J===4&&(U=A[B+1],Q=A[B+2],K=A[B+3],(192&U)==128&&(192&Q)==128&&(192&K)==128&&(X=(15&F)<<18|(63&U)<<12|(63&Q)<<6|63&K,(X<=65535||X>=1114112)&&(X=null))),X===null?(X=65533,J=1):X>65535&&(X-=65536,_+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),_+=String.fromCharCode(X),B+=J}return _})(this.buf,s,t)}readBytes(){const t=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,t);return this.pos=t,s}readPackedVarint(t=[],s){const A=this.readPackedEnd();for(;this.pos<A;)t.push(this.readVarint(s));return t}readPackedSVarint(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(t){const s=7&t;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(t,s){this.writeVarint(t<<3|s)}realloc(t){let s=this.length||16;for(;s<this.pos+t;)s*=2;if(s!==this.length){const A=new Uint8Array(s);A.set(this.buf),this.buf=A,this.dataView=new DataView(A.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*zf),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*zf),!0),this.pos+=8}writeVarint(t){(t=+t||0)>268435455||t<0?(function(s,A){let p,v;if(s>=0?(p=s%4294967296|0,v=s/4294967296|0):(p=~(-s%4294967296),v=~(-s/4294967296),4294967295^p?p=p+1|0:(p=0,v=v+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),(function(_,B,F){F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,F.buf[F.pos]=127&(_>>>=7)})(p,0,A),(function(_,B){const F=(7&_)<<4;B.buf[B.pos++]|=F|((_>>>=3)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_)))))})(v,A)})(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;const s=this.pos;this.pos=(function(p,v,_){for(let B,F,U=0;U<v.length;U++){if(B=v.charCodeAt(U),B>55295&&B<57344){if(!F){B>56319||U+1===v.length?(p[_++]=239,p[_++]=191,p[_++]=189):F=B;continue}if(B<56320){p[_++]=239,p[_++]=191,p[_++]=189,F=B;continue}B=F-55296<<10|B-56320|65536,F=null}else F&&(p[_++]=239,p[_++]=191,p[_++]=189,F=null);B<128?p[_++]=B:(B<2048?p[_++]=B>>6|192:(B<65536?p[_++]=B>>12|224:(p[_++]=B>>18|240,p[_++]=B>>12&63|128),p[_++]=B>>6&63|128),p[_++]=63&B|128)}return _})(this.buf,t,this.pos);const A=this.pos-s;A>=128&&Hf(s,A,this),this.pos=s-1,this.writeVarint(A),this.pos+=A}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const s=t.length;this.writeVarint(s),this.realloc(s);for(let A=0;A<s;A++)this.buf[this.pos++]=t[A]}writeRawMessage(t,s){this.pos++;const A=this.pos;t(s,this);const p=this.pos-A;p>=128&&Hf(A,p,this),this.pos=A-1,this.writeVarint(p),this.pos+=p}writeMessage(t,s,A){this.writeTag(t,2),this.writeRawMessage(s,A)}writePackedVarint(t,s){s.length&&this.writeMessage(t,h,s)}writePackedSVarint(t,s){s.length&&this.writeMessage(t,g,s)}writePackedBoolean(t,s){s.length&&this.writeMessage(t,G,s)}writePackedFloat(t,s){s.length&&this.writeMessage(t,C,s)}writePackedDouble(t,s){s.length&&this.writeMessage(t,k,s)}writePackedFixed32(t,s){s.length&&this.writeMessage(t,Y,s)}writePackedSFixed32(t,s){s.length&&this.writeMessage(t,xe,s)}writePackedFixed64(t,s){s.length&&this.writeMessage(t,ut,s)}writePackedSFixed64(t,s){s.length&&this.writeMessage(t,xt,s)}writeBytesField(t,s){this.writeTag(t,2),this.writeBytes(s)}writeFixed32Field(t,s){this.writeTag(t,5),this.writeFixed32(s)}writeSFixed32Field(t,s){this.writeTag(t,5),this.writeSFixed32(s)}writeFixed64Field(t,s){this.writeTag(t,1),this.writeFixed64(s)}writeSFixed64Field(t,s){this.writeTag(t,1),this.writeSFixed64(s)}writeVarintField(t,s){this.writeTag(t,0),this.writeVarint(s)}writeSVarintField(t,s){this.writeTag(t,0),this.writeSVarint(s)}writeStringField(t,s){this.writeTag(t,2),this.writeString(s)}writeFloatField(t,s){this.writeTag(t,5),this.writeFloat(s)}writeDoubleField(t,s){this.writeTag(t,1),this.writeDouble(s)}writeBooleanField(t,s){this.writeVarintField(t,+s)}}function Xh(l,t,s){return s?4294967296*t+(l>>>0):4294967296*(t>>>0)+(l>>>0)}function Hf(l,t,s){const A=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));s.realloc(A);for(let p=s.pos-1;p>=l;p--)s.buf[p+A]=s.buf[p]}function h(l,t){for(let s=0;s<l.length;s++)t.writeVarint(l[s])}function g(l,t){for(let s=0;s<l.length;s++)t.writeSVarint(l[s])}function C(l,t){for(let s=0;s<l.length;s++)t.writeFloat(l[s])}function k(l,t){for(let s=0;s<l.length;s++)t.writeDouble(l[s])}function G(l,t){for(let s=0;s<l.length;s++)t.writeBoolean(l[s])}function Y(l,t){for(let s=0;s<l.length;s++)t.writeFixed32(l[s])}function xe(l,t){for(let s=0;s<l.length;s++)t.writeSFixed32(l[s])}function ut(l,t){for(let s=0;s<l.length;s++)t.writeFixed64(l[s])}function xt(l,t){for(let s=0;s<l.length;s++)t.writeSFixed64(l[s])}function jt(l,t,s){l===1&&s.readMessage(fr,t)}function fr(l,t,s){if(l===3){const{id:A,bitmap:p,width:v,height:_,left:B,top:F,advance:U}=s.readMessage(yr,{});t.push({id:A,bitmap:new mu({width:v+6,height:_+6},p),metrics:{width:v,height:_,left:B,top:F,advance:U}})}}function yr(l,t,s){l===1?t.id=s.readVarint():l===2?t.bitmap=s.readBytes():l===3?t.width=s.readVarint():l===4?t.height=s.readVarint():l===5?t.left=s.readSVarint():l===6?t.top=s.readSVarint():l===7&&(t.advance=s.readVarint())}function ur(l){let t=0,s=0;for(const _ of l)t+=_.w*_.h,s=Math.max(s,_.w);l.sort(((_,B)=>B.h-_.h));const A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),s),h:1/0}];let p=0,v=0;for(const _ of l)for(let B=A.length-1;B>=0;B--){const F=A[B];if(!(_.w>F.w||_.h>F.h)){if(_.x=F.x,_.y=F.y,v=Math.max(v,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===F.w&&_.h===F.h){const U=A.pop();U&&B<A.length&&(A[B]=U)}else _.h===F.h?(F.x+=_.w,F.w-=_.w):_.w===F.w?(F.y+=_.h,F.h-=_.h):(A.push({x:F.x+_.w,y:F.y,w:F.w-_.w,h:_.h}),F.y+=_.h,F.h-=_.h);break}}return{w:p,h:v,fill:t/(p*v)||0}}class Qr{constructor(t,{pixelRatio:s,version:A,stretchX:p,stretchY:v,content:_,textFitWidth:B,textFitHeight:F}){this.paddedRect=t,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=_,this.version=A,this.textFitWidth=B,this.textFitHeight=F}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class en{constructor(t,s){const A={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(t,A,v),this.addImages(s,p,v);const{w:_,h:B}=ur(v),F=new Jo({width:_||1,height:B||1});for(const U in t){const Q=t[U],K=A[U].paddedRect;Jo.copy(Q.data,F,{x:0,y:0},{x:K.x+1,y:K.y+1},Q.data)}for(const U in s){const Q=s[U],K=p[U].paddedRect,X=K.x+1,J=K.y+1,oe=Q.data.width,le=Q.data.height;Jo.copy(Q.data,F,{x:0,y:0},{x:X,y:J},Q.data),Jo.copy(Q.data,F,{x:0,y:le-1},{x:X,y:J-1},{width:oe,height:1}),Jo.copy(Q.data,F,{x:0,y:0},{x:X,y:J+le},{width:oe,height:1}),Jo.copy(Q.data,F,{x:oe-1,y:0},{x:X-1,y:J},{width:1,height:le}),Jo.copy(Q.data,F,{x:0,y:0},{x:X+oe,y:J},{width:1,height:le})}this.image=F,this.iconPositions=A,this.patternPositions=p}addImages(t,s,A){for(const p in t){const v=t[p],_={x:0,y:0,w:v.data.width+2,h:v.data.height+2};A.push(_),s[p]=new Qr(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(t,s){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const A in t.updatedImages)this.patchUpdatedImage(this.iconPositions[A],t.getImage(A),s),this.patchUpdatedImage(this.patternPositions[A],t.getImage(A),s)}patchUpdatedImage(t,s,A){if(!t||!s||t.version===s.version)return;t.version=s.version;const[p,v]=t.tl;A.update(s.data,void 0,{x:p,y:v})}}var Gr;function Ps(l,t,s,A,p,v,_,B,F,U,Q,K,X,J,oe){const le=Fh.fromFeature(l,p);let he;K===m.aA.vertical&&le.verticalizePunctuation();let Be=le.determineLineBreaks(U,v,t,A,J);const{processBidirectionalText:tt,processStyledBidirectionalText:Se}=pi;if(tt&&le.sections.length===1){he=[],Be=Be.map((Mt=>le.toCodeUnitIndex(Mt)));const ht=tt(le.toString(),Be);for(const Mt of ht){const Xt=[...Mt].map((()=>0));he.push(new Fh(Mt,le.sections,Xt))}}else if(Se){he=[],Be=Be.map((Vt=>le.toCodeUnitIndex(Vt)));let ht=0;const Mt=[];for(const Vt of le.text)Mt.push(...Array(Vt.length).fill(le.sectionIndex[ht])),ht++;const Xt=Se(le.text,Mt,Be);for(const Vt of Xt){const ir=[];let _r="";for(const or of Vt[0])ir.push(Vt[1][_r.length]),_r+=or;he.push(new Fh(Vt[0],le.sections,ir))}}else he=(function(ht,Mt){const Xt=[];let Vt=0;for(const ir of Mt)Xt.push(ht.substring(Vt,ir)),Vt=ir;return Vt<ht.length()&&Xt.push(ht.substring(Vt,ht.length())),Xt})(le,Be);const ke=[],it={positionedLines:ke,text:le.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:K,iconsInText:!1,verticalizable:!1};return(function(ht,Mt,Xt,Vt,ir,_r,or,$t,Ot,Lr,Ir,kr){let Er=0,Jr=0,ri=0,Gn=0;const ps=$t==="right"?1:$t==="left"?0:.5,Ja=Hs/kr;let wo=0;for(const Bi of ir){Bi.trim();const js=Bi.getMaxScale(),io={positionedGlyphs:[],lineOffset:0};ht.positionedLines[wo]=io;const ts=io.positionedGlyphs;let wc=0;if(!Bi.length()){Jr+=_r,++wo;continue}const el=St(Vt,Bi,Ja);let xc=0;for(const ia of Bi.text){const Ls=Bi.getSection(xc),xo=ia.codePointAt(0),Vs=Br(Ot,Ir,xo),sa={glyph:xo,imageName:null,x:Er,y:Jr+-17,vertical:Vs,scale:1,fontStack:"",sectionIndex:Bi.getSectionIndex(xc),metrics:null,rect:null};let Th;if("fontStack"in Ls){if(Th=ln(Ls,xo,Vs,el,Mt,Xt),!Th)continue;sa.fontStack=Ls.fontStack}else{if(ht.iconsInText=!0,Ls.scale*=Ja,Th=_n(Ls,Vs,js,el,Vt),!Th)continue;wc=Math.max(wc,Th.imageOffset),sa.imageName=Ls.imageName}const{rect:wu,metrics:nm,baselineOffset:tf}=Th;sa.y+=tf,sa.scale=Ls.scale,sa.metrics=nm,sa.rect=wu,ts.push(sa),Vs?(ht.verticalizable=!0,Er+=("imageName"in Ls?nm.advance:Hs)*Ls.scale+Lr):Er+=nm.advance*Ls.scale+Lr,xc++}ts.length!==0&&(ri=Math.max(Er-Lr,ri),wn(ts,0,ts.length-1,ps)),Er=0,io.lineOffset=Math.max(wc,(js-1)*Hs);const YA=_r*js+wc;Jr+=YA,Gn=Math.max(YA,Gn),++wo}const{horizontalAlign:ms,verticalAlign:As}=Nt(or);(function(Bi,js,io,ts,wc,el,xc,YA,ia){const Ls=(js-io)*wc;let xo=0;xo=el!==xc?-YA*ts- -17:-ts*ia*xc+.5*xc;for(const Vs of Bi)for(const sa of Vs.positionedGlyphs)sa.x+=Ls,sa.y+=xo})(ht.positionedLines,ps,ms,As,ri,Gn,_r,Jr,ir.length),ht.top+=-As*Jr,ht.bottom=ht.top+Jr,ht.left+=-ms*ri,ht.right=ht.left+ri})(it,t,s,A,he,_,B,F,K,U,X,oe),!(function(ht){for(const Mt of ht)if(Mt.positionedGlyphs.length!==0)return!1;return!0})(ke)&&it}function Nt(l){let t=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:t,verticalAlign:s}}function St(l,t,s){const A=t.getMaxScale()*Hs,{maxImageWidth:p,maxImageHeight:v}=t.getMaxImageSize(l),_=Math.max(A,v*s);return{verticalLineContentWidth:Math.max(A,p*s),horizontalLineContentHeight:_}}function zt(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Br(l,t,s){return!(l===m.aA.horizontal||!t&&!Wt(s)||t&&(tr(s)||(A=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(A)))));var A}function ln(l,t,s,A,p,v){const _=v[l.fontStack],B=(function(U,Q,K,X){if(U&&U.rect)return U;const J=Q[K.fontStack],oe=J&&J[X];return oe?{rect:null,metrics:oe.metrics}:null})(_&&_[t],p,l,t);if(B===null)return null;let F;if(s)F=A.verticalLineContentWidth-l.scale*Hs;else{const U=zt(l.verticalAlign);F=(A.horizontalLineContentHeight-l.scale*Hs)*U}return{rect:B.rect,metrics:B.metrics,baselineOffset:F}}function _n(l,t,s,A,p){const v=p[l.imageName];if(!v)return null;const _=v.paddedRect,B=v.displaySize,F={width:B[0],height:B[1],left:1,top:-3,advance:t?B[1]:B[0]};let U;if(t)U=A.verticalLineContentWidth-B[1]*l.scale;else{const Q=zt(l.verticalAlign);U=(A.horizontalLineContentHeight-B[1]*l.scale)*Q}return{rect:_,metrics:F,baselineOffset:U,imageOffset:(t?B[0]:B[1])*l.scale-Hs*s}}function wn(l,t,s,A){if(A===0)return;const p=l[s],v=(l[s].x+p.metrics.advance*p.scale)*A;for(let _=t;_<=s;_++)l[_].x-=v}function Ln(l,t,s){const{horizontalAlign:A,verticalAlign:p}=Nt(s),v=t[0]-l.displaySize[0]*A,_=t[1]-l.displaySize[1]*p;return{image:l,top:_,bottom:_+l.displaySize[1],left:v,right:v+l.displaySize[0]}}function Po(l){var t,s;let A=l.left,p=l.top,v=l.right-A,_=l.bottom-p;const B=(t=l.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",F=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",U=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(F==="proportional"){if(B==="stretchOnly"&&v/_<U||B==="proportional"){const Q=Math.ceil(_*U);A*=Q/v,v=Q}}else if(B==="proportional"&&F==="stretchOnly"&&U!==0&&v/_>U){const Q=Math.ceil(v/U);p*=Q/_,_=Q}return{x1:A,y1:p,x2:A+v,y2:p+_}}function vi(l,t,s,A,p,v){const _=l.image;let B;if(_.content){const he=_.content,Be=_.pixelRatio||1;B=[he[0]/Be,he[1]/Be,_.displaySize[0]-he[2]/Be,_.displaySize[1]-he[3]/Be]}const F=t.left*v,U=t.right*v;let Q,K,X,J;s==="width"||s==="both"?(J=p[0]+F-A[3],K=p[0]+U+A[1]):(J=p[0]+(F+U-_.displaySize[0])/2,K=J+_.displaySize[0]);const oe=t.top*v,le=t.bottom*v;return s==="height"||s==="both"?(Q=p[1]+oe-A[0],X=p[1]+le+A[2]):(Q=p[1]+(oe+le-_.displaySize[1])/2,X=Q+_.displaySize[1]),{image:_,top:Q,right:K,bottom:X,left:J,collisionPadding:B}}We("ImagePosition",Qr),We("ImageAtlas",en),m.aA=void 0,(Gr=m.aA||(m.aA={}))[Gr.none=0]="none",Gr[Gr.horizontal=1]="horizontal",Gr[Gr.vertical=2]="vertical",Gr[Gr.horizontalOnly=3]="horizontalOnly";const Za=128,$u=32640;function Ax(l,t){const{expression:s}=t;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Mr(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:A,interpolationType:p}=s;let v=0;for(;v<A.length&&A[v]<=l;)v++;v=Math.max(0,v-1);let _=v;for(;_<A.length&&A[_]<l+1;)_++;_=Math.min(A.length-1,_);const B=A[v],F=A[_];return s.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:F,interpolationType:p}:{kind:"camera",minZoom:B,maxZoom:F,minSize:s.evaluate(new Mr(B)),maxSize:s.evaluate(new Mr(F)),interpolationType:p}}}function av(l,t,s){let A="never";const p=l.get(t);return p?A=p:l.get(s)&&(A="always"),A}const DI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bg(l,t,s,A,p,v,_,B,F,U,Q,K,X){const J=B?Math.min($u,Math.round(B[0])):0,oe=B?Math.min($u,Math.round(B[1])):0;l.emplaceBack(t,s,Math.round(32*A),Math.round(32*p),v,_,(J<<1)+(F?1:0),oe,16*U,16*Q,256*K,256*X)}function lv(l,t,s){l.emplaceBack(t.x,t.y,s),l.emplaceBack(t.x,t.y,s),l.emplaceBack(t.x,t.y,s),l.emplaceBack(t.x,t.y,s)}function RI(l){for(const t of l.sections)if(Fr(t.text))return!0;return!1}class cv{constructor(t){this.layoutVertexArray=new Xe,this.indexArray=new Dt,this.programConfigurations=t,this.segments=new nr,this.dynamicLayoutVertexArray=new At,this.opacityVertexArray=new ft,this.hasVisibleVertices=!1,this.placedSymbolArray=new d}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,s,A,p){this.isEmpty()||(A&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,iv.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Gp.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,DI,!0),this.opacityVertexBuffer.itemSize=1),(A||p)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}We("SymbolBuffers",cv);class Av{constructor(t,s,A){this.layoutVertexArray=new t,this.layoutAttributes=s,this.indexArray=new A,this.segments=new nr,this.collisionVertexArray=new wt}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,sv.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}We("CollisionBuffers",Av);class Id{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((_=>_.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ax(this.zoom,s["text-size"]),this.iconSizeData=Ax(this.zoom,s["icon-size"]);const A=this.layers[0].layout,p=A.get("symbol-sort-key"),v=A.get("symbol-z-order");this.canOverlap=av(A,"text-overlap","text-allow-overlap")!=="never"||av(A,"icon-overlap","icon-allow-overlap")!=="never"||A.get("text-ignore-placement")||A.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,A.get("symbol-placement")==="point"&&(this.writingModes=A.get("text-writing-mode").map((_=>m.aA[_]))),this.stateDependentLayerIds=this.layers.filter((_=>_.isStateDependent())).map((_=>_.id)),this.sourceID=t.sourceID}createArrays(){this.text=new cv(new cs(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new cv(new cs(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new S,this.lineVertexArray=new M,this.symbolInstances=new b,this.textAnchorOffsets=new j}calculateGlyphDependencies(t,s,A,p,v){for(const _ of t)if(s[_.codePointAt(0)]=!0,(A||p)&&v){const B=Zh[_];B&&(s[B.codePointAt(0)]=!0)}}populate(t,s,A){const p=this.layers[0],v=p.layout,_=v.get("text-font"),B=v.get("text-field"),F=v.get("icon-image"),U=(B.value.kind!=="constant"||B.value.value instanceof vs&&!B.value.value.isEmpty()||B.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),Q=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,K=v.get("symbol-sort-key");if(this.features=[],!U&&!Q)return;const X=s.iconDependencies,J=s.glyphDependencies,oe=s.availableImages,le=new Mr(this.zoom);for(const{feature:he,id:Be,index:tt,sourceLayerIndex:Se}of t){const ke=p._featureFilter.needGeometry,it=qA(he,ke);if(!p._featureFilter.filter(le,it,A))continue;let ht,Mt;if(ke||(it.geometry=KA(he)),U){const Vt=p.getValueAndResolveTokens("text-field",it,A,oe),ir=vs.factory(Vt),_r=this.hasRTLText=this.hasRTLText||RI(ir);(!_r||pi.getRTLTextPluginStatus()==="unavailable"||_r&&pi.isParsed())&&(ht=Cd(ir,p,it))}if(Q){const Vt=p.getValueAndResolveTokens("icon-image",it,A,oe);Mt=Vt instanceof uo?Vt:uo.fromString(Vt)}if(!ht&&!Mt)continue;const Xt=this.sortFeaturesByKey?K.evaluate(it,{},A):void 0;if(this.features.push({id:Be,text:ht,icon:Mt,index:tt,sourceLayerIndex:Se,geometry:it.geometry,properties:he.properties,type:wh.types[he.type],sortKey:Xt}),Mt&&(X[Mt.name]=!0),ht){const Vt=_.evaluate(it,{},A).join(","),ir=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.aA.vertical)>=0;for(const _r of ht.sections)if(_r.image)X[_r.image.name]=!0;else{const or=er(ht.toString()),$t=_r.fontStack||Vt,Ot=J[$t]=J[$t]||{};this.calculateGlyphDependencies(_r.text,Ot,ir,this.allowVerticalPlacement,or)}}}v.get("symbol-placement")==="line"&&(this.features=(function(he){const Be={},tt={},Se=[];let ke=0;function it(Vt){Se.push(he[Vt]),ke++}function ht(Vt,ir,_r){const or=tt[Vt];return delete tt[Vt],tt[ir]=or,Se[or].geometry[0].pop(),Se[or].geometry[0]=Se[or].geometry[0].concat(_r[0]),or}function Mt(Vt,ir,_r){const or=Be[ir];return delete Be[ir],Be[Vt]=or,Se[or].geometry[0].shift(),Se[or].geometry[0]=_r[0].concat(Se[or].geometry[0]),or}function Xt(Vt,ir,_r){const or=_r?ir[0][ir[0].length-1]:ir[0][0];return`${Vt}:${or.x}:${or.y}`}for(let Vt=0;Vt<he.length;Vt++){const ir=he[Vt],_r=ir.geometry,or=ir.text?ir.text.toString():null;if(!or){it(Vt);continue}const $t=Xt(or,_r),Ot=Xt(or,_r,!0);if($t in tt&&Ot in Be&&tt[$t]!==Be[Ot]){const Lr=Mt($t,Ot,_r),Ir=ht($t,Ot,Se[Lr].geometry);delete Be[$t],delete tt[Ot],tt[Xt(or,Se[Ir].geometry,!0)]=Ir,Se[Lr].geometry=null}else $t in tt?ht($t,Ot,_r):Ot in Be?Mt($t,Ot,_r):(it(Vt),Be[$t]=ke-1,tt[Ot]=ke-1)}return Se.filter((Vt=>Vt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((he,Be)=>he.sortKey-Be.sortKey))}update(t,s,A){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,s,this.layers,{imagePositions:A}),this.icon.programConfigurations.updatePaintArrays(t,s,this.layers,{imagePositions:A}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,s){const A=this.lineVertexArray.length;if(t.segment!==void 0){let p=t.dist(s[t.segment+1]),v=t.dist(s[t.segment]);const _={};for(let B=t.segment+1;B<s.length;B++)_[B]={x:s[B].x,y:s[B].y,tileUnitDistanceFromAnchor:p},B<s.length-1&&(p+=s[B+1].dist(s[B]));for(let B=t.segment||0;B>=0;B--)_[B]={x:s[B].x,y:s[B].y,tileUnitDistanceFromAnchor:v},B>0&&(v+=s[B-1].dist(s[B]));for(let B=0;B<s.length;B++){const F=_[B];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:A,lineLength:this.lineVertexArray.length-A}}addSymbols(t,s,A,p,v,_,B,F,U,Q,K,X){const J=t.indexArray,oe=t.layoutVertexArray,le=t.segments.prepareSegment(4*s.length,oe,J,this.canOverlap?_.sortKey:void 0),he=this.glyphOffsetArray.length,Be=le.vertexLength,tt=this.allowVerticalPlacement&&B===m.aA.vertical?Math.PI/2:0,Se=_.text&&_.text.sections;for(let ke=0;ke<s.length;ke++){const{tl:it,tr:ht,bl:Mt,br:Xt,tex:Vt,pixelOffsetTL:ir,pixelOffsetBR:_r,minFontScaleX:or,minFontScaleY:$t,glyphOffset:Ot,isSDF:Lr,sectionIndex:Ir}=s[ke],kr=le.vertexLength,Er=Ot[1];bg(oe,F.x,F.y,it.x,Er+it.y,Vt.x,Vt.y,A,Lr,ir.x,ir.y,or,$t),bg(oe,F.x,F.y,ht.x,Er+ht.y,Vt.x+Vt.w,Vt.y,A,Lr,_r.x,ir.y,or,$t),bg(oe,F.x,F.y,Mt.x,Er+Mt.y,Vt.x,Vt.y+Vt.h,A,Lr,ir.x,_r.y,or,$t),bg(oe,F.x,F.y,Xt.x,Er+Xt.y,Vt.x+Vt.w,Vt.y+Vt.h,A,Lr,_r.x,_r.y,or,$t),lv(t.dynamicLayoutVertexArray,F,tt),J.emplaceBack(kr,kr+2,kr+1),J.emplaceBack(kr+1,kr+2,kr+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ot[0]),ke!==s.length-1&&Ir===s[ke+1].sectionIndex||t.programConfigurations.populatePaintArrays(oe.length,_,_.index,{imagePositions:{},canonical:X,formattedSection:Se&&Se[Ir]})}t.placedSymbolArray.emplaceBack(F.x,F.y,he,this.glyphOffsetArray.length-he,Be,U,Q,F.segment,A?A[0]:0,A?A[1]:0,p[0],p[1],B,0,!1,0,K)}_addCollisionDebugVertex(t,s,A,p,v,_){return s.emplaceBack(0,0),t.emplaceBack(A.x,A.y,p,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(t,s,A,p,v,_,B){const F=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),U=F.vertexLength,Q=v.layoutVertexArray,K=v.collisionVertexArray,X=B.anchorX,J=B.anchorY;this._addCollisionDebugVertex(Q,K,_,X,J,new w(t,s)),this._addCollisionDebugVertex(Q,K,_,X,J,new w(A,s)),this._addCollisionDebugVertex(Q,K,_,X,J,new w(A,p)),this._addCollisionDebugVertex(Q,K,_,X,J,new w(t,p)),F.vertexLength+=4;const oe=v.indexArray;oe.emplaceBack(U,U+1),oe.emplaceBack(U+1,U+2),oe.emplaceBack(U+2,U+3),oe.emplaceBack(U+3,U),F.primitiveLength+=4}addDebugCollisionBoxes(t,s,A,p){for(let v=t;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,A)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Av(nt,Kp.members,Lt),this.iconCollisionBox=new Av(nt,Kp.members,Lt);for(let t=0;t<this.symbolInstances.length;t++){const s=this.symbolInstances.get(t);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(t,s,A,p,v,_,B,F,U){const Q={};for(let K=s;K<A;K++){const X=t.get(K);Q.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.textFeatureIndex=X.featureIndex;break}for(let K=p;K<v;K++){const X=t.get(K);Q.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.verticalTextFeatureIndex=X.featureIndex;break}for(let K=_;K<B;K++){const X=t.get(K);Q.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.iconFeatureIndex=X.featureIndex;break}for(let K=F;K<U;K++){const X=t.get(K);Q.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.verticalIconFeatureIndex=X.featureIndex;break}return Q}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const A=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,A.textBoxStartIndex,A.textBoxEndIndex,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A.iconBoxStartIndex,A.iconBoxEndIndex,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,s){const A=t.placedSymbolArray.get(s),p=A.vertexStartIndex+4*A.numGlyphs;for(let v=A.vertexStartIndex;v<p;v+=4)t.indexArray.emplaceBack(v,v+2,v+1),t.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(t),A=Math.cos(t),p=[],v=[],_=[];for(let B=0;B<this.symbolInstances.length;++B){_.push(B);const F=this.symbolInstances.get(B);p.push(0|Math.round(s*F.anchorX+A*F.anchorY)),v.push(F.featureIndex)}return _.sort(((B,F)=>p[B]-p[F]||v[F]-v[B])),_}addToSortKeyRanges(t,s){const A=this.sortKeyRanges[this.sortKeyRanges.length-1];A&&A.sortKey===s?A.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const A=this.symbolInstances.get(s);this.featureSortOrder.push(A.featureIndex),[A.rightJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.leftJustifiedTextSymbolIndex].forEach(((p,v,_)=>{p>=0&&_.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)})),A.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,A.verticalPlacedTextSymbolIndex),A.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,A.placedIconSymbolIndex),A.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,A.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ux,hx;We("SymbolBucket",Id,{omit:["layers","collisionBoxArray","features","compareText"]}),Id.MAX_GLYPHS=65535,Id.addDynamicAttributes=lv;var uv={get paint(){return hx=hx||new ci({"icon-opacity":new xr(mt.paint_symbol["icon-opacity"]),"icon-color":new xr(mt.paint_symbol["icon-color"]),"icon-halo-color":new xr(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new xr(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xr(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new gr(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new gr(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new xr(mt.paint_symbol["text-opacity"]),"text-color":new xr(mt.paint_symbol["text-color"],{runtimeType:Ri,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new xr(mt.paint_symbol["text-halo-color"]),"text-halo-width":new xr(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new xr(mt.paint_symbol["text-halo-blur"]),"text-translate":new gr(mt.paint_symbol["text-translate"]),"text-translate-anchor":new gr(mt.paint_symbol["text-translate-anchor"])})},get layout(){return ux=ux||new ci({"symbol-placement":new gr(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new gr(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gr(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xr(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gr(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gr(mt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gr(mt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gr(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new gr(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gr(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new xr(mt.layout_symbol["icon-size"]),"icon-text-fit":new gr(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gr(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new xr(mt.layout_symbol["icon-image"]),"icon-rotate":new xr(mt.layout_symbol["icon-rotate"]),"icon-padding":new xr(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new gr(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new xr(mt.layout_symbol["icon-offset"]),"icon-anchor":new xr(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gr(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gr(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gr(mt.layout_symbol["text-rotation-alignment"]),"text-field":new xr(mt.layout_symbol["text-field"]),"text-font":new xr(mt.layout_symbol["text-font"]),"text-size":new xr(mt.layout_symbol["text-size"]),"text-max-width":new xr(mt.layout_symbol["text-max-width"]),"text-line-height":new gr(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new xr(mt.layout_symbol["text-letter-spacing"]),"text-justify":new xr(mt.layout_symbol["text-justify"]),"text-radial-offset":new xr(mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gr(mt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xr(mt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xr(mt.layout_symbol["text-anchor"]),"text-max-angle":new gr(mt.layout_symbol["text-max-angle"]),"text-writing-mode":new gr(mt.layout_symbol["text-writing-mode"]),"text-rotate":new xr(mt.layout_symbol["text-rotate"]),"text-padding":new gr(mt.layout_symbol["text-padding"]),"text-keep-upright":new gr(mt.layout_symbol["text-keep-upright"]),"text-transform":new xr(mt.layout_symbol["text-transform"]),"text-offset":new xr(mt.layout_symbol["text-offset"]),"text-allow-overlap":new gr(mt.layout_symbol["text-allow-overlap"]),"text-overlap":new gr(mt.layout_symbol["text-overlap"]),"text-ignore-placement":new gr(mt.layout_symbol["text-ignore-placement"]),"text-optional":new gr(mt.layout_symbol["text-optional"])})}};class fx{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ns,this.defaultValue=t}evaluate(t){if(t.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(t.formattedSection))return s.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}We("FormatSectionOverride",fx,{omit:["defaultValue"]});class Bg extends Rn{constructor(t,s){super(t,uv,s)}recalculate(t,s){if(super.recalculate(t,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const A=this.layout.get("text-writing-mode");if(A){const p=[];for(const v of A)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,s,A,p){const v=this.layout.get(t).evaluate(s,{},A,p),_=this._unevaluatedLayout._values[t];return _.isDataDriven()||Ql(_.value)||!v?v:(function(B,F){return F.replace(/{([^{}]+)}/g,((U,Q)=>B&&Q in B?String(B[Q]):""))})(s.properties,v)}createBucket(t){return new Id(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of uv.paint.overridableProperties){if(!Bg.hasPaintOverride(this.layout,t))continue;const s=this.paint.get(t),A=new fx(s),p=new uc(A,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Oc("source",p):new NA("composite",p,s.value.zoomStops),this.paint._values[t]=new Fn(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(t,s,A){return!(!this.layout||s.isDataDriven()||A.isDataDriven())&&Bg.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,s){const A=t.get("text-field"),p=uv.paint.properties[s];let v=!1;const _=B=>{for(const F of B)if(p.overrides&&p.overrides.hasOverride(F))return void(v=!0)};if(A.value.kind==="constant"&&A.value.value instanceof vs)_(A.value.value.sections);else if(A.value.kind==="source"||A.value.kind==="composite"){const B=U=>{v||(U instanceof Zi&&ti(U.value)===al?_(U.value.sections):U instanceof pa?_(U.sections):U.eachChild(B))},F=A.value;F._styleExpression&&B(F._styleExpression.expression)}return v}}let dx;var NI={get paint(){return dx=dx||new ci({"background-color":new gr(mt.paint_background["background-color"]),"background-pattern":new Vi(mt.paint_background["background-pattern"]),"background-opacity":new gr(mt.paint_background["background-opacity"])})}};class QI extends Rn{constructor(t,s){super(t,NI,s)}}class OI extends Rn{constructor(t,s){super(t,{},s),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class zI{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const HI={once:!0},hv=63710088e-1;class Yh{constructor(t,s){if(isNaN(t)||isNaN(s))throw new Error(`Invalid LngLat object: (${t}, ${s})`);if(this.lng=+t,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Yh(et(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const s=Math.PI/180,A=this.lat*s,p=t.lat*s,v=Math.sin(A)*Math.sin(p)+Math.cos(A)*Math.cos(p)*Math.cos((t.lng-this.lng)*s);return hv*Math.acos(Math.min(v,1))}static convert(t){if(t instanceof Yh)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Yh(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Yh(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const px=2*Math.PI*hv;function mx(l){return px*Math.cos(l*Math.PI/180)}function gx(l){return(180+l)/360}function yx(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function vx(l,t){return l/mx(t)}function _x(l){return 360*l-180}function Cg(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function wx(l,t){return l*mx(Cg(t))}class Zp{constructor(t,s,A=0){this.x=+t,this.y=+s,this.z=+A}static fromLngLat(t,s=0){const A=Yh.convert(t);return new Zp(gx(A.lng),yx(A.lat),vx(s,A.lat))}toLngLat(){return new Yh(_x(this.x),Cg(this.y))}toAltitude(){return wx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/px*(t=Cg(this.y),1/Math.cos(t*Math.PI/180));var t}}function xx(l,t,s){var A=2*Math.PI*6378137/256/Math.pow(2,s);return[l*A-2*Math.PI*6378137/2,t*A-2*Math.PI*6378137/2]}class fv{constructor(t,s,A){if(!(function(p,v,_){return!(p<0||p>25||_<0||_>=Math.pow(2,p)||v<0||v>=Math.pow(2,p))})(t,s,A))throw new Error(`x=${s}, y=${A}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=s,this.y=A,this.key=Td(0,t,t,s,A)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,s,A){const p=(function(_,B,F){var U=xx(256*_,256*(B=Math.pow(2,F)-B-1),F),Q=xx(256*(_+1),256*(B+1),F);return U[0]+","+U[1]+","+Q[0]+","+Q[1]})(this.x,this.y,this.z),v=(function(_,B,F){let U,Q="";for(let K=_;K>0;K--)U=1<<K-1,Q+=(B&U?1:0)+(F&U?2:0);return Q})(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(A==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,v).replace(/{bbox-epsg-3857}/g,p)}isChildOf(t){const s=this.z-t.z;return s>0&&t.x===this.x>>s&&t.y===this.y>>s}getTilePoint(t){const s=Math.pow(2,this.z);return new w((t.x*s-this.x)*Te,(t.y*s-this.y)*Te)}toString(){return`${this.z}/${this.x}/${this.y}`}}class bx{constructor(t,s){this.wrap=t,this.canonical=s,this.key=Td(t,s.z,s.z,s.x,s.y)}}class _A{constructor(t,s,A,p,v){if(this.terrainRttPosMatrix32f=null,t<A)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${A}`);this.overscaledZ=t,this.wrap=s,this.canonical=new fv(A,+p,+v),this.key=Td(s,t,A,p,v)}clone(){return new _A(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?new _A(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _A(t,this.wrap,t,this.canonical.x>>s,this.canonical.y>>s)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(t,s){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-t;return t>this.canonical.z?Td(this.wrap*+s,t,this.canonical.z,this.canonical.x,this.canonical.y):Td(this.wrap*+s,t,t,this.canonical.x>>A,this.canonical.y>>A)}isChildOf(t){if(t.wrap!==this.wrap||this.overscaledZ-t.overscaledZ<=0)return!1;if(t.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-t.canonical.z;return!(s<0)&&t.canonical.x===this.canonical.x>>s&&t.canonical.y===this.canonical.y>>s}children(t){if(this.overscaledZ>=t)return[new _A(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,A=2*this.canonical.x,p=2*this.canonical.y;return[new _A(s,this.wrap,s,A,p),new _A(s,this.wrap,s,A+1,p),new _A(s,this.wrap,s,A,p+1),new _A(s,this.wrap,s,A+1,p+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new _A(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new _A(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new bx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Zp(t.x-this.wrap,t.y))}}function Td(l,t,s,A,p){(l*=2)<0&&(l=-1*l-1);const v=1<<s;return(v*v*l+v*p+A).toString(36)+s.toString(36)+t.toString(36)}function Xp(l,t){return t?l.properties[t]:l.id}function jI(l,t){const s={id:l.id};if(t.removeAllProperties&&(delete l.removeProperties,delete l.addOrUpdateProperties,delete t.removeProperties),t.removeProperties)for(const A of t.removeProperties){const p=l.addOrUpdateProperties.findIndex((v=>v.key===A));p>-1&&l.addOrUpdateProperties.splice(p,1)}return(l.removeAllProperties||t.removeAllProperties)&&(s.removeAllProperties=!0),(l.removeProperties||t.removeProperties)&&(s.removeProperties=[...l.removeProperties||[],...t.removeProperties||[]]),(l.addOrUpdateProperties||t.addOrUpdateProperties)&&(s.addOrUpdateProperties=[...l.addOrUpdateProperties||[],...t.addOrUpdateProperties||[]]),(l.newGeometry||t.newGeometry)&&(s.newGeometry=t.newGeometry||l.newGeometry),s}function Bx(l){var t,s;if(!l)return{};const A={};return A.removeAll=l.removeAll,A.remove=new Set(l.remove||[]),A.add=new Map((t=l.add)===null||t===void 0?void 0:t.map((p=>[p.id,p]))),A.update=new Map((s=l.update)===null||s===void 0?void 0:s.map((p=>[p.id,p]))),A}We("CanonicalTileID",fv),We("OverscaledTileID",_A,{omit:["terrainRttPosMatrix32f"]});class Cx{constructor(t){this._stringToNumber={},this._numberToString=[];for(let s=0;s<t.length;s++){const A=t[s];this._stringToNumber[A]=s,this._numberToString[s]=A}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Ex{constructor(t,s,A,p,v){this.type="Feature",this._vectorTileFeature=t,this._x=A,this._y=p,this._z=s,this.properties=t.properties,this.id=v}projectPoint(t,s,A,p){return[360*(t.x+s)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(t.y+A)/p)*Math.PI))-90]}projectLine(t,s,A,p){return t.map((v=>this.projectPoint(v,s,A,p)))}get geometry(){if(this._geometry)return this._geometry;const t=this._vectorTileFeature,s=t.extent*Math.pow(2,this._z),A=t.extent*this._x,p=t.extent*this._y,v=t.loadGeometry();switch(t.type){case 1:{const _=[];for(const F of v)_.push(F[0]);const B=this.projectLine(_,A,p,s);this._geometry=_.length===1?{type:"Point",coordinates:B[0]}:{type:"MultiPoint",coordinates:B};break}case 2:{const _=v.map((B=>this.projectLine(B,A,p,s)));this._geometry=_.length===1?{type:"LineString",coordinates:_[0]}:{type:"MultiLineString",coordinates:_};break}case 3:{const _=_d(v),B=[];for(const F of _)B.push(F.map((U=>this.projectLine(U,A,p,s))));this._geometry=B.length===1?{type:"Polygon",coordinates:B[0]}:{type:"MultiPolygon",coordinates:B};break}default:throw new Error(`unknown feature type: ${t.type}`)}return this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&s!=="_x"&&s!=="_y"&&s!=="_z"&&(t[s]=this[s]);return t}}class Pd{_name;dataBuffer;nullabilityBuffer;_size;constructor(t,s,A){this._name=t,this.dataBuffer=s,typeof A=="number"?this._size=A:(this.nullabilityBuffer=A,this._size=A.size())}getValue(t){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(t)?null:this.getValueFromBuffer(t)}has(t){return this.nullabilityBuffer&&this.nullabilityBuffer.get(t)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Eg extends Pd{}class dv extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class pv extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Sx extends Pd{delta;constructor(t,s,A,p){super(t,s,p),this.delta=A}}class mv extends Sx{constructor(t,s,A,p){super(t,Int32Array.of(s),A,p)}getValueFromBuffer(t){return this.dataBuffer[0]+t*this.delta}}class gv extends Pd{constructor(t,s,A){super(t,Int32Array.of(s),A)}getValueFromBuffer(t){return this.dataBuffer[0]}}class VI{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(t,s,A,p,v=4096){this._name=t,this._geometryVector=s,this._idVector=A,this._propertyVectors=p,this._extent=v}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(t){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((s=>[s.name,s])))),this.propertyVectorsMap.get(t)}*[Symbol.iterator](){const t=this.geometryVector[Symbol.iterator]();let s=0;for(;s<this.numFeatures;){let A;this.idVector&&(A=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(s)):this.idVector.getValue(s));const p=t?.next().value,v={};for(const _ of this.propertyVectors){if(!_)continue;const B=_.name,F=_.getValue(s);F!==null&&(v[B]=F)}s++,yield{id:A,geometry:p,properties:v}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const t=[],s=this.geometryVector.getGeometries();for(let A=0;A<this.numFeatures;A++){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(A)):this.idVector.getValue(A));const v={coordinates:s[A],type:this.geometryVector.geometryType(A)},_={};for(const B of this.propertyVectors){if(!B)continue;const F=B.name,U=B.getValue(A);U!==null&&(_[F]=U)}t.push({id:p,geometry:v,properties:_})}return t}containsMaxSaveIntegerValues(t){return t instanceof dv||t instanceof gv&&t instanceof mv||t instanceof pv}}class GI{value;constructor(t){this.value=t}get(){return this.value}set(t){this.value=t}increment(){return this.value++}add(t){this.value+=t}}var qn,Ih,Xa,vu,jf,Xc,ra,na,Fx,wA;function xa(l,t,s){const A=new Int32Array(s);let p=0,v=t.get();for(let _=0;_<A.length;_++){let B=l[v++],F=127&B;B<128||(B=l[v++],F|=(127&B)<<7,B<128||(B=l[v++],F|=(127&B)<<14,B<128||(B=l[v++],F|=(127&B)<<21,B<128||(B=l[v++],F|=(15&B)<<28)))),A[p++]=F}return t.set(v),A}function Sg(l,t,s){const A=new BigInt64Array(s);for(let p=0;p<A.length;p++)A[p]=qI(l,t);return A}function KI(l,t){let s,A;return A=l[t.get()],t.increment(),s=127&A,A<128?s:(A=l[t.get()],t.increment(),s|=(127&A)<<7,A<128?s:(A=l[t.get()],t.increment(),s|=(127&A)<<14,A<128?s:(A=l[t.get()],t.increment(),s|=(127&A)<<21,A<128?s:(A=l[t.get()],s|=(15&A)<<28,(function(p,v,_){let B,F;if(F=v[_.get()],_.increment(),B=(112&F)>>4,F<128||(F=v[_.get()],_.increment(),B|=(127&F)<<3,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<10,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<17,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<24,F<128)||(F=v[_.get()],_.increment(),B|=(1&F)<<31,F<128))return 4294967296*B+(p>>>0);throw new Error("Expected varint not more than 10 bytes")})(s,l,t)))))}function Ix(l,t,s,A){throw new Error("FastPFor is not implemented yet.")}function Vf(l){return l>>>1^-(1&l)}function Ld(l){return l>>1n^-(1n&l)}function qI(l,t){let s=0n,A=0,p=t.get();for(;p<l.length;){const v=l[p++];if(s|=BigInt(127&v)<<BigInt(A),!(128&v))break;if(A+=7,A>=64)throw new Error("Varint too long")}return t.set(p),s}function Tx(l,t,s){const A=new Int32Array(s);let p=0;for(let v=0;v<t;v++){const _=l[v];A.fill(l[v+t],p,p+_),p+=_}return A}function Px(l,t,s){const A=new BigInt64Array(s);let p=0;for(let v=0;v<t;v++){const _=Number(l[v]);A.fill(l[v+t],p,p+_),p+=_}return A}function Lx(l,t,s){const A=new Float64Array(s);let p=0;for(let v=0;v<t;v++){const _=l[v];A.fill(l[v+t],p,p+_),p+=_}return A}function yv(l){const t=l.length/4*4;let s=1;if(t>=4)for(let A=l[0];s<t-4;s+=4)A=l[s]+=A,A=l[s+1]+=A,A=l[s+2]+=A,A=l[s+3]+=A;for(;s!=l.length;)l[s]+=l[s-1],++s}function Mx(l){l[0]=l[0]>>>1^-(1&l[0]),l[1]=l[1]>>>1^-(1&l[1]);const t=l.length/4*4;let s=2;if(t>=4)for(;s<t-4;s+=4){const A=l[s],p=l[s+1],v=l[s+2],_=l[s+3];l[s]=(A>>>1^-(1&A))+l[s-2],l[s+1]=(p>>>1^-(1&p))+l[s-1],l[s+2]=(v>>>1^-(1&v))+l[s],l[s+3]=(_>>>1^-(1&_))+l[s+1]}for(;s!=l.length;s+=2)l[s]=(l[s]>>>1^-(1&l[s]))+l[s-2],l[s+1]=(l[s+1]>>>1^-(1&l[s+1]))+l[s-1]}(function(l){l.NONE="NONE",l.DELTA="DELTA",l.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",l.RLE="RLE",l.MORTON="MORTON",l.PDE="PDE"})(qn||(qn={})),(function(l){l.NONE="NONE",l.FAST_PFOR="FAST_PFOR",l.VARINT="VARINT",l.ALP="ALP"})(Ih||(Ih={})),(function(l){l.PRESENT="PRESENT",l.DATA="DATA",l.OFFSET="OFFSET",l.LENGTH="LENGTH"})(Xa||(Xa={}));class vv{_dictionaryType;_offsetType;_lengthType;constructor(t,s,A){this._dictionaryType=t,this._offsetType=s,this._lengthType=A}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Kl(l,t){const s=(function(A,p){const v=A[p.get()],_=Object.values(Xa)[v>>4];let B=null;switch(_){case Xa.DATA:B=new vv(Object.values(vu)[15&v]);break;case Xa.OFFSET:B=new vv(null,Object.values(jf)[15&v]);break;case Xa.LENGTH:B=new vv(null,null,Object.values(Xc)[15&v])}p.increment();const F=A[p.get()],U=Object.values(qn)[F>>5],Q=Object.values(qn)[F>>2&7],K=Object.values(Ih)[3&F];p.increment();const X=xa(A,p,2),J=X[0];return{physicalStreamType:_,logicalStreamType:B,logicalLevelTechnique1:U,logicalLevelTechnique2:Q,physicalLevelTechnique:K,numValues:J,byteLength:X[1],decompressedCount:J}})(l,t);return s.logicalLevelTechnique1===qn.MORTON?(function(A,p,v){const _=xa(p,v,2);return{physicalStreamType:A.physicalStreamType,logicalStreamType:A.logicalStreamType,logicalLevelTechnique1:A.logicalLevelTechnique1,logicalLevelTechnique2:A.logicalLevelTechnique2,physicalLevelTechnique:A.physicalLevelTechnique,numValues:A.numValues,byteLength:A.byteLength,decompressedCount:A.decompressedCount,numBits:_[0],coordinateShift:_[1]}})(s,l,t):qn.RLE!==s.logicalLevelTechnique1&&qn.RLE!==s.logicalLevelTechnique2||Ih.NONE===s.physicalLevelTechnique?s:(function(A,p,v){const _=xa(p,v,2);return{physicalStreamType:A.physicalStreamType,logicalStreamType:A.logicalStreamType,logicalLevelTechnique1:A.logicalLevelTechnique1,logicalLevelTechnique2:A.logicalLevelTechnique2,physicalLevelTechnique:A.physicalLevelTechnique,numValues:A.numValues,byteLength:A.byteLength,decompressedCount:_[1],runs:_[0],numRleValues:_[1]}})(s,l,t)}(function(l){l.NONE="NONE",l.SINGLE="SINGLE",l.SHARED="SHARED",l.VERTEX="VERTEX",l.MORTON="MORTON",l.FSST="FSST"})(vu||(vu={})),(function(l){l.VERTEX="VERTEX",l.INDEX="INDEX",l.STRING="STRING",l.KEY="KEY"})(jf||(jf={})),(function(l){l.VAR_BINARY="VAR_BINARY",l.GEOMETRIES="GEOMETRIES",l.PARTS="PARTS",l.RINGS="RINGS",l.TRIANGLES="TRIANGLES",l.SYMBOL="SYMBOL",l.DICTIONARY="DICTIONARY"})(Xc||(Xc={})),(function(l){l[l.FLAT=0]="FLAT",l[l.CONST=1]="CONST",l[l.SEQUENCE=2]="SEQUENCE",l[l.DICTIONARY=3]="DICTIONARY",l[l.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(ra||(ra={}));class _u{values;_size;constructor(t,s){this.values=t,this._size=s}get(t){const s=Math.floor(t/8);return(this.values[s]>>t%8&1)==1}set(t,s){const A=Math.floor(t/8);this.values[A]=this.values[A]|(s?1:0)<<t%8}getInt(t){const s=Math.floor(t/8);return this.values[s]>>t%8&1}size(){return this._size}getBuffer(){return this.values}}function ql(l,t,s,A,p){return(function(v,_,B){switch(_.logicalLevelTechnique1){case qn.DELTA:return _.logicalLevelTechnique2===qn.RLE?(function(F,U,Q){const K=new Int32Array(Q);let X=0,J=0;for(let oe=0;oe<U;oe++){const le=F[oe],he=Vf(F[oe+U]);for(let Be=0;Be<le;Be++)J+=he,K[X++]=J}return K})(v,_.runs,_.numRleValues):((function(F){F[0]=F[0]>>>1^-(1&F[0]);const U=F.length/4*4;let Q=1;if(U>=4)for(;Q<U-4;Q+=4){const K=F[Q],X=F[Q+1],J=F[Q+2],oe=F[Q+3];F[Q]=(K>>>1^-(1&K))+F[Q-1],F[Q+1]=(X>>>1^-(1&X))+F[Q],F[Q+2]=(J>>>1^-(1&J))+F[Q+1],F[Q+3]=(oe>>>1^-(1&oe))+F[Q+2]}for(;Q!=F.length;++Q)F[Q]=(F[Q]>>>1^-(1&F[Q]))+F[Q-1]})(v),v);case qn.RLE:return(function(F,U,Q){return Q?(function(K,X,J){const oe=new Int32Array(J);let le=0;for(let he=0;he<X;he++){const Be=K[he];let tt=K[he+X];tt=tt>>>1^-(1&tt),oe.fill(tt,le,le+Be),le+=Be}return oe})(F,U.runs,U.numRleValues):Tx(F,U.runs,U.numRleValues)})(v,_,B);case qn.MORTON:return yv(v),v;case qn.COMPONENTWISE_DELTA:return Mx(v),v;case qn.NONE:return B&&(function(F){for(let U=0;U<F.length;U++){const Q=F[U];F[U]=Q>>>1^-(1&Q)}})(v),v;default:throw new Error(`The specified Logical level technique is not supported: ${_.logicalLevelTechnique1}`)}})(Fg(l,t,s),s,A)}function Jh(l,t,s){return(function(A,p){if(p.logicalLevelTechnique1===qn.DELTA&&p.logicalLevelTechnique2===qn.NONE)return(function(_){const B=new Int32Array(_.length+1);B[0]=0,B[1]=Vf(_[0]);let F=B[1],U=2;for(;U!=B.length;++U){const Q=_[U-1];F+=Q>>>1^-(1&Q),B[U]=B[U-1]+F}return B})(A);if(p.logicalLevelTechnique1===qn.RLE&&p.logicalLevelTechnique2===qn.NONE)return(function(_,B,F){const U=new Int32Array(F+1);U[0]=0;let Q=1,K=U[0];for(let X=0;X<B;X++){const J=_[X],oe=_[X+B];for(let le=Q;le<Q+J;le++)U[le]=oe+K,K=U[le];Q+=J}return U})(A,p.runs,p.numRleValues);if(p.logicalLevelTechnique1===qn.NONE&&p.logicalLevelTechnique2===qn.NONE){(function(_){let B=0;for(let F=0;F<_.length;F++)_[F]+=B,B=_[F]})(A);const v=new Int32Array(p.numValues+1);return v[0]=0,v.set(A,1),v}if(p.logicalLevelTechnique1===qn.DELTA&&p.logicalLevelTechnique2===qn.RLE){const v=(function(_,B,F){const U=new Int32Array(F+1);U[0]=0;let Q=1,K=U[0];for(let X=0;X<B;X++){const J=_[X];let oe=_[X+B];oe=oe>>>1^-(1&oe);for(let le=Q;le<Q+J;le++)U[le]=oe+K,K=U[le];Q+=J}return U})(A,p.runs,p.numRleValues);return yv(v),v}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Fg(l,t,s),s)}function Fg(l,t,s){const A=s.physicalLevelTechnique;if(A===Ih.FAST_PFOR)return Ix();if(A===Ih.VARINT)return xa(l,t,s.numValues);if(A===Ih.NONE){const p=t.get();t.add(s.byteLength);const v=l.subarray(p,t.get());return new Int32Array(v)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function _v(l,t,s,A){const p=Fg(l,t,s);if(p.length===1){const v=p[0];return A?Vf(v):v}return A?(function(v){return Vf(v[1])})(p):(function(v){return v[1]})(p)}function kx(l,t,s){return(function(A){if(A.length==2){const p=Vf(A[1]);return[p,p]}return[Vf(A[2]),Vf(A[3])]})(Fg(l,t,s))}function Ux(l,t,s){return(function(A){if(A.length==2){const p=Ld(A[1]);return[p,p]}return[Ld(A[2]),Ld(A[3])]})(Sg(l,t,s.numValues))}function Dx(l,t,s,A){return(function(p,v,_){switch(v.logicalLevelTechnique1){case qn.DELTA:return v.logicalLevelTechnique2===qn.RLE?(function(B,F,U){const Q=new BigInt64Array(U);let K=0,X=0n;for(let J=0;J<F;J++){const oe=Number(B[J]),le=Ld(B[J+F]);for(let he=0;he<oe;he++)X+=le,Q[K++]=X}return Q})(p,v.runs,v.numRleValues):((function(B){B[0]=B[0]>>1n^-(1n&B[0]);const F=B.length/4*4;let U=1;if(F>=4)for(;U<F-4;U+=4){const Q=B[U],K=B[U+1],X=B[U+2],J=B[U+3];B[U]=(Q>>1n^-(1n&Q))+B[U-1],B[U+1]=(K>>1n^-(1n&K))+B[U],B[U+2]=(X>>1n^-(1n&X))+B[U+1],B[U+3]=(J>>1n^-(1n&J))+B[U+2]}for(;U!=B.length;++U)B[U]=(B[U]>>1n^-(1n&B[U]))+B[U-1]})(p),p);case qn.RLE:return(function(B,F,U){return U?(function(Q,K,X){const J=new BigInt64Array(X);let oe=0;for(let le=0;le<K;le++){const he=Number(Q[le]);let Be=Q[le+K];Be=Be>>1n^-(1n&Be),J.fill(Be,oe,oe+he),oe+=he}return J})(B,F.runs,F.numRleValues):Px(B,F.runs,F.numRleValues)})(p,v,_);case qn.NONE:return _&&(function(B){for(let F=0;F<B.length;F++){const U=B[F];B[F]=U>>1n^-(1n&U)}})(p),p;default:throw new Error(`The specified Logical level technique is not supported: ${v.logicalLevelTechnique1}`)}})(Sg(l,t,s.numValues),s,A)}function Rx(l,t,s,A){const p=Sg(l,t,s.numValues);if(p.length===1){const v=p[0];return A?Ld(v):v}return A?(function(v){return Ld(v[1])})(p):(function(v){return v[1]})(p)}function wv(l,t,s,A,p){return(function(v,_,B,F){switch(_.logicalLevelTechnique1){case qn.DELTA:return _.logicalLevelTechnique2===qn.RLE&&(v=Tx(v,_.runs,_.numRleValues)),(function(U,Q){const K=new Int32Array(U.size());let X=0;U.get(0)?(K[0]=U.get(0)?Q[0]>>>1^-(1&Q[0]):0,X=1):K[0]=0;let J=1;for(;J!=K.length;++J)K[J]=U.get(J)?K[J-1]+(Q[X]>>>1^-(1&Q[X++])):K[J-1];return K})(F,v);case qn.RLE:return(function(U,Q,K,X){const J=Q;return K?(function(oe,le,he){const Be=new Int32Array(oe.size());let tt=0;for(let Se=0;Se<he;Se++){const ke=le[Se];let it=le[Se+he];it=it>>>1^-(1&it);for(let ht=tt;ht<tt+ke;ht++)oe.get(ht)?Be[ht]=it:(Be[ht]=0,tt++);tt+=ke}return Be})(X,U,J.runs):(function(oe,le,he){const Be=new Int32Array(oe.size());let tt=0;for(let Se=0;Se<he;Se++){const ke=le[Se],it=le[Se+he];for(let ht=tt;ht<tt+ke;ht++)oe.get(ht)?Be[ht]=it:(Be[ht]=0,tt++);tt+=ke}return Be})(X,U,J.runs)})(v,_,B,F);case qn.MORTON:return yv(v),v;case qn.COMPONENTWISE_DELTA:return Mx(v),v;case qn.NONE:return v=B?(function(U,Q){const K=new Int32Array(U.size());let X=0,J=0;for(;J!=K.length;++J)if(U.get(J)){const oe=Q[X++];K[J]=oe>>>1^-(1&oe)}else K[J]=0;return K})(F,v):(function(U,Q){const K=new Int32Array(U.size());let X=0,J=0;for(;J!=K.length;++J)K[J]=U.get(J)?Q[X++]:0;return K})(F,v),v;default:throw new Error("The specified Logical level technique is not supported")}})(s.physicalLevelTechnique===Ih.FAST_PFOR?Ix():xa(l,t,s.numValues),s,A,p)}function Ig(l,t,s,A){const p=l.logicalLevelTechnique1;if(p===qn.RLE)return l.runs===1?ra.CONST:ra.FLAT;const v=t instanceof _u?t.size():t;if(p===qn.DELTA&&l.logicalLevelTechnique2===qn.RLE){const _=l.runs,B=2;if(l.numRleValues!==v)return ra.FLAT;if(_===1)return ra.SEQUENCE;if(_===2){const F=A.get();let U;if(l.physicalLevelTechnique===Ih.VARINT)U=xa(s,A,4);else{const Q=A.get();U=new Int32Array(s.buffer,s.byteOffset+Q,4)}if(A.set(F),U[2]===B&&U[3]===B)return ra.SEQUENCE}}return l.numValues===1?ra.CONST:ra.FLAT}class Nx extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Qx extends Sx{constructor(t,s,A,p){super(t,BigInt64Array.of(s),A,p)}getValueFromBuffer(t){return this.dataBuffer[0]+BigInt(t)*this.delta}}class Md{_geometryOffsets;_partOffsets;_ringOffsets;constructor(t,s,A){this._geometryOffsets=t,this._partOffsets=s,this._ringOffsets=A}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function xv(l,t,s){return{x:Ox(l,t)-s,y:Ox(l>>1,t)-s}}function Ox(l,t){let s=0;for(let A=0;A<t;A++)s|=(l&1<<2*A)>>A;return s}(function(l){l[l.POINT=0]="POINT",l[l.LINESTRING=1]="LINESTRING",l[l.POLYGON=2]="POLYGON",l[l.MULTIPOINT=3]="MULTIPOINT",l[l.MULTILINESTRING=4]="MULTILINESTRING",l[l.MULTIPOLYGON=5]="MULTIPOLYGON"})(na||(na={})),(function(l){l[l.POINT=0]="POINT",l[l.LINESTRING=1]="LINESTRING",l[l.POLYGON=2]="POLYGON"})(Fx||(Fx={})),(function(l){l[l.MORTON=0]="MORTON",l[l.VEC_2=1]="VEC_2",l[l.VEC_3=2]="VEC_3"})(wA||(wA={}));class $I{createPoint(t){return[[t]]}createMultiPoint(t){return t.map((s=>[s]))}createLineString(t){return[t]}createMultiLineString(t){return t}createPolygon(t,s){return[t].concat(s)}createMultiPolygon(t){return t.flat()}}function zx(l){const t=new Array(l.numGeometries);let s=1,A=1,p=1,v=0;const _=new $I;let B=0,F=0;const U=l.mortonSettings,Q=l.topologyVector,K=Q.geometryOffsets,X=Q.partOffsets,J=Q.ringOffsets,oe=l.vertexOffsets,le=l.containsPolygonGeometry(),he=l.vertexBuffer;for(let Be=0;Be<l.numGeometries;Be++){const tt=l.geometryType(Be);if(tt===na.POINT){if(oe&&oe.length!==0)if(l.vertexBufferType===wA.VEC_2){const Se=2*oe[F++],ke=new w(he[Se],he[Se+1]);t[v++]=_.createPoint(ke)}else{const Se=xv(he[oe[F++]],U.numBits,U.coordinateShift),ke=new w(Se.x,Se.y);t[v++]=_.createPoint(ke)}else{const Se=new w(he[B++],he[B++]);t[v++]=_.createPoint(Se)}K&&p++,X&&s++,J&&A++}else if(tt===na.MULTIPOINT){const Se=K[p]-K[p-1];p++;const ke=new Array(Se);if(oe&&oe.length!==0){for(let it=0;it<Se;it++){const ht=2*oe[F++];ke[it]=new w(he[ht],he[ht+1])}t[v++]=_.createMultiPoint(ke)}else{for(let it=0;it<Se;it++){const ht=he[B++],Mt=he[B++];ke[it]=new w(ht,Mt)}t[v++]=_.createMultiPoint(ke)}}else if(tt===na.LINESTRING){let Se,ke=0;le?(ke=J[A]-J[A-1],A++):ke=X[s]-X[s-1],s++,oe&&oe.length!==0?(Se=l.vertexBufferType===wA.VEC_2?Bv(he,oe,F,ke,!1):Cv(he,oe,F,ke,!1,U),F+=ke):(Se=bv(he,B,ke,!1),B+=2*ke),t[v++]=_.createLineString(Se),K&&p++}else if(tt===na.POLYGON){const Se=X[s]-X[s-1];s++;const ke=new Array(Se-1);let it=J[A]-J[A-1];if(A++,oe&&oe.length!==0){const ht=l.vertexBufferType===wA.VEC_2?Pg(he,oe,F,it):Lg(he,oe,F,it,0,U);F+=it;for(let Mt=0;Mt<ke.length;Mt++)it=J[A]-J[A-1],A++,ke[Mt]=l.vertexBufferType===wA.VEC_2?Pg(he,oe,F,it):Lg(he,oe,F,it,0,U),F+=it;t[v++]=_.createPolygon(ht,ke)}else{const ht=Tg(he,B,it);B+=2*it;for(let Mt=0;Mt<ke.length;Mt++)it=J[A]-J[A-1],A++,ke[Mt]=Tg(he,B,it),B+=2*it;t[v++]=_.createPolygon(ht,ke)}K&&p++}else if(tt===na.MULTILINESTRING){const Se=K[p]-K[p-1];p++;const ke=new Array(Se);if(oe&&oe.length!==0){for(let it=0;it<Se;it++){let ht=0;le?(ht=J[A]-J[A-1],A++):ht=X[s]-X[s-1],s++;const Mt=l.vertexBufferType===wA.VEC_2?Bv(he,oe,F,ht,!1):Cv(he,oe,F,ht,!1,U);ke[it]=Mt,F+=ht}t[v++]=_.createMultiLineString(ke)}else{for(let it=0;it<Se;it++){let ht=0;le?(ht=J[A]-J[A-1],A++):ht=X[s]-X[s-1],s++,ke[it]=bv(he,B,ht,!1),B+=2*ht}t[v++]=_.createMultiLineString(ke)}}else{if(tt!==na.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Se=K[p]-K[p-1];p++;const ke=new Array(Se);let it=0;if(oe&&oe.length!==0){for(let ht=0;ht<Se;ht++){const Mt=X[s]-X[s-1];s++;const Xt=new Array(Mt-1);it=J[A]-J[A-1],A++;const Vt=l.vertexBufferType===wA.VEC_2?Pg(he,oe,F,it):Lg(he,oe,F,it,0,U);F+=it;for(let ir=0;ir<Xt.length;ir++)it=J[A]-J[A-1],A++,Xt[ir]=l.vertexBufferType===wA.VEC_2?Pg(he,oe,F,it):Lg(he,oe,F,it,0,U),F+=it;ke[ht]=_.createPolygon(Vt,Xt)}t[v++]=_.createMultiPolygon(ke)}else{for(let ht=0;ht<Se;ht++){const Mt=X[s]-X[s-1];s++;const Xt=new Array(Mt-1);it=J[A]-J[A-1],A++;const Vt=Tg(he,B,it);B+=2*it;for(let ir=0;ir<Xt.length;ir++){const _r=J[A]-J[A-1];A++,Xt[ir]=Tg(he,B,_r),B+=2*_r}ke[ht]=_.createPolygon(Vt,Xt)}t[v++]=_.createMultiPolygon(ke)}}}}return t}function Tg(l,t,s){return bv(l,t,s,!0)}function Pg(l,t,s,A){return Bv(l,t,s,A,!0)}function Lg(l,t,s,A,p,v){return Cv(l,t,s,A,!0,v)}function bv(l,t,s,A){const p=new Array(A?s+1:s);for(let v=0;v<2*s;v+=2)p[v/2]=new w(l[t+v],l[t+v+1]);return A&&(p[p.length-1]=p[0]),p}function Bv(l,t,s,A,p){const v=new Array(p?A+1:A);for(let _=0;_<2*A;_+=2){const B=2*t[s+_/2];v[_/2]=new w(l[B],l[B+1])}return p&&(v[v.length-1]=v[0]),v}function Cv(l,t,s,A,p,v){const _=new Array(p?A+1:A);for(let B=0;B<A;B++){const F=xv(l[t[s+B]],v.numBits,v.coordinateShift);_[B]=new w(F.x,F.y)}return p&&(_[_.length-1]=_[0]),_}class Hx{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(t,s,A,p,v){this._vertexBufferType=t,this._topologyVector=s,this._vertexOffsets=A,this._vertexBuffer=p,this._mortonSettings=v}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const t=zx(this);let s=0;for(;s<this.numGeometries;)yield{coordinates:t[s],type:this.geometryType(s)},s++}getSimpleEncodedVertex(t){const s=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getVertex(t){if(this.vertexOffsets&&this.mortonSettings){const A=xv(this.vertexBuffer[this.vertexOffsets[t]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[A.x,A.y]}const s=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getGeometries(){return zx(this)}get mortonSettings(){return this._mortonSettings}}class jx extends Hx{_numGeometries;_geometryType;constructor(t,s,A,p,v,_,B){super(A,p,v,_,B),this._numGeometries=t,this._geometryType=s}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===na.POLYGON||this._geometryType===na.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Vx extends Hx{_geometryTypes;constructor(t,s,A,p,v,_){super(t,A,p,v,_),this._geometryTypes=s}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let t=0;t<this.numGeometries;t++)if(this.geometryType(t)===na.POLYGON||this.geometryType(t)===na.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Gx{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(t,s,A,p){this._triangleOffsets=t,this._indexBuffer=s,this._vertexBuffer=A,this._topologyVector=p}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const t=new Array(this.numGeometries),s=this._topologyVector,A=s.partOffsets,p=s.ringOffsets,v=s.geometryOffsets;let _=0,B=1,F=1,U=1;for(let Q=0;Q<this.numGeometries;Q++)switch(this.geometryType(Q)){case na.POLYGON:{const K=A[B]-A[B-1];B++;const X=[];for(let J=0;J<K;J++){const oe=p[F]-p[F-1];F++;const le=[];for(let he=0;he<oe;he++){const Be=this._vertexBuffer[_++],tt=this._vertexBuffer[_++];le.push(new w(Be,tt))}le.length>0&&le.push(le[0]),X.push(le)}t[Q]=X,v&&U++}break;case na.MULTIPOLYGON:{const K=v[U]-v[U-1];U++;const X=[];for(let J=0;J<K;J++){const oe=A[B]-A[B-1];B++;for(let le=0;le<oe;le++){const he=p[F]-p[F-1];F++;const Be=[];for(let tt=0;tt<he;tt++){const Se=this._vertexBuffer[_++],ke=this._vertexBuffer[_++];Be.push(new w(Se,ke))}Be.length>0&&Be.push(Be[0]),X.push(Be)}}t[Q]=X}}return t}[Symbol.iterator](){return null}}function Kx(l,t,s,A,p,v){return new WI(l,t,s,A,p,v)}class WI extends Gx{_numGeometries;_geometryType;constructor(t,s,A,p,v,_){super(A,p,v,_),this._numGeometries=t,this._geometryType=s}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function qx(l,t,s,A,p){return new ZI(l,t,s,A,p)}class ZI extends Gx{_geometryTypes;constructor(t,s,A,p,v){super(s,A,p,v),this._geometryTypes=t}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function XI(l,t,s,A,p){const v=Kl(l,s);let _=null,B=null,F=null,U=null,Q=null,K=null,X=null,J=null;if(Ig(v,A,l,s)===ra.CONST){const le=_v(l,s,v,!1);for(let he=0;he<t-1;he++){const Be=Kl(l,s);switch(Be.physicalStreamType){case Xa.LENGTH:switch(Be.logicalStreamType.lengthType){case Xc.GEOMETRIES:_=Jh(l,s,Be);break;case Xc.PARTS:B=Jh(l,s,Be);break;case Xc.RINGS:F=Jh(l,s,Be);break;case Xc.TRIANGLES:X=Jh(l,s,Be)}break;case Xa.OFFSET:switch(Be.logicalStreamType.offsetType){case jf.VERTEX:U=ql(l,s,Be,!1);break;case jf.INDEX:J=ql(l,s,Be,!1)}break;case Xa.DATA:vu.VERTEX===Be.logicalStreamType.dictionaryType?Q=ql(l,s,Be,!0):(K={numBits:Be.numBits,coordinateShift:Be.coordinateShift},Q=ql(l,s,Be,!1))}}return J!==null?_!=null||B!=null?Kx(A,le,X,J,Q,new Md(_,B,F)):Kx(A,le,X,J,Q):K===null?(function(he,Be,tt,Se,ke){return new jx(he,Be,wA.VEC_2,tt,Se,ke)})(A,le,new Md(_,B,F),U,Q):(function(he,Be,tt,Se,ke,it){return new jx(he,Be,wA.MORTON,tt,Se,ke,it)})(A,le,new Md(_,B,F),U,Q,K)}const oe=ql(l,s,v,!1);for(let le=0;le<t-1;le++){const he=Kl(l,s);switch(he.physicalStreamType){case Xa.LENGTH:switch(he.logicalStreamType.lengthType){case Xc.GEOMETRIES:_=ql(l,s,he,!1);break;case Xc.PARTS:B=ql(l,s,he,!1);break;case Xc.RINGS:F=ql(l,s,he,!1);break;case Xc.TRIANGLES:X=Jh(l,s,he)}break;case Xa.OFFSET:switch(he.logicalStreamType.offsetType){case jf.VERTEX:U=ql(l,s,he,!1);break;case jf.INDEX:J=ql(l,s,he,!1)}break;case Xa.DATA:vu.VERTEX===he.logicalStreamType.dictionaryType?Q=ql(l,s,he,!0):(K={numBits:he.numBits,coordinateShift:he.coordinateShift},Q=ql(l,s,he,!1))}}return J!==null&&B===null?qx(oe,X,J,Q):(_!==null?(_=Ev(oe,_,2),B!==null&&F!==null?(B=$x(oe,_,B,!1),F=(function(le,he,Be,tt){const Se=new Int32Array(Be[Be.length-1]+1);let ke=0;Se[0]=ke;let it=1,ht=1,Mt=0;for(let Xt=0;Xt<le.length;Xt++){const Vt=le[Xt],ir=he[Xt+1]-he[Xt];if(Vt!==0&&Vt!==3)for(let _r=0;_r<ir;_r++){const or=Be[it]-Be[it-1];it++;for(let $t=0;$t<or;$t++)ke=Se[ht++]=ke+tt[Mt++]}else for(let _r=0;_r<ir;_r++)Se[ht++]=++ke,it++}return Se})(oe,_,B,F)):B!==null&&(B=(function(le,he,Be){const tt=new Int32Array(he[he.length-1]+1);let Se=0;tt[0]=Se;let ke=1,it=0;for(let ht=0;ht<le.length;ht++){const Mt=le[ht],Xt=he[ht+1]-he[ht];if(Mt===4||Mt===1)for(let Vt=0;Vt<Xt;Vt++)Se=tt[ke++]=Se+Be[it++];else for(let Vt=0;Vt<Xt;Vt++)tt[ke++]=++Se}return tt})(oe,_,B))):B!==null&&F!==null?(B=Ev(oe,B,1),F=$x(oe,B,F,!0)):B!==null&&(B=Ev(oe,B,0)),J!==null?qx(oe,X,J,Q,new Md(_,B,F)):K===null?(function(le,he,Be,tt){return new Vx(wA.VEC_2,le,he,Be,tt)})(oe,new Md(_,B,F),U,Q):(function(le,he,Be,tt,Se){return new Vx(wA.MORTON,le,he,Be,tt,Se)})(oe,new Md(_,B,F),U,Q,K))}function Ev(l,t,s){const A=new Int32Array(l.length+1);let p=0;A[0]=p;let v=0;for(let _=0;_<l.length;_++)p=A[_+1]=p+(l[_]>s?t[v++]:1);return A}function $x(l,t,s,A){const p=new Int32Array(t[t.length-1]+1);let v=0;p[0]=v;let _=1,B=0;for(let F=0;F<l.length;F++){const U=l[F],Q=t[F+1]-t[F];if(U===5||U===2||A&&(U===4||U===1))for(let K=0;K<Q;K++)v=p[_++]=v+s[B++];else for(let K=0;K<Q;K++)p[_++]=++v}return p}class YI extends Pd{dataVector;constructor(t,s,A){super(t,s.getBuffer(),A),this.dataVector=s}getValueFromBuffer(t){return this.dataVector.get(t)}}class JI extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Wx extends Pd{constructor(t,s,A){super(t,BigInt64Array.of(s),A)}getValueFromBuffer(t){return this.dataBuffer[0]}}function Yp(l,t,s){return Zx(l,Math.ceil(t/8),s)}function Zx(l,t,s){const A=new Uint8Array(t);let p=0;for(;p<t;){const v=l[s.increment()];if(v<=127){const _=v+3,B=l[s.increment()],F=p+_;A.fill(B,p,F),p=F}else{const _=256-v;for(let B=0;B<_;B++)A[p++]=l[s.increment()]}}return A}const eT=new TextDecoder;function Sv(l,t,s){return s-t>=12?eT.decode(l.subarray(t,s)):(function(A,p,v){let _="",B=p;for(;B<v;){const F=A[B];let U,Q,K,X=null,J=F>239?4:F>223?3:F>191?2:1;if(B+J>v)break;J===1?F<128&&(X=F):J===2?(U=A[B+1],(192&U)==128&&(X=(31&F)<<6|63&U,X<=127&&(X=null))):J===3?(U=A[B+1],Q=A[B+2],(192&U)==128&&(192&Q)==128&&(X=(15&F)<<12|(63&U)<<6|63&Q,(X<=2047||X>=55296&&X<=57343)&&(X=null))):J===4&&(U=A[B+1],Q=A[B+2],K=A[B+3],(192&U)==128&&(192&Q)==128&&(192&K)==128&&(X=(15&F)<<18|(63&U)<<12|(63&Q)<<6|63&K,(X<=65535||X>=1114112)&&(X=null))),X===null?(X=65533,J=1):X>65535&&(X-=65536,_+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),_+=String.fromCharCode(X),B+=J}return _})(l,t,s)}class Fv extends Pd{offsetBuffer;constructor(t,s,A,p){super(t,A,p),this.offsetBuffer=s}}class Xx extends Fv{textEncoder;constructor(t,s,A,p){super(t,s,A,p??s.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(t){return Sv(this.dataBuffer,this.offsetBuffer[t],this.offsetBuffer[t+1])}}class kd extends Fv{indexBuffer;textEncoder;constructor(t,s,A,p,v){super(t,A,p,v??s.length),this.indexBuffer=s,this.indexBuffer=s,this.textEncoder=new TextEncoder}getValueFromBuffer(t){const s=this.indexBuffer[t];return Sv(this.dataBuffer,this.offsetBuffer[s],this.offsetBuffer[s+1])}}class Yx extends Fv{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(t,s,A,p,v,_,B){super(t,A,p,B),this.indexBuffer=s,this.symbolOffsetBuffer=v,this.symbolTableBuffer=_,this.textEncoder=new TextEncoder}getValueFromBuffer(t){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(A,p,v){const _=[],B=new Array(p.length).fill(0);for(let F=1;F<p.length;F++)B[F]=B[F-1]+p[F-1];for(let F=0;F<v.length;F++)if(v[F]===255)_.push(v[++F]);else{const U=p[v[F]],Q=B[v[F]];for(let K=0;K<U;K++)_.push(A[Q+K])}return new Uint8Array(_)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const s=this.indexBuffer[t];return Sv(this.decodedDictionary,this.offsetBuffer[s],this.offsetBuffer[s+1])}offsetToLengthBuffer(t){const s=new Uint32Array(t.length-1);let A=t[0];for(let p=1;p<t.length;p++){const v=t[p];s[p-1]=v-A,A=v}return s}}function tT(l,t,s,A,p,v){return s.type==="scalarType"?(function(_,B,F,U,Q,K){let X=null,J=0;if(_===0)return null;if(K.nullable){const le=Kl(B,F);J=le.numValues;const he=F.get(),Be=Yp(B,J,F);F.set(he+le.byteLength),X=new _u(Be,le.numValues)}const oe=X??U;switch(Q.physicalType){case 4:case 3:return(function(le,he,Be,tt,Se){const ke=Kl(le,he),it=Ig(ke,Se,le,he),ht=tt.physicalType===3;if(it===ra.FLAT){const Mt=Jp(Se)?wv(le,he,ke,ht,Se):ql(le,he,ke,ht);return new dv(Be.name,Mt,Se)}if(it===ra.SEQUENCE){const Mt=kx(le,he,ke);return new mv(Be.name,Mt[0],Mt[1],ke.numRleValues)}{const Mt=_v(le,he,ke,ht);return new gv(Be.name,Mt,Se)}})(B,F,K,Q,oe);case 9:return(function(le,he,Be,tt,Se){let ke=null,it=null,ht=null,Mt=null,Xt=null,Vt=null,ir=null,_r=null;for(let or=0;or<tt;or++){const $t=Kl(he,Be);if($t.byteLength!==0)switch($t.physicalStreamType){case Xa.PRESENT:{const Ot=Yp(he,$t.numValues,Be);Vt=new _u(Ot,$t.numValues);break}case Xa.OFFSET:it=Se!=null||Vt!=null?wv(he,Be,$t,!1,Se??Vt):ql(he,Be,$t,!1);break;case Xa.LENGTH:{const Ot=Jh(he,Be,$t);Xc.DICTIONARY===$t.logicalStreamType.lengthType?ke=Ot:Xc.SYMBOL===$t.logicalStreamType.lengthType?Mt=Ot:ir=Ot;break}case Xa.DATA:{const Ot=he.subarray(Be.get(),Be.get()+$t.byteLength);Be.add($t.byteLength);const Lr=$t.logicalStreamType.dictionaryType;vu.FSST===Lr?Xt=Ot:vu.SINGLE===Lr||vu.SHARED===Lr?ht=Ot:vu.NONE===Lr&&(_r=Ot);break}}}return(function(or,$t,Ot,Lr,Ir,kr,Er){return $t?new Yx(or,Ot,Lr,Ir,kr,$t,Er):null})(le,Xt,it,ke,ht,Mt,Se??Vt)??(function(or,$t,Ot,Lr,Ir){return $t?Ir?new kd(or,Ot,Lr,$t,Ir):new kd(or,Ot,Lr,$t):null})(le,ht,it,ke,Se??Vt)??(function(or,$t,Ot,Lr,Ir){if(!$t||!Ot)return null;if(Lr)return Ir?new kd(or,Lr,$t,Ot,Ir):new kd(or,Lr,$t,Ot);if(Ir&&Ir.size()!==$t.length-1){const kr=new Int32Array(Ir.size());let Er=0;for(let Jr=0;Jr<Ir.size();Jr++)kr[Jr]=Ir.get(Jr)?Er++:0;return new kd(or,kr,$t,Ot,Ir)}return Ir?new Xx(or,$t,Ot,Ir):new Xx(or,$t,Ot)})(le,ir,_r,it,Se??Vt)})(K.name,B,F,K.nullable?_-1:_,X);case 0:return(function(le,he,Be,tt,Se){const ke=Kl(le,he),it=ke.numValues,ht=he.get(),Mt=Jp(Se)?(function(Vt,ir,_r,or){const $t=Zx(Vt,Math.ceil(ir/8),_r),Ot=new _u($t,ir),Lr=or.size(),Ir=new _u(new Uint8Array(Lr),Lr);let kr=0;for(let Er=0;Er<or.size();Er++){const Jr=!!or.get(Er)&&Ot.get(kr++);Ir.set(Er,Jr)}return Ir.getBuffer()})(le,it,he,Se):Yp(le,it,he);he.set(ht+ke.byteLength);const Xt=new _u(Mt,it);return new YI(Be.name,Xt,Se)})(B,F,K,0,oe);case 6:case 5:return(function(le,he,Be,tt,Se){const ke=Kl(le,he),it=Ig(ke,tt,le,he),ht=Se.physicalType===5;if(it===ra.FLAT){const Mt=Jp(tt)?(function(Xt,Vt,ir,_r,or){return(function($t,Ot,Lr,Ir){switch(Ot.logicalLevelTechnique1){case qn.DELTA:return Ot.logicalLevelTechnique2===qn.RLE&&($t=Px($t,Ot.runs,Ot.numRleValues)),(function(kr,Er){const Jr=new BigInt64Array(kr.size());let ri=0;kr.get(0)?(Jr[0]=kr.get(0)?Er[0]>>1n^-(1n&Er[0]):0n,ri=1):Jr[0]=0n;let Gn=1;for(;Gn!=Jr.length;++Gn)Jr[Gn]=kr.get(Gn)?Jr[Gn-1]+(Er[ri]>>1n^-(1n&Er[ri++])):Jr[Gn-1];return Jr})(Ir,$t);case qn.RLE:return(function(kr,Er,Jr,ri){const Gn=Er;return Jr?(function(ps,Ja,wo){const ms=new BigInt64Array(ps.size());let As=0;for(let Bi=0;Bi<wo;Bi++){const js=Number(Ja[Bi]);let io=Ja[Bi+wo];io=io>>1n^-(1n&io);for(let ts=As;ts<As+js;ts++)ps.get(ts)?ms[ts]=io:(ms[ts]=0n,As++);As+=js}return ms})(ri,kr,Gn.runs):(function(ps,Ja,wo){const ms=new BigInt64Array(ps.size());let As=0;for(let Bi=0;Bi<wo;Bi++){const js=Number(Ja[Bi]),io=Ja[Bi+wo];for(let ts=As;ts<As+js;ts++)ps.get(ts)?ms[ts]=io:(ms[ts]=0n,As++);As+=js}return ms})(ri,kr,Gn.runs)})($t,Ot,Lr,Ir);case qn.NONE:return $t=Lr?(function(kr,Er){const Jr=new BigInt64Array(kr.size());let ri=0,Gn=0;for(;Gn!=Jr.length;++Gn)if(kr.get(Gn)){const ps=Er[ri++];Jr[Gn]=ps>>1n^-(1n&ps)}else Jr[Gn]=0n;return Jr})(Ir,$t):(function(kr,Er){const Jr=new BigInt64Array(kr.size());let ri=0,Gn=0;for(;Gn!=Jr.length;++Gn)Jr[Gn]=kr.get(Gn)?Er[ri++]:0n;return Jr})(Ir,$t),$t;default:throw new Error("The specified Logical level technique is not supported")}})(Sg(Xt,Vt,ir.numValues),ir,_r,or)})(le,he,ke,ht,tt):Dx(le,he,ke,ht);return new Nx(Be.name,Mt,tt)}if(it===ra.SEQUENCE){const Mt=Ux(le,he,ke);return new Qx(Be.name,Mt[0],Mt[1],ke.numRleValues)}{const Mt=Rx(le,he,ke,ht);return new Wx(Be.name,Mt,tt)}})(B,F,K,oe,Q);case 7:return(function(le,he,Be,tt){const Se=Kl(le,he),ke=Jp(tt)?(function(it,ht,Mt,Xt){const Vt=ht.get(),ir=Vt+Xt*Float32Array.BYTES_PER_ELEMENT,_r=new Uint8Array(it.subarray(Vt,ir)).buffer,or=new Float32Array(_r);ht.set(ir);const $t=Mt.size(),Ot=new Float32Array($t);let Lr=0;for(let Ir=0;Ir<$t;Ir++)Ot[Ir]=Mt.get(Ir)?or[Lr++]:0;return Ot})(le,he,tt,Se.numValues):(function(it,ht,Mt){const Xt=ht.get(),Vt=Xt+Mt*Float32Array.BYTES_PER_ELEMENT,ir=new Uint8Array(it.subarray(Xt,Vt)).buffer,_r=new Float32Array(ir);return ht.set(Vt),_r})(le,he,Se.numValues);return new JI(Be.name,ke,tt)})(B,F,K,oe);case 8:return(function(le,he,Be,tt){const Se=Kl(le,he),ke=Jp(tt)?(function(it,ht,Mt,Xt){const Vt=ht.get(),ir=Vt+Xt*Float64Array.BYTES_PER_ELEMENT,_r=new Uint8Array(it.subarray(Vt,ir)).buffer,or=new Float64Array(_r);ht.set(ir);const $t=Mt.size(),Ot=new Float64Array($t);let Lr=0;for(let Ir=0;Ir<$t;Ir++)Ot[Ir]=Mt.get(Ir)?or[Lr++]:0;return Ot})(le,he,tt,Se.numValues):(function(it,ht,Mt){const Xt=ht.get(),Vt=Xt+Mt*Float64Array.BYTES_PER_ELEMENT,ir=new Uint8Array(it.subarray(Xt,Vt)).buffer,_r=new Float64Array(ir);return ht.set(Vt),_r})(le,he,Se.numValues);return new pv(Be.name,ke,tt)})(B,F,K,oe);default:throw new Error(`The specified data type for the field is currently not supported: ${Q}`)}})(A,l,t,p,s.scalarType,s):A!=1?null:(function(_,B,F,U){let Q=null,K=null,X=null,J=null,oe=!1;for(;!oe;){const tt=Kl(_,B);switch(tt.physicalStreamType){case Xa.LENGTH:Xc.DICTIONARY===tt.logicalStreamType.lengthType?Q=Jh(_,B,tt):X=Jh(_,B,tt);break;case Xa.DATA:vu.SINGLE===tt.logicalStreamType.dictionaryType||vu.SHARED===tt.logicalStreamType.dictionaryType?(K=_.subarray(B.get(),B.get()+tt.byteLength),oe=!0):J=_.subarray(B.get(),B.get()+tt.byteLength),B.add(tt.byteLength)}}const le=F.complexType.children,he=[];let Be=0;for(const tt of le){const Se=xa(_,B,1)[0];if(Se==0)continue;const ke=`${F.name}${tt.name==="default"?"":":"+tt.name}`;if(Se!==2||tt.type!=="scalarField"||tt.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const it=Kl(_,B),ht=Yp(_,it.numValues,B),Mt=Kl(_,B),Xt=Mt.decompressedCount!==U?wv(_,B,Mt,!1,new _u(ht,it.numValues)):ql(_,B,Mt,!1);he[Be++]=J?new Yx(ke,Xt,Q,K,X,J,new _u(ht,it.numValues)):new kd(ke,Xt,Q,K,new _u(ht,it.numValues))}return he})(l,t,s,p)}function Jp(l){return l instanceof _u}function rT(l){if(l.name==="id")return!1;if(l.type==="scalarType"){const t=l.scalarType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(t.type==="logicalType")return!1}else if(l.type==="complexType"){const t=l.complexType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",l),!1}const nT=new TextDecoder;function Jx(l,t){const s=xa(l,t,1)[0];if(s===0)return"";const A=t.get(),p=l.subarray(A,A+s);return t.add(s),nT.decode(p)}function eb(l,t){const s=xa(l,t,1)[0]>>>0,A=!!(4&s),p=!!(2&s),v=xa(l,t,1)[0]>>>0,_={};if(1&s&&(_.nullable=!0),p){const B={};if(A?(B.type="logicalType",B.logicalType=v):(B.type="physicalType",B.physicalType=v),8&s){const F=xa(l,t,1)[0]>>>0;B.children=new Array(F);for(let U=0;U<F;U++)B.children[U]=eb(l,t)}_.type="complexField",_.complexField=B}else{const B={};A?(B.type="logicalType",B.logicalType=v):(B.type="physicalType",B.physicalType=v),_.type="scalarField",_.scalarField=B}return _}function iT(l,t){const s=xa(l,t,1)[0]>>>0,A=(function(p){switch(p){case 0:case 1:case 2:case 3:{const v={};v.nullable=!!(1&p),v.columnScope=0;const _={};return _.physicalType=p>1?6:4,_.type="physicalType",v.scalarType=_,v.type="scalarType",v}case 4:{const v={nullable:!1,columnScope:0},_={type:"physicalType",physicalType:0};return v.type="complexType",v.complexType=_,v}case 30:{const v={nullable:!1,columnScope:0},_={type:"physicalType",physicalType:1};return v.type="complexType",v.complexType=_,v}default:return(function(v){let _=null;switch(v){case 10:case 11:_=0;break;case 12:case 13:_=1;break;case 14:case 15:_=2;break;case 16:case 17:_=3;break;case 18:case 19:_=4;break;case 20:case 21:_=5;break;case 22:case 23:_=6;break;case 24:case 25:_=7;break;case 26:case 27:_=8;break;case 28:case 29:_=9;break;default:return null}const B={};B.nullable=!!(1&v),B.columnScope=0;const F={type:"physicalType"};return F.physicalType=_,B.type="scalarType",B.scalarType=F,B})(p)}})(s);if(!A)throw new Error(`Unsupported column type code: ${s}`);if((function(p){return p>=10})(s)?A.name=Jx(l,t):s>=0&&s<=3?A.name="id":s===4&&(A.name="geometry"),(function(p){return p===30})(s)){const p=xa(l,t,1)[0]>>>0,v=A.complexType;v.children=new Array(p);for(let _=0;_<p;_++)v.children[_]=eb(l,t)}return A}function sT(l,t){const s={featureTables:[]},A={};A.name=Jx(l,t);const p=xa(l,t,1)[0]>>>0,v=xa(l,t,1)[0]>>>0;A.columns=new Array(v);for(let _=0;_<v;_++)A.columns[_]=iT(l,t);return s.featureTables.push(A),[s,p]}function oT(l,t,s,A,p,v,_=!1){const B=t.scalarType.physicalType,F=Ig(p,v,l,s);if(B===4)switch(F){case ra.FLAT:{const U=ql(l,s,p,!1);return new dv(A,U,v)}case ra.SEQUENCE:{const U=kx(l,s,p);return new mv(A,U[0],U[1],p.numRleValues)}case ra.CONST:{const U=_v(l,s,p,!1);return new gv(A,U,v)}}else switch(F){case ra.FLAT:{if(_){const Q=(function(K,X,J,oe){const le=(function(he,Be,tt){const Se=new Float64Array(Be);for(let ke=0;ke<Be;ke++)Se[ke]=KI(he,tt);return Se})(K,J.numValues,X);return(function(he,Be,tt){switch(Be.logicalLevelTechnique1){case qn.DELTA:return Be.logicalLevelTechnique2===qn.RLE&&(he=Lx(he,Be.runs,Be.numRleValues)),(function(Se){Se[0]=Se[0]%2==1?(Se[0]+1)/-2:Se[0]/2;const ke=Se.length/4*4;let it=1;if(ke>=4)for(;it<ke-4;it+=4){const ht=Se[it],Mt=Se[it+1],Xt=Se[it+2],Vt=Se[it+3];Se[it]=(ht%2==1?(ht+1)/-2:ht/2)+Se[it-1],Se[it+1]=(Mt%2==1?(Mt+1)/-2:Mt/2)+Se[it],Se[it+2]=(Xt%2==1?(Xt+1)/-2:Xt/2)+Se[it+1],Se[it+3]=(Vt%2==1?(Vt+1)/-2:Vt/2)+Se[it+2]}for(;it!=Se.length;++it)Se[it]=(Se[it]%2==1?(Se[it]+1)/-2:Se[it]/2)+Se[it-1]})(he),he;case qn.RLE:return(function(Se,ke,it){return Lx(Se,ke.runs,ke.numRleValues)})(he,Be);case qn.NONE:return he;default:throw new Error(`The specified Logical level technique is not supported: ${Be.logicalLevelTechnique1}`)}})(le,J)})(l,s,p);return new pv(A,Q,v)}const U=Dx(l,s,p,!1);return new Nx(A,U,v)}case ra.SEQUENCE:{const U=Ux(l,s,p);return new Qx(A,U[0],U[1],p.numRleValues)}case ra.CONST:{const U=Rx(l,s,p,!1);return new Wx(A,U,v)}}throw new Error("Vector type not supported for id column.")}class aT{constructor(t,s){var A;switch(this._featureData=t,this.properties=this._featureData.properties||{},(A=this._featureData.geometry)===null||A===void 0?void 0:A.type){case na.POINT:case na.MULTIPOINT:this.type=1;break;case na.LINESTRING:case na.MULTILINESTRING:this.type=2;break;case na.POLYGON:case na.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=s,this.id=Number(this._featureData.id)}loadGeometry(){const t=[];for(const s of this._featureData.geometry.coordinates){const A=[];for(const p of s)A.push(new w(p.x,p.y));t.push(A)}return t}}class lT{constructor(t){this.features=[],this.featureTable=t,this.name=t.name,this.extent=t.extent,this.version=2,this.features=t.getFeatures(),this.length=this.features.length}feature(t){return new aT(this.features[t],this.extent)}}class tb{constructor(t){this.layers={};const s=(function(A,p,v=!0){const _=new GI(0),B=[];for(;_.get()<A.length;){const F=xa(A,_,1)[0]>>>0,U=_.get()+F;if(U>A.length)throw new Error(`Block overruns tile: ${U} > ${A.length}`);if(xa(A,_,1)[0]>>>0!=1){_.set(U);continue}const Q=sT(A,_),K=Q[1],X=Q[0].featureTables[0];let J=null,oe=null;const le=[];let he=0;for(const tt of X.columns){const Se=tt.name;if(Se==="id"){let ke=null;if(tt.nullable){const ht=Kl(A,_),Mt=_.get(),Xt=Yp(A,ht.numValues,_);_.set(Mt+ht.byteLength),ke=new _u(Xt,ht.numValues)}const it=Kl(A,_);he=it.decompressedCount,J=oT(A,tt,_,Se,it,ke??he,v)}else if(Se==="geometry"){const ke=xa(A,_,1)[0];if(he===0){const it=_.get();he=Kl(A,_).decompressedCount,_.set(it)}oe=XI(A,ke,_,he)}else{const ke=rT(tt)?xa(A,_,1)[0]:1;if(ke===0&&tt.type==="scalarType")continue;const it=tT(A,_,tt,ke,he);if(it)if(Array.isArray(it))for(const ht of it)le.push(ht);else le.push(it)}}const Be=new VI(X.name,oe,J,le,K);B.push(Be),_.set(U)}return B})(new Uint8Array(t));this.layers=s.reduce(((A,p)=>Object.assign(Object.assign({},A),{[p.name]:new lT(p)})),{})}}class Gf{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){const s=new Gf;return s.extend(t(new w(this.minX,this.minY))),s.extend(t(new w(this.maxX,this.minY))),s.extend(t(new w(this.minX,this.maxY))),s.extend(t(new w(this.maxX,this.maxY))),s}static fromPoints(t){const s=new Gf;for(const A of t)s.extend(A);return s}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return!this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return!this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}class cT{constructor(t,s){this.feature=t,this.type=t.type,this.properties=t.tags?t.tags:{},this.extent=s,"id"in t&&(typeof t.id=="string"?this.id=parseInt(t.id,10):typeof t.id!="number"||isNaN(t.id)||(this.id=t.id))}loadGeometry(){const t=[],s=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const A of s){const p=[];for(const v of A)p.push(new w(v[0],v[1]));t.push(p)}return t}}const em="_geojsonTileLayer";function AT(l,t){t.writeVarintField(15,l.version||1),t.writeStringField(1,l.name||""),t.writeVarintField(5,l.extent||4096);const s={keys:[],values:[],keycache:{},valuecache:{}};for(let v=0;v<l.length;v++)s.feature=l.feature(v),t.writeMessage(2,uT,s);const A=s.keys;for(const v of A)t.writeStringField(3,v);const p=s.values;for(const v of p)t.writeMessage(4,dT,v)}function uT(l,t){if(!l.feature)return;const s=l.feature;s.id!==void 0&&t.writeVarintField(1,s.id),t.writeMessage(2,hT,l),t.writeVarintField(3,s.type),t.writeMessage(4,fT,s)}function hT(l,t){for(const s in l.feature?.properties){let A=l.feature.properties[s],p=l.keycache[s];if(A===null)continue;p===void 0&&(l.keys.push(s),p=l.keys.length-1,l.keycache[s]=p),t.writeVarint(p),typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"&&(A=JSON.stringify(A));const v=typeof A+":"+A;let _=l.valuecache[v];_===void 0&&(l.values.push(A),_=l.values.length-1,l.valuecache[v]=_),t.writeVarint(_)}}function Iv(l,t){return(t<<3)+(7&l)}function rb(l){return l<<1^l>>31}function fT(l,t){const s=l.loadGeometry(),A=l.type;let p=0,v=0;for(const _ of s){let B=1;A===1&&(B=_.length),t.writeVarint(Iv(1,B));const F=A===3?_.length-1:_.length;for(let U=0;U<F;U++){U===1&&A!==1&&t.writeVarint(Iv(2,F-1));const Q=_[U].x-p,K=_[U].y-v;t.writeVarint(rb(Q)),t.writeVarint(rb(K)),p+=Q,v+=K}l.type===3&&t.writeVarint(Iv(7,1))}}function dT(l,t){const s=typeof l;s==="string"?t.writeStringField(1,l):s==="boolean"?t.writeBooleanField(7,l):s==="number"&&(l%1!=0?t.writeDoubleField(3,l):l<0?t.writeSVarintField(6,l):t.writeVarintField(5,l))}class nb{constructor(t,s){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Re(Te,16,0),this.grid3D=new Re(Te,16,0),this.featureIndexArray=new ne,this.promoteId=s}insert(t,s,A,p,v,_){const B=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(A,p,v);const F=_?this.grid3D:this.grid;for(let U=0;U<s.length;U++){const Q=s[U],K=[1/0,1/0,-1/0,-1/0];for(let X=0;X<Q.length;X++){const J=Q[X];K[0]=Math.min(K[0],J.x),K[1]=Math.min(K[1],J.y),K[2]=Math.max(K[2],J.x),K[3]=Math.max(K[3],J.y)}K[0]<Te&&K[1]<Te&&K[2]>=0&&K[3]>=0&&F.insert(B,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new wd(new qu(this.rawTileData)).layers:new tb(this.rawTileData).layers,this.sourceLayerCoder=new Cx(this.vtLayers?Object.keys(this.vtLayers).sort():[em])),this.vtLayers}query(t,s,A,p){this.loadVTLayers();const v=t.params,_=Te/t.tileSize/t.scale,B=fc(v.filter,v.globalState),F=t.queryGeometry,U=t.queryPadding*_,Q=Gf.fromPoints(F),K=this.grid.query(Q.minX-U,Q.minY-U,Q.maxX+U,Q.maxY+U),X=Gf.fromPoints(t.cameraQueryGeometry).expandBy(U),J=this.grid3D.query(X.minX,X.minY,X.maxX,X.maxY,((he,Be,tt,Se)=>(function(ke,it,ht,Mt,Xt){for(const ir of ke)if(it<=ir.x&&ht<=ir.y&&Mt>=ir.x&&Xt>=ir.y)return!0;const Vt=[new w(it,ht),new w(it,Xt),new w(Mt,Xt),new w(Mt,ht)];if(ke.length>2){for(const ir of Vt)if(dh(ke,ir))return!0}for(let ir=0;ir<ke.length-1;ir++)if(Fp(ke[ir],ke[ir+1],Vt))return!0;return!1})(t.cameraQueryGeometry,he-U,Be-U,tt+U,Se+U)));for(const he of J)K.push(he);K.sort(pT);const oe={};let le;for(let he=0;he<K.length;he++){const Be=K[he];if(Be===le)continue;le=Be;const tt=this.featureIndexArray.get(Be);let Se=null;this.loadMatchingFeature(oe,tt.bucketIndex,tt.sourceLayerIndex,tt.featureIndex,B,v.layers,v.availableImages,s,A,p,((ke,it,ht)=>(Se||(Se=KA(ke)),it.queryIntersectsFeature({queryGeometry:F,feature:ke,featureState:ht,geometry:Se,zoom:this.z,transform:t.transform,pixelsToTileUnits:_,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation}))))}return oe}loadMatchingFeature(t,s,A,p,v,_,B,F,U,Q,K){const X=this.bucketLayerIDs[s];if(_&&!X.some((he=>_.has(he))))return;const J=this.sourceLayerCoder.decode(A),oe=this.vtLayers[J].feature(p);if(v.needGeometry){const he=qA(oe,!0);if(!v.filter(new Mr(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!v.filter(new Mr(this.tileID.overscaledZ),oe))return;const le=this.getId(oe,J);for(let he=0;he<X.length;he++){const Be=X[he];if(_&&!_.has(Be))continue;const tt=F[Be];if(!tt)continue;let Se={};le&&Q&&(Se=Q.getState(tt.sourceLayer||em,le));const ke=_t({},U[Be]);ke.paint=ib(ke.paint,tt.paint,oe,Se,B),ke.layout=ib(ke.layout,tt.layout,oe,Se,B);const it=!K||K(oe,tt,Se);if(!it)continue;const ht=new Ex(oe,this.z,this.x,this.y,le);ht.layer=ke;let Mt=t[Be];Mt===void 0&&(Mt=t[Be]=[]),Mt.push({featureIndex:p,feature:ht,intersectionZ:it})}}lookupSymbolFeatures(t,s,A,p,v,_,B,F){const U={};this.loadVTLayers();const Q=fc(v.filterSpec,v.globalState);for(const K of t)this.loadMatchingFeature(U,A,p,K,Q,_,B,F,s);return U}hasLayer(t){for(const s of this.bucketLayerIDs)for(const A of s)if(t===A)return!0;return!1}getId(t,s){var A;let p=t.id;return this.promoteId&&(p=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&(!((A=t.properties)===null||A===void 0)&&A.cluster)&&this.promoteId&&(p=Number(t.properties.cluster_id))),p}}function ib(l,t,s,A,p){return Pt(l,((v,_)=>{const B=t instanceof Yn?t.get(_):null;return B&&B.evaluate?B.evaluate(s,A,p):B}))}function pT(l,t){return t-l}function sb(l,t,s,A,p){const v=[];for(let _=0;_<l.length;_++){const B=l[_];let F;for(let U=0;U<B.length-1;U++){let Q=B[U],K=B[U+1];Q.x<t&&K.x<t||(Q.x<t?Q=new w(t,Q.y+(t-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round():K.x<t&&(K=new w(t,Q.y+(t-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round()),Q.y<s&&K.y<s||(Q.y<s?Q=new w(Q.x+(s-Q.y)/(K.y-Q.y)*(K.x-Q.x),s)._round():K.y<s&&(K=new w(Q.x+(s-Q.y)/(K.y-Q.y)*(K.x-Q.x),s)._round()),Q.x>=A&&K.x>=A||(Q.x>=A?Q=new w(A,Q.y+(A-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round():K.x>=A&&(K=new w(A,Q.y+(A-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round()),Q.y>=p&&K.y>=p||(Q.y>=p?Q=new w(Q.x+(p-Q.y)/(K.y-Q.y)*(K.x-Q.x),p)._round():K.y>=p&&(K=new w(Q.x+(p-Q.y)/(K.y-Q.y)*(K.x-Q.x),p)._round()),F&&Q.equals(F[F.length-1])||(F=[Q],v.push(F)),F.push(K)))))}}return v}function ob(l,t,s,A,p){switch(t){case 1:return(function(v,_,B,F){const U=[];for(const Q of v)for(const K of Q){const X=F===0?K.x:K.y;X>=_&&X<=B&&U.push([K])}return U})(l,s,A,p);case 2:return ab(l,s,A,p,!1);case 3:return ab(l,s,A,p,!0)}return[]}function mT(l,t,s,A,p){const v=A===0?gT:yT;let _=[];const B=[];for(let Q=0;Q<l.length-1;Q++){const K=l[Q],X=l[Q+1],J=A===0?K.x:K.y,oe=A===0?X.x:X.y;let le=!1;J<t?oe>t&&_.push(v(K,X,t)):J>s?oe<s&&_.push(v(K,X,s)):_.push(K),oe<t&&J>=t&&(_.push(v(K,X,t)),le=!0),oe>s&&J<=s&&(_.push(v(K,X,s)),le=!0),!p&&le&&(B.push(_),_=[])}const F=l.length-1,U=A===0?l[F].x:l[F].y;return U>=t&&U<=s&&_.push(l[F]),p&&_.length>0&&!_[0].equals(_[_.length-1])&&_.push(new w(_[0].x,_[0].y)),_.length>0&&B.push(_),B}function ab(l,t,s,A,p){const v=[];for(const _ of l){const B=mT(_,t,s,A,p);B.length>0&&v.push(...B)}return v}function gT(l,t,s){return new w(s,l.y+(s-l.x)/(t.x-l.x)*(t.y-l.y))}function yT(l,t,s){return new w(l.x+(s-l.y)/(t.y-l.y)*(t.x-l.x),s)}We("FeatureIndex",nb,{omit:["rawTileData","sourceLayerCoder"]});class ef extends w{constructor(t,s,A,p){super(t,s),this.angle=A,p!==void 0&&(this.segment=p)}clone(){return new ef(this.x,this.y,this.angle,this.segment)}}function lb(l,t,s,A,p){if(t.segment===void 0||s===0)return!0;let v=t,_=t.segment+1,B=0;for(;B>-s/2;){if(_--,_<0)return!1;B-=l[_].dist(v),v=l[_]}B+=l[_].dist(l[_+1]),_++;const F=[];let U=0;for(;B<s/2;){const Q=l[_],K=l[_+1];if(!K)return!1;let X=l[_-1].angleTo(Q)-Q.angleTo(K);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:B,angleDelta:X}),U+=X;B-F[0].distance>A;)U-=F.shift().angleDelta;if(U>p)return!1;_++,B+=Q.dist(K)}return!0}function cb(l){let t=0;for(let s=0;s<l.length-1;s++)t+=l[s].dist(l[s+1]);return t}function Ab(l,t,s){return l?.6*t*s:0}function ub(l,t){return Math.max(l?l.right-l.left:0,t?t.right-t.left:0)}function vT(l,t,s,A,p,v){const _=Ab(s,p,v),B=ub(s,A)*v;let F=0;const U=cb(l)/2;for(let Q=0;Q<l.length-1;Q++){const K=l[Q],X=l[Q+1],J=K.dist(X);if(F+J>U){const oe=(U-F)/J,le=br.number(K.x,X.x,oe),he=br.number(K.y,X.y,oe),Be=new ef(le,he,X.angleTo(K),Q);return Be._round(),!_||lb(l,Be,B,_,t)?Be:void 0}F+=J}}function _T(l,t,s,A,p,v,_,B,F){const U=Ab(A,v,_),Q=ub(A,p),K=Q*_,X=l[0].x===0||l[0].x===F||l[0].y===0||l[0].y===F;return t-K<t/4&&(t=K+t/4),hb(l,X?t/2*B%t:(Q/2+2*v)*_*B%t,t,U,s,K,X,!1,F)}function hb(l,t,s,A,p,v,_,B,F){const U=v/2,Q=cb(l);let K=0,X=t-s,J=[];for(let oe=0;oe<l.length-1;oe++){const le=l[oe],he=l[oe+1],Be=le.dist(he),tt=he.angleTo(le);for(;X+s<K+Be;){X+=s;const Se=(X-K)/Be,ke=br.number(le.x,he.x,Se),it=br.number(le.y,he.y,Se);if(ke>=0&&ke<F&&it>=0&&it<F&&X-U>=0&&X+U<=Q){const ht=new ef(ke,it,tt,oe);ht._round(),A&&!lb(l,ht,v,A,p)||J.push(ht)}}K+=Be}return B||J.length||_||(J=hb(l,K/2,s,A,p,v,_,!0,F)),J}function fb(l,t,s,A){const p=[],v=l.image,_=v.pixelRatio,B=v.paddedRect.w-2,F=v.paddedRect.h-2;let U={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const Q=v.stretchX||[[0,B]],K=v.stretchY||[[0,F]],X=(Ot,Lr)=>Ot+Lr[1]-Lr[0],J=Q.reduce(X,0),oe=K.reduce(X,0),le=B-J,he=F-oe;let Be=0,tt=J,Se=0,ke=oe,it=0,ht=le,Mt=0,Xt=he;if(v.content&&A){const Ot=v.content,Lr=Ot[2]-Ot[0],Ir=Ot[3]-Ot[1];(v.textFitWidth||v.textFitHeight)&&(U=Po(l)),Be=Mg(Q,0,Ot[0]),Se=Mg(K,0,Ot[1]),tt=Mg(Q,Ot[0],Ot[2]),ke=Mg(K,Ot[1],Ot[3]),it=Ot[0]-Be,Mt=Ot[1]-Se,ht=Lr-tt,Xt=Ir-ke}const Vt=U.x1,ir=U.y1,_r=U.x2-Vt,or=U.y2-ir,$t=(Ot,Lr,Ir,kr)=>{const Er=kg(Ot.stretch-Be,tt,_r,Vt),Jr=Ug(Ot.fixed-it,ht,Ot.stretch,J),ri=kg(Lr.stretch-Se,ke,or,ir),Gn=Ug(Lr.fixed-Mt,Xt,Lr.stretch,oe),ps=kg(Ir.stretch-Be,tt,_r,Vt),Ja=Ug(Ir.fixed-it,ht,Ir.stretch,J),wo=kg(kr.stretch-Se,ke,or,ir),ms=Ug(kr.fixed-Mt,Xt,kr.stretch,oe),As=new w(Er,ri),Bi=new w(ps,ri),js=new w(ps,wo),io=new w(Er,wo),ts=new w(Jr/_,Gn/_),wc=new w(Ja/_,ms/_),el=t*Math.PI/180;if(el){const ia=Math.sin(el),Ls=Math.cos(el),xo=[Ls,-ia,ia,Ls];As._matMult(xo),Bi._matMult(xo),io._matMult(xo),js._matMult(xo)}const xc=Ot.stretch+Ot.fixed,YA=Lr.stretch+Lr.fixed;return{tl:As,tr:Bi,bl:io,br:js,tex:{x:v.paddedRect.x+1+xc,y:v.paddedRect.y+1+YA,w:Ir.stretch+Ir.fixed-xc,h:kr.stretch+kr.fixed-YA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ts,pixelOffsetBR:wc,minFontScaleX:ht/_/_r,minFontScaleY:Xt/_/or,isSDF:s}};if(A&&(v.stretchX||v.stretchY)){const Ot=db(Q,le,J),Lr=db(K,he,oe);for(let Ir=0;Ir<Ot.length-1;Ir++){const kr=Ot[Ir],Er=Ot[Ir+1];for(let Jr=0;Jr<Lr.length-1;Jr++)p.push($t(kr,Lr[Jr],Er,Lr[Jr+1]))}}else p.push($t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:F+1}));return p}function Mg(l,t,s){let A=0;for(const p of l)A+=Math.max(t,Math.min(s,p[1]))-Math.max(t,Math.min(s,p[0]));return A}function db(l,t,s){const A=[{fixed:-1,stretch:0}];for(const[p,v]of l){const _=A[A.length-1];A.push({fixed:p-_.stretch,stretch:_.stretch}),A.push({fixed:p-_.stretch,stretch:_.stretch+(v-p)})}return A.push({fixed:t+1,stretch:s}),A}function kg(l,t,s,A){return l/t*s+A}function Ug(l,t,s,A){return l-t*s/A}We("Anchor",ef);class Dg{constructor(t,s,A,p,v,_,B,F,U,Q){var K;if(this.boxStartIndex=t.length,U){let X=_.top,J=_.bottom;const oe=_.collisionPadding;oe&&(X-=oe[1],J+=oe[3]);let le=J-X;le>0&&(le=Math.max(10,le),this.circleDiameter=le)}else{const X=!((K=_.image)===null||K===void 0)&&K.content&&(_.image.textFitWidth||_.image.textFitHeight)?Po(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};X.y1=X.y1*B-F[0],X.y2=X.y2*B+F[2],X.x1=X.x1*B-F[3],X.x2=X.x2*B+F[1];const J=_.collisionPadding;if(J&&(X.x1-=J[0]*B,X.y1-=J[1]*B,X.x2+=J[2]*B,X.y2+=J[3]*B),Q){const oe=new w(X.x1,X.y1),le=new w(X.x2,X.y1),he=new w(X.x1,X.y2),Be=new w(X.x2,X.y2),tt=Q*Math.PI/180;oe._rotate(tt),le._rotate(tt),he._rotate(tt),Be._rotate(tt),X.x1=Math.min(oe.x,le.x,he.x,Be.x),X.x2=Math.max(oe.x,le.x,he.x,Be.x),X.y1=Math.min(oe.y,le.y,he.y,Be.y),X.y2=Math.max(oe.y,le.y,he.y,Be.y)}t.emplaceBack(s.x,s.y,X.x1,X.y1,X.x2,X.y2,A,p,v)}this.boxEndIndex=t.length}}class wT{constructor(t=[],s=(A,p)=>A<p?-1:A>p?1:0){if(this.data=t,this.length=this.data.length,this.compare=s,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:s,compare:A}=this,p=s[t];for(;t>0;){const v=t-1>>1,_=s[v];if(A(p,_)>=0)break;s[t]=_,t=v}s[t]=p}_down(t){const{data:s,compare:A}=this,p=this.length>>1,v=s[t];for(;t<p;){let _=1+(t<<1);const B=_+1;if(B<this.length&&A(s[B],s[_])<0&&(_=B),A(s[_],v)>=0)break;s[t]=s[_],t=_}s[t]=v}}function xT(l,t=1,s=!1){const A=Gf.fromPoints(l[0]),p=Math.min(A.width(),A.height());let v=p/2;const _=new wT([],bT),{minX:B,minY:F,maxX:U,maxY:Q}=A;if(p===0)return new w(B,F);for(let J=B;J<U;J+=p)for(let oe=F;oe<Q;oe+=p)_.push(new Ud(J+v,oe+v,v,l));let K=(function(J){let oe=0,le=0,he=0;const Be=J[0];for(let tt=0,Se=Be.length,ke=Se-1;tt<Se;ke=tt++){const it=Be[tt],ht=Be[ke],Mt=it.x*ht.y-ht.x*it.y;le+=(it.x+ht.x)*Mt,he+=(it.y+ht.y)*Mt,oe+=3*Mt}return new Ud(le/oe,he/oe,0,J)})(l),X=_.length;for(;_.length;){const J=_.pop();(J.d>K.d||!K.d)&&(K=J,s&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,X)),J.max-K.d<=t||(v=J.h/2,_.push(new Ud(J.p.x-v,J.p.y-v,v,l)),_.push(new Ud(J.p.x+v,J.p.y-v,v,l)),_.push(new Ud(J.p.x-v,J.p.y+v,v,l)),_.push(new Ud(J.p.x+v,J.p.y+v,v,l)),X+=4)}return s&&(console.log(`num probes: ${X}`),console.log(`best distance: ${K.d}`)),K.p}function bT(l,t){return t.max-l.max}function Ud(l,t,s,A){this.p=new w(l,t),this.h=s,this.d=(function(p,v){let _=!1,B=1/0;for(let F=0;F<v.length;F++){const U=v[F];for(let Q=0,K=U.length,X=K-1;Q<K;X=Q++){const J=U[Q],oe=U[X];J.y>p.y!=oe.y>p.y&&p.x<(oe.x-J.x)*(p.y-J.y)/(oe.y-J.y)+J.x&&(_=!_),B=Math.min(B,Pf(p,J,oe))}}return(_?1:-1)*Math.sqrt(B)})(this.p,A),this.max=this.d+this.h*Math.SQRT2}var Ya;m.aQ=void 0,(Ya=m.aQ||(m.aQ={}))[Ya.center=1]="center",Ya[Ya.left=2]="left",Ya[Ya.right=3]="right",Ya[Ya.top=4]="top",Ya[Ya.bottom=5]="bottom",Ya[Ya["top-left"]=6]="top-left",Ya[Ya["top-right"]=7]="top-right",Ya[Ya["bottom-left"]=8]="bottom-left",Ya[Ya["bottom-right"]=9]="bottom-right";const Tv=Number.POSITIVE_INFINITY;function pb(l,t){return t[1]!==Tv?(function(s,A,p){let v=0,_=0;switch(A=Math.abs(A),p=Math.abs(p),s){case"top-right":case"top-left":case"top":_=p-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-p}switch(s){case"top-right":case"bottom-right":case"right":v=-A;break;case"top-left":case"bottom-left":case"left":v=A}return[v,_]})(l,t[0],t[1]):(function(s,A){let p=0,v=0;A<0&&(A=0);const _=A/Math.SQRT2;switch(s){case"top-right":case"top-left":v=_-7;break;case"bottom-right":case"bottom-left":v=7-_;break;case"bottom":v=7-A;break;case"top":v=A-7}switch(s){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=A;break;case"right":p=-A}return[p,v]})(l,t[0])}function mb(l,t,s){var A;const p=l.layout,v=(A=p.get("text-variable-anchor-offset"))===null||A===void 0?void 0:A.evaluate(t,{},s);if(v){const B=v.values,F=[];for(let U=0;U<B.length;U+=2){const Q=F[U]=B[U],K=B[U+1].map((X=>X*Hs));Q.startsWith("top")?K[1]-=7:Q.startsWith("bottom")&&(K[1]+=7),F[U+1]=K}return new Wi(F)}const _=p.get("text-variable-anchor");if(_){let B;B=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(t,{},s)*Hs,Tv]:p.get("text-offset").evaluate(t,{},s).map((U=>U*Hs));const F=[];for(const U of _)F.push(U,pb(U,B));return new Wi(F)}return null}function Pv(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function BT(l,t,s,A,p,v,_,B,F,U,Q,K){let X=v.textMaxSize.evaluate(t,{});X===void 0&&(X=_);const J=l.layers[0].layout,oe=J.get("icon-offset").evaluate(t,{},Q),le=yb(s.horizontal),he=_/24,Be=l.tilePixelRatio*he,tt=l.tilePixelRatio*X/24,Se=l.tilePixelRatio*B,ke=l.tilePixelRatio*J.get("symbol-spacing"),it=J.get("text-padding")*l.tilePixelRatio,ht=(function(Ir,kr,Er,Jr=1){const ri=Ir.get("icon-padding").evaluate(kr,{},Er),Gn=ri&&ri.values;return[Gn[0]*Jr,Gn[1]*Jr,Gn[2]*Jr,Gn[3]*Jr]})(J,t,Q,l.tilePixelRatio),Mt=J.get("text-max-angle")/180*Math.PI,Xt=J.get("text-rotation-alignment")!=="viewport"&&J.get("symbol-placement")!=="point",Vt=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",ir=J.get("symbol-placement"),_r=ke/2,or=J.get("icon-text-fit");let $t;A&&or!=="none"&&(l.allowVerticalPlacement&&s.vertical&&($t=vi(A,s.vertical,or,J.get("icon-text-fit-padding"),oe,he)),le&&(A=vi(A,le,or,J.get("icon-text-fit-padding"),oe,he)));const Ot=Q?K.line.getGranularityForZoomLevel(Q.z):1,Lr=(Ir,kr)=>{kr.x<0||kr.x>=Te||kr.y<0||kr.y>=Te||(function(Er,Jr,ri,Gn,ps,Ja,wo,ms,As,Bi,js,io,ts,wc,el,xc,YA,ia,Ls,xo,Vs,sa,Th,wu,nm){const tf=Er.addToLineVertexArray(Jr,ri);let Kf,Dd,Rd,Nd,xb=0,bb=0,Bb=0,Cb=0,Qv=-1,Ov=-1;const Ph={};let Eb=Ki("");if(Er.allowVerticalPlacement&&Gn.vertical){const wl=ms.layout.get("text-rotate").evaluate(Vs,{},wu)+90;Rd=new Dg(As,Jr,Bi,js,io,Gn.vertical,ts,wc,el,wl),wo&&(Nd=new Dg(As,Jr,Bi,js,io,wo,YA,ia,el,wl))}if(ps){const wl=ms.layout.get("icon-rotate").evaluate(Vs,{}),xA=ms.layout.get("icon-text-fit")!=="none",qf=fb(ps,wl,Th,xA),bu=wo?fb(wo,wl,Th,xA):void 0;Dd=new Dg(As,Jr,Bi,js,io,ps,YA,ia,!1,wl),xb=4*qf.length;const $f=Er.iconSizeData;let Wu=null;$f.kind==="source"?(Wu=[Za*ms.layout.get("icon-size").evaluate(Vs,{})],Wu[0]>$u&&Cr(`${Er.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):$f.kind==="composite"&&(Wu=[Za*sa.compositeIconSizes[0].evaluate(Vs,{},wu),Za*sa.compositeIconSizes[1].evaluate(Vs,{},wu)],(Wu[0]>$u||Wu[1]>$u)&&Cr(`${Er.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Er.addSymbols(Er.icon,qf,Wu,xo,Ls,Vs,m.aA.none,Jr,tf.lineStartIndex,tf.lineLength,-1,wu),Qv=Er.icon.placedSymbolArray.length-1,bu&&(bb=4*bu.length,Er.addSymbols(Er.icon,bu,Wu,xo,Ls,Vs,m.aA.vertical,Jr,tf.lineStartIndex,tf.lineLength,-1,wu),Ov=Er.icon.placedSymbolArray.length-1)}const Sb=Object.keys(Gn.horizontal);for(const wl of Sb){const xA=Gn.horizontal[wl];if(!Kf){Eb=Ki(xA.text);const bu=ms.layout.get("text-rotate").evaluate(Vs,{},wu);Kf=new Dg(As,Jr,Bi,js,io,xA,ts,wc,el,bu)}const qf=xA.positionedLines.length===1;if(Bb+=gb(Er,Jr,xA,Ja,ms,el,Vs,xc,tf,Gn.vertical?m.aA.horizontal:m.aA.horizontalOnly,qf?Sb:[wl],Ph,Qv,sa,wu),qf)break}Gn.vertical&&(Cb+=gb(Er,Jr,Gn.vertical,Ja,ms,el,Vs,xc,tf,m.aA.vertical,["vertical"],Ph,Ov,sa,wu));const ST=Kf?Kf.boxStartIndex:Er.collisionBoxArray.length,FT=Kf?Kf.boxEndIndex:Er.collisionBoxArray.length,IT=Rd?Rd.boxStartIndex:Er.collisionBoxArray.length,TT=Rd?Rd.boxEndIndex:Er.collisionBoxArray.length,PT=Dd?Dd.boxStartIndex:Er.collisionBoxArray.length,LT=Dd?Dd.boxEndIndex:Er.collisionBoxArray.length,MT=Nd?Nd.boxStartIndex:Er.collisionBoxArray.length,kT=Nd?Nd.boxEndIndex:Er.collisionBoxArray.length;let xu=-1;const Ng=(wl,xA)=>wl&&wl.circleDiameter?Math.max(wl.circleDiameter,xA):xA;xu=Ng(Kf,xu),xu=Ng(Rd,xu),xu=Ng(Dd,xu),xu=Ng(Nd,xu);const Fb=xu>-1?1:0;Fb&&(xu*=nm/Hs),Er.glyphOffsetArray.length>=Id.MAX_GLYPHS&&Cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vs.sortKey!==void 0&&Er.addToSortKeyRanges(Er.symbolInstances.length,Vs.sortKey);const UT=mb(ms,Vs,wu),[DT,RT]=(function(wl,xA){const qf=wl.length,bu=xA?.values;if(bu?.length>0)for(let $f=0;$f<bu.length;$f+=2){const Wu=bu[$f+1];wl.emplaceBack(m.aQ[bu[$f]],Wu[0],Wu[1])}return[qf,wl.length]})(Er.textAnchorOffsets,UT);Er.symbolInstances.emplaceBack(Jr.x,Jr.y,Ph.right>=0?Ph.right:-1,Ph.center>=0?Ph.center:-1,Ph.left>=0?Ph.left:-1,Ph.vertical||-1,Qv,Ov,Eb,ST,FT,IT,TT,PT,LT,MT,kT,Bi,Bb,Cb,xb,bb,Fb,0,ts,xu,DT,RT)})(l,kr,Ir,s,A,p,$t,l.layers[0],l.collisionBoxArray,t.index,t.sourceLayerIndex,l.index,Be,[it,it,it,it],Xt,F,Se,ht,Vt,oe,t,v,U,Q,_)};if(ir==="line")for(const Ir of sb(t.geometry,0,0,Te,Te)){const kr=XA(Ir,Ot),Er=_T(kr,ke,Mt,s.vertical||le,A,24,tt,l.overscaling,Te);for(const Jr of Er)le&&CT(l,le.text,_r,Jr)||Lr(kr,Jr)}else if(ir==="line-center"){for(const Ir of t.geometry)if(Ir.length>1){const kr=XA(Ir,Ot),Er=vT(kr,Mt,s.vertical||le,A,24,tt);Er&&Lr(kr,Er)}}else if(t.type==="Polygon")for(const Ir of Ma(t.geometry,0)){const kr=xT(Ir,16);Lr(XA(Ir[0],Ot,!0),new ef(kr.x,kr.y,0))}else if(t.type==="LineString")for(const Ir of t.geometry){const kr=XA(Ir,Ot);Lr(kr,new ef(kr[0].x,kr[0].y,0))}else if(t.type==="Point")for(const Ir of t.geometry)for(const kr of Ir)Lr([kr],new ef(kr.x,kr.y,0))}function gb(l,t,s,A,p,v,_,B,F,U,Q,K,X,J,oe){const le=(function(tt,Se,ke,it,ht,Mt,Xt,Vt){const ir=it.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,_r=[];for(const or of Se.positionedLines)for(const $t of or.positionedGlyphs){if(!$t.rect)continue;const Ot=$t.rect||{};let Lr=4,Ir=!0,kr=1,Er=0;const Jr=(ht||Vt)&&$t.vertical,ri=$t.metrics.advance*$t.scale/2;if(Vt&&Se.verticalizable&&(Er=or.lineOffset/2-($t.imageName?-(Hs-$t.metrics.width*$t.scale)/2:($t.scale-1)*Hs)),$t.imageName){const ia=Xt[$t.imageName];Ir=ia.sdf,kr=ia.pixelRatio,Lr=1/kr}const Gn=ht?[$t.x+ri,$t.y]:[0,0];let ps=ht?[0,0]:[$t.x+ri+ke[0],$t.y+ke[1]-Er],Ja=[0,0];Jr&&(Ja=ps,ps=[0,0]);const wo=$t.metrics.isDoubleResolution?2:1,ms=($t.metrics.left-Lr)*$t.scale-ri+ps[0],As=(-$t.metrics.top-Lr)*$t.scale+ps[1],Bi=ms+Ot.w/wo*$t.scale/kr,js=As+Ot.h/wo*$t.scale/kr,io=new w(ms,As),ts=new w(Bi,As),wc=new w(ms,js),el=new w(Bi,js);if(Jr){const ia=new w(-ri,ri- -17),Ls=-Math.PI/2,xo=12-ri,Vs=new w(22-xo,-($t.imageName?xo:0)),sa=new w(...Ja);io._rotateAround(Ls,ia)._add(Vs)._add(sa),ts._rotateAround(Ls,ia)._add(Vs)._add(sa),wc._rotateAround(Ls,ia)._add(Vs)._add(sa),el._rotateAround(Ls,ia)._add(Vs)._add(sa)}if(ir){const ia=Math.sin(ir),Ls=Math.cos(ir),xo=[Ls,-ia,ia,Ls];io._matMult(xo),ts._matMult(xo),wc._matMult(xo),el._matMult(xo)}const xc=new w(0,0),YA=new w(0,0);_r.push({tl:io,tr:ts,bl:wc,br:el,tex:Ot,writingMode:Se.writingMode,glyphOffset:Gn,sectionIndex:$t.sectionIndex,isSDF:Ir,pixelOffsetTL:xc,pixelOffsetBR:YA,minFontScaleX:0,minFontScaleY:0})}return _r})(0,s,B,p,v,_,A,l.allowVerticalPlacement),he=l.textSizeData;let Be=null;he.kind==="source"?(Be=[Za*p.layout.get("text-size").evaluate(_,{})],Be[0]>$u&&Cr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):he.kind==="composite"&&(Be=[Za*J.compositeTextSizes[0].evaluate(_,{},oe),Za*J.compositeTextSizes[1].evaluate(_,{},oe)],(Be[0]>$u||Be[1]>$u)&&Cr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,le,Be,B,v,_,U,t,F.lineStartIndex,F.lineLength,X,oe);for(const tt of Q)K[tt]=l.text.placedSymbolArray.length-1;return 4*le.length}function yb(l){for(const t in l)return l[t];return null}function CT(l,t,s,A){const p=l.compareText;if(t in p){const v=p[t];for(let _=v.length-1;_>=0;_--)if(A.dist(v[_])<s)return!0}else p[t]=[];return p[t].push(A),!1}const vb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Lv{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,A]=new Uint8Array(t,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=A>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=vb[15&A];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(t,2,1),[B]=new Uint32Array(t,4,1);return new Lv(B,_,v,t)}constructor(t,s=64,A=Float64Array,p){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=A,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const v=vb.indexOf(this.ArrayType),_=2*t*this.ArrayType.BYTES_PER_ELEMENT,B=t*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-B%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${A}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+_+B+F),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=t)}add(t,s){const A=this._pos>>1;return this.ids[A]=A,this.coords[this._pos++]=t,this.coords[this._pos++]=s,A}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Mv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,s,A,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:B}=this,F=[0,v.length-1,0],U=[];for(;F.length;){const Q=F.pop()||0,K=F.pop()||0,X=F.pop()||0;if(K-X<=B){for(let he=X;he<=K;he++){const Be=_[2*he],tt=_[2*he+1];Be>=t&&Be<=A&&tt>=s&&tt<=p&&U.push(v[he])}continue}const J=X+K>>1,oe=_[2*J],le=_[2*J+1];oe>=t&&oe<=A&&le>=s&&le<=p&&U.push(v[J]),(Q===0?t<=oe:s<=le)&&(F.push(X),F.push(J-1),F.push(1-Q)),(Q===0?A>=oe:p>=le)&&(F.push(J+1),F.push(K),F.push(1-Q))}return U}within(t,s,A){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:_}=this,B=[0,p.length-1,0],F=[],U=A*A;for(;B.length;){const Q=B.pop()||0,K=B.pop()||0,X=B.pop()||0;if(K-X<=_){for(let he=X;he<=K;he++)wb(v[2*he],v[2*he+1],t,s)<=U&&F.push(p[he]);continue}const J=X+K>>1,oe=v[2*J],le=v[2*J+1];wb(oe,le,t,s)<=U&&F.push(p[J]),(Q===0?t-A<=oe:s-A<=le)&&(B.push(X),B.push(J-1),B.push(1-Q)),(Q===0?t+A>=oe:s+A>=le)&&(B.push(J+1),B.push(K),B.push(1-Q))}return F}}function Mv(l,t,s,A,p,v){if(p-A<=s)return;const _=A+p>>1;_b(l,t,_,A,p,v),Mv(l,t,s,A,_-1,1-v),Mv(l,t,s,_+1,p,1-v)}function _b(l,t,s,A,p,v){for(;p>A;){if(p-A>600){const U=p-A+1,Q=s-A+1,K=Math.log(U),X=.5*Math.exp(2*K/3),J=.5*Math.sqrt(K*X*(U-X)/U)*(Q-U/2<0?-1:1);_b(l,t,s,Math.max(A,Math.floor(s-Q*X/U+J)),Math.min(p,Math.floor(s+(U-Q)*X/U+J)),v)}const _=t[2*s+v];let B=A,F=p;for(tm(l,t,A,s),t[2*p+v]>_&&tm(l,t,A,p);B<F;){for(tm(l,t,B,F),B++,F--;t[2*B+v]<_;)B++;for(;t[2*F+v]>_;)F--}t[2*A+v]===_?tm(l,t,A,F):(F++,tm(l,t,F,p)),F<=s&&(A=F+1),s<=F&&(p=F-1)}}function tm(l,t,s,A){kv(l,s,A),kv(t,2*s,2*A),kv(t,2*s+1,2*A+1)}function kv(l,t,s){const A=l[t];l[t]=l[s],l[s]=A}function wb(l,t,s,A){const p=l-s,v=t-A;return p*p+v*v}var Uv;m.cI=void 0,(Uv=m.cI||(m.cI={})).create="create",Uv.load="load",Uv.fullLoad="fullLoad";let Rg=null,rm=[];const Dv=1e3/60,Rv="loadTime",Nv="fullLoadTime",ET={mark(l){performance.mark(l)},frame(l){const t=l;Rg!=null&&rm.push(t-Rg),Rg=t},clearMetrics(){Rg=null,rm=[],performance.clearMeasures(Rv),performance.clearMeasures(Nv);for(const l in m.cI)performance.clearMarks(m.cI[l])},getPerformanceMetrics(){performance.measure(Rv,m.cI.create,m.cI.load),performance.measure(Nv,m.cI.create,m.cI.fullLoad);const l=performance.getEntriesByName(Rv)[0].duration,t=performance.getEntriesByName(Nv)[0].duration,s=rm.length,A=1/(rm.reduce(((v,_)=>v+_),0)/s/1e3),p=rm.filter((v=>v>Dv)).reduce(((v,_)=>v+(_-Dv)/Dv),0);return{loadTime:l,fullLoadTime:t,fps:A,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};m.$=z,m.A=ae,m.B=Pe,m.C=$,m.D=gr,m.E=Tr,m.F=function([l,t,s]){return t+=90,t*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(t)*Math.sin(s),y:l*Math.sin(t)*Math.sin(s),z:l*Math.cos(s)}},m.G=br,m.H=Mr,m.I=Qr,m.J=ge,m.K=function(l){if(Ur==null){const t=l.navigator?l.navigator.userAgent:null;Ur=!!l.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ur},m.L=class{constructor(l,t){this.target=l,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new zI((()=>this.process())),this.subscription=Rr(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=vr(self)?l:window}registerMessageHandler(l,t){this.messageHandlers[l]=t}unregisterMessageHandler(l){delete this.messageHandlers[l]}sendAsync(l,t){return new Promise(((s,A)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=t?Rr(t.signal,"abort",(()=>{v?.unsubscribe(),delete this.resolveRejects[p];const F={id:p,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)}),HI):null;this.resolveRejects[p]={resolve:F=>{v?.unsubscribe(),s(F)},reject:F=>{v?.unsubscribe(),A(F)}};const _=[],B=Object.assign(Object.assign({},l),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Tt(l.data,_)});this.target.postMessage(B,{transfer:_})}))}receive(l){const t=l.data,s=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[s];const A=this.abortControllers[s];return delete this.abortControllers[s],void(A&&A.abort())}if(vr(self)||t.mustQueue)return this.tasks[s]=t,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,t)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),t=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(l,t)}processTask(l,t){return o(this,void 0,void 0,(function*(){if(t.type==="<response>"){const p=this.resolveRejects[l];return delete this.resolveRejects[l],p?void(t.error?p.reject(Zt(t.error)):p.resolve(Zt(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Zt(t.data),A=new AbortController;this.abortControllers[l]=A;try{const p=yield this.messageHandlers[t.type](t.sourceMapId,s,A);this.completeTask(l,null,p)}catch(p){this.completeTask(l,p)}}))}completeTask(l,t,s){const A=[];delete this.abortControllers[l];const p={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Tt(t):null,data:Tt(s,A)};this.target.postMessage(p,{transfer:A})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.M=vt,m.N=function(){var l=new ae(16);return ae!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},m.O=function(l,t,s){var A,p,v,_,B,F,U,Q,K,X,J,oe,le=s[0],he=s[1],Be=s[2];return t===l?(l[12]=t[0]*le+t[4]*he+t[8]*Be+t[12],l[13]=t[1]*le+t[5]*he+t[9]*Be+t[13],l[14]=t[2]*le+t[6]*he+t[10]*Be+t[14],l[15]=t[3]*le+t[7]*he+t[11]*Be+t[15]):(p=t[1],v=t[2],_=t[3],B=t[4],F=t[5],U=t[6],Q=t[7],K=t[8],X=t[9],J=t[10],oe=t[11],l[0]=A=t[0],l[1]=p,l[2]=v,l[3]=_,l[4]=B,l[5]=F,l[6]=U,l[7]=Q,l[8]=K,l[9]=X,l[10]=J,l[11]=oe,l[12]=A*le+B*he+K*Be+t[12],l[13]=p*le+F*he+X*Be+t[13],l[14]=v*le+U*he+J*Be+t[14],l[15]=_*le+Q*he+oe*Be+t[15]),l},m.P=w,m.Q=function(l,t,s){var A=s[0],p=s[1],v=s[2];return l[0]=t[0]*A,l[1]=t[1]*A,l[2]=t[2]*A,l[3]=t[3]*A,l[4]=t[4]*p,l[5]=t[5]*p,l[6]=t[6]*p,l[7]=t[7]*p,l[8]=t[8]*v,l[9]=t[9]*v,l[10]=t[10]*v,l[11]=t[11]*v,l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15],l},m.R=Jo,m.S=function(l,t,s){var A=t[0],p=t[1],v=t[2],_=t[3],B=t[4],F=t[5],U=t[6],Q=t[7],K=t[8],X=t[9],J=t[10],oe=t[11],le=t[12],he=t[13],Be=t[14],tt=t[15],Se=s[0],ke=s[1],it=s[2],ht=s[3];return l[0]=Se*A+ke*B+it*K+ht*le,l[1]=Se*p+ke*F+it*X+ht*he,l[2]=Se*v+ke*U+it*J+ht*Be,l[3]=Se*_+ke*Q+it*oe+ht*tt,l[4]=(Se=s[4])*A+(ke=s[5])*B+(it=s[6])*K+(ht=s[7])*le,l[5]=Se*p+ke*F+it*X+ht*he,l[6]=Se*v+ke*U+it*J+ht*Be,l[7]=Se*_+ke*Q+it*oe+ht*tt,l[8]=(Se=s[8])*A+(ke=s[9])*B+(it=s[10])*K+(ht=s[11])*le,l[9]=Se*p+ke*F+it*X+ht*he,l[10]=Se*v+ke*U+it*J+ht*Be,l[11]=Se*_+ke*Q+it*oe+ht*tt,l[12]=(Se=s[12])*A+(ke=s[13])*B+(it=s[14])*K+(ht=s[15])*le,l[13]=Se*p+ke*F+it*X+ht*he,l[14]=Se*v+ke*U+it*J+ht*Be,l[15]=Se*_+ke*Q+it*oe+ht*tt,l},m.T=$A,m.U=function(l,t){const s={};for(let A=0;A<t.length;A++){const p=t[A];p in l&&(s[p]=l[p])}return s},m.V=Yh,m.W=et,m.X=yx,m.Y=gx,m.Z=$e,m._=o,m.a=ve,m.a$=wx,m.a0=Z,m.a1=Wr,m.a2=_A,m.a3=_x,m.a4=Cg,m.a5=Te,m.a6=function(l,t,s){if(!l)return t||{};if(!t)return l||{};const A=Bx(l),p=Bx(t);(function(_,B){B.removeAll&&(_.add.clear(),_.update.clear(),_.remove.clear(),B.remove.clear());for(const F of B.remove)_.add.delete(F),_.update.delete(F);for(const[F,U]of B.update){const Q=_.update.get(F);Q&&(B.update.set(F,jI(Q,U)),_.update.delete(F))}})(A,p);const v={};if((A.removeAll||p.removeAll)&&(v.removeAll=!0),v.remove=new Set([...A.remove,...p.remove]),v.add=new Map([...A.add,...p.add]),v.update=new Map([...A.update,...p.update]),v.remove.size&&v.add.size)for(const _ of v.add.keys())v.remove.delete(_);return(function(_){const B={};return _.removeAll&&(B.removeAll=_.removeAll),_.remove&&(B.remove=Array.from(_.remove)),_.add&&(B.add=Array.from(_.add.values())),_.update&&(B.update=Array.from(_.update.values())),B})(v)},m.a7=function(l,t){if(l==null||l.type==null)return!0;if(l.type==="Feature")return Xp(l,t)!=null;if(l.type==="FeatureCollection"){const s=new Set;for(const A of l.features){const p=Xp(A,t);if(p==null||s.has(p))return!1;s.add(p)}return!0}return!1},m.a8=function(l,t){const s=new Map;if(!(l==null||l.type==null))if(l.type==="Feature")s.set(Xp(l,t),l);else for(const A of l.features)s.set(Xp(A,t),A);return s},m.a9=function(l,t,s){var A,p;if(t.removeAll)l.clear();else if(t.remove)for(const v of t.remove)l.delete(v);if(t.add)for(const v of t.add){const _=Xp(v,s);_!=null&&l.set(_,v)}if(t.update)for(const v of t.update){let _=l.get(v.id);if(!_)continue;const B=!!v.newGeometry,F=v.removeAllProperties||((A=v.removeProperties)===null||A===void 0?void 0:A.length)>0||((p=v.addOrUpdateProperties)===null||p===void 0?void 0:p.length)>0;if((B||F)&&(_=Object.assign({},_),l.set(v.id,_),B&&(_.geometry=v.newGeometry),F)){if(_.properties=v.removeAllProperties?{}:Object.assign({},_.properties||{}),v.removeProperties)for(const U of v.removeProperties)delete _.properties[U];if(v.addOrUpdateProperties)for(const{key:U,value:Q}of v.addOrUpdateProperties)_.properties[U]=Q}}},m.aB=function(l,{uSize:t,uSizeT:s},{lowerSize:A,upperSize:p}){return l.kind==="source"?A/Za:l.kind==="composite"?br.number(A/Za,p/Za,s):t},m.aC=function(l,t){var s=t[0],A=t[1],p=t[2],v=t[3],_=t[4],B=t[5],F=t[6],U=t[7],Q=t[8],K=t[9],X=t[10],J=t[11],oe=t[12],le=t[13],he=t[14],Be=t[15],tt=s*B-A*_,Se=s*F-p*_,ke=s*U-v*_,it=A*F-p*B,ht=A*U-v*B,Mt=p*U-v*F,Xt=Q*le-K*oe,Vt=Q*he-X*oe,ir=Q*Be-J*oe,_r=K*he-X*le,or=K*Be-J*le,$t=X*Be-J*he,Ot=tt*$t-Se*or+ke*_r+it*ir-ht*Vt+Mt*Xt;return Ot?(l[0]=(B*$t-F*or+U*_r)*(Ot=1/Ot),l[1]=(p*or-A*$t-v*_r)*Ot,l[2]=(le*Mt-he*ht+Be*it)*Ot,l[3]=(X*ht-K*Mt-J*it)*Ot,l[4]=(F*ir-_*$t-U*Vt)*Ot,l[5]=(s*$t-p*ir+v*Vt)*Ot,l[6]=(he*ke-oe*Mt-Be*Se)*Ot,l[7]=(Q*Mt-X*ke+J*Se)*Ot,l[8]=(_*or-B*ir+U*Xt)*Ot,l[9]=(A*ir-s*or-v*Xt)*Ot,l[10]=(oe*ht-le*ke+Be*tt)*Ot,l[11]=(K*ke-Q*ht-J*tt)*Ot,l[12]=(B*Vt-_*_r-F*Xt)*Ot,l[13]=(s*_r-A*Vt+p*Xt)*Ot,l[14]=(le*Se-oe*it-he*tt)*Ot,l[15]=(Q*it-K*Se+X*tt)*Ot,l):null},m.aD=ot,m.aE=function(l){var t=l[0],s=l[1];return Math.sqrt(t*t+s*s)},m.aF=function(l){return l[0]=0,l[1]=0,l},m.aG=function(l,t,s){return l[0]=t[0]*s,l[1]=t[1]*s,l},m.aH=lv,m.aI=Ie,m.aJ=function(l,t,s,A){const p=t.y-l.y,v=t.x-l.x,_=A.y-s.y,B=A.x-s.x,F=_*v-B*p;if(F===0)return null;const U=(B*(l.y-s.y)-_*(l.x-s.x))/F;return new w(l.x+U*v,l.y+U*p)},m.aK=sb,m.aL=hh,m.aM=function(l){let t=1/0,s=1/0,A=-1/0,p=-1/0;for(const v of l)t=Math.min(t,v.x),s=Math.min(s,v.y),A=Math.max(A,v.x),p=Math.max(p,v.y);return[t,s,A,p]},m.aN=Hs,m.aO=yt,m.aP=function(l,t,s,A,p=!1){if(!s[0]&&!s[1])return[0,0];const v=p?A==="map"?-l.bearingInRadians:0:A==="viewport"?l.bearingInRadians:0;if(v){const _=Math.sin(v),B=Math.cos(v);s=[s[0]*B-s[1]*_,s[0]*_+s[1]*B]}return[p?s[0]:yt(t,s[0],l.zoom),p?s[1]:yt(t,s[1],l.zoom)]},m.aR=av,m.aS=Pv,m.aT=Nt,m.aU=Lv,m.aV=Vn,m.aW=_h,m.aX=ee,m.aY=nr,m.aZ=Dt,m.a_=hn,m.aa=em,m.ab=Zp,m.ac=Gf,m.ad=25,m.ae=fv,m.af=l=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((s=>{t.onloadstart=()=>{s(t)};for(const A of l){const p=window.document.createElement("source");Ft(A)||(t.crossOrigin="Anonymous"),p.src=A,t.appendChild(p)}}))},m.ag=Yt,m.ah=function(){return Et++},m.ai=r,m.aj=Id,m.ak=fc,m.al=qA,m.am=Ex,m.an=function(l){const t={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,A,p,v)=>{const _=p||v;return t[A]=!_||_.toLowerCase(),""})),t["max-age"]){const s=parseInt(t["max-age"],10);isNaN(s)?delete t["max-age"]:t["max-age"]=s}return t},m.ao=at,m.ap=85.051129,m.aq=On,m.ar=function(l){return Math.pow(2,l)},m.as=Fe,m.at=vx,m.au=function(l){return Math.log(l)/Math.LN2},m.av=function(l){var t=l[0],s=l[1];return t*t+s*s},m.aw=function(l){if(!l.length)return new Set;const t=Math.max(...l.map((F=>F.canonical.z)));let s=1/0,A=-1/0,p=1/0,v=-1/0;const _=[];for(const F of l){const{x:U,y:Q,z:K}=F.canonical,X=Math.pow(2,t-K),J=U*X,oe=Q*X;_.push({id:F,x:J,y:oe}),J<s&&(s=J),J>A&&(A=J),oe<p&&(p=oe),oe>v&&(v=oe)}const B=new Set;for(const F of _)F.x!==s&&F.x!==A&&F.y!==p&&F.y!==v||B.add(F.id);return B},m.ax=function(l,t){const s=Math.abs(2*l.wrap)-+(l.wrap<0),A=Math.abs(2*t.wrap)-+(t.wrap<0);return l.overscaledZ-t.overscaledZ||A-s||t.canonical.y-l.canonical.y||t.canonical.x-l.canonical.x},m.ay=class{constructor(l,t){this.max=l,this.onRemove=t,this.reset()}reset(){for(const l in this.data)for(const t of this.data[l])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(l,t,s){const A=l.wrapped().key;this.data[A]===void 0&&(this.data[A]=[]);const p={value:t,timeout:void 0};if(s!==void 0&&(p.timeout=setTimeout((()=>{this.remove(l,p)}),s)),this.data[A].push(p),this.order.push(A),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const t=this.data[l].shift();return t.timeout&&clearTimeout(t.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),t.value}getByKey(l){const t=this.data[l];return t?t[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,t){if(!this.has(l))return this;const s=l.wrapped().key,A=t===void 0?0:this.data[s].indexOf(t),p=this.data[s][A];return this.data[s].splice(A,1),p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.onRemove(p.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(l){const t=[];for(const s in this.data)for(const A of this.data[s])l(A.value)||t.push(A);for(const s of t)this.remove(s.value.tileID,s)}},m.az=function(l,t){let s=0,A=0;if(l.kind==="constant")A=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:_}=l,B=p?at(Gt.interpolationFactor(p,t,v,_),0,1):0;l.kind==="camera"?A=br.number(l.minSize,l.maxSize,B):s=B}return{uSizeT:s,uSize:A}},m.b=$r,m.b$=class extends yo{constructor(l,t){super(l,t),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},m.b0=rt,m.b1=be,m.b2=function(l){var t=new ae(3);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t},m.b3=function(l,t,s){return l[0]=t[0]-s[0],l[1]=t[1]-s[1],l[2]=t[2]-s[2],l},m.b4=function(l,t){var s=t[0],A=t[1],p=t[2],v=s*s+A*A+p*p;return v>0&&(v=1/Math.sqrt(v)),l[0]=t[0]*v,l[1]=t[1]*v,l[2]=t[2]*v,l},m.b5=ue,m.b6=function(l,t){return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]},m.b7=function(l,t,s){return l[0]=t[0]*s[0],l[1]=t[1]*s[1],l[2]=t[2]*s[2],l[3]=t[3]*s[3],l},m.b8=Ve,m.b9=function(l,t,s){const A=t[0]*s[0]+t[1]*s[1]+t[2]*s[2];return A===0?null:(-(l[0]*s[0]+l[1]*s[1]+l[2]*s[2])-s[3])/A},m.bA=function(){return new Float64Array(3)},m.bB=function(l,t,s,A){return l[0]=t[0]+s[0]*A,l[1]=t[1]+s[1]*A,l[2]=t[2]+s[2]*A,l},m.bC=lt,m.bD=function(l,t,s){var A=s[0],p=s[1],v=s[2],_=s[3],B=t[0],F=t[1],U=t[2],Q=p*U-v*F,K=v*B-A*U,X=A*F-p*B;return l[0]=B+_*(Q+=Q)+p*(X+=X)-v*(K+=K),l[1]=F+_*K+v*Q-A*X,l[2]=U+_*X+A*K-p*Q,l},m.bE=function(l,t,s){const A=(function(F){var U=F[3],Q=F[4],K=F[5],X=F[6],J=F[7],oe=F[8];return F[0]*(oe*Q-K*J)+F[1]*(-oe*U+K*X)+F[2]*(J*U-Q*X)})([l[0],l[1],l[2],t[0],t[1],t[2],s[0],s[1],s[2]]);if(A===0)return null;const p=ue([],[t[0],t[1],t[2]],[s[0],s[1],s[2]]),v=ue([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),_=ue([],[l[0],l[1],l[2]],[t[0],t[1],t[2]]),B=rt([],p,-l[3]);return be(B,B,rt([],v,-t[3])),be(B,B,rt([],_,-s[3])),rt(B,B,1/A),B},m.bF=hv,m.bG=function(){return new Float64Array(4)},m.bH=function(l,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[0]*Math.cos(A)-p[1]*Math.sin(A),v[1]=p[0]*Math.sin(A)+p[1]*Math.cos(A),v[2]=p[2],l[0]=v[0]+s[0],l[1]=v[1]+s[1],l[2]=v[2]+s[2],l},m.bI=function(l,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[0],v[1]=p[1]*Math.cos(A)-p[2]*Math.sin(A),v[2]=p[1]*Math.sin(A)+p[2]*Math.cos(A),l[0]=v[0]+s[0],l[1]=v[1]+s[1],l[2]=v[2]+s[2],l},m.bJ=function(l,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[2]*Math.sin(A)+p[0]*Math.cos(A),v[1]=p[1],v[2]=p[2]*Math.cos(A)-p[0]*Math.sin(A),l[0]=v[0]+s[0],l[1]=v[1]+s[1],l[2]=v[2]+s[2],l},m.bK=function(l,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[0],_=t[1],B=t[2],F=t[3],U=t[8],Q=t[9],K=t[10],X=t[11];return t!==l&&(l[4]=t[4],l[5]=t[5],l[6]=t[6],l[7]=t[7],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[0]=v*p-U*A,l[1]=_*p-Q*A,l[2]=B*p-K*A,l[3]=F*p-X*A,l[8]=v*A+U*p,l[9]=_*A+Q*p,l[10]=B*A+K*p,l[11]=F*A+X*p,l},m.bL=function(l,t){const s=Le(l,360),A=Le(t,360),p=A-s,v=A>s?p-360:p+360;return Math.abs(p)<Math.abs(v)?p:v},m.bM=function(l){return l[0]=0,l[1]=0,l[2]=0,l},m.bN=function(l,t,s,A){const p=Math.sqrt(l*l+t*t),v=Math.sqrt(s*s+A*A);l/=p,t/=p,s/=v,A/=v;const _=Math.acos(l*s+t*A);return-t*s+l*A>0?_:-_},m.bO=function(l,t){const s=Le(l,2*Math.PI),A=Le(t,2*Math.PI);return Math.min(Math.abs(s-A),Math.abs(s-A+2*Math.PI),Math.abs(s-A-2*Math.PI))},m.bP=function(){const l={},t=mt.$version;for(const s in mt.$root){const A=mt.$root[s];if(A.required){let p=null;p=s==="version"?t:A.type==="array"?[]:{},p!=null&&(l[s]=p)}}return l},m.bQ=bt,m.bR=Ut,m.bS=function l(t,s){if(Array.isArray(t)){if(!Array.isArray(s)||t.length!==s.length)return!1;for(let A=0;A<t.length;A++)if(!l(t[A],s[A]))return!1;return!0}if(typeof t=="object"&&t!==null&&s!==null){if(typeof s!="object"||Object.keys(t).length!==Object.keys(s).length)return!1;for(const A in t)if(!l(t[A],s[A]))return!1;return!0}return t===s},m.bT=function(l){l=l.slice();const t=Object.create(null);for(let s=0;s<l.length;s++)t[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=Nr(l[s],t[l[s].ref]));return l},m.bU=function(l,t){if(l.type==="custom")return new OI(l,t);switch(l.type){case"background":return new QI(l,t);case"circle":return new $a(l,t);case"color-relief":return new vA(l,t);case"fill":return new zp(l,t);case"fill-extrusion":return new no(l,t);case"heatmap":return new Ag(l,t);case"hillshade":return new kp(l,t);case"line":return new Vp(l,t);case"raster":return new Ys(l,t);case"symbol":return new Bg(l,t)}},m.bV=l=>l.type==="raster",m.bW=ar,m.bX=function(l,t){if(!l)return[{command:"setStyle",args:[t]}];let s=[];try{if(!mr(l.version,t.version))return[{command:"setStyle",args:[t]}];mr(l.center,t.center)||s.push({command:"setCenter",args:[t.center]}),mr(l.state,t.state)||s.push({command:"setGlobalState",args:[t.state]}),mr(l.centerAltitude,t.centerAltitude)||s.push({command:"setCenterAltitude",args:[t.centerAltitude]}),mr(l.zoom,t.zoom)||s.push({command:"setZoom",args:[t.zoom]}),mr(l.bearing,t.bearing)||s.push({command:"setBearing",args:[t.bearing]}),mr(l.pitch,t.pitch)||s.push({command:"setPitch",args:[t.pitch]}),mr(l.roll,t.roll)||s.push({command:"setRoll",args:[t.roll]}),mr(l.sprite,t.sprite)||s.push({command:"setSprite",args:[t.sprite]}),mr(l.glyphs,t.glyphs)||s.push({command:"setGlyphs",args:[t.glyphs]}),mr(l.transition,t.transition)||s.push({command:"setTransition",args:[t.transition]}),mr(l.light,t.light)||s.push({command:"setLight",args:[t.light]}),mr(l.terrain,t.terrain)||s.push({command:"setTerrain",args:[t.terrain]}),mr(l.sky,t.sky)||s.push({command:"setSky",args:[t.sky]}),mr(l.projection,t.projection)||s.push({command:"setProjection",args:[t.projection]});const A={},p=[];(function(_,B,F,U){let Q;for(Q in B=B||{},_=_||{})Object.prototype.hasOwnProperty.call(_,Q)&&(Object.prototype.hasOwnProperty.call(B,Q)||wr(Q,F,U));for(Q in B)Object.prototype.hasOwnProperty.call(B,Q)&&(Object.prototype.hasOwnProperty.call(_,Q)?mr(_[Q],B[Q])||(_[Q].type==="geojson"&&B[Q].type==="geojson"&&Bn(_,B,Q)?Kr(F,{command:"setGeoJSONSourceData",args:[Q,B[Q].data]}):Tn(Q,B,F,U)):Dn(Q,B,F))})(l.sources,t.sources,p,A);const v=[];l.layers&&l.layers.forEach((_=>{"source"in _&&A[_.source]?s.push({command:"removeLayer",args:[_.id]}):v.push(_)})),s=s.concat(p),(function(_,B,F){B=B||[];const U=(_=_||[]).map(Di),Q=B.map(Di),K=_.reduce(ai,{}),X=B.reduce(ai,{}),J=U.slice(),oe=Object.create(null);let le,he,Be,tt,Se;for(let ke=0,it=0;ke<U.length;ke++)le=U[ke],Object.prototype.hasOwnProperty.call(X,le)?it++:(Kr(F,{command:"removeLayer",args:[le]}),J.splice(J.indexOf(le,it),1));for(let ke=0,it=0;ke<Q.length;ke++)le=Q[Q.length-1-ke],J[J.length-1-ke]!==le&&(Object.prototype.hasOwnProperty.call(K,le)?(Kr(F,{command:"removeLayer",args:[le]}),J.splice(J.lastIndexOf(le,J.length-it),1)):it++,tt=J[J.length-ke],Kr(F,{command:"addLayer",args:[X[le],tt]}),J.splice(J.length-ke,0,le),oe[le]=!0);for(let ke=0;ke<Q.length;ke++)if(le=Q[ke],he=K[le],Be=X[le],!oe[le]&&!mr(he,Be))if(mr(he.source,Be.source)&&mr(he["source-layer"],Be["source-layer"])&&mr(he.type,Be.type)){for(Se in xn(he.layout,Be.layout,F,le,null,"setLayoutProperty"),xn(he.paint,Be.paint,F,le,null,"setPaintProperty"),mr(he.filter,Be.filter)||Kr(F,{command:"setFilter",args:[le,Be.filter]}),mr(he.minzoom,Be.minzoom)&&mr(he.maxzoom,Be.maxzoom)||Kr(F,{command:"setLayerZoomRange",args:[le,Be.minzoom,Be.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?xn(he[Se],Be[Se],F,le,Se.slice(6),"setPaintProperty"):mr(he[Se],Be[Se])||Kr(F,{command:"setLayerProperty",args:[le,Se,Be[Se]]}));for(Se in Be)Object.prototype.hasOwnProperty.call(Be,Se)&&!Object.prototype.hasOwnProperty.call(he,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?xn(he[Se],Be[Se],F,le,Se.slice(6),"setPaintProperty"):mr(he[Se],Be[Se])||Kr(F,{command:"setLayerProperty",args:[le,Se,Be[Se]]}))}else Kr(F,{command:"removeLayer",args:[le]}),tt=J[J.lastIndexOf(le)+1],Kr(F,{command:"addLayer",args:[Be,tt]})})(v,t.layers,s)}catch(A){console.warn("Unable to compute style diff:",A),s=[{command:"setStyle",args:[t]}]}return s},m.bY=function(l){const t=[],s=l.id;return s===void 0&&t.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&t.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&t.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),t},m.bZ=Pt,m.b_=Kt,m.ba=Ue,m.bb=function(l,t,s){return l[0]=t[0]*s,l[1]=t[1]*s,l[2]=t[2]*s,l[3]=t[3]*s,l},m.bc=function(l,t){return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]+l[3]},m.bd=bx,m.be=Td,m.bf=function(l,t,s,A,p){var v=1/Math.tan(t/2);if(l[0]=v/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=v,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,p!=null&&p!==1/0){var _=1/(A-p);l[10]=(p+A)*_,l[14]=2*p*A*_}else l[10]=-1,l[14]=-2*A;return l},m.bg=function(l){var t=new ae(16);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3],t[4]=l[4],t[5]=l[5],t[6]=l[6],t[7]=l[7],t[8]=l[8],t[9]=l[9],t[10]=l[10],t[11]=l[11],t[12]=l[12],t[13]=l[13],t[14]=l[14],t[15]=l[15],t},m.bh=function(l,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[0],_=t[1],B=t[2],F=t[3],U=t[4],Q=t[5],K=t[6],X=t[7];return t!==l&&(l[8]=t[8],l[9]=t[9],l[10]=t[10],l[11]=t[11],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[0]=v*p+U*A,l[1]=_*p+Q*A,l[2]=B*p+K*A,l[3]=F*p+X*A,l[4]=U*p-v*A,l[5]=Q*p-_*A,l[6]=K*p-B*A,l[7]=X*p-F*A,l},m.bi=function(l,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[4],_=t[5],B=t[6],F=t[7],U=t[8],Q=t[9],K=t[10],X=t[11];return t!==l&&(l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[4]=v*p+U*A,l[5]=_*p+Q*A,l[6]=B*p+K*A,l[7]=F*p+X*A,l[8]=U*p-v*A,l[9]=Q*p-_*A,l[10]=K*p-B*A,l[11]=X*p-F*A,l},m.bj=function(){const l=new Float32Array(16);return Fe(l),l},m.bk=function(){const l=new Float64Array(16);return Fe(l),l},m.bl=function(){return new Float64Array(16)},m.bm=function(l,t,s){const A=new Float64Array(4);return lt(A,l,t-90,s),A},m.bn=function(l,t,s,A){var p,v,_,B,F,U=t[0],Q=t[1],K=t[2],X=t[3],J=s[0],oe=s[1],le=s[2],he=s[3];return(v=U*J+Q*oe+K*le+X*he)<0&&(v=-v,J=-J,oe=-oe,le=-le,he=-he),1-v>se?(p=Math.acos(v),_=Math.sin(p),B=Math.sin((1-A)*p)/_,F=Math.sin(A*p)/_):(B=1-A,F=A),l[0]=B*U+F*J,l[1]=B*Q+F*oe,l[2]=B*K+F*le,l[3]=B*X+F*he,l},m.bo=function(l){const t=new Float64Array(9);(function(v,_){var B=_[0],F=_[1],U=_[2],Q=_[3],K=B+B,X=F+F,J=U+U,oe=B*K,le=F*K,he=F*X,Be=U*K,tt=U*X,Se=U*J,ke=Q*K,it=Q*X,ht=Q*J;v[0]=1-he-Se,v[3]=le-ht,v[6]=Be+it,v[1]=le+ht,v[4]=1-oe-Se,v[7]=tt-ke,v[2]=Be-it,v[5]=tt+ke,v[8]=1-oe-he})(t,l);const s=hn(-Math.asin(at(t[2],-1,1)));let A,p;return Math.hypot(t[5],t[8])<.001?(A=0,p=-hn(Math.atan2(t[3],t[4]))):(A=hn(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),p=hn(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:A,pitch:s+90,bearing:p}},m.bp=function(l,t){return l.roll==t.roll&&l.pitch==t.pitch&&l.bearing==t.bearing},m.bq=an,m.br=dc,m.bs=yc,m.bt=Gu,m.bu=gc,m.bv=ie,m.bw=Ce,m.bx=ws,m.by=function(l,t,s,A,p){return ie(A,p,at((l-t)/(s-t),0,1))},m.bz=Le,m.c=Ze,m.c$=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},m.c0=GA,m.c1=class extends yo{constructor(l,t){super(l,t),this.current=zu}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let t=1;t<16;t++)if(l[t]!==this.current[t]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},m.c2=mA,m.c3=class extends yo{constructor(l,t){super(l,t),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},m.c4=class extends yo{constructor(l,t){super(l,t),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},m.c5=fe,m.c6=function(l,t){var s=Math.sin(t),A=Math.cos(t);return l[0]=A,l[1]=s,l[2]=0,l[3]=-s,l[4]=A,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},m.c7=function(l,t,s){var A=t[0],p=t[1],v=t[2];return l[0]=A*s[0]+p*s[3]+v*s[6],l[1]=A*s[1]+p*s[4]+v*s[7],l[2]=A*s[2]+p*s[5]+v*s[8],l},m.c8=function(l,t,s,A,p,v,_){var B=1/(t-s),F=1/(A-p),U=1/(v-_);return l[0]=-2*B,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*F,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*U,l[11]=0,l[12]=(t+s)*B,l[13]=(p+A)*F,l[14]=(_+v)*U,l[15]=1,l},m.c9=class extends yo{constructor(l,t){super(l,t),this.current=new Array}set(l){if(l!=this.current){this.current=l;const t=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)t[4*s]=l[s].r,t[4*s+1]=l[s].g,t[4*s+2]=l[s].b,t[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,t)}}},m.cA=function(l,t){return de[t]&&(l instanceof MouseEvent||l instanceof WheelEvent)},m.cB=function(l,t){return dt[t]&&"touches"in l},m.cC=function(l){return dt[l]||de[l]},m.cD=function(l,t,s){var A=t[0],p=t[1];return l[0]=s[0]*A+s[4]*p+s[12],l[1]=s[1]*A+s[5]*p+s[13],l},m.cE=function(l,t){const{x:s,y:A}=Zp.fromLngLat(t);return!(l<0||l>25||A<0||A>=1||s<0||s>=1)},m.cF=function(l,t){return l[0]=t[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=t[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=t[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},m.cG=class extends Io{},m.cH=ET,m.cJ=ct,m.cK=function(l,t){Ze.REGISTERED_PROTOCOLS[l]=t},m.cL=function(l){delete Ze.REGISTERED_PROTOCOLS[l]},m.cM=function(l,t){const s={};for(let p=0;p<l.length;p++){const v=t&&t[l[p].id]||po(l[p]);t&&(t[l[p].id]=v);let _=s[v];_||(_=s[v]=[]),_.push(l[p])}const A=[];for(const p in s)A.push(s[p]);return A},m.cN=We,m.cO=Cx,m.cP=nb,m.cQ=en,m.cR=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Te/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const t=l.bucket.layers[0],s=t.layout,A=t._unevaluatedLayout._values,p={layoutIconSize:A["icon-size"].possiblyEvaluate(new Mr(l.bucket.zoom+1),l.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Mr(l.bucket.zoom+1),l.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Mr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:U,maxZoom:Q}=l.bucket.textSizeData;p.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Mr(U),l.canonical),A["text-size"].possiblyEvaluate(new Mr(Q),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:U,maxZoom:Q}=l.bucket.iconSizeData;p.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Mr(U),l.canonical),A["icon-size"].possiblyEvaluate(new Mr(Q),l.canonical)]}const v=s.get("text-line-height")*Hs,_=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",B=s.get("text-keep-upright"),F=s.get("text-size");for(const U of l.bucket.features){const Q=s.get("text-font").evaluate(U,{},l.canonical).join(","),K=F.evaluate(U,{},l.canonical),X=p.layoutTextSize.evaluate(U,{},l.canonical),J=p.layoutIconSize.evaluate(U,{},l.canonical),oe={horizontal:{},vertical:void 0},le=U.text;let he,Be=[0,0];if(le){const ke=le.toString(),it=s.get("text-letter-spacing").evaluate(U,{},l.canonical)*Hs,ht=sn(ke)?it:0,Mt=s.get("text-anchor").evaluate(U,{},l.canonical),Xt=mb(t,U,l.canonical);if(!Xt){const or=s.get("text-radial-offset").evaluate(U,{},l.canonical);Be=or?pb(Mt,[or*Hs,Tv]):s.get("text-offset").evaluate(U,{},l.canonical).map(($t=>$t*Hs))}let Vt=_?"center":s.get("text-justify").evaluate(U,{},l.canonical);const ir=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(U,{},l.canonical)*Hs:1/0,_r=()=>{l.bucket.allowVerticalPlacement&&er(ke)&&(oe.vertical=Ps(le,l.glyphMap,l.glyphPositions,l.imagePositions,Q,ir,v,Mt,"left",ht,Be,m.aA.vertical,!0,X,K))};if(!_&&Xt){const or=new Set;if(Vt==="auto")for(let Ot=0;Ot<Xt.values.length;Ot+=2)or.add(Pv(Xt.values[Ot]));else or.add(Vt);let $t=!1;for(const Ot of or)if(!oe.horizontal[Ot])if($t)oe.horizontal[Ot]=oe.horizontal[0];else{const Lr=Ps(le,l.glyphMap,l.glyphPositions,l.imagePositions,Q,ir,v,"center",Ot,ht,Be,m.aA.horizontal,!1,X,K);Lr&&(oe.horizontal[Ot]=Lr,$t=Lr.positionedLines.length===1)}_r()}else{Vt==="auto"&&(Vt=Pv(Mt));const or=Ps(le,l.glyphMap,l.glyphPositions,l.imagePositions,Q,ir,v,Mt,Vt,ht,Be,m.aA.horizontal,!1,X,K);or&&(oe.horizontal[Vt]=or),_r(),er(ke)&&_&&B&&(oe.vertical=Ps(le,l.glyphMap,l.glyphPositions,l.imagePositions,Q,ir,v,Mt,Vt,ht,Be,m.aA.vertical,!1,X,K))}}let tt=!1;if(U.icon&&U.icon.name){const ke=l.imageMap[U.icon.name];ke&&(he=Ln(l.imagePositions[U.icon.name],s.get("icon-offset").evaluate(U,{},l.canonical),s.get("icon-anchor").evaluate(U,{},l.canonical)),tt=!!ke.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=tt:l.bucket.sdfIcons!==tt&&Cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ke.pixelRatio!==l.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const Se=yb(oe.horizontal)||oe.vertical;l.bucket.iconsInText=!!Se&&Se.iconsInText,(Se||he)&&BT(l.bucket,U,oe,he,l.imageMap,p,X,J,Be,tt,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},m.cS=vc,m.cT=bd,m.cU=Nf,m.cV=function(l){const t=new qu;return(function(s,A){for(const p in s.layers)A.writeMessage(3,AT,s.layers[p])})(l,t),t.finish()},m.cW=function(l,t,s,A,p,v){let _=ob(l,t,s,p,0);return _=ob(_,t,A,v,1),_},m.cX=class{constructor(l){this.maxEntries=l,this.map=new Map}get(l){const t=this.map.get(l);return t!==void 0&&(this.map.delete(l),this.map.set(l,t)),t}set(l,t){if(this.map.has(l))this.map.delete(l);else if(this.map.size>=this.maxEntries){const s=this.map.keys().next().value;this.map.delete(s)}this.map.set(l,t)}clear(){this.map.clear()}},m.cY=wd,m.cZ=qu,m.c_=tb,m.ca=class extends yo{constructor(l,t){super(l,t),this.current=new Array}set(l){if(l!=this.current){this.current=l;const t=new Float32Array(l);this.gl.uniform1fv(this.location,t)}}},m.cb=class extends pA{},m.cc=wg,m.cd=class extends jl{},m.ce=fd,m.cf=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},m.cg=hd,m.ch=function(l,t,s){var A=t[0],p=t[1],v=t[2],_=s[3]*A+s[7]*p+s[11]*v+s[15];return l[0]=(s[0]*A+s[4]*p+s[8]*v+s[12])/(_=_||1),l[1]=(s[1]*A+s[5]*p+s[9]*v+s[13])/_,l[2]=(s[2]*A+s[6]*p+s[10]*v+s[14])/_,l},m.ci=class extends Js{},m.cj=class extends Ga{},m.ck=function(l,t){return l[0]===t[0]&&l[1]===t[1]&&l[2]===t[2]&&l[3]===t[3]&&l[4]===t[4]&&l[5]===t[5]&&l[6]===t[6]&&l[7]===t[7]&&l[8]===t[8]&&l[9]===t[9]&&l[10]===t[10]&&l[11]===t[11]&&l[12]===t[12]&&l[13]===t[13]&&l[14]===t[14]&&l[15]===t[15]},m.cl=function(l,t){var s=l[0],A=l[1],p=l[2],v=l[3],_=l[4],B=l[5],F=l[6],U=l[7],Q=l[8],K=l[9],X=l[10],J=l[11],oe=l[12],le=l[13],he=l[14],Be=l[15],tt=t[0],Se=t[1],ke=t[2],it=t[3],ht=t[4],Mt=t[5],Xt=t[6],Vt=t[7],ir=t[8],_r=t[9],or=t[10],$t=t[11],Ot=t[12],Lr=t[13],Ir=t[14],kr=t[15];return Math.abs(s-tt)<=se*Math.max(1,Math.abs(s),Math.abs(tt))&&Math.abs(A-Se)<=se*Math.max(1,Math.abs(A),Math.abs(Se))&&Math.abs(p-ke)<=se*Math.max(1,Math.abs(p),Math.abs(ke))&&Math.abs(v-it)<=se*Math.max(1,Math.abs(v),Math.abs(it))&&Math.abs(_-ht)<=se*Math.max(1,Math.abs(_),Math.abs(ht))&&Math.abs(B-Mt)<=se*Math.max(1,Math.abs(B),Math.abs(Mt))&&Math.abs(F-Xt)<=se*Math.max(1,Math.abs(F),Math.abs(Xt))&&Math.abs(U-Vt)<=se*Math.max(1,Math.abs(U),Math.abs(Vt))&&Math.abs(Q-ir)<=se*Math.max(1,Math.abs(Q),Math.abs(ir))&&Math.abs(K-_r)<=se*Math.max(1,Math.abs(K),Math.abs(_r))&&Math.abs(X-or)<=se*Math.max(1,Math.abs(X),Math.abs(or))&&Math.abs(J-$t)<=se*Math.max(1,Math.abs(J),Math.abs($t))&&Math.abs(oe-Ot)<=se*Math.max(1,Math.abs(oe),Math.abs(Ot))&&Math.abs(le-Lr)<=se*Math.max(1,Math.abs(le),Math.abs(Lr))&&Math.abs(he-Ir)<=se*Math.max(1,Math.abs(he),Math.abs(Ir))&&Math.abs(Be-kr)<=se*Math.max(1,Math.abs(Be),Math.abs(kr))},m.cm=function(l,t){return l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l[4]=t[4],l[5]=t[5],l[6]=t[6],l[7]=t[7],l[8]=t[8],l[9]=t[9],l[10]=t[10],l[11]=t[11],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15],l},m.cn=l=>l.type==="symbol",m.co=l=>l.type==="circle",m.cp=l=>l.type==="heatmap",m.cq=l=>l.type==="line",m.cr=l=>l.type==="fill",m.cs=l=>l.type==="fill-extrusion",m.ct=l=>l.type==="hillshade",m.cu=l=>l.type==="color-relief",m.cv=l=>l.type==="background",m.cw=l=>l.type==="custom",m.cx=Me,m.cy=function(l,t,s){const A=Ne(t.x-s.x,t.y-s.y),p=Ne(l.x-s.x,l.y-s.y),v=Math.atan2(A[0]*p[1]-A[1]*p[0],(function(_,B){return _[0]*B[0]+_[1]*B[1]})(A,p));return hn(v)},m.cz=qe,m.d=Ft,m.d0=function(l,t,s,A,p){return o(this,void 0,void 0,(function*(){if(Z())try{return yield Wr(l,t,s,A,p)}catch{}return(function(v,_,B,F,U){const Q=v.width,K=v.height;Sr&&Or||(Sr=new OffscreenCanvas(Q,K),Or=Sr.getContext("2d",{willReadFrequently:!0})),Sr.width=Q,Sr.height=K,Or.drawImage(v,0,0,Q,K);const X=Or.getImageData(_,B,F,U);return Or.clearRect(0,0,Q,K),X.data})(l,t,s,A,p)}))},m.d1=Up,m.d2=E,m.d3=class{constructor(l,t){this.layers={[em]:this},this.name=em,this.version=t?t.version:1,this.extent=t?t.extent:4096,this.length=l.length,this.features=l}feature(l){return new cT(this.features[l],this.extent)}},m.d4=Qc,m.d5=pi,m.e=_t,m.f=l=>o(void 0,void 0,void 0,(function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(t)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),m.g=Ct,m.h=l=>new Promise(((t,s)=>{const A=new Image;A.onload=()=>{t(A),URL.revokeObjectURL(A.src),A.onload=null,window.requestAnimationFrame((()=>{A.src=lr}))},A.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(l)],{type:"image/png"});A.src=l.byteLength?URL.createObjectURL(p):lr})),m.i=vr,m.j=(l,t)=>Ht(_t(l,{type:"json"}),t),m.k=rn,m.l=dr,m.m=Ht,m.n=(l,t)=>Ht(_t(l,{type:"arrayBuffer"}),t),m.o=function(l){return new qu(l).readFields(jt,[])},m.p=ur,m.q=function(l){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))},m.r=mu,m.s=Rr,m.t=ci,m.u=mt,m.v=R,m.w=Cr,m.x=Qi,m.y=re,m.z=mi})),u("worker",["./shared"],(function(m){class o{constructor(de,pe){this.keyCache={},de&&this.replace(de,pe)}replace(de,pe){this._layerConfigs={},this._layers={},this.update(de,[],pe)}update(de,pe,ve){for(const Ze of de){this._layerConfigs[Ze.id]=Ze;const Ct=this._layers[Ze.id]=m.bU(Ze,ve);Ct._featureFilter=m.ak(Ct.filter,ve),this.keyCache[Ze.id]&&delete this.keyCache[Ze.id]}for(const Ze of pe)delete this.keyCache[Ze],delete this._layerConfigs[Ze],delete this._layers[Ze];this.familiesBySource={};const $e=m.cM(Object.values(this._layerConfigs),this.keyCache);for(const Ze of $e){const Ct=Ze.map((cr=>this._layers[cr.id])),vt=Ct[0];if(vt.visibility==="none")continue;const ct=vt.source||"";let bt=this.familiesBySource[ct];bt||(bt=this.familiesBySource[ct]={});const Ht=vt.sourceLayer||m.aa;let Ft=bt[Ht];Ft||(Ft=bt[Ht]=[]),Ft.push(Ct)}}}class w{constructor(de){const pe={},ve=[];for(const vt in de){const ct=de[vt],bt=pe[vt]={};for(const Ht in ct){const Ft=ct[+Ht];if(!Ft||Ft.bitmap.width===0||Ft.bitmap.height===0)continue;const cr={x:0,y:0,w:Ft.bitmap.width+2,h:Ft.bitmap.height+2};ve.push(cr),bt[Ht]={rect:cr,metrics:Ft.metrics}}}const{w:$e,h:Ze}=m.p(ve),Ct=new m.r({width:$e||1,height:Ze||1});for(const vt in de){const ct=de[vt];for(const bt in ct){const Ht=ct[+bt];if(!Ht||Ht.bitmap.width===0||Ht.bitmap.height===0)continue;const Ft=pe[vt][bt].rect;m.r.copy(Ht.bitmap,Ct,{x:0,y:0},{x:Ft.x+1,y:Ft.y+1},Ht.bitmap)}}this.image=Ct,this.positions=pe}}m.cN("GlyphAtlas",w);class E{constructor(de){this.tileID=new m.a2(de.tileID.overscaledZ,de.tileID.wrap,de.tileID.canonical.z,de.tileID.canonical.x,de.tileID.canonical.y),this.uid=de.uid,this.zoom=de.zoom,this.pixelRatio=de.pixelRatio,this.tileSize=de.tileSize,this.source=de.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=de.showCollisionBoxes,this.collectResourceTiming=!!de.collectResourceTiming,this.returnDependencies=!!de.returnDependencies,this.promoteId=de.promoteId,this.inFlightDependencies=[]}parse(de,pe,ve,$e,Ze){return m._(this,void 0,void 0,(function*(){this.status="parsing",this.data=de,this.collisionBoxArray=new m.ai;const Ct=new m.cO(Object.keys(de.layers).sort()),vt=new m.cP(this.tileID,this.promoteId);vt.bucketLayerIDs=[];const ct={},bt={featureIndex:vt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ve,subdivisionGranularity:Ze},Ht=pe.familiesBySource[this.source];for(const Bn in Ht){const xn=de.layers[Bn];if(!xn)continue;xn.version===1&&m.w(`Vector tile source "${this.source}" layer "${Bn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Di=Ct.encode(Bn),ai=[];for(let Yt=0;Yt<xn.length;Yt++){const Zn=xn.feature(Yt),$i=vt.getId(Zn,Bn);ai.push({feature:Zn,id:$i,index:Yt,sourceLayerIndex:Di})}for(const Yt of Ht[Bn]){const Zn=Yt[0];Zn.source!==this.source&&m.w(`layer.source = ${Zn.source} does not equal this.source = ${this.source}`),Zn.isHidden(this.zoom,!0)||(I(Yt,this.zoom,ve),(ct[Zn.id]=Zn.createBucket({index:vt.bucketLayerIDs.length,layers:Yt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Di,sourceID:this.source})).populate(ai,bt,this.tileID.canonical),vt.bucketLayerIDs.push(Yt.map(($i=>$i.id))))}}const Ft=m.bZ(bt.glyphDependencies,(Bn=>Object.keys(Bn).map(Number)));this.inFlightDependencies.forEach((Bn=>Bn?.abort())),this.inFlightDependencies=[];let cr=Promise.resolve({});if(Object.keys(Ft).length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),cr=$e.sendAsync({type:"GG",data:{stacks:Ft,source:this.source,tileID:this.tileID,type:"glyphs"}},Bn)}const Jt=Object.keys(bt.iconDependencies);let dr=Promise.resolve({});if(Jt.length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),dr=$e.sendAsync({type:"GI",data:{icons:Jt,source:this.source,tileID:this.tileID,type:"icons"}},Bn)}const rn=Object.keys(bt.patternDependencies);let Tr=Promise.resolve({});if(rn.length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),Tr=$e.sendAsync({type:"GI",data:{icons:rn,source:this.source,tileID:this.tileID,type:"patterns"}},Bn)}const mt=bt.dashDependencies;let tn=Promise.resolve({});if(Object.keys(mt).length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),tn=$e.sendAsync({type:"GDA",data:{dashes:mt}},Bn)}const[Nr,mr,Kr,Dn]=yield Promise.all([cr,dr,Tr,tn]),wr=new w(Nr),Tn=new m.cQ(mr,Kr);for(const Bn in ct){const xn=ct[Bn];xn instanceof m.aj?(I(xn.layers,this.zoom,ve),m.cR({bucket:xn,glyphMap:Nr,glyphPositions:wr.positions,imageMap:mr,imagePositions:Tn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:bt.subdivisionGranularity})):xn.hasDependencies&&(xn instanceof m.cS||xn instanceof m.cT||xn instanceof m.cU)&&(I(xn.layers,this.zoom,ve),xn.addFeatures(bt,this.tileID.canonical,Tn.patternPositions,Dn))}return this.status="done",{buckets:Object.values(ct).filter((Bn=>!Bn.isEmpty())),featureIndex:vt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wr.image,imageAtlas:Tn,dashPositions:Dn,glyphMap:this.returnDependencies?Nr:null,iconMap:this.returnDependencies?mr:null,glyphPositions:this.returnDependencies?wr.positions:null}}))}}function I(dt,de,pe){const ve=new m.H(de);for(const $e of dt)$e.recalculate(ve,pe)}class D{constructor(de,pe,ve,$e,Ze){this.type=de,this.properties=ve||{},this.extent=Ze,this.pointsArray=pe,this.id=$e}loadGeometry(){return this.pointsArray.map((de=>de.map((pe=>new m.P(pe.x,pe.y)))))}}class O{constructor(de,pe,ve){this.version=2,this._myFeatures=de,this.name=pe,this.length=de.length,this.extent=ve}feature(de){return this._myFeatures[de]}}class P{constructor(){this.layers={}}addLayer(de){this.layers[de.name]=de}}function W(dt){let de=m.cV(dt);return de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),{vectorTile:dt,rawData:de.buffer}}function H(dt,de,pe){const{extent:ve}=dt,$e=Math.pow(2,pe.z-de.z),Ze=(pe.x-de.x*$e)*ve,Ct=(pe.y-de.y*$e)*ve,vt=[];for(let ct=0;ct<dt.length;ct++){const bt=dt.feature(ct);let Ht=bt.loadGeometry();for(const cr of Ht)for(const Jt of cr)Jt.x=Jt.x*$e-Ze,Jt.y=Jt.y*$e-Ct;const Ft=128;Ht=m.cW(Ht,bt.type,-Ft,-Ft,ve+Ft,ve+Ft),Ht.length!==0&&vt.push(new D(bt.type,Ht,bt.properties,bt.id,ve))}return new O(vt,dt.name,ve)}class z{constructor(de,pe,ve){this.actor=de,this.layerIndex=pe,this.availableImages=ve,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new m.cX(1e3)}loadVectorTile(de,pe){return m._(this,void 0,void 0,(function*(){const ve=yield m.n(de.request,pe);try{return{vectorTile:de.encoding!=="mlt"?new m.cY(new m.cZ(ve.data)):new m.c_(ve.data),rawData:ve.data,cacheControl:ve.cacheControl,expires:ve.expires}}catch($e){const Ze=new Uint8Array(ve.data);let Ct=`Unable to parse the tile at ${de.request.url}, `;throw Ct+=Ze[0]===31&&Ze[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${$e.message}`,new Error(Ct)}}))}loadTile(de){return m._(this,void 0,void 0,(function*(){const{uid:pe,overzoomParameters:ve}=de;ve&&(de.request=ve.overzoomRequest);const $e=!!(de&&de.request&&de.request.collectResourceTiming)&&new m.c$(de.request),Ze=new E(de);this.loading[pe]=Ze;const Ct=new AbortController;Ze.abort=Ct;try{const vt=yield this.loadVectorTile(de,Ct);if(delete this.loading[pe],!vt)return null;if(ve){const cr=this._getOverzoomTile(de,vt.vectorTile);vt.rawData=cr.rawData,vt.vectorTile=cr.vectorTile}const ct=vt.rawData,bt={};vt.expires&&(bt.expires=vt.expires),vt.cacheControl&&(bt.cacheControl=vt.cacheControl);const Ht={};if($e){const cr=$e.finish();cr&&(Ht.resourceTiming=JSON.parse(JSON.stringify(cr)))}Ze.vectorTile=vt.vectorTile;const Ft=Ze.parse(vt.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);this.loaded[pe]=Ze,this.fetching[pe]={rawTileData:ct,cacheControl:bt,resourceTiming:Ht};try{const cr=yield Ft;return m.e({rawTileData:ct.slice(0),encoding:de.encoding},cr,bt,Ht)}finally{delete this.fetching[pe]}}catch(vt){throw delete this.loading[pe],Ze.status="done",this.loaded[pe]=Ze,vt}}))}_getOverzoomTile(de,pe){const{tileID:ve,source:$e,overzoomParameters:Ze}=de,{maxZoomTileID:Ct}=Ze,vt=`${Ct.key}_${ve.key}`,ct=this.overzoomedTileResultCache.get(vt);if(ct)return ct;const bt=new P,Ht=this.layerIndex.familiesBySource[$e];for(const cr in Ht){const Jt=pe.layers[cr];if(!Jt)continue;const dr=H(Jt,Ct,ve.canonical);dr.length>0&&bt.addLayer(dr)}const Ft=W(bt);return this.overzoomedTileResultCache.set(vt,Ft),Ft}reloadTile(de){return m._(this,void 0,void 0,(function*(){const pe=de.uid;if(!this.loaded||!this.loaded[pe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ve=this.loaded[pe];if(ve.showCollisionBoxes=de.showCollisionBoxes,ve.status==="parsing"){const $e=yield ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);let Ze;if(this.fetching[pe]){const{rawTileData:Ct,cacheControl:vt,resourceTiming:ct}=this.fetching[pe];delete this.fetching[pe],Ze=m.e({rawTileData:Ct.slice(0),encoding:de.encoding},$e,vt,ct)}else Ze=$e;return Ze}if(ve.status==="done"&&ve.vectorTile)return ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity)}))}abortTile(de){return m._(this,void 0,void 0,(function*(){const pe=this.loading,ve=de.uid;pe&&pe[ve]&&pe[ve].abort&&(pe[ve].abort.abort(),delete pe[ve])}))}removeTile(de){return m._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[de.uid]&&delete this.loaded[de.uid]}))}}class Z{constructor(){this.loaded={}}loadTile(de){return m._(this,void 0,void 0,(function*(){const{uid:pe,encoding:ve,rawImageData:$e,redFactor:Ze,greenFactor:Ct,blueFactor:vt,baseShift:ct}=de,bt=$e.width+2,Ht=$e.height+2,Ft=m.b($e)?new m.R({width:bt,height:Ht},yield m.d0($e,-1,-1,bt,Ht)):$e,cr=new m.d1(pe,Ft,ve,Ze,Ct,vt,ct);return this.loaded=this.loaded||{},this.loaded[pe]=cr,cr}))}removeTile(de){const pe=this.loaded,ve=de.uid;pe&&pe[ve]&&delete pe[ve]}}var se,ae,fe=(function(){if(ae)return se;function dt(pe,ve){if(pe.length!==0){de(pe[0],ve);for(var $e=1;$e<pe.length;$e++)de(pe[$e],!ve)}}function de(pe,ve){for(var $e=0,Ze=0,Ct=0,vt=pe.length,ct=vt-1;Ct<vt;ct=Ct++){var bt=(pe[Ct][0]-pe[ct][0])*(pe[ct][1]+pe[Ct][1]),Ht=$e+bt;Ze+=Math.abs($e)>=Math.abs(bt)?$e-Ht+bt:bt-Ht+$e,$e=Ht}$e+Ze>=0!=!!ve&&pe.reverse()}return ae=1,se=function pe(ve,$e){var Ze,Ct=ve&&ve.type;if(Ct==="FeatureCollection")for(Ze=0;Ze<ve.features.length;Ze++)pe(ve.features[Ze],$e);else if(Ct==="GeometryCollection")for(Ze=0;Ze<ve.geometries.length;Ze++)pe(ve.geometries[Ze],$e);else if(Ct==="Feature")pe(ve.geometry,$e);else if(Ct==="Polygon")dt(ve.coordinates,$e);else if(Ct==="MultiPolygon")for(Ze=0;Ze<ve.coordinates.length;Ze++)dt(ve.coordinates[Ze],$e);return ve}})(),Fe=m.d2(fe);const He={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:dt=>dt},Ve=Math.fround||(Oe=new Float32Array(1),dt=>(Oe[0]=+dt,Oe[0]));var Oe;class be{constructor(de){this.options=Object.assign(Object.create(He),de),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(de){const{log:pe,minZoom:ve,maxZoom:$e}=this.options;pe&&console.time("total time");const Ze=`prepare ${de.length} points`;pe&&console.time(Ze),this.points=de;const Ct=[];for(let ct=0;ct<de.length;ct++){const bt=de[ct];if(!bt.geometry)continue;const[Ht,Ft]=bt.geometry.coordinates,cr=Ve(me(Ht)),Jt=Ve(Ue(Ft));Ct.push(cr,Jt,1/0,ct,-1,1),this.options.reduce&&Ct.push(0)}let vt=this.trees[$e+1]=this._createTree(Ct);pe&&console.timeEnd(Ze);for(let ct=$e;ct>=ve;ct--){const bt=+Date.now();vt=this.trees[ct]=this._createTree(this._cluster(vt,ct)),pe&&console.log("z%d: %d clusters in %dms",ct,vt.numItems,+Date.now()-bt)}return pe&&console.timeEnd("total time"),this}getClusters(de,pe){let ve=((de[0]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,de[1]));let Ze=de[2]===180?180:((de[2]+180)%360+360)%360-180;const Ct=Math.max(-90,Math.min(90,de[3]));if(de[2]-de[0]>=360)ve=-180,Ze=180;else if(ve>Ze){const Ft=this.getClusters([ve,$e,180,Ct],pe),cr=this.getClusters([-180,$e,Ze,Ct],pe);return Ft.concat(cr)}const vt=this.trees[this._limitZoom(pe)],ct=vt.range(me(ve),Ue(Ct),me(Ze),Ue($e)),bt=vt.data,Ht=[];for(const Ft of ct){const cr=this.stride*Ft;Ht.push(bt[cr+5]>1?rt(bt,cr,this.clusterProps):this.points[bt[cr+3]])}return Ht}getChildren(de){const pe=this._getOriginId(de),ve=this._getOriginZoom(de),$e="No cluster with the specified id.",Ze=this.trees[ve];if(!Ze)throw new Error($e);const Ct=Ze.data;if(pe*this.stride>=Ct.length)throw new Error($e);const vt=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),ct=Ze.within(Ct[pe*this.stride],Ct[pe*this.stride+1],vt),bt=[];for(const Ht of ct){const Ft=Ht*this.stride;Ct[Ft+4]===de&&bt.push(Ct[Ft+5]>1?rt(Ct,Ft,this.clusterProps):this.points[Ct[Ft+3]])}if(bt.length===0)throw new Error($e);return bt}getLeaves(de,pe,ve){const $e=[];return this._appendLeaves($e,de,pe=pe||10,ve=ve||0,0),$e}getTile(de,pe,ve){const $e=this.trees[this._limitZoom(de)],Ze=Math.pow(2,de),{extent:Ct,radius:vt}=this.options,ct=vt/Ct,bt=(ve-ct)/Ze,Ht=(ve+1+ct)/Ze,Ft={features:[]};return this._addTileFeatures($e.range((pe-ct)/Ze,bt,(pe+1+ct)/Ze,Ht),$e.data,pe,ve,Ze,Ft),pe===0&&this._addTileFeatures($e.range(1-ct/Ze,bt,1,Ht),$e.data,Ze,ve,Ze,Ft),pe===Ze-1&&this._addTileFeatures($e.range(0,bt,ct/Ze,Ht),$e.data,-1,ve,Ze,Ft),Ft.features.length?Ft:null}getClusterExpansionZoom(de){let pe=this._getOriginZoom(de)-1;for(;pe<=this.options.maxZoom;){const ve=this.getChildren(de);if(pe++,ve.length!==1)break;de=ve[0].properties.cluster_id}return pe}_appendLeaves(de,pe,ve,$e,Ze){const Ct=this.getChildren(pe);for(const vt of Ct){const ct=vt.properties;if(ct&&ct.cluster?Ze+ct.point_count<=$e?Ze+=ct.point_count:Ze=this._appendLeaves(de,ct.cluster_id,ve,$e,Ze):Ze<$e?Ze++:de.push(vt),de.length===ve)break}return Ze}_createTree(de){const pe=new m.aU(de.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ve=0;ve<de.length;ve+=this.stride)pe.add(de[ve],de[ve+1]);return pe.finish(),pe.data=de,pe}_addTileFeatures(de,pe,ve,$e,Ze,Ct){for(const vt of de){const ct=vt*this.stride,bt=pe[ct+5]>1;let Ht,Ft,cr;if(bt)Ht=ue(pe,ct,this.clusterProps),Ft=pe[ct],cr=pe[ct+1];else{const rn=this.points[pe[ct+3]];Ht=rn.properties;const[Tr,mt]=rn.geometry.coordinates;Ft=me(Tr),cr=Ue(mt)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(Ft*Ze-ve)),Math.round(this.options.extent*(cr*Ze-$e))]],tags:Ht};let dr;dr=bt||this.options.generateId?pe[ct+3]:this.points[pe[ct+3]].id,dr!==void 0&&(Jt.id=dr),Ct.features.push(Jt)}}_limitZoom(de){return Math.max(this.options.minZoom,Math.min(Math.floor(+de),this.options.maxZoom+1))}_cluster(de,pe){const{radius:ve,extent:$e,reduce:Ze,minPoints:Ct}=this.options,vt=ve/($e*Math.pow(2,pe)),ct=de.data,bt=[],Ht=this.stride;for(let Ft=0;Ft<ct.length;Ft+=Ht){if(ct[Ft+2]<=pe)continue;ct[Ft+2]=pe;const cr=ct[Ft],Jt=ct[Ft+1],dr=de.within(ct[Ft],ct[Ft+1],vt),rn=ct[Ft+5];let Tr=rn;for(const mt of dr){const tn=mt*Ht;ct[tn+2]>pe&&(Tr+=ct[tn+5])}if(Tr>rn&&Tr>=Ct){let mt,tn=cr*rn,Nr=Jt*rn,mr=-1;const Kr=(Ft/Ht<<5)+(pe+1)+this.points.length;for(const Dn of dr){const wr=Dn*Ht;if(ct[wr+2]<=pe)continue;ct[wr+2]=pe;const Tn=ct[wr+5];tn+=ct[wr]*Tn,Nr+=ct[wr+1]*Tn,ct[wr+4]=Kr,Ze&&(mt||(mt=this._map(ct,Ft,!0),mr=this.clusterProps.length,this.clusterProps.push(mt)),Ze(mt,this._map(ct,wr)))}ct[Ft+4]=Kr,bt.push(tn/Tr,Nr/Tr,1/0,Kr,-1,Tr),Ze&&bt.push(mr)}else{for(let mt=0;mt<Ht;mt++)bt.push(ct[Ft+mt]);if(Tr>1)for(const mt of dr){const tn=mt*Ht;if(!(ct[tn+2]<=pe)){ct[tn+2]=pe;for(let Nr=0;Nr<Ht;Nr++)bt.push(ct[tn+Nr])}}}}return bt}_getOriginId(de){return de-this.points.length>>5}_getOriginZoom(de){return(de-this.points.length)%32}_map(de,pe,ve){if(de[pe+5]>1){const Ct=this.clusterProps[de[pe+6]];return ve?Object.assign({},Ct):Ct}const $e=this.points[de[pe+3]].properties,Ze=this.options.map($e);return ve&&Ze===$e?Object.assign({},Ze):Ze}}function rt(dt,de,pe){return{type:"Feature",id:dt[de+3],properties:ue(dt,de,pe),geometry:{type:"Point",coordinates:[(ve=dt[de],360*(ve-.5)),Ie(dt[de+1])]}};var ve}function ue(dt,de,pe){const ve=dt[de+5],$e=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve,Ze=dt[de+6],Ct=Ze===-1?{}:Object.assign({},pe[Ze]);return Object.assign(Ct,{cluster:!0,cluster_id:dt[de+3],point_count:ve,point_count_abbreviated:$e})}function me(dt){return dt/360+.5}function Ue(dt){const de=Math.sin(dt*Math.PI/180),pe=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return pe<0?0:pe>1?1:pe}function Ie(dt){const de=(180-360*dt)*Math.PI/180;return 360*Math.atan(Math.exp(de))/Math.PI-90}function pt(dt,de,pe,ve){let $e=ve;const Ze=de+(pe-de>>1);let Ct,vt=pe-de;const ct=dt[de],bt=dt[de+1],Ht=dt[pe],Ft=dt[pe+1];for(let cr=de+3;cr<pe;cr+=3){const Jt=lt(dt[cr],dt[cr+1],ct,bt,Ht,Ft);if(Jt>$e)Ct=cr,$e=Jt;else if(Jt===$e){const dr=Math.abs(cr-Ze);dr<vt&&(Ct=cr,vt=dr)}}$e>ve&&(Ct-de>3&&pt(dt,de,Ct,ve),dt[Ct+2]=$e,pe-Ct>3&&pt(dt,Ct,pe,ve))}function lt(dt,de,pe,ve,$e,Ze){let Ct=$e-pe,vt=Ze-ve;if(Ct!==0||vt!==0){const ct=((dt-pe)*Ct+(de-ve)*vt)/(Ct*Ct+vt*vt);ct>1?(pe=$e,ve=Ze):ct>0&&(pe+=Ct*ct,ve+=vt*ct)}return Ct=dt-pe,vt=de-ve,Ct*Ct+vt*vt}function ot(dt,de,pe,ve){const $e={id:dt??null,type:de,geometry:pe,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(de==="Point"||de==="MultiPoint"||de==="LineString")Ne($e,pe);else if(de==="Polygon")Ne($e,pe[0]);else if(de==="MultiLineString")for(const Ze of pe)Ne($e,Ze);else if(de==="MultiPolygon")for(const Ze of pe)Ne($e,Ze[0]);return $e}function Ne(dt,de){for(let pe=0;pe<de.length;pe+=3)dt.minX=Math.min(dt.minX,de[pe]),dt.minY=Math.min(dt.minY,de[pe+1]),dt.maxX=Math.max(dt.maxX,de[pe]),dt.maxY=Math.max(dt.maxY,de[pe+1])}function Te(dt,de,pe,ve){if(!de.geometry)return;const $e=de.geometry.coordinates;if($e&&$e.length===0)return;const Ze=de.geometry.type,Ct=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2);let vt=[],ct=de.id;if(pe.promoteId?ct=de.properties[pe.promoteId]:pe.generateId&&(ct=ve||0),Ze==="Point")yt($e,vt);else if(Ze==="MultiPoint")for(const bt of $e)yt(bt,vt);else if(Ze==="LineString")Le($e,vt,Ct,!1);else if(Ze==="MultiLineString"){if(pe.lineMetrics){for(const bt of $e)vt=[],Le(bt,vt,Ct,!1),dt.push(ot(ct,"LineString",vt,de.properties));return}ie($e,vt,Ct,!1)}else if(Ze==="Polygon")ie($e,vt,Ct,!0);else{if(Ze!=="MultiPolygon"){if(Ze==="GeometryCollection"){for(const bt of de.geometry.geometries)Te(dt,{id:ct,geometry:bt,properties:de.properties},pe,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const bt of $e){const Ht=[];ie(bt,Ht,Ct,!0),vt.push(Ht)}}dt.push(ot(ct,Ze,vt,de.properties))}function yt(dt,de){de.push(Ce(dt[0]),Me(dt[1]),0)}function Le(dt,de,pe,ve){let $e,Ze,Ct=0;for(let ct=0;ct<dt.length;ct++){const bt=Ce(dt[ct][0]),Ht=Me(dt[ct][1]);de.push(bt,Ht,0),ct>0&&(Ct+=ve?($e*Ht-bt*Ze)/2:Math.sqrt(Math.pow(bt-$e,2)+Math.pow(Ht-Ze,2))),$e=bt,Ze=Ht}const vt=de.length-3;de[2]=1,pt(de,0,vt,pe),de[vt+2]=1,de.size=Math.abs(Ct),de.start=0,de.end=de.size}function ie(dt,de,pe,ve){for(let $e=0;$e<dt.length;$e++){const Ze=[];Le(dt[$e],Ze,pe,ve),de.push(Ze)}}function Ce(dt){return dt/360+.5}function Me(dt){const de=Math.sin(dt*Math.PI/180),pe=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return pe<0?0:pe>1?1:pe}function qe(dt,de,pe,ve,$e,Ze,Ct,vt){if(ve/=de,Ze>=(pe/=de)&&Ct<ve)return dt;if(Ct<pe||Ze>=ve)return null;const ct=[];for(const bt of dt){const Ht=bt.geometry;let Ft=bt.type;const cr=$e===0?bt.minX:bt.minY,Jt=$e===0?bt.maxX:bt.maxY;if(cr>=pe&&Jt<ve){ct.push(bt);continue}if(Jt<pe||cr>=ve)continue;let dr=[];if(Ft==="Point"||Ft==="MultiPoint")at(Ht,dr,pe,ve,$e);else if(Ft==="LineString")et(Ht,dr,pe,ve,$e,!1,vt.lineMetrics);else if(Ft==="MultiLineString")Et(Ht,dr,pe,ve,$e,!1);else if(Ft==="Polygon")Et(Ht,dr,pe,ve,$e,!0);else if(Ft==="MultiPolygon")for(const rn of Ht){const Tr=[];Et(rn,Tr,pe,ve,$e,!0),Tr.length&&dr.push(Tr)}if(dr.length){if(vt.lineMetrics&&Ft==="LineString"){for(const rn of dr)ct.push(ot(bt.id,Ft,rn,bt.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(dr.length===1?(Ft="LineString",dr=dr[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=dr.length===3?"Point":"MultiPoint"),ct.push(ot(bt.id,Ft,dr,bt.tags))}}return ct.length?ct:null}function at(dt,de,pe,ve,$e){for(let Ze=0;Ze<dt.length;Ze+=3){const Ct=dt[Ze+$e];Ct>=pe&&Ct<=ve&&Pt(de,dt[Ze],dt[Ze+1],dt[Ze+2])}}function et(dt,de,pe,ve,$e,Ze,Ct){let vt=_t(dt);const ct=$e===0?Kt:ar;let bt,Ht,Ft=dt.start;for(let Tr=0;Tr<dt.length-3;Tr+=3){const mt=dt[Tr],tn=dt[Tr+1],Nr=dt[Tr+2],mr=dt[Tr+3],Kr=dt[Tr+4],Dn=$e===0?mt:tn,wr=$e===0?mr:Kr;let Tn=!1;Ct&&(bt=Math.sqrt(Math.pow(mt-mr,2)+Math.pow(tn-Kr,2))),Dn<pe?wr>pe&&(Ht=ct(vt,mt,tn,mr,Kr,pe),Ct&&(vt.start=Ft+bt*Ht)):Dn>ve?wr<ve&&(Ht=ct(vt,mt,tn,mr,Kr,ve),Ct&&(vt.start=Ft+bt*Ht)):Pt(vt,mt,tn,Nr),wr<pe&&Dn>=pe&&(Ht=ct(vt,mt,tn,mr,Kr,pe),Tn=!0),wr>ve&&Dn<=ve&&(Ht=ct(vt,mt,tn,mr,Kr,ve),Tn=!0),!Ze&&Tn&&(Ct&&(vt.end=Ft+bt*Ht),de.push(vt),vt=_t(dt)),Ct&&(Ft+=bt)}let cr=dt.length-3;const Jt=dt[cr],dr=dt[cr+1],rn=$e===0?Jt:dr;rn>=pe&&rn<=ve&&Pt(vt,Jt,dr,dt[cr+2]),cr=vt.length-3,Ze&&cr>=3&&(vt[cr]!==vt[0]||vt[cr+1]!==vt[1])&&Pt(vt,vt[0],vt[1],vt[2]),vt.length&&de.push(vt)}function _t(dt){const de=[];return de.size=dt.size,de.start=dt.start,de.end=dt.end,de}function Et(dt,de,pe,ve,$e,Ze){for(const Ct of dt)et(Ct,de,pe,ve,$e,Ze,!1)}function Pt(dt,de,pe,ve){dt.push(de,pe,ve)}function Kt(dt,de,pe,ve,$e,Ze){const Ct=(Ze-de)/(ve-de);return Pt(dt,Ze,pe+($e-pe)*Ct,1),Ct}function ar(dt,de,pe,ve,$e,Ze){const Ct=(Ze-pe)/($e-pe);return Pt(dt,de+(ve-de)*Ct,Ze,1),Ct}function hr(dt,de){const pe=[];for(let ve=0;ve<dt.length;ve++){const $e=dt[ve],Ze=$e.type;let Ct;if(Ze==="Point"||Ze==="MultiPoint"||Ze==="LineString")Ct=Cr($e.geometry,de);else if(Ze==="MultiLineString"||Ze==="Polygon"){Ct=[];for(const vt of $e.geometry)Ct.push(Cr(vt,de))}else if(Ze==="MultiPolygon"){Ct=[];for(const vt of $e.geometry){const ct=[];for(const bt of vt)ct.push(Cr(bt,de));Ct.push(ct)}}pe.push(ot($e.id,Ze,Ct,$e.tags))}return pe}function Cr(dt,de){const pe=[];pe.size=dt.size,dt.start!==void 0&&(pe.start=dt.start,pe.end=dt.end);for(let ve=0;ve<dt.length;ve+=3)pe.push(dt[ve]+de,dt[ve+1],dt[ve+2]);return pe}function je(dt,de){if(dt.transformed)return dt;const pe=1<<dt.z,ve=dt.x,$e=dt.y;for(const Ze of dt.features){const Ct=Ze.geometry,vt=Ze.type;if(Ze.geometry=[],vt===1)for(let ct=0;ct<Ct.length;ct+=2)Ze.geometry.push(vr(Ct[ct],Ct[ct+1],de,pe,ve,$e));else for(let ct=0;ct<Ct.length;ct++){const bt=[];for(let Ht=0;Ht<Ct[ct].length;Ht+=2)bt.push(vr(Ct[ct][Ht],Ct[ct][Ht+1],de,pe,ve,$e));Ze.geometry.push(bt)}}return dt.transformed=!0,dt}function vr(dt,de,pe,ve,$e,Ze){return[Math.round(pe*(dt*ve-$e)),Math.round(pe*(de*ve-Ze))]}function Ur(dt,de,pe,ve,$e){const Ze=de===$e.maxZoom?0:$e.tolerance/((1<<de)*$e.extent),Ct={features:[],numPoints:0,numSimplified:0,numFeatures:dt.length,source:null,x:pe,y:ve,z:de,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const vt of dt)$r(Ct,vt,Ze,$e);return Ct}function $r(dt,de,pe,ve){const $e=de.geometry,Ze=de.type,Ct=[];if(dt.minX=Math.min(dt.minX,de.minX),dt.minY=Math.min(dt.minY,de.minY),dt.maxX=Math.max(dt.maxX,de.maxX),dt.maxY=Math.max(dt.maxY,de.maxY),Ze==="Point"||Ze==="MultiPoint")for(let vt=0;vt<$e.length;vt+=3)Ct.push($e[vt],$e[vt+1]),dt.numPoints++,dt.numSimplified++;else if(Ze==="LineString")lr(Ct,$e,dt,pe,!1,!1);else if(Ze==="MultiLineString"||Ze==="Polygon")for(let vt=0;vt<$e.length;vt++)lr(Ct,$e[vt],dt,pe,Ze==="Polygon",vt===0);else if(Ze==="MultiPolygon")for(let vt=0;vt<$e.length;vt++){const ct=$e[vt];for(let bt=0;bt<ct.length;bt++)lr(Ct,ct[bt],dt,pe,!0,bt===0)}if(Ct.length){let vt=de.tags||null;if(Ze==="LineString"&&ve.lineMetrics){vt={};for(const bt in de.tags)vt[bt]=de.tags[bt];vt.mapbox_clip_start=$e.start/$e.size,vt.mapbox_clip_end=$e.end/$e.size}const ct={geometry:Ct,type:Ze==="Polygon"||Ze==="MultiPolygon"?3:Ze==="LineString"||Ze==="MultiLineString"?2:1,tags:vt};de.id!==null&&(ct.id=de.id),dt.features.push(ct)}}function lr(dt,de,pe,ve,$e,Ze){const Ct=ve*ve;if(ve>0&&de.size<($e?Ct:ve))return void(pe.numPoints+=de.length/3);const vt=[];for(let ct=0;ct<de.length;ct+=3)(ve===0||de[ct+2]>Ct)&&(pe.numSimplified++,vt.push(de[ct],de[ct+1])),pe.numPoints++;$e&&(function(ct,bt){let Ht=0;for(let Ft=0,cr=ct.length,Jt=cr-2;Ft<cr;Jt=Ft,Ft+=2)Ht+=(ct[Ft]-ct[Jt])*(ct[Ft+1]+ct[Jt+1]);if(Ht>0===bt)for(let Ft=0,cr=ct.length;Ft<cr/2;Ft+=2){const Jt=ct[Ft],dr=ct[Ft+1];ct[Ft]=ct[cr-2-Ft],ct[Ft+1]=ct[cr-1-Ft],ct[cr-2-Ft]=Jt,ct[cr-1-Ft]=dr}})(vt,Ze),dt.push(vt)}const Wr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Sr{constructor(de,pe){const ve=(pe=this.options=(function(Ze,Ct){for(const vt in Ct)Ze[vt]=Ct[vt];return Ze})(Object.create(Wr),pe)).debug;if(ve&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");let $e=(function(Ze,Ct){const vt=[];if(Ze.type==="FeatureCollection")for(let ct=0;ct<Ze.features.length;ct++)Te(vt,Ze.features[ct],Ct,ct);else Te(vt,Ze.type==="Feature"?Ze:{geometry:Ze},Ct);return vt})(de,pe);this.tiles={},this.tileCoords=[],ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),$e=(function(Ze,Ct){const vt=Ct.buffer/Ct.extent;let ct=Ze;const bt=qe(Ze,1,-1-vt,vt,0,-1,2,Ct),Ht=qe(Ze,1,1-vt,2+vt,0,-1,2,Ct);return(bt||Ht)&&(ct=qe(Ze,1,-vt,1+vt,0,-1,2,Ct)||[],bt&&(ct=hr(bt,1).concat(ct)),Ht&&(ct=ct.concat(hr(Ht,-1)))),ct})($e,pe),$e.length&&this.splitTile($e,0,0,0),ve&&($e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(de,pe,ve,$e,Ze,Ct,vt){const ct=[de,pe,ve,$e],bt=this.options,Ht=bt.debug;for(;ct.length;){$e=ct.pop(),ve=ct.pop(),pe=ct.pop(),de=ct.pop();const Ft=1<<pe,cr=Or(pe,ve,$e);let Jt=this.tiles[cr];if(!Jt&&(Ht>1&&console.time("creation"),Jt=this.tiles[cr]=Ur(de,pe,ve,$e,bt),this.tileCoords.push({z:pe,x:ve,y:$e}),Ht)){Ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,ve,$e,Jt.numFeatures,Jt.numPoints,Jt.numSimplified),console.timeEnd("creation"));const Tn=`z${pe}`;this.stats[Tn]=(this.stats[Tn]||0)+1,this.total++}if(Jt.source=de,Ze==null){if(pe===bt.indexMaxZoom||Jt.numPoints<=bt.indexMaxPoints)continue}else{if(pe===bt.maxZoom||pe===Ze)continue;if(Ze!=null){const Tn=Ze-pe;if(ve!==Ct>>Tn||$e!==vt>>Tn)continue}}if(Jt.source=null,de.length===0)continue;Ht>1&&console.time("clipping");const dr=.5*bt.buffer/bt.extent,rn=.5-dr,Tr=.5+dr,mt=1+dr;let tn=null,Nr=null,mr=null,Kr=null,Dn=qe(de,Ft,ve-dr,ve+Tr,0,Jt.minX,Jt.maxX,bt),wr=qe(de,Ft,ve+rn,ve+mt,0,Jt.minX,Jt.maxX,bt);de=null,Dn&&(tn=qe(Dn,Ft,$e-dr,$e+Tr,1,Jt.minY,Jt.maxY,bt),Nr=qe(Dn,Ft,$e+rn,$e+mt,1,Jt.minY,Jt.maxY,bt),Dn=null),wr&&(mr=qe(wr,Ft,$e-dr,$e+Tr,1,Jt.minY,Jt.maxY,bt),Kr=qe(wr,Ft,$e+rn,$e+mt,1,Jt.minY,Jt.maxY,bt),wr=null),Ht>1&&console.timeEnd("clipping"),ct.push(tn||[],pe+1,2*ve,2*$e),ct.push(Nr||[],pe+1,2*ve,2*$e+1),ct.push(mr||[],pe+1,2*ve+1,2*$e),ct.push(Kr||[],pe+1,2*ve+1,2*$e+1)}}getTile(de,pe,ve){de=+de,pe=+pe,ve=+ve;const $e=this.options,{extent:Ze,debug:Ct}=$e;if(de<0||de>24)return null;const vt=1<<de,ct=Or(de,pe=pe+vt&vt-1,ve);if(this.tiles[ct])return je(this.tiles[ct],Ze);Ct>1&&console.log("drilling down to z%d-%d-%d",de,pe,ve);let bt,Ht=de,Ft=pe,cr=ve;for(;!bt&&Ht>0;)Ht--,Ft>>=1,cr>>=1,bt=this.tiles[Or(Ht,Ft,cr)];return bt&&bt.source?(Ct>1&&(console.log("found parent tile z%d-%d-%d",Ht,Ft,cr),console.time("drilling down")),this.splitTile(bt.source,Ht,Ft,cr,de,pe,ve),Ct>1&&console.timeEnd("drilling down"),this.tiles[ct]?je(this.tiles[ct],Ze):null):null}}function Or(dt,de,pe){return 32*((1<<dt)*pe+de)+dt}class Rr extends z{constructor(de,pe,ve,$e=On){super(de,pe,ve),this._dataUpdateable=new Map,this._createGeoJSONIndex=$e}loadVectorTile(de,pe){return m._(this,void 0,void 0,(function*(){const ve=de.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const $e=this._geoJSONIndex.getTile(ve.z,ve.x,ve.y);return $e?W(new m.d3($e.features,{version:2,extent:m.a5})):null}))}loadData(de){return m._(this,void 0,void 0,(function*(){var pe;(pe=this._pendingRequest)===null||pe===void 0||pe.abort();const ve=this._startPerformance(de);this._pendingRequest=new AbortController;try{(!this._pendingData||de.request||de.data||de.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(de,this._pendingRequest));const $e=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex($e,de),this.loaded={};const Ze={};return this._finishPerformance(ve,de,Ze),Ze}catch($e){if(delete this._pendingRequest,m.Z($e))return{abandoned:!0};throw $e}}))}_startPerformance(de){var pe;if(!((pe=de?.request)===null||pe===void 0)&&pe.collectResourceTiming)return new m.c$(de.request)}_finishPerformance(de,pe,ve){if(!de)return;const $e=de.finish();$e&&(ve.resourceTiming={},ve.resourceTiming[pe.source]=JSON.parse(JSON.stringify($e)))}getData(){return m._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(de){const pe=this.loaded;return pe&&pe[de.uid]?super.reloadTile(de):this.loadTile(de)}loadAndProcessGeoJSON(de,pe){return m._(this,void 0,void 0,(function*(){let ve;if(de.request?ve=yield this.loadGeoJSONFromUrl(de.request,de.promoteId,pe):de.data?ve=this._loadGeoJSONFromObject(de.data,de.promoteId):de.dataDiff&&(ve=this._loadGeoJSONFromDiff(de.dataDiff,de.promoteId,de.source)),delete this._pendingRequest,typeof ve!="object")throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);return Fe(ve,!0),de.filter&&(ve=this._filterGeoJSON(ve,de.filter)),ve}))}loadGeoJSONFromUrl(de,pe,ve){return m._(this,void 0,void 0,(function*(){const $e=yield m.j(de,ve);return this._dataUpdateable=m.a7($e.data,pe)?m.a8($e.data,pe):void 0,$e.data}))}_loadGeoJSONFromObject(de,pe){return this._dataUpdateable=m.a7(de,pe)?m.a8(de,pe):void 0,de}_loadGeoJSONFromDiff(de,pe,ve){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ve}`);m.a9(this._dataUpdateable,de,pe);const $e=Array.from(this._dataUpdateable.values());return this._toFeatureCollection($e)}_filterGeoJSON(de,pe){const ve=m.d4(pe,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ve.result==="error")throw new Error(ve.value.map((Ze=>`${Ze.key}: ${Ze.message}`)).join(", "));const $e=de.features.filter((Ze=>ve.value.evaluate({zoom:0},Ze)));return this._toFeatureCollection($e)}_toFeatureCollection(de){return{type:"FeatureCollection",features:de}}removeSource(de){return m._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(de){return this._geoJSONIndex.getClusterExpansionZoom(de.clusterId)}getClusterChildren(de){return this._geoJSONIndex.getChildren(de.clusterId)}getClusterLeaves(de){return this._geoJSONIndex.getLeaves(de.clusterId,de.limit,de.offset)}}function On(dt,de){return de.cluster?new be((function({superclusterOptions:pe,clusterProperties:ve}){if(!ve||!pe)return pe;const $e={},Ze={},Ct={accumulated:null,zoom:0},vt={properties:null},ct=Object.keys(ve);for(const bt of ct){const[Ht,Ft]=ve[bt],cr=m.d4(Ft),Jt=m.d4(typeof Ht=="string"?[Ht,["accumulated"],["get",bt]]:Ht);$e[bt]=cr.value,Ze[bt]=Jt.value}return pe.map=bt=>{vt.properties=bt;const Ht={};for(const Ft of ct)Ht[Ft]=$e[Ft].evaluate(Ct,vt);return Ht},pe.reduce=(bt,Ht)=>{vt.properties=Ht;for(const Ft of ct)Ct.accumulated=bt[Ft],bt[Ft]=Ze[Ft].evaluate(Ct,vt)},pe})(de)).load(dt.features):(function(pe,ve){return new Sr(pe,ve)})(dt,de.geojsonVtOptions)}class hn{constructor(de){this.self=de,this.actor=new m.L(de),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(pe,ve)=>{if(this.externalWorkerSourceTypes[pe])throw new Error(`Worker source with name "${pe}" already registered.`);this.externalWorkerSourceTypes[pe]=ve},this.self.addProtocol=m.cK,this.self.removeProtocol=m.cL,this.self.registerRTLTextPlugin=pe=>{m.d5.setMethods(pe)},this.actor.registerMessageHandler("LDT",((pe,ve)=>this._getDEMWorkerSource(pe,ve.source).loadTile(ve))),this.actor.registerMessageHandler("RDT",((pe,ve)=>m._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(pe,ve.source).removeTile(ve)})))),this.actor.registerMessageHandler("GCEZ",((pe,ve)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,ve.type,ve.source).getClusterExpansionZoom(ve)})))),this.actor.registerMessageHandler("GCC",((pe,ve)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,ve.type,ve.source).getClusterChildren(ve)})))),this.actor.registerMessageHandler("GCL",((pe,ve)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,ve.type,ve.source).getClusterLeaves(ve)})))),this.actor.registerMessageHandler("LD",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).loadData(ve))),this.actor.registerMessageHandler("GD",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).getData())),this.actor.registerMessageHandler("LT",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).loadTile(ve))),this.actor.registerMessageHandler("RT",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).reloadTile(ve))),this.actor.registerMessageHandler("AT",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).abortTile(ve))),this.actor.registerMessageHandler("RMT",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).removeTile(ve))),this.actor.registerMessageHandler("RS",((pe,ve)=>m._(this,void 0,void 0,(function*(){if(!this.workerSources[pe]||!this.workerSources[pe][ve.type]||!this.workerSources[pe][ve.type][ve.source])return;const $e=this.workerSources[pe][ve.type][ve.source];delete this.workerSources[pe][ve.type][ve.source],$e.removeSource!==void 0&&$e.removeSource(ve)})))),this.actor.registerMessageHandler("RM",(pe=>m._(this,void 0,void 0,(function*(){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe],this.globalStates.delete(pe)})))),this.actor.registerMessageHandler("SR",((pe,ve)=>m._(this,void 0,void 0,(function*(){this.referrer=ve})))),this.actor.registerMessageHandler("SRPS",((pe,ve)=>this._syncRTLPluginState(pe,ve))),this.actor.registerMessageHandler("IS",((pe,ve)=>m._(this,void 0,void 0,(function*(){this.self.importScripts(ve)})))),this.actor.registerMessageHandler("SI",((pe,ve)=>this._setImages(pe,ve))),this.actor.registerMessageHandler("UL",((pe,ve)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(pe).update(ve.layers,ve.removedIds,this._getGlobalState(pe))})))),this.actor.registerMessageHandler("UGS",((pe,ve)=>m._(this,void 0,void 0,(function*(){const $e=this._getGlobalState(pe);for(const Ze in ve)$e[Ze]=ve[Ze]})))),this.actor.registerMessageHandler("SL",((pe,ve)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(pe).replace(ve,this._getGlobalState(pe))}))))}_getGlobalState(de){let pe=this.globalStates.get(de);return pe||(pe={},this.globalStates.set(de,pe)),pe}_setImages(de,pe){return m._(this,void 0,void 0,(function*(){this.availableImages[de]=pe;for(const ve in this.workerSources[de]){const $e=this.workerSources[de][ve];for(const Ze in $e)$e[Ze].availableImages=pe}}))}_syncRTLPluginState(de,pe){return m._(this,void 0,void 0,(function*(){return yield m.d5.syncState(pe,this.self.importScripts)}))}_getAvailableImages(de){let pe=this.availableImages[de];return pe||(pe=[]),pe}_getLayerIndex(de){let pe=this.layerIndexes[de];return pe||(pe=this.layerIndexes[de]=new o),pe}_getWorkerSource(de,pe,ve){if(this.workerSources[de]||(this.workerSources[de]={}),this.workerSources[de][pe]||(this.workerSources[de][pe]={}),!this.workerSources[de][pe][ve]){const $e={sendAsync:(Ze,Ct)=>(Ze.targetMapId=de,this.actor.sendAsync(Ze,Ct))};switch(pe){case"vector":this.workerSources[de][pe][ve]=new z($e,this._getLayerIndex(de),this._getAvailableImages(de));break;case"geojson":this.workerSources[de][pe][ve]=new Rr($e,this._getLayerIndex(de),this._getAvailableImages(de));break;default:this.workerSources[de][pe][ve]=new this.externalWorkerSourceTypes[pe]($e,this._getLayerIndex(de),this._getAvailableImages(de))}}return this.workerSources[de][pe][ve]}_getDEMWorkerSource(de,pe){return this.demWorkerSources[de]||(this.demWorkerSources[de]={}),this.demWorkerSources[de][pe]||(this.demWorkerSources[de][pe]=new Z),this.demWorkerSources[de][pe]}}return m.i(self)&&(self.worker=new hn(self)),hn})),u("index",["exports","./shared"],(function(m,o){var w="5.14.0";function E(){var x=new o.A(4);return o.A!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x}let I,D,O;const P={frame(x,r,c){const d=requestAnimationFrame((b=>{y(),r(b)})),{unsubscribe:y}=o.s(x.signal,"abort",(()=>{y(),cancelAnimationFrame(d),c(new o.a(x.signal.reason))}),!1)},frameAsync(x){return new Promise(((r,c)=>{this.frame(x,r,c)}))},getImageData(x,r=0){return this.getImageCanvasContext(x).getImageData(-r,-r,x.width+2*r,x.height+2*r)},getImageCanvasContext(x){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=x.width,r.height=x.height,c.drawImage(x,0,0,x.width,x.height),c},resolveURL:x=>(I||(I=document.createElement("a")),I.href=x,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return O!==void 0?O:!!matchMedia&&(D==null&&(D=matchMedia("(prefers-reduced-motion: reduce)")),D.matches)},set prefersReducedMotion(x){O=x}},W=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(x){this._frozenAt=x}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function H(){return W.getCurrentTime()}class z{static testProp(r){if(!z.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in z.docStyle)return r[c];return r[0]}static create(r,c,d){const y=window.document.createElement(r);return c!==void 0&&(y.className=c),d&&d.appendChild(y),y}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){z.docStyle&&z.selectProp&&(z.userSelect=z.docStyle[z.selectProp],z.docStyle[z.selectProp]="none")}static enableDrag(){z.docStyle&&z.selectProp&&(z.docStyle[z.selectProp]=z.userSelect)}static setTransform(r,c){r.style[z.transformProp]=c}static addEventListener(r,c,d,y={}){r.addEventListener(c,d,"passive"in y?y:y.capture)}static removeEventListener(r,c,d,y={}){r.removeEventListener(c,d,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",z.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",z.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",z.suppressClickInternal,!0)}),0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,d){const y=c.boundingClientRect;return new o.P((d.clientX-y.left)/c.x-r.clientLeft,(d.clientY-y.top)/c.y-r.clientTop)}static mousePos(r,c){const d=z.getScale(r);return z.getPoint(r,d,c)}static touchPos(r,c){const d=[],y=z.getScale(r);for(let b=0;b<c.length;b++)d.push(z.getPoint(r,y,c[b]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),d=c.querySelectorAll("script");for(const y of d)y.remove();return z.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const d=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!d.includes("javascript:")&&!d.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const d of c)z.removeAttributes(d),z.clean(d)}static removeAttributes(r){for(const{name:c,value:d}of r.attributes)z.isPossiblyDangerous(c,d)&&r.removeAttribute(c)}}z.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,z.selectProp=z.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),z.transformProp=z.testProp(["transform","WebkitTransform"]);const Z={supported:!1,testSupport:function(x){!fe&&ae&&(Fe?He(x):se=x)}};let se,ae,fe=!1,Fe=!1;function He(x){const r=x.createTexture();x.bindTexture(x.TEXTURE_2D,r);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,ae),x.isContextLost())return;Z.supported=!0}catch{}x.deleteTexture(r),fe=!0}var Ve;typeof document<"u"&&(ae=document.createElement("img"),ae.onload=()=>{se&&He(se),se=null,Fe=!0},ae.onerror=()=>{fe=!0,se=null},ae.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(x){let r,c,d,y;x.resetRequestQueue=()=>{r=[],c=0,d=0,y={}},x.addThrottleControl=N=>{const j=d++;return y[j]=N,j},x.removeThrottleControl=N=>{delete y[N],S()},x.getImage=(N,j,q=!0)=>new Promise(((ne,ee)=>{Z.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),r.push({abortController:j,requestParameters:N,supportImageRefresh:q,state:"queued",onError:Ae=>{ee(Ae)},onSuccess:Ae=>{ne(Ae)}}),S()}));const b=N=>o._(this,void 0,void 0,(function*(){N.state="running";const{requestParameters:j,supportImageRefresh:q,onError:ne,onSuccess:ee,abortController:Ae}=N,_e=q===!1&&!o.i(self)&&!o.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce(((Qe,Ge)=>Qe&&Ge==="accept"),!0));c++;const De=_e?M(j,Ae):o.m(j,Ae);try{const Qe=yield De;delete N.abortController,N.state="completed",Qe.data instanceof HTMLImageElement||o.b(Qe.data)?ee(Qe):Qe.data&&ee({data:yield(ze=Qe.data,typeof createImageBitmap=="function"?o.f(ze):o.h(ze)),cacheControl:Qe.cacheControl,expires:Qe.expires})}catch(Qe){delete N.abortController,ne(Qe)}finally{c--,S()}var ze})),S=()=>{const N=(()=>{for(const j of Object.keys(y))if(y[j]())return!0;return!1})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=c;j<N&&r.length>0;j++){const q=r.shift();q.abortController.signal.aborted?j--:b(q)}},M=(N,j)=>new Promise(((q,ne)=>{const ee=new Image,Ae=N.url,_e=N.credentials;_e&&_e==="include"?ee.crossOrigin="use-credentials":(_e&&_e==="same-origin"||!o.d(Ae))&&(ee.crossOrigin="anonymous"),j.signal.addEventListener("abort",(()=>{ee.src="",ne(new o.a(j.signal.reason))})),ee.fetchPriority="high",ee.onload=()=>{ee.onerror=ee.onload=null,q({data:ee})},ee.onerror=()=>{ee.onerror=ee.onload=null,j.signal.aborted||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ee.src=Ae}))})(Ve||(Ve={})),Ve.resetRequestQueue();class Oe{constructor(r){this._transformRequestFn=r??null}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function be(x){const r=[];if(typeof x=="string")r.push({id:"default",url:x});else if(x&&x.length>0){const c=[];for(const{id:d,url:y}of x){const b=`${d}${y}`;c.indexOf(b)===-1&&(c.push(b),r.push({id:d,url:y}))}}return r}function rt(x,r,c){try{const d=new URL(x);return d.pathname+=`${r}${c}`,d.toString()}catch{throw new Error(`Invalid sprite URL "${x}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ue(x){const{userImage:r}=x;return!!(r&&r.render&&r.render())&&(x.data.replace(new Uint8Array(r.data.buffer)),!0)}class me extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const r of Object.keys(this.images))this.removeImage(r);this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:d}of this.requestors)d(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const d=c.spriteData;c.data=new o.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let d=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,c){if(!r)return!0;let d=0;for(const y of r){if(y[0]<d||y[1]<y[0]||c<y[1])return!1;d=y[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const d=c.spriteData,y=d&&d.width||c.data.width,b=d&&d.height||c.data.height;return!(r[0]<0||y<r[0]||r[1]<0||b<r[1]||r[2]<0||y<r[2]||r[3]<0||b<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,d=!0){const y=this.getImage(r);if(d&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise(((c,d)=>{let y=!0;if(!this.isLoaded())for(const b of r)this.images[b]||(y=!1);this.isLoaded()||y?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})}))}_getImagesForIds(r){const c={};for(const d of r){let y=this.getImage(d);y||(this.fire(new o.l("styleimagemissing",{id:d})),y=this.getImage(d)),y?c[d]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],d=this.getImage(r);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{const y={w:d.data.width+2,h:d.data.height+2,x:0,y:0},b=new o.I(y,d);this.patterns[r]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const b in this.patterns)r.push(this.patterns[b].bin);const{w:c,h:d}=o.p(r),y=this.atlasImage;y.resize({width:c||1,height:d||1});for(const b in this.patterns){const{bin:S}=this.patterns[b],M=S.x+1,N=S.y+1,j=this.getImage(b).data,q=j.width,ne=j.height;o.R.copy(j,y,{x:0,y:0},{x:M,y:N},{width:q,height:ne}),o.R.copy(j,y,{x:0,y:ne-1},{x:M,y:N-1},{width:q,height:1}),o.R.copy(j,y,{x:0,y:0},{x:M,y:N+ne},{width:q,height:1}),o.R.copy(j,y,{x:q-1,y:0},{x:M-1,y:N},{width:1,height:ne}),o.R.copy(j,y,{x:0,y:0},{x:M+q,y:N},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const d=this.getImage(c);d||o.w(`Image with ID: "${c}" was not found`),ue(d)&&this.updateImage(c,d)}}cloneImages(){const r={};for(const c in this.images){const d=this.images[c];r[c]=Object.assign(Object.assign({},d),{data:d.data?d.data.clone():null})}return r}}const Ue=1e20;function Ie(x,r,c,d,y,b,S,M,N){for(let j=r;j<r+d;j++)pt(x,c*b+j,b,y,S,M,N);for(let j=c;j<c+y;j++)pt(x,j*b+r,1,d,S,M,N)}function pt(x,r,c,d,y,b,S){b[0]=0,S[0]=-Ue,S[1]=Ue,y[0]=x[r];for(let M=1,N=0,j=0;M<d;M++){y[M]=x[r+M*c];const q=M*M;do{const ne=b[N];j=(y[M]-y[ne]+q-ne*ne)/(M-ne)/2}while(j<=S[N]&&--N>-1);N++,b[N]=M,S[N]=j,S[N+1]=Ue}for(let M=0,N=0;M<d;M++){for(;S[N+1]<M;)N++;const j=b[N],q=M-j;x[r+M*c]=y[j]+q*q}}const lt=o.v.layout_symbol["text-font"].default.join(",");class ot{constructor(r,c,d){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={},this.lang=d}setURL(r){this.url=r}getGlyphs(r){return o._(this,void 0,void 0,(function*(){const c=[];for(const b in r)for(const S of r[b])c.push(this._getAndCacheGlyphsPromise(b,S));const d=yield Promise.all(c),y={};for(const{stack:b,id:S,glyph:M}of d)y[b]||(y[b]={}),y[b][S]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return y}))}_getAndCacheGlyphsPromise(r,c){return o._(this,void 0,void 0,(function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let y=d.glyphs[c];return y!==void 0?{stack:r,id:c,glyph:y}:!this.url||this._charUsesLocalIdeographFontFamily(c)?(y=d.glyphs[c]=this._drawGlyph(d,r,c),{stack:r,id:c,glyph:y}):yield this._downloadAndCacheRangePromise(r,c)}))}_downloadAndCacheRangePromise(r,c){return o._(this,void 0,void 0,(function*(){const d=this.entries[r],y=Math.floor(c/256);if(d.ranges[y])return{stack:r,id:c,glyph:null};if(!d.requests[y]){const b=ot.loadGlyphRange(r,y,this.url,this.requestManager);d.requests[y]=b}try{const b=yield d.requests[y];for(const S in b)d.glyphs[+S]=b[+S];return d.ranges[y]=!0,{stack:r,id:c,glyph:b[c]||null}}catch(b){const S=d.glyphs[c]=this._drawGlyph(d,r,c);return this._warnOnMissingGlyphRange(S,y,c,b),{stack:r,id:c,glyph:S}}}))}_warnOnMissingGlyphRange(r,c,d,y){const b=256*c,S=b+255,M=d.toString(16).padStart(4,"0").toUpperCase();o.w(`Unable to load glyph range ${c}, ${b}-${S}. Rendering codepoint U+${M} locally instead. ${y}`)}_charUsesLocalIdeographFontFamily(r){return!!this.localIdeographFontFamily&&o.q(r)}_drawGlyph(r,c,d){const y=c===lt&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(d),b=y?"ideographTinySDF":"tinySDF";r[b]||(r[b]=this._createTinySDF(y?this.localIdeographFontFamily:c));const S=r[b].draw(String.fromCodePoint(d));return{id:d,bitmap:new o.r({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(r){const c=r?r.split(","):[];c.push("sans-serif");const d=c.map((y=>/[-\w]+/.test(y)?y:`'${CSS.escape(y)}'`)).join(",");return new ot.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:this._fontWeight(c[0]),fontStyle:this._fontStyle(c[0]),lang:this.lang})}_fontStyle(r){return/italic/i.test(r)?"italic":/oblique/i.test(r)?"oblique":"normal"}_fontWeight(r){const c={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let d;for(const[y,b]of Object.entries(c))new RegExp(`\\b${y}\\b`,"i").test(r)&&(d=`${b}`);return d}destroy(){for(const r in this.entries){const c=this.entries[r];c.tinySDF&&(c.tinySDF=null),c.ideographTinySDF&&(c.ideographTinySDF=null),c.glyphs={},c.requests={},c.ranges={}}this.entries={}}}ot.loadGlyphRange=function(x,r,c,d){return o._(this,void 0,void 0,(function*(){const y=256*r,b=y+255,S=d.transformRequest(c.replace("{fontstack}",x).replace("{range}",`${y}-${b}`),"Glyphs"),M=yield o.n(S,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${r}, ${y}-${b}`);const N={};for(const j of o.o(M.data))N[j.id]=j;return N}))},ot.TinySDF=class{constructor({fontSize:x=24,buffer:r=3,radius:c=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:S="normal",lang:M=null}={}){this.buffer=r,this.cutoff=d,this.radius=c,this.lang=M;const N=this.size=x+4*r,j=this._createCanvas(N),q=this.ctx=j.getContext("2d",{willReadFrequently:!0});q.font=`${S} ${b} ${x}px ${y}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(x){const r=document.createElement("canvas");return r.width=r.height=x,r}draw(x){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(x),S=Math.ceil(c),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),N=Math.min(this.size-this.buffer,S+Math.ceil(d)),j=M+2*this.buffer,q=N+2*this.buffer,ne=Math.max(j*q,0),ee=new Uint8ClampedArray(ne),Ae={data:ee,width:j,height:q,glyphWidth:M,glyphHeight:N,glyphTop:S,glyphLeft:0,glyphAdvance:r};if(M===0||N===0)return Ae;const{ctx:_e,buffer:De,gridInner:ze,gridOuter:Qe}=this;this.lang&&(_e.lang=this.lang),_e.clearRect(De,De,M,N),_e.fillText(x,De,De+S);const Ge=_e.getImageData(De,De,M,N);Qe.fill(Ue,0,ne),ze.fill(0,0,ne);for(let st=0;st<N;st++)for(let Xe=0;Xe<M;Xe++){const At=Ge.data[4*(st*M+Xe)+3]/255;if(At===0)continue;const ft=(st+De)*j+Xe+De;if(At===1)Qe[ft]=0,ze[ft]=Ue;else{const nt=.5-At;Qe[ft]=nt>0?nt*nt:0,ze[ft]=nt<0?nt*nt:0}}Ie(Qe,0,0,j,q,j,this.f,this.v,this.z),Ie(ze,De,De,M,N,j,this.f,this.v,this.z);for(let st=0;st<ne;st++){const Xe=Math.sqrt(Qe[st])-Math.sqrt(ze[st]);ee[st]=Math.round(255-255*(Xe/this.radius+this.cutoff))}return Ae}};class Ne{constructor(){this.specification=o.u.light.position}possiblyEvaluate(r,c){return o.F(r.expression.evaluate(c))}interpolate(r,c,d){return{x:o.G.number(r.x,c.x,d),y:o.G.number(r.y,c.y,d),z:o.G.number(r.z,c.z,d)}}}let Te;class yt extends o.E{constructor(r){super(),Te=Te||new o.t({anchor:new o.D(o.u.light.anchor),position:new Ne,color:new o.D(o.u.light.color),intensity:new o.D(o.u.light.intensity)}),this._transitionable=new o.x(Te,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(o.y,r,c))for(const d in r){const y=r[d];d.endsWith(o.z)?this._transitionable.setTransition(d.slice(0,-o.z.length),y):this._transitionable.setValue(d,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,d){return(!d||d.validate!==!1)&&o.B(this,r.call(o.C,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u}))}}const Le=new o.t({"sky-color":new o.D(o.u.sky["sky-color"]),"horizon-color":new o.D(o.u.sky["horizon-color"]),"fog-color":new o.D(o.u.sky["fog-color"]),"fog-ground-blend":new o.D(o.u.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.u.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.u.sky["atmosphere-blend"])});class ie extends o.E{constructor(r){super(),this._transitionable=new o.x(Le,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0))}setSky(r,c={}){if(!this._validate(o.J,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in r){const y=r[d];d.endsWith(o.z)?this._transitionable.setTransition(d.slice(0,-o.z.length),y):this._transitionable.setValue(d,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,d={}){return d?.validate!==!1&&o.B(this,r.call(o.C,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Ce{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const d=r.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,c)),this.dashEntry[d]}getDashRanges(r,c,d){const y=[];let b=r.length%2==1?-r[r.length-1]*d:0,S=r[0]*d,M=!0;y.push({left:b,right:S,isDash:M,zeroLength:r[0]===0});let N=r[0];for(let j=1;j<r.length;j++){M=!M;const q=r[j];b=N*d,N+=q,S=N*d,y.push({left:b,right:S,isDash:M,zeroLength:q===0})}return y}addRoundDash(r,c,d){const y=c/2;for(let b=-d;b<=d;b++){const S=this.width*(this.nextRow+d+b);let M=0,N=r[M];for(let j=0;j<this.width;j++){j/N.right>1&&(N=r[++M]);const q=Math.abs(j-N.left),ne=Math.abs(j-N.right),ee=Math.min(q,ne);let Ae;const _e=b/d*(y+1);if(N.isDash){const De=y-Math.abs(_e);Ae=Math.sqrt(ee*ee+De*De)}else Ae=y-Math.sqrt(ee*ee+_e*_e);this.data[S+j]=Math.max(0,Math.min(255,Ae+128))}}}addRegularDash(r){for(let M=r.length-1;M>=0;--M){const N=r[M],j=r[M+1];N.zeroLength?r.splice(M,1):j&&j.isDash===N.isDash&&(j.left=N.left,r.splice(M,1))}const c=r[0],d=r[r.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const y=this.width*this.nextRow;let b=0,S=r[b];for(let M=0;M<this.width;M++){M/S.right>1&&(S=r[++b]);const N=Math.abs(M-S.left),j=Math.abs(M-S.right),q=Math.min(N,j);this.data[y+M]=Math.max(0,Math.min(255,(S.isDash?q:-q)+128))}}addDash(r,c){const d=c?7:0,y=2*d+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let b=0;for(let M=0;M<r.length;M++)b+=r[M];if(b!==0){const M=this.width/b,N=this.getDashRanges(r,this.width,M);c?this.addRoundDash(N,M,d):this.addRegularDash(N)}const S={y:this.nextRow+d,height:2*d,width:b};return this.nextRow+=y,this.dirty=!0,S}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Me="maplibre_preloaded_worker_pool";class qe{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<qe.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Me]}numActive(){return Object.keys(this.active).length}}const at=Math.floor(P.hardwareConcurrency/2);let et,_t;function Et(){return et||(et=new qe),et}qe.workerCount=o.K(globalThis)?Math.max(Math.min(at,3),1):1;class Pt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const d=this.workerPool.acquire(c);for(let y=0;y<d.length;y++){const b=new o.L(d[y],c);b.name=`Worker ${y}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const d=[];for(const y of this.actors)d.push(y.sendAsync({type:r,data:c}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const d of this.actors)d.registerMessageHandler(r,c)}unregisterMessageHandler(r){for(const c of this.actors)c.unregisterMessageHandler(r)}}function Kt(){return _t||(_t=new Pt(Et(),o.M),_t.registerMessageHandler("GR",((x,r,c)=>o.m(r,c)))),_t}function ar(x,r){const c=o.N();return o.O(c,c,[1,1,0]),o.Q(c,c,[.5*x.width,.5*x.height,1]),x.calculatePosMatrix?o.S(c,c,x.calculatePosMatrix(r.toUnwrapped())):c}function hr(x,r,c,d,y,b,S){var M;const N=(function(ee,Ae,_e){if(ee)for(const De of ee){const ze=Ae[De];if(ze&&ze.source===_e&&ze.type==="fill-extrusion")return!0}else for(const De in Ae){const ze=Ae[De];if(ze.source===_e&&ze.type==="fill-extrusion")return!0}return!1})((M=y?.layers)!==null&&M!==void 0?M:null,r,x.id),j=b.maxPitchScaleFactor(),q=x.tilesIn(d,j,N);q.sort(Cr);const ne=[];for(const ee of q)ne.push({wrappedTileID:ee.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(r,c,x.getState(),ee.queryGeometry,ee.cameraQueryGeometry,ee.scale,y,b,j,ar(b,ee.tileID),S?(Ae,_e)=>S(ee.tileID,Ae,_e):void 0)});return(function(ee,Ae){for(const _e in ee)for(const De of ee[_e])je(De,Ae);return ee})((function(ee){const Ae={},_e={};for(const De of ee){const ze=De.queryResults,Qe=De.wrappedTileID,Ge=_e[Qe]=_e[Qe]||{};for(const st in ze){const Xe=ze[st],At=Ge[st]=Ge[st]||{},ft=Ae[st]=Ae[st]||[];for(const nt of Xe)At[nt.featureIndex]||(At[nt.featureIndex]=!0,ft.push(nt))}}return Ae})(ne),x)}function Cr(x,r){const c=x.tileID,d=r.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}function je(x,r){const c=x.feature,d=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=d}function vr(x,r,c){return o._(this,void 0,void 0,(function*(){let d=x;if(x.url?d=(yield o.j(r.transformRequest(x.url,"Source"),c)).data:yield P.frameAsync(c),!d)return null;const y=o.U(o.e(d,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(y.vectorLayerIds=d.vector_layers.map((b=>b.id))),y}))}class Ur{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof o.V?new o.V(r.lng,r.lat):o.V.convert(r),this}setSouthWest(r){return this._sw=r instanceof o.V?new o.V(r.lng,r.lat):o.V.convert(r),this}extend(r){const c=this._sw,d=this._ne;let y,b;if(r instanceof o.V)y=r,b=r;else{if(!(r instanceof Ur))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Ur.convert(r)):this.extend(o.V.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(o.V.convert(r)):this;if(y=r._sw,b=r._ne,!y||!b)return this}return c||d?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),d.lng=Math.max(b.lng,d.lng),d.lat=Math.max(b.lat,d.lat)):(this._sw=new o.V(y.lng,y.lat),this._ne=new o.V(b.lng,b.lat)),this}getCenter(){return new o.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.V(this.getWest(),this.getNorth())}getSouthEast(){return new o.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:d}=o.V.convert(r);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&y}intersects(r){if(!((r=Ur.convert(r)).getNorth()>=this.getSouth()&&r.getSouth()<=this.getNorth()))return!1;const c=o.W(this.getWest(),-180,180),d=o.W(this.getEast(),-180,180),y=o.W(r.getWest(),-180,180),b=o.W(r.getEast(),-180,180),S=c>=d,M=y>=b;return!(!S||!M)||(S?b>=c||y<=d:M?d>=y||c<=b:y<=d&&b>=c)}static convert(r){return r instanceof Ur?r:r&&new Ur(r)}static fromLngLat(r,c=0){const d=360*c/40075017,y=d/Math.cos(Math.PI/180*r.lat);return new Ur(new o.V(r.lng-y,r.lat-d),new o.V(r.lng+y,r.lat+d))}adjustAntiMeridian(){const r=new o.V(this._sw.lng,this._sw.lat),c=new o.V(this._ne.lng,this._ne.lat);return new Ur(r,r.lng>c.lng?new o.V(c.lng+360,c.lat):c)}}class $r{constructor(r,c,d){this.bounds=Ur.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),d=Math.floor(o.Y(this.bounds.getWest())*c),y=Math.floor(o.X(this.bounds.getNorth())*c),b=Math.ceil(o.Y(this.bounds.getEast())*c),S=Math.ceil(o.X(this.bounds.getSouth())*c);return r.x>=d&&r.x<b&&r.y>=y&&r.y<S}}class lr extends o.E{constructor(r,c,d,y){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.U(c,["url","scheme","tileSize","promoteId","encoding"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield vr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),r&&(o.e(this,r),r.bounds&&(this.tileBounds=new $r(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,o.Z(r)||this.fire(new o.k(r))}}))}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(r){return o._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(r)};d.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise(((b,S)=>{r.reloadPromise={resolve:b,reject:S}}))}else r.actor=this.dispatcher.getActor(),y="LT";r.abortController=new AbortController;try{const b=yield r.actor.sendAsync({type:y,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,b)}catch(b){if(delete r.abortController,r.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(r,null)}}))}_getOverzoomParameters(r){if(r.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const c=r.tileID.scaledTo(this.maxzoom).canonical,d=c.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:c,overzoomRequest:this.map._requestManager.transformRequest(d,"Tile")}}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return o._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}unloadTile(r){return o._(this,void 0,void 0,(function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Wr extends o.E{constructor(r,c,d,y){super(),this.id=r,this.dispatcher=d,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.U(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,(function*(r=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield vr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new $r(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}serialize(){return o.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return o._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield Ve.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const y=this.map.painter.context,b=y.gl,S=d.data;r.texture=this.map.painter.getTileTexture(S.width),r.texture?r.texture.update(S,{useMipmap:!0}):(r.texture=new o.T(y,S,b.RGBA,{useMipmap:!0}),r.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}}))}abortTile(r){return o._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)}))}unloadTile(r){return o._(this,void 0,void 0,(function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)}))}hasTransition(){return!1}}class Sr extends Wr{constructor(r,c,d,y){super(r,c,d,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return o._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const y=yield Ve.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(y&&y.data){const b=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&r.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const S=o.b(b)&&o.$()?b:yield this.readImageNow(b),M={type:this.type,uid:r.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const N=yield r.actor.sendAsync({type:"LDT",data:M});r.dem=N,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(y){if(delete r.abortController,r.aborted)r.state="unloaded";else if(y)throw r.state="errored",y}}))}readImageNow(r){return o._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&o.a0()){const c=r.width+2,d=r.height+2;try{return new o.R({width:c,height:d},yield o.a1(r,-1,-1,c,d))}catch{}}return P.getImageData(r,1)}))}_getNeighboringTiles(r){const c=r.canonical,d=Math.pow(2,c.z),y=(c.x-1+d)%d,b=c.x===0?r.wrap-1:r.wrap,S=(c.x+1+d)%d,M=c.x+1===d?r.wrap+1:r.wrap,N={};return N[new o.a2(r.overscaledZ,b,c.z,y,c.y).key]={backfilled:!1},N[new o.a2(r.overscaledZ,M,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(N[new o.a2(r.overscaledZ,b,c.z,y,c.y-1).key]={backfilled:!1},N[new o.a2(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new o.a2(r.overscaledZ,M,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<d&&(N[new o.a2(r.overscaledZ,b,c.z,y,c.y+1).key]={backfilled:!1},N[new o.a2(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new o.a2(r.overscaledZ,M,c.z,S,c.y+1).key]={backfilled:!1}),N}unloadTile(r){return o._(this,void 0,void 0,(function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))}))}}function Or(x){return x.type==="GeometryCollection"?x.geometries.map((r=>r.coordinates)).flat(1/0):x.coordinates.flat(1/0)}function Rr(x){const r=new Ur;let c;switch(x.type){case"FeatureCollection":c=x.features.map((d=>Or(d.geometry))).flat(1/0);break;case"Feature":c=Or(x.geometry);break;default:c=Or(x)}if(c.length==0)return r;for(let d=0;d<c.length-1;d+=2)r.extend([c[d],c[d+1]]);return r}class On extends o.E{constructor(r,c,d,y){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=d.getActor(),this.setEventedParent(y),this._data=typeof c.data=="string"?{url:c.data}:{geojson:c.data},this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.a5,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.a5,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(r){return r*(o.a5/this.tileSize)}_getClusterMaxZoom(r){const c=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${c}"`),c}load(){return o._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(r){this.map=r,this.load()}setData(r,c){this._data=typeof r=="string"?{url:r}:{geojson:r},this._pendingWorkerUpdate={data:r};const d=this._updateWorkerData();return c?d:this}updateData(r,c){this._pendingWorkerUpdate.diff=o.a6(this._pendingWorkerUpdate.diff,r);const d=this._updateWorkerData();return c?d:this}getData(){return o._(this,void 0,void 0,(function*(){const r=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})}))}getBounds(){return o._(this,void 0,void 0,(function*(){return Rr(yield this.getData())}))}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:d}})}_updateWorkerData(){return o._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void o.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:r,diff:c}=this._pendingWorkerUpdate,d=o.e({type:this.type},this.workerOptions);r!==void 0?(typeof r=="string"?(d.request=this.map._requestManager.transformRequest(P.resolveURL(r),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=r,this._pendingWorkerUpdate.data=void 0):c&&(d.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const y=yield this.actor.sendAsync({type:"LD",data:d});if(this._isUpdatingWorker=!1,this._removed||y.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));c&&this._applyDiff(c);let b=null;y.resourceTiming&&y.resourceTiming[this.id]&&(b=y.resourceTiming[this.id].slice(0));const S={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&o.e(S,{resourceTiming:b}),this.fire(new o.l("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},S),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(c)})))}catch(y){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(y))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(r){const c=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){if(!o.a7(this._data.geojson,c))throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:o.a8(this._data.geojson,c)}}this._data.updateable&&o.a9(this._data.updateable,r,c)}_getShouldReloadTileOptions(r){if(this._options.cluster||!r||r.removeAll)return;const{add:c=[],update:d=[],remove:y=[]}=r||{},b=new Set([...d.map((S=>S.id)),...y]);for(const S of b.values())if(typeof S!="number"&&this.promoteId==null)return void o.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs. Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...d.map((S=>S.newGeometry)),...c.map((S=>S.geometry))].filter(Boolean).map((S=>Rr(S))),prevIds:b}}shouldReloadTile(r,{nextBounds:c,prevIds:d}){if(!r.latestFeatureIndex)return r.state!=="unloaded";const y=r.latestFeatureIndex.loadVTLayers();for(let N=0;N<r.latestFeatureIndex.featureIndexArray.length;N++){const j=r.latestFeatureIndex.featureIndexArray.get(N),q=y[o.aa].feature(j.featureIndex),ne=r.latestFeatureIndex.getId(q,o.aa);if(d.has(ne))return!0}const{buffer:b,extent:S}=this.workerOptions.geojsonVtOptions,M=(function({x:N,y:j,z:q},ne=0){const ee=o.a3((N-ne)/Math.pow(2,q)),Ae=o.a4((j+1+ne)/Math.pow(2,q)),_e=o.a3((N+1+ne)/Math.pow(2,q)),De=o.a4((j-ne)/Math.pow(2,q));return new Ur([ee,Ae],[_e,De])})(r.tileID.canonical,b/S);for(const N of c)if(M.intersects(N))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(r){return o._(this,void 0,void 0,(function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const y=yield this.actor.sendAsync({type:c,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(y,this.map.painter,c==="RT")}))}abortTile(r){return o._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0}))}unloadTile(r){return o._(this,void 0,void 0,(function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class hn extends o.E{constructor(r,c,d,y){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(r){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield Ve.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(o.ab.fromLngLat);var d;return this.tileID=(function(y){const b=o.ac.fromPoints(y),S=b.width(),M=b.height(),N=Math.max(S,M),j=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),q=Math.pow(2,j);return new o.ae(j,Math.floor((b.minX+b.maxX)/2*q),Math.floor((b.minY+b.maxY)/2*q))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((y=>this.tileID.getTilePoint(y)._round())),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new o.T(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let d=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,d=!0)}d&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return o._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:c,minY:d,maxX:y,maxY:b}=o.ac.fromPoints(r),S={};for(let M=0;M<=o.ad;M++){const N=Math.pow(2,M),j=Math.floor(c*N),q=Math.floor(d*N),ne=Math.floor(y*N),ee=Math.floor(b*N);S[M]={minTileX:j,minTileY:q,maxTileX:ne,maxTileY:ee}}return S}}class dt extends hn{constructor(r,c,d,y){super(r,c,d,y),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.af(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new o.k(new o.ag(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let d=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,d=!0)}d&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class de extends hn{constructor(r,c,d,y){super(r,c,d,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((S=>typeof S!="number"))))||this.fire(new o.k(new o.ag(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.ag(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.ag(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.ag(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.ag(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,d=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new o.T(c,this.canvas,d.RGBA,{premultiply:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const S=this.tiles[b];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,y=!0)}y&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const pe={},ve=x=>{switch(x){case"geojson":return On;case"image":return hn;case"raster":return Wr;case"raster-dem":return Sr;case"vector":return lr;case"video":return dt;case"canvas":return de}return pe[x]},$e="RTLPluginLoaded";class Ze extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Kt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return o._(this,arguments,void 0,(function*(c,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return o._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l($e))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ct=null;function vt(){return Ct||(Ct=new Ze),Ct}var ct,bt;(function(x){x[x.Base=0]="Base",x[x.Parent=1]="Parent"})(ct||(ct={})),(function(x){x[x.Departing=0]="Departing",x[x.Incoming=1]="Incoming"})(bt||(bt={}));class Ht{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=r,this.uid=o.ah(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(r){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(r||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:r,fadingDirection:c,fadingParentID:d,fadeEndTime:y}){this.resetFadeLogic(),this.fadingRole=r,this.fadingDirection=c,this.fadingParentID=d,this.fadeEndTime=y}setSelfFadeLogic(r){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=r}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=H(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData,this.latestFeatureIndex.encoding=r.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=(function(y,b){const S={};if(!b)return S;for(const M of y){const N=M.layerIds.map((j=>b.getLayer(j))).filter(Boolean);if(N.length!==0){M.layers=N,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map((j=>N.filter((q=>q.id===j))[0])));for(const j of N)S[j.id]=M}}return S})(r.buckets,c?.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof o.aj){if(this.hasSymbolBuckets=!0,!d)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof o.aj&&b.hasRTLText){this.hasRTLText=!0,vt().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(b))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),this.dashPositions=r.dashPositions}else this.collisionBoxArray=new o.ai}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const y=this.buckets[d];y.uploadPending()&&y.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,d,y,b,S,M,N,j,q,ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:S,tileSize:this.tileSize,pixelPosMatrix:q,transform:N,params:M,queryPadding:this.queryPadding*j,getElevation:ne},r,c,d):{}}querySourceFeatures(r,c){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const y=d.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",S=y[o.aa]||y[b];if(!S)return;const M=o.ak(c?.filter,c?.globalState),{z:N,x:j,y:q}=this.tileID.canonical,ne={z:N,x:j,y:q};for(let ee=0;ee<S.length;ee++){const Ae=S.feature(ee);if(M.needGeometry){const ze=o.al(Ae,!0);if(!M.filter(new o.H(this.tileID.overscaledZ),ze,this.tileID.canonical))continue}else if(!M.filter(new o.H(this.tileID.overscaledZ),Ae))continue;const _e=d.getId(Ae,b),De=new o.am(Ae,N,j,q,_e);De.tile=ne,r.push(De)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const d=o.an(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let y=!1;if(this.expirationTime>d)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const b=this.expirationTime-c;b?this.expirationTime=d+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const b=this.buckets[y],S=b.layers[0].sourceLayer||o.aa,M=d[S],N=r[S];if(!M||!N||Object.keys(N).length===0)continue;b.update(N,M,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const j=c&&c.style&&c.style.getLayer(y);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(b)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<H()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(r){this.symbolFadeHoldUntil=H()+r}setDependencies(r,c){const d={};for(const y of c)d[y]=!0;this.dependencies[r]=d}hasDependency(r,c){for(const d of r){const y=this.dependencies[d];if(y){for(const b of c)if(y[b])return!0}}return!1}}class Ft{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,d){const y=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},o.e(this.stateChanges[r][y],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const b in this.state[r])b!==y&&(this.deletedStates[r][b]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const b in this.state[r][y])d[b]||(this.deletedStates[r][y][b]=null)}else for(const b in d)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][b]===null&&delete this.deletedStates[r][y][b]}removeFeatureState(r,c,d){if(this.deletedStates[r]===null)return;const y=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&c!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][d]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(d in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][d]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,c){const d=String(c),y=o.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const b=this.deletedStates[r][c];if(b===null)return{};for(const S in b)delete y[S]}return y}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const d={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const S in this.stateChanges[y])this.state[y][S]||(this.state[y][S]={}),o.e(this.state[y][S],this.stateChanges[y][S]),b[S]=this.state[y][S];d[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const S in this.state[y])b[S]={},this.state[y][S]={};else for(const S in this.deletedStates[y]){if(this.deletedStates[y][S]===null)this.state[y][S]={};else for(const M of Object.keys(this.deletedStates[y][S]))delete this.state[y][S][M];b[S]=this.state[y][S]}d[y]=d[y]||{},o.e(d[y],b)}this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0&&r.setFeatureState(d,c)}}const cr=89.25;function Jt(x,r){const c=o.ao(r.lat,-o.ap,o.ap);return new o.P(o.Y(r.lng)*x,o.X(c)*x)}function dr(x,r){return new o.ab(r.x/x,r.y/x).toLngLat()}function rn(x){return x.cameraToCenterDistance*Math.min(.85*Math.tan(o.aq(90-x.pitch)),Math.tan(o.aq(cr-x.pitch)))}function Tr(x,r){const c=x.canonical,d=r/o.ar(c.z),y=c.x+Math.pow(2,c.z)*x.wrap,b=o.as(new Float64Array(16));return o.O(b,b,[y*d,c.y*d,0]),o.Q(b,b,[d/o.a5,d/o.a5,1]),b}function mt(x,r,c,d,y){const b=o.ab.fromLngLat(x,r),S=y*o.at(1,x.lat),{x:M,y:N,z:j}=tn(c,d);return new o.ab(b.x+S*-M,b.y+S*-N,b.z+S*-j)}function tn(x,r){const c=o.aq(x),d=o.aq(r),y=Math.cos(-c),b=Math.sin(c);return{x:b*Math.sin(d),y:-b*Math.cos(d),z:y}}function Nr(x,r,c){const d=r.intersectsFrustum(x);if(!c||d===0)return d;const y=r.intersectsPlane(c);return y===0?0:d===2&&y===2?2:1}function mr(x,r,c){let d=0;const y=(c-r)/10;for(let b=0;b<10;b++)d+=y*Math.pow(Math.cos(r+(b+.5)/10*(c-r)),x);return d}function Kr(x,r){return function(c,d,y,b,S){const M=2*((x-1)/o.au(Math.cos(o.aq(cr-S))/Math.cos(o.aq(cr)))-1),N=Math.acos(y/b),j=2*mr(M-1,0,o.aq(S/2)),q=Math.min(o.aq(cr),N+o.aq(S/2)),ne=mr(M-1,Math.min(q,N-o.aq(S/2)),q),ee=Math.atan(d/y),Ae=Math.hypot(d,y);let _e=c;return _e+=o.au(b/Ae/Math.max(.5,Math.cos(o.aq(S/2)))),_e+=M*o.au(Math.cos(ee))/2,_e-=o.au(Math.max(1,ne/j/r))/2,_e}}const Dn=Kr(9.314,3);function wr(x,r){const c=(r.roundZoom?Math.round:Math.floor)(x.zoom+o.au(x.tileSize/r.tileSize));return Math.max(0,c)}function Tn(x,r){const c=x.getCameraFrustum(),d=x.getClippingPlane(),y=x.screenPointToMercatorCoordinate(x.getCameraPoint()),b=o.ab.fromLngLat(x.center,x.elevation);y.z=b.z+Math.cos(x.pitchInRadians)*x.cameraToCenterDistance/x.worldSize;const S=x.getCoveringTilesDetailsProvider(),M=S.allowVariableZoom(x,r),N=wr(x,r),j=r.minzoom||0,q=r.maxzoom!==void 0?r.maxzoom:x.maxZoom,ne=Math.min(Math.max(0,N),q),ee=Math.pow(2,ne),Ae=[ee*y.x,ee*y.y,0],_e=[ee*b.x,ee*b.y,0],De=Math.hypot(b.x-y.x,b.y-y.y),ze=Math.abs(b.z-y.z),Qe=Math.hypot(De,ze),Ge=At=>({zoom:0,x:0,y:0,wrap:At,fullyVisible:!1}),st=[],Xe=[];if(x.renderWorldCopies&&S.allowWorldCopies())for(let At=1;At<=3;At++)st.push(Ge(-At)),st.push(Ge(At));for(st.push(Ge(0));st.length>0;){const At=st.pop(),ft=At.x,nt=At.y;let wt=At.fullyVisible;const Dt={x:ft,y:nt,z:At.zoom},Lt=S.getTileBoundingVolume(Dt,At.wrap,x.elevation,r);if(!wt){const Ar=Nr(c,Lt,d);if(Ar===0)continue;wt=Ar===2}const Rt=S.distanceToTile2d(y.x,y.y,Dt,Lt);let Qt=N;M&&(Qt=(r.calculateTileZoom||Dn)(x.zoom+o.au(x.tileSize/r.tileSize),Rt,ze,Qe,x.fov)),Qt=(r.roundZoom?Math.round:Math.floor)(Qt),Qt=Math.max(0,Qt);const nr=Math.min(Qt,q);if(At.wrap=S.getWrap(b,Dt,At.wrap),At.zoom>=nr){if(At.zoom<j)continue;const Ar=ne-At.zoom,rr=Ae[0]-.5-(ft<<Ar),Dr=Ae[1]-.5-(nt<<Ar),vn=r.reparseOverscaled?Math.max(At.zoom,Qt):At.zoom;Xe.push({tileID:new o.a2(At.zoom===q?vn:At.zoom,At.wrap,At.zoom,ft,nt),distanceSq:o.av([_e[0]-.5-ft,_e[1]-.5-nt]),tileDistanceToCamera:Math.sqrt(rr*rr+Dr*Dr)})}else for(let Ar=0;Ar<4;Ar++)st.push({zoom:At.zoom+1,x:(ft<<1)+Ar%2,y:(nt<<1)+(Ar>>1),wrap:At.wrap,fullyVisible:wt})}return Xe.sort(((At,ft)=>At.distanceSq-ft.distanceSq)).map((At=>At.tileID))}const Bn=o.ac.fromPoints([new o.P(0,0),new o.P(o.a5,o.a5)]);function xn(x){return x==="raster"||x==="image"||x==="video"}function Di(x,r,c,d,y,b,S){if(!r.hasData())return!1;const{tileID:M,fadingRole:N,fadingDirection:j,fadingParentID:q}=r;if(N===ct.Base&&j===bt.Incoming&&q)return c[q.key]=q,!0;const ne=Math.max(M.overscaledZ-y,b);for(let ee=M.overscaledZ-1;ee>=ne;ee--){const Ae=M.scaledTo(ee),_e=x.getLoadedTile(Ae);if(_e)return r.setCrossFadeLogic({fadingRole:ct.Base,fadingDirection:bt.Incoming,fadingParentID:_e.tileID,fadeEndTime:d+S}),_e.setCrossFadeLogic({fadingRole:ct.Parent,fadingDirection:bt.Departing,fadeEndTime:d+S}),c[Ae.key]=Ae,!0}return!1}function ai(x,r,c,d,y,b){if(!r.hasData())return!1;const S=r.tileID.children(y);let M=Yt(x,r,S,c,d,y,b);if(M)return!0;for(const N of S)Yt(x,r,N.children(y),c,d,y,b)&&(M=!0);return M}function Yt(x,r,c,d,y,b,S){if(c[0].overscaledZ>=b)return!1;let M=!1;for(const N of c){const j=x.getLoadedTile(N);if(!j)continue;const{fadingRole:q,fadingDirection:ne,fadingParentID:ee}=j;q===ct.Base&&ne===bt.Departing&&ee||(j.setCrossFadeLogic({fadingRole:ct.Base,fadingDirection:bt.Departing,fadingParentID:r.tileID,fadeEndTime:y+S}),r.setCrossFadeLogic({fadingRole:ct.Parent,fadingDirection:bt.Incoming,fadeEndTime:y+S})),d[N.key]=N,M=!0}return M}function Zn(x,r,c,d){const y=x.tileID;return!!x.selfFading||!x.hasData()&&!!r.has(y)&&(x.setSelfFadeLogic(c+d),!0)}function $i(x,r){var c;x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0;let d=r.tileID.canonical.x-x.tileID.canonical.x;const y=r.tileID.canonical.y-x.tileID.canonical.y,b=Math.pow(2,x.tileID.canonical.z),S=r.tileID.key;d===0&&y===0||Math.abs(y)>1||(Math.abs(d)>1&&(Math.abs(d+b)===1?d+=b:Math.abs(d-b)===1&&(d-=b)),r.dem&&x.dem&&(x.dem.backfillBorder(r.dem,d,y),!((c=x.neighboringTiles)===null||c===void 0)&&c[S]&&(x.neighboringTiles[S].backfilled=!0)))}class sl{constructor(){this._tiles={}}handleWrapJump(r){const c={};for(const d in this._tiles){const y=this._tiles[d];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+r),c[y.tileID.key]=y}this._tiles=c}setFeatureState(r,c){for(const d in this._tiles)this._tiles[d].setFeatureState(r,c)}getAllTiles(){return Object.values(this._tiles)}getAllIds(r=!1){return r?Object.values(this._tiles).map((c=>c.tileID)).sort(o.ax).map((c=>c.key)):Object.keys(this._tiles)}getTileById(r){return this._tiles[r]}setTile(r,c){this._tiles[r]=c}deleteTileById(r){delete this._tiles[r]}getLoadedTile(r){const c=this.getTileById(r.key);return c?.hasData()?c:null}isIdRenderable(r,c=!1){var d;return(d=this.getTileById(r))===null||d===void 0?void 0:d.isRenderable(c)}getRenderableIds(r=0,c){const d=[];for(const y of this.getAllIds())this.isIdRenderable(y,c)&&d.push(this.getTileById(y));return c?d.sort(((y,b)=>{const S=y.tileID,M=b.tileID,N=new o.P(S.canonical.x,S.canonical.y)._rotate(-r),j=new o.P(M.canonical.x,M.canonical.y)._rotate(-r);return S.overscaledZ-M.overscaledZ||j.y-N.y||j.x-N.x})).map((y=>y.tileID.key)):d.map((y=>y.tileID)).sort(o.ax).map((y=>y.key))}}class ns extends o.E{constructor(r,c,d){super(),this.id=r,this.dispatcher=d,this.on("data",(y=>this._dataHandler(y))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((y,b,S,M)=>{const N=new(ve(b.type))(y,b,S,M);if(N.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${N.id}`);return N})(r,c,d,this),this._inViewTiles=new sl,this._outOfViewCache=new o.ay(0,(y=>this._unloadTile(y))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ft,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){for(const c of this._inViewTiles.getAllTiles())c.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r),this._inViewTiles=new sl}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r of this._inViewTiles.getAllTiles())if(r.state!=="loaded"&&r.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,d){return o._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,d)}catch(y){r.state="errored",y.status!==404?this._source.fire(new o.k(y,{tile:r})):this.update(this.transform,this.terrain)}}))}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new o.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const c of this._inViewTiles.getAllTiles())c.upload(r),c.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(r){var c;return this._inViewTiles.getRenderableIds((c=this.transform)===null||c===void 0?void 0:c.bearingInRadians,r)}hasRenderableParent(r){const c=r.overscaledZ-1;if(c>=this._source.minzoom){const d=this.getLoadedTile(r.scaledTo(c));if(d)return this._inViewTiles.isIdRenderable(d.tileID.key)}return!1}reload(r,c=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const d of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(d);c&&!this._source.shouldReloadTile(y,c)||(r?this._reloadTile(d,"expired"):y.state!=="errored"&&this._reloadTile(d,"reloading"))}}}_reloadTile(r,c){return o._(this,void 0,void 0,(function*(){const d=this._inViewTiles.getTileById(r);d&&(d.state!=="loading"&&(d.state=c),yield this._loadTile(d,r,c))}))}_tileLoaded(r,c,d){r.timeAdded=H(),r.selfFading&&(r.fadeEndTime=r.timeAdded+this._rasterFadeDuration),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&(function(y,b){var S,M;const N=b.getRenderableIds();for(const j of N){if(!y.neighboringTiles||!y.neighboringTiles[j])continue;const q=b.getTileById(j);y.neighboringTiles[j].backfilled||$i(y,q),!((M=(S=q.neighboringTiles)===null||S===void 0?void 0:S[y.tileID.key])===null||M===void 0)&&M.backfilled||$i(q,y)}})(r,this._inViewTiles),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:r,coord:r.tileID}))}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._inViewTiles.getTileById(r)}_retainLoadedChildren(r,c){const d=this._getLoadedDescendents(c),y=new Set;for(const b of c){const S=d[b.key];if(!S?.length){y.add(b);continue}const M=b.overscaledZ+ns.maxOverzooming,N=S.filter((ne=>ne.tileID.overscaledZ<=M));if(!N.length){y.add(b);continue}const j=Math.min(...N.map((ne=>ne.tileID.overscaledZ))),q=N.filter((ne=>ne.tileID.overscaledZ===j)).map((ne=>ne.tileID));for(const ne of q)r[ne.key]=ne;this._areDescendentsComplete(q,j,b.overscaledZ)||y.add(b)}return y}_getLoadedDescendents(r){var c;const d={};for(const y of this._inViewTiles.getAllTiles().filter((b=>b.hasData())))for(const b of r)y.tileID.isChildOf(b)&&(d[c=b.key]||(d[c]=[])).push(y);return d}_areDescendentsComplete(r,c,d){return r.length===1&&r[0].isOverscaled()?r[0].overscaledZ===c:Math.pow(4,c-d)===r.length}getLoadedTile(r){return this._inViewTiles.getLoadedTile(r)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(c*d*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._outOfViewCache.setMaxSize(b)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);this._prevLng=r,c&&(this._inViewTiles.handleWrapJump(c),this._resetTileReloadTimers())}update(r,c){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map((N=>new o.a2(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y))):(d=Tn(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?r.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter((N=>this._source.hasTile(N))))):d=[],this.usedForTerrain&&(d=this._addTerrainIdealTiles(d));const y=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,y&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const b=wr(r,this._source),S=this._updateRetainedTiles(d,b),M=xn(this._source.type);M&&this._rasterFadeDuration>0&&!c&&(function(N,j,q,ne,ee,Ae,_e){const De=H(),ze=o.aw(j);for(const Qe of j){const Ge=N.getTileById(Qe.key);Ge.fadingDirection!==bt.Departing&&Ge.fadeOpacity!==0||Ge.resetFadeLogic(),Di(N,Ge,q,De,ne,ee,_e)||ai(N,Ge,q,De,Ae,_e)||Zn(Ge,ze,De,_e)||Ge.resetFadeLogic()}})(this._inViewTiles,d,S,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),M?this._cleanUpRasterTiles(S):this._cleanUpVectorTiles(S)}_cleanUpRasterTiles(r){for(const c of this._inViewTiles.getAllIds())r[c]||this._removeTile(c)}_cleanUpVectorTiles(r){for(const c of this._inViewTiles.getAllIds()){const d=this._inViewTiles.getTileById(c);r[c]?d.clearSymbolFadeHold():d.hasSymbolBuckets?d.holdingForSymbolFade()?d.symbolFadeFinished()&&this._removeTile(c):d.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(c)}}_addTerrainIdealTiles(r){const c=[];for(const d of r)if(d.canonical.z>this._source.minzoom){const y=d.scaledTo(d.canonical.z-1);c.push(y);const b=d.scaledTo(Math.max(this._source.minzoom,Math.min(d.canonical.z,5)));c.push(b)}return r.concat(c)}releaseSymbolFadeTiles(){for(const r of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(r).holdingForSymbolFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var d;const y=new Set;for(const j of r)this._addTile(j).hasData()||y.add(j);const b=r.reduce(((j,q)=>(j[q.key]=q,j)),{}),S=this._retainLoadedChildren(b,y),M={},N=Math.max(c-ns.maxUnderzooming,this._source.minzoom);for(const j of S){let q=this._inViewTiles.getTileById(j.key),ne=q?.wasRequested();for(let ee=j.overscaledZ-1;ee>=N;--ee){const Ae=j.scaledTo(ee);if(M[Ae.key])break;if(M[Ae.key]=!0,q=this.getTile(Ae),!q&&ne&&(q=this._addTile(Ae)),q){const _e=q.hasData();if((_e||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||ne)&&(b[Ae.key]=Ae),ne=q.wasRequested(),_e)break}}}return b}_addTile(r){let c=this._inViewTiles.getTileById(r.key);if(c)return c;c=this._outOfViewCache.getAndRemove(r),c&&(c.resetFadeLogic(),this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null));const d=c;return c||(c=new Ht(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._inViewTiles.setTile(r.key,c),d||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){this._clearTileReloadTimer(r);const d=c.getExpiryTimeout();d&&(this._timers[r]=setTimeout((()=>{this._reloadTile(r,"expired"),delete this._timers[r]}),d))}_clearTileReloadTimer(r){const c=this._timers[r];c&&(clearTimeout(c),delete this._timers[r])}_resetTileReloadTimers(){for(const r in this._timers)clearTimeout(this._timers[r]),delete this._timers[r];for(const r of this._inViewTiles.getAllIds()){const c=this._inViewTiles.getTileById(r);this._setTileReloadTimer(r,c)}}refreshTiles(r){for(const c of this._inViewTiles.getAllIds()){const d=this._inViewTiles.getTileById(c);(this._inViewTiles.isIdRenderable(c)||d.state=="errored")&&r.some((y=>y.equals(d.tileID.canonical)))&&this._reloadTile(c,"expired")}}_removeTile(r){const c=this._inViewTiles.getTileById(r);c&&(c.uses--,this._inViewTiles.deleteTileById(r),this._clearTileReloadTimer(r),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._outOfViewCache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){r.dataType==="source"&&(r.sourceDataType!=="metadata"?r.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(r.sourceDataChanged,r.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r of this._inViewTiles.getAllIds())this._removeTile(r);this._outOfViewCache.reset()}tilesIn(r,c,d){const y=[],b=this.transform;if(!b)return y;const S=b.getCoveringTilesDetailsProvider().allowWorldCopies(),M=d?b.getCameraQueryGeometry(r):r,N=Ae=>b.screenPointToMercatorCoordinate(Ae,this.terrain),j=this.transformBbox(r,N,!S),q=this.transformBbox(M,N,!S),ne=this.getIds(),ee=o.ac.fromPoints(q);for(let Ae=0;Ae<ne.length;Ae++){const _e=this._inViewTiles.getTileById(ne[Ae]);if(_e.holdingForSymbolFade())continue;const De=S?[_e.tileID]:[_e.tileID.unwrapTo(-1),_e.tileID.unwrapTo(0)],ze=Math.pow(2,b.zoom-_e.tileID.overscaledZ),Qe=c*_e.queryPadding*o.a5/_e.tileSize/ze;for(const Ge of De){const st=ee.map((Xe=>Ge.getTilePoint(new o.ab(Xe.x,Xe.y))));if(st.expandBy(Qe),st.intersects(Bn)){const Xe=j.map((ft=>Ge.getTilePoint(ft))),At=q.map((ft=>Ge.getTilePoint(ft)));y.push({tile:_e,tileID:S?Ge:Ge.unwrapTo(0),queryGeometry:Xe,cameraQueryGeometry:At,scale:ze})}}}return y}transformBbox(r,c,d){let y=r.map(c);if(d){const b=o.ac.fromPoints(r);b.shrinkBy(.001*Math.min(b.width(),b.height()));const S=b.map(c);o.ac.fromPoints(y).covers(S)||(y=y.map((M=>M.x>.5?new o.ab(M.x-1,M.y,M.z):M)))}return y}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map((d=>this._inViewTiles.getTileById(d).tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){return!!this._source.hasTransition()||!(!xn(this._source.type)||!(function(r,c){if(c<=0)return!1;const d=H();for(const y of r.getAllTiles())if(y.fadeEndTime>=d)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(r){this._rasterFadeDuration=r}setFeatureState(r,c,d){this._state.updateState(r=r||o.aa,c,d)}removeFeatureState(r,c,d){this._state.removeFeatureState(r=r||o.aa,c,d)}getFeatureState(r,c){return this._state.getState(r=r||o.aa,c)}setDependencies(r,c,d){const y=this._inViewTiles.getTileById(r);y&&y.setDependencies(c,d)}reloadTilesForDependencies(r,c){for(const d of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(d).hasDependency(r,c)&&this._reloadTile(d,"reloading");this._outOfViewCache.filter((d=>!d.hasDependency(r,c)))}areTilesLoaded(){for(const r of this._inViewTiles.getAllTiles())if(r.state!=="loaded"&&r.state!=="errored")return!1;return!0}}ns.maxUnderzooming=10,ns.maxOverzooming=3;class pr{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=o.ao(r,0,1);let c=1,d=this._distances[c];const y=r*this.paddedLength+this.padding;for(;d<y&&c<this._distances.length;)d=this._distances[++c];const b=c-1,S=this._distances[b],M=d-S,N=M>0?(y-S)/M:0;return this.points[b].mult(1-N).add(this.points[c].mult(N))}}function nn(x,r){let c=!0;return x==="always"||x!=="never"&&r!=="never"||(c=!1),c}class un{constructor(r,c,d){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(c/d);for(let S=0;S<this.xCellCount*this.yCellCount;S++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,d,y,b){this._forEachCell(c,d,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(r,c,d,y){this._forEachCell(c-y,d-y,c+y,d+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(d),this.circles.push(y)}_insertBoxCell(r,c,d,y,b,S){this.boxCells[b].push(S)}_insertCircleCell(r,c,d,y,b,S){this.circleCells[b].push(S)}_query(r,c,d,y,b,S,M){if(d<0||r>this.width||y<0||c>this.height)return[];const N=[];if(r<=0&&c<=0&&this.width<=d&&this.height<=y){if(b)return[{key:null,x1:r,y1:c,x2:d,y2:y}];for(let j=0;j<this.boxKeys.length;j++)N.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const q=this.circles[3*j],ne=this.circles[3*j+1],ee=this.circles[3*j+2];N.push({key:this.circleKeys[j],x1:q-ee,y1:ne-ee,x2:q+ee,y2:ne+ee})}}else this._forEachCell(r,c,d,y,this._queryCell,N,{hitTest:b,overlapMode:S,seenUids:{box:{},circle:{}}},M);return N}query(r,c,d,y){return this._query(r,c,d,y,!1,null)}hitTest(r,c,d,y,b,S){return this._query(r,c,d,y,!0,b,S).length>0}hitTestCircle(r,c,d,y,b){const S=r-d,M=r+d,N=c-d,j=c+d;if(M<0||S>this.width||j<0||N>this.height)return!1;const q=[];return this._forEachCell(S,N,M,j,this._queryCellCircle,q,{hitTest:!0,overlapMode:y,circle:{x:r,y:c,radius:d},seenUids:{box:{},circle:{}}},b),q.length>0}_queryCell(r,c,d,y,b,S,M,N){const{seenUids:j,hitTest:q,overlapMode:ne}=M,ee=this.boxCells[b];if(ee!==null){const _e=this.bboxes;for(const De of ee)if(!j.box[De]){j.box[De]=!0;const ze=4*De,Qe=this.boxKeys[De];if(r<=_e[ze+2]&&c<=_e[ze+3]&&d>=_e[ze+0]&&y>=_e[ze+1]&&(!N||N(Qe))&&(!q||!nn(ne,Qe.overlapMode))&&(S.push({key:Qe,x1:_e[ze],y1:_e[ze+1],x2:_e[ze+2],y2:_e[ze+3]}),q))return!0}}const Ae=this.circleCells[b];if(Ae!==null){const _e=this.circles;for(const De of Ae)if(!j.circle[De]){j.circle[De]=!0;const ze=3*De,Qe=this.circleKeys[De];if(this._circleAndRectCollide(_e[ze],_e[ze+1],_e[ze+2],r,c,d,y)&&(!N||N(Qe))&&(!q||!nn(ne,Qe.overlapMode))){const Ge=_e[ze],st=_e[ze+1],Xe=_e[ze+2];if(S.push({key:Qe,x1:Ge-Xe,y1:st-Xe,x2:Ge+Xe,y2:st+Xe}),q)return!0}}}return!1}_queryCellCircle(r,c,d,y,b,S,M,N){const{circle:j,seenUids:q,overlapMode:ne}=M,ee=this.boxCells[b];if(ee!==null){const _e=this.bboxes;for(const De of ee)if(!q.box[De]){q.box[De]=!0;const ze=4*De,Qe=this.boxKeys[De];if(this._circleAndRectCollide(j.x,j.y,j.radius,_e[ze+0],_e[ze+1],_e[ze+2],_e[ze+3])&&(!N||N(Qe))&&!nn(ne,Qe.overlapMode))return S.push(!0),!0}}const Ae=this.circleCells[b];if(Ae!==null){const _e=this.circles;for(const De of Ae)if(!q.circle[De]){q.circle[De]=!0;const ze=3*De,Qe=this.circleKeys[De];if(this._circlesCollide(_e[ze],_e[ze+1],_e[ze+2],j.x,j.y,j.radius)&&(!N||N(Qe))&&!nn(ne,Qe.overlapMode))return S.push(!0),!0}}}_forEachCell(r,c,d,y,b,S,M,N){const j=this._convertToXCellCoord(r),q=this._convertToYCellCoord(c),ne=this._convertToXCellCoord(d),ee=this._convertToYCellCoord(y);for(let Ae=j;Ae<=ne;Ae++)for(let _e=q;_e<=ee;_e++)if(b.call(this,r,c,d,y,this.xCellCount*_e+Ae,S,M,N))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,d,y,b,S){const M=y-r,N=b-c,j=d+S;return j*j>M*M+N*N}_circleAndRectCollide(r,c,d,y,b,S,M){const N=(S-y)/2,j=Math.abs(r-(y+N));if(j>N+d)return!1;const q=(M-b)/2,ne=Math.abs(c-(b+q));if(ne>q+d)return!1;if(j<=N||ne<=q)return!0;const ee=j-N,Ae=ne-q;return ee*ee+Ae*Ae<=d*d}}function Ri(x,r,c){const d=o.N();if(!x){const{vecSouth:ne,vecEast:ee}=ks(r),Ae=E();Ae[0]=ee[0],Ae[1]=ee[1],Ae[2]=ne[0],Ae[3]=ne[1],y=Ae,(q=(S=(b=Ae)[0])*(j=b[3])-(N=b[2])*(M=b[1]))&&(y[0]=j*(q=1/q),y[1]=-M*q,y[2]=-N*q,y[3]=S*q),d[0]=Ae[0],d[1]=Ae[1],d[4]=Ae[2],d[5]=Ae[3]}var y,b,S,M,N,j,q;return o.Q(d,d,[1/c,1/c,1]),d}function El(x,r,c,d){if(x){const y=o.N();if(!r){const{vecSouth:b,vecEast:S}=ks(c);y[0]=S[0],y[1]=S[1],y[4]=b[0],y[5]=b[1]}return o.Q(y,y,[d,d,1]),y}return c.pixelsToClipSpaceMatrix}function ks(x){const r=Math.cos(x.rollInRadians),c=Math.sin(x.rollInRadians),d=Math.cos(x.pitchInRadians),y=Math.cos(x.bearingInRadians),b=Math.sin(x.bearingInRadians),S=o.aD();S[0]=-y*d*c-b*r,S[1]=-b*d*c+y*r;const M=o.aE(S);M<1e-9?o.aF(S):o.aG(S,S,1/M);const N=o.aD();N[0]=y*d*r-b*c,N[1]=b*d*r+y*c;const j=o.aE(N);return j<1e-9?o.aF(N):o.aG(N,N,1/j),{vecEast:N,vecSouth:S}}function fn(x,r,c,d){let y;d?(y=[x,r,d(x,r),1],o.aI(y,y,c)):(y=[x,r,0,1],IA(y,y,c));const b=y[3];return{point:new o.P(y[0]/b,y[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function ol(x,r){return .5+x/r*.5}function al(x,r){return x.x>=-r[0]&&x.x<=r[0]&&x.y>=-r[1]&&x.y<=r[1]}function ec(x,r,c,d,y,b,S,M,N,j,q,ne,ee){const Ae=c?x.textSizeData:x.iconSizeData,_e=o.az(Ae,r.transform.zoom),De=[256/r.width*2+1,256/r.height*2+1],ze=c?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;ze.clear();const Qe=x.lineVertexArray,Ge=c?x.text.placedSymbolArray:x.icon.placedSymbolArray,st=r.transform.width/r.transform.height;let Xe=!1;for(let At=0;At<Ge.length;At++){const ft=Ge.get(At);if(ft.hidden||ft.writingMode===o.aA.vertical&&!Xe){Ba(ft.numGlyphs,ze);continue}Xe=!1;const nt=new o.P(ft.anchorX,ft.anchorY),wt={getElevation:ee,pitchedLabelPlaneMatrix:d,lineVertexArray:Qe,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:nt,unwrappedTileID:N,width:j,height:q,translation:ne},Dt=ll(ft.anchorX,ft.anchorY,wt);if(!al(Dt.point,De)){Ba(ft.numGlyphs,ze);continue}const Lt=ol(r.transform.cameraToCenterDistance,Dt.signedDistanceFromCamera),Rt=o.aB(Ae,_e,ft),Qt=b?Rt*r.transform.getPitchedTextCorrection(ft.anchorX,ft.anchorY,N)/Lt:Rt*Lt,nr=tc({projectionContext:wt,pitchedLabelPlaneMatrixInverse:y,symbol:ft,fontSize:Qt,flip:!1,keepUpright:S,glyphOffsetArray:x.glyphOffsetArray,dynamicLayoutVertexArray:ze,aspectRatio:st,rotateToLine:M});Xe=nr.useVertical,(nr.notEnoughRoom||Xe||nr.needsFlipping&&tc({projectionContext:wt,pitchedLabelPlaneMatrixInverse:y,symbol:ft,fontSize:Qt,flip:!0,keepUpright:S,glyphOffsetArray:x.glyphOffsetArray,dynamicLayoutVertexArray:ze,aspectRatio:st,rotateToLine:M}).notEnoughRoom)&&Ba(ft.numGlyphs,ze)}c?x.text.dynamicLayoutVertexBuffer.updateData(ze):x.icon.dynamicLayoutVertexBuffer.updateData(ze)}function Ec(x,r,c,d,y,b,S,M){const N=b.glyphStartIndex+b.numGlyphs,j=b.lineStartIndex,q=b.lineStartIndex+b.lineLength,ne=r.getoffsetX(b.glyphStartIndex),ee=r.getoffsetX(N-1),Ae=Ro(x*ne,c,d,y,b.segment,j,q,M,S);if(!Ae)return null;const _e=Ro(x*ee,c,d,y,b.segment,j,q,M,S);return _e?M.projectionCache.anyProjectionOccluded?null:{first:Ae,last:_e}:null}function di(x,r,c,d){return x===o.aA.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*d?{useVertical:!0}:(x===o.aA.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function tc(x){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:d,fontSize:y,flip:b,keepUpright:S,glyphOffsetArray:M,dynamicLayoutVertexArray:N,aspectRatio:j,rotateToLine:q}=x,ne=y/24,ee=d.lineOffsetX*ne,Ae=d.lineOffsetY*ne;let _e;if(d.numGlyphs>1){const De=d.glyphStartIndex+d.numGlyphs,ze=d.lineStartIndex,Qe=d.lineStartIndex+d.lineLength,Ge=Ec(ne,M,ee,Ae,b,d,q,r);if(!Ge)return{notEnoughRoom:!0};const st=rA(Ge.first.point.x,Ge.first.point.y,r,c),Xe=rA(Ge.last.point.x,Ge.last.point.y,r,c);if(S&&!b){const At=di(d.writingMode,st,Xe,j);if(At)return At}_e=[Ge.first];for(let At=d.glyphStartIndex+1;At<De-1;At++){const ft=Ro(ne*M.getoffsetX(At),ee,Ae,b,d.segment,ze,Qe,r,q);if(!ft)return{notEnoughRoom:!0};_e.push(ft)}_e.push(Ge.last)}else{if(S&&!b){const ze=jn(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,Qe=d.lineStartIndex+d.segment+1,Ge=new o.P(r.lineVertexArray.getx(Qe),r.lineVertexArray.gety(Qe)),st=jn(Ge.x,Ge.y,r),Xe=st.signedDistanceFromCamera>0?st.point:Sl(r.tileAnchorPoint,Ge,ze,1,r),At=rA(ze.x,ze.y,r,c),ft=rA(Xe.x,Xe.y,r,c),nt=di(d.writingMode,At,ft,j);if(nt)return nt}const De=Ro(ne*M.getoffsetX(d.glyphStartIndex),ee,Ae,b,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,r,q);if(!De||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};_e=[De]}for(const De of _e)o.aH(N,De.point,De.angle);return{}}function Sl(x,r,c,d,y){const b=x.add(x.sub(r)._unit()),S=jn(b.x,b.y,y).point,M=c.sub(S);return c.add(M._mult(d/M.mag()))}function Ci(x,r,c){const d=r.projectionCache;if(d.projections[x])return d.projections[x];const y=new o.P(r.lineVertexArray.getx(x),r.lineVertexArray.gety(x)),b=jn(y.x,y.y,r);if(b.signedDistanceFromCamera>0)return d.projections[x]=b.point,d.anyProjectionOccluded=d.anyProjectionOccluded||b.isOccluded,b.point;const S=x-c.direction;return Sl(c.distanceFromAnchor===0?r.tileAnchorPoint:new o.P(r.lineVertexArray.getx(S),r.lineVertexArray.gety(S)),y,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function jn(x,r,c){const d=x+c.translation[0],y=r+c.translation[1];let b;return c.pitchWithMap?(b=fn(d,y,c.pitchedLabelPlaneMatrix,c.getElevation),b.isOccluded=!1):(b=c.transform.projectTileCoordinates(d,y,c.unwrappedTileID,c.getElevation),b.point.x=(.5*b.point.x+.5)*c.width,b.point.y=(.5*-b.point.y+.5)*c.height),b}function rA(x,r,c,d){if(c.pitchWithMap){const y=[x,r,0,1];return o.aI(y,y,d),c.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],c.unwrappedTileID,c.getElevation).point}return{x:x/c.width*2-1,y:1-r/c.height*2}}function ll(x,r,c){return c.transform.projectTileCoordinates(x,r,c.unwrappedTileID,c.getElevation)}function cl(x,r,c){return x._unit()._perp()._mult(r*c)}function Us(x,r,c,d,y,b,S,M,N){if(M.projectionCache.offsets[x])return M.projectionCache.offsets[x];const j=c.add(r);if(x+N.direction<d||x+N.direction>=y)return M.projectionCache.offsets[x]=j,j;const q=Ci(x+N.direction,M,N),ne=cl(q.sub(c),S,N.direction),ee=c.add(ne),Ae=q.add(ne);return M.projectionCache.offsets[x]=o.aJ(b,j,ee,Ae)||j,M.projectionCache.offsets[x]}function Ro(x,r,c,d,y,b,S,M,N){const j=d?x-r:x+r;let q=j>0?1:-1,ne=0;d&&(q*=-1,ne=Math.PI),q<0&&(ne+=Math.PI);let ee,Ae=q>0?b+y:b+y+1;M.projectionCache.cachedAnchorPoint?ee=M.projectionCache.cachedAnchorPoint:(ee=jn(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=ee);let _e,De,ze=ee,Qe=ee,Ge=0,st=0;const Xe=Math.abs(j),At=[];let ft;for(;Ge+st<=Xe;){if(Ae+=q,Ae<b||Ae>=S)return null;Ge+=st,Qe=ze,De=_e;const Dt={absOffsetX:Xe,direction:q,distanceFromAnchor:Ge,previousVertex:Qe};if(ze=Ci(Ae,M,Dt),c===0)At.push(Qe),ft=ze.sub(Qe);else{let Lt;const Rt=ze.sub(Qe);Lt=Rt.mag()===0?cl(Ci(Ae+q,M,Dt).sub(ze),c,q):cl(Rt,c,q),De||(De=Qe.add(Lt)),_e=Us(Ae,Lt,ze,b,S,De,c,M,Dt),At.push(De),ft=_e.sub(De)}st=ft.mag()}const nt=ft._mult((Xe-Ge)/st)._add(De||Qe),wt=ne+Math.atan2(ze.y-Qe.y,ze.x-Qe.x);return At.push(nt),{point:nt,angle:N?wt:0,path:At}}const ds=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ba(x,r){for(let c=0;c<x;c++){const d=r.length;r.resize(d+4),r.float32.set(ds,3*d)}}function IA(x,r,c){const d=r[0],y=r[1];return x[0]=c[0]*d+c[4]*y+c[12],x[1]=c[1]*d+c[5]*y+c[13],x[3]=c[3]*d+c[7]*y+c[15],x}const Mn=100;class Sc{constructor(r,c=new un(r.width+200,r.height+200,25),d=new un(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=d,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Mn,this.screenBottomBoundary=r.height+Mn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,d,y,b,S,M,N,j,q,ne,ee){const Ae=this.projectAndGetPerspectiveRatio(r.anchorPointX+N[0],r.anchorPointY+N[1],b,q,ee),_e=d*Ae.perspectiveRatio;let De;if(S||M)De=this._projectCollisionBox(r,_e,y,b,S,M,N,Ae,q,ne,ee);else{const ft=Ae.x+(ne?ne.x*_e:0),nt=Ae.y+(ne?ne.y*_e:0);De={allPointsOccluded:!1,box:[ft+r.x1*_e,nt+r.y1*_e,ft+r.x2*_e,nt+r.y2*_e]}}const[ze,Qe,Ge,st]=De.box,Xe=S?De.allPointsOccluded:Ae.isOccluded;let At=Xe;return At||(At=Ae.perspectiveRatio<this.perspectiveRatioCutoff),At||(At=!this.isInsideGrid(ze,Qe,Ge,st)),At||c!=="always"&&this.grid.hitTest(ze,Qe,Ge,st,c,j)?{box:[ze,Qe,Ge,st],placeable:!1,offscreen:!1,occluded:Xe}:{box:[ze,Qe,Ge,st],placeable:!0,offscreen:this.isOffscreen(ze,Qe,Ge,st),occluded:Xe}}placeCollisionCircles(r,c,d,y,b,S,M,N,j,q,ne,ee,Ae,_e){const De=[],ze=new o.P(c.anchorX,c.anchorY),Qe=this.getPerspectiveRatio(ze.x,ze.y,S,_e),Ge=(j?b*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,S)/Qe:b*Qe)/o.aN,st={getElevation:_e,pitchedLabelPlaneMatrix:M,lineVertexArray:d,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ze,unwrappedTileID:S,width:this.transform.width,height:this.transform.height,translation:Ae},Xe=Ec(Ge,y,c.lineOffsetX*Ge,c.lineOffsetY*Ge,!1,c,!1,st);let At=!1,ft=!1,nt=!0;if(Xe){const wt=.5*ne*Qe+ee,Dt=new o.P(-100,-100),Lt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Rt=new pr,Qt=Xe.first,nr=Xe.last;let Ar=[];for(let vn=Qt.path.length-1;vn>=1;vn--)Ar.push(Qt.path[vn]);for(let vn=1;vn<nr.path.length;vn++)Ar.push(nr.path[vn]);const rr=2.5*wt;if(j){const vn=this.projectPathToScreenSpace(Ar,st);Ar=vn.some((Ai=>Ai.signedDistanceFromCamera<=0))?[]:vn.map((Ai=>Ai.point))}let Dr=[];if(Ar.length>0){const vn=Ar[0].clone(),Ai=Ar[0].clone();for(let zi=1;zi<Ar.length;zi++)vn.x=Math.min(vn.x,Ar[zi].x),vn.y=Math.min(vn.y,Ar[zi].y),Ai.x=Math.max(Ai.x,Ar[zi].x),Ai.y=Math.max(Ai.y,Ar[zi].y);Dr=vn.x>=Dt.x&&Ai.x<=Lt.x&&vn.y>=Dt.y&&Ai.y<=Lt.y?[Ar]:Ai.x<Dt.x||vn.x>Lt.x||Ai.y<Dt.y||vn.y>Lt.y?[]:o.aK([Ar],Dt.x,Dt.y,Lt.x,Lt.y)}for(const vn of Dr){Rt.reset(vn,.25*wt);let Ai=0;Ai=Rt.length<=.5*wt?1:Math.ceil(Rt.paddedLength/rr)+1;for(let zi=0;zi<Ai;zi++){const ui=zi/Math.max(Ai-1,1),Gi=Rt.lerp(ui),Pi=Gi.x+Mn,Is=Gi.y+Mn;De.push(Pi,Is,wt,0);const Ki=Pi-wt,eo=Is-wt,Ts=Pi+wt,hi=Is+wt;if(nt=nt&&this.isOffscreen(Ki,eo,Ts,hi),ft=ft||this.isInsideGrid(Ki,eo,Ts,hi),r!=="always"&&this.grid.hitTestCircle(Pi,Is,wt,r,q)&&(At=!0,!N))return{circles:[],offscreen:!1,collisionDetected:At}}}}return{circles:!N&&At||!ft||Qe<this.perspectiveRatioCutoff?[]:De,offscreen:nt,collisionDetected:At}}projectPathToScreenSpace(r,c){const d=(function(y,b){const S=o.N();return o.aC(S,b.pitchedLabelPlaneMatrix),y.map((M=>{const N=fn(M.x,M.y,S,b.getElevation),j=b.transform.projectTileCoordinates(N.point.x,N.point.y,b.unwrappedTileID,b.getElevation);return j.point.x=(.5*j.point.x+.5)*b.width,j.point.y=(.5*-j.point.y+.5)*b.height,j}))})(r,c);return(function(y){let b=0,S=0,M=0,N=0;for(let j=0;j<y.length;j++)y[j].isOccluded?(M=j+1,N=0):(N++,N>S&&(S=N,b=M));return y.slice(b,b+S)})(d)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],d=new o.ac;for(const ne of r){const ee=new o.P(ne.x+Mn,ne.y+Mn);d.extend(ee),c.push(ee)}const{minX:y,minY:b,maxX:S,maxY:M}=d,N=this.grid.query(y,b,S,M).concat(this.ignoredGrid.query(y,b,S,M)),j={},q={};for(const ne of N){const ee=ne.key;if(j[ee.bucketInstanceId]===void 0&&(j[ee.bucketInstanceId]={}),j[ee.bucketInstanceId][ee.featureIndex])continue;const Ae=[new o.P(ne.x1,ne.y1),new o.P(ne.x2,ne.y1),new o.P(ne.x2,ne.y2),new o.P(ne.x1,ne.y2)];o.aL(c,Ae)&&(j[ee.bucketInstanceId][ee.featureIndex]=!0,q[ee.bucketInstanceId]===void 0&&(q[ee.bucketInstanceId]=[]),q[ee.bucketInstanceId].push(ee.featureIndex))}return q}insertCollisionBox(r,c,d,y,b,S){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:S,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,d,y,b,S){const M=d?this.ignoredGrid:this.grid,N={bucketInstanceId:y,featureIndex:b,collisionGroupID:S,overlapMode:c};for(let j=0;j<r.length;j+=4)M.insertCircle(N,r[j],r[j+1],r[j+2])}projectAndGetPerspectiveRatio(r,c,d,y,b){if(b){let S;y?(S=[r,c,y(r,c),1],o.aI(S,S,b)):(S=[r,c,0,1],IA(S,S,b));const M=S[3];return{x:(S[0]/M+1)/2*this.transform.width+Mn,y:(-S[1]/M+1)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M*.5,isOccluded:!1,signedDistanceFromCamera:M}}{const S=this.transform.projectTileCoordinates(r,c,d,y);return{x:(S.point.x+1)/2*this.transform.width+Mn,y:(1-S.point.y)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5,isOccluded:S.isOccluded,signedDistanceFromCamera:S.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,d,y){const b=this.transform.projectTileCoordinates(r,c,d,y);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(r,c,d,y){return d<Mn||r>=this.screenRightBoundary||y<Mn||c>this.screenBottomBoundary}isInsideGrid(r,c,d,y){return d>=0&&r<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=o.as([]);return o.O(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,d,y,b,S,M,N,j,q,ne){let ee=1,Ae=0,_e=0,De=1;const ze=r.anchorPointX+M[0],Qe=r.anchorPointY+M[1];if(S&&!b){const Ar=this.projectAndGetPerspectiveRatio(ze+1,Qe,y,j,ne),rr=Ar.x-N.x,Dr=Math.atan((Ar.y-N.y)/rr)+(rr<0?Math.PI:0),vn=Math.sin(Dr),Ai=Math.cos(Dr);ee=Ai,Ae=vn,_e=-vn,De=Ai}else if(!S&&b){const Ar=ks(this.transform);ee=Ar.vecEast[0],Ae=Ar.vecEast[1],_e=Ar.vecSouth[0],De=Ar.vecSouth[1]}let Ge=N.x,st=N.y,Xe=c;b&&(Ge=ze,st=Qe,Xe=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),Xe*=this.transform.getPitchedTextCorrection(ze,Qe,y),q||(Xe*=o.ao(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(Ge+=ee*q.x*Xe+_e*q.y*Xe,st+=Ae*q.x*Xe+De*q.y*Xe);const At=r.x1*Xe,ft=r.x2*Xe,nt=(At+ft)/2,wt=r.y1*Xe,Dt=r.y2*Xe,Lt=(wt+Dt)/2,Rt=[{offsetX:At,offsetY:wt},{offsetX:nt,offsetY:wt},{offsetX:ft,offsetY:wt},{offsetX:ft,offsetY:Lt},{offsetX:ft,offsetY:Dt},{offsetX:nt,offsetY:Dt},{offsetX:At,offsetY:Dt},{offsetX:At,offsetY:Lt}];let Qt=[];for(const{offsetX:Ar,offsetY:rr}of Rt)Qt.push(new o.P(Ge+ee*Ar+_e*rr,st+Ae*Ar+De*rr));let nr=!1;if(b){const Ar=Qt.map((rr=>this.projectAndGetPerspectiveRatio(rr.x,rr.y,y,j,ne)));nr=Ar.some((rr=>!rr.isOccluded)),Qt=Ar.map((rr=>new o.P(rr.x,rr.y)))}else nr=!0;return{box:o.aM(Qt),allPointsOccluded:!nr}}}class No{constructor(r,c,d,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):y&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Qo{constructor(r,c,d,y,b){this.text=new No(r?r.text:null,c,d,b),this.icon=new No(r?r.icon:null,c,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Fc{constructor(r,c,d){this.text=r,this.icon=c,this.skipFade=d}}class la{constructor(r,c,d,y,b){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=y,this.tileID=b}}class ys{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[r]}}function Oo(x,r,c,d,y){const{horizontalAlign:b,verticalAlign:S}=o.aT(x);return new o.P(-(b-.5)*r+d[0]*y,-(S-.5)*c+d[1]*y)}class nA{constructor(r,c,d,y,b){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new Sc(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ys(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(d,y)=>c.getElevation(r,d,y):null}getBucketParts(r,c,d,y){const b=d.getBucket(c),S=d.latestFeatureIndex;if(!b||!S||c.id!==b.layerIds[0])return;const M=d.collisionBoxArray,N=b.layers[0].layout,j=b.layers[0].paint,q=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),ne=d.tileSize/o.a5,ee=d.tileID.toUnwrapped(),Ae=N.get("text-rotation-alignment")==="map",_e=o.aO(d,1,this.transform.zoom),De=o.aP(this.collisionIndex.transform,d,j.get("text-translate"),j.get("text-translate-anchor")),ze=o.aP(this.collisionIndex.transform,d,j.get("icon-translate"),j.get("icon-translate-anchor")),Qe=Ri(Ae,this.transform,_e);this.retainedQueryData[b.bucketInstanceId]=new la(b.bucketInstanceId,S,b.sourceLayerIndex,b.index,d.tileID);const Ge={bucket:b,layout:N,translationText:De,translationIcon:ze,unwrappedTileID:ee,pitchedLabelPlaneMatrix:Qe,scale:q,textPixelRatio:ne,holdingForFade:d.holdingForSymbolFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:o.az(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const st of b.sortKeyRanges){const{sortKey:Xe,symbolInstanceStart:At,symbolInstanceEnd:ft}=st;r.push({sortKey:Xe,symbolInstanceStart:At,symbolInstanceEnd:ft,parameters:Ge})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ge})}attemptAnchorPlacement(r,c,d,y,b,S,M,N,j,q,ne,ee,Ae,_e,De,ze,Qe,Ge,st,Xe){const At=o.aQ[r.textAnchor],ft=[r.textOffset0,r.textOffset1],nt=Oo(At,d,y,ft,b),wt=this.collisionIndex.placeCollisionBox(c,ee,N,j,q,M,S,ze,ne.predicate,st,nt,Xe);if((!Ge||this.collisionIndex.placeCollisionBox(Ge,ee,N,j,q,M,S,Qe,ne.predicate,st,nt,Xe).placeable)&&wt.placeable){let Dt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID].text&&(Dt=this.prevPlacement.variableOffsets[Ae.crossTileID].anchor),Ae.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ae.crossTileID]={textOffset:ft,width:d,height:y,anchor:At,textBoxScale:b,prevAnchor:Dt},this.markUsedJustification(_e,At,Ae,De),_e.allowVerticalPlacement&&(this.markUsedOrientation(_e,De,Ae),this.placedOrientations[Ae.crossTileID]=De),{shift:nt,placedGlyphBoxes:wt}}}placeLayerBucketPart(r,c,d){const{bucket:y,layout:b,translationText:S,translationIcon:M,unwrappedTileID:N,pitchedLabelPlaneMatrix:j,textPixelRatio:q,holdingForFade:ne,collisionBoxArray:ee,partiallyEvaluatedTextSize:Ae,collisionGroup:_e}=r.parameters,De=b.get("text-optional"),ze=b.get("icon-optional"),Qe=o.aR(b,"text-overlap","text-allow-overlap"),Ge=Qe==="always",st=o.aR(b,"icon-overlap","icon-allow-overlap"),Xe=st==="always",At=b.get("text-rotation-alignment")==="map",ft=b.get("text-pitch-alignment")==="map",nt=b.get("icon-text-fit")!=="none",wt=b.get("symbol-z-order")==="viewport-y",Dt=Ge&&(Xe||!y.hasIconData()||ze),Lt=Xe&&(Ge||!y.hasTextData()||De);!y.collisionArrays&&ee&&y.deserializeCollisionBoxes(ee);const Rt=this.retainedQueryData[y.bucketInstanceId].tileID,Qt=this._getTerrainElevationFunc(Rt),nr=this.transform.getFastPathSimpleProjectionMatrix(Rt),Ar=(rr,Dr,vn)=>{var Ai,zi;if(c[rr.crossTileID])return;if(ne)return void(this.placements[rr.crossTileID]=new Fc(!1,!1,!1));let ui=!1,Gi=!1,Pi=!0,Is=null,Ki={box:null,placeable:!1,offscreen:null,occluded:!1},eo={placeable:!1},Ts=null,hi=null,Ao=null,yo=0,dc=0,mA=0;Dr.textFeatureIndex?yo=Dr.textFeatureIndex:rr.useRuntimeCollisionCircles&&(yo=rr.featureIndex),Dr.verticalTextFeatureIndex&&(dc=Dr.verticalTextFeatureIndex);const GA=Dr.textBox;if(GA){const to=Os=>{let ro=o.aA.horizontal;if(y.allowVerticalPlacement&&!Os&&this.prevPlacement){const Ka=this.prevPlacement.placedOrientations[rr.crossTileID];Ka&&(this.placedOrientations[rr.crossTileID]=Ka,ro=Ka,this.markUsedOrientation(y,ro,rr))}return ro},Zo=(Os,ro)=>{if(y.allowVerticalPlacement&&rr.numVerticalGlyphVertices>0&&Dr.verticalTextBox){for(const Ka of y.writingModes)if(Ka===o.aA.vertical?(Ki=ro(),eo=Ki):Ki=Os(),Ki&&Ki.placeable)break}else Ki=Os()},vo=rr.textAnchorOffsetStartIndex,vl=rr.textAnchorOffsetEndIndex;if(vl===vo){const Os=(ro,Ka)=>{const cs=this.collisionIndex.placeCollisionBox(ro,Qe,q,Rt,N,ft,At,S,_e.predicate,Qt,void 0,nr);return cs&&cs.placeable&&(this.markUsedOrientation(y,Ka,rr),this.placedOrientations[rr.crossTileID]=Ka),cs};Zo((()=>Os(GA,o.aA.horizontal)),(()=>{const ro=Dr.verticalTextBox;return y.allowVerticalPlacement&&rr.numVerticalGlyphVertices>0&&ro?Os(ro,o.aA.vertical):{box:null,offscreen:null}})),to(Ki&&Ki.placeable)}else{let Os=o.aQ[(zi=(Ai=this.prevPlacement)===null||Ai===void 0?void 0:Ai.variableOffsets[rr.crossTileID])===null||zi===void 0?void 0:zi.anchor];const ro=(cs,qa,Xo)=>{const Vh=cs.x2-cs.x1,Ff=cs.y2-cs.y1,KA=rr.textBoxScale,qA=nt&&st==="never"?qa:null;let gA=null,Gh=Qe==="never"?1:2,uh="never";Os&&Gh++;for(let hh=0;hh<Gh;hh++){for(let pu=vo;pu<vl;pu++){const Kh=y.textAnchorOffsets.get(pu);if(Os&&Kh.textAnchor!==Os)continue;const fh=this.attemptAnchorPlacement(Kh,cs,Vh,Ff,KA,At,ft,q,Rt,N,_e,uh,rr,y,Xo,S,M,qA,Qt);if(fh&&(gA=fh.placedGlyphBoxes,gA&&gA.placeable))return ui=!0,Is=fh.shift,gA}Os?Os=null:uh=Qe}return d&&!gA&&(gA={box:this.collisionIndex.placeCollisionBox(GA,"always",q,Rt,N,ft,At,S,_e.predicate,Qt,void 0,nr).box,offscreen:!1,placeable:!1,occluded:!1}),gA};Zo((()=>ro(GA,Dr.iconBox,o.aA.horizontal)),(()=>{const cs=Dr.verticalTextBox;return y.allowVerticalPlacement&&(!Ki||!Ki.placeable)&&rr.numVerticalGlyphVertices>0&&cs?ro(cs,Dr.verticalIconBox,o.aA.vertical):{box:null,occluded:!0,offscreen:null}})),Ki&&(ui=Ki.placeable,Pi=Ki.offscreen);const Ka=to(Ki&&Ki.placeable);if(!ui&&this.prevPlacement){const cs=this.prevPlacement.variableOffsets[rr.crossTileID];cs&&(this.variableOffsets[rr.crossTileID]=cs,this.markUsedJustification(y,cs.anchor,rr,Ka))}}}if(Ts=Ki,ui=Ts&&Ts.placeable,Pi=Ts&&Ts.offscreen,rr.useRuntimeCollisionCircles&&rr.centerJustifiedTextSymbolIndex>=0){const to=y.text.placedSymbolArray.get(rr.centerJustifiedTextSymbolIndex),Zo=o.aB(y.textSizeData,Ae,to),vo=b.get("text-padding");hi=this.collisionIndex.placeCollisionCircles(Qe,to,y.lineVertexArray,y.glyphOffsetArray,Zo,N,j,d,ft,_e.predicate,rr.collisionCircleDiameter,vo,S,Qt),hi.circles.length&&hi.collisionDetected&&!d&&o.w("Collisions detected, but collision boxes are not shown"),ui=Ge||hi.circles.length>0&&!hi.collisionDetected,Pi=Pi&&hi.offscreen}if(Dr.iconFeatureIndex&&(mA=Dr.iconFeatureIndex),Dr.iconBox){const to=Zo=>this.collisionIndex.placeCollisionBox(Zo,st,q,Rt,N,ft,At,M,_e.predicate,Qt,nt&&Is?Is:void 0,nr);eo&&eo.placeable&&Dr.verticalIconBox?(Ao=to(Dr.verticalIconBox),Gi=Ao.placeable):(Ao=to(Dr.iconBox),Gi=Ao.placeable),Pi=Pi&&Ao.offscreen}const zu=De||rr.numHorizontalGlyphVertices===0&&rr.numVerticalGlyphVertices===0,pc=ze||rr.numIconVertices===0;zu||pc?pc?zu||(Gi=Gi&&ui):ui=Gi&&ui:Gi=ui=Gi&&ui;const Gl=Gi&&Ao.placeable;if(ui&&Ts.placeable&&this.collisionIndex.insertCollisionBox(Ts.box,Qe,b.get("text-ignore-placement"),y.bucketInstanceId,eo&&eo.placeable&&dc?dc:yo,_e.ID),Gl&&this.collisionIndex.insertCollisionBox(Ao.box,st,b.get("icon-ignore-placement"),y.bucketInstanceId,mA,_e.ID),hi&&ui&&this.collisionIndex.insertCollisionCircles(hi.circles,Qe,b.get("text-ignore-placement"),y.bucketInstanceId,yo,_e.ID),d&&this.storeCollisionData(y.bucketInstanceId,vn,Dr,Ts,Ao,hi),rr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rr.crossTileID]=new Fc((ui||Dt)&&!Ts?.occluded,(Gi||Lt)&&!Ao?.occluded,Pi||y.justReloaded),c[rr.crossTileID]=!0};if(wt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rr=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Dr=rr.length-1;Dr>=0;--Dr){const vn=rr[Dr];Ar(y.symbolInstances.get(vn),y.collisionArrays[vn],vn)}}else for(let rr=r.symbolInstanceStart;rr<r.symbolInstanceEnd;rr++)Ar(y.symbolInstances.get(rr),y.collisionArrays[rr],rr);y.justReloaded=!1}storeCollisionData(r,c,d,y,b,S){if(d.textBox||d.iconBox){let M,N;this.collisionBoxArrays.has(r)?M=this.collisionBoxArrays.get(r):(M=new Map,this.collisionBoxArrays.set(r,M)),M.has(c)?N=M.get(c):(N={text:null,icon:null},M.set(c,N)),d.textBox&&(N.text=y.box),d.iconBox&&(N.icon=b.box)}if(S){let M=this.collisionCircleArrays[r];M===void 0&&(M=this.collisionCircleArrays[r]=[]);for(let N=0;N<S.circles.length;N+=4)M.push(S.circles[N+0]-Mn),M.push(S.circles[N+1]-Mn),M.push(S.circles[N+2]),M.push(S.collisionDetected?1:0)}}markUsedJustification(r,c,d,y){let b;b=y===o.aA.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[o.aS(c)];const S=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const M of S)M>=0&&(r.text.placedSymbolArray.get(M).crossTileID=b>=0&&M!==b?0:d.crossTileID)}markUsedOrientation(r,c,d){const y=c===o.aA.horizontal||c===o.aA.horizontalOnly?c:0,b=c===o.aA.vertical?c:0,S=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const M of S)r.text.placedSymbolArray.get(M).placedOrientation=y;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(r):1,b=c?c.opacities:{},S=c?c.variableOffsets:{},M=c?c.placedOrientations:{};for(const N in this.placements){const j=this.placements[N],q=b[N];q?(this.opacities[N]=new Qo(q,y,j.text,j.icon),d=d||j.text!==q.text.placed||j.icon!==q.icon.placed):(this.opacities[N]=new Qo(null,y,j.text,j.icon,j.skipFade),d=d||j.text||j.icon)}for(const N in b){const j=b[N];if(!this.opacities[N]){const q=new Qo(j,y,!1,!1);q.isHidden()||(this.opacities[N]=q,d=d||j.text.placed||j.icon.placed)}}for(const N in S)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=S[N]);for(const N in M)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=M[N]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const d={};for(const y of c){const b=y.getBucket(r);b&&y.latestFeatureIndex&&r.id===b.layerIds[0]&&this.updateBucketOpacities(b,y.tileID,d,y.collisionBoxArray)}}updateBucketOpacities(r,c,d,y){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const b=r.layers[0],S=b.layout,M=new Qo(null,0,!1,!1,!0),N=S.get("text-allow-overlap"),j=S.get("icon-allow-overlap"),q=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ne=S.get("text-rotation-alignment")==="map",ee=S.get("text-pitch-alignment")==="map",Ae=S.get("icon-text-fit")!=="none",_e=new Qo(null,0,N&&(j||!r.hasIconData()||S.get("icon-optional")),j&&(N||!r.hasTextData()||S.get("text-optional")),!0);!r.collisionArrays&&y&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(y);const De=(Qe,Ge,st)=>{for(let Xe=0;Xe<Ge/4;Xe++)Qe.opacityVertexArray.emplaceBack(st);Qe.hasVisibleVertices=Qe.hasVisibleVertices||st!==Ic},ze=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Qe=0;Qe<r.symbolInstances.length;Qe++){const Ge=r.symbolInstances.get(Qe),{numHorizontalGlyphVertices:st,numVerticalGlyphVertices:Xe,crossTileID:At}=Ge;let ft=this.opacities[At];d[At]?ft=M:ft||(ft=_e,this.opacities[At]=ft),d[At]=!0;const nt=Ge.numIconVertices>0,wt=this.placedOrientations[Ge.crossTileID],Dt=wt===o.aA.vertical,Lt=wt===o.aA.horizontal||wt===o.aA.horizontalOnly;if(st>0||Xe>0){const Qt=PA(ft.text);De(r.text,st,Dt?Ic:Qt),De(r.text,Xe,Lt?Ic:Qt);const nr=ft.text.isHidden();[Ge.rightJustifiedTextSymbolIndex,Ge.centerJustifiedTextSymbolIndex,Ge.leftJustifiedTextSymbolIndex].forEach((Dr=>{Dr>=0&&(r.text.placedSymbolArray.get(Dr).hidden=nr||Dt?1:0)})),Ge.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ge.verticalPlacedTextSymbolIndex).hidden=nr||Lt?1:0);const Ar=this.variableOffsets[Ge.crossTileID];Ar&&this.markUsedJustification(r,Ar.anchor,Ge,wt);const rr=this.placedOrientations[Ge.crossTileID];rr&&(this.markUsedJustification(r,"left",Ge,rr),this.markUsedOrientation(r,rr,Ge))}if(nt){const Qt=PA(ft.icon),nr=!(Ae&&Ge.verticalPlacedIconSymbolIndex&&Dt);Ge.placedIconSymbolIndex>=0&&(De(r.icon,Ge.numIconVertices,nr?Qt:Ic),r.icon.placedSymbolArray.get(Ge.placedIconSymbolIndex).hidden=ft.icon.isHidden()),Ge.verticalPlacedIconSymbolIndex>=0&&(De(r.icon,Ge.numVerticalIconVertices,nr?Ic:Qt),r.icon.placedSymbolArray.get(Ge.verticalPlacedIconSymbolIndex).hidden=ft.icon.isHidden())}const Rt=ze&&ze.has(Qe)?ze.get(Qe):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Qt=r.collisionArrays[Qe];if(Qt){let nr=new o.P(0,0);if(Qt.textBox||Qt.verticalTextBox){let Ar=!0;if(q){const rr=this.variableOffsets[At];rr?(nr=Oo(rr.anchor,rr.width,rr.height,rr.textOffset,rr.textBoxScale),ne&&nr._rotate(ee?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ar=!1}if(Qt.textBox||Qt.verticalTextBox){let rr;Qt.textBox&&(rr=Dt),Qt.verticalTextBox&&(rr=Lt),iA(r.textCollisionBox.collisionVertexArray,ft.text.placed,!Ar||rr,Rt.text,nr.x,nr.y)}}if(Qt.iconBox||Qt.verticalIconBox){const Ar=!!(!Lt&&Qt.verticalIconBox);let rr;Qt.iconBox&&(rr=Ar),Qt.verticalIconBox&&(rr=!Ar),iA(r.iconCollisionBox.collisionVertexArray,ft.icon.placed,rr,Rt.icon,Ae?nr.x:0,Ae?nr.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function iA(x,r,c,d,y,b){d&&d.length!==0||(d=[0,0,0,0]);const S=d[0]-Mn,M=d[1]-Mn,N=d[2]-Mn,j=d[3]-Mn;x.emplaceBack(r?1:0,c?1:0,y||0,b||0,S,M),x.emplaceBack(r?1:0,c?1:0,y||0,b||0,N,M),x.emplaceBack(r?1:0,c?1:0,y||0,b||0,N,j),x.emplaceBack(r?1:0,c?1:0,y||0,b||0,S,j)}const rc=Math.pow(2,25),Ca=Math.pow(2,24),TA=Math.pow(2,17),Kn=Math.pow(2,16),Fl=Math.pow(2,9),nc=Math.pow(2,8),Il=Math.pow(2,1);function PA(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const r=x.placed?1:0,c=Math.floor(127*x.opacity);return c*rc+r*Ca+c*TA+r*Kn+c*Fl+r*nc+c*Il+r}const Ic=0;class ca{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,d,y,b){const S=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(S,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort(((M,N)=>M.sortKey-N.sortKey)));this._currentPartIndex<S.length;)if(c.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,b())return!0;return!1}}class Al{constructor(r,c,d,y,b,S,M,N){this.placement=new nA(r,c,S,M,N),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(r,c,d){const y=H(),b=()=>!this._forceFullPlacement&&H()-y>2;for(;this._currentPlacementIndex>=0;){const S=c[r[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=M)&&(!S.maxzoom||S.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new ca(S)),this._inProgressLayer.continuePlacement(d[S.source],this.placement,this._showCollisionBoxes,S,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const an=512/o.a5/2;class Ea{constructor(r,c,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const y=new Map;for(let b=0;b<c.length;b++){const S=c.get(b),M=S.key,N=y.get(M);N?N.push(S):y.set(M,[S])}for(const[b,S]of y){const M={positions:S.map((N=>({x:Math.floor(N.anchorX*an),y:Math.floor(N.anchorY*an)}))),crossTileIDs:S.map((N=>N.crossTileID))};if(M.positions.length>128){const N=new o.aU(M.positions.length,16,Uint16Array);for(const{x:j,y:q}of M.positions)N.add(j,q);N.finish(),delete M.positions,M.index=N}this._symbolsByKey[b]=M}}getScaledCoordinates(r,c){const{x:d,y,z:b}=this.tileID.canonical,{x:S,y:M,z:N}=c.canonical,j=an/Math.pow(2,N-b),q=(M*o.a5+r.anchorY)*j,ne=y*o.a5*an;return{x:Math.floor((S*o.a5+r.anchorX)*j-d*o.a5*an),y:Math.floor(q-ne)}}findMatches(r,c,d){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<r.length;b++){const S=r.get(b);if(S.crossTileID)continue;const M=this._symbolsByKey[S.key];if(!M)continue;const N=this.getScaledCoordinates(S,c);if(M.index){const j=M.index.range(N.x-y,N.y-y,N.x+y,N.y+y).sort();for(const q of j){const ne=M.crossTileIDs[q];if(!d[ne]){d[ne]=!0,S.crossTileID=ne;break}}}else if(M.positions)for(let j=0;j<M.positions.length;j++){const q=M.positions[j],ne=M.crossTileIDs[j];if(Math.abs(q.x-N.x)<=y&&Math.abs(q.y-N.y)<=y&&!d[ne]){d[ne]=!0,S.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:r})=>r))}}class zo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ho{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const d in this.indexes){const y=this.indexes[d],b={};for(const S in y){const M=y[S];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+c),b[M.tileID.key]=M}this.indexes[d]=b}this.lng=r}addBucket(r,c,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const b in this.indexes){const S=this.indexes[b];if(Number(b)>r.overscaledZ)for(const M in S){const N=S[M];N.tileID.isChildOf(r)&&N.findMatches(c.symbolInstances,r,y)}else{const M=S[r.scaledTo(Number(b)).key];M&&M.findMatches(c.symbolInstances,r,y)}}for(let b=0;b<c.symbolInstances.length;b++){const S=c.symbolInstances.get(b);S.crossTileID||(S.crossTileID=d.generate(),y[S.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ea(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const d of c.getCrossTileIDsLists())for(const y of d)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let c=!1;for(const d in this.indexes){const y=this.indexes[d];for(const b in y)r[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,y[b]),delete y[b],c=!0)}return c}}class vs{constructor(){this.layerIndexes={},this.crossTileIDs=new zo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,d){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new Ho);let b=!1;const S={};y.handleWrapJump(d);for(const M of c){const N=M.getBucket(r);N&&r.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(M.tileID,N,this.crossTileIDs)&&(b=!0),S[N.bucketInstanceId]=!0)}return y.removeStaleBuckets(S)&&(b=!0),b}pruneUnusedLayers(r){const c={};r.forEach((d=>{c[d]=!0}));for(const d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}var qr="void main() {fragColor=vec4(1.0);}";const Jn={prelude:cn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:cn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:cn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:cn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:cn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:cn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:cn(qr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:cn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:cn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:cn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:cn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:cn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:cn(qr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:cn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:cn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:cn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:cn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:cn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:cn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:cn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:cn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:cn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:cn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:cn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:cn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:cn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:cn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:cn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:cn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:cn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:cn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:cn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:cn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function cn(x,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/in ([\w]+) ([\w]+)/g),y=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=b?b.concat(y):y,M={};return{fragmentSource:x=x.replace(c,((N,j,q,ne,ee)=>(M[ee]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
in ${q} ${ne} ${ee};
#else
uniform ${q} ${ne} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${q} ${ne} ${ee} = u_${ee};
#endif
`))),vertexSource:r=r.replace(c,((N,j,q,ne,ee)=>{const Ae=ne==="float"?"vec2":"vec4",_e=ee.match(/color/)?"color":Ae;return M[ee]?j==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${q} ${Ae} a_${ee};
out ${q} ${ne} ${ee};
#else
uniform ${q} ${ne} u_${ee};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${q} ${ne} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${_e}(a_${ee}, u_${ee}_t);
#else
    ${q} ${ne} ${ee} = u_${ee};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${q} ${Ae} a_${ee};
#else
uniform ${q} ${ne} u_${ee};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${q} ${ne} ${ee} = a_${ee};
#else
    ${q} ${ne} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${q} ${ne} ${ee} = unpack_mix_${_e}(a_${ee}, u_${ee}_t);
#else
    ${q} ${ne} ${ee} = u_${ee};
#endif
`})),staticAttributes:d,staticUniforms:S}}class ii{constructor(r,c,d){this.vertexBuffer=r,this.indexBuffer=c,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var _s=o.aV([{name:"a_pos",type:"Int16",components:2}]);const Wi="#define PROJECTION_MERCATOR",uo="mercator";class ws{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return uo}get shaderDefine(){return Wi}get shaderPreludeCode(){return Jn.projectionMercator}get vertexShaderPreludeCode(){return Jn.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aW.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,d,y,b){if(this._cachedMesh)return this._cachedMesh;const S=new o.aX;S.emplaceBack(0,0),S.emplaceBack(o.a5,0),S.emplaceBack(0,o.a5),S.emplaceBack(o.a5,o.a5);const M=r.createVertexBuffer(S,_s.members),N=o.aY.simpleSegment(0,0,4,2),j=new o.aZ;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);const q=r.createIndexBuffer(j);return this._cachedMesh=new ii(M,q,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Sa{constructor(r=0,c=0,d=0,y=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=d,this.right=y}interpolate(r,c,d){return c.top!=null&&r.top!=null&&(this.top=o.G.number(r.top,c.top,d)),c.bottom!=null&&r.bottom!=null&&(this.bottom=o.G.number(r.bottom,c.bottom,d)),c.left!=null&&r.left!=null&&(this.left=o.G.number(r.left,c.left,d)),c.right!=null&&r.right!=null&&(this.right=o.G.number(r.right,c.right,d)),this}getCenter(r,c){const d=o.ao((this.left+r-this.right)/2,0,r),y=o.ao((this.top+c-this.bottom)/2,0,c);return new o.P(d,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Sa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fa(x,r){if(!x.renderWorldCopies||x.lngRange)return;const c=r.lng-x.center.lng;r.lng+=c>180?-360:c<-180?360:0}function ti(x){return Math.max(0,Math.floor(x))}class Aa{constructor(r,c){var d;this.applyConstrain=(y,b)=>this._constrainOverride!==null?this._constrainOverride(y,b):this._callbacks.defaultConstrain(y,b),this._callbacks=r,this._tileSize=512,this._renderWorldCopies=c?.renderWorldCopies===void 0||!!c?.renderWorldCopies,this._minZoom=c?.minZoom||0,this._maxZoom=c?.maxZoom||22,this._minPitch=c?.minPitch==null?0:c?.minPitch,this._maxPitch=c?.maxPitch==null?60:c?.maxPitch,this._constrainOverride=(d=c?.constrainOverride)!==null&&d!==void 0?d:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ti(this._zoom),this._scale=o.ar(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Sa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,d){this._constrainOverride=r.constrainOverride,this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=ti(this._zoom),this._scale=o.ar(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Sa(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!d&&r.autoCalculateNearFarZ,c&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get constrainOverride(){return this._constrainOverride}setConstrainOverride(r){r===void 0&&(r=null),this._constrainOverride!==r&&(this._constrainOverride=r,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=o.W(r,-180,180)*Math.PI/180;var d,y,b,S,M,N,j,q,ne;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=E(),d=this._rotationMatrix,b=-this._bearingInRadians,S=(y=this._rotationMatrix)[0],M=y[1],N=y[2],j=y[3],q=Math.sin(b),ne=Math.cos(b),d[0]=S*ne+N*q,d[1]=M*ne+j*q,d[2]=S*-q+N*ne,d[3]=M*-q+j*ne)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=o.ao(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.a_(this._fovInRadians)}setFov(r){r=o.ao(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=o.aq(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.applyConstrain(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.ar(c),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,d){this._unmodified=!1,this._edgeInsets.interpolate(r,c,d),this.constrainInternal(),this._calcMatrices()}resize(r,c,d=!0){this._width=r,this._height=c,d&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ur([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-o.ap,o.ap])}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{const{minX:d,minY:y,maxX:b,maxY:S}=o.ac.fromPoints(c).extend(r);return[new o.P(d,y),new o.P(b,y),new o.P(b,S),new o.P(d,S),new o.P(d,y)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:d}=this.applyConstrain(this.center,this.zoom);this.setCenter(c),this.setZoom(d),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=o.as(new Float64Array(16));o.Q(r,r,[this._width/2,-this._height/2,1]),o.O(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=o.as(new Float64Array(16)),o.Q(r,r,[1,-1,1]),o.O(r,r,[-1,-1,0]),o.Q(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,d,y){const b=d!==void 0?d:this.bearing,S=y=y!==void 0?y:this.pitch,{distanceToCenter:M,clampedElevation:N}=this._distanceToCenterFromAltElevationPitch(c,this.elevation,S),{x:j,y:q}=tn(S,b),ne=o.ab.fromLngLat(r,c);let ee,Ae,_e=o.a$(1,ne.y),De=0;do{if(De+=1,De>10)break;Ae=M/_e,ee=new o.ab(ne.x+j*Ae,ne.y+q*Ae),_e=1/ee.meterInMercatorCoordinateUnits()}while(Math.abs(M-Ae*_e)>1e-12);return{center:ee.toLngLat(),elevation:N,zoom:o.au(this.height/2/Math.tan(this.fovInRadians/2)/Ae/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=1/this.worldSize,d=o.at(1,this.center.lat)*this.worldSize,y=o.ab.fromLngLat(this.center,this.elevation),b=y.x/c,S=y.y/c,M=y.z/c,N=this.pitch,j=this.bearing,{x:q,y:ne,z:ee}=tn(N,j),Ae=this.cameraToCenterDistance,_e=b+Ae*-q,De=S+Ae*-ne,ze=M+Ae*ee,{distanceToCenter:Qe,clampedElevation:Ge}=this._distanceToCenterFromAltElevationPitch(ze/d,r,N),st=Qe*d,Xe=new o.ab((_e+q*st)*c,(De+ne*st)*c,0).toLngLat(),At=o.at(1,Xe.lat),ft=o.au(this.height/2/Math.tan(this.fovInRadians/2)/Qe/At/this.tileSize);this._elevation=Ge,this._center=Xe,this.setZoom(ft)}_distanceToCenterFromAltElevationPitch(r,c,d){const y=-Math.cos(o.aq(d)),b=r-c;let S,M=c;return y*b>=0||Math.abs(y)<.1?(S=1e4,M=r+S*y):S=-b/y,{distanceToCenter:S,clampedElevation:M}}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=o.at(1,this.center.lat)*this.worldSize;return mt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/o.a5,1/c/o.a5]}}class Zi{constructor(r,c){this.min=r,this.max=c,this.center=o.b0([],o.b1([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],d=o.b2(this.min),y=o.b2(this.max);for(let b=0;b<c.length;b++)d[b]=c[b]?this.min[b]:this.center[b],y[b]=c[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new Zi(d,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let d=0;d<r.planes.length;d++){const y=this.intersectsPlane(r.planes[d]);if(y===0)return 0;y===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],d=r[3];for(let y=0;y<3;y++)r[y]>0?(c+=r[y]*this.min[y],d+=r[y]*this.max[y]):(d+=r[y]*this.min[y],c+=r[y]*this.max[y]);return c>=0?2:d<0?0:1}}class ic{distanceToTile2d(r,c,d,y){const b=y.distanceX([r,c]),S=y.distanceY([r,c]);return Math.hypot(b,S)}getWrap(r,c,d){return d}getTileBoundingVolume(r,c,d,y){var b,S;let M=0,N=0;if(y?.terrain){const q=new o.a2(r.z,c,r.z,r.x,r.y),ne=y.terrain.getMinMaxElevation(q);M=(b=ne.minElevation)!==null&&b!==void 0?b:Math.min(0,d),N=(S=ne.maxElevation)!==null&&S!==void 0?S:Math.max(0,d)}const j=1<<r.z;return new Zi([c+r.x/j,r.y/j,M],[c+(r.x+1)/j,(r.y+1)/j,N])}allowVariableZoom(r,c){const d=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,y=o.ao(78.5-d/2,0,60);return!!c.terrain||r.pitch>y}allowWorldCopies(){return!0}prepareNextFrame(){}}class qs{constructor(r,c,d){this.points=r,this.planes=c,this.aabb=d}static fromInvProjectionMatrix(r,c=1,d=0,y,b){const S=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],M=Math.pow(2,d),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((ee=>(function(Ae,_e,De,ze){const Qe=o.aI([],Ae,_e),Ge=1/Qe[3]/De*ze;return o.b7(Qe,Qe,[Ge,Ge,1/Qe[3],Ge])})(ee,r,c,M)));y&&(function(ee,Ae,_e,De){const ze=De?4:0,Qe=De?0:4;let Ge=0;const st=[],Xe=[];for(let nt=0;nt<4;nt++){const wt=o.b3([],ee[nt+Qe],ee[nt+ze]),Dt=o.b8(wt);o.b0(wt,wt,1/Dt),st.push(Dt),Xe.push(wt)}for(let nt=0;nt<4;nt++){const wt=o.b9(ee[nt+ze],Xe[nt],_e);Ge=wt!==null&&wt>=0?Math.max(Ge,wt):Math.max(Ge,st[nt])}const At=(function(nt,wt){const Dt=o.b3([],nt[wt[0]],nt[wt[1]]),Lt=o.b3([],nt[wt[2]],nt[wt[1]]),Rt=[0,0,0,0];return o.b4(Rt,o.b5([],Dt,Lt)),Rt[3]=-o.b6(Rt,nt[wt[0]]),Rt})(ee,Ae),ft=(function(nt,wt){const Dt=o.ba(nt),Lt=o.bb([],nt,1/Dt),Rt=o.b3([],wt,o.b0([],Lt,o.b6(wt,Lt))),Qt=o.ba(Rt);if(Qt>0){const nr=Math.sqrt(1-Lt[3]*Lt[3]),Ar=o.b0([],Lt,-Lt[3]),rr=o.b1([],Ar,o.b0([],Rt,nr/Qt));return o.bc(wt,rr)}return null})(_e,At);if(ft!==null){const nt=ft/o.b6(Xe[0],At);Ge=Math.min(Ge,nt)}for(let nt=0;nt<4;nt++){const wt=Math.min(Ge,st[nt]);ee[nt+Qe]=[ee[nt+ze][0]+Xe[nt][0]*wt,ee[nt+ze][1]+Xe[nt][1]*wt,ee[nt+ze][2]+Xe[nt][2]*wt,1]}})(N,S[0],y,b);const j=S.map((ee=>{const Ae=o.b3([],N[ee[0]],N[ee[1]]),_e=o.b3([],N[ee[2]],N[ee[1]]),De=o.b4([],o.b5([],Ae,_e)),ze=-o.b6(De,N[ee[1]]);return De.concat(ze)})),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ne=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ee of N)for(let Ae=0;Ae<3;Ae++)q[Ae]=Math.min(q[Ae],ee[Ae]),ne[Ae]=Math.max(ne[Ae],ee[Ae]);return new qs(N,j,new Zi(q,ne))}}class ul{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,d){return this._helper.interpolatePadding(r,c,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,d=!0){this._helper.resize(r,c,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(c,d)=>{d=o.ao(+d,this.minZoom,this.maxZoom);const y={center:new o.V(c.lng,c.lat),zoom:d};let b=this._helper._lngRange;if(!this._helper._renderWorldCopies&&b===null){const Xe=179.9999999999;b=[-Xe,Xe]}const S=this.tileSize*o.ar(y.zoom);let M=0,N=S,j=0,q=S,ne=0,ee=0;const{x:Ae,y:_e}=this.size;if(this._helper._latRange){const Xe=this._helper._latRange;M=o.X(Xe[1])*S,N=o.X(Xe[0])*S,N-M<_e&&(ne=_e/(N-M))}b&&(j=o.W(o.Y(b[0])*S,0,S),q=o.W(o.Y(b[1])*S,0,S),q<j&&(q+=S),q-j<Ae&&(ee=Ae/(q-j)));const{x:De,y:ze}=Jt(S,c);let Qe,Ge;const st=Math.max(ee||0,ne||0);if(st){const Xe=new o.P(ee?(q+j)/2:De,ne?(N+M)/2:ze);return y.center=dr(S,Xe).wrap(),y.zoom+=o.au(st),y}if(this._helper._latRange){const Xe=_e/2;ze-Xe<M&&(Ge=M+Xe),ze+Xe>N&&(Ge=N-Xe)}if(b){const Xe=(j+q)/2;let At=De;this._helper._renderWorldCopies&&(At=o.W(De,Xe-S/2,Xe+S/2));const ft=Ae/2;At-ft<j&&(Qe=j+ft),At+ft>q&&(Qe=q-ft)}if(Qe!==void 0||Ge!==void 0){const Xe=new o.P(Qe??De,Ge??ze);y.center=dr(S,Xe).wrap()}return y},this.applyConstrain=(c,d)=>this._helper.applyConstrain(c,d),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,d)=>this.defaultConstrain(c,d)},r),this._coveringTilesDetailsProvider=new ic}clone(){const r=new ul;return r.apply(this),r}apply(r,c,d){this._helper.apply(r,c,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new o.bd(0,r)];if(this._helper._renderWorldCopies){const d=this.screenPointToMercatorCoordinate(new o.P(0,0)),y=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),S=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),M=Math.floor(Math.min(d.x,y.x,b.x,S.x)),N=Math.floor(Math.max(d.x,y.x,b.x,S.x)),j=1;for(let q=M-j;q<=N+j;q++)q!==0&&c.push(new o.bd(q,r))}return c}getCameraFrustum(){return qs.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),d=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(r,c){const d=o.at(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(c,d),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),S=o.ab.fromLngLat(r),M=new o.ab(S.x-(y.x-b.x),S.y-(y.y-b.y));this.setCenter(M?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(o.ab.fromLngLat(r),c.getElevationForLngLat(r),this._pixelMatrix3D):this.coordinatePoint(o.ab.fromLngLat(r))}screenPointToLocation(r,c){var d;return(d=this.screenPointToMercatorCoordinate(r,c))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const d=c.pointCoordinate(r);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const d=c||0,y=[r.x,r.y,0,1],b=[r.x,r.y,1,1];o.aI(y,y,this._pixelMatrixInverse),o.aI(b,b,this._pixelMatrixInverse);const S=y[3],M=b[3],N=y[1]/S,j=b[1]/M,q=y[2]/S,ne=b[2]/M,ee=q===ne?0:(d-q)/(ne-q);return new o.ab(o.G.number(y[0]/S,b[0]/M,ee)/this.worldSize,o.G.number(N,j,ee)/this.worldSize,d)}coordinatePoint(r,c=0,d=this._pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,c,1];return o.aI(y,y,d),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this._helper._height/2-rn(this));return new Ur().extend(this.screenPointToLocation(new o.P(0,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-rn(this)}calculatePosMatrix(r,c=!1,d){var y;const b=(y=r.key)!==null&&y!==void 0?y:o.be(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),S=c?this._alignedPosMatrixCache:this._posMatrixCache;if(S.has(b)){const j=S.get(b);return d?j.f32:j.f64}const M=Tr(r,this.worldSize);o.S(M,c?this._alignedProjMatrix:this._viewProjMatrix,M);const N={f64:M,f32:new Float32Array(M)};return S.set(b,N),d?N.f32:N.f64}calculateFogMatrix(r){const c=r.key,d=this._fogMatrixCacheF32;if(d.has(c))return d.get(c);const y=Tr(r,this.worldSize);return o.S(y,this._fogMatrix,y),d.set(c,new Float32Array(y)),d.get(c)}calculateCenterFromCameraLngLatAlt(r,c,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,d,y)}_calculateNearFarZIfNeeded(r,c,d){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=r-y*this._helper._pixelPerMeter/Math.cos(c),S=y<0?b:r,M=Math.PI/2+this.pitchInRadians,N=o.aq(this.fov)*(Math.abs(Math.cos(o.aq(this.roll)))*this.height+Math.abs(Math.sin(o.aq(this.roll)))*this.width)/this.height*(.5+d.y/this.height),j=Math.sin(N)*S/Math.sin(o.ao(Math.PI-M-N,.01,Math.PI-.01)),q=rn(this),ne=Math.atan(q/this._helper.cameraToCenterDistance),ee=o.aq(.75),Ae=ne>ee?2*ne*(.5+d.y/(2*q)):ee,_e=Math.sin(Ae)*S/Math.sin(o.ao(Math.PI-M-Ae,.01,Math.PI-.01)),De=Math.min(j,_e);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*De+S),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=Jt(this.worldSize,this.center),d=c.x,y=c.y;this._helper._pixelPerMeter=o.at(1,this.center.lat)*this.worldSize;const b=o.aq(Math.min(this.pitch,cr)),S=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let M;this._calculateNearFarZIfNeeded(S,b,r),M=new Float64Array(16),o.bf(M,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aC(this._invProjMatrix,M),M[8]=2*-r.x/this._helper._width,M[9]=2*r.y/this._helper._height,this._projectionMatrix=o.bg(M),o.Q(M,M,[1,-1,1]),o.O(M,M,[0,0,-this._helper.cameraToCenterDistance]),o.bh(M,M,-this.rollInRadians),o.bi(M,M,this.pitchInRadians),o.bh(M,M,-this.bearingInRadians),o.O(M,M,[-d,-y,0]),this._mercatorMatrix=o.Q([],M,[this.worldSize,this.worldSize,this.worldSize]),o.Q(M,M,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,M),o.O(M,M,[0,0,-this.elevation]),this._viewProjMatrix=M,this._invViewProjMatrix=o.aC([],M);const N=[0,0,-1,1];o.aI(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),o.bf(this._fogMatrix,this.fovInRadians,this.width/this.height,S,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,o.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.bh(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.bi(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.bh(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.O(this._fogMatrix,this._fogMatrix,[-d,-y,0]),o.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,M);const j=this._helper._width%2/2,q=this._helper._height%2/2,ne=Math.cos(this.bearingInRadians),ee=Math.sin(-this.bearingInRadians),Ae=d-Math.round(d)+ne*j+ee*q,_e=y-Math.round(y)+ne*q+ee*j,De=new Float64Array(M);if(o.O(De,De,[Ae>.5?Ae-1:Ae,_e>.5?_e-1:_e,0]),this._alignedProjMatrix=De,M=o.aC(new Float64Array(16),this._pixelMatrix),!M)throw new Error("failed to invert matrix");this._pixelMatrixInverse=M,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return o.aI(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=o.at(1,this.center.lat)*this.worldSize;return mt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const d=o.ab.fromLngLat(r),y=[d.x*this.worldSize,d.y*this.worldSize,c,1];return o.aI(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(r){const{overscaledTileID:c,aligned:d,applyTerrainMatrix:y}=r,b=this._helper.getMercatorTileCoordinates(c),S=c?this.calculatePosMatrix(c,d,!0):null;let M;return M=c&&c.terrainRttPosMatrix32f&&y?c.terrainRttPosMatrix32f:S||o.bj(),{mainMatrix:M,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:M}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,d){return 1}transformLightDirection(r){return o.b2(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,d,y){const b=this.calculatePosMatrix(d);let S;y?(S=[r,c,y(r,c),1],o.aI(S,S,b)):(S=[r,c,0,1],IA(S,S,b));const M=S[3];return{point:new o.P(S[0]/M,S[1]/M),signedDistanceFromCamera:M,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const d=o.ab.fromLngLat(r,c),y=d.meterInMercatorCoordinateUnits(),b=o.bk();return o.O(b,b,[d.x,d.y,d.z]),o.bh(b,b,Math.PI),o.bi(b,b,Math.PI/2),o.Q(b,b,[-y,y,y]),b}getProjectionDataForCustomLayer(r=!0){const c=new o.a2(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),y=Tr(c,this.worldSize);o.S(y,this._viewProjMatrix,y),d.tileMercatorCoords=[0,0,1,1];const b=[o.a5,o.a5,this.worldSize/this._helper.pixelsPerMeter],S=o.bl();return o.Q(S,y,b),d.fallbackMatrix=S,d.mainMatrix=S,d}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function jo(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ua(x){if(x.useSlerp)if(x.k<1){const r=o.bm(x.startEulerAngles.roll,x.startEulerAngles.pitch,x.startEulerAngles.bearing),c=o.bm(x.endEulerAngles.roll,x.endEulerAngles.pitch,x.endEulerAngles.bearing),d=new Float64Array(4);o.bn(d,r,c,x.k);const y=o.bo(d);x.tr.setRoll(y.roll),x.tr.setPitch(y.pitch),x.tr.setBearing(y.bearing)}else x.tr.setRoll(x.endEulerAngles.roll),x.tr.setPitch(x.endEulerAngles.pitch),x.tr.setBearing(x.endEulerAngles.bearing);else x.tr.setRoll(o.G.number(x.startEulerAngles.roll,x.endEulerAngles.roll,x.k)),x.tr.setPitch(o.G.number(x.startEulerAngles.pitch,x.endEulerAngles.pitch,x.k)),x.tr.setBearing(o.G.number(x.startEulerAngles.bearing,x.endEulerAngles.bearing,x.k))}function sc(x,r,c,d,y){const b=y.padding,S=Jt(y.worldSize,c.getNorthWest()),M=Jt(y.worldSize,c.getNorthEast()),N=Jt(y.worldSize,c.getSouthEast()),j=Jt(y.worldSize,c.getSouthWest()),q=o.aq(-d),ne=S.rotate(q),ee=M.rotate(q),Ae=N.rotate(q),_e=j.rotate(q),De=new o.P(Math.max(ne.x,ee.x,_e.x,Ae.x),Math.max(ne.y,ee.y,_e.y,Ae.y)),ze=new o.P(Math.min(ne.x,ee.x,_e.x,Ae.x),Math.min(ne.y,ee.y,_e.y,Ae.y)),Qe=De.sub(ze),Ge=(y.width-(b.left+b.right+r.left+r.right))/Qe.x,st=(y.height-(b.top+b.bottom+r.top+r.bottom))/Qe.y;if(st<0||Ge<0)return void jo();const Xe=Math.min(o.au(y.scale*Math.min(Ge,st)),x.maxZoom),At=o.P.convert(x.offset),ft=new o.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(o.aq(d)),nt=At.add(ft).mult(y.scale/o.ar(Xe));return{center:dr(y.worldSize,S.add(N).div(2).sub(nt)),zoom:Xe,bearing:d}}class ha{get useGlobeControls(){return!1}handlePanInertia(r,c){const d=r.mag(),y=Math.abs(rn(c));return{easingOffset:r.mult(Math.min(.75*y/d,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,d){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(d,r.around)}cameraForBoxAndBearing(r,c,d,y,b){return sc(r,c,d,y,b)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(o.V.convert(c.center))}handleEaseTo(r,c){const d=r.zoom,y=r.padding,b={roll:r.roll,pitch:r.pitch,bearing:r.bearing},S={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},M=c.zoom!==void 0,N=!r.isPaddingEqual(c.padding);let j=!1;const q=M?+c.zoom:r.zoom;let ne=r.centerPoint.add(c.offsetAsPoint);const ee=r.screenPointToLocation(ne),{center:Ae,zoom:_e}=r.applyConstrain(o.V.convert(c.center||ee),q??d);Fa(r,Ae);const De=Jt(r.worldSize,ee),ze=Jt(r.worldSize,Ae).sub(De),Qe=o.ar(_e-d);return j=_e!==d,{easeFunc:Ge=>{if(j&&r.setZoom(o.G.number(d,_e,Ge)),o.bp(b,S)||ua({startEulerAngles:b,endEulerAngles:S,tr:r,k:Ge,useSlerp:b.roll!=S.roll}),N&&(r.interpolatePadding(y,c.padding,Ge),ne=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const st=o.ar(r.zoom-d),Xe=_e>d?Math.min(2,Qe):Math.max(.5,Qe),At=Math.pow(Xe,1-Ge),ft=dr(r.worldSize,De.add(ze.mult(Ge*At)).mult(st));r.setLocationAtPoint(r.renderWorldCopies?ft.wrap():ft,ne)}},isZooming:j,elevationCenter:Ae}}handleFlyTo(r,c){const d=c.zoom!==void 0,y=r.zoom,b=r.applyConstrain(o.V.convert(c.center||c.locationAtOffset),d?+c.zoom:y),S=b.center,M=b.zoom;Fa(r,S);const N=Jt(r.worldSize,c.locationAtOffset),j=Jt(r.worldSize,S).sub(N),q=j.mag(),ne=o.ar(M-y);let ee;if(c.minZoom!==void 0){const Ae=Math.min(+c.minZoom,y,M),_e=r.applyConstrain(S,Ae).zoom;ee=o.ar(_e-y)}return{easeFunc:(Ae,_e,De,ze)=>{r.setZoom(Ae===1?M:y+o.au(_e));const Qe=Ae===1?S:dr(r.worldSize,N.add(j.mult(De)).mult(_e));r.setLocationAtPoint(r.renderWorldCopies?Qe.wrap():Qe,ze)},scaleOfZoom:ne,targetCenter:S,scaleOfMinZoom:ee,pixelPathLength:q}}}class Nn{constructor(r,c,d){this.blendFunction=r,this.blendColor=c,this.mask=d}}Nn.Replace=[1,0],Nn.disabled=new Nn(Nn.Replace,o.bq.transparent,[!1,!1,!1,!1]),Nn.unblended=new Nn(Nn.Replace,o.bq.transparent,[!0,!0,!0,!0]),Nn.alphaBlended=new Nn([1,771],o.bq.transparent,[!0,!0,!0,!0]);const Vo=2305;class En{constructor(r,c,d){this.enable=r,this.mode=c,this.frontFace=d}}En.disabled=new En(!1,1029,Vo),En.backCCW=new En(!0,1029,Vo),En.frontCCW=new En(!0,1028,Vo);class mn{constructor(r,c,d){this.func=r,this.mask=c,this.range=d}}mn.ReadOnly=!1,mn.ReadWrite=!0,mn.disabled=new mn(519,mn.ReadOnly,[0,1]);const Ia=7680;class bn{constructor(r,c,d,y,b,S){this.test=r,this.ref=c,this.mask=d,this.fail=y,this.depthFail=b,this.pass=S}}bn.disabled=new bn({func:519,mask:0},0,0,Ia,Ia,Ia);const Go=new WeakMap;function Ei(x){var r;if(Go.has(x))return Go.get(x);{const c=(r=x.getParameter(x.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Go.set(x,c),c}}class ao{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,d=c.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;const y=new o.aX;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const b=new o.aZ;b.emplaceBack(0,1,2),this._fullscreenTriangle=new ii(c.createVertexBuffer(y,_s.members),c.createIndexBuffer(b),o.aY.simpleSegment(0,0,y.length,b.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(d.TEXTURE1);const S=d.createTexture();d.bindTexture(d.TEXTURE_2D,S),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(S),Ei(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const d=this._cachedRenderContext.context,y=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:o.bq.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,y.TRIANGLES,mn.disabled,bn.disabled,Nn.unblended,En.disabled,((b,S)=>({u_input:b,u_output_expected:S}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ei(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const b=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ei(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ao._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const fa=o.a5/128;function V(x,r){const c=x.granularity!==void 0?Math.max(x.granularity,1):1,d=c+(x.generateBorders?2:0),y=c+(x.extendToNorthPole||x.generateBorders?1:0)+(x.extendToSouthPole||x.generateBorders?1:0),b=d+1,S=y+1,M=x.generateBorders?-1:0,N=x.generateBorders||x.extendToNorthPole?-1:0,j=c+(x.generateBorders?1:0),q=c+(x.generateBorders||x.extendToSouthPole?1:0),ne=b*S,ee=d*y*6,Ae=b*S>65536;if(Ae&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const _e=Ae||r==="32bit",De=new Int16Array(2*ne);let ze=0;for(let st=N;st<=q;st++)for(let Xe=M;Xe<=j;Xe++){let At=Xe/c*o.a5;Xe===-1&&(At=-fa),Xe===c+1&&(At=o.a5+fa);let ft=st/c*o.a5;st===-1&&(ft=x.extendToNorthPole?o.bs:-fa),st===c+1&&(ft=x.extendToSouthPole?o.bt:o.a5+fa),De[ze++]=At,De[ze++]=ft}const Qe=_e?new Uint32Array(ee):new Uint16Array(ee);let Ge=0;for(let st=0;st<y;st++)for(let Xe=0;Xe<d;Xe++){const At=Xe+1+st*b,ft=Xe+(st+1)*b,nt=Xe+1+(st+1)*b;Qe[Ge++]=Xe+st*b,Qe[Ge++]=ft,Qe[Ge++]=At,Qe[Ge++]=At,Qe[Ge++]=ft,Qe[Ge++]=nt}return{vertices:De.buffer.slice(0),indices:Qe.buffer.slice(0),uses32bitIndices:_e}}const ye=new o.aW({fill:new o.bu(128,2),line:new o.bu(512,0),tile:new o.bu(128,32),stencil:new o.bu(128,1),circle:3});class Je{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Jn.projectionGlobe}get vertexShaderPreludeCode(){return Jn.projectionMercator.vertexSource}get subdivisionGranularity(){return ye}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new ao(r));const c=o.X(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(c,d),b=H();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=b);const S=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bv(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bw(S))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,d,y,b){const S=(b==="stencil"?ye.stencil:ye.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:S,generateBorders:d,extendToNorthPole:c.y===0&&y,extendToSouthPole:c.y===(1<<c.z)-1&&y})}_getMesh(r,c){const d=this._getMeshKey(c);if(d in this._tileMeshCache)return this._tileMeshCache[d];const y=(function(b,S){const M=V(S,"16bit"),N=o.aX.deserialize({arrayBuffer:M.vertices,length:M.vertices.byteLength/2/2}),j=o.aZ.deserialize({arrayBuffer:M.indices,length:M.indices.byteLength/2/3});return new ii(b.createVertexBuffer(N,_s.members),b.createIndexBuffer(j),o.aY.simpleSegment(0,0,N.length,j.length))})(r,c);return this._tileMeshCache[d]=y,y}recalculate(r){}hasTransition(){const r=H();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const gt=new o.t({type:new o.D(o.u.projection.type)});class It extends o.E{constructor(r){super(),this._transitionable=new o.x(gt,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0)),this._mercatorProjection=new ws,this._verticalPerspectiveProjection=new Je}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof o.bx){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,d,y,b){return this.currentProjection.getMeshFromTileID(r,c,d,y,b)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Gt(x){const r=Vr(x.worldSize,x.center.lat);return 2*Math.PI*r}function sr(x,r,c,d,y){const b=1/(1<<y),S=r/o.a5*b+d*b,M=o.bz((x/o.a5*b+c*b)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI,j=Math.cos(N),q=new Float64Array(3);return q[0]=Math.sin(M)*j,q[1]=Math.sin(N),q[2]=Math.cos(M)*j,q}function br(x){return(function(r,c){const d=Math.cos(c),y=new Float64Array(3);return y[0]=Math.sin(r)*d,y[1]=Math.sin(c),y[2]=Math.cos(r)*d,y})(x.lng*Math.PI/180,x.lat*Math.PI/180)}function Vr(x,r){return x/(2*Math.PI)/Math.cos(r*Math.PI/180)}function gn(x){const r=Math.asin(x[1])/Math.PI*180,c=Math.sqrt(x[0]*x[0]+x[2]*x[2]);if(c>1e-6){const d=x[0]/c,y=Math.acos(x[2]/c),b=(d>0?y:-y)/Math.PI*180;return new o.V(o.W(b,-180,180),r)}return new o.V(0,r)}function yn(x){return Math.cos(x*Math.PI/180)}function An(x,r){const c=yn(x),d=yn(r);return o.au(d/c)}function ji(x,r){const c=x.rotate(r.bearingInRadians),d=r.zoom+An(r.center.lat,0),y=o.bv(1/yn(r.center.lat),1/yn(Math.min(Math.abs(r.center.lat),60)),o.by(d,7,3,0,1)),b=360/Gt({worldSize:r.worldSize,center:{lat:r.center.lat}});return new o.V(r.center.lng-c.x*b*y,o.ao(r.center.lat+c.y*b,-o.ap,o.ap))}function is(x){const r=.5*x,c=Math.sin(r),d=Math.cos(r);return Math.log(c+d)-Math.log(d-c)}function Si(x,r,c,d){const y=x.lat+c*d;if(Math.abs(c)>1){const b=(Math.sign(x.lat+c)!==Math.sign(x.lat)?-Math.abs(x.lat):Math.abs(x.lat))*Math.PI/180,S=Math.abs(x.lat+c)*Math.PI/180,M=is(b+d*(S-b)),N=is(b),j=is(S);return new o.V(x.lng+r*((M-N)/(j-N)),y)}return new o.V(x.lng+r*d,y)}class Ds{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,c,d,y){const b=`${r.z}_${r.x}_${r.y}_${y?.terrain?"t":""}`,S=this._cache.get(b);if(S)return S;const M=this._cachePrevious.get(b);if(M)return this._cache.set(b,M),M;const N=this._boundingVolumeFactory(r,c,d,y);return this._cache.set(b,N),this._hadAnyChanges=!0,N}}class Mi{constructor(r,c,d,y){this.min=d,this.max=y,this.points=r,this.planes=c}static fromAabb(r,c){const d=[];for(let y=0;y<8;y++)d.push([1&~y?r[0]:c[0],(y>>1&1)==1?c[1]:r[1],(y>>2&1)==1?c[2]:r[2]]);return new Mi(d,[[-1,0,0,c[0]],[1,0,0,-r[0]],[0,-1,0,c[1]],[0,1,0,-r[1]],[0,0,-1,c[2]],[0,0,1,-r[2]]],r,c)}static fromCenterSizeAngles(r,c,d){const y=o.bC([],d[0],d[1],d[2]),b=o.bD([],[c[0],0,0],y),S=o.bD([],[0,c[1],0],y),M=o.bD([],[0,0,c[2]],y),N=[...r],j=[...r];for(let ne=0;ne<8;ne++)for(let ee=0;ee<3;ee++){const Ae=r[ee]+b[ee]*(1&~ne?-1:1)+S[ee]*((ne>>1&1)==1?1:-1)+M[ee]*((ne>>2&1)==1?1:-1);N[ee]=Math.min(N[ee],Ae),j[ee]=Math.max(j[ee],Ae)}const q=[];for(let ne=0;ne<8;ne++){const ee=[...r];o.b1(ee,ee,o.b0([],b,1&~ne?-1:1)),o.b1(ee,ee,o.b0([],S,(ne>>1&1)==1?1:-1)),o.b1(ee,ee,o.b0([],M,(ne>>2&1)==1?1:-1)),q.push(ee)}return new Mi(q,[[...b,-o.b6(b,q[0])],[...S,-o.b6(S,q[0])],[...M,-o.b6(M,q[0])],[-b[0],-b[1],-b[2],-o.b6(b,q[7])],[-S[0],-S[1],-S[2],-o.b6(S,q[7])],[-M[0],-M[1],-M[2],-o.b6(M,q[7])]],N,j)}intersectsFrustum(r){let c=!0;const d=this.points.length,y=this.planes.length,b=r.planes.length,S=r.points.length;for(let M=0;M<b;M++){const N=r.planes[M];let j=0;for(let q=0;q<d;q++){const ne=this.points[q];N[0]*ne[0]+N[1]*ne[1]+N[2]*ne[2]+N[3]>=0&&j++}if(j===0)return 0;j<d&&(c=!1)}if(c)return 2;for(let M=0;M<y;M++){const N=this.planes[M];let j=0;for(let q=0;q<S;q++){const ne=r.points[q];N[0]*ne[0]+N[1]*ne[1]+N[2]*ne[2]+N[3]>=0&&j++}if(j===0)return 0}return 1}intersectsPlane(r){const c=this.points.length;let d=0;for(let y=0;y<c;y++){const b=this.points[y];r[0]*b[0]+r[1]*b[1]+r[2]*b[2]+r[3]>=0&&d++}return d===c?2:d===0?0:1}}function xs(x,r,c){const d=x-r;return d<0?-d:Math.max(0,d-c)}function Ko(x,r,c,d,y){const b=x-c;let S;return S=b<0?Math.min(-b,1+b-y):b>1?Math.min(Math.max(b-y,0),1-b):0,Math.max(S,xs(r,d,y))}class da{constructor(){this._boundingVolumeCache=new Ds(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,c,d,y){const b=1<<d.z,S=1/b,M=d.x/b,N=d.y/b;let j=2;return j=Math.min(j,Ko(r,c,M,N,S)),j=Math.min(j,Ko(r,c,M+.5,-N-S,S)),j=Math.min(j,Ko(r,c,M+.5,2-N-S,S)),j}getWrap(r,c,d){const y=1<<c.z,b=1/y,S=c.x/y,M=xs(r.x,S,b),N=xs(r.x,S-1,b),j=xs(r.x,S+1,b),q=Math.min(M,N,j);return q===j?1:q===N?-1:0}allowVariableZoom(r,c){return wr(r,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,c,d,y){return this._boundingVolumeCache.getTileBoundingVolume(r,c,d,y)}_computeTileBoundingVolume(r,c,d,y){var b,S;let M=0,N=0;if(y?.terrain){const j=new o.a2(r.z,c,r.z,r.x,r.y),q=y.terrain.getMinMaxElevation(j);M=(b=q.minElevation)!==null&&b!==void 0?b:Math.min(0,d),N=(S=q.maxElevation)!==null&&S!==void 0?S:Math.max(0,d)}if(M/=o.bF,N/=o.bF,M+=1,N+=1,r.z<=0)return Mi.fromAabb([-N,-N,-N],[N,N,N]);if(r.z===1)return Mi.fromAabb([r.x===0?-N:0,r.y===0?0:-N,-N],[r.x===0?0:N,r.y===0?N:0,N]);{const j=[sr(0,0,r.x,r.y,r.z),sr(o.a5,0,r.x,r.y,r.z),sr(o.a5,o.a5,r.x,r.y,r.z),sr(0,o.a5,r.x,r.y,r.z)],q=[];for(const Rt of j)q.push(o.b0([],Rt,N));if(N!==M)for(const Rt of j)q.push(o.b0([],Rt,M));r.y===0&&q.push([0,1,0]),r.y===(1<<r.z)-1&&q.push([0,-1,0]);const ne=[1,1,1],ee=[-1,-1,-1];for(const Rt of q)for(let Qt=0;Qt<3;Qt++)ne[Qt]=Math.min(ne[Qt],Rt[Qt]),ee[Qt]=Math.max(ee[Qt],Rt[Qt]);const Ae=sr(o.a5/2,o.a5/2,r.x,r.y,r.z),_e=o.b5([],[0,1,0],Ae);o.b4(_e,_e);const De=o.b5([],Ae,_e);o.b4(De,De);const ze=o.b5([],j[2],j[1]);o.b4(ze,ze);const Qe=o.b5([],j[0],j[3]);o.b4(Qe,Qe),q.push(o.b0([],Ae,N)),r.y>=(1<<r.z)/2&&q.push(o.b0([],sr(o.a5/2,0,r.x,r.y,r.z),N)),r.y<(1<<r.z)/2&&q.push(o.b0([],sr(o.a5/2,o.a5,r.x,r.y,r.z),N));const Ge=pa(Ae,q),st=pa(De,q),Xe=[-Ae[0],-Ae[1],-Ae[2],Ge.max],At=[Ae[0],Ae[1],Ae[2],-Ge.min],ft=[-De[0],-De[1],-De[2],st.max],nt=[De[0],De[1],De[2],-st.min],wt=[...ze,0],Dt=[...Qe,0],Lt=[];return r.y===0?Lt.push(o.bE(Dt,wt,Xe),o.bE(Dt,wt,At)):Lt.push(o.bE(ft,wt,Xe),o.bE(ft,wt,At),o.bE(ft,Dt,Xe),o.bE(ft,Dt,At)),r.y===(1<<r.z)-1?Lt.push(o.bE(Dt,wt,Xe),o.bE(Dt,wt,At)):Lt.push(o.bE(nt,wt,Xe),o.bE(nt,wt,At),o.bE(nt,Dt,Xe),o.bE(nt,Dt,At)),new Mi(Lt,[Xe,At,ft,nt,wt,Dt],ne,ee)}}}function pa(x,r){let c=1/0,d=-1/0;for(const y of r){const b=o.b6(x,y);c=Math.min(c,b),d=Math.max(d,b)}return{min:c,max:d}}class Ta{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,d){return this._helper.interpolatePadding(r,c,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(r){this._cachedClippingPlane=o.bG(),this._projectionMatrix=o.bk(),this._globeViewProjMatrix32f=o.bj(),this._globeViewProjMatrixNoCorrection=o.bk(),this._globeViewProjMatrixNoCorrectionInverted=o.bk(),this._globeProjMatrixInverted=o.bk(),this._cameraPosition=o.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(c,d)=>{const y=o.ao(c.lat,-o.ap,o.ap),b=o.ao(+d,this.minZoom+An(0,y),this.maxZoom);return{center:new o.V(c.lng,y),zoom:b}},this.applyConstrain=(c,d)=>this._helper.applyConstrain(c,d),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,d)=>this.defaultConstrain(c,d)},r),this._coveringTilesDetailsProvider=new da}clone(){const r=new Ta;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=o.bA();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:d}=r,y=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,d=this.cameraToCenterDistance/r,y=Math.sin(c)*d,b=Math.cos(c)*d+1,S=1/Math.sqrt(y*y+b*b)*1;let M=-y,N=b;const j=Math.sqrt(M*M+N*N);M/=j,N/=j;const q=[0,M,N];o.bH(q,q,[0,0,0],-this.bearingInRadians),o.bI(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),o.bJ(q,q,[0,0,0],this.center.lng*Math.PI/180);const ne=1/o.b8(q);return o.b0(q,q,ne),[...q,-S*ne]}isLocationOccluded(r){return!this.isSurfacePointVisible(br(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,y=Math.cos(d),b=[Math.sin(c)*y,Math.sin(d),Math.cos(c)*y],S=[b[2],0,-b[0]],M=[0,0,0];o.b5(M,S,b),o.b4(S,S),o.b4(M,M);const N=[0,0,0];return o.b4(N,[S[0]*r[0]+M[0]*r[1]+b[0]*r[2],S[1]*r[0]+M[1]*r[1]+b[1]*r[2],S[2]*r[0]+M[2]*r[1]+b[2]*r[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,d){const y=(function(M,N,j){const q=1/(1<<j.z);return new o.ab(M/o.a5*q+j.x*q,N/o.a5*q+j.y*q)})(r,c,d.canonical),b=(S=y.y,[o.bz(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI]);var S;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(r,c,d,y){const b=d.canonical,S=sr(r,c,b.x,b.y,b.z),M=1+(y?y(r,c):0)/o.bF,N=[S[0]*M,S[1]*M,S[2]*M,1];o.aI(N,N,this._globeViewProjMatrixNoCorrection);const j=this._cachedClippingPlane,q=j[0]*S[0]+j[1]*S[1]+j[2]*S[2]+j[3]<0;return{point:new o.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Vr(this.worldSize,this.center.lat),c=o.bl(),d=o.bl();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),o.bf(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;c[8]=2*-y.x/this._helper._width,c[9]=2*y.y/this._helper._height,this._projectionMatrix=o.bg(c),this._globeProjMatrixInverted=o.bl(),o.aC(this._globeProjMatrixInverted,c),o.O(c,c,[0,0,-this.cameraToCenterDistance]),o.bh(c,c,this.rollInRadians),o.bi(c,c,-this.pitchInRadians),o.bh(c,c,this.bearingInRadians),o.O(c,c,[0,0,-r]);const b=o.bA();b[0]=r,b[1]=r,b[2]=r,o.bi(d,c,this.center.lat*Math.PI/180),o.bK(d,d,-this.center.lng*Math.PI/180),o.Q(d,d,b),this._globeViewProjMatrixNoCorrection=d,o.bi(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bK(c,c,-this.center.lng*Math.PI/180),o.Q(c,c,b),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.bl(),o.aC(this._globeViewProjMatrixNoCorrectionInverted,d);const S=o.bA();this._cameraPosition=o.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/r,o.bH(this._cameraPosition,this._cameraPosition,S,-this.rollInRadians),o.bI(this._cameraPosition,this._cameraPosition,S,this.pitchInRadians),o.bH(this._cameraPosition,this._cameraPosition,S,-this.bearingInRadians),o.b1(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bI(this._cameraPosition,this._cameraPosition,S,-this.center.lat*Math.PI/180),o.bJ(this._cameraPosition,this._cameraPosition,S,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const M=o.bg(this._globeViewProjMatrixNoCorrectionInverted);o.Q(M,M,[1,1,-1]),this._cachedFrustum=qs.fromInvProjectionMatrix(M,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.bl();return o.as(c),c}getVisibleUnwrappedCoordinates(r){return[new o.bd(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const d=br(r);o.b0(d,d,1+c/o.bF);const y=o.bG();return o.aI(y,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,d=[new o.P(0,0),new o.P(r,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(r,this.height),new o.P(0,this.height),new o.P(0,c)],y=[];for(const ne of d)y.push(this.unprojectScreenPoint(ne));let b=0,S=0,M=0,N=0;const j=this.center;for(const ne of y){const ee=o.bL(j.lng,ne.lng),Ae=o.bL(j.lat,ne.lat);ee<S&&(S=ee),ee>b&&(b=ee),Ae<N&&(N=Ae),Ae>M&&(M=Ae)}const q=[j.lng+S,j.lat+N,j.lng+b,j.lat+M];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new Ur(q)}calculateCenterFromCameraLngLatAlt(r,c,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,d,y)}setLocationAtPoint(r,c){const d=br(this.unprojectScreenPoint(c)),y=br(r),b=o.bA();o.bM(b);const S=o.bA();o.bJ(S,d,b,-this.center.lng*Math.PI/180),o.bI(S,S,b,this.center.lat*Math.PI/180);const M=y[0]*y[0]+y[2]*y[2],N=S[0]*S[0];if(M<N)return;const j=Math.sqrt(M-N),q=-j,ne=o.bN(y[0],y[2],S[0],j),ee=o.bN(y[0],y[2],S[0],q),Ae=o.bA();o.bJ(Ae,y,b,-ne);const _e=o.bN(Ae[1],Ae[2],S[1],S[2]),De=o.bA();o.bJ(De,y,b,-ee);const ze=o.bN(De[1],De[2],S[1],S[2]),Qe=.5*Math.PI,Ge=_e>=-Qe&&_e<=Qe,st=ze>=-Qe&&ze<=Qe;let Xe,At;if(Ge&&st){const Dt=this.center.lng*Math.PI/180,Lt=this.center.lat*Math.PI/180;o.bO(ne,Dt)+o.bO(_e,Lt)<o.bO(ee,Dt)+o.bO(ze,Lt)?(Xe=ne,At=_e):(Xe=ee,At=ze)}else if(Ge)Xe=ne,At=_e;else{if(!st)return;Xe=ee,At=ze}const ft=Xe/Math.PI*180,nt=At/Math.PI*180,wt=this.center.lat;this.setCenter(new o.V(ft,o.ao(nt,-90,90))),this.setZoom(this.zoom+An(wt,this.center.lat))}locationToScreenPoint(r,c){const d=br(r);if(c){const y=c.getElevationForLngLatZoom(r,this._helper._tileZoom);o.b0(d,d,1+y/o.bF)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(r){const c=o.bG();return o.aI(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const d=c.pointCoordinate(r);if(d)return d}return o.ab.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var d;return(d=this.screenPointToMercatorCoordinate(r,c))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(r,c){const d=this._cameraPosition,y=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(d,y)}getRayDirectionFromPixel(r){const c=o.bG();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,o.aI(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const d=o.bA();d[0]=c[0]-this._cameraPosition[0],d[1]=c[1]-this._cameraPosition[1],d[2]=c[2]-this._cameraPosition[2];const y=o.bA();return o.b4(y,d),y}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=o.bG();return o.aI(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const d=o.b6(r,c),y=o.bA(),b=o.bA();o.b0(b,c,d),o.b3(y,r,b);const S=1-o.b6(y,y);if(S<0)return null;const M=o.b6(r,r)-1,N=-d+(d<0?1:-1)*Math.sqrt(S),j=M/N,q=N;return{tMin:Math.min(j,q),tMax:Math.max(j,q)}}unprojectScreenPoint(r){const c=this._cameraPosition,d=this.getRayDirectionFromPixel(r),y=this.rayPlanetIntersection(c,d);if(y){const q=o.bA();o.b1(q,c,[d[0]*y.tMin,d[1]*y.tMin,d[2]*y.tMin]);const ne=o.bA();return o.b4(ne,q),gn(ne)}const b=this._cachedClippingPlane,S=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],M=-o.bc(b,c)/S,N=o.bA();if(M>0)o.b1(N,c,[d[0]*M,d[1]*M,d[2]*M]);else{const q=o.bA();o.b1(q,c,[2*d[0],2*d[1],2*d[2]]);const ne=o.bc(this._cachedClippingPlane,q);o.b3(N,q,[this._cachedClippingPlane[0]*ne,this._cachedClippingPlane[1]*ne,this._cachedClippingPlane[2]*ne])}const j=(function(q){const ne=o.bA();return ne[0]=q[0]*-q[3],ne[1]=q[1]*-q[3],ne[2]=q[2]*-q[3],{center:ne,radius:Math.sqrt(1-q[3]*q[3])}})(b);return gn((function(q,ne,ee){const Ae=o.bA();o.b3(Ae,ee,q);const _e=o.bA();return o.bB(_e,q,Ae,ne/o.ba(Ae)),_e})(j.center,j.radius,N))}getMatrixForModel(r,c){const d=o.V.convert(r),y=1/o.bF,b=o.bk();return o.bK(b,b,d.lng/180*Math.PI),o.bi(b,b,-d.lat/180*Math.PI),o.O(b,b,[0,0,1+c/o.bF]),o.bi(b,b,.5*Math.PI),o.Q(b,b,[y,y,y]),b}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new o.a2(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class hl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,d){return this._helper.interpolatePadding(r,c,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,d=!0){this._helper.resize(r,c,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(r){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(c,d)=>this.currentTransform.defaultConstrain(c,d),this.applyConstrain=(c,d)=>this._helper.applyConstrain(c,d),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,d)=>this.defaultConstrain(c,d)},r),this._globeness=1,this._mercatorTransform=new ul,this._verticalPerspectiveTransform=new Ta}clone(){const r=new hl;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),d=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:c.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return o.bv(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bv(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,d){const y=this._mercatorTransform.getPitchedTextCorrection(r,c,d),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,d);return o.bv(y,b,this._globeness)}projectTileCoordinates(r,c,d,y){return this.currentTransform.projectTileCoordinates(r,c,d,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(r,c,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,d,y)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return d.fallbackMatrix=c.mainMatrix,d}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Fi{get useGlobeControls(){return!0}handlePanInertia(r,c){const d=ji(r,c);return Math.abs(d.lng-c.center.lng)>180&&(d.lng=c.center.lng+179.5*Math.sign(d.lng-c.center.lng)),{easingCenter:d,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const d=r.around,y=c.screenPointToLocation(d);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const b=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const S=c.zoom-b;if(S===0)return;const M=o.bL(c.center.lng,y.lng),N=M/(Math.abs(M/180)+1),j=o.bL(c.center.lat,y.lat),q=c.getRayDirectionFromPixel(d),ne=c.cameraPosition,ee=-1*o.b6(ne,q),Ae=o.bA();o.b1(Ae,ne,[q[0]*ee,q[1]*ee,q[2]*ee]);const _e=o.b8(Ae)-1,De=Math.exp(.5*-Math.max(_e-.3,0)),ze=Vr(c.worldSize,c.center.lat)/Math.min(c.width,c.height),Qe=o.by(ze,.9,.5,1,.25),Ge=(1-o.ar(-S))*Math.min(De,Qe),st=c.center.lat,Xe=c.zoom,At=new o.V(c.center.lng+N*Ge,o.ao(c.center.lat+j*Ge,-o.ap,o.ap));c.setLocationAtPoint(y,d);const ft=c.center,nt=o.by(Math.abs(M),45,85,0,1),wt=o.by(ze,.75,.35,0,1),Dt=Math.pow(Math.max(nt,wt),.25),Lt=o.bL(ft.lng,At.lng),Rt=o.bL(ft.lat,At.lat);c.setCenter(new o.V(ft.lng+Lt*Dt,ft.lat+Rt*Dt).wrap()),c.setZoom(Xe+An(st,c.center.lat))}handleMapControlsPan(r,c,d){if(!r.panDelta)return;const y=c.center.lat,b=c.zoom;c.setCenter(ji(r.panDelta,c).wrap()),c.setZoom(b+An(y,c.center.lat))}cameraForBoxAndBearing(r,c,d,y,b){const S=sc(r,c,d,y,b),M=c.left/b.width*2-1,N=(b.width-c.right)/b.width*2-1,j=c.top/b.height*-2+1,q=(b.height-c.bottom)/b.height*-2+1,ne=o.bL(d.getWest(),d.getEast())<0,ee=ne?d.getEast():d.getWest(),Ae=ne?d.getWest():d.getEast(),_e=Math.max(d.getNorth(),d.getSouth()),De=Math.min(d.getNorth(),d.getSouth()),ze=ee+.5*o.bL(ee,Ae),Qe=_e+.5*o.bL(_e,De),Ge=b.clone();Ge.setCenter(S.center),Ge.setBearing(S.bearing),Ge.setPitch(0),Ge.setRoll(0),Ge.setZoom(S.zoom);const st=Ge.modelViewProjectionMatrix,Xe=[br(d.getNorthWest()),br(d.getNorthEast()),br(d.getSouthWest()),br(d.getSouthEast()),br(new o.V(Ae,Qe)),br(new o.V(ee,Qe)),br(new o.V(ze,_e)),br(new o.V(ze,De))],At=br(S.center);let ft=Number.POSITIVE_INFINITY;for(const nt of Xe)M<0&&(ft=Fi.getLesserNonNegativeNonNull(ft,Fi.solveVectorScale(nt,At,st,"x",M))),N>0&&(ft=Fi.getLesserNonNegativeNonNull(ft,Fi.solveVectorScale(nt,At,st,"x",N))),j>0&&(ft=Fi.getLesserNonNegativeNonNull(ft,Fi.solveVectorScale(nt,At,st,"y",j))),q<0&&(ft=Fi.getLesserNonNegativeNonNull(ft,Fi.solveVectorScale(nt,At,st,"y",q)));if(Number.isFinite(ft)&&ft!==0)return S.zoom=Ge.zoom+o.au(ft),S;jo()}handleJumpToCenterZoom(r,c){const d=r.center.lat,y=r.applyConstrain(c.center?o.V.convert(c.center):r.center,r.zoom).center;r.setCenter(y.wrap());const b=c.zoom!==void 0?+c.zoom:r.zoom+An(d,y.lat);r.zoom!==b&&r.setZoom(b)}handleEaseTo(r,c){const d=r.zoom,y=r.center,b=r.padding,S={roll:r.roll,pitch:r.pitch,bearing:r.bearing},M={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},N=c.zoom!==void 0,j=!r.isPaddingEqual(c.padding);let q=!1;const ne=c.center?o.V.convert(c.center):y,ee=r.applyConstrain(ne,d).center;Fa(r,ee);const Ae=r.clone();Ae.setCenter(ee),Ae.setZoom(N?+c.zoom:d+An(y.lat,ne.lat)),Ae.setBearing(c.bearing);const _e=new o.P(o.ao(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),o.ao(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));Ae.setLocationAtPoint(ee,_e);const De=(c.offset&&c.offsetAsPoint.mag())>0?Ae.center:ee,ze=N?+c.zoom:d+An(y.lat,De.lat),Qe=d+An(y.lat,0),Ge=ze+An(De.lat,0),st=o.bL(y.lng,De.lng),Xe=o.bL(y.lat,De.lat),At=o.ar(Ge-Qe);return q=ze!==d,{easeFunc:ft=>{if(o.bp(S,M)||ua({startEulerAngles:S,endEulerAngles:M,tr:r,k:ft,useSlerp:S.roll!=M.roll}),j&&r.interpolatePadding(b,c.padding,ft),c.around)o.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const nt=Ge>Qe?Math.min(2,At):Math.max(.5,At),wt=Math.pow(nt,1-ft),Dt=Si(y,st,Xe,ft*wt);r.setCenter(Dt.wrap())}if(q){const nt=o.G.number(Qe,Ge,ft)+An(0,r.center.lat);r.setZoom(nt)}},isZooming:q,elevationCenter:De}}handleFlyTo(r,c){const d=c.zoom!==void 0,y=r.center,b=r.zoom,S=r.padding,M=!r.isPaddingEqual(c.padding),N=r.applyConstrain(o.V.convert(c.center||c.locationAtOffset),b).center,j=d?+c.zoom:r.zoom+An(r.center.lat,N.lat),q=r.clone();q.setCenter(N),q.setZoom(j),q.setBearing(c.bearing);const ne=new o.P(o.ao(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),o.ao(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));q.setLocationAtPoint(N,ne);const ee=q.center;Fa(r,ee);const Ae=(function(Xe,At,ft){const nt=br(At),wt=br(ft),Dt=o.b6(nt,wt),Lt=Math.acos(Dt),Rt=Gt(Xe);return Lt/(2*Math.PI)*Rt})(r,y,ee),_e=b+An(y.lat,0),De=j+An(ee.lat,0),ze=o.ar(De-_e);let Qe;if(typeof c.minZoom=="number"){const Xe=+c.minZoom+An(ee.lat,0),At=Math.min(Xe,_e,De)+An(0,ee.lat),ft=r.applyConstrain(ee,At).zoom+An(ee.lat,0);Qe=o.ar(ft-_e)}const Ge=o.bL(y.lng,ee.lng),st=o.bL(y.lat,ee.lat);return{easeFunc:(Xe,At,ft,nt)=>{const wt=Si(y,Ge,st,ft);M&&r.interpolatePadding(S,c.padding,Xe);const Dt=Xe===1?ee:wt;r.setCenter(Dt.wrap());const Lt=_e+o.au(At);r.setZoom(Xe===1?j:Lt+An(0,Dt.lat))},scaleOfZoom:ze,targetCenter:ee,scaleOfMinZoom:Qe,pixelPathLength:Ae}}static solveVectorScale(r,c,d,y,b){const S=y==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],M=[d[3],d[7],d[11],d[15]],N=r[0]*S[0]+r[1]*S[1]+r[2]*S[2],j=r[0]*M[0]+r[1]*M[1]+r[2]*M[2],q=c[0]*S[0]+c[1]*S[1]+c[2]*S[2],ne=c[0]*M[0]+c[1]*M[1]+c[2]*M[2];return q+b*j===N+b*ne||M[3]*(N-q)+S[3]*(ne-j)+N*ne==q*j?null:(q+S[3]-b*ne-b*M[3])/(q-N-b*ne+b*j)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class Tc{constructor(r){this._globe=r,this._mercatorCameraHelper=new ha,this._verticalPerspectiveCameraHelper=new Fi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,d){this.currentHelper.handleMapControlsPan(r,c,d)}cameraForBoxAndBearing(r,c,d,y,b){return this.currentHelper.cameraForBoxAndBearing(r,c,d,y,b)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const ma=(x,r)=>o.B(x,r&&r.filter((c=>c.identifier!=="source.canvas"))),Pa=o.bP();class Xi extends o.E{constructor(r,c={}){var d,y;super(),this._rtlPluginLoaded=()=>{for(const S in this.tileManagers){const M=this.tileManagers[S].getSource().type;M!=="vector"&&M!=="geojson"||this.tileManagers[S].reload()}},this.map=r,this.dispatcher=new Pt(Et(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",((S,M)=>this.getGlyphs(S,M))),this.dispatcher.registerMessageHandler("GI",((S,M)=>this.getImages(S,M))),this.dispatcher.registerMessageHandler("GDA",((S,M)=>this.getDashes(S,M))),this.imageManager=new me,this.imageManager.setEventedParent(this);const b=((d=r._container)===null||d===void 0?void 0:d.lang)||typeof document<"u"&&((y=document.documentElement)===null||y===void 0?void 0:y.lang)||void 0;this.glyphManager=new ot(r._requestManager,c.localIdeographFontFamily,b),this.lineAtlas=new Ce(256,512),this.crossTileSymbolIndex=new vs,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",o.bQ()),vt().on($e,this._rtlPluginLoaded),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const M=this.tileManagers[S.sourceId];if(!M)return;const N=M.getSource();if(N&&N.vectorLayerIds)for(const j in this._layers){const q=this._layers[j];q.source===N.id&&this._validateLayer(q)}}))}_setInitialValues(){var r;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new o.bR,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((r=this.crossTileSymbolIndex)===null||r===void 0?void 0:r.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(r,c){var d,y,b;this._checkLoaded();const S=c===null?(b=(y=(d=this.stylesheet.state)===null||d===void 0?void 0:d[r])===null||y===void 0?void 0:y.default)!==null&&b!==void 0?b:null:c;if(o.bS(S,this._globalState[r]))return this;this._globalState[r]=S,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const c=[];for(const d in r)!o.bS(this._globalState[d],r[d].default)&&(c.push(d),this._globalState[d]=r[d].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(r){if(r.length===0)return;const c=new Set,d={};for(const y of r){d[y]=this._globalState[y];for(const b in this._layers){const S=this._layers[b],M=S.getLayoutAffectingGlobalStateRefs(),N=S.getPaintAffectingGlobalStateRefs();if(M.has(y)&&c.add(S.source),N.has(y))for(const{name:j,value:q}of N.get(y))this._updatePaintProperty(S,j,q)}}this.dispatcher.broadcast("UGS",d);for(const y in this.tileManagers)c.has(y)&&(this._reloadSource(y),this._changed=!0)}loadURL(r,c={},d){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;o.j(y,this._loadStyleRequest).then((S=>{this._loadStyleRequest=null,this._load(S.data,c,d)})).catch((S=>{this._loadStyleRequest=null,S&&!b.signal.aborted&&this.fire(new o.k(S))}))}loadJSON(r,c={},d){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,d)})).catch((()=>{}))}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Pa,{validate:!1})}_load(r,c,d){var y,b;let S=c.transformStyle?c.transformStyle(d,r):r;if(!c.validate||!ma(this,o.C(S))){S=Object.assign({},S),this._loaded=!0,this.stylesheet=S;for(const M in S.sources)this.addSource(M,S.sources[M],{validate:!1});S.sprite?this._loadSprite(S.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(S.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new ie(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var r,c,d;const y=o.bT(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",y),this._order=y.map((b=>b.id)),this._layers={},this._serializedLayers=null;for(const b of y){const S=o.bU(b,this._globalState);if(S.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=S,o.bV(S)&&this.tileManagers[S.source]){const M=(d=(c=b.paint)===null||c===void 0?void 0:c["raster-fade-duration"])!==null&&d!==void 0?d:S.paint.get("raster-fade-duration");this.tileManagers[S.source].setRasterFadeDuration(M)}}}_loadSprite(r,c=!1,d=void 0){this.imageManager.setLoaded(!1);const y=new AbortController;let b;this._spriteRequest=y,(function(S,M,N,j){return o._(this,void 0,void 0,(function*(){const q=be(S),ne=N>1?"@2x":"",ee={},Ae={};for(const{id:_e,url:De}of q){const ze=M.transformRequest(rt(De,ne,".json"),"SpriteJSON");ee[_e]=o.j(ze,j);const Qe=M.transformRequest(rt(De,ne,".png"),"SpriteImage");Ae[_e]=Ve.getImage(Qe,j)}return yield Promise.all([...Object.values(ee),...Object.values(Ae)]),(function(_e,De){return o._(this,void 0,void 0,(function*(){const ze={};for(const Qe in _e){ze[Qe]={};const Ge=P.getImageCanvasContext((yield De[Qe]).data),st=(yield _e[Qe]).data;for(const Xe in st){const{width:At,height:ft,x:nt,y:wt,sdf:Dt,pixelRatio:Lt,stretchX:Rt,stretchY:Qt,content:nr,textFitWidth:Ar,textFitHeight:rr}=st[Xe];ze[Qe][Xe]={data:null,pixelRatio:Lt,sdf:Dt,stretchX:Rt,stretchY:Qt,content:nr,textFitWidth:Ar,textFitHeight:rr,spriteData:{width:At,height:ft,x:nt,y:wt,context:Ge}}}}return ze}))})(ee,Ae)}))})(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((S=>{if(this._spriteRequest=null,S)for(const M in S){this._spritesImagesIds[M]=[];const N=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter((j=>!(j in S))):[];for(const j of N)this.imageManager.removeImage(j),this._changedImages[j]=!0;for(const j in S[M]){const q=M==="default"?j:`${M}:${j}`;this._spritesImagesIds[M].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,S[M][j],!1):this.imageManager.addImage(q,S[M][j]),c&&(this._changedImages[q]=!0)}}})).catch((S=>{this._spriteRequest=null,b=S,y.signal.aborted||this.fire(new o.k(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),d&&d(b)}))}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.tileManagers[r.source];if(!c)return;const d=r.sourceLayer;if(!d)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(d)===-1)&&this.fire(new o.k(new Error(`Source layer "${d}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.tileManagers)if(!this.tileManagers[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?o.bW(d):d);const y=[];for(const b of r)if(d[b]){const S=c?o.bW(d[b]):d[b];y.push(S)}return y}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const d of c){const y=this._layers[d];y.type!=="custom"&&(r[d]=y.serialize())}return r}hasTransitions(){var r,c,d;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(const y in this.tileManagers)if(this.tileManagers[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const S in this._updatedSources){const M=this._updatedSources[S];if(M==="reload")this._reloadSource(S);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const d={};for(const y in this.tileManagers){const b=this.tileManagers[y];d[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(r,this._availableImages),!b.isHidden(r.zoom)&&b.source&&(this.tileManagers[b.source].used=!0)}for(const y in d){const b=this.tileManagers[y];!!d[y]!=!!b.used&&b.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.tileManagers)this.tileManagers[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var d;this._checkLoaded();const y=this.serialize();if(r=c.transformStyle?c.transformStyle(y,r):r,((d=c.validate)===null||d===void 0||d)&&ma(this,o.C(r)))return!1;(r=o.bW(r)).layers=o.bT(r.layers);const b=o.bX(y,r),S=this._getOperationsToPerform(b);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const M of S.operations)M();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],d=[];for(const y of r)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,y.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,y.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,y.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,y.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,y.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,y.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,y.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,y.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,y.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,y.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,y.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,y.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,y.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,y.args)));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,y.args)));break;case"setTransition":c.push((()=>{}));break;default:d.push(y.command)}return{operations:c,unimplemented:d}}addImage(r,c){if(this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,d={}){if(this._checkLoaded(),this.tileManagers[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.C.source,`sources.${r}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.tileManagers[r]=new ns(r,c,this.dispatcher);y.style=this,y.setEventedParent(this,(()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r}))),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.tileManagers[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new o.k(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const c=this.tileManagers[r];delete this.tileManagers[r],delete this._updatedSources[r],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.tileManagers[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.tileManagers[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(c),this._changed=!0}getSource(r){return this.tileManagers[r]&&this.tileManagers[r].getSource()}addLayer(r,c,d={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new o.k(new Error(`Layer "${y}" already exists on this map.`)));let b;if(r.type==="custom"){if(ma(this,o.bY(r)))return;b=o.bU(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=o.bW(r),r=o.e(r,{source:y})),this._validate(o.C.layer,`layers.${y}`,r,{arrayIndex:-1},d))return;b=o.bU(r,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new o.k(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(S,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const M=this._removedLayers[y];delete this._removedLayers[y],M.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.tileManagers[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new o.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const d=this._order.indexOf(r);this._order.splice(d,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new o.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,d){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===c&&y.maxzoom===d||(c!=null&&(y.minzoom=c),d!=null&&(y.maxzoom=d),this._updateLayer(y)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,d={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!o.bS(y.filter,c))return c==null?(y.setFilter(void 0),void this._updateLayer(y)):void(this._validate(o.C.filter,`layers.${y.id}.filter`,c,null,d)||(y.setFilter(o.bW(c)),this._updateLayer(y)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return o.bW(this.getLayer(r).filter)}setLayoutProperty(r,c,d,y={}){this._checkLoaded();const b=this.getLayer(r);b?o.bS(b.getLayoutProperty(c),d)||(b.setLayoutProperty(c,d,y),this._updateLayer(b)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const d=this.getLayer(r);if(d)return d.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,d,y={}){this._checkLoaded();const b=this.getLayer(r);b?o.bS(b.getPaintProperty(c),d)||this._updatePaintProperty(b,c,d,y):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,c,d,y={}){r.setPaintProperty(c,d,y)&&this._updateLayer(r),o.bV(r)&&c==="raster-fade-duration"&&this.tileManagers[r.source].setRasterFadeDuration(d),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const d=r.source,y=r.sourceLayer,b=this.tileManagers[d];if(b===void 0)return void this.fire(new o.k(new Error(`The source '${d}' does not exist in the map's style.`)));const S=b.getSource().type;S==="geojson"&&y?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||y?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,r.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const d=r.source,y=this.tileManagers[d];if(y===void 0)return void this.fire(new o.k(new Error(`The source '${d}' does not exist in the map's style.`)));const b=y.getSource().type,S=b==="vector"?r.sourceLayer:void 0;b!=="vector"||S?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(S,r.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,d=r.sourceLayer,y=this.tileManagers[c];if(y!==void 0)return y.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(d,r.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=o.bZ(this.tileManagers,(b=>b.serialize())),c=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,y=this.stylesheet;return o.b_({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:r,layers:c,terrain:d},(b=>b!==void 0))}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.tileManagers[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.tileManagers[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=S=>this._layers[S].type==="fill-extrusion",d={},y=[];for(let S=this._order.length-1;S>=0;S--){const M=this._order[S];if(c(M)){d[M]=S;for(const N of r){const j=N[M];if(j)for(const q of j)y.push(q)}}}y.sort(((S,M)=>M.intersectionZ-S.intersectionZ));const b=[];for(let S=this._order.length-1;S>=0;S--){const M=this._order[S];if(c(M))for(let N=y.length-1;N>=0;N--){const j=y[N].feature;if(d[j.layer.id]<S)break;b.push(j),y.pop()}else for(const N of r){const j=N[M];if(j)for(const q of j)b.push(q.feature)}}return b}queryRenderedFeatures(r,c,d){c&&c.filter&&this._validate(o.C.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const j of c.layers){const q=this._layers[j];if(!q)return this.fire(new o.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];y[q.source]=!0}}const b=[];c.availableImages=this._availableImages;const S=this._serializedAllLayers(),M=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,N=Object.assign(Object.assign({},c),{layers:M,globalState:this._globalState});for(const j in this.tileManagers)c.layers&&!y[j]||b.push(hr(this.tileManagers[j],this._layers,S,r,N,d,this.map.terrain?(q,ne,ee)=>this.map.terrain.getElevation(q,ne,ee):void 0));return this.placement&&b.push((function(j,q,ne,ee,Ae,_e,De){const ze={},Qe=_e.queryRenderedSymbols(ee),Ge=[];for(const st of Object.keys(Qe).map(Number))Ge.push(De[st]);Ge.sort(Cr);for(const st of Ge){const Xe=st.featureIndex.lookupSymbolFeatures(Qe[st.bucketInstanceId],q,st.bucketIndex,st.sourceLayerIndex,{filterSpec:Ae.filter,globalState:Ae.globalState},Ae.layers,Ae.availableImages,j);for(const At in Xe){const ft=ze[At]=ze[At]||[],nt=Xe[At];nt.sort(((wt,Dt)=>{const Lt=st.featureSortOrder;if(Lt){const Rt=Lt.indexOf(wt.featureIndex);return Lt.indexOf(Dt.featureIndex)-Rt}return Dt.featureIndex-wt.featureIndex}));for(const wt of nt)ft.push(wt)}}return(function(st,Xe,At){for(const ft in st)for(const nt of st[ft])je(nt,At[Xe[ft].source]);return st})(ze,j,ne)})(this._layers,S,this.tileManagers,r,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(r,c){c?.filter&&this._validate(o.C.filter,"querySourceFeatures.filter",c.filter,null,c);const d=this.tileManagers[r];return d?(function(y,b){const S=y.getRenderableIds().map((j=>y.getTileByID(j))),M=[],N={};for(let j=0;j<S.length;j++){const q=S[j],ne=q.tileID.canonical.key;N[ne]||(N[ne]=!0,q.querySourceFeatures(M,b))}return M})(d,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const d=this.light.getLight();let y=!1;for(const S in r)if(!o.bS(r[S],d[S])){y=!0;break}if(!y)return;const b={now:H(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(b)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const d=this.getSky();let y=!1;if(!r&&!d)return;if(r&&!d)y=!0;else if(!r&&d)y=!0;else for(const S in r)if(!o.bS(r[S],d[S])){y=!0;break}if(!y)return;const b={now:H(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(b)}_setProjectionInternal(r){const c=(function(d,y){const b={constrainOverride:y};if(Array.isArray(d)){const S=new It({type:d});return{projection:S,transform:new hl(b),cameraHelper:new Tc(S)}}switch(d){case"mercator":return{projection:new ws,transform:new ul(b),cameraHelper:new ha};case"globe":{const S=new It({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:S,transform:new hl(b),cameraHelper:new Tc(S)}}case"vertical-perspective":return{projection:new Je,transform:new Ta(b),cameraHelper:new Fi};default:return o.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new ws,transform:new ul(b),cameraHelper:new ha}}})(r,this.map.transformConstrain);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const d in this.tileManagers)this.tileManagers[d].reload()}_validate(r,c,d,y,b={}){return(!b||b.validate!==!1)&&ma(this,r.call(o.C,o.e({key:c,style:this.serialize(),value:d,styleSpec:o.u},y)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),vt().off($e,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.tileManagers){const d=this.tileManagers[c];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.tileManagers[r].clearTiles()}_reloadSource(r){this.tileManagers[r].resume(),this.tileManagers[r].reload()}_updateSources(r){for(const c in this.tileManagers)this.tileManagers[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.tileManagers)this._reloadSource(r)}_updatePlacement(r,c,d,y,b=!1){let S=!1,M=!1;const N={};for(const j of this._order){const q=this._layers[j];if(q.type!=="symbol")continue;if(!N[q.source]){const ee=this.tileManagers[q.source];N[q.source]=ee.getRenderableIds(!0).map((Ae=>ee.getTileByID(Ae))).sort(((Ae,_e)=>_e.tileID.overscaledZ-Ae.tileID.overscaledZ||(Ae.tileID.isLessThan(_e.tileID)?-1:1)))}const ne=this.crossTileSymbolIndex.addLayer(q,N[q.source],r.center.lng);S=S||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(H(),r.zoom))&&(this.pauseablePlacement=new Al(r,this.map.terrain,this._order,b,c,d,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(H()),M=!0),S&&this.pauseablePlacement.placement.setStale()),M||S)for(const j of this._order){const q=this._layers[j];q.type==="symbol"&&this.placement.updateLayerOpacities(q,N[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(H())}_releaseSymbolFadeTiles(){for(const r in this.tileManagers)this.tileManagers[r].releaseSymbolFadeTiles()}getImages(r,c){return o._(this,void 0,void 0,(function*(){const d=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const y=this.tileManagers[c.source];return y&&y.setDependencies(c.tileID.key,c.type,c.icons),d}))}getGlyphs(r,c){return o._(this,void 0,void 0,(function*(){const d=yield this.glyphManager.getGlyphs(c.stacks),y=this.tileManagers[c.source];return y&&y.setDependencies(c.tileID.key,c.type,[""]),d}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(o.C.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}getDashes(r,c){return o._(this,void 0,void 0,(function*(){const d={};for(const[y,b]of Object.entries(c.dashes))d[y]=this.lineAtlas.getDash(b.dasharray,b.round);return d}))}addSprite(r,c,d={},y){this._checkLoaded();const b=[{id:r,url:c}],S=[...be(this.stylesheet.sprite),...b];this._validate(o.C.sprite,"sprite",S,null,d)||(this.stylesheet.sprite=S,this._loadSprite(b,!0,y))}removeSprite(r){this._checkLoaded();const c=be(this.stylesheet.sprite);if(c.find((d=>d.id===r))){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;c.splice(c.findIndex((d=>d.id===r)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return be(this.stylesheet.sprite)}setSprite(r,c={},d){this._checkLoaded(),r&&this._validate(o.C.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const r in this.tileManagers){const c=this.tileManagers[r];c.setEventedParent(null),c.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const r in this._layers){const c=this._layers[r];c.setEventedParent(null),c.onRemove&&c.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var sA=o.aV([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Tl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,d,y,b,S,M,N,j){this.context=r;let q=this.boundPaintVertexBuffers.length!==y.length;for(let ne=0;!q&&ne<y.length;ne++)this.boundPaintVertexBuffers[ne]!==y[ne]&&(q=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==d||q||this.boundIndexBuffer!==b||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==j?this.freshBind(c,d,y,b,S,M,N,j):(r.bindVertexArray.set(this.vao),M&&M.bind(),b&&b.dynamicDraw&&b.bind(),N&&N.bind(),j&&j.bind())}freshBind(r,c,d,y,b,S,M,N){const j=r.numAttributes,q=this.context,ne=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=N,c.enableAttributes(ne,r);for(const ee of d)ee.enableAttributes(ne,r);S&&S.enableAttributes(ne,r),M&&M.enableAttributes(ne,r),N&&N.enableAttributes(ne,r),c.bind(),c.setVertexAttribPointers(ne,r,b);for(const ee of d)ee.bind(),ee.setVertexAttribPointers(ne,r,b);S&&(S.bind(),S.setVertexAttribPointers(ne,r,b)),y&&y.bind(),M&&(M.bind(),M.setVertexAttribPointers(ne,r,b)),N&&(N.bind(),N.setVertexAttribPointers(ne,r,b)),q.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ou=(x,r,c,d,y)=>({u_texture:0,u_ele_delta:x,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):o.bq.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:c?c.calculateFogBlendOpacity(d):0,u_horizon_color:c?c.properties.get("horizon-color"):o.bq.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),Pl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function $s(x){const r=[];for(let c=0;c<x.length;c++){if(x[c]===null)continue;const d=x[c].split(" ");r.push(d.pop())}return r}class La{constructor(r,c,d,y,b,S,M,N,j=[]){const q=r.gl;this.program=q.createProgram();const ne=$s(c.staticAttributes),ee=d?d.getBinderAttributes():[],Ae=ne.concat(ee),_e=Jn.prelude.staticUniforms?$s(Jn.prelude.staticUniforms):[],De=M.staticUniforms?$s(M.staticUniforms):[],ze=c.staticUniforms?$s(c.staticUniforms):[],Qe=d?d.getBinderUniforms():[],Ge=_e.concat(De).concat(ze).concat(Qe),st=[];for(const Lt of Ge)st.indexOf(Lt)<0&&st.push(Lt);const Xe=d?d.defines():[];Ei(q)&&Xe.unshift("#version 300 es"),b&&Xe.push("#define OVERDRAW_INSPECTOR;"),S&&Xe.push("#define TERRAIN3D;"),N&&Xe.push(N),j&&Xe.push(...j);let At=Xe.concat(Jn.prelude.fragmentSource,M.fragmentSource,c.fragmentSource).join(`
`),ft=Xe.concat(Jn.prelude.vertexSource,M.vertexSource,c.vertexSource).join(`
`);Ei(q)||(At=(function(Lt){return Lt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(At),ft=(function(Lt){return Lt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ft));const nt=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(nt,At),q.compileShader(nt),!q.getShaderParameter(nt,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(nt)}`);q.attachShader(this.program,nt);const wt=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(wt,ft),q.compileShader(wt),!q.getShaderParameter(wt,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(wt)}`);q.attachShader(this.program,wt),this.attributes={};const Dt={};this.numAttributes=Ae.length;for(let Lt=0;Lt<this.numAttributes;Lt++)Ae[Lt]&&(q.bindAttribLocation(this.program,Lt,Ae[Lt]),this.attributes[Ae[Lt]]=Lt);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(wt),q.deleteShader(nt);for(let Lt=0;Lt<st.length;Lt++){const Rt=st[Lt];if(Rt&&!Dt[Rt]){const Qt=q.getUniformLocation(this.program,Rt);Qt&&(Dt[Rt]=Qt)}}this.fixedUniforms=y(r,Dt),this.terrainUniforms=((Lt,Rt)=>({u_depth:new o.b$(Lt,Rt.u_depth),u_terrain:new o.b$(Lt,Rt.u_terrain),u_terrain_dim:new o.br(Lt,Rt.u_terrain_dim),u_terrain_matrix:new o.c1(Lt,Rt.u_terrain_matrix),u_terrain_unpack:new o.c2(Lt,Rt.u_terrain_unpack),u_terrain_exaggeration:new o.br(Lt,Rt.u_terrain_exaggeration)}))(r,Dt),this.projectionUniforms=((Lt,Rt)=>({u_projection_matrix:new o.c1(Lt,Rt.u_projection_matrix),u_projection_tile_mercator_coords:new o.c2(Lt,Rt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.c2(Lt,Rt.u_projection_clipping_plane),u_projection_transition:new o.br(Lt,Rt.u_projection_transition),u_projection_fallback_matrix:new o.c1(Lt,Rt.u_projection_fallback_matrix)}))(r,Dt),this.binderUniforms=d?d.getUniforms(r,Dt):[]}draw(r,c,d,y,b,S,M,N,j,q,ne,ee,Ae,_e,De,ze,Qe,Ge,st){const Xe=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(y),r.setColorMode(b),r.setCullFace(S),N){r.activeTexture.set(Xe.TEXTURE2),Xe.bindTexture(Xe.TEXTURE_2D,N.depthTexture),r.activeTexture.set(Xe.TEXTURE3),Xe.bindTexture(Xe.TEXTURE_2D,N.texture);for(const ft in this.terrainUniforms)this.terrainUniforms[ft].set(N[ft])}if(j)for(const ft in j)this.projectionUniforms[Pl[ft]].set(j[ft]);if(M)for(const ft in this.fixedUniforms)this.fixedUniforms[ft].set(M[ft]);ze&&ze.setUniforms(r,this.binderUniforms,_e,{zoom:De});let At=0;switch(c){case Xe.LINES:At=2;break;case Xe.TRIANGLES:At=3;break;case Xe.LINE_STRIP:At=1}for(const ft of Ae.get()){const nt=ft.vaos||(ft.vaos={});(nt[q]||(nt[q]=new Tl)).bind(r,this,ne,ze?ze.getPaintVertexBuffers():[],ee,ft.vertexOffset,Qe,Ge,st),Xe.drawElements(c,ft.primitiveLength*At,Xe.UNSIGNED_SHORT,ft.primitiveOffset*At*2)}}}function fl(x,r,c){const d=1/o.aO(c,1,r.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,r.transform.tileZoom)/y,S=b*(c.tileID.canonical.x+c.tileID.wrap*y),M=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[S>>16,M>>16],u_pixel_coord_lower:[65535&S,65535&M]}}const LA=(x,r,c,d)=>{const y=x.style.light,b=y.properties.get("position"),S=[b.x,b.y,b.z],M=o.c5();y.properties.get("anchor")==="viewport"&&o.c6(M,x.transform.bearingInRadians),o.c7(S,S,M);const N=x.transform.transformLightDirection(S),j=y.properties.get("color");return{u_lightpos:S,u_lightpos_globe:N,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:d}},Bo=(x,r,c,d,y,b,S)=>o.e(LA(x,r,c,d),fl(b,x,S),{u_height_factor:-Math.pow(2,y.overscaledZ)/S.tileSize/8}),Ll=(x,r,c,d)=>o.e(fl(r,x,c),{u_fill_translate:d}),oA=(x,r)=>({u_world:x,u_fill_translate:r}),aA=(x,r,c,d,y)=>o.e(Ll(x,r,c,y),{u_world:d}),Ml=(x,r,c,d,y)=>{const b=x.transform;let S,M,N=0;if(c.paint.get("circle-pitch-alignment")==="map"){const j=o.aO(r,1,b.zoom);S=!0,M=[j,j],N=j/(o.a5*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*y}else S=!1,M=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+S,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:M,u_globe_extrude_scale:N,u_translate:d}},Ws=x=>({u_pixel_extrude_scale:[1/x.width,1/x.height]}),qo=x=>({u_viewport_size:[x.width,x.height]}),Co=(x,r=1)=>({u_color:x,u_overlay:0,u_overlay_scale:r}),ga=(x,r,c,d)=>{const y=o.aO(x,1,r)/(o.a5*Math.pow(2,x.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:o.aO(x,1,r),u_intensity:c,u_globe_extrude_scale:y}},dl=(x,r,c,d)=>{const y=o.N();o.c8(y,0,x.width,x.height,0,0,1);const b=x.context.gl;return{u_matrix:y,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:c,u_color_ramp:d,u_opacity:r.paint.get("heatmap-opacity")}},Ma=(x,r,c)=>{const d=c.paint.get("hillshade-accent-color");let y;switch(c.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}const b=c.getIlluminationProperties();for(let S=0;S<b.directionRadians.length;S++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[S]+=x.transform.bearingInRadians);return{u_image:0,u_latrange:kl(0,r.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:d,u_method:y,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},oc=(x,r)=>{const c=r.stride,d=o.N();return o.c8(d,0,o.a5,-o.a5,0,0,1),o.O(d,d,[0,-o.a5,0]),{u_matrix:d,u_image:1,u_dimension:[c,c],u_zoom:x.overscaledZ,u_unpack:r.getUnpackVector()}};function kl(x,r){const c=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new o.ab(0,d/c).toLngLat().lat,new o.ab(0,(d+1)/c).toLngLat().lat]}const ss=(x,r,c=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:x.paint.get("color-relief-opacity")}),pl=(x,r,c,d)=>{const y=x.transform;return{u_translation:ac(x,r,c),u_ratio:d/o.aO(r,1,y.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},ml=(x,r,c,d,y)=>o.e(pl(x,r,c,d),{u_image:0,u_image_height:y}),ya=(x,r,c,d,y)=>{const b=x.transform,S=ho(r,b);return{u_translation:ac(x,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:d/o.aO(r,1,b.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[S,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Pc=(x,r,c,d,y)=>{const b=ho(r,x.transform);return o.e(pl(x,r,c,d),{u_tileratio:b,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image:0,u_mix:y.t,u_lineatlas_width:x.lineAtlas.width,u_lineatlas_height:x.lineAtlas.height})},Ul=(x,r,c,d,y,b)=>{const S=ho(r,x.transform);return o.e(pl(x,r,c,d),{u_image:0,u_image_height:b,u_tileratio:S,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image_dash:1,u_mix:y.t,u_lineatlas_width:x.lineAtlas.width,u_lineatlas_height:x.lineAtlas.height})};function ho(x,r){return 1/o.aO(x,1,r.tileZoom)}function ac(x,r,c){return o.aP(x.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const gl=(x,r,c,d,y)=>{return{u_tl_parent:x,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(S=d.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(b=d.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Dl(d.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var b,S};function Dl(x){x*=Math.PI/180;const r=Math.sin(x),c=Math.cos(x);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Rl=(x,r,c,d,y,b,S,M,N,j,q,ne,ee)=>{const Ae=S.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_pitch:Ae.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_label_plane_matrix:M,u_coord_matrix:N,u_is_text:+q,u_pitch_with_map:+d,u_is_along_line:y,u_is_variable_anchor:b,u_texsize:ne,u_texture:0,u_translation:j,u_pitched_scale:ee}},Nl=(x,r,c,d,y,b,S,M,N,j,q,ne,ee,Ae)=>{const _e=S.transform;return o.e(Rl(x,r,c,d,y,b,S,M,N,j,q,ne,Ae),{u_gamma_scale:d?Math.cos(_e.pitch*Math.PI/180)*_e.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},$o=(x,r,c,d,y,b,S,M,N,j,q,ne,ee)=>o.e(Nl(x,r,c,d,y,b,S,M,N,j,!0,q,0,ee),{u_texsize_icon:ne,u_texture_icon:1}),lc=(x,r)=>({u_opacity:x,u_color:r}),os=(x,r,c,d,y)=>o.e((function(b,S,M,N){const j=M.imageManager.getPattern(b.from.toString()),q=M.imageManager.getPattern(b.to.toString()),{width:ne,height:ee}=M.imageManager.getPixelSize(),Ae=Math.pow(2,N.tileID.overscaledZ),_e=N.tileSize*Math.pow(2,M.transform.tileZoom)/Ae,De=_e*(N.tileID.canonical.x+N.tileID.wrap*Ae),ze=_e*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[ne,ee],u_mix:S.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/o.aO(N,1,M.transform.tileZoom),u_pixel_coord_upper:[De>>16,ze>>16],u_pixel_coord_lower:[65535&De,65535&ze]}})(c,y,r,d),{u_opacity:x}),Eo=(x,r)=>{},si={fillExtrusion:(x,r)=>({u_lightpos:new o.c3(x,r.u_lightpos),u_lightpos_globe:new o.c3(x,r.u_lightpos_globe),u_lightintensity:new o.br(x,r.u_lightintensity),u_lightcolor:new o.c3(x,r.u_lightcolor),u_vertical_gradient:new o.br(x,r.u_vertical_gradient),u_opacity:new o.br(x,r.u_opacity),u_fill_translate:new o.c4(x,r.u_fill_translate)}),fillExtrusionPattern:(x,r)=>({u_lightpos:new o.c3(x,r.u_lightpos),u_lightpos_globe:new o.c3(x,r.u_lightpos_globe),u_lightintensity:new o.br(x,r.u_lightintensity),u_lightcolor:new o.c3(x,r.u_lightcolor),u_vertical_gradient:new o.br(x,r.u_vertical_gradient),u_height_factor:new o.br(x,r.u_height_factor),u_opacity:new o.br(x,r.u_opacity),u_fill_translate:new o.c4(x,r.u_fill_translate),u_image:new o.b$(x,r.u_image),u_texsize:new o.c4(x,r.u_texsize),u_pixel_coord_upper:new o.c4(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(x,r.u_pixel_coord_lower),u_scale:new o.c3(x,r.u_scale),u_fade:new o.br(x,r.u_fade)}),fill:(x,r)=>({u_fill_translate:new o.c4(x,r.u_fill_translate)}),fillPattern:(x,r)=>({u_image:new o.b$(x,r.u_image),u_texsize:new o.c4(x,r.u_texsize),u_pixel_coord_upper:new o.c4(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(x,r.u_pixel_coord_lower),u_scale:new o.c3(x,r.u_scale),u_fade:new o.br(x,r.u_fade),u_fill_translate:new o.c4(x,r.u_fill_translate)}),fillOutline:(x,r)=>({u_world:new o.c4(x,r.u_world),u_fill_translate:new o.c4(x,r.u_fill_translate)}),fillOutlinePattern:(x,r)=>({u_world:new o.c4(x,r.u_world),u_image:new o.b$(x,r.u_image),u_texsize:new o.c4(x,r.u_texsize),u_pixel_coord_upper:new o.c4(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(x,r.u_pixel_coord_lower),u_scale:new o.c3(x,r.u_scale),u_fade:new o.br(x,r.u_fade),u_fill_translate:new o.c4(x,r.u_fill_translate)}),circle:(x,r)=>({u_camera_to_center_distance:new o.br(x,r.u_camera_to_center_distance),u_scale_with_map:new o.b$(x,r.u_scale_with_map),u_pitch_with_map:new o.b$(x,r.u_pitch_with_map),u_extrude_scale:new o.c4(x,r.u_extrude_scale),u_device_pixel_ratio:new o.br(x,r.u_device_pixel_ratio),u_globe_extrude_scale:new o.br(x,r.u_globe_extrude_scale),u_translate:new o.c4(x,r.u_translate)}),collisionBox:(x,r)=>({u_pixel_extrude_scale:new o.c4(x,r.u_pixel_extrude_scale)}),collisionCircle:(x,r)=>({u_viewport_size:new o.c4(x,r.u_viewport_size)}),debug:(x,r)=>({u_color:new o.c0(x,r.u_color),u_overlay:new o.b$(x,r.u_overlay),u_overlay_scale:new o.br(x,r.u_overlay_scale)}),depth:Eo,clippingMask:Eo,heatmap:(x,r)=>({u_extrude_scale:new o.br(x,r.u_extrude_scale),u_intensity:new o.br(x,r.u_intensity),u_globe_extrude_scale:new o.br(x,r.u_globe_extrude_scale)}),heatmapTexture:(x,r)=>({u_matrix:new o.c1(x,r.u_matrix),u_world:new o.c4(x,r.u_world),u_image:new o.b$(x,r.u_image),u_color_ramp:new o.b$(x,r.u_color_ramp),u_opacity:new o.br(x,r.u_opacity)}),hillshade:(x,r)=>({u_image:new o.b$(x,r.u_image),u_latrange:new o.c4(x,r.u_latrange),u_exaggeration:new o.br(x,r.u_exaggeration),u_altitudes:new o.ca(x,r.u_altitudes),u_azimuths:new o.ca(x,r.u_azimuths),u_accent:new o.c0(x,r.u_accent),u_method:new o.b$(x,r.u_method),u_shadows:new o.c9(x,r.u_shadows),u_highlights:new o.c9(x,r.u_highlights)}),hillshadePrepare:(x,r)=>({u_matrix:new o.c1(x,r.u_matrix),u_image:new o.b$(x,r.u_image),u_dimension:new o.c4(x,r.u_dimension),u_zoom:new o.br(x,r.u_zoom),u_unpack:new o.c2(x,r.u_unpack)}),colorRelief:(x,r)=>({u_image:new o.b$(x,r.u_image),u_unpack:new o.c2(x,r.u_unpack),u_dimension:new o.c4(x,r.u_dimension),u_elevation_stops:new o.b$(x,r.u_elevation_stops),u_color_stops:new o.b$(x,r.u_color_stops),u_color_ramp_size:new o.b$(x,r.u_color_ramp_size),u_opacity:new o.br(x,r.u_opacity)}),line:(x,r)=>({u_translation:new o.c4(x,r.u_translation),u_ratio:new o.br(x,r.u_ratio),u_device_pixel_ratio:new o.br(x,r.u_device_pixel_ratio),u_units_to_pixels:new o.c4(x,r.u_units_to_pixels)}),lineGradient:(x,r)=>({u_translation:new o.c4(x,r.u_translation),u_ratio:new o.br(x,r.u_ratio),u_device_pixel_ratio:new o.br(x,r.u_device_pixel_ratio),u_units_to_pixels:new o.c4(x,r.u_units_to_pixels),u_image:new o.b$(x,r.u_image),u_image_height:new o.br(x,r.u_image_height)}),linePattern:(x,r)=>({u_translation:new o.c4(x,r.u_translation),u_texsize:new o.c4(x,r.u_texsize),u_ratio:new o.br(x,r.u_ratio),u_device_pixel_ratio:new o.br(x,r.u_device_pixel_ratio),u_image:new o.b$(x,r.u_image),u_units_to_pixels:new o.c4(x,r.u_units_to_pixels),u_scale:new o.c3(x,r.u_scale),u_fade:new o.br(x,r.u_fade)}),lineSDF:(x,r)=>({u_translation:new o.c4(x,r.u_translation),u_ratio:new o.br(x,r.u_ratio),u_device_pixel_ratio:new o.br(x,r.u_device_pixel_ratio),u_units_to_pixels:new o.c4(x,r.u_units_to_pixels),u_image:new o.b$(x,r.u_image),u_mix:new o.br(x,r.u_mix),u_tileratio:new o.br(x,r.u_tileratio),u_crossfade_from:new o.br(x,r.u_crossfade_from),u_crossfade_to:new o.br(x,r.u_crossfade_to),u_lineatlas_width:new o.br(x,r.u_lineatlas_width),u_lineatlas_height:new o.br(x,r.u_lineatlas_height)}),lineGradientSDF:(x,r)=>({u_translation:new o.c4(x,r.u_translation),u_ratio:new o.br(x,r.u_ratio),u_device_pixel_ratio:new o.br(x,r.u_device_pixel_ratio),u_units_to_pixels:new o.c4(x,r.u_units_to_pixels),u_image:new o.b$(x,r.u_image),u_image_height:new o.br(x,r.u_image_height),u_tileratio:new o.br(x,r.u_tileratio),u_crossfade_from:new o.br(x,r.u_crossfade_from),u_crossfade_to:new o.br(x,r.u_crossfade_to),u_image_dash:new o.b$(x,r.u_image_dash),u_mix:new o.br(x,r.u_mix),u_lineatlas_width:new o.br(x,r.u_lineatlas_width),u_lineatlas_height:new o.br(x,r.u_lineatlas_height)}),raster:(x,r)=>({u_tl_parent:new o.c4(x,r.u_tl_parent),u_scale_parent:new o.br(x,r.u_scale_parent),u_buffer_scale:new o.br(x,r.u_buffer_scale),u_fade_t:new o.br(x,r.u_fade_t),u_opacity:new o.br(x,r.u_opacity),u_image0:new o.b$(x,r.u_image0),u_image1:new o.b$(x,r.u_image1),u_brightness_low:new o.br(x,r.u_brightness_low),u_brightness_high:new o.br(x,r.u_brightness_high),u_saturation_factor:new o.br(x,r.u_saturation_factor),u_contrast_factor:new o.br(x,r.u_contrast_factor),u_spin_weights:new o.c3(x,r.u_spin_weights),u_coords_top:new o.c2(x,r.u_coords_top),u_coords_bottom:new o.c2(x,r.u_coords_bottom)}),symbolIcon:(x,r)=>({u_is_size_zoom_constant:new o.b$(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(x,r.u_is_size_feature_constant),u_size_t:new o.br(x,r.u_size_t),u_size:new o.br(x,r.u_size),u_camera_to_center_distance:new o.br(x,r.u_camera_to_center_distance),u_pitch:new o.br(x,r.u_pitch),u_rotate_symbol:new o.b$(x,r.u_rotate_symbol),u_aspect_ratio:new o.br(x,r.u_aspect_ratio),u_fade_change:new o.br(x,r.u_fade_change),u_label_plane_matrix:new o.c1(x,r.u_label_plane_matrix),u_coord_matrix:new o.c1(x,r.u_coord_matrix),u_is_text:new o.b$(x,r.u_is_text),u_pitch_with_map:new o.b$(x,r.u_pitch_with_map),u_is_along_line:new o.b$(x,r.u_is_along_line),u_is_variable_anchor:new o.b$(x,r.u_is_variable_anchor),u_texsize:new o.c4(x,r.u_texsize),u_texture:new o.b$(x,r.u_texture),u_translation:new o.c4(x,r.u_translation),u_pitched_scale:new o.br(x,r.u_pitched_scale)}),symbolSDF:(x,r)=>({u_is_size_zoom_constant:new o.b$(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(x,r.u_is_size_feature_constant),u_size_t:new o.br(x,r.u_size_t),u_size:new o.br(x,r.u_size),u_camera_to_center_distance:new o.br(x,r.u_camera_to_center_distance),u_pitch:new o.br(x,r.u_pitch),u_rotate_symbol:new o.b$(x,r.u_rotate_symbol),u_aspect_ratio:new o.br(x,r.u_aspect_ratio),u_fade_change:new o.br(x,r.u_fade_change),u_label_plane_matrix:new o.c1(x,r.u_label_plane_matrix),u_coord_matrix:new o.c1(x,r.u_coord_matrix),u_is_text:new o.b$(x,r.u_is_text),u_pitch_with_map:new o.b$(x,r.u_pitch_with_map),u_is_along_line:new o.b$(x,r.u_is_along_line),u_is_variable_anchor:new o.b$(x,r.u_is_variable_anchor),u_texsize:new o.c4(x,r.u_texsize),u_texture:new o.b$(x,r.u_texture),u_gamma_scale:new o.br(x,r.u_gamma_scale),u_device_pixel_ratio:new o.br(x,r.u_device_pixel_ratio),u_is_halo:new o.b$(x,r.u_is_halo),u_translation:new o.c4(x,r.u_translation),u_pitched_scale:new o.br(x,r.u_pitched_scale)}),symbolTextAndIcon:(x,r)=>({u_is_size_zoom_constant:new o.b$(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(x,r.u_is_size_feature_constant),u_size_t:new o.br(x,r.u_size_t),u_size:new o.br(x,r.u_size),u_camera_to_center_distance:new o.br(x,r.u_camera_to_center_distance),u_pitch:new o.br(x,r.u_pitch),u_rotate_symbol:new o.b$(x,r.u_rotate_symbol),u_aspect_ratio:new o.br(x,r.u_aspect_ratio),u_fade_change:new o.br(x,r.u_fade_change),u_label_plane_matrix:new o.c1(x,r.u_label_plane_matrix),u_coord_matrix:new o.c1(x,r.u_coord_matrix),u_is_text:new o.b$(x,r.u_is_text),u_pitch_with_map:new o.b$(x,r.u_pitch_with_map),u_is_along_line:new o.b$(x,r.u_is_along_line),u_is_variable_anchor:new o.b$(x,r.u_is_variable_anchor),u_texsize:new o.c4(x,r.u_texsize),u_texsize_icon:new o.c4(x,r.u_texsize_icon),u_texture:new o.b$(x,r.u_texture),u_texture_icon:new o.b$(x,r.u_texture_icon),u_gamma_scale:new o.br(x,r.u_gamma_scale),u_device_pixel_ratio:new o.br(x,r.u_device_pixel_ratio),u_is_halo:new o.b$(x,r.u_is_halo),u_translation:new o.c4(x,r.u_translation),u_pitched_scale:new o.br(x,r.u_pitched_scale)}),background:(x,r)=>({u_opacity:new o.br(x,r.u_opacity),u_color:new o.c0(x,r.u_color)}),backgroundPattern:(x,r)=>({u_opacity:new o.br(x,r.u_opacity),u_image:new o.b$(x,r.u_image),u_pattern_tl_a:new o.c4(x,r.u_pattern_tl_a),u_pattern_br_a:new o.c4(x,r.u_pattern_br_a),u_pattern_tl_b:new o.c4(x,r.u_pattern_tl_b),u_pattern_br_b:new o.c4(x,r.u_pattern_br_b),u_texsize:new o.c4(x,r.u_texsize),u_mix:new o.br(x,r.u_mix),u_pattern_size_a:new o.c4(x,r.u_pattern_size_a),u_pattern_size_b:new o.c4(x,r.u_pattern_size_b),u_scale_a:new o.br(x,r.u_scale_a),u_scale_b:new o.br(x,r.u_scale_b),u_pixel_coord_upper:new o.c4(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(x,r.u_pixel_coord_lower),u_tile_units_to_pixels:new o.br(x,r.u_tile_units_to_pixels)}),terrain:(x,r)=>({u_texture:new o.b$(x,r.u_texture),u_ele_delta:new o.br(x,r.u_ele_delta),u_fog_matrix:new o.c1(x,r.u_fog_matrix),u_fog_color:new o.c0(x,r.u_fog_color),u_fog_ground_blend:new o.br(x,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.br(x,r.u_fog_ground_blend_opacity),u_horizon_color:new o.c0(x,r.u_horizon_color),u_horizon_fog_blend:new o.br(x,r.u_horizon_fog_blend),u_is_globe_mode:new o.br(x,r.u_is_globe_mode)}),terrainDepth:(x,r)=>({u_ele_delta:new o.br(x,r.u_ele_delta)}),terrainCoords:(x,r)=>({u_texture:new o.b$(x,r.u_texture),u_terrain_coords_id:new o.br(x,r.u_terrain_coords_id),u_ele_delta:new o.br(x,r.u_ele_delta)}),projectionErrorMeasurement:(x,r)=>({u_input:new o.br(x,r.u_input),u_output_expected:new o.br(x,r.u_output_expected)}),atmosphere:(x,r)=>({u_sun_pos:new o.c3(x,r.u_sun_pos),u_atmosphere_blend:new o.br(x,r.u_atmosphere_blend),u_globe_position:new o.c3(x,r.u_globe_position),u_globe_radius:new o.br(x,r.u_globe_radius),u_inv_proj_matrix:new o.c1(x,r.u_inv_proj_matrix)}),sky:(x,r)=>({u_sky_color:new o.c0(x,r.u_sky_color),u_horizon_color:new o.c0(x,r.u_horizon_color),u_horizon:new o.c4(x,r.u_horizon),u_horizon_normal:new o.c4(x,r.u_horizon_normal),u_sky_horizon_blend:new o.br(x,r.u_sky_horizon_blend),u_sky_blend:new o.br(x,r.u_sky_blend)})};class _i{constructor(r,c,d){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class bs{constructor(r,c,d,y){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=r;const b=r.gl;this.buffer=b.createBuffer(),r.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let d=0;d<this.attributes.length;d++){const y=c.attributes[this.attributes[d].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,c,d){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],S=c.attributes[b.name];S!==void 0&&r.vertexAttribPointer(S,b.components,r[Yi[b.type]],!1,this.itemSize,b.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Lc extends Pn{getDefault(){return o.bq.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class cc extends Pn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class ka extends Pn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class MA extends Pn{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ua extends Pn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Mc extends Pn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class kc extends Pn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class fo extends Pn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Uc extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class Dc extends Pn{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class au extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class yl extends Pn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class kA extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class UA extends Pn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class lA extends Pn{getDefault(){return o.bq.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class DA extends Pn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Uu extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Rc extends Pn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class So extends Pn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class cA extends Pn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class lo extends Pn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class pn extends Pn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class AA extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Nc extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ch extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ac extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class lu extends Pn{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ii extends Pn{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const d=this.gl;Ei(d)?d.bindVertexArray(r):(c=d.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class cu extends Pn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class RA extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class uc extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ql extends Pn{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Qc extends Ql{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Oc extends Ql{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class NA extends Ql{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const hc="Framebuffer is not complete";class Au{constructor(r,c,d,y,b){this.context=r,this.width=c,this.height=d;const S=r.gl,M=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Qc(r,M),y)this.depthAttachment=b?new NA(r,M):new Oc(r,M);else if(b)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error(hc)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Du{constructor(r){var c,d;if(this.gl=r,this.clearColor=new Lc(this),this.clearDepth=new cc(this),this.clearStencil=new ka(this),this.colorMask=new MA(this),this.depthMask=new Ua(this),this.stencilMask=new Mc(this),this.stencilFunc=new kc(this),this.stencilOp=new fo(this),this.stencilTest=new Uc(this),this.depthRange=new Dc(this),this.depthTest=new au(this),this.depthFunc=new yl(this),this.blend=new kA(this),this.blendFunc=new UA(this),this.blendColor=new lA(this),this.blendEquation=new DA(this),this.cullFace=new Uu(this),this.cullFaceSide=new Rc(this),this.frontFace=new So(this),this.program=new cA(this),this.activeTexture=new lo(this),this.viewport=new pn(this),this.bindFramebuffer=new AA(this),this.bindRenderbuffer=new Nc(this),this.bindTexture=new ch(this),this.bindVertexBuffer=new Ac(this),this.bindElementBuffer=new lu(this),this.bindVertexArray=new Ii(this),this.pixelStoreUnpack=new cu(this),this.pixelStoreUnpackPremultiplyAlpha=new RA(this),this.pixelStoreUnpackFlipY=new uc(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Ei(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:y?.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:y?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new _i(this,r,c)}createVertexBuffer(r,c,d){return new bs(this,r,c,d)}createRenderbuffer(r,c,d){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,r,c,d),this.bindRenderbuffer.set(null),b}createFramebuffer(r,c,d,y){return new Au(this,r,c,d,y)}clear({color:r,depth:c,stencil:d}){const y=this.gl;let b=0;r&&(b|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d!==void 0&&(b|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),y.clear(b)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){o.bS(r.blendFunction,Nn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Ei(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Ei(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let uA;function zc(x,r,c,d,y){const b=x.context,S=x.transform,M=b.gl,N=x.useProgram("collisionBox"),j=[];let q=0,ne=0;for(let Qe=0;Qe<d.length;Qe++){const Ge=d[Qe],st=r.getTile(Ge).getBucket(c);if(!st)continue;const Xe=y?st.textCollisionBox:st.iconCollisionBox,At=st.collisionCircleArray;At.length>0&&(j.push({circleArray:At,circleOffset:ne,coord:Ge}),q+=At.length/4,ne=q),Xe&&N.draw(b,M.LINES,mn.disabled,bn.disabled,x.colorModeForRenderPass(),En.disabled,Ws(x.transform),x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ge),S.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,null,x.transform.zoom,null,null,Xe.collisionVertexBuffer)}if(!y||!j.length)return;const ee=x.useProgram("collisionCircle"),Ae=new o.cb;Ae.resize(4*q),Ae._trim();let _e=0;for(const Qe of j)for(let Ge=0;Ge<Qe.circleArray.length/4;Ge++){const st=4*Ge,Xe=Qe.circleArray[st+0],At=Qe.circleArray[st+1],ft=Qe.circleArray[st+2],nt=Qe.circleArray[st+3];Ae.emplace(_e++,Xe,At,ft,nt,0),Ae.emplace(_e++,Xe,At,ft,nt,1),Ae.emplace(_e++,Xe,At,ft,nt,2),Ae.emplace(_e++,Xe,At,ft,nt,3)}(!uA||uA.length<2*q)&&(uA=(function(Qe){const Ge=2*Qe,st=new o.cd;st.resize(Ge),st._trim();for(let Xe=0;Xe<Ge;Xe++){const At=6*Xe;st.uint16[At+0]=4*Xe+0,st.uint16[At+1]=4*Xe+1,st.uint16[At+2]=4*Xe+2,st.uint16[At+3]=4*Xe+2,st.uint16[At+4]=4*Xe+3,st.uint16[At+5]=4*Xe+0}return st})(q));const De=b.createIndexBuffer(uA,!0),ze=b.createVertexBuffer(Ae,o.cc.members,!0);for(const Qe of j){const Ge=qo(x.transform);ee.draw(b,M.TRIANGLES,mn.disabled,bn.disabled,x.colorModeForRenderPass(),En.disabled,Ge,x.style.map.terrain&&x.style.map.terrain.getTerrainData(Qe.coord),null,c.id,ze,De,o.aY.simpleSegment(0,2*Qe.circleOffset,Qe.circleArray.length,Qe.circleArray.length/2),null,x.transform.zoom,null,null,null)}ze.destroy(),De.destroy()}const QA=o.as(new Float32Array(16));function OA(x,r,c,d,y,b){const{horizontalAlign:S,verticalAlign:M}=o.aT(x);return new o.P((-(S-.5)*r/y+d[0])*b,(-(M-.5)*c/y+d[1])*b)}function fc(x,r,c,d,y,b){const S=r.tileAnchorPoint.add(new o.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let M=d.mult(b);c||(M=M.rotate(-y));const N=S.add(M);return fn(N.x,N.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const M=jn(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(x),N=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return x.add(d.rotate(N))}return x.add(d)}function hA(x,r,c,d,y,b,S,M,N,j,q,ne){const ee=x.text.placedSymbolArray,Ae=x.text.dynamicLayoutVertexArray,_e=x.icon.dynamicLayoutVertexArray,De={};Ae.clear();for(let ze=0;ze<ee.length;ze++){const Qe=ee.get(ze),Ge=Qe.hidden||!Qe.crossTileID||x.allowVerticalPlacement&&!Qe.placedOrientation?null:d[Qe.crossTileID];if(Ge){const st=new o.P(Qe.anchorX,Qe.anchorY),Xe={getElevation:ne,width:y.width,height:y.height,pitchedLabelPlaneMatrix:b,pitchWithMap:c,transform:y,tileAnchorPoint:st,translation:j,unwrappedTileID:q},At=c?ll(st.x,st.y,Xe):jn(st.x,st.y,Xe),ft=ol(y.cameraToCenterDistance,At.signedDistanceFromCamera);let nt=o.aB(x.textSizeData,M,Qe)*ft/o.aN;c&&(nt*=x.tilePixelRatio/S);const{width:wt,height:Dt,anchor:Lt,textOffset:Rt,textBoxScale:Qt}=Ge,nr=OA(Lt,wt,Dt,Rt,Qt,nt),Ar=y.getPitchedTextCorrection(st.x+j[0],st.y+j[1],q),rr=fc(At.point,Xe,r,nr,-y.bearingInRadians,Ar),Dr=x.allowVerticalPlacement&&Qe.placedOrientation===o.aA.vertical?Math.PI/2:0;for(let vn=0;vn<Qe.numGlyphs;vn++)o.aH(Ae,rr,Dr);N&&Qe.associatedIconIndex>=0&&(De[Qe.associatedIconIndex]={shiftedAnchor:rr,angle:Dr})}else Ba(Qe.numGlyphs,Ae)}if(N){_e.clear();const ze=x.icon.placedSymbolArray;for(let Qe=0;Qe<ze.length;Qe++){const Ge=ze.get(Qe);if(Ge.hidden)Ba(Ge.numGlyphs,_e);else{const st=De[Qe];if(st)for(let Xe=0;Xe<Ge.numGlyphs;Xe++)o.aH(_e,st.shiftedAnchor,st.angle);else Ba(Ge.numGlyphs,_e)}}x.icon.dynamicLayoutVertexBuffer.updateData(_e)}x.text.dynamicLayoutVertexBuffer.updateData(Ae)}function Ru(x,r,c){return c.iconsInText&&r?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function fA(x,r,c,d,y,b,S,M,N,j,q,ne,ee){const Ae=x.context,_e=Ae.gl,De=x.transform,ze=M==="map",Qe=N==="map",Ge=M!=="viewport"&&c.layout.get("symbol-placement")!=="point",st=ze&&!Qe&&!Ge,Xe=!c.layout.get("symbol-sort-key").isConstant();let At=!1;const ft=x.getDepthModeForSublayer(0,mn.ReadOnly),nt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),wt=[],Dt=De.getCircleRadiusCorrection();for(const Lt of d){const Rt=r.getTile(Lt),Qt=Rt.getBucket(c);if(!Qt)continue;const nr=y?Qt.text:Qt.icon;if(!nr||!nr.segments.get().length||!nr.hasVisibleVertices)continue;const Ar=nr.programConfigurations.get(c.id),rr=y||Qt.sdfIcons,Dr=y?Qt.textSizeData:Qt.iconSizeData,vn=Qe||De.pitch!==0,Ai=x.useProgram(Ru(rr,y,Qt),Ar),zi=o.az(Dr,De.zoom),ui=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Lt);let Gi,Pi,Is,Ki,eo=[0,0],Ts=null;if(y)Pi=Rt.glyphAtlasTexture,Is=_e.LINEAR,Gi=Rt.glyphAtlasTexture.size,Qt.iconsInText&&(eo=Rt.imageAtlasTexture.size,Ts=Rt.imageAtlasTexture,Ki=vn||x.options.rotating||x.options.zooming||Dr.kind==="composite"||Dr.kind==="camera"?_e.LINEAR:_e.NEAREST);else{const Os=c.layout.get("icon-size").constantOr(0)!==1||Qt.iconsNeedLinear;Pi=Rt.imageAtlasTexture,Is=rr||x.options.rotating||x.options.zooming||Os||vn?_e.LINEAR:_e.NEAREST,Gi=Rt.imageAtlasTexture.size}const hi=o.aO(Rt,1,x.transform.zoom),Ao=Ri(ze,x.transform,hi),yo=o.N();o.aC(yo,Ao);const dc=El(Qe,ze,x.transform,hi),mA=o.aP(De,Rt,b,S),GA=De.getProjectionData({overscaledTileID:Lt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),zu=nt&&Qt.hasTextData(),pc=c.layout.get("icon-text-fit")!=="none"&&zu&&Qt.hasIconData();if(Ge){const Os=x.style.map.terrain?(Ka,cs)=>x.style.map.terrain.getElevation(Lt,Ka,cs):null,ro=c.layout.get("text-rotation-alignment")==="map";ec(Qt,x,y,Ao,yo,Qe,j,ro,Lt.toUnwrapped(),De.width,De.height,mA,Os)}const Gl=y&&nt||pc,to=Ge||Gl?QA:Qe?Ao:x.transform.clipSpaceToPixelsMatrix,Zo=rr&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vo;vo=rr?Qt.iconsInText?$o(Dr.kind,zi,st,Qe,Ge,Gl,x,to,dc,mA,Gi,eo,Dt):Nl(Dr.kind,zi,st,Qe,Ge,Gl,x,to,dc,mA,y,Gi,0,Dt):Rl(Dr.kind,zi,st,Qe,Ge,Gl,x,to,dc,mA,y,Gi,Dt);const vl={program:Ai,buffers:nr,uniformValues:vo,projectionData:GA,atlasTexture:Pi,atlasTextureIcon:Ts,atlasInterpolation:Is,atlasInterpolationIcon:Ki,isSDF:rr,hasHalo:Zo};if(Xe&&Qt.canOverlap){At=!0;const Os=nr.segments.get();for(const ro of Os)wt.push({segments:new o.aY([ro]),sortKey:ro.sortKey,state:vl,terrainData:ui})}else wt.push({segments:nr.segments,sortKey:0,state:vl,terrainData:ui})}At&&wt.sort(((Lt,Rt)=>Lt.sortKey-Rt.sortKey));for(const Lt of wt){const Rt=Lt.state;if(Ae.activeTexture.set(_e.TEXTURE0),Rt.atlasTexture.bind(Rt.atlasInterpolation,_e.CLAMP_TO_EDGE),Rt.atlasTextureIcon&&(Ae.activeTexture.set(_e.TEXTURE1),Rt.atlasTextureIcon&&Rt.atlasTextureIcon.bind(Rt.atlasInterpolationIcon,_e.CLAMP_TO_EDGE)),Rt.isSDF){const Qt=Rt.uniformValues;Rt.hasHalo&&(Qt.u_is_halo=1,uu(Rt.buffers,Lt.segments,c,x,Rt.program,ft,q,ne,Qt,Rt.projectionData,Lt.terrainData)),Qt.u_is_halo=0}uu(Rt.buffers,Lt.segments,c,x,Rt.program,ft,q,ne,Rt.uniformValues,Rt.projectionData,Lt.terrainData)}}function uu(x,r,c,d,y,b,S,M,N,j,q){const ne=d.context;y.draw(ne,ne.gl.TRIANGLES,b,S,M,En.backCCW,N,q,j,c.id,x.layoutVertexBuffer,x.indexBuffer,r,c.paint,d.transform.zoom,x.programConfigurations.get(c.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function Ah(x,r,c,d,y){const b=x.context,S=b.gl,M=bn.disabled,N=new Nn([S.ONE,S.ONE],o.bq.transparent,[!0,!0,!0,!0]),j=r.getBucket(c);if(!j)return;const q=d.key;let ne=c.heatmapFbos.get(q);ne||(ne=hu(b,r.tileSize,r.tileSize),c.heatmapFbos.set(q,ne)),b.bindFramebuffer.set(ne.framebuffer),b.viewport.set([0,0,r.tileSize,r.tileSize]),b.clear({color:o.bq.transparent});const ee=j.programConfigurations.get(c.id),Ae=x.useProgram("heatmap",ee,!y),_e=x.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),De=x.style.map.terrain.getTerrainData(d);Ae.draw(b,S.TRIANGLES,mn.disabled,M,N,En.disabled,ga(r,x.transform.zoom,c.paint.get("heatmap-intensity"),1),De,_e,c.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,c.paint,x.transform.zoom,ee)}function jh(x,r,c,d,y){const b=x.context,S=b.gl,M=x.transform;b.setColorMode(x.colorModeForRenderPass());const N=zA(b,r),j=c.key,q=r.heatmapFbos.get(j);if(!q)return;b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,q.colorAttachment.get()),b.activeTexture.set(S.TEXTURE1),N.bind(S.LINEAR,S.CLAMP_TO_EDGE);const ne=M.getProjectionData({overscaledTileID:c,applyTerrainMatrix:y,applyGlobeMatrix:!d});x.useProgram("heatmapTexture").draw(b,S.TRIANGLES,mn.disabled,bn.disabled,x.colorModeForRenderPass(),En.disabled,dl(x,r,0,1),null,ne,r.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments,r.paint,M.zoom),q.destroy(),r.heatmapFbos.delete(j)}function hu(x,r,c){var d,y;const b=x.gl,S=b.createTexture();b.bindTexture(b.TEXTURE_2D,S),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const M=(d=x.HALF_FLOAT)!==null&&d!==void 0?d:b.UNSIGNED_BYTE,N=(y=x.RGBA16F)!==null&&y!==void 0?y:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,N,r,c,0,b.RGBA,M,null);const j=x.createFramebuffer(r,c,!1,!1);return j.colorAttachment.set(S),j}function zA(x,r){return r.colorRampTexture||(r.colorRampTexture=new o.T(x,r.colorRamp,x.gl.RGBA)),r.colorRampTexture}function po(x,r,c,d,y,b,S,M){let N=256;if(y.stepInterpolant){const j=r.getSource().maxzoom,q=S.canonical.z===j?Math.ceil(1<<x.transform.maxZoom-S.canonical.z):1;N=o.ao(o.cf(b.maxLineLength/o.a5*1024*q),256,c.maxTextureSize)}return M.gradient=o.cg({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:M.gradient||void 0,clips:b.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new o.T(c,M.gradient,d.RGBA),M.version=y.gradientVersion,M.texture}function va(x,r,c,d,y){x.activeTexture.set(r.TEXTURE0),c.imageAtlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),d.updatePaintBuffers(y)}function $n(x,r,c,d,y,b){(y||x.lineAtlas.dirty)&&(r.activeTexture.set(c.TEXTURE0),x.lineAtlas.bind(r)),d.updatePaintBuffers(b)}function mo(x,r,c,d,y,b,S){const M=b.gradients[y.id];let N=M.texture;y.gradientVersion!==M.version&&(N=po(x,r,c,d,y,b,S,M)),c.activeTexture.set(d.TEXTURE0),N.bind(y.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE)}function co(x,r,c,d,y,b,S,M,N){const j=b.gradients[y.id];let q=j.texture;y.gradientVersion!==j.version&&(q=po(x,r,c,d,y,b,S,j)),c.activeTexture.set(d.TEXTURE0),q.bind(y.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE),c.activeTexture.set(d.TEXTURE1),x.lineAtlas.bind(c),M.updatePaintBuffers(N)}function Rs(x,r,c,d,y){if(!c||!d||!d.imageAtlas)return;const b=d.imageAtlas.patternPositions;let S=b[c.to.toString()],M=b[c.from.toString()];if(!S&&M&&(S=M),!M&&S&&(M=S),!S||!M){const N=y.getPaintProperty(r);S=b[N],M=b[N]}S&&M&&x.setConstantPatternPositions(S,M)}function Zs(x,r,c,d,y,b,S,M){const N=x.context.gl,j="fill-pattern",q=c.paint.get(j),ne=q&&q.constantOr(1),ee=c.getCrossfadeParameters();let Ae,_e,De,ze,Qe;const Ge=x.transform,st=c.paint.get("fill-translate"),Xe=c.paint.get("fill-translate-anchor");S?(_e=ne&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=N.LINES):(_e=ne?"fillPattern":"fill",Ae=N.TRIANGLES);const At=q.constantOr(null);for(const ft of d){const nt=r.getTile(ft);if(ne&&!nt.patternsLoaded())continue;const wt=nt.getBucket(c);if(!wt)continue;const Dt=wt.programConfigurations.get(c.id),Lt=x.useProgram(_e,Dt),Rt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ft);ne&&(x.context.activeTexture.set(N.TEXTURE0),nt.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Dt.updatePaintBuffers(ee)),Rs(Dt,j,At,nt,c);const Qt=Ge.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!M,applyTerrainMatrix:!0}),nr=o.aP(Ge,nt,st,Xe);if(S){ze=wt.indexBuffer2,Qe=wt.segments2;const rr=[N.drawingBufferWidth,N.drawingBufferHeight];De=_e==="fillOutlinePattern"&&ne?aA(x,ee,nt,rr,nr):oA(rr,nr)}else ze=wt.indexBuffer,Qe=wt.segments,De=ne?Ll(x,ee,nt,nr):{u_fill_translate:nr};const Ar=x.stencilModeForClipping(ft);Lt.draw(x.context,Ae,y,Ar,b,En.backCCW,De,Rt,Qt,c.id,wt.layoutVertexBuffer,ze,Qe,c.paint,x.transform.zoom,Dt)}}function Nu(x,r,c,d,y,b,S,M){const N=x.context,j=N.gl,q="fill-extrusion-pattern",ne=c.paint.get(q),ee=ne.constantOr(1),Ae=c.getCrossfadeParameters(),_e=c.paint.get("fill-extrusion-opacity"),De=ne.constantOr(null),ze=x.transform;for(const Qe of d){const Ge=r.getTile(Qe),st=Ge.getBucket(c);if(!st)continue;const Xe=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Qe),At=st.programConfigurations.get(c.id),ft=x.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",At);ee&&(x.context.activeTexture.set(j.TEXTURE0),Ge.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),At.updatePaintBuffers(Ae));const nt=ze.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!M,applyTerrainMatrix:!0});Rs(At,q,De,Ge,c);const wt=o.aP(ze,Ge,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Dt=c.paint.get("fill-extrusion-vertical-gradient"),Lt=ee?Bo(x,Dt,_e,wt,Qe,Ae,Ge):LA(x,Dt,_e,wt);ft.draw(N,N.gl.TRIANGLES,y,b,S,En.backCCW,Lt,Xe,nt,c.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,c.paint,x.transform.zoom,At,x.style.map.terrain&&st.centroidVertexBuffer)}}function Hc(x,r,c,d,y,b,S,M,N){var j;const q=x.style.projection,ne=x.context,ee=x.transform,Ae=ne.gl,_e=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],De=x.useProgram("hillshade",null,!1,_e),ze=!x.options.moving;for(const Qe of d){const Ge=r.getTile(Qe),st=Ge.fbo;if(!st)continue;const Xe=q.getMeshFromTileID(ne,Qe.canonical,M,!0,"raster"),At=(j=x.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(Qe);ne.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,st.colorAttachment.get());const ft=ee.getProjectionData({overscaledTileID:Qe,aligned:ze,applyGlobeMatrix:!N,applyTerrainMatrix:!0});De.draw(ne,Ae.TRIANGLES,b,y[Qe.overscaledZ],S,En.backCCW,Ma(x,Ge,c),At,ft,c.id,Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}}function Da(x,r,c,d,y,b,S,M,N){var j;const q=x.style.projection,ne=x.context,ee=x.transform,Ae=ne.gl,_e=x.useProgram("colorRelief"),De=!x.options.moving;let ze=!0,Qe=0;for(const Ge of d){const st=r.getTile(Ge),Xe=st.dem;if(ze){const Lt=Ae.getParameter(Ae.MAX_TEXTURE_SIZE),{elevationTexture:Rt,colorTexture:Qt}=c.getColorRampTextures(ne,Lt,Xe.getUnpackVector());ne.activeTexture.set(Ae.TEXTURE1),Rt.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE),ne.activeTexture.set(Ae.TEXTURE4),Qt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),ze=!1,Qe=Rt.size[0]}if(!Xe||!Xe.data)continue;const At=Xe.stride,ft=Xe.getPixels();if(ne.activeTexture.set(Ae.TEXTURE0),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),st.demTexture=st.demTexture||x.getTileTexture(At),st.demTexture){const Lt=st.demTexture;Lt.update(ft,{premultiply:!1}),Lt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE)}else st.demTexture=new o.T(ne,ft,Ae.RGBA,{premultiply:!1}),st.demTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE);const nt=q.getMeshFromTileID(ne,Ge.canonical,M,!0,"raster"),wt=(j=x.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(Ge),Dt=ee.getProjectionData({overscaledTileID:Ge,aligned:De,applyGlobeMatrix:!N,applyTerrainMatrix:!0});_e.draw(ne,Ae.TRIANGLES,b,y[Ge.overscaledZ],S,En.backCCW,ss(c,st.dem,Qe),wt,Dt,c.id,nt.vertexBuffer,nt.indexBuffer,nt.segments)}}const Ra=[new o.P(0,0),new o.P(o.a5,0),new o.P(o.a5,o.a5),new o.P(0,o.a5)];function Na(x,r,c,d,y,b,S,M,N=!1,j=!1){const q=d[d.length-1].overscaledZ,ne=x.context,ee=ne.gl,Ae=x.useProgram("raster"),_e=x.transform,De=x.style.projection,ze=x.colorModeForRenderPass(),Qe=!x.options.moving,Ge=c.paint.get("raster-opacity"),st=c.paint.get("raster-resampling"),Xe=c.paint.get("raster-fade-duration"),At=!!x.style.map.terrain;for(const ft of d){const nt=x.getDepthModeForSublayer(ft.overscaledZ-q,Ge===1?mn.ReadWrite:mn.ReadOnly,ee.LESS),wt=r.getTile(ft),Dt=st==="nearest"?ee.NEAREST:ee.LINEAR;ne.activeTexture.set(ee.TEXTURE0),wt.texture.bind(Dt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),ne.activeTexture.set(ee.TEXTURE1);const{parentTile:Lt,parentScaleBy:Rt,parentTopLeft:Qt,fadeValues:nr}=HA(wt,r,Xe,At);wt.fadeOpacity=nr.tileOpacity,Lt?(Lt.fadeOpacity=nr.parentTileOpacity,Lt.texture.bind(Dt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST)):wt.texture.bind(Dt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),wt.texture.useMipmap&&ne.extTextureFilterAnisotropic&&x.transform.pitch>20&&ee.texParameterf(ee.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);const Ar=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ft),rr=_e.getProjectionData({overscaledTileID:ft,aligned:Qe,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Dr=gl(Qt,Rt,nr.fadeMix,c,M),vn=De.getMeshFromTileID(ne,ft.canonical,b,S,"raster");Ae.draw(ne,ee.TRIANGLES,nt,y?y[ft.overscaledZ]:bn.disabled,ze,N?En.frontCCW:En.backCCW,Dr,Ar,rr,c.id,vn.vertexBuffer,vn.indexBuffer,vn.segments)}}function HA(x,r,c,d){const y={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(c===0||d)return y;if(x.fadingParentID){const b=r.getLoadedTile(x.fadingParentID);if(!b)return y;const S=Math.pow(2,b.tileID.overscaledZ-x.tileID.overscaledZ),M=[x.tileID.canonical.x*S%1,x.tileID.canonical.y*S%1],N=(function(j,q,ne){const ee=H(),Ae=(ee-q.timeAdded)/ne,_e=j.fadingDirection===bt.Incoming,De=o.ao((ee-j.timeAdded)/ne,0,1),ze=o.ao(1-Ae,0,1),Qe=_e?De:ze;return{tileOpacity:Qe,parentTileOpacity:_e?ze:De,fadeMix:{opacity:1,mix:1-Qe}}})(x,b,c);return{parentTile:b,parentScaleBy:S,parentTopLeft:M,fadeValues:N}}if(x.selfFading){const b=(function(S,M){const N=(H()-S.timeAdded)/M,j=o.ao(N,0,1);return{tileOpacity:j,fadeMix:{opacity:j,mix:0}}})(x,c);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:b}}return y}const Qu=new o.bq(1,0,0,1),Ol=new o.bq(0,1,0,1),Qa=new o.bq(0,0,1,1),li=new o.bq(1,0,1,1),Xn=new o.bq(0,1,1,1);function zl(x,r,c,d){Xs(x,0,r+c/2,x.transform.width,c,d)}function Ns(x,r,c,d){Xs(x,r-c/2,0,c,x.transform.height,d)}function Xs(x,r,c,d,y,b){const S=x.context,M=S.gl;M.enable(M.SCISSOR_TEST),M.scissor(r*x.pixelRatio,c*x.pixelRatio,d*x.pixelRatio,y*x.pixelRatio),S.clear({color:b}),M.disable(M.SCISSOR_TEST)}function jc(x,r,c){const d=x.context,y=d.gl,b=x.useProgram("debug"),S=mn.disabled,M=bn.disabled,N=x.colorModeForRenderPass(),j="$debug",q=x.style.map.terrain&&x.style.map.terrain.getTerrainData(c);d.activeTexture.set(y.TEXTURE0);const ne=r.getTileByID(c.key).latestRawTileData,ee=Math.floor((ne&&ne.byteLength||0)/1024),Ae=r.getTile(c).tileSize,_e=512/Math.min(Ae,512)*(c.overscaledZ/x.transform.zoom)*.5;let De=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(De+=` => ${c.overscaledZ}`),(function(Qe,Ge){Qe.initDebugOverlayCanvas();const st=Qe.debugOverlayCanvas,Xe=Qe.context.gl,At=Qe.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,st.width,st.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(Ge,5,5),At.strokeText(Ge,5,5),Qe.debugOverlayTexture.update(st),Qe.debugOverlayTexture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE)})(x,`${De} ${ee}kB`);const ze=x.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(d,y.TRIANGLES,S,M,Nn.alphaBlended,En.disabled,Co(o.bq.transparent,_e),null,ze,j,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),b.draw(d,y.LINE_STRIP,S,M,N,En.disabled,Co(o.bq.red),q,ze,j,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function Vc(x,r,c,d){const{isRenderingGlobe:y}=d,b=x.context,S=b.gl,M=x.transform,N=x.colorModeForRenderPass(),j=x.getDepthModeFor3D(),q=x.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,x.width,x.height]);for(const ne of c){const ee=r.getTerrainMesh(ne.tileID),Ae=x.renderToTexture.getTexture(ne),_e=r.getTerrainData(ne.tileID);b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,Ae.texture);const De=r.getMeshFrameDelta(M.zoom),ze=M.calculateFogMatrix(ne.tileID.toUnwrapped()),Qe=ou(De,ze,x.style.sky,M.pitch,y),Ge=M.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(b,S.TRIANGLES,j,bn.disabled,N,En.backCCW,Qe,_e,Ge,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}function go(x,r){if(!r.mesh){const c=new o.aX;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const d=new o.aZ;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),r.mesh=new ii(x.createVertexBuffer(c,_s.members),x.createIndexBuffer(d),o.aY.simpleSegment(0,0,c.length,d.length))}return r.mesh}class fu{constructor(r,c){this.context=new Du(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ns.maxOverzooming+ns.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vs}resize(r,c,d){if(this.width=Math.floor(r*d),this.height=Math.floor(c*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,c=new o.aX;c.emplaceBack(0,0),c.emplaceBack(o.a5,0),c.emplaceBack(0,o.a5),c.emplaceBack(o.a5,o.a5),this.tileExtentBuffer=r.createVertexBuffer(c,_s.members),this.tileExtentSegments=o.aY.simpleSegment(0,0,4,2);const d=new o.aX;d.emplaceBack(0,0),d.emplaceBack(o.a5,0),d.emplaceBack(0,o.a5),d.emplaceBack(o.a5,o.a5),this.debugBuffer=r.createVertexBuffer(d,_s.members),this.debugSegments=o.aY.simpleSegment(0,0,4,5);const y=new o.ci;y.emplaceBack(0,0,0,0),y.emplaceBack(o.a5,0,o.a5,0),y.emplaceBack(0,o.a5,0,o.a5),y.emplaceBack(o.a5,o.a5,o.a5,o.a5),this.rasterBoundsBuffer=r.createVertexBuffer(y,sA.members),this.rasterBoundsSegments=o.aY.simpleSegment(0,0,4,2);const b=new o.aX;b.emplaceBack(0,0),b.emplaceBack(o.a5,0),b.emplaceBack(0,o.a5),b.emplaceBack(o.a5,o.a5),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(b,_s.members),this.rasterBoundsSegmentsPosOnly=o.aY.simpleSegment(0,0,4,5);const S=new o.aX;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(S,_s.members),this.viewportSegments=o.aY.simpleSegment(0,0,4,2);const M=new o.cj;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(M);const N=new o.aZ;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(N);const j=this.context.gl;this.stencilClearMode=new bn({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new ii(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=o.N();o.c8(d,0,this.width,this.height,0,0,1),o.Q(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const y={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,mn.disabled,this.stencilClearMode,Nn.disabled,En.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,d){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const y=this.context;y.setColorMode(Nn.disabled),y.setDepthMode(mn.disabled);const b={};for(const S of c)b[S.key]=this.nextStencilID++;this._renderTileMasks(b,c,d,!0),this._renderTileMasks(b,c,d,!1),this._tileClippingMaskIDs=b}_renderTileMasks(r,c,d,y){const b=this.context,S=b.gl,M=this.style.projection,N=this.transform,j=this.useProgram("clippingMask");for(const q of c){const ne=r[q.key],ee=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),Ae=M.getMeshFromTileID(this.context,q.canonical,y,!0,"stencil"),_e=N.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!d,applyTerrainMatrix:!0});j.draw(b,S.TRIANGLES,mn.disabled,new bn({func:S.ALWAYS,mask:0},ne,255,S.KEEP,S.KEEP,S.REPLACE),Nn.disabled,d?En.disabled:En.backCCW,null,ee,_e,"$clipping",Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,d=this.style.projection,y=this.transform,b=this.useProgram("depth"),S=this.getDepthModeFor3D(),M=Tn(y,{tileSize:y.tileSize});for(const N of M){const j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),q=d.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),ne=y.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(r,c.TRIANGLES,S,bn.disabled,Nn.disabled,En.backCCW,null,j,ne,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new bn({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new bn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,d=r.sort(((S,M)=>M.overscaledZ-S.overscaledZ)),y=d[d.length-1].overscaledZ,b=d[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const S={};for(let M=0;M<b;M++)S[M+y]=new bn({func:c.GEQUAL,mask:255},M+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[S,d]}return[{[y]:bn.disabled},d]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,d=r.sort(((S,M)=>M.overscaledZ-S.overscaledZ)),y=d[d.length-1].overscaledZ,b=d[0].overscaledZ-y+1;if(this.clearStencil(),b>1){const S={},M={};for(let N=0;N<b;N++)S[N+y]=new bn({func:c.GREATER,mask:255},b+1+N,255,c.KEEP,c.KEEP,c.REPLACE),M[N+y]=new bn({func:c.GREATER,mask:255},1+N,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*b+1,[S,M,d]}return this.nextStencilID=3,[{[y]:new bn({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[y]:new bn({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Nn([r.CONSTANT_COLOR,r.ONE],new o.bq(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nn.unblended:Nn.alphaBlended}getDepthModeForSublayer(r,c,d){if(!this.opaquePassEnabledForLayer())return mn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new mn(d||this.context.gl.LEQUAL,c,[y,y])}getDepthModeFor3D(){return new mn(this.context.gl.LEQUAL,mn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var d,y;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(H()),this.imageManager.beginFrame();const b=this.style._order,S=this.style.tileManagers,M={},N={},j={},q={isRenderingToTexture:!1,isRenderingGlobe:((d=r.projection)===null||d===void 0?void 0:d.transitionState)>0};for(const ee in S){const Ae=S[ee];Ae.used&&Ae.prepare(this.context),M[ee]=Ae.getVisibleCoordinates(!1),N[ee]=M[ee].slice().reverse(),j[ee]=Ae.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ee=0;ee<b.length;ee++)if(this.style._layers[b[ee]].is3D()){this.opaquePassCutoff=ee;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ee of b){const Ae=this.style._layers[ee];if(!Ae.hasOffscreenPass()||Ae.isHidden(this.transform.zoom))continue;const _e=N[Ae.source];(Ae.type==="custom"||_e.length)&&this.renderLayer(this,S[Ae.source],Ae,_e,q)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:ee=>this.useProgram(ee)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.bq.black:o.bq.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(ee,Ae){const _e=ee.context,De=_e.gl,ze=((ft,nt,wt)=>{const Dt=Math.cos(nt.rollInRadians),Lt=Math.sin(nt.rollInRadians),Rt=rn(nt),Qt=nt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ft.properties.get("sky-color"),u_horizon_color:ft.properties.get("horizon-color"),u_horizon:[(nt.width/2-Rt*Lt)*wt,(nt.height/2+Rt*Dt)*wt],u_horizon_normal:[-Lt,Dt],u_sky_horizon_blend:ft.properties.get("sky-horizon-blend")*nt.height/2*wt,u_sky_blend:Qt}})(Ae,ee.style.map.transform,ee.pixelRatio),Qe=new mn(De.LEQUAL,mn.ReadWrite,[0,1]),Ge=bn.disabled,st=ee.colorModeForRenderPass(),Xe=ee.useProgram("sky"),At=go(_e,Ae);Xe.draw(_e,De.TRIANGLES,Qe,Ge,st,En.disabled,ze,null,void 0,"sky",At.vertexBuffer,At.indexBuffer,At.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const ee=this.style._layers[b[this.currentLayer]],Ae=S[ee.source],_e=M[ee.source];this._renderTileClippingMasks(ee,_e,!1),this.renderLayer(this,Ae,ee,_e,q)}this.renderPass="translucent";let ne=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const ee=this.style._layers[b[this.currentLayer]],Ae=S[ee.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ee,q))continue;this.opaquePassEnabledForLayer()||ne||(ne=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const _e=(ee.type==="symbol"?j:N)[ee.source];this._renderTileClippingMasks(ee,M[ee.source],!!this.renderToTexture),this.renderLayer(this,Ae,ee,_e,q)}if(q.isRenderingGlobe&&(function(ee,Ae,_e){const De=ee.context,ze=De.gl,Qe=ee.useProgram("atmosphere"),Ge=new mn(ze.LEQUAL,mn.ReadOnly,[0,1]),st=ee.transform,Xe=(function(Qt,nr){const Ar=Qt.properties.get("position"),rr=[-Ar.x,-Ar.y,-Ar.z],Dr=o.as(new Float64Array(16));return Qt.properties.get("anchor")==="map"&&(o.bh(Dr,Dr,nr.rollInRadians),o.bi(Dr,Dr,-nr.pitchInRadians),o.bh(Dr,Dr,nr.bearingInRadians),o.bi(Dr,Dr,nr.center.lat*Math.PI/180),o.bK(Dr,Dr,-nr.center.lng*Math.PI/180)),o.ch(rr,rr,Dr),rr})(_e,ee.transform),At=st.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ft=Ae.properties.get("atmosphere-blend")*At.projectionTransition;if(ft===0)return;const nt=Vr(st.worldSize,st.center.lat),wt=st.inverseProjectionMatrix,Dt=new Float64Array(4);Dt[3]=1,o.aI(Dt,Dt,st.modelViewProjectionMatrix),Dt[0]/=Dt[3],Dt[1]/=Dt[3],Dt[2]/=Dt[3],Dt[3]=1,o.aI(Dt,Dt,wt),Dt[0]/=Dt[3],Dt[1]/=Dt[3],Dt[2]/=Dt[3],Dt[3]=1;const Lt=((Qt,nr,Ar,rr,Dr)=>({u_sun_pos:Qt,u_atmosphere_blend:nr,u_globe_position:Ar,u_globe_radius:rr,u_inv_proj_matrix:Dr}))(Xe,ft,[Dt[0],Dt[1],Dt[2]],nt,wt),Rt=go(De,Ae);Qe.draw(De,ze.TRIANGLES,Ge,bn.disabled,Nn.alphaBlended,En.disabled,Lt,null,null,"atmosphere",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ee=(function(Ae,_e){let De=null;const ze=Object.values(Ae._layers).flatMap((Xe=>Xe.source&&!Xe.isHidden(_e)?[Ae.tileManagers[Xe.source]]:[])),Qe=ze.filter((Xe=>Xe.getSource().type==="vector")),Ge=ze.filter((Xe=>Xe.getSource().type!=="vector")),st=Xe=>{(!De||De.getSource().maxzoom<Xe.getSource().maxzoom)&&(De=Xe)};return Qe.forEach((Xe=>st(Xe))),De||Ge.forEach((Xe=>st(Xe))),De})(this.style,this.transform.zoom);ee&&(function(Ae,_e,De){for(let ze=0;ze<De.length;ze++)jc(Ae,_e,De[ze])})(this,ee,ee.getVisibleCoordinates())}this.options.showPadding&&(function(ee){const Ae=ee.transform.padding;zl(ee,ee.transform.height-(Ae.top||0),3,Qu),zl(ee,Ae.bottom||0,3,Ol),Ns(ee,Ae.left||0,3,Qa),Ns(ee,ee.transform.width-(Ae.right||0),3,li);const _e=ee.transform.centerPoint;(function(De,ze,Qe,Ge){Xs(De,ze-1,Qe-10,2,20,Ge),Xs(De,ze-10,Qe-1,20,2,Ge)})(ee,_e.x,ee.transform.height-_e.y,Xn)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=r?!o.ck(c,d):!o.cl(c,d)),y||(y=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(o.cm(c,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,S){const M=b.context,N=M.gl,j=b.transform,q=Nn.unblended,ne=new mn(N.LEQUAL,mn.ReadWrite,[0,1]),ee=S.tileManager.getRenderableTiles(),Ae=b.useProgram("terrainDepth");M.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),M.clear({color:o.bq.transparent,depth:1});for(const _e of ee){const De=S.getTerrainMesh(_e.tileID),ze=S.getTerrainData(_e.tileID),Qe=j.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ge={u_ele_delta:S.getMeshFrameDelta(j.zoom)};Ae.draw(M,N.TRIANGLES,ne,bn.disabled,q,En.backCCW,Ge,ze,Qe,"terrain",De.vertexBuffer,De.indexBuffer,De.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,S){const M=b.context,N=M.gl,j=b.transform,q=Nn.unblended,ne=new mn(N.LEQUAL,mn.ReadWrite,[0,1]),ee=S.getCoordsTexture(),Ae=S.tileManager.getRenderableTiles(),_e=b.useProgram("terrainCoords");M.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),M.clear({color:o.bq.transparent,depth:1}),S.coordsIndex=[];for(const De of Ae){const ze=S.getTerrainMesh(De.tileID),Qe=S.getTerrainData(De.tileID);M.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,ee.texture);const Ge={u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(j.zoom)},st=j.getProjectionData({overscaledTileID:De.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});_e.draw(M,N.TRIANGLES,ne,bn.disabled,q,En.backCCW,Ge,Qe,st,"terrain",ze.vertexBuffer,ze.indexBuffer,ze.segments),S.coordsIndex.push(De.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(r,c,d,y,b){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(y||[]).length)&&(this.id=d.id,o.cn(d)?(function(S,M,N,j,q,ne){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:ee}=ne,Ae=bn.disabled,_e=S.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(De,ze,Qe,Ge,st,Xe,At,ft,nt){const wt=ze.transform,Dt=ze.style.map.terrain,Lt=st==="map",Rt=Xe==="map";for(const Qt of De){const nr=Ge.getTile(Qt),Ar=nr.getBucket(Qe);if(!Ar||!Ar.text||!Ar.text.segments.get().length)continue;const rr=o.az(Ar.textSizeData,wt.zoom),Dr=o.aO(nr,1,ze.transform.zoom),vn=Ri(Lt,ze.transform,Dr),Ai=Qe.layout.get("icon-text-fit")!=="none"&&Ar.hasIconData();if(rr){const zi=Math.pow(2,wt.zoom-nr.tileID.overscaledZ),ui=Dt?(Gi,Pi)=>Dt.getElevation(Qt,Gi,Pi):null;hA(Ar,Lt,Rt,nt,wt,vn,zi,rr,Ai,o.aP(wt,nr,At,ft),Qt.toUnwrapped(),ui)}}})(j,S,N,M,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),q),N.paint.get("icon-opacity").constantOr(1)!==0&&fA(S,M,N,j,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),Ae,_e,ee),N.paint.get("text-opacity").constantOr(1)!==0&&fA(S,M,N,j,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),Ae,_e,ee),M.map.showCollisionBoxes&&(zc(S,M,N,j,!0),zc(S,M,N,j,!1))})(r,c,d,y,this.style.placement.variableOffsets,b):o.co(d)?(function(S,M,N,j,q){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,ee=N.paint.get("circle-opacity"),Ae=N.paint.get("circle-stroke-width"),_e=N.paint.get("circle-stroke-opacity"),De=!N.layout.get("circle-sort-key").isConstant();if(ee.constantOr(1)===0&&(Ae.constantOr(1)===0||_e.constantOr(1)===0))return;const ze=S.context,Qe=ze.gl,Ge=S.transform,st=S.getDepthModeForSublayer(0,mn.ReadOnly),Xe=bn.disabled,At=S.colorModeForRenderPass(),ft=[],nt=Ge.getCircleRadiusCorrection();for(let wt=0;wt<j.length;wt++){const Dt=j[wt],Lt=M.getTile(Dt),Rt=Lt.getBucket(N);if(!Rt)continue;const Qt=N.paint.get("circle-translate"),nr=N.paint.get("circle-translate-anchor"),Ar=o.aP(Ge,Lt,Qt,nr),rr=Rt.programConfigurations.get(N.id),Dr=S.useProgram("circle",rr),vn=Rt.layoutVertexBuffer,Ai=Rt.indexBuffer,zi=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Dt),ui={programConfiguration:rr,program:Dr,layoutVertexBuffer:vn,indexBuffer:Ai,uniformValues:Ml(S,Lt,N,Ar,nt),terrainData:zi,projectionData:Ge.getProjectionData({overscaledTileID:Dt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0})};if(De){const Gi=Rt.segments.get();for(const Pi of Gi)ft.push({segments:new o.aY([Pi]),sortKey:Pi.sortKey,state:ui})}else ft.push({segments:Rt.segments,sortKey:0,state:ui})}De&&ft.sort(((wt,Dt)=>wt.sortKey-Dt.sortKey));for(const wt of ft){const{programConfiguration:Dt,program:Lt,layoutVertexBuffer:Rt,indexBuffer:Qt,uniformValues:nr,terrainData:Ar,projectionData:rr}=wt.state;Lt.draw(ze,Qe.TRIANGLES,st,Xe,At,En.backCCW,nr,Ar,rr,N.id,Rt,Qt,wt.segments,N.paint,S.transform.zoom,Dt)}})(r,c,d,y,b):o.cp(d)?(function(S,M,N,j,q){if(N.paint.get("heatmap-opacity")===0)return;const ne=S.context,{isRenderingToTexture:ee,isRenderingGlobe:Ae}=q;if(S.style.map.terrain){for(const _e of j){const De=M.getTile(_e);M.hasRenderableParent(_e)||(S.renderPass==="offscreen"?Ah(S,De,N,_e,Ae):S.renderPass==="translucent"&&jh(S,N,_e,ee,Ae))}ne.viewport.set([0,0,S.width,S.height])}else S.renderPass==="offscreen"?(function(_e,De,ze,Qe){const Ge=_e.context,st=Ge.gl,Xe=_e.transform,At=bn.disabled,ft=new Nn([st.ONE,st.ONE],o.bq.transparent,[!0,!0,!0,!0]);(function(nt,wt,Dt){const Lt=nt.gl;nt.activeTexture.set(Lt.TEXTURE1),nt.viewport.set([0,0,wt.width/4,wt.height/4]);let Rt=Dt.heatmapFbos.get(o.ce);Rt?(Lt.bindTexture(Lt.TEXTURE_2D,Rt.colorAttachment.get()),nt.bindFramebuffer.set(Rt.framebuffer)):(Rt=hu(nt,wt.width/4,wt.height/4),Dt.heatmapFbos.set(o.ce,Rt))})(Ge,_e,ze),Ge.clear({color:o.bq.transparent});for(let nt=0;nt<Qe.length;nt++){const wt=Qe[nt];if(De.hasRenderableParent(wt))continue;const Dt=De.getTile(wt),Lt=Dt.getBucket(ze);if(!Lt)continue;const Rt=Lt.programConfigurations.get(ze.id),Qt=_e.useProgram("heatmap",Rt),nr=Xe.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ar=Xe.getCircleRadiusCorrection();Qt.draw(Ge,st.TRIANGLES,mn.disabled,At,ft,En.backCCW,ga(Dt,Xe.zoom,ze.paint.get("heatmap-intensity"),Ar),null,nr,ze.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,ze.paint,Xe.zoom,Rt)}Ge.viewport.set([0,0,_e.width,_e.height])})(S,M,N,j):S.renderPass==="translucent"&&(function(_e,De){const ze=_e.context,Qe=ze.gl;ze.setColorMode(_e.colorModeForRenderPass());const Ge=De.heatmapFbos.get(o.ce);Ge&&(ze.activeTexture.set(Qe.TEXTURE0),Qe.bindTexture(Qe.TEXTURE_2D,Ge.colorAttachment.get()),ze.activeTexture.set(Qe.TEXTURE1),zA(ze,De).bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),_e.useProgram("heatmapTexture").draw(ze,Qe.TRIANGLES,mn.disabled,bn.disabled,_e.colorModeForRenderPass(),En.disabled,dl(_e,De,0,1),null,null,De.id,_e.viewportBuffer,_e.quadTriangleIndexBuffer,_e.viewportSegments,De.paint,_e.transform.zoom))})(S,N)})(r,c,d,y,b):o.cq(d)?(function(S,M,N,j,q){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,ee=N.paint.get("line-opacity"),Ae=N.paint.get("line-width");if(ee.constantOr(1)===0||Ae.constantOr(1)===0)return;const _e=S.getDepthModeForSublayer(0,mn.ReadOnly),De=S.colorModeForRenderPass(),ze=N.paint.get("line-dasharray"),Qe=ze.constantOr(1),Ge=N.paint.get("line-pattern"),st=Ge.constantOr(1),Xe=N.paint.get("line-gradient"),At=N.getCrossfadeParameters();let ft;ft=st?"linePattern":Qe&&Xe?"lineGradientSDF":Qe?"lineSDF":Xe?"lineGradient":"line";const nt=S.context,wt=nt.gl,Dt=S.transform;let Lt=!0;for(const Rt of j){const Qt=M.getTile(Rt);if(st&&!Qt.patternsLoaded())continue;const nr=Qt.getBucket(N);if(!nr)continue;const Ar=nr.programConfigurations.get(N.id),rr=S.context.program.get(),Dr=S.useProgram(ft,Ar),vn=Lt||Dr.program!==rr,Ai=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Rt),zi=Ge.constantOr(null),ui=ze&&ze.constantOr(null);if(zi&&Qt.imageAtlas){const eo=Qt.imageAtlas,Ts=eo.patternPositions[zi.to.toString()],hi=eo.patternPositions[zi.from.toString()];Ts&&hi&&Ar.setConstantPatternPositions(Ts,hi)}else if(ui){const eo=N.layout.get("line-cap")==="round",Ts=S.lineAtlas.getDash(ui.to,eo),hi=S.lineAtlas.getDash(ui.from,eo);Ar.setConstantDashPositions(Ts,hi)}const Gi=Dt.getProjectionData({overscaledTileID:Rt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),Pi=Dt.getPixelScale();let Is;st?(Is=ya(S,Qt,N,Pi,At),va(nt,wt,Qt,Ar,At)):Qe&&Xe?(Is=Ul(S,Qt,N,Pi,At,nr.lineClipsArray.length),co(S,M,nt,wt,N,nr,Rt,Ar,At)):Qe?(Is=Pc(S,Qt,N,Pi,At),$n(S,nt,wt,Ar,vn,At)):Xe?(Is=ml(S,Qt,N,Pi,nr.lineClipsArray.length),mo(S,M,nt,wt,N,nr,Rt)):Is=pl(S,Qt,N,Pi);const Ki=S.stencilModeForClipping(Rt);Dr.draw(nt,wt.TRIANGLES,_e,Ki,De,En.disabled,Is,Ai,Gi,N.id,nr.layoutVertexBuffer,nr.indexBuffer,nr.segments,N.paint,S.transform.zoom,Ar,nr.layoutVertexBuffer2),Lt=!1}})(r,c,d,y,b):o.cr(d)?(function(S,M,N,j,q){const ne=N.paint.get("fill-color"),ee=N.paint.get("fill-opacity");if(ee.constantOr(1)===0)return;const{isRenderingToTexture:Ae}=q,_e=S.colorModeForRenderPass(),De=N.paint.get("fill-pattern"),ze=S.opaquePassEnabledForLayer()&&!De.constantOr(1)&&ne.constantOr(o.bq.transparent).a===1&&ee.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===ze){const Qe=S.getDepthModeForSublayer(1,S.renderPass==="opaque"?mn.ReadWrite:mn.ReadOnly);Zs(S,M,N,j,Qe,_e,!1,Ae)}if(S.renderPass==="translucent"&&N.paint.get("fill-antialias")){const Qe=S.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,mn.ReadOnly);Zs(S,M,N,j,Qe,_e,!0,Ae)}})(r,c,d,y,b):o.cs(d)?(function(S,M,N,j,q){const ne=N.paint.get("fill-extrusion-opacity");if(ne===0)return;const{isRenderingToTexture:ee}=q;if(S.renderPass==="translucent"){const Ae=new mn(S.context.gl.LEQUAL,mn.ReadWrite,S.depthRangeFor3D);if(ne!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))Nu(S,M,N,j,Ae,bn.disabled,Nn.disabled,ee),Nu(S,M,N,j,Ae,S.stencilModeFor3D(),S.colorModeForRenderPass(),ee);else{const _e=S.colorModeForRenderPass();Nu(S,M,N,j,Ae,bn.disabled,_e,ee)}}})(r,c,d,y,b):o.ct(d)?(function(S,M,N,j,q){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,ee=S.context,Ae=S.style.projection.useSubdivision,_e=S.getDepthModeForSublayer(0,mn.ReadOnly),De=S.colorModeForRenderPass();if(S.renderPass==="offscreen")(function(ze,Qe,Ge,st,Xe,At,ft){const nt=ze.context,wt=nt.gl;for(const Dt of Ge){const Lt=Qe.getTile(Dt),Rt=Lt.dem;if(!Rt||!Rt.data||!Lt.needsHillshadePrepare)continue;const Qt=Rt.dim,nr=Rt.stride,Ar=Rt.getPixels();if(nt.activeTexture.set(wt.TEXTURE1),nt.pixelStoreUnpackPremultiplyAlpha.set(!1),Lt.demTexture=Lt.demTexture||ze.getTileTexture(nr),Lt.demTexture){const Dr=Lt.demTexture;Dr.update(Ar,{premultiply:!1}),Dr.bind(wt.NEAREST,wt.CLAMP_TO_EDGE)}else Lt.demTexture=new o.T(nt,Ar,wt.RGBA,{premultiply:!1}),Lt.demTexture.bind(wt.NEAREST,wt.CLAMP_TO_EDGE);nt.activeTexture.set(wt.TEXTURE0);let rr=Lt.fbo;if(!rr){const Dr=new o.T(nt,{width:Qt,height:Qt,data:null},wt.RGBA);Dr.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),rr=Lt.fbo=nt.createFramebuffer(Qt,Qt,!0,!1),rr.colorAttachment.set(Dr.texture)}nt.bindFramebuffer.set(rr.framebuffer),nt.viewport.set([0,0,Qt,Qt]),ze.useProgram("hillshadePrepare").draw(nt,wt.TRIANGLES,Xe,At,ft,En.disabled,oc(Lt.tileID,Rt),null,null,st.id,ze.rasterBoundsBuffer,ze.quadTriangleIndexBuffer,ze.rasterBoundsSegments),Lt.needsHillshadePrepare=!1}})(S,M,j,N,_e,bn.disabled,De),ee.viewport.set([0,0,S.width,S.height]);else if(S.renderPass==="translucent")if(Ae){const[ze,Qe,Ge]=S.stencilConfigForOverlapTwoPass(j);Hc(S,M,N,Ge,ze,_e,De,!1,ne),Hc(S,M,N,Ge,Qe,_e,De,!0,ne)}else{const[ze,Qe]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Hc(S,M,N,Qe,ze,_e,De,!1,ne)}})(r,c,d,y,b):o.cu(d)?(function(S,M,N,j,q){if(S.renderPass!=="translucent"||!j.length)return;const{isRenderingToTexture:ne}=q,ee=S.style.projection.useSubdivision,Ae=S.getDepthModeForSublayer(0,mn.ReadOnly),_e=S.colorModeForRenderPass();if(ee){const[De,ze,Qe]=S.stencilConfigForOverlapTwoPass(j);Da(S,M,N,Qe,De,Ae,_e,!1,ne),Da(S,M,N,Qe,ze,Ae,_e,!0,ne)}else{const[De,ze]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Da(S,M,N,ze,De,Ae,_e,!1,ne)}})(r,c,d,y,b):o.bV(d)?(function(S,M,N,j,q){if(S.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!j.length)return;const{isRenderingToTexture:ne}=q,ee=M.getSource(),Ae=S.style.projection.useSubdivision;if(ee instanceof hn)Na(S,M,N,j,null,!1,!1,ee.tileCoords,ee.flippedWindingOrder,ne);else if(Ae){const[_e,De,ze]=S.stencilConfigForOverlapTwoPass(j);Na(S,M,N,ze,_e,!1,!0,Ra,!1,ne),Na(S,M,N,ze,De,!0,!0,Ra,!1,ne)}else{const[_e,De]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Na(S,M,N,De,_e,!1,!0,Ra,!1,ne)}})(r,c,d,y,b):o.cv(d)?(function(S,M,N,j,q){const ne=N.paint.get("background-color"),ee=N.paint.get("background-opacity");if(ee===0)return;const{isRenderingToTexture:Ae}=q,_e=S.context,De=_e.gl,ze=S.style.projection,Qe=S.transform,Ge=Qe.tileSize,st=N.paint.get("background-pattern");if(S.isPatternMissing(st))return;const Xe=!st&&ne.a===1&&ee===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==Xe)return;const At=bn.disabled,ft=S.getDepthModeForSublayer(0,Xe==="opaque"?mn.ReadWrite:mn.ReadOnly),nt=S.colorModeForRenderPass(),wt=S.useProgram(st?"backgroundPattern":"background"),Dt=j||Tn(Qe,{tileSize:Ge,terrain:S.style.map.terrain});st&&(_e.activeTexture.set(De.TEXTURE0),S.imageManager.bind(S.context));const Lt=N.getCrossfadeParameters();for(const Rt of Dt){const Qt=Qe.getProjectionData({overscaledTileID:Rt,applyGlobeMatrix:!Ae,applyTerrainMatrix:!0}),nr=st?os(ee,S,st,{tileID:Rt,tileSize:Ge},Lt):lc(ee,ne),Ar=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Rt),rr=ze.getMeshFromTileID(_e,Rt.canonical,!1,!0,"raster");wt.draw(_e,De.TRIANGLES,ft,At,nt,En.backCCW,nr,Ar,Qt,N.id,rr.vertexBuffer,rr.indexBuffer,rr.segments)}})(r,0,d,y,b):o.cw(d)&&(function(S,M,N,j){const{isRenderingGlobe:q}=j,ne=S.context,ee=N.implementation,Ae=S.style.projection,_e=S.transform,De=_e.getProjectionDataForCustomLayer(q),ze={farZ:_e.farZ,nearZ:_e.nearZ,fov:_e.fov*Math.PI/180,modelViewProjectionMatrix:_e.modelViewProjectionMatrix,projectionMatrix:_e.projectionMatrix,shaderData:{variantName:Ae.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ae.shaderPreludeCode.vertexSource}`,define:Ae.shaderDefine},defaultProjectionData:De},Qe=ee.renderingMode?ee.renderingMode:"2d";if(S.renderPass==="offscreen"){const Ge=ee.prerender;Ge&&(S.setCustomLayerDefaults(),ne.setColorMode(S.colorModeForRenderPass()),Ge.call(ee,ne.gl,ze),ne.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),ne.setColorMode(S.colorModeForRenderPass()),ne.setStencilMode(bn.disabled);const Ge=Qe==="3d"?S.getDepthModeFor3D():S.getDepthModeForSublayer(0,mn.ReadOnly);ne.setDepthMode(Ge),ee.render(ne.gl,ze),ne.setDirty(),S.setBaseState(),ne.bindFramebuffer.set(null)}})(r,0,d,b))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!c||!d}useProgram(r,c,d=!1,y=[]){this.cache=this.cache||{};const b=!!this.style.map.terrain,S=this.style.projection,M=d?Jn.projectionMercator:S.shaderPreludeCode,N=d?Wi:S.shaderDefine,j=r+(c?c.cacheKey:"")+`/${d?uo:S.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[j]||(this.cache[j]=new La(this.context,Jn[r],c,si[r],this._showOverdrawInspector,b,M,N,y)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var r,c;if(this._tileTextures){for(const d in this._tileTextures){const y=this._tileTextures[d];if(y)for(const b of y)b.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((r=this.tileExtentMesh.vertexBuffer)===null||r===void 0||r.destroy()),this.tileExtentMesh&&((c=this.tileExtentMesh.indexBuffer)===null||c===void 0||c.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const d in this.cache){const y=this.cache[d];y&&y.program&&this.context.gl.deleteProgram(y.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function Ou(x,r){let c,d=!1,y=null,b=null;const S=()=>{y=null,d&&(x.apply(b,c),y=setTimeout(S,r),d=!1)};return(...M)=>(d=!0,b=this,c=M,y||S(),y)}class dA{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let d;return c.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(d=y)})),(d&&d[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:d,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const d=c.join("/");let y=d;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${d}`);let b=window.location.hash.replace(y,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let S=window.location.href.replace(/(#.+)?$/,b);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Ou(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,y=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),S=Math.round(c.lng*b)/b,M=Math.round(c.lat*b)/b,N=this._map.getBearing(),j=this._map.getPitch();let q="";if(q+=r?`/${S}/${M}/${d}`:`${d}/${M}/${S}`,(N||j)&&(q+="/"+Math.round(10*N)/10),j&&(q+=`/${Math.round(j)}`),this._hashName){const ne=this._hashName;let ee=!1;const Ae=window.location.hash.slice(1).split("&").map((_e=>{const De=_e.split("=")[0];return De===ne?(ee=!0,`${De}=${q}`):_e})).filter((_e=>_e));return ee||Ae.push(`${ne}=${q}`),`#${Ae.join("&")}`}return`#${q}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new o.V(+r[2],+r[1])}catch{return!1}const c=+r[0],d=+(r[3]||0),y=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&d>=-180&&d<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const Oa={linearity:.3,easing:o.cx(0,0,.3,1)},_a=o.e({deceleration:2500,maxSpeed:1400},Oa),Qs=o.e({deceleration:20,maxSpeed:1400},Oa),jA=o.e({deceleration:1e3,maxSpeed:360},Oa),T=o.e({deceleration:1e3,maxSpeed:90},Oa),R=o.e({deceleration:1e3,maxSpeed:360},Oa);class ${constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:H(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=H();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,c.roll+=b.rollDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const b=ge(c.pan.mag(),d,o.e({},_a,r||{})),S=c.pan.mult(b.amount/c.pan.mag()),M=this._map.cameraHelper.handlePanInertia(S,this._map.transform);y.center=M.easingCenter,y.offset=M.easingOffset,re(y,b)}if(c.zoom){const b=ge(c.zoom,d,Qs);y.zoom=this._map.transform.zoom+b.amount,re(y,b)}if(c.bearing){const b=ge(c.bearing,d,jA);y.bearing=this._map.transform.bearing+o.ao(b.amount,-179,179),re(y,b)}if(c.pitch){const b=ge(c.pitch,d,T);y.pitch=this._map.transform.pitch+b.amount,re(y,b)}if(c.roll){const b=ge(c.roll,d,R);y.roll=this._map.transform.roll+o.ao(b.amount,-179,179),re(y,b)}if(y.zoom||y.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function re(x,r){(!x.duration||x.duration<r.duration)&&(x.duration=r.duration,x.easing=r.easing)}function ge(x,r,c){const{maxSpeed:d,linearity:y,deceleration:b}=c,S=o.ao(x*y/(r/1e3),-d,d),M=Math.abs(S)/(b*y);return{easing:c.easing,duration:1e3*M,amount:S*(M/2)}}class we extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d,y={}){d=d instanceof MouseEvent?d:new MouseEvent(r,d);const b=z.mousePos(c.getCanvas(),d),S=c.unproject(b);super(r,o.e({point:b,lngLat:S,originalEvent:d},y)),this._defaultPrevented=!1,this.target=c}}class Ee extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d){const y=r==="touchend"?d.changedTouches:d.touches,b=z.touchPos(c.getCanvasContainer(),y),S=b.map((N=>c.unproject(N))),M=b.reduce(((N,j,q,ne)=>N.add(j.div(ne.length))),new o.P(0,0));super(r,{points:b,point:M,lngLats:S,lngLat:c.unproject(M),originalEvent:d}),this._defaultPrevented=!1}}class Pe extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Re{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Pe(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new we(r.type,this._map,r))}mouseup(r){this._map.fire(new we(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new we(r.type,this._map,r))}dblclick(r){return this._firePreventable(new we(r.type,this._map,r))}mouseover(r){this._map.fire(new we(r.type,this._map,r))}mouseout(r){this._map.fire(new we(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Ee(r.type,this._map,r))}touchmove(r){this._map.fire(new Ee(r.type,this._map,r))}touchend(r){this._map.fire(new Ee(r.type,this._map,r))}touchcancel(r){this._map.fire(new Ee(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ke{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new we(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new we("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new we(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class We{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(o.P.convert(r),this._map.terrain)}}class kt{constructor(r,c){this._map=r,this._tr=new We(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(z.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=d,this._box||(this._box=z.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const b=Math.min(y.x,d.x),S=Math.max(y.x,d.x),M=Math.min(y.y,d.y),N=Math.max(y.y,d.y);z.setTransform(this._box,`translate(${b}px,${M}px)`),this._box.style.width=S-b+"px",this._box.style.height=N-M+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const d=this._startPos,y=c;if(this.reset(),z.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:r})),{cameraAnimation:b=>b.fitScreenCoordinates(d,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(z.remove(this._box),this._box=null),z.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new o.l(r,{originalEvent:c}))}}function Ye(x,r){if(x.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${r.length}`);const c={};for(let d=0;d<x.length;d++)c[x[d].identifier]=r[d];return c}class Bt{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=(function(y){const b=new o.P(0,0);for(const S of y)b._add(S);return b.div(y.length)})(c),this.touches=Ye(d,c)))}touchmove(r,c,d){if(this.aborted||!this.centroid)return;const y=Ye(d,c);for(const b in this.touches){const S=y[b];(!S||S.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(r,c,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Tt{constructor(r){this.singleTap=new Bt(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,d){this.singleTap.touchstart(r,c,d)}touchmove(r,c,d){this.singleTap.touchmove(r,c,d)}touchend(r,c,d){const y=this.singleTap.touchend(r,c,d);if(y){const b=r.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(y)<30;if(b&&S||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Zt{constructor(r){this._tr=new We(r),this._zoomIn=new Tt({numTouches:1,numTaps:2}),this._zoomOut=new Tt({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,d){this._zoomIn.touchstart(r,c,d),this._zoomOut.touchstart(r,c,d)}touchmove(r,c,d){this._zoomIn.touchmove(r,c,d),this._zoomOut.touchmove(r,c,d)}touchend(r,c,d){const y=this._zoomIn.touchend(r,c,d),b=this._zoomOut.touchend(r,c,d),S=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(y)},{originalEvent:r})}):b?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(b)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ut{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=Array.isArray(c)?c[0]:c;return!this._moved&&y.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(d,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&z.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const qt=0,Wt=2,tr={[qt]:1,[Wt]:2};class er{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=z.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!(function(c,d){const y=tr[d];return c.buttons===void 0||(c.buttons&y)!==y})(r,this._eventButton)}isValidEndEvent(r){return z.mouseButton(r)===this._eventButton}}class sn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class zr{constructor(r=new er({checkCorrectEvent:()=>!0}),c=new sn){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,d){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?d(r):void 0}startMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Cn=x=>{x.mousedown=x.dragStart,x.mousemoveWindow=x.dragMove,x.mouseup=x.dragEnd,x.contextmenu=r=>{r.preventDefault()}};class Zr{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,d){return this._calculateTransform(r,c,d)}touchmove(r,c,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,c,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,d){this._calculateTransform(r,c,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,d){d.length>0&&(this._active=!0);const y=Ye(d,c),b=new o.P(0,0),S=new o.P(0,0);let M=0;for(const j in y){const q=y[j],ne=this._touches[j];ne&&(b._add(q),S._add(q.sub(ne)),M++,y[j]=q)}if(this._touches=y,this._shouldBePrevented(M)||!S.mag())return;const N=S.div(M);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(M),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,d){if(!this._firstTwoTouches)return;r.preventDefault();const[y,b]=this._firstTwoTouches,S=Ni(d,c,y),M=Ni(d,c,b);if(!S||!M)return;const N=this._aroundCenter?null:S.add(M).div(2);return this._move([S,M],N,r)}touchend(r,c,d){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,S=Ni(d,c,y),M=Ni(d,c,b);S&&M||(this._active&&z.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ni(x,r,c){for(let d=0;d<x.length;d++)if(x[d].identifier===c)return r[d]}function Sn(x,r){return Math.log(x/r)/Math.LN2}class Hr extends Qn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Sn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sn(this._distance,d),pinchAround:c}}}function Fr(x,r){return 180*x.angleWith(r)/Math.PI}class pi extends Qn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,d){const y=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fr(this._vector,y),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,d=Fr(r,this._startVector);return Math.abs(d)<c}}function Mr(x){return Math.abs(x.y)>Math.abs(x.x)}class zn extends Qn{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,d){super.touchstart(r,c,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Mr(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),b=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,d){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,b=c.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const S=r.y>0==c.y>0;return Mr(r)&&Mr(c)&&S}}const mi={panStep:100,bearingStep:15,pitchStep:10};class as{constructor(r){this._tr=new We(r);const c=mi;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,d=0,y=0,b=0,S=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),b=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),b=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),S=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:M=>{const N=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:ls,zoom:c?Math.round(N.zoom)+c*(r.shiftKey?2:1):N.zoom,bearing:N.bearing+d*this._bearingStep,pitch:N.pitch+y*this._pitchStep,offset:[-b*this._panStep,-S*this._panStep],center:N.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ls(x){return x*(2-x)}const Qi=4.000244140625,Bs=1/450;class Cs{constructor(r,c){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new We(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bs}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=H(),y=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%Qi==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=z.mousePos(this._map.getCanvas(),r),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(o.V.convert(d.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const M=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=M),typeof this._targetZoom=="number"&&(this._targetZoom+=M)}if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Qi?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&N!==0&&(N=1/N);const j=typeof this._targetZoom!="number"?r.scale:o.ar(this._targetZoom);this._targetZoom=r.applyConstrain(r.getCameraLngLat(),o.au(j*N)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,d=this._startZoom,y=this._easing;let b,S=!1;if(this._type==="wheel"&&d&&y){const M=H()-this._lastWheelEventTime,N=Math.min((M+5)/200,1),j=y(N);b=o.G.number(d,c,j),N<1?this._frameId||(this._frameId=!0):S=!0}else b=c,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!S,zoomDelta:b-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=o.cz;if(this._prevEase){const d=this._prevEase,y=(H()-d.start)/d.duration,b=d.easing(y+.01)-d.easing(y),S=.27/Math.sqrt(b*b+1e-4)*.01,M=Math.sqrt(.0729-S*S);c=o.cx(S,M,.25,1)}return this._prevEase={start:H(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Oi{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Fn{constructor(r){this._tr=new We(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yn{constructor(){this._tap=new Tt({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,d){if(!this._swipePoint)if(this._tapTime){const y=c[0],b=r.timeStamp-this._tapTime<500,S=this._tapPoint.dist(y)<30;b&&S?d.length>0&&(this._swipePoint=y,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,c,d)}touchmove(r,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const y=c[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(r,c,d)}touchend(r,c,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const y=this._tap.touchend(r,c,d);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gr{constructor(r,c,d){this._el=r,this._mousePan=c,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xr{constructor(r,c,d,y){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=d,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ti{constructor(r,c,d,y){this._el=r,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Vi{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=z.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=c,this._container.appendChild(y);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=d,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(z.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const ei=x=>x.zoom||x.drag||x.roll||x.pitch||x.rotate;class ci extends o.l{}function Rn(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta||x.rollDelta}class wi{constructor(r,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=y.type==="renderFrame"?void 0:y,M={needsRenderFrame:!1},N={},j={};for(const{handlerName:ee,handler:Ae,allowed:_e}of this._handlers){if(!Ae.isEnabled())continue;let De;if(this._blockedByActive(j,_e,ee))Ae.reset();else if(Ae[b||y.type]){if(o.cA(y,b||y.type)){const ze=z.mousePos(this._map.getCanvas(),y);De=Ae[b||y.type](y,ze)}else if(o.cB(y,b||y.type)){const ze=this._getMapTouches(y.touches),Qe=z.touchPos(this._map.getCanvas(),ze);De=Ae[b||y.type](y,Qe,ze)}else o.cC(b||y.type)||(De=Ae[b||y.type](y));this.mergeHandlerResult(M,N,De,ee,S),De&&De.needsRenderFrame&&this._triggerRenderFrame()}(De||Ae.isActive())&&(j[ee]=Ae)}const q={};for(const ee in this._previousActiveHandlers)j[ee]||(q[ee]=S);this._previousActiveHandlers=j,(Object.keys(q).length||Rn(M))&&(this._changes.push([M,N,q]),this._triggerRenderFrame()),(Object.keys(j).length||Rn(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=M;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,S]of this._listeners)z.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[r,c,d]of this._listeners)z.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new Re(c,r));const y=c.boxZoom=new kt(c,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const b=c.cooperativeGestures=new Vi(c,r.cooperativeGestures);this._add("cooperativeGestures",b),r.cooperativeGestures&&b.enable();const S=new Zt(c),M=new Fn(c);c.doubleClickZoom=new Oi(M,S),this._add("tapZoom",S),this._add("clickZoom",M),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const N=new Yn;this._add("tapDragZoom",N);const j=c.touchPitch=new zn(c);this._add("touchPitch",j),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const q=()=>c.project(c.getCenter()),ne=(function({enable:Xe,clickTolerance:At,aroundCenter:ft=!0,minPixelCenterThreshold:nt=100,rotateDegreesPerPixelMoved:wt=.8},Dt){const Lt=new er({checkCorrectEvent:Rt=>z.mouseButton(Rt)===0&&Rt.ctrlKey||z.mouseButton(Rt)===2&&!Rt.ctrlKey});return new Ut({clickTolerance:At,move:(Rt,Qt)=>{const nr=Dt();if(ft&&Math.abs(nr.y-Rt.y)>nt)return{bearingDelta:o.cy(new o.P(Rt.x,Qt.y),Qt,nr)};let Ar=(Qt.x-Rt.x)*wt;return ft&&Qt.y<nr.y&&(Ar=-Ar),{bearingDelta:Ar}},moveStateManager:Lt,enable:Xe,assignEvents:Cn})})(r,q),ee=(function({enable:Xe,clickTolerance:At,pitchDegreesPerPixelMoved:ft=-.5}){const nt=new er({checkCorrectEvent:wt=>z.mouseButton(wt)===0&&wt.ctrlKey||z.mouseButton(wt)===2});return new Ut({clickTolerance:At,move:(wt,Dt)=>({pitchDelta:(Dt.y-wt.y)*ft}),moveStateManager:nt,enable:Xe,assignEvents:Cn})})(r),Ae=(function({enable:Xe,clickTolerance:At,rollDegreesPerPixelMoved:ft=.3},nt){const wt=new er({checkCorrectEvent:Dt=>z.mouseButton(Dt)===2&&Dt.ctrlKey});return new Ut({clickTolerance:At,move:(Dt,Lt)=>{const Rt=nt();let Qt=(Lt.x-Dt.x)*ft;return Lt.y<Rt.y&&(Qt=-Qt),{rollDelta:Qt}},moveStateManager:wt,enable:Xe,assignEvents:Cn})})(r,q);c.dragRotate=new xr(r,ne,ee,Ae),this._add("mouseRotate",ne,["mousePitch"]),this._add("mousePitch",ee,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ae,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const _e=(function({enable:Xe,clickTolerance:At}){const ft=new er({checkCorrectEvent:nt=>z.mouseButton(nt)===0&&!nt.ctrlKey});return new Ut({clickTolerance:At,move:(nt,wt)=>({around:wt,panDelta:wt.sub(nt)}),activateOnStart:!0,moveStateManager:ft,enable:Xe,assignEvents:Cn})})(r),De=new Zr(r,c);c.dragPan=new gr(d,_e,De),this._add("mousePan",_e),this._add("touchPan",De,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const ze=new pi,Qe=new Hr;c.touchZoomRotate=new Ti(d,Qe,ze,N),this._add("touchRotate",ze,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate),this._add("blockableMapEvent",new Ke(c));const Ge=c.scrollZoom=new Cs(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Ge,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const st=c.keyboard=new as(c);this._add("keyboard",st),r.interactive&&r.keyboard&&c.keyboard.enable()}_add(r,c,d){this._handlers.push({handlerName:r,handler:c,allowed:d}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ei(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,d){for(const y in r)if(y!==d&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const d of r)this._el.contains(d.target)&&c.push(d);return c}mergeHandlerResult(r,c,d,y,b){if(!d)return;o.e(r,d);const S={handlerName:y,originalEvent:d.originalEvent||b};d.zoomDelta!==void 0&&(c.zoom=S),d.panDelta!==void 0&&(c.drag=S),d.rollDelta!==void 0&&(c.roll=S),d.pitchDelta!==void 0&&(c.pitch=S),d.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){const r={},c={},d={};for(const[y,b,S]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(r.rollDelta=(r.rollDelta||0)+y.rollDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),o.e(c,b),o.e(d,S);this._updateMapTransform(r,c,d),this._changes=[]}_updateMapTransform(r,c,d){const y=this._map,b=y._getTransformForUpdate(),S=y.terrain;if(!(Rn(r)||S&&this._terrainMovement))return this._fireEvents(c,d,!0);y._stop(!0);let{panDelta:M,zoomDelta:N,bearingDelta:j,pitchDelta:q,rollDelta:ne,around:ee,pinchAround:Ae}=r;Ae!==void 0&&(ee=Ae),ee=ee||y.transform.centerPoint,S&&!b.isPointOnMapSurface(ee)&&(ee=b.centerPoint);const _e={panDelta:M,zoomDelta:N,rollDelta:ne,pitchDelta:q,bearingDelta:j,around:ee};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(ee)&&(ee=b.centerPoint);const De=ee.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(M?ee.sub(M):ee);this._handleMapControls({terrain:S,tr:b,deltasForHelper:_e,preZoomAroundLoc:De,combinedEventsInProgress:c,panDelta:M}),y._applyUpdatedTransform(b),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,d,!0)}_handleMapControls({terrain:r,tr:c,deltasForHelper:d,preZoomAroundLoc:y,combinedEventsInProgress:b,panDelta:S}){const M=this._map.cameraHelper;if(M.handleMapControlsRollPitchBearingZoom(d,c),r)return M.useGlobeControls?(this._terrainMovement||!b.drag&&!b.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void M.handleMapControlsPan(d,c,y)):this._terrainMovement||!b.drag&&!b.zoom?void(b.drag&&this._terrainMovement&&S?c.setCenter(c.screenPointToLocation(c.centerPoint.sub(S))):M.handleMapControlsPan(d,c,y)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void M.handleMapControlsPan(d,c,y));M.handleMapControlsPan(d,c,y)}_fireEvents(r,c,d){const y=ei(this._eventsInProgress),b=ei(r),S={};for(const ne in r){const{originalEvent:ee}=r[ne];this._eventsInProgress[ne]||(S[`${ne}start`]=ee),this._eventsInProgress[ne]=r[ne]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const ne in S)this._fireEvent(ne,S[ne]);b&&this._fireEvent("move",b.originalEvent);for(const ne in r){const{originalEvent:ee}=r[ne];this._fireEvent(ne,ee)}const M={};let N;for(const ne in this._eventsInProgress){const{handlerName:ee,originalEvent:Ae}=this._eventsInProgress[ne];this._handlersById[ee].isActive()||(delete this._eventsInProgress[ne],N=c[ee]||Ae,M[`${ne}end`]=N)}for(const ne in M)this._fireEvent(ne,M[ne]);const j=ei(this._eventsInProgress),q=(y||b)&&!j;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ne=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ne.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ne)}if(d&&q){this._updatingCamera=!0;const ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=Ae=>Ae!==0&&-this._bearingSnap<Ae&&Ae<this._bearingSnap;!ne||!ne.essential&&P.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:N})),ee(this._map.getBearing())&&this._map.resetNorth()):(ee(ne.bearing||this._map.getBearing())&&(ne.bearing=0),ne.freezeElevation=!0,this._map.easeTo(ne,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new o.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((r=>{delete this._frameId,this.handleEvent(new ci("renderFrame",{timeStamp:r})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Es extends o.E{constructor(r,c,d){super(),this._renderFrameCallback=()=>{const y=Math.min((H()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new o.V(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,d){return r=o.P.convert(r).mult(-1),this.panTo(this.transform.center,o.e({offset:r},c),d)}panTo(r,c,d){return this.easeTo(o.e({center:r},c),d)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,d){return this.easeTo(o.e({zoom:r},c),d)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,d){return this.easeTo(o.e({bearing:r},c),d)}resetNorth(r,c){return this.rotateTo(0,o.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=Ur.convert(r).adjustAntiMeridian();const d=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,c)}_cameraForBoxAndBearing(r,c,d,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const j=y.padding;y.padding={top:j,bottom:j,right:j,left:j}}const S=o.e(b,y.padding);y.padding=S;const M=this.transform,N=new Ur(r,c);return this.cameraHelper.cameraForBoxAndBearing(y,S,N,d,M)}fitBounds(r,c,d){return this._fitInternal(this.cameraForBounds(r,c),c,d)}fitScreenCoordinates(r,c,d,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(r)),this.transform.screenPointToLocation(o.P.convert(c)),d,y),y,b)}_fitInternal(r,c,d){return r?(delete(c=o.e(r,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(r,c){this.stop();const d=this._getTransformForUpdate();let y=!1,b=!1,S=!1;const M=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,r);const N=d.zoom!==M;return"elevation"in r&&d.elevation!==+r.elevation&&d.setElevation(+r.elevation),"bearing"in r&&d.bearing!==+r.bearing&&(y=!0,d.setBearing(+r.bearing)),"pitch"in r&&d.pitch!==+r.pitch&&(b=!0,d.setPitch(+r.pitch)),"roll"in r&&d.roll!==+r.roll&&(S=!0,d.setRoll(+r.roll)),r.padding==null||d.isPaddingEqual(r.padding)||d.setPadding(r.padding),this._applyUpdatedTransform(d),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),N&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),y&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),b&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),S&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(r,c,d,y=0){const b=o.ab.fromLngLat(r,c),S=o.ab.fromLngLat(d,y),M=S.x-b.x,N=S.y-b.y,j=S.z-b.z,q=Math.hypot(M,N,j);if(q===0)throw new Error("Can't calculate camera options with same From and To");const ne=Math.hypot(M,N),ee=o.au(this.transform.cameraToCenterDistance/q/this.transform.tileSize),Ae=180*Math.atan2(M,-N)/Math.PI;let _e=180*Math.acos(ne/q)/Math.PI;return _e=j<0?90-_e:90+_e,{center:S.toLngLat(),elevation:y,zoom:ee,pitch:_e,bearing:Ae}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,d,y,b){const S=this.transform.calculateCenterFromCameraLngLatAlt(r,c,d,y);return{center:S.center,elevation:S.elevation,zoom:S.zoom,bearing:d,pitch:y,roll:b}}easeTo(r,c){this._stop(!1,r.easeId),((r=o.e({offset:[0,0],duration:500,easing:o.cz},r)).animate===!1||!r.essential&&P.prefersReducedMotion)&&(r.duration=0);const d=this._getTransformForUpdate(),y=this.getBearing(),b=d.pitch,S=d.roll,M="bearing"in r?this._normalizeBearing(r.bearing,y):y,N="pitch"in r?+r.pitch:b,j="roll"in r?this._normalizeBearing(r.roll,S):S,q="padding"in r?r.padding:d.padding,ne=o.P.convert(r.offset);let ee,Ae;r.around&&(ee=o.V.convert(r.around),Ae=d.locationToScreenPoint(ee));const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},De=this.cameraHelper.handleEaseTo(d,{bearing:M,pitch:N,roll:j,padding:q,around:ee,aroundPoint:Ae,offsetAsPoint:ne,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||y!==M,this._pitching=this._pitching||N!==b,this._rolling=this._rolling||j!==S,this._padding=!d.isPaddingEqual(q),this._zooming=this._zooming||De.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,_e),this.terrain&&this._prepareElevation(De.elevationCenter),this._ease((ze=>{De.easeFunc(ze),this.terrain&&!r.freezeElevation&&this._updateElevation(ze),this._applyUpdatedTransform(d),this._fireMoveEvents(c)}),(ze=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ze)}),r),this}_prepareEase(r,c,d={}){this._moving=!0,c||d.moving||this.fire(new o.l("movestart",r)),this._zooming&&!d.zooming&&this.fire(new o.l("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new o.l("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new o.l("pitchstart",r)),this._rolling&&!d.rolling&&this.fire(new o.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(c-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(o.G.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),d=r.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(d<y){const b=this.calculateCameraOptionsFromTo(c,y,r.center,r.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push((y=>this._elevateCameraIfInsideTerrain(y))),this.transformCameraUpdate&&c.push((y=>this.transformCameraUpdate(y))),!c.length)return;const d=r.clone();for(const y of c){const b=d.clone(),{center:S,zoom:M,roll:N,pitch:j,bearing:q,elevation:ne}=y(b);S&&b.setCenter(S),ne!==void 0&&b.setElevation(ne),M!==void 0&&b.setZoom(M),N!==void 0&&b.setRoll(N),j!==void 0&&b.setPitch(j),q!==void 0&&b.setBearing(q),d.apply(b)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new o.l("move",r)),this._zooming&&this.fire(new o.l("zoom",r)),this._rotating&&this.fire(new o.l("rotate",r)),this._pitching&&this.fire(new o.l("pitch",r)),this._rolling&&this.fire(new o.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const d=this._zooming,y=this._rotating,b=this._pitching,S=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new o.l("zoomend",r)),y&&this.fire(new o.l("rotateend",r)),b&&this.fire(new o.l("pitchend",r)),S&&this.fire(new o.l("rollend",r)),this.fire(new o.l("moveend",r))}flyTo(r,c){if(!r.essential&&P.prefersReducedMotion){const Qt=o.U(r,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Qt,c)}this.stop(),r=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cz},r);const d=this._getTransformForUpdate(),y=d.bearing,b=d.pitch,S=d.roll,M=d.padding,N="bearing"in r?this._normalizeBearing(r.bearing,y):y,j="pitch"in r?+r.pitch:b,q="roll"in r?this._normalizeBearing(r.roll,S):S,ne="padding"in r?r.padding:d.padding,ee=o.P.convert(r.offset);let Ae=d.centerPoint.add(ee);const _e=d.screenPointToLocation(Ae),De=this.cameraHelper.handleFlyTo(d,{bearing:N,pitch:j,roll:q,padding:ne,locationAtOffset:_e,offsetAsPoint:ee,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let ze=r.curve;const Qe=Math.max(d.width,d.height),Ge=Qe/De.scaleOfZoom,st=De.pixelPathLength;typeof De.scaleOfMinZoom=="number"&&(ze=Math.sqrt(Qe/De.scaleOfMinZoom/st*2));const Xe=ze*ze;function At(Qt){const nr=(Ge*Ge-Qe*Qe+(Qt?-1:1)*Xe*Xe*st*st)/(2*(Qt?Ge:Qe)*Xe*st);return Math.log(Math.sqrt(nr*nr+1)-nr)}function ft(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function nt(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const wt=At(!1);let Dt=function(Qt){return nt(wt)/nt(wt+ze*Qt)},Lt=function(Qt){return Qe*((nt(wt)*(ft(nr=wt+ze*Qt)/nt(nr))-ft(wt))/Xe)/st;var nr},Rt=(At(!0)-wt)/ze;if(Math.abs(st)<2e-6||!isFinite(Rt)){if(Math.abs(Qe-Ge)<1e-6)return this.easeTo(r,c);const Qt=Ge<Qe?-1:1;Rt=Math.abs(Math.log(Ge/Qe))/ze,Lt=()=>0,Dt=nr=>Math.exp(Qt*ze*nr)}return r.duration="duration"in r?+r.duration:1e3*Rt/("screenSpeed"in r?+r.screenSpeed/ze:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=y!==N,this._pitching=j!==b,this._rolling=q!==S,this._padding=!d.isPaddingEqual(ne),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(De.targetCenter),this._ease((Qt=>{const nr=Qt*Rt,Ar=1/Dt(nr),rr=Lt(nr);this._rotating&&d.setBearing(o.G.number(y,N,Qt)),this._pitching&&d.setPitch(o.G.number(b,j,Qt)),this._rolling&&d.setRoll(o.G.number(S,q,Qt)),this._padding&&(d.interpolatePadding(M,ne,Qt),Ae=d.centerPoint.add(ee)),De.easeFunc(Qt,Ar,rr,Ae),this.terrain&&!r.freezeElevation&&this._updateElevation(Qt),this._applyUpdatedTransform(d),this._fireMoveEvents(c)}),(()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,c,d){d.animate===!1||d.duration===0?(r(1),c()):(this._easeStart=H(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=o.W(r,-180,180);const d=Math.abs(r-c);return Math.abs(r-360-c)<d&&(r-=360),Math.abs(r+360-c)<d&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLat(o.V.convert(r)):null}}const Ys={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Fo{constructor(r=Ys){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=z.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=z.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const d=this._map._getUIString(`AttributionControl.${c}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map((y=>typeof y!="string"?"":y))):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.tileManagers;for(const y in c){const b=c[y];if(b.used||b.usedForTerrain){const S=b.getSource();S.attribution&&r.indexOf(S.attribution)<0&&r.push(S.attribution)}}r=r.filter((y=>String(y).trim())),r.sort(((y,b)=>y.length-b.length)),r=r.filter(((y,b)=>{for(let S=b+1;S<r.length;S++)if(r[S].indexOf(y)>=0)return!1;return!0}));const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=z.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ki{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const d=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=z.create("div","maplibregl-ctrl");const c=z.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){z.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class In{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(const y of d)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const d of c)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Vn=o.aV([{name:"a_pos3d",type:"Int16",components:3}]);class xi extends o.E{constructor(r){super(),this._lastTilesetChange=H(),this.tileManager=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(r,c){this.tileManager.update(r,c),this._renderableTilesKeys=[];const d={};for(const y of Tn(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.tileManager._source.calculateTileZoom}))d[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),o.c8(y.terrainRttPosMatrix32f,0,o.a5,o.a5,0,0,1),this._tiles[y.key]=new Ht(y,this.tileSize),this._lastTilesetChange=H());for(const y in this._tiles)d[y]||delete this._tiles[y]}freeRtt(r){for(const c in this._tiles){const d=this._tiles[c];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((r=>this.getTileByID(r)))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const d of this._renderableTilesKeys){const y=this._tiles[d].tileID,b=r.clone(),S=o.bl();if(y.canonical.equals(r.canonical))o.c8(S,0,o.a5,o.a5,0,0,1);else if(y.canonical.isChildOf(r.canonical)){const M=y.canonical.z-r.canonical.z,N=y.canonical.x-(y.canonical.x>>M<<M),j=y.canonical.y-(y.canonical.y>>M<<M),q=o.a5>>M;o.c8(S,0,q,q,0,0,1),o.O(S,S,[-N*q,-j*q,0])}else{if(!r.canonical.isChildOf(y.canonical))continue;{const M=r.canonical.z-y.canonical.z,N=r.canonical.x-(r.canonical.x>>M<<M),j=r.canonical.y-(r.canonical.y>>M<<M),q=o.a5>>M;o.c8(S,0,o.a5,o.a5,0,0,1),o.O(S,S,[N*q,j*q,0]),o.Q(S,S,[1/2**M,1/2**M,0])}}b.terrainRttPosMatrix32f=new Float32Array(S),c[d]=b}return c}_getTerrainCoordsForTileRanges(r,c){const d={};for(const y of this._renderableTilesKeys){const b=this._tiles[y].tileID;if(!this._isWithinTileRanges(b,c))continue;const S=r.clone(),M=o.bl();if(b.canonical.z===r.canonical.z){const N=r.canonical.x-b.canonical.x,j=r.canonical.y-b.canonical.y;o.c8(M,0,o.a5,o.a5,0,0,1),o.O(M,M,[N*o.a5,j*o.a5,0])}else if(b.canonical.z>r.canonical.z){const N=b.canonical.z-r.canonical.z,j=b.canonical.x-(b.canonical.x>>N<<N),q=b.canonical.y-(b.canonical.y>>N<<N),ne=r.canonical.x-(b.canonical.x>>N),ee=r.canonical.y-(b.canonical.y>>N),Ae=o.a5>>N;o.c8(M,0,Ae,Ae,0,0,1),o.O(M,M,[-j*Ae+ne*o.a5,-q*Ae+ee*o.a5,0])}else{const N=r.canonical.z-b.canonical.z,j=r.canonical.x-(r.canonical.x>>N<<N),q=r.canonical.y-(r.canonical.y>>N<<N),ne=(r.canonical.x>>N)-b.canonical.x,ee=(r.canonical.y>>N)-b.canonical.y,Ae=o.a5<<N;o.c8(M,0,Ae,Ae,0,0,1),o.O(M,M,[j*o.a5+ne*Ae,q*o.a5+ee*Ae,0])}S.terrainRttPosMatrix32f=new Float32Array(M),d[y]=S}return d}getSourceTile(r,c){const d=this.tileManager._source;let y=r.overscaledZ-this.deltaZoom;if(y>d.maxzoom&&(y=d.maxzoom),y<d.minzoom)return;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let b=this.findTileInCaches(this._sourceTileCache[r.key]);if(!b?.dem&&c)for(;y>=d.minzoom&&!b?.dem;)b=this.findTileInCaches(r.scaledTo(y--).key);return b}findTileInCaches(r){let c=this.tileManager.getTileByID(r);return c||(c=this.tileManager._outOfViewCache.getByKey(r),c)}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class Ss{constructor(r,c,d){this._meshCache={},this.painter=r,this.tileManager=new xi(c),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,d,y=o.a5){var b;if(!(c>=0&&c<y&&d>=0&&d<y))return 0;const S=this.getTerrainData(r),M=(b=S.tile)===null||b===void 0?void 0:b.dem;if(!M)return 0;const N=o.cD([],[c/y*o.a5,d/y*o.a5],S.u_terrain_matrix),j=[N[0]*M.dim,N[1]*M.dim],q=Math.floor(j[0]),ne=Math.floor(j[1]),ee=j[0]-q,Ae=j[1]-ne;return M.get(q,ne)*(1-ee)*(1-Ae)+M.get(q+1,ne)*ee*(1-Ae)+M.get(q,ne+1)*(1-ee)*Ae+M.get(q+1,ne+1)*ee*Ae}getElevationForLngLatZoom(r,c){if(!o.cE(c,r.wrap()))return 0;const{tileID:d,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(d,y%o.a5,b%o.a5,o.a5)}getElevationForLngLat(r){return this.getElevationForLngLatZoom(r,this.tileManager.maxzoom)}getElevation(r,c,d,y=o.a5){return this.getDEMElevation(r,c,d,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,b=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.as([])}const c=this.tileManager.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new o.T(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const d=c&&c+c.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const y=this.tileManager.getSource().maxzoom;let b=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?b=r.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=r.canonical.x-(r.canonical.x>>b<<b),M=r.canonical.y-(r.canonical.y>>b<<b),N=o.cF(new Float64Array(16),[1/(o.a5<<b),1/(o.a5<<b),0]);o.O(N,N,[S*o.a5,M*o.a5,0]),this._demMatrixCache[r.key]={matrix:N,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,d=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(c.context,{width:d,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(c.context,{width:d,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(d,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,d,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,S=0;b<this._coordsTextureSize;b++)for(let M=0;M<this._coordsTextureSize;M++,S+=4)c[S+0]=255&M,c[S+1]=255&b,c[S+2]=M>>8<<4|b>>8,c[S+3]=0;const d=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new o.T(r,d,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),d=this.painter.context,y=d.gl,b=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(b,M-S-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null);const N=c[0]+(c[2]>>4<<8),j=c[1]+((15&c[2])<<8),q=this.coordsIndex[255-c[3]],ne=q&&this.tileManager.getTileByID(q);if(!ne)return null;const ee=this._coordsTextureSize,Ae=(1<<ne.tileID.canonical.z)*ee;return new o.ab((ne.tileID.canonical.x*ee+N)/Ae+ne.tileID.wrap,(ne.tileID.canonical.y*ee+j)/Ae,this.getElevation(ne.tileID,N,j,ee))}depthAtPoint(r){const c=new Uint8Array(4),d=this.painter.context,y=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const d=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,y=d&&r.canonical.y===0,b=d&&r.canonical.y===(1<<r.canonical.z)-1,S=`m_${y?"n":""}_${b?"s":""}`;if(this._meshCache[S])return this._meshCache[S];const M=this.painter.context,N=new o.cG,j=new o.aZ,q=this.meshSize,ne=o.a5/q,ee=q*q;for(let nt=0;nt<=q;nt++)for(let wt=0;wt<=q;wt++)N.emplaceBack(wt*ne,nt*ne,0);for(let nt=0;nt<ee;nt+=q+1)for(let wt=0;wt<q;wt++)j.emplaceBack(wt+nt,q+wt+nt+1,q+wt+nt+2),j.emplaceBack(wt+nt,q+wt+nt+2,wt+nt+1);const Ae=N.length,_e=Ae+(q+1),De=(q+1)*q,ze=y?o.bs:0,Qe=y?0:1,Ge=b?o.bt:o.a5,st=b?0:1;for(let nt=0;nt<=q;nt++)N.emplaceBack(nt*ne,ze,Qe);for(let nt=0;nt<=q;nt++)N.emplaceBack(nt*ne,Ge,st);for(let nt=0;nt<q;nt++)j.emplaceBack(De+nt,_e+nt,_e+nt+1),j.emplaceBack(De+nt,_e+nt+1,De+nt+1),j.emplaceBack(0+nt,Ae+nt+1,Ae+nt),j.emplaceBack(0+nt,0+nt+1,Ae+nt+1);const Xe=N.length,At=Xe+2*(q+1);for(const nt of[0,1])for(let wt=0;wt<=q;wt++)for(const Dt of[0,1])N.emplaceBack(nt*o.a5,wt*ne,Dt);for(let nt=0;nt<2*q;nt+=2)j.emplaceBack(Xe+nt,Xe+nt+1,Xe+nt+3),j.emplaceBack(Xe+nt,Xe+nt+3,Xe+nt+2),j.emplaceBack(At+nt,At+nt+3,At+nt+1),j.emplaceBack(At+nt,At+nt+2,At+nt+3);const ft=new ii(M.createVertexBuffer(N,Vn.members),M.createIndexBuffer(j),o.aY.simpleSegment(0,0,N.length,j.length));return this._meshCache[S]=ft,ft}getMeshFrameDelta(r){return 2*Math.PI*o.bF/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var d;if(!o.cE(c,r.wrap()))return 0;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(d=this.getMinMaxElevation(y).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return c&&c.dem&&(d.minElevation=c.dem.min*this.exaggeration,d.maxElevation=c.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,c){const d=o.ab.fromLngLat(r.wrap()),y=(1<<c)*o.a5,b=d.x*y,S=d.y*y,M=Math.floor(b/o.a5),N=Math.floor(S/o.a5);return{tileID:new o.a2(c,0,c,M,N),mercatorX:b,mercatorY:S}}}class Io{constructor(r,c,d){this._context=r,this._size=c,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(d.texture),{id:r,fbo:c,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>r.id!==c)),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((r=>!r.inUse))===!1}}const Js={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Fs{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Io(r.context,30,c.tileManager.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=r._order.filter((d=>!r._layers[d].isHidden(c))),this._coordsAscending={};for(const d in r.tileManagers){this._coordsAscending[d]={};const y=r.tileManagers[d].getVisibleCoordinates(),b=r.tileManagers[d].getSource(),S=b instanceof hn?b.terrainTileRanges:null;for(const M of y){const N=this.terrain.tileManager.getTerrainCoords(M,S);for(const j in N)this._coordsAscending[d][j]||(this._coordsAscending[d][j]=[]),this._coordsAscending[d][j].push(N[j])}}this._coordsAscendingStr={};for(const d of r._order){const y=r._layers[d],b=y.source;if(Js[y.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const S in this._coordsAscending[b])this._coordsAscendingStr[b][S]=this._coordsAscending[b][S].map((M=>M.key)).sort().join()}}for(const d of this._renderableTiles)for(const y in this._coordsAscendingStr){const b=this._coordsAscendingStr[y][d.tileID.key];b&&b!==d.rttCoords[y]&&(d.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const d=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),y=r.type,b=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Js[y]&&(this._prevType&&Js[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(r.id),!S))return!0;if(Js[this._prevType]||Js[y]&&S){this._prevType=y;const M=this._stacks.length-1,N=this._stacks[M]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(Vc(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[M]){const ne=this.pool.getObjectForId(j.rtt[M].id);if(ne.stamp===j.rtt[M].stamp){this.pool.useObject(ne);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),j.rtt[M]={id:q.id,stamp:q.stamp},b.context.bindFramebuffer.set(q.fbo.framebuffer),b.context.clear({color:o.bq.transparent,stencil:0}),b.currentStencilSource=void 0;for(let ne=0;ne<N.length;ne++){const ee=b.style._layers[N[ne]],Ae=ee.source?this._coordsAscending[ee.source][j.tileID.key]:[j.tileID];b.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),b._renderTileClippingMasks(ee,Ae,!0),b.renderLayer(b,b.style.tileManagers[ee.source],ee,Ae,d),ee.source&&(j.rttCoords[ee.source]=this._coordsAscendingStr[ee.source][j.tileID.key])}}return Vc(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),Js[y]}return!1}}const Ji={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},za=w,Ha={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ys,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Gc={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ja{constructor(r,c,d=!1){this.mousedown=b=>{this.startMove(b,z.mousePos(this.element,b)),z.addEventListener(window,"mousemove",this.mousemove),z.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,z.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),z.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=z.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const y=new zr;this._rotatePitchHandler=new Ut({clickTolerance:3,move:(b,S)=>{const M=c.getBoundingClientRect(),N=new o.P((M.bottom-M.top)/2,(M.right-M.left)/2);return{bearingDelta:o.cy(new o.P(b.x,S.y),S,N),pitchDelta:d?-.5*(S.y-b.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=r,z.addEventListener(c,"mousedown",this.mousedown),z.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),z.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHandler.dragStart(r,c),z.disableDrag()}move(r,c){const d=this.map,{bearingDelta:y,pitchDelta:b}=this._rotatePitchHandler.dragMove(r,c)||{};y&&d.setBearing(d.getBearing()+y),b&&d.setPitch(d.getPitch()+b)}off(){const r=this.element;z.removeEventListener(r,"mousedown",this.mousedown),z.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend),z.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){z.enableDrag(),z.removeEventListener(window,"mousemove",this.mousemove),z.removeEventListener(window,"mouseup",this.mouseup),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend)}}let Hl;function VA(x,r,c,d=!1){if(d||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return x?.wrap();const y=new o.V(x.lng,x.lat);if(x=new o.V(x.lng,x.lat),r){const b=new o.V(x.lng-360,x.lat),S=new o.V(x.lng+360,x.lat),M=c.locationToScreenPoint(x).distSqr(r);c.locationToScreenPoint(b).distSqr(r)<M?x=b:c.locationToScreenPoint(S).distSqr(r)<M&&(x=S)}for(;Math.abs(x.lng-c.center.lng)>180;){const b=c.locationToScreenPoint(x);if(b.x>=0&&b.y>=0&&b.x<=c.width&&b.y<=c.height)break;x.lng>c.center.lng?x.lng-=360:x.lng+=360}return x.lng!==y.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(x))?x:y}const gi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wo(x,r,c){const d=x.classList;for(const y in gi)d.remove(`maplibregl-${c}-anchor-${y}`);d.add(`maplibregl-${c}-anchor-${r}`)}class pA extends o.E{constructor(r){if(super(),this._onKeyPress=c=>{const d=c.code,y=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{const d=c.originalEvent.target,y=this._element;this._popup&&(d===y||y.contains(d))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=VA(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),z.setTransform(this._element,`${gi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${y}`),P.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=o.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=z.create("div");const c=z.createNS("http://www.w3.org/2000/svg","svg"),d=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${d}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${d}`);const b=z.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const S=z.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const M=z.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Qe of N){const Ge=z.createNS("http://www.w3.org/2000/svg","ellipse");Ge.setAttributeNS(null,"opacity","0.04"),Ge.setAttributeNS(null,"cx","10.5"),Ge.setAttributeNS(null,"cy","5.80029008"),Ge.setAttributeNS(null,"rx",Qe.rx),Ge.setAttributeNS(null,"ry",Qe.ry),M.appendChild(Ge)}const j=z.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const q=z.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(q);const ne=z.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");const ee=z.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(ee);const Ae=z.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");const _e=z.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(8.0, 8.0)");const De=z.createNS("http://www.w3.org/2000/svg","circle");De.setAttributeNS(null,"fill","#000000"),De.setAttributeNS(null,"opacity","0.25"),De.setAttributeNS(null,"cx","5.5"),De.setAttributeNS(null,"cy","5.5"),De.setAttributeNS(null,"r","5.4999962");const ze=z.createNS("http://www.w3.org/2000/svg","circle");ze.setAttributeNS(null,"fill","#FFFFFF"),ze.setAttributeNS(null,"cx","5.5"),ze.setAttributeNS(null,"cy","5.5"),ze.setAttributeNS(null,"r","5.4999962"),_e.appendChild(De),_e.appendChild(ze),S.appendChild(M),S.appendChild(j),S.appendChild(ne),S.appendChild(Ae),S.appendChild(_e),c.appendChild(S),c.setAttributeNS(null,"height",d*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),Wo(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),z.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=o.V.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,d;const y=(c=this._map)===null||c===void 0?void 0:c.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!y||b){const Ae=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ae&&(this._element.style.opacity=Ae))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const S=this._map,M=S.terrain.depthAtPoint(this._pos),N=S.terrain.getElevationForLngLat(this._lngLat);if(S.transform.lngLatToCameraDepth(this._lngLat,N)-M<.006)return void(this._element.style.opacity=this._opacity);const j=-this._offset.y/S.transform.pixelsPerMeter,q=Math.sin(S.getPitch()*Math.PI/180)*j,ne=S.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),ee=S.transform.lngLatToCameraDepth(this._lngLat,N+q)-ne>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&ee&&this._popup.remove(),this._element.style.opacity=ee?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=o.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const du={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let jl=0,Vl=!1;const Va={maxWidth:100,unit:"metric"};function bi(x,r,c){const d=c&&c.maxWidth||100,y=x._container.clientHeight/2,b=x._container.clientWidth/2,S=x.unproject([b-d/2,y]),M=x.unproject([b+d/2,y]),N=Math.round(x.project(M).x-x.project(S).x),j=Math.min(d,N,x._container.clientWidth),q=S.distanceTo(M);if(c&&c.unit==="imperial"){const ne=3.2808*q;ne>5280?Ui(r,j,ne/5280,x._getUIString("ScaleControl.Miles")):Ui(r,j,ne,x._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ui(r,j,q/1852,x._getUIString("ScaleControl.NauticalMiles")):q>=1e3?Ui(r,j,q/1e3,x._getUIString("ScaleControl.Kilometers")):Ui(r,j,q,x._getUIString("ScaleControl.Meters"))}function Ui(x,r,c,d){const y=(function(b){const S=Math.pow(10,`${Math.floor(b)}`.length-1);let M=b/S;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:(function(N){const j=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*j)/j})(M),S*M})(c);x.style.width=r*(y/c)+"px",x.innerHTML=`${y}&nbsp;${d}`}const es={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Kc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ga(x){if(x){if(typeof x=="number"){const r=Math.round(Math.abs(x)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,x),"top-left":new o.P(r,r),"top-right":new o.P(-r,r),bottom:new o.P(0,-x),"bottom-left":new o.P(r,-r),"bottom-right":new o.P(-r,-r),left:new o.P(x,0),right:new o.P(-x,0)}}if(x instanceof o.P||Array.isArray(x)){const r=o.P.convert(x);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:o.P.convert(x.center||[0,0]),top:o.P.convert(x.top||[0,0]),"top-left":o.P.convert(x["top-left"]||[0,0]),"top-right":o.P.convert(x["top-right"]||[0,0]),bottom:o.P.convert(x.bottom||[0,0]),"bottom-left":o.P.convert(x["bottom-left"]||[0,0]),"bottom-right":o.P.convert(x["bottom-right"]||[0,0]),left:o.P.convert(x.left||[0,0]),right:o.P.convert(x.right||[0,0])}}return Ga(new o.P(0,0))}const qc=w;m.AJAXError=o.cJ,m.Event=o.l,m.Evented=o.E,m.LngLat=o.V,m.MercatorCoordinate=o.ab,m.Point=o.P,m.addProtocol=o.cK,m.config=o.c,m.removeProtocol=o.cL,m.AttributionControl=Fo,m.BoxZoomHandler=kt,m.CanvasSource=de,m.CooperativeGesturesHandler=Vi,m.DoubleClickZoomHandler=Oi,m.DragPanHandler=gr,m.DragRotateHandler=xr,m.EdgeInsets=Sa,m.FullscreenControl=class extends o.E{constructor(x={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){z.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const x=this._fullscreenButton=z.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);z.create("span","maplibregl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=On,m.GeolocateControl=class extends o.E{constructor(x){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new o.V(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,y=this._map.getBearing(),b=o.e({bearing:y},this.options.fitBoundsOptions),S=Ur.fromLngLat(c,d);this._map.fitBounds(S,b,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new o.V(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Vl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this._geolocateButton=z.create("button","maplibregl-ctrl-geolocate",this._container),z.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pA({element:this._dotElement}),this._circleElement=z.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const d=c?.[0]instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))}))}},this.options=o.e({},du,x)}onAdd(x){return this._map=x,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return o._(this,arguments,void 0,(function*(r=!1){if(Hl!==void 0&&!r)return Hl;if(window.navigator.permissions===void 0)return Hl=!!window.navigator.geolocation,Hl;try{Hl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Hl=!!window.navigator.geolocation}return Hl}))})().then((r=>this._finishSetupUI(r))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),z.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,jl=0,Vl=!1}_isOutOfMapMaxBounds(x){const r=this._map.getMaxBounds(),c=x.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const x=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&x))return;const r=this._map.project(x),c=this._map.unproject([r.x+100,r.y]),d=x.distanceTo(c)/100,y=2*this._accuracy/d;this._circleElement.style.width=`${y.toFixed(2)}px`,this._circleElement.style.height=`${y.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jl--,Vl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jl++,jl>1?(x={maximumAge:6e5,timeout:0},Vl=!0):(x=this.options.positionOptions,Vl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var x;const r=(x=this._map.getProjection())===null||x===void 0?void 0:x.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var x;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((x=this._map.getProjection())===null||x===void 0?void 0:x.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(x){return this._map=x,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=z.create("button","maplibregl-ctrl-globe",this._container),z.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=dA,m.ImageSource=hn,m.KeyboardHandler=as,m.LngLatBounds=Ur,m.LogoControl=ki,m.Map=class extends Es{constructor(x){var r,c;o.cH.mark(o.cI.create);const d=Object.assign(Object.assign(Object.assign({},Ha),x),{canvasContextAttributes:Object.assign(Object.assign({},Ha.canvasContextAttributes),x.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new ul,b=new ha;if(d.minZoom!==void 0&&y.setMinZoom(d.minZoom),d.maxZoom!==void 0&&y.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&y.setMinPitch(d.minPitch),d.maxPitch!==void 0&&y.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&y.setRenderWorldCopies(d.renderWorldCopies),d.transformConstrain!==null&&y.setConstrainOverride(d.transformConstrain),super(y,b,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new In,this._controls=[],this._mapId=o.ah(),this._lostContextStyle={style:null,images:null},this._contextLost=M=>{M.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const N of Object.values(this.style._layers))if(N.type==="custom"&&console.warn(`Custom layer with id '${N.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),N._listeners)for(const[j]of Object.entries(N._listeners))console.warn(`Custom layer with id '${N.id}' had event listeners for event '${j}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new o.l("webglcontextlost",{originalEvent:M}))},this._contextRestored=M=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:M}))},this._onMapScroll=M=>{if(M.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ji),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this._zoomLevelsToOverscale=d.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=d.transformCameraUpdate,this.transformConstrain=d.transformConstrain,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,d.reduceMotion!==void 0&&(P.prefersReducedMotion=d.reduceMotion),this._imageQueueHandle=Ve.addThrottleControl((()=>this.isMoving())),this._requestManager=new Oe(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let M=!1;const N=Ou((j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())}),50);this._resizeObserver=new ResizeObserver((j=>{M?N(j):M=!0})),this._resizeObserver.observe(this._container)}this.handlers=new wi(this,d),this._hash=d.hash&&new dA(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,o.e({},d.fitBoundsOptions,{duration:0}))));const S=typeof d.style=="string"||((c=(r=d.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,S),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Fo(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new ki,d.logoPosition),this.on("style.load",(()=>{if(S||this._resizeTransform(),this.transform.unmodified){const M=o.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(M)}})),this.on("data",(M=>{this._update(M.dataType==="style"),this.fire(new o.l(`${M.dataType}data`,M))})),this.on("dataloading",(M=>{this.fire(new o.l(`${M.dataType}dataloading`,M))})),this.on("dataabort",(M=>{this.fire(new o.l("sourcedataabort",M))}))}_getMapId(){return this._mapId}setGlobalStateProperty(x,r){return this.style.setGlobalStateProperty(x,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(x,r){if(r===void 0&&(r=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=x.onAdd(this);this._controls.push(x);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(x);return r>-1&&this._controls.splice(r,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}coveringTiles(x){return Tn(this.transform,x)}calculateCameraOptionsFromTo(x,r,c,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLat(c)),super.calculateCameraOptionsFromTo(x,r,c,d)}resize(x,r=!0){const[c,d]=this._containerDimensions(),y=this._getClampedPixelRatio(c,d);if(this._resizeCanvas(c,d,y),this.painter.resize(c,d,y),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const M=this._getClampedPixelRatio(c,d);this._resizeCanvas(c,d,M),this.painter.resize(c,d,M)}this._resizeTransform(r);const b=!this._moving;return b&&(this.stop(),this.fire(new o.l("movestart",x)).fire(new o.l("move",x))),this.fire(new o.l("resize",x)),b&&this.fire(new o.l("moveend",x)),this}_resizeTransform(x=!0){var r;const[c,d]=this._containerDimensions();this.transform.resize(c,d,x),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,d,x)}_getClampedPixelRatio(x,r){const{0:c,1:d}=this._maxCanvasSize,y=this.getPixelRatio(),b=x*y,S=r*y;return Math.min(b>c?c/b:1,S>d?d/S:1)*y}getPixelRatio(){var x;return(x=this._overridePixelRatio)!==null&&x!==void 0?x:devicePixelRatio}setPixelRatio(x){this._overridePixelRatio=x,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(Ur.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.setMinZoom(x),this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.setMaxZoom(x),this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.setMinPitch(x),this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(x>=this.transform.minPitch)return this.transform.setMaxPitch(x),this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.setRenderWorldCopies(x),this._update()}setTransformConstrain(x){return this.transform.setConstrainOverride(x),this._update()}project(x){return this.transform.locationToScreenPoint(o.V.convert(x),this.style&&this.terrain)}unproject(x){return this.transform.screenPointToLocation(o.P.convert(x),this.terrain)}isMoving(){var x;return this._moving||((x=this.handlers)===null||x===void 0?void 0:x.isMoving())}isZooming(){var x;return this._zooming||((x=this.handlers)===null||x===void 0?void 0:x.isZooming())}isRotating(){var x;return this._rotating||((x=this.handlers)===null||x===void 0?void 0:x.isRotating())}_createDelegatedListener(x,r,c){if(x==="mouseenter"||x==="mouseover"){let d=!1;return{layers:r,listener:c,delegates:{mousemove:b=>{const S=r.filter((N=>this.getLayer(N))),M=S.length!==0?this.queryRenderedFeatures(b.point,{layers:S}):[];M.length?d||(d=!0,c.call(this,new we(x,this,b.originalEvent,{features:M}))):d=!1},mouseout:()=>{d=!1}}}}if(x==="mouseleave"||x==="mouseout"){let d=!1;return{layers:r,listener:c,delegates:{mousemove:S=>{const M=r.filter((N=>this.getLayer(N)));(M.length!==0?this.queryRenderedFeatures(S.point,{layers:M}):[]).length?d=!0:d&&(d=!1,c.call(this,new we(x,this,S.originalEvent)))},mouseout:S=>{d&&(d=!1,c.call(this,new we(x,this,S.originalEvent)))}}}}{const d=y=>{const b=r.filter((M=>this.getLayer(M))),S=b.length!==0?this.queryRenderedFeatures(y.point,{layers:b}):[];S.length&&(y.features=S,c.call(this,y),delete y.features)};return{layers:r,listener:c,delegates:{[x]:d}}}}_saveDelegatedListener(x,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(r)}_removeDelegatedListener(x,r,c){if(!this._delegatedListeners||!this._delegatedListeners[x])return;const d=this._delegatedListeners[x];for(let y=0;y<d.length;y++){const b=d[y];if(b.listener===c&&b.layers.length===r.length&&b.layers.every((S=>r.includes(S)))){for(const S in b.delegates)this.off(S,b.delegates[S]);return void d.splice(y,1)}}}on(x,r,c){if(c===void 0)return super.on(x,r);const d=typeof r=="string"?[r]:r,y=this._createDelegatedListener(x,d,c);this._saveDelegatedListener(x,y);for(const b in y.delegates)this.on(b,y.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(x,d,c)}}}once(x,r,c){if(c===void 0)return super.once(x,r);const d=typeof r=="string"?[r]:r,y=this._createDelegatedListener(x,d,c);for(const b in y.delegates){const S=y.delegates[b];y.delegates[b]=(...M)=>{this._removeDelegatedListener(x,d,c),S(...M)}}this._saveDelegatedListener(x,y);for(const b in y.delegates)this.once(b,y.delegates[b]);return this}off(x,r,c){return c===void 0?super.off(x,r):(this._removeDelegatedListener(x,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(x,r){if(!this.style)return[];let c;const d=x instanceof o.P||Array.isArray(x),y=d?x:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:x)||{},y instanceof o.P||typeof y[0]=="number")c=[o.P.convert(y)];else{const b=o.P.convert(y[0]),S=o.P.convert(y[1]);c=[b,new o.P(S.x,b.y),S,new o.P(b.x,S.y),b]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(x,r){return this.style.querySourceFeatures(x,r)}setStyle(x,r){return(r=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(x,r))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const r=this._locale[x];if(r==null)throw new Error(`Missing UI string '${x}'`);return r}_updateStyle(x,r){var c,d;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(x,r)));const y=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!x)),x?(this.style=new Xi(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x,r,y):this.style.loadJSON(x,r,y),this):((d=(c=this.style)===null||c===void 0?void 0:c.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Xi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,r){if(typeof x=="string"){const c=this._requestManager.transformRequest(x,"Style");o.j(c,new AbortController).then((d=>{this._updateDiff(d.data,r)})).catch((d=>{d&&this.fire(new o.k(d))}))}else typeof x=="object"&&this._updateDiff(x,r)}_updateDiff(x,r){try{this.style.setState(x,r)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(x,r)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(x,r){return this._lazyInitEmptyStyle(),this.style.addSource(x,r),this._update(!0)}isSourceLoaded(x){const r=this.style&&this.style.tileManagers[x];if(r!==void 0)return r.loaded();this.fire(new o.k(new Error(`There is no tile manager with ID '${x}'`)))}setTerrain(x){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),x){const r=this.style.tileManagers[x.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${x.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const d=this.style._layers[c];d.type==="hillshade"&&d.source===x.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),d.type==="color-relief"&&d.source===x.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ss(this.painter,r,x),this.painter.renderToTexture=new Fs(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var d;c.dataType==="style"?this.terrain.tileManager.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==x.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=c.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:x})),this}getTerrain(){var x,r;return(r=(x=this.terrain)===null||x===void 0?void 0:x.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const x=this.style&&this.style.tileManagers;for(const r of Object.values(x))if(!r.areTilesLoaded())return!1;return!0}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}setSourceTileLodParams(x,r,c){if(c){const d=this.getSource(c);if(!d)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);d.calculateTileZoom=Kr(Math.max(1,x),Math.max(1,r))}else for(const d in this.style.tileManagers)this.style.tileManagers[d].getSource().calculateTileZoom=Kr(Math.max(1,x),Math.max(1,r));return this._update(!0),this}refreshTiles(x,r){const c=this.style.tileManagers[x];if(!c)throw new Error(`There is no tile manager with ID "${x}", cannot refresh tile`);r===void 0?c.reload(!0):c.refreshTiles(r.map((d=>new o.ae(d.z,d.x,d.y))))}addImage(x,r,c={}){const{pixelRatio:d=1,sdf:y=!1,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||o.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:ne,data:ee}=r,Ae=r;return this.style.addImage(x,{data:new o.R({width:q,height:ne},new Uint8Array(ee)),pixelRatio:d,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j,sdf:y,version:0,userImage:Ae}),Ae.onAdd&&Ae.onAdd(this,x),this}}{const{width:q,height:ne,data:ee}=P.getImageData(r);this.style.addImage(x,{data:new o.R({width:q,height:ne},ee),pixelRatio:d,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j,sdf:y,version:0})}}updateImage(x,r){const c=this.style.getImage(x);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||o.b(r)?P.getImageData(r):r,{width:y,height:b,data:S}=d;if(y===void 0||b===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||b!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(r instanceof HTMLImageElement||o.b(r));return c.data.replace(S,M),this.style.updateImage(x,c),this}getImage(x){return this.style.getImage(x)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x){return Ve.getImage(this._requestManager.transformRequest(x,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(x,r){return this._lazyInitEmptyStyle(),this.style.addLayer(x,r),this._update(!0)}moveLayer(x,r){return this.style.moveLayer(x,r),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(x,r,c){return this.style.setLayerZoomRange(x,r,c),this._update(!0)}setFilter(x,r,c={}){return this.style.setFilter(x,r,c),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,r,c,d={}){return this.style.setPaintProperty(x,r,c,d),this._update(!0)}getPaintProperty(x,r){return this.style.getPaintProperty(x,r)}setLayoutProperty(x,r,c,d={}){return this.style.setLayoutProperty(x,r,c,d),this._update(!0)}getLayoutProperty(x,r){return this.style.getLayoutProperty(x,r)}setGlyphs(x,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(x,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(x,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(x,r,c,(d=>{d||this._update(!0)})),this}removeSprite(x){return this._lazyInitEmptyStyle(),this.style.removeSprite(x),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(x,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(x,r,(c=>{c||this._update(!0)})),this}setLight(x,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(x,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(x,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(x,r){return this.style.setFeatureState(x,r),this._update()}removeFeatureState(x,r){return this.style.removeFeatureState(x,r),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,r=0;return this._container&&(x=this._container.clientWidth||400,r=this._container.clientHeight||300),[x,r]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map");const r=this._canvasContainer=z.create("div","maplibregl-canvas-container",x);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=z.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),d=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],d);const y=this._controlContainer=z.create("div","maplibregl-control-container",x),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((S=>{b[S]=z.create("div",`maplibregl-ctrl-${S} `,y)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(x,r,c){this._canvas.width=Math.floor(c*x),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const x=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",(d=>{r={requestedAttributes:x},d&&(r.statusMessage=d.statusMessage,r.type=d.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,x):this._canvas.getContext("webgl2",x)||this._canvas.getContext("webgl",x),!c){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new fu(c,this.transform),Z.testSupport(c)}migrateProjection(x,r){super.migrateProjection(x,r),this.painter.transform=x,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){var r,c,d,y,b;const S=this._idleTriggered?this._fadeDuration:0,M=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,ee=H();this.style.zoomHistory.update(ne,ee);const Ae=new o.H(ne,{now:ee,fadeDuration:S,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),_e=Ae.crossFadingFactor();_e===1&&_e===this._crossFadingFactor||(N=!0,this._crossFadingFactor=_e),this.style.update(Ae)}const j=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==M;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cH.mark(o.cI.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,o.cH.mark(o.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var x;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ve.removeThrottleControl(this._imageQueueHandle),(x=this._resizeObserver)===null||x===void 0||x.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),z.remove(this._canvasContainer),z.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cH.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,(x=>{o.cH.frame(x),this._frameRequest=null;try{this._render(x)}catch(r){if(!o.Z(r)&&!(function(c){return c.message===hc})(r))throw r}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get version(){return za}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(x){return this._lazyInitEmptyStyle(),this.style.setProjection(x),this._update(!0)}},m.MapMouseEvent=we,m.MapTouchEvent=Ee,m.MapWheelEvent=Pe,m.Marker=pA,m.NavigationControl=class{constructor(x){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const d=this._map._getUIString(`NavigationControl.${c}`);r.title=d,r.setAttribute("aria-label",d)},this.options=o.e({},Gc,x),this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(r=>this._map.zoomIn({},{originalEvent:r}))),z.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(r=>this._map.zoomOut({},{originalEvent:r}))),z.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})})),this._compassIcon=z.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ja(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){z.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,r){const c=z.create("button",x,this._container);return c.type="button",c.addEventListener("click",r),c}},m.Popup=class extends o.E{constructor(x){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&z.remove(this._content),this._container&&(z.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=z.create("div","maplibregl-popup",this._map.getContainer()),this._tip=z.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=VA(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor;const y=Ga(this.options.offset);if(!d){const S=this._container.offsetWidth,M=this._container.offsetHeight;let N;N=c.y+y.bottom.y<M?["top"]:c.y>this._map.transform.height-M?["bottom"]:[],c.x<S/2?N.push("left"):c.x>this._map.transform.width-S/2&&N.push("right"),d=N.length===0?"bottom":N.join("-")}let b=c.add(y[d]);this.options.subpixelPositioning||(b=b.round()),z.setTransform(this._container,`${gi[d]} translate(${b.x}px,${b.y}px)`),Wo(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(es),x)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=o.V.convert(x),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const r=document.createDocumentFragment(),c=document.createElement("body");let d;for(c.innerHTML=x;d=c.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var x;return(x=this._container)===null||x===void 0?void 0:x.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=z.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){return this._container&&this._container.classList.add(x),this}removeClassName(x){return this._container&&this._container.classList.remove(x),this}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}setSubpixelPositioning(x){this.options.subpixelPositioning=x}_createCloseButton(){this.options.closeButton&&(this._closeButton=z.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(Kc);x&&x.focus()}},m.RasterDEMTileSource=Sr,m.RasterTileSource=Wr,m.ScaleControl=class{constructor(x){this._onMove=()=>{bi(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,bi(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Va),x)}getDefaultPosition(){return"bottom-left"}onAdd(x){return this._map=x,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){z.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=Cs,m.Style=Xi,m.TerrainControl=class{constructor(x){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=x}onAdd(x){return this._map=x,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=z.create("button","maplibregl-ctrl-terrain",this._container),z.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){z.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=zn,m.TwoFingersTouchRotateHandler=pi,m.TwoFingersTouchZoomHandler=Hr,m.TwoFingersTouchZoomRotateHandler=Ti,m.VectorTileSource=lr,m.VideoSource=dt,m.addSourceType=(x,r)=>o._(void 0,void 0,void 0,(function*(){if(ve(x))throw new Error(`A source type called "${x}" already exists.`);((c,d)=>{pe[c]=d})(x,r)})),m.clearPrewarmedResources=function(){const x=et;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(Me),et=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=V,m.getMaxParallelImageRequests=function(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return vt().getRTLTextPluginStatus()},m.getVersion=function(){return qc},m.getWorkerCount=function(){return qe.workerCount},m.getWorkerUrl=function(){return o.c.WORKER_URL},m.importScriptInWorkers=function(x){return Kt().broadcast("IS",x)},m.isTimeFrozen=function(){return W.isFrozen()},m.now=H,m.prewarm=function(){Et().acquire(Me)},m.restoreNow=function(){W.restoreNow()},m.setMaxParallelImageRequests=function(x){o.c.MAX_PARALLEL_IMAGE_REQUESTS=x},m.setNow=function(x){W.setNow(x)},m.setRTLTextPlugin=function(x,r){return vt().setRTLTextPlugin(x,r)},m.setWorkerCount=function(x){qe.workerCount=x},m.setWorkerUrl=function(x){o.c.WORKER_URL=x}}));var f=i;return f}))})(k0)),k0.exports}var o6=s6();const sp=pw(o6);var bl=Uint8Array,SA=Uint16Array,$w=Int32Array,Ry=new bl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ny=new bl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),M_=new bl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vF=function(e,n){for(var i=new SA(31),a=0;a<31;++a)i[a]=n+=1<<e[a-1];for(var u=new $w(i[30]),a=1;a<30;++a)for(var f=i[a];f<i[a+1];++f)u[f]=f-i[a]<<5|a;return{b:i,r:u}},_F=vF(Ry,2),wF=_F.b,k_=_F.r;wF[28]=258,k_[258]=28;var xF=vF(Ny,0),a6=xF.b,O2=xF.r,U_=new SA(32768);for(var Ks=0;Ks<32768;++Ks){var sf=(Ks&43690)>>1|(Ks&21845)<<1;sf=(sf&52428)>>2|(sf&13107)<<2,sf=(sf&61680)>>4|(sf&3855)<<4,U_[Ks]=((sf&65280)>>8|(sf&255)<<8)>>1}var nh=(function(e,n,i){for(var a=e.length,u=0,f=new SA(n);u<a;++u)e[u]&&++f[e[u]-1];var m=new SA(n);for(u=1;u<n;++u)m[u]=m[u-1]+f[u-1]<<1;var o;if(i){o=new SA(1<<n);var w=15-n;for(u=0;u<a;++u)if(e[u])for(var E=u<<4|e[u],I=n-e[u],D=m[e[u]-1]++<<I,O=D|(1<<I)-1;D<=O;++D)o[U_[D]>>w]=E}else for(o=new SA(a),u=0;u<a;++u)e[u]&&(o[u]=U_[m[e[u]-1]++]>>15-e[u]);return o}),bf=new bl(288);for(var Ks=0;Ks<144;++Ks)bf[Ks]=8;for(var Ks=144;Ks<256;++Ks)bf[Ks]=9;for(var Ks=256;Ks<280;++Ks)bf[Ks]=7;for(var Ks=280;Ks<288;++Ks)bf[Ks]=8;var Qm=new bl(32);for(var Ks=0;Ks<32;++Ks)Qm[Ks]=5;var l6=nh(bf,9,0),c6=nh(bf,9,1),A6=nh(Qm,5,0),u6=nh(Qm,5,1),a1=function(e){for(var n=e[0],i=1;i<e.length;++i)e[i]>n&&(n=e[i]);return n},Cu=function(e,n,i){var a=n/8|0;return(e[a]|e[a+1]<<8)>>(n&7)&i},l1=function(e,n){var i=n/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(n&7)},Ww=function(e){return(e+7)/8|0},bF=function(e,n,i){return(i==null||i>e.length)&&(i=e.length),new bl(e.subarray(n,i))},h6=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],CA=function(e,n,i){var a=new Error(n||h6[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,CA),!i)throw a;return a},Zw=function(e,n,i,a){var u=e.length,f=0;if(!u||n.f&&!n.l)return i||new bl(0);var m=!i,o=m||n.i!=2,w=n.i;m&&(i=new bl(u*3));var E=function(Kt){var ar=i.length;if(Kt>ar){var hr=new bl(Math.max(ar*2,Kt));hr.set(i),i=hr}},I=n.f||0,D=n.p||0,O=n.b||0,P=n.l,W=n.d,H=n.m,z=n.n,Z=u*8;do{if(!P){I=Cu(e,D,1);var se=Cu(e,D+1,3);if(D+=3,se)if(se==1)P=c6,W=u6,H=9,z=5;else if(se==2){var He=Cu(e,D,31)+257,Ve=Cu(e,D+10,15)+4,Oe=He+Cu(e,D+5,31)+1;D+=14;for(var be=new bl(Oe),rt=new bl(19),ue=0;ue<Ve;++ue)rt[M_[ue]]=Cu(e,D+ue*3,7);D+=Ve*3;for(var me=a1(rt),Ue=(1<<me)-1,Ie=nh(rt,me,1),ue=0;ue<Oe;){var pt=Ie[Cu(e,D,Ue)];D+=pt&15;var ae=pt>>4;if(ae<16)be[ue++]=ae;else{var lt=0,ot=0;for(ae==16?(ot=3+Cu(e,D,3),D+=2,lt=be[ue-1]):ae==17?(ot=3+Cu(e,D,7),D+=3):ae==18&&(ot=11+Cu(e,D,127),D+=7);ot--;)be[ue++]=lt}}var Ne=be.subarray(0,He),Te=be.subarray(He);H=a1(Ne),z=a1(Te),P=nh(Ne,H,1),W=nh(Te,z,1)}else CA(1);else{var ae=Ww(D)+4,fe=e[ae-4]|e[ae-3]<<8,Fe=ae+fe;if(Fe>u){w&&CA(0);break}o&&E(O+fe),i.set(e.subarray(ae,Fe),O),n.b=O+=fe,n.p=D=Fe*8,n.f=I;continue}if(D>Z){w&&CA(0);break}}o&&E(O+131072);for(var yt=(1<<H)-1,Le=(1<<z)-1,ie=D;;ie=D){var lt=P[l1(e,D)&yt],Ce=lt>>4;if(D+=lt&15,D>Z){w&&CA(0);break}if(lt||CA(2),Ce<256)i[O++]=Ce;else if(Ce==256){ie=D,P=null;break}else{var Me=Ce-254;if(Ce>264){var ue=Ce-257,qe=Ry[ue];Me=Cu(e,D,(1<<qe)-1)+wF[ue],D+=qe}var at=W[l1(e,D)&Le],et=at>>4;at||CA(3),D+=at&15;var Te=a6[et];if(et>3){var qe=Ny[et];Te+=l1(e,D)&(1<<qe)-1,D+=qe}if(D>Z){w&&CA(0);break}o&&E(O+131072);var _t=O+Me;if(O<Te){var Et=f-Te,Pt=Math.min(Te,_t);for(Et+O<0&&CA(3);O<Pt;++O)i[O]=a[Et+O]}for(;O<_t;++O)i[O]=i[O-Te]}}n.l=P,n.p=ie,n.b=O,n.f=I,P&&(I=1,n.m=H,n.d=W,n.n=z)}while(!I);return O!=i.length&&m?bF(i,0,O):i.subarray(0,O)},Mh=function(e,n,i){i<<=n&7;var a=n/8|0;e[a]|=i,e[a+1]|=i>>8},am=function(e,n,i){i<<=n&7;var a=n/8|0;e[a]|=i,e[a+1]|=i>>8,e[a+2]|=i>>16},c1=function(e,n){for(var i=[],a=0;a<e.length;++a)e[a]&&i.push({s:a,f:e[a]});var u=i.length,f=i.slice();if(!u)return{t:CF,l:0};if(u==1){var m=new bl(i[0].s+1);return m[i[0].s]=1,{t:m,l:1}}i.sort(function(Fe,He){return Fe.f-He.f}),i.push({s:-1,f:25001});var o=i[0],w=i[1],E=0,I=1,D=2;for(i[0]={s:-1,f:o.f+w.f,l:o,r:w};I!=u-1;)o=i[i[E].f<i[D].f?E++:D++],w=i[E!=I&&i[E].f<i[D].f?E++:D++],i[I++]={s:-1,f:o.f+w.f,l:o,r:w};for(var O=f[0].s,a=1;a<u;++a)f[a].s>O&&(O=f[a].s);var P=new SA(O+1),W=D_(i[I-1],P,0);if(W>n){var a=0,H=0,z=W-n,Z=1<<z;for(f.sort(function(He,Ve){return P[Ve.s]-P[He.s]||He.f-Ve.f});a<u;++a){var se=f[a].s;if(P[se]>n)H+=Z-(1<<W-P[se]),P[se]=n;else break}for(H>>=z;H>0;){var ae=f[a].s;P[ae]<n?H-=1<<n-P[ae]++-1:++a}for(;a>=0&&H;--a){var fe=f[a].s;P[fe]==n&&(--P[fe],++H)}W=n}return{t:new bl(P),l:W}},D_=function(e,n,i){return e.s==-1?Math.max(D_(e.l,n,i+1),D_(e.r,n,i+1)):n[e.s]=i},z2=function(e){for(var n=e.length;n&&!e[--n];);for(var i=new SA(++n),a=0,u=e[0],f=1,m=function(w){i[a++]=w},o=1;o<=n;++o)if(e[o]==u&&o!=n)++f;else{if(!u&&f>2){for(;f>138;f-=138)m(32754);f>2&&(m(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(m(u),--f;f>6;f-=6)m(8304);f>2&&(m(f-3<<5|8208),f=0)}for(;f--;)m(u);f=1,u=e[o]}return{c:i.subarray(0,a),n}},lm=function(e,n){for(var i=0,a=0;a<n.length;++a)i+=e[a]*n[a];return i},BF=function(e,n,i){var a=i.length,u=Ww(n+2);e[u]=a&255,e[u+1]=a>>8,e[u+2]=e[u]^255,e[u+3]=e[u+1]^255;for(var f=0;f<a;++f)e[u+f+4]=i[f];return(u+4+a)*8},H2=function(e,n,i,a,u,f,m,o,w,E,I){Mh(n,I++,i),++u[256];for(var D=c1(u,15),O=D.t,P=D.l,W=c1(f,15),H=W.t,z=W.l,Z=z2(O),se=Z.c,ae=Z.n,fe=z2(H),Fe=fe.c,He=fe.n,Ve=new SA(19),Oe=0;Oe<se.length;++Oe)++Ve[se[Oe]&31];for(var Oe=0;Oe<Fe.length;++Oe)++Ve[Fe[Oe]&31];for(var be=c1(Ve,7),rt=be.t,ue=be.l,me=19;me>4&&!rt[M_[me-1]];--me);var Ue=E+5<<3,Ie=lm(u,bf)+lm(f,Qm)+m,pt=lm(u,O)+lm(f,H)+m+14+3*me+lm(Ve,rt)+2*Ve[16]+3*Ve[17]+7*Ve[18];if(w>=0&&Ue<=Ie&&Ue<=pt)return BF(n,I,e.subarray(w,w+E));var lt,ot,Ne,Te;if(Mh(n,I,1+(pt<Ie)),I+=2,pt<Ie){lt=nh(O,P,0),ot=O,Ne=nh(H,z,0),Te=H;var yt=nh(rt,ue,0);Mh(n,I,ae-257),Mh(n,I+5,He-1),Mh(n,I+10,me-4),I+=14;for(var Oe=0;Oe<me;++Oe)Mh(n,I+3*Oe,rt[M_[Oe]]);I+=3*me;for(var Le=[se,Fe],ie=0;ie<2;++ie)for(var Ce=Le[ie],Oe=0;Oe<Ce.length;++Oe){var Me=Ce[Oe]&31;Mh(n,I,yt[Me]),I+=rt[Me],Me>15&&(Mh(n,I,Ce[Oe]>>5&127),I+=Ce[Oe]>>12)}}else lt=l6,ot=bf,Ne=A6,Te=Qm;for(var Oe=0;Oe<o;++Oe){var qe=a[Oe];if(qe>255){var Me=qe>>18&31;am(n,I,lt[Me+257]),I+=ot[Me+257],Me>7&&(Mh(n,I,qe>>23&31),I+=Ry[Me]);var at=qe&31;am(n,I,Ne[at]),I+=Te[at],at>3&&(am(n,I,qe>>5&8191),I+=Ny[at])}else am(n,I,lt[qe]),I+=ot[qe]}return am(n,I,lt[256]),I+ot[256]},f6=new $w([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),CF=new bl(0),d6=function(e,n,i,a,u,f){var m=f.z||e.length,o=new bl(a+m+5*(1+Math.ceil(m/7e3))+u),w=o.subarray(a,o.length-u),E=f.l,I=(f.r||0)&7;if(n){I&&(w[0]=f.r>>3);for(var D=f6[n-1],O=D>>13,P=D&8191,W=(1<<i)-1,H=f.p||new SA(32768),z=f.h||new SA(W+1),Z=Math.ceil(i/3),se=2*Z,ae=function(Cr){return(e[Cr]^e[Cr+1]<<Z^e[Cr+2]<<se)&W},fe=new $w(25e3),Fe=new SA(288),He=new SA(32),Ve=0,Oe=0,be=f.i||0,rt=0,ue=f.w||0,me=0;be+2<m;++be){var Ue=ae(be),Ie=be&32767,pt=z[Ue];if(H[Ie]=pt,z[Ue]=Ie,ue<=be){var lt=m-be;if((Ve>7e3||rt>24576)&&(lt>423||!E)){I=H2(e,w,0,fe,Fe,He,Oe,rt,me,be-me,I),rt=Ve=Oe=0,me=be;for(var ot=0;ot<286;++ot)Fe[ot]=0;for(var ot=0;ot<30;++ot)He[ot]=0}var Ne=2,Te=0,yt=P,Le=Ie-pt&32767;if(lt>2&&Ue==ae(be-Le))for(var ie=Math.min(O,lt)-1,Ce=Math.min(32767,be),Me=Math.min(258,lt);Le<=Ce&&--yt&&Ie!=pt;){if(e[be+Ne]==e[be+Ne-Le]){for(var qe=0;qe<Me&&e[be+qe]==e[be+qe-Le];++qe);if(qe>Ne){if(Ne=qe,Te=Le,qe>ie)break;for(var at=Math.min(Le,qe-2),et=0,ot=0;ot<at;++ot){var _t=be-Le+ot&32767,Et=H[_t],Pt=_t-Et&32767;Pt>et&&(et=Pt,pt=_t)}}}Ie=pt,pt=H[Ie],Le+=Ie-pt&32767}if(Te){fe[rt++]=268435456|k_[Ne]<<18|O2[Te];var Kt=k_[Ne]&31,ar=O2[Te]&31;Oe+=Ry[Kt]+Ny[ar],++Fe[257+Kt],++He[ar],ue=be+Ne,++Ve}else fe[rt++]=e[be],++Fe[e[be]]}}for(be=Math.max(be,ue);be<m;++be)fe[rt++]=e[be],++Fe[e[be]];I=H2(e,w,E,fe,Fe,He,Oe,rt,me,be-me,I),E||(f.r=I&7|w[I/8|0]<<3,I-=7,f.h=z,f.p=H,f.i=be,f.w=ue)}else{for(var be=f.w||0;be<m+E;be+=65535){var hr=be+65535;hr>=m&&(w[I/8|0]=E,hr=m),I=BF(w,I+1,e.subarray(be,hr))}f.i=m}return bF(o,0,a+Ww(I)+u)},EF=function(){var e=1,n=0;return{p:function(i){for(var a=e,u=n,f=i.length|0,m=0;m!=f;){for(var o=Math.min(m+2655,f);m<o;++m)u+=a+=i[m];a=(a&65535)+15*(a>>16),u=(u&65535)+15*(u>>16)}e=a,n=u},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},p6=function(e,n,i,a,u){if(!u&&(u={l:1},n.dictionary)){var f=n.dictionary.subarray(-32768),m=new bl(f.length+e.length);m.set(f),m.set(e,f.length),e=m,u.w=f.length}return d6(e,n.level==null?6:n.level,n.mem==null?u.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,i,a,u)},SF=function(e,n,i){for(;i;++n)e[n]=i,i>>>=8},m6=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&CA(6,"invalid gzip data");var n=e[3],i=10;n&4&&(i+=(e[10]|e[11]<<8)+2);for(var a=(n>>3&1)+(n>>4&1);a>0;a-=!e[i++]);return i+(n&2)},g6=function(e){var n=e.length;return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0},y6=function(e,n){var i=n.level,a=i==0?0:i<6?1:i==9?3:2;if(e[0]=120,e[1]=a<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var u=EF();u.p(n.dictionary),SF(e,2,u.d())}},v6=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&CA(6,"invalid zlib data"),(e[1]>>5&1)==1&&CA(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function _6(e,n){return Zw(e,{i:2},n,n)}function w6(e,n){var i=m6(e);return i+8>e.length&&CA(6,"invalid gzip data"),Zw(e.subarray(i,-8),{i:2},new bl(g6(e)),n)}function R_(e,n){n||(n={});var i=EF();i.p(e);var a=p6(e,n,n.dictionary?6:2,4);return y6(a,n),SF(a,a.length-4,i.d()),a}function x6(e,n){return Zw(e.subarray(v6(e),-4),{i:2},n,n)}function b6(e,n){return e[0]==31&&e[1]==139&&e[2]==8?w6(e,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?_6(e,n):x6(e,n)}var B6=typeof TextDecoder<"u"&&new TextDecoder,C6=0;try{B6.decode(CF,{stream:!0}),C6=1}catch{}var E6=Object.defineProperty,Em=Math.pow,hs=(e,n)=>E6(e,"name",{value:n,configurable:!0}),nl=(e,n,i)=>new Promise((a,u)=>{var f=w=>{try{o(i.next(w))}catch(E){u(E)}},m=w=>{try{o(i.throw(w))}catch(E){u(E)}},o=w=>w.done?a(w.value):Promise.resolve(w.value).then(f,m);o((i=i.apply(e,n)).next())});hs((e,n)=>{let i=!1,a="",u=L.GridLayer.extend({createTile:hs((f,m)=>{let o=document.createElement("img"),w=new AbortController,E=w.signal;return o.cancel=()=>{w.abort()},i||(e.getHeader().then(I=>{I.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):I.tileType===2?a="image/png":I.tileType===3?a="image/jpeg":I.tileType===4?a="image/webp":I.tileType===5&&(a="image/avif")}),i=!0),e.getZxy(f.z,f.x,f.y,E).then(I=>{if(I){let D=new Blob([I.data],{type:a}),O=window.URL.createObjectURL(D);o.src=O,o.cancel=void 0,m(void 0,o)}}).catch(I=>{if(I.name!=="AbortError")throw I}),o},"createTile"),_removeTile:hs(function(f){let m=this._tiles[f];m&&(m.el.cancel&&m.el.cancel(),m.el.width=0,m.el.height=0,m.el.deleted=!0,L.DomUtil.remove(m.el),delete this._tiles[f],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(f)}))},"_removeTile")});return new u(n)},"leafletRasterLayer");var S6=hs(e=>(n,i)=>{if(i instanceof AbortController)return e(n,i);let a=new AbortController;return e(n,a).then(u=>i(void 0,u.data,u.cacheControl||"",u.expires||""),u=>i(u)).catch(u=>i(u)),{cancel:hs(()=>a.abort(),"cancel")}},"v3compat"),FF=class{constructor(n){this.tilev4=hs((i,a)=>nl(this,null,function*(){if(i.type==="json"){let P=i.url.substr(10),W=this.tiles.get(P);if(W||(W=new j2(P),this.tiles.set(P,W)),this.metadata)return{data:yield W.getTileJson(i.url)};let H=yield W.getHeader();return(H.minLon>=H.maxLon||H.minLat>=H.maxLat)&&console.error(`Bounds of PMTiles archive ${H.minLon},${H.minLat},${H.maxLon},${H.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:H.minZoom,maxzoom:H.maxZoom,bounds:[H.minLon,H.minLat,H.maxLon,H.maxLat]}}}let u=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),f=i.url.match(u);if(!f)throw new Error("Invalid PMTiles protocol URL");let m=f[1],o=this.tiles.get(m);o||(o=new j2(m),this.tiles.set(m,o));let w=f[2],E=f[3],I=f[4],D=yield o.getHeader(),O=yield o?.getZxy(+w,+E,+I,a.signal);if(O)return{data:new Uint8Array(O.data),cacheControl:O.cacheControl,expires:O.expires};if(D.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=S6(this.tilev4),this.tiles=new Map,this.metadata=n?.metadata||!1,this.errorOnMissingTile=n?.errorOnMissingTile||!1}add(n){this.tiles.set(n.source.getKey(),n)}get(n){return this.tiles.get(n)}};hs(FF,"Protocol");var F6=FF;function IF(e,n){return(n>>>0)*4294967296+(e>>>0)}hs(IF,"toNum");function TF(e,n){let i=n.buf,a=i[n.pos++],u=(a&112)>>4;if(a<128||(a=i[n.pos++],u|=(a&127)<<3,a<128)||(a=i[n.pos++],u|=(a&127)<<10,a<128)||(a=i[n.pos++],u|=(a&127)<<17,a<128)||(a=i[n.pos++],u|=(a&127)<<24,a<128)||(a=i[n.pos++],u|=(a&1)<<31,a<128))return IF(e,u);throw new Error("Expected varint not more than 10 bytes")}hs(TF,"readVarintRemainder");function Jd(e){let n=e.buf,i=n[e.pos++],a=i&127;return i<128||(i=n[e.pos++],a|=(i&127)<<7,i<128)||(i=n[e.pos++],a|=(i&127)<<14,i<128)||(i=n[e.pos++],a|=(i&127)<<21,i<128)?a:(i=n[e.pos],a|=(i&15)<<28,TF(a,e))}hs(Jd,"readVarint");function Xw(e,n,i,a){if(a===0){i===1&&(n[0]=e-1-n[0],n[1]=e-1-n[1]);let u=n[0];n[0]=n[1],n[1]=u}}hs(Xw,"rotate");function PF(e,n){let i=Em(2,e),a=n,u=n,f=n,m=[0,0],o=1;for(;o<i;)a=1&f/2,u=1&(f^a),Xw(o,m,a,u),m[0]+=o*a,m[1]+=o*u,f=f/4,o*=2;return[e,m[0],m[1]]}hs(PF,"idOnLevel");var I6=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function LF(e,n,i){if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(n>Em(2,e)-1||i>Em(2,e)-1)throw new Error("tile x/y outside zoom level bounds");let a=I6[e],u=Em(2,e),f=0,m=0,o=0,w=[n,i],E=u/2;for(;E>0;)f=(w[0]&E)>0?1:0,m=(w[1]&E)>0?1:0,o+=E*E*(3*f^m),Xw(E,w,f,m),E=E/2;return a+o}hs(LF,"zxyToTileId");function T6(e){let n=0;for(let i=0;i<27;i++){let a=(1<<i)*(1<<i);if(n+a>e)return PF(i,e-n);n+=a}throw new Error("Tile zoom level exceeds max safe number limit (26)")}hs(T6,"tileIdToZxy");var P6=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(P6||{});function Qy(e,n){return nl(this,null,function*(){if(n===1||n===0)return e;if(n===2){if(typeof globalThis.DecompressionStream>"u")return b6(new Uint8Array(e));let i=new Response(e).body;if(!i)throw new Error("Failed to read response stream");let a=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw new Error("Compression method not supported")})}hs(Qy,"defaultDecompress");var L6=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(L6||{});function MF(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}hs(MF,"tileTypeExt");var M6=127;function kF(e,n){let i=0,a=e.length-1;for(;i<=a;){let u=a+i>>1,f=n-e[u].tileId;if(f>0)i=u+1;else if(f<0)a=u-1;else return e[u]}return a>=0&&(e[a].runLength===0||n-e[a].tileId<e[a].runLength)?e[a]:null}hs(kF,"findTile");var k6=class{constructor(n){this.file=n}getKey(){return this.file.name}getBytes(n,i){return nl(this,null,function*(){return{data:yield this.file.slice(n,n+i).arrayBuffer()}})}};hs(k6,"FileSource");var UF=class{constructor(n,i=new Headers){this.url=n,this.customHeaders=i,this.mustReload=!1;let a="";"navigator"in globalThis&&(a=globalThis.navigator.userAgent||"");let u=a.indexOf("Windows")>-1,f=/Chrome|Chromium|Edg|OPR|Brave/.test(a);this.chromeWindowsNoCache=!1,u&&f&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(n){this.customHeaders=n}getBytes(n,i,a,u){return nl(this,null,function*(){let f,m;a?m=a:(f=new AbortController,m=f.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${n}-${n+i-1}`);let w;this.mustReload?w="reload":this.chromeWindowsNoCache&&(w="no-store");let E=yield fetch(this.url,{signal:m,cache:w,headers:o});if(n===0&&E.status===416){let O=E.headers.get("Content-Range");if(!O||!O.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let P=+O.substr(8);E=yield fetch(this.url,{signal:m,cache:"reload",headers:{range:`bytes=0-${P-1}`}})}let I=E.headers.get("Etag");if(I!=null&&I.startsWith("W/")&&(I=null),E.status===416||u&&I&&I!==u)throw this.mustReload=!0,new N_(`Server returned non-matching ETag ${u} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(E.status>=300)throw new Error(`Bad response code: ${E.status}`);let D=E.headers.get("Content-Length");if(E.status===200&&(!D||+D>i))throw f&&f.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield E.arrayBuffer(),etag:I||void 0,cacheControl:E.headers.get("Cache-Control")||void 0,expires:E.headers.get("Expires")||void 0}})}};hs(UF,"FetchSource");var U6=UF;function JA(e,n){let i=e.getUint32(n+4,!0),a=e.getUint32(n+0,!0);return i*Em(2,32)+a}hs(JA,"getUint64");function DF(e,n){let i=new DataView(e),a=i.getUint8(7);if(a>3)throw new Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:JA(i,8),rootDirectoryLength:JA(i,16),jsonMetadataOffset:JA(i,24),jsonMetadataLength:JA(i,32),leafDirectoryOffset:JA(i,40),leafDirectoryLength:JA(i,48),tileDataOffset:JA(i,56),tileDataLength:JA(i,64),numAddressedTiles:JA(i,72),numTileEntries:JA(i,80),numTileContents:JA(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:n}}hs(DF,"bytesToHeader");function Yw(e){let n={buf:new Uint8Array(e),pos:0},i=Jd(n),a=[],u=0;for(let f=0;f<i;f++){let m=Jd(n);a.push({tileId:u+m,offset:0,length:0,runLength:1}),u+=m}for(let f=0;f<i;f++)a[f].runLength=Jd(n);for(let f=0;f<i;f++)a[f].length=Jd(n);for(let f=0;f<i;f++){let m=Jd(n);m===0&&f>0?a[f].offset=a[f-1].offset+a[f-1].length:a[f].offset=m-1}return a}hs(Yw,"deserializeIndex");var RF=class extends Error{};hs(RF,"EtagMismatch");var N_=RF;function Jw(e,n){return nl(this,null,function*(){let i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let a=i.data.slice(0,M6),u=DF(a,i.etag),f=i.data.slice(u.rootDirectoryOffset,u.rootDirectoryOffset+u.rootDirectoryLength),m=`${e.getKey()}|${u.etag||""}|${u.rootDirectoryOffset}|${u.rootDirectoryLength}`,o=Yw(yield n(f,u.internalCompression));return[u,[m,o.length,o]]})}hs(Jw,"getHeaderAndRoot");function ex(e,n,i,a,u){return nl(this,null,function*(){let f=yield e.getBytes(i,a,void 0,u.etag),m=yield n(f.data,u.internalCompression),o=Yw(m);if(o.length===0)throw new Error("Empty directory is invalid");return o})}hs(ex,"getDirectory");var D6=class{constructor(n=100,i=!0,a=Qy){this.cache=new Map,this.maxCacheEntries=n,this.counter=1,this.decompress=a}getHeader(n){return nl(this,null,function*(){let i=n.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,a.data;let u=yield Jw(n,this.decompress);return u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:u[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:u[0]}),this.prune(),u[0]})}getDirectory(n,i,a,u){return nl(this,null,function*(){let f=`${n.getKey()}|${u.etag||""}|${i}|${a}`,m=this.cache.get(f);if(m)return m.lastUsed=this.counter++,m.data;let o=yield ex(n,this.decompress,i,a,u);return this.cache.set(f,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let n=1/0,i;this.cache.forEach((a,u)=>{a.lastUsed<n&&(n=a.lastUsed,i=u)}),i&&this.cache.delete(i)}}invalidate(n){return nl(this,null,function*(){this.cache.delete(n.getKey())})}};hs(D6,"ResolvedValueCache");var NF=class{constructor(n=100,i=!0,a=Qy){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=n,this.counter=1,this.decompress=a}getHeader(n){return nl(this,null,function*(){let i=n.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,yield a.data;let u=new Promise((f,m)=>{Jw(n,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),f(o[0]),this.prune()}).catch(o=>{m(o)})});return this.cache.set(i,{lastUsed:this.counter++,data:u}),u})}getDirectory(n,i,a,u){return nl(this,null,function*(){let f=`${n.getKey()}|${u.etag||""}|${i}|${a}`,m=this.cache.get(f);if(m)return m.lastUsed=this.counter++,yield m.data;let o=new Promise((w,E)=>{ex(n,this.decompress,i,a,u).then(I=>{w(I),this.prune()}).catch(I=>{E(I)})});return this.cache.set(f,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let n=1/0,i;this.cache.forEach((a,u)=>{a.lastUsed<n&&(n=a.lastUsed,i=u)}),i&&this.cache.delete(i)}}invalidate(n){return nl(this,null,function*(){let i=n.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(n.getKey());let a=new Promise((u,f)=>{this.getHeader(n).then(m=>{u(),this.invalidations.delete(i)}).catch(m=>{f(m)})});this.invalidations.set(i,a)})}};hs(NF,"SharedPromiseCache");var R6=NF,QF=class{constructor(n,i,a){typeof n=="string"?this.source=new U6(n):this.source=n,a?this.decompress=a:this.decompress=Qy,i?this.cache=i:this.cache=new R6}getHeader(){return nl(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(n,i,a,u){return nl(this,null,function*(){let f=LF(n,i,a),m=yield this.cache.getHeader(this.source);if(n<m.minZoom||n>m.maxZoom)return;let o=m.rootDirectoryOffset,w=m.rootDirectoryLength;for(let E=0;E<=3;E++){let I=yield this.cache.getDirectory(this.source,o,w,m),D=kF(I,f);if(D){if(D.runLength>0){let O=yield this.source.getBytes(m.tileDataOffset+D.offset,D.length,u,m.etag);return{data:yield this.decompress(O.data,m.tileCompression),cacheControl:O.cacheControl,expires:O.expires}}o=m.leafDirectoryOffset+D.offset,w=D.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(n,i,a,u){return nl(this,null,function*(){try{return yield this.getZxyAttempt(n,i,a,u)}catch(f){if(f instanceof N_)return this.cache.invalidate(this.source),yield this.getZxyAttempt(n,i,a,u);throw f}})}getMetadataAttempt(){return nl(this,null,function*(){let n=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(n.jsonMetadataOffset,n.jsonMetadataLength,void 0,n.etag),a=yield this.decompress(i.data,n.internalCompression),u=new TextDecoder("utf-8");return JSON.parse(u.decode(a))})}getMetadata(){return nl(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(n){if(n instanceof N_)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw n}})}getTileJson(n){return nl(this,null,function*(){let i=yield this.getHeader(),a=yield this.getMetadata(),u=MF(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${n}/{z}/{x}/{y}${u}`],vector_layers:a.vector_layers,attribution:a.attribution,description:a.description,name:a.name,version:a.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};hs(QF,"PMTiles");var j2=QF;let V2=!1;function OF(){if(V2)return;const e=new F6;sp.addProtocol("pmtiles",e.tile),V2=!0,console.log("[PMTiles] Protocol registered")}function A1(e,n){const i=n.toLowerCase();return i.includes("price")?`$${(e/1e3).toFixed(0)}k`:i.includes("ratio")||i.includes("above")?`${(e*100).toFixed(0)}%`:i.includes("dom")?`${Math.round(e)}`:e.toLocaleString()}function N6(e,n){if(!e||e.length===0)return n.map(()=>0);const i=[...e].sort((a,u)=>a-u);return n.map(a=>{const u=(i.length-1)*a,f=Math.floor(u),m=Math.ceil(u),o=u-f;return i[f]*(1-o)+i[m]*o})}function zF({selectedMetric:e,metricValues:n,isExport:i=!1}){const a=te.useMemo(()=>{if(!n||n.length===0)return{min:"N/A",mid:"N/A",max:"N/A"};const[f,m,o]=N6(n,[.05,.5,.95]);return{min:A1(f,e),mid:A1(m,e),max:A1(o,e)}},[n,e]),u=f=>{const m=f.replace(/-/g,"_");return{median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",sale_to_list_ratio:"Sale-to-List Ratio",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"}[m]||m.split("_").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ")};return ce.jsxs("div",{className:`
      border border-gray-300 rounded-lg p-4 w-full max-w-xs
      ${i?"bg-white shadow-none":"bg-white/95 backdrop-blur-sm shadow-xl"}
    `,children:[ce.jsx("h3",{className:"text-sm font-bold mb-3 text-gray-900",children:u(e)}),ce.jsxs("div",{className:"space-y-2",children:[ce.jsx("div",{className:"h-4 rounded-md border border-gray-200",style:{background:"linear-gradient(to right, #FFF9B0, #FFEB84, #FFD166, #FF9A56, #E84C61, #C13584, #7B2E8D, #2E0B59)"}}),ce.jsxs("div",{className:"flex justify-between text-xs text-gray-700 font-bold",children:[ce.jsx("span",{children:a.min}),ce.jsx("span",{children:a.mid}),ce.jsx("span",{children:a.max})]})]}),!i&&ce.jsx("div",{className:"mt-1 pt-1 border-gray-200",children:ce.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Click ZIP code to view more info"})})]})}function Q6({className:e,showText:n=!0,size:i="md"}){const a={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"},u={sm:"text-sm",md:"text-base",lg:"text-xl"};return ce.jsxs("div",{className:Li("flex items-center space-x-2",e),children:[ce.jsx("div",{className:Li("relative",a[i]),children:ce.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"60 48 922 918",className:"w-full h-full",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd",children:[ce.jsx("path",{style:{opacity:1},fill:"currentColor",d:"M599.5 969.5a47946 47946 0 0 0-438-1q-3.972-.357-5.5-4-.75-265.5-.5-531-1.76-3.006-5-4.5l-90-1q-2.844-2.712-1.5-6.5A85.4 85.4 0 0 1 70.5 411q-.342-.598-1-.5A210908 210908 0 0 0 502.5 50q9.211-5.049 18 1a60358 60358 0 0 0 320 265Q985.322 445.534 961 639.5 937.402 826.092 774.5 918q-81.922 44.606-175 51.5m273-427q-12.547-109.86-97-180.5a40179 40179 0 0 1-262-215q-2-1-4 0a29527 29527 0 0 0-271 226.5 76 76 0 0 0-6.5 8 3480 3480 0 0 0 0 118l2.5 2.5c71.999.667 143.999.5 216 .5h17a282 282 0 0 1 72 7.5Q679.637 546.536 695 690.5q8.445 111.188-67 192-2.234 6.5 4.5 7 16.65-3.08 33-7.5Q781.86 847.5 840 741.5q39.05-82.066 33.5-173-.357-13.007-1-26m-617 38q106-.25 212 .5 48.318.069 88 27 41.687 35.418 46.5 90.5 5.764 54.94-21 103-32.8 48.235-90.5 59.5a277 277 0 0 1-29 4q-103 .75-206 .5a10.5 10.5 0 0 0-2.5-3q-1-139.5 0-279a10.5 10.5 0 0 0 2.5-3"}),ce.jsx("path",{fill:"currentColor",style:{opacity:1},d:"M427.5 290h68v68h-68zm96 0h68v68h-68zm-96 96h68v68h-68zm96 0h68v68h-68z"})]})}),n&&ce.jsx("span",{className:Li("font-bold text-gray-800",u[i]),children:"Domapus"})]})}function O6(e,n,i={}){const a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties={},a.geometry=e,a}function z6(e,n,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!G2(e[0])||!G2(e[1]))throw new Error("coordinates must contain numbers");return O6({type:"Point",coordinates:e},n,i)}function H6(e,n={}){const i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=e,i}function G2(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function HF(e,n,i){if(e!==null)for(var a,u,f,m,o,w,E,I=0,D=0,O,P=e.type,W=P==="FeatureCollection",H=P==="Feature",z=W?e.features.length:1,Z=0;Z<z;Z++){E=W?e.features[Z].geometry:H?e.geometry:e,O=E?E.type==="GeometryCollection":!1,o=O?E.geometries.length:1;for(var se=0;se<o;se++){var ae=0,fe=0;if(m=O?E.geometries[se]:E,m!==null){w=m.coordinates;var Fe=m.type;switch(I=0,Fe){case null:break;case"Point":if(n(w,D,Z,ae,fe)===!1)return!1;D++,ae++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(n(w[a],D,Z,ae,fe)===!1)return!1;D++,Fe==="MultiPoint"&&ae++}Fe==="LineString"&&ae++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(u=0;u<w[a].length-I;u++){if(n(w[a][u],D,Z,ae,fe)===!1)return!1;D++}Fe==="MultiLineString"&&ae++,Fe==="Polygon"&&fe++}Fe==="Polygon"&&ae++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(fe=0,u=0;u<w[a].length;u++){for(f=0;f<w[a][u].length-I;f++){if(n(w[a][u][f],D,Z,ae,fe)===!1)return!1;D++}fe++}ae++}break;case"GeometryCollection":for(a=0;a<m.geometries.length;a++)if(HF(m.geometries[a],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function j6(e,n={}){if(e.bbox!=null&&n.recompute!==!0)return e.bbox;const i=[1/0,1/0,-1/0,-1/0];return HF(e,a=>{i[0]>a[0]&&(i[0]=a[0]),i[1]>a[1]&&(i[1]=a[1]),i[2]<a[0]&&(i[2]=a[0]),i[3]<a[1]&&(i[3]=a[1])}),i}var V6=j6;const G6="/Domapus/",u1=["#FFF9B0","#FFEB84","#FFD166","#FF9A56","#E84C61","#C13584","#7B2E8D","#2E0B59"];function K2(e,n){if(!e)return 0;const i=e[n];return typeof i=="number"&&isFinite(i)?i:0}function K6(e,n=8){const i=[...e].filter(w=>w>0).sort((w,E)=>w-E);if(i.length===0)return[];const a=i[0],u=i[i.length-1];if(a===u)return[a];const f=[],m=(u-a)*1e-6||1e-6,o=w=>i[Math.floor(w*(i.length-1))];for(let w=1;w<n;w++){let E=o(w/n);f.length&&E<=f[f.length-1]&&(E=f[f.length-1]+m),f.push(E)}return f}const q6=e=>({median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"})[e]||e.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" "),$6=()=>new Date(new Date().setMonth(new Date().getMonth()-1)).toLocaleDateString("en-US",{month:"long",year:"numeric"}),jF=te.forwardRef(({filteredData:e,selectedMetric:n,regionScope:i,regionName:a,includeLegend:u,includeTitle:f,onReady:m},o)=>{const w=te.useRef(null),E=te.useRef(null),I=te.useRef(null),D=te.useRef(null),O=te.useRef({});te.useImperativeHandle(o,()=>({getElement:()=>w.current}));const P=te.useMemo(()=>{const ae={};return e.forEach(fe=>{ae[fe.zipCode]=fe}),ae},[e]),W=te.useMemo(()=>{const ae=e.map(fe=>K2(fe,n));return K6(ae)},[e,n]),H=te.useMemo(()=>e.map(ae=>ae[n]).filter(ae=>typeof ae=="number"&&ae>0),[e,n]),{alaskaZips:z,hawaiiZips:Z}=te.useMemo(()=>{if(i!=="national")return{alaskaZips:new Set,hawaiiZips:new Set};const ae=new Set,fe=new Set;return e.forEach(Fe=>{Fe.state==="Alaska"?ae.add(Fe.zipCode):Fe.state==="Hawaii"&&fe.add(Fe.zipCode)}),{alaskaZips:ae,hawaiiZips:fe}},[e,i]),se=te.useMemo(()=>{if(i==="national")return null;const ae=e.filter(rt=>rt.latitude&&rt.longitude);if(ae.length===0)return null;const fe=ae.map(rt=>z6([rt.longitude,rt.latitude])),Fe=H6(fe);let[He,Ve,Oe,be]=V6(Fe);return He===Oe&&(He-=.1,Oe+=.1),Ve===be&&(Ve-=.1,be+=.1),{bounds:[[He,Ve],[Oe,be]],center:[(He+Oe)/2,(Ve+be)/2]}},[e,i]);return te.useEffect(()=>{if(OF(),Object.keys(O.current).forEach(be=>{O.current[be]?.remove(),O.current[be]=null}),e.length===0){m&&m();return}const ae=new URL(`${G6}data/us_zip_codes.pmtiles`,window.location.origin).href,fe=["step",["coalesce",["feature-state","metricValue"],0],"transparent",.001,u1[0],...W.flatMap((be,rt)=>[be,u1[Math.min(rt+1,u1.length-1)]])];let Fe=0;const He=i==="national"?1+(z.size>0?1:0)+(Z.size>0?1:0):1,Ve=()=>{Fe++,Fe>=He&&m&&m()},Oe=(be,rt,ue,me,Ue)=>{if(!be)return null;const Ie=new sp.Map({container:be,style:{version:8,sources:{},layers:[{id:"bg",type:"background",paint:{"background-color":"#ffffffff"}}]},center:ue,zoom:me,interactive:!1,attributionControl:!1,canvasContextAttributes:{preserveDrawingBuffer:!0}});return O.current[rt]=Ie,Ie.on("load",()=>{Ue&&Ie.fitBounds(Ue,{padding:40,maxZoom:10}),Ie.addSource("zips",{type:"vector",url:`pmtiles://${ae}`,promoteId:"ZCTA5CE20"}),Ie.addLayer({id:"zips-fill",type:"fill",source:"zips","source-layer":"us_zip_codes",paint:{"fill-color":fe,"fill-opacity":.85}}),Ie.addLayer({id:"zips-border",type:"line",source:"zips","source-layer":"us_zip_codes",paint:{"line-color":"rgba(0,0,0,0.12)","line-width":.5}}),Ie.once("idle",()=>{Object.entries(P).forEach(([pt,lt])=>{const ot=K2(lt,n);Ie.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:pt},{metricValue:ot})}),Ie.triggerRepaint(),Ie.once("idle",Ve)})}),Ie};if(i==="national")Oe(E.current,"main",[-98.5,39.5],3.8),z.size>0&&Oe(I.current,"alaska",[-152,64],2.8),Z.size>0&&Oe(D.current,"hawaii",[-157,21],5.5);else{const be=se?.bounds,rt=se?.center||[-98.5,39.5];Oe(E.current,"main",rt,5,be)}return()=>{Object.keys(O.current).forEach(be=>{O.current[be]?.remove(),O.current[be]=null})}},[e,n,i,W,P,z,Z,se,m]),ce.jsxs("div",{ref:w,className:"w-full h-full bg-white flex flex-col",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:[ce.jsxs("div",{className:"flex items-start justify-between px-6 pt-5 pb-3",children:[f&&ce.jsxs("div",{children:[ce.jsxs("h1",{className:"text-2xl font-bold text-gray-900 leading-tight",children:[q6(n)," by ZIP Code"]}),ce.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[a,"  ",$6()]})]}),ce.jsxs("div",{className:"text-right flex-shrink-0",children:[ce.jsx(Q6,{size:"sm",className:"justify-end"}),ce.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Data: Redfin"})]})]}),ce.jsx("div",{className:"flex-1 mx-6 mb-4 relative bg-gray-50 rounded-lg overflow-hidden border border-gray-200",children:e.length>0?ce.jsxs(ce.Fragment,{children:[ce.jsx("div",{ref:E,className:"absolute inset-0"}),i==="national"&&ce.jsxs("div",{className:"absolute bottom-4 left-4 flex gap-2 z-10",children:[z.size>0&&ce.jsx("div",{className:"w-40 h-28 border border-gray-300 rounded bg-white overflow-hidden shadow-sm",children:ce.jsx("div",{ref:I,className:"w-full h-full"})}),Z.size>0&&ce.jsx("div",{className:"w-32 h-24 border border-gray-300 rounded bg-white overflow-hidden shadow-sm",children:ce.jsx("div",{ref:D,className:"w-full h-full"})})]}),u&&ce.jsx("div",{className:"absolute bottom-4 right-4 w-56 z-10",children:ce.jsx(zF,{selectedMetric:n,metricValues:H,isExport:!0})})]}):ce.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-lg",children:"No data to display"})})]})});jF.displayName="PrintStage";var Q_=function(e,n){return Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},Q_(e,n)};function Lu(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Q_(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var O_=function(){return O_=Object.assign||function(n){for(var i,a=1,u=arguments.length;a<u;a++){i=arguments[a];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(n[f]=i[f])}return n},O_.apply(this,arguments)};function bc(e,n,i,a){function u(f){return f instanceof i?f:new i(function(m){m(f)})}return new(i||(i=Promise))(function(f,m){function o(I){try{E(a.next(I))}catch(D){m(D)}}function w(I){try{E(a.throw(I))}catch(D){m(D)}}function E(I){I.done?f(I.value):u(I.value).then(o,w)}E((a=a.apply(e,[])).next())})}function Yl(e,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,m;return m={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function o(E){return function(I){return w([E,I])}}function w(E){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,u&&(f=E[0]&2?u.return:E[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,E[1])).done)return f;switch(u=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,u=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){i.label=E[1];break}if(E[0]===6&&i.label<f[1]){i.label=f[1],f=E;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(E);break}f[2]&&i.ops.pop(),i.trys.pop();continue}E=n.call(e,i)}catch(I){E=[6,I],u=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}function Wg(e,n,i){if(arguments.length===2)for(var a=0,u=n.length,f;a<u;a++)(f||!(a in n))&&(f||(f=Array.prototype.slice.call(n,0,a)),f[a]=n[a]);return e.concat(f||n)}var zh=(function(){function e(n,i,a,u){this.left=n,this.top=i,this.width=a,this.height=u}return e.prototype.add=function(n,i,a,u){return new e(this.left+n,this.top+i,this.width+a,this.height+u)},e.fromClientRect=function(n,i){return new e(i.left+n.windowBounds.left,i.top+n.windowBounds.top,i.width,i.height)},e.fromDOMRectList=function(n,i){var a=Array.from(i).find(function(u){return u.width!==0});return a?new e(a.left+n.windowBounds.left,a.top+n.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e})(),Oy=function(e,n){return zh.fromClientRect(e,n.getBoundingClientRect())},W6=function(e){var n=e.body,i=e.documentElement;if(!n||!i)throw new Error("Unable to get document size");var a=Math.max(Math.max(n.scrollWidth,i.scrollWidth),Math.max(n.offsetWidth,i.offsetWidth),Math.max(n.clientWidth,i.clientWidth)),u=Math.max(Math.max(n.scrollHeight,i.scrollHeight),Math.max(n.offsetHeight,i.offsetHeight),Math.max(n.clientHeight,i.clientHeight));return new zh(0,0,a,u)},zy=function(e){for(var n=[],i=0,a=e.length;i<a;){var u=e.charCodeAt(i++);if(u>=55296&&u<=56319&&i<a){var f=e.charCodeAt(i++);(f&64512)===56320?n.push(((u&1023)<<10)+(f&1023)+65536):(n.push(u),i--)}else n.push(u)}return n},Mo=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var a=[],u=-1,f="";++u<i;){var m=e[u];m<=65535?a.push(m):(m-=65536,a.push((m>>10)+55296,m%1024+56320)),(u+1===i||a.length>16384)&&(f+=String.fromCharCode.apply(String,a),a.length=0)}return f},q2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zg=0;Zg<q2.length;Zg++)Z6[q2.charCodeAt(Zg)]=Zg;var $2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xg=0;Xg<$2.length;Xg++)mm[$2.charCodeAt(Xg)]=Xg;var X6=function(e){var n=e.length*.75,i=e.length,a,u=0,f,m,o,w;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),I=Array.isArray(E)?E:new Uint8Array(E);for(a=0;a<i;a+=4)f=mm[e.charCodeAt(a)],m=mm[e.charCodeAt(a+1)],o=mm[e.charCodeAt(a+2)],w=mm[e.charCodeAt(a+3)],I[u++]=f<<2|m>>4,I[u++]=(m&15)<<4|o>>2,I[u++]=(o&3)<<6|w&63;return E},Y6=function(e){for(var n=e.length,i=[],a=0;a<n;a+=2)i.push(e[a+1]<<8|e[a]);return i},J6=function(e){for(var n=e.length,i=[],a=0;a<n;a+=4)i.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return i},ed=5,tx=11,h1=2,eN=tx-ed,VF=65536>>ed,tN=1<<ed,f1=tN-1,rN=1024>>ed,nN=VF+rN,iN=nN,sN=32,oN=iN+sN,aN=65536>>tx,lN=1<<eN,cN=lN-1,W2=function(e,n,i){return e.slice?e.slice(n,i):new Uint16Array(Array.prototype.slice.call(e,n,i))},AN=function(e,n,i){return e.slice?e.slice(n,i):new Uint32Array(Array.prototype.slice.call(e,n,i))},uN=function(e,n){var i=X6(e),a=Array.isArray(i)?J6(i):new Uint32Array(i),u=Array.isArray(i)?Y6(i):new Uint16Array(i),f=24,m=W2(u,f/2,a[4]/2),o=a[5]===2?W2(u,(f+a[4])/2):AN(a,Math.ceil((f+a[4])/4));return new hN(a[0],a[1],a[2],a[3],m,o)},hN=(function(){function e(n,i,a,u,f,m){this.initialValue=n,this.errorValue=i,this.highStart=a,this.highValueIndex=u,this.index=f,this.data=m}return e.prototype.get=function(n){var i;if(n>=0){if(n<55296||n>56319&&n<=65535)return i=this.index[n>>ed],i=(i<<h1)+(n&f1),this.data[i];if(n<=65535)return i=this.index[VF+(n-55296>>ed)],i=(i<<h1)+(n&f1),this.data[i];if(n<this.highStart)return i=oN-aN+(n>>tx),i=this.index[i],i+=n>>ed&cN,i=this.index[i],i=(i<<h1)+(n&f1),this.data[i];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),Z2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fN=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yg=0;Yg<Z2.length;Yg++)fN[Z2.charCodeAt(Yg)]=Yg;var dN="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",X2=50,pN=1,GF=2,KF=3,mN=4,gN=5,Y2=7,qF=8,J2=9,ff=10,z_=11,eB=12,H_=13,yN=14,gm=15,j_=16,Jg=17,cm=18,vN=19,tB=20,V_=21,Am=22,d1=23,Hd=24,BA=25,ym=26,vm=27,jd=28,_N=29,Xf=30,wN=31,e0=32,t0=33,G_=34,K_=35,q_=36,Om=37,$_=38,U0=39,D0=40,p1=41,$F=42,xN=43,bN=[9001,65288],WF="!",fi="",r0="",W_=uN(dN),kh=[Xf,q_],Z_=[pN,GF,KF,gN],ZF=[ff,qF],rB=[vm,ym],BN=Z_.concat(ZF),nB=[$_,U0,D0,G_,K_],CN=[gm,H_],EN=function(e,n){n===void 0&&(n="strict");var i=[],a=[],u=[];return e.forEach(function(f,m){var o=W_.get(f);if(o>X2?(u.push(!0),o-=X2):u.push(!1),["normal","auto","loose"].indexOf(n)!==-1&&[8208,8211,12316,12448].indexOf(f)!==-1)return a.push(m),i.push(j_);if(o===mN||o===z_){if(m===0)return a.push(m),i.push(Xf);var w=i[m-1];return BN.indexOf(w)===-1?(a.push(a[m-1]),i.push(w)):(a.push(m),i.push(Xf))}if(a.push(m),o===wN)return i.push(n==="strict"?V_:Om);if(o===$F||o===_N)return i.push(Xf);if(o===xN)return f>=131072&&f<=196605||f>=196608&&f<=262141?i.push(Om):i.push(Xf);i.push(o)}),[a,i,u]},m1=function(e,n,i,a){var u=a[i];if(Array.isArray(e)?e.indexOf(u)!==-1:e===u)for(var f=i;f<=a.length;){f++;var m=a[f];if(m===n)return!0;if(m!==ff)break}if(u===ff)for(var f=i;f>0;){f--;var o=a[f];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var w=i;w<=a.length;){w++;var m=a[w];if(m===n)return!0;if(m!==ff)break}if(o!==ff)break}return!1},iB=function(e,n){for(var i=e;i>=0;){var a=n[i];if(a===ff)i--;else return a}return 0},SN=function(e,n,i,a,u){if(i[a]===0)return fi;var f=a-1;if(Array.isArray(u)&&u[f]===!0)return fi;var m=f-1,o=f+1,w=n[f],E=m>=0?n[m]:0,I=n[o];if(w===GF&&I===KF)return fi;if(Z_.indexOf(w)!==-1)return WF;if(Z_.indexOf(I)!==-1||ZF.indexOf(I)!==-1)return fi;if(iB(f,n)===qF)return r0;if(W_.get(e[f])===z_||(w===e0||w===t0)&&W_.get(e[o])===z_||w===Y2||I===Y2||w===J2||[ff,H_,gm].indexOf(w)===-1&&I===J2||[Jg,cm,vN,Hd,jd].indexOf(I)!==-1||iB(f,n)===Am||m1(d1,Am,f,n)||m1([Jg,cm],V_,f,n)||m1(eB,eB,f,n))return fi;if(w===ff)return r0;if(w===d1||I===d1)return fi;if(I===j_||w===j_)return r0;if([H_,gm,V_].indexOf(I)!==-1||w===yN||E===q_&&CN.indexOf(w)!==-1||w===jd&&I===q_||I===tB||kh.indexOf(I)!==-1&&w===BA||kh.indexOf(w)!==-1&&I===BA||w===vm&&[Om,e0,t0].indexOf(I)!==-1||[Om,e0,t0].indexOf(w)!==-1&&I===ym||kh.indexOf(w)!==-1&&rB.indexOf(I)!==-1||rB.indexOf(w)!==-1&&kh.indexOf(I)!==-1||[vm,ym].indexOf(w)!==-1&&(I===BA||[Am,gm].indexOf(I)!==-1&&n[o+1]===BA)||[Am,gm].indexOf(w)!==-1&&I===BA||w===BA&&[BA,jd,Hd].indexOf(I)!==-1)return fi;if([BA,jd,Hd,Jg,cm].indexOf(I)!==-1)for(var D=f;D>=0;){var O=n[D];if(O===BA)return fi;if([jd,Hd].indexOf(O)!==-1)D--;else break}if([vm,ym].indexOf(I)!==-1)for(var D=[Jg,cm].indexOf(w)!==-1?m:f;D>=0;){var O=n[D];if(O===BA)return fi;if([jd,Hd].indexOf(O)!==-1)D--;else break}if($_===w&&[$_,U0,G_,K_].indexOf(I)!==-1||[U0,G_].indexOf(w)!==-1&&[U0,D0].indexOf(I)!==-1||[D0,K_].indexOf(w)!==-1&&I===D0||nB.indexOf(w)!==-1&&[tB,ym].indexOf(I)!==-1||nB.indexOf(I)!==-1&&w===vm||kh.indexOf(w)!==-1&&kh.indexOf(I)!==-1||w===Hd&&kh.indexOf(I)!==-1||kh.concat(BA).indexOf(w)!==-1&&I===Am&&bN.indexOf(e[o])===-1||kh.concat(BA).indexOf(I)!==-1&&w===cm)return fi;if(w===p1&&I===p1){for(var P=i[f],W=1;P>0&&(P--,n[P]===p1);)W++;if(W%2!==0)return fi}return w===e0&&I===t0?fi:r0},FN=function(e,n){n||(n={lineBreak:"normal",wordBreak:"normal"});var i=EN(e,n.lineBreak),a=i[0],u=i[1],f=i[2];(n.wordBreak==="break-all"||n.wordBreak==="break-word")&&(u=u.map(function(o){return[BA,Xf,$F].indexOf(o)!==-1?Om:o}));var m=n.wordBreak==="keep-all"?f.map(function(o,w){return o&&e[w]>=19968&&e[w]<=40959}):void 0;return[a,u,m]},IN=(function(){function e(n,i,a,u){this.codePoints=n,this.required=i===WF,this.start=a,this.end=u}return e.prototype.slice=function(){return Mo.apply(void 0,this.codePoints.slice(this.start,this.end))},e})(),TN=function(e,n){var i=zy(e),a=FN(i,n),u=a[0],f=a[1],m=a[2],o=i.length,w=0,E=0;return{next:function(){if(E>=o)return{done:!0,value:null};for(var I=fi;E<o&&(I=SN(i,f,u,++E,m))===fi;);if(I!==fi||E===o){var D=new IN(i,I,w,E);return w=E,{value:D,done:!1}}return{done:!0,value:null}}}},PN=1,LN=2,Jm=4,sB=8,J0=10,oB=47,Sm=92,MN=9,kN=32,n0=34,um=61,UN=35,DN=36,RN=37,i0=39,s0=40,hm=41,NN=95,eA=45,QN=33,ON=60,zN=62,HN=64,jN=91,VN=93,GN=61,KN=123,o0=63,qN=125,aB=124,$N=126,WN=128,lB=65533,g1=42,Jf=43,ZN=44,XN=58,YN=59,zm=46,JN=0,eQ=8,tQ=11,rQ=14,nQ=31,iQ=127,Zu=-1,XF=48,YF=97,JF=101,sQ=102,oQ=117,aQ=122,e4=65,t4=69,r4=70,lQ=85,cQ=90,Jl=function(e){return e>=XF&&e<=57},AQ=function(e){return e>=55296&&e<=57343},Vd=function(e){return Jl(e)||e>=e4&&e<=r4||e>=YF&&e<=sQ},uQ=function(e){return e>=YF&&e<=aQ},hQ=function(e){return e>=e4&&e<=cQ},fQ=function(e){return uQ(e)||hQ(e)},dQ=function(e){return e>=WN},a0=function(e){return e===J0||e===MN||e===kN},ey=function(e){return fQ(e)||dQ(e)||e===NN},cB=function(e){return ey(e)||Jl(e)||e===eA},pQ=function(e){return e>=JN&&e<=eQ||e===tQ||e>=rQ&&e<=nQ||e===iQ},uf=function(e,n){return e!==Sm?!1:n!==J0},l0=function(e,n,i){return e===eA?ey(n)||uf(n,i):ey(e)?!0:!!(e===Sm&&uf(e,n))},y1=function(e,n,i){return e===Jf||e===eA?Jl(n)?!0:n===zm&&Jl(i):Jl(e===zm?n:e)},mQ=function(e){var n=0,i=1;(e[n]===Jf||e[n]===eA)&&(e[n]===eA&&(i=-1),n++);for(var a=[];Jl(e[n]);)a.push(e[n++]);var u=a.length?parseInt(Mo.apply(void 0,a),10):0;e[n]===zm&&n++;for(var f=[];Jl(e[n]);)f.push(e[n++]);var m=f.length,o=m?parseInt(Mo.apply(void 0,f),10):0;(e[n]===t4||e[n]===JF)&&n++;var w=1;(e[n]===Jf||e[n]===eA)&&(e[n]===eA&&(w=-1),n++);for(var E=[];Jl(e[n]);)E.push(e[n++]);var I=E.length?parseInt(Mo.apply(void 0,E),10):0;return i*(u+o*Math.pow(10,-m))*Math.pow(10,w*I)},gQ={type:2},yQ={type:3},vQ={type:4},_Q={type:13},wQ={type:8},xQ={type:21},bQ={type:9},BQ={type:10},CQ={type:11},EQ={type:12},SQ={type:14},c0={type:23},FQ={type:1},IQ={type:25},TQ={type:24},PQ={type:26},LQ={type:27},MQ={type:28},kQ={type:29},UQ={type:31},X_={type:32},n4=(function(){function e(){this._value=[]}return e.prototype.write=function(n){this._value=this._value.concat(zy(n))},e.prototype.read=function(){for(var n=[],i=this.consumeToken();i!==X_;)n.push(i),i=this.consumeToken();return n},e.prototype.consumeToken=function(){var n=this.consumeCodePoint();switch(n){case n0:return this.consumeStringToken(n0);case UN:var i=this.peekCodePoint(0),a=this.peekCodePoint(1),u=this.peekCodePoint(2);if(cB(i)||uf(a,u)){var f=l0(i,a,u)?LN:PN,m=this.consumeName();return{type:5,value:m,flags:f}}break;case DN:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),_Q;break;case i0:return this.consumeStringToken(i0);case s0:return gQ;case hm:return yQ;case g1:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),SQ;break;case Jf:if(y1(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case ZN:return vQ;case eA:var o=n,w=this.peekCodePoint(0),E=this.peekCodePoint(1);if(y1(o,w,E))return this.reconsumeCodePoint(n),this.consumeNumericToken();if(l0(o,w,E))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();if(w===eA&&E===zN)return this.consumeCodePoint(),this.consumeCodePoint(),TQ;break;case zm:if(y1(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case oB:if(this.peekCodePoint(0)===g1)for(this.consumeCodePoint();;){var I=this.consumeCodePoint();if(I===g1&&(I=this.consumeCodePoint(),I===oB))return this.consumeToken();if(I===Zu)return this.consumeToken()}break;case XN:return PQ;case YN:return LQ;case ON:if(this.peekCodePoint(0)===QN&&this.peekCodePoint(1)===eA&&this.peekCodePoint(2)===eA)return this.consumeCodePoint(),this.consumeCodePoint(),IQ;break;case HN:var D=this.peekCodePoint(0),O=this.peekCodePoint(1),P=this.peekCodePoint(2);if(l0(D,O,P)){var m=this.consumeName();return{type:7,value:m}}break;case jN:return MQ;case Sm:if(uf(n,this.peekCodePoint(0)))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();break;case VN:return kQ;case GN:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),wQ;break;case KN:return CQ;case qN:return EQ;case oQ:case lQ:var W=this.peekCodePoint(0),H=this.peekCodePoint(1);return W===Jf&&(Vd(H)||H===o0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(n),this.consumeIdentLikeToken();case aB:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),bQ;if(this.peekCodePoint(0)===aB)return this.consumeCodePoint(),xQ;break;case $N:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),BQ;break;case Zu:return X_}return a0(n)?(this.consumeWhiteSpace(),UQ):Jl(n)?(this.reconsumeCodePoint(n),this.consumeNumericToken()):ey(n)?(this.reconsumeCodePoint(n),this.consumeIdentLikeToken()):{type:6,value:Mo(n)}},e.prototype.consumeCodePoint=function(){var n=this._value.shift();return typeof n>"u"?-1:n},e.prototype.reconsumeCodePoint=function(n){this._value.unshift(n)},e.prototype.peekCodePoint=function(n){return n>=this._value.length?-1:this._value[n]},e.prototype.consumeUnicodeRangeToken=function(){for(var n=[],i=this.consumeCodePoint();Vd(i)&&n.length<6;)n.push(i),i=this.consumeCodePoint();for(var a=!1;i===o0&&n.length<6;)n.push(i),i=this.consumeCodePoint(),a=!0;if(a){var u=parseInt(Mo.apply(void 0,n.map(function(w){return w===o0?XF:w})),16),f=parseInt(Mo.apply(void 0,n.map(function(w){return w===o0?r4:w})),16);return{type:30,start:u,end:f}}var m=parseInt(Mo.apply(void 0,n),16);if(this.peekCodePoint(0)===eA&&Vd(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var o=[];Vd(i)&&o.length<6;)o.push(i),i=this.consumeCodePoint();var f=parseInt(Mo.apply(void 0,o),16);return{type:30,start:m,end:f}}else return{type:30,start:m,end:m}},e.prototype.consumeIdentLikeToken=function(){var n=this.consumeName();return n.toLowerCase()==="url"&&this.peekCodePoint(0)===s0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===s0?(this.consumeCodePoint(),{type:19,value:n}):{type:20,value:n}},e.prototype.consumeUrlToken=function(){var n=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===i0||i===n0){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu||this.peekCodePoint(0)===hm)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),c0)}for(;;){var u=this.consumeCodePoint();if(u===Zu||u===hm)return{type:22,value:Mo.apply(void 0,n)};if(a0(u))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu||this.peekCodePoint(0)===hm?(this.consumeCodePoint(),{type:22,value:Mo.apply(void 0,n)}):(this.consumeBadUrlRemnants(),c0);if(u===n0||u===i0||u===s0||pQ(u))return this.consumeBadUrlRemnants(),c0;if(u===Sm)if(uf(u,this.peekCodePoint(0)))n.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),c0;else n.push(u)}},e.prototype.consumeWhiteSpace=function(){for(;a0(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var n=this.consumeCodePoint();if(n===hm||n===Zu)return;uf(n,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(n){for(var i=5e4,a="";n>0;){var u=Math.min(i,n);a+=Mo.apply(void 0,this._value.splice(0,u)),n-=u}return this._value.shift(),a},e.prototype.consumeStringToken=function(n){var i="",a=0;do{var u=this._value[a];if(u===Zu||u===void 0||u===n)return i+=this.consumeStringSlice(a),{type:0,value:i};if(u===J0)return this._value.splice(0,a),FQ;if(u===Sm){var f=this._value[a+1];f!==Zu&&f!==void 0&&(f===J0?(i+=this.consumeStringSlice(a),a=-1,this._value.shift()):uf(u,f)&&(i+=this.consumeStringSlice(a),i+=Mo(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var n=[],i=Jm,a=this.peekCodePoint(0);for((a===Jf||a===eA)&&n.push(this.consumeCodePoint());Jl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());a=this.peekCodePoint(0);var u=this.peekCodePoint(1);if(a===zm&&Jl(u))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),i=sB;Jl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());a=this.peekCodePoint(0),u=this.peekCodePoint(1);var f=this.peekCodePoint(2);if((a===t4||a===JF)&&((u===Jf||u===eA)&&Jl(f)||Jl(u)))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),i=sB;Jl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());return[mQ(n),i]},e.prototype.consumeNumericToken=function(){var n=this.consumeNumber(),i=n[0],a=n[1],u=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(l0(u,f,m)){var o=this.consumeName();return{type:15,number:i,flags:a,unit:o}}return u===RN?(this.consumeCodePoint(),{type:16,number:i,flags:a}):{type:17,number:i,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var n=this.consumeCodePoint();if(Vd(n)){for(var i=Mo(n);Vd(this.peekCodePoint(0))&&i.length<6;)i+=Mo(this.consumeCodePoint());a0(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(i,16);return a===0||AQ(a)||a>1114111?lB:a}return n===Zu?lB:n},e.prototype.consumeName=function(){for(var n="";;){var i=this.consumeCodePoint();if(cB(i))n+=Mo(i);else if(uf(i,this.peekCodePoint(0)))n+=Mo(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),n}},e})(),i4=(function(){function e(n){this._tokens=n}return e.create=function(n){var i=new n4;return i.write(n),new e(i.read())},e.parseValue=function(n){return e.create(n).parseComponentValue()},e.parseValues=function(n){return e.create(n).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var n=this.consumeToken();n.type===31;)n=this.consumeToken();if(n.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(n);var i=this.consumeComponentValue();do n=this.consumeToken();while(n.type===31);if(n.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var n=[];;){var i=this.consumeComponentValue();if(i.type===32)return n;n.push(i),n.push()}},e.prototype.consumeComponentValue=function(){var n=this.consumeToken();switch(n.type){case 11:case 28:case 2:return this.consumeSimpleBlock(n.type);case 19:return this.consumeFunction(n)}return n},e.prototype.consumeSimpleBlock=function(n){for(var i={type:n,values:[]},a=this.consumeToken();;){if(a.type===32||RQ(a,n))return i;this.reconsumeToken(a),i.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(n){for(var i={name:n.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return i;this.reconsumeToken(a),i.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var n=this._tokens.shift();return typeof n>"u"?X_:n},e.prototype.reconsumeToken=function(n){this._tokens.unshift(n)},e})(),eg=function(e){return e.type===15},Ep=function(e){return e.type===17},us=function(e){return e.type===20},DQ=function(e){return e.type===0},Y_=function(e,n){return us(e)&&e.value===n},s4=function(e){return e.type!==31},vp=function(e){return e.type!==31&&e.type!==4},oh=function(e){var n=[],i=[];return e.forEach(function(a){if(a.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");n.push(i),i=[];return}a.type!==31&&i.push(a)}),i.length&&n.push(i),n},RQ=function(e,n){return n===11&&e.type===12||n===28&&e.type===29?!0:n===2&&e.type===3},Bf=function(e){return e.type===17||e.type===15},oa=function(e){return e.type===16||Bf(e)},o4=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Bl={type:17,number:0,flags:Jm},rx={type:16,number:50,flags:Jm},df={type:16,number:100,flags:Jm},_m=function(e,n,i){var a=e[0],u=e[1];return[Ms(a,n),Ms(typeof u<"u"?u:a,i)]},Ms=function(e,n){if(e.type===16)return e.number/100*n;if(eg(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},a4="deg",l4="grad",c4="rad",A4="turn",Hy={name:"angle",parse:function(e,n){if(n.type===15)switch(n.unit){case a4:return Math.PI*n.number/180;case l4:return Math.PI/200*n.number;case c4:return n.number;case A4:return Math.PI*2*n.number}throw new Error("Unsupported angle type")}},u4=function(e){return e.type===15&&(e.unit===a4||e.unit===l4||e.unit===c4||e.unit===A4)},h4=function(e){var n=e.filter(us).map(function(i){return i.value}).join(" ");switch(n){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Bl,Bl];case"to top":case"bottom":return ru(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Bl,df];case"to right":case"left":return ru(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[df,df];case"to bottom":case"top":return ru(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[df,Bl];case"to left":case"right":return ru(270)}return 0},ru=function(e){return Math.PI*e/180},vf={name:"color",parse:function(e,n){if(n.type===18){var i=NQ[n.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+n.name+'"');return i(e,n.values)}if(n.type===5){if(n.value.length===3){var a=n.value.substring(0,1),u=n.value.substring(1,2),f=n.value.substring(2,3);return pf(parseInt(a+a,16),parseInt(u+u,16),parseInt(f+f,16),1)}if(n.value.length===4){var a=n.value.substring(0,1),u=n.value.substring(1,2),f=n.value.substring(2,3),m=n.value.substring(3,4);return pf(parseInt(a+a,16),parseInt(u+u,16),parseInt(f+f,16),parseInt(m+m,16)/255)}if(n.value.length===6){var a=n.value.substring(0,2),u=n.value.substring(2,4),f=n.value.substring(4,6);return pf(parseInt(a,16),parseInt(u,16),parseInt(f,16),1)}if(n.value.length===8){var a=n.value.substring(0,2),u=n.value.substring(2,4),f=n.value.substring(4,6),m=n.value.substring(6,8);return pf(parseInt(a,16),parseInt(u,16),parseInt(f,16),parseInt(m,16)/255)}}if(n.type===20){var o=Nh[n.value.toUpperCase()];if(typeof o<"u")return o}return Nh.TRANSPARENT}},_f=function(e){return(255&e)===0},tl=function(e){var n=255&e,i=255&e>>8,a=255&e>>16,u=255&e>>24;return n<255?"rgba("+u+","+a+","+i+","+n/255+")":"rgb("+u+","+a+","+i+")"},pf=function(e,n,i,a){return(e<<24|n<<16|i<<8|Math.round(a*255)<<0)>>>0},AB=function(e,n){if(e.type===17)return e.number;if(e.type===16){var i=n===3?1:255;return n===3?e.number/100*i:Math.round(e.number/100*i)}return 0},uB=function(e,n){var i=n.filter(vp);if(i.length===3){var a=i.map(AB),u=a[0],f=a[1],m=a[2];return pf(u,f,m,1)}if(i.length===4){var o=i.map(AB),u=o[0],f=o[1],m=o[2],w=o[3];return pf(u,f,m,w)}return 0};function v1(e,n,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(n-e)*i*6+e:i<1/2?n:i<2/3?(n-e)*6*(2/3-i)+e:e}var hB=function(e,n){var i=n.filter(vp),a=i[0],u=i[1],f=i[2],m=i[3],o=(a.type===17?ru(a.number):Hy.parse(e,a))/(Math.PI*2),w=oa(u)?u.number/100:0,E=oa(f)?f.number/100:0,I=typeof m<"u"&&oa(m)?Ms(m,1):1;if(w===0)return pf(E*255,E*255,E*255,1);var D=E<=.5?E*(w+1):E+w-E*w,O=E*2-D,P=v1(O,D,o+1/3),W=v1(O,D,o),H=v1(O,D,o-1/3);return pf(P*255,W*255,H*255,I)},NQ={hsl:hB,hsla:hB,rgb:uB,rgba:uB},Fm=function(e,n){return vf.parse(e,i4.create(n).parseComponentValue())},Nh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},QQ={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(i){if(us(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},OQ={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},jy=function(e,n){var i=vf.parse(e,n[0]),a=n[1];return a&&oa(a)?{color:i,stop:a}:{color:i,stop:null}},fB=function(e,n){var i=e[0],a=e[e.length-1];i.stop===null&&(i.stop=Bl),a.stop===null&&(a.stop=df);for(var u=[],f=0,m=0;m<e.length;m++){var o=e[m].stop;if(o!==null){var w=Ms(o,n);w>f?u.push(w):u.push(f),f=w}else u.push(null)}for(var E=null,m=0;m<u.length;m++){var I=u[m];if(I===null)E===null&&(E=m);else if(E!==null){for(var D=m-E,O=u[E-1],P=(I-O)/(D+1),W=1;W<=D;W++)u[E+W-1]=P*W;E=null}}return e.map(function(H,z){var Z=H.color;return{color:Z,stop:Math.max(Math.min(1,u[z]/n),0)}})},zQ=function(e,n,i){var a=n/2,u=i/2,f=Ms(e[0],n)-a,m=u-Ms(e[1],i);return(Math.atan2(m,f)+Math.PI*2)%(Math.PI*2)},HQ=function(e,n,i){var a=typeof e=="number"?e:zQ(e,n,i),u=Math.abs(n*Math.sin(a))+Math.abs(i*Math.cos(a)),f=n/2,m=i/2,o=u/2,w=Math.sin(a-Math.PI/2)*o,E=Math.cos(a-Math.PI/2)*o;return[u,f-E,f+E,m-w,m+w]},Su=function(e,n){return Math.sqrt(e*e+n*n)},dB=function(e,n,i,a,u){var f=[[0,0],[0,n],[e,0],[e,n]];return f.reduce(function(m,o){var w=o[0],E=o[1],I=Su(i-w,a-E);return(u?I<m.optimumDistance:I>m.optimumDistance)?{optimumCorner:o,optimumDistance:I}:m},{optimumDistance:u?1/0:-1/0,optimumCorner:null}).optimumCorner},jQ=function(e,n,i,a,u){var f=0,m=0;switch(e.size){case 0:e.shape===0?f=m=Math.min(Math.abs(n),Math.abs(n-a),Math.abs(i),Math.abs(i-u)):e.shape===1&&(f=Math.min(Math.abs(n),Math.abs(n-a)),m=Math.min(Math.abs(i),Math.abs(i-u)));break;case 2:if(e.shape===0)f=m=Math.min(Su(n,i),Su(n,i-u),Su(n-a,i),Su(n-a,i-u));else if(e.shape===1){var o=Math.min(Math.abs(i),Math.abs(i-u))/Math.min(Math.abs(n),Math.abs(n-a)),w=dB(a,u,n,i,!0),E=w[0],I=w[1];f=Su(E-n,(I-i)/o),m=o*f}break;case 1:e.shape===0?f=m=Math.max(Math.abs(n),Math.abs(n-a),Math.abs(i),Math.abs(i-u)):e.shape===1&&(f=Math.max(Math.abs(n),Math.abs(n-a)),m=Math.max(Math.abs(i),Math.abs(i-u)));break;case 3:if(e.shape===0)f=m=Math.max(Su(n,i),Su(n,i-u),Su(n-a,i),Su(n-a,i-u));else if(e.shape===1){var o=Math.max(Math.abs(i),Math.abs(i-u))/Math.max(Math.abs(n),Math.abs(n-a)),D=dB(a,u,n,i,!1),E=D[0],I=D[1];f=Su(E-n,(I-i)/o),m=o*f}break}return Array.isArray(e.size)&&(f=Ms(e.size[0],a),m=e.size.length===2?Ms(e.size[1],u):f),[f,m]},VQ=function(e,n){var i=ru(180),a=[];return oh(n).forEach(function(u,f){if(f===0){var m=u[0];if(m.type===20&&m.value==="to"){i=h4(u);return}else if(u4(m)){i=Hy.parse(e,m);return}}var o=jy(e,u);a.push(o)}),{angle:i,stops:a,type:1}},A0=function(e,n){var i=ru(180),a=[];return oh(n).forEach(function(u,f){if(f===0){var m=u[0];if(m.type===20&&["top","left","right","bottom"].indexOf(m.value)!==-1){i=h4(u);return}else if(u4(m)){i=(Hy.parse(e,m)+ru(270))%ru(360);return}}var o=jy(e,u);a.push(o)}),{angle:i,stops:a,type:1}},GQ=function(e,n){var i=ru(180),a=[],u=1,f=0,m=3,o=[];return oh(n).forEach(function(w,E){var I=w[0];if(E===0){if(us(I)&&I.value==="linear"){u=1;return}else if(us(I)&&I.value==="radial"){u=2;return}}if(I.type===18){if(I.name==="from"){var D=vf.parse(e,I.values[0]);a.push({stop:Bl,color:D})}else if(I.name==="to"){var D=vf.parse(e,I.values[0]);a.push({stop:df,color:D})}else if(I.name==="color-stop"){var O=I.values.filter(vp);if(O.length===2){var D=vf.parse(e,O[1]),P=O[0];Ep(P)&&a.push({stop:{type:16,number:P.number*100,flags:P.flags},color:D})}}}}),u===1?{angle:(i+ru(180))%ru(360),stops:a,type:u}:{size:m,shape:f,stops:a,position:o,type:u}},f4="closest-side",d4="farthest-side",p4="closest-corner",m4="farthest-corner",g4="circle",y4="ellipse",v4="cover",_4="contain",KQ=function(e,n){var i=0,a=3,u=[],f=[];return oh(n).forEach(function(m,o){var w=!0;if(o===0){var E=!1;w=m.reduce(function(D,O){if(E)if(us(O))switch(O.value){case"center":return f.push(rx),D;case"top":case"left":return f.push(Bl),D;case"right":case"bottom":return f.push(df),D}else(oa(O)||Bf(O))&&f.push(O);else if(us(O))switch(O.value){case g4:return i=0,!1;case y4:return i=1,!1;case"at":return E=!0,!1;case f4:return a=0,!1;case v4:case d4:return a=1,!1;case _4:case p4:return a=2,!1;case m4:return a=3,!1}else if(Bf(O)||oa(O))return Array.isArray(a)||(a=[]),a.push(O),!1;return D},w)}if(w){var I=jy(e,m);u.push(I)}}),{size:a,shape:i,stops:u,position:f,type:2}},u0=function(e,n){var i=0,a=3,u=[],f=[];return oh(n).forEach(function(m,o){var w=!0;if(o===0?w=m.reduce(function(I,D){if(us(D))switch(D.value){case"center":return f.push(rx),!1;case"top":case"left":return f.push(Bl),!1;case"right":case"bottom":return f.push(df),!1}else if(oa(D)||Bf(D))return f.push(D),!1;return I},w):o===1&&(w=m.reduce(function(I,D){if(us(D))switch(D.value){case g4:return i=0,!1;case y4:return i=1,!1;case _4:case f4:return a=0,!1;case d4:return a=1,!1;case p4:return a=2,!1;case v4:case m4:return a=3,!1}else if(Bf(D)||oa(D))return Array.isArray(a)||(a=[]),a.push(D),!1;return I},w)),w){var E=jy(e,m);u.push(E)}}),{size:a,shape:i,stops:u,position:f,type:2}},qQ=function(e){return e.type===1},$Q=function(e){return e.type===2},nx={name:"image",parse:function(e,n){if(n.type===22){var i={url:n.value,type:0};return e.cache.addImage(n.value),i}if(n.type===18){var a=w4[n.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+n.name+'"');return a(e,n.values)}throw new Error("Unsupported image type "+n.type)}};function WQ(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!w4[e.name])}var w4={"linear-gradient":VQ,"-moz-linear-gradient":A0,"-ms-linear-gradient":A0,"-o-linear-gradient":A0,"-webkit-linear-gradient":A0,"radial-gradient":KQ,"-moz-radial-gradient":u0,"-ms-radial-gradient":u0,"-o-radial-gradient":u0,"-webkit-radial-gradient":u0,"-webkit-gradient":GQ},ZQ={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var i=n[0];return i.type===20&&i.value==="none"?[]:n.filter(function(a){return vp(a)&&WQ(a)}).map(function(a){return nx.parse(e,a)})}},XQ={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(i){if(us(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},YQ={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,n){return oh(n).map(function(i){return i.filter(oa)}).map(o4)}},JQ={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,n){return oh(n).map(function(i){return i.filter(us).map(function(a){return a.value}).join(" ")}).map(eO)}},eO=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},up;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(up||(up={}));var tO={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,n){return oh(n).map(function(i){return i.filter(rO)})}},rO=function(e){return us(e)||oa(e)},Vy=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},nO=Vy("top"),iO=Vy("right"),sO=Vy("bottom"),oO=Vy("left"),Gy=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(n,i){return o4(i.filter(oa))}}},aO=Gy("top-left"),lO=Gy("top-right"),cO=Gy("bottom-right"),AO=Gy("bottom-left"),Ky=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(n,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},uO=Ky("top"),hO=Ky("right"),fO=Ky("bottom"),dO=Ky("left"),qy=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(n,i){return eg(i)?i.number:0}}},pO=qy("top"),mO=qy("right"),gO=qy("bottom"),yO=qy("left"),vO={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_O={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,n){switch(n){case"rtl":return 1;case"ltr":default:return 0}}},wO={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,n){return n.filter(us).reduce(function(i,a){return i|xO(a.value)},0)}},xO=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},bO={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},BO={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,n){return n.type===20&&n.value==="normal"?0:n.type===17||n.type===15?n.number:0}},ty;(function(e){e.NORMAL="normal",e.STRICT="strict"})(ty||(ty={}));var CO={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"strict":return ty.STRICT;case"normal":default:return ty.NORMAL}}},EO={name:"line-height",initialValue:"normal",prefix:!1,type:4},pB=function(e,n){return us(e)&&e.value==="normal"?1.2*n:e.type===17?n*e.number:oa(e)?Ms(e,n):n},SO={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,n){return n.type===20&&n.value==="none"?null:nx.parse(e,n)}},FO={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,n){switch(n){case"inside":return 0;case"outside":default:return 1}}},J_={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},$y=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},IO=$y("top"),TO=$y("right"),PO=$y("bottom"),LO=$y("left"),MO={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,n){return n.filter(us).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},kO={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-word":return"break-word";case"normal":default:return"normal"}}},Wy=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},UO=Wy("top"),DO=Wy("right"),RO=Wy("bottom"),NO=Wy("left"),QO={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,n){switch(n){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},OO={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,n){switch(n){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},zO={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&Y_(n[0],"none")?[]:oh(n).map(function(i){for(var a={color:Nh.TRANSPARENT,offsetX:Bl,offsetY:Bl,blur:Bl},u=0,f=0;f<i.length;f++){var m=i[f];Bf(m)?(u===0?a.offsetX=m:u===1?a.offsetY=m:a.blur=m,u++):a.color=vf.parse(e,m)}return a})}},HO={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},jO={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,n){if(n.type===20&&n.value==="none")return null;if(n.type===18){var i=KO[n.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+n.name+'"');return i(n.values)}return null}},VO=function(e){var n=e.filter(function(i){return i.type===17}).map(function(i){return i.number});return n.length===6?n:null},GO=function(e){var n=e.filter(function(w){return w.type===17}).map(function(w){return w.number}),i=n[0],a=n[1];n[2],n[3];var u=n[4],f=n[5];n[6],n[7],n[8],n[9],n[10],n[11];var m=n[12],o=n[13];return n[14],n[15],n.length===16?[i,a,u,f,m,o]:null},KO={matrix:VO,matrix3d:GO},mB={type:16,number:50,flags:Jm},qO=[mB,mB],$O={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,n){var i=n.filter(oa);return i.length!==2?qO:[i[0],i[1]]}},WO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Im;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Im||(Im={}));var ZO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-all":return Im.BREAK_ALL;case"keep-all":return Im.KEEP_ALL;case"normal":default:return Im.NORMAL}}},XO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,n){if(n.type===20)return{auto:!0,order:0};if(Ep(n))return{auto:!1,order:n.number};throw new Error("Invalid z-index number parsed")}},x4={name:"time",parse:function(e,n){if(n.type===15)switch(n.unit.toLowerCase()){case"s":return 1e3*n.number;case"ms":return n.number}throw new Error("Unsupported time type")}},YO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,n){return Ep(n)?n.number:1}},JO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},e8={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,n){return n.filter(us).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},t8={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,n){var i=[],a=[];return n.forEach(function(u){switch(u.type){case 20:case 0:i.push(u.value);break;case 17:i.push(u.number.toString());break;case 4:a.push(i.join(" ")),i.length=0;break}}),i.length&&a.push(i.join(" ")),a.map(function(u){return u.indexOf(" ")===-1?u:"'"+u+"'"})}},r8={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},n8={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,n){if(Ep(n))return n.number;if(us(n))switch(n.value){case"bold":return 700;case"normal":default:return 400}return 400}},i8={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.filter(us).map(function(i){return i.value})}},s8={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ba=function(e,n){return(e&n)!==0},o8={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var i=n[0];return i.type===20&&i.value==="none"?[]:n}},a8={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var i=n[0];if(i.type===20&&i.value==="none")return null;for(var a=[],u=n.filter(s4),f=0;f<u.length;f++){var m=u[f],o=u[f+1];if(m.type===20){var w=o&&Ep(o)?o.number:1;a.push({counter:m.value,increment:w})}}return a}},l8={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return[];for(var i=[],a=n.filter(s4),u=0;u<a.length;u++){var f=a[u],m=a[u+1];if(us(f)&&f.value!=="none"){var o=m&&Ep(m)?m.number:0;i.push({counter:f.value,reset:o})}}return i}},c8={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,n){return n.filter(eg).map(function(i){return x4.parse(e,i)})}},A8={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var i=n[0];if(i.type===20&&i.value==="none")return null;var a=[],u=n.filter(DQ);if(u.length%2!==0)return null;for(var f=0;f<u.length;f+=2){var m=u[f].value,o=u[f+1].value;a.push({open:m,close:o})}return a}},gB=function(e,n,i){if(!e)return"";var a=e[Math.min(n,e.length-1)];return a?i?a.open:a.close:""},u8={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&Y_(n[0],"none")?[]:oh(n).map(function(i){for(var a={color:255,offsetX:Bl,offsetY:Bl,blur:Bl,spread:Bl,inset:!1},u=0,f=0;f<i.length;f++){var m=i[f];Y_(m,"inset")?a.inset=!0:Bf(m)?(u===0?a.offsetX=m:u===1?a.offsetY=m:u===2?a.blur=m:a.spread=m,u++):a.color=vf.parse(e,m)}return a})}},h8={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,n){var i=[0,1,2],a=[];return n.filter(us).forEach(function(u){switch(u.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),i.forEach(function(u){a.indexOf(u)===-1&&a.push(u)}),a}},f8={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},d8={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return eg(n)?n.number:0}},p8=(function(){function e(n,i){var a,u;this.animationDuration=Yr(n,c8,i.animationDuration),this.backgroundClip=Yr(n,QQ,i.backgroundClip),this.backgroundColor=Yr(n,OQ,i.backgroundColor),this.backgroundImage=Yr(n,ZQ,i.backgroundImage),this.backgroundOrigin=Yr(n,XQ,i.backgroundOrigin),this.backgroundPosition=Yr(n,YQ,i.backgroundPosition),this.backgroundRepeat=Yr(n,JQ,i.backgroundRepeat),this.backgroundSize=Yr(n,tO,i.backgroundSize),this.borderTopColor=Yr(n,nO,i.borderTopColor),this.borderRightColor=Yr(n,iO,i.borderRightColor),this.borderBottomColor=Yr(n,sO,i.borderBottomColor),this.borderLeftColor=Yr(n,oO,i.borderLeftColor),this.borderTopLeftRadius=Yr(n,aO,i.borderTopLeftRadius),this.borderTopRightRadius=Yr(n,lO,i.borderTopRightRadius),this.borderBottomRightRadius=Yr(n,cO,i.borderBottomRightRadius),this.borderBottomLeftRadius=Yr(n,AO,i.borderBottomLeftRadius),this.borderTopStyle=Yr(n,uO,i.borderTopStyle),this.borderRightStyle=Yr(n,hO,i.borderRightStyle),this.borderBottomStyle=Yr(n,fO,i.borderBottomStyle),this.borderLeftStyle=Yr(n,dO,i.borderLeftStyle),this.borderTopWidth=Yr(n,pO,i.borderTopWidth),this.borderRightWidth=Yr(n,mO,i.borderRightWidth),this.borderBottomWidth=Yr(n,gO,i.borderBottomWidth),this.borderLeftWidth=Yr(n,yO,i.borderLeftWidth),this.boxShadow=Yr(n,u8,i.boxShadow),this.color=Yr(n,vO,i.color),this.direction=Yr(n,_O,i.direction),this.display=Yr(n,wO,i.display),this.float=Yr(n,bO,i.cssFloat),this.fontFamily=Yr(n,t8,i.fontFamily),this.fontSize=Yr(n,r8,i.fontSize),this.fontStyle=Yr(n,s8,i.fontStyle),this.fontVariant=Yr(n,i8,i.fontVariant),this.fontWeight=Yr(n,n8,i.fontWeight),this.letterSpacing=Yr(n,BO,i.letterSpacing),this.lineBreak=Yr(n,CO,i.lineBreak),this.lineHeight=Yr(n,EO,i.lineHeight),this.listStyleImage=Yr(n,SO,i.listStyleImage),this.listStylePosition=Yr(n,FO,i.listStylePosition),this.listStyleType=Yr(n,J_,i.listStyleType),this.marginTop=Yr(n,IO,i.marginTop),this.marginRight=Yr(n,TO,i.marginRight),this.marginBottom=Yr(n,PO,i.marginBottom),this.marginLeft=Yr(n,LO,i.marginLeft),this.opacity=Yr(n,YO,i.opacity);var f=Yr(n,MO,i.overflow);this.overflowX=f[0],this.overflowY=f[f.length>1?1:0],this.overflowWrap=Yr(n,kO,i.overflowWrap),this.paddingTop=Yr(n,UO,i.paddingTop),this.paddingRight=Yr(n,DO,i.paddingRight),this.paddingBottom=Yr(n,RO,i.paddingBottom),this.paddingLeft=Yr(n,NO,i.paddingLeft),this.paintOrder=Yr(n,h8,i.paintOrder),this.position=Yr(n,OO,i.position),this.textAlign=Yr(n,QO,i.textAlign),this.textDecorationColor=Yr(n,JO,(a=i.textDecorationColor)!==null&&a!==void 0?a:i.color),this.textDecorationLine=Yr(n,e8,(u=i.textDecorationLine)!==null&&u!==void 0?u:i.textDecoration),this.textShadow=Yr(n,zO,i.textShadow),this.textTransform=Yr(n,HO,i.textTransform),this.transform=Yr(n,jO,i.transform),this.transformOrigin=Yr(n,$O,i.transformOrigin),this.visibility=Yr(n,WO,i.visibility),this.webkitTextStrokeColor=Yr(n,f8,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Yr(n,d8,i.webkitTextStrokeWidth),this.wordBreak=Yr(n,ZO,i.wordBreak),this.zIndex=Yr(n,XO,i.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return _f(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ba(this.display,4)||ba(this.display,33554432)||ba(this.display,268435456)||ba(this.display,536870912)||ba(this.display,67108864)||ba(this.display,134217728)},e})(),m8=(function(){function e(n,i){this.content=Yr(n,o8,i.content),this.quotes=Yr(n,A8,i.quotes)}return e})(),yB=(function(){function e(n,i){this.counterIncrement=Yr(n,a8,i.counterIncrement),this.counterReset=Yr(n,l8,i.counterReset)}return e})(),Yr=function(e,n,i){var a=new n4,u=i!==null&&typeof i<"u"?i.toString():n.initialValue;a.write(u);var f=new i4(a.read());switch(n.type){case 2:var m=f.parseComponentValue();return n.parse(e,us(m)?m.value:n.initialValue);case 0:return n.parse(e,f.parseComponentValue());case 1:return n.parse(e,f.parseComponentValues());case 4:return f.parseComponentValue();case 3:switch(n.format){case"angle":return Hy.parse(e,f.parseComponentValue());case"color":return vf.parse(e,f.parseComponentValue());case"image":return nx.parse(e,f.parseComponentValue());case"length":var o=f.parseComponentValue();return Bf(o)?o:Bl;case"length-percentage":var w=f.parseComponentValue();return oa(w)?w:Bl;case"time":return x4.parse(e,f.parseComponentValue())}break}},g8="data-html2canvas-debug",y8=function(e){var n=e.getAttribute(g8);switch(n){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ew=function(e,n){var i=y8(e);return i===1||n===i},ah=(function(){function e(n,i){if(this.context=n,this.textNodes=[],this.elements=[],this.flags=0,ew(i,3))debugger;this.styles=new p8(n,window.getComputedStyle(i,null)),nw(i)&&(this.styles.animationDuration.some(function(a){return a>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=Oy(this.context,i),ew(i,4)&&(this.flags|=16)}return e})(),v8="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",vB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var h0=0;h0<vB.length;h0++)wm[vB.charCodeAt(h0)]=h0;var _8=function(e){var n=e.length*.75,i=e.length,a,u=0,f,m,o,w;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),I=Array.isArray(E)?E:new Uint8Array(E);for(a=0;a<i;a+=4)f=wm[e.charCodeAt(a)],m=wm[e.charCodeAt(a+1)],o=wm[e.charCodeAt(a+2)],w=wm[e.charCodeAt(a+3)],I[u++]=f<<2|m>>4,I[u++]=(m&15)<<4|o>>2,I[u++]=(o&3)<<6|w&63;return E},w8=function(e){for(var n=e.length,i=[],a=0;a<n;a+=2)i.push(e[a+1]<<8|e[a]);return i},x8=function(e){for(var n=e.length,i=[],a=0;a<n;a+=4)i.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return i},td=5,ix=11,_1=2,b8=ix-td,b4=65536>>td,B8=1<<td,w1=B8-1,C8=1024>>td,E8=b4+C8,S8=E8,F8=32,I8=S8+F8,T8=65536>>ix,P8=1<<b8,L8=P8-1,_B=function(e,n,i){return e.slice?e.slice(n,i):new Uint16Array(Array.prototype.slice.call(e,n,i))},M8=function(e,n,i){return e.slice?e.slice(n,i):new Uint32Array(Array.prototype.slice.call(e,n,i))},k8=function(e,n){var i=_8(e),a=Array.isArray(i)?x8(i):new Uint32Array(i),u=Array.isArray(i)?w8(i):new Uint16Array(i),f=24,m=_B(u,f/2,a[4]/2),o=a[5]===2?_B(u,(f+a[4])/2):M8(a,Math.ceil((f+a[4])/4));return new U8(a[0],a[1],a[2],a[3],m,o)},U8=(function(){function e(n,i,a,u,f,m){this.initialValue=n,this.errorValue=i,this.highStart=a,this.highValueIndex=u,this.index=f,this.data=m}return e.prototype.get=function(n){var i;if(n>=0){if(n<55296||n>56319&&n<=65535)return i=this.index[n>>td],i=(i<<_1)+(n&w1),this.data[i];if(n<=65535)return i=this.index[b4+(n-55296>>td)],i=(i<<_1)+(n&w1),this.data[i];if(n<this.highStart)return i=I8-T8+(n>>ix),i=this.index[i],i+=n>>td&L8,i=this.index[i],i=(i<<_1)+(n&w1),this.data[i];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),wB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D8=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var f0=0;f0<wB.length;f0++)D8[wB.charCodeAt(f0)]=f0;var R8=1,x1=2,b1=3,xB=4,bB=5,N8=7,BB=8,B1=9,C1=10,CB=11,EB=12,SB=13,FB=14,E1=15,Q8=function(e){for(var n=[],i=0,a=e.length;i<a;){var u=e.charCodeAt(i++);if(u>=55296&&u<=56319&&i<a){var f=e.charCodeAt(i++);(f&64512)===56320?n.push(((u&1023)<<10)+(f&1023)+65536):(n.push(u),i--)}else n.push(u)}return n},O8=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var a=[],u=-1,f="";++u<i;){var m=e[u];m<=65535?a.push(m):(m-=65536,a.push((m>>10)+55296,m%1024+56320)),(u+1===i||a.length>16384)&&(f+=String.fromCharCode.apply(String,a),a.length=0)}return f},z8=k8(v8),eu="",S1="",H8=function(e){return z8.get(e)},j8=function(e,n,i){var a=i-2,u=n[a],f=n[i-1],m=n[i];if(f===x1&&m===b1)return eu;if(f===x1||f===b1||f===xB||m===x1||m===b1||m===xB)return S1;if(f===BB&&[BB,B1,CB,EB].indexOf(m)!==-1||(f===CB||f===B1)&&(m===B1||m===C1)||(f===EB||f===C1)&&m===C1||m===SB||m===bB||m===N8||f===R8)return eu;if(f===SB&&m===FB){for(;u===bB;)u=n[--a];if(u===FB)return eu}if(f===E1&&m===E1){for(var o=0;u===E1;)o++,u=n[--a];if(o%2===0)return eu}return S1},V8=function(e){var n=Q8(e),i=n.length,a=0,u=0,f=n.map(H8);return{next:function(){if(a>=i)return{done:!0,value:null};for(var m=eu;a<i&&(m=j8(n,f,++a))===eu;);if(m!==eu||a===i){var o=O8.apply(null,n.slice(u,a));return u=a,{value:o,done:!1}}return{done:!0,value:null}}}},G8=function(e){for(var n=V8(e),i=[],a;!(a=n.next()).done;)a.value&&i.push(a.value.slice());return i},K8=function(e){var n=123;if(e.createRange){var i=e.createRange();if(i.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=n+"px",a.style.display="block",e.body.appendChild(a),i.selectNode(a);var u=i.getBoundingClientRect(),f=Math.round(u.height);if(e.body.removeChild(a),f===n)return!0}}return!1},q8=function(e){var n=e.createElement("boundtest");n.style.width="50px",n.style.display="block",n.style.fontSize="12px",n.style.letterSpacing="0px",n.style.wordSpacing="0px",e.body.appendChild(n);var i=e.createRange();n.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=n.firstChild,u=zy(a.data).map(function(w){return Mo(w)}),f=0,m={},o=u.every(function(w,E){i.setStart(a,f),i.setEnd(a,f+w.length);var I=i.getBoundingClientRect();f+=w.length;var D=I.x>m.x||I.y>m.y;return m=I,E===0?!0:D});return e.body.removeChild(n),o},$8=function(){return typeof new Image().crossOrigin<"u"},W8=function(){return typeof new XMLHttpRequest().responseType=="string"},Z8=function(e){var n=new Image,i=e.createElement("canvas"),a=i.getContext("2d");if(!a)return!1;n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(n,0,0),i.toDataURL()}catch{return!1}return!0},IB=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},X8=function(e){var n=e.createElement("canvas"),i=100;n.width=i,n.height=i;var a=n.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,i,i);var u=new Image,f=n.toDataURL();u.src=f;var m=tw(i,i,0,0,u);return a.fillStyle="red",a.fillRect(0,0,i,i),TB(m).then(function(o){a.drawImage(o,0,0);var w=a.getImageData(0,0,i,i).data;a.fillStyle="red",a.fillRect(0,0,i,i);var E=e.createElement("div");return E.style.backgroundImage="url("+f+")",E.style.height=i+"px",IB(w)?TB(tw(i,i,0,0,E)):Promise.reject(!1)}).then(function(o){return a.drawImage(o,0,0),IB(a.getImageData(0,0,i,i).data)}).catch(function(){return!1})},tw=function(e,n,i,a,u){var f="http://www.w3.org/2000/svg",m=document.createElementNS(f,"svg"),o=document.createElementNS(f,"foreignObject");return m.setAttributeNS(null,"width",e.toString()),m.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",i.toString()),o.setAttributeNS(null,"y",a.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),m.appendChild(o),o.appendChild(u),m},TB=function(e){return new Promise(function(n,i){var a=new Image;a.onload=function(){return n(a)},a.onerror=i,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},xl={get SUPPORT_RANGE_BOUNDS(){var e=K8(document);return Object.defineProperty(xl,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=xl.SUPPORT_RANGE_BOUNDS&&q8(document);return Object.defineProperty(xl,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Z8(document);return Object.defineProperty(xl,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?X8(document):Promise.resolve(!1);return Object.defineProperty(xl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=$8();return Object.defineProperty(xl,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=W8();return Object.defineProperty(xl,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xl,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Tm=(function(){function e(n,i){this.text=n,this.bounds=i}return e})(),Y8=function(e,n,i,a){var u=tz(n,i),f=[],m=0;return u.forEach(function(o){if(i.textDecorationLine.length||o.trim().length>0)if(xl.SUPPORT_RANGE_BOUNDS){var w=PB(a,m,o.length).getClientRects();if(w.length>1){var E=sx(o),I=0;E.forEach(function(O){f.push(new Tm(O,zh.fromDOMRectList(e,PB(a,I+m,O.length).getClientRects()))),I+=O.length})}else f.push(new Tm(o,zh.fromDOMRectList(e,w)))}else{var D=a.splitText(o.length);f.push(new Tm(o,J8(e,a))),a=D}else xl.SUPPORT_RANGE_BOUNDS||(a=a.splitText(o.length));m+=o.length}),f},J8=function(e,n){var i=n.ownerDocument;if(i){var a=i.createElement("html2canvaswrapper");a.appendChild(n.cloneNode(!0));var u=n.parentNode;if(u){u.replaceChild(a,n);var f=Oy(e,a);return a.firstChild&&u.replaceChild(a.firstChild,a),f}}return zh.EMPTY},PB=function(e,n,i){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var u=a.createRange();return u.setStart(e,n),u.setEnd(e,n+i),u},sx=function(e){if(xl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(n.segment(e)).map(function(i){return i.segment})}return G8(e)},ez=function(e,n){if(xl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(e)).map(function(a){return a.segment})}return nz(e,n)},tz=function(e,n){return n.letterSpacing!==0?sx(e):ez(e,n)},rz=[32,160,4961,65792,65793,4153,4241],nz=function(e,n){for(var i=TN(e,{lineBreak:n.lineBreak,wordBreak:n.overflowWrap==="break-word"?"break-word":n.wordBreak}),a=[],u,f=function(){if(u.value){var m=u.value.slice(),o=zy(m),w="";o.forEach(function(E){rz.indexOf(E)===-1?w+=Mo(E):(w.length&&a.push(w),a.push(Mo(E)),w="")}),w.length&&a.push(w)}};!(u=i.next()).done;)f();return a},iz=(function(){function e(n,i,a){this.text=sz(i.data,a.textTransform),this.textBounds=Y8(n,this.text,a,i)}return e})(),sz=function(e,n){switch(n){case 1:return e.toLowerCase();case 3:return e.replace(oz,az);case 2:return e.toUpperCase();default:return e}},oz=/(^|\s|:|-|\(|\))([a-z])/g,az=function(e,n,i){return e.length>0?n+i.toUpperCase():e},B4=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;return u.src=a.currentSrc||a.src,u.intrinsicWidth=a.naturalWidth,u.intrinsicHeight=a.naturalHeight,u.context.cache.addImage(u.src),u}return n})(ah),C4=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;return u.canvas=a,u.intrinsicWidth=a.width,u.intrinsicHeight=a.height,u}return n})(ah),E4=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this,f=new XMLSerializer,m=Oy(i,a);return a.setAttribute("width",m.width+"px"),a.setAttribute("height",m.height+"px"),u.svg="data:image/svg+xml,"+encodeURIComponent(f.serializeToString(a)),u.intrinsicWidth=a.width.baseVal.value,u.intrinsicHeight=a.height.baseVal.value,u.context.cache.addImage(u.svg),u}return n})(ah),S4=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;return u.value=a.value,u}return n})(ah),rw=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;return u.start=a.start,u.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,u}return n})(ah),lz=[{type:15,flags:0,unit:"px",number:3}],cz=[{type:16,flags:0,number:50}],Az=function(e){return e.width>e.height?new zh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new zh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},uz=function(e){var n=e.type===hz?new Array(e.value.length+1).join(""):e.value;return n.length===0?e.placeholder||"":n},ry="checkbox",ny="radio",hz="password",LB=707406591,ox=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;switch(u.type=a.type.toLowerCase(),u.checked=a.checked,u.value=uz(a),(u.type===ry||u.type===ny)&&(u.styles.backgroundColor=3739148031,u.styles.borderTopColor=u.styles.borderRightColor=u.styles.borderBottomColor=u.styles.borderLeftColor=2779096575,u.styles.borderTopWidth=u.styles.borderRightWidth=u.styles.borderBottomWidth=u.styles.borderLeftWidth=1,u.styles.borderTopStyle=u.styles.borderRightStyle=u.styles.borderBottomStyle=u.styles.borderLeftStyle=1,u.styles.backgroundClip=[0],u.styles.backgroundOrigin=[0],u.bounds=Az(u.bounds)),u.type){case ry:u.styles.borderTopRightRadius=u.styles.borderTopLeftRadius=u.styles.borderBottomRightRadius=u.styles.borderBottomLeftRadius=lz;break;case ny:u.styles.borderTopRightRadius=u.styles.borderTopLeftRadius=u.styles.borderBottomRightRadius=u.styles.borderBottomLeftRadius=cz;break}return u}return n})(ah),F4=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this,f=a.options[a.selectedIndex||0];return u.value=f&&f.text||"",u}return n})(ah),I4=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;return u.value=a.value,u}return n})(ah),T4=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;u.src=a.src,u.width=parseInt(a.width,10)||0,u.height=parseInt(a.height,10)||0,u.backgroundColor=u.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){u.tree=L4(i,a.contentWindow.document.documentElement);var f=a.contentWindow.document.documentElement?Fm(i,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):Nh.TRANSPARENT,m=a.contentWindow.document.body?Fm(i,getComputedStyle(a.contentWindow.document.body).backgroundColor):Nh.TRANSPARENT;u.backgroundColor=_f(f)?_f(m)?u.styles.backgroundColor:m:f}}catch{}return u}return n})(ah),fz=["OL","UL","MENU"],R0=function(e,n,i,a){for(var u=n.firstChild,f=void 0;u;u=f)if(f=u.nextSibling,M4(u)&&u.data.trim().length>0)i.textNodes.push(new iz(e,u,i.styles));else if(op(u))if(R4(u)&&u.assignedNodes)u.assignedNodes().forEach(function(o){return R0(e,o,i,a)});else{var m=P4(e,u);m.styles.isVisible()&&(dz(u,m,a)?m.flags|=4:pz(m.styles)&&(m.flags|=2),fz.indexOf(u.tagName)!==-1&&(m.flags|=8),i.elements.push(m),u.slot,u.shadowRoot?R0(e,u.shadowRoot,m,a):!iy(u)&&!k4(u)&&!sy(u)&&R0(e,u,m,a))}},P4=function(e,n){return iw(n)?new B4(e,n):U4(n)?new C4(e,n):k4(n)?new E4(e,n):mz(n)?new S4(e,n):gz(n)?new rw(e,n):yz(n)?new ox(e,n):sy(n)?new F4(e,n):iy(n)?new I4(e,n):D4(n)?new T4(e,n):new ah(e,n)},L4=function(e,n){var i=P4(e,n);return i.flags|=4,R0(e,n,i,i),i},dz=function(e,n,i){return n.styles.isPositionedWithZIndex()||n.styles.opacity<1||n.styles.isTransformed()||ax(e)&&i.styles.isTransparent()},pz=function(e){return e.isPositioned()||e.isFloating()},M4=function(e){return e.nodeType===Node.TEXT_NODE},op=function(e){return e.nodeType===Node.ELEMENT_NODE},nw=function(e){return op(e)&&typeof e.style<"u"&&!N0(e)},N0=function(e){return typeof e.className=="object"},mz=function(e){return e.tagName==="LI"},gz=function(e){return e.tagName==="OL"},yz=function(e){return e.tagName==="INPUT"},vz=function(e){return e.tagName==="HTML"},k4=function(e){return e.tagName==="svg"},ax=function(e){return e.tagName==="BODY"},U4=function(e){return e.tagName==="CANVAS"},MB=function(e){return e.tagName==="VIDEO"},iw=function(e){return e.tagName==="IMG"},D4=function(e){return e.tagName==="IFRAME"},kB=function(e){return e.tagName==="STYLE"},_z=function(e){return e.tagName==="SCRIPT"},iy=function(e){return e.tagName==="TEXTAREA"},sy=function(e){return e.tagName==="SELECT"},R4=function(e){return e.tagName==="SLOT"},UB=function(e){return e.tagName.indexOf("-")>0},wz=(function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(n){var i=this.counters[n];return i&&i.length?i[i.length-1]:1},e.prototype.getCounterValues=function(n){var i=this.counters[n];return i||[]},e.prototype.pop=function(n){var i=this;n.forEach(function(a){return i.counters[a].pop()})},e.prototype.parse=function(n){var i=this,a=n.counterIncrement,u=n.counterReset,f=!0;a!==null&&a.forEach(function(o){var w=i.counters[o.counter];w&&o.increment!==0&&(f=!1,w.length||w.push(1),w[Math.max(0,w.length-1)]+=o.increment)});var m=[];return f&&u.forEach(function(o){var w=i.counters[o.counter];m.push(o.counter),w||(w=i.counters[o.counter]=[]),w.push(o.reset)}),m},e})(),DB={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},RB={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},xz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},bz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Gd=function(e,n,i,a,u,f){return e<n||e>i?Hm(e,u,f.length>0):a.integers.reduce(function(m,o,w){for(;e>=o;)e-=o,m+=a.values[w];return m},"")+f},N4=function(e,n,i,a){var u="";do i||e--,u=a(e)+u,e/=n;while(e*n>=n);return u},Lo=function(e,n,i,a,u){var f=i-n+1;return(e<0?"-":"")+(N4(Math.abs(e),f,a,function(m){return Mo(Math.floor(m%f)+n)})+u)},Wf=function(e,n,i){i===void 0&&(i=". ");var a=n.length;return N4(Math.abs(e),a,!1,function(u){return n[Math.floor(u%a)]})+i},ep=1,cf=2,Af=4,xm=8,Uh=function(e,n,i,a,u,f){if(e<-9999||e>9999)return Hm(e,4,u.length>0);var m=Math.abs(e),o=u;if(m===0)return n[0]+o;for(var w=0;m>0&&w<=4;w++){var E=m%10;E===0&&ba(f,ep)&&o!==""?o=n[E]+o:E>1||E===1&&w===0||E===1&&w===1&&ba(f,cf)||E===1&&w===1&&ba(f,Af)&&e>100||E===1&&w>1&&ba(f,xm)?o=n[E]+(w>0?i[w-1]:"")+o:E===1&&w>0&&(o=i[w-1]+o),m=Math.floor(m/10)}return(e<0?a:"")+o},NB="",QB="",OB="",F1="",Hm=function(e,n,i){var a=i?". ":"",u=i?"":"",f=i?", ":"",m=i?" ":"";switch(n){case 0:return""+m;case 1:return""+m;case 2:return""+m;case 5:var o=Lo(e,48,57,!0,a);return o.length<4?"0"+o:o;case 4:return Wf(e,"",u);case 6:return Gd(e,1,3999,DB,3,a).toLowerCase();case 7:return Gd(e,1,3999,DB,3,a);case 8:return Lo(e,945,969,!1,a);case 9:return Lo(e,97,122,!1,a);case 10:return Lo(e,65,90,!1,a);case 11:return Lo(e,1632,1641,!0,a);case 12:case 49:return Gd(e,1,9999,RB,3,a);case 35:return Gd(e,1,9999,RB,3,a).toLowerCase();case 13:return Lo(e,2534,2543,!0,a);case 14:case 30:return Lo(e,6112,6121,!0,a);case 15:return Wf(e,"",u);case 16:return Wf(e,"",u);case 17:case 48:return Uh(e,"",NB,"",u,cf|Af|xm);case 47:return Uh(e,"",QB,"",u,ep|cf|Af|xm);case 42:return Uh(e,"",NB,"",u,cf|Af|xm);case 41:return Uh(e,"",QB,"",u,ep|cf|Af|xm);case 26:return Uh(e,"","",OB,u,0);case 25:return Uh(e,"","",OB,u,ep|cf|Af);case 31:return Uh(e,"","",F1,f,ep|cf|Af);case 33:return Uh(e,"","",F1,f,0);case 32:return Uh(e,"","",F1,f,ep|cf|Af);case 18:return Lo(e,2406,2415,!0,a);case 20:return Gd(e,1,19999,bz,3,a);case 21:return Lo(e,2790,2799,!0,a);case 22:return Lo(e,2662,2671,!0,a);case 22:return Gd(e,1,10999,xz,3,a);case 23:return Wf(e,"");case 24:return Wf(e,"");case 27:return Lo(e,3302,3311,!0,a);case 28:return Wf(e,"",u);case 29:return Wf(e,"",u);case 34:return Lo(e,3792,3801,!0,a);case 37:return Lo(e,6160,6169,!0,a);case 38:return Lo(e,4160,4169,!0,a);case 39:return Lo(e,2918,2927,!0,a);case 40:return Lo(e,1776,1785,!0,a);case 43:return Lo(e,3046,3055,!0,a);case 44:return Lo(e,3174,3183,!0,a);case 45:return Lo(e,3664,3673,!0,a);case 46:return Lo(e,3872,3881,!0,a);case 3:default:return Lo(e,48,57,!0,a)}},Q4="data-html2canvas-ignore",zB=(function(){function e(n,i,a){if(this.context=n,this.options=a,this.scrolledElements=[],this.referenceElement=i,this.counters=new wz,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(n,i){var a=this,u=Bz(n,i);if(!u.contentWindow)return Promise.reject("Unable to find iframe window");var f=n.defaultView.pageXOffset,m=n.defaultView.pageYOffset,o=u.contentWindow,w=o.document,E=Sz(u).then(function(){return bc(a,void 0,void 0,function(){var I,D;return Yl(this,function(O){switch(O.label){case 0:return this.scrolledElements.forEach(Pz),o&&(o.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==i.top||o.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-i.left,o.scrollY-i.top,0,0))),I=this.options.onclone,D=this.clonedReferenceElement,typeof D>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:w.fonts&&w.fonts.ready?[4,w.fonts.ready]:[3,2];case 1:O.sent(),O.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Ez(w)]:[3,4];case 3:O.sent(),O.label=4;case 4:return typeof I=="function"?[2,Promise.resolve().then(function(){return I(w,D)}).then(function(){return u})]:[2,u]}})})});return w.open(),w.write(Iz(document.doctype)+"<html></html>"),Tz(this.referenceElement.ownerDocument,f,m),w.replaceChild(w.adoptNode(this.documentElement),w.documentElement),w.close(),E},e.prototype.createElementClone=function(n){if(ew(n,2))debugger;if(U4(n))return this.createCanvasClone(n);if(MB(n))return this.createVideoClone(n);if(kB(n))return this.createStyleClone(n);var i=n.cloneNode(!1);return iw(i)&&(iw(n)&&n.currentSrc&&n.currentSrc!==n.src&&(i.src=n.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),UB(i)?this.createCustomElementClone(i):i},e.prototype.createCustomElementClone=function(n){var i=document.createElement("html2canvascustomelement");return I1(n.style,i),i},e.prototype.createStyleClone=function(n){try{var i=n.sheet;if(i&&i.cssRules){var a=[].slice.call(i.cssRules,0).reduce(function(f,m){return m&&typeof m.cssText=="string"?f+m.cssText:f},""),u=n.cloneNode(!1);return u.textContent=a,u}}catch(f){if(this.context.logger.error("Unable to access cssRules property",f),f.name!=="SecurityError")throw f}return n.cloneNode(!1)},e.prototype.createCanvasClone=function(n){var i;if(this.options.inlineImages&&n.ownerDocument){var a=n.ownerDocument.createElement("img");try{return a.src=n.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",n)}}var u=n.cloneNode(!1);try{u.width=n.width,u.height=n.height;var f=n.getContext("2d"),m=u.getContext("2d");if(m)if(!this.options.allowTaint&&f)m.putImageData(f.getImageData(0,0,n.width,n.height),0,0);else{var o=(i=n.getContext("webgl2"))!==null&&i!==void 0?i:n.getContext("webgl");if(o){var w=o.getContextAttributes();w?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",n)}m.drawImage(n,0,0)}return u}catch{this.context.logger.info("Unable to clone canvas as it is tainted",n)}return u},e.prototype.createVideoClone=function(n){var i=n.ownerDocument.createElement("canvas");i.width=n.offsetWidth,i.height=n.offsetHeight;var a=i.getContext("2d");try{return a&&(a.drawImage(n,0,0,i.width,i.height),this.options.allowTaint||a.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",n)}var u=n.ownerDocument.createElement("canvas");return u.width=n.offsetWidth,u.height=n.offsetHeight,u},e.prototype.appendChildNode=function(n,i,a){(!op(i)||!_z(i)&&!i.hasAttribute(Q4)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!op(i)||!kB(i))&&n.appendChild(this.cloneNode(i,a))},e.prototype.cloneChildNodes=function(n,i,a){for(var u=this,f=n.shadowRoot?n.shadowRoot.firstChild:n.firstChild;f;f=f.nextSibling)if(op(f)&&R4(f)&&typeof f.assignedNodes=="function"){var m=f.assignedNodes();m.length&&m.forEach(function(o){return u.appendChildNode(i,o,a)})}else this.appendChildNode(i,f,a)},e.prototype.cloneNode=function(n,i){if(M4(n))return document.createTextNode(n.data);if(!n.ownerDocument)return n.cloneNode(!1);var a=n.ownerDocument.defaultView;if(a&&op(n)&&(nw(n)||N0(n))){var u=this.createElementClone(n);u.style.transitionProperty="none";var f=a.getComputedStyle(n),m=a.getComputedStyle(n,":before"),o=a.getComputedStyle(n,":after");this.referenceElement===n&&nw(u)&&(this.clonedReferenceElement=u),ax(u)&&kz(u);var w=this.counters.parse(new yB(this.context,f)),E=this.resolvePseudoContent(n,u,m,Pm.BEFORE);UB(n)&&(i=!0),MB(n)||this.cloneChildNodes(n,u,i),E&&u.insertBefore(E,u.firstChild);var I=this.resolvePseudoContent(n,u,o,Pm.AFTER);return I&&u.appendChild(I),this.counters.pop(w),(f&&(this.options.copyStyles||N0(n))&&!D4(n)||i)&&I1(f,u),(n.scrollTop!==0||n.scrollLeft!==0)&&this.scrolledElements.push([u,n.scrollLeft,n.scrollTop]),(iy(n)||sy(n))&&(iy(u)||sy(u))&&(u.value=n.value),u}return n.cloneNode(!1)},e.prototype.resolvePseudoContent=function(n,i,a,u){var f=this;if(a){var m=a.content,o=i.ownerDocument;if(!(!o||!m||m==="none"||m==="-moz-alt-content"||a.display==="none")){this.counters.parse(new yB(this.context,a));var w=new m8(this.context,a),E=o.createElement("html2canvaspseudoelement");I1(a,E),w.content.forEach(function(D){if(D.type===0)E.appendChild(o.createTextNode(D.value));else if(D.type===22){var O=o.createElement("img");O.src=D.value,O.style.opacity="1",E.appendChild(O)}else if(D.type===18){if(D.name==="attr"){var P=D.values.filter(us);P.length&&E.appendChild(o.createTextNode(n.getAttribute(P[0].value)||""))}else if(D.name==="counter"){var W=D.values.filter(vp),H=W[0],z=W[1];if(H&&us(H)){var Z=f.counters.getCounterValue(H.value),se=z&&us(z)?J_.parse(f.context,z.value):3;E.appendChild(o.createTextNode(Hm(Z,se,!1)))}}else if(D.name==="counters"){var ae=D.values.filter(vp),H=ae[0],fe=ae[1],z=ae[2];if(H&&us(H)){var Fe=f.counters.getCounterValues(H.value),He=z&&us(z)?J_.parse(f.context,z.value):3,Ve=fe&&fe.type===0?fe.value:"",Oe=Fe.map(function(ue){return Hm(ue,He,!1)}).join(Ve);E.appendChild(o.createTextNode(Oe))}}}else if(D.type===20)switch(D.value){case"open-quote":E.appendChild(o.createTextNode(gB(w.quotes,f.quoteDepth++,!0)));break;case"close-quote":E.appendChild(o.createTextNode(gB(w.quotes,--f.quoteDepth,!1)));break;default:E.appendChild(o.createTextNode(D.value))}}),E.className=sw+" "+ow;var I=u===Pm.BEFORE?" "+sw:" "+ow;return N0(i)?i.className.baseValue+=I:i.className+=I,E}}},e.destroy=function(n){return n.parentNode?(n.parentNode.removeChild(n),!0):!1},e})(),Pm;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Pm||(Pm={}));var Bz=function(e,n){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=n.width.toString(),i.height=n.height.toString(),i.scrolling="no",i.setAttribute(Q4,"true"),e.body.appendChild(i),i},Cz=function(e){return new Promise(function(n){if(e.complete){n();return}if(!e.src){n();return}e.onload=n,e.onerror=n})},Ez=function(e){return Promise.all([].slice.call(e.images,0).map(Cz))},Sz=function(e){return new Promise(function(n,i){var a=e.contentWindow;if(!a)return i("No window assigned for iframe");var u=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var f=setInterval(function(){u.body.childNodes.length>0&&u.readyState==="complete"&&(clearInterval(f),n(e))},50)}})},Fz=["all","d","content"],I1=function(e,n){for(var i=e.length-1;i>=0;i--){var a=e.item(i);Fz.indexOf(a)===-1&&n.style.setProperty(a,e.getPropertyValue(a))}return n},Iz=function(e){var n="";return e&&(n+="<!DOCTYPE ",e.name&&(n+=e.name),e.internalSubset&&(n+=e.internalSubset),e.publicId&&(n+='"'+e.publicId+'"'),e.systemId&&(n+='"'+e.systemId+'"'),n+=">"),n},Tz=function(e,n,i){e&&e.defaultView&&(n!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(n,i)},Pz=function(e){var n=e[0],i=e[1],a=e[2];n.scrollLeft=i,n.scrollTop=a},Lz=":before",Mz=":after",sw="___html2canvas___pseudoelement_before",ow="___html2canvas___pseudoelement_after",HB=`{
    content: "" !important;
    display: none !important;
}`,kz=function(e){Uz(e,"."+sw+Lz+HB+`
         .`+ow+Mz+HB)},Uz=function(e,n){var i=e.ownerDocument;if(i){var a=i.createElement("style");a.textContent=n,e.appendChild(a)}},O4=(function(){function e(){}return e.getOrigin=function(n){var i=e._link;return i?(i.href=n,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},e.isSameOrigin=function(n){return e.getOrigin(n)===e._origin},e.setContext=function(n){e._link=n.document.createElement("a"),e._origin=e.getOrigin(n.location.href)},e._origin="about:blank",e})(),Dz=(function(){function e(n,i){this.context=n,this._options=i,this._cache={}}return e.prototype.addImage=function(n){var i=Promise.resolve();return this.has(n)||(P1(n)||Oz(n))&&(this._cache[n]=this.loadImage(n)).catch(function(){}),i},e.prototype.match=function(n){return this._cache[n]},e.prototype.loadImage=function(n){return bc(this,void 0,void 0,function(){var i,a,u,f,m=this;return Yl(this,function(o){switch(o.label){case 0:return i=O4.isSameOrigin(n),a=!T1(n)&&this._options.useCORS===!0&&xl.SUPPORT_CORS_IMAGES&&!i,u=!T1(n)&&!i&&!P1(n)&&typeof this._options.proxy=="string"&&xl.SUPPORT_CORS_XHR&&!a,!i&&this._options.allowTaint===!1&&!T1(n)&&!P1(n)&&!u&&!a?[2]:(f=n,u?[4,this.proxy(f)]:[3,2]);case 1:f=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+n.substring(0,256)),[4,new Promise(function(w,E){var I=new Image;I.onload=function(){return w(I)},I.onerror=E,(zz(f)||a)&&(I.crossOrigin="anonymous"),I.src=f,I.complete===!0&&setTimeout(function(){return w(I)},500),m._options.imageTimeout>0&&setTimeout(function(){return E("Timed out ("+m._options.imageTimeout+"ms) loading image")},m._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(n){return typeof this._cache[n]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(n){var i=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var u=n.substring(0,256);return new Promise(function(f,m){var o=xl.SUPPORT_RESPONSE_TYPE?"blob":"text",w=new XMLHttpRequest;w.onload=function(){if(w.status===200)if(o==="text")f(w.response);else{var D=new FileReader;D.addEventListener("load",function(){return f(D.result)},!1),D.addEventListener("error",function(O){return m(O)},!1),D.readAsDataURL(w.response)}else m("Failed to proxy resource "+u+" with status code "+w.status)},w.onerror=m;var E=a.indexOf("?")>-1?"&":"?";if(w.open("GET",""+a+E+"url="+encodeURIComponent(n)+"&responseType="+o),o!=="text"&&w instanceof XMLHttpRequest&&(w.responseType=o),i._options.imageTimeout){var I=i._options.imageTimeout;w.timeout=I,w.ontimeout=function(){return m("Timed out ("+I+"ms) proxying "+u)}}w.send()})},e})(),Rz=/^data:image\/svg\+xml/i,Nz=/^data:image\/.*;base64,/i,Qz=/^data:image\/.*/i,Oz=function(e){return xl.SUPPORT_SVG_DRAWING||!Hz(e)},T1=function(e){return Qz.test(e)},zz=function(e){return Nz.test(e)},P1=function(e){return e.substr(0,4)==="blob"},Hz=function(e){return e.substr(-3).toLowerCase()==="svg"||Rz.test(e)},jr=(function(){function e(n,i){this.type=0,this.x=n,this.y=i}return e.prototype.add=function(n,i){return new e(this.x+n,this.y+i)},e})(),Kd=function(e,n,i){return new jr(e.x+(n.x-e.x)*i,e.y+(n.y-e.y)*i)},d0=(function(){function e(n,i,a,u){this.type=1,this.start=n,this.startControl=i,this.endControl=a,this.end=u}return e.prototype.subdivide=function(n,i){var a=Kd(this.start,this.startControl,n),u=Kd(this.startControl,this.endControl,n),f=Kd(this.endControl,this.end,n),m=Kd(a,u,n),o=Kd(u,f,n),w=Kd(m,o,n);return i?new e(this.start,a,m,w):new e(w,o,f,this.end)},e.prototype.add=function(n,i){return new e(this.start.add(n,i),this.startControl.add(n,i),this.endControl.add(n,i),this.end.add(n,i))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e})(),tu=function(e){return e.type===1},jz=(function(){function e(n){var i=n.styles,a=n.bounds,u=_m(i.borderTopLeftRadius,a.width,a.height),f=u[0],m=u[1],o=_m(i.borderTopRightRadius,a.width,a.height),w=o[0],E=o[1],I=_m(i.borderBottomRightRadius,a.width,a.height),D=I[0],O=I[1],P=_m(i.borderBottomLeftRadius,a.width,a.height),W=P[0],H=P[1],z=[];z.push((f+w)/a.width),z.push((W+D)/a.width),z.push((m+H)/a.height),z.push((E+O)/a.height);var Z=Math.max.apply(Math,z);Z>1&&(f/=Z,m/=Z,w/=Z,E/=Z,D/=Z,O/=Z,W/=Z,H/=Z);var se=a.width-w,ae=a.height-O,fe=a.width-D,Fe=a.height-H,He=i.borderTopWidth,Ve=i.borderRightWidth,Oe=i.borderBottomWidth,be=i.borderLeftWidth,rt=Ms(i.paddingTop,n.bounds.width),ue=Ms(i.paddingRight,n.bounds.width),me=Ms(i.paddingBottom,n.bounds.width),Ue=Ms(i.paddingLeft,n.bounds.width);this.topLeftBorderDoubleOuterBox=f>0||m>0?so(a.left+be/3,a.top+He/3,f-be/3,m-He/3,qi.TOP_LEFT):new jr(a.left+be/3,a.top+He/3),this.topRightBorderDoubleOuterBox=f>0||m>0?so(a.left+se,a.top+He/3,w-Ve/3,E-He/3,qi.TOP_RIGHT):new jr(a.left+a.width-Ve/3,a.top+He/3),this.bottomRightBorderDoubleOuterBox=D>0||O>0?so(a.left+fe,a.top+ae,D-Ve/3,O-Oe/3,qi.BOTTOM_RIGHT):new jr(a.left+a.width-Ve/3,a.top+a.height-Oe/3),this.bottomLeftBorderDoubleOuterBox=W>0||H>0?so(a.left+be/3,a.top+Fe,W-be/3,H-Oe/3,qi.BOTTOM_LEFT):new jr(a.left+be/3,a.top+a.height-Oe/3),this.topLeftBorderDoubleInnerBox=f>0||m>0?so(a.left+be*2/3,a.top+He*2/3,f-be*2/3,m-He*2/3,qi.TOP_LEFT):new jr(a.left+be*2/3,a.top+He*2/3),this.topRightBorderDoubleInnerBox=f>0||m>0?so(a.left+se,a.top+He*2/3,w-Ve*2/3,E-He*2/3,qi.TOP_RIGHT):new jr(a.left+a.width-Ve*2/3,a.top+He*2/3),this.bottomRightBorderDoubleInnerBox=D>0||O>0?so(a.left+fe,a.top+ae,D-Ve*2/3,O-Oe*2/3,qi.BOTTOM_RIGHT):new jr(a.left+a.width-Ve*2/3,a.top+a.height-Oe*2/3),this.bottomLeftBorderDoubleInnerBox=W>0||H>0?so(a.left+be*2/3,a.top+Fe,W-be*2/3,H-Oe*2/3,qi.BOTTOM_LEFT):new jr(a.left+be*2/3,a.top+a.height-Oe*2/3),this.topLeftBorderStroke=f>0||m>0?so(a.left+be/2,a.top+He/2,f-be/2,m-He/2,qi.TOP_LEFT):new jr(a.left+be/2,a.top+He/2),this.topRightBorderStroke=f>0||m>0?so(a.left+se,a.top+He/2,w-Ve/2,E-He/2,qi.TOP_RIGHT):new jr(a.left+a.width-Ve/2,a.top+He/2),this.bottomRightBorderStroke=D>0||O>0?so(a.left+fe,a.top+ae,D-Ve/2,O-Oe/2,qi.BOTTOM_RIGHT):new jr(a.left+a.width-Ve/2,a.top+a.height-Oe/2),this.bottomLeftBorderStroke=W>0||H>0?so(a.left+be/2,a.top+Fe,W-be/2,H-Oe/2,qi.BOTTOM_LEFT):new jr(a.left+be/2,a.top+a.height-Oe/2),this.topLeftBorderBox=f>0||m>0?so(a.left,a.top,f,m,qi.TOP_LEFT):new jr(a.left,a.top),this.topRightBorderBox=w>0||E>0?so(a.left+se,a.top,w,E,qi.TOP_RIGHT):new jr(a.left+a.width,a.top),this.bottomRightBorderBox=D>0||O>0?so(a.left+fe,a.top+ae,D,O,qi.BOTTOM_RIGHT):new jr(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=W>0||H>0?so(a.left,a.top+Fe,W,H,qi.BOTTOM_LEFT):new jr(a.left,a.top+a.height),this.topLeftPaddingBox=f>0||m>0?so(a.left+be,a.top+He,Math.max(0,f-be),Math.max(0,m-He),qi.TOP_LEFT):new jr(a.left+be,a.top+He),this.topRightPaddingBox=w>0||E>0?so(a.left+Math.min(se,a.width-Ve),a.top+He,se>a.width+Ve?0:Math.max(0,w-Ve),Math.max(0,E-He),qi.TOP_RIGHT):new jr(a.left+a.width-Ve,a.top+He),this.bottomRightPaddingBox=D>0||O>0?so(a.left+Math.min(fe,a.width-be),a.top+Math.min(ae,a.height-Oe),Math.max(0,D-Ve),Math.max(0,O-Oe),qi.BOTTOM_RIGHT):new jr(a.left+a.width-Ve,a.top+a.height-Oe),this.bottomLeftPaddingBox=W>0||H>0?so(a.left+be,a.top+Math.min(Fe,a.height-Oe),Math.max(0,W-be),Math.max(0,H-Oe),qi.BOTTOM_LEFT):new jr(a.left+be,a.top+a.height-Oe),this.topLeftContentBox=f>0||m>0?so(a.left+be+Ue,a.top+He+rt,Math.max(0,f-(be+Ue)),Math.max(0,m-(He+rt)),qi.TOP_LEFT):new jr(a.left+be+Ue,a.top+He+rt),this.topRightContentBox=w>0||E>0?so(a.left+Math.min(se,a.width+be+Ue),a.top+He+rt,se>a.width+be+Ue?0:w-be+Ue,E-(He+rt),qi.TOP_RIGHT):new jr(a.left+a.width-(Ve+ue),a.top+He+rt),this.bottomRightContentBox=D>0||O>0?so(a.left+Math.min(fe,a.width-(be+Ue)),a.top+Math.min(ae,a.height+He+rt),Math.max(0,D-(Ve+ue)),O-(Oe+me),qi.BOTTOM_RIGHT):new jr(a.left+a.width-(Ve+ue),a.top+a.height-(Oe+me)),this.bottomLeftContentBox=W>0||H>0?so(a.left+be+Ue,a.top+Fe,Math.max(0,W-(be+Ue)),H-(Oe+me),qi.BOTTOM_LEFT):new jr(a.left+be+Ue,a.top+a.height-(Oe+me))}return e})(),qi;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(qi||(qi={}));var so=function(e,n,i,a,u){var f=4*((Math.sqrt(2)-1)/3),m=i*f,o=a*f,w=e+i,E=n+a;switch(u){case qi.TOP_LEFT:return new d0(new jr(e,E),new jr(e,E-o),new jr(w-m,n),new jr(w,n));case qi.TOP_RIGHT:return new d0(new jr(e,n),new jr(e+m,n),new jr(w,E-o),new jr(w,E));case qi.BOTTOM_RIGHT:return new d0(new jr(w,n),new jr(w,n+o),new jr(e+m,E),new jr(e,E));case qi.BOTTOM_LEFT:default:return new d0(new jr(w,E),new jr(w-m,E),new jr(e,n+o),new jr(e,n))}},oy=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Vz=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},ay=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Gz=(function(){function e(n,i,a){this.offsetX=n,this.offsetY=i,this.matrix=a,this.type=0,this.target=6}return e})(),p0=(function(){function e(n,i){this.path=n,this.target=i,this.type=1}return e})(),Kz=(function(){function e(n){this.opacity=n,this.type=2,this.target=6}return e})(),qz=function(e){return e.type===0},z4=function(e){return e.type===1},$z=function(e){return e.type===2},jB=function(e,n){return e.length===n.length?e.some(function(i,a){return i===n[a]}):!1},Wz=function(e,n,i,a,u){return e.map(function(f,m){switch(m){case 0:return f.add(n,i);case 1:return f.add(n+a,i);case 2:return f.add(n+a,i+u);case 3:return f.add(n,i+u)}return f})},H4=(function(){function e(n){this.element=n,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e})(),j4=(function(){function e(n,i){if(this.container=n,this.parent=i,this.effects=[],this.curves=new jz(this.container),this.container.styles.opacity<1&&this.effects.push(new Kz(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,u=this.container.bounds.top+this.container.styles.transformOrigin[1].number,f=this.container.styles.transform;this.effects.push(new Gz(a,u,f))}if(this.container.styles.overflowX!==0){var m=oy(this.curves),o=ay(this.curves);jB(m,o)?this.effects.push(new p0(m,6)):(this.effects.push(new p0(m,2)),this.effects.push(new p0(o,4)))}}return e.prototype.getEffects=function(n){for(var i=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,u=this.effects.slice(0);a;){var f=a.effects.filter(function(w){return!z4(w)});if(i||a.container.styles.position!==0||!a.parent){if(u.unshift.apply(u,f),i=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var m=oy(a.curves),o=ay(a.curves);jB(m,o)||u.unshift(new p0(o,6))}}else u.unshift.apply(u,f);a=a.parent}return u.filter(function(w){return ba(w.target,n)})},e})(),aw=function(e,n,i,a){e.container.elements.forEach(function(u){var f=ba(u.flags,4),m=ba(u.flags,2),o=new j4(u,e);ba(u.styles.display,2048)&&a.push(o);var w=ba(u.flags,8)?[]:a;if(f||m){var E=f||u.styles.isPositioned()?i:n,I=new H4(o);if(u.styles.isPositioned()||u.styles.opacity<1||u.styles.isTransformed()){var D=u.styles.zIndex.order;if(D<0){var O=0;E.negativeZIndex.some(function(W,H){return D>W.element.container.styles.zIndex.order?(O=H,!1):O>0}),E.negativeZIndex.splice(O,0,I)}else if(D>0){var P=0;E.positiveZIndex.some(function(W,H){return D>=W.element.container.styles.zIndex.order?(P=H+1,!1):P>0}),E.positiveZIndex.splice(P,0,I)}else E.zeroOrAutoZIndexOrTransformedOrOpacity.push(I)}else u.styles.isFloating()?E.nonPositionedFloats.push(I):E.nonPositionedInlineLevel.push(I);aw(o,I,f?I:i,w)}else u.styles.isInlineLevel()?n.inlineLevel.push(o):n.nonInlineLevel.push(o),aw(o,n,i,w);ba(u.flags,8)&&V4(u,w)})},V4=function(e,n){for(var i=e instanceof rw?e.start:1,a=e instanceof rw?e.reversed:!1,u=0;u<n.length;u++){var f=n[u];f.container instanceof S4&&typeof f.container.value=="number"&&f.container.value!==0&&(i=f.container.value),f.listValue=Hm(i,f.container.styles.listStyleType,!0),i+=a?-1:1}},Zz=function(e){var n=new j4(e,null),i=new H4(n),a=[];return aw(n,i,i,a),V4(n.container,a),i},VB=function(e,n){switch(n){case 0:return nu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return nu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return nu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return nu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Xz=function(e,n){switch(n){case 0:return nu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return nu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return nu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return nu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Yz=function(e,n){switch(n){case 0:return nu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return nu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return nu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return nu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Jz=function(e,n){switch(n){case 0:return m0(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return m0(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return m0(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return m0(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},m0=function(e,n){var i=[];return tu(e)?i.push(e.subdivide(.5,!1)):i.push(e),tu(n)?i.push(n.subdivide(.5,!0)):i.push(n),i},nu=function(e,n,i,a){var u=[];return tu(e)?u.push(e.subdivide(.5,!1)):u.push(e),tu(i)?u.push(i.subdivide(.5,!0)):u.push(i),tu(a)?u.push(a.subdivide(.5,!0).reverse()):u.push(a),tu(n)?u.push(n.subdivide(.5,!1).reverse()):u.push(n),u},G4=function(e){var n=e.bounds,i=e.styles;return n.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},ly=function(e){var n=e.styles,i=e.bounds,a=Ms(n.paddingLeft,i.width),u=Ms(n.paddingRight,i.width),f=Ms(n.paddingTop,i.width),m=Ms(n.paddingBottom,i.width);return i.add(a+n.borderLeftWidth,f+n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth+a+u),-(n.borderTopWidth+n.borderBottomWidth+f+m))},e7=function(e,n){return e===0?n.bounds:e===2?ly(n):G4(n)},t7=function(e,n){return e===0?n.bounds:e===2?ly(n):G4(n)},L1=function(e,n,i){var a=e7(tp(e.styles.backgroundOrigin,n),e),u=t7(tp(e.styles.backgroundClip,n),e),f=r7(tp(e.styles.backgroundSize,n),i,a),m=f[0],o=f[1],w=_m(tp(e.styles.backgroundPosition,n),a.width-m,a.height-o),E=n7(tp(e.styles.backgroundRepeat,n),w,f,a,u),I=Math.round(a.left+w[0]),D=Math.round(a.top+w[1]);return[E,I,D,m,o]},qd=function(e){return us(e)&&e.value===up.AUTO},g0=function(e){return typeof e=="number"},r7=function(e,n,i){var a=n[0],u=n[1],f=n[2],m=e[0],o=e[1];if(!m)return[0,0];if(oa(m)&&o&&oa(o))return[Ms(m,i.width),Ms(o,i.height)];var w=g0(f);if(us(m)&&(m.value===up.CONTAIN||m.value===up.COVER)){if(g0(f)){var E=i.width/i.height;return E<f!=(m.value===up.COVER)?[i.width,i.width/f]:[i.height*f,i.height]}return[i.width,i.height]}var I=g0(a),D=g0(u),O=I||D;if(qd(m)&&(!o||qd(o))){if(I&&D)return[a,u];if(!w&&!O)return[i.width,i.height];if(O&&w){var P=I?a:u*f,W=D?u:a/f;return[P,W]}var H=I?a:i.width,z=D?u:i.height;return[H,z]}if(w){var Z=0,se=0;return oa(m)?Z=Ms(m,i.width):oa(o)&&(se=Ms(o,i.height)),qd(m)?Z=se*f:(!o||qd(o))&&(se=Z/f),[Z,se]}var ae=null,fe=null;if(oa(m)?ae=Ms(m,i.width):o&&oa(o)&&(fe=Ms(o,i.height)),ae!==null&&(!o||qd(o))&&(fe=I&&D?ae/a*u:i.height),fe!==null&&qd(m)&&(ae=I&&D?fe/u*a:i.width),ae!==null&&fe!==null)return[ae,fe];throw new Error("Unable to calculate background-size for element")},tp=function(e,n){var i=e[n];return typeof i>"u"?e[0]:i},n7=function(e,n,i,a,u){var f=n[0],m=n[1],o=i[0],w=i[1];switch(e){case 2:return[new jr(Math.round(a.left),Math.round(a.top+m)),new jr(Math.round(a.left+a.width),Math.round(a.top+m)),new jr(Math.round(a.left+a.width),Math.round(w+a.top+m)),new jr(Math.round(a.left),Math.round(w+a.top+m))];case 3:return[new jr(Math.round(a.left+f),Math.round(a.top)),new jr(Math.round(a.left+f+o),Math.round(a.top)),new jr(Math.round(a.left+f+o),Math.round(a.height+a.top)),new jr(Math.round(a.left+f),Math.round(a.height+a.top))];case 1:return[new jr(Math.round(a.left+f),Math.round(a.top+m)),new jr(Math.round(a.left+f+o),Math.round(a.top+m)),new jr(Math.round(a.left+f+o),Math.round(a.top+m+w)),new jr(Math.round(a.left+f),Math.round(a.top+m+w))];default:return[new jr(Math.round(u.left),Math.round(u.top)),new jr(Math.round(u.left+u.width),Math.round(u.top)),new jr(Math.round(u.left+u.width),Math.round(u.height+u.top)),new jr(Math.round(u.left),Math.round(u.height+u.top))]}},i7="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",GB="Hidden Text",s7=(function(){function e(n){this._data={},this._document=n}return e.prototype.parseMetrics=function(n,i){var a=this._document.createElement("div"),u=this._document.createElement("img"),f=this._document.createElement("span"),m=this._document.body;a.style.visibility="hidden",a.style.fontFamily=n,a.style.fontSize=i,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",m.appendChild(a),u.src=i7,u.width=1,u.height=1,u.style.margin="0",u.style.padding="0",u.style.verticalAlign="baseline",f.style.fontFamily=n,f.style.fontSize=i,f.style.margin="0",f.style.padding="0",f.appendChild(this._document.createTextNode(GB)),a.appendChild(f),a.appendChild(u);var o=u.offsetTop-f.offsetTop+2;a.removeChild(f),a.appendChild(this._document.createTextNode(GB)),a.style.lineHeight="normal",u.style.verticalAlign="super";var w=u.offsetTop-a.offsetTop+2;return m.removeChild(a),{baseline:o,middle:w}},e.prototype.getMetrics=function(n,i){var a=n+" "+i;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(n,i)),this._data[a]},e})(),K4=(function(){function e(n,i){this.context=n,this.options=i}return e})(),o7=1e4,a7=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;return u._activeEffects=[],u.canvas=a.canvas?a.canvas:document.createElement("canvas"),u.ctx=u.canvas.getContext("2d"),a.canvas||(u.canvas.width=Math.floor(a.width*a.scale),u.canvas.height=Math.floor(a.height*a.scale),u.canvas.style.width=a.width+"px",u.canvas.style.height=a.height+"px"),u.fontMetrics=new s7(document),u.ctx.scale(u.options.scale,u.options.scale),u.ctx.translate(-a.x,-a.y),u.ctx.textBaseline="bottom",u._activeEffects=[],u.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),u}return n.prototype.applyEffects=function(i){for(var a=this;this._activeEffects.length;)this.popEffect();i.forEach(function(u){return a.applyEffect(u)})},n.prototype.applyEffect=function(i){this.ctx.save(),$z(i)&&(this.ctx.globalAlpha=i.opacity),qz(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),z4(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(i){return bc(this,void 0,void 0,function(){var a;return Yl(this,function(u){switch(u.label){case 0:return a=i.element.container.styles,a.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(i){return bc(this,void 0,void 0,function(){return Yl(this,function(a){switch(a.label){case 0:if(ba(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(i)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(i,a,u){var f=this;if(a===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+u);else{var m=sx(i.text);m.reduce(function(o,w){return f.ctx.fillText(w,o,i.bounds.top+u),o+f.ctx.measureText(w).width},i.bounds.left)}},n.prototype.createFontStyle=function(i){var a=i.fontVariant.filter(function(m){return m==="normal"||m==="small-caps"}).join(""),u=h7(i.fontFamily).join(", "),f=eg(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,a,i.fontWeight,f,u].join(" "),u,f]},n.prototype.renderTextNode=function(i,a){return bc(this,void 0,void 0,function(){var u,f,m,o,w,E,I,D,O=this;return Yl(this,function(P){return u=this.createFontStyle(a),f=u[0],m=u[1],o=u[2],this.ctx.font=f,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",w=this.fontMetrics.getMetrics(m,o),E=w.baseline,I=w.middle,D=a.paintOrder,i.textBounds.forEach(function(W){D.forEach(function(H){switch(H){case 0:O.ctx.fillStyle=tl(a.color),O.renderTextWithLetterSpacing(W,a.letterSpacing,E);var z=a.textShadow;z.length&&W.text.trim().length&&(z.slice(0).reverse().forEach(function(Z){O.ctx.shadowColor=tl(Z.color),O.ctx.shadowOffsetX=Z.offsetX.number*O.options.scale,O.ctx.shadowOffsetY=Z.offsetY.number*O.options.scale,O.ctx.shadowBlur=Z.blur.number,O.renderTextWithLetterSpacing(W,a.letterSpacing,E)}),O.ctx.shadowColor="",O.ctx.shadowOffsetX=0,O.ctx.shadowOffsetY=0,O.ctx.shadowBlur=0),a.textDecorationLine.length&&(O.ctx.fillStyle=tl(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(Z){switch(Z){case 1:O.ctx.fillRect(W.bounds.left,Math.round(W.bounds.top+E),W.bounds.width,1);break;case 2:O.ctx.fillRect(W.bounds.left,Math.round(W.bounds.top),W.bounds.width,1);break;case 3:O.ctx.fillRect(W.bounds.left,Math.ceil(W.bounds.top+I),W.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&W.text.trim().length&&(O.ctx.strokeStyle=tl(a.webkitTextStrokeColor),O.ctx.lineWidth=a.webkitTextStrokeWidth,O.ctx.lineJoin=window.chrome?"miter":"round",O.ctx.strokeText(W.text,W.bounds.left,W.bounds.top+E)),O.ctx.strokeStyle="",O.ctx.lineWidth=0,O.ctx.lineJoin="miter";break}})}),[2]})})},n.prototype.renderReplacedElement=function(i,a,u){if(u&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var f=ly(i),m=ay(a);this.path(m),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(u,0,0,i.intrinsicWidth,i.intrinsicHeight,f.left,f.top,f.width,f.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(i){return bc(this,void 0,void 0,function(){var a,u,f,m,o,w,se,se,E,I,D,O,fe,P,W,Fe,H,z,Z,se,ae,fe,Fe;return Yl(this,function(He){switch(He.label){case 0:this.applyEffects(i.getEffects(4)),a=i.container,u=i.curves,f=a.styles,m=0,o=a.textNodes,He.label=1;case 1:return m<o.length?(w=o[m],[4,this.renderTextNode(w,f)]):[3,4];case 2:He.sent(),He.label=3;case 3:return m++,[3,1];case 4:if(!(a instanceof B4))return[3,8];He.label=5;case 5:return He.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return se=He.sent(),this.renderReplacedElement(a,u,se),[3,8];case 7:return He.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof C4&&this.renderReplacedElement(a,u,a.canvas),!(a instanceof E4))return[3,12];He.label=9;case 9:return He.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return se=He.sent(),this.renderReplacedElement(a,u,se),[3,12];case 11:return He.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof T4&&a.tree?(E=new n(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,E.render(a.tree)]):[3,14];case 13:I=He.sent(),a.width&&a.height&&this.ctx.drawImage(I,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),He.label=14;case 14:if(a instanceof ox&&(D=Math.min(a.bounds.width,a.bounds.height),a.type===ry?a.checked&&(this.ctx.save(),this.path([new jr(a.bounds.left+D*.39363,a.bounds.top+D*.79),new jr(a.bounds.left+D*.16,a.bounds.top+D*.5549),new jr(a.bounds.left+D*.27347,a.bounds.top+D*.44071),new jr(a.bounds.left+D*.39694,a.bounds.top+D*.5649),new jr(a.bounds.left+D*.72983,a.bounds.top+D*.23),new jr(a.bounds.left+D*.84,a.bounds.top+D*.34085),new jr(a.bounds.left+D*.39363,a.bounds.top+D*.79)]),this.ctx.fillStyle=tl(LB),this.ctx.fill(),this.ctx.restore()):a.type===ny&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+D/2,a.bounds.top+D/2,D/4,0,Math.PI*2,!0),this.ctx.fillStyle=tl(LB),this.ctx.fill(),this.ctx.restore())),l7(a)&&a.value.length){switch(O=this.createFontStyle(f),fe=O[0],P=O[1],W=this.fontMetrics.getMetrics(fe,P).baseline,this.ctx.font=fe,this.ctx.fillStyle=tl(f.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=A7(a.styles.textAlign),Fe=ly(a),H=0,a.styles.textAlign){case 1:H+=Fe.width/2;break;case 2:H+=Fe.width;break}z=Fe.add(H,0,0,-Fe.height/2+1),this.ctx.save(),this.path([new jr(Fe.left,Fe.top),new jr(Fe.left+Fe.width,Fe.top),new jr(Fe.left+Fe.width,Fe.top+Fe.height),new jr(Fe.left,Fe.top+Fe.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Tm(a.value,z),f.letterSpacing,W),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ba(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(Z=a.styles.listStyleImage,Z.type!==0)return[3,18];se=void 0,ae=Z.url,He.label=15;case 15:return He.trys.push([15,17,,18]),[4,this.context.cache.match(ae)];case 16:return se=He.sent(),this.ctx.drawImage(se,a.bounds.left-(se.width+10),a.bounds.top),[3,18];case 17:return He.sent(),this.context.logger.error("Error loading list-style-image "+ae),[3,18];case 18:return[3,20];case 19:i.listValue&&a.styles.listStyleType!==-1&&(fe=this.createFontStyle(f)[0],this.ctx.font=fe,this.ctx.fillStyle=tl(f.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Fe=new zh(a.bounds.left,a.bounds.top+Ms(a.styles.paddingTop,a.bounds.width),a.bounds.width,pB(f.lineHeight,f.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Tm(i.listValue,Fe),f.letterSpacing,pB(f.lineHeight,f.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),He.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(i){return bc(this,void 0,void 0,function(){var a,u,Z,f,m,Z,o,w,Z,E,I,Z,D,O,Z,P,W,Z,H,z,Z;return Yl(this,function(se){switch(se.label){case 0:if(ba(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:se.sent(),a=0,u=i.negativeZIndex,se.label=2;case 2:return a<u.length?(Z=u[a],[4,this.renderStack(Z)]):[3,5];case 3:se.sent(),se.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:se.sent(),f=0,m=i.nonInlineLevel,se.label=7;case 7:return f<m.length?(Z=m[f],[4,this.renderNode(Z)]):[3,10];case 8:se.sent(),se.label=9;case 9:return f++,[3,7];case 10:o=0,w=i.nonPositionedFloats,se.label=11;case 11:return o<w.length?(Z=w[o],[4,this.renderStack(Z)]):[3,14];case 12:se.sent(),se.label=13;case 13:return o++,[3,11];case 14:E=0,I=i.nonPositionedInlineLevel,se.label=15;case 15:return E<I.length?(Z=I[E],[4,this.renderStack(Z)]):[3,18];case 16:se.sent(),se.label=17;case 17:return E++,[3,15];case 18:D=0,O=i.inlineLevel,se.label=19;case 19:return D<O.length?(Z=O[D],[4,this.renderNode(Z)]):[3,22];case 20:se.sent(),se.label=21;case 21:return D++,[3,19];case 22:P=0,W=i.zeroOrAutoZIndexOrTransformedOrOpacity,se.label=23;case 23:return P<W.length?(Z=W[P],[4,this.renderStack(Z)]):[3,26];case 24:se.sent(),se.label=25;case 25:return P++,[3,23];case 26:H=0,z=i.positiveZIndex,se.label=27;case 27:return H<z.length?(Z=z[H],[4,this.renderStack(Z)]):[3,30];case 28:se.sent(),se.label=29;case 29:return H++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},n.prototype.formatPath=function(i){var a=this;i.forEach(function(u,f){var m=tu(u)?u.start:u;f===0?a.ctx.moveTo(m.x,m.y):a.ctx.lineTo(m.x,m.y),tu(u)&&a.ctx.bezierCurveTo(u.startControl.x,u.startControl.y,u.endControl.x,u.endControl.y,u.end.x,u.end.y)})},n.prototype.renderRepeat=function(i,a,u,f){this.path(i),this.ctx.fillStyle=a,this.ctx.translate(u,f),this.ctx.fill(),this.ctx.translate(-u,-f)},n.prototype.resizeImage=function(i,a,u){var f;if(i.width===a&&i.height===u)return i;var m=(f=this.canvas.ownerDocument)!==null&&f!==void 0?f:document,o=m.createElement("canvas");o.width=Math.max(1,a),o.height=Math.max(1,u);var w=o.getContext("2d");return w.drawImage(i,0,0,i.width,i.height,0,0,a,u),o},n.prototype.renderBackgroundImage=function(i){return bc(this,void 0,void 0,function(){var a,u,f,m,o,w;return Yl(this,function(E){switch(E.label){case 0:a=i.styles.backgroundImage.length-1,u=function(I){var D,O,P,rt,lt,ot,Ue,Ie,Oe,W,rt,lt,ot,Ue,Ie,H,z,Z,se,ae,fe,Fe,He,Ve,Oe,be,rt,ue,me,Ue,Ie,pt,lt,ot,Ne,Te,yt,Le,ie,Ce,Me,qe;return Yl(this,function(at){switch(at.label){case 0:if(I.type!==0)return[3,5];D=void 0,O=I.url,at.label=1;case 1:return at.trys.push([1,3,,4]),[4,f.context.cache.match(O)];case 2:return D=at.sent(),[3,4];case 3:return at.sent(),f.context.logger.error("Error loading background-image "+O),[3,4];case 4:return D&&(P=L1(i,a,[D.width,D.height,D.width/D.height]),rt=P[0],lt=P[1],ot=P[2],Ue=P[3],Ie=P[4],Oe=f.ctx.createPattern(f.resizeImage(D,Ue,Ie),"repeat"),f.renderRepeat(rt,Oe,lt,ot)),[3,6];case 5:qQ(I)?(W=L1(i,a,[null,null,null]),rt=W[0],lt=W[1],ot=W[2],Ue=W[3],Ie=W[4],H=HQ(I.angle,Ue,Ie),z=H[0],Z=H[1],se=H[2],ae=H[3],fe=H[4],Fe=document.createElement("canvas"),Fe.width=Ue,Fe.height=Ie,He=Fe.getContext("2d"),Ve=He.createLinearGradient(Z,ae,se,fe),fB(I.stops,z).forEach(function(et){return Ve.addColorStop(et.stop,tl(et.color))}),He.fillStyle=Ve,He.fillRect(0,0,Ue,Ie),Ue>0&&Ie>0&&(Oe=f.ctx.createPattern(Fe,"repeat"),f.renderRepeat(rt,Oe,lt,ot))):$Q(I)&&(be=L1(i,a,[null,null,null]),rt=be[0],ue=be[1],me=be[2],Ue=be[3],Ie=be[4],pt=I.position.length===0?[rx]:I.position,lt=Ms(pt[0],Ue),ot=Ms(pt[pt.length-1],Ie),Ne=jQ(I,lt,ot,Ue,Ie),Te=Ne[0],yt=Ne[1],Te>0&&yt>0&&(Le=f.ctx.createRadialGradient(ue+lt,me+ot,0,ue+lt,me+ot,Te),fB(I.stops,Te*2).forEach(function(et){return Le.addColorStop(et.stop,tl(et.color))}),f.path(rt),f.ctx.fillStyle=Le,Te!==yt?(ie=i.bounds.left+.5*i.bounds.width,Ce=i.bounds.top+.5*i.bounds.height,Me=yt/Te,qe=1/Me,f.ctx.save(),f.ctx.translate(ie,Ce),f.ctx.transform(1,0,0,Me,0,0),f.ctx.translate(-ie,-Ce),f.ctx.fillRect(ue,qe*(me-Ce)+Ce,Ue,Ie*qe),f.ctx.restore()):f.ctx.fill())),at.label=6;case 6:return a--,[2]}})},f=this,m=0,o=i.styles.backgroundImage.slice(0).reverse(),E.label=1;case 1:return m<o.length?(w=o[m],[5,u(w)]):[3,4];case 2:E.sent(),E.label=3;case 3:return m++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(i,a,u){return bc(this,void 0,void 0,function(){return Yl(this,function(f){return this.path(VB(u,a)),this.ctx.fillStyle=tl(i),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(i,a,u,f){return bc(this,void 0,void 0,function(){var m,o;return Yl(this,function(w){switch(w.label){case 0:return a<3?[4,this.renderSolidBorder(i,u,f)]:[3,2];case 1:return w.sent(),[2];case 2:return m=Xz(f,u),this.path(m),this.ctx.fillStyle=tl(i),this.ctx.fill(),o=Yz(f,u),this.path(o),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(i){return bc(this,void 0,void 0,function(){var a,u,f,m,o,w,E,I,D=this;return Yl(this,function(O){switch(O.label){case 0:return this.applyEffects(i.getEffects(2)),a=i.container.styles,u=!_f(a.backgroundColor)||a.backgroundImage.length,f=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],m=c7(tp(a.backgroundClip,0),i.curves),u||a.boxShadow.length?(this.ctx.save(),this.path(m),this.ctx.clip(),_f(a.backgroundColor)||(this.ctx.fillStyle=tl(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:O.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(P){D.ctx.save();var W=oy(i.curves),H=P.inset?0:o7,z=Wz(W,-H+(P.inset?1:-1)*P.spread.number,(P.inset?1:-1)*P.spread.number,P.spread.number*(P.inset?-2:2),P.spread.number*(P.inset?-2:2));P.inset?(D.path(W),D.ctx.clip(),D.mask(z)):(D.mask(W),D.ctx.clip(),D.path(z)),D.ctx.shadowOffsetX=P.offsetX.number+H,D.ctx.shadowOffsetY=P.offsetY.number,D.ctx.shadowColor=tl(P.color),D.ctx.shadowBlur=P.blur.number,D.ctx.fillStyle=P.inset?tl(P.color):"rgba(0,0,0,1)",D.ctx.fill(),D.ctx.restore()}),O.label=2;case 2:o=0,w=0,E=f,O.label=3;case 3:return w<E.length?(I=E[w],I.style!==0&&!_f(I.color)&&I.width>0?I.style!==2?[3,5]:[4,this.renderDashedDottedBorder(I.color,I.width,o,i.curves,2)]:[3,11]):[3,13];case 4:return O.sent(),[3,11];case 5:return I.style!==3?[3,7]:[4,this.renderDashedDottedBorder(I.color,I.width,o,i.curves,3)];case 6:return O.sent(),[3,11];case 7:return I.style!==4?[3,9]:[4,this.renderDoubleBorder(I.color,I.width,o,i.curves)];case 8:return O.sent(),[3,11];case 9:return[4,this.renderSolidBorder(I.color,o,i.curves)];case 10:O.sent(),O.label=11;case 11:o++,O.label=12;case 12:return w++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(i,a,u,f,m){return bc(this,void 0,void 0,function(){var o,w,E,I,D,O,P,W,H,z,Z,se,ae,fe,Fe,He,Fe,He;return Yl(this,function(Ve){return this.ctx.save(),o=Jz(f,u),w=VB(f,u),m===2&&(this.path(w),this.ctx.clip()),tu(w[0])?(E=w[0].start.x,I=w[0].start.y):(E=w[0].x,I=w[0].y),tu(w[1])?(D=w[1].end.x,O=w[1].end.y):(D=w[1].x,O=w[1].y),u===0||u===2?P=Math.abs(E-D):P=Math.abs(I-O),this.ctx.beginPath(),m===3?this.formatPath(o):this.formatPath(w.slice(0,2)),W=a<3?a*3:a*2,H=a<3?a*2:a,m===3&&(W=a,H=a),z=!0,P<=W*2?z=!1:P<=W*2+H?(Z=P/(2*W+H),W*=Z,H*=Z):(se=Math.floor((P+H)/(W+H)),ae=(P-se*W)/(se-1),fe=(P-(se+1)*W)/se,H=fe<=0||Math.abs(H-ae)<Math.abs(H-fe)?ae:fe),z&&(m===3?this.ctx.setLineDash([0,W+H]):this.ctx.setLineDash([W,H])),m===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=tl(i),this.ctx.stroke(),this.ctx.setLineDash([]),m===2&&(tu(w[0])&&(Fe=w[3],He=w[0],this.ctx.beginPath(),this.formatPath([new jr(Fe.end.x,Fe.end.y),new jr(He.start.x,He.start.y)]),this.ctx.stroke()),tu(w[1])&&(Fe=w[1],He=w[2],this.ctx.beginPath(),this.formatPath([new jr(Fe.end.x,Fe.end.y),new jr(He.start.x,He.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(i){return bc(this,void 0,void 0,function(){var a;return Yl(this,function(u){switch(u.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=tl(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=Zz(i),[4,this.renderStack(a)];case 1:return u.sent(),this.applyEffects([]),[2,this.canvas]}})})},n})(K4),l7=function(e){return e instanceof I4||e instanceof F4?!0:e instanceof ox&&e.type!==ny&&e.type!==ry},c7=function(e,n){switch(e){case 0:return oy(n);case 2:return Vz(n);case 1:default:return ay(n)}},A7=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},u7=["-apple-system","system-ui"],h7=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(n){return u7.indexOf(n)===-1}):e},f7=(function(e){Lu(n,e);function n(i,a){var u=e.call(this,i,a)||this;return u.canvas=a.canvas?a.canvas:document.createElement("canvas"),u.ctx=u.canvas.getContext("2d"),u.options=a,u.canvas.width=Math.floor(a.width*a.scale),u.canvas.height=Math.floor(a.height*a.scale),u.canvas.style.width=a.width+"px",u.canvas.style.height=a.height+"px",u.ctx.scale(u.options.scale,u.options.scale),u.ctx.translate(-a.x,-a.y),u.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),u}return n.prototype.render=function(i){return bc(this,void 0,void 0,function(){var a,u;return Yl(this,function(f){switch(f.label){case 0:return a=tw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,d7(a)];case 1:return u=f.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=tl(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(u,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n})(K4),d7=function(e){return new Promise(function(n,i){var a=new Image;a.onload=function(){n(a)},a.onerror=i,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},p7=(function(){function e(n){var i=n.id,a=n.enabled;this.id=i,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Wg([this.id,this.getTime()+"ms"],n))},e.prototype.warn=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.error=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.instances={},e})(),m7=(function(){function e(n,i){var a;this.windowBounds=i,this.instanceName="#"+e.instanceCount++,this.logger=new p7({id:this.instanceName,enabled:n.logging}),this.cache=(a=n.cache)!==null&&a!==void 0?a:new Dz(this,n)}return e.instanceCount=1,e})(),q4=function(e,n){return n===void 0&&(n={}),g7(e,n)};typeof window<"u"&&O4.setContext(window);var g7=function(e,n){return bc(void 0,void 0,void 0,function(){var i,a,u,f,m,o,w,E,I,D,O,P,W,H,z,Z,se,ae,fe,Fe,Ve,He,Ve,Oe,be,rt,ue,me,Ue,Ie,pt,lt,ot,Ne,Te,yt,Le,ie,Ce,Me;return Yl(this,function(qe){switch(qe.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=e.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(a=i.defaultView,!a)throw new Error("Document is not attached to a Window");return u={allowTaint:(Oe=n.allowTaint)!==null&&Oe!==void 0?Oe:!1,imageTimeout:(be=n.imageTimeout)!==null&&be!==void 0?be:15e3,proxy:n.proxy,useCORS:(rt=n.useCORS)!==null&&rt!==void 0?rt:!1},f=O_({logging:(ue=n.logging)!==null&&ue!==void 0?ue:!0,cache:n.cache},u),m={windowWidth:(me=n.windowWidth)!==null&&me!==void 0?me:a.innerWidth,windowHeight:(Ue=n.windowHeight)!==null&&Ue!==void 0?Ue:a.innerHeight,scrollX:(Ie=n.scrollX)!==null&&Ie!==void 0?Ie:a.pageXOffset,scrollY:(pt=n.scrollY)!==null&&pt!==void 0?pt:a.pageYOffset},o=new zh(m.scrollX,m.scrollY,m.windowWidth,m.windowHeight),w=new m7(f,o),E=(lt=n.foreignObjectRendering)!==null&&lt!==void 0?lt:!1,I={allowTaint:(ot=n.allowTaint)!==null&&ot!==void 0?ot:!1,onclone:n.onclone,ignoreElements:n.ignoreElements,inlineImages:E,copyStyles:E},w.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),D=new zB(w,e,I),O=D.clonedReferenceElement,O?[4,D.toIFrame(i,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return P=qe.sent(),W=ax(O)||vz(O)?W6(O.ownerDocument):Oy(w,O),H=W.width,z=W.height,Z=W.left,se=W.top,ae=y7(w,O,n.backgroundColor),fe={canvas:n.canvas,backgroundColor:ae,scale:(Te=(Ne=n.scale)!==null&&Ne!==void 0?Ne:a.devicePixelRatio)!==null&&Te!==void 0?Te:1,x:((yt=n.x)!==null&&yt!==void 0?yt:0)+Z,y:((Le=n.y)!==null&&Le!==void 0?Le:0)+se,width:(ie=n.width)!==null&&ie!==void 0?ie:Math.ceil(H),height:(Ce=n.height)!==null&&Ce!==void 0?Ce:Math.ceil(z)},E?(w.logger.debug("Document cloned, using foreign object rendering"),Ve=new f7(w,fe),[4,Ve.render(O)]):[3,3];case 2:return Fe=qe.sent(),[3,5];case 3:return w.logger.debug("Document cloned, element located at "+Z+","+se+" with size "+H+"x"+z+" using computed rendering"),w.logger.debug("Starting DOM parsing"),He=L4(w,O),ae===He.styles.backgroundColor&&(He.styles.backgroundColor=Nh.TRANSPARENT),w.logger.debug("Starting renderer for element at "+fe.x+","+fe.y+" with size "+fe.width+"x"+fe.height),Ve=new a7(w,fe),[4,Ve.render(He)];case 4:Fe=qe.sent(),qe.label=5;case 5:return(!((Me=n.removeContainer)!==null&&Me!==void 0)||Me)&&(zB.destroy(P)||w.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),w.logger.debug("Finished rendering"),[2,Fe]}})})},y7=function(e,n,i){var a=n.ownerDocument,u=a.documentElement?Fm(e,getComputedStyle(a.documentElement).backgroundColor):Nh.TRANSPARENT,f=a.body?Fm(e,getComputedStyle(a.body).backgroundColor):Nh.TRANSPARENT,m=typeof i=="string"?Fm(e,i):i===null?Nh.TRANSPARENT:4294967295;return n===a.documentElement?_f(u)?_f(f)?m:f:u:m};const v7=Object.freeze(Object.defineProperty({__proto__:null,default:q4},Symbol.toStringTag,{value:"Module"})),_7="modulepreload",w7=function(e){return"/Domapus/"+e},KB={},M1=function(n,i,a){let u=Promise.resolve();if(i&&i.length>0){let w=function(E){return Promise.all(E.map(I=>Promise.resolve(I).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),o=m?.nonce||m?.getAttribute("nonce");u=w(i.map(E=>{if(E=w7(E),E in KB)return;KB[E]=!0;const I=E.endsWith(".css"),D=I?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${D}`))return;const O=document.createElement("link");if(O.rel=I?"stylesheet":_7,I||(O.as="script"),O.crossOrigin="",O.href=E,o&&O.setAttribute("nonce",o),document.head.appendChild(O),I)return new Promise((P,W)=>{O.addEventListener("load",P),O.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${E}`)))})}))}function f(m){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=m,window.dispatchEvent(o),!o.defaultPrevented)throw m}return u.then(m=>{for(const o of m||[])o.status==="rejected"&&f(o.reason);return n().catch(f)})};function rs(e){"@babel/helpers - typeof";return rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rs(e)}function x7(e){if(Array.isArray(e))return e}function b7(e,n){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,f,m,o=[],w=!0,E=!1;try{if(f=(i=i.call(e)).next,n!==0)for(;!(w=(a=f.call(i)).done)&&(o.push(a.value),o.length!==n);w=!0);}catch(I){E=!0,u=I}finally{try{if(!w&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw u}}return o}}function qB(e,n){(n==null||n>e.length)&&(n=e.length);for(var i=0,a=Array(n);i<n;i++)a[i]=e[i];return a}function B7(e,n){if(e){if(typeof e=="string")return qB(e,n);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qB(e,n):void 0}}function C7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $B(e,n){return x7(e)||b7(e,n)||B7(e,n)||C7()}function WB(e,n="utf8"){return new TextDecoder(n).decode(e)}const E7=new TextEncoder;function S7(e){return E7.encode(e)}const F7=1024*8,I7=(()=>{const e=new Uint8Array(4),n=new Uint32Array(e.buffer);return!((n[0]=1)&e[0])})(),k1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class lx{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=F7,i={}){let a=!1;typeof n=="number"?n=new ArrayBuffer(n):(a=!0,this.lastWrittenByte=n.byteLength);const u=i.offset?i.offset>>>0:0,f=n.byteLength-u;let m=u;(ArrayBuffer.isView(n)||n instanceof lx)&&(n.byteLength!==n.buffer.byteLength&&(m=n.byteOffset+u),n=n.buffer),a?this.lastWrittenByte=f:this.lastWrittenByte=0,this.buffer=n,this.length=f,this.byteLength=f,this.byteOffset=m,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,m,f),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const a=(this.offset+n)*2,u=new Uint8Array(a);u.set(new Uint8Array(this.buffer)),this.buffer=u.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,i){const a=k1[i].BYTES_PER_ELEMENT*n,u=this.byteOffset+this.offset,f=this.buffer.slice(u,u+a);if(this.littleEndian===I7&&i!=="uint8"&&i!=="int8"){const o=new Uint8Array(this.buffer.slice(u,u+a));o.reverse();const w=new k1[i](o.buffer);return this.offset+=a,w.reverse(),w}const m=new k1[i](f);return this.offset+=a,m}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let i="";for(let a=0;a<n;a++)i+=this.readChar();return i}readUtf8(n=1){return WB(this.readBytes(n))}decodeText(n=1,i="utf8"){return WB(this.readBytes(n),i)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let i=0;i<n.length;i++)this._data.setUint8(this.offset++,n[i]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let i=0;i<n.length;i++)this.writeUint8(n.charCodeAt(i));return this}writeUtf8(n){return this.writeBytes(S7(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Sp(e){let n=e.length;for(;--n>=0;)e[n]=0}const T7=3,P7=258,$4=29,L7=256,M7=L7+1+$4,W4=30,k7=512,U7=new Array((M7+2)*2);Sp(U7);const D7=new Array(W4*2);Sp(D7);const R7=new Array(k7);Sp(R7);const N7=new Array(P7-T7+1);Sp(N7);const Q7=new Array($4);Sp(Q7);const O7=new Array(W4);Sp(O7);const z7=(e,n,i,a)=>{let u=e&65535|0,f=e>>>16&65535|0,m=0;for(;i!==0;){m=i>2e3?2e3:i,i-=m;do u=u+n[a++]|0,f=f+u|0;while(--m);u%=65521,f%=65521}return u|f<<16|0};var lw=z7;const H7=()=>{let e,n=[];for(var i=0;i<256;i++){e=i;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;n[i]=e}return n},j7=new Uint32Array(H7()),V7=(e,n,i,a)=>{const u=j7,f=a+i;e^=-1;for(let m=a;m<f;m++)e=e>>>8^u[(e^n[m])&255];return e^-1};var Xu=V7,cw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Z4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const G7=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var K7=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const i=n.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const a in i)G7(i,a)&&(e[a]=i[a])}}return e},q7=e=>{let n=0;for(let a=0,u=e.length;a<u;a++)n+=e[a].length;const i=new Uint8Array(n);for(let a=0,u=0,f=e.length;a<f;a++){let m=e[a];i.set(m,u),u+=m.length}return i},X4={assign:K7,flattenChunks:q7};let Y4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Y4=!1}const jm=new Uint8Array(256);for(let e=0;e<256;e++)jm[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;jm[254]=jm[254]=1;var $7=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,i,a,u,f,m=e.length,o=0;for(u=0;u<m;u++)i=e.charCodeAt(u),(i&64512)===55296&&u+1<m&&(a=e.charCodeAt(u+1),(a&64512)===56320&&(i=65536+(i-55296<<10)+(a-56320),u++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),f=0,u=0;f<o;u++)i=e.charCodeAt(u),(i&64512)===55296&&u+1<m&&(a=e.charCodeAt(u+1),(a&64512)===56320&&(i=65536+(i-55296<<10)+(a-56320),u++)),i<128?n[f++]=i:i<2048?(n[f++]=192|i>>>6,n[f++]=128|i&63):i<65536?(n[f++]=224|i>>>12,n[f++]=128|i>>>6&63,n[f++]=128|i&63):(n[f++]=240|i>>>18,n[f++]=128|i>>>12&63,n[f++]=128|i>>>6&63,n[f++]=128|i&63);return n};const W7=(e,n)=>{if(n<65534&&e.subarray&&Y4)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let i="";for(let a=0;a<n;a++)i+=String.fromCharCode(e[a]);return i};var Z7=(e,n)=>{const i=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let a,u;const f=new Array(i*2);for(u=0,a=0;a<i;){let m=e[a++];if(m<128){f[u++]=m;continue}let o=jm[m];if(o>4){f[u++]=65533,a+=o-1;continue}for(m&=o===2?31:o===3?15:7;o>1&&a<i;)m=m<<6|e[a++]&63,o--;if(o>1){f[u++]=65533;continue}m<65536?f[u++]=m:(m-=65536,f[u++]=55296|m>>10&1023,f[u++]=56320|m&1023)}return W7(f,u)},X7=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let i=n-1;for(;i>=0&&(e[i]&192)===128;)i--;return i<0||i===0?n:i+jm[e[i]]>n?i:n},Aw={string2buf:$7,buf2string:Z7,utf8border:X7};function Y7(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var J7=Y7;const y0=16209,eH=16191;var tH=function(n,i){let a,u,f,m,o,w,E,I,D,O,P,W,H,z,Z,se,ae,fe,Fe,He,Ve,Oe,be,rt;const ue=n.state;a=n.next_in,be=n.input,u=a+(n.avail_in-5),f=n.next_out,rt=n.output,m=f-(i-n.avail_out),o=f+(n.avail_out-257),w=ue.dmax,E=ue.wsize,I=ue.whave,D=ue.wnext,O=ue.window,P=ue.hold,W=ue.bits,H=ue.lencode,z=ue.distcode,Z=(1<<ue.lenbits)-1,se=(1<<ue.distbits)-1;e:do{W<15&&(P+=be[a++]<<W,W+=8,P+=be[a++]<<W,W+=8),ae=H[P&Z];t:for(;;){if(fe=ae>>>24,P>>>=fe,W-=fe,fe=ae>>>16&255,fe===0)rt[f++]=ae&65535;else if(fe&16){Fe=ae&65535,fe&=15,fe&&(W<fe&&(P+=be[a++]<<W,W+=8),Fe+=P&(1<<fe)-1,P>>>=fe,W-=fe),W<15&&(P+=be[a++]<<W,W+=8,P+=be[a++]<<W,W+=8),ae=z[P&se];r:for(;;){if(fe=ae>>>24,P>>>=fe,W-=fe,fe=ae>>>16&255,fe&16){if(He=ae&65535,fe&=15,W<fe&&(P+=be[a++]<<W,W+=8,W<fe&&(P+=be[a++]<<W,W+=8)),He+=P&(1<<fe)-1,He>w){n.msg="invalid distance too far back",ue.mode=y0;break e}if(P>>>=fe,W-=fe,fe=f-m,He>fe){if(fe=He-fe,fe>I&&ue.sane){n.msg="invalid distance too far back",ue.mode=y0;break e}if(Ve=0,Oe=O,D===0){if(Ve+=E-fe,fe<Fe){Fe-=fe;do rt[f++]=O[Ve++];while(--fe);Ve=f-He,Oe=rt}}else if(D<fe){if(Ve+=E+D-fe,fe-=D,fe<Fe){Fe-=fe;do rt[f++]=O[Ve++];while(--fe);if(Ve=0,D<Fe){fe=D,Fe-=fe;do rt[f++]=O[Ve++];while(--fe);Ve=f-He,Oe=rt}}}else if(Ve+=D-fe,fe<Fe){Fe-=fe;do rt[f++]=O[Ve++];while(--fe);Ve=f-He,Oe=rt}for(;Fe>2;)rt[f++]=Oe[Ve++],rt[f++]=Oe[Ve++],rt[f++]=Oe[Ve++],Fe-=3;Fe&&(rt[f++]=Oe[Ve++],Fe>1&&(rt[f++]=Oe[Ve++]))}else{Ve=f-He;do rt[f++]=rt[Ve++],rt[f++]=rt[Ve++],rt[f++]=rt[Ve++],Fe-=3;while(Fe>2);Fe&&(rt[f++]=rt[Ve++],Fe>1&&(rt[f++]=rt[Ve++]))}}else if((fe&64)===0){ae=z[(ae&65535)+(P&(1<<fe)-1)];continue r}else{n.msg="invalid distance code",ue.mode=y0;break e}break}}else if((fe&64)===0){ae=H[(ae&65535)+(P&(1<<fe)-1)];continue t}else if(fe&32){ue.mode=eH;break e}else{n.msg="invalid literal/length code",ue.mode=y0;break e}break}}while(a<u&&f<o);Fe=W>>3,a-=Fe,W-=Fe<<3,P&=(1<<W)-1,n.next_in=a,n.next_out=f,n.avail_in=a<u?5+(u-a):5-(a-u),n.avail_out=f<o?257+(o-f):257-(f-o),ue.hold=P,ue.bits=W};const $d=15,ZB=852,XB=592,YB=0,U1=1,JB=2,rH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),iH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),sH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),oH=(e,n,i,a,u,f,m,o)=>{const w=o.bits;let E=0,I=0,D=0,O=0,P=0,W=0,H=0,z=0,Z=0,se=0,ae,fe,Fe,He,Ve,Oe=null,be;const rt=new Uint16Array($d+1),ue=new Uint16Array($d+1);let me=null,Ue,Ie,pt;for(E=0;E<=$d;E++)rt[E]=0;for(I=0;I<a;I++)rt[n[i+I]]++;for(P=w,O=$d;O>=1&&rt[O]===0;O--);if(P>O&&(P=O),O===0)return u[f++]=1<<24|64<<16|0,u[f++]=1<<24|64<<16|0,o.bits=1,0;for(D=1;D<O&&rt[D]===0;D++);for(P<D&&(P=D),z=1,E=1;E<=$d;E++)if(z<<=1,z-=rt[E],z<0)return-1;if(z>0&&(e===YB||O!==1))return-1;for(ue[1]=0,E=1;E<$d;E++)ue[E+1]=ue[E]+rt[E];for(I=0;I<a;I++)n[i+I]!==0&&(m[ue[n[i+I]]++]=I);if(e===YB?(Oe=me=m,be=20):e===U1?(Oe=rH,me=nH,be=257):(Oe=iH,me=sH,be=0),se=0,I=0,E=D,Ve=f,W=P,H=0,Fe=-1,Z=1<<P,He=Z-1,e===U1&&Z>ZB||e===JB&&Z>XB)return 1;for(;;){Ue=E-H,m[I]+1<be?(Ie=0,pt=m[I]):m[I]>=be?(Ie=me[m[I]-be],pt=Oe[m[I]-be]):(Ie=96,pt=0),ae=1<<E-H,fe=1<<W,D=fe;do fe-=ae,u[Ve+(se>>H)+fe]=Ue<<24|Ie<<16|pt|0;while(fe!==0);for(ae=1<<E-1;se&ae;)ae>>=1;if(ae!==0?(se&=ae-1,se+=ae):se=0,I++,--rt[E]===0){if(E===O)break;E=n[i+m[I]]}if(E>P&&(se&He)!==Fe){for(H===0&&(H=P),Ve+=D,W=E-H,z=1<<W;W+H<O&&(z-=rt[W+H],!(z<=0));)W++,z<<=1;if(Z+=1<<W,e===U1&&Z>ZB||e===JB&&Z>XB)return 1;Fe=se&He,u[Fe]=P<<24|W<<16|Ve-f|0}}return se!==0&&(u[Ve+se]=E-H<<24|64<<16|0),o.bits=P,0};var Lm=oH;const aH=0,J4=1,eI=2,{Z_FINISH:eC,Z_BLOCK:lH,Z_TREES:v0,Z_OK:od,Z_STREAM_END:cH,Z_NEED_DICT:AH,Z_STREAM_ERROR:su,Z_DATA_ERROR:tI,Z_MEM_ERROR:rI,Z_BUF_ERROR:uH,Z_DEFLATED:tC}=Z4,Zy=16180,rC=16181,nC=16182,iC=16183,sC=16184,oC=16185,aC=16186,lC=16187,cC=16188,AC=16189,cy=16190,Dh=16191,D1=16192,uC=16193,R1=16194,hC=16195,fC=16196,dC=16197,pC=16198,_0=16199,w0=16200,mC=16201,gC=16202,yC=16203,vC=16204,_C=16205,N1=16206,wC=16207,xC=16208,oo=16209,nI=16210,iI=16211,hH=852,fH=592,dH=15,pH=dH,bC=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function mH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const cd=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<Zy||n.mode>iI?1:0},sI=e=>{if(cd(e))return su;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=Zy,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(hH),n.distcode=n.distdyn=new Int32Array(fH),n.sane=1,n.back=-1,od},oI=e=>{if(cd(e))return su;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,sI(e)},aI=(e,n)=>{let i;if(cd(e))return su;const a=e.state;return n<0?(i=0,n=-n):(i=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?su:(a.window!==null&&a.wbits!==n&&(a.window=null),a.wrap=i,a.wbits=n,oI(e))},lI=(e,n)=>{if(!e)return su;const i=new mH;e.state=i,i.strm=e,i.window=null,i.mode=Zy;const a=aI(e,n);return a!==od&&(e.state=null),a},gH=e=>lI(e,pH);let BC=!0,Q1,O1;const yH=e=>{if(BC){Q1=new Int32Array(512),O1=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(Lm(J4,e.lens,0,288,Q1,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;Lm(eI,e.lens,0,32,O1,0,e.work,{bits:5}),BC=!1}e.lencode=Q1,e.lenbits=9,e.distcode=O1,e.distbits=5},cI=(e,n,i,a)=>{let u;const f=e.state;return f.window===null&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new Uint8Array(f.wsize)),a>=f.wsize?(f.window.set(n.subarray(i-f.wsize,i),0),f.wnext=0,f.whave=f.wsize):(u=f.wsize-f.wnext,u>a&&(u=a),f.window.set(n.subarray(i-a,i-a+u),f.wnext),a-=u,a?(f.window.set(n.subarray(i-a,i),0),f.wnext=a,f.whave=f.wsize):(f.wnext+=u,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=u))),0},vH=(e,n)=>{let i,a,u,f,m,o,w,E,I,D,O,P,W,H,z=0,Z,se,ae,fe,Fe,He,Ve,Oe;const be=new Uint8Array(4);let rt,ue;const me=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(cd(e)||!e.output||!e.input&&e.avail_in!==0)return su;i=e.state,i.mode===Dh&&(i.mode=D1),m=e.next_out,u=e.output,w=e.avail_out,f=e.next_in,a=e.input,o=e.avail_in,E=i.hold,I=i.bits,D=o,O=w,Oe=od;e:for(;;)switch(i.mode){case Zy:if(i.wrap===0){i.mode=D1;break}for(;I<16;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if(i.wrap&2&&E===35615){i.wbits===0&&(i.wbits=15),i.check=0,be[0]=E&255,be[1]=E>>>8&255,i.check=Xu(i.check,be,2,0),E=0,I=0,i.mode=rC;break}if(i.head&&(i.head.done=!1),!(i.wrap&1)||(((E&255)<<8)+(E>>8))%31){e.msg="incorrect header check",i.mode=oo;break}if((E&15)!==tC){e.msg="unknown compression method",i.mode=oo;break}if(E>>>=4,I-=4,Ve=(E&15)+8,i.wbits===0&&(i.wbits=Ve),Ve>15||Ve>i.wbits){e.msg="invalid window size",i.mode=oo;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=E&512?AC:Dh,E=0,I=0;break;case rC:for(;I<16;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if(i.flags=E,(i.flags&255)!==tC){e.msg="unknown compression method",i.mode=oo;break}if(i.flags&57344){e.msg="unknown header flags set",i.mode=oo;break}i.head&&(i.head.text=E>>8&1),i.flags&512&&i.wrap&4&&(be[0]=E&255,be[1]=E>>>8&255,i.check=Xu(i.check,be,2,0)),E=0,I=0,i.mode=nC;case nC:for(;I<32;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}i.head&&(i.head.time=E),i.flags&512&&i.wrap&4&&(be[0]=E&255,be[1]=E>>>8&255,be[2]=E>>>16&255,be[3]=E>>>24&255,i.check=Xu(i.check,be,4,0)),E=0,I=0,i.mode=iC;case iC:for(;I<16;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}i.head&&(i.head.xflags=E&255,i.head.os=E>>8),i.flags&512&&i.wrap&4&&(be[0]=E&255,be[1]=E>>>8&255,i.check=Xu(i.check,be,2,0)),E=0,I=0,i.mode=sC;case sC:if(i.flags&1024){for(;I<16;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}i.length=E,i.head&&(i.head.extra_len=E),i.flags&512&&i.wrap&4&&(be[0]=E&255,be[1]=E>>>8&255,i.check=Xu(i.check,be,2,0)),E=0,I=0}else i.head&&(i.head.extra=null);i.mode=oC;case oC:if(i.flags&1024&&(P=i.length,P>o&&(P=o),P&&(i.head&&(Ve=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(a.subarray(f,f+P),Ve)),i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,a,P,f)),o-=P,f+=P,i.length-=P),i.length))break e;i.length=0,i.mode=aC;case aC:if(i.flags&2048){if(o===0)break e;P=0;do Ve=a[f+P++],i.head&&Ve&&i.length<65536&&(i.head.name+=String.fromCharCode(Ve));while(Ve&&P<o);if(i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,a,P,f)),o-=P,f+=P,Ve)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=lC;case lC:if(i.flags&4096){if(o===0)break e;P=0;do Ve=a[f+P++],i.head&&Ve&&i.length<65536&&(i.head.comment+=String.fromCharCode(Ve));while(Ve&&P<o);if(i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,a,P,f)),o-=P,f+=P,Ve)break e}else i.head&&(i.head.comment=null);i.mode=cC;case cC:if(i.flags&512){for(;I<16;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if(i.wrap&4&&E!==(i.check&65535)){e.msg="header crc mismatch",i.mode=oo;break}E=0,I=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Dh;break;case AC:for(;I<32;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}e.adler=i.check=bC(E),E=0,I=0,i.mode=cy;case cy:if(i.havedict===0)return e.next_out=m,e.avail_out=w,e.next_in=f,e.avail_in=o,i.hold=E,i.bits=I,AH;e.adler=i.check=1,i.mode=Dh;case Dh:if(n===lH||n===v0)break e;case D1:if(i.last){E>>>=I&7,I-=I&7,i.mode=N1;break}for(;I<3;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}switch(i.last=E&1,E>>>=1,I-=1,E&3){case 0:i.mode=uC;break;case 1:if(yH(i),i.mode=_0,n===v0){E>>>=2,I-=2;break e}break;case 2:i.mode=fC;break;case 3:e.msg="invalid block type",i.mode=oo}E>>>=2,I-=2;break;case uC:for(E>>>=I&7,I-=I&7;I<32;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if((E&65535)!==(E>>>16^65535)){e.msg="invalid stored block lengths",i.mode=oo;break}if(i.length=E&65535,E=0,I=0,i.mode=R1,n===v0)break e;case R1:i.mode=hC;case hC:if(P=i.length,P){if(P>o&&(P=o),P>w&&(P=w),P===0)break e;u.set(a.subarray(f,f+P),m),o-=P,f+=P,w-=P,m+=P,i.length-=P;break}i.mode=Dh;break;case fC:for(;I<14;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if(i.nlen=(E&31)+257,E>>>=5,I-=5,i.ndist=(E&31)+1,E>>>=5,I-=5,i.ncode=(E&15)+4,E>>>=4,I-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=oo;break}i.have=0,i.mode=dC;case dC:for(;i.have<i.ncode;){for(;I<3;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}i.lens[me[i.have++]]=E&7,E>>>=3,I-=3}for(;i.have<19;)i.lens[me[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,rt={bits:i.lenbits},Oe=Lm(aH,i.lens,0,19,i.lencode,0,i.work,rt),i.lenbits=rt.bits,Oe){e.msg="invalid code lengths set",i.mode=oo;break}i.have=0,i.mode=pC;case pC:for(;i.have<i.nlen+i.ndist;){for(;z=i.lencode[E&(1<<i.lenbits)-1],Z=z>>>24,se=z>>>16&255,ae=z&65535,!(Z<=I);){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if(ae<16)E>>>=Z,I-=Z,i.lens[i.have++]=ae;else{if(ae===16){for(ue=Z+2;I<ue;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if(E>>>=Z,I-=Z,i.have===0){e.msg="invalid bit length repeat",i.mode=oo;break}Ve=i.lens[i.have-1],P=3+(E&3),E>>>=2,I-=2}else if(ae===17){for(ue=Z+3;I<ue;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}E>>>=Z,I-=Z,Ve=0,P=3+(E&7),E>>>=3,I-=3}else{for(ue=Z+7;I<ue;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}E>>>=Z,I-=Z,Ve=0,P=11+(E&127),E>>>=7,I-=7}if(i.have+P>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=oo;break}for(;P--;)i.lens[i.have++]=Ve}}if(i.mode===oo)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=oo;break}if(i.lenbits=9,rt={bits:i.lenbits},Oe=Lm(J4,i.lens,0,i.nlen,i.lencode,0,i.work,rt),i.lenbits=rt.bits,Oe){e.msg="invalid literal/lengths set",i.mode=oo;break}if(i.distbits=6,i.distcode=i.distdyn,rt={bits:i.distbits},Oe=Lm(eI,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,rt),i.distbits=rt.bits,Oe){e.msg="invalid distances set",i.mode=oo;break}if(i.mode=_0,n===v0)break e;case _0:i.mode=w0;case w0:if(o>=6&&w>=258){e.next_out=m,e.avail_out=w,e.next_in=f,e.avail_in=o,i.hold=E,i.bits=I,tH(e,O),m=e.next_out,u=e.output,w=e.avail_out,f=e.next_in,a=e.input,o=e.avail_in,E=i.hold,I=i.bits,i.mode===Dh&&(i.back=-1);break}for(i.back=0;z=i.lencode[E&(1<<i.lenbits)-1],Z=z>>>24,se=z>>>16&255,ae=z&65535,!(Z<=I);){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if(se&&(se&240)===0){for(fe=Z,Fe=se,He=ae;z=i.lencode[He+((E&(1<<fe+Fe)-1)>>fe)],Z=z>>>24,se=z>>>16&255,ae=z&65535,!(fe+Z<=I);){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}E>>>=fe,I-=fe,i.back+=fe}if(E>>>=Z,I-=Z,i.back+=Z,i.length=ae,se===0){i.mode=_C;break}if(se&32){i.back=-1,i.mode=Dh;break}if(se&64){e.msg="invalid literal/length code",i.mode=oo;break}i.extra=se&15,i.mode=mC;case mC:if(i.extra){for(ue=i.extra;I<ue;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}i.length+=E&(1<<i.extra)-1,E>>>=i.extra,I-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=gC;case gC:for(;z=i.distcode[E&(1<<i.distbits)-1],Z=z>>>24,se=z>>>16&255,ae=z&65535,!(Z<=I);){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if((se&240)===0){for(fe=Z,Fe=se,He=ae;z=i.distcode[He+((E&(1<<fe+Fe)-1)>>fe)],Z=z>>>24,se=z>>>16&255,ae=z&65535,!(fe+Z<=I);){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}E>>>=fe,I-=fe,i.back+=fe}if(E>>>=Z,I-=Z,i.back+=Z,se&64){e.msg="invalid distance code",i.mode=oo;break}i.offset=ae,i.extra=se&15,i.mode=yC;case yC:if(i.extra){for(ue=i.extra;I<ue;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}i.offset+=E&(1<<i.extra)-1,E>>>=i.extra,I-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=oo;break}i.mode=vC;case vC:if(w===0)break e;if(P=O-w,i.offset>P){if(P=i.offset-P,P>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=oo;break}P>i.wnext?(P-=i.wnext,W=i.wsize-P):W=i.wnext-P,P>i.length&&(P=i.length),H=i.window}else H=u,W=m-i.offset,P=i.length;P>w&&(P=w),w-=P,i.length-=P;do u[m++]=H[W++];while(--P);i.length===0&&(i.mode=w0);break;case _C:if(w===0)break e;u[m++]=i.length,w--,i.mode=w0;break;case N1:if(i.wrap){for(;I<32;){if(o===0)break e;o--,E|=a[f++]<<I,I+=8}if(O-=w,e.total_out+=O,i.total+=O,i.wrap&4&&O&&(e.adler=i.check=i.flags?Xu(i.check,u,O,m-O):lw(i.check,u,O,m-O)),O=w,i.wrap&4&&(i.flags?E:bC(E))!==i.check){e.msg="incorrect data check",i.mode=oo;break}E=0,I=0}i.mode=wC;case wC:if(i.wrap&&i.flags){for(;I<32;){if(o===0)break e;o--,E+=a[f++]<<I,I+=8}if(i.wrap&4&&E!==(i.total&4294967295)){e.msg="incorrect length check",i.mode=oo;break}E=0,I=0}i.mode=xC;case xC:Oe=cH;break e;case oo:Oe=tI;break e;case nI:return rI;case iI:default:return su}return e.next_out=m,e.avail_out=w,e.next_in=f,e.avail_in=o,i.hold=E,i.bits=I,(i.wsize||O!==e.avail_out&&i.mode<oo&&(i.mode<N1||n!==eC))&&cI(e,e.output,e.next_out,O-e.avail_out),D-=e.avail_in,O-=e.avail_out,e.total_in+=D,e.total_out+=O,i.total+=O,i.wrap&4&&O&&(e.adler=i.check=i.flags?Xu(i.check,u,O,e.next_out-O):lw(i.check,u,O,e.next_out-O)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Dh?128:0)+(i.mode===_0||i.mode===R1?256:0),(D===0&&O===0||n===eC)&&Oe===od&&(Oe=uH),Oe},_H=e=>{if(cd(e))return su;let n=e.state;return n.window&&(n.window=null),e.state=null,od},wH=(e,n)=>{if(cd(e))return su;const i=e.state;return(i.wrap&2)===0?su:(i.head=n,n.done=!1,od)},xH=(e,n)=>{const i=n.length;let a,u,f;return cd(e)||(a=e.state,a.wrap!==0&&a.mode!==cy)?su:a.mode===cy&&(u=1,u=lw(u,n,i,0),u!==a.check)?tI:(f=cI(e,n,i,i),f?(a.mode=nI,rI):(a.havedict=1,od))};var bH=oI,BH=aI,CH=sI,EH=gH,SH=lI,FH=vH,IH=_H,TH=wH,PH=xH,LH="pako inflate (from Nodeca project)",Rh={inflateReset:bH,inflateReset2:BH,inflateResetKeep:CH,inflateInit:EH,inflateInit2:SH,inflate:FH,inflateEnd:IH,inflateGetHeader:TH,inflateSetDictionary:PH,inflateInfo:LH};function MH(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var kH=MH;const AI=Object.prototype.toString,{Z_NO_FLUSH:UH,Z_FINISH:DH,Z_OK:Vm,Z_STREAM_END:z1,Z_NEED_DICT:H1,Z_STREAM_ERROR:RH,Z_DATA_ERROR:CC,Z_MEM_ERROR:NH}=Z4;function tg(e){this.options=X4.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new J7,this.strm.avail_out=0;let i=Rh.inflateInit2(this.strm,n.windowBits);if(i!==Vm)throw new Error(cw[i]);if(this.header=new kH,Rh.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=Aw.string2buf(n.dictionary):AI.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(i=Rh.inflateSetDictionary(this.strm,n.dictionary),i!==Vm)))throw new Error(cw[i])}tg.prototype.push=function(e,n){const i=this.strm,a=this.options.chunkSize,u=this.options.dictionary;let f,m,o;if(this.ended)return!1;for(n===~~n?m=n:m=n===!0?DH:UH,AI.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),f=Rh.inflate(i,m),f===H1&&u&&(f=Rh.inflateSetDictionary(i,u),f===Vm?f=Rh.inflate(i,m):f===CC&&(f=H1));i.avail_in>0&&f===z1&&i.state.wrap>0&&e[i.next_in]!==0;)Rh.inflateReset(i),f=Rh.inflate(i,m);switch(f){case RH:case CC:case H1:case NH:return this.onEnd(f),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(i.avail_out===0||f===z1))if(this.options.to==="string"){let w=Aw.utf8border(i.output,i.next_out),E=i.next_out-w,I=Aw.buf2string(i.output,w);i.next_out=E,i.avail_out=a-E,E&&i.output.set(i.output.subarray(w,w+E),0),this.onData(I)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(!(f===Vm&&o===0)){if(f===z1)return f=Rh.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,!0;if(i.avail_in===0)break}}return!0};tg.prototype.onData=function(e){this.chunks.push(e)};tg.prototype.onEnd=function(e){e===Vm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=X4.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function QH(e,n){const i=new tg(n);if(i.push(e),i.err)throw i.msg||cw[i.err];return i.result}var OH=tg,zH=QH,HH={Inflate:OH,inflate:zH};const{Inflate:jH,inflate:VH}=HH;var EC=jH,GH=VH;const uI=[];for(let e=0;e<256;e++){let n=e;for(let i=0;i<8;i++)n&1?n=3988292384^n>>>1:n=n>>>1;uI[e]=n}const SC=4294967295;function KH(e,n,i){let a=e;for(let u=0;u<i;u++)a=uI[(a^n[u])&255]^a>>>8;return a}function qH(e,n){return(KH(SC,e,n)^SC)>>>0}function FC(e,n,i){const a=e.readUint32(),u=qH(new Uint8Array(e.buffer,e.byteOffset+e.offset-n-4,n),n);if(u!==a)throw new Error(`CRC mismatch for chunk ${i}. Expected ${a}, found ${u}`)}function hI(e,n,i){for(let a=0;a<i;a++)n[a]=e[a]}function fI(e,n,i,a){let u=0;for(;u<a;u++)n[u]=e[u];for(;u<i;u++)n[u]=e[u]+n[u-a]&255}function dI(e,n,i,a){let u=0;if(i.length===0)for(;u<a;u++)n[u]=e[u];else for(;u<a;u++)n[u]=e[u]+i[u]&255}function pI(e,n,i,a,u){let f=0;if(i.length===0){for(;f<u;f++)n[f]=e[f];for(;f<a;f++)n[f]=e[f]+(n[f-u]>>1)&255}else{for(;f<u;f++)n[f]=e[f]+(i[f]>>1)&255;for(;f<a;f++)n[f]=e[f]+(n[f-u]+i[f]>>1)&255}}function mI(e,n,i,a,u){let f=0;if(i.length===0){for(;f<u;f++)n[f]=e[f];for(;f<a;f++)n[f]=e[f]+n[f-u]&255}else{for(;f<u;f++)n[f]=e[f]+i[f]&255;for(;f<a;f++)n[f]=e[f]+$H(n[f-u],i[f],i[f-u])&255}}function $H(e,n,i){const a=e+n-i,u=Math.abs(a-e),f=Math.abs(a-n),m=Math.abs(a-i);return u<=f&&u<=m?e:f<=m?n:i}function WH(e,n,i,a,u,f){switch(e){case 0:hI(n,i,u);break;case 1:fI(n,i,u,f);break;case 2:dI(n,i,a,u);break;case 3:pI(n,i,a,u,f);break;case 4:mI(n,i,a,u,f);break;default:throw new Error(`Unsupported filter: ${e}`)}}const ZH=new Uint16Array([255]),XH=new Uint8Array(ZH.buffer),YH=XH[0]===255;function JH(e){const{data:n,width:i,height:a,channels:u,depth:f}=e,m=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(f/8)*u,w=new Uint8Array(a*i*o);let E=0;for(let I=0;I<7;I++){const D=m[I],O=Math.ceil((i-D.x)/D.xStep),P=Math.ceil((a-D.y)/D.yStep);if(O<=0||P<=0)continue;const W=O*o,H=new Uint8Array(W);for(let z=0;z<P;z++){const Z=n[E++],se=n.subarray(E,E+W);E+=W;const ae=new Uint8Array(W);WH(Z,se,ae,H,W,o),H.set(ae);for(let fe=0;fe<O;fe++){const Fe=D.x+fe*D.xStep,He=D.y+z*D.yStep;if(!(Fe>=i||He>=a))for(let Ve=0;Ve<o;Ve++)w[(He*i+Fe)*o+Ve]=ae[fe*o+Ve]}}}if(f===16){const I=new Uint16Array(w.buffer);if(YH)for(let D=0;D<I.length;D++)I[D]=ej(I[D]);return I}else return w}function ej(e){return(e&255)<<8|e>>8&255}const tj=new Uint16Array([255]),rj=new Uint8Array(tj.buffer),nj=rj[0]===255,ij=new Uint8Array(0);function IC(e){const{data:n,width:i,height:a,channels:u,depth:f}=e,m=Math.ceil(f/8)*u,o=Math.ceil(f/8*u*i),w=new Uint8Array(a*o);let E=ij,I=0,D,O;for(let P=0;P<a;P++){switch(D=n.subarray(I+1,I+1+o),O=w.subarray(P*o,(P+1)*o),n[I]){case 0:hI(D,O,o);break;case 1:fI(D,O,o,m);break;case 2:dI(D,O,E,o);break;case 3:pI(D,O,E,o,m);break;case 4:mI(D,O,E,o,m);break;default:throw new Error(`Unsupported filter: ${n[I]}`)}E=O,I+=o+1}if(f===16){const P=new Uint16Array(w.buffer);if(nj)for(let W=0;W<P.length;W++)P[W]=sj(P[W]);return P}else return w}function sj(e){return(e&255)<<8|e>>8&255}const Q0=Uint8Array.of(137,80,78,71,13,10,26,10);function TC(e){if(!oj(e.readBytes(Q0.length)))throw new Error("wrong PNG signature")}function oj(e){if(e.length<Q0.length)return!1;for(let n=0;n<Q0.length;n++)if(e[n]!==Q0[n])return!1;return!0}const aj="tEXt",lj=0,gI=new TextDecoder("latin1");function cj(e){if(uj(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Aj=/^[\u0000-\u00FF]*$/;function uj(e){if(!Aj.test(e))throw new Error("invalid latin1 text")}function hj(e,n,i){const a=yI(n);e[a]=fj(n,i-a.length-1)}function yI(e){for(e.mark();e.readByte()!==lj;);const n=e.offset;e.reset();const i=gI.decode(e.readBytes(n-e.offset-1));return e.skip(1),cj(i),i}function fj(e,n){return gI.decode(e.readBytes(n))}const bA={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},j1={UNKNOWN:-1,DEFLATE:0},PC={UNKNOWN:-1,ADAPTIVE:0},V1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},x0={NONE:0,BACKGROUND:1,PREVIOUS:2},G1={SOURCE:0,OVER:1};class dj extends lx{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(n,i={}){super(n);const{checkCrc:a=!1}=i;this._checkCrc=a,this._inflator=new EC,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=j1.UNKNOWN,this._filterMethod=PC.UNKNOWN,this._interlaceMethod=V1.UNKNOWN,this._colorType=bA.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(TC(this);!this._end;){const n=this.readUint32(),i=this.readChars(4);this.decodeChunk(n,i)}return this.decodeImage(),this._png}decodeApng(){for(TC(this);!this._end;){const n=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(n,i)}return this.decodeApngImage(),this._apng}decodeChunk(n,i){const a=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case aj:hj(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-a!==n)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?FC(this,n+4,i):this.skip(4)}decodeApngChunk(n,i){const a=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,i),this.offset=a+n;break}if(this.offset-a!==n)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?FC(this,n+4,i):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=pj(this.readUint8());const i=this.readUint8();this._colorType=i;let a;switch(i){case bA.GREYSCALE:a=1;break;case bA.TRUECOLOUR:a=3;break;case bA.INDEXED_COLOUR:a=1;break;case bA.GREYSCALE_ALPHA:a=2;break;case bA.TRUECOLOUR_ALPHA:a=4;break;case bA.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==j1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const i=n/3;this._hasPalette=!0;const a=[];this._palette=a;for(let u=0;u<i;u++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const i=n,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let i=n,a=this.offset+this.byteOffset;if(a+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,a,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case bA.GREYSCALE:case bA.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let i=0;i<n/2;i++)this._transparency[i]=this.readUint16();break}case bA.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let i=0;for(;i<n;i++){const a=this.readByte();this._palette[i].push(a)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case bA.UNKNOWN:case bA.GREYSCALE_ALPHA:case bA.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const i=yI(this),a=this.readUint8();if(a!==j1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const u=this.readBytes(n-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:GH(u)}}decodepHYs(){const n=this.readUint32(),i=this.readUint32(),a=this.readByte();this._png.resolution={x:n,y:i,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const i={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(n);if(a){if(a.data=IC({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)i.data=a.data;else{const u=this._apng.frames.at(n-1);this.disposeFrame(a,u,i),this.addFrameDataToCanvas(i,a)}this._apng.frames.push(i)}}return this._apng}disposeFrame(n,i,a){switch(n.disposeOp){case x0.NONE:break;case x0.BACKGROUND:for(let u=0;u<this._png.height;u++)for(let f=0;f<this._png.width;f++){const m=(u*n.width+f)*this._png.channels;for(let o=0;o<this._png.channels;o++)a.data[m+o]=0}break;case x0.PREVIOUS:a.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,i){const a=1<<this._png.depth,u=(f,m)=>{const o=((f+i.yOffset)*this._png.width+i.xOffset+m)*this._png.channels,w=(f*i.width+m)*this._png.channels;return{index:o,frameIndex:w}};switch(i.blendOp){case G1.SOURCE:for(let f=0;f<i.height;f++)for(let m=0;m<i.width;m++){const{index:o,frameIndex:w}=u(f,m);for(let E=0;E<this._png.channels;E++)n.data[o+E]=i.data[w+E]}break;case G1.OVER:for(let f=0;f<i.height;f++)for(let m=0;m<i.width;m++){const{index:o,frameIndex:w}=u(f,m);for(let E=0;E<this._png.channels;E++){const I=i.data[w+this._png.channels-1]/a,D=E%(this._png.channels-1)===0?1:i.data[w+E],O=Math.floor(I*D+(1-I)*n.data[o+E]);n.data[o+E]+=O}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==PC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===V1.NO_INTERLACE)this._png.data=IC({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===V1.ADAM7)this._png.data=JH({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,i=this._frames.at(-1);i?i.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:x0.NONE,blendOp:G1.SOURCE,data:n}),this._inflator=new EC,this._writingDataChunks=!1}}function pj(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var LC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(LC||(LC={}));function mj(e,n){return new dj(e,n).decode()}var kn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function K1(){kn.console&&typeof kn.console.log=="function"&&kn.console.log.apply(kn.console,arguments)}var gs={log:K1,warn:function(e){kn.console&&(typeof kn.console.warn=="function"?kn.console.warn.apply(kn.console,arguments):K1.call(null,arguments))},error:function(e){kn.console&&(typeof kn.console.error=="function"?kn.console.error.apply(kn.console,arguments):K1(e))}};function q1(e,n,i){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){Zf(a.response,n,i)},a.onerror=function(){gs.error("could not download file")},a.send()}function MC(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function b0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var Zf=kn.saveAs||((typeof window>"u"?"undefined":rs(window))!=="object"||window!==kn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,i){var a=kn.URL||kn.webkitURL,u=document.createElement("a");n=n||e.name||"download",u.download=n,u.rel="noopener",typeof e=="string"?(u.href=e,u.origin!==location.origin?MC(u.href)?q1(e,n,i):b0(u,u.target="_blank"):b0(u)):(u.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(u.href)},4e4),setTimeout(function(){b0(u)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download",typeof e=="string")if(MC(e))q1(e,n,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){b0(a)})}else navigator.msSaveOrOpenBlob((function(u,f){return f===void 0?f={autoBom:!1}:rs(f)!=="object"&&(gs.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u})(e,i),n)}:function(e,n,i,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return q1(e,n,i);var u=e.type==="application/octet-stream",f=/constructor/i.test(kn.HTMLElement)||kn.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||u&&f)&&(typeof FileReader>"u"?"undefined":rs(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var I=o.result;I=m?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=I:location=I,a=null},o.readAsDataURL(e)}else{var w=kn.URL||kn.webkitURL,E=w.createObjectURL(e);a?a.location=E:location.href=E,a=null,setTimeout(function(){w.revokeObjectURL(E)},4e4)}});function vI(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],a=0;a<i.length;a++){var u=i[a].re,f=i[a].process,m=u.exec(e);m&&(n=f(m),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),w=this.g.toString(16),E=this.b.toString(16);return o.length==1&&(o="0"+o),w.length==1&&(w="0"+w),E.length==1&&(E="0"+E),"#"+o+w+E}}var O0=kn.atob.bind(kn),kC=kn.btoa.bind(kn);function $1(e,n){var i=e[0],a=e[1],u=e[2],f=e[3];i=$l(i,a,u,f,n[0],7,-680876936),f=$l(f,i,a,u,n[1],12,-389564586),u=$l(u,f,i,a,n[2],17,606105819),a=$l(a,u,f,i,n[3],22,-1044525330),i=$l(i,a,u,f,n[4],7,-176418897),f=$l(f,i,a,u,n[5],12,1200080426),u=$l(u,f,i,a,n[6],17,-1473231341),a=$l(a,u,f,i,n[7],22,-45705983),i=$l(i,a,u,f,n[8],7,1770035416),f=$l(f,i,a,u,n[9],12,-1958414417),u=$l(u,f,i,a,n[10],17,-42063),a=$l(a,u,f,i,n[11],22,-1990404162),i=$l(i,a,u,f,n[12],7,1804603682),f=$l(f,i,a,u,n[13],12,-40341101),u=$l(u,f,i,a,n[14],17,-1502002290),i=Wl(i,a=$l(a,u,f,i,n[15],22,1236535329),u,f,n[1],5,-165796510),f=Wl(f,i,a,u,n[6],9,-1069501632),u=Wl(u,f,i,a,n[11],14,643717713),a=Wl(a,u,f,i,n[0],20,-373897302),i=Wl(i,a,u,f,n[5],5,-701558691),f=Wl(f,i,a,u,n[10],9,38016083),u=Wl(u,f,i,a,n[15],14,-660478335),a=Wl(a,u,f,i,n[4],20,-405537848),i=Wl(i,a,u,f,n[9],5,568446438),f=Wl(f,i,a,u,n[14],9,-1019803690),u=Wl(u,f,i,a,n[3],14,-187363961),a=Wl(a,u,f,i,n[8],20,1163531501),i=Wl(i,a,u,f,n[13],5,-1444681467),f=Wl(f,i,a,u,n[2],9,-51403784),u=Wl(u,f,i,a,n[7],14,1735328473),i=Zl(i,a=Wl(a,u,f,i,n[12],20,-1926607734),u,f,n[5],4,-378558),f=Zl(f,i,a,u,n[8],11,-2022574463),u=Zl(u,f,i,a,n[11],16,1839030562),a=Zl(a,u,f,i,n[14],23,-35309556),i=Zl(i,a,u,f,n[1],4,-1530992060),f=Zl(f,i,a,u,n[4],11,1272893353),u=Zl(u,f,i,a,n[7],16,-155497632),a=Zl(a,u,f,i,n[10],23,-1094730640),i=Zl(i,a,u,f,n[13],4,681279174),f=Zl(f,i,a,u,n[0],11,-358537222),u=Zl(u,f,i,a,n[3],16,-722521979),a=Zl(a,u,f,i,n[6],23,76029189),i=Zl(i,a,u,f,n[9],4,-640364487),f=Zl(f,i,a,u,n[12],11,-421815835),u=Zl(u,f,i,a,n[15],16,530742520),i=Xl(i,a=Zl(a,u,f,i,n[2],23,-995338651),u,f,n[0],6,-198630844),f=Xl(f,i,a,u,n[7],10,1126891415),u=Xl(u,f,i,a,n[14],15,-1416354905),a=Xl(a,u,f,i,n[5],21,-57434055),i=Xl(i,a,u,f,n[12],6,1700485571),f=Xl(f,i,a,u,n[3],10,-1894986606),u=Xl(u,f,i,a,n[10],15,-1051523),a=Xl(a,u,f,i,n[1],21,-2054922799),i=Xl(i,a,u,f,n[8],6,1873313359),f=Xl(f,i,a,u,n[15],10,-30611744),u=Xl(u,f,i,a,n[6],15,-1560198380),a=Xl(a,u,f,i,n[13],21,1309151649),i=Xl(i,a,u,f,n[4],6,-145523070),f=Xl(f,i,a,u,n[11],10,-1120210379),u=Xl(u,f,i,a,n[2],15,718787259),a=Xl(a,u,f,i,n[9],21,-343485551),e[0]=mf(i,e[0]),e[1]=mf(a,e[1]),e[2]=mf(u,e[2]),e[3]=mf(f,e[3])}function Xy(e,n,i,a,u,f){return n=mf(mf(n,e),mf(a,f)),mf(n<<u|n>>>32-u,i)}function $l(e,n,i,a,u,f,m){return Xy(n&i|~n&a,e,n,u,f,m)}function Wl(e,n,i,a,u,f,m){return Xy(n&a|i&~a,e,n,u,f,m)}function Zl(e,n,i,a,u,f,m){return Xy(n^i^a,e,n,u,f,m)}function Xl(e,n,i,a,u,f,m){return Xy(i^(n|~a),e,n,u,f,m)}function _I(e){var n,i=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)$1(a,gj(e.substring(n-64,n)));e=e.substring(n-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)u[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(u[n>>2]|=128<<(n%4<<3),n>55)for($1(a,u),n=0;n<16;n++)u[n]=0;return u[14]=8*i,$1(a,u),a}function gj(e){var n,i=[];for(n=0;n<64;n+=4)i[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return i}var UC="0123456789abcdef".split("");function yj(e){for(var n="",i=0;i<4;i++)n+=UC[e>>8*i+4&15]+UC[e>>8*i&15];return n}function vj(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function uw(e){return _I(e).map(vj).join("")}var _j=(function(e){for(var n=0;n<e.length;n++)e[n]=yj(e[n]);return e.join("")})(_I("hello"))!="5d41402abc4b2a76b9719d911017c592";function mf(e,n){if(_j){var i=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(i>>16)<<16|65535&i}return e+n&4294967295}function hw(e,n){var i,a,u,f;if(e!==i){for(var m=(u=e,f=1+(256/e.length|0),new Array(f+1).join(u)),o=[],w=0;w<256;w++)o[w]=w;var E=0;for(w=0;w<256;w++){var I=o[w];E=(E+I+m.charCodeAt(w))%256,o[w]=o[E],o[E]=I}i=e,a=o}else o=a;var D=n.length,O=0,P=0,W="";for(w=0;w<D;w++)P=(P+(I=o[O=(O+1)%256]))%256,o[O]=o[P],o[P]=I,m=o[(o[O]+o[P])%256],W+=String.fromCharCode(n.charCodeAt(w)^m);return W}var DC={print:4,modify:8,copy:16,"annot-forms":32};function rp(e,n,i,a){this.v=1,this.r=2;var u=192;e.forEach(function(o){if(DC.perm!==void 0)throw new Error("Invalid permission: "+o);u+=DC[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var f=(n+this.padding).substr(0,32),m=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(f,m),this.P=-(1+(255^u)),this.encryptionKey=uw(f+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=hw(this.encryptionKey,this.padding)}function np(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",i=e.length,a=0;a<i;a++){var u=e.charCodeAt(a);n+=u<33||u===35||u===37||u===40||u===41||u===47||u===60||u===62||u===91||u===93||u===123||u===125||u>126?"#"+("0"+u.toString(16)).slice(-2):e[a]}return n}function RC(e){if(rs(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(i,a,u){if(u=u||!1,typeof i!="string"||typeof a!="function"||typeof u!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(i)||(n[i]={});var f=Math.random().toString(35);return n[i][f]=[a,!!u],f},this.unsubscribe=function(i){for(var a in n)if(n[a][i])return delete n[a][i],Object.keys(n[a]).length===0&&delete n[a],!0;return!1},this.publish=function(i){if(n.hasOwnProperty(i)){var a=Array.prototype.slice.call(arguments,1),u=[];for(var f in n[i]){var m=n[i][f];try{m[0].apply(e,a)}catch(o){kn.console&&gs.error("jsPDF PubSub Error",o.message,o)}m[1]&&u.push(f)}u.length&&u.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function Ay(e){if(!(this instanceof Ay))return new Ay(e);var n="opacity,stroke-opacity".split(",");for(var i in e)e.hasOwnProperty(i)&&n.indexOf(i)>=0&&(this[i]=e[i]);this.id="",this.objectNumber=-1}function wI(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function Yf(e,n,i,a,u){if(!(this instanceof Yf))return new Yf(e,n,i,a,u);this.type=e==="axial"?2:3,this.coords=n,this.colors=i,wI.call(this,a,u)}function ap(e,n,i,a,u){if(!(this instanceof ap))return new ap(e,n,i,a,u);this.boundingBox=e,this.xStep=n,this.yStep=i,this.stream="",this.cloneIndex=0,wI.call(this,a,u)}function dn(e){var n,i=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],u=arguments[2],f=arguments[3],m=[],o=1,w=16,E="S",I=null;rs(e=e||{})==="object"&&(i=e.orientation,a=e.unit||a,u=e.format||u,f=e.compress||e.compressPdf||f,(I=e.encryption||null)!==null&&(I.userPassword=I.userPassword||"",I.ownerPassword=I.ownerPassword||"",I.userPermissions=I.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(w=e.floatPrecision),E=e.defaultPathOperation||"S"),m=e.filters||(f===!0?["FlateEncode"]:m),a=a||"mm",i=(""+(i||"P")).toLowerCase();var D=e.putOnlyUsedFonts||!1,O={},P={internal:{},__private__:{}};P.__private__.PubSub=RC;var W="1.3",H=P.__private__.getPdfVersion=function(){return W};P.__private__.setPdfVersion=function(V){W=V};var z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};P.__private__.getPageFormats=function(){return z};var Z=P.__private__.getPageFormat=function(V){return z[V]};u=u||"a4";var se="compat",ae="advanced",fe=se;function Fe(){this.saveGraphicsState(),je(new wr($e,0,0,-$e,0,ao()*$e).toString()+" cm"),this.setFontSize(this.getFontSize()/$e),E="n",fe=ae}function He(){this.restoreGraphicsState(),E="S",fe=se}var Ve=P.__private__.combineFontStyleAndFontWeight=function(V,ye){if(V=="bold"&&ye=="normal"||V=="bold"&&ye==400||V=="normal"&&ye=="italic"||V=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(V=ye==400||ye==="normal"?V==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||V!=="normal"?(ye==700?"bold":ye)+""+V:"bold"),V};P.advancedAPI=function(V){var ye=fe===se;return ye&&Fe.call(this),typeof V!="function"||(V(this),ye&&He.call(this)),this},P.compatAPI=function(V){var ye=fe===ae;return ye&&He.call(this),typeof V!="function"||(V(this),ye&&Fe.call(this)),this},P.isAdvancedAPI=function(){return fe===ae};var Oe,be=function(V){if(fe!==ae)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},rt=P.roundToPrecision=P.__private__.roundToPrecision=function(V,ye){var Je=n||ye;if(isNaN(V)||isNaN(Je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Je).replace(/0+$/,"")};Oe=P.hpf=P.__private__.hpf=typeof w=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return rt(V,w)}:w==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return rt(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return rt(V,16)};var ue=P.f2=P.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return rt(V,2)},me=P.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return rt(V,3)},Ue=P.scale=P.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return fe===se?V*$e:fe===ae?V:void 0},Ie=function(V){return Ue((function(ye){return fe===se?ao()-ye:fe===ae?ye:void 0})(V))};P.__private__.setPrecision=P.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(n=parseInt(V,10))};var pt,lt="00000000000000000000000000000000",ot=P.__private__.getFileId=function(){return lt},Ne=P.__private__.setFileId=function(V){return lt=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():lt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),I!==null&&(ys=new rp(I.userPermissions,I.userPassword,I.ownerPassword,lt)),lt};P.setFileId=function(V){return Ne(V),this},P.getFileId=function(){return ot()};var Te=P.__private__.convertDateToPDFDate=function(V){var ye=V.getTimezoneOffset(),Je=ye<0?"+":"-",gt=Math.floor(Math.abs(ye/60)),It=Math.abs(ye%60),Gt=[Je,Me(gt),"'",Me(It),"'"].join("");return["D:",V.getFullYear(),Me(V.getMonth()+1),Me(V.getDate()),Me(V.getHours()),Me(V.getMinutes()),Me(V.getSeconds()),Gt].join("")},yt=P.__private__.convertPDFDateToDate=function(V){var ye=parseInt(V.substr(2,4),10),Je=parseInt(V.substr(6,2),10)-1,gt=parseInt(V.substr(8,2),10),It=parseInt(V.substr(10,2),10),Gt=parseInt(V.substr(12,2),10),sr=parseInt(V.substr(14,2),10);return new Date(ye,Je,gt,It,Gt,sr,0)},Le=P.__private__.setCreationDate=function(V){var ye;if(V===void 0&&(V=new Date),V instanceof Date)ye=Te(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=V}return pt=ye},ie=P.__private__.getCreationDate=function(V){var ye=pt;return V==="jsDate"&&(ye=yt(pt)),ye};P.setCreationDate=function(V){return Le(V),this},P.getCreationDate=function(V){return ie(V)};var Ce,Me=P.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},qe=P.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},at=0,et=[],_t=[],Et=0,Pt=[],Kt=[],ar=!1,hr=_t;P.__private__.setCustomOutputDestination=function(V){ar=!0,hr=V};var Cr=function(V){ar||(hr=V)};P.__private__.resetCustomOutputDestination=function(){ar=!1,hr=_t};var je=P.__private__.out=function(V){return V=V.toString(),Et+=V.length+1,hr.push(V),hr},vr=P.__private__.write=function(V){return je(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},Ur=P.__private__.getArrayBuffer=function(V){for(var ye=V.length,Je=new ArrayBuffer(ye),gt=new Uint8Array(Je);ye--;)gt[ye]=V.charCodeAt(ye);return Je},$r=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];P.__private__.getStandardFonts=function(){return $r};var lr=e.fontSize||16;P.__private__.setFontSize=P.setFontSize=function(V){return lr=fe===ae?V/$e:V,this};var Wr,Sr=P.__private__.getFontSize=P.getFontSize=function(){return fe===se?lr:lr*$e},Or=e.R2L||!1;P.__private__.setR2L=P.setR2L=function(V){return Or=V,this},P.__private__.getR2L=P.getR2L=function(){return Or};var Rr,On=P.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Wr=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Wr=V}else Wr=parseInt(V,10)};P.__private__.getZoomMode=function(){return Wr};var hn,dt=P.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Rr=V};P.__private__.getPageMode=function(){return Rr};var de=P.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');hn=V};P.__private__.getLayoutMode=function(){return hn},P.__private__.setDisplayMode=P.setDisplayMode=function(V,ye,Je){return On(V),de(ye),dt(Je),this};var pe={title:"",subject:"",author:"",keywords:"",creator:""};P.__private__.getDocumentProperty=function(V){if(Object.keys(pe).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pe[V]},P.__private__.getDocumentProperties=function(){return pe},P.__private__.setDocumentProperties=P.setProperties=P.setDocumentProperties=function(V){for(var ye in pe)pe.hasOwnProperty(ye)&&V[ye]&&(pe[ye]=V[ye]);return this},P.__private__.setDocumentProperty=function(V,ye){if(Object.keys(pe).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pe[V]=ye};var ve,$e,Ze,Ct,vt,ct={},bt={},Ht=[],Ft={},cr={},Jt={},dr={},rn=null,Tr=0,mt=[],tn=new RC(P),Nr=e.hotfixes||[],mr={},Kr={},Dn=[],wr=function V(ye,Je,gt,It,Gt,sr){if(!(this instanceof V))return new V(ye,Je,gt,It,Gt,sr);isNaN(ye)&&(ye=1),isNaN(Je)&&(Je=0),isNaN(gt)&&(gt=0),isNaN(It)&&(It=1),isNaN(Gt)&&(Gt=0),isNaN(sr)&&(sr=0),this._matrix=[ye,Je,gt,It,Gt,sr]};Object.defineProperty(wr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(wr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(wr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(wr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(wr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(wr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(wr.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(wr.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(wr.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(wr.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(wr.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(wr.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(wr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wr.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Oe).join(V)},wr.prototype.multiply=function(V){var ye=V.sx*this.sx+V.shy*this.shx,Je=V.sx*this.shy+V.shy*this.sy,gt=V.shx*this.sx+V.sy*this.shx,It=V.shx*this.shy+V.sy*this.sy,Gt=V.tx*this.sx+V.ty*this.shx+this.tx,sr=V.tx*this.shy+V.ty*this.sy+this.ty;return new wr(ye,Je,gt,It,Gt,sr)},wr.prototype.decompose=function(){var V=this.sx,ye=this.shy,Je=this.shx,gt=this.sy,It=this.tx,Gt=this.ty,sr=Math.sqrt(V*V+ye*ye),br=(V/=sr)*Je+(ye/=sr)*gt;Je-=V*br,gt-=ye*br;var Vr=Math.sqrt(Je*Je+gt*gt);return br/=Vr,V*(gt/=Vr)<ye*(Je/=Vr)&&(V=-V,ye=-ye,br=-br,sr=-sr),{scale:new wr(sr,0,0,Vr,0,0),translate:new wr(1,0,0,1,It,Gt),rotate:new wr(V,ye,-ye,V,0,0),skew:new wr(1,0,br,1,0,0)}},wr.prototype.toString=function(V){return this.join(" ")},wr.prototype.inversed=function(){var V=this.sx,ye=this.shy,Je=this.shx,gt=this.sy,It=this.tx,Gt=this.ty,sr=1/(V*gt-ye*Je),br=gt*sr,Vr=-ye*sr,gn=-Je*sr,yn=V*sr;return new wr(br,Vr,gn,yn,-br*It-gn*Gt,-Vr*It-yn*Gt)},wr.prototype.applyToPoint=function(V){var ye=V.x*this.sx+V.y*this.shx+this.tx,Je=V.x*this.shy+V.y*this.sy+this.ty;return new ua(ye,Je)},wr.prototype.applyToRectangle=function(V){var ye=this.applyToPoint(V),Je=this.applyToPoint(new ua(V.x+V.w,V.y+V.h));return new sc(ye.x,ye.y,Je.x-ye.x,Je.y-ye.y)},wr.prototype.clone=function(){var V=this.sx,ye=this.shy,Je=this.shx,gt=this.sy,It=this.tx,Gt=this.ty;return new wr(V,ye,Je,gt,It,Gt)},P.Matrix=wr;var Tn=P.matrixMult=function(V,ye){return ye.multiply(V)},Bn=new wr(1,0,0,1,0,0);P.unitMatrix=P.identityMatrix=Bn;var xn=function(V,ye){if(!cr[V]){var Je=(ye instanceof Yf?"Sh":"P")+(Object.keys(Ft).length+1).toString(10);ye.id=Je,cr[V]=Je,Ft[Je]=ye,tn.publish("addPattern",ye)}};P.ShadingPattern=Yf,P.TilingPattern=ap,P.addShadingPattern=function(V,ye){return be("addShadingPattern()"),xn(V,ye),this},P.beginTilingPattern=function(V){be("beginTilingPattern()"),Nn(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},P.endTilingPattern=function(V,ye){be("endTilingPattern()"),ye.stream=Kt[Ce].join(`
`),xn(V,ye),tn.publish("endTilingPattern",ye),Dn.pop().restore()};var Di,ai=P.__private__.newObject=function(){var V=Yt();return Zn(V,!0),V},Yt=P.__private__.newObjectDeferred=function(){return at++,et[at]=function(){return Et},at},Zn=function(V,ye){return ye=typeof ye=="boolean"&&ye,et[V]=Et,ye&&je(V+" 0 obj"),V},$i=P.__private__.newAdditionalObject=function(){var V={objId:Yt(),content:""};return Pt.push(V),V},sl=Yt(),ns=Yt(),pr=P.__private__.decodeColorString=function(V){var ye=V.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length!==5||ye[4]!=="k"&&ye[4]!=="K"||(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var Je=parseFloat(ye[0]);ye=[Je,Je,Je,"r"]}for(var gt="#",It=0;It<3;It++)gt+=("0"+Math.floor(255*parseFloat(ye[It])).toString(16)).slice(-2);return gt},nn=P.__private__.encodeColorString=function(V){var ye;typeof V=="string"&&(V={ch1:V});var Je=V.ch1,gt=V.ch2,It=V.ch3,Gt=V.ch4,sr=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Je=="string"&&Je.charAt(0)!=="#"){var br=new vI(Je);if(br.ok)Je=br.toHex();else if(!/^\d*\.?\d*$/.test(Je))throw new Error('Invalid color "'+Je+'" passed to jsPDF.encodeColorString.')}if(typeof Je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Je)&&(Je="#"+Je[1]+Je[1]+Je[2]+Je[2]+Je[3]+Je[3]),typeof Je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Je)){var Vr=parseInt(Je.substr(1),16);Je=Vr>>16&255,gt=Vr>>8&255,It=255&Vr}if(gt===void 0||Gt===void 0&&Je===gt&&gt===It)ye=typeof Je=="string"?Je+" "+sr[0]:V.precision===2?ue(Je/255)+" "+sr[0]:me(Je/255)+" "+sr[0];else if(Gt===void 0||rs(Gt)==="object"){if(Gt&&!isNaN(Gt.a)&&Gt.a===0)return["1.","1.","1.",sr[1]].join(" ");ye=typeof Je=="string"?[Je,gt,It,sr[1]].join(" "):V.precision===2?[ue(Je/255),ue(gt/255),ue(It/255),sr[1]].join(" "):[me(Je/255),me(gt/255),me(It/255),sr[1]].join(" ")}else ye=typeof Je=="string"?[Je,gt,It,Gt,sr[2]].join(" "):V.precision===2?[ue(Je),ue(gt),ue(It),ue(Gt),sr[2]].join(" "):[me(Je),me(gt),me(It),me(Gt),sr[2]].join(" ");return ye},un=P.__private__.getFilters=function(){return m},Ri=P.__private__.putStream=function(V){var ye=(V=V||{}).data||"",Je=V.filters||un(),gt=V.alreadyAppliedFilters||[],It=V.addLength1||!1,Gt=ye.length,sr=V.objectId,br=function(Ds){return Ds};if(I!==null&&sr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");I!==null&&(br=ys.encryptor(sr,0));var Vr={};Je===!0&&(Je=["FlateEncode"]);var gn=V.additionalKeyValues||[],yn=(Vr=dn.API.processDataByFilters!==void 0?dn.API.processDataByFilters(ye,Je):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(gt)?gt.join(" "):gt.toString());if(Vr.data.length!==0&&(gn.push({key:"Length",value:Vr.data.length}),It===!0&&gn.push({key:"Length1",value:Gt})),yn.length!=0)if(yn.split("/").length-1==1)gn.push({key:"Filter",value:yn});else{gn.push({key:"Filter",value:"["+yn+"]"});for(var An=0;An<gn.length;An+=1)if(gn[An].key==="DecodeParms"){for(var ji=[],is=0;is<Vr.reverseChain.split("/").length-1;is+=1)ji.push("null");ji.push(gn[An].value),gn[An].value="["+ji.join(" ")+"]"}}je("<<");for(var Si=0;Si<gn.length;Si++)je("/"+gn[Si].key+" "+gn[Si].value);je(">>"),Vr.data.length!==0&&(je("stream"),je(br(Vr.data)),je("endstream"))},El=P.__private__.putPage=function(V){var ye=V.number,Je=V.data,gt=V.objId,It=V.contentsObjId;Zn(gt,!0),je("<</Type /Page"),je("/Parent "+V.rootDictionaryObjId+" 0 R"),je("/Resources "+V.resourceDictionaryObjId+" 0 R"),je("/MediaBox ["+parseFloat(Oe(V.mediaBox.bottomLeftX))+" "+parseFloat(Oe(V.mediaBox.bottomLeftY))+" "+Oe(V.mediaBox.topRightX)+" "+Oe(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&je("/CropBox ["+Oe(V.cropBox.bottomLeftX)+" "+Oe(V.cropBox.bottomLeftY)+" "+Oe(V.cropBox.topRightX)+" "+Oe(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&je("/BleedBox ["+Oe(V.bleedBox.bottomLeftX)+" "+Oe(V.bleedBox.bottomLeftY)+" "+Oe(V.bleedBox.topRightX)+" "+Oe(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&je("/TrimBox ["+Oe(V.trimBox.bottomLeftX)+" "+Oe(V.trimBox.bottomLeftY)+" "+Oe(V.trimBox.topRightX)+" "+Oe(V.trimBox.topRightY)+"]"),V.artBox!==null&&je("/ArtBox ["+Oe(V.artBox.bottomLeftX)+" "+Oe(V.artBox.bottomLeftY)+" "+Oe(V.artBox.topRightX)+" "+Oe(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&je("/UserUnit "+V.userUnit),tn.publish("putPage",{objId:gt,pageContext:mt[ye],pageNumber:ye,page:Je}),je("/Contents "+It+" 0 R"),je(">>"),je("endobj");var Gt=Je.join(`
`);return fe===ae&&(Gt+=`
Q`),Zn(It,!0),Ri({data:Gt,filters:un(),objectId:It}),je("endobj"),gt},ks=P.__private__.putPages=function(){var V,ye,Je=[];for(V=1;V<=Tr;V++)mt[V].objId=Yt(),mt[V].contentsObjId=Yt();for(V=1;V<=Tr;V++)Je.push(El({number:V,data:Kt[V],objId:mt[V].objId,contentsObjId:mt[V].contentsObjId,mediaBox:mt[V].mediaBox,cropBox:mt[V].cropBox,bleedBox:mt[V].bleedBox,trimBox:mt[V].trimBox,artBox:mt[V].artBox,userUnit:mt[V].userUnit,rootDictionaryObjId:sl,resourceDictionaryObjId:ns}));Zn(sl,!0),je("<</Type /Pages");var gt="/Kids [";for(ye=0;ye<Tr;ye++)gt+=Je[ye]+" 0 R ";je(gt+"]"),je("/Count "+Tr),je(">>"),je("endobj"),tn.publish("postPutPages")},fn=function(V){tn.publish("putFont",{font:V,out:je,newObject:ai,putStream:Ri}),V.isAlreadyPutted!==!0&&(V.objectNumber=ai(),je("<<"),je("/Type /Font"),je("/BaseFont /"+np(V.postScriptName)),je("/Subtype /Type1"),typeof V.encoding=="string"&&je("/Encoding /"+V.encoding),je("/FirstChar 32"),je("/LastChar 255"),je(">>"),je("endobj"))},ol=function(V){V.objectNumber=ai();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[Oe(V.x),Oe(V.y),Oe(V.x+V.width),Oe(V.y+V.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Je=V.pages[1].join(`
`);Ri({data:Je,additionalKeyValues:ye,objectId:V.objectNumber}),je("endobj")},al=function(V,ye){ye||(ye=21);var Je=ai(),gt=(function(sr,br){var Vr,gn=[],yn=1/(br-1);for(Vr=0;Vr<1;Vr+=yn)gn.push(Vr);if(gn.push(1),sr[0].offset!=0){var An={offset:0,color:sr[0].color};sr.unshift(An)}if(sr[sr.length-1].offset!=1){var ji={offset:1,color:sr[sr.length-1].color};sr.push(ji)}for(var is="",Si=0,Ds=0;Ds<gn.length;Ds++){for(Vr=gn[Ds];Vr>sr[Si+1].offset;)Si++;var Mi=sr[Si].offset,xs=(Vr-Mi)/(sr[Si+1].offset-Mi),Ko=sr[Si].color,da=sr[Si+1].color;is+=qe(Math.round((1-xs)*Ko[0]+xs*da[0]).toString(16))+qe(Math.round((1-xs)*Ko[1]+xs*da[1]).toString(16))+qe(Math.round((1-xs)*Ko[2]+xs*da[2]).toString(16))}return is.trim()})(V.colors,ye),It=[];It.push({key:"FunctionType",value:"0"}),It.push({key:"Domain",value:"[0.0 1.0]"}),It.push({key:"Size",value:"["+ye+"]"}),It.push({key:"BitsPerSample",value:"8"}),It.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),It.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ri({data:gt,additionalKeyValues:It,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Je}),je("endobj"),V.objectNumber=ai(),je("<< /ShadingType "+V.type),je("/ColorSpace /DeviceRGB");var Gt="/Coords ["+Oe(parseFloat(V.coords[0]))+" "+Oe(parseFloat(V.coords[1]))+" ";V.type===2?Gt+=Oe(parseFloat(V.coords[2]))+" "+Oe(parseFloat(V.coords[3])):Gt+=Oe(parseFloat(V.coords[2]))+" "+Oe(parseFloat(V.coords[3]))+" "+Oe(parseFloat(V.coords[4]))+" "+Oe(parseFloat(V.coords[5])),je(Gt+="]"),V.matrix&&je("/Matrix ["+V.matrix.toString()+"]"),je("/Function "+Je+" 0 R"),je("/Extend [true true]"),je(">>"),je("endobj")},ec=function(V,ye){var Je=Yt(),gt=ai();ye.push({resourcesOid:Je,objectOid:gt}),V.objectNumber=gt;var It=[];It.push({key:"Type",value:"/Pattern"}),It.push({key:"PatternType",value:"1"}),It.push({key:"PaintType",value:"1"}),It.push({key:"TilingType",value:"1"}),It.push({key:"BBox",value:"["+V.boundingBox.map(Oe).join(" ")+"]"}),It.push({key:"XStep",value:Oe(V.xStep)}),It.push({key:"YStep",value:Oe(V.yStep)}),It.push({key:"Resources",value:Je+" 0 R"}),V.matrix&&It.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),Ri({data:V.stream,additionalKeyValues:It,objectId:V.objectNumber}),je("endobj")},Ec=function(V){for(var ye in V.objectNumber=ai(),je("<<"),V)switch(ye){case"opacity":je("/ca "+ue(V[ye]));break;case"stroke-opacity":je("/CA "+ue(V[ye]))}je(">>"),je("endobj")},di=function(V){Zn(V.resourcesOid,!0),je("<<"),je("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ye in je("/Font <<"),ct)ct.hasOwnProperty(ye)&&(D===!1||D===!0&&O.hasOwnProperty(ye))&&je("/"+ye+" "+ct[ye].objectNumber+" 0 R");je(">>")})(),(function(){if(Object.keys(Ft).length>0){for(var ye in je("/Shading <<"),Ft)Ft.hasOwnProperty(ye)&&Ft[ye]instanceof Yf&&Ft[ye].objectNumber>=0&&je("/"+ye+" "+Ft[ye].objectNumber+" 0 R");tn.publish("putShadingPatternDict"),je(">>")}})(),(function(ye){if(Object.keys(Ft).length>0){for(var Je in je("/Pattern <<"),Ft)Ft.hasOwnProperty(Je)&&Ft[Je]instanceof P.TilingPattern&&Ft[Je].objectNumber>=0&&Ft[Je].objectNumber<ye&&je("/"+Je+" "+Ft[Je].objectNumber+" 0 R");tn.publish("putTilingPatternDict"),je(">>")}})(V.objectOid),(function(){if(Object.keys(Jt).length>0){var ye;for(ye in je("/ExtGState <<"),Jt)Jt.hasOwnProperty(ye)&&Jt[ye].objectNumber>=0&&je("/"+ye+" "+Jt[ye].objectNumber+" 0 R");tn.publish("putGStateDict"),je(">>")}})(),(function(){for(var ye in je("/XObject <<"),mr)mr.hasOwnProperty(ye)&&mr[ye].objectNumber>=0&&je("/"+ye+" "+mr[ye].objectNumber+" 0 R");tn.publish("putXobjectDict"),je(">>")})(),je(">>"),je("endobj")},tc=function(V){bt[V.fontName]=bt[V.fontName]||{},bt[V.fontName][V.fontStyle]=V.id},Sl=function(V,ye,Je,gt,It){var Gt={id:"F"+(Object.keys(ct).length+1).toString(10),postScriptName:V,fontName:ye,fontStyle:Je,encoding:gt,isStandardFont:It||!1,metadata:{}};return tn.publish("addFont",{font:Gt,instance:this}),ct[Gt.id]=Gt,tc(Gt),Gt.id},Ci=P.__private__.pdfEscape=P.pdfEscape=function(V,ye){return(function(Je,gt){var It,Gt,sr,br,Vr,gn,yn,An,ji;if(sr=(gt=gt||{}).sourceEncoding||"Unicode",Vr=gt.outputEncoding,(gt.autoencode||Vr)&&ct[ve].metadata&&ct[ve].metadata[sr]&&ct[ve].metadata[sr].encoding&&(br=ct[ve].metadata[sr].encoding,!Vr&&ct[ve].encoding&&(Vr=ct[ve].encoding),!Vr&&br.codePages&&(Vr=br.codePages[0]),typeof Vr=="string"&&(Vr=br[Vr]),Vr)){for(yn=!1,gn=[],It=0,Gt=Je.length;It<Gt;It++)(An=Vr[Je.charCodeAt(It)])?gn.push(String.fromCharCode(An)):gn.push(Je[It]),gn[It].charCodeAt(0)>>8&&(yn=!0);Je=gn.join("")}for(It=Je.length;yn===void 0&&It!==0;)Je.charCodeAt(It-1)>>8&&(yn=!0),It--;if(!yn)return Je;for(gn=gt.noBOM?[]:[254,255],It=0,Gt=Je.length;It<Gt;It++){if((ji=(An=Je.charCodeAt(It))>>8)>>8)throw new Error("Character at position "+It+" of string '"+Je+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gn.push(ji),gn.push(An-(ji<<8))}return String.fromCharCode.apply(void 0,gn)})(V,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jn=P.__private__.beginPage=function(V){Kt[++Tr]=[],mt[Tr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},cl(Tr),Cr(Kt[Ce])},rA=function(V,ye){var Je,gt,It;switch(i=ye||i,typeof V=="string"&&(Je=Z(V.toLowerCase()),Array.isArray(Je)&&(gt=Je[0],It=Je[1])),Array.isArray(V)&&(gt=V[0]*$e,It=V[1]*$e),isNaN(gt)&&(gt=u[0],It=u[1]),(gt>14400||It>14400)&&(gs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),gt=Math.min(14400,gt),It=Math.min(14400,It)),u=[gt,It],i.substr(0,1)){case"l":It>gt&&(u=[It,gt]);break;case"p":gt>It&&(u=[It,gt])}jn(u),qr(Ho),je(Sa),qs!==0&&je(qs+" J"),ul!==0&&je(ul+" j"),tn.publish("addPage",{pageNumber:Tr})},ll=function(V){V>0&&V<=Tr&&(Kt.splice(V,1),mt.splice(V,1),Tr--,Ce>Tr&&(Ce=Tr),this.setPage(Ce))},cl=function(V){V>0&&V<=Tr&&(Ce=V)},Us=P.__private__.getNumberOfPages=P.getNumberOfPages=function(){return Kt.length-1},Ro=function(V,ye,Je){var gt,It=void 0;return Je=Je||{},V=V!==void 0?V:ct[ve].fontName,ye=ye!==void 0?ye:ct[ve].fontStyle,gt=V.toLowerCase(),bt[gt]!==void 0&&bt[gt][ye]!==void 0?It=bt[gt][ye]:bt[V]!==void 0&&bt[V][ye]!==void 0?It=bt[V][ye]:Je.disableWarning===!1&&gs.warn("Unable to look up font label for font '"+V+"', '"+ye+"'. Refer to getFontList() for available fonts."),It||Je.noFallback||(It=bt.times[ye])==null&&(It=bt.times.normal),It},ds=P.__private__.putInfo=function(){var V=ai(),ye=function(gt){return gt};for(var Je in I!==null&&(ye=ys.encryptor(V,0)),je("<<"),je("/Producer ("+Ci(ye("jsPDF "+dn.version))+")"),pe)pe.hasOwnProperty(Je)&&pe[Je]&&je("/"+Je.substr(0,1).toUpperCase()+Je.substr(1)+" ("+Ci(ye(pe[Je]))+")");je("/CreationDate ("+Ci(ye(pt))+")"),je(">>"),je("endobj")},Ba=P.__private__.putCatalog=function(V){var ye=(V=V||{}).rootDictionaryObjId||sl;switch(ai(),je("<<"),je("/Type /Catalog"),je("/Pages "+ye+" 0 R"),Wr||(Wr="fullwidth"),Wr){case"fullwidth":je("/OpenAction [3 0 R /FitH null]");break;case"fullheight":je("/OpenAction [3 0 R /FitV null]");break;case"fullpage":je("/OpenAction [3 0 R /Fit]");break;case"original":je("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Je=""+Wr;Je.substr(Je.length-1)==="%"&&(Wr=parseInt(Wr)/100),typeof Wr=="number"&&je("/OpenAction [3 0 R /XYZ null null "+ue(Wr)+"]")}switch(hn||(hn="continuous"),hn){case"continuous":je("/PageLayout /OneColumn");break;case"single":je("/PageLayout /SinglePage");break;case"two":case"twoleft":je("/PageLayout /TwoColumnLeft");break;case"tworight":je("/PageLayout /TwoColumnRight")}Rr&&je("/PageMode /"+Rr),tn.publish("putCatalog"),je(">>"),je("endobj")},IA=P.__private__.putTrailer=function(){je("trailer"),je("<<"),je("/Size "+(at+1)),je("/Root "+at+" 0 R"),je("/Info "+(at-1)+" 0 R"),I!==null&&je("/Encrypt "+ys.oid+" 0 R"),je("/ID [ <"+lt+"> <"+lt+"> ]"),je(">>")},Mn=P.__private__.putHeader=function(){je("%PDF-"+W),je("%")},Sc=P.__private__.putXRef=function(){var V="0000000000";je("xref"),je("0 "+(at+1)),je("0000000000 65535 f ");for(var ye=1;ye<=at;ye++)typeof et[ye]=="function"?je((V+et[ye]()).slice(-10)+" 00000 n "):et[ye]!==void 0?je((V+et[ye]).slice(-10)+" 00000 n "):je("0000000000 00000 n ")},No=P.__private__.buildDocument=function(){var V;at=0,Et=0,_t=[],et=[],Pt=[],sl=Yt(),ns=Yt(),Cr(_t),tn.publish("buildDocument"),Mn(),ks(),(function(){tn.publish("putAdditionalObjects");for(var Je=0;Je<Pt.length;Je++){var gt=Pt[Je];Zn(gt.objId,!0),je(gt.content),je("endobj")}tn.publish("postPutAdditionalObjects")})(),V=[],(function(){for(var Je in ct)ct.hasOwnProperty(Je)&&(D===!1||D===!0&&O.hasOwnProperty(Je))&&fn(ct[Je])})(),(function(){var Je;for(Je in Jt)Jt.hasOwnProperty(Je)&&Ec(Jt[Je])})(),(function(){for(var Je in mr)mr.hasOwnProperty(Je)&&ol(mr[Je])})(),(function(Je){var gt;for(gt in Ft)Ft.hasOwnProperty(gt)&&(Ft[gt]instanceof Yf?al(Ft[gt]):Ft[gt]instanceof ap&&ec(Ft[gt],Je))})(V),tn.publish("putResources"),V.forEach(di),di({resourcesOid:ns,objectOid:Number.MAX_SAFE_INTEGER}),tn.publish("postPutResources"),I!==null&&(ys.oid=ai(),je("<<"),je("/Filter /Standard"),je("/V "+ys.v),je("/R "+ys.r),je("/U <"+ys.toHexString(ys.U)+">"),je("/O <"+ys.toHexString(ys.O)+">"),je("/P "+ys.P),je(">>"),je("endobj")),ds(),Ba();var ye=Et;return Sc(),IA(),je("startxref"),je(""+ye),je("%%EOF"),Cr(Kt[Ce]),_t.join(`
`)},Qo=P.__private__.getBlob=function(V){return new Blob([Ur(V)],{type:"application/pdf"})},Fc=P.output=P.__private__.output=(Di=function(V,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",V){case void 0:return No();case"save":P.save(ye.filename);break;case"arraybuffer":return Ur(No());case"blob":return Qo(No());case"bloburi":case"bloburl":if(kn.URL!==void 0&&typeof kn.URL.createObjectURL=="function")return kn.URL&&kn.URL.createObjectURL(Qo(No()))||void 0;gs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Je="",gt=No();try{Je=kC(gt)}catch{Je=kC(unescape(encodeURIComponent(gt)))}return"data:application/pdf;filename="+ye.filename+";base64,"+Je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kn)==="[object Window]"){var It="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(It=ye.pdfObjectUrl,Gt="");var sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+It+'"'+Gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",br=kn.open();return br!==null&&br.document.write(sr),br}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kn)==="[object Window]"){var Vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',gn=kn.open();if(gn!==null){gn.document.write(Vr);var yn=this;gn.document.documentElement.querySelector("#pdfViewer").onload=function(){gn.document.title=ye.filename,gn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yn.output("bloburl"))}}return gn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',ji=kn.open();if(ji!==null&&(ji.document.write(An),ji.document.title=ye.filename),ji||typeof safari>"u")return ji;break;case"datauri":case"dataurl":return kn.document.location.href=this.output("datauristring",ye);default:return null}},Di.foo=function(){try{return Di.apply(this,arguments)}catch(Je){var V=Je.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var ye="Error in function "+V.split(`
`)[0].split("<")[0]+": "+Je.message;if(!kn.console)throw new Error(ye);kn.console.error(ye,Je),kn.alert&&alert(ye)}},Di.foo.bar=Di,Di.foo),la=function(V){return Array.isArray(Nr)===!0&&Nr.indexOf(V)>-1};switch(a){case"pt":$e=1;break;case"mm":$e=72/25.4;break;case"cm":$e=72/2.54;break;case"in":$e=72;break;case"px":$e=la("px_scaling")==1?.75:96/72;break;case"pc":case"em":$e=12;break;case"ex":$e=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);$e=a}var ys=null;Le(),Ne();var Oo=P.__private__.getPageInfo=P.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[V].objId,pageNumber:V,pageContext:mt[V]}},nA=P.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in mt)if(mt[ye].objId===V)break;return Oo(ye)},iA=P.__private__.getCurrentPageInfo=P.getCurrentPageInfo=function(){return{objId:mt[Ce].objId,pageNumber:Ce,pageContext:mt[Ce]}};P.addPage=function(){return rA.apply(this,arguments),this},P.setPage=function(){return cl.apply(this,arguments),Cr.call(this,Kt[Ce]),this},P.insertPage=function(V){return this.addPage(),this.movePage(Ce,V),this},P.movePage=function(V,ye){var Je,gt;if(V>ye){Je=Kt[V],gt=mt[V];for(var It=V;It>ye;It--)Kt[It]=Kt[It-1],mt[It]=mt[It-1];Kt[ye]=Je,mt[ye]=gt,this.setPage(ye)}else if(V<ye){Je=Kt[V],gt=mt[V];for(var Gt=V;Gt<ye;Gt++)Kt[Gt]=Kt[Gt+1],mt[Gt]=mt[Gt+1];Kt[ye]=Je,mt[ye]=gt,this.setPage(ye)}return this},P.deletePage=function(){return ll.apply(this,arguments),this},P.__private__.text=P.text=function(V,ye,Je,gt,It){var Gt,sr,br,Vr,gn,yn,An,ji,is,Si=(gt=gt||{}).scope||this;if(typeof V=="number"&&typeof ye=="number"&&(typeof Je=="string"||Array.isArray(Je))){var Ds=Je;Je=ye,ye=V,V=Ds}if(arguments[3]instanceof wr==0?(br=arguments[4],Vr=arguments[5],rs(An=arguments[3])==="object"&&An!==null||(typeof br=="string"&&(Vr=br,br=null),typeof An=="string"&&(Vr=An,An=null),typeof An=="number"&&(br=An,An=null),gt={flags:An,angle:br,align:Vr})):(be("The transform parameter of text() with a Matrix value"),is=It),isNaN(ye)||isNaN(Je)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Si;var Mi,xs="",Ko=typeof gt.lineHeightFactor=="number"?gt.lineHeightFactor:zo,da=Si.internal.scaleFactor;function pa(si){return si=si.split("	").join(Array(gt.TabLen||9).join(" ")),Ci(si,An)}function Ta(si){for(var _i,Yi=si.concat(),bs=[],Pn=Yi.length;Pn--;)typeof(_i=Yi.shift())=="string"?bs.push(_i):Array.isArray(si)&&(_i.length===1||_i[1]===void 0&&_i[2]===void 0)?bs.push(_i[0]):bs.push([_i[0],_i[1],_i[2]]);return bs}function hl(si,_i){var Yi;if(typeof si=="string")Yi=_i(si)[0];else if(Array.isArray(si)){for(var bs,Pn,Lc=si.concat(),cc=[],ka=Lc.length;ka--;)typeof(bs=Lc.shift())=="string"?cc.push(_i(bs)[0]):Array.isArray(bs)&&typeof bs[0]=="string"&&(Pn=_i(bs[0],bs[1],bs[2]),cc.push([Pn[0],Pn[1],Pn[2]]));Yi=cc}return Yi}var Fi=!1,Tc=!0;if(typeof V=="string")Fi=!0;else if(Array.isArray(V)){var ma=V.concat();sr=[];for(var Pa,Xi=ma.length;Xi--;)(typeof(Pa=ma.shift())!="string"||Array.isArray(Pa)&&typeof Pa[0]!="string")&&(Tc=!1);Fi=Tc}if(Fi===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var sA=lr/Si.internal.scaleFactor,Tl=sA*(Ko-1);switch(gt.baseline){case"bottom":Je-=Tl;break;case"top":Je+=sA-Tl;break;case"hanging":Je+=sA-2*Tl;break;case"middle":Je+=sA/2-Tl}if((yn=gt.maxWidth||0)>0&&(typeof V=="string"?V=Si.splitTextToSize(V,yn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(si,_i){return si.concat(Si.splitTextToSize(_i,yn))},[]))),Gt={text:V,x:ye,y:Je,options:gt,mutex:{pdfEscape:Ci,activeFontKey:ve,fonts:ct,activeFontSize:lr}},tn.publish("preProcessText",Gt),V=Gt.text,br=(gt=Gt.options).angle,is instanceof wr==0&&br&&typeof br=="number"){br*=Math.PI/180,gt.rotationDirection===0&&(br=-br),fe===ae&&(br=-br);var ou=Math.cos(br),Pl=Math.sin(br);is=new wr(ou,Pl,-Pl,ou,0,0)}else br&&br instanceof wr&&(is=br);fe!==ae||is||(is=Bn),(gn=gt.charSpace||Zi)!==void 0&&(xs+=Oe(Ue(gn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ji=gt.horizontalScale)!==void 0&&(xs+=Oe(100*ji)+` Tz
`),gt.lang;var $s=-1,La=gt.renderingMode!==void 0?gt.renderingMode:gt.stroke,fl=Si.internal.getCurrentPageInfo().pageContext;switch(La){case 0:case!1:case"fill":$s=0;break;case 1:case!0:case"stroke":$s=1;break;case 2:case"fillThenStroke":$s=2;break;case 3:case"invisible":$s=3;break;case 4:case"fillAndAddForClipping":$s=4;break;case 5:case"strokeAndAddPathForClipping":$s=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$s=6;break;case 7:case"addToPathForClipping":$s=7}var LA=fl.usedRenderingMode!==void 0?fl.usedRenderingMode:-1;$s!==-1?xs+=$s+` Tr
`:LA!==-1&&(xs+=`0 Tr
`),$s!==-1&&(fl.usedRenderingMode=$s),Vr=gt.align||"left";var Bo,Ll=lr*Ko,oA=Si.internal.pageSize.getWidth(),aA=ct[ve];gn=gt.charSpace||Zi,yn=gt.maxWidth||0,An=Object.assign({autoencode:!0,noBOM:!0},gt.flags);var Ml=[],Ws=function(si){return Si.getStringUnitWidth(si,{font:aA,charSpace:gn,fontSize:lr,doKerning:!1})*lr/da};if(Object.prototype.toString.call(V)==="[object Array]"){var qo;sr=Ta(V),Vr!=="left"&&(Bo=sr.map(Ws));var Co,ga=0;if(Vr==="right"){ye-=Bo[0],V=[],Xi=sr.length;for(var dl=0;dl<Xi;dl++)dl===0?(Co=_s(ye),qo=Wi(Je)):(Co=Ue(ga-Bo[dl]),qo=-Ll),V.push([sr[dl],Co,qo]),ga=Bo[dl]}else if(Vr==="center"){ye-=Bo[0]/2,V=[],Xi=sr.length;for(var Ma=0;Ma<Xi;Ma++)Ma===0?(Co=_s(ye),qo=Wi(Je)):(Co=Ue((ga-Bo[Ma])/2),qo=-Ll),V.push([sr[Ma],Co,qo]),ga=Bo[Ma]}else if(Vr==="left"){V=[],Xi=sr.length;for(var oc=0;oc<Xi;oc++)V.push(sr[oc])}else if(Vr==="justify"&&aA.encoding==="Identity-H"){V=[],Xi=sr.length,yn=yn!==0?yn:oA;for(var kl=0,ss=0;ss<Xi;ss++)if(qo=ss===0?Wi(Je):-Ll,Co=ss===0?_s(ye):kl,ss<Xi-1){var pl=Ue((yn-Bo[ss])/(sr[ss].split(" ").length-1)),ml=sr[ss].split(" ");V.push([ml[0]+" ",Co,qo]),kl=0;for(var ya=1;ya<ml.length;ya++){var Pc=(Ws(ml[ya-1]+" "+ml[ya])-Ws(ml[ya]))*da+pl;ya==ml.length-1?V.push([ml[ya],Pc,0]):V.push([ml[ya]+" ",Pc,0]),kl-=Pc}}else V.push([sr[ss],Co,qo]);V.push(["",kl,0])}else{if(Vr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Xi=sr.length,yn=yn!==0?yn:oA,ss=0;ss<Xi;ss++){qo=ss===0?Wi(Je):-Ll,Co=ss===0?_s(ye):0;var Ul=sr[ss].split(" ").length-1,ho=Ul>0?(yn-Bo[ss])/Ul:0;ss<Xi-1?Ml.push(Oe(Ue(ho))):Ml.push(0),V.push([sr[ss],Co,qo])}}}(typeof gt.R2L=="boolean"?gt.R2L:Or)===!0&&(V=hl(V,function(si,_i,Yi){return[si.split("").reverse().join(""),_i,Yi]})),Gt={text:V,x:ye,y:Je,options:gt,mutex:{pdfEscape:Ci,activeFontKey:ve,fonts:ct,activeFontSize:lr}},tn.publish("postProcessText",Gt),V=Gt.text,Mi=Gt.mutex.isHex||!1;var ac=ct[ve].encoding;ac!=="WinAnsiEncoding"&&ac!=="StandardEncoding"||(V=hl(V,function(si,_i,Yi){return[pa(si),_i,Yi]})),sr=Ta(V),V=[];for(var gl,Dl,Rl,Nl=Array.isArray(sr[0])?1:0,$o="",lc=function(si,_i,Yi){var bs="";return Yi instanceof wr?(Yi=typeof gt.angle=="number"?Tn(Yi,new wr(1,0,0,1,si,_i)):Tn(new wr(1,0,0,1,si,_i),Yi),fe===ae&&(Yi=Tn(new wr(1,0,0,-1,0,0),Yi)),bs=Yi.join(" ")+` Tm
`):bs=Oe(si)+" "+Oe(_i)+` Td
`,bs},os=0;os<sr.length;os++){switch($o="",Nl){case 1:Rl=(Mi?"<":"(")+sr[os][0]+(Mi?">":")"),gl=parseFloat(sr[os][1]),Dl=parseFloat(sr[os][2]);break;case 0:Rl=(Mi?"<":"(")+sr[os]+(Mi?">":")"),gl=_s(ye),Dl=Wi(Je)}Ml!==void 0&&Ml[os]!==void 0&&($o=Ml[os]+` Tw
`),os===0?V.push($o+lc(gl,Dl,is)+Rl):Nl===0?V.push($o+Rl):Nl===1&&V.push($o+lc(gl,Dl,is)+Rl)}V=Nl===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Eo=`BT
/`;return Eo+=ve+" "+lr+` Tf
`,Eo+=Oe(lr*Ko)+` TL
`,Eo+=ti+`
`,Eo+=xs,Eo+=V,je(Eo+="ET"),O[ve]=!0,Si};var rc=P.__private__.clip=P.clip=function(V){return je(V==="evenodd"?"W*":"W"),this};P.clipEvenOdd=function(){return rc("evenodd")},P.__private__.discardPath=P.discardPath=function(){return je("n"),this};var Ca=P.__private__.isValidStyle=function(V){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ye=!0),ye};P.__private__.setDefaultPathOperation=P.setDefaultPathOperation=function(V){return Ca(V)&&(E=V),this};var TA=P.__private__.getStyle=P.getStyle=function(V){var ye=E;switch(V){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=V}return ye},Kn=P.close=function(){return je("h"),this};P.stroke=function(){return je("S"),this},P.fill=function(V){return Fl("f",V),this},P.fillEvenOdd=function(V){return Fl("f*",V),this},P.fillStroke=function(V){return Fl("B",V),this},P.fillStrokeEvenOdd=function(V){return Fl("B*",V),this};var Fl=function(V,ye){rs(ye)==="object"?PA(ye,V):je(V)},nc=function(V){V===null||fe===ae&&V===void 0||(V=TA(V),je(V))};function Il(V,ye,Je,gt,It){var Gt=new ap(ye||this.boundingBox,Je||this.xStep,gt||this.yStep,this.gState,It||this.matrix);Gt.stream=this.stream;var sr=V+"$$"+this.cloneIndex+++"$$";return xn(sr,Gt),Gt}var PA=function(V,ye){var Je=cr[V.key],gt=Ft[Je];if(gt instanceof Yf)je("q"),je(Ic(ye)),gt.gState&&P.setGState(gt.gState),je(V.matrix.toString()+" cm"),je("/"+Je+" sh"),je("Q");else if(gt instanceof ap){var It=new wr(1,0,0,-1,0,ao());V.matrix&&(It=It.multiply(V.matrix||Bn),Je=Il.call(gt,V.key,V.boundingBox,V.xStep,V.yStep,It).id),je("q"),je("/Pattern cs"),je("/"+Je+" scn"),gt.gState&&P.setGState(gt.gState),je(ye),je("Q")}},Ic=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ca=P.moveTo=function(V,ye){return je(Oe(Ue(V))+" "+Oe(Ie(ye))+" m"),this},Al=P.lineTo=function(V,ye){return je(Oe(Ue(V))+" "+Oe(Ie(ye))+" l"),this},an=P.curveTo=function(V,ye,Je,gt,It,Gt){return je([Oe(Ue(V)),Oe(Ie(ye)),Oe(Ue(Je)),Oe(Ie(gt)),Oe(Ue(It)),Oe(Ie(Gt)),"c"].join(" ")),this};P.__private__.line=P.line=function(V,ye,Je,gt,It){if(isNaN(V)||isNaN(ye)||isNaN(Je)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.line");return fe===se?this.lines([[Je-V,gt-ye]],V,ye,[1,1],It||"S"):this.lines([[Je-V,gt-ye]],V,ye,[1,1]).stroke()},P.__private__.lines=P.lines=function(V,ye,Je,gt,It,Gt){var sr,br,Vr,gn,yn,An,ji,is,Si,Ds,Mi,xs;if(typeof V=="number"&&(xs=Je,Je=ye,ye=V,V=xs),gt=gt||[1,1],Gt=Gt||!1,isNaN(ye)||isNaN(Je)||!Array.isArray(V)||!Array.isArray(gt)||!Ca(It)||typeof Gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ca(ye,Je),sr=gt[0],br=gt[1],gn=V.length,Ds=ye,Mi=Je,Vr=0;Vr<gn;Vr++)(yn=V[Vr]).length===2?(Ds=yn[0]*sr+Ds,Mi=yn[1]*br+Mi,Al(Ds,Mi)):(An=yn[0]*sr+Ds,ji=yn[1]*br+Mi,is=yn[2]*sr+Ds,Si=yn[3]*br+Mi,Ds=yn[4]*sr+Ds,Mi=yn[5]*br+Mi,an(An,ji,is,Si,Ds,Mi));return Gt&&Kn(),nc(It),this},P.path=function(V){for(var ye=0;ye<V.length;ye++){var Je=V[ye],gt=Je.c;switch(Je.op){case"m":ca(gt[0],gt[1]);break;case"l":Al(gt[0],gt[1]);break;case"c":an.apply(this,gt);break;case"h":Kn()}}return this},P.__private__.rect=P.rect=function(V,ye,Je,gt,It){if(isNaN(V)||isNaN(ye)||isNaN(Je)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.rect");return fe===se&&(gt=-gt),je([Oe(Ue(V)),Oe(Ie(ye)),Oe(Ue(Je)),Oe(Ue(gt)),"re"].join(" ")),nc(It),this},P.__private__.triangle=P.triangle=function(V,ye,Je,gt,It,Gt,sr){if(isNaN(V)||isNaN(ye)||isNaN(Je)||isNaN(gt)||isNaN(It)||isNaN(Gt)||!Ca(sr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Je-V,gt-ye],[It-Je,Gt-gt],[V-It,ye-Gt]],V,ye,[1,1],sr,!0),this},P.__private__.roundedRect=P.roundedRect=function(V,ye,Je,gt,It,Gt,sr){if(isNaN(V)||isNaN(ye)||isNaN(Je)||isNaN(gt)||isNaN(It)||isNaN(Gt)||!Ca(sr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var br=4/3*(Math.SQRT2-1);return It=Math.min(It,.5*Je),Gt=Math.min(Gt,.5*gt),this.lines([[Je-2*It,0],[It*br,0,It,Gt-Gt*br,It,Gt],[0,gt-2*Gt],[0,Gt*br,-It*br,Gt,-It,Gt],[2*It-Je,0],[-It*br,0,-It,-Gt*br,-It,-Gt],[0,2*Gt-gt],[0,-Gt*br,It*br,-Gt,It,-Gt]],V+It,ye,[1,1],sr,!0),this},P.__private__.ellipse=P.ellipse=function(V,ye,Je,gt,It){if(isNaN(V)||isNaN(ye)||isNaN(Je)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Gt=4/3*(Math.SQRT2-1)*Je,sr=4/3*(Math.SQRT2-1)*gt;return ca(V+Je,ye),an(V+Je,ye-sr,V+Gt,ye-gt,V,ye-gt),an(V-Gt,ye-gt,V-Je,ye-sr,V-Je,ye),an(V-Je,ye+sr,V-Gt,ye+gt,V,ye+gt),an(V+Gt,ye+gt,V+Je,ye+sr,V+Je,ye),nc(It),this},P.__private__.circle=P.circle=function(V,ye,Je,gt){if(isNaN(V)||isNaN(ye)||isNaN(Je)||!Ca(gt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ye,Je,Je,gt)},P.setFont=function(V,ye,Je){return Je&&(ye=Ve(ye,Je)),ve=Ro(V,ye,{disableWarning:!1}),this};var Ea=P.__private__.getFont=P.getFont=function(){return ct[Ro.apply(P,arguments)]};P.__private__.getFontList=P.getFontList=function(){var V,ye,Je={};for(V in bt)if(bt.hasOwnProperty(V))for(ye in Je[V]=[],bt[V])bt[V].hasOwnProperty(ye)&&Je[V].push(ye);return Je},P.addFont=function(V,ye,Je,gt,It){var Gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Gt.indexOf(arguments[3])!==-1?It=arguments[3]:arguments[3]&&Gt.indexOf(arguments[3])==-1&&(Je=Ve(Je,gt)),Sl.call(this,V,ye,Je,It=It||"Identity-H")};var zo,Ho=e.lineWidth||.200025,vs=P.__private__.getLineWidth=P.getLineWidth=function(){return Ho},qr=P.__private__.setLineWidth=P.setLineWidth=function(V){return Ho=V,je(Oe(Ue(V))+" w"),this};P.__private__.setLineDash=dn.API.setLineDash=dn.API.setLineDashPattern=function(V,ye){if(V=V||[],ye=ye||0,isNaN(ye)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Je){return Oe(Ue(Je))}).join(" "),ye=Oe(Ue(ye)),je("["+V+"] "+ye+" d"),this};var Jn=P.__private__.getLineHeight=P.getLineHeight=function(){return lr*zo};P.__private__.getLineHeight=P.getLineHeight=function(){return lr*zo};var cn=P.__private__.setLineHeightFactor=P.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(zo=V),this},ii=P.__private__.getLineHeightFactor=P.getLineHeightFactor=function(){return zo};cn(e.lineHeight);var _s=P.__private__.getHorizontalCoordinate=function(V){return Ue(V)},Wi=P.__private__.getVerticalCoordinate=function(V){return fe===ae?V:mt[Ce].mediaBox.topRightY-mt[Ce].mediaBox.bottomLeftY-Ue(V)},uo=P.__private__.getHorizontalCoordinateString=P.getHorizontalCoordinateString=function(V){return Oe(_s(V))},ws=P.__private__.getVerticalCoordinateString=P.getVerticalCoordinateString=function(V){return Oe(Wi(V))},Sa=e.strokeColor||"0 G";P.__private__.getStrokeColor=P.getDrawColor=function(){return pr(Sa)},P.__private__.setStrokeColor=P.setDrawColor=function(V,ye,Je,gt){return Sa=nn({ch1:V,ch2:ye,ch3:Je,ch4:gt,pdfColorType:"draw",precision:2}),je(Sa),this};var Fa=e.fillColor||"0 g";P.__private__.getFillColor=P.getFillColor=function(){return pr(Fa)},P.__private__.setFillColor=P.setFillColor=function(V,ye,Je,gt){return Fa=nn({ch1:V,ch2:ye,ch3:Je,ch4:gt,pdfColorType:"fill",precision:2}),je(Fa),this};var ti=e.textColor||"0 g",Aa=P.__private__.getTextColor=P.getTextColor=function(){return pr(ti)};P.__private__.setTextColor=P.setTextColor=function(V,ye,Je,gt){return ti=nn({ch1:V,ch2:ye,ch3:Je,ch4:gt,pdfColorType:"text",precision:3}),this};var Zi=e.charSpace,ic=P.__private__.getCharSpace=P.getCharSpace=function(){return parseFloat(Zi||0)};P.__private__.setCharSpace=P.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zi=V,this};var qs=0;P.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},P.__private__.setLineCap=P.setLineCap=function(V){var ye=P.CapJoinStyles[V];if(ye===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qs=ye,je(ye+" J"),this};var ul=0;P.__private__.setLineJoin=P.setLineJoin=function(V){var ye=P.CapJoinStyles[V];if(ye===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ul=ye,je(ye+" j"),this},P.__private__.setLineMiterLimit=P.__private__.setMiterLimit=P.setLineMiterLimit=P.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return je(Oe(Ue(V))+" M"),this},P.GState=Ay,P.setGState=function(V){(V=typeof V=="string"?Jt[dr[V]]:jo(null,V)).equals(rn)||(je("/"+V.id+" gs"),rn=V)};var jo=function(V,ye){if(!V||!dr[V]){var Je=!1;for(var gt in Jt)if(Jt.hasOwnProperty(gt)&&Jt[gt].equals(ye)){Je=!0;break}if(Je)ye=Jt[gt];else{var It="GS"+(Object.keys(Jt).length+1).toString(10);Jt[It]=ye,ye.id=It}return V&&(dr[V]=ye.id),tn.publish("addGState",ye),ye}};P.addGState=function(V,ye){return jo(V,ye),this},P.saveGraphicsState=function(){return je("q"),Ht.push({key:ve,size:lr,color:ti}),this},P.restoreGraphicsState=function(){je("Q");var V=Ht.pop();return ve=V.key,lr=V.size,ti=V.color,rn=null,this},P.setCurrentTransformationMatrix=function(V){return je(V.toString()+" cm"),this},P.comment=function(V){return je("#"+V),this};var ua=function(V,ye){var Je=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Je},set:function(Gt){isNaN(Gt)||(Je=parseFloat(Gt))}});var gt=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return gt},set:function(Gt){isNaN(Gt)||(gt=parseFloat(Gt))}});var It="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return It},set:function(Gt){It=Gt.toString()}}),this},sc=function(V,ye,Je,gt){ua.call(this,V,ye),this.type="rect";var It=Je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return It},set:function(sr){isNaN(sr)||(It=parseFloat(sr))}});var Gt=gt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Gt},set:function(sr){isNaN(sr)||(Gt=parseFloat(sr))}}),this},ha=function(){this.page=Tr,this.currentPage=Ce,this.pages=Kt.slice(0),this.pagesContext=mt.slice(0),this.x=Ze,this.y=Ct,this.matrix=vt,this.width=En(Ce),this.height=Ia(Ce),this.outputDestination=hr,this.id="",this.objectNumber=-1};ha.prototype.restore=function(){Tr=this.page,Ce=this.currentPage,mt=this.pagesContext,Kt=this.pages,Ze=this.x,Ct=this.y,vt=this.matrix,mn(Ce,this.width),bn(Ce,this.height),hr=this.outputDestination};var Nn=function(V,ye,Je,gt,It){Dn.push(new ha),Tr=Ce=0,Kt=[],Ze=V,Ct=ye,vt=It,jn([Je,gt])};for(var Vo in P.beginFormObject=function(V,ye,Je,gt,It){return Nn(V,ye,Je,gt,It),this},P.endFormObject=function(V){return(function(ye){if(Kr[ye])Dn.pop().restore();else{var Je=new ha,gt="Xo"+(Object.keys(mr).length+1).toString(10);Je.id=gt,Kr[ye]=gt,mr[gt]=Je,tn.publish("addFormObject",Je),Dn.pop().restore()}})(V),this},P.doFormObject=function(V,ye){var Je=mr[Kr[V]];return je("q"),je(ye.toString()+" cm"),je("/"+Je.id+" Do"),je("Q"),this},P.getFormObject=function(V){var ye=mr[Kr[V]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},P.save=function(V,ye){return V=V||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(Zf(Qo(No()),V),typeof Zf.unload=="function"&&kn.setTimeout&&setTimeout(Zf.unload,911),this):new Promise(function(Je,gt){try{var It=Zf(Qo(No()),V);typeof Zf.unload=="function"&&kn.setTimeout&&setTimeout(Zf.unload,911),Je(It)}catch(Gt){gt(Gt.message)}})},dn.API)dn.API.hasOwnProperty(Vo)&&(Vo==="events"&&dn.API.events.length?(function(V,ye){var Je,gt,It;for(It=ye.length-1;It!==-1;It--)Je=ye[It][0],gt=ye[It][1],V.subscribe.apply(V,[Je].concat(typeof gt=="function"?[gt]:gt))})(tn,dn.API.events):P[Vo]=dn.API[Vo]);function En(V){return mt[V].mediaBox.topRightX-mt[V].mediaBox.bottomLeftX}function mn(V,ye){mt[V].mediaBox.topRightX=ye+mt[V].mediaBox.bottomLeftX}function Ia(V){return mt[V].mediaBox.topRightY-mt[V].mediaBox.bottomLeftY}function bn(V,ye){mt[V].mediaBox.topRightY=ye+mt[V].mediaBox.bottomLeftY}var Go=P.getPageWidth=function(V){return En(V=V||Ce)/$e},Ei=P.setPageWidth=function(V,ye){mn(V,ye*$e)},ao=P.getPageHeight=function(V){return Ia(V=V||Ce)/$e},fa=P.setPageHeight=function(V,ye){bn(V,ye*$e)};return P.internal={pdfEscape:Ci,getStyle:TA,getFont:Ea,getFontSize:Sr,getCharSpace:ic,getTextColor:Aa,getLineHeight:Jn,getLineHeightFactor:ii,getLineWidth:vs,write:vr,getHorizontalCoordinate:_s,getVerticalCoordinate:Wi,getCoordinateString:uo,getVerticalCoordinateString:ws,collections:{},newObject:ai,newAdditionalObject:$i,newObjectDeferred:Yt,newObjectDeferredBegin:Zn,getFilters:un,putStream:Ri,events:tn,scaleFactor:$e,pageSize:{getWidth:function(){return Go(Ce)},setWidth:function(V){Ei(Ce,V)},getHeight:function(){return ao(Ce)},setHeight:function(V){fa(Ce,V)}},encryptionOptions:I,encryption:ys,getEncryptor:function(V){return I!==null?ys.encryptor(V,0):function(ye){return ye}},output:Fc,getNumberOfPages:Us,get pages(){return Kt},out:je,f2:ue,f3:me,getPageInfo:Oo,getPageInfoByObjId:nA,getCurrentPageInfo:iA,getPDFVersion:H,Point:ua,Rectangle:sc,Matrix:wr,hasHotfix:la},Object.defineProperty(P.internal.pageSize,"width",{get:function(){return Go(Ce)},set:function(V){Ei(Ce,V)},enumerable:!0,configurable:!0}),Object.defineProperty(P.internal.pageSize,"height",{get:function(){return ao(Ce)},set:function(V){fa(Ce,V)},enumerable:!0,configurable:!0}),(function(V){for(var ye=0,Je=$r.length;ye<Je;ye++){var gt=Sl.call(this,V[ye][0],V[ye][1],V[ye][2],$r[ye][3],!0);D===!1&&(O[gt]=!0);var It=V[ye][0].split("-");tc({id:gt,fontName:It[0],fontStyle:It[1]||""})}tn.publish("addFonts",{fonts:ct,dictionary:bt})}).call(P,$r),ve="F1",rA(u,i),tn.publish("initialized"),P}rp.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},rp.prototype.toHexString=function(e){return e.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rp.prototype.hexToBytes=function(e){for(var n=[],i=0;i<e.length;i+=2)n.push(String.fromCharCode(parseInt(e.substr(i,2),16)));return n.join("")},rp.prototype.processOwnerPassword=function(e,n){return hw(uw(n).substr(0,5),e)},rp.prototype.encryptor=function(e,n){var i=uw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(a){return hw(i,a)}},Ay.prototype.equals=function(e){var n,i="id,objectNumber,equals";if(!e||rs(e)!==rs(this))return!1;var a=0;for(n in this)if(!(i.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;a++}for(n in e)e.hasOwnProperty(n)&&i.indexOf(n)<0&&a--;return a===0},dn.API={events:[]},dn.version="3.0.4";var bo=dn.API,cx=1,Ad=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hn=function(e){return e.toFixed(2)},of=function(e){return e.toFixed(5)};bo.__acroform__={};var tA=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},NC=function(e){return e*cx},Yu=function(e){var n=new bI,i=on.internal.getHeight(e)||0,a=on.internal.getWidth(e)||0;return n.BBox=[0,0,Number(Hn(a)),Number(Hn(i))],n},wj=bo.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<n},xj=bo.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<n)},bj=bo.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<n?1:0},ko=bo.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bj(e,n-1)},Uo=bo.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wj(e,n-1)},Do=bo.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xj(e,n-1)},Bj=bo.__acroform__.calculateCoordinates=function(e,n){var i=n.internal.getHorizontalCoordinate,a=n.internal.getVerticalCoordinate,u=e[0],f=e[1],m=e[2],o=e[3],w={};return w.lowerLeft_X=i(u)||0,w.lowerLeft_Y=a(f+o)||0,w.upperRight_X=i(u+m)||0,w.upperRight_Y=a(f)||0,[Number(Hn(w.lowerLeft_X)),Number(Hn(w.lowerLeft_Y)),Number(Hn(w.upperRight_X)),Number(Hn(w.upperRight_Y))]},Cj=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],i=e._V||e.DV,a=fw(e,i),u=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+u+" "+Hn(a.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC");var f=Yu(e);return f.scope=e.scope,f.stream=n.join(`
`),f}},fw=function(e,n){var i=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},u=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");u=e.multiline?u.map(function(ue){return ue.split(`
`)}):u.map(function(ue){return[ue]});var f=i,m=on.internal.getHeight(e)||0;m=m<0?-m:m;var o=on.internal.getWidth(e)||0;o=o<0?-o:o;var w=function(ue,me,Ue){if(ue+1<u.length){var Ie=me+" "+u[ue+1][0];return B0(Ie,e,Ue).width<=o-4}return!1};f++;e:for(;f>0;){n="",f--;var E,I,D=B0("3",e,f).height,O=e.multiline?m-f:(m-D)/2,P=O+=2,W=0,H=0,z=0;if(f<=0){n=`(...) Tj
`,n+="% Width of Text: "+B0(n,e,f=12).width+", FieldWidth:"+o+`
`;break}for(var Z="",se=0,ae=0;ae<u.length;ae++)if(u.hasOwnProperty(ae)){var fe=!1;if(u[ae].length!==1&&z!==u[ae].length-1){if((D+2)*(se+2)+2>m)continue e;Z+=u[ae][z],fe=!0,H=ae,ae--}else{Z=(Z+=u[ae][z]+" ").substr(Z.length-1)==" "?Z.substr(0,Z.length-1):Z;var Fe=parseInt(ae),He=w(Fe,Z,f),Ve=ae>=u.length-1;if(He&&!Ve){Z+=" ",z=0;continue}if(He||Ve){if(Ve)H=Fe;else if(e.multiline&&(D+2)*(se+2)+2>m)continue e}else{if(!e.multiline||(D+2)*(se+2)+2>m)continue e;H=Fe}}for(var Oe="",be=W;be<=H;be++){var rt=u[be];if(e.multiline){if(be===H){Oe+=rt[z]+" ",z=(z+1)%rt.length;continue}if(be===W){Oe+=rt[rt.length-1]+" ";continue}}Oe+=rt[0]+" "}switch(Oe=Oe.substr(Oe.length-1)==" "?Oe.substr(0,Oe.length-1):Oe,I=B0(Oe,e,f).width,e.textAlign){case"right":E=o-I-2;break;case"center":E=(o-I)/2;break;default:E=2}n+=Hn(E)+" "+Hn(P)+` Td
`,n+="("+Ad(Oe)+`) Tj
`,n+=-Hn(E)+` 0 Td
`,P=-(f+2),I=0,W=fe?H:H+1,se++,Z=""}break}return a.text=n,a.fontSize=f,a},B0=function(e,n,i){var a=n.scope.internal.getFont(n.fontName,n.fontStyle),u=n.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:n.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:u}},Ej={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Sj=function(e,n){var i={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===i.type&&a.object===i.object})===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(i)},Fj=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Mu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ej)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");cx=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new BI,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var u in a)if(a.hasOwnProperty(u)){var f=a[u];f.objId=void 0,f.hasAnnotation&&Sj(f,i)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(i){(function(a,u){var f=!a;for(var m in a||(u.internal.newObjectDeferredBegin(u.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),u.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||u.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(m)){var o=a[m],w=[],E=o.Rect;if(o.Rect&&(o.Rect=Bj(o.Rect,u)),u.internal.newObjectDeferredBegin(o.objId,!0),o.DA=on.createDefaultAppearanceStream(o),rs(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(w=o.getKeyValueListForStream()),o.Rect=E,o.hasAppearanceStream&&!o.appearanceStreamContent){var I=Cj(o);w.push({key:"AP",value:"<</N "+I+">>"}),u.internal.acroformPlugin.xForms.push(I)}if(o.appearanceStreamContent){var D="";for(var O in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(O)){var P=o.appearanceStreamContent[O];if(D+="/"+O+" ",D+="<<",Object.keys(P).length>=1||Array.isArray(P)){for(var m in P)if(P.hasOwnProperty(m)){var W=P[m];typeof W=="function"&&(W=W.call(u,o)),D+="/"+m+" "+W+" ",u.internal.acroformPlugin.xForms.indexOf(W)>=0||u.internal.acroformPlugin.xForms.push(W)}}else typeof(W=P)=="function"&&(W=W.call(u,o)),D+="/"+m+" "+W,u.internal.acroformPlugin.xForms.indexOf(W)>=0||u.internal.acroformPlugin.xForms.push(W);D+=">>"}w.push({key:"AP",value:`<<
`+D+">>"})}u.internal.putStream({additionalKeyValues:w,objectId:o.objId}),u.internal.out("endobj")}f&&(function(H,z){for(var Z in H)if(H.hasOwnProperty(Z)){var se=Z,ae=H[Z];z.internal.newObjectDeferredBegin(ae.objId,!0),rs(ae)==="object"&&typeof ae.putStream=="function"&&ae.putStream(),delete H[se]}})(u.internal.acroformPlugin.xForms,u)})(i,e)}),e.internal.acroformPlugin.isInitialized=!0}},xI=bo.__acroform__.arrayToPdfArray=function(e,n,i){var a=function(m){return m};if(Array.isArray(e)){for(var u="[",f=0;f<e.length;f++)switch(f!==0&&(u+=" "),rs(e[f])){case"boolean":case"number":case"object":u+=e[f].toString();break;case"string":e[f].substr(0,1)!=="/"?(n!==void 0&&i&&(a=i.internal.getEncryptor(n)),u+="("+Ad(a(e[f].toString()))+")"):u+=e[f].toString()}return u+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},W1=function(e,n,i){var a=function(u){return u};return n!==void 0&&i&&(a=i.internal.getEncryptor(n)),(e=e||"").toString(),"("+Ad(a(e))+")"},th=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};th.prototype.toString=function(){return this.objId+" 0 R"},th.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},th.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter(function(f){return f!="content"&&f!="appearanceStreamContent"&&f!="scope"&&f!="objId"&&f.substring(0,1)!="_"});for(var i in n)if(Object.getOwnPropertyDescriptor(this,n[i]).configurable===!1){var a=n[i],u=this[a];u&&(Array.isArray(u)?e.push({key:a,value:xI(u,this.objId,this.scope)}):u instanceof th?(u.scope=this.scope,e.push({key:a,value:u.objId+" 0 R"})):typeof u!="function"&&e.push({key:a,value:u}))}return e};var bI=function(){th.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){e=i.trim()},get:function(){return e||null}})};tA(bI,th);var BI=function(){th.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var i=function(a){return a};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+Ad(i(e))+")"}},set:function(i){e=i}})};tA(BI,th);var Mu=function e(){th.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(Z){if(isNaN(Z))throw new Error('Invalid value "'+Z+'" for attribute F supplied.');n=Z}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ko(n,3)},set:function(Z){Z?this.F=Uo(n,3):this.F=Do(n,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(Z){if(isNaN(Z))throw new Error('Invalid value "'+Z+'" for attribute Ff supplied.');i=Z}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(Z){a=Z!==void 0?Z:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(Z){a[0]=Z}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(Z){a[1]=Z}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(Z){a[2]=Z}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(Z){a[3]=Z}});var u="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return u},set:function(Z){switch(Z){case"/Btn":case"/Tx":case"/Ch":case"/Sig":u=Z;break;default:throw new Error('Invalid value "'+Z+'" for attribute FT supplied.')}}});var f=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!f||f.length<1){if(this instanceof uy)return;f="FieldObject"+e.FieldNum++}var Z=function(se){return se};return this.scope&&(Z=this.scope.internal.getEncryptor(this.objId)),"("+Ad(Z(f))+")"},set:function(Z){f=Z.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return f},set:function(Z){f=Z}});var m="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return m},set:function(Z){m=Z}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(Z){o=Z}});var w=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return w},set:function(Z){w=Z}});var E=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return E===void 0?50/cx:E},set:function(Z){E=Z}});var I="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return I},set:function(Z){I=Z}});var D="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!D||this instanceof uy||this instanceof rd))return W1(D,this.objId,this.scope)},set:function(Z){Z=Z.toString(),D=Z}});var O=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(O)return this instanceof rl==0?W1(O,this.objId,this.scope):O},set:function(Z){Z=Z.toString(),O=this instanceof rl==0?Z.substr(0,1)==="("?Wd(Z.substr(1,Z.length-2)):Wd(Z):Z}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rl==1?Wd(O.substr(1,O.length-1)):O},set:function(Z){Z=Z.toString(),O=this instanceof rl==1?"/"+Z:Z}});var P=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(P)return P},set:function(Z){this.V=Z}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof rl==0?W1(P,this.objId,this.scope):P},set:function(Z){Z=Z.toString(),P=this instanceof rl==0?Z.substr(0,1)==="("?Wd(Z.substr(1,Z.length-2)):Wd(Z):Z}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rl==1?Wd(P.substr(1,P.length-1)):P},set:function(Z){Z=Z.toString(),P=this instanceof rl==1?"/"+Z:Z}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var W,H=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return H},set:function(Z){Z=!!Z,H=Z}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(W)return W},set:function(Z){W=Z}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,1)},set:function(Z){Z?this.Ff=Uo(this.Ff,1):this.Ff=Do(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,2)},set:function(Z){Z?this.Ff=Uo(this.Ff,2):this.Ff=Do(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,3)},set:function(Z){Z?this.Ff=Uo(this.Ff,3):this.Ff=Do(this.Ff,3)}});var z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(z!==null)return z},set:function(Z){if([0,1,2].indexOf(Z)===-1)throw new Error('Invalid value "'+Z+'" for attribute Q supplied.');z=Z}}),Object.defineProperty(this,"textAlign",{get:function(){var Z;switch(z){case 0:default:Z="left";break;case 1:Z="center";break;case 2:Z="right"}return Z},configurable:!0,enumerable:!0,set:function(Z){switch(Z){case"right":case 2:z=2;break;case"center":case 1:z=1;break;default:z=0}}})};tA(Mu,th);var hp=function(){Mu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(i){e=i}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return xI(n,this.objId,this.scope)},set:function(i){var a,u;u=[],typeof(a=i)=="string"&&(u=(function(f,m,o){o||(o=1);for(var w,E=[];w=m.exec(f);)E.push(w[o]);return E})(a,/\((.*?)\)/g)),n=u}}),this.getOptions=function(){return n},this.setOptions=function(i){n=i,this.sort&&n.sort()},this.addOption=function(i){i=(i=i||"").toString(),n.push(i),this.sort&&n.sort()},this.removeOption=function(i,a){for(a=a||!1,i=(i=i||"").toString();n.indexOf(i)!==-1&&(n.splice(n.indexOf(i),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,18)},set:function(i){i?this.Ff=Uo(this.Ff,18):this.Ff=Do(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=Uo(this.Ff,19):this.Ff=Do(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,20)},set:function(i){i?(this.Ff=Uo(this.Ff,20),n.sort()):this.Ff=Do(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,22)},set:function(i){i?this.Ff=Uo(this.Ff,22):this.Ff=Do(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,23)},set:function(i){i?this.Ff=Uo(this.Ff,23):this.Ff=Do(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,27)},set:function(i){i?this.Ff=Uo(this.Ff,27):this.Ff=Do(this.Ff,27)}}),this.hasAppearanceStream=!1};tA(hp,Mu);var fp=function(){hp.call(this),this.fontName="helvetica",this.combo=!1};tA(fp,hp);var dp=function(){fp.call(this),this.combo=!0};tA(dp,fp);var z0=function(){dp.call(this),this.edit=!0};tA(z0,dp);var rl=function(){Mu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,15)},set:function(i){i?this.Ff=Uo(this.Ff,15):this.Ff=Do(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,16)},set:function(i){i?this.Ff=Uo(this.Ff,16):this.Ff=Do(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,17)},set:function(i){i?this.Ff=Uo(this.Ff,17):this.Ff=Do(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,26)},set:function(i){i?this.Ff=Uo(this.Ff,26):this.Ff=Do(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(f){return f};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var a,u=[];for(a in u.push("<<"),n)u.push("/"+a+" ("+Ad(i(n[a]))+")");return u.push(">>"),u.join(`
`)}},set:function(i){rs(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}})};tA(rl,Mu);var H0=function(){rl.call(this),this.pushButton=!0};tA(H0,rl);var pp=function(){rl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};tA(pp,rl);var uy=function(){var e,n;Mu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(u){e=u}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(u){n=u}});var i,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var u=function(o){return o};this.scope&&(u=this.scope.internal.getEncryptor(this.objId));var f,m=[];for(f in m.push("<<"),a)m.push("/"+f+" ("+Ad(u(a[f]))+")");return m.push(">>"),m.join(`
`)},set:function(u){rs(u)==="object"&&(a=u)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(u){typeof u=="string"&&(a.CA=u)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(u){i=u}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(u){i="/"+u}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=on.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};tA(uy,Mu),pp.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var i=this.Kids[n];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},pp.prototype.createOption=function(e){var n=new uy;return n.Parent=this,n.optionName=e,this.Kids.push(n),Ij.call(this.scope,n),n};var j0=function(){rl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=on.CheckBox.createAppearanceStream()};tA(j0,rl);var rd=function(){Mu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,13)},set:function(n){n?this.Ff=Uo(this.Ff,13):this.Ff=Do(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,21)},set:function(n){n?this.Ff=Uo(this.Ff,21):this.Ff=Do(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,23)},set:function(n){n?this.Ff=Uo(this.Ff,23):this.Ff=Do(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,24)},set:function(n){n?this.Ff=Uo(this.Ff,24):this.Ff=Do(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,25)},set:function(n){n?this.Ff=Uo(this.Ff,25):this.Ff=Do(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,26)},set:function(n){n?this.Ff=Uo(this.Ff,26):this.Ff=Do(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};tA(rd,Mu);var V0=function(){rd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,14)},set:function(e){e?this.Ff=Uo(this.Ff,14):this.Ff=Do(this.Ff,14)}}),this.password=!0};tA(V0,rd);var on={CheckBox:{createAppearanceStream:function(){return{N:{On:on.CheckBox.YesNormal},D:{On:on.CheckBox.YesPushDown,Off:on.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,u=e.scope.__private__.encodeColorString(e.color),f=fw(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+a+" "+Hn(f.fontSize)+" Tf "+u),i.push("BT"),i.push(f.text),i.push("ET"),i.push("Q"),i.push("EMC"),n.stream=i.join(`
`),n},YesNormal:function(e){var n=Yu(e);n.scope=e.scope;var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),u=[],f=on.internal.getHeight(e),m=on.internal.getWidth(e),o=fw(e,e.caption);return u.push("1 g"),u.push("0 0 "+Hn(m)+" "+Hn(f)+" re"),u.push("f"),u.push("q"),u.push("0 0 1 rg"),u.push("0 0 "+Hn(m-1)+" "+Hn(f-1)+" re"),u.push("W"),u.push("n"),u.push("0 g"),u.push("BT"),u.push("/"+i+" "+Hn(o.fontSize)+" Tf "+a),u.push(o.text),u.push("ET"),u.push("Q"),n.stream=u.join(`
`),n},OffPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),n.stream=i.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:on.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=on.RadioButton.Circle.YesNormal,n.D[e]=on.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=Yu(e);n.scope=e.scope;var i=[],a=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var u=on.internal.Bezier_C,f=Number((a*u).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+of(on.internal.getWidth(e)/2)+" "+of(on.internal.getHeight(e)/2)+" cm"),i.push(a+" 0 m"),i.push(a+" "+f+" "+f+" "+a+" 0 "+a+" c"),i.push("-"+f+" "+a+" -"+a+" "+f+" -"+a+" 0 c"),i.push("-"+a+" -"+f+" -"+f+" -"+a+" 0 -"+a+" c"),i.push(f+" -"+a+" "+a+" -"+f+" "+a+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n},YesPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[],a=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var u=Number((2*a).toFixed(5)),f=Number((u*on.internal.Bezier_C).toFixed(5)),m=Number((a*on.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+of(on.internal.getWidth(e)/2)+" "+of(on.internal.getHeight(e)/2)+" cm"),i.push(u+" 0 m"),i.push(u+" "+f+" "+f+" "+u+" 0 "+u+" c"),i.push("-"+f+" "+u+" -"+u+" "+f+" -"+u+" 0 c"),i.push("-"+u+" -"+f+" -"+f+" -"+u+" 0 -"+u+" c"),i.push(f+" -"+u+" "+u+" -"+f+" "+u+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+of(on.internal.getWidth(e)/2)+" "+of(on.internal.getHeight(e)/2)+" cm"),i.push(a+" 0 m"),i.push(a+" "+m+" "+m+" "+a+" 0 "+a+" c"),i.push("-"+m+" "+a+" -"+a+" "+m+" -"+a+" 0 c"),i.push("-"+a+" -"+m+" -"+m+" -"+a+" 0 -"+a+" c"),i.push(m+" -"+a+" "+a+" -"+m+" "+a+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[],a=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var u=Number((2*a).toFixed(5)),f=Number((u*on.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+of(on.internal.getWidth(e)/2)+" "+of(on.internal.getHeight(e)/2)+" cm"),i.push(u+" 0 m"),i.push(u+" "+f+" "+f+" "+u+" 0 "+u+" c"),i.push("-"+f+" "+u+" -"+u+" "+f+" -"+u+" 0 c"),i.push("-"+u+" -"+f+" -"+f+" -"+u+" 0 -"+u+" c"),i.push(f+" -"+u+" "+u+" -"+f+" "+u+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:on.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=on.RadioButton.Cross.YesNormal,n.D[e]=on.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=Yu(e);n.scope=e.scope;var i=[],a=on.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+Hn(on.internal.getWidth(e)-2)+" "+Hn(on.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(Hn(a.x1.x)+" "+Hn(a.x1.y)+" m"),i.push(Hn(a.x2.x)+" "+Hn(a.x2.y)+" l"),i.push(Hn(a.x4.x)+" "+Hn(a.x4.y)+" m"),i.push(Hn(a.x3.x)+" "+Hn(a.x3.y)+" l"),i.push("s"),i.push("Q"),n.stream=i.join(`
`),n},YesPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=on.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Hn(on.internal.getWidth(e)-2)+" "+Hn(on.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Hn(i.x1.x)+" "+Hn(i.x1.y)+" m"),a.push(Hn(i.x2.x)+" "+Hn(i.x2.y)+" l"),a.push(Hn(i.x4.x)+" "+Hn(i.x4.y)+" m"),a.push(Hn(i.x3.x)+" "+Hn(i.x3.y)+" l"),a.push("s"),a.push("Q"),n.stream=a.join(`
`),n},OffPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),n.stream=i.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+i}};on.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=on.internal.getWidth(e),i=on.internal.getHeight(e),a=Math.min(n,i);return{x1:{x:(n-a)/2,y:(i-a)/2+a},x2:{x:(n-a)/2+a,y:(i-a)/2},x3:{x:(n-a)/2,y:(i-a)/2},x4:{x:(n-a)/2+a,y:(i-a)/2+a}}}},on.internal.getWidth=function(e){var n=0;return rs(e)==="object"&&(n=NC(e.Rect[2])),n},on.internal.getHeight=function(e){var n=0;return rs(e)==="object"&&(n=NC(e.Rect[3])),n};var Ij=bo.addField=function(e){if(Fj(this,e),!(e instanceof Mu))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};bo.AcroFormChoiceField=hp,bo.AcroFormListBox=fp,bo.AcroFormComboBox=dp,bo.AcroFormEditBox=z0,bo.AcroFormButton=rl,bo.AcroFormPushButton=H0,bo.AcroFormRadioButton=pp,bo.AcroFormCheckBox=j0,bo.AcroFormTextField=rd,bo.AcroFormPasswordField=V0,bo.AcroFormAppearance=on,bo.AcroForm={ChoiceField:hp,ListBox:fp,ComboBox:dp,EditBox:z0,Button:rl,PushButton:H0,RadioButton:pp,CheckBox:j0,TextField:rd,PasswordField:V0,Appearance:on},dn.AcroForm={ChoiceField:hp,ListBox:fp,ComboBox:dp,EditBox:z0,Button:rl,PushButton:H0,RadioButton:pp,CheckBox:j0,TextField:rd,PasswordField:V0,Appearance:on};dn.AcroForm;function CI(e){return e.reduce(function(n,i,a){return n[i]=a,n},{})}(function(e){var n="addImage_";e.__addimage__={};var i="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},u=e.__addimage__.getImageFileTypeByImageData=function(ue,me){var Ue,Ie,pt,lt,ot,Ne=i;if((me=me||i)==="RGBA"||ue.data!==void 0&&ue.data instanceof Uint8ClampedArray&&"height"in ue&&"width"in ue)return"RGBA";if(He(ue))for(ot in a)for(pt=a[ot],Ue=0;Ue<pt.length;Ue+=1){for(lt=!0,Ie=0;Ie<pt[Ue].length;Ie+=1)if(pt[Ue][Ie]!==void 0&&pt[Ue][Ie]!==ue[Ie]){lt=!1;break}if(lt===!0){Ne=ot;break}}else for(ot in a)for(pt=a[ot],Ue=0;Ue<pt.length;Ue+=1){for(lt=!0,Ie=0;Ie<pt[Ue].length;Ie+=1)if(pt[Ue][Ie]!==void 0&&pt[Ue][Ie]!==ue.charCodeAt(Ie)){lt=!1;break}if(lt===!0){Ne=ot;break}}return Ne===i&&me!==i&&(Ne=me),Ne},f=function ue(me){for(var Ue=this.internal.write,Ie=this.internal.putStream,pt=(0,this.internal.getFilters)();pt.indexOf("FlateEncode")!==-1;)pt.splice(pt.indexOf("FlateEncode"),1);me.objectId=this.internal.newObject();var lt=[];if(lt.push({key:"Type",value:"/XObject"}),lt.push({key:"Subtype",value:"/Image"}),lt.push({key:"Width",value:me.width}),lt.push({key:"Height",value:me.height}),me.colorSpace===Z.INDEXED?lt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(me.palette.length/3-1)+" "+("sMask"in me&&me.sMask!==void 0?me.objectId+2:me.objectId+1)+" 0 R]"}):(lt.push({key:"ColorSpace",value:"/"+me.colorSpace}),me.colorSpace===Z.DEVICE_CMYK&&lt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),lt.push({key:"BitsPerComponent",value:me.bitsPerComponent}),"decodeParameters"in me&&me.decodeParameters!==void 0&&lt.push({key:"DecodeParms",value:"<<"+me.decodeParameters+">>"}),"transparency"in me&&Array.isArray(me.transparency)&&me.transparency.length>0){for(var ot="",Ne=0,Te=me.transparency.length;Ne<Te;Ne++)ot+=me.transparency[Ne]+" "+me.transparency[Ne]+" ";lt.push({key:"Mask",value:"["+ot+"]"})}me.sMask!==void 0&&lt.push({key:"SMask",value:me.objectId+1+" 0 R"});var yt=me.filter!==void 0?["/"+me.filter]:void 0;if(Ie({data:me.data,additionalKeyValues:lt,alreadyAppliedFilters:yt,objectId:me.objectId}),Ue("endobj"),"sMask"in me&&me.sMask!==void 0){var Le,ie=(Le=me.sMaskBitsPerComponent)!==null&&Le!==void 0?Le:me.bitsPerComponent,Ce={width:me.width,height:me.height,colorSpace:"DeviceGray",bitsPerComponent:ie,data:me.sMask};"filter"in me&&(Ce.decodeParameters="/Predictor ".concat(me.predictor," /Colors 1 /BitsPerComponent ").concat(ie," /Columns ").concat(me.width),Ce.filter=me.filter),ue.call(this,Ce)}if(me.colorSpace===Z.INDEXED){var Me=this.internal.newObject();Ie({data:Oe(new Uint8Array(me.palette)),objectId:Me}),Ue("endobj")}},m=function(){var ue=this.internal.collections[n+"images"];for(var me in ue)f.call(this,ue[me])},o=function(){var ue,me=this.internal.collections[n+"images"],Ue=this.internal.write;for(var Ie in me)Ue("/I"+(ue=me[Ie]).index,ue.objectId,"0","R")},w=function(){this.internal.collections[n+"images"]||(this.internal.collections[n+"images"]={},this.internal.events.subscribe("putResources",m),this.internal.events.subscribe("putXobjectDict",o))},E=function(){var ue=this.internal.collections[n+"images"];return w.call(this),ue},I=function(){return Object.keys(this.internal.collections[n+"images"]).length},D=function(ue){return typeof e["process"+ue.toUpperCase()]=="function"},O=function(ue){return rs(ue)==="object"&&ue.nodeType===1},P=function(ue,me){if(ue.nodeName==="IMG"&&ue.hasAttribute("src")){var Ue=""+ue.getAttribute("src");if(Ue.indexOf("data:image/")===0)return O0(unescape(Ue).split("base64,").pop());var Ie=e.loadFile(Ue,!0);if(Ie!==void 0)return Ie}if(ue.nodeName==="CANVAS"){if(ue.width===0||ue.height===0)throw new Error("Given canvas must have data. Canvas width: "+ue.width+", height: "+ue.height);var pt;switch(me){case"PNG":pt="image/png";break;case"WEBP":pt="image/webp";break;default:pt="image/jpeg"}return O0(ue.toDataURL(pt,1).split("base64,").pop())}},W=function(ue){var me=this.internal.collections[n+"images"];if(me){for(var Ue in me)if(ue===me[Ue].alias)return me[Ue]}},H=function(ue,me,Ue){return ue||me||(ue=-96,me=-96),ue<0&&(ue=-1*Ue.width*72/ue/this.internal.scaleFactor),me<0&&(me=-1*Ue.height*72/me/this.internal.scaleFactor),ue===0&&(ue=me*Ue.width/Ue.height),me===0&&(me=ue*Ue.height/Ue.width),[ue,me]},z=function(ue,me,Ue,Ie,pt,lt){var ot=H.call(this,Ue,Ie,pt),Ne=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,yt=E.call(this);if(Ue=ot[0],Ie=ot[1],yt[pt.index]=pt,lt){lt*=Math.PI/180;var Le=Math.cos(lt),ie=Math.sin(lt),Ce=function(qe){return qe.toFixed(4)},Me=[Ce(Le),Ce(ie),Ce(-1*ie),Ce(Le),0,0,"cm"]}this.internal.write("q"),lt?(this.internal.write([1,"0","0",1,Ne(ue),Te(me+Ie),"cm"].join(" ")),this.internal.write(Me.join(" ")),this.internal.write([Ne(Ue),"0","0",Ne(Ie),"0","0","cm"].join(" "))):this.internal.write([Ne(Ue),"0","0",Ne(Ie),Ne(ue),Te(me+Ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pt.index+" Do"),this.internal.write("Q")},Z=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var se=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ae=e.__addimage__.sHashCode=function(ue){var me,Ue,Ie=0;if(typeof ue=="string")for(Ue=ue.length,me=0;me<Ue;me++)Ie=(Ie<<5)-Ie+ue.charCodeAt(me),Ie|=0;else if(He(ue))for(Ue=ue.byteLength/2,me=0;me<Ue;me++)Ie=(Ie<<5)-Ie+ue[me],Ie|=0;return Ie},fe=e.__addimage__.validateStringAsBase64=function(ue){(ue=ue||"").toString().trim();var me=!0;return ue.length===0&&(me=!1),ue.length%4!=0&&(me=!1),/^[A-Za-z0-9+/]+$/.test(ue.substr(0,ue.length-2))===!1&&(me=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ue.substr(-2))===!1&&(me=!1),me},Fe=e.__addimage__.extractImageFromDataUrl=function(ue){if(ue==null||!(ue=ue.trim()).startsWith("data:"))return null;var me=ue.indexOf(",");return me<0?null:ue.substring(0,me).trim().endsWith("base64")?ue.substring(me+1):null};e.__addimage__.isArrayBuffer=function(ue){return ue instanceof ArrayBuffer};var He=e.__addimage__.isArrayBufferView=function(ue){return ue instanceof Int8Array||ue instanceof Uint8Array||ue instanceof Uint8ClampedArray||ue instanceof Int16Array||ue instanceof Uint16Array||ue instanceof Int32Array||ue instanceof Uint32Array||ue instanceof Float32Array||ue instanceof Float64Array},Ve=e.__addimage__.binaryStringToUint8Array=function(ue){for(var me=ue.length,Ue=new Uint8Array(me),Ie=0;Ie<me;Ie++)Ue[Ie]=ue.charCodeAt(Ie);return Ue},Oe=e.__addimage__.arrayBufferToBinaryString=function(ue){for(var me="",Ue=He(ue)?ue:new Uint8Array(ue),Ie=0;Ie<Ue.length;Ie+=8192)me+=String.fromCharCode.apply(null,Ue.subarray(Ie,Ie+8192));return me};e.addImage=function(){var ue,me,Ue,Ie,pt,lt,ot,Ne,Te;if(typeof arguments[1]=="number"?(me=i,Ue=arguments[1],Ie=arguments[2],pt=arguments[3],lt=arguments[4],ot=arguments[5],Ne=arguments[6],Te=arguments[7]):(me=arguments[1],Ue=arguments[2],Ie=arguments[3],pt=arguments[4],lt=arguments[5],ot=arguments[6],Ne=arguments[7],Te=arguments[8]),rs(ue=arguments[0])==="object"&&!O(ue)&&"imageData"in ue){var yt=ue;ue=yt.imageData,me=yt.format||me||i,Ue=yt.x||Ue||0,Ie=yt.y||Ie||0,pt=yt.w||yt.width||pt,lt=yt.h||yt.height||lt,ot=yt.alias||ot,Ne=yt.compression||Ne,Te=yt.rotation||yt.angle||Te}var Le=this.internal.getFilters();if(Ne===void 0&&Le.indexOf("FlateEncode")!==-1&&(Ne="SLOW"),isNaN(Ue)||isNaN(Ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");w.call(this);var ie=be.call(this,ue,me,ot,Ne);return z.call(this,Ue,Ie,pt,lt,ie,Te),this};var be=function(ue,me,Ue,Ie){var pt,lt,ot;if(typeof ue=="string"&&u(ue)===i){ue=unescape(ue);var Ne=rt(ue,!1);(Ne!==""||(Ne=e.loadFile(ue,!0))!==void 0)&&(ue=Ne)}if(O(ue)&&(ue=P(ue,me)),me=u(ue,me),!D(me))throw new Error("addImage does not support files of type '"+me+"', please ensure that a plugin for '"+me+"' support is added.");if(((ot=Ue)==null||ot.length===0)&&(Ue=(function(Te){return typeof Te=="string"||He(Te)?ae(Te):He(Te.data)?ae(Te.data):null})(ue)),(pt=W.call(this,Ue))||(ue instanceof Uint8Array||me==="RGBA"||(lt=ue,ue=Ve(ue)),pt=this["process"+me.toUpperCase()](ue,I.call(this),Ue,(function(Te){return Te&&typeof Te=="string"&&(Te=Te.toUpperCase()),Te in e.image_compression?Te:se.NONE})(Ie),lt)),!pt)throw new Error("An unknown error occurred whilst processing the image.");return pt},rt=e.__addimage__.convertBase64ToBinaryString=function(ue,me){me=typeof me!="boolean"||me;var Ue,Ie="";if(typeof ue=="string"){var pt;Ue=(pt=Fe(ue))!==null&&pt!==void 0?pt:ue;try{Ie=O0(Ue)}catch(lt){if(me)throw fe(Ue)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+lt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ie};e.getImageProperties=function(ue){var me,Ue,Ie="";if(O(ue)&&(ue=P(ue)),typeof ue=="string"&&u(ue)===i&&((Ie=rt(ue,!1))===""&&(Ie=e.loadFile(ue)||""),ue=Ie),Ue=u(ue),!D(Ue))throw new Error("addImage does not support files of type '"+Ue+"', please ensure that a plugin for '"+Ue+"' support is added.");if(ue instanceof Uint8Array||(ue=Ve(ue)),!(me=this["process"+Ue.toUpperCase()](ue)))throw new Error("An unknown error occurred whilst processing the image");return me.fileType=Ue,me}})(dn.API),(function(e){var n=function(i){if(i!==void 0&&i!="")return!0};dn.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(i){for(var a,u,f,m=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,w=this.internal.getPageInfoByObjId(i.objId),E=i.pageContext.annotations,I=!1,D=0;D<E.length&&!I;D++)switch((a=E[D]).type){case"link":(n(a.options.url)||n(a.options.pageNumber))&&(I=!0);break;case"reference":case"text":case"freetext":I=!0}if(I!=0){this.internal.write("/Annots [");for(var O=0;O<E.length;O++){a=E[O];var P=this.internal.pdfEscape,W=this.internal.getEncryptor(i.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var H=this.internal.newAdditionalObject(),z=this.internal.newAdditionalObject(),Z=this.internal.getEncryptor(H.objId),se=a.title||"Note";f="<</Type /Annot /Subtype /Text "+(u="/Rect ["+m(a.bounds.x)+" "+o(a.bounds.y+a.bounds.h)+" "+m(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y)+"] ")+"/Contents ("+P(Z(a.contents))+")",f+=" /Popup "+z.objId+" 0 R",f+=" /P "+w.objId+" 0 R",f+=" /T ("+P(Z(se))+") >>",H.content=f;var ae=H.objId+" 0 R";f="<</Type /Annot /Subtype /Popup "+(u="/Rect ["+m(a.bounds.x+30)+" "+o(a.bounds.y+a.bounds.h)+" "+m(a.bounds.x+a.bounds.w+30)+" "+o(a.bounds.y)+"] ")+" /Parent "+ae,a.open&&(f+=" /Open true"),f+=" >>",z.content=f,this.internal.write(H.objId,"0 R",z.objId,"0 R");break;case"freetext":u="/Rect ["+m(a.bounds.x)+" "+o(a.bounds.y)+" "+m(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y+a.bounds.h)+"] ";var fe=a.color||"#000000";f="<</Type /Annot /Subtype /FreeText "+u+"/Contents ("+P(W(a.contents))+")",f+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+fe+")",f+=" /Border [0 0 0]",f+=" >>",this.internal.write(f);break;case"link":if(a.options.name){var Fe=this.annotations._nameMap[a.options.name];a.options.pageNumber=Fe.page,a.options.top=Fe.y}else a.options.top||(a.options.top=0);if(u="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",f="",a.options.url)f="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /A <</S /URI /URI ("+P(W(a.options.url))+") >>";else if(a.options.pageNumber)switch(f="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":f+=" /Fit]";break;case"FitH":f+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,f+=" /FitV "+a.options.left+"]";break;default:var He=o(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),f+=" /XYZ "+a.options.left+" "+He+" "+a.options.zoom+"]"}f!=""&&(f+=" >>",this.internal.write(f))}}this.internal.write("]")}}]),e.createAnnotation=function(i){var a=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":a.pageContext.annotations.push(i)}},e.link=function(i,a,u,f,m){var o=this.internal.getCurrentPageInfo(),w=this.internal.getCoordinateString,E=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:w(i),y:E(a),w:w(i+u),h:E(a+f)},options:m,type:"link"})},e.textWithLink=function(i,a,u,f){var m,o,w=this.getTextWidth(i),E=this.internal.getLineHeight()/this.internal.scaleFactor;if(f.maxWidth!==void 0){o=f.maxWidth;var I=this.splitTextToSize(i,o).length;m=Math.ceil(E*I)}else o=w,m=E;return this.text(i,a,u,f),u+=.2*E,f.align==="center"&&(a-=w/2),f.align==="right"&&(a-=w),this.link(a,u-E,o,m,f),w},e.getTextWidth=function(i){var a=this.internal.getFontSize();return this.getStringUnitWidth(i)*a/this.internal.scaleFactor}})(dn.API),(function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},u=[1570,1571,1573,1575];e.__arabicParser__={};var f=e.__arabicParser__.isInArabicSubstitutionA=function(H){return n[H.charCodeAt(0)]!==void 0},m=e.__arabicParser__.isArabicLetter=function(H){return typeof H=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(H)},o=e.__arabicParser__.isArabicEndLetter=function(H){return m(H)&&f(H)&&n[H.charCodeAt(0)].length<=2},w=e.__arabicParser__.isArabicAlfLetter=function(H){return m(H)&&u.indexOf(H.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(H){return m(H)&&f(H)&&n[H.charCodeAt(0)].length>=1};var E=e.__arabicParser__.arabicLetterHasFinalForm=function(H){return m(H)&&f(H)&&n[H.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(H){return m(H)&&f(H)&&n[H.charCodeAt(0)].length>=3};var I=e.__arabicParser__.arabicLetterHasMedialForm=function(H){return m(H)&&f(H)&&n[H.charCodeAt(0)].length==4},D=e.__arabicParser__.resolveLigatures=function(H){var z=0,Z=i,se="",ae=0;for(z=0;z<H.length;z+=1)Z[H.charCodeAt(z)]!==void 0?(ae++,typeof(Z=Z[H.charCodeAt(z)])=="number"&&(se+=String.fromCharCode(Z),Z=i,ae=0),z===H.length-1&&(Z=i,se+=H.charAt(z-(ae-1)),z-=ae-1,ae=0)):(Z=i,se+=H.charAt(z-ae),z-=ae,ae=0);return se};e.__arabicParser__.isArabicDiacritic=function(H){return H!==void 0&&a[H.charCodeAt(0)]!==void 0};var O=e.__arabicParser__.getCorrectForm=function(H,z,Z){return m(H)?f(H)===!1?-1:!E(H)||!m(z)&&!m(Z)||!m(Z)&&o(z)||o(H)&&!m(z)||o(H)&&w(z)||o(H)&&o(z)?0:I(H)&&m(z)&&!o(z)&&m(Z)&&E(Z)?3:o(H)||!m(Z)?1:2:-1},P=function(H){var z=0,Z=0,se=0,ae="",fe="",Fe="",He=(H=H||"").split("\\s+"),Ve=[];for(z=0;z<He.length;z+=1){for(Ve.push(""),Z=0;Z<He[z].length;Z+=1)ae=He[z][Z],fe=He[z][Z-1],Fe=He[z][Z+1],m(ae)?(se=O(ae,fe,Fe),Ve[z]+=se!==-1?String.fromCharCode(n[ae.charCodeAt(0)][se]):ae):Ve[z]+=ae;Ve[z]=D(Ve[z])}return Ve.join(" ")},W=e.__arabicParser__.processArabic=e.processArabic=function(){var H,z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Z=[];if(Array.isArray(z)){var se=0;for(Z=[],se=0;se<z.length;se+=1)Array.isArray(z[se])?Z.push([P(z[se][0]),z[se][1],z[se][2]]):Z.push([P(z[se])]);H=Z}else H=P(z);return typeof arguments[0]=="string"?H:(arguments[0].text=H,arguments[0])};e.events.push(["preProcessText",W])})(dn.API),dn.API.autoPrint=function(e){var n;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})),this},(function(e){var n=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(o){i=o}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var u=300;Object.defineProperty(this,"height",{get:function(){return u},set:function(o){u=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=u+1)}});var f=[];Object.defineProperty(this,"childNodes",{get:function(){return f},set:function(o){f=o}});var m={};Object.defineProperty(this,"style",{get:function(){return m},set:function(o){m=o}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(i,a){var u;if((i=i||"2d")!=="2d")return null;for(u in a)this.pdf.context2d.hasOwnProperty(u)&&(this.pdf.context2d[u]=a[u]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])})(dn.API),(function(e){var n={left:0,top:0,bottom:0,right:0},i=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),u.call(this))},u=function(){this.internal.__cell__.lastCell=new f,this.internal.__cell__.pages=1},f=function(){var w=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return w},set:function(H){w=H}});var E=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return E},set:function(H){E=H}});var I=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return I},set:function(H){I=H}});var D=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return D},set:function(H){D=H}});var O=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return O},set:function(H){O=H}});var P=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return P},set:function(H){P=H}});var W=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return W},set:function(H){W=H}}),this};f.prototype.clone=function(){return new f(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},f.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(w){return a.call(this),this.internal.__cell__.headerFunction=typeof w=="function"?w:void 0,this},e.getTextDimensions=function(w,E){a.call(this);var I=(E=E||{}).fontSize||this.getFontSize(),D=E.font||this.getFont(),O=E.scaleFactor||this.internal.scaleFactor,P=0,W=0,H=0,z=this;if(!Array.isArray(w)&&typeof w!="string"){if(typeof w!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");w=String(w)}var Z=E.maxWidth;Z>0?typeof w=="string"?w=this.splitTextToSize(w,Z):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(ae,fe){return ae.concat(z.splitTextToSize(fe,Z))},[])):w=Array.isArray(w)?w:[w];for(var se=0;se<w.length;se++)P<(H=this.getStringUnitWidth(w[se],{font:D})*I)&&(P=H);return P!==0&&(W=w.length),{w:P/=O,h:Math.max((W*I*this.getLineHeightFactor()-I*(this.getLineHeightFactor()-1))/O,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var w=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new f(w.left,w.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var m=e.cell=function(){var w;w=arguments[0]instanceof f?arguments[0]:new f(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),a.call(this);var E=this.internal.__cell__.lastCell,I=this.internal.__cell__.padding,D=this.internal.__cell__.margins||n,O=this.internal.__cell__.tableHeaderRow,P=this.internal.__cell__.printHeaders;return E.lineNumber!==void 0&&(E.lineNumber===w.lineNumber?(w.x=(E.x||0)+(E.width||0),w.y=E.y||0):E.y+E.height+w.height+D.bottom>this.getPageHeight()?(this.cellAddPage(),w.y=D.top,P&&O&&(this.printHeaderRow(w.lineNumber,!0),w.y+=O[0].height)):w.y=E.y+E.height||w.y),w.text[0]!==void 0&&(this.rect(w.x,w.y,w.width,w.height,i===!0?"FD":void 0),w.align==="right"?this.text(w.text,w.x+w.width-I,w.y+I,{align:"right",baseline:"top"}):w.align==="center"?this.text(w.text,w.x+w.width/2,w.y+I,{align:"center",baseline:"top",maxWidth:w.width-I-I}):this.text(w.text,w.x+I,w.y+I,{align:"left",baseline:"top",maxWidth:w.width-I-I})),this.internal.__cell__.lastCell=w,this};e.table=function(w,E,I,D,O){if(a.call(this),!I)throw new Error("No data for PDF table.");var P,W,H,z,Z=[],se=[],ae=[],fe={},Fe={},He=[],Ve=[],Oe=(O=O||{}).autoSize||!1,be=O.printHeaders!==!1,rt=O.css&&O.css["font-size"]!==void 0?16*O.css["font-size"]:O.fontSize||12,ue=O.margins||Object.assign({width:this.getPageWidth()},n),me=typeof O.padding=="number"?O.padding:3,Ue=O.headerBackgroundColor||"#c8c8c8",Ie=O.headerTextColor||"#000";if(u.call(this),this.internal.__cell__.printHeaders=be,this.internal.__cell__.margins=ue,this.internal.__cell__.table_font_size=rt,this.internal.__cell__.padding=me,this.internal.__cell__.headerBackgroundColor=Ue,this.internal.__cell__.headerTextColor=Ie,this.setFontSize(rt),D==null)se=Z=Object.keys(I[0]),ae=Z.map(function(){return"left"});else if(Array.isArray(D)&&rs(D[0])==="object")for(Z=D.map(function(yt){return yt.name}),se=D.map(function(yt){return yt.prompt||yt.name||""}),ae=D.map(function(yt){return yt.align||"left"}),P=0;P<D.length;P+=1)Fe[D[P].name]=.7499990551181103*D[P].width;else Array.isArray(D)&&typeof D[0]=="string"&&(se=Z=D,ae=Z.map(function(){return"left"}));if(Oe||Array.isArray(D)&&typeof D[0]=="string")for(P=0;P<Z.length;P+=1){for(fe[z=Z[P]]=I.map(function(yt){return yt[z]}),this.setFont(void 0,"bold"),He.push(this.getTextDimensions(se[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),W=fe[z],this.setFont(void 0,"normal"),H=0;H<W.length;H+=1)He.push(this.getTextDimensions(W[H],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Fe[z]=Math.max.apply(null,He)+me+me,He=[]}if(be){var pt={};for(P=0;P<Z.length;P+=1)pt[Z[P]]={},pt[Z[P]].text=se[P],pt[Z[P]].align=ae[P];var lt=o.call(this,pt,Fe);Ve=Z.map(function(yt){return new f(w,E,Fe[yt],lt,pt[yt].text,void 0,pt[yt].align)}),this.setTableHeaderRow(Ve),this.printHeaderRow(1,!1)}var ot=D.reduce(function(yt,Le){return yt[Le.name]=Le.align,yt},{});for(P=0;P<I.length;P+=1){"rowStart"in O&&O.rowStart instanceof Function&&O.rowStart({row:P,data:I[P]},this);var Ne=o.call(this,I[P],Fe);for(H=0;H<Z.length;H+=1){var Te=I[P][Z[H]];"cellStart"in O&&O.cellStart instanceof Function&&O.cellStart({row:P,col:H,data:Te},this),m.call(this,new f(w,E,Fe[Z[H]],Ne,Te,P+2,ot[Z[H]]))}}return this.internal.__cell__.table_x=w,this.internal.__cell__.table_y=E,this};var o=function(w,E){var I=this.internal.__cell__.padding,D=this.internal.__cell__.table_font_size,O=this.internal.scaleFactor;return Object.keys(w).map(function(P){var W=w[P];return this.splitTextToSize(W.hasOwnProperty("text")?W.text:W,E[P]-I-I)},this).map(function(P){return this.getLineHeightFactor()*P.length*D/O+I+I},this).reduce(function(P,W){return Math.max(P,W)},0)};e.setTableHeaderRow=function(w){a.call(this),this.internal.__cell__.tableHeaderRow=w},e.printHeaderRow=function(w,E){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var I;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var D=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new f(D[0],D[1],D[2],D[3],void 0,-1)}this.setFont(void 0,"bold");for(var O=[],P=0;P<this.internal.__cell__.tableHeaderRow.length;P+=1){I=this.internal.__cell__.tableHeaderRow[P].clone(),E&&(I.y=this.internal.__cell__.margins.top||0,O.push(I)),I.lineNumber=w;var W=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),m.call(this,I),this.setTextColor(W)}O.length>0&&this.setTableHeaderRow(O),this.setFont(void 0,"normal"),i=!1}})(dn.API);var EI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},SI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dw=CI(SI),FI=[100,200,300,400,500,600,700,800,900],Tj=CI(FI);function Z1(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),i=(function(f){return EI[f=f||"normal"]?f:"normal"})(e.style),a=(function(f){return f?typeof f=="number"?f>=100&&f<=900&&f%100==0?f:400:/^\d00$/.test(f)?parseInt(f):f==="bold"?700:400:400})(e.weight),u=(function(f){return typeof dw[f=f||"normal"]=="number"?f:"normal"})(e.stretch);return{family:n,style:i,weight:a,stretch:u,src:e.src||[],ref:e.ref||{name:n,style:[u,i,a].join(" ")}}}function QC(e,n,i,a){var u;for(u=i;u>=0&&u<n.length;u+=a)if(e[n[u]])return e[n[u]];for(u=i;u>=0&&u<n.length;u-=a)if(e[n[u]])return e[n[u]]}var Pj={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},OC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function zC(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function HC(e){return e.trimLeft()}function Lj(e,n){for(var i=0;i<e.length;){if(e.charAt(i)===n)return[e.substring(0,i),e.substring(i+1)];i+=1}return null}function Mj(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var C0,jC,VC,Zd,E0,GC,KC,qC,X1=["times"];function $C(e,n,i,a,u){var f=4,m=ZC;switch(u){case dn.API.image_compression.FAST:f=1,m=WC;break;case dn.API.image_compression.MEDIUM:f=6,m=XC;break;case dn.API.image_compression.SLOW:f=9,m=YC}e=(function(w,E,I,D){for(var O,P=w.length/E,W=new Uint8Array(w.length+P),H=[kj,WC,ZC,XC,YC],z=0;z<P;z+=1){var Z=z*E,se=w.subarray(Z,Z+E);if(D)W.set(D(se,I,O),Z+z);else{for(var ae=H.length,fe=[],Fe=0;Fe<ae;Fe+=1)fe[Fe]=H[Fe](se,I,O);var He=Dj(fe.concat());W.set(fe[He],Z+z)}O=se}return W})(e,n,Math.ceil(i*a/8),m);var o=R_(e,{level:f});return dn.API.__addimage__.arrayBufferToBinaryString(o)}function kj(e){var n=Array.apply([],e);return n.unshift(0),n}function WC(e,n){var i=e.length,a=[];a[0]=1;for(var u=0;u<i;u+=1){var f=e[u-n]||0;a[u+1]=e[u]-f+256&255}return a}function ZC(e,n,i){var a=e.length,u=[];u[0]=2;for(var f=0;f<a;f+=1){var m=i&&i[f]||0;u[f+1]=e[f]-m+256&255}return u}function XC(e,n,i){var a=e.length,u=[];u[0]=3;for(var f=0;f<a;f+=1){var m=e[f-n]||0,o=i&&i[f]||0;u[f+1]=e[f]+256-(m+o>>>1)&255}return u}function YC(e,n,i){var a=e.length,u=[];u[0]=4;for(var f=0;f<a;f+=1){var m=Uj(e[f-n]||0,i&&i[f]||0,i&&i[f-n]||0);u[f+1]=e[f]-m+256&255}return u}function Uj(e,n,i){if(e===n&&n===i)return e;var a=Math.abs(n-i),u=Math.abs(e-i),f=Math.abs(e+n-i-i);return a<=u&&a<=f?e:u<=f?n:i}function Dj(e){var n=e.map(function(i){return i.reduce(function(a,u){return a+Math.abs(u)},0)});return n.indexOf(Math.min.apply(null,n))}function Y1(e,n,i){var a=n*i,u=Math.floor(a/8),f=16-(a-8*u+i),m=(1<<i)-1;return II(e,u)>>f&m}function JC(e,n,i,a){var u=i*a,f=Math.floor(u/8),m=16-(u-8*f+a),o=(1<<a)-1,w=(n&o)<<m;(function(E,I,D){if(I+1<E.byteLength)E.setUint16(I,D,!1);else{var O=D>>8&255;E.setUint8(I,O)}})(e,f,II(e,f)&~(o<<m)&65535|w)}function II(e,n){return n+1<e.byteLength?e.getUint16(n,!1):e.getUint8(n)<<8}function Rj(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=e[n++]|e[n++]<<8,a=e[n++]|e[n++]<<8,u=e[n++],f=u>>7,m=1<<1+(7&u);e[n++],e[n++];var o=null,w=null;f&&(o=n,w=m,n+=3*m);var E=!0,I=[],D=0,O=null,P=0,W=null;for(this.width=i,this.height=a;E&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,W=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((ue=e[n++])>=0))throw Error("Invalid block size");if(ue===0)break;n+=ue}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var H=e[n++];D=e[n++]|e[n++]<<8,O=e[n++],1&H||(O=null),P=H>>2&7,n++;break;case 254:for(;;){if(!((ue=e[n++])>=0))throw Error("Invalid block size");if(ue===0)break;n+=ue}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var z=e[n++]|e[n++]<<8,Z=e[n++]|e[n++]<<8,se=e[n++]|e[n++]<<8,ae=e[n++]|e[n++]<<8,fe=e[n++],Fe=fe>>6&1,He=1<<1+(7&fe),Ve=o,Oe=w,be=!1;fe>>7&&(be=!0,Ve=n,Oe=He,n+=3*He);var rt=n;for(n++;;){var ue;if(!((ue=e[n++])>=0))throw Error("Invalid block size");if(ue===0)break;n+=ue}I.push({x:z,y:Z,width:se,height:ae,has_local_palette:be,palette_offset:Ve,palette_size:Oe,data_offset:rt,data_length:n-rt,transparent_index:O,interlaced:!!Fe,delay:D,disposal:P});break;case 59:E=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return I.length},this.loopCount=function(){return W},this.frameInfo=function(me){if(me<0||me>=I.length)throw new Error("Frame index out of range.");return I[me]},this.decodeAndBlitFrameBGRA=function(me,Ue){var Ie=this.frameInfo(me),pt=Ie.width*Ie.height,lt=new Uint8Array(pt);e5(e,Ie.data_offset,lt,pt);var ot=Ie.palette_offset,Ne=Ie.transparent_index;Ne===null&&(Ne=256);var Te=Ie.width,yt=i-Te,Le=Te,ie=4*(Ie.y*i+Ie.x),Ce=4*((Ie.y+Ie.height)*i+Ie.x),Me=ie,qe=4*yt;Ie.interlaced===!0&&(qe+=4*i*7);for(var at=8,et=0,_t=lt.length;et<_t;++et){var Et=lt[et];if(Le===0&&(Le=Te,(Me+=qe)>=Ce&&(qe=4*yt+4*i*(at-1),Me=ie+(Te+yt)*(at<<1),at>>=1)),Et===Ne)Me+=4;else{var Pt=e[ot+3*Et],Kt=e[ot+3*Et+1],ar=e[ot+3*Et+2];Ue[Me++]=ar,Ue[Me++]=Kt,Ue[Me++]=Pt,Ue[Me++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(me,Ue){var Ie=this.frameInfo(me),pt=Ie.width*Ie.height,lt=new Uint8Array(pt);e5(e,Ie.data_offset,lt,pt);var ot=Ie.palette_offset,Ne=Ie.transparent_index;Ne===null&&(Ne=256);var Te=Ie.width,yt=i-Te,Le=Te,ie=4*(Ie.y*i+Ie.x),Ce=4*((Ie.y+Ie.height)*i+Ie.x),Me=ie,qe=4*yt;Ie.interlaced===!0&&(qe+=4*i*7);for(var at=8,et=0,_t=lt.length;et<_t;++et){var Et=lt[et];if(Le===0&&(Le=Te,(Me+=qe)>=Ce&&(qe=4*yt+4*i*(at-1),Me=ie+(Te+yt)*(at<<1),at>>=1)),Et===Ne)Me+=4;else{var Pt=e[ot+3*Et],Kt=e[ot+3*Et+1],ar=e[ot+3*Et+2];Ue[Me++]=Pt,Ue[Me++]=Kt,Ue[Me++]=ar,Ue[Me++]=255}--Le}}}function e5(e,n,i,a){for(var u=e[n++],f=1<<u,m=f+1,o=m+1,w=u+1,E=(1<<w)-1,I=0,D=0,O=0,P=e[n++],W=new Int32Array(4096),H=null;;){for(;I<16&&P!==0;)D|=e[n++]<<I,I+=8,P===1?P=e[n++]:--P;if(I<w)break;var z=D&E;if(D>>=w,I-=w,z!==f){if(z===m)break;for(var Z=z<o?z:H,se=0,ae=Z;ae>f;)ae=W[ae]>>8,++se;var fe=ae;if(O+se+(Z!==z?1:0)>a)return void gs.log("Warning, gif stream longer than expected.");i[O++]=fe;var Fe=O+=se;for(Z!==z&&(i[O++]=fe),ae=Z;se--;)ae=W[ae],i[--Fe]=255&ae,ae>>=8;H!==null&&o<4096&&(W[o++]=H<<8|fe,o>=E+1&&w<12&&(++w,E=E<<1|1)),H=z}else o=m+1,E=(1<<(w=u+1))-1,H=null}return O!==a&&gs.log("Warning, gif stream shorter than expected."),i}function J1(e){var n,i,a,u,f,m=Math.floor,o=new Array(64),w=new Array(64),E=new Array(64),I=new Array(64),D=new Array(65535),O=new Array(65535),P=new Array(64),W=new Array(64),H=[],z=0,Z=7,se=new Array(64),ae=new Array(64),fe=new Array(64),Fe=new Array(256),He=new Array(2048),Ve=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Oe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],be=[0,1,2,3,4,5,6,7,8,9,10,11],rt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ue=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],me=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ue=[0,1,2,3,4,5,6,7,8,9,10,11],Ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function lt(ie,Ce){for(var Me=0,qe=0,at=new Array,et=1;et<=16;et++){for(var _t=1;_t<=ie[et];_t++)at[Ce[qe]]=[],at[Ce[qe]][0]=Me,at[Ce[qe]][1]=et,qe++,Me++;Me*=2}return at}function ot(ie){for(var Ce=ie[0],Me=ie[1]-1;Me>=0;)Ce&1<<Me&&(z|=1<<Z),Me--,--Z<0&&(z==255?(Ne(255),Ne(0)):Ne(z),Z=7,z=0)}function Ne(ie){H.push(ie)}function Te(ie){Ne(ie>>8&255),Ne(255&ie)}function yt(ie,Ce,Me,qe,at){for(var et,_t=at[0],Et=at[240],Pt=(function(lr,Wr){var Sr,Or,Rr,On,hn,dt,de,pe,ve,$e,Ze=0;for(ve=0;ve<8;++ve){Sr=lr[Ze],Or=lr[Ze+1],Rr=lr[Ze+2],On=lr[Ze+3],hn=lr[Ze+4],dt=lr[Ze+5],de=lr[Ze+6];var Ct=Sr+(pe=lr[Ze+7]),vt=Sr-pe,ct=Or+de,bt=Or-de,Ht=Rr+dt,Ft=Rr-dt,cr=On+hn,Jt=On-hn,dr=Ct+cr,rn=Ct-cr,Tr=ct+Ht,mt=ct-Ht;lr[Ze]=dr+Tr,lr[Ze+4]=dr-Tr;var tn=.707106781*(mt+rn);lr[Ze+2]=rn+tn,lr[Ze+6]=rn-tn;var Nr=.382683433*((dr=Jt+Ft)-(mt=bt+vt)),mr=.5411961*dr+Nr,Kr=1.306562965*mt+Nr,Dn=.707106781*(Tr=Ft+bt),wr=vt+Dn,Tn=vt-Dn;lr[Ze+5]=Tn+mr,lr[Ze+3]=Tn-mr,lr[Ze+1]=wr+Kr,lr[Ze+7]=wr-Kr,Ze+=8}for(Ze=0,ve=0;ve<8;++ve){Sr=lr[Ze],Or=lr[Ze+8],Rr=lr[Ze+16],On=lr[Ze+24],hn=lr[Ze+32],dt=lr[Ze+40],de=lr[Ze+48];var Bn=Sr+(pe=lr[Ze+56]),xn=Sr-pe,Di=Or+de,ai=Or-de,Yt=Rr+dt,Zn=Rr-dt,$i=On+hn,sl=On-hn,ns=Bn+$i,pr=Bn-$i,nn=Di+Yt,un=Di-Yt;lr[Ze]=ns+nn,lr[Ze+32]=ns-nn;var Ri=.707106781*(un+pr);lr[Ze+16]=pr+Ri,lr[Ze+48]=pr-Ri;var El=.382683433*((ns=sl+Zn)-(un=ai+xn)),ks=.5411961*ns+El,fn=1.306562965*un+El,ol=.707106781*(nn=Zn+ai),al=xn+ol,ec=xn-ol;lr[Ze+40]=ec+ks,lr[Ze+24]=ec-ks,lr[Ze+8]=al+fn,lr[Ze+56]=al-fn,Ze++}for(ve=0;ve<64;++ve)$e=lr[ve]*Wr[ve],P[ve]=$e>0?$e+.5|0:$e-.5|0;return P})(ie,Ce),Kt=0;Kt<64;++Kt)W[Ve[Kt]]=Pt[Kt];var ar=W[0]-Me;Me=W[0],ar==0?ot(qe[0]):(ot(qe[O[et=32767+ar]]),ot(D[et]));for(var hr=63;hr>0&&W[hr]==0;)hr--;if(hr==0)return ot(_t),Me;for(var Cr,je=1;je<=hr;){for(var vr=je;W[je]==0&&je<=hr;)++je;var Ur=je-vr;if(Ur>=16){Cr=Ur>>4;for(var $r=1;$r<=Cr;++$r)ot(Et);Ur&=15}et=32767+W[je],ot(at[(Ur<<4)+O[et]]),ot(D[et]),je++}return hr!=63&&ot(_t),Me}function Le(ie){ie=Math.min(Math.max(ie,1),100),f!=ie&&((function(Ce){for(var Me=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],qe=0;qe<64;qe++){var at=m((Me[qe]*Ce+50)/100);at=Math.min(Math.max(at,1),255),o[Ve[qe]]=at}for(var et=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_t=0;_t<64;_t++){var Et=m((et[_t]*Ce+50)/100);Et=Math.min(Math.max(Et,1),255),w[Ve[_t]]=Et}for(var Pt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Kt=0,ar=0;ar<8;ar++)for(var hr=0;hr<8;hr++)E[Kt]=1/(o[Ve[Kt]]*Pt[ar]*Pt[hr]*8),I[Kt]=1/(w[Ve[Kt]]*Pt[ar]*Pt[hr]*8),Kt++})(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),f=ie)}this.encode=function(ie,Ce){Ce&&Le(Ce),H=new Array,z=0,Z=7,Te(65496),Te(65504),Te(16),Ne(74),Ne(70),Ne(73),Ne(70),Ne(0),Ne(1),Ne(1),Ne(0),Te(1),Te(1),Ne(0),Ne(0),(function(){Te(65499),Te(132),Ne(0);for(var Or=0;Or<64;Or++)Ne(o[Or]);Ne(1);for(var Rr=0;Rr<64;Rr++)Ne(w[Rr])})(),(function(Or,Rr){Te(65472),Te(17),Ne(8),Te(Rr),Te(Or),Ne(3),Ne(1),Ne(17),Ne(0),Ne(2),Ne(17),Ne(1),Ne(3),Ne(17),Ne(1)})(ie.width,ie.height),(function(){Te(65476),Te(418),Ne(0);for(var Or=0;Or<16;Or++)Ne(Oe[Or+1]);for(var Rr=0;Rr<=11;Rr++)Ne(be[Rr]);Ne(16);for(var On=0;On<16;On++)Ne(rt[On+1]);for(var hn=0;hn<=161;hn++)Ne(ue[hn]);Ne(1);for(var dt=0;dt<16;dt++)Ne(me[dt+1]);for(var de=0;de<=11;de++)Ne(Ue[de]);Ne(17);for(var pe=0;pe<16;pe++)Ne(Ie[pe+1]);for(var ve=0;ve<=161;ve++)Ne(pt[ve])})(),Te(65498),Te(12),Ne(3),Ne(1),Ne(0),Ne(2),Ne(17),Ne(3),Ne(17),Ne(0),Ne(63),Ne(0);var Me=0,qe=0,at=0;z=0,Z=7,this.encode.displayName="_encode_";for(var et,_t,Et,Pt,Kt,ar,hr,Cr,je,vr=ie.data,Ur=ie.width,$r=ie.height,lr=4*Ur,Wr=0;Wr<$r;){for(et=0;et<lr;){for(Kt=lr*Wr+et,hr=-1,Cr=0,je=0;je<64;je++)ar=Kt+(Cr=je>>3)*lr+(hr=4*(7&je)),Wr+Cr>=$r&&(ar-=lr*(Wr+1+Cr-$r)),et+hr>=lr&&(ar-=et+hr-lr+4),_t=vr[ar++],Et=vr[ar++],Pt=vr[ar++],se[je]=(He[_t]+He[Et+256|0]+He[Pt+512|0]>>16)-128,ae[je]=(He[_t+768|0]+He[Et+1024|0]+He[Pt+1280|0]>>16)-128,fe[je]=(He[_t+1280|0]+He[Et+1536|0]+He[Pt+1792|0]>>16)-128;Me=yt(se,E,Me,n,a),qe=yt(ae,I,qe,i,u),at=yt(fe,I,at,i,u),et+=32}Wr+=8}if(Z>=0){var Sr=[];Sr[1]=Z+1,Sr[0]=(1<<Z+1)-1,ot(Sr)}return Te(65497),new Uint8Array(H)},e=e||50,(function(){for(var ie=String.fromCharCode,Ce=0;Ce<256;Ce++)Fe[Ce]=ie(Ce)})(),n=lt(Oe,be),i=lt(me,Ue),a=lt(rt,ue),u=lt(Ie,pt),(function(){for(var ie=1,Ce=2,Me=1;Me<=15;Me++){for(var qe=ie;qe<Ce;qe++)O[32767+qe]=Me,D[32767+qe]=[],D[32767+qe][1]=Me,D[32767+qe][0]=qe;for(var at=-(Ce-1);at<=-ie;at++)O[32767+at]=Me,D[32767+at]=[],D[32767+at][1]=Me,D[32767+at][0]=Ce-1+at;ie<<=1,Ce<<=1}})(),(function(){for(var ie=0;ie<256;ie++)He[ie]=19595*ie,He[ie+256|0]=38470*ie,He[ie+512|0]=7471*ie+32768,He[ie+768|0]=-11059*ie,He[ie+1024|0]=-21709*ie,He[ie+1280|0]=32768*ie+8421375,He[ie+1536|0]=-27439*ie,He[ie+1792|0]=-5329*ie})(),Le(e)}function Eu(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function t5(e){function n(be){if(!be)throw Error("assert :P")}function i(be,rt,ue){for(var me=0;4>me;me++)if(be[rt+me]!=ue.charCodeAt(me))return!0;return!1}function a(be,rt,ue,me,Ue){for(var Ie=0;Ie<Ue;Ie++)be[rt+Ie]=ue[me+Ie]}function u(be,rt,ue,me){for(var Ue=0;Ue<me;Ue++)be[rt+Ue]=ue}function f(be){return new Int32Array(be)}function m(be,rt){for(var ue=[],me=0;me<be;me++)ue.push(new rt);return ue}function o(be,rt){var ue=[];return(function me(Ue,Ie,pt){for(var lt=pt[Ie],ot=0;ot<lt&&(Ue.push(pt.length>Ie+1?[]:new rt),!(pt.length<Ie+1));ot++)me(Ue[ot],Ie+1,pt)})(ue,0,be),ue}var w=function(){var be=this;function rt(T,R){for(var $=1<<R-1>>>0;T&$;)$>>>=1;return $?(T&$-1)+$:T}function ue(T,R,$,re,ge){n(!(re%$));do T[R+(re-=$)]=ge;while(0<re)}function me(T,R,$,re,ge){if(n(2328>=ge),512>=ge)var we=f(512);else if((we=f(ge))==null)return 0;return(function(Ee,Pe,Re,Ke,We,kt){var Ye,Bt,Tt=Pe,Zt=1<<Re,Ut=f(16),qt=f(16);for(n(We!=0),n(Ke!=null),n(Ee!=null),n(0<Re),Bt=0;Bt<We;++Bt){if(15<Ke[Bt])return 0;++Ut[Ke[Bt]]}if(Ut[0]==We)return 0;for(qt[1]=0,Ye=1;15>Ye;++Ye){if(Ut[Ye]>1<<Ye)return 0;qt[Ye+1]=qt[Ye]+Ut[Ye]}for(Bt=0;Bt<We;++Bt)Ye=Ke[Bt],0<Ke[Bt]&&(kt[qt[Ye]++]=Bt);if(qt[15]==1)return(Ke=new Ue).g=0,Ke.value=kt[0],ue(Ee,Tt,1,Zt,Ke),Zt;var Wt,tr=-1,er=Zt-1,sn=0,zr=1,Cn=1,Zr=1<<Re;for(Bt=0,Ye=1,We=2;Ye<=Re;++Ye,We<<=1){if(zr+=Cn<<=1,0>(Cn-=Ut[Ye]))return 0;for(;0<Ut[Ye];--Ut[Ye])(Ke=new Ue).g=Ye,Ke.value=kt[Bt++],ue(Ee,Tt+sn,We,Zr,Ke),sn=rt(sn,Ye)}for(Ye=Re+1,We=2;15>=Ye;++Ye,We<<=1){if(zr+=Cn<<=1,0>(Cn-=Ut[Ye]))return 0;for(;0<Ut[Ye];--Ut[Ye]){if(Ke=new Ue,(sn&er)!=tr){for(Tt+=Zr,Wt=1<<(tr=Ye)-Re;15>tr&&!(0>=(Wt-=Ut[tr]));)++tr,Wt<<=1;Zt+=Zr=1<<(Wt=tr-Re),Ee[Pe+(tr=sn&er)].g=Wt+Re,Ee[Pe+tr].value=Tt-Pe-tr}Ke.g=Ye-Re,Ke.value=kt[Bt++],ue(Ee,Tt+(sn>>Re),We,Zr,Ke),sn=rt(sn,Ye)}}return zr!=2*qt[15]-1?0:Zt})(T,R,$,re,ge,we)}function Ue(){this.value=this.g=0}function Ie(){this.value=this.g=0}function pt(){this.G=m(5,Ue),this.H=f(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=m(Ws,Ie)}function lt(T,R,$,re){n(T!=null),n(R!=null),n(2147483648>re),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=R,T.pa=$,T.Jd=R,T.Yc=$+re,T.Zc=4<=re?$+re-4+1:$,_t(T)}function ot(T,R){for(var $=0;0<R--;)$|=Pt(T,128)<<R;return $}function Ne(T,R){var $=ot(T,R);return Et(T)?-$:$}function Te(T,R,$,re){var ge,we=0;for(n(T!=null),n(R!=null),n(4294967288>re),T.Sb=re,T.Ra=0,T.u=0,T.h=0,4<re&&(re=4),ge=0;ge<re;++ge)we+=R[$+ge]<<8*ge;T.Ra=we,T.bb=re,T.oa=R,T.pa=$}function yt(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<ga-8>>>0,++T.bb,T.u-=8;qe(T)&&(T.h=1,T.u=0)}function Le(T,R){if(n(0<=R),!T.h&&R<=Co){var $=Me(T)&qo[R];return T.u+=R,yt(T),$}return T.h=1,T.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ce(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Me(T){return T.Ra>>>(T.u&ga-1)>>>0}function qe(T){return n(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>ga}function at(T,R){T.u=R,T.h=qe(T)}function et(T){T.u>=dl&&(n(T.u>=dl),yt(T))}function _t(T){n(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(n(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function Et(T){return ot(T,1)}function Pt(T,R){var $=T.Ca;0>T.b&&_t(T);var re=T.b,ge=$*R>>>8,we=(T.I>>>re>ge)+0;for(we?($-=ge,T.I-=ge+1<<re>>>0):$=ge+1,re=$,ge=0;256<=re;)ge+=8,re>>=8;return re=7^ge+Ma[re],T.b-=re,T.Ca=($<<re)-1,we}function Kt(T,R,$){T[R+0]=$>>24&255,T[R+1]=$>>16&255,T[R+2]=$>>8&255,T[R+3]=255&$}function ar(T,R){return T[R+0]|T[R+1]<<8}function hr(T,R){return ar(T,R)|T[R+2]<<16}function Cr(T,R){return ar(T,R)|ar(T,R+2)<<16}function je(T,R){var $=1<<R;return n(T!=null),n(0<R),T.X=f($),T.X==null?0:(T.Mb=32-R,T.Xa=R,1)}function vr(T,R){n(T!=null),n(R!=null),n(T.Xa==R.Xa),a(R.X,0,T.X,0,1<<R.Xa)}function Ur(){this.X=[],this.Xa=this.Mb=0}function $r(T,R,$,re){n($!=null),n(re!=null);var ge=$[0],we=re[0];return ge==0&&(ge=(T*we+R/2)/R),we==0&&(we=(R*ge+T/2)/T),0>=ge||0>=we?0:($[0]=ge,re[0]=we,1)}function lr(T,R){return T+(1<<R)-1>>>R}function Wr(T,R){return((4278255360&T)+(4278255360&R)>>>0&4278255360)+((16711935&T)+(16711935&R)>>>0&16711935)>>>0}function Sr(T,R){be[R]=function($,re,ge,we,Ee,Pe,Re){var Ke;for(Ke=0;Ke<Ee;++Ke){var We=be[T](Pe[Re+Ke-1],ge,we+Ke);Pe[Re+Ke]=Wr($[re+Ke],We)}}}function Or(){this.ud=this.hd=this.jd=0}function Rr(T,R){return((4278124286&(T^R))>>>1)+(T&R)>>>0}function On(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function hn(T,R){return On(T+(T-R+.5>>1))}function dt(T,R,$){return Math.abs(R-$)-Math.abs(T-$)}function de(T,R,$,re,ge,we,Ee){for(re=we[Ee-1],$=0;$<ge;++$)we[Ee+$]=re=Wr(T[R+$],re)}function pe(T,R,$,re,ge){var we;for(we=0;we<$;++we){var Ee=T[R+we],Pe=Ee>>8&255,Re=16711935&(Re=(Re=16711935&Ee)+((Pe<<16)+Pe));re[ge+we]=(4278255360&Ee)+Re>>>0}}function ve(T,R){R.jd=255&T,R.hd=T>>8&255,R.ud=T>>16&255}function $e(T,R,$,re,ge,we){var Ee;for(Ee=0;Ee<re;++Ee){var Pe=R[$+Ee],Re=Pe>>>8,Ke=Pe,We=255&(We=(We=Pe>>>16)+((T.jd<<24>>24)*(Re<<24>>24)>>>5));Ke=255&(Ke=(Ke+=(T.hd<<24>>24)*(Re<<24>>24)>>>5)+((T.ud<<24>>24)*(We<<24>>24)>>>5)),ge[we+Ee]=(4278255360&Pe)+(We<<16)+Ke}}function Ze(T,R,$,re,ge){be[R]=function(we,Ee,Pe,Re,Ke,We,kt,Ye,Bt){for(Re=kt;Re<Ye;++Re)for(kt=0;kt<Bt;++kt)Ke[We++]=ge(Pe[re(we[Ee++])])},be[T]=function(we,Ee,Pe,Re,Ke,We,kt){var Ye=8>>we.b,Bt=we.Ea,Tt=we.K[0],Zt=we.w;if(8>Ye)for(we=(1<<we.b)-1,Zt=(1<<Ye)-1;Ee<Pe;++Ee){var Ut,qt=0;for(Ut=0;Ut<Bt;++Ut)Ut&we||(qt=re(Re[Ke++])),We[kt++]=ge(Tt[qt&Zt]),qt>>=Ye}else be["VP8LMapColor"+$](Re,Ke,Tt,Zt,We,kt,Ee,Pe,Bt)}}function Ct(T,R,$,re,ge){for($=R+$;R<$;){var we=T[R++];re[ge++]=we>>16&255,re[ge++]=we>>8&255,re[ge++]=255&we}}function vt(T,R,$,re,ge){for($=R+$;R<$;){var we=T[R++];re[ge++]=we>>16&255,re[ge++]=we>>8&255,re[ge++]=255&we,re[ge++]=we>>24&255}}function ct(T,R,$,re,ge){for($=R+$;R<$;){var we=(Ee=T[R++])>>16&240|Ee>>12&15,Ee=240&Ee|Ee>>28&15;re[ge++]=we,re[ge++]=Ee}}function bt(T,R,$,re,ge){for($=R+$;R<$;){var we=(Ee=T[R++])>>16&248|Ee>>13&7,Ee=Ee>>5&224|Ee>>3&31;re[ge++]=we,re[ge++]=Ee}}function Ht(T,R,$,re,ge){for($=R+$;R<$;){var we=T[R++];re[ge++]=255&we,re[ge++]=we>>8&255,re[ge++]=we>>16&255}}function Ft(T,R,$,re,ge,we){if(we==0)for($=R+$;R<$;)Kt(re,((we=T[R++])[0]>>24|we[1]>>8&65280|we[2]<<8&16711680|we[3]<<24)>>>0),ge+=32;else a(re,ge,T,R,$)}function cr(T,R){be[R][0]=be[T+"0"],be[R][1]=be[T+"1"],be[R][2]=be[T+"2"],be[R][3]=be[T+"3"],be[R][4]=be[T+"4"],be[R][5]=be[T+"5"],be[R][6]=be[T+"6"],be[R][7]=be[T+"7"],be[R][8]=be[T+"8"],be[R][9]=be[T+"9"],be[R][10]=be[T+"10"],be[R][11]=be[T+"11"],be[R][12]=be[T+"12"],be[R][13]=be[T+"13"],be[R][14]=be[T+"0"],be[R][15]=be[T+"0"]}function Jt(T){return T==RA||T==uc||T==Ql||T==Qc}function dr(){this.eb=[],this.size=this.A=this.fb=0}function rn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new dr,this.f.kb=new rn,this.sd=null}function mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function mr(T,R){var $=T.T,re=R.ba.f.RGBA,ge=re.eb,we=re.fb+T.ka*re.A,Ee=Zs[R.ba.S],Pe=T.y,Re=T.O,Ke=T.f,We=T.N,kt=T.ea,Ye=T.W,Bt=R.cc,Tt=R.dc,Zt=R.Mc,Ut=R.Nc,qt=T.ka,Wt=T.ka+T.T,tr=T.U,er=tr+1>>1;for(qt==0?Ee(Pe,Re,null,null,Ke,We,kt,Ye,Ke,We,kt,Ye,ge,we,null,null,tr):(Ee(R.ec,R.fc,Pe,Re,Bt,Tt,Zt,Ut,Ke,We,kt,Ye,ge,we-re.A,ge,we,tr),++$);qt+2<Wt;qt+=2)Bt=Ke,Tt=We,Zt=kt,Ut=Ye,We+=T.Rc,Ye+=T.Rc,we+=2*re.A,Ee(Pe,(Re+=2*T.fa)-T.fa,Pe,Re,Bt,Tt,Zt,Ut,Ke,We,kt,Ye,ge,we-re.A,ge,we,tr);return Re+=T.fa,T.j+Wt<T.o?(a(R.ec,R.fc,Pe,Re,tr),a(R.cc,R.dc,Ke,We,er),a(R.Mc,R.Nc,kt,Ye,er),$--):1&Wt||Ee(Pe,Re,null,null,Ke,We,kt,Ye,Ke,We,kt,Ye,ge,we+re.A,null,null,tr),$}function Kr(T,R,$){var re=T.F,ge=[T.J];if(re!=null){var we=T.U,Ee=R.ba.S,Pe=Ee==lu||Ee==Ql;R=R.ba.f.RGBA;var Re=[0],Ke=T.ka;Re[0]=T.T,T.Kb&&(Ke==0?--Re[0]:(--Ke,ge[0]-=T.width),T.j+T.ka+T.T==T.o&&(Re[0]=T.o-T.j-Ke));var We=R.eb;Ke=R.fb+Ke*R.A,T=yl(re,ge[0],T.width,we,Re,We,Ke+(Pe?0:3),R.A),n($==Re),T&&Jt(Ee)&&Dc(We,Ke,Pe,we,Re,R.A)}return 0}function Dn(T){var R=T.ma,$=R.ba.S,re=11>$,ge=$==Nc||$==Ac||$==lu||$==Ii||$==12||Jt($);if(R.memory=null,R.Ib=null,R.Jb=null,R.Nd=null,!oA(R.Oa,T,ge?11:12))return 0;if(ge&&Jt($)&&Ta(),T.da)alert("todo:use_scaling");else{if(re){if(R.Ib=Nr,T.Kb){if($=T.U+1>>1,R.memory=f(T.U+2*$),R.memory==null)return 0;R.ec=R.memory,R.fc=0,R.cc=R.ec,R.dc=R.fc+T.U,R.Mc=R.cc,R.Nc=R.dc+$,R.Ib=mr,Ta()}}else alert("todo:EmitYUV");ge&&(R.Jb=Kr,re&&da())}if(re&&!Ns){for(T=0;256>T;++T)Xs[T]=89858*(T-128)+Qa>>Ol,go[T]=-22014*(T-128)+Qa,Vc[T]=-45773*(T-128),jc[T]=113618*(T-128)+Qa>>Ol;for(T=li;T<Xn;++T)R=76283*(T-16)+Qa>>Ol,fu[T-li]=ds(R,255),Ou[T-li]=ds(R+8>>4,15);Ns=1}return 1}function wr(T){var R=T.ma,$=T.U,re=T.T;return n(!(1&T.ka)),0>=$||0>=re?0:($=R.Ib(T,R),R.Jb!=null&&R.Jb(T,R,$),R.Dc+=$,1)}function Tn(T){T.ma.memory=null}function Bn(T,R,$,re){return Le(T,8)!=47?0:(R[0]=Le(T,14)+1,$[0]=Le(T,14)+1,re[0]=Le(T,1),Le(T,3)!=0?0:!T.h)}function xn(T,R){if(4>T)return T+1;var $=T-2>>1;return(2+(1&T)<<$)+Le(R,$)+1}function Di(T,R){return 120<R?R-120:1<=($=(($=uA[R-1])>>4)*T+(8-(15&$)))?$:1;var $}function ai(T,R,$){var re=Me($),ge=T[R+=255&re].g-8;return 0<ge&&(at($,$.u+8),re=Me($),R+=T[R].value,R+=re&(1<<ge)-1),at($,$.u+T[R].g),T[R].value}function Yt(T,R,$){return $.g+=T.g,$.value+=T.value<<R>>>0,n(8>=$.g),T.g}function Zn(T,R,$){var re=T.xc;return n((R=re==0?0:T.vc[T.md*($>>re)+(R>>re)])<T.Wb),T.Ya[R]}function $i(T,R,$,re){var ge=T.ab,we=T.c*R,Ee=T.C;R=Ee+R;var Pe=$,Re=re;for(re=T.Ta,$=T.Ua;0<ge--;){var Ke=T.gc[ge],We=Ee,kt=R,Ye=Pe,Bt=Re,Tt=(Re=re,Pe=$,Ke.Ea);switch(n(We<kt),n(kt<=Ke.nc),Ke.hc){case 2:ss(Ye,Bt,(kt-We)*Tt,Re,Pe);break;case 0:var Zt=We,Ut=kt,qt=Re,Wt=Pe,tr=(Zr=Ke).Ea;Zt==0&&(oc(Ye,Bt,null,null,1,qt,Wt),de(Ye,Bt+1,0,0,tr-1,qt,Wt+1),Bt+=tr,Wt+=tr,++Zt);for(var er=1<<Zr.b,sn=er-1,zr=lr(tr,Zr.b),Cn=Zr.K,Zr=Zr.w+(Zt>>Zr.b)*zr;Zt<Ut;){var Qn=Cn,Ni=Zr,Sn=1;for(kl(Ye,Bt,qt,Wt-tr,1,qt,Wt);Sn<tr;){var Hr=(Sn&~sn)+er;Hr>tr&&(Hr=tr),(0,Ul[Qn[Ni++]>>8&15])(Ye,Bt+ +Sn,qt,Wt+Sn-tr,Hr-Sn,qt,Wt+Sn),Sn=Hr}Bt+=tr,Wt+=tr,++Zt&sn||(Zr+=zr)}kt!=Ke.nc&&a(Re,Pe-Tt,Re,Pe+(kt-We-1)*Tt,Tt);break;case 1:for(Tt=Ye,Ut=Bt,tr=(Ye=Ke.Ea)-(Wt=Ye&~(qt=(Bt=1<<Ke.b)-1)),Zt=lr(Ye,Ke.b),er=Ke.K,Ke=Ke.w+(We>>Ke.b)*Zt;We<kt;){for(sn=er,zr=Ke,Cn=new Or,Zr=Ut+Wt,Qn=Ut+Ye;Ut<Zr;)ve(sn[zr++],Cn),ho(Cn,Tt,Ut,Bt,Re,Pe),Ut+=Bt,Pe+=Bt;Ut<Qn&&(ve(sn[zr++],Cn),ho(Cn,Tt,Ut,tr,Re,Pe),Ut+=tr,Pe+=tr),++We&qt||(Ke+=Zt)}break;case 3:if(Ye==Re&&Bt==Pe&&0<Ke.b){for(Ut=Re,Ye=Tt=Pe+(kt-We)*Tt-(Wt=(kt-We)*lr(Ke.Ea,Ke.b)),Bt=Re,qt=Pe,Zt=[],Wt=(tr=Wt)-1;0<=Wt;--Wt)Zt[Wt]=Bt[qt+Wt];for(Wt=tr-1;0<=Wt;--Wt)Ut[Ye+Wt]=Zt[Wt];pl(Ke,We,kt,Re,Tt,Re,Pe)}else pl(Ke,We,kt,Ye,Bt,Re,Pe)}Pe=re,Re=$}Re!=$&&a(re,$,Pe,Re,we)}function sl(T,R){var $=T.V,re=T.Ba+T.c*T.C,ge=R-T.C;if(n(R<=T.l.o),n(16>=ge),0<ge){var we=T.l,Ee=T.Ta,Pe=T.Ua,Re=we.width;if($i(T,ge,$,re),ge=Pe=[Pe],n(($=T.C)<(re=R)),n(we.v<we.va),re>we.o&&(re=we.o),$<we.j){var Ke=we.j-$;$=we.j,ge[0]+=Ke*Re}if($>=re?$=0:(ge[0]+=4*we.v,we.ka=$-we.j,we.U=we.va-we.v,we.T=re-$,$=1),$){if(Pe=Pe[0],11>($=T.ca).S){var We=$.f.RGBA,kt=(re=$.S,ge=we.U,we=we.T,Ke=We.eb,We.A),Ye=we;for(We=We.fb+T.Ma*We.A;0<Ye--;){var Bt=Ee,Tt=Pe,Zt=ge,Ut=Ke,qt=We;switch(re){case AA:ac(Bt,Tt,Zt,Ut,qt);break;case Nc:gl(Bt,Tt,Zt,Ut,qt);break;case RA:gl(Bt,Tt,Zt,Ut,qt),Dc(Ut,qt,0,Zt,1,0);break;case ch:Nl(Bt,Tt,Zt,Ut,qt);break;case Ac:Ft(Bt,Tt,Zt,Ut,qt,1);break;case uc:Ft(Bt,Tt,Zt,Ut,qt,1),Dc(Ut,qt,0,Zt,1,0);break;case lu:Ft(Bt,Tt,Zt,Ut,qt,0);break;case Ql:Ft(Bt,Tt,Zt,Ut,qt,0),Dc(Ut,qt,1,Zt,1,0);break;case Ii:Dl(Bt,Tt,Zt,Ut,qt);break;case Qc:Dl(Bt,Tt,Zt,Ut,qt),au(Ut,qt,Zt,1,0);break;case cu:Rl(Bt,Tt,Zt,Ut,qt);break;default:n(0)}Pe+=Re,We+=kt}T.Ma+=we}else alert("todo:EmitRescaledRowsYUVA");n(T.Ma<=$.height)}}T.C=R,n(T.C<=T.i)}function ns(T){var R;if(0<T.ua)return 0;for(R=0;R<T.Wb;++R){var $=T.Ya[R].G,re=T.Ya[R].H;if(0<$[1][re[1]+0].g||0<$[2][re[2]+0].g||0<$[3][re[3]+0].g)return 0}return 1}function pr(T,R,$,re,ge,we){if(T.Z!=0){var Ee=T.qd,Pe=T.rd;for(n(Rs[T.Z]!=null);R<$;++R)Rs[T.Z](Ee,Pe,re,ge,re,ge,we),Ee=re,Pe=ge,ge+=we;T.qd=Ee,T.rd=Pe}}function nn(T,R){var $=T.l.ma,re=$.Z==0||$.Z==1?T.l.j:T.C;if(re=T.C<re?re:T.C,n(R<=T.l.o),R>re){var ge=T.l.width,we=$.ca,Ee=$.tb+ge*re,Pe=T.V,Re=T.Ba+T.c*re,Ke=T.gc;n(T.ab==1),n(Ke[0].hc==3),ya(Ke[0],re,R,Pe,Re,we,Ee),pr($,re,R,we,Ee,ge)}T.C=T.Ma=R}function un(T,R,$,re,ge,we,Ee){var Pe=T.$/re,Re=T.$%re,Ke=T.m,We=T.s,kt=$+T.$,Ye=kt;ge=$+re*ge;var Bt=$+re*we,Tt=280+We.ua,Zt=T.Pb?Pe:16777216,Ut=0<We.ua?We.Wa:null,qt=We.wc,Wt=kt<Bt?Zn(We,Re,Pe):null;n(T.C<we),n(Bt<=ge);var tr=!1;e:for(;;){for(;tr||kt<Bt;){var er=0;if(Pe>=Zt){var sn=kt-$;n((Zt=T).Pb),Zt.wd=Zt.m,Zt.xd=sn,0<Zt.s.ua&&vr(Zt.s.Wa,Zt.s.vb),Zt=Pe+QA}if(Re&qt||(Wt=Zn(We,Re,Pe)),n(Wt!=null),Wt.Qb&&(R[kt]=Wt.qb,tr=!0),!tr)if(et(Ke),Wt.jc){er=Ke,sn=R;var zr=kt,Cn=Wt.pd[Me(er)&Ws-1];n(Wt.jc),256>Cn.g?(at(er,er.u+Cn.g),sn[zr]=Cn.value,er=0):(at(er,er.u+Cn.g-256),n(256<=Cn.value),er=Cn.value),er==0&&(tr=!0)}else er=ai(Wt.G[0],Wt.H[0],Ke);if(Ke.h)break;if(tr||256>er){if(!tr)if(Wt.nd)R[kt]=(Wt.qb|er<<8)>>>0;else{if(et(Ke),tr=ai(Wt.G[1],Wt.H[1],Ke),et(Ke),sn=ai(Wt.G[2],Wt.H[2],Ke),zr=ai(Wt.G[3],Wt.H[3],Ke),Ke.h)break;R[kt]=(zr<<24|tr<<16|er<<8|sn)>>>0}if(tr=!1,++kt,++Re>=re&&(Re=0,++Pe,Ee!=null&&Pe<=we&&!(Pe%16)&&Ee(T,Pe),Ut!=null))for(;Ye<kt;)er=R[Ye++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er}else if(280>er){if(er=xn(er-256,Ke),sn=ai(Wt.G[4],Wt.H[4],Ke),et(Ke),sn=Di(re,sn=xn(sn,Ke)),Ke.h)break;if(kt-$<sn||ge-kt<er)break e;for(zr=0;zr<er;++zr)R[kt+zr]=R[kt+zr-sn];for(kt+=er,Re+=er;Re>=re;)Re-=re,++Pe,Ee!=null&&Pe<=we&&!(Pe%16)&&Ee(T,Pe);if(n(kt<=ge),Re&qt&&(Wt=Zn(We,Re,Pe)),Ut!=null)for(;Ye<kt;)er=R[Ye++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er}else{if(!(er<Tt))break e;for(tr=er-280,n(Ut!=null);Ye<kt;)er=R[Ye++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er;er=kt,n(!(tr>>>(sn=Ut).Xa)),R[er]=sn.X[tr],tr=!0}tr||n(Ke.h==qe(Ke))}if(T.Pb&&Ke.h&&kt<ge)n(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&vr(T.s.vb,T.s.Wa);else{if(Ke.h)break e;Ee?.(T,Pe>we?we:Pe),T.a=0,T.$=kt-$}return 1}return T.a=3,0}function Ri(T){n(T!=null),T.vc=null,T.yc=null,T.Ya=null;var R=T.Wa;R!=null&&(R.X=null),T.vb=null,n(T!=null)}function El(){var T=new gn;return T==null?null:(T.a=0,T.xb=co,cr("Predictor","VP8LPredictors"),cr("Predictor","VP8LPredictors_C"),cr("PredictorAdd","VP8LPredictorsAdd"),cr("PredictorAdd","VP8LPredictorsAdd_C"),ss=pe,ho=$e,ac=Ct,gl=vt,Dl=ct,Rl=bt,Nl=Ht,be.VP8LMapColor32b=ml,be.VP8LMapColor8b=Pc,T)}function ks(T,R,$,re,ge){var we=1,Ee=[T],Pe=[R],Re=re.m,Ke=re.s,We=null,kt=0;e:for(;;){if($)for(;we&&Le(Re,1);){var Ye=Ee,Bt=Pe,Tt=re,Zt=1,Ut=Tt.m,qt=Tt.gc[Tt.ab],Wt=Le(Ut,2);if(Tt.Oc&1<<Wt)we=0;else{switch(Tt.Oc|=1<<Wt,qt.hc=Wt,qt.Ea=Ye[0],qt.nc=Bt[0],qt.K=[null],++Tt.ab,n(4>=Tt.ab),Wt){case 0:case 1:qt.b=Le(Ut,3)+2,Zt=ks(lr(qt.Ea,qt.b),lr(qt.nc,qt.b),0,Tt,qt.K),qt.K=qt.K[0];break;case 3:var tr,er=Le(Ut,8)+1,sn=16<er?0:4<er?1:2<er?2:3;if(Ye[0]=lr(qt.Ea,sn),qt.b=sn,tr=Zt=ks(er,1,0,Tt,qt.K)){var zr,Cn=er,Zr=qt,Qn=1<<(8>>Zr.b),Ni=f(Qn);if(Ni==null)tr=0;else{var Sn=Zr.K[0],Hr=Zr.w;for(Ni[0]=Zr.K[0][0],zr=1;zr<1*Cn;++zr)Ni[zr]=Wr(Sn[Hr+zr],Ni[zr-1]);for(;zr<4*Qn;++zr)Ni[zr]=0;Zr.K[0]=null,Zr.K[0]=Ni,tr=1}}Zt=tr;break;case 2:break;default:n(0)}we=Zt}}if(Ee=Ee[0],Pe=Pe[0],we&&Le(Re,1)&&!(we=1<=(kt=Le(Re,4))&&11>=kt)){re.a=3;break e}var Fr;if(Fr=we)t:{var pi,Mr,zn,mi=re,as=Ee,ls=Pe,Qi=kt,Bs=$,Cs=mi.m,Oi=mi.s,Fn=[null],Yn=1,gr=0,xr=zc[Qi];r:for(;;){if(Bs&&Le(Cs,1)){var Ti=Le(Cs,3)+2,Vi=lr(as,Ti),ei=lr(ls,Ti),ci=Vi*ei;if(!ks(Vi,ei,0,mi,Fn))break r;for(Fn=Fn[0],Oi.xc=Ti,pi=0;pi<ci;++pi){var Rn=Fn[pi]>>8&65535;Fn[pi]=Rn,Rn>=Yn&&(Yn=Rn+1)}}if(Cs.h)break r;for(Mr=0;5>Mr;++Mr){var wi=hc[Mr];!Mr&&0<Qi&&(wi+=1<<Qi),gr<wi&&(gr=wi)}var Es=m(Yn*xr,Ue),Ys=Yn,Fo=m(Ys,pt);if(Fo==null)var ki=null;else n(65536>=Ys),ki=Fo;var In=f(gr);if(ki==null||In==null||Es==null){mi.a=1;break r}var Vn=Es;for(pi=zn=0;pi<Yn;++pi){var xi=ki[pi],Ss=xi.G,Io=xi.H,Js=0,Fs=1,Ji=0;for(Mr=0;5>Mr;++Mr){wi=hc[Mr],Ss[Mr]=Vn,Io[Mr]=zn,!Mr&&0<Qi&&(wi+=1<<Qi);i:{var za,Ha=wi,Gc=mi,ja=In,Hl=Vn,VA=zn,gi=0,Wo=Gc.m,pA=Le(Wo,1);if(u(ja,0,0,Ha),pA){var du=Le(Wo,1)+1,jl=Le(Wo,1),Vl=Le(Wo,jl==0?1:8);ja[Vl]=1,du==2&&(ja[Vl=Le(Wo,8)]=1);var Va=1}else{var bi=f(19),Ui=Le(Wo,4)+4;if(19<Ui){Gc.a=3;var es=0;break i}for(za=0;za<Ui;++za)bi[Du[za]]=Le(Wo,3);var Kc=void 0,Ga=void 0,qc=Gc,x=bi,r=Ha,c=ja,d=0,y=qc.m,b=8,S=m(128,Ue);n:for(;me(S,0,7,x,19);){if(Le(y,1)){var M=2+2*Le(y,3);if((Kc=2+Le(y,M))>r)break n}else Kc=r;for(Ga=0;Ga<r&&Kc--;){et(y);var N=S[0+(127&Me(y))];at(y,y.u+N.g);var j=N.value;if(16>j)c[Ga++]=j,j!=0&&(b=j);else{var q=j==16,ne=j-16,ee=NA[ne],Ae=Le(y,Oc[ne])+ee;if(Ga+Ae>r)break n;for(var _e=q?b:0;0<Ae--;)c[Ga++]=_e}}d=1;break n}d||(qc.a=3),Va=d}(Va=Va&&!Wo.h)&&(gi=me(Hl,VA,8,ja,Ha)),Va&&gi!=0?es=gi:(Gc.a=3,es=0)}if(es==0)break r;if(Fs&&Au[Mr]==1&&(Fs=Vn[zn].g==0),Js+=Vn[zn].g,zn+=es,3>=Mr){var De,ze=In[0];for(De=1;De<wi;++De)In[De]>ze&&(ze=In[De]);Ji+=ze}}if(xi.nd=Fs,xi.Qb=0,Fs&&(xi.qb=(Ss[3][Io[3]+0].value<<24|Ss[1][Io[1]+0].value<<16|Ss[2][Io[2]+0].value)>>>0,Js==0&&256>Ss[0][Io[0]+0].value&&(xi.Qb=1,xi.qb+=Ss[0][Io[0]+0].value<<8)),xi.jc=!xi.Qb&&6>Ji,xi.jc){var Qe,Ge=xi;for(Qe=0;Qe<Ws;++Qe){var st=Qe,Xe=Ge.pd[st],At=Ge.G[0][Ge.H[0]+st];256<=At.value?(Xe.g=At.g+256,Xe.value=At.value):(Xe.g=0,Xe.value=0,st>>=Yt(At,8,Xe),st>>=Yt(Ge.G[1][Ge.H[1]+st],16,Xe),st>>=Yt(Ge.G[2][Ge.H[2]+st],0,Xe),Yt(Ge.G[3][Ge.H[3]+st],24,Xe))}}}Oi.vc=Fn,Oi.Wb=Yn,Oi.Ya=ki,Oi.yc=Es,Fr=1;break t}Fr=0}if(!(we=Fr)){re.a=3;break e}if(0<kt){if(Ke.ua=1<<kt,!je(Ke.Wa,kt)){re.a=1,we=0;break e}}else Ke.ua=0;var ft=re,nt=Ee,wt=Pe,Dt=ft.s,Lt=Dt.xc;if(ft.c=nt,ft.i=wt,Dt.md=lr(nt,Lt),Dt.wc=Lt==0?-1:(1<<Lt)-1,$){re.xb=mo;break e}if((We=f(Ee*Pe))==null){re.a=1,we=0;break e}we=(we=un(re,We,0,Ee,Pe,Pe,null))&&!Re.h;break e}return we?(ge!=null?ge[0]=We:(n(We==null),n($)),re.$=0,$||Ri(Ke)):Ri(Ke),we}function fn(T,R){var $=T.c*T.i,re=$+R+16*R;return n(T.c<=R),T.V=f(re),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+$+R,1)}function ol(T,R){var $=T.C,re=R-$,ge=T.V,we=T.Ba+T.c*$;for(n(R<=T.l.o);0<re;){var Ee=16<re?16:re,Pe=T.l.ma,Re=T.l.width,Ke=Re*Ee,We=Pe.ca,kt=Pe.tb+Re*$,Ye=T.Ta,Bt=T.Ua;$i(T,Ee,ge,we),kA(Ye,Bt,We,kt,Ke),pr(Pe,$,$+Ee,We,kt,Re),re-=Ee,ge+=Ee*T.c,$+=Ee}n($==R),T.C=T.Ma=R}function al(){this.ub=this.yd=this.td=this.Rb=0}function ec(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ec(){this.Fb=this.Bb=this.Cb=0,this.Zb=f(4),this.Lb=f(4)}function di(){this.Yb=(function(){var T=[];return(function R($,re,ge){for(var we=ge[re],Ee=0;Ee<we&&($.push(ge.length>re+1?[]:0),!(ge.length<re+1));Ee++)R($[Ee],re+1,ge)})(T,0,[3,11]),T})()}function tc(){this.jb=f(3),this.Wc=o([4,8],di),this.Xc=o([4,17],di)}function Sl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new f(4),this.od=new f(4)}function Ci(){this.ld=this.La=this.dd=this.tc=0}function jn(){this.Na=this.la=0}function rA(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ll(){this.ad=f(384),this.Za=0,this.Ob=f(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ci),this.Y=0,this.ya=Array(new ll),this.aa=0,this.l=new Ba}function Us(){this.y=f(16),this.f=f(8),this.ea=f(8)}function Ro(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new al,this.Kc=new ec,this.ed=new Sl,this.Qa=new Ec,this.Ic=this.$c=this.Aa=0,this.D=new cl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=m(8,ie),this.ia=0,this.pb=m(4,rA),this.Pa=new tc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Us),this.Hd=0,this.rb=Array(new jn),this.sb=0,this.wa=Array(new Ci),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ll),this.L=this.aa=0,this.gd=o([4,2],Ci),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ds(T,R){return 0>T?0:T>R?R:T}function Ba(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function IA(){var T=new Ro;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,hA||(hA=Qo)),T}function Mn(T,R,$){return T.a==0&&(T.a=R,T.sc=$,T.cb=0),0}function Sc(T,R,$){return 3<=$&&T[R+0]==157&&T[R+1]==1&&T[R+2]==42}function No(T,R){if(T==null)return 0;if(T.a=0,T.sc="OK",R==null)return Mn(T,2,"null VP8Io passed to VP8GetHeaders()");var $=R.data,re=R.w,ge=R.ha;if(4>ge)return Mn(T,7,"Truncated header.");var we=$[re+0]|$[re+1]<<8|$[re+2]<<16,Ee=T.Od;if(Ee.Rb=!(1&we),Ee.td=we>>1&7,Ee.yd=we>>4&1,Ee.ub=we>>5,3<Ee.td)return Mn(T,3,"Incorrect keyframe parameters.");if(!Ee.yd)return Mn(T,4,"Frame not displayable.");re+=3,ge-=3;var Pe=T.Kc;if(Ee.Rb){if(7>ge)return Mn(T,7,"cannot parse picture header");if(!Sc($,re,ge))return Mn(T,3,"Bad code word");Pe.c=16383&($[re+4]<<8|$[re+3]),Pe.Td=$[re+4]>>6,Pe.i=16383&($[re+6]<<8|$[re+5]),Pe.Ud=$[re+6]>>6,re+=7,ge-=7,T.za=Pe.c+15>>4,T.Ub=Pe.i+15>>4,R.width=Pe.c,R.height=Pe.i,R.Da=0,R.j=0,R.v=0,R.va=R.width,R.o=R.height,R.da=0,R.ib=R.width,R.hb=R.height,R.U=R.width,R.T=R.height,u((we=T.Pa).jb,0,255,we.jb.length),n((we=T.Qa)!=null),we.Cb=0,we.Bb=0,we.Fb=1,u(we.Zb,0,0,we.Zb.length),u(we.Lb,0,0,we.Lb)}if(Ee.ub>ge)return Mn(T,7,"bad partition length");lt(we=T.m,$,re,Ee.ub),re+=Ee.ub,ge-=Ee.ub,Ee.Rb&&(Pe.Ld=Et(we),Pe.Kd=Et(we)),Pe=T.Qa;var Re,Ke=T.Pa;if(n(we!=null),n(Pe!=null),Pe.Cb=Et(we),Pe.Cb){if(Pe.Bb=Et(we),Et(we)){for(Pe.Fb=Et(we),Re=0;4>Re;++Re)Pe.Zb[Re]=Et(we)?Ne(we,7):0;for(Re=0;4>Re;++Re)Pe.Lb[Re]=Et(we)?Ne(we,6):0}if(Pe.Bb)for(Re=0;3>Re;++Re)Ke.jb[Re]=Et(we)?ot(we,8):255}else Pe.Bb=0;if(we.Ka)return Mn(T,3,"cannot parse segment header");if((Pe=T.ed).zd=Et(we),Pe.Tb=ot(we,6),Pe.wb=ot(we,3),Pe.Pc=Et(we),Pe.Pc&&Et(we)){for(Ke=0;4>Ke;++Ke)Et(we)&&(Pe.vd[Ke]=Ne(we,6));for(Ke=0;4>Ke;++Ke)Et(we)&&(Pe.od[Ke]=Ne(we,6))}if(T.L=Pe.Tb==0?0:Pe.zd?1:2,we.Ka)return Mn(T,3,"cannot parse filter header");var We=ge;if(ge=Re=re,re=Re+We,Pe=We,T.Xb=(1<<ot(T.m,2))-1,We<3*(Ke=T.Xb))$=7;else{for(Re+=3*Ke,Pe-=3*Ke,We=0;We<Ke;++We){var kt=$[ge+0]|$[ge+1]<<8|$[ge+2]<<16;kt>Pe&&(kt=Pe),lt(T.Jc[+We],$,Re,kt),Re+=kt,Pe-=kt,ge+=3}lt(T.Jc[+Ke],$,Re,Pe),$=Re<re?0:5}if($!=0)return Mn(T,$,"cannot parse partitions");for($=ot(Re=T.m,7),ge=Et(Re)?Ne(Re,4):0,re=Et(Re)?Ne(Re,4):0,Pe=Et(Re)?Ne(Re,4):0,Ke=Et(Re)?Ne(Re,4):0,Re=Et(Re)?Ne(Re,4):0,We=T.Qa,kt=0;4>kt;++kt){if(We.Cb){var Ye=We.Zb[kt];We.Fb||(Ye+=$)}else{if(0<kt){T.pb[kt]=T.pb[0];continue}Ye=$}var Bt=T.pb[kt];Bt.Sc[0]=OA[ds(Ye+ge,127)],Bt.Sc[1]=fc[ds(Ye+0,127)],Bt.Eb[0]=2*OA[ds(Ye+re,127)],Bt.Eb[1]=101581*fc[ds(Ye+Pe,127)]>>16,8>Bt.Eb[1]&&(Bt.Eb[1]=8),Bt.Qc[0]=OA[ds(Ye+Ke,117)],Bt.Qc[1]=fc[ds(Ye+Re,127)],Bt.lc=Ye+Re}if(!Ee.Rb)return Mn(T,4,"Not a key frame.");for(Et(we),Ee=T.Pa,$=0;4>$;++$){for(ge=0;8>ge;++ge)for(re=0;3>re;++re)for(Pe=0;11>Pe;++Pe)Ke=Pt(we,hu[$][ge][re][Pe])?ot(we,8):Ah[$][ge][re][Pe],Ee.Wc[$][ge].Yb[re][Pe]=Ke;for(ge=0;17>ge;++ge)Ee.Xc[$][ge]=Ee.Wc[$][zA[ge]]}return T.kc=Et(we),T.kc&&(T.Bd=ot(we,8)),T.cb=1}function Qo(T,R,$,re,ge,we,Ee){var Pe=R[ge].Yb[$];for($=0;16>ge;++ge){if(!Pt(T,Pe[$+0]))return ge;for(;!Pt(T,Pe[$+1]);)if(Pe=R[++ge].Yb[0],$=0,ge==16)return 16;var Re=R[ge+1].Yb;if(Pt(T,Pe[$+2])){var Ke=T,We=0;if(Pt(Ke,(Ye=Pe)[(kt=$)+3]))if(Pt(Ke,Ye[kt+6])){for(Pe=0,kt=2*(We=Pt(Ke,Ye[kt+8]))+(Ye=Pt(Ke,Ye[kt+9+We])),We=0,Ye=Ru[kt];Ye[Pe];++Pe)We+=We+Pt(Ke,Ye[Pe]);We+=3+(8<<kt)}else Pt(Ke,Ye[kt+7])?(We=7+2*Pt(Ke,165),We+=Pt(Ke,145)):We=5+Pt(Ke,159);else We=Pt(Ke,Ye[kt+4])?3+Pt(Ke,Ye[kt+5]):2;Pe=Re[2]}else We=1,Pe=Re[1];Re=Ee+fA[ge],0>(Ke=T).b&&_t(Ke);var kt,Ye=Ke.b,Bt=(kt=Ke.Ca>>1)-(Ke.I>>Ye)>>31;--Ke.b,Ke.Ca+=Bt,Ke.Ca|=1,Ke.I-=(kt+1&Bt)<<Ye,we[Re]=((We^Bt)-Bt)*re[(0<ge)+0]}return 16}function Fc(T){var R=T.rb[T.sb-1];R.la=0,R.Na=0,u(T.zc,0,0,T.zc.length),T.ja=0}function la(T,R,$,re,ge){ge=T[R+$+32*re]+(ge>>3),T[R+$+32*re]=-256&ge?0>ge?0:255:ge}function ys(T,R,$,re,ge,we){la(T,R,0,$,re+ge),la(T,R,1,$,re+we),la(T,R,2,$,re-we),la(T,R,3,$,re-ge)}function Oo(T){return(20091*T>>16)+T}function nA(T,R,$,re){var ge,we=0,Ee=f(16);for(ge=0;4>ge;++ge){var Pe=T[R+0]+T[R+8],Re=T[R+0]-T[R+8],Ke=(35468*T[R+4]>>16)-Oo(T[R+12]),We=Oo(T[R+4])+(35468*T[R+12]>>16);Ee[we+0]=Pe+We,Ee[we+1]=Re+Ke,Ee[we+2]=Re-Ke,Ee[we+3]=Pe-We,we+=4,R++}for(ge=we=0;4>ge;++ge)Pe=(T=Ee[we+0]+4)+Ee[we+8],Re=T-Ee[we+8],Ke=(35468*Ee[we+4]>>16)-Oo(Ee[we+12]),la($,re,0,0,Pe+(We=Oo(Ee[we+4])+(35468*Ee[we+12]>>16))),la($,re,1,0,Re+Ke),la($,re,2,0,Re-Ke),la($,re,3,0,Pe-We),we++,re+=32}function iA(T,R,$,re){var ge=T[R+0]+4,we=35468*T[R+4]>>16,Ee=Oo(T[R+4]),Pe=35468*T[R+1]>>16;ys($,re,0,ge+Ee,T=Oo(T[R+1]),Pe),ys($,re,1,ge+we,T,Pe),ys($,re,2,ge-we,T,Pe),ys($,re,3,ge-Ee,T,Pe)}function rc(T,R,$,re,ge){nA(T,R,$,re),ge&&nA(T,R+16,$,re+4)}function Ca(T,R,$,re){lc(T,R+0,$,re,1),lc(T,R+32,$,re+128,1)}function TA(T,R,$,re){var ge;for(T=T[R+0]+4,ge=0;4>ge;++ge)for(R=0;4>R;++R)la($,re,R,ge,T)}function Kn(T,R,$,re){T[R+0]&&si(T,R+0,$,re),T[R+16]&&si(T,R+16,$,re+4),T[R+32]&&si(T,R+32,$,re+128),T[R+48]&&si(T,R+48,$,re+128+4)}function Fl(T,R,$,re){var ge,we=f(16);for(ge=0;4>ge;++ge){var Ee=T[R+0+ge]+T[R+12+ge],Pe=T[R+4+ge]+T[R+8+ge],Re=T[R+4+ge]-T[R+8+ge],Ke=T[R+0+ge]-T[R+12+ge];we[0+ge]=Ee+Pe,we[8+ge]=Ee-Pe,we[4+ge]=Ke+Re,we[12+ge]=Ke-Re}for(ge=0;4>ge;++ge)Ee=(T=we[0+4*ge]+3)+we[3+4*ge],Pe=we[1+4*ge]+we[2+4*ge],Re=we[1+4*ge]-we[2+4*ge],Ke=T-we[3+4*ge],$[re+0]=Ee+Pe>>3,$[re+16]=Ke+Re>>3,$[re+32]=Ee-Pe>>3,$[re+48]=Ke-Re>>3,re+=64}function nc(T,R,$){var re,ge=R-32,we=lo,Ee=255-T[ge-1];for(re=0;re<$;++re){var Pe,Re=we,Ke=Ee+T[R-1];for(Pe=0;Pe<$;++Pe)T[R+Pe]=Re[Ke+T[ge+Pe]];R+=32}}function Il(T,R){nc(T,R,4)}function PA(T,R){nc(T,R,8)}function Ic(T,R){nc(T,R,16)}function ca(T,R){var $;for($=0;16>$;++$)a(T,R+32*$,T,R-32,16)}function Al(T,R){var $;for($=16;0<$;--$)u(T,R,T[R-1],16),R+=32}function an(T,R,$){var re;for(re=0;16>re;++re)u(R,$+32*re,T,16)}function Ea(T,R){var $,re=16;for($=0;16>$;++$)re+=T[R-1+32*$]+T[R+$-32];an(re>>5,T,R)}function zo(T,R){var $,re=8;for($=0;16>$;++$)re+=T[R-1+32*$];an(re>>4,T,R)}function Ho(T,R){var $,re=8;for($=0;16>$;++$)re+=T[R+$-32];an(re>>4,T,R)}function vs(T,R){an(128,T,R)}function qr(T,R,$){return T+2*R+$+2>>2}function Jn(T,R){var $,re=R-32;for(re=new Uint8Array([qr(T[re-1],T[re+0],T[re+1]),qr(T[re+0],T[re+1],T[re+2]),qr(T[re+1],T[re+2],T[re+3]),qr(T[re+2],T[re+3],T[re+4])]),$=0;4>$;++$)a(T,R+32*$,re,0,re.length)}function cn(T,R){var $=T[R-1],re=T[R-1+32],ge=T[R-1+64],we=T[R-1+96];Kt(T,R+0,16843009*qr(T[R-1-32],$,re)),Kt(T,R+32,16843009*qr($,re,ge)),Kt(T,R+64,16843009*qr(re,ge,we)),Kt(T,R+96,16843009*qr(ge,we,we))}function ii(T,R){var $,re=4;for($=0;4>$;++$)re+=T[R+$-32]+T[R-1+32*$];for(re>>=3,$=0;4>$;++$)u(T,R+32*$,re,4)}function _s(T,R){var $=T[R-1+0],re=T[R-1+32],ge=T[R-1+64],we=T[R-1-32],Ee=T[R+0-32],Pe=T[R+1-32],Re=T[R+2-32],Ke=T[R+3-32];T[R+0+96]=qr(re,ge,T[R-1+96]),T[R+1+96]=T[R+0+64]=qr($,re,ge),T[R+2+96]=T[R+1+64]=T[R+0+32]=qr(we,$,re),T[R+3+96]=T[R+2+64]=T[R+1+32]=T[R+0+0]=qr(Ee,we,$),T[R+3+64]=T[R+2+32]=T[R+1+0]=qr(Pe,Ee,we),T[R+3+32]=T[R+2+0]=qr(Re,Pe,Ee),T[R+3+0]=qr(Ke,Re,Pe)}function Wi(T,R){var $=T[R+1-32],re=T[R+2-32],ge=T[R+3-32],we=T[R+4-32],Ee=T[R+5-32],Pe=T[R+6-32],Re=T[R+7-32];T[R+0+0]=qr(T[R+0-32],$,re),T[R+1+0]=T[R+0+32]=qr($,re,ge),T[R+2+0]=T[R+1+32]=T[R+0+64]=qr(re,ge,we),T[R+3+0]=T[R+2+32]=T[R+1+64]=T[R+0+96]=qr(ge,we,Ee),T[R+3+32]=T[R+2+64]=T[R+1+96]=qr(we,Ee,Pe),T[R+3+64]=T[R+2+96]=qr(Ee,Pe,Re),T[R+3+96]=qr(Pe,Re,Re)}function uo(T,R){var $=T[R-1+0],re=T[R-1+32],ge=T[R-1+64],we=T[R-1-32],Ee=T[R+0-32],Pe=T[R+1-32],Re=T[R+2-32],Ke=T[R+3-32];T[R+0+0]=T[R+1+64]=we+Ee+1>>1,T[R+1+0]=T[R+2+64]=Ee+Pe+1>>1,T[R+2+0]=T[R+3+64]=Pe+Re+1>>1,T[R+3+0]=Re+Ke+1>>1,T[R+0+96]=qr(ge,re,$),T[R+0+64]=qr(re,$,we),T[R+0+32]=T[R+1+96]=qr($,we,Ee),T[R+1+32]=T[R+2+96]=qr(we,Ee,Pe),T[R+2+32]=T[R+3+96]=qr(Ee,Pe,Re),T[R+3+32]=qr(Pe,Re,Ke)}function ws(T,R){var $=T[R+0-32],re=T[R+1-32],ge=T[R+2-32],we=T[R+3-32],Ee=T[R+4-32],Pe=T[R+5-32],Re=T[R+6-32],Ke=T[R+7-32];T[R+0+0]=$+re+1>>1,T[R+1+0]=T[R+0+64]=re+ge+1>>1,T[R+2+0]=T[R+1+64]=ge+we+1>>1,T[R+3+0]=T[R+2+64]=we+Ee+1>>1,T[R+0+32]=qr($,re,ge),T[R+1+32]=T[R+0+96]=qr(re,ge,we),T[R+2+32]=T[R+1+96]=qr(ge,we,Ee),T[R+3+32]=T[R+2+96]=qr(we,Ee,Pe),T[R+3+64]=qr(Ee,Pe,Re),T[R+3+96]=qr(Pe,Re,Ke)}function Sa(T,R){var $=T[R-1+0],re=T[R-1+32],ge=T[R-1+64],we=T[R-1+96];T[R+0+0]=$+re+1>>1,T[R+2+0]=T[R+0+32]=re+ge+1>>1,T[R+2+32]=T[R+0+64]=ge+we+1>>1,T[R+1+0]=qr($,re,ge),T[R+3+0]=T[R+1+32]=qr(re,ge,we),T[R+3+32]=T[R+1+64]=qr(ge,we,we),T[R+3+64]=T[R+2+64]=T[R+0+96]=T[R+1+96]=T[R+2+96]=T[R+3+96]=we}function Fa(T,R){var $=T[R-1+0],re=T[R-1+32],ge=T[R-1+64],we=T[R-1+96],Ee=T[R-1-32],Pe=T[R+0-32],Re=T[R+1-32],Ke=T[R+2-32];T[R+0+0]=T[R+2+32]=$+Ee+1>>1,T[R+0+32]=T[R+2+64]=re+$+1>>1,T[R+0+64]=T[R+2+96]=ge+re+1>>1,T[R+0+96]=we+ge+1>>1,T[R+3+0]=qr(Pe,Re,Ke),T[R+2+0]=qr(Ee,Pe,Re),T[R+1+0]=T[R+3+32]=qr($,Ee,Pe),T[R+1+32]=T[R+3+64]=qr(re,$,Ee),T[R+1+64]=T[R+3+96]=qr(ge,re,$),T[R+1+96]=qr(we,ge,re)}function ti(T,R){var $;for($=0;8>$;++$)a(T,R+32*$,T,R-32,8)}function Aa(T,R){var $;for($=0;8>$;++$)u(T,R,T[R-1],8),R+=32}function Zi(T,R,$){var re;for(re=0;8>re;++re)u(R,$+32*re,T,8)}function ic(T,R){var $,re=8;for($=0;8>$;++$)re+=T[R+$-32]+T[R-1+32*$];Zi(re>>4,T,R)}function qs(T,R){var $,re=4;for($=0;8>$;++$)re+=T[R+$-32];Zi(re>>3,T,R)}function ul(T,R){var $,re=4;for($=0;8>$;++$)re+=T[R-1+32*$];Zi(re>>3,T,R)}function jo(T,R){Zi(128,T,R)}function ua(T,R,$){var re=T[R-$],ge=T[R+0],we=3*(ge-re)+So[1020+T[R-2*$]-T[R+$]],Ee=cA[112+(we+4>>3)];T[R-$]=lo[255+re+cA[112+(we+3>>3)]],T[R+0]=lo[255+ge-Ee]}function sc(T,R,$,re){var ge=T[R+0],we=T[R+$];return pn[255+T[R-2*$]-T[R-$]]>re||pn[255+we-ge]>re}function ha(T,R,$,re){return 4*pn[255+T[R-$]-T[R+0]]+pn[255+T[R-2*$]-T[R+$]]<=re}function Nn(T,R,$,re,ge){var we=T[R-3*$],Ee=T[R-2*$],Pe=T[R-$],Re=T[R+0],Ke=T[R+$],We=T[R+2*$],kt=T[R+3*$];return 4*pn[255+Pe-Re]+pn[255+Ee-Ke]>re?0:pn[255+T[R-4*$]-we]<=ge&&pn[255+we-Ee]<=ge&&pn[255+Ee-Pe]<=ge&&pn[255+kt-We]<=ge&&pn[255+We-Ke]<=ge&&pn[255+Ke-Re]<=ge}function Vo(T,R,$,re){var ge=2*re+1;for(re=0;16>re;++re)ha(T,R+re,$,ge)&&ua(T,R+re,$)}function En(T,R,$,re){var ge=2*re+1;for(re=0;16>re;++re)ha(T,R+re*$,1,ge)&&ua(T,R+re*$,1)}function mn(T,R,$,re){var ge;for(ge=3;0<ge;--ge)Vo(T,R+=4*$,$,re)}function Ia(T,R,$,re){var ge;for(ge=3;0<ge;--ge)En(T,R+=4,$,re)}function bn(T,R,$,re,ge,we,Ee,Pe){for(we=2*we+1;0<ge--;){if(Nn(T,R,$,we,Ee))if(sc(T,R,$,Pe))ua(T,R,$);else{var Re=T,Ke=R,We=$,kt=Re[Ke-2*We],Ye=Re[Ke-We],Bt=Re[Ke+0],Tt=Re[Ke+We],Zt=Re[Ke+2*We],Ut=27*(Wt=So[1020+3*(Bt-Ye)+So[1020+kt-Tt]])+63>>7,qt=18*Wt+63>>7,Wt=9*Wt+63>>7;Re[Ke-3*We]=lo[255+Re[Ke-3*We]+Wt],Re[Ke-2*We]=lo[255+kt+qt],Re[Ke-We]=lo[255+Ye+Ut],Re[Ke+0]=lo[255+Bt-Ut],Re[Ke+We]=lo[255+Tt-qt],Re[Ke+2*We]=lo[255+Zt-Wt]}R+=re}}function Go(T,R,$,re,ge,we,Ee,Pe){for(we=2*we+1;0<ge--;){if(Nn(T,R,$,we,Ee))if(sc(T,R,$,Pe))ua(T,R,$);else{var Re=T,Ke=R,We=$,kt=Re[Ke-We],Ye=Re[Ke+0],Bt=Re[Ke+We],Tt=cA[112+(4+(Zt=3*(Ye-kt))>>3)],Zt=cA[112+(Zt+3>>3)],Ut=Tt+1>>1;Re[Ke-2*We]=lo[255+Re[Ke-2*We]+Ut],Re[Ke-We]=lo[255+kt+Zt],Re[Ke+0]=lo[255+Ye-Tt],Re[Ke+We]=lo[255+Bt-Ut]}R+=re}}function Ei(T,R,$,re,ge,we){bn(T,R,$,1,16,re,ge,we)}function ao(T,R,$,re,ge,we){bn(T,R,1,$,16,re,ge,we)}function fa(T,R,$,re,ge,we){var Ee;for(Ee=3;0<Ee;--Ee)Go(T,R+=4*$,$,1,16,re,ge,we)}function V(T,R,$,re,ge,we){var Ee;for(Ee=3;0<Ee;--Ee)Go(T,R+=4,1,$,16,re,ge,we)}function ye(T,R,$,re,ge,we,Ee,Pe){bn(T,R,ge,1,8,we,Ee,Pe),bn($,re,ge,1,8,we,Ee,Pe)}function Je(T,R,$,re,ge,we,Ee,Pe){bn(T,R,1,ge,8,we,Ee,Pe),bn($,re,1,ge,8,we,Ee,Pe)}function gt(T,R,$,re,ge,we,Ee,Pe){Go(T,R+4*ge,ge,1,8,we,Ee,Pe),Go($,re+4*ge,ge,1,8,we,Ee,Pe)}function It(T,R,$,re,ge,we,Ee,Pe){Go(T,R+4,1,ge,8,we,Ee,Pe),Go($,re+4,1,ge,8,we,Ee,Pe)}function Gt(){this.ba=new Tr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function br(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vr(){this.ua=0,this.Wa=new Ur,this.vb=new Ur,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new pt,this.yc=new Ue}function gn(){this.xb=this.a=0,this.l=new Ba,this.ca=new Tr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ce,this.Pb=0,this.wd=new Ce,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vr,this.ab=0,this.gc=m(4,br),this.Oc=0}function yn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ba,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function An(T,R,$,re,ge,we,Ee){for(T=T==null?0:T[R+0],R=0;R<Ee;++R)ge[we+R]=T+$[re+R]&255,T=ge[we+R]}function ji(T,R,$,re,ge,we,Ee){var Pe;if(T==null)An(null,null,$,re,ge,we,Ee);else for(Pe=0;Pe<Ee;++Pe)ge[we+Pe]=T[R+Pe]+$[re+Pe]&255}function is(T,R,$,re,ge,we,Ee){if(T==null)An(null,null,$,re,ge,we,Ee);else{var Pe,Re=T[R+0],Ke=Re,We=Re;for(Pe=0;Pe<Ee;++Pe)Ke=We+(Re=T[R+Pe])-Ke,We=$[re+Pe]+(-256&Ke?0>Ke?0:255:Ke)&255,Ke=Re,ge[we+Pe]=We}}function Si(T,R,$,re){var ge=R.width,we=R.o;if(n(T!=null&&R!=null),0>$||0>=re||$+re>we)return null;if(!T.Cc){if(T.ga==null){var Ee;if(T.ga=new yn,(Ee=T.ga==null)||(Ee=R.width*R.o,n(T.Gb.length==0),T.Gb=f(Ee),T.Uc=0,T.Gb==null?Ee=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,Ee=1),Ee=!Ee),!Ee){Ee=T.ga;var Pe=T.Fa,Re=T.P,Ke=T.qc,We=T.mb,kt=T.nb,Ye=Re+1,Bt=Ke-1,Tt=Ee.l;if(n(Pe!=null&&We!=null&&R!=null),Rs[0]=null,Rs[1]=An,Rs[2]=ji,Rs[3]=is,Ee.ca=We,Ee.tb=kt,Ee.c=R.width,Ee.i=R.height,n(0<Ee.c&&0<Ee.i),1>=Ke)R=0;else if(Ee.$a=3&Pe[Re+0],Ee.Z=Pe[Re+0]>>2&3,Ee.Lc=Pe[Re+0]>>4&3,Re=Pe[Re+0]>>6&3,0>Ee.$a||1<Ee.$a||4<=Ee.Z||1<Ee.Lc||Re)R=0;else if(Tt.put=wr,Tt.ac=Dn,Tt.bc=Tn,Tt.ma=Ee,Tt.width=R.width,Tt.height=R.height,Tt.Da=R.Da,Tt.v=R.v,Tt.va=R.va,Tt.j=R.j,Tt.o=R.o,Ee.$a)e:{n(Ee.$a==1),R=El();t:for(;;){if(R==null){R=0;break e}if(n(Ee!=null),Ee.mc=R,R.c=Ee.c,R.i=Ee.i,R.l=Ee.l,R.l.ma=Ee,R.l.width=Ee.c,R.l.height=Ee.i,R.a=0,Te(R.m,Pe,Ye,Bt),!ks(Ee.c,Ee.i,1,R,null)||(R.ab==1&&R.gc[0].hc==3&&ns(R.s)?(Ee.ic=1,Pe=R.c*R.i,R.Ta=null,R.Ua=0,R.V=f(Pe),R.Ba=0,R.V==null?(R.a=1,R=0):R=1):(Ee.ic=0,R=fn(R,Ee.c)),!R))break t;R=1;break e}Ee.mc=null,R=0}else R=Bt>=Ee.c*Ee.i;Ee=!R}if(Ee)return null;T.ga.Lc!=1?T.Ga=0:re=we-$}n(T.ga!=null),n($+re<=we);e:{if(R=(Pe=T.ga).c,we=Pe.l.o,Pe.$a==0){if(Ye=T.rc,Bt=T.Vc,Tt=T.Fa,Re=T.P+1+$*R,Ke=T.mb,We=T.nb+$*R,n(Re<=T.P+T.qc),Pe.Z!=0)for(n(Rs[Pe.Z]!=null),Ee=0;Ee<re;++Ee)Rs[Pe.Z](Ye,Bt,Tt,Re,Ke,We,R),Ye=Ke,Bt=We,We+=R,Re+=R;else for(Ee=0;Ee<re;++Ee)a(Ke,We,Tt,Re,R),Ye=Ke,Bt=We,We+=R,Re+=R;T.rc=Ye,T.Vc=Bt}else{if(n(Pe.mc!=null),R=$+re,n((Ee=Pe.mc)!=null),n(R<=Ee.i),Ee.C>=R)R=1;else if(Pe.ic||da(),Pe.ic){Pe=Ee.V,Ye=Ee.Ba,Bt=Ee.c;var Zt=Ee.i,Ut=(Tt=1,Re=Ee.$/Bt,Ke=Ee.$%Bt,We=Ee.m,kt=Ee.s,Ee.$),qt=Bt*Zt,Wt=Bt*R,tr=kt.wc,er=Ut<Wt?Zn(kt,Ke,Re):null;n(Ut<=qt),n(R<=Zt),n(ns(kt));t:for(;;){for(;!We.h&&Ut<Wt;){if(Ke&tr||(er=Zn(kt,Ke,Re)),n(er!=null),et(We),256>(Zt=ai(er.G[0],er.H[0],We)))Pe[Ye+Ut]=Zt,++Ut,++Ke>=Bt&&(Ke=0,++Re<=R&&!(Re%16)&&nn(Ee,Re));else{if(!(280>Zt)){Tt=0;break t}Zt=xn(Zt-256,We);var sn,zr=ai(er.G[4],er.H[4],We);if(et(We),!(Ut>=(zr=Di(Bt,zr=xn(zr,We)))&&qt-Ut>=Zt)){Tt=0;break t}for(sn=0;sn<Zt;++sn)Pe[Ye+Ut+sn]=Pe[Ye+Ut+sn-zr];for(Ut+=Zt,Ke+=Zt;Ke>=Bt;)Ke-=Bt,++Re<=R&&!(Re%16)&&nn(Ee,Re);Ut<Wt&&Ke&tr&&(er=Zn(kt,Ke,Re))}n(We.h==qe(We))}nn(Ee,Re>R?R:Re);break t}!Tt||We.h&&Ut<qt?(Tt=0,Ee.a=We.h?5:3):Ee.$=Ut,R=Tt}else R=un(Ee,Ee.V,Ee.Ba,Ee.c,Ee.i,R,ol);if(!R){re=0;break e}}$+re>=we&&(T.Cc=1),re=1}if(!re)return null;if(T.Cc&&((re=T.ga)!=null&&(re.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+$*ge}function Ds(T,R,$,re,ge,we){for(;0<ge--;){var Ee,Pe=T,Re=R+($?1:0),Ke=T,We=R+($?0:3);for(Ee=0;Ee<re;++Ee){var kt=Ke[We+4*Ee];kt!=255&&(kt*=32897,Pe[Re+4*Ee+0]=Pe[Re+4*Ee+0]*kt>>23,Pe[Re+4*Ee+1]=Pe[Re+4*Ee+1]*kt>>23,Pe[Re+4*Ee+2]=Pe[Re+4*Ee+2]*kt>>23)}R+=we}}function Mi(T,R,$,re,ge){for(;0<re--;){var we;for(we=0;we<$;++we){var Ee=T[R+2*we+0],Pe=15&(Ke=T[R+2*we+1]),Re=4369*Pe,Ke=(240&Ke|Ke>>4)*Re>>16;T[R+2*we+0]=(240&Ee|Ee>>4)*Re>>16&240|(15&Ee|Ee<<4)*Re>>16>>4&15,T[R+2*we+1]=240&Ke|Pe}R+=ge}}function xs(T,R,$,re,ge,we,Ee,Pe){var Re,Ke,We=255;for(Ke=0;Ke<ge;++Ke){for(Re=0;Re<re;++Re){var kt=T[R+Re];we[Ee+4*Re]=kt,We&=kt}R+=$,Ee+=Pe}return We!=255}function Ko(T,R,$,re,ge){var we;for(we=0;we<ge;++we)$[re+we]=T[R+we]>>8}function da(){Dc=Ds,au=Mi,yl=xs,kA=Ko}function pa(T,R,$){be[T]=function(re,ge,we,Ee,Pe,Re,Ke,We,kt,Ye,Bt,Tt,Zt,Ut,qt,Wt,tr){var er,sn=tr-1>>1,zr=Pe[Re+0]|Ke[We+0]<<16,Cn=kt[Ye+0]|Bt[Tt+0]<<16;n(re!=null);var Zr=3*zr+Cn+131074>>2;for(R(re[ge+0],255&Zr,Zr>>16,Zt,Ut),we!=null&&(Zr=3*Cn+zr+131074>>2,R(we[Ee+0],255&Zr,Zr>>16,qt,Wt)),er=1;er<=sn;++er){var Qn=Pe[Re+er]|Ke[We+er]<<16,Ni=kt[Ye+er]|Bt[Tt+er]<<16,Sn=zr+Qn+Cn+Ni+524296,Hr=Sn+2*(Qn+Cn)>>3;Zr=Hr+zr>>1,zr=(Sn=Sn+2*(zr+Ni)>>3)+Qn>>1,R(re[ge+2*er-1],255&Zr,Zr>>16,Zt,Ut+(2*er-1)*$),R(re[ge+2*er-0],255&zr,zr>>16,Zt,Ut+(2*er-0)*$),we!=null&&(Zr=Sn+Cn>>1,zr=Hr+Ni>>1,R(we[Ee+2*er-1],255&Zr,Zr>>16,qt,Wt+(2*er-1)*$),R(we[Ee+2*er+0],255&zr,zr>>16,qt,Wt+(2*er+0)*$)),zr=Qn,Cn=Ni}1&tr||(Zr=3*zr+Cn+131074>>2,R(re[ge+tr-1],255&Zr,Zr>>16,Zt,Ut+(tr-1)*$),we!=null&&(Zr=3*Cn+zr+131074>>2,R(we[Ee+tr-1],255&Zr,Zr>>16,qt,Wt+(tr-1)*$)))}}function Ta(){Zs[AA]=Nu,Zs[Nc]=Da,Zs[ch]=Hc,Zs[Ac]=Ra,Zs[lu]=Na,Zs[Ii]=HA,Zs[cu]=Qu,Zs[RA]=Da,Zs[uc]=Ra,Zs[Ql]=Na,Zs[Qc]=HA}function hl(T){return T&-16384?0>T?0:255:T>>zl}function Fi(T,R){return hl((19077*T>>8)+(26149*R>>8)-14234)}function Tc(T,R,$){return hl((19077*T>>8)-(6419*R>>8)-(13320*$>>8)+8708)}function ma(T,R){return hl((19077*T>>8)+(33050*R>>8)-17685)}function Pa(T,R,$,re,ge){re[ge+0]=Fi(T,$),re[ge+1]=Tc(T,R,$),re[ge+2]=ma(T,R)}function Xi(T,R,$,re,ge){re[ge+0]=ma(T,R),re[ge+1]=Tc(T,R,$),re[ge+2]=Fi(T,$)}function sA(T,R,$,re,ge){var we=Tc(T,R,$);R=we<<3&224|ma(T,R)>>3,re[ge+0]=248&Fi(T,$)|we>>5,re[ge+1]=R}function Tl(T,R,$,re,ge){var we=240&ma(T,R)|15;re[ge+0]=240&Fi(T,$)|Tc(T,R,$)>>4,re[ge+1]=we}function ou(T,R,$,re,ge){re[ge+0]=255,Pa(T,R,$,re,ge+1)}function Pl(T,R,$,re,ge){Xi(T,R,$,re,ge),re[ge+3]=255}function $s(T,R,$,re,ge){Pa(T,R,$,re,ge),re[ge+3]=255}function La(T,R,$){be[T]=function(re,ge,we,Ee,Pe,Re,Ke,We,kt){for(var Ye=We+(-2&kt)*$;We!=Ye;)R(re[ge+0],we[Ee+0],Pe[Re+0],Ke,We),R(re[ge+1],we[Ee+0],Pe[Re+0],Ke,We+$),ge+=2,++Ee,++Re,We+=2*$;1&kt&&R(re[ge+0],we[Ee+0],Pe[Re+0],Ke,We)}}function fl(T,R,$){return $==0?T==0?R==0?6:5:R==0?4:0:$}function LA(T,R,$,re,ge){switch(T>>>30){case 3:lc(R,$,re,ge,0);break;case 2:os(R,$,re,ge);break;case 1:si(R,$,re,ge)}}function Bo(T,R){var $,re,ge=R.M,we=R.Nb,Ee=T.oc,Pe=T.pc+40,Re=T.oc,Ke=T.pc+584,We=T.oc,kt=T.pc+600;for($=0;16>$;++$)Ee[Pe+32*$-1]=129;for($=0;8>$;++$)Re[Ke+32*$-1]=129,We[kt+32*$-1]=129;for(0<ge?Ee[Pe-1-32]=Re[Ke-1-32]=We[kt-1-32]=129:(u(Ee,Pe-32-1,127,21),u(Re,Ke-32-1,127,9),u(We,kt-32-1,127,9)),re=0;re<T.za;++re){var Ye=R.ya[R.aa+re];if(0<re){for($=-1;16>$;++$)a(Ee,Pe+32*$-4,Ee,Pe+32*$+12,4);for($=-1;8>$;++$)a(Re,Ke+32*$-4,Re,Ke+32*$+4,4),a(We,kt+32*$-4,We,kt+32*$+4,4)}var Bt=T.Gd,Tt=T.Hd+re,Zt=Ye.ad,Ut=Ye.Hc;if(0<ge&&(a(Ee,Pe-32,Bt[Tt].y,0,16),a(Re,Ke-32,Bt[Tt].f,0,8),a(We,kt-32,Bt[Tt].ea,0,8)),Ye.Za){var qt=Ee,Wt=Pe-32+16;for(0<ge&&(re>=T.za-1?u(qt,Wt,Bt[Tt].y[15],4):a(qt,Wt,Bt[Tt+1].y,0,4)),$=0;4>$;$++)qt[Wt+128+$]=qt[Wt+256+$]=qt[Wt+384+$]=qt[Wt+0+$];for($=0;16>$;++$,Ut<<=2)qt=Ee,Wt=Pe+dA[$],va[Ye.Ob[$]](qt,Wt),LA(Ut,Zt,16*+$,qt,Wt)}else if(qt=fl(re,ge,Ye.Ob[0]),po[qt](Ee,Pe),Ut!=0)for($=0;16>$;++$,Ut<<=2)LA(Ut,Zt,16*+$,Ee,Pe+dA[$]);for($=Ye.Gc,qt=fl(re,ge,Ye.Dd),$n[qt](Re,Ke),$n[qt](We,kt),Ut=Zt,qt=Re,Wt=Ke,255&(Ye=0|$)&&(170&Ye?Eo(Ut,256,qt,Wt):_i(Ut,256,qt,Wt)),Ye=We,Ut=kt,255&($>>=8)&&(170&$?Eo(Zt,320,Ye,Ut):_i(Zt,320,Ye,Ut)),ge<T.Ub-1&&(a(Bt[Tt].y,0,Ee,Pe+480,16),a(Bt[Tt].f,0,Re,Ke+224,8),a(Bt[Tt].ea,0,We,kt+224,8)),$=8*we*T.B,Bt=T.sa,Tt=T.ta+16*re+16*we*T.R,Zt=T.qa,Ye=T.ra+8*re+$,Ut=T.Ha,qt=T.Ia+8*re+$,$=0;16>$;++$)a(Bt,Tt+$*T.R,Ee,Pe+32*$,16);for($=0;8>$;++$)a(Zt,Ye+$*T.B,Re,Ke+32*$,8),a(Ut,qt+$*T.B,We,kt+32*$,8)}}function Ll(T,R,$,re,ge,we,Ee,Pe,Re){var Ke=[0],We=[0],kt=0,Ye=Re!=null?Re.kd:0,Bt=Re??new sr;if(T==null||12>$)return 7;Bt.data=T,Bt.w=R,Bt.ha=$,R=[R],$=[$],Bt.gb=[Bt.gb];e:{var Tt=R,Zt=$,Ut=Bt.gb;if(n(T!=null),n(Zt!=null),n(Ut!=null),Ut[0]=0,12<=Zt[0]&&!i(T,Tt[0],"RIFF")){if(i(T,Tt[0]+8,"WEBP")){Ut=3;break e}var qt=Cr(T,Tt[0]+4);if(12>qt||4294967286<qt){Ut=3;break e}if(Ye&&qt>Zt[0]-8){Ut=7;break e}Ut[0]=qt,Tt[0]+=12,Zt[0]-=12}Ut=0}if(Ut!=0)return Ut;for(qt=0<Bt.gb[0],$=$[0];;){e:{var Wt=T;Zt=R,Ut=$;var tr=Ke,er=We,sn=Tt=[0];if((Zr=kt=[kt])[0]=0,8>Ut[0])Ut=7;else{if(!i(Wt,Zt[0],"VP8X")){if(Cr(Wt,Zt[0]+4)!=10){Ut=3;break e}if(18>Ut[0]){Ut=7;break e}var zr=Cr(Wt,Zt[0]+8),Cn=1+hr(Wt,Zt[0]+12);if(2147483648<=Cn*(Wt=1+hr(Wt,Zt[0]+15))){Ut=3;break e}sn!=null&&(sn[0]=zr),tr!=null&&(tr[0]=Cn),er!=null&&(er[0]=Wt),Zt[0]+=18,Ut[0]-=18,Zr[0]=1}Ut=0}}if(kt=kt[0],Tt=Tt[0],Ut!=0)return Ut;if(Zt=!!(2&Tt),!qt&&kt)return 3;if(we!=null&&(we[0]=!!(16&Tt)),Ee!=null&&(Ee[0]=Zt),Pe!=null&&(Pe[0]=0),Ee=Ke[0],Tt=We[0],kt&&Zt&&Re==null){Ut=0;break}if(4>$){Ut=7;break}if(qt&&kt||!qt&&!kt&&!i(T,R[0],"ALPH")){$=[$],Bt.na=[Bt.na],Bt.P=[Bt.P],Bt.Sa=[Bt.Sa];e:{zr=T,Ut=R,qt=$;var Zr=Bt.gb;tr=Bt.na,er=Bt.P,sn=Bt.Sa,Cn=22,n(zr!=null),n(qt!=null),Wt=Ut[0];var Qn=qt[0];for(n(tr!=null),n(sn!=null),tr[0]=null,er[0]=null,sn[0]=0;;){if(Ut[0]=Wt,qt[0]=Qn,8>Qn){Ut=7;break e}var Ni=Cr(zr,Wt+4);if(4294967286<Ni){Ut=3;break e}var Sn=8+Ni+1&-2;if(Cn+=Sn,0<Zr&&Cn>Zr){Ut=3;break e}if(!i(zr,Wt,"VP8 ")||!i(zr,Wt,"VP8L")){Ut=0;break e}if(Qn[0]<Sn){Ut=7;break e}i(zr,Wt,"ALPH")||(tr[0]=zr,er[0]=Wt+8,sn[0]=Ni),Wt+=Sn,Qn-=Sn}}if($=$[0],Bt.na=Bt.na[0],Bt.P=Bt.P[0],Bt.Sa=Bt.Sa[0],Ut!=0)break}$=[$],Bt.Ja=[Bt.Ja],Bt.xa=[Bt.xa];e:if(Zr=T,Ut=R,qt=$,tr=Bt.gb[0],er=Bt.Ja,sn=Bt.xa,zr=Ut[0],Wt=!i(Zr,zr,"VP8 "),Cn=!i(Zr,zr,"VP8L"),n(Zr!=null),n(qt!=null),n(er!=null),n(sn!=null),8>qt[0])Ut=7;else{if(Wt||Cn){if(Zr=Cr(Zr,zr+4),12<=tr&&Zr>tr-12){Ut=3;break e}if(Ye&&Zr>qt[0]-8){Ut=7;break e}er[0]=Zr,Ut[0]+=8,qt[0]-=8,sn[0]=Cn}else sn[0]=5<=qt[0]&&Zr[zr+0]==47&&!(Zr[zr+4]>>5),er[0]=qt[0];Ut=0}if($=$[0],Bt.Ja=Bt.Ja[0],Bt.xa=Bt.xa[0],R=R[0],Ut!=0)break;if(4294967286<Bt.Ja)return 3;if(Pe==null||Zt||(Pe[0]=Bt.xa?2:1),Ee=[Ee],Tt=[Tt],Bt.xa){if(5>$){Ut=7;break}Pe=Ee,Ye=Tt,Zt=we,T==null||5>$?T=0:5<=$&&T[R+0]==47&&!(T[R+4]>>5)?(qt=[0],Zr=[0],tr=[0],Te(er=new Ce,T,R,$),Bn(er,qt,Zr,tr)?(Pe!=null&&(Pe[0]=qt[0]),Ye!=null&&(Ye[0]=Zr[0]),Zt!=null&&(Zt[0]=tr[0]),T=1):T=0):T=0}else{if(10>$){Ut=7;break}Pe=Tt,T==null||10>$||!Sc(T,R+3,$-3)?T=0:(Ye=T[R+0]|T[R+1]<<8|T[R+2]<<16,Zt=16383&(T[R+7]<<8|T[R+6]),T=16383&(T[R+9]<<8|T[R+8]),1&Ye||3<(Ye>>1&7)||!(Ye>>4&1)||Ye>>5>=Bt.Ja||!Zt||!T?T=0:(Ee&&(Ee[0]=Zt),Pe&&(Pe[0]=T),T=1))}if(!T||(Ee=Ee[0],Tt=Tt[0],kt&&(Ke[0]!=Ee||We[0]!=Tt)))return 3;Re!=null&&(Re[0]=Bt,Re.offset=R-Re.w,n(4294967286>R-Re.w),n(Re.offset==Re.ha-$));break}return Ut==0||Ut==7&&kt&&Re==null?(we!=null&&(we[0]|=Bt.na!=null&&0<Bt.na.length),re!=null&&(re[0]=Ee),ge!=null&&(ge[0]=Tt),0):Ut}function oA(T,R,$){var re=R.width,ge=R.height,we=0,Ee=0,Pe=re,Re=ge;if(R.Da=T!=null&&0<T.Da,R.Da&&(Pe=T.cd,Re=T.bd,we=T.v,Ee=T.j,11>$||(we&=-2,Ee&=-2),0>we||0>Ee||0>=Pe||0>=Re||we+Pe>re||Ee+Re>ge))return 0;if(R.v=we,R.j=Ee,R.va=we+Pe,R.o=Ee+Re,R.U=Pe,R.T=Re,R.da=T!=null&&0<T.da,R.da){if(!$r(Pe,Re,$=[T.ib],we=[T.hb]))return 0;R.ib=$[0],R.hb=we[0]}return R.ob=T!=null&&T.ob,R.Kb=T==null||!T.Sd,R.da&&(R.ob=R.ib<3*re/4&&R.hb<3*ge/4,R.Kb=0),1}function aA(T){if(T==null)return 2;if(11>T.S){var R=T.f.RGBA;R.fb+=(T.height-1)*R.A,R.A=-R.A}else R=T.f.kb,T=T.height,R.O+=(T-1)*R.fa,R.fa=-R.fa,R.N+=(T-1>>1)*R.Ab,R.Ab=-R.Ab,R.W+=(T-1>>1)*R.Db,R.Db=-R.Db,R.F!=null&&(R.J+=(T-1)*R.lb,R.lb=-R.lb);return 0}function Ml(T,R,$,re){if(re==null||0>=T||0>=R)return 2;if($!=null){if($.Da){var ge=$.cd,we=$.bd,Ee=-2&$.v,Pe=-2&$.j;if(0>Ee||0>Pe||0>=ge||0>=we||Ee+ge>T||Pe+we>R)return 2;T=ge,R=we}if($.da){if(!$r(T,R,ge=[$.ib],we=[$.hb]))return 2;T=ge[0],R=we[0]}}re.width=T,re.height=R;e:{var Re=re.width,Ke=re.height;if(T=re.S,0>=Re||0>=Ke||!(T>=AA&&13>T))T=2;else{if(0>=re.Rd&&re.sd==null){Ee=we=ge=R=0;var We=(Pe=Re*jA[T])*Ke;if(11>T||(we=(Ke+1)/2*(R=(Re+1)/2),T==12&&(Ee=(ge=Re)*Ke)),(Ke=f(We+2*we+Ee))==null){T=1;break e}re.sd=Ke,11>T?((Re=re.f.RGBA).eb=Ke,Re.fb=0,Re.A=Pe,Re.size=We):((Re=re.f.kb).y=Ke,Re.O=0,Re.fa=Pe,Re.Fd=We,Re.f=Ke,Re.N=0+We,Re.Ab=R,Re.Cd=we,Re.ea=Ke,Re.W=0+We+we,Re.Db=R,Re.Ed=we,T==12&&(Re.F=Ke,Re.J=0+We+2*we),Re.Tc=Ee,Re.lb=ge)}if(R=1,ge=re.S,we=re.width,Ee=re.height,ge>=AA&&13>ge)if(11>ge)T=re.f.RGBA,R&=(Pe=Math.abs(T.A))*(Ee-1)+we<=T.size,R&=Pe>=we*jA[ge],R&=T.eb!=null;else{T=re.f.kb,Pe=(we+1)/2,We=(Ee+1)/2,Re=Math.abs(T.fa),Ke=Math.abs(T.Ab);var kt=Math.abs(T.Db),Ye=Math.abs(T.lb),Bt=Ye*(Ee-1)+we;R&=Re*(Ee-1)+we<=T.Fd,R&=Ke*(We-1)+Pe<=T.Cd,R=(R&=kt*(We-1)+Pe<=T.Ed)&Re>=we&Ke>=Pe&kt>=Pe,R&=T.y!=null,R&=T.f!=null,R&=T.ea!=null,ge==12&&(R&=Ye>=we,R&=Bt<=T.Tc,R&=T.F!=null)}else R=0;T=R?0:2}}return T!=0||$!=null&&$.fd&&(T=aA(re)),T}var Ws=64,qo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Co=24,ga=32,dl=8,Ma=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Sr("Predictor0","PredictorAdd0"),be.Predictor0=function(){return 4278190080},be.Predictor1=function(T){return T},be.Predictor2=function(T,R,$){return R[$+0]},be.Predictor3=function(T,R,$){return R[$+1]},be.Predictor4=function(T,R,$){return R[$-1]},be.Predictor5=function(T,R,$){return Rr(Rr(T,R[$+1]),R[$+0])},be.Predictor6=function(T,R,$){return Rr(T,R[$-1])},be.Predictor7=function(T,R,$){return Rr(T,R[$+0])},be.Predictor8=function(T,R,$){return Rr(R[$-1],R[$+0])},be.Predictor9=function(T,R,$){return Rr(R[$+0],R[$+1])},be.Predictor10=function(T,R,$){return Rr(Rr(T,R[$-1]),Rr(R[$+0],R[$+1]))},be.Predictor11=function(T,R,$){var re=R[$+0];return 0>=dt(re>>24&255,T>>24&255,(R=R[$-1])>>24&255)+dt(re>>16&255,T>>16&255,R>>16&255)+dt(re>>8&255,T>>8&255,R>>8&255)+dt(255&re,255&T,255&R)?re:T},be.Predictor12=function(T,R,$){var re=R[$+0];return(On((T>>24&255)+(re>>24&255)-((R=R[$-1])>>24&255))<<24|On((T>>16&255)+(re>>16&255)-(R>>16&255))<<16|On((T>>8&255)+(re>>8&255)-(R>>8&255))<<8|On((255&T)+(255&re)-(255&R)))>>>0},be.Predictor13=function(T,R,$){var re=R[$-1];return(hn((T=Rr(T,R[$+0]))>>24&255,re>>24&255)<<24|hn(T>>16&255,re>>16&255)<<16|hn(T>>8&255,re>>8&255)<<8|hn(255&T,255&re))>>>0};var oc=be.PredictorAdd0;be.PredictorAdd1=de,Sr("Predictor2","PredictorAdd2"),Sr("Predictor3","PredictorAdd3"),Sr("Predictor4","PredictorAdd4"),Sr("Predictor5","PredictorAdd5"),Sr("Predictor6","PredictorAdd6"),Sr("Predictor7","PredictorAdd7"),Sr("Predictor8","PredictorAdd8"),Sr("Predictor9","PredictorAdd9"),Sr("Predictor10","PredictorAdd10"),Sr("Predictor11","PredictorAdd11"),Sr("Predictor12","PredictorAdd12"),Sr("Predictor13","PredictorAdd13");var kl=be.PredictorAdd2;Ze("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Ze("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var ss,pl=be.ColorIndexInverseTransform,ml=be.MapARGB,ya=be.VP8LColorIndexInverseTransformAlpha,Pc=be.MapAlpha,Ul=be.VP8LPredictorsAdd=[];Ul.length=16,(be.VP8LPredictors=[]).length=16,(be.VP8LPredictorsAdd_C=[]).length=16,(be.VP8LPredictors_C=[]).length=16;var ho,ac,gl,Dl,Rl,Nl,$o,lc,os,Eo,si,_i,Yi,bs,Pn,Lc,cc,ka,MA,Ua,Mc,kc,fo,Uc,Dc,au,yl,kA,UA=f(511),lA=f(2041),DA=f(225),Uu=f(767),Rc=0,So=lA,cA=DA,lo=Uu,pn=UA,AA=0,Nc=1,ch=2,Ac=3,lu=4,Ii=5,cu=6,RA=7,uc=8,Ql=9,Qc=10,Oc=[2,3,7],NA=[3,3,11],hc=[280,256,256,256,40],Au=[0,1,1,1,0],Du=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],zc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],QA=8,OA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],fc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hA=null,Ru=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ah=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],jh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],zA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],po=[],va=[],$n=[],mo=1,co=2,Rs=[],Zs=[];pa("UpsampleRgbLinePair",Pa,3),pa("UpsampleBgrLinePair",Xi,3),pa("UpsampleRgbaLinePair",$s,4),pa("UpsampleBgraLinePair",Pl,4),pa("UpsampleArgbLinePair",ou,4),pa("UpsampleRgba4444LinePair",Tl,2),pa("UpsampleRgb565LinePair",sA,2);var Nu=be.UpsampleRgbLinePair,Hc=be.UpsampleBgrLinePair,Da=be.UpsampleRgbaLinePair,Ra=be.UpsampleBgraLinePair,Na=be.UpsampleArgbLinePair,HA=be.UpsampleRgba4444LinePair,Qu=be.UpsampleRgb565LinePair,Ol=16,Qa=1<<Ol-1,li=-227,Xn=482,zl=6,Ns=0,Xs=f(256),jc=f(256),Vc=f(256),go=f(256),fu=f(Xn-li),Ou=f(Xn-li);La("YuvToRgbRow",Pa,3),La("YuvToBgrRow",Xi,3),La("YuvToRgbaRow",$s,4),La("YuvToBgraRow",Pl,4),La("YuvToArgbRow",ou,4),La("YuvToRgba4444Row",Tl,2),La("YuvToRgb565Row",sA,2);var dA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Oa=[0,2,8],_a=[8,7,6,4,4,2,2,2,1,1,1,1],Qs=1;this.WebPDecodeRGBA=function(T,R,$,re,ge){var we=Nc,Ee=new Gt,Pe=new Tr;Ee.ba=Pe,Pe.S=we,Pe.width=[Pe.width],Pe.height=[Pe.height];var Re=Pe.width,Ke=Pe.height,We=new mt;if(We==null||T==null)var kt=2;else n(We!=null),kt=Ll(T,R,$,We.width,We.height,We.Pd,We.Qd,We.format,null);if(kt!=0?Re=0:(Re!=null&&(Re[0]=We.width[0]),Ke!=null&&(Ke[0]=We.height[0]),Re=1),Re){Pe.width=Pe.width[0],Pe.height=Pe.height[0],re!=null&&(re[0]=Pe.width),ge!=null&&(ge[0]=Pe.height);e:{if(re=new Ba,(ge=new sr).data=T,ge.w=R,ge.ha=$,ge.kd=1,R=[0],n(ge!=null),((T=Ll(ge.data,ge.w,ge.ha,null,null,null,R,null,ge))==0||T==7)&&R[0]&&(T=4),(R=T)==0){if(n(Ee!=null),re.data=ge.data,re.w=ge.w+ge.offset,re.ha=ge.ha-ge.offset,re.put=wr,re.ac=Dn,re.bc=Tn,re.ma=Ee,ge.xa){if((T=El())==null){Ee=1;break e}if((function(Ye,Bt){var Tt=[0],Zt=[0],Ut=[0];t:for(;;){if(Ye==null)return 0;if(Bt==null)return Ye.a=2,0;if(Ye.l=Bt,Ye.a=0,Te(Ye.m,Bt.data,Bt.w,Bt.ha),!Bn(Ye.m,Tt,Zt,Ut)){Ye.a=3;break t}if(Ye.xb=co,Bt.width=Tt[0],Bt.height=Zt[0],!ks(Tt[0],Zt[0],1,Ye,null))break t;return 1}return n(Ye.a!=0),0})(T,re)){if(re=(R=Ml(re.width,re.height,Ee.Oa,Ee.ba))==0){t:{re=T;r:for(;;){if(re==null){re=0;break t}if(n(re.s.yc!=null),n(re.s.Ya!=null),n(0<re.s.Wb),n(($=re.l)!=null),n((ge=$.ma)!=null),re.xb!=0){if(re.ca=ge.ba,re.tb=ge.tb,n(re.ca!=null),!oA(ge.Oa,$,Ac)){re.a=2;break r}if(!fn(re,$.width)||$.da)break r;if(($.da||Jt(re.ca.S))&&da(),11>re.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),re.ca.f.kb.F!=null&&da()),re.Pb&&0<re.s.ua&&re.s.vb.X==null&&!je(re.s.vb,re.s.Wa.Xa)){re.a=1;break r}re.xb=0}if(!un(re,re.V,re.Ba,re.c,re.i,$.o,sl))break r;ge.Dc=re.Ma,re=1;break t}n(re.a!=0),re=0}re=!re}re&&(R=T.a)}else R=T.a}else{if((T=new IA)==null){Ee=1;break e}if(T.Fa=ge.na,T.P=ge.P,T.qc=ge.Sa,No(T,re)){if((R=Ml(re.width,re.height,Ee.Oa,Ee.ba))==0){if(T.Aa=0,$=Ee.Oa,n((ge=T)!=null),$!=null){if(0<(Re=0>(Re=$.Md)?0:100<Re?255:255*Re/100)){for(Ke=We=0;4>Ke;++Ke)12>(kt=ge.pb[Ke]).lc&&(kt.ia=Re*_a[0>kt.lc?0:kt.lc]>>3),We|=kt.ia;We&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=$.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}(function(Ye,Bt){if(Ye==null)return 0;if(Bt==null)return Mn(Ye,2,"NULL VP8Io parameter in VP8Decode().");if(!Ye.cb&&!No(Ye,Bt))return 0;if(n(Ye.cb),Bt.ac==null||Bt.ac(Bt)){Bt.ob&&(Ye.L=0);var Tt=Oa[Ye.L];if(Ye.L==2?(Ye.yb=0,Ye.zb=0):(Ye.yb=Bt.v-Tt>>4,Ye.zb=Bt.j-Tt>>4,0>Ye.yb&&(Ye.yb=0),0>Ye.zb&&(Ye.zb=0)),Ye.Va=Bt.o+15+Tt>>4,Ye.Hb=Bt.va+15+Tt>>4,Ye.Hb>Ye.za&&(Ye.Hb=Ye.za),Ye.Va>Ye.Ub&&(Ye.Va=Ye.Ub),0<Ye.L){var Zt=Ye.ed;for(Tt=0;4>Tt;++Tt){var Ut;if(Ye.Qa.Cb){var qt=Ye.Qa.Lb[Tt];Ye.Qa.Fb||(qt+=Zt.Tb)}else qt=Zt.Tb;for(Ut=0;1>=Ut;++Ut){var Wt=Ye.gd[Tt][Ut],tr=qt;if(Zt.Pc&&(tr+=Zt.vd[0],Ut&&(tr+=Zt.od[0])),0<(tr=0>tr?0:63<tr?63:tr)){var er=tr;0<Zt.wb&&(er=4<Zt.wb?er>>2:er>>1)>9-Zt.wb&&(er=9-Zt.wb),1>er&&(er=1),Wt.dd=er,Wt.tc=2*tr+er,Wt.ld=40<=tr?2:15<=tr?1:0}else Wt.tc=0;Wt.La=Ut}}}Tt=0}else Mn(Ye,6,"Frame setup failed"),Tt=Ye.a;if(Tt=Tt==0){if(Tt){Ye.$c=0,0<Ye.Aa||(Ye.Ic=Qs);t:{Tt=Ye.Ic,Zt=4*(er=Ye.za);var sn=32*er,zr=er+1,Cn=0<Ye.L?er*(0<Ye.Aa?2:1):0,Zr=(Ye.Aa==2?2:1)*er;if((Wt=Zt+832+(Ut=3*(16*Tt+Oa[Ye.L])/2*sn)+(qt=Ye.Fa!=null&&0<Ye.Fa.length?Ye.Kc.c*Ye.Kc.i:0))!=Wt)Tt=0;else{if(Wt>Ye.Vb){if(Ye.Vb=0,Ye.Ec=f(Wt),Ye.Fc=0,Ye.Ec==null){Tt=Mn(Ye,1,"no memory during frame initialization.");break t}Ye.Vb=Wt}Wt=Ye.Ec,tr=Ye.Fc,Ye.Ac=Wt,Ye.Bc=tr,tr+=Zt,Ye.Gd=m(sn,Us),Ye.Hd=0,Ye.rb=m(zr+1,jn),Ye.sb=1,Ye.wa=Cn?m(Cn,Ci):null,Ye.Y=0,Ye.D.Nb=0,Ye.D.wa=Ye.wa,Ye.D.Y=Ye.Y,0<Ye.Aa&&(Ye.D.Y+=er),n(!0),Ye.oc=Wt,Ye.pc=tr,tr+=832,Ye.ya=m(Zr,ll),Ye.aa=0,Ye.D.ya=Ye.ya,Ye.D.aa=Ye.aa,Ye.Aa==2&&(Ye.D.aa+=er),Ye.R=16*er,Ye.B=8*er,er=(sn=Oa[Ye.L])*Ye.R,sn=sn/2*Ye.B,Ye.sa=Wt,Ye.ta=tr+er,Ye.qa=Ye.sa,Ye.ra=Ye.ta+16*Tt*Ye.R+sn,Ye.Ha=Ye.qa,Ye.Ia=Ye.ra+8*Tt*Ye.B+sn,Ye.$c=0,tr+=Ut,Ye.mb=qt?Wt:null,Ye.nb=qt?tr:null,n(tr+qt<=Ye.Fc+Ye.Vb),Fc(Ye),u(Ye.Ac,Ye.Bc,0,Zt),Tt=1}}if(Tt){if(Bt.ka=0,Bt.y=Ye.sa,Bt.O=Ye.ta,Bt.f=Ye.qa,Bt.N=Ye.ra,Bt.ea=Ye.Ha,Bt.Vd=Ye.Ia,Bt.fa=Ye.R,Bt.Rc=Ye.B,Bt.F=null,Bt.J=0,!Rc){for(Tt=-255;255>=Tt;++Tt)UA[255+Tt]=0>Tt?-Tt:Tt;for(Tt=-1020;1020>=Tt;++Tt)lA[1020+Tt]=-128>Tt?-128:127<Tt?127:Tt;for(Tt=-112;112>=Tt;++Tt)DA[112+Tt]=-16>Tt?-16:15<Tt?15:Tt;for(Tt=-255;510>=Tt;++Tt)Uu[255+Tt]=0>Tt?0:255<Tt?255:Tt;Rc=1}$o=Fl,lc=rc,Eo=Ca,si=TA,_i=Kn,os=iA,Yi=Ei,bs=ao,Pn=ye,Lc=Je,cc=fa,ka=V,MA=gt,Ua=It,Mc=Vo,kc=En,fo=mn,Uc=Ia,va[0]=ii,va[1]=Il,va[2]=Jn,va[3]=cn,va[4]=_s,va[5]=uo,va[6]=Wi,va[7]=ws,va[8]=Fa,va[9]=Sa,po[0]=Ea,po[1]=Ic,po[2]=ca,po[3]=Al,po[4]=zo,po[5]=Ho,po[6]=vs,$n[0]=ic,$n[1]=PA,$n[2]=ti,$n[3]=Aa,$n[4]=ul,$n[5]=qs,$n[6]=jo,Tt=1}else Tt=0}Tt&&(Tt=(function(Qn,Ni){for(Qn.M=0;Qn.M<Qn.Va;++Qn.M){var Sn,Hr=Qn.Jc[Qn.M&Qn.Xb],Fr=Qn.m,pi=Qn;for(Sn=0;Sn<pi.za;++Sn){var Mr=Fr,zn=pi,mi=zn.Ac,as=zn.Bc+4*Sn,ls=zn.zc,Qi=zn.ya[zn.aa+Sn];if(zn.Qa.Bb?Qi.$b=Pt(Mr,zn.Pa.jb[0])?2+Pt(Mr,zn.Pa.jb[2]):Pt(Mr,zn.Pa.jb[1]):Qi.$b=0,zn.kc&&(Qi.Ad=Pt(Mr,zn.Bd)),Qi.Za=!Pt(Mr,145)+0,Qi.Za){var Bs=Qi.Ob,Cs=0;for(zn=0;4>zn;++zn){var Oi,Fn=ls[0+zn];for(Oi=0;4>Oi;++Oi){Fn=jh[mi[as+Oi]][Fn];for(var Yn=uu[Pt(Mr,Fn[0])];0<Yn;)Yn=uu[2*Yn+Pt(Mr,Fn[Yn])];Fn=-Yn,mi[as+Oi]=Fn}a(Bs,Cs,mi,as,4),Cs+=4,ls[0+zn]=Fn}}else Fn=Pt(Mr,156)?Pt(Mr,128)?1:3:Pt(Mr,163)?2:0,Qi.Ob[0]=Fn,u(mi,as,Fn,4),u(ls,0,Fn,4);Qi.Dd=Pt(Mr,142)?Pt(Mr,114)?Pt(Mr,183)?1:3:2:0}if(pi.m.Ka)return Mn(Qn,7,"Premature end-of-partition0 encountered.");for(;Qn.ja<Qn.za;++Qn.ja){if(pi=Hr,Mr=(Fr=Qn).rb[Fr.sb-1],mi=Fr.rb[Fr.sb+Fr.ja],Sn=Fr.ya[Fr.aa+Fr.ja],as=Fr.kc?Sn.Ad:0)Mr.la=mi.la=0,Sn.Za||(Mr.Na=mi.Na=0),Sn.Hc=0,Sn.Gc=0,Sn.ia=0;else{var gr,xr;if(Mr=mi,mi=pi,as=Fr.Pa.Xc,ls=Fr.ya[Fr.aa+Fr.ja],Qi=Fr.pb[ls.$b],zn=ls.ad,Bs=0,Cs=Fr.rb[Fr.sb-1],Fn=Oi=0,u(zn,Bs,0,384),ls.Za)var Ti=0,Vi=as[3];else{Yn=f(16);var ei=Mr.Na+Cs.Na;if(ei=hA(mi,as[1],ei,Qi.Eb,0,Yn,0),Mr.Na=Cs.Na=(0<ei)+0,1<ei)$o(Yn,0,zn,Bs);else{var ci=Yn[0]+3>>3;for(Yn=0;256>Yn;Yn+=16)zn[Bs+Yn]=ci}Ti=1,Vi=as[0]}var Rn=15&Mr.la,wi=15&Cs.la;for(Yn=0;4>Yn;++Yn){var Es=1&wi;for(ci=xr=0;4>ci;++ci)Rn=Rn>>1|(Es=(ei=hA(mi,Vi,ei=Es+(1&Rn),Qi.Sc,Ti,zn,Bs))>Ti)<<7,xr=xr<<2|(3<ei?3:1<ei?2:zn[Bs+0]!=0),Bs+=16;Rn>>=4,wi=wi>>1|Es<<7,Oi=(Oi<<8|xr)>>>0}for(Vi=Rn,Ti=wi>>4,gr=0;4>gr;gr+=2){for(xr=0,Rn=Mr.la>>4+gr,wi=Cs.la>>4+gr,Yn=0;2>Yn;++Yn){for(Es=1&wi,ci=0;2>ci;++ci)ei=Es+(1&Rn),Rn=Rn>>1|(Es=0<(ei=hA(mi,as[2],ei,Qi.Qc,0,zn,Bs)))<<3,xr=xr<<2|(3<ei?3:1<ei?2:zn[Bs+0]!=0),Bs+=16;Rn>>=2,wi=wi>>1|Es<<5}Fn|=xr<<4*gr,Vi|=Rn<<4<<gr,Ti|=(240&wi)<<gr}Mr.la=Vi,Cs.la=Ti,ls.Hc=Oi,ls.Gc=Fn,ls.ia=43690&Fn?0:Qi.ia,as=!(Oi|Fn)}if(0<Fr.L&&(Fr.wa[Fr.Y+Fr.ja]=Fr.gd[Sn.$b][Sn.Za],Fr.wa[Fr.Y+Fr.ja].La|=!as),pi.Ka)return Mn(Qn,7,"Premature end-of-file encountered.")}if(Fc(Qn),Fr=Ni,pi=1,Sn=(Hr=Qn).D,Mr=0<Hr.L&&Hr.M>=Hr.zb&&Hr.M<=Hr.Va,Hr.Aa==0)t:{if(Sn.M=Hr.M,Sn.uc=Mr,Bo(Hr,Sn),pi=1,Sn=(xr=Hr.D).Nb,Mr=(Fn=Oa[Hr.L])*Hr.R,mi=Fn/2*Hr.B,Yn=16*Sn*Hr.R,ci=8*Sn*Hr.B,as=Hr.sa,ls=Hr.ta-Mr+Yn,Qi=Hr.qa,zn=Hr.ra-mi+ci,Bs=Hr.Ha,Cs=Hr.Ia-mi+ci,wi=(Rn=xr.M)==0,Oi=Rn>=Hr.Va-1,Hr.Aa==2&&Bo(Hr,xr),xr.uc)for(Es=(ei=Hr).D.M,n(ei.D.uc),xr=ei.yb;xr<ei.Hb;++xr){Ti=xr,Vi=Es;var Ys=(Fo=(Ji=ei).D).Nb;gr=Ji.R;var Fo=Fo.wa[Fo.Y+Ti],ki=Ji.sa,In=Ji.ta+16*Ys*gr+16*Ti,Vn=Fo.dd,xi=Fo.tc;if(xi!=0)if(n(3<=xi),Ji.L==1)0<Ti&&kc(ki,In,gr,xi+4),Fo.La&&Uc(ki,In,gr,xi),0<Vi&&Mc(ki,In,gr,xi+4),Fo.La&&fo(ki,In,gr,xi);else{var Ss=Ji.B,Io=Ji.qa,Js=Ji.ra+8*Ys*Ss+8*Ti,Fs=Ji.Ha,Ji=Ji.Ia+8*Ys*Ss+8*Ti;Ys=Fo.ld,0<Ti&&(bs(ki,In,gr,xi+4,Vn,Ys),Lc(Io,Js,Fs,Ji,Ss,xi+4,Vn,Ys)),Fo.La&&(ka(ki,In,gr,xi,Vn,Ys),Ua(Io,Js,Fs,Ji,Ss,xi,Vn,Ys)),0<Vi&&(Yi(ki,In,gr,xi+4,Vn,Ys),Pn(Io,Js,Fs,Ji,Ss,xi+4,Vn,Ys)),Fo.La&&(cc(ki,In,gr,xi,Vn,Ys),MA(Io,Js,Fs,Ji,Ss,xi,Vn,Ys))}}if(Hr.ia&&alert("todo:DitherRow"),Fr.put!=null){if(xr=16*Rn,Rn=16*(Rn+1),wi?(Fr.y=Hr.sa,Fr.O=Hr.ta+Yn,Fr.f=Hr.qa,Fr.N=Hr.ra+ci,Fr.ea=Hr.Ha,Fr.W=Hr.Ia+ci):(xr-=Fn,Fr.y=as,Fr.O=ls,Fr.f=Qi,Fr.N=zn,Fr.ea=Bs,Fr.W=Cs),Oi||(Rn-=Fn),Rn>Fr.o&&(Rn=Fr.o),Fr.F=null,Fr.J=null,Hr.Fa!=null&&0<Hr.Fa.length&&xr<Rn&&(Fr.J=Si(Hr,Fr,xr,Rn-xr),Fr.F=Hr.mb,Fr.F==null&&Fr.F.length==0)){pi=Mn(Hr,3,"Could not decode alpha data.");break t}xr<Fr.j&&(Fn=Fr.j-xr,xr=Fr.j,n(!(1&Fn)),Fr.O+=Hr.R*Fn,Fr.N+=Hr.B*(Fn>>1),Fr.W+=Hr.B*(Fn>>1),Fr.F!=null&&(Fr.J+=Fr.width*Fn)),xr<Rn&&(Fr.O+=Fr.v,Fr.N+=Fr.v>>1,Fr.W+=Fr.v>>1,Fr.F!=null&&(Fr.J+=Fr.v),Fr.ka=xr-Fr.j,Fr.U=Fr.va-Fr.v,Fr.T=Rn-xr,pi=Fr.put(Fr))}Sn+1!=Hr.Ic||Oi||(a(Hr.sa,Hr.ta-Mr,as,ls+16*Hr.R,Mr),a(Hr.qa,Hr.ra-mi,Qi,zn+8*Hr.B,mi),a(Hr.Ha,Hr.Ia-mi,Bs,Cs+8*Hr.B,mi))}if(!pi)return Mn(Qn,6,"Output aborted.")}return 1})(Ye,Bt)),Bt.bc!=null&&Bt.bc(Bt),Tt&=1}return Tt?(Ye.cb=0,Tt):0})(T,re)||(R=T.a)}}else R=T.a}R==0&&Ee.Oa!=null&&Ee.Oa.fd&&(R=aA(Ee.ba))}Ee=R}we=Ee!=0?null:11>we?Pe.f.RGBA.eb:Pe.f.kb.y}else we=null;return we};var jA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function E(be,rt){for(var ue="",me=0;me<4;me++)ue+=String.fromCharCode(be[rt++]);return ue}function I(be,rt){return be[rt+0]|be[rt+1]<<8}function D(be,rt){return(be[rt+0]|be[rt+1]<<8|be[rt+2]<<16)>>>0}function O(be,rt){return(be[rt+0]|be[rt+1]<<8|be[rt+2]<<16|be[rt+3]<<24)>>>0}new w;var P=[0],W=[0],H=[],z=new w,Z=e,se=(function(be,rt){var ue={},me=0,Ue=!1,Ie=0,pt=0;if(ue.frames=[],!(function(ie,Ce){for(var Me=0;Me<4;Me++)if(ie[Ce+Me]!="RIFF".charCodeAt(Me))return!0;return!1})(be,rt)){for(O(be,rt+=4),rt+=8;rt<be.length;){var lt=E(be,rt),ot=O(be,rt+=4);rt+=4;var Ne=ot+(1&ot);switch(lt){case"VP8 ":case"VP8L":ue.frames[me]===void 0&&(ue.frames[me]={}),(Le=ue.frames[me]).src_off=Ue?pt:rt-8,Le.src_size=Ie+ot+8,me++,Ue&&(Ue=!1,Ie=0,pt=0);break;case"VP8X":(Le=ue.header={}).feature_flags=be[rt];var Te=rt+4;Le.canvas_width=1+D(be,Te),Te+=3,Le.canvas_height=1+D(be,Te),Te+=3;break;case"ALPH":Ue=!0,Ie=Ne+8,pt=rt-8;break;case"ANIM":(Le=ue.header).bgcolor=O(be,rt),Te=rt+4,Le.loop_count=I(be,Te),Te+=2;break;case"ANMF":var yt,Le;(Le=ue.frames[me]={}).offset_x=2*D(be,rt),rt+=3,Le.offset_y=2*D(be,rt),rt+=3,Le.width=1+D(be,rt),rt+=3,Le.height=1+D(be,rt),rt+=3,Le.duration=D(be,rt),rt+=3,yt=be[rt++],Le.dispose=1&yt,Le.blend=yt>>1&1}lt!="ANMF"&&(rt+=Ne)}return ue}})(Z,0);se.response=Z,se.rgbaoutput=!0,se.dataurl=!1;var ae=se.header?se.header:null,fe=se.frames?se.frames:null;if(ae){ae.loop_counter=ae.loop_count,P=[ae.canvas_height],W=[ae.canvas_width];for(var Fe=0;Fe<fe.length&&fe[Fe].blend!=0;Fe++);}var He=fe[0],Ve=z.WebPDecodeRGBA(Z,He.src_off,He.src_size,W,P);He.rgba=Ve,He.imgwidth=W[0],He.imgheight=P[0];for(var Oe=0;Oe<W[0]*P[0]*4;Oe++)H[Oe]=Ve[Oe];return this.width=W,this.height=P,this.data=H,this}(function(e){var n,i,a,u,f,m,o,w,E,I=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new w,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new m,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new m,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new D(this),n=this.internal.f2,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,u=this.internal.getHorizontalCoordinate,f=this.internal.getVerticalCoordinate,m=this.internal.Point,o=this.internal.Rectangle,w=this.internal.Matrix,E=new I}]);var D=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ce=ie;Object.defineProperty(this,"pdf",{get:function(){return Ce}});var Me=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Me},set:function(je){Me=!!je}});var qe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return qe},set:function(je){qe=!!je}});var at=0;Object.defineProperty(this,"posX",{get:function(){return at},set:function(je){isNaN(je)||(at=je)}});var et=0;Object.defineProperty(this,"posY",{get:function(){return et},set:function(je){isNaN(je)||(et=je)}}),Object.defineProperty(this,"margin",{get:function(){return E.margin},set:function(je){var vr;typeof je=="number"?vr=[je,je,je,je]:((vr=new Array(4))[0]=je[0],vr[1]=je.length>=2?je[1]:vr[0],vr[2]=je.length>=3?je[2]:vr[0],vr[3]=je.length>=4?je[3]:vr[1]),E.margin=vr}});var _t=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _t},set:function(je){_t=je}});var Et=0;Object.defineProperty(this,"lastBreak",{get:function(){return Et},set:function(je){Et=je}});var Pt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pt},set:function(je){Pt=je}}),Object.defineProperty(this,"ctx",{get:function(){return E},set:function(je){je instanceof I&&(E=je)}}),Object.defineProperty(this,"path",{get:function(){return E.path},set:function(je){E.path=je}});var Kt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Kt},set:function(je){Kt=je}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(je){var vr;vr=O(je),this.ctx.fillStyle=vr.style,this.ctx.isFillTransparent=vr.a===0,this.ctx.fillOpacity=vr.a,this.pdf.setFillColor(vr.r,vr.g,vr.b,{a:vr.a}),this.pdf.setTextColor(vr.r,vr.g,vr.b,{a:vr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(je){var vr=O(je);this.ctx.strokeStyle=vr.style,this.ctx.isStrokeTransparent=vr.a===0,this.ctx.strokeOpacity=vr.a,vr.a===0?this.pdf.setDrawColor(255,255,255):(vr.a,this.pdf.setDrawColor(vr.r,vr.g,vr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(je){["butt","round","square"].indexOf(je)!==-1&&(this.ctx.lineCap=je,this.pdf.setLineCap(je))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(je){isNaN(je)||(this.ctx.lineWidth=je,this.pdf.setLineWidth(je))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(je){["bevel","round","miter"].indexOf(je)!==-1&&(this.ctx.lineJoin=je,this.pdf.setLineJoin(je))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(je){isNaN(je)||(this.ctx.miterLimit=je,this.pdf.setMiterLimit(je))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(je){this.ctx.textBaseline=je}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(je){["right","end","center","left","start"].indexOf(je)!==-1&&(this.ctx.textAlign=je)}});var ar=null,hr=null,Cr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Cr},set:function(je){ar=null,hr=null,Cr=je}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(je){var vr;if(this.ctx.font=je,(vr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(je))!==null){var Ur=vr[1];vr[2];var $r=vr[3],lr=vr[4];vr[5];var Wr=vr[6],Sr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(lr)[2];lr=Math.floor(Sr==="px"?parseFloat(lr)*this.pdf.internal.scaleFactor:Sr==="em"?parseFloat(lr)*this.pdf.getFontSize():parseFloat(lr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(lr);var Or=(function(Ze){var Ct,vt,ct=[],bt=Ze.trim();if(bt==="")return X1;if(bt in OC)return[OC[bt]];for(;bt!=="";){switch(vt=null,Ct=(bt=HC(bt)).charAt(0)){case'"':case"'":vt=Lj(bt.substring(1),Ct);break;default:vt=Mj(bt)}if(vt===null||(ct.push(vt[0]),(bt=HC(vt[1]))!==""&&bt.charAt(0)!==","))return X1;bt=bt.replace(/^,/,"")}return ct})(Wr);if(this.fontFaces){var Rr=(function(Ze,Ct){var vt=Ze.getFontList(),ct=JSON.stringify(vt);if(ar===null||hr!==ct){var bt=(function(Ht){var Ft=[];return Object.keys(Ht).forEach(function(cr){Ht[cr].forEach(function(Jt){var dr=null;switch(Jt){case"bold":dr={family:cr,weight:"bold"};break;case"italic":dr={family:cr,style:"italic"};break;case"bolditalic":dr={family:cr,weight:"bold",style:"italic"};break;case"":case"normal":dr={family:cr}}dr!==null&&(dr.ref={name:cr,style:Jt},Ft.push(dr))})}),Ft})(vt);ar=(function(Ht){for(var Ft={},cr=0;cr<Ht.length;++cr){var Jt=Z1(Ht[cr]),dr=Jt.family,rn=Jt.stretch,Tr=Jt.style,mt=Jt.weight;Ft[dr]=Ft[dr]||{},Ft[dr][rn]=Ft[dr][rn]||{},Ft[dr][rn][Tr]=Ft[dr][rn][Tr]||{},Ft[dr][rn][Tr][mt]=Jt}return Ft})(bt.concat(Ct)),hr=ct}return ar})(this.pdf,this.fontFaces),On=Or.map(function(Ze){return{family:Ze,stretch:"normal",weight:$r,style:Ur}}),hn=(function(Ze,Ct,vt){for(var ct=(vt=vt||{}).defaultFontFamily||"times",bt=Object.assign({},Pj,vt.genericFontFamilies||{}),Ht=null,Ft=null,cr=0;cr<Ct.length;++cr)if(bt[(Ht=Z1(Ct[cr])).family]&&(Ht.family=bt[Ht.family]),Ze.hasOwnProperty(Ht.family)){Ft=Ze[Ht.family];break}if(!(Ft=Ft||Ze[ct]))throw new Error("Could not find a font-family for the rule '"+zC(Ht)+"' and default family '"+ct+"'.");if(Ft=(function(Jt,dr){if(dr[Jt])return dr[Jt];var rn=dw[Jt],Tr=rn<=dw.normal?-1:1,mt=QC(dr,SI,rn,Tr);if(!mt)throw new Error("Could not find a matching font-stretch value for "+Jt);return mt})(Ht.stretch,Ft),Ft=(function(Jt,dr){if(dr[Jt])return dr[Jt];for(var rn=EI[Jt],Tr=0;Tr<rn.length;++Tr)if(dr[rn[Tr]])return dr[rn[Tr]];throw new Error("Could not find a matching font-style for "+Jt)})(Ht.style,Ft),!(Ft=(function(Jt,dr){if(dr[Jt])return dr[Jt];if(Jt===400&&dr[500])return dr[500];if(Jt===500&&dr[400])return dr[400];var rn=Tj[Jt],Tr=QC(dr,FI,rn,Jt<400?-1:1);if(!Tr)throw new Error("Could not find a matching font-weight for value "+Jt);return Tr})(Ht.weight,Ft)))throw new Error("Failed to resolve a font for the rule '"+zC(Ht)+"'.");return Ft})(Rr,On);this.pdf.setFont(hn.ref.name,hn.ref.style)}else{var dt="";($r==="bold"||parseInt($r,10)>=700||Ur==="bold")&&(dt="bold"),Ur==="italic"&&(dt+="italic"),dt.length===0&&(dt="normal");for(var de="",pe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ve=0;ve<Or.length;ve++){if(this.pdf.internal.getFont(Or[ve],dt,{noFallback:!0,disableWarning:!0})!==void 0){de=Or[ve];break}if(dt==="bolditalic"&&this.pdf.internal.getFont(Or[ve],"bold",{noFallback:!0,disableWarning:!0})!==void 0)de=Or[ve],dt="bold";else if(this.pdf.internal.getFont(Or[ve],"normal",{noFallback:!0,disableWarning:!0})!==void 0){de=Or[ve],dt="normal";break}}if(de===""){for(var $e=0;$e<Or.length;$e++)if(pe[Or[$e]]){de=pe[Or[$e]];break}}de=de===""?"Times":de,this.pdf.setFont(de,dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(je){this.ctx.globalCompositeOperation=je}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(je){this.ctx.globalAlpha=je}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(je){this.ctx.lineDashOffset=je,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(je){this.ctx.lineDash=je,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(je){this.ctx.ignoreClearRect=!!je}})};D.prototype.setLineDash=function(ie){this.lineDash=ie},D.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},D.prototype.fill=function(){fe.call(this,"fill",!1)},D.prototype.stroke=function(){fe.call(this,"stroke",!1)},D.prototype.beginPath=function(){this.path=[{type:"begin"}]},D.prototype.moveTo=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw gs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Me=this.ctx.transform.applyToPoint(new m(ie,Ce));this.path.push({type:"mt",x:Me.x,y:Me.y}),this.ctx.lastPoint=new m(ie,Ce)},D.prototype.closePath=function(){var ie=new m(0,0),Ce=0;for(Ce=this.path.length-1;Ce!==-1;Ce--)if(this.path[Ce].type==="begin"&&rs(this.path[Ce+1])==="object"&&typeof this.path[Ce+1].x=="number"){ie=new m(this.path[Ce+1].x,this.path[Ce+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new m(ie.x,ie.y)},D.prototype.lineTo=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw gs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Me=this.ctx.transform.applyToPoint(new m(ie,Ce));this.path.push({type:"lt",x:Me.x,y:Me.y}),this.ctx.lastPoint=new m(Me.x,Me.y)},D.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),fe.call(this,null,!0)},D.prototype.quadraticCurveTo=function(ie,Ce,Me,qe){if(isNaN(Me)||isNaN(qe)||isNaN(ie)||isNaN(Ce))throw gs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var at=this.ctx.transform.applyToPoint(new m(Me,qe)),et=this.ctx.transform.applyToPoint(new m(ie,Ce));this.path.push({type:"qct",x1:et.x,y1:et.y,x:at.x,y:at.y}),this.ctx.lastPoint=new m(at.x,at.y)},D.prototype.bezierCurveTo=function(ie,Ce,Me,qe,at,et){if(isNaN(at)||isNaN(et)||isNaN(ie)||isNaN(Ce)||isNaN(Me)||isNaN(qe))throw gs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _t=this.ctx.transform.applyToPoint(new m(at,et)),Et=this.ctx.transform.applyToPoint(new m(ie,Ce)),Pt=this.ctx.transform.applyToPoint(new m(Me,qe));this.path.push({type:"bct",x1:Et.x,y1:Et.y,x2:Pt.x,y2:Pt.y,x:_t.x,y:_t.y}),this.ctx.lastPoint=new m(_t.x,_t.y)},D.prototype.arc=function(ie,Ce,Me,qe,at,et){if(isNaN(ie)||isNaN(Ce)||isNaN(Me)||isNaN(qe)||isNaN(at))throw gs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(et=!!et,!this.ctx.transform.isIdentity){var _t=this.ctx.transform.applyToPoint(new m(ie,Ce));ie=_t.x,Ce=_t.y;var Et=this.ctx.transform.applyToPoint(new m(0,Me)),Pt=this.ctx.transform.applyToPoint(new m(0,0));Me=Math.sqrt(Math.pow(Et.x-Pt.x,2)+Math.pow(Et.y-Pt.y,2))}Math.abs(at-qe)>=2*Math.PI&&(qe=0,at=2*Math.PI),this.path.push({type:"arc",x:ie,y:Ce,radius:Me,startAngle:qe,endAngle:at,counterclockwise:et})},D.prototype.arcTo=function(ie,Ce,Me,qe,at){throw new Error("arcTo not implemented.")},D.prototype.rect=function(ie,Ce,Me,qe){if(isNaN(ie)||isNaN(Ce)||isNaN(Me)||isNaN(qe))throw gs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,Ce),this.lineTo(ie+Me,Ce),this.lineTo(ie+Me,Ce+qe),this.lineTo(ie,Ce+qe),this.lineTo(ie,Ce),this.lineTo(ie+Me,Ce),this.lineTo(ie,Ce)},D.prototype.fillRect=function(ie,Ce,Me,qe){if(isNaN(ie)||isNaN(Ce)||isNaN(Me)||isNaN(qe))throw gs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!P.call(this)){var at={};this.lineCap!=="butt"&&(at.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(at.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,Ce,Me,qe),this.fill(),at.hasOwnProperty("lineCap")&&(this.lineCap=at.lineCap),at.hasOwnProperty("lineJoin")&&(this.lineJoin=at.lineJoin)}},D.prototype.strokeRect=function(ie,Ce,Me,qe){if(isNaN(ie)||isNaN(Ce)||isNaN(Me)||isNaN(qe))throw gs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");W.call(this)||(this.beginPath(),this.rect(ie,Ce,Me,qe),this.stroke())},D.prototype.clearRect=function(ie,Ce,Me,qe){if(isNaN(ie)||isNaN(Ce)||isNaN(Me)||isNaN(qe))throw gs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,Ce,Me,qe))},D.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var Ce=this.pdf.internal.getCurrentPageInfo().pageNumber,Me=0;Me<this.pdf.internal.getNumberOfPages();Me++)this.pdf.setPage(Me+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ce),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var qe=new I(this.ctx);this.ctxStack.push(this.ctx),this.ctx=qe}},D.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var Ce=this.pdf.internal.getCurrentPageInfo().pageNumber,Me=0;Me<this.pdf.internal.getNumberOfPages();Me++)this.pdf.setPage(Me+1),this.pdf.internal.out("Q");this.pdf.setPage(Ce),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},D.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var O=function(ie){var Ce,Me,qe,at;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))Ce=0,Me=0,qe=0,at=0;else{var et=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(et!==null)Ce=parseInt(et[1]),Me=parseInt(et[2]),qe=parseInt(et[3]),at=1;else if((et=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)Ce=parseInt(et[1]),Me=parseInt(et[2]),qe=parseInt(et[3]),at=parseFloat(et[4]);else{if(at=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var _t=new vI(ie);ie=_t.ok?_t.toHex():"#000000"}ie.length===4?(Ce=ie.substring(1,2),Ce+=Ce,Me=ie.substring(2,3),Me+=Me,qe=ie.substring(3,4),qe+=qe):(Ce=ie.substring(1,3),Me=ie.substring(3,5),qe=ie.substring(5,7)),Ce=parseInt(Ce,16),Me=parseInt(Me,16),qe=parseInt(qe,16)}}return{r:Ce,g:Me,b:qe,a:at,style:ie}},P=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},W=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};D.prototype.fillText=function(ie,Ce,Me,qe){if(isNaN(Ce)||isNaN(Me)||typeof ie!="string")throw gs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(qe=isNaN(qe)?void 0:qe,!P.call(this)){var at=Ne(this.ctx.transform.rotation),et=this.ctx.transform.scaleX;me.call(this,{text:ie,x:Ce,y:Me,scale:et,angle:at,align:this.textAlign,maxWidth:qe})}},D.prototype.strokeText=function(ie,Ce,Me,qe){if(isNaN(Ce)||isNaN(Me)||typeof ie!="string")throw gs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!W.call(this)){qe=isNaN(qe)?void 0:qe;var at=Ne(this.ctx.transform.rotation),et=this.ctx.transform.scaleX;me.call(this,{text:ie,x:Ce,y:Me,scale:et,renderingMode:"stroke",angle:at,align:this.textAlign,maxWidth:qe})}},D.prototype.measureText=function(ie){if(typeof ie!="string")throw gs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ce=this.pdf,Me=this.pdf.internal.scaleFactor,qe=Ce.internal.getFontSize(),at=Ce.getStringUnitWidth(ie)*qe/Ce.internal.scaleFactor;return new function(et){var _t=(et=et||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _t}}),this}({width:at*=Math.round(96*Me/72*1e4)/1e4})},D.prototype.scale=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw gs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Me=new w(ie,0,0,Ce,0,0);this.ctx.transform=this.ctx.transform.multiply(Me)},D.prototype.rotate=function(ie){if(isNaN(ie))throw gs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ce=new w(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(Ce)},D.prototype.translate=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw gs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Me=new w(1,0,0,1,ie,Ce);this.ctx.transform=this.ctx.transform.multiply(Me)},D.prototype.transform=function(ie,Ce,Me,qe,at,et){if(isNaN(ie)||isNaN(Ce)||isNaN(Me)||isNaN(qe)||isNaN(at)||isNaN(et))throw gs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _t=new w(ie,Ce,Me,qe,at,et);this.ctx.transform=this.ctx.transform.multiply(_t)},D.prototype.setTransform=function(ie,Ce,Me,qe,at,et){ie=isNaN(ie)?1:ie,Ce=isNaN(Ce)?0:Ce,Me=isNaN(Me)?0:Me,qe=isNaN(qe)?1:qe,at=isNaN(at)?0:at,et=isNaN(et)?0:et,this.ctx.transform=new w(ie,Ce,Me,qe,at,et)};var H=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};D.prototype.drawImage=function(ie,Ce,Me,qe,at,et,_t,Et,Pt){var Kt=this.pdf.getImageProperties(ie),ar=1,hr=1,Cr=1,je=1;qe!==void 0&&Et!==void 0&&(Cr=Et/qe,je=Pt/at,ar=Kt.width/qe*Et/qe,hr=Kt.height/at*Pt/at),et===void 0&&(et=Ce,_t=Me,Ce=0,Me=0),qe!==void 0&&Et===void 0&&(Et=qe,Pt=at),qe===void 0&&Et===void 0&&(Et=Kt.width,Pt=Kt.height);var vr=this.ctx.transform.decompose(),Ur=Ne(vr.rotate.shx),$r=new w,lr=($r=($r=($r=$r.multiply(vr.translate)).multiply(vr.skew)).multiply(vr.scale)).applyToRectangle(new o(et-Ce*Cr,_t-Me*je,qe*ar,at*hr));if(this.autoPaging){for(var Wr,Sr=z.call(this,lr),Or=[],Rr=0;Rr<Sr.length;Rr+=1)Or.indexOf(Sr[Rr])===-1&&Or.push(Sr[Rr]);ae(Or);for(var On=Or[0],hn=Or[Or.length-1],dt=On;dt<hn+1;dt++){this.pdf.setPage(dt);var de=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=dt===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=dt===1?0:ve+(dt-2)*$e;if(this.ctx.clip_path.length!==0){var Ct=this.path;Wr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=se(Wr,this.posX+this.margin[3],-Ze+pe+this.ctx.prevPageLastElemOffset),Fe.call(this,"fill",!0),this.path=Ct}var vt=JSON.parse(JSON.stringify(lr));vt=se([vt],this.posX+this.margin[3],-Ze+pe+this.ctx.prevPageLastElemOffset)[0];var ct=(dt>On||dt<hn)&&H.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],de,$e,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,Ur),ct&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(ie,"JPEG",lr.x,lr.y,lr.w,lr.h,null,null,Ur)};var z=function(ie,Ce,Me){var qe=[];Ce=Ce||this.pdf.internal.pageSize.width,Me=Me||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var at=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":qe.push(Math.floor((ie.y+at)/Me)+1);break;case"arc":qe.push(Math.floor((ie.y+at-ie.radius)/Me)+1),qe.push(Math.floor((ie.y+at+ie.radius)/Me)+1);break;case"qct":var et=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);qe.push(Math.floor((et.y+at)/Me)+1),qe.push(Math.floor((et.y+et.h+at)/Me)+1);break;case"bct":var _t=yt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);qe.push(Math.floor((_t.y+at)/Me)+1),qe.push(Math.floor((_t.y+_t.h+at)/Me)+1);break;case"rect":qe.push(Math.floor((ie.y+at)/Me)+1),qe.push(Math.floor((ie.y+ie.h+at)/Me)+1)}for(var Et=0;Et<qe.length;Et+=1)for(;this.pdf.internal.getNumberOfPages()<qe[Et];)Z.call(this);return qe},Z=function(){var ie=this.fillStyle,Ce=this.strokeStyle,Me=this.font,qe=this.lineCap,at=this.lineWidth,et=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=Ce,this.font=Me,this.lineCap=qe,this.lineWidth=at,this.lineJoin=et},se=function(ie,Ce,Me){for(var qe=0;qe<ie.length;qe++)switch(ie[qe].type){case"bct":ie[qe].x2+=Ce,ie[qe].y2+=Me;case"qct":ie[qe].x1+=Ce,ie[qe].y1+=Me;default:ie[qe].x+=Ce,ie[qe].y+=Me}return ie},ae=function(ie){return ie.sort(function(Ce,Me){return Ce-Me})},fe=function(ie,Ce){var Me=this.fillStyle,qe=this.strokeStyle,at=this.lineCap,et=this.lineWidth,_t=Math.abs(et*this.ctx.transform.scaleX),Et=this.lineJoin;if(this.autoPaging){for(var Pt,Kt,ar=JSON.parse(JSON.stringify(this.path)),hr=JSON.parse(JSON.stringify(this.path)),Cr=[],je=0;je<hr.length;je++)if(hr[je].x!==void 0)for(var vr=z.call(this,hr[je]),Ur=0;Ur<vr.length;Ur+=1)Cr.indexOf(vr[Ur])===-1&&Cr.push(vr[Ur]);for(var $r=0;$r<Cr.length;$r++)for(;this.pdf.internal.getNumberOfPages()<Cr[$r];)Z.call(this);ae(Cr);for(var lr=Cr[0],Wr=Cr[Cr.length-1],Sr=lr;Sr<Wr+1;Sr++){this.pdf.setPage(Sr),this.fillStyle=Me,this.strokeStyle=qe,this.lineCap=at,this.lineWidth=_t,this.lineJoin=Et;var Or=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rr=Sr===1?this.posY+this.margin[0]:this.margin[0],On=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],hn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=Sr===1?0:On+(Sr-2)*hn;if(this.ctx.clip_path.length!==0){var de=this.path;Pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=se(Pt,this.posX+this.margin[3],-dt+Rr+this.ctx.prevPageLastElemOffset),Fe.call(this,ie,!0),this.path=de}if(Kt=JSON.parse(JSON.stringify(ar)),this.path=se(Kt,this.posX+this.margin[3],-dt+Rr+this.ctx.prevPageLastElemOffset),Ce===!1||Sr===0){var pe=(Sr>lr||Sr<Wr)&&H.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Or,hn,null).clip().discardPath()),Fe.call(this,ie,Ce),pe&&this.pdf.restoreGraphicsState()}this.lineWidth=et}this.path=ar}else this.lineWidth=_t,Fe.call(this,ie,Ce),this.lineWidth=et},Fe=function(ie,Ce){if((ie!=="stroke"||Ce||!W.call(this))&&(ie==="stroke"||Ce||!P.call(this))){for(var Me,qe,at=[],et=this.path,_t=0;_t<et.length;_t++){var Et=et[_t];switch(Et.type){case"begin":at.push({begin:!0});break;case"close":at.push({close:!0});break;case"mt":at.push({start:Et,deltas:[],abs:[]});break;case"lt":var Pt=at.length;if(et[_t-1]&&!isNaN(et[_t-1].x)&&(Me=[Et.x-et[_t-1].x,Et.y-et[_t-1].y],Pt>0)){for(;Pt>=0;Pt--)if(at[Pt-1].close!==!0&&at[Pt-1].begin!==!0){at[Pt-1].deltas.push(Me),at[Pt-1].abs.push(Et);break}}break;case"bct":Me=[Et.x1-et[_t-1].x,Et.y1-et[_t-1].y,Et.x2-et[_t-1].x,Et.y2-et[_t-1].y,Et.x-et[_t-1].x,Et.y-et[_t-1].y],at[at.length-1].deltas.push(Me);break;case"qct":var Kt=et[_t-1].x+2/3*(Et.x1-et[_t-1].x),ar=et[_t-1].y+2/3*(Et.y1-et[_t-1].y),hr=Et.x+2/3*(Et.x1-Et.x),Cr=Et.y+2/3*(Et.y1-Et.y),je=Et.x,vr=Et.y;Me=[Kt-et[_t-1].x,ar-et[_t-1].y,hr-et[_t-1].x,Cr-et[_t-1].y,je-et[_t-1].x,vr-et[_t-1].y],at[at.length-1].deltas.push(Me);break;case"arc":at.push({deltas:[],abs:[],arc:!0}),Array.isArray(at[at.length-1].abs)&&at[at.length-1].abs.push(Et)}}qe=Ce?null:ie==="stroke"?"stroke":"fill";for(var Ur=!1,$r=0;$r<at.length;$r++)if(at[$r].arc)for(var lr=at[$r].abs,Wr=0;Wr<lr.length;Wr++){var Sr=lr[Wr];Sr.type==="arc"?Oe.call(this,Sr.x,Sr.y,Sr.radius,Sr.startAngle,Sr.endAngle,Sr.counterclockwise,void 0,Ce,!Ur):Ue.call(this,Sr.x,Sr.y),Ur=!0}else if(at[$r].close===!0)this.pdf.internal.out("h"),Ur=!1;else if(at[$r].begin!==!0){var Or=at[$r].start.x,Rr=at[$r].start.y;Ie.call(this,at[$r].deltas,Or,Rr),Ur=!0}qe&&be.call(this,qe),Ce&&rt.call(this)}},He=function(ie){var Ce=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Me=Ce*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-Me;case"top":return ie+Ce-Me;case"hanging":return ie+Ce-2*Me;case"middle":return ie+Ce/2-Me;default:return ie}},Ve=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};D.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(Ce,Me){this.colorStops.push([Ce,Me])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},D.prototype.createPattern=function(){return this.createLinearGradient()},D.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Oe=function(ie,Ce,Me,qe,at,et,_t,Et,Pt){for(var Kt=lt.call(this,Me,qe,at,et),ar=0;ar<Kt.length;ar++){var hr=Kt[ar];ar===0&&(Pt?ue.call(this,hr.x1+ie,hr.y1+Ce):Ue.call(this,hr.x1+ie,hr.y1+Ce)),pt.call(this,ie,Ce,hr.x2,hr.y2,hr.x3,hr.y3,hr.x4,hr.y4)}Et?rt.call(this):be.call(this,_t)},be=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},rt=function(){this.pdf.clip(),this.pdf.discardPath()},ue=function(ie,Ce){this.pdf.internal.out(i(ie)+" "+a(Ce)+" m")},me=function(ie){var Ce;switch(ie.align){case"right":case"end":Ce="right";break;case"center":Ce="center";break;default:Ce="left"}var Me,qe,at,et=this.pdf.getTextDimensions(ie.text),_t=He.call(this,ie.y),Et=Ve.call(this,_t)-et.h,Pt=this.ctx.transform.applyToPoint(new m(ie.x,_t));if(this.autoPaging){var Kt=this.ctx.transform.decompose(),ar=new w;ar=(ar=(ar=ar.multiply(Kt.translate)).multiply(Kt.skew)).multiply(Kt.scale);for(var hr=this.ctx.transform.applyToRectangle(new o(ie.x,_t,et.w,et.h)),Cr=ar.applyToRectangle(new o(ie.x,Et,et.w,et.h)),je=z.call(this,Cr),vr=[],Ur=0;Ur<je.length;Ur+=1)vr.indexOf(je[Ur])===-1&&vr.push(je[Ur]);ae(vr);for(var $r=vr[0],lr=vr[vr.length-1],Wr=$r;Wr<lr+1;Wr++){this.pdf.setPage(Wr);var Sr=Wr===1?this.posY+this.margin[0]:this.margin[0],Or=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rr=this.pdf.internal.pageSize.height-this.margin[2],On=Rr-this.margin[0],hn=this.pdf.internal.pageSize.width-this.margin[1],dt=hn-this.margin[3],de=Wr===1?0:Or+(Wr-2)*On;if(this.ctx.clip_path.length!==0){var pe=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=se(Me,this.posX+this.margin[3],-1*de+Sr),Fe.call(this,"fill",!0),this.path=pe}var ve=se([JSON.parse(JSON.stringify(Cr))],this.posX+this.margin[3],-de+Sr+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*ie.scale),at=this.lineWidth,this.lineWidth=at*ie.scale);var $e=this.autoPaging!=="text";if($e||ve.y+ve.h<=Rr){if($e||ve.y>=Sr&&ve.x<=hn){var Ze=$e?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||hn-ve.x)[0],Ct=se([JSON.parse(JSON.stringify(hr))],this.posX+this.margin[3],-de+Sr+this.ctx.prevPageLastElemOffset)[0],vt=$e&&(Wr>$r||Wr<lr)&&H.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,On,null).clip().discardPath()),this.pdf.text(Ze,Ct.x,Ct.y,{angle:ie.angle,align:Ce,renderingMode:ie.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else ve.y<Rr&&(this.ctx.prevPageLastElemOffset+=Rr-ve.y);ie.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=at)}}else ie.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*ie.scale),at=this.lineWidth,this.lineWidth=at*ie.scale),this.pdf.text(ie.text,Pt.x+this.posX,Pt.y+this.posY,{angle:ie.angle,align:Ce,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=at)},Ue=function(ie,Ce,Me,qe){Me=Me||0,qe=qe||0,this.pdf.internal.out(i(ie+Me)+" "+a(Ce+qe)+" l")},Ie=function(ie,Ce,Me){return this.pdf.lines(ie,Ce,Me,null,null)},pt=function(ie,Ce,Me,qe,at,et,_t,Et){this.pdf.internal.out([n(u(Me+ie)),n(f(qe+Ce)),n(u(at+ie)),n(f(et+Ce)),n(u(_t+ie)),n(f(Et+Ce)),"c"].join(" "))},lt=function(ie,Ce,Me,qe){for(var at=2*Math.PI,et=Math.PI/2;Ce>Me;)Ce-=at;var _t=Math.abs(Me-Ce);_t<at&&qe&&(_t=at-_t);for(var Et=[],Pt=qe?-1:1,Kt=Ce;_t>1e-5;){var ar=Kt+Pt*Math.min(_t,et);Et.push(ot.call(this,ie,Kt,ar)),_t-=Math.abs(ar-Kt),Kt=ar}return Et},ot=function(ie,Ce,Me){var qe=(Me-Ce)/2,at=ie*Math.cos(qe),et=ie*Math.sin(qe),_t=at,Et=-et,Pt=_t*_t+Et*Et,Kt=Pt+_t*at+Et*et,ar=4/3*(Math.sqrt(2*Pt*Kt)-Kt)/(_t*et-Et*at),hr=_t-ar*Et,Cr=Et+ar*_t,je=hr,vr=-Cr,Ur=qe+Ce,$r=Math.cos(Ur),lr=Math.sin(Ur);return{x1:ie*Math.cos(Ce),y1:ie*Math.sin(Ce),x2:hr*$r-Cr*lr,y2:hr*lr+Cr*$r,x3:je*$r-vr*lr,y3:je*lr+vr*$r,x4:ie*Math.cos(Me),y4:ie*Math.sin(Me)}},Ne=function(ie){return 180*ie/Math.PI},Te=function(ie,Ce,Me,qe,at,et){var _t=ie+.5*(Me-ie),Et=Ce+.5*(qe-Ce),Pt=at+.5*(Me-at),Kt=et+.5*(qe-et),ar=Math.min(ie,at,_t,Pt),hr=Math.max(ie,at,_t,Pt),Cr=Math.min(Ce,et,Et,Kt),je=Math.max(Ce,et,Et,Kt);return new o(ar,Cr,hr-ar,je-Cr)},yt=function(ie,Ce,Me,qe,at,et,_t,Et){var Pt,Kt,ar,hr,Cr,je,vr,Ur,$r,lr,Wr,Sr,Or,Rr,On=Me-ie,hn=qe-Ce,dt=at-Me,de=et-qe,pe=_t-at,ve=Et-et;for(Kt=0;Kt<41;Kt++)$r=(vr=(ar=ie+(Pt=Kt/40)*On)+Pt*((Cr=Me+Pt*dt)-ar))+Pt*(Cr+Pt*(at+Pt*pe-Cr)-vr),lr=(Ur=(hr=Ce+Pt*hn)+Pt*((je=qe+Pt*de)-hr))+Pt*(je+Pt*(et+Pt*ve-je)-Ur),Kt==0?(Wr=$r,Sr=lr,Or=$r,Rr=lr):(Wr=Math.min(Wr,$r),Sr=Math.min(Sr,lr),Or=Math.max(Or,$r),Rr=Math.max(Rr,lr));return new o(Math.round(Wr),Math.round(Sr),Math.round(Or-Wr),Math.round(Rr-Sr))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,Ce,Me=(ie=this.ctx.lineDash,Ce=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:Ce}));this.prevLineDash!==Me&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Me)}}})(dn.API),(function(e){var n=function(m){var o,w,E,I,D,O,P,W,H,z;for(w=[],E=0,I=(m+=o="\0\0\0\0".slice(m.length%4||4)).length;I>E;E+=4)(D=(m.charCodeAt(E)<<24)+(m.charCodeAt(E+1)<<16)+(m.charCodeAt(E+2)<<8)+m.charCodeAt(E+3))!==0?(O=(D=((D=((D=((D=(D-(z=D%85))/85)-(H=D%85))/85)-(W=D%85))/85)-(P=D%85))/85)%85,w.push(O+33,P+33,W+33,H+33,z+33)):w.push(122);return(function(Z,se){for(var ae=se;ae>0;ae--)Z.pop()})(w,o.length),String.fromCharCode.apply(String,w)+"~>"},i=function(m){var o,w,E,I,D,O=String,P="length",W=255,H="charCodeAt",z="slice",Z="replace";for(m[z](-2),m=m[z](0,-2)[Z](/\s/g,"")[Z]("z","!!!!!"),E=[],I=0,D=(m+=o="uuuuu"[z](m[P]%5||5))[P];D>I;I+=5)w=52200625*(m[H](I)-33)+614125*(m[H](I+1)-33)+7225*(m[H](I+2)-33)+85*(m[H](I+3)-33)+(m[H](I+4)-33),E.push(W&w>>24,W&w>>16,W&w>>8,W&w);return(function(se,ae){for(var fe=ae;fe>0;fe--)se.pop()})(E,o[P]),O.fromCharCode.apply(O,E)},a=function(m){return m.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},u=function(m){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((m=m.replace(/\s/g,"")).indexOf(">")!==-1&&(m=m.substr(0,m.indexOf(">"))),m.length%2&&(m+="0"),o.test(m)===!1)return"";for(var w="",E=0;E<m.length;E+=2)w+=String.fromCharCode("0x"+(m[E]+m[E+1]));return w},f=function(m){for(var o=new Uint8Array(m.length),w=m.length;w--;)o[w]=m.charCodeAt(w);return(o=R_(o)).reduce(function(E,I){return E+String.fromCharCode(I)},"")};e.processDataByFilters=function(m,o){var w=0,E=m||"",I=[];for(typeof(o=o||[])=="string"&&(o=[o]),w=0;w<o.length;w+=1)switch(o[w]){case"ASCII85Decode":case"/ASCII85Decode":E=i(E),I.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":E=n(E),I.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":E=u(E),I.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":E=a(E),I.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":E=f(E),I.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[w]+'" is not implemented')}return{data:E,reverseChain:I.reverse().join(" ")}}})(dn.API),(function(e){e.loadFile=function(n,i,a){return(function(u,f,m){f=f!==!1,m=typeof m=="function"?m:function(){};var o=void 0;try{o=(function(w,E,I){var D=new XMLHttpRequest,O=0,P=function(W){var H=W.length,z=[],Z=String.fromCharCode;for(O=0;O<H;O+=1)z.push(Z(255&W.charCodeAt(O)));return z.join("")};if(D.open("GET",w,!E),D.overrideMimeType("text/plain; charset=x-user-defined"),E===!1&&(D.onload=function(){D.status===200?I(P(this.responseText)):I(void 0)}),D.send(null),E&&D.status===200)return P(D.responseText)})(u,f,m)}catch{}return o})(n,i,a)},e.loadImageFile=e.loadFile})(dn.API),(function(e){function n(){return(kn.html2canvas?Promise.resolve(kn.html2canvas):M1(()=>Promise.resolve().then(()=>v7),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function i(){return(kn.DOMPurify?Promise.resolve(kn.DOMPurify):M1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var w=rs(o);return w==="undefined"?"undefined":w==="string"||o instanceof String?"string":w==="number"||o instanceof Number?"number":w==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":w==="object"?"object":"unknown"},u=function(o,w){var E=document.createElement(o);for(var I in w.className&&(E.className=w.className),w.innerHTML&&w.dompurify&&(E.innerHTML=w.dompurify.sanitize(w.innerHTML)),w.style)E.style[I]=w.style[I];return E},f=function o(w,E){for(var I=w.nodeType===3?document.createTextNode(w.nodeValue):w.cloneNode(!1),D=w.firstChild;D;D=D.nextSibling)E!==!0&&D.nodeType===1&&D.nodeName==="SCRIPT"||I.appendChild(o(D,E));return w.nodeType===1&&(w.nodeName==="CANVAS"?(I.width=w.width,I.height=w.height,I.getContext("2d").drawImage(w,0,0)):w.nodeName!=="TEXTAREA"&&w.nodeName!=="SELECT"||(I.value=w.value),I.addEventListener("load",function(){I.scrollTop=w.scrollTop,I.scrollLeft=w.scrollLeft},!0)),I},m=function o(w){var E=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),I=o.convert(Promise.resolve(),E);return(I=I.setProgress(1,o,1,[o])).set(w)};(m.prototype=Object.create(Promise.prototype)).constructor=m,m.convert=function(o,w){return o.__proto__=w||m.prototype,o},m.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},m.prototype.from=function(o,w){return this.then(function(){switch(w=w||(function(E){switch(a(E)){case"string":return"string";case"element":return E.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),w){case"string":return this.then(i).then(function(E){return this.set({src:u("div",{innerHTML:o,dompurify:E})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},m.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},m.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},w=f(this.prop.src,this.opt.html2canvas.javascriptEnabled);w.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=u("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=u("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(w),this.prop.container.firstChild.appendChild(u("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},m.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(w){var E=Object.assign({},this.opt.html2canvas);return delete E.onrendered,w(this.prop.container,E)}).then(function(w){(this.opt.html2canvas.onrendered||function(){})(w),this.prop.canvas=w,document.body.removeChild(this.prop.overlay)})},m.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(w){var E=this.opt.jsPDF,I=this.opt.fontFaces,D=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,O=Object.assign({async:!0,allowTaint:!0,scale:D,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete O.onrendered,E.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,E.context2d.posX=this.opt.x,E.context2d.posY=this.opt.y,E.context2d.margin=this.opt.margin,E.context2d.fontFaces=I,I)for(var P=0;P<I.length;++P){var W=I[P],H=W.src.find(function(z){return z.format==="truetype"});H&&E.addFont(H.url,W.ref.name,W.ref.style)}return O.windowHeight=O.windowHeight||0,O.windowHeight=O.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):O.windowHeight,E.context2d.save(!0),w(this.prop.container,O)}).then(function(w){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(w),this.prop.canvas=w,document.body.removeChild(this.prop.overlay)})},m.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},m.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},m.prototype.output=function(o,w,E){return(E=E||"pdf").toLowerCase()==="img"||E.toLowerCase()==="image"?this.outputImg(o,w):this.outputPdf(o,w)},m.prototype.outputPdf=function(o,w){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,w)})},m.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},m.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},m.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},m.prototype.set=function(o){if(a(o)!=="object")return this;var w=Object.keys(o||{}).map(function(E){if(E in m.template.prop)return function(){this.prop[E]=o[E]};switch(E){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[E]=o[E]}}},this);return this.then(function(){return this.thenList(w)})},m.prototype.get=function(o,w){return this.then(function(){var E=o in m.template.prop?this.prop[o]:this.opt[o];return w?w(E):E})},m.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},m.prototype.setPageSize=function(o){function w(E,I){return Math.floor(E*I/72*96)}return this.then(function(){(o=o||dn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:w(o.inner.width,o.k),height:w(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},m.prototype.setProgress=function(o,w,E,I){return o!=null&&(this.progress.val=o),w!=null&&(this.progress.state=w),E!=null&&(this.progress.n=E),I!=null&&(this.progress.stack=I),this.progress.ratio=this.progress.val/this.progress.state,this},m.prototype.updateProgress=function(o,w,E,I){return this.setProgress(o?this.progress.val+o:null,w||null,E?this.progress.n+E:null,I?this.progress.stack.concat(I):null)},m.prototype.then=function(o,w){var E=this;return this.thenCore(o,w,function(I,D){return E.updateProgress(null,null,1,[I]),Promise.prototype.then.call(this,function(O){return E.updateProgress(null,I),O}).then(I,D).then(function(O){return E.updateProgress(1),O})})},m.prototype.thenCore=function(o,w,E){E=E||Promise.prototype.then;var I=this;o&&(o=o.bind(I)),w&&(w=w.bind(I));var D=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?I:m.convert(Object.assign({},I),Promise.prototype),O=E.call(D,o,w);return m.convert(O,I.__proto__)},m.prototype.thenExternal=function(o,w){return Promise.prototype.then.call(this,o,w)},m.prototype.thenList=function(o){var w=this;return o.forEach(function(E){w=w.thenCore(E)}),w},m.prototype.catch=function(o){o&&(o=o.bind(this));var w=Promise.prototype.catch.call(this,o);return m.convert(w,this)},m.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},m.prototype.error=function(o){return this.then(function(){throw new Error(o)})},m.prototype.using=m.prototype.set,m.prototype.saveAs=m.prototype.save,m.prototype.export=m.prototype.output,m.prototype.run=m.prototype.then,dn.getPageSize=function(o,w,E){if(rs(o)==="object"){var I=o;o=I.orientation,w=I.unit||w,E=I.format||E}w=w||"mm",E=E||"a4",o=(""+(o||"P")).toLowerCase();var D,O=(""+E).toLowerCase(),P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(w){case"pt":D=1;break;case"mm":D=72/25.4;break;case"cm":D=72/2.54;break;case"in":D=72;break;case"px":D=.75;break;case"pc":case"em":D=12;break;case"ex":D=6;break;default:throw"Invalid unit: "+w}var W,H=0,z=0;if(P.hasOwnProperty(O))H=P[O][1]/D,z=P[O][0]/D;else try{H=E[1],z=E[0]}catch{throw new Error("Invalid format: "+E)}if(o==="p"||o==="portrait")o="p",z>H&&(W=z,z=H,H=W);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",H>z&&(W=z,z=H,H=W)}return{width:z,height:H,unit:w,k:D,orientation:o}},e.html=function(o,w){(w=w||{}).callback=w.callback||function(){},w.html2canvas=w.html2canvas||{},w.html2canvas.canvas=w.html2canvas.canvas||this.canvas,w.jsPDF=w.jsPDF||this,w.fontFaces=w.fontFaces?w.fontFaces.map(Z1):null;var E=new m(w);return w.worker?E:E.from(o).doCallback()}})(dn.API),dn.API.addJS=function(e){return VC=e,this.internal.events.subscribe("postPutResources",function(){C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+VC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C0!==void 0&&jC!==void 0&&this.internal.out("/Names <</JavaScript "+C0+" 0 R>>")}),this},(function(e){var n;e.events.push(["postPutResources",function(){var i=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var u=i.outline.render().split(/\r\n/),f=0;f<u.length;f++){var m=u[f],o=a.exec(m);if(o!=null){var w=o[1];i.internal.newObjectDeferredBegin(w,!1)}i.internal.write(m)}if(this.outline.createNamedDestinations){var E=this.internal.pages.length,I=[];for(f=0;f<E;f++){var D=i.internal.newObject();I.push(D);var O=i.internal.getPageInfo(f+1);i.internal.write("<< /D["+O.objId+" 0 R /XYZ null null null]>> endobj")}var P=i.internal.newObject();for(i.internal.write("<< /Names [ "),f=0;f<I.length;f++)i.internal.write("(page_"+(f+1)+")"+I[f]+" 0 R");i.internal.write(" ] >>","endobj"),n=i.internal.newObject(),i.internal.write("<< /Dests "+P+" 0 R"),i.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var i=this;i.outline.root.children.length>0&&(i.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&i.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(a,u,f){var m={title:u,options:f,children:[]};return a==null&&(a=this.root),a.children.push(m),m},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(a){a.id=i.internal.newObjectDeferred();for(var u=0;u<a.children.length;u++)this.genIds_r(a.children[u])},i.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},i.outline.renderItems=function(a){for(var u=this.ctx.pdf.internal.getVerticalCoordinateString,f=0;f<a.children.length;f++){var m=a.children[f];this.objStart(m),this.line("/Title "+this.makeString(m.title)),this.line("/Parent "+this.makeRef(a)),f>0&&this.line("/Prev "+this.makeRef(a.children[f-1])),f<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[f+1])),m.children.length>0&&(this.line("/First "+this.makeRef(m.children[0])),this.line("/Last "+this.makeRef(m.children[m.children.length-1])));var o=this.count=this.count_r({count:0},m);if(o>0&&this.line("/Count "+o),m.options&&m.options.pageNumber){var w=i.internal.getPageInfo(m.options.pageNumber);this.line("/Dest ["+w.objId+" 0 R /XYZ 0 "+u(0)+" 0]")}this.objEnd()}for(var E=0;E<a.children.length;E++)this.renderItems(a.children[E])},i.outline.line=function(a){this.ctx.val+=a+`\r
`},i.outline.makeRef=function(a){return a.id+" 0 R"},i.outline.makeString=function(a){return"("+i.internal.pdfEscape(a)+")"},i.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(a,u){for(var f=0;f<u.children.length;f++)a.count++,this.count_r(a,u.children[f]);return a.count}}])})(dn.API),(function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(i,a,u,f,m,o){var w,E=this.decode.DCT_DECODE,I=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=m||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,w=(function(D){for(var O,P=256*D.charCodeAt(4)+D.charCodeAt(5),W=D.length,H={width:0,height:0,numcomponents:1},z=4;z<W;z+=2){if(z+=P,n.indexOf(D.charCodeAt(z+1))!==-1){O=256*D.charCodeAt(z+5)+D.charCodeAt(z+6),H={width:256*D.charCodeAt(z+7)+D.charCodeAt(z+8),height:O,numcomponents:D.charCodeAt(z+9)};break}P=256*D.charCodeAt(z+2)+D.charCodeAt(z+3)}return H})(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i),w.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}I={data:i,width:w.width,height:w.height,colorSpace:o,bitsPerComponent:8,filter:E,index:a,alias:u}}return I}})(dn.API),dn.API.processPNG=function(e,n,i,a){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var u,f=mj(e,{checkCrc:!0}),m=f.width,o=f.height,w=f.channels,E=f.palette,I=f.depth;u=E&&w===1?(function(Oe){for(var be=Oe.width,rt=Oe.height,ue=Oe.data,me=Oe.palette,Ue=Oe.depth,Ie=!1,pt=[],lt=[],ot=void 0,Ne=!1,Te=0,yt=0;yt<me.length;yt++){var Le=$B(me[yt],4),ie=Le[0],Ce=Le[1],Me=Le[2],qe=Le[3];pt.push(ie,Ce,Me),qe!=null&&(qe===0?(Te++,lt.length<1&&lt.push(yt)):qe<255&&(Ne=!0))}if(Ne||Te>1){Ie=!0,lt=void 0;var at=be*rt;ot=new Uint8Array(at);for(var et=new DataView(ue.buffer),_t=0;_t<at;_t++){var Et=Y1(et,_t,Ue),Pt=$B(me[Et],4)[3];ot[_t]=Pt}}else Te===0&&(lt=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Ie?8:void 0,colorBytes:ue,alphaBytes:ot,needSMask:Ie,palette:pt,mask:lt}})(f):w===2||w===4?(function(Oe){for(var be=Oe.data,rt=Oe.width,ue=Oe.height,me=Oe.channels,Ue=Oe.depth,Ie=me===2?"DeviceGray":"DeviceRGB",pt=me-1,lt=rt*ue,ot=pt,Ne=lt*ot,Te=1*lt,yt=Math.ceil(Ne*Ue/8),Le=Math.ceil(Te*Ue/8),ie=new Uint8Array(yt),Ce=new Uint8Array(Le),Me=new DataView(be.buffer),qe=new DataView(ie.buffer),at=new DataView(Ce.buffer),et=!1,_t=0;_t<lt;_t++){for(var Et=_t*me,Pt=0;Pt<ot;Pt++)JC(qe,Y1(Me,Et+Pt,Ue),_t*ot+Pt,Ue);var Kt=Y1(Me,Et+ot,Ue);Kt<(1<<Ue)-1&&(et=!0),JC(at,Kt,1*_t,Ue)}return{colorSpace:Ie,colorsPerPixel:pt,sMaskBitsPerComponent:et?Ue:void 0,colorBytes:ie,alphaBytes:Ce,needSMask:et}})(f):(function(Oe){var be=Oe.data,rt=Oe.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:rt,colorsPerPixel:rt==="DeviceGray"?1:3,colorBytes:be instanceof Uint16Array?(function(ue){for(var me=ue.length,Ue=new Uint8Array(2*me),Ie=new DataView(Ue.buffer,Ue.byteOffset,Ue.byteLength),pt=0;pt<me;pt++)Ie.setUint16(2*pt,ue[pt],!1);return Ue})(be):be,needSMask:!1}})(f);var D,O,P,W=u,H=W.colorSpace,z=W.colorsPerPixel,Z=W.sMaskBitsPerComponent,se=W.colorBytes,ae=W.alphaBytes,fe=W.needSMask,Fe=W.palette,He=W.mask,Ve=null;return a!==dn.API.image_compression.NONE&&typeof R_=="function"?(Ve=(function(Oe){var be;switch(Oe){case dn.API.image_compression.FAST:be=11;break;case dn.API.image_compression.MEDIUM:be=13;break;case dn.API.image_compression.SLOW:be=14;break;default:be=12}return be})(a),D=this.decode.FLATE_DECODE,O="/Predictor ".concat(Ve," /Colors ").concat(z," /BitsPerComponent ").concat(I," /Columns ").concat(m),e=$C(se,Math.ceil(m*z*I/8),z,I,a),fe&&(P=$C(ae,Math.ceil(m*Z/8),1,Z,a))):(D=void 0,O=void 0,e=se,fe&&(P=ae)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:i,data:e,index:n,filter:D,decodeParameters:O,transparency:He,palette:Fe,sMask:P,predictor:Ve,width:m,height:o,bitsPerComponent:I,sMaskBitsPerComponent:Z,colorSpace:H}}},(function(e){e.processGIF89A=function(n,i,a,u){var f=new Rj(n),m=f.width,o=f.height,w=[];f.decodeAndBlitFrameRGBA(0,w);var E={data:w,width:m,height:o},I=new J1(100).encode(E,100);return e.processJPEG.call(this,I,i,a,u)},e.processGIF87A=e.processGIF89A})(dn.API),Eu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:u,green:a,blue:i,quad:f}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Eu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(i){gs.log("bit decode error:"+i)}},Eu.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),i=n%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,u=0;u<n;u++)for(var f=this.datav.getUint8(this.pos++,!0),m=a*this.width*4+8*u*4,o=0;o<8&&8*u+o<this.width;o++){var w=this.palette[f>>7-o&1];this.data[m+4*o]=w.blue,this.data[m+4*o+1]=w.green,this.data[m+4*o+2]=w.red,this.data[m+4*o+3]=255}i!==0&&(this.pos+=4-i)}},Eu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,u=0;u<e;u++){var f=this.datav.getUint8(this.pos++,!0),m=a*this.width*4+2*u*4,o=f>>4,w=15&f,E=this.palette[o];if(this.data[m]=E.blue,this.data[m+1]=E.green,this.data[m+2]=E.red,this.data[m+3]=255,2*u+1>=this.width)break;E=this.palette[w],this.data[m+4]=E.blue,this.data[m+4+1]=E.green,this.data[m+4+2]=E.red,this.data[m+4+3]=255}n!==0&&(this.pos+=4-n)}},Eu.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var u=this.datav.getUint8(this.pos++,!0),f=i*this.width*4+4*a;if(u<this.palette.length){var m=this.palette[u];this.data[f]=m.red,this.data[f+1]=m.green,this.data[f+2]=m.blue,this.data[f+3]=255}else this.data[f]=255,this.data[f+1]=255,this.data[f+2]=255,this.data[f+3]=255}e!==0&&(this.pos+=4-e)}},Eu.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,u=0;u<this.width;u++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(f&n)/n*255|0,o=(f>>5&n)/n*255|0,w=(f>>10&n)/n*255|0,E=f>>15?255:0,I=a*this.width*4+4*u;this.data[I]=w,this.data[I+1]=o,this.data[I+2]=m,this.data[I+3]=E}this.pos+=e}},Eu.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),i=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var u=this.bottom_up?a:this.height-1-a,f=0;f<this.width;f++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(m&n)/n*255|0,w=(m>>5&i)/i*255|0,E=(m>>11)/n*255|0,I=u*this.width*4+4*f;this.data[I]=E,this.data[I+1]=w,this.data[I+2]=o,this.data[I+3]=255}this.pos+=e}},Eu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),m=n*this.width*4+4*i;this.data[m]=f,this.data[m+1]=u,this.data[m+2]=a,this.data[m+3]=255}this.pos+=this.width%4}},Eu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;this.data[o]=f,this.data[o+1]=u,this.data[o+2]=a,this.data[o+3]=m}},Eu.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(n,i,a,u){var f=new Eu(n,!1),m=f.width,o=f.height,w={data:f.getData(),width:m,height:o},E=new J1(100).encode(w,100);return e.processJPEG.call(this,E,i,a,u)}})(dn.API),t5.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(n,i,a,u){var f=new t5(n),m=f.width,o=f.height,w={data:f.getData(),width:m,height:o},E=new J1(100).encode(w,100);return e.processJPEG.call(this,E,i,a,u)}})(dn.API),dn.API.processRGBA=function(e,n,i){for(var a=e.data,u=a.length,f=new Uint8Array(u/4*3),m=new Uint8Array(u/4),o=0,w=0,E=0;E<u;E+=4){var I=a[E],D=a[E+1],O=a[E+2],P=a[E+3];f[o++]=I,f[o++]=D,f[o++]=O,m[w++]=P}var W=this.__addimage__.arrayBufferToBinaryString(f);return{alpha:this.__addimage__.arrayBufferToBinaryString(m),data:W,index:n,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},dn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zd=dn.API,E0=Zd.getCharWidthsArray=function(e,n){var i,a,u=(n=n||{}).font||this.internal.getFont(),f=n.fontSize||this.internal.getFontSize(),m=n.charSpace||this.internal.getCharSpace(),o=n.widths?n.widths:u.metadata.Unicode.widths,w=o.fof?o.fof:1,E=n.kerning?n.kerning:u.metadata.Unicode.kerning,I=E.fof?E.fof:1,D=n.doKerning!==!1,O=0,P=e.length,W=0,H=o[0]||w,z=[];for(i=0;i<P;i++)a=e.charCodeAt(i),typeof u.metadata.widthOfString=="function"?z.push((u.metadata.widthOfGlyph(u.metadata.characterToGlyph(a))+m*(1e3/f)||0)/1e3):(O=D&&rs(E[a])==="object"&&!isNaN(parseInt(E[a][W],10))?E[a][W]/I:0,z.push((o[a]||H)/w+O)),W=a;return z},GC=Zd.getStringUnitWidth=function(e,n){var i=(n=n||{}).fontSize||this.internal.getFontSize(),a=n.font||this.internal.getFont(),u=n.charSpace||this.internal.getCharSpace();return Zd.processArabic&&(e=Zd.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,i,u)/i:E0.apply(this,arguments).reduce(function(f,m){return f+m},0)},KC=function(e,n,i,a){for(var u=[],f=0,m=e.length,o=0;f!==m&&o+n[f]<i;)o+=n[f],f++;u.push(e.slice(0,f));var w=f;for(o=0;f!==m;)o+n[f]>a&&(u.push(e.slice(w,f)),o=0,w=f),o+=n[f],f++;return w!==f&&u.push(e.slice(w,f)),u},qC=function(e,n,i){i||(i={});var a,u,f,m,o,w,E,I=[],D=[I],O=i.textIndent||0,P=0,W=0,H=e.split(" "),z=E0.apply(this,[" ",i])[0];if(w=i.lineIndent===-1?H[0].length+2:i.lineIndent||0){var Z=Array(w).join(" "),se=[];H.map(function(fe){(fe=fe.split(/\s*\n/)).length>1?se=se.concat(fe.map(function(Fe,He){return(He&&Fe.length?`
`:"")+Fe})):se.push(fe[0])}),H=se,w=GC.apply(this,[Z,i])}for(f=0,m=H.length;f<m;f++){var ae=0;if(a=H[f],w&&a[0]==`
`&&(a=a.substr(1),ae=1),O+P+(W=(u=E0.apply(this,[a,i])).reduce(function(fe,Fe){return fe+Fe},0))>n||ae){if(W>n){for(o=KC.apply(this,[a,u,n-(O+P),n]),I.push(o.shift()),I=[o.pop()];o.length;)D.push([o.shift()]);W=u.slice(a.length-(I[0]?I[0].length:0)).reduce(function(fe,Fe){return fe+Fe},0)}else I=[a];D.push(I),O=W+w,P=z}else I.push(a),O+=P+W,P=z}return E=w?function(fe,Fe){return(Fe?Z:"")+fe.join(" ")}:function(fe){return fe.join(" ")},D.map(E)},Zd.splitTextToSize=function(e,n,i){var a,u=(i=i||{}).fontSize||this.internal.getFontSize(),f=(function(I){if(I.widths&&I.kerning)return{widths:I.widths,kerning:I.kerning};var D=this.internal.getFont(I.fontName,I.fontStyle),O="Unicode";return D.metadata[O]?{widths:D.metadata[O].widths||{0:1},kerning:D.metadata[O].kerning||{}}:{font:D.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var m=1*this.internal.scaleFactor*n/u;f.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/u:0,f.lineIndent=i.lineIndent;var o,w,E=[];for(o=0,w=a.length;o<w;o++)E=E.concat(qC.apply(this,[a[o],m,f]));return E},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="0123456789abcdef",i="klmnopqrstuvwxyz",a={},u={},f=0;f<16;f++)a[i[f]]=n[f],u[n[f]]=i[f];var m=function(O){return"0x"+parseInt(O,10).toString(16)},o=e.__fontmetrics__.compress=function(O){var P,W,H,z,Z=["{"];for(var se in O){if(P=O[se],isNaN(parseInt(se,10))?W="'"+se+"'":(se=parseInt(se,10),W=(W=m(se).slice(2)).slice(0,-1)+u[W.slice(-1)]),typeof P=="number")P<0?(H=m(P).slice(3),z="-"):(H=m(P).slice(2),z=""),H=z+H.slice(0,-1)+u[H.slice(-1)];else{if(rs(P)!=="object")throw new Error("Don't know what to do with value type "+rs(P)+".");H=o(P)}Z.push(W+H)}return Z.push("}"),Z.join("")},w=e.__fontmetrics__.uncompress=function(O){if(typeof O!="string")throw new Error("Invalid argument passed to uncompress.");for(var P,W,H,z,Z={},se=1,ae=Z,fe=[],Fe="",He="",Ve=O.length-1,Oe=1;Oe<Ve;Oe+=1)(z=O[Oe])=="'"?P?(H=P.join(""),P=void 0):P=[]:P?P.push(z):z=="{"?(fe.push([ae,H]),ae={},H=void 0):z=="}"?((W=fe.pop())[0][W[1]]=ae,H=void 0,ae=W[0]):z=="-"?se=-1:H===void 0?a.hasOwnProperty(z)?(Fe+=a[z],H=parseInt(Fe,16)*se,se=1,Fe=""):Fe+=z:a.hasOwnProperty(z)?(He+=a[z],ae[H]=parseInt(He,16)*se,se=1,H=void 0,He=""):He+=z;return Z},E={codePages:["WinAnsiEncoding"],WinAnsiEncoding:w("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},I={Unicode:{Courier:E,"Courier-Bold":E,"Courier-BoldOblique":E,"Courier-Oblique":E,Helvetica:E,"Helvetica-Bold":E,"Helvetica-BoldOblique":E,"Helvetica-Oblique":E,"Times-Roman":E,"Times-Bold":E,"Times-BoldItalic":E,"Times-Italic":E}},D={Unicode:{"Courier-Oblique":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":w("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":w("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":w("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:w("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:w("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":w("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:w("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":w("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":w("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":w("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(O){var P=O.font,W=D.Unicode[P.postScriptName];W&&(P.metadata.Unicode={},P.metadata.Unicode.widths=W.widths,P.metadata.Unicode.kerning=W.kerning);var H=I.Unicode[P.postScriptName];H&&(P.metadata.Unicode.encoding=H,P.encoding=H.codePages[0])}])})(dn.API),(function(e){var n=function(i){for(var a=i.length,u=new Uint8Array(a),f=0;f<a;f++)u[f]=i.charCodeAt(f);return u};e.API.events.push(["addFont",function(i){var a=void 0,u=i.font,f=i.instance;if(!u.isStandardFont){if(f===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");if(typeof(a=f.existsFileInVFS(u.postScriptName)===!1?f.loadFile(u.postScriptName):f.getFileFromVFS(u.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");(function(m,o){o=/^\x00\x01\x00\x00/.test(o)?n(o):n(O0(o)),m.metadata=e.API.TTFFont.open(o),m.metadata.Unicode=m.metadata.Unicode||{encoding:{},kerning:{},widths:[]},m.metadata.glyIdsUsed=[0]})(u,a)}}])})(dn),dn.API.addSvgAsImage=function(e,n,i,a,u,f,m,o){if(isNaN(n)||isNaN(i))throw gs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(u))throw gs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=a,w.height=u;var E=w.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,w.width,w.height);var I={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},D=this;return(kn.canvg?Promise.resolve(kn.canvg):M1(()=>import("./index.es-D4SBxK0u.js"),[])).catch(function(O){return Promise.reject(new Error("Could not load canvg: "+O))}).then(function(O){return O.default?O.default:O}).then(function(O){return O.fromString(E,e,I)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(O){return O.render(I)}).then(function(){D.addImage(w.toDataURL("image/jpeg",1),n,i,a,u,m,o)})},dn.API.putTotalPages=function(e){var n,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),i=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var u=0;u<this.internal.pages[a].length;u++)this.internal.pages[a][u]=this.internal.pages[a][u].replace(n,i);return this},dn.API.viewerPreferences=function(e,n){var i;e=e||{},n=n||!1;var a,u,f,m={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(m),w=[],E=0,I=0,D=0;function O(W,H){var z,Z=!1;for(z=0;z<W.length;z+=1)W[z]===H&&(Z=!0);return Z}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(m)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var P=o.length;for(D=0;D<P;D+=1)i[o[D]].value=i[o[D]].defaultValue,i[o[D]].explicitSet=!1}if(rs(e)==="object"){for(u in e)if(f=e[u],O(o,u)&&f!==void 0){if(i[u].type==="boolean"&&typeof f=="boolean")i[u].value=f;else if(i[u].type==="name"&&O(i[u].valueSet,f))i[u].value=f;else if(i[u].type==="integer"&&Number.isInteger(f))i[u].value=f;else if(i[u].type==="array"){for(E=0;E<f.length;E+=1)if(a=!0,f[E].length===1&&typeof f[E][0]=="number")w.push(String(f[E]-1));else if(f[E].length>1){for(I=0;I<f[E].length;I+=1)typeof f[E][I]!="number"&&(a=!1);a===!0&&w.push([f[E][0]-1,f[E][1]-1].join(" "))}i[u].value="["+w.join(" ")+"]"}else i[u].value=i[u].defaultValue;i[u].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var W,H=[];for(W in i)i[W].explicitSet===!0&&(i[W].type==="name"?H.push("/"+W+" /"+i[W].value):H.push("/"+W+" "+i[W].value));H.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+H.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},(function(e){var n=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',u=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),f=unescape(encodeURIComponent(a)),m=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),w=unescape(encodeURIComponent("</x:xmpmeta>")),E=f.length+m.length+o.length+u.length+w.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+E+" >>"),this.internal.write("stream"),this.internal.write(u+f+m+o+w),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,u){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:u||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",n)),this}})(dn.API),(function(e){var n=e.API,i=n.pdfEscape16=function(f,m){for(var o,w=m.metadata.Unicode.widths,E=["","0","00","000","0000"],I=[""],D=0,O=f.length;D<O;++D){if(o=m.metadata.characterToGlyph(f.charCodeAt(D)),m.metadata.glyIdsUsed.push(o),m.metadata.toUnicode[o]=f.charCodeAt(D),w.indexOf(o)==-1&&(w.push(o),w.push([parseInt(m.metadata.widthOfGlyph(o),10)])),o=="0")return I.join("");o=o.toString(16),I.push(E[4-o.length],o)}return I.join("")},a=function(f){var m,o,w,E,I,D,O;for(I=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,w=[],D=0,O=(o=Object.keys(f).sort(function(P,W){return P-W})).length;D<O;D++)m=o[D],w.length>=100&&(I+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar`,w=[]),f[m]!==void 0&&f[m]!==null&&typeof f[m].toString=="function"&&(E=("0000"+f[m].toString(16)).slice(-4),m=("0000"+(+m).toString(16)).slice(-4),w.push("<"+m+"><"+E+">"));return w.length&&(I+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar
`),I+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(f){(function(m){var o=m.font,w=m.out,E=m.newObject,I=m.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var D=o.metadata.Unicode.widths,O=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),P="",W=0;W<O.length;W++)P+=String.fromCharCode(O[W]);var H=E();I({data:P,addLength1:!0,objectId:H}),w("endobj");var z=E();I({data:a(o.metadata.toUnicode),addLength1:!0,objectId:z}),w("endobj");var Z=E();w("<<"),w("/Type /FontDescriptor"),w("/FontName /"+np(o.fontName)),w("/FontFile2 "+H+" 0 R"),w("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),w("/Flags "+o.metadata.flags),w("/StemV "+o.metadata.stemV),w("/ItalicAngle "+o.metadata.italicAngle),w("/Ascent "+o.metadata.ascender),w("/Descent "+o.metadata.decender),w("/CapHeight "+o.metadata.capHeight),w(">>"),w("endobj");var se=E();w("<<"),w("/Type /Font"),w("/BaseFont /"+np(o.fontName)),w("/FontDescriptor "+Z+" 0 R"),w("/W "+e.API.PDFObject.convert(D)),w("/CIDToGIDMap /Identity"),w("/DW 1000"),w("/Subtype /CIDFontType2"),w("/CIDSystemInfo"),w("<<"),w("/Supplement 0"),w("/Registry (Adobe)"),w("/Ordering ("+o.encoding+")"),w(">>"),w(">>"),w("endobj"),o.objectNumber=E(),w("<<"),w("/Type /Font"),w("/Subtype /Type0"),w("/ToUnicode "+z+" 0 R"),w("/BaseFont /"+np(o.fontName)),w("/Encoding /"+o.encoding),w("/DescendantFonts ["+se+" 0 R]"),w(">>"),w("endobj"),o.isAlreadyPutted=!0}})(f)}]),n.events.push(["putFont",function(f){(function(m){var o=m.font,w=m.out,E=m.newObject,I=m.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var D=o.metadata.rawData,O="",P=0;P<D.length;P++)O+=String.fromCharCode(D[P]);var W=E();I({data:O,addLength1:!0,objectId:W}),w("endobj");var H=E();I({data:a(o.metadata.toUnicode),addLength1:!0,objectId:H}),w("endobj");var z=E();w("<<"),w("/Descent "+o.metadata.decender),w("/CapHeight "+o.metadata.capHeight),w("/StemV "+o.metadata.stemV),w("/Type /FontDescriptor"),w("/FontFile2 "+W+" 0 R"),w("/Flags 96"),w("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),w("/FontName /"+np(o.fontName)),w("/ItalicAngle "+o.metadata.italicAngle),w("/Ascent "+o.metadata.ascender),w(">>"),w("endobj"),o.objectNumber=E();for(var Z=0;Z<o.metadata.hmtx.widths.length;Z++)o.metadata.hmtx.widths[Z]=parseInt(o.metadata.hmtx.widths[Z]*(1e3/o.metadata.head.unitsPerEm));w("<</Subtype/TrueType/Type/Font/ToUnicode "+H+" 0 R/BaseFont/"+np(o.fontName)+"/FontDescriptor "+z+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),w("endobj"),o.isAlreadyPutted=!0}})(f)}]);var u=function(f){var m,o=f.text||"",w=f.x,E=f.y,I=f.options||{},D=f.mutex||{},O=D.pdfEscape,P=D.activeFontKey,W=D.fonts,H=P,z="",Z=0,se="",ae=W[H].encoding;if(W[H].encoding!=="Identity-H")return{text:o,x:w,y:E,options:I,mutex:D};for(se=o,H=P,Array.isArray(o)&&(se=o[0]),Z=0;Z<se.length;Z+=1)W[H].metadata.hasOwnProperty("cmap")&&(m=W[H].metadata.cmap.unicode.codeMap[se[Z].charCodeAt(0)]),m||se[Z].charCodeAt(0)<256&&W[H].metadata.hasOwnProperty("Unicode")?z+=se[Z]:z+="";var fe="";return parseInt(H.slice(1))<14||ae==="WinAnsiEncoding"?fe=O(z,H).split("").map(function(Fe){return Fe.charCodeAt(0).toString(16)}).join(""):ae==="Identity-H"&&(fe=i(z,W[H])),D.isHex=!0,{text:fe,x:w,y:E,options:I,mutex:D}};n.events.push(["postProcessText",function(f){var m=f.text||"",o=[],w={text:m,x:f.x,y:f.y,options:f.options,mutex:f.mutex};if(Array.isArray(m)){var E=0;for(E=0;E<m.length;E+=1)Array.isArray(m[E])&&m[E].length===3?o.push([u(Object.assign({},w,{text:m[E][0]})).text,m[E][1],m[E][2]]):o.push(u(Object.assign({},w,{text:m[E]})).text);f.text=o}else f.text=u(Object.assign({},w,{text:m})).text}])})(dn),(function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(i){return n.call(this),this.internal.vFS[i]!==void 0},e.addFileToVFS=function(i,a){return n.call(this),this.internal.vFS[i]=a,this},e.getFileFromVFS=function(i){return n.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}})(dn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var u,f,m,o,w,E,I,D=n,O=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],P=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],W={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},H={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},z=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Z=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),se=!1,ae=0;this.__bidiEngine__={};var fe=function(ue){var me=ue.charCodeAt(),Ue=me>>8,Ie=H[Ue];return Ie!==void 0?D[256*Ie+(255&me)]:Ue===252||Ue===253?"AL":Z.test(Ue)?"L":Ue===8?"R":"N"},Fe=function(ue){for(var me,Ue=0;Ue<ue.length;Ue++){if((me=fe(ue.charAt(Ue)))==="L")return!1;if(me==="R")return!0}return!1},He=function(ue,me,Ue,Ie){var pt,lt,ot,Ne,Te=me[Ie];switch(Te){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":se=!1;break;case"N":case"AN":break;case"EN":se&&(Te="AN");break;case"AL":se=!0,Te="R";break;case"WS":case"BN":Te="N";break;case"CS":Ie<1||Ie+1>=me.length||(pt=Ue[Ie-1])!=="EN"&&pt!=="AN"||(lt=me[Ie+1])!=="EN"&&lt!=="AN"?Te="N":se&&(lt="AN"),Te=lt===pt?lt:"N";break;case"ES":Te=(pt=Ie>0?Ue[Ie-1]:"B")==="EN"&&Ie+1<me.length&&me[Ie+1]==="EN"?"EN":"N";break;case"ET":if(Ie>0&&Ue[Ie-1]==="EN"){Te="EN";break}if(se){Te="N";break}for(ot=Ie+1,Ne=me.length;ot<Ne&&me[ot]==="ET";)ot++;Te=ot<Ne&&me[ot]==="EN"?"EN":"N";break;case"NSM":if(m&&!o){for(Ne=me.length,ot=Ie+1;ot<Ne&&me[ot]==="NSM";)ot++;if(ot<Ne){var yt=ue[Ie],Le=yt>=1425&&yt<=2303||yt===64286;if(pt=me[ot],Le&&(pt==="R"||pt==="AL")){Te="R";break}}}Te=Ie<1||(pt=me[Ie-1])==="B"?"N":Ue[Ie-1];break;case"B":se=!1,u=!0,Te=ae;break;case"S":f=!0,Te="N"}return Te},Ve=function(ue,me,Ue){var Ie=ue.split("");return Ue&&Oe(Ie,Ue,{hiLevel:ae}),Ie.reverse(),me&&me.reverse(),Ie.join("")},Oe=function(ue,me,Ue){var Ie,pt,lt,ot,Ne,Te=-1,yt=ue.length,Le=0,ie=[],Ce=ae?P:O,Me=[];for(se=!1,u=!1,f=!1,pt=0;pt<yt;pt++)Me[pt]=fe(ue[pt]);for(lt=0;lt<yt;lt++){if(Ne=Le,ie[lt]=He(ue,Me,ie,lt),Ie=240&(Le=Ce[Ne][W[ie[lt]]]),Le&=15,me[lt]=ot=Ce[Le][5],Ie>0)if(Ie===16){for(pt=Te;pt<lt;pt++)me[pt]=1;Te=-1}else Te=-1;if(Ce[Le][6])Te===-1&&(Te=lt);else if(Te>-1){for(pt=Te;pt<lt;pt++)me[pt]=ot;Te=-1}Me[lt]==="B"&&(me[lt]=0),Ue.hiLevel|=ot}f&&(function(qe,at,et){for(var _t=0;_t<et;_t++)if(qe[_t]==="S"){at[_t]=ae;for(var Et=_t-1;Et>=0&&qe[Et]==="WS";Et--)at[Et]=ae}})(Me,me,yt)},be=function(ue,me,Ue,Ie,pt){if(!(pt.hiLevel<ue)){if(ue===1&&ae===1&&!u)return me.reverse(),void(Ue&&Ue.reverse());for(var lt,ot,Ne,Te,yt=me.length,Le=0;Le<yt;){if(Ie[Le]>=ue){for(Ne=Le+1;Ne<yt&&Ie[Ne]>=ue;)Ne++;for(Te=Le,ot=Ne-1;Te<ot;Te++,ot--)lt=me[Te],me[Te]=me[ot],me[ot]=lt,Ue&&(lt=Ue[Te],Ue[Te]=Ue[ot],Ue[ot]=lt);Le=Ne}Le++}}},rt=function(ue,me,Ue){var Ie=ue.split(""),pt={hiLevel:ae};return Ue||(Ue=[]),Oe(Ie,Ue,pt),(function(lt,ot,Ne){if(Ne.hiLevel!==0&&I)for(var Te,yt=0;yt<lt.length;yt++)ot[yt]===1&&(Te=z.indexOf(lt[yt]))>=0&&(lt[yt]=z[Te+1])})(Ie,Ue,pt),be(2,Ie,me,Ue,pt),be(1,Ie,me,Ue,pt),Ie.join("")};return this.__bidiEngine__.doBidiReorder=function(ue,me,Ue){if((function(pt,lt){if(lt)for(var ot=0;ot<pt.length;ot++)lt[ot]=ot;o===void 0&&(o=Fe(pt)),E===void 0&&(E=Fe(pt))})(ue,me),m||!w||E)if(m&&w&&o^E)ae=o?1:0,ue=Ve(ue,me,Ue);else if(!m&&w&&E)ae=o?1:0,ue=rt(ue,me,Ue),ue=Ve(ue,me);else if(!m||o||w||E){if(m&&!w&&o^E)ue=Ve(ue,me),o?(ae=0,ue=rt(ue,me,Ue)):(ae=1,ue=rt(ue,me,Ue),ue=Ve(ue,me));else if(m&&o&&!w&&E)ae=1,ue=rt(ue,me,Ue),ue=Ve(ue,me);else if(!m&&!w&&o^E){var Ie=I;o?(ae=1,ue=rt(ue,me,Ue),ae=0,I=!1,ue=rt(ue,me,Ue),I=Ie):(ae=0,ue=rt(ue,me,Ue),ue=Ve(ue,me),ae=1,I=!1,ue=rt(ue,me,Ue),I=Ie,ue=Ve(ue,me))}}else ae=0,ue=rt(ue,me,Ue);else ae=o?1:0,ue=rt(ue,me,Ue);return ue},this.__bidiEngine__.setOptions=function(ue){ue&&(m=ue.isInputVisual,w=ue.isOutputVisual,o=ue.isInputRtl,E=ue.isOutputRtl,I=ue.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var u=a.text;a.x,a.y;var f=a.options||{};a.mutex,f.lang;var m=[];if(f.isInputVisual=typeof f.isInputVisual!="boolean"||f.isInputVisual,i.setOptions(f),Object.prototype.toString.call(u)==="[object Array]"){var o=0;for(m=[],o=0;o<u.length;o+=1)Object.prototype.toString.call(u[o])==="[object Array]"?m.push([i.doBidiReorder(u[o][0]),u[o][1],u[o][2]]):m.push([i.doBidiReorder(u[o])]);a.text=m}else a.text=i.doBidiReorder(u);i.setOptions({isInputVisual:!0})}])})(dn),dn.API.TTFFont=(function(){function e(n){var i;if(this.rawData=n,i=this.contents=new Cf(n),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new Yj(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new Nj(this.contents),this.head=new Oj(this),this.name=new Gj(this),this.cmap=new TI(this),this.toUnicode={},this.hhea=new zj(this),this.maxp=new Kj(this),this.hmtx=new qj(this),this.post=new jj(this),this.os2=new Hj(this),this.loca=new Xj(this),this.glyf=new $j(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,i,a,u,f;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var m,o,w,E;for(E=[],m=0,o=(w=this.bbox).length;m<o;m++)n=w[m],E.push(Math.round(n*this.scaleFactor));return E}).call(this),this.stemV=0,this.post.exists?(a=255&(u=this.post.italic_angle),32768&(i=u>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(f=this.familyClass)===1||f===2||f===3||f===4||f===5||f===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var i;return((i=this.cmap.unicode)!=null?i.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*i},e.prototype.widthOfString=function(n,i,a){var u,f,m,o;for(m=0,f=0,o=(n=""+n).length;0<=o?f<o:f>o;f=0<=o?++f:--f)u=n.charCodeAt(f),m+=this.widthOfGlyph(this.characterToGlyph(u))+a*(1e3/i)||0;return m*(i/1e3)},e.prototype.lineHeight=function(n,i){var a;return i==null&&(i=!1),a=i?this.lineGap:0,(this.ascender+a-this.decender)/1e3*n},e})();var ku,Cf=(function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var i,a;for(a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a[i]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(n){var i,a,u;for(u=[],i=0,a=n.length;0<=a?i<a:i>a;i=0<=a?++i:--i)u.push(this.writeByte(n.charCodeAt(i)));return u},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,i,a,u,f,m,o,w;return n=this.readByte(),i=this.readByte(),a=this.readByte(),u=this.readByte(),f=this.readByte(),m=this.readByte(),o=this.readByte(),w=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^i)+1099511627776*(255^a)+4294967296*(255^u)+16777216*(255^f)+65536*(255^m)+256*(255^o)+(255^w)+1):72057594037927940*n+281474976710656*i+1099511627776*a+4294967296*u+16777216*f+65536*m+256*o+w},e.prototype.writeLongLong=function(n){var i,a;return i=Math.floor(n/4294967296),a=4294967295&n,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var i,a;for(i=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)i.push(this.readByte());return i},e.prototype.write=function(n){var i,a,u,f;for(f=[],a=0,u=n.length;a<u;a++)i=n[a],f.push(this.writeByte(i));return f},e})(),Nj=(function(){var e;function n(i){var a,u,f;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},u=0,f=this.tableCount;0<=f?u<f:u>f;u=0<=f?++u:--u)a={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[a.tag]=a}return n.prototype.encode=function(i){var a,u,f,m,o,w,E,I,D,O,P,W,H;for(H in P=Object.keys(i).length,w=Math.log(2),D=16*Math.floor(Math.log(P)/w),m=Math.floor(D/w),I=16*P-D,(u=new Cf).writeInt(this.scalarType),u.writeShort(P),u.writeShort(D),u.writeShort(m),u.writeShort(I),f=16*P,E=u.pos+f,o=null,W=[],i)for(O=i[H],u.writeString(H),u.writeInt(e(O)),u.writeInt(E),u.writeInt(O.length),W=W.concat(O),H==="head"&&(o=E),E+=O.length;E%4;)W.push(0),E++;return u.write(W),a=2981146554-e(u.data),u.pos=o+8,u.writeUInt32(a),u.data},e=function(i){var a,u,f,m;for(i=PI.call(i);i.length%4;)i.push(0);for(f=new Cf(i),u=0,a=0,m=i.length;a<m;a=a+=4)u+=f.readUInt32();return 4294967295&u},n})(),Qj={}.hasOwnProperty,lh=function(e,n){for(var i in n)Qj.call(n,i)&&(e[i]=n[i]);function a(){this.constructor=e}return a.prototype=n.prototype,e.prototype=new a,e.__super__=n.prototype,e};ku=(function(){function e(n){var i;this.file=n,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var Oj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new Cf).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e})(),r5=(function(){function e(n,i){var a,u,f,m,o,w,E,I,D,O,P,W,H,z,Z,se,ae;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=i+n.readInt(),D=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(w=0;w<256;++w)this.codeMap[w]=n.readByte();break;case 4:for(P=n.readUInt16(),O=P/2,n.pos+=6,f=(function(){var fe,Fe;for(Fe=[],w=fe=0;0<=O?fe<O:fe>O;w=0<=O?++fe:--fe)Fe.push(n.readUInt16());return Fe})(),n.pos+=2,H=(function(){var fe,Fe;for(Fe=[],w=fe=0;0<=O?fe<O:fe>O;w=0<=O?++fe:--fe)Fe.push(n.readUInt16());return Fe})(),E=(function(){var fe,Fe;for(Fe=[],w=fe=0;0<=O?fe<O:fe>O;w=0<=O?++fe:--fe)Fe.push(n.readUInt16());return Fe})(),I=(function(){var fe,Fe;for(Fe=[],w=fe=0;0<=O?fe<O:fe>O;w=0<=O?++fe:--fe)Fe.push(n.readUInt16());return Fe})(),u=(this.length-n.pos+this.offset)/2,o=(function(){var fe,Fe;for(Fe=[],w=fe=0;0<=u?fe<u:fe>u;w=0<=u?++fe:--fe)Fe.push(n.readUInt16());return Fe})(),w=Z=0,ae=f.length;Z<ae;w=++Z)for(z=f[w],a=se=W=H[w];W<=z?se<=z:se>=z;a=W<=z?++se:--se)I[w]===0?m=a+E[w]:(m=o[I[w]/2+(a-W)-(O-w)]||0)!==0&&(m+=E[w]),this.codeMap[a]=65535&m}n.pos=D}return e.encode=function(n,i){var a,u,f,m,o,w,E,I,D,O,P,W,H,z,Z,se,ae,fe,Fe,He,Ve,Oe,be,rt,ue,me,Ue,Ie,pt,lt,ot,Ne,Te,yt,Le,ie,Ce,Me,qe,at,et,_t,Et,Pt,Kt,ar;switch(Ie=new Cf,m=Object.keys(n).sort(function(hr,Cr){return hr-Cr}),i){case"macroman":for(H=0,z=(function(){var hr=[];for(W=0;W<256;++W)hr.push(0);return hr})(),se={0:0},f={},pt=0,Te=m.length;pt<Te;pt++)se[Et=n[u=m[pt]]]==null&&(se[Et]=++H),f[u]={old:n[u],new:se[n[u]]},z[u]=se[n[u]];return Ie.writeUInt16(1),Ie.writeUInt16(0),Ie.writeUInt32(12),Ie.writeUInt16(0),Ie.writeUInt16(262),Ie.writeUInt16(0),Ie.write(z),{charMap:f,subtable:Ie.data,maxGlyphID:H+1};case"unicode":for(me=[],D=[],ae=0,se={},a={},Z=E=null,lt=0,yt=m.length;lt<yt;lt++)se[Fe=n[u=m[lt]]]==null&&(se[Fe]=++ae),a[u]={old:Fe,new:se[Fe]},o=se[Fe]-u,Z!=null&&o===E||(Z&&D.push(Z),me.push(u),E=o),Z=u;for(Z&&D.push(Z),D.push(65535),me.push(65535),rt=2*(be=me.length),Oe=2*Math.pow(Math.log(be)/Math.LN2,2),O=Math.log(Oe/2)/Math.LN2,Ve=2*be-Oe,w=[],He=[],P=[],W=ot=0,Le=me.length;ot<Le;W=++ot){if(ue=me[W],I=D[W],ue===65535){w.push(0),He.push(0);break}if(ue-(Ue=a[ue].new)>=32768)for(w.push(0),He.push(2*(P.length+be-W)),u=Ne=ue;ue<=I?Ne<=I:Ne>=I;u=ue<=I?++Ne:--Ne)P.push(a[u].new);else w.push(Ue-ue),He.push(0)}for(Ie.writeUInt16(3),Ie.writeUInt16(1),Ie.writeUInt32(12),Ie.writeUInt16(4),Ie.writeUInt16(16+8*be+2*P.length),Ie.writeUInt16(0),Ie.writeUInt16(rt),Ie.writeUInt16(Oe),Ie.writeUInt16(O),Ie.writeUInt16(Ve),et=0,ie=D.length;et<ie;et++)u=D[et],Ie.writeUInt16(u);for(Ie.writeUInt16(0),_t=0,Ce=me.length;_t<Ce;_t++)u=me[_t],Ie.writeUInt16(u);for(Pt=0,Me=w.length;Pt<Me;Pt++)o=w[Pt],Ie.writeUInt16(o);for(Kt=0,qe=He.length;Kt<qe;Kt++)fe=He[Kt],Ie.writeUInt16(fe);for(ar=0,at=P.length;ar<at;ar++)H=P[ar],Ie.writeUInt16(H);return{charMap:a,subtable:Ie.data,maxGlyphID:ae+1}}},e})(),TI=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,a,u;for(n.pos=this.offset,this.version=n.readUInt16(),u=n.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=u?a<u:a>u;a=0<=u?++a:--a)i=new r5(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var a,u;return i==null&&(i="macroman"),a=r5.encode(n,i),(u=new Cf).writeUInt16(0),u.writeUInt16(1),a.table=u.data.concat(a.subtable),a},e})(),zj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),Hj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var i,a;for(a=[],i=0;i<10;++i)a.push(n.readByte());return a})(),this.charRange=(function(){var i,a;for(a=[],i=0;i<4;++i)a.push(n.readInt());return a})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(n.readInt());return a})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),jj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="post",e.prototype.parse=function(n){var i,a,u;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:case 196608:break;case 131072:var f;for(a=n.readUInt16(),this.glyphNameIndex=[],f=0;0<=a?f<a:f>a;f=0<=a?++f:--f)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],u=[];n.pos<this.offset+this.length;)i=n.readByte(),u.push(this.names.push(n.readString(i)));return u;case 151552:return a=n.readUInt16(),this.offsets=n.read(a);case 262144:return this.map=(function(){var m,o,w;for(w=[],f=m=0,o=this.file.maxp.numGlyphs;0<=o?m<o:m>o;f=0<=o?++m:--m)w.push(n.readUInt32());return w}).call(this)}},e})(),Vj=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},Gj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="name",e.prototype.parse=function(n){var i,a,u,f,m,o,w,E,I,D,O;for(n.pos=this.offset,n.readShort(),i=n.readShort(),o=n.readShort(),a=[],f=0;0<=i?f<i:f>i;f=0<=i?++f:--f)a.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+o+n.readShort()});for(w={},f=I=0,D=a.length;I<D;f=++I)u=a[f],n.pos=u.offset,E=n.readString(u.length),m=new Vj(E,u),w[O=u.nameID]==null&&(w[O]=[]),w[u.nameID].push(m);this.strings=w,this.copyright=w[0],this.fontFamily=w[1],this.fontSubfamily=w[2],this.uniqueSubfamily=w[3],this.fontName=w[4],this.version=w[5];try{this.postscriptName=w[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=w[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=w[7],this.manufacturer=w[8],this.designer=w[9],this.description=w[10],this.vendorUrl=w[11],this.designerUrl=w[12],this.license=w[13],this.licenseUrl=w[14],this.preferredFamily=w[15],this.preferredSubfamily=w[17],this.compatibleFull=w[18],this.sampleText=w[19]},e})(),Kj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),qj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,a,u,f,m,o,w;for(n.pos=this.offset,this.metrics=[],i=0,o=this.file.hhea.numberOfMetrics;0<=o?i<o:i>o;i=0<=o?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var E,I;for(I=[],i=E=0;0<=u?E<u:E>u;i=0<=u?++E:--E)I.push(n.readInt16());return I})(),this.widths=(function(){var E,I,D,O;for(O=[],E=0,I=(D=this.metrics).length;E<I;E++)f=D[E],O.push(f.advance);return O}).call(this),a=this.widths[this.widths.length-1],w=[],i=m=0;0<=u?m<u:m>u;i=0<=u?++m:--m)w.push(this.widths.push(a));return w},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),PI=[].slice,$j=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,a,u,f,m,o,w,E,I,D;return n in this.cache?this.cache[n]:(f=this.file.loca,i=this.file.contents,a=f.indexOf(n),(u=f.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+a,m=(o=new Cf(i.read(u))).readShort(),E=o.readShort(),D=o.readShort(),w=o.readShort(),I=o.readShort(),this.cache[n]=m===-1?new Zj(o,E,D,w,I):new Wj(o,m,E,D,w,I),this.cache[n]))},e.prototype.encode=function(n,i,a){var u,f,m,o,w;for(m=[],f=[],o=0,w=i.length;o<w;o++)u=n[i[o]],f.push(m.length),u&&(m=m.concat(u.encode(a)));return f.push(m.length),{table:m,offsets:f}},e})(),Wj=(function(){function e(n,i,a,u,f,m){this.raw=n,this.numberOfContours=i,this.xMin=a,this.yMin=u,this.xMax=f,this.yMax=m,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Zj=(function(){function e(n,i,a,u,f){var m,o;for(this.raw=n,this.xMin=i,this.yMin=a,this.xMax=u,this.yMax=f,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],m=this.raw;o=m.readShort(),this.glyphOffsets.push(m.pos),this.glyphIDs.push(m.readUInt16()),32&o;)m.pos+=1&o?4:2,128&o?m.pos+=8:64&o?m.pos+=4:8&o&&(m.pos+=2)}return e.prototype.encode=function(){var n,i,a;for(i=new Cf(PI.call(this.raw.data)),n=0,a=this.glyphIDs.length;n<a;++n)i.pos=this.glyphOffsets[n];return i.data},e})(),Xj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="loca",e.prototype.parse=function(n){var i,a;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var u,f;for(f=[],a=0,u=this.length;a<u;a+=2)f.push(2*n.readUInt16());return f}).call(this):(function(){var u,f;for(f=[],a=0,u=this.length;a<u;a+=4)f.push(n.readUInt32());return f}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var a=new Uint32Array(this.offsets.length),u=0,f=0,m=0;m<a.length;++m)if(a[m]=u,f<i.length&&i[f]==m){++f,a[m]=u;var o=this.offsets[m],w=this.offsets[m+1]-o;w>0&&(u+=w)}for(var E=new Array(4*a.length),I=0;I<a.length;++I)E[4*I+3]=255&a[I],E[4*I+2]=(65280&a[I])>>8,E[4*I+1]=(16711680&a[I])>>16,E[4*I]=(4278190080&a[I])>>24;return E},e})(),Yj=(function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,i,a,u,f;for(i in u=this.font.cmap.tables[0].codeMap,n={},f=this.subset)a=f[i],n[i]=u[a];return n},e.prototype.glyphsFor=function(n){var i,a,u,f,m,o,w;for(u={},m=0,o=n.length;m<o;m++)u[f=n[m]]=this.font.glyf.glyphFor(f);for(f in i=[],u)(a=u[f])!=null&&a.compound&&i.push.apply(i,a.glyphIDs);if(i.length>0)for(f in w=this.glyphsFor(i))a=w[f],u[f]=a;return u},e.prototype.encode=function(n,i){var a,u,f,m,o,w,E,I,D,O,P,W,H,z,Z;for(u in a=TI.encode(this.generateCmap(),"unicode"),m=this.glyphsFor(n),P={0:0},Z=a.charMap)P[(w=Z[u]).old]=w.new;for(W in O=a.maxGlyphID,m)W in P||(P[W]=O++);return I=(function(se){var ae,fe;for(ae in fe={},se)fe[se[ae]]=ae;return fe})(P),D=Object.keys(I).sort(function(se,ae){return se-ae}),H=(function(){var se,ae,fe;for(fe=[],se=0,ae=D.length;se<ae;se++)o=D[se],fe.push(I[o]);return fe})(),f=this.font.glyf.encode(m,H,P),E=this.font.loca.encode(f.offsets,H),z={cmap:this.font.cmap.raw(),glyf:f.table,loca:E,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(z)},e})();dn.API.PDFObject=(function(){var e;function n(){}return e=function(i,a){return(Array(a+1).join("0")+i).slice(-a)},n.convert=function(i){var a,u,f,m;if(Array.isArray(i))return"["+(function(){var o,w,E;for(E=[],o=0,w=i.length;o<w;o++)a=i[o],E.push(n.convert(a));return E})().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i?.isString)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(u in f=["<<"],i)m=i[u],f.push("/"+u+" "+n.convert(m));return f.push(">>"),f.join(`
`)}return""+i},n})();function Jj({allZipData:e,selectedMetric:n,onClose:i}){const[a,u]=te.useState("national"),[f,m]=te.useState(""),[o,w]=te.useState(""),[E,I]=te.useState(""),[D,O]=te.useState(""),[P,W]=te.useState(!1),H=te.useRef(null),[z,Z]=te.useState("png"),[se,ae]=te.useState(!0),[fe,Fe]=te.useState(!0),[He,Ve]=te.useState(!1),[Oe,be]=te.useState(!1),rt=te.useRef(null);te.useEffect(()=>{const Te=setTimeout(()=>O(E),150);return()=>clearTimeout(Te)},[E]),te.useEffect(()=>{function Te(yt){H.current&&!H.current.contains(yt.target)&&W(!1)}return document.addEventListener("mousedown",Te),()=>document.removeEventListener("mousedown",Te)},[]),te.useEffect(()=>{be(!1)},[a,f,o,n,se,fe]);const{availableStates:ue,filteredMetros:me}=te.useMemo(()=>{if(Object.keys(e).length===0)return{availableStates:[],filteredMetros:[]};const Te=new Set,yt=new Set;for(const Ce of Object.values(e))Ce.state&&Te.add(Ce.state),Ce.metro&&yt.add(Ce.metro);const Le=Array.from(yt).sort(),ie=D?Le.filter(Ce=>Ce.toLowerCase().includes(D.toLowerCase())):Le;return{availableStates:Array.from(Te).sort(),filteredMetros:ie}},[e,D]),Ue=te.useMemo(()=>Object.keys(e).length===0?[]:Object.values(e).filter(Te=>a==="state"&&f?Te.state===f:a==="metro"&&o?Te.metro===o:!0),[e,a,f,o]),Ie=te.useMemo(()=>a==="state"?f||"Select a state":a==="metro"?o||"Select a metro area":"United States",[a,f,o]),pt=()=>!!(He||!Oe||a==="state"&&!f||a==="metro"&&!o||Ue.length===0),lt=te.useCallback(async()=>{const Te=rt.current?.getElement();if(Te){Ve(!0);try{await new Promise(ie=>requestAnimationFrame(ie));const Le=await q4(Te,{scale:10,useCORS:!0,backgroundColor:"#ffffff",logging:!1,allowTaint:!0});if(z==="png"){const ie=document.createElement("a");ie.download=`domapus-${n}-${a}.png`,ie.href=Le.toDataURL("image/png",1),ie.click()}else{const ie=Le.toDataURL("image/png",1),Ce=new dn({orientation:"landscape",unit:"pt",format:"a4"}),Me=Ce.internal.pageSize.getWidth(),qe=Ce.internal.pageSize.getHeight(),at=Le.width/Le.height,et=Me/qe;let _t,Et,Pt,Kt;at>et?(_t=Me,Et=Me/at,Pt=0,Kt=(qe-Et)/2):(Et=qe,_t=qe*at,Pt=(Me-_t)/2,Kt=0),Ce.addImage(ie,"PNG",Pt,Kt,_t,Et),Ce.save(`domapus-${n}-${a}.pdf`)}i_({title:"Export Complete",description:"Your map has been downloaded."})}catch(yt){console.error("Export failed:",yt),i_({title:"Export Failed",description:"Something went wrong.",variant:"destructive"})}finally{Ve(!1)}}},[z,n,a]),ot=Te=>{w(Te),I(Te),W(!1)},Ne=()=>{w(""),I(""),O(""),W(!0)};return ce.jsxs("div",{className:"fixed inset-0 bg-background z-50 flex",children:[ce.jsxs("div",{className:"w-80 bg-background border-r h-full shadow-xl flex flex-col",children:[ce.jsxs("div",{className:"p-4 space-y-4 flex-1 overflow-y-auto",children:[ce.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[ce.jsx(sP,{className:"h-4 w-4 text-primary"}),ce.jsx("h2",{className:"text-base font-semibold",children:"Export Map"})]}),ce.jsxs("div",{className:"space-y-3",children:[ce.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[ce.jsx(iP,{className:"h-3.5 w-3.5"}),ce.jsx("span",{children:"Region Scope"})]}),ce.jsxs(C_,{value:a,onValueChange:Te=>u(Te),className:"space-y-2",children:[ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(Yd,{value:"national",id:"r-national"}),ce.jsx(af,{htmlFor:"r-national",className:"text-sm",children:"National"})]}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(Yd,{value:"state",id:"r-state"}),ce.jsx(af,{htmlFor:"r-state",className:"text-sm",children:"State"})]}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(Yd,{value:"metro",id:"r-metro"}),ce.jsx(af,{htmlFor:"r-metro",className:"text-sm",children:"Metro Area"})]})]}),a==="state"&&ce.jsxs(aF,{value:f,onValueChange:m,children:[ce.jsx(jw,{className:"h-9",children:ce.jsx(lF,{placeholder:"Select a state"})}),ce.jsx(Vw,{children:ue.map(Te=>ce.jsx(Gw,{value:Te,children:Te},Te))})]}),a==="metro"&&ce.jsxs("div",{className:"space-y-2 relative",ref:H,children:[ce.jsxs("div",{className:"relative",children:[ce.jsx(xw,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),ce.jsx(Dy,{placeholder:"Type to search metros...",value:E,onChange:Te=>{I(Te.target.value),W(!0),o&&Te.target.value!==o&&w("")},onFocus:()=>W(!0),className:"pl-8 h-9 pr-8"}),E&&ce.jsx("button",{onClick:Ne,className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:ce.jsx($m,{className:"h-4 w-4"})})]}),P&&ce.jsx("div",{className:"absolute z-10 w-full mt-1 bg-popover text-popover-foreground border rounded-md shadow-md max-h-[250px] overflow-y-auto",children:me.length>0?ce.jsx("div",{className:"p-1",children:me.map(Te=>ce.jsx("div",{onClick:()=>ot(Te),className:Li("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",o===Te&&"bg-accent text-accent-foreground font-medium"),children:Te},Te))}):ce.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No metro areas found."})})]})]}),ce.jsxs("div",{className:"space-y-3 pt-2",children:[ce.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[ce.jsx(tP,{className:"h-3.5 w-3.5"}),ce.jsx("span",{children:"File Format"})]}),ce.jsxs(C_,{value:z,onValueChange:Te=>Z(Te),className:"space-y-2",children:[ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(Yd,{value:"png",id:"r-png"}),ce.jsx(af,{htmlFor:"r-png",className:"text-sm",children:"PNG (Image)"})]}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(Yd,{value:"pdf",id:"r-pdf"}),ce.jsx(af,{htmlFor:"r-pdf",className:"text-sm",children:"PDF (Document)"})]})]})]}),ce.jsxs("div",{className:"space-y-2 pt-2",children:[ce.jsx("div",{className:"text-sm font-medium",children:"Customization"}),ce.jsxs("div",{className:"space-y-2",children:[ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(L_,{id:"c-title",checked:fe,onCheckedChange:Te=>Fe(Te===!0)}),ce.jsx(af,{htmlFor:"c-title",className:"text-sm",children:"Include Title"})]}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(L_,{id:"c-legend",checked:se,onCheckedChange:Te=>ae(Te===!0)}),ce.jsx(af,{htmlFor:"c-legend",className:"text-sm",children:"Include Legend"})]})]})]})]}),ce.jsxs("div",{className:"p-4 space-y-2 border-t bg-background",children:[ce.jsx(Cc,{onClick:lt,disabled:pt(),className:"w-full",size:"default",children:He?ce.jsxs(ce.Fragment,{children:[ce.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):!Oe&&Ue.length>0?ce.jsxs(ce.Fragment,{children:[ce.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Rendering..."]}):ce.jsxs(ce.Fragment,{children:[ce.jsx(Q5,{className:"h-4 w-4 mr-2"}),"Export ",z.toUpperCase()]})}),ce.jsx(Cc,{onClick:i,variant:"outline",className:"w-full",disabled:He,children:"Cancel"})]})]}),ce.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col bg-gray-100",children:[ce.jsxs("div",{className:"mb-3",children:[ce.jsx("h3",{className:"text-base font-semibold text-gray-700",children:"Preview"}),ce.jsxs("p",{className:"text-xs text-gray-500",children:[Ue.length.toLocaleString()," ZIP codes"]})]}),ce.jsx("div",{className:"flex-1 flex items-center justify-center",children:ce.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200",style:{width:"100%",maxWidth:"900px",aspectRatio:"4 / 3"},children:ce.jsx(jF,{ref:rt,filteredData:Ue,selectedMetric:n,regionScope:a,regionName:Ie,includeLegend:se,includeTitle:fe,onReady:()=>be(!0)})})})]})]})}const e_=768;function LI(){const[e,n]=te.useState(void 0);return te.useEffect(()=>{const i=window.matchMedia(`(max-width: ${e_-1}px)`),a=()=>{n(window.innerWidth<e_)};return i.addEventListener("change",a),n(window.innerWidth<e_),()=>i.removeEventListener("change",a)},[]),!!e}function eV({allZipData:e,selectedMetric:n,onExportModeChange:i}){const[a,u]=te.useState(!1),f=LI();te.useEffect(()=>{i(a)},[a,i]);const m=()=>{u(!1)};return a?ce.jsx(Jj,{allZipData:e,selectedMetric:n,onClose:m}):ce.jsxs(Cc,{variant:"outline",size:"sm",onClick:()=>u(!0),children:[ce.jsx(Q5,{className:"h-4 w-4 mr-2"}),!f&&ce.jsx("span",{children:"Export"})]})}function MI(e,n,i=0,a=e.length-1,u=tV){for(;a>i;){if(a-i>600){const w=a-i+1,E=n-i+1,I=Math.log(w),D=.5*Math.exp(2*I/3),O=.5*Math.sqrt(I*D*(w-D)/w)*(E-w/2<0?-1:1),P=Math.max(i,Math.floor(n-E*D/w+O)),W=Math.min(a,Math.floor(n+(w-E)*D/w+O));MI(e,n,P,W,u)}const f=e[n];let m=i,o=a;for(fm(e,i,n),u(e[a],f)>0&&fm(e,i,a);m<o;){for(fm(e,m,o),m++,o--;u(e[m],f)<0;)m++;for(;u(e[o],f)>0;)o--}u(e[i],f)===0?fm(e,i,o):(o++,fm(e,o,a)),o<=n&&(i=o+1),n<=o&&(a=o-1)}}function fm(e,n,i){const a=e[n];e[n]=e[i],e[i]=a}function tV(e,n){return e<n?-1:e>n?1:0}class rV{constructor(n=9){this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(n){let i=this.data;const a=[];if(!F0(n,i))return a;const u=this.toBBox,f=[];for(;i;){for(let m=0;m<i.children.length;m++){const o=i.children[m],w=i.leaf?u(o):o;F0(n,w)&&(i.leaf?a.push(o):r_(n,w)?this._all(o,a):f.push(o))}i=f.pop()}return a}collides(n){let i=this.data;if(!F0(n,i))return!1;const a=[];for(;i;){for(let u=0;u<i.children.length;u++){const f=i.children[u],m=i.leaf?this.toBBox(f):f;if(F0(n,m)){if(i.leaf||r_(n,m))return!0;a.push(f)}}i=a.pop()}return!1}load(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(let a=0;a<n.length;a++)this.insert(n[a]);return this}let i=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const a=this.data;this.data=i,i=a}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(n){return n&&this._insert(n,this.data.height-1),this}clear(){return this.data=ip([]),this}remove(n,i){if(!n)return this;let a=this.data;const u=this.toBBox(n),f=[],m=[];let o,w,E;for(;a||f.length;){if(a||(a=f.pop(),w=f[f.length-1],o=m.pop(),E=!0),a.leaf){const I=nV(n,a.children,i);if(I!==-1)return a.children.splice(I,1),f.push(a),this._condense(f),this}!E&&!a.leaf&&r_(a,u)?(f.push(a),m.push(o),o=0,w=a,a=a.children[0]):w?(o++,a=w.children[o],E=!1):a=null}return this}toBBox(n){return n}compareMinX(n,i){return n.minX-i.minX}compareMinY(n,i){return n.minY-i.minY}toJSON(){return this.data}fromJSON(n){return this.data=n,this}_all(n,i){const a=[];for(;n;)n.leaf?i.push(...n.children):a.push(...n.children),n=a.pop();return i}_build(n,i,a,u){const f=a-i+1;let m=this._maxEntries,o;if(f<=m)return o=ip(n.slice(i,a+1)),Xd(o,this.toBBox),o;u||(u=Math.ceil(Math.log(f)/Math.log(m)),m=Math.ceil(f/Math.pow(m,u-1))),o=ip([]),o.leaf=!1,o.height=u;const w=Math.ceil(f/m),E=w*Math.ceil(Math.sqrt(m));n5(n,i,a,E,this.compareMinX);for(let I=i;I<=a;I+=E){const D=Math.min(I+E-1,a);n5(n,I,D,w,this.compareMinY);for(let O=I;O<=D;O+=w){const P=Math.min(O+w-1,D);o.children.push(this._build(n,O,P,u-1))}}return Xd(o,this.toBBox),o}_chooseSubtree(n,i,a,u){for(;u.push(i),!(i.leaf||u.length-1===a);){let f=1/0,m=1/0,o;for(let w=0;w<i.children.length;w++){const E=i.children[w],I=t_(E),D=oV(n,E)-I;D<m?(m=D,f=I<f?I:f,o=E):D===m&&I<f&&(f=I,o=E)}i=o||i.children[0]}return i}_insert(n,i,a){const u=a?n:this.toBBox(n),f=[],m=this._chooseSubtree(u,this.data,i,f);for(m.children.push(n),Bm(m,u);i>=0&&f[i].children.length>this._maxEntries;)this._split(f,i),i--;this._adjustParentBBoxes(u,f,i)}_split(n,i){const a=n[i],u=a.children.length,f=this._minEntries;this._chooseSplitAxis(a,f,u);const m=this._chooseSplitIndex(a,f,u),o=ip(a.children.splice(m,a.children.length-m));o.height=a.height,o.leaf=a.leaf,Xd(a,this.toBBox),Xd(o,this.toBBox),i?n[i-1].children.push(o):this._splitRoot(a,o)}_splitRoot(n,i){this.data=ip([n,i]),this.data.height=n.height+1,this.data.leaf=!1,Xd(this.data,this.toBBox)}_chooseSplitIndex(n,i,a){let u,f=1/0,m=1/0;for(let o=i;o<=a-i;o++){const w=bm(n,0,o,this.toBBox),E=bm(n,o,a,this.toBBox),I=aV(w,E),D=t_(w)+t_(E);I<f?(f=I,u=o,m=D<m?D:m):I===f&&D<m&&(m=D,u=o)}return u||a-i}_chooseSplitAxis(n,i,a){const u=n.leaf?this.compareMinX:iV,f=n.leaf?this.compareMinY:sV,m=this._allDistMargin(n,i,a,u),o=this._allDistMargin(n,i,a,f);m<o&&n.children.sort(u)}_allDistMargin(n,i,a,u){n.children.sort(u);const f=this.toBBox,m=bm(n,0,i,f),o=bm(n,a-i,a,f);let w=S0(m)+S0(o);for(let E=i;E<a-i;E++){const I=n.children[E];Bm(m,n.leaf?f(I):I),w+=S0(m)}for(let E=a-i-1;E>=i;E--){const I=n.children[E];Bm(o,n.leaf?f(I):I),w+=S0(o)}return w}_adjustParentBBoxes(n,i,a){for(let u=a;u>=0;u--)Bm(i[u],n)}_condense(n){for(let i=n.length-1,a;i>=0;i--)n[i].children.length===0?i>0?(a=n[i-1].children,a.splice(a.indexOf(n[i]),1)):this.clear():Xd(n[i],this.toBBox)}}function nV(e,n,i){if(!i)return n.indexOf(e);for(let a=0;a<n.length;a++)if(i(e,n[a]))return a;return-1}function Xd(e,n){bm(e,0,e.children.length,n,e)}function bm(e,n,i,a,u){u||(u=ip(null)),u.minX=1/0,u.minY=1/0,u.maxX=-1/0,u.maxY=-1/0;for(let f=n;f<i;f++){const m=e.children[f];Bm(u,e.leaf?a(m):m)}return u}function Bm(e,n){return e.minX=Math.min(e.minX,n.minX),e.minY=Math.min(e.minY,n.minY),e.maxX=Math.max(e.maxX,n.maxX),e.maxY=Math.max(e.maxY,n.maxY),e}function iV(e,n){return e.minX-n.minX}function sV(e,n){return e.minY-n.minY}function t_(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function S0(e){return e.maxX-e.minX+(e.maxY-e.minY)}function oV(e,n){return(Math.max(n.maxX,e.maxX)-Math.min(n.minX,e.minX))*(Math.max(n.maxY,e.maxY)-Math.min(n.minY,e.minY))}function aV(e,n){const i=Math.max(e.minX,n.minX),a=Math.max(e.minY,n.minY),u=Math.min(e.maxX,n.maxX),f=Math.min(e.maxY,n.maxY);return Math.max(0,u-i)*Math.max(0,f-a)}function r_(e,n){return e.minX<=n.minX&&e.minY<=n.minY&&n.maxX<=e.maxX&&n.maxY<=e.maxY}function F0(e,n){return n.minX<=e.maxX&&n.minY<=e.maxY&&n.maxX>=e.minX&&n.maxY>=e.minY}function ip(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function n5(e,n,i,a,u){const f=[n,i];for(;f.length;){if(i=f.pop(),n=f.pop(),i-n<=a)continue;const m=n+Math.ceil((i-n)/a/2)*a;MI(e,m,n,i,u),f.push(n,m,m,i)}}let dm=null;function lV(e){const n=[];for(const[i,a]of Object.entries(e))a.latitude&&a.longitude&&n.push({minX:a.longitude-.01,minY:a.latitude-.01,maxX:a.longitude+.01,maxY:a.latitude+.01,zipCode:i});return dm?dm.clear():dm=new rV,dm.load(n),new Set(n.map(i=>i.zipCode)),console.log(`[SpatialIndex] Built index with ${n.length} ZIP codes`),dm}const cV={median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"};function i5({selectedMetric:e,onMetricChange:n}){return ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("label",{className:"text-xs font-medium text-dashboard-text-secondary whitespace-nowrap hidden lg:block",children:"Metric:"}),ce.jsxs(aF,{value:e,onValueChange:n,children:[ce.jsx(jw,{className:"w-48 h-8 text-sm","aria-label":"Select visualization metric",children:ce.jsx(lF,{placeholder:"Select a metric"})}),ce.jsx(Vw,{className:"z-[9999]",children:Object.entries(cV).map(([i,a])=>ce.jsx(Gw,{value:i,children:a},i))})]})]})}function s5({onSearch:e}){const[n,i]=te.useState(""),[a,u]=te.useState(0),f=o=>{const w=o.target.value.replace(/\D/g,"");i(w)},m=te.useCallback(o=>{if(o.preventDefault(),n.trim()){const w=a+1;u(w),e(n.trim(),w)}},[n,a,e]);return ce.jsxs("form",{onSubmit:m,className:"flex items-center space-x-2",children:[ce.jsxs("div",{className:"relative flex-1",children:[ce.jsx(xw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-dashboard-text-secondary"}),ce.jsx(Dy,{type:"text",pattern:"[0-9]*",inputMode:"numeric",placeholder:"Enter ZIP code...",value:n,onChange:f,className:"pl-10 w-48",maxLength:5,"aria-label":"Search for ZIP code"})]}),ce.jsx(Cc,{type:"submit",variant:"outline",size:"sm","aria-label":"Search",children:"Search"})]})}const AV="/Domapus/";function uV({selectedMetric:e,onMetricChange:n,onSearch:i,children:a}){const u=LI(),[f,m]=te.useState(null);te.useEffect(()=>{const w=`${AV}data/last_updated.json`;(async()=>{try{const I=await fetch(w);if(!I.ok)throw new Error("Failed to fetch last_updated.json");const D=await I.json();m(D.last_updated_utc)}catch(I){console.error("Error fetching last_updated.json:",I)}})()},[]);const o=w=>{if(!w)return"N/A";try{return new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}};return ce.jsxs(ce.Fragment,{children:[ce.jsxs("header",{className:"flex items-center justify-between px-4 sm:px-6 py-2 bg-dashboard-panel border-b border-dashboard-border h-14 sm:h-16",children:[ce.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 flex-1 min-w-0",children:[ce.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity flex-shrink-0",onClick:()=>window.location.reload(),title:"Click to reload page",children:[ce.jsx("img",{src:"/Domapus/Logo.svg",alt:"Domapus Logo",width:"40",height:"40",className:"w-9 h-9 sm:w-10 sm:h-10"}),ce.jsxs("div",{className:"flex flex-col font-logo",children:[ce.jsx("h1",{className:"text-base sm:text-lg font-bold text-dashboard-text-primary leading-tight",children:"Domapus"}),ce.jsx("p",{className:"text-xs sm:text-sm text-dashboard-text-secondary leading-tight hidden sm:block",children:"Housing Market Analysis"})]})]}),!u&&ce.jsx(i5,{selectedMetric:e,onMetricChange:n})]}),ce.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[!u&&ce.jsx(s5,{onSearch:i}),ce.jsxs("div",{className:"flex items-center gap-2 ml-1",children:[ce.jsxs("div",{className:"flex items-center text-dashboard-text-secondary gap-2 mr-2",children:[ce.jsx(X3,{className:"h-4 w-4 opacity-80"}),ce.jsxs("div",{className:"flex flex-col",children:[ce.jsx("span",{className:"text-xs font-medium",children:"Data Updated:"}),ce.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:o(f)})]})]}),a,ce.jsx(Cc,{variant:"outline",size:"sm",asChild:!0,children:ce.jsxs("a",{href:"https://github.com/Jasperc2024/Domapus",target:"_blank",rel:"noopener noreferrer",title:"GitHub",children:[ce.jsx(rP,{className:"h-4 w-4 mr-2"}),!u&&ce.jsx("span",{children:"GitHub"})," "]})}),ce.jsx(Cc,{variant:"outline",size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:ce.jsxs("a",{href:"https://buymeacoffee.com/JasperC",target:"_blank",rel:"noopener noreferrer",title:"Sponsor",children:[ce.jsx(c_,{className:"h-4 w-4 mr-2"}),!u&&ce.jsx("span",{children:"Sponsor"})," "]})})]})]})]}),u&&ce.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[1001] bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-lg",children:ce.jsxs("div",{className:"space-y-2.5",children:[ce.jsx(i5,{selectedMetric:e,onMetricChange:n}),ce.jsx(s5,{onSearch:i})]})})]})}function hV(e,n){if(!e||!e.zipCode)return'<div class="p-2">No data available</div>';const a={median_sale_price:{key:"median_sale_price",label:"Median Sale Price",format:"currency"},median_list_price:{key:"median_list_price",label:"Median List Price",format:"currency"},median_ppsf:{key:"median_ppsf",label:"Median Price Per Square Foot",format:"currency"},homes_sold:{key:"homes_sold",label:"Homes Sold",format:"number"},pending_sales:{key:"pending_sales",label:"Pending Sales",format:"number"},new_listings:{key:"new_listings",label:"New Listings",format:"number"},inventory:{key:"inventory",label:"Inventory",format:"number"},median_dom:{key:"median_dom",label:"Median Days on Market",format:"number"},avg_sale_to_list_ratio:{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",format:"ratio"},sold_above_list:{key:"sold_above_list",label:"% Sold Above List",format:"percent"},off_market_in_two_weeks:{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",format:"percent"}}[n],u=a?e[a.key]:null;let f="N/A";if(typeof u=="number"&&isFinite(u))switch(a.format){case"currency":f=`$${u.toLocaleString()}`;break;case"percent":f=`${u.toFixed(1)}%`;break;case"ratio":f=`${(u*100).toFixed(1)}%`;break;case"number":f=u.toLocaleString();break}return`
      <div class="font-bold text-base">${e.zipCode}</div>
      <div class="text-sm text-gray-600">${e.city||"Unknown City"}, ${e.state}</div>
      <div class="text-sm mt-2">
        <span class="font-semibold">${a?.label||n}:</span>
        <span class="font-normal"> ${f}</span>
      </div>
  `}const fV="/Domapus/",n_=["#FFF9B0","#FFEB84","#FFD166","#FF9A56","#E84C61","#C13584","#7B2E8D","#2E0B59"];function o5(e,n){if(!e)return 0;const i=e[n];return typeof i=="number"&&isFinite(i)?i:0}function dV(e,n=8){const i=[...e].filter(w=>w>0).sort((w,E)=>w-E);if(i.length===0)return[];const a=i[0],u=i[i.length-1];if(a===u)return[a];const f=[],m=(u-a)*1e-6||1e-6,o=w=>i[Math.floor(w*(i.length-1))];for(let w=1;w<n;w++){let E=o(w/n);f.length&&E<=f[f.length-1]&&(E=f[f.length-1]+m),f.push(E)}return f}function pV({selectedMetric:e,onZipSelect:n,searchZip:i,searchTrigger:a,zipData:u,isLoading:f}){const m=te.useRef(null),o=te.useRef(null),[w,E]=te.useState(!1),[I,D]=te.useState(null),O=te.useRef(!1),[P,W]=te.useState(!1),H=te.useRef(null),z=te.useRef(null),Z=te.useRef(null),se=te.useRef(""),ae=te.useRef(""),fe=te.useRef(null),Fe=te.useRef({width:0,height:0}),He=te.useRef(null),Ve=te.useRef({zipData:u,selectedMetric:e,onZipSelect:n});te.useEffect(()=>{Ve.current={zipData:u,selectedMetric:e,onZipSelect:n}},[u,e,n]);const Oe=te.useMemo(()=>Object.keys(u).length>0,[u]),be=te.useCallback(ue=>{OF();const me=new sp.Map({container:ue,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[-98.57,39.82],zoom:3.5,minZoom:3,maxZoom:12,attributionControl:!1,canvasContextAttributes:{preserveDrawingBuffer:!0}});return me.addControl(new sp.AttributionControl({compact:!0}),"bottom-left"),me.addControl(new sp.NavigationControl,"top-right"),me.on("error",Ue=>{console.error("[Map] Internal error:",Ue?.error??Ue),D("Map internal error. Try refreshing.")}),me.once("load",()=>{console.log("[Map] style/load fired  map is ready"),E(!0)}),me},[]);te.useEffect(()=>{if(!m.current||o.current)return;const ue=m.current;let me=!1;const Ue=()=>{if(!me&&!(ue.clientWidth===0||ue.clientHeight===0))try{const lt=be(ue);o.current=lt,Fe.current={width:ue.clientWidth,height:ue.clientHeight}}catch(lt){console.error("Map init failed",lt)}},Ie=()=>{if(!o.current||me)return;const lt=ue.clientWidth,ot=ue.clientHeight,Ne=Math.abs(lt-Fe.current.width),Te=Math.abs(ot-Fe.current.height);(Ne>5||Te>5)&&(He.current&&clearTimeout(He.current),He.current=setTimeout(()=>{!me&&o.current&&(Fe.current={width:lt,height:ot},o.current.resize())},150))},pt=new ResizeObserver(Ie);return pt.observe(ue),Ue(),()=>{if(me=!0,pt.disconnect(),He.current&&clearTimeout(He.current),H.current&&(cancelAnimationFrame(H.current),H.current=null),Z.current&&(Z.current.remove(),Z.current=null),o.current){try{o.current.remove()}catch(lt){console.warn("[MapLibreMap] error removing map",lt)}o.current=null}E(!1),O.current=!1}},[be]);const rt=te.useCallback(()=>{const ue=o.current;if(!ue||O.current)return;const me="zips-fill",Ue=lt=>{z.current=lt,!H.current&&(H.current=requestAnimationFrame(()=>{const ot=z.current;H.current=null;try{const Ne=ue.queryRenderedFeatures(ot.point,{layers:[me]}),Te=Ne.length>0;if(ue.getCanvas().style.cursor=Te?"pointer":"",!Te){Z.current?.remove();return}const yt=Ne[0].properties??{},Le=yt.ZCTA5CE20||yt.zipCode||yt.id,{zipData:ie,selectedMetric:Ce}=Ve.current;if(!Le||!ie[Le]){Z.current?.remove();return}Z.current||(Z.current=new sp.Popup({closeButton:!1,offset:[0,-10],maxWidth:"320px"})),Z.current.setLngLat(ot.lngLat).setHTML(hV(ie[Le],Ce)).addTo(ue)}catch(Ne){console.error("mousemove error",Ne)}}))},Ie=lt=>{const ot=ue.queryRenderedFeatures(lt.point,{layers:[me]});if(!ot.length)return;const Ne=ot[0].properties??{},Te=Ne.ZCTA5CE20||Ne.zipCode||Ne.id,{zipData:yt,onZipSelect:Le}=Ve.current;Te&&yt[Te]&&Le(yt[Te])},pt=()=>{ue.getCanvas().style.cursor="",Z.current?.remove()};ue.on("mousemove",Ue),ue.on("click",Ie),ue.on("mouseout",pt),O.current=!0},[]);return te.useEffect(()=>{if(!w||!o.current)return;const ue=o.current;if(!ue.getSource("zips"))try{ue.getStyle().layers.forEach(ot=>{if("source-layer"in ot){const Ne=ot["source-layer"];(Ne==="transportation"||Ne==="transportation_name")&&ue.setLayoutProperty(ot.id,"visibility","none")}});const Ue=new URL(`${fV}data/us_zip_codes.pmtiles`,window.location.origin).href;ue.addSource("zips",{type:"vector",url:`pmtiles://${Ue}`,promoteId:"ZCTA5CE20"});const Ie=ue.getStyle().layers;let pt;const lt=Ie.find(ot=>ot.id==="watername_ocean");lt&&(pt=lt.id),ue.addLayer({id:"zips-fill",type:"fill",source:"zips","source-layer":"us_zip_codes",paint:{"fill-color":"#cccccc","fill-opacity":.75}},pt),ue.addLayer({id:"zips-border",type:"line",source:"zips","source-layer":"us_zip_codes",paint:{"line-color":["case",["boolean",["feature-state","highlighted"],!1],"#ff6b35","rgba(0,0,0,0.15)"],"line-width":["interpolate",["linear"],["zoom"],3,["case",["boolean",["feature-state","highlighted"],!1],2,.3],6,["case",["boolean",["feature-state","highlighted"],!1],3,.6],10,["case",["boolean",["feature-state","highlighted"],!1],4,1.5],12,["case",["boolean",["feature-state","highlighted"],!1],5,2]]}},pt),ue.once("idle",()=>{console.log("[MapLibreMap] PMTiles layer loaded"),W(!0)}),rt()}catch(me){console.error("Add PMTiles layer failed",me),D("Failed to load map data. Try refreshing.")}},[w,rt]),te.useEffect(()=>{if(!w||!o.current||!P||!Oe)return;const ue=o.current,me=ue.getSource("zips");if(!me||!me._loaded||!ue.getLayer("zips-fill"))return;const Ue=Object.keys(u).length.toString();if(se.current===e&&ae.current===Ue)return;se.current=e,ae.current=Ue,console.log("[MapLibreMap] Updating choropleth colors...");const Ie=Object.values(u).map(ot=>o5(ot,e)),pt=dV(Ie);if(pt.length===0){console.warn("[MapLibreMap] No valid data for choropleth");return}const lt=["step",["coalesce",["feature-state","metricValue"],0],"transparent",.001,n_[0],...pt.flatMap((ot,Ne)=>[ot,n_[Math.min(Ne+1,n_.length-1)]])];for(const[ot,Ne]of Object.entries(u)){const Te=o5(Ne,e);ue.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:ot},{metricValue:Te})}ue.setPaintProperty("zips-fill","fill-color",lt),console.log(`[MapLibreMap] Choropleth updated for ${Object.keys(u).length} ZIPs`)},[w,P,u,e,Oe]),te.useEffect(()=>{if(!w||!o.current||!P||!i||!u[i])return;const ue=o.current,{longitude:me,latitude:Ue}=u[i];fe.current&&fe.current!==i&&ue.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:fe.current},{highlighted:!1}),ue.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:i},{highlighted:!0}),fe.current=i,me&&Ue&&ue.flyTo({center:[me,Ue],zoom:10,duration:1500})},[w,P,i,a,u]),ce.jsxs("div",{className:"absolute inset-0 w-full h-full min-h-[400px]",children:[ce.jsx("div",{ref:m,className:"w-full h-full",style:{minHeight:"400px"}}),(f||!w||I)&&ce.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-10",children:I?ce.jsx("div",{className:"text-red-500 font-bold",children:I}):ce.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})]})}function mV({onClose:e}){return te.useEffect(()=>{const n=setTimeout(e,2e4);return()=>clearTimeout(n)},[e]),ce.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:ce.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg shadow-lg p-4",children:[ce.jsxs("div",{className:"flex items-start justify-between",children:[ce.jsxs("div",{className:"flex items-start space-x-3",children:[ce.jsx(c_,{className:"h-5 w-5 text-pink-600 mt-0.5 flex-shrink-0"}),ce.jsxs("div",{className:"text-sm text-dashboard-text-primary",children:[ce.jsx("p",{className:"font-semibold mb-1",children:"This site is proudly ad-free and built to serve the public."}),ce.jsx("p",{className:"text-dashboard-text-secondary",children:"If you find it useful, please consider sponsoring or supporting us to keep the data flowing and the site improving."})]})]}),ce.jsx(Cc,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0 flex-shrink-0",children:ce.jsx($m,{className:"h-4 w-4"})})]}),ce.jsxs("div",{className:"mt-3 flex space-x-2",children:[ce.jsx(Cc,{size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:ce.jsxs("a",{href:"https://buymeacoffee.com/jasperc",target:"_blank",rel:"noopener noreferrer",children:[ce.jsx(c_,{className:"h-4 w-4 mr-2"}),"Sponsor"]})}),ce.jsx(Cc,{variant:"outline",size:"sm",onClick:e,children:"Maybe later"})]})]})})}const hy=te.forwardRef(({className:e,...n},i)=>ce.jsx("div",{ref:i,className:Li("rounded-lg border bg-card text-card-foreground shadow-sm",e),...n}));hy.displayName="Card";const kI=te.forwardRef(({className:e,...n},i)=>ce.jsx("div",{ref:i,className:Li("flex flex-col space-y-1.5 p-6",e),...n}));kI.displayName="CardHeader";const UI=te.forwardRef(({className:e,...n},i)=>ce.jsx("h3",{ref:i,className:Li("text-2xl font-semibold leading-none tracking-tight",e),...n}));UI.displayName="CardTitle";const gV=te.forwardRef(({className:e,...n},i)=>ce.jsx("p",{ref:i,className:Li("text-sm text-muted-foreground",e),...n}));gV.displayName="CardDescription";const fy=te.forwardRef(({className:e,...n},i)=>ce.jsx("div",{ref:i,className:Li("p-6 pt-0",e),...n}));fy.displayName="CardContent";const yV=te.forwardRef(({className:e,...n},i)=>ce.jsx("div",{ref:i,className:Li("flex items-center p-6 pt-0",e),...n}));yV.displayName="CardFooter";const vV=yy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function a5({className:e,variant:n,...i}){return ce.jsx("div",{className:Li(vV({variant:n}),e),...i})}function _V({currentZip:e,allZipData:n,onClose:i}){const[a,u]=te.useState(""),[f,m]=te.useState(null),[o,w]=te.useState(""),E=()=>{if(!a.trim())return;w("");const P=n[a.trim()];P?m(P):(w("ZIP code not found in our database."),m(null))},I=(P,W)=>{if(P==null)return"N/A";const H=Number(P);if(isNaN(H))return"N/A";switch(W){case"price":return`$${H.toLocaleString()}`;case"days":return`${H} days`;case"percentage":return`${H.toFixed(1)}%`;case"ratio":return`${(H*100).toFixed(1)}%`;default:return H.toLocaleString()}},D=(P,W)=>{const H=Number(P),z=Number(W);if(isNaN(H)||isNaN(z))return"same";const Z=H-z;return Math.abs(Z)<.01?"same":Z>0?"higher":"lower"},O=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"pending_sales",label:"Pending Sales",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"inventory",label:"Inventory",type:"number"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage"}];return ce.jsxs("div",{className:"space-y-4",children:[ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),ce.jsx(Cc,{variant:"ghost",size:"sm",onClick:i,"aria-label":"Close comparison",children:ce.jsx($m,{className:"h-4 w-4"})})]}),ce.jsxs("div",{className:"flex space-x-2",children:[ce.jsx(Dy,{type:"text",pattern:"[0-9]*",inputMode:"numeric",maxLength:5,placeholder:"Enter ZIP code...",value:a,onChange:P=>u(P.target.value.replace(/\D/g,"")),onKeyDown:P=>{P.key==="Enter"&&E()},"aria-label":"ZIP code to compare"}),ce.jsx(Cc,{onClick:E,size:"sm","aria-label":"Search",children:ce.jsx(xw,{className:"h-4 w-4"})})]}),o&&ce.jsx("div",{className:"text-sm text-red-500 p-2 rounded bg-red-50",children:o}),f&&ce.jsxs("div",{className:"space-y-3 pt-2",children:[ce.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[ce.jsxs("div",{children:[ce.jsx(a5,{variant:"secondary",children:e.zipCode}),ce.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.city})]}),ce.jsx("div",{className:"text-xs text-muted-foreground self-center",children:"vs"}),ce.jsxs("div",{children:[ce.jsx(a5,{variant:"secondary",children:f.zipCode}),ce.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:f.city})]})]}),ce.jsx("div",{className:"space-y-2",children:O.map(P=>{const W=e[P.key],H=f[P.key],z=D(W,H),Z=!P.key.includes("dom");return ce.jsx(hy,{children:ce.jsxs(fy,{className:"p-3",children:[ce.jsx("div",{className:"text-center mb-2 text-xs font-medium text-muted-foreground",children:P.label}),ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ce.jsx("div",{className:`text-center font-bold text-sm ${z==="higher"?Z?"text-green-600":"text-red-600":z==="lower"?Z?"text-red-600":"text-green-600":""}`,children:I(W,P.type)}),ce.jsx("div",{className:`text-center font-bold text-sm ${z==="lower"?Z?"text-green-600":"text-red-600":z==="higher"?Z?"text-red-600":"text-green-600":""}`,children:I(H,P.type)})]})]})},P.key)})})]})]})}function wV({isOpen:e,isCollapsed:n,zipData:i,allZipData:a,onClose:u}){const[f,m]=te.useState(!1);if(!e||!i)return null;const o=(I,D)=>{if(I==null)return"N/A";const O=Number(I);if(isNaN(O))return"N/A";switch(D){case"price":return`$${O.toLocaleString()}`;case"days":return`${O} days`;case"percentage":return`${O.toFixed(1)}%`;case"ratio":return`${(O*100).toFixed(1)}%`;case"coordinate":return O.toFixed(4);default:return O.toLocaleString()}},w=I=>{if(I==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const D=Number(I);if(isNaN(D))return{formatted:"N/A",isPositive:!1,isZero:!0};const O=D>0,P=D===0;return{formatted:`${O?"+":""}${D.toFixed(1)}%`,isPositive:O,isZero:P}},E=[{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom_pct",yoyKey:"median_sale_price_yoy_pct"},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom_pct",yoyKey:"median_list_price_yoy_pct"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:"median_ppsf_mom_pct",yoyKey:"median_ppsf_yoy_pct"},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom_pct",yoyKey:"homes_sold_yoy_pct"},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:"pending_sales_mom_pct",yoyKey:"pending_sales_yoy_pct"},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom_pct",yoyKey:"new_listings_yoy_pct"},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom_pct",yoyKey:"inventory_yoy_pct"},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom_pct",yoyKey:"median_dom_yoy_pct"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:"avg_sale_to_list_ratio_mom_pct",yoyKey:"avg_sale_to_list_ratio_yoy_pct"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:"sold_above_list_mom_pct",yoyKey:"sold_above_list_yoy_pct"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:"off_market_in_two_weeks_mom_pct",yoyKey:"off_market_in_two_weeks_yoy_pct"}].map(I=>({...I,value:i[I.key]})).filter(I=>I.value!==null&&I.value!==void 0);return ce.jsxs("div",{className:`absolute left-0 bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 h-full flex flex-col ${n?"w-16":"w-96"}`,children:[ce.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-dashboard-border",role:"banner",children:[!n&&ce.jsxs("div",{className:"flex flex-col justify-center",children:[ce.jsx("h2",{className:"text-lg font-semibold leading-tight",children:i.zipCode}),ce.jsx("p",{className:"text-sm text-muted-foreground leading-none",children:i.city})]}),ce.jsx("div",{className:"flex items-center",children:!n&&ce.jsx(Cc,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:u,"aria-label":"Close sidebar",children:ce.jsx($m,{className:"h-4 w-4"})})})]}),!n&&ce.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden min-h-0",children:[f?ce.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:ce.jsx(_V,{currentZip:i,allZipData:a,onClose:()=>m(!1)})}):ce.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[ce.jsxs(hy,{children:[ce.jsx(kI,{children:ce.jsxs(UI,{className:"text-sm flex items-center",children:[ce.jsx(nP,{className:"h-4 w-4 mr-2"}),"Location Information"]})}),ce.jsxs(fy,{className:"space-y-2 text-sm",children:[ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"City:"}),ce.jsx("span",{className:"font-medium",children:i.city})]}),ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"County:"}),ce.jsx("span",{className:"font-medium",children:i.county})]}),ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"Metro Area:"}),ce.jsx("span",{className:"font-medium",children:i.metro})]})]})]}),ce.jsxs("h3",{className:"text-sm font-medium pt-2 flex items-center",children:[ce.jsx(Z3,{className:"h-4 w-4 mr-2"}),"Market Data"]}),ce.jsx("div",{className:"space-y-3",children:E.map((I,D)=>{const O=I.momKey?w(i[I.momKey]):null,P=I.yoyKey?w(i[I.yoyKey]):null;return ce.jsx(hy,{children:ce.jsx(fy,{className:"p-4",children:ce.jsxs("div",{className:"space-y-2",children:[ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:I.label}),ce.jsx("p",{className:"text-xl font-bold",children:o(I.value,I.type)}),ce.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[O&&!O.isZero&&ce.jsxs("span",{className:`flex items-center ${O.isPositive?"text-green-600":"text-red-600"}`,children:[O.isPositive?ce.jsx(qb,{className:"h-3 w-3 mr-1"}):ce.jsx(Kb,{className:"h-3 w-3 mr-1"}),O.formatted," vs last month"]}),P&&!P.isZero&&ce.jsxs("span",{className:`flex items-center ${P.isPositive?"text-green-600":"text-red-600"}`,children:[P.isPositive?ce.jsx(qb,{className:"h-3 w-3 mr-1"}):ce.jsx(Kb,{className:"h-3 w-3 mr-1"}),P.formatted," vs last year"]})]})]})})},D)})})]}),ce.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-t border-dashboard-border bg-dashboard-panel",children:ce.jsxs(Cc,{variant:"outline",className:"w-full",onClick:()=>m(!f),children:[ce.jsx(Y3,{className:"h-4 w-4 mr-2"}),f?"Back to Details":"Compare ZIP Codes"]})})]})]})}const xV="/Domapus/";function bV(){const[e,n]=te.useState("median_sale_price"),[i,a]=te.useState(null),[u,f]=te.useState(""),[m,o]=te.useState(0),[w,E]=te.useState({}),[I,D]=te.useState(null),[O,P]=te.useState(!1),[W]=te.useState(!1),[H,z]=te.useState(!1),[Z,se]=te.useState(!1),{processData:ae,isLoading:fe}=zU();te.useEffect(()=>{let Ve=!0,Oe=!1;(async()=>{if(Oe)return;Oe=!0,console.log("[HousingDashboard] Starting initial data load");const ue=new URL(`${xV}data/zip-data.json`,window.location.origin).href;try{const me=await ae({type:"LOAD_AND_PROCESS_DATA",data:{url:ue,selectedMetric:"median_sale_price"}});if(!Ve)return;me&&(console.log(`[HousingDashboard] ZIP data loaded: ${Object.keys(me.zip_codes).length} ZIPs`),E(me.zip_codes),D(me.bounds),setTimeout(()=>{lV(me.zip_codes)},100))}catch(me){console.error("[HousingDashboard] Failed to load initial data:",me)}})();const rt=setTimeout(()=>z(!0),3e4);return()=>{Ve=!1,clearTimeout(rt)}},[]);const Fe=te.useCallback((Ve,Oe)=>{f(Ve),o(Oe)},[]),He=te.useCallback(Ve=>{a(Ve),P(!0)},[]);return ce.jsxs("div",{className:"w-full h-screen bg-dashboard-bg overflow-hidden flex flex-col",children:[H&&ce.jsx(mV,{onClose:()=>z(!1)}),ce.jsx(uV,{selectedMetric:e,onMetricChange:n,onSearch:Fe,children:ce.jsx(eV,{allZipData:w,selectedMetric:e,onExportModeChange:se})}),ce.jsxs("div",{className:"flex flex-1 relative h-full min-h-[400px]",children:[O&&ce.jsx(wV,{isOpen:O,isCollapsed:W,zipData:i,allZipData:w,onClose:()=>P(!1)}),ce.jsxs("div",{className:"flex-1 relative",children:[ce.jsx("div",{className:"absolute inset-0 min-h-[400px]",children:ce.jsx(pV,{selectedMetric:e,onZipSelect:He,searchZip:u,searchTrigger:m,zipData:w,colorScaleDomain:I?[I.min,I.max]:null,isLoading:fe,processData:ae})}),!Z&&ce.jsx("div",{className:"absolute bottom-4 right-4 w-64 z-[1000] pointer-events-auto",children:ce.jsx(zF,{selectedMetric:e,metricValues:Object.values(w).map(Ve=>Ve[e]??0).filter(Ve=>Ve>0)})})]})]})]})}const BV=()=>ce.jsx(bV,{}),CV=()=>{const e=Xm();return te.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),ce.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),ce.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),ce.jsx("p",{className:"text-gray-600 mb-6",children:"Are you looking for [Domapus](https://github.com/Jasperc2024/Domapus)?"}),ce.jsx(NU,{to:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},EV=new Mk,SV=()=>ce.jsx(Uk,{client:EV,children:ce.jsxs(ok,{children:[ce.jsx(zP,{}),ce.jsx(vL,{}),ce.jsx(UU,{basename:"/Domapus",children:ce.jsxs(FU,{children:[ce.jsx(w_,{path:"/",element:ce.jsx(BV,{})}),ce.jsx(w_,{path:"*",element:ce.jsx(CV,{})})]})})]})});class FV extends Pr.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(n,i){console.error("Error Boundary Caught:",n,i)}handleTryAgain=()=>{this.setState({hasError:!1})};render(){return this.state.hasError?ce.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center p-4",children:[ce.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Something went wrong."}),ce.jsx("p",{className:"text-gray-700 mb-6",children:"We've logged the issue and will look into it. Please try again."}),ce.jsx(Cc,{onClick:this.handleTryAgain,children:"Try Again"})]}):this.props.children}}KT.createRoot(document.getElementById("root")).render(ce.jsx(FV,{children:ce.jsx(SV,{})}));export{rs as _,IV as c,pw as g};
