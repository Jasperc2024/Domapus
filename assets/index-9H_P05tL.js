var r6=Object.defineProperty;var u5=e=>{throw TypeError(e)};var n6=(e,t,r)=>t in e?r6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var h5=(e,t,r)=>n6(e,typeof t!="symbol"?t+"":t,r),p_=(e,t,r)=>t.has(e)||u5("Cannot "+r);var Gt=(e,t,r)=>(p_(e,t,"read from private field"),r?r.call(e):t.get(e)),zn=(e,t,r)=>t.has(e)?u5("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),dn=(e,t,r,i)=>(p_(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Do=(e,t,r)=>(p_(e,t,"access private method"),r);var Jg=(e,t,r,i)=>({set _(A){dn(e,t,A,r)},get _(){return Gt(e,t,i)}});function i6(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const A in i)if(A!=="default"&&!(A in e)){const u=Object.getOwnPropertyDescriptor(i,A);u&&Object.defineProperty(e,A,u.get?u:{enumerable:!0,get:()=>i[A]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))i(A);new MutationObserver(A=>{for(const u of A)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(A){const u={};return A.integrity&&(u.integrity=A.integrity),A.referrerPolicy&&(u.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?u.credentials="include":A.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(A){if(A.ep)return;A.ep=!0;const u=r(A);fetch(A.href,u)}})();var s6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dF={exports:{}},Ev={},fF={exports:{}},Sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg=Symbol.for("react.element"),o6=Symbol.for("react.portal"),a6=Symbol.for("react.fragment"),l6=Symbol.for("react.strict_mode"),A6=Symbol.for("react.profiler"),c6=Symbol.for("react.provider"),u6=Symbol.for("react.context"),h6=Symbol.for("react.forward_ref"),d6=Symbol.for("react.suspense"),f6=Symbol.for("react.memo"),p6=Symbol.for("react.lazy"),d5=Symbol.iterator;function m6(e){return e===null||typeof e!="object"?null:(e=d5&&e[d5]||e["@@iterator"],typeof e=="function"?e:null)}var pF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mF=Object.assign,gF={};function Cp(e,t,r){this.props=e,this.context=t,this.refs=gF,this.updater=r||pF}Cp.prototype.isReactComponent={};Cp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yF(){}yF.prototype=Cp.prototype;function Hb(e,t,r){this.props=e,this.context=t,this.refs=gF,this.updater=r||pF}var jb=Hb.prototype=new yF;jb.constructor=Hb;mF(jb,Cp.prototype);jb.isPureReactComponent=!0;var f5=Array.isArray,vF=Object.prototype.hasOwnProperty,Vb={current:null},_F={key:!0,ref:!0,__self:!0,__source:!0};function wF(e,t,r){var i,A={},u=null,h=null;if(t!=null)for(i in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(u=""+t.key),t)vF.call(t,i)&&!_F.hasOwnProperty(i)&&(A[i]=t[i]);var o=arguments.length-2;if(o===1)A.children=r;else if(1<o){for(var g=Array(o),x=0;x<o;x++)g[x]=arguments[x+2];A.children=g}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)A[i]===void 0&&(A[i]=o[i]);return{$$typeof:bg,type:e,key:u,ref:h,props:A,_owner:Vb.current}}function g6(e,t){return{$$typeof:bg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kb(e){return typeof e=="object"&&e!==null&&e.$$typeof===bg}function y6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var p5=/\/+/g;function m_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y6(""+e.key):t.toString(36)}function ry(e,t,r,i,A){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case bg:case o6:h=!0}}if(h)return h=e,A=A(h),e=i===""?"."+m_(h,0):i,f5(A)?(r="",e!=null&&(r=e.replace(p5,"$&/")+"/"),ry(A,t,r,"",function(x){return x})):A!=null&&(Kb(A)&&(A=g6(A,r+(!A.key||h&&h.key===A.key?"":(""+A.key).replace(p5,"$&/")+"/")+e)),t.push(A)),1;if(h=0,i=i===""?".":i+":",f5(e))for(var o=0;o<e.length;o++){u=e[o];var g=i+m_(u,o);h+=ry(u,t,r,g,A)}else if(g=m6(e),typeof g=="function")for(e=g.call(e),o=0;!(u=e.next()).done;)u=u.value,g=i+m_(u,o++),h+=ry(u,t,r,g,A);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function e0(e,t,r){if(e==null)return e;var i=[],A=0;return ry(e,i,"","",function(u){return t.call(r,u,A++)}),i}function v6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ga={current:null},ny={transition:null},_6={ReactCurrentDispatcher:ga,ReactCurrentBatchConfig:ny,ReactCurrentOwner:Vb};function xF(){throw Error("act(...) is not supported in production builds of React.")}Sn.Children={map:e0,forEach:function(e,t,r){e0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return e0(e,function(){t++}),t},toArray:function(e){return e0(e,function(t){return t})||[]},only:function(e){if(!Kb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Sn.Component=Cp;Sn.Fragment=a6;Sn.Profiler=A6;Sn.PureComponent=Hb;Sn.StrictMode=l6;Sn.Suspense=d6;Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_6;Sn.act=xF;Sn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=mF({},e.props),A=e.key,u=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,h=Vb.current),t.key!==void 0&&(A=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(g in t)vF.call(t,g)&&!_F.hasOwnProperty(g)&&(i[g]=t[g]===void 0&&o!==void 0?o[g]:t[g])}var g=arguments.length-2;if(g===1)i.children=r;else if(1<g){o=Array(g);for(var x=0;x<g;x++)o[x]=arguments[x+2];i.children=o}return{$$typeof:bg,type:e.type,key:A,ref:u,props:i,_owner:h}};Sn.createContext=function(e){return e={$$typeof:u6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:c6,_context:e},e.Consumer=e};Sn.createElement=wF;Sn.createFactory=function(e){var t=wF.bind(null,e);return t.type=e,t};Sn.createRef=function(){return{current:null}};Sn.forwardRef=function(e){return{$$typeof:h6,render:e}};Sn.isValidElement=Kb;Sn.lazy=function(e){return{$$typeof:p6,_payload:{_status:-1,_result:e},_init:v6}};Sn.memo=function(e,t){return{$$typeof:f6,type:e,compare:t===void 0?null:t}};Sn.startTransition=function(e){var t=ny.transition;ny.transition={};try{e()}finally{ny.transition=t}};Sn.unstable_act=xF;Sn.useCallback=function(e,t){return ga.current.useCallback(e,t)};Sn.useContext=function(e){return ga.current.useContext(e)};Sn.useDebugValue=function(){};Sn.useDeferredValue=function(e){return ga.current.useDeferredValue(e)};Sn.useEffect=function(e,t){return ga.current.useEffect(e,t)};Sn.useId=function(){return ga.current.useId()};Sn.useImperativeHandle=function(e,t,r){return ga.current.useImperativeHandle(e,t,r)};Sn.useInsertionEffect=function(e,t){return ga.current.useInsertionEffect(e,t)};Sn.useLayoutEffect=function(e,t){return ga.current.useLayoutEffect(e,t)};Sn.useMemo=function(e,t){return ga.current.useMemo(e,t)};Sn.useReducer=function(e,t,r){return ga.current.useReducer(e,t,r)};Sn.useRef=function(e){return ga.current.useRef(e)};Sn.useState=function(e){return ga.current.useState(e)};Sn.useSyncExternalStore=function(e,t,r){return ga.current.useSyncExternalStore(e,t,r)};Sn.useTransition=function(){return ga.current.useTransition()};Sn.version="18.3.1";fF.exports=Sn;var te=fF.exports;const hr=zb(te),Gb=i6({__proto__:null,default:hr},[te]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w6=te,x6=Symbol.for("react.element"),b6=Symbol.for("react.fragment"),B6=Object.prototype.hasOwnProperty,C6=w6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S6={key:!0,ref:!0,__self:!0,__source:!0};function bF(e,t,r){var i,A={},u=null,h=null;r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(h=t.ref);for(i in t)B6.call(t,i)&&!S6.hasOwnProperty(i)&&(A[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)A[i]===void 0&&(A[i]=t[i]);return{$$typeof:x6,type:e,key:u,ref:h,props:A,_owner:C6.current}}Ev.Fragment=b6;Ev.jsx=bF;Ev.jsxs=bF;dF.exports=Ev;var Z=dF.exports,BF={exports:{}},_l={},CF={exports:{}},SF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Le,ze){var it=Le.length;Le.push(ze);e:for(;0<it;){var Lt=it-1>>>1,ne=Le[Lt];if(0<A(ne,ze))Le[Lt]=ze,Le[it]=ne,it=Lt;else break e}}function r(Le){return Le.length===0?null:Le[0]}function i(Le){if(Le.length===0)return null;var ze=Le[0],it=Le.pop();if(it!==ze){Le[0]=it;e:for(var Lt=0,ne=Le.length,Be=ne>>>1;Lt<Be;){var Pe=2*(Lt+1)-1,$e=Le[Pe],nt=Pe+1,Ze=Le[nt];if(0>A($e,it))nt<ne&&0>A(Ze,$e)?(Le[Lt]=Ze,Le[nt]=it,Lt=nt):(Le[Lt]=$e,Le[Pe]=it,Lt=Pe);else if(nt<ne&&0>A(Ze,it))Le[Lt]=Ze,Le[nt]=it,Lt=nt;else break e}}return ze}function A(Le,ze){var it=Le.sortIndex-ze.sortIndex;return it!==0?it:Le.id-ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var h=Date,o=h.now();e.unstable_now=function(){return h.now()-o}}var g=[],x=[],E=1,F=null,P=3,C=!1,D=!1,k=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Le){for(var ze=r(x);ze!==null;){if(ze.callback===null)i(x);else if(ze.startTime<=Le)i(x),ze.sortIndex=ze.expirationTime,t(g,ze);else break;ze=r(x)}}function ee(Le){if(k=!1,K(Le),!D)if(r(g)!==null)D=!0,Xe(se);else{var ze=r(x);ze!==null&&lt(ee,ze.startTime-Le)}}function se(Le,ze){D=!1,k&&(k=!1,U(ue),ue=-1),C=!0;var it=P;try{for(K(ze),F=r(g);F!==null&&(!(F.expirationTime>ze)||Le&&!oe());){var Lt=F.callback;if(typeof Lt=="function"){F.callback=null,P=F.priorityLevel;var ne=Lt(F.expirationTime<=ze);ze=e.unstable_now(),typeof ne=="function"?F.callback=ne:F===r(g)&&i(g),K(ze)}else i(g);F=r(g)}if(F!==null)var Be=!0;else{var Pe=r(x);Pe!==null&&lt(ee,Pe.startTime-ze),Be=!1}return Be}finally{F=null,P=it,C=!1}}var pe=!1,ye=null,ue=-1,Te=5,Ke=-1;function oe(){return!(e.unstable_now()-Ke<Te)}function he(){if(ye!==null){var Le=e.unstable_now();Ke=Le;var ze=!0;try{ze=ye(!0,Le)}finally{ze?Ie():(pe=!1,ye=null)}}else pe=!1}var Ie;if(typeof N=="function")Ie=function(){N(he)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,ct=be.port2;be.port1.onmessage=he,Ie=function(){ct.postMessage(null)}}else Ie=function(){j(he,0)};function Xe(Le){ye=Le,pe||(pe=!0,Ie())}function lt(Le,ze){ue=j(function(){Le(e.unstable_now())},ze)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_continueExecution=function(){D||C||(D=!0,Xe(se))},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return r(g)},e.unstable_next=function(Le){switch(P){case 1:case 2:case 3:var ze=3;break;default:ze=P}var it=P;P=ze;try{return Le()}finally{P=it}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Le,ze){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var it=P;P=Le;try{return ze()}finally{P=it}},e.unstable_scheduleCallback=function(Le,ze,it){var Lt=e.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?Lt+it:Lt):it=Lt,Le){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=it+ne,Le={id:E++,callback:ze,priorityLevel:Le,startTime:it,expirationTime:ne,sortIndex:-1},it>Lt?(Le.sortIndex=it,t(x,Le),r(g)===null&&Le===r(x)&&(k?(U(ue),ue=-1):k=!0,lt(ee,it-Lt))):(Le.sortIndex=ne,t(g,Le),D||C||(D=!0,Xe(se))),Le},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(Le){var ze=P;return function(){var it=P;P=ze;try{return Le.apply(this,arguments)}finally{P=it}}}})(SF);CF.exports=SF;var E6=CF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F6=te,vl=E6;function or(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EF=new Set,Gm={};function Nd(e,t){dp(e,t),dp(e+"Capture",t)}function dp(e,t){for(Gm[e]=t,e=0;e<t.length;e++)EF.add(t[e])}var fu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rw=Object.prototype.hasOwnProperty,I6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m5={},g5={};function T6(e){return Rw.call(g5,e)?!0:Rw.call(m5,e)?!1:I6.test(e)?g5[e]=!0:(m5[e]=!0,!1)}function P6(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L6(e,t,r,i){if(t===null||typeof t>"u"||P6(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ya(e,t,r,i,A,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=A,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var xo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xo[e]=new ya(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xo[t]=new ya(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xo[e]=new ya(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xo[e]=new ya(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xo[e]=new ya(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xo[e]=new ya(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xo[e]=new ya(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xo[e]=new ya(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xo[e]=new ya(e,5,!1,e.toLowerCase(),null,!1,!1)});var $b=/[\-:]([a-z])/g;function qb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($b,qb);xo[t]=new ya(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($b,qb);xo[t]=new ya(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($b,qb);xo[t]=new ya(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xo[e]=new ya(e,1,!1,e.toLowerCase(),null,!1,!1)});xo.xlinkHref=new ya("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xo[e]=new ya(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wb(e,t,r,i){var A=xo.hasOwnProperty(t)?xo[t]:null;(A!==null?A.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L6(t,r,A,i)&&(r=null),i||A===null?T6(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):A.mustUseProperty?e[A.propertyName]=r===null?A.type===3?!1:"":r:(t=A.attributeName,i=A.attributeNamespace,r===null?e.removeAttribute(t):(A=A.type,r=A===3||A===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var wu=F6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,t0=Symbol.for("react.element"),Ef=Symbol.for("react.portal"),Ff=Symbol.for("react.fragment"),Zb=Symbol.for("react.strict_mode"),Nw=Symbol.for("react.profiler"),FF=Symbol.for("react.provider"),IF=Symbol.for("react.context"),Xb=Symbol.for("react.forward_ref"),Dw=Symbol.for("react.suspense"),Ow=Symbol.for("react.suspense_list"),Yb=Symbol.for("react.memo"),th=Symbol.for("react.lazy"),TF=Symbol.for("react.offscreen"),y5=Symbol.iterator;function em(e){return e===null||typeof e!="object"?null:(e=y5&&e[y5]||e["@@iterator"],typeof e=="function"?e:null)}var Zi=Object.assign,g_;function mm(e){if(g_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);g_=t&&t[1]||""}return`
`+g_+e}var y_=!1;function v_(e,t){if(!e||y_)return"";y_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var i=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){i=x}e.call(t.prototype)}else{try{throw Error()}catch(x){i=x}e()}}catch(x){if(x&&i&&typeof x.stack=="string"){for(var A=x.stack.split(`
`),u=i.stack.split(`
`),h=A.length-1,o=u.length-1;1<=h&&0<=o&&A[h]!==u[o];)o--;for(;1<=h&&0<=o;h--,o--)if(A[h]!==u[o]){if(h!==1||o!==1)do if(h--,o--,0>o||A[h]!==u[o]){var g=`
`+A[h].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=h&&0<=o);break}}}finally{y_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?mm(e):""}function M6(e){switch(e.tag){case 5:return mm(e.type);case 16:return mm("Lazy");case 13:return mm("Suspense");case 19:return mm("SuspenseList");case 0:case 2:case 15:return e=v_(e.type,!1),e;case 11:return e=v_(e.type.render,!1),e;case 1:return e=v_(e.type,!0),e;default:return""}}function zw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ff:return"Fragment";case Ef:return"Portal";case Nw:return"Profiler";case Zb:return"StrictMode";case Dw:return"Suspense";case Ow:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case IF:return(e.displayName||"Context")+".Consumer";case FF:return(e._context.displayName||"Context")+".Provider";case Xb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yb:return t=e.displayName||null,t!==null?t:zw(e.type)||"Memo";case th:t=e._payload,e=e._init;try{return zw(e(t))}catch{}}return null}function k6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zw(t);case 8:return t===Zb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ph(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function PF(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function U6(e){var t=PF(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var A=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return A.call(this)},set:function(h){i=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(h){i=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function r0(e){e._valueTracker||(e._valueTracker=U6(e))}function LF(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=PF(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Fy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hw(e,t){var r=t.checked;return Zi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function v5(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Ph(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MF(e,t){t=t.checked,t!=null&&Wb(e,"checked",t,!1)}function jw(e,t){MF(e,t);var r=Ph(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vw(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vw(e,t.type,Ph(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _5(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vw(e,t,r){(t!=="number"||Fy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var gm=Array.isArray;function Hf(e,t,r,i){if(e=e.options,t){t={};for(var A=0;A<r.length;A++)t["$"+r[A]]=!0;for(r=0;r<e.length;r++)A=t.hasOwnProperty("$"+e[r].value),e[r].selected!==A&&(e[r].selected=A),A&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Ph(r),t=null,A=0;A<e.length;A++){if(e[A].value===r){e[A].selected=!0,i&&(e[A].defaultSelected=!0);return}t!==null||e[A].disabled||(t=e[A])}t!==null&&(t.selected=!0)}}function Kw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(or(91));return Zi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function w5(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(or(92));if(gm(r)){if(1<r.length)throw Error(or(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ph(r)}}function kF(e,t){var r=Ph(t.value),i=Ph(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function x5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function UF(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?UF(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var n0,QF=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,A){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,A)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(n0=n0||document.createElement("div"),n0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=n0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $m(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q6=["Webkit","ms","Moz","O"];Object.keys(Fm).forEach(function(e){Q6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fm[t]=Fm[e]})});function RF(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fm.hasOwnProperty(e)&&Fm[e]?(""+t).trim():t+"px"}function NF(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,A=RF(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,A):e[r]=A}}var R6=Zi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $w(e,t){if(t){if(R6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(or(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(or(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(or(61))}if(t.style!=null&&typeof t.style!="object")throw Error(or(62))}}function qw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ww=null;function Jb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zw=null,jf=null,Vf=null;function b5(e){if(e=Sg(e)){if(typeof Zw!="function")throw Error(or(280));var t=e.stateNode;t&&(t=Lv(t),Zw(e.stateNode,e.type,t))}}function DF(e){jf?Vf?Vf.push(e):Vf=[e]:jf=e}function OF(){if(jf){var e=jf,t=Vf;if(Vf=jf=null,b5(e),t)for(e=0;e<t.length;e++)b5(t[e])}}function zF(e,t){return e(t)}function HF(){}var __=!1;function jF(e,t,r){if(__)return e(t,r);__=!0;try{return zF(e,t,r)}finally{__=!1,(jf!==null||Vf!==null)&&(HF(),OF())}}function qm(e,t){var r=e.stateNode;if(r===null)return null;var i=Lv(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(or(231,t,typeof r));return r}var Xw=!1;if(fu)try{var tm={};Object.defineProperty(tm,"passive",{get:function(){Xw=!0}}),window.addEventListener("test",tm,tm),window.removeEventListener("test",tm,tm)}catch{Xw=!1}function N6(e,t,r,i,A,u,h,o,g){var x=Array.prototype.slice.call(arguments,3);try{t.apply(r,x)}catch(E){this.onError(E)}}var Im=!1,Iy=null,Ty=!1,Yw=null,D6={onError:function(e){Im=!0,Iy=e}};function O6(e,t,r,i,A,u,h,o,g){Im=!1,Iy=null,N6.apply(D6,arguments)}function z6(e,t,r,i,A,u,h,o,g){if(O6.apply(this,arguments),Im){if(Im){var x=Iy;Im=!1,Iy=null}else throw Error(or(198));Ty||(Ty=!0,Yw=x)}}function Dd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function VF(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function B5(e){if(Dd(e)!==e)throw Error(or(188))}function H6(e){var t=e.alternate;if(!t){if(t=Dd(e),t===null)throw Error(or(188));return t!==e?null:e}for(var r=e,i=t;;){var A=r.return;if(A===null)break;var u=A.alternate;if(u===null){if(i=A.return,i!==null){r=i;continue}break}if(A.child===u.child){for(u=A.child;u;){if(u===r)return B5(A),e;if(u===i)return B5(A),t;u=u.sibling}throw Error(or(188))}if(r.return!==i.return)r=A,i=u;else{for(var h=!1,o=A.child;o;){if(o===r){h=!0,r=A,i=u;break}if(o===i){h=!0,i=A,r=u;break}o=o.sibling}if(!h){for(o=u.child;o;){if(o===r){h=!0,r=u,i=A;break}if(o===i){h=!0,i=u,r=A;break}o=o.sibling}if(!h)throw Error(or(189))}}if(r.alternate!==i)throw Error(or(190))}if(r.tag!==3)throw Error(or(188));return r.stateNode.current===r?e:t}function KF(e){return e=H6(e),e!==null?GF(e):null}function GF(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=GF(e);if(t!==null)return t;e=e.sibling}return null}var $F=vl.unstable_scheduleCallback,C5=vl.unstable_cancelCallback,j6=vl.unstable_shouldYield,V6=vl.unstable_requestPaint,gs=vl.unstable_now,K6=vl.unstable_getCurrentPriorityLevel,e2=vl.unstable_ImmediatePriority,qF=vl.unstable_UserBlockingPriority,Py=vl.unstable_NormalPriority,G6=vl.unstable_LowPriority,WF=vl.unstable_IdlePriority,Fv=null,_c=null;function $6(e){if(_c&&typeof _c.onCommitFiberRoot=="function")try{_c.onCommitFiberRoot(Fv,e,void 0,(e.current.flags&128)===128)}catch{}}var LA=Math.clz32?Math.clz32:Z6,q6=Math.log,W6=Math.LN2;function Z6(e){return e>>>=0,e===0?32:31-(q6(e)/W6|0)|0}var i0=64,s0=4194304;function ym(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ly(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,A=e.suspendedLanes,u=e.pingedLanes,h=r&268435455;if(h!==0){var o=h&~A;o!==0?i=ym(o):(u&=h,u!==0&&(i=ym(u)))}else h=r&~A,h!==0?i=ym(h):u!==0&&(i=ym(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&A)&&(A=i&-i,u=t&-t,A>=u||A===16&&(u&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-LA(t),A=1<<r,i|=e[r],t&=~A;return i}function X6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y6(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,A=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-LA(u),o=1<<h,g=A[h];g===-1?(!(o&r)||o&i)&&(A[h]=X6(o,t)):g<=t&&(e.expiredLanes|=o),u&=~o}}function Jw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ZF(){var e=i0;return i0<<=1,!(i0&4194240)&&(i0=64),e}function w_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bg(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-LA(t),e[t]=r}function J6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var A=31-LA(r),u=1<<A;t[A]=0,i[A]=-1,e[A]=-1,r&=~u}}function t2(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-LA(r),A=1<<i;A&t|e[i]&t&&(e[i]|=t),r&=~A}}var Jn=0;function XF(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var YF,r2,JF,eI,tI,ex=!1,o0=[],yh=null,vh=null,_h=null,Wm=new Map,Zm=new Map,ih=[],eQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function S5(e,t){switch(e){case"focusin":case"focusout":yh=null;break;case"dragenter":case"dragleave":vh=null;break;case"mouseover":case"mouseout":_h=null;break;case"pointerover":case"pointerout":Wm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zm.delete(t.pointerId)}}function rm(e,t,r,i,A,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:u,targetContainers:[A]},t!==null&&(t=Sg(t),t!==null&&r2(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,A!==null&&t.indexOf(A)===-1&&t.push(A),e)}function tQ(e,t,r,i,A){switch(t){case"focusin":return yh=rm(yh,e,t,r,i,A),!0;case"dragenter":return vh=rm(vh,e,t,r,i,A),!0;case"mouseover":return _h=rm(_h,e,t,r,i,A),!0;case"pointerover":var u=A.pointerId;return Wm.set(u,rm(Wm.get(u)||null,e,t,r,i,A)),!0;case"gotpointercapture":return u=A.pointerId,Zm.set(u,rm(Zm.get(u)||null,e,t,r,i,A)),!0}return!1}function rI(e){var t=dd(e.target);if(t!==null){var r=Dd(t);if(r!==null){if(t=r.tag,t===13){if(t=VF(r),t!==null){e.blockedOn=t,tI(e.priority,function(){JF(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function iy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=tx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Ww=i,r.target.dispatchEvent(i),Ww=null}else return t=Sg(r),t!==null&&r2(t),e.blockedOn=r,!1;t.shift()}return!0}function E5(e,t,r){iy(e)&&r.delete(t)}function rQ(){ex=!1,yh!==null&&iy(yh)&&(yh=null),vh!==null&&iy(vh)&&(vh=null),_h!==null&&iy(_h)&&(_h=null),Wm.forEach(E5),Zm.forEach(E5)}function nm(e,t){e.blockedOn===t&&(e.blockedOn=null,ex||(ex=!0,vl.unstable_scheduleCallback(vl.unstable_NormalPriority,rQ)))}function Xm(e){function t(A){return nm(A,e)}if(0<o0.length){nm(o0[0],e);for(var r=1;r<o0.length;r++){var i=o0[r];i.blockedOn===e&&(i.blockedOn=null)}}for(yh!==null&&nm(yh,e),vh!==null&&nm(vh,e),_h!==null&&nm(_h,e),Wm.forEach(t),Zm.forEach(t),r=0;r<ih.length;r++)i=ih[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<ih.length&&(r=ih[0],r.blockedOn===null);)rI(r),r.blockedOn===null&&ih.shift()}var Kf=wu.ReactCurrentBatchConfig,My=!0;function nQ(e,t,r,i){var A=Jn,u=Kf.transition;Kf.transition=null;try{Jn=1,n2(e,t,r,i)}finally{Jn=A,Kf.transition=u}}function iQ(e,t,r,i){var A=Jn,u=Kf.transition;Kf.transition=null;try{Jn=4,n2(e,t,r,i)}finally{Jn=A,Kf.transition=u}}function n2(e,t,r,i){if(My){var A=tx(e,t,r,i);if(A===null)P_(e,t,i,ky,r),S5(e,i);else if(tQ(A,e,t,r,i))i.stopPropagation();else if(S5(e,i),t&4&&-1<eQ.indexOf(e)){for(;A!==null;){var u=Sg(A);if(u!==null&&YF(u),u=tx(e,t,r,i),u===null&&P_(e,t,i,ky,r),u===A)break;A=u}A!==null&&i.stopPropagation()}else P_(e,t,i,null,r)}}var ky=null;function tx(e,t,r,i){if(ky=null,e=Jb(i),e=dd(e),e!==null)if(t=Dd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=VF(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ky=e,null}function nI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K6()){case e2:return 1;case qF:return 4;case Py:case G6:return 16;case WF:return 536870912;default:return 16}default:return 16}}var uh=null,i2=null,sy=null;function iI(){if(sy)return sy;var e,t=i2,r=t.length,i,A="value"in uh?uh.value:uh.textContent,u=A.length;for(e=0;e<r&&t[e]===A[e];e++);var h=r-e;for(i=1;i<=h&&t[r-i]===A[u-i];i++);return sy=A.slice(e,1<i?1-i:void 0)}function oy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function a0(){return!0}function F5(){return!1}function wl(e){function t(r,i,A,u,h){this._reactName=r,this._targetInst=A,this.type=i,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?a0:F5,this.isPropagationStopped=F5,this}return Zi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=a0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=a0)},persist:function(){},isPersistent:a0}),t}var Sp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s2=wl(Sp),Cg=Zi({},Sp,{view:0,detail:0}),sQ=wl(Cg),x_,b_,im,Iv=Zi({},Cg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:o2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==im&&(im&&e.type==="mousemove"?(x_=e.screenX-im.screenX,b_=e.screenY-im.screenY):b_=x_=0,im=e),x_)},movementY:function(e){return"movementY"in e?e.movementY:b_}}),I5=wl(Iv),oQ=Zi({},Iv,{dataTransfer:0}),aQ=wl(oQ),lQ=Zi({},Cg,{relatedTarget:0}),B_=wl(lQ),AQ=Zi({},Sp,{animationName:0,elapsedTime:0,pseudoElement:0}),cQ=wl(AQ),uQ=Zi({},Sp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hQ=wl(uQ),dQ=Zi({},Sp,{data:0}),T5=wl(dQ),fQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mQ[e])?!!t[e]:!1}function o2(){return gQ}var yQ=Zi({},Cg,{key:function(e){if(e.key){var t=fQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:o2,charCode:function(e){return e.type==="keypress"?oy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vQ=wl(yQ),_Q=Zi({},Iv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P5=wl(_Q),wQ=Zi({},Cg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:o2}),xQ=wl(wQ),bQ=Zi({},Sp,{propertyName:0,elapsedTime:0,pseudoElement:0}),BQ=wl(bQ),CQ=Zi({},Iv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SQ=wl(CQ),EQ=[9,13,27,32],a2=fu&&"CompositionEvent"in window,Tm=null;fu&&"documentMode"in document&&(Tm=document.documentMode);var FQ=fu&&"TextEvent"in window&&!Tm,sI=fu&&(!a2||Tm&&8<Tm&&11>=Tm),L5=" ",M5=!1;function oI(e,t){switch(e){case"keyup":return EQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var If=!1;function IQ(e,t){switch(e){case"compositionend":return aI(t);case"keypress":return t.which!==32?null:(M5=!0,L5);case"textInput":return e=t.data,e===L5&&M5?null:e;default:return null}}function TQ(e,t){if(If)return e==="compositionend"||!a2&&oI(e,t)?(e=iI(),sy=i2=uh=null,If=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sI&&t.locale!=="ko"?null:t.data;default:return null}}var PQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PQ[e.type]:t==="textarea"}function lI(e,t,r,i){DF(i),t=Uy(t,"onChange"),0<t.length&&(r=new s2("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Pm=null,Ym=null;function LQ(e){vI(e,0)}function Tv(e){var t=Lf(e);if(LF(t))return e}function MQ(e,t){if(e==="change")return t}var AI=!1;if(fu){var C_;if(fu){var S_="oninput"in document;if(!S_){var U5=document.createElement("div");U5.setAttribute("oninput","return;"),S_=typeof U5.oninput=="function"}C_=S_}else C_=!1;AI=C_&&(!document.documentMode||9<document.documentMode)}function Q5(){Pm&&(Pm.detachEvent("onpropertychange",cI),Ym=Pm=null)}function cI(e){if(e.propertyName==="value"&&Tv(Ym)){var t=[];lI(t,Ym,e,Jb(e)),jF(LQ,t)}}function kQ(e,t,r){e==="focusin"?(Q5(),Pm=t,Ym=r,Pm.attachEvent("onpropertychange",cI)):e==="focusout"&&Q5()}function UQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tv(Ym)}function QQ(e,t){if(e==="click")return Tv(t)}function RQ(e,t){if(e==="input"||e==="change")return Tv(t)}function NQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kA=typeof Object.is=="function"?Object.is:NQ;function Jm(e,t){if(kA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var A=r[i];if(!Rw.call(t,A)||!kA(e[A],t[A]))return!1}return!0}function R5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function N5(e,t){var r=R5(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=R5(r)}}function uI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hI(){for(var e=window,t=Fy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Fy(e.document)}return t}function l2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function DQ(e){var t=hI(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&uI(r.ownerDocument.documentElement,r)){if(i!==null&&l2(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var A=r.textContent.length,u=Math.min(i.start,A);i=i.end===void 0?u:Math.min(i.end,A),!e.extend&&u>i&&(A=i,i=u,u=A),A=N5(r,u);var h=N5(r,i);A&&h&&(e.rangeCount!==1||e.anchorNode!==A.node||e.anchorOffset!==A.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(A.node,A.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OQ=fu&&"documentMode"in document&&11>=document.documentMode,Tf=null,rx=null,Lm=null,nx=!1;function D5(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nx||Tf==null||Tf!==Fy(i)||(i=Tf,"selectionStart"in i&&l2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Lm&&Jm(Lm,i)||(Lm=i,i=Uy(rx,"onSelect"),0<i.length&&(t=new s2("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Tf)))}function l0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Pf={animationend:l0("Animation","AnimationEnd"),animationiteration:l0("Animation","AnimationIteration"),animationstart:l0("Animation","AnimationStart"),transitionend:l0("Transition","TransitionEnd")},E_={},dI={};fu&&(dI=document.createElement("div").style,"AnimationEvent"in window||(delete Pf.animationend.animation,delete Pf.animationiteration.animation,delete Pf.animationstart.animation),"TransitionEvent"in window||delete Pf.transitionend.transition);function Pv(e){if(E_[e])return E_[e];if(!Pf[e])return e;var t=Pf[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in dI)return E_[e]=t[r];return e}var fI=Pv("animationend"),pI=Pv("animationiteration"),mI=Pv("animationstart"),gI=Pv("transitionend"),yI=new Map,O5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nh(e,t){yI.set(e,t),Nd(t,[e])}for(var F_=0;F_<O5.length;F_++){var I_=O5[F_],zQ=I_.toLowerCase(),HQ=I_[0].toUpperCase()+I_.slice(1);Nh(zQ,"on"+HQ)}Nh(fI,"onAnimationEnd");Nh(pI,"onAnimationIteration");Nh(mI,"onAnimationStart");Nh("dblclick","onDoubleClick");Nh("focusin","onFocus");Nh("focusout","onBlur");Nh(gI,"onTransitionEnd");dp("onMouseEnter",["mouseout","mouseover"]);dp("onMouseLeave",["mouseout","mouseover"]);dp("onPointerEnter",["pointerout","pointerover"]);dp("onPointerLeave",["pointerout","pointerover"]);Nd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(vm));function z5(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,z6(i,t,void 0,e),e.currentTarget=null}function vI(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],A=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var h=i.length-1;0<=h;h--){var o=i[h],g=o.instance,x=o.currentTarget;if(o=o.listener,g!==u&&A.isPropagationStopped())break e;z5(A,o,x),u=g}else for(h=0;h<i.length;h++){if(o=i[h],g=o.instance,x=o.currentTarget,o=o.listener,g!==u&&A.isPropagationStopped())break e;z5(A,o,x),u=g}}}if(Ty)throw e=Yw,Ty=!1,Yw=null,e}function Ti(e,t){var r=t[lx];r===void 0&&(r=t[lx]=new Set);var i=e+"__bubble";r.has(i)||(_I(t,e,2,!1),r.add(i))}function T_(e,t,r){var i=0;t&&(i|=4),_I(r,e,i,t)}var A0="_reactListening"+Math.random().toString(36).slice(2);function eg(e){if(!e[A0]){e[A0]=!0,EF.forEach(function(r){r!=="selectionchange"&&(jQ.has(r)||T_(r,!1,e),T_(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[A0]||(t[A0]=!0,T_("selectionchange",!1,t))}}function _I(e,t,r,i){switch(nI(t)){case 1:var A=nQ;break;case 4:A=iQ;break;default:A=n2}r=A.bind(null,t,r,e),A=void 0,!Xw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(A=!0),i?A!==void 0?e.addEventListener(t,r,{capture:!0,passive:A}):e.addEventListener(t,r,!0):A!==void 0?e.addEventListener(t,r,{passive:A}):e.addEventListener(t,r,!1)}function P_(e,t,r,i,A){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var h=i.tag;if(h===3||h===4){var o=i.stateNode.containerInfo;if(o===A||o.nodeType===8&&o.parentNode===A)break;if(h===4)for(h=i.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===A||g.nodeType===8&&g.parentNode===A))return;h=h.return}for(;o!==null;){if(h=dd(o),h===null)return;if(g=h.tag,g===5||g===6){i=u=h;continue e}o=o.parentNode}}i=i.return}jF(function(){var x=u,E=Jb(r),F=[];e:{var P=yI.get(e);if(P!==void 0){var C=s2,D=e;switch(e){case"keypress":if(oy(r)===0)break e;case"keydown":case"keyup":C=vQ;break;case"focusin":D="focus",C=B_;break;case"focusout":D="blur",C=B_;break;case"beforeblur":case"afterblur":C=B_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=I5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=aQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=xQ;break;case fI:case pI:case mI:C=cQ;break;case gI:C=BQ;break;case"scroll":C=sQ;break;case"wheel":C=SQ;break;case"copy":case"cut":case"paste":C=hQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=P5}var k=(t&4)!==0,j=!k&&e==="scroll",U=k?P!==null?P+"Capture":null:P;k=[];for(var N=x,K;N!==null;){K=N;var ee=K.stateNode;if(K.tag===5&&ee!==null&&(K=ee,U!==null&&(ee=qm(N,U),ee!=null&&k.push(tg(N,ee,K)))),j)break;N=N.return}0<k.length&&(P=new C(P,D,null,r,E),F.push({event:P,listeners:k}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",P&&r!==Ww&&(D=r.relatedTarget||r.fromElement)&&(dd(D)||D[pu]))break e;if((C||P)&&(P=E.window===E?E:(P=E.ownerDocument)?P.defaultView||P.parentWindow:window,C?(D=r.relatedTarget||r.toElement,C=x,D=D?dd(D):null,D!==null&&(j=Dd(D),D!==j||D.tag!==5&&D.tag!==6)&&(D=null)):(C=null,D=x),C!==D)){if(k=I5,ee="onMouseLeave",U="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(k=P5,ee="onPointerLeave",U="onPointerEnter",N="pointer"),j=C==null?P:Lf(C),K=D==null?P:Lf(D),P=new k(ee,N+"leave",C,r,E),P.target=j,P.relatedTarget=K,ee=null,dd(E)===x&&(k=new k(U,N+"enter",D,r,E),k.target=K,k.relatedTarget=j,ee=k),j=ee,C&&D)t:{for(k=C,U=D,N=0,K=k;K;K=cf(K))N++;for(K=0,ee=U;ee;ee=cf(ee))K++;for(;0<N-K;)k=cf(k),N--;for(;0<K-N;)U=cf(U),K--;for(;N--;){if(k===U||U!==null&&k===U.alternate)break t;k=cf(k),U=cf(U)}k=null}else k=null;C!==null&&H5(F,P,C,k,!1),D!==null&&j!==null&&H5(F,j,D,k,!0)}}e:{if(P=x?Lf(x):window,C=P.nodeName&&P.nodeName.toLowerCase(),C==="select"||C==="input"&&P.type==="file")var se=MQ;else if(k5(P))if(AI)se=RQ;else{se=UQ;var pe=kQ}else(C=P.nodeName)&&C.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(se=QQ);if(se&&(se=se(e,x))){lI(F,se,r,E);break e}pe&&pe(e,P,x),e==="focusout"&&(pe=P._wrapperState)&&pe.controlled&&P.type==="number"&&Vw(P,"number",P.value)}switch(pe=x?Lf(x):window,e){case"focusin":(k5(pe)||pe.contentEditable==="true")&&(Tf=pe,rx=x,Lm=null);break;case"focusout":Lm=rx=Tf=null;break;case"mousedown":nx=!0;break;case"contextmenu":case"mouseup":case"dragend":nx=!1,D5(F,r,E);break;case"selectionchange":if(OQ)break;case"keydown":case"keyup":D5(F,r,E)}var ye;if(a2)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else If?oI(e,r)&&(ue="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ue="onCompositionStart");ue&&(sI&&r.locale!=="ko"&&(If||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&If&&(ye=iI()):(uh=E,i2="value"in uh?uh.value:uh.textContent,If=!0)),pe=Uy(x,ue),0<pe.length&&(ue=new T5(ue,e,null,r,E),F.push({event:ue,listeners:pe}),ye?ue.data=ye:(ye=aI(r),ye!==null&&(ue.data=ye)))),(ye=FQ?IQ(e,r):TQ(e,r))&&(x=Uy(x,"onBeforeInput"),0<x.length&&(E=new T5("onBeforeInput","beforeinput",null,r,E),F.push({event:E,listeners:x}),E.data=ye))}vI(F,t)})}function tg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Uy(e,t){for(var r=t+"Capture",i=[];e!==null;){var A=e,u=A.stateNode;A.tag===5&&u!==null&&(A=u,u=qm(e,r),u!=null&&i.unshift(tg(e,u,A)),u=qm(e,t),u!=null&&i.push(tg(e,u,A))),e=e.return}return i}function cf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function H5(e,t,r,i,A){for(var u=t._reactName,h=[];r!==null&&r!==i;){var o=r,g=o.alternate,x=o.stateNode;if(g!==null&&g===i)break;o.tag===5&&x!==null&&(o=x,A?(g=qm(r,u),g!=null&&h.unshift(tg(r,g,o))):A||(g=qm(r,u),g!=null&&h.push(tg(r,g,o)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}var VQ=/\r\n?/g,KQ=/\u0000|\uFFFD/g;function j5(e){return(typeof e=="string"?e:""+e).replace(VQ,`
`).replace(KQ,"")}function c0(e,t,r){if(t=j5(t),j5(e)!==t&&r)throw Error(or(425))}function Qy(){}var ix=null,sx=null;function ox(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ax=typeof setTimeout=="function"?setTimeout:void 0,GQ=typeof clearTimeout=="function"?clearTimeout:void 0,V5=typeof Promise=="function"?Promise:void 0,$Q=typeof queueMicrotask=="function"?queueMicrotask:typeof V5<"u"?function(e){return V5.resolve(null).then(e).catch(qQ)}:ax;function qQ(e){setTimeout(function(){throw e})}function L_(e,t){var r=t,i=0;do{var A=r.nextSibling;if(e.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(i===0){e.removeChild(A),Xm(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=A}while(r);Xm(t)}function wh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function K5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ep=Math.random().toString(36).slice(2),mc="__reactFiber$"+Ep,rg="__reactProps$"+Ep,pu="__reactContainer$"+Ep,lx="__reactEvents$"+Ep,WQ="__reactListeners$"+Ep,ZQ="__reactHandles$"+Ep;function dd(e){var t=e[mc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pu]||r[mc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=K5(e);e!==null;){if(r=e[mc])return r;e=K5(e)}return t}e=r,r=e.parentNode}return null}function Sg(e){return e=e[mc]||e[pu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(or(33))}function Lv(e){return e[rg]||null}var Ax=[],Mf=-1;function Dh(e){return{current:e}}function Li(e){0>Mf||(e.current=Ax[Mf],Ax[Mf]=null,Mf--)}function Bi(e,t){Mf++,Ax[Mf]=e.current,e.current=t}var Lh={},Yo=Dh(Lh),za=Dh(!1),Td=Lh;function fp(e,t){var r=e.type.contextTypes;if(!r)return Lh;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var A={},u;for(u in r)A[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=A),A}function Ha(e){return e=e.childContextTypes,e!=null}function Ry(){Li(za),Li(Yo)}function G5(e,t,r){if(Yo.current!==Lh)throw Error(or(168));Bi(Yo,t),Bi(za,r)}function wI(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var A in i)if(!(A in t))throw Error(or(108,k6(e)||"Unknown",A));return Zi({},r,i)}function Ny(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lh,Td=Yo.current,Bi(Yo,e),Bi(za,za.current),!0}function $5(e,t,r){var i=e.stateNode;if(!i)throw Error(or(169));r?(e=wI(e,t,Td),i.__reactInternalMemoizedMergedChildContext=e,Li(za),Li(Yo),Bi(Yo,e)):Li(za),Bi(za,r)}var lu=null,Mv=!1,M_=!1;function xI(e){lu===null?lu=[e]:lu.push(e)}function XQ(e){Mv=!0,xI(e)}function Oh(){if(!M_&&lu!==null){M_=!0;var e=0,t=Jn;try{var r=lu;for(Jn=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}lu=null,Mv=!1}catch(A){throw lu!==null&&(lu=lu.slice(e+1)),$F(e2,Oh),A}finally{Jn=t,M_=!1}}return null}var kf=[],Uf=0,Dy=null,Oy=0,Rl=[],Nl=0,Pd=null,cu=1,uu="";function ld(e,t){kf[Uf++]=Oy,kf[Uf++]=Dy,Dy=e,Oy=t}function bI(e,t,r){Rl[Nl++]=cu,Rl[Nl++]=uu,Rl[Nl++]=Pd,Pd=e;var i=cu;e=uu;var A=32-LA(i)-1;i&=~(1<<A),r+=1;var u=32-LA(t)+A;if(30<u){var h=A-A%5;u=(i&(1<<h)-1).toString(32),i>>=h,A-=h,cu=1<<32-LA(t)+A|r<<A|i,uu=u+e}else cu=1<<u|r<<A|i,uu=e}function A2(e){e.return!==null&&(ld(e,1),bI(e,1,0))}function c2(e){for(;e===Dy;)Dy=kf[--Uf],kf[Uf]=null,Oy=kf[--Uf],kf[Uf]=null;for(;e===Pd;)Pd=Rl[--Nl],Rl[Nl]=null,uu=Rl[--Nl],Rl[Nl]=null,cu=Rl[--Nl],Rl[Nl]=null}var gl=null,pl=null,Ri=!1,TA=null;function BI(e,t){var r=Ol(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function q5(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gl=e,pl=wh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gl=e,pl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pd!==null?{id:cu,overflow:uu}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ol(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,gl=e,pl=null,!0):!1;default:return!1}}function cx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ux(e){if(Ri){var t=pl;if(t){var r=t;if(!q5(e,t)){if(cx(e))throw Error(or(418));t=wh(r.nextSibling);var i=gl;t&&q5(e,t)?BI(i,r):(e.flags=e.flags&-4097|2,Ri=!1,gl=e)}}else{if(cx(e))throw Error(or(418));e.flags=e.flags&-4097|2,Ri=!1,gl=e}}}function W5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gl=e}function u0(e){if(e!==gl)return!1;if(!Ri)return W5(e),Ri=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ox(e.type,e.memoizedProps)),t&&(t=pl)){if(cx(e))throw CI(),Error(or(418));for(;t;)BI(e,t),t=wh(t.nextSibling)}if(W5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(or(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){pl=wh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}pl=null}}else pl=gl?wh(e.stateNode.nextSibling):null;return!0}function CI(){for(var e=pl;e;)e=wh(e.nextSibling)}function pp(){pl=gl=null,Ri=!1}function u2(e){TA===null?TA=[e]:TA.push(e)}var YQ=wu.ReactCurrentBatchConfig;function sm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(or(309));var i=r.stateNode}if(!i)throw Error(or(147,e));var A=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var o=A.refs;h===null?delete o[u]:o[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(or(284));if(!r._owner)throw Error(or(290,e))}return e}function h0(e,t){throw e=Object.prototype.toString.call(t),Error(or(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Z5(e){var t=e._init;return t(e._payload)}function SI(e){function t(U,N){if(e){var K=U.deletions;K===null?(U.deletions=[N],U.flags|=16):K.push(N)}}function r(U,N){if(!e)return null;for(;N!==null;)t(U,N),N=N.sibling;return null}function i(U,N){for(U=new Map;N!==null;)N.key!==null?U.set(N.key,N):U.set(N.index,N),N=N.sibling;return U}function A(U,N){return U=Ch(U,N),U.index=0,U.sibling=null,U}function u(U,N,K){return U.index=K,e?(K=U.alternate,K!==null?(K=K.index,K<N?(U.flags|=2,N):K):(U.flags|=2,N)):(U.flags|=1048576,N)}function h(U){return e&&U.alternate===null&&(U.flags|=2),U}function o(U,N,K,ee){return N===null||N.tag!==6?(N=O_(K,U.mode,ee),N.return=U,N):(N=A(N,K),N.return=U,N)}function g(U,N,K,ee){var se=K.type;return se===Ff?E(U,N,K.props.children,ee,K.key):N!==null&&(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===th&&Z5(se)===N.type)?(ee=A(N,K.props),ee.ref=sm(U,N,K),ee.return=U,ee):(ee=dy(K.type,K.key,K.props,null,U.mode,ee),ee.ref=sm(U,N,K),ee.return=U,ee)}function x(U,N,K,ee){return N===null||N.tag!==4||N.stateNode.containerInfo!==K.containerInfo||N.stateNode.implementation!==K.implementation?(N=z_(K,U.mode,ee),N.return=U,N):(N=A(N,K.children||[]),N.return=U,N)}function E(U,N,K,ee,se){return N===null||N.tag!==7?(N=Cd(K,U.mode,ee,se),N.return=U,N):(N=A(N,K),N.return=U,N)}function F(U,N,K){if(typeof N=="string"&&N!==""||typeof N=="number")return N=O_(""+N,U.mode,K),N.return=U,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case t0:return K=dy(N.type,N.key,N.props,null,U.mode,K),K.ref=sm(U,null,N),K.return=U,K;case Ef:return N=z_(N,U.mode,K),N.return=U,N;case th:var ee=N._init;return F(U,ee(N._payload),K)}if(gm(N)||em(N))return N=Cd(N,U.mode,K,null),N.return=U,N;h0(U,N)}return null}function P(U,N,K,ee){var se=N!==null?N.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return se!==null?null:o(U,N,""+K,ee);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case t0:return K.key===se?g(U,N,K,ee):null;case Ef:return K.key===se?x(U,N,K,ee):null;case th:return se=K._init,P(U,N,se(K._payload),ee)}if(gm(K)||em(K))return se!==null?null:E(U,N,K,ee,null);h0(U,K)}return null}function C(U,N,K,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return U=U.get(K)||null,o(N,U,""+ee,se);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case t0:return U=U.get(ee.key===null?K:ee.key)||null,g(N,U,ee,se);case Ef:return U=U.get(ee.key===null?K:ee.key)||null,x(N,U,ee,se);case th:var pe=ee._init;return C(U,N,K,pe(ee._payload),se)}if(gm(ee)||em(ee))return U=U.get(K)||null,E(N,U,ee,se,null);h0(N,ee)}return null}function D(U,N,K,ee){for(var se=null,pe=null,ye=N,ue=N=0,Te=null;ye!==null&&ue<K.length;ue++){ye.index>ue?(Te=ye,ye=null):Te=ye.sibling;var Ke=P(U,ye,K[ue],ee);if(Ke===null){ye===null&&(ye=Te);break}e&&ye&&Ke.alternate===null&&t(U,ye),N=u(Ke,N,ue),pe===null?se=Ke:pe.sibling=Ke,pe=Ke,ye=Te}if(ue===K.length)return r(U,ye),Ri&&ld(U,ue),se;if(ye===null){for(;ue<K.length;ue++)ye=F(U,K[ue],ee),ye!==null&&(N=u(ye,N,ue),pe===null?se=ye:pe.sibling=ye,pe=ye);return Ri&&ld(U,ue),se}for(ye=i(U,ye);ue<K.length;ue++)Te=C(ye,U,ue,K[ue],ee),Te!==null&&(e&&Te.alternate!==null&&ye.delete(Te.key===null?ue:Te.key),N=u(Te,N,ue),pe===null?se=Te:pe.sibling=Te,pe=Te);return e&&ye.forEach(function(oe){return t(U,oe)}),Ri&&ld(U,ue),se}function k(U,N,K,ee){var se=em(K);if(typeof se!="function")throw Error(or(150));if(K=se.call(K),K==null)throw Error(or(151));for(var pe=se=null,ye=N,ue=N=0,Te=null,Ke=K.next();ye!==null&&!Ke.done;ue++,Ke=K.next()){ye.index>ue?(Te=ye,ye=null):Te=ye.sibling;var oe=P(U,ye,Ke.value,ee);if(oe===null){ye===null&&(ye=Te);break}e&&ye&&oe.alternate===null&&t(U,ye),N=u(oe,N,ue),pe===null?se=oe:pe.sibling=oe,pe=oe,ye=Te}if(Ke.done)return r(U,ye),Ri&&ld(U,ue),se;if(ye===null){for(;!Ke.done;ue++,Ke=K.next())Ke=F(U,Ke.value,ee),Ke!==null&&(N=u(Ke,N,ue),pe===null?se=Ke:pe.sibling=Ke,pe=Ke);return Ri&&ld(U,ue),se}for(ye=i(U,ye);!Ke.done;ue++,Ke=K.next())Ke=C(ye,U,ue,Ke.value,ee),Ke!==null&&(e&&Ke.alternate!==null&&ye.delete(Ke.key===null?ue:Ke.key),N=u(Ke,N,ue),pe===null?se=Ke:pe.sibling=Ke,pe=Ke);return e&&ye.forEach(function(he){return t(U,he)}),Ri&&ld(U,ue),se}function j(U,N,K,ee){if(typeof K=="object"&&K!==null&&K.type===Ff&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case t0:e:{for(var se=K.key,pe=N;pe!==null;){if(pe.key===se){if(se=K.type,se===Ff){if(pe.tag===7){r(U,pe.sibling),N=A(pe,K.props.children),N.return=U,U=N;break e}}else if(pe.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===th&&Z5(se)===pe.type){r(U,pe.sibling),N=A(pe,K.props),N.ref=sm(U,pe,K),N.return=U,U=N;break e}r(U,pe);break}else t(U,pe);pe=pe.sibling}K.type===Ff?(N=Cd(K.props.children,U.mode,ee,K.key),N.return=U,U=N):(ee=dy(K.type,K.key,K.props,null,U.mode,ee),ee.ref=sm(U,N,K),ee.return=U,U=ee)}return h(U);case Ef:e:{for(pe=K.key;N!==null;){if(N.key===pe)if(N.tag===4&&N.stateNode.containerInfo===K.containerInfo&&N.stateNode.implementation===K.implementation){r(U,N.sibling),N=A(N,K.children||[]),N.return=U,U=N;break e}else{r(U,N);break}else t(U,N);N=N.sibling}N=z_(K,U.mode,ee),N.return=U,U=N}return h(U);case th:return pe=K._init,j(U,N,pe(K._payload),ee)}if(gm(K))return D(U,N,K,ee);if(em(K))return k(U,N,K,ee);h0(U,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,N!==null&&N.tag===6?(r(U,N.sibling),N=A(N,K),N.return=U,U=N):(r(U,N),N=O_(K,U.mode,ee),N.return=U,U=N),h(U)):r(U,N)}return j}var mp=SI(!0),EI=SI(!1),zy=Dh(null),Hy=null,Qf=null,h2=null;function d2(){h2=Qf=Hy=null}function f2(e){var t=zy.current;Li(zy),e._currentValue=t}function hx(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Gf(e,t){Hy=e,h2=Qf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Da=!0),e.firstContext=null)}function Vl(e){var t=e._currentValue;if(h2!==e)if(e={context:e,memoizedValue:t,next:null},Qf===null){if(Hy===null)throw Error(or(308));Qf=e,Hy.dependencies={lanes:0,firstContext:e}}else Qf=Qf.next=e;return t}var fd=null;function p2(e){fd===null?fd=[e]:fd.push(e)}function FI(e,t,r,i){var A=t.interleaved;return A===null?(r.next=r,p2(t)):(r.next=A.next,A.next=r),t.interleaved=r,mu(e,i)}function mu(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var rh=!1;function m2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function II(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xh(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Rn&2){var A=i.pending;return A===null?t.next=t:(t.next=A.next,A.next=t),i.pending=t,mu(e,r)}return A=i.interleaved,A===null?(t.next=t,p2(i)):(t.next=A.next,A.next=t),i.interleaved=t,mu(e,r)}function ay(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,t2(e,r)}}function X5(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var A=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?A=u=h:u=u.next=h,r=r.next}while(r!==null);u===null?A=u=t:u=u.next=t}else A=u=t;r={baseState:i.baseState,firstBaseUpdate:A,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function jy(e,t,r,i){var A=e.updateQueue;rh=!1;var u=A.firstBaseUpdate,h=A.lastBaseUpdate,o=A.shared.pending;if(o!==null){A.shared.pending=null;var g=o,x=g.next;g.next=null,h===null?u=x:h.next=x,h=g;var E=e.alternate;E!==null&&(E=E.updateQueue,o=E.lastBaseUpdate,o!==h&&(o===null?E.firstBaseUpdate=x:o.next=x,E.lastBaseUpdate=g))}if(u!==null){var F=A.baseState;h=0,E=x=g=null,o=u;do{var P=o.lane,C=o.eventTime;if((i&P)===P){E!==null&&(E=E.next={eventTime:C,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var D=e,k=o;switch(P=t,C=r,k.tag){case 1:if(D=k.payload,typeof D=="function"){F=D.call(C,F,P);break e}F=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=k.payload,P=typeof D=="function"?D.call(C,F,P):D,P==null)break e;F=Zi({},F,P);break e;case 2:rh=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,P=A.effects,P===null?A.effects=[o]:P.push(o))}else C={eventTime:C,lane:P,tag:o.tag,payload:o.payload,callback:o.callback,next:null},E===null?(x=E=C,g=F):E=E.next=C,h|=P;if(o=o.next,o===null){if(o=A.shared.pending,o===null)break;P=o,o=P.next,P.next=null,A.lastBaseUpdate=P,A.shared.pending=null}}while(!0);if(E===null&&(g=F),A.baseState=g,A.firstBaseUpdate=x,A.lastBaseUpdate=E,t=A.shared.interleaved,t!==null){A=t;do h|=A.lane,A=A.next;while(A!==t)}else u===null&&(A.shared.lanes=0);Md|=h,e.lanes=h,e.memoizedState=F}}function Y5(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],A=i.callback;if(A!==null){if(i.callback=null,i=r,typeof A!="function")throw Error(or(191,A));A.call(i)}}}var Eg={},wc=Dh(Eg),ng=Dh(Eg),ig=Dh(Eg);function pd(e){if(e===Eg)throw Error(or(174));return e}function g2(e,t){switch(Bi(ig,t),Bi(ng,e),Bi(wc,Eg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gw(t,e)}Li(wc),Bi(wc,t)}function gp(){Li(wc),Li(ng),Li(ig)}function TI(e){pd(ig.current);var t=pd(wc.current),r=Gw(t,e.type);t!==r&&(Bi(ng,e),Bi(wc,r))}function y2(e){ng.current===e&&(Li(wc),Li(ng))}var qi=Dh(0);function Vy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var k_=[];function v2(){for(var e=0;e<k_.length;e++)k_[e]._workInProgressVersionPrimary=null;k_.length=0}var ly=wu.ReactCurrentDispatcher,U_=wu.ReactCurrentBatchConfig,Ld=0,Wi=null,Ks=null,oo=null,Ky=!1,Mm=!1,sg=0,JQ=0;function Oo(){throw Error(or(321))}function _2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!kA(e[r],t[r]))return!1;return!0}function w2(e,t,r,i,A,u){if(Ld=u,Wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ly.current=e===null||e.memoizedState===null?nR:iR,e=r(i,A),Mm){u=0;do{if(Mm=!1,sg=0,25<=u)throw Error(or(301));u+=1,oo=Ks=null,t.updateQueue=null,ly.current=sR,e=r(i,A)}while(Mm)}if(ly.current=Gy,t=Ks!==null&&Ks.next!==null,Ld=0,oo=Ks=Wi=null,Ky=!1,t)throw Error(or(300));return e}function x2(){var e=sg!==0;return sg=0,e}function hc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oo===null?Wi.memoizedState=oo=e:oo=oo.next=e,oo}function Kl(){if(Ks===null){var e=Wi.alternate;e=e!==null?e.memoizedState:null}else e=Ks.next;var t=oo===null?Wi.memoizedState:oo.next;if(t!==null)oo=t,Ks=e;else{if(e===null)throw Error(or(310));Ks=e,e={memoizedState:Ks.memoizedState,baseState:Ks.baseState,baseQueue:Ks.baseQueue,queue:Ks.queue,next:null},oo===null?Wi.memoizedState=oo=e:oo=oo.next=e}return oo}function og(e,t){return typeof t=="function"?t(e):t}function Q_(e){var t=Kl(),r=t.queue;if(r===null)throw Error(or(311));r.lastRenderedReducer=e;var i=Ks,A=i.baseQueue,u=r.pending;if(u!==null){if(A!==null){var h=A.next;A.next=u.next,u.next=h}i.baseQueue=A=u,r.pending=null}if(A!==null){u=A.next,i=i.baseState;var o=h=null,g=null,x=u;do{var E=x.lane;if((Ld&E)===E)g!==null&&(g=g.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),i=x.hasEagerState?x.eagerState:e(i,x.action);else{var F={lane:E,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};g===null?(o=g=F,h=i):g=g.next=F,Wi.lanes|=E,Md|=E}x=x.next}while(x!==null&&x!==u);g===null?h=i:g.next=o,kA(i,t.memoizedState)||(Da=!0),t.memoizedState=i,t.baseState=h,t.baseQueue=g,r.lastRenderedState=i}if(e=r.interleaved,e!==null){A=e;do u=A.lane,Wi.lanes|=u,Md|=u,A=A.next;while(A!==e)}else A===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function R_(e){var t=Kl(),r=t.queue;if(r===null)throw Error(or(311));r.lastRenderedReducer=e;var i=r.dispatch,A=r.pending,u=t.memoizedState;if(A!==null){r.pending=null;var h=A=A.next;do u=e(u,h.action),h=h.next;while(h!==A);kA(u,t.memoizedState)||(Da=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,i]}function PI(){}function LI(e,t){var r=Wi,i=Kl(),A=t(),u=!kA(i.memoizedState,A);if(u&&(i.memoizedState=A,Da=!0),i=i.queue,b2(UI.bind(null,r,i,e),[e]),i.getSnapshot!==t||u||oo!==null&&oo.memoizedState.tag&1){if(r.flags|=2048,ag(9,kI.bind(null,r,i,A,t),void 0,null),lo===null)throw Error(or(349));Ld&30||MI(r,t,A)}return A}function MI(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Wi.updateQueue,t===null?(t={lastEffect:null,stores:null},Wi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function kI(e,t,r,i){t.value=r,t.getSnapshot=i,QI(t)&&RI(e)}function UI(e,t,r){return r(function(){QI(t)&&RI(e)})}function QI(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!kA(e,r)}catch{return!0}}function RI(e){var t=mu(e,1);t!==null&&MA(t,e,1,-1)}function J5(e){var t=hc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:og,lastRenderedState:e},t.queue=e,e=e.dispatch=rR.bind(null,Wi,e),[t.memoizedState,e]}function ag(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Wi.updateQueue,t===null?(t={lastEffect:null,stores:null},Wi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function NI(){return Kl().memoizedState}function Ay(e,t,r,i){var A=hc();Wi.flags|=e,A.memoizedState=ag(1|t,r,void 0,i===void 0?null:i)}function kv(e,t,r,i){var A=Kl();i=i===void 0?null:i;var u=void 0;if(Ks!==null){var h=Ks.memoizedState;if(u=h.destroy,i!==null&&_2(i,h.deps)){A.memoizedState=ag(t,r,u,i);return}}Wi.flags|=e,A.memoizedState=ag(1|t,r,u,i)}function eS(e,t){return Ay(8390656,8,e,t)}function b2(e,t){return kv(2048,8,e,t)}function DI(e,t){return kv(4,2,e,t)}function OI(e,t){return kv(4,4,e,t)}function zI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function HI(e,t,r){return r=r!=null?r.concat([e]):null,kv(4,4,zI.bind(null,t,e),r)}function B2(){}function jI(e,t){var r=Kl();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&_2(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function VI(e,t){var r=Kl();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&_2(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function KI(e,t,r){return Ld&21?(kA(r,t)||(r=ZF(),Wi.lanes|=r,Md|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Da=!0),e.memoizedState=r)}function eR(e,t){var r=Jn;Jn=r!==0&&4>r?r:4,e(!0);var i=U_.transition;U_.transition={};try{e(!1),t()}finally{Jn=r,U_.transition=i}}function GI(){return Kl().memoizedState}function tR(e,t,r){var i=Bh(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},$I(e))qI(t,r);else if(r=FI(e,t,r,i),r!==null){var A=ma();MA(r,e,i,A),WI(r,t,i)}}function rR(e,t,r){var i=Bh(e),A={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if($I(e))qI(t,A);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,o=u(h,r);if(A.hasEagerState=!0,A.eagerState=o,kA(o,h)){var g=t.interleaved;g===null?(A.next=A,p2(t)):(A.next=g.next,g.next=A),t.interleaved=A;return}}catch{}finally{}r=FI(e,t,A,i),r!==null&&(A=ma(),MA(r,e,i,A),WI(r,t,i))}}function $I(e){var t=e.alternate;return e===Wi||t!==null&&t===Wi}function qI(e,t){Mm=Ky=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function WI(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,t2(e,r)}}var Gy={readContext:Vl,useCallback:Oo,useContext:Oo,useEffect:Oo,useImperativeHandle:Oo,useInsertionEffect:Oo,useLayoutEffect:Oo,useMemo:Oo,useReducer:Oo,useRef:Oo,useState:Oo,useDebugValue:Oo,useDeferredValue:Oo,useTransition:Oo,useMutableSource:Oo,useSyncExternalStore:Oo,useId:Oo,unstable_isNewReconciler:!1},nR={readContext:Vl,useCallback:function(e,t){return hc().memoizedState=[e,t===void 0?null:t],e},useContext:Vl,useEffect:eS,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ay(4194308,4,zI.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ay(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ay(4,2,e,t)},useMemo:function(e,t){var r=hc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=hc();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=tR.bind(null,Wi,e),[i.memoizedState,e]},useRef:function(e){var t=hc();return e={current:e},t.memoizedState=e},useState:J5,useDebugValue:B2,useDeferredValue:function(e){return hc().memoizedState=e},useTransition:function(){var e=J5(!1),t=e[0];return e=eR.bind(null,e[1]),hc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Wi,A=hc();if(Ri){if(r===void 0)throw Error(or(407));r=r()}else{if(r=t(),lo===null)throw Error(or(349));Ld&30||MI(i,t,r)}A.memoizedState=r;var u={value:r,getSnapshot:t};return A.queue=u,eS(UI.bind(null,i,u,e),[e]),i.flags|=2048,ag(9,kI.bind(null,i,u,r,t),void 0,null),r},useId:function(){var e=hc(),t=lo.identifierPrefix;if(Ri){var r=uu,i=cu;r=(i&~(1<<32-LA(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=sg++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=JQ++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iR={readContext:Vl,useCallback:jI,useContext:Vl,useEffect:b2,useImperativeHandle:HI,useInsertionEffect:DI,useLayoutEffect:OI,useMemo:VI,useReducer:Q_,useRef:NI,useState:function(){return Q_(og)},useDebugValue:B2,useDeferredValue:function(e){var t=Kl();return KI(t,Ks.memoizedState,e)},useTransition:function(){var e=Q_(og)[0],t=Kl().memoizedState;return[e,t]},useMutableSource:PI,useSyncExternalStore:LI,useId:GI,unstable_isNewReconciler:!1},sR={readContext:Vl,useCallback:jI,useContext:Vl,useEffect:b2,useImperativeHandle:HI,useInsertionEffect:DI,useLayoutEffect:OI,useMemo:VI,useReducer:R_,useRef:NI,useState:function(){return R_(og)},useDebugValue:B2,useDeferredValue:function(e){var t=Kl();return Ks===null?t.memoizedState=e:KI(t,Ks.memoizedState,e)},useTransition:function(){var e=R_(og)[0],t=Kl().memoizedState;return[e,t]},useMutableSource:PI,useSyncExternalStore:LI,useId:GI,unstable_isNewReconciler:!1};function BA(e,t){if(e&&e.defaultProps){t=Zi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function dx(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Zi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Uv={isMounted:function(e){return(e=e._reactInternals)?Dd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=ma(),A=Bh(e),u=hu(i,A);u.payload=t,r!=null&&(u.callback=r),t=xh(e,u,A),t!==null&&(MA(t,e,A,i),ay(t,e,A))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=ma(),A=Bh(e),u=hu(i,A);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=xh(e,u,A),t!==null&&(MA(t,e,A,i),ay(t,e,A))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ma(),i=Bh(e),A=hu(r,i);A.tag=2,t!=null&&(A.callback=t),t=xh(e,A,i),t!==null&&(MA(t,e,i,r),ay(t,e,i))}};function tS(e,t,r,i,A,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,h):t.prototype&&t.prototype.isPureReactComponent?!Jm(r,i)||!Jm(A,u):!0}function ZI(e,t,r){var i=!1,A=Lh,u=t.contextType;return typeof u=="object"&&u!==null?u=Vl(u):(A=Ha(t)?Td:Yo.current,i=t.contextTypes,u=(i=i!=null)?fp(e,A):Lh),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uv,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=A,e.__reactInternalMemoizedMaskedChildContext=u),t}function rS(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Uv.enqueueReplaceState(t,t.state,null)}function fx(e,t,r,i){var A=e.stateNode;A.props=r,A.state=e.memoizedState,A.refs={},m2(e);var u=t.contextType;typeof u=="object"&&u!==null?A.context=Vl(u):(u=Ha(t)?Td:Yo.current,A.context=fp(e,u)),A.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(dx(e,t,u,r),A.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(t=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),t!==A.state&&Uv.enqueueReplaceState(A,A.state,null),jy(e,r,A,i),A.state=e.memoizedState),typeof A.componentDidMount=="function"&&(e.flags|=4194308)}function yp(e,t){try{var r="",i=t;do r+=M6(i),i=i.return;while(i);var A=r}catch(u){A=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:A,digest:null}}function N_(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function px(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var oR=typeof WeakMap=="function"?WeakMap:Map;function XI(e,t,r){r=hu(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){qy||(qy=!0,Cx=i),px(e,t)},r}function YI(e,t,r){r=hu(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var A=t.value;r.payload=function(){return i(A)},r.callback=function(){px(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){px(e,t),typeof i!="function"&&(bh===null?bh=new Set([this]):bh.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function nS(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new oR;var A=new Set;i.set(t,A)}else A=i.get(t),A===void 0&&(A=new Set,i.set(t,A));A.has(r)||(A.add(r),e=_R.bind(null,e,t,r),t.then(e,e))}function iS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sS(e,t,r,i,A){return e.mode&1?(e.flags|=65536,e.lanes=A,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=hu(-1,1),t.tag=2,xh(r,t,1))),r.lanes|=1),e)}var aR=wu.ReactCurrentOwner,Da=!1;function fa(e,t,r,i){t.child=e===null?EI(t,null,r,i):mp(t,e.child,r,i)}function oS(e,t,r,i,A){r=r.render;var u=t.ref;return Gf(t,A),i=w2(e,t,r,i,u,A),r=x2(),e!==null&&!Da?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~A,gu(e,t,A)):(Ri&&r&&A2(t),t.flags|=1,fa(e,t,i,A),t.child)}function aS(e,t,r,i,A){if(e===null){var u=r.type;return typeof u=="function"&&!L2(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,JI(e,t,u,i,A)):(e=dy(r.type,null,i,t,t.mode,A),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&A)){var h=u.memoizedProps;if(r=r.compare,r=r!==null?r:Jm,r(h,i)&&e.ref===t.ref)return gu(e,t,A)}return t.flags|=1,e=Ch(u,i),e.ref=t.ref,e.return=t,t.child=e}function JI(e,t,r,i,A){if(e!==null){var u=e.memoizedProps;if(Jm(u,i)&&e.ref===t.ref)if(Da=!1,t.pendingProps=i=u,(e.lanes&A)!==0)e.flags&131072&&(Da=!0);else return t.lanes=e.lanes,gu(e,t,A)}return mx(e,t,r,i,A)}function eT(e,t,r){var i=t.pendingProps,A=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bi(Nf,dl),dl|=r;else{if(!(r&1073741824))return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bi(Nf,dl),dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:r,Bi(Nf,dl),dl|=i}else u!==null?(i=u.baseLanes|r,t.memoizedState=null):i=r,Bi(Nf,dl),dl|=i;return fa(e,t,A,r),t.child}function tT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function mx(e,t,r,i,A){var u=Ha(r)?Td:Yo.current;return u=fp(t,u),Gf(t,A),r=w2(e,t,r,i,u,A),i=x2(),e!==null&&!Da?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~A,gu(e,t,A)):(Ri&&i&&A2(t),t.flags|=1,fa(e,t,r,A),t.child)}function lS(e,t,r,i,A){if(Ha(r)){var u=!0;Ny(t)}else u=!1;if(Gf(t,A),t.stateNode===null)cy(e,t),ZI(t,r,i),fx(t,r,i,A),i=!0;else if(e===null){var h=t.stateNode,o=t.memoizedProps;h.props=o;var g=h.context,x=r.contextType;typeof x=="object"&&x!==null?x=Vl(x):(x=Ha(r)?Td:Yo.current,x=fp(t,x));var E=r.getDerivedStateFromProps,F=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function";F||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==i||g!==x)&&rS(t,h,i,x),rh=!1;var P=t.memoizedState;h.state=P,jy(t,i,h,A),g=t.memoizedState,o!==i||P!==g||za.current||rh?(typeof E=="function"&&(dx(t,r,E,i),g=t.memoizedState),(o=rh||tS(t,r,o,i,P,g,x))?(F||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),h.props=i,h.state=g,h.context=x,i=o):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,II(e,t),o=t.memoizedProps,x=t.type===t.elementType?o:BA(t.type,o),h.props=x,F=t.pendingProps,P=h.context,g=r.contextType,typeof g=="object"&&g!==null?g=Vl(g):(g=Ha(r)?Td:Yo.current,g=fp(t,g));var C=r.getDerivedStateFromProps;(E=typeof C=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==F||P!==g)&&rS(t,h,i,g),rh=!1,P=t.memoizedState,h.state=P,jy(t,i,h,A);var D=t.memoizedState;o!==F||P!==D||za.current||rh?(typeof C=="function"&&(dx(t,r,C,i),D=t.memoizedState),(x=rh||tS(t,r,x,i,P,D,g)||!1)?(E||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,D,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,D,g)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=D),h.props=i,h.state=D,h.context=g,i=x):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),i=!1)}return gx(e,t,r,i,u,A)}function gx(e,t,r,i,A,u){tT(e,t);var h=(t.flags&128)!==0;if(!i&&!h)return A&&$5(t,r,!1),gu(e,t,u);i=t.stateNode,aR.current=t;var o=h&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&h?(t.child=mp(t,e.child,null,u),t.child=mp(t,null,o,u)):fa(e,t,o,u),t.memoizedState=i.state,A&&$5(t,r,!0),t.child}function rT(e){var t=e.stateNode;t.pendingContext?G5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&G5(e,t.context,!1),g2(e,t.containerInfo)}function AS(e,t,r,i,A){return pp(),u2(A),t.flags|=256,fa(e,t,r,i),t.child}var yx={dehydrated:null,treeContext:null,retryLane:0};function vx(e){return{baseLanes:e,cachePool:null,transitions:null}}function nT(e,t,r){var i=t.pendingProps,A=qi.current,u=!1,h=(t.flags&128)!==0,o;if((o=h)||(o=e!==null&&e.memoizedState===null?!1:(A&2)!==0),o?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(A|=1),Bi(qi,A&1),e===null)return ux(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=i.children,e=i.fallback,u?(i=t.mode,u=t.child,h={mode:"hidden",children:h},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=Nv(h,i,0,null),e=Cd(e,i,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=vx(r),t.memoizedState=yx,e):C2(t,h));if(A=e.memoizedState,A!==null&&(o=A.dehydrated,o!==null))return lR(e,t,h,i,o,A,r);if(u){u=i.fallback,h=t.mode,A=e.child,o=A.sibling;var g={mode:"hidden",children:i.children};return!(h&1)&&t.child!==A?(i=t.child,i.childLanes=0,i.pendingProps=g,t.deletions=null):(i=Ch(A,g),i.subtreeFlags=A.subtreeFlags&14680064),o!==null?u=Ch(o,u):(u=Cd(u,h,r,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,h=e.child.memoizedState,h=h===null?vx(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~r,t.memoizedState=yx,i}return u=e.child,e=u.sibling,i=Ch(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function C2(e,t){return t=Nv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function d0(e,t,r,i){return i!==null&&u2(i),mp(t,e.child,null,r),e=C2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lR(e,t,r,i,A,u,h){if(r)return t.flags&256?(t.flags&=-257,i=N_(Error(or(422))),d0(e,t,h,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,A=t.mode,i=Nv({mode:"visible",children:i.children},A,0,null),u=Cd(u,A,h,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&mp(t,e.child,null,h),t.child.memoizedState=vx(h),t.memoizedState=yx,u);if(!(t.mode&1))return d0(e,t,h,null);if(A.data==="$!"){if(i=A.nextSibling&&A.nextSibling.dataset,i)var o=i.dgst;return i=o,u=Error(or(419)),i=N_(u,i,void 0),d0(e,t,h,i)}if(o=(h&e.childLanes)!==0,Da||o){if(i=lo,i!==null){switch(h&-h){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(i.suspendedLanes|h)?0:A,A!==0&&A!==u.retryLane&&(u.retryLane=A,mu(e,A),MA(i,e,A,-1))}return P2(),i=N_(Error(or(421))),d0(e,t,h,i)}return A.data==="$?"?(t.flags|=128,t.child=e.child,t=wR.bind(null,e),A._reactRetry=t,null):(e=u.treeContext,pl=wh(A.nextSibling),gl=t,Ri=!0,TA=null,e!==null&&(Rl[Nl++]=cu,Rl[Nl++]=uu,Rl[Nl++]=Pd,cu=e.id,uu=e.overflow,Pd=t),t=C2(t,i.children),t.flags|=4096,t)}function cS(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),hx(e.return,t,r)}function D_(e,t,r,i,A){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:A}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=r,u.tailMode=A)}function iT(e,t,r){var i=t.pendingProps,A=i.revealOrder,u=i.tail;if(fa(e,t,i.children,r),i=qi.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cS(e,r,t);else if(e.tag===19)cS(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Bi(qi,i),!(t.mode&1))t.memoizedState=null;else switch(A){case"forwards":for(r=t.child,A=null;r!==null;)e=r.alternate,e!==null&&Vy(e)===null&&(A=r),r=r.sibling;r=A,r===null?(A=t.child,t.child=null):(A=r.sibling,r.sibling=null),D_(t,!1,A,r,u);break;case"backwards":for(r=null,A=t.child,t.child=null;A!==null;){if(e=A.alternate,e!==null&&Vy(e)===null){t.child=A;break}e=A.sibling,A.sibling=r,r=A,A=e}D_(t,!0,r,null,u);break;case"together":D_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gu(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Md|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(or(153));if(t.child!==null){for(e=t.child,r=Ch(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ch(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function AR(e,t,r){switch(t.tag){case 3:rT(t),pp();break;case 5:TI(t);break;case 1:Ha(t.type)&&Ny(t);break;case 4:g2(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,A=t.memoizedProps.value;Bi(zy,i._currentValue),i._currentValue=A;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Bi(qi,qi.current&1),t.flags|=128,null):r&t.child.childLanes?nT(e,t,r):(Bi(qi,qi.current&1),e=gu(e,t,r),e!==null?e.sibling:null);Bi(qi,qi.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return iT(e,t,r);t.flags|=128}if(A=t.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Bi(qi,qi.current),i)break;return null;case 22:case 23:return t.lanes=0,eT(e,t,r)}return gu(e,t,r)}var sT,_x,oT,aT;sT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_x=function(){};oT=function(e,t,r,i){var A=e.memoizedProps;if(A!==i){e=t.stateNode,pd(wc.current);var u=null;switch(r){case"input":A=Hw(e,A),i=Hw(e,i),u=[];break;case"select":A=Zi({},A,{value:void 0}),i=Zi({},i,{value:void 0}),u=[];break;case"textarea":A=Kw(e,A),i=Kw(e,i),u=[];break;default:typeof A.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Qy)}$w(r,i);var h;r=null;for(x in A)if(!i.hasOwnProperty(x)&&A.hasOwnProperty(x)&&A[x]!=null)if(x==="style"){var o=A[x];for(h in o)o.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Gm.hasOwnProperty(x)?u||(u=[]):(u=u||[]).push(x,null));for(x in i){var g=i[x];if(o=A!=null?A[x]:void 0,i.hasOwnProperty(x)&&g!==o&&(g!=null||o!=null))if(x==="style")if(o){for(h in o)!o.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in g)g.hasOwnProperty(h)&&o[h]!==g[h]&&(r||(r={}),r[h]=g[h])}else r||(u||(u=[]),u.push(x,r)),r=g;else x==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,o=o?o.__html:void 0,g!=null&&o!==g&&(u=u||[]).push(x,g)):x==="children"?typeof g!="string"&&typeof g!="number"||(u=u||[]).push(x,""+g):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Gm.hasOwnProperty(x)?(g!=null&&x==="onScroll"&&Ti("scroll",e),u||o===g||(u=[])):(u=u||[]).push(x,g))}r&&(u=u||[]).push("style",r);var x=u;(t.updateQueue=x)&&(t.flags|=4)}};aT=function(e,t,r,i){r!==i&&(t.flags|=4)};function om(e,t){if(!Ri)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function zo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var A=e.child;A!==null;)r|=A.lanes|A.childLanes,i|=A.subtreeFlags&14680064,i|=A.flags&14680064,A.return=e,A=A.sibling;else for(A=e.child;A!==null;)r|=A.lanes|A.childLanes,i|=A.subtreeFlags,i|=A.flags,A.return=e,A=A.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function cR(e,t,r){var i=t.pendingProps;switch(c2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zo(t),null;case 1:return Ha(t.type)&&Ry(),zo(t),null;case 3:return i=t.stateNode,gp(),Li(za),Li(Yo),v2(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(u0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,TA!==null&&(Fx(TA),TA=null))),_x(e,t),zo(t),null;case 5:y2(t);var A=pd(ig.current);if(r=t.type,e!==null&&t.stateNode!=null)oT(e,t,r,i,A),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(or(166));return zo(t),null}if(e=pd(wc.current),u0(t)){i=t.stateNode,r=t.type;var u=t.memoizedProps;switch(i[mc]=t,i[rg]=u,e=(t.mode&1)!==0,r){case"dialog":Ti("cancel",i),Ti("close",i);break;case"iframe":case"object":case"embed":Ti("load",i);break;case"video":case"audio":for(A=0;A<vm.length;A++)Ti(vm[A],i);break;case"source":Ti("error",i);break;case"img":case"image":case"link":Ti("error",i),Ti("load",i);break;case"details":Ti("toggle",i);break;case"input":v5(i,u),Ti("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Ti("invalid",i);break;case"textarea":w5(i,u),Ti("invalid",i)}$w(r,u),A=null;for(var h in u)if(u.hasOwnProperty(h)){var o=u[h];h==="children"?typeof o=="string"?i.textContent!==o&&(u.suppressHydrationWarning!==!0&&c0(i.textContent,o,e),A=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(u.suppressHydrationWarning!==!0&&c0(i.textContent,o,e),A=["children",""+o]):Gm.hasOwnProperty(h)&&o!=null&&h==="onScroll"&&Ti("scroll",i)}switch(r){case"input":r0(i),_5(i,u,!0);break;case"textarea":r0(i),x5(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=Qy)}i=A,t.updateQueue=i,i!==null&&(t.flags|=4)}else{h=A.nodeType===9?A:A.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=UF(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=h.createElement(r,{is:i.is}):(e=h.createElement(r),r==="select"&&(h=e,i.multiple?h.multiple=!0:i.size&&(h.size=i.size))):e=h.createElementNS(e,r),e[mc]=t,e[rg]=i,sT(e,t,!1,!1),t.stateNode=e;e:{switch(h=qw(r,i),r){case"dialog":Ti("cancel",e),Ti("close",e),A=i;break;case"iframe":case"object":case"embed":Ti("load",e),A=i;break;case"video":case"audio":for(A=0;A<vm.length;A++)Ti(vm[A],e);A=i;break;case"source":Ti("error",e),A=i;break;case"img":case"image":case"link":Ti("error",e),Ti("load",e),A=i;break;case"details":Ti("toggle",e),A=i;break;case"input":v5(e,i),A=Hw(e,i),Ti("invalid",e);break;case"option":A=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},A=Zi({},i,{value:void 0}),Ti("invalid",e);break;case"textarea":w5(e,i),A=Kw(e,i),Ti("invalid",e);break;default:A=i}$w(r,A),o=A;for(u in o)if(o.hasOwnProperty(u)){var g=o[u];u==="style"?NF(e,g):u==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&QF(e,g)):u==="children"?typeof g=="string"?(r!=="textarea"||g!=="")&&$m(e,g):typeof g=="number"&&$m(e,""+g):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gm.hasOwnProperty(u)?g!=null&&u==="onScroll"&&Ti("scroll",e):g!=null&&Wb(e,u,g,h))}switch(r){case"input":r0(e),_5(e,i,!1);break;case"textarea":r0(e),x5(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ph(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?Hf(e,!!i.multiple,u,!1):i.defaultValue!=null&&Hf(e,!!i.multiple,i.defaultValue,!0);break;default:typeof A.onClick=="function"&&(e.onclick=Qy)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zo(t),null;case 6:if(e&&t.stateNode!=null)aT(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(or(166));if(r=pd(ig.current),pd(wc.current),u0(t)){if(i=t.stateNode,r=t.memoizedProps,i[mc]=t,(u=i.nodeValue!==r)&&(e=gl,e!==null))switch(e.tag){case 3:c0(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&c0(i.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[mc]=t,t.stateNode=i}return zo(t),null;case 13:if(Li(qi),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ri&&pl!==null&&t.mode&1&&!(t.flags&128))CI(),pp(),t.flags|=98560,u=!1;else if(u=u0(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(or(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(or(317));u[mc]=t}else pp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zo(t),u=!1}else TA!==null&&(Fx(TA),TA=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||qi.current&1?$s===0&&($s=3):P2())),t.updateQueue!==null&&(t.flags|=4),zo(t),null);case 4:return gp(),_x(e,t),e===null&&eg(t.stateNode.containerInfo),zo(t),null;case 10:return f2(t.type._context),zo(t),null;case 17:return Ha(t.type)&&Ry(),zo(t),null;case 19:if(Li(qi),u=t.memoizedState,u===null)return zo(t),null;if(i=(t.flags&128)!==0,h=u.rendering,h===null)if(i)om(u,!1);else{if($s!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=Vy(e),h!==null){for(t.flags|=128,om(u,!1),i=h.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)u=r,e=i,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Bi(qi,qi.current&1|2),t.child}e=e.sibling}u.tail!==null&&gs()>vp&&(t.flags|=128,i=!0,om(u,!1),t.lanes=4194304)}else{if(!i)if(e=Vy(h),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),om(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Ri)return zo(t),null}else 2*gs()-u.renderingStartTime>vp&&r!==1073741824&&(t.flags|=128,i=!0,om(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(r=u.last,r!==null?r.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=gs(),t.sibling=null,r=qi.current,Bi(qi,i?r&1|2:r&1),t):(zo(t),null);case 22:case 23:return T2(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?dl&1073741824&&(zo(t),t.subtreeFlags&6&&(t.flags|=8192)):zo(t),null;case 24:return null;case 25:return null}throw Error(or(156,t.tag))}function uR(e,t){switch(c2(t),t.tag){case 1:return Ha(t.type)&&Ry(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gp(),Li(za),Li(Yo),v2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return y2(t),null;case 13:if(Li(qi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(or(340));pp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Li(qi),null;case 4:return gp(),null;case 10:return f2(t.type._context),null;case 22:case 23:return T2(),null;case 24:return null;default:return null}}var f0=!1,Wo=!1,hR=typeof WeakSet=="function"?WeakSet:Set,Ir=null;function Rf(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){os(e,t,i)}else r.current=null}function wx(e,t,r){try{r()}catch(i){os(e,t,i)}}var uS=!1;function dR(e,t){if(ix=My,e=hI(),l2(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var A=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var h=0,o=-1,g=-1,x=0,E=0,F=e,P=null;t:for(;;){for(var C;F!==r||A!==0&&F.nodeType!==3||(o=h+A),F!==u||i!==0&&F.nodeType!==3||(g=h+i),F.nodeType===3&&(h+=F.nodeValue.length),(C=F.firstChild)!==null;)P=F,F=C;for(;;){if(F===e)break t;if(P===r&&++x===A&&(o=h),P===u&&++E===i&&(g=h),(C=F.nextSibling)!==null)break;F=P,P=F.parentNode}F=C}r=o===-1||g===-1?null:{start:o,end:g}}else r=null}r=r||{start:0,end:0}}else r=null;for(sx={focusedElem:e,selectionRange:r},My=!1,Ir=t;Ir!==null;)if(t=Ir,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ir=e;else for(;Ir!==null;){t=Ir;try{var D=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var k=D.memoizedProps,j=D.memoizedState,U=t.stateNode,N=U.getSnapshotBeforeUpdate(t.elementType===t.type?k:BA(t.type,k),j);U.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var K=t.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(or(163))}}catch(ee){os(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,Ir=e;break}Ir=t.return}return D=uS,uS=!1,D}function km(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var A=i=i.next;do{if((A.tag&e)===e){var u=A.destroy;A.destroy=void 0,u!==void 0&&wx(t,r,u)}A=A.next}while(A!==i)}}function Qv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function xx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function lT(e){var t=e.alternate;t!==null&&(e.alternate=null,lT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mc],delete t[rg],delete t[lx],delete t[WQ],delete t[ZQ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AT(e){return e.tag===5||e.tag===3||e.tag===4}function hS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bx(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Qy));else if(i!==4&&(e=e.child,e!==null))for(bx(e,t,r),e=e.sibling;e!==null;)bx(e,t,r),e=e.sibling}function Bx(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Bx(e,t,r),e=e.sibling;e!==null;)Bx(e,t,r),e=e.sibling}var yo=null,IA=!1;function Ku(e,t,r){for(r=r.child;r!==null;)cT(e,t,r),r=r.sibling}function cT(e,t,r){if(_c&&typeof _c.onCommitFiberUnmount=="function")try{_c.onCommitFiberUnmount(Fv,r)}catch{}switch(r.tag){case 5:Wo||Rf(r,t);case 6:var i=yo,A=IA;yo=null,Ku(e,t,r),yo=i,IA=A,yo!==null&&(IA?(e=yo,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):yo.removeChild(r.stateNode));break;case 18:yo!==null&&(IA?(e=yo,r=r.stateNode,e.nodeType===8?L_(e.parentNode,r):e.nodeType===1&&L_(e,r),Xm(e)):L_(yo,r.stateNode));break;case 4:i=yo,A=IA,yo=r.stateNode.containerInfo,IA=!0,Ku(e,t,r),yo=i,IA=A;break;case 0:case 11:case 14:case 15:if(!Wo&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){A=i=i.next;do{var u=A,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&wx(r,t,h),A=A.next}while(A!==i)}Ku(e,t,r);break;case 1:if(!Wo&&(Rf(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(o){os(r,t,o)}Ku(e,t,r);break;case 21:Ku(e,t,r);break;case 22:r.mode&1?(Wo=(i=Wo)||r.memoizedState!==null,Ku(e,t,r),Wo=i):Ku(e,t,r);break;default:Ku(e,t,r)}}function dS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new hR),t.forEach(function(i){var A=xR.bind(null,e,i);r.has(i)||(r.add(i),i.then(A,A))})}}function yA(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var A=r[i];try{var u=e,h=t,o=h;e:for(;o!==null;){switch(o.tag){case 5:yo=o.stateNode,IA=!1;break e;case 3:yo=o.stateNode.containerInfo,IA=!0;break e;case 4:yo=o.stateNode.containerInfo,IA=!0;break e}o=o.return}if(yo===null)throw Error(or(160));cT(u,h,A),yo=null,IA=!1;var g=A.alternate;g!==null&&(g.return=null),A.return=null}catch(x){os(A,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uT(t,e),t=t.sibling}function uT(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yA(t,e),Ac(e),i&4){try{km(3,e,e.return),Qv(3,e)}catch(k){os(e,e.return,k)}try{km(5,e,e.return)}catch(k){os(e,e.return,k)}}break;case 1:yA(t,e),Ac(e),i&512&&r!==null&&Rf(r,r.return);break;case 5:if(yA(t,e),Ac(e),i&512&&r!==null&&Rf(r,r.return),e.flags&32){var A=e.stateNode;try{$m(A,"")}catch(k){os(e,e.return,k)}}if(i&4&&(A=e.stateNode,A!=null)){var u=e.memoizedProps,h=r!==null?r.memoizedProps:u,o=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{o==="input"&&u.type==="radio"&&u.name!=null&&MF(A,u),qw(o,h);var x=qw(o,u);for(h=0;h<g.length;h+=2){var E=g[h],F=g[h+1];E==="style"?NF(A,F):E==="dangerouslySetInnerHTML"?QF(A,F):E==="children"?$m(A,F):Wb(A,E,F,x)}switch(o){case"input":jw(A,u);break;case"textarea":kF(A,u);break;case"select":var P=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!u.multiple;var C=u.value;C!=null?Hf(A,!!u.multiple,C,!1):P!==!!u.multiple&&(u.defaultValue!=null?Hf(A,!!u.multiple,u.defaultValue,!0):Hf(A,!!u.multiple,u.multiple?[]:"",!1))}A[rg]=u}catch(k){os(e,e.return,k)}}break;case 6:if(yA(t,e),Ac(e),i&4){if(e.stateNode===null)throw Error(or(162));A=e.stateNode,u=e.memoizedProps;try{A.nodeValue=u}catch(k){os(e,e.return,k)}}break;case 3:if(yA(t,e),Ac(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Xm(t.containerInfo)}catch(k){os(e,e.return,k)}break;case 4:yA(t,e),Ac(e);break;case 13:yA(t,e),Ac(e),A=e.child,A.flags&8192&&(u=A.memoizedState!==null,A.stateNode.isHidden=u,!u||A.alternate!==null&&A.alternate.memoizedState!==null||(F2=gs())),i&4&&dS(e);break;case 22:if(E=r!==null&&r.memoizedState!==null,e.mode&1?(Wo=(x=Wo)||E,yA(t,e),Wo=x):yA(t,e),Ac(e),i&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!E&&e.mode&1)for(Ir=e,E=e.child;E!==null;){for(F=Ir=E;Ir!==null;){switch(P=Ir,C=P.child,P.tag){case 0:case 11:case 14:case 15:km(4,P,P.return);break;case 1:Rf(P,P.return);var D=P.stateNode;if(typeof D.componentWillUnmount=="function"){i=P,r=P.return;try{t=i,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch(k){os(i,r,k)}}break;case 5:Rf(P,P.return);break;case 22:if(P.memoizedState!==null){pS(F);continue}}C!==null?(C.return=P,Ir=C):pS(F)}E=E.sibling}e:for(E=null,F=e;;){if(F.tag===5){if(E===null){E=F;try{A=F.stateNode,x?(u=A.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(o=F.stateNode,g=F.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null,o.style.display=RF("display",h))}catch(k){os(e,e.return,k)}}}else if(F.tag===6){if(E===null)try{F.stateNode.nodeValue=x?"":F.memoizedProps}catch(k){os(e,e.return,k)}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===e)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===e)break e;for(;F.sibling===null;){if(F.return===null||F.return===e)break e;E===F&&(E=null),F=F.return}E===F&&(E=null),F.sibling.return=F.return,F=F.sibling}}break;case 19:yA(t,e),Ac(e),i&4&&dS(e);break;case 21:break;default:yA(t,e),Ac(e)}}function Ac(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(AT(r)){var i=r;break e}r=r.return}throw Error(or(160))}switch(i.tag){case 5:var A=i.stateNode;i.flags&32&&($m(A,""),i.flags&=-33);var u=hS(e);Bx(e,u,A);break;case 3:case 4:var h=i.stateNode.containerInfo,o=hS(e);bx(e,o,h);break;default:throw Error(or(161))}}catch(g){os(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fR(e,t,r){Ir=e,hT(e)}function hT(e,t,r){for(var i=(e.mode&1)!==0;Ir!==null;){var A=Ir,u=A.child;if(A.tag===22&&i){var h=A.memoizedState!==null||f0;if(!h){var o=A.alternate,g=o!==null&&o.memoizedState!==null||Wo;o=f0;var x=Wo;if(f0=h,(Wo=g)&&!x)for(Ir=A;Ir!==null;)h=Ir,g=h.child,h.tag===22&&h.memoizedState!==null?mS(A):g!==null?(g.return=h,Ir=g):mS(A);for(;u!==null;)Ir=u,hT(u),u=u.sibling;Ir=A,f0=o,Wo=x}fS(e)}else A.subtreeFlags&8772&&u!==null?(u.return=A,Ir=u):fS(e)}}function fS(e){for(;Ir!==null;){var t=Ir;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wo||Qv(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Wo)if(r===null)i.componentDidMount();else{var A=t.elementType===t.type?r.memoizedProps:BA(t.type,r.memoizedProps);i.componentDidUpdate(A,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Y5(t,u,i);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Y5(t,h,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&r.focus();break;case"img":g.src&&(r.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var E=x.memoizedState;if(E!==null){var F=E.dehydrated;F!==null&&Xm(F)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(or(163))}Wo||t.flags&512&&xx(t)}catch(P){os(t,t.return,P)}}if(t===e){Ir=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ir=r;break}Ir=t.return}}function pS(e){for(;Ir!==null;){var t=Ir;if(t===e){Ir=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ir=r;break}Ir=t.return}}function mS(e){for(;Ir!==null;){var t=Ir;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Qv(4,t)}catch(g){os(t,r,g)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var A=t.return;try{i.componentDidMount()}catch(g){os(t,A,g)}}var u=t.return;try{xx(t)}catch(g){os(t,u,g)}break;case 5:var h=t.return;try{xx(t)}catch(g){os(t,h,g)}}}catch(g){os(t,t.return,g)}if(t===e){Ir=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ir=o;break}Ir=t.return}}var pR=Math.ceil,$y=wu.ReactCurrentDispatcher,S2=wu.ReactCurrentOwner,jl=wu.ReactCurrentBatchConfig,Rn=0,lo=null,Ts=null,wo=0,dl=0,Nf=Dh(0),$s=0,lg=null,Md=0,Rv=0,E2=0,Um=null,Na=null,F2=0,vp=1/0,au=null,qy=!1,Cx=null,bh=null,p0=!1,hh=null,Wy=0,Qm=0,Sx=null,uy=-1,hy=0;function ma(){return Rn&6?gs():uy!==-1?uy:uy=gs()}function Bh(e){return e.mode&1?Rn&2&&wo!==0?wo&-wo:YQ.transition!==null?(hy===0&&(hy=ZF()),hy):(e=Jn,e!==0||(e=window.event,e=e===void 0?16:nI(e.type)),e):1}function MA(e,t,r,i){if(50<Qm)throw Qm=0,Sx=null,Error(or(185));Bg(e,r,i),(!(Rn&2)||e!==lo)&&(e===lo&&(!(Rn&2)&&(Rv|=r),$s===4&&sh(e,wo)),ja(e,i),r===1&&Rn===0&&!(t.mode&1)&&(vp=gs()+500,Mv&&Oh()))}function ja(e,t){var r=e.callbackNode;Y6(e,t);var i=Ly(e,e===lo?wo:0);if(i===0)r!==null&&C5(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&C5(r),t===1)e.tag===0?XQ(gS.bind(null,e)):xI(gS.bind(null,e)),$Q(function(){!(Rn&6)&&Oh()}),r=null;else{switch(XF(i)){case 1:r=e2;break;case 4:r=qF;break;case 16:r=Py;break;case 536870912:r=WF;break;default:r=Py}r=_T(r,dT.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function dT(e,t){if(uy=-1,hy=0,Rn&6)throw Error(or(327));var r=e.callbackNode;if($f()&&e.callbackNode!==r)return null;var i=Ly(e,e===lo?wo:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Zy(e,i);else{t=i;var A=Rn;Rn|=2;var u=pT();(lo!==e||wo!==t)&&(au=null,vp=gs()+500,Bd(e,t));do try{yR();break}catch(o){fT(e,o)}while(!0);d2(),$y.current=u,Rn=A,Ts!==null?t=0:(lo=null,wo=0,t=$s)}if(t!==0){if(t===2&&(A=Jw(e),A!==0&&(i=A,t=Ex(e,A))),t===1)throw r=lg,Bd(e,0),sh(e,i),ja(e,gs()),r;if(t===6)sh(e,i);else{if(A=e.current.alternate,!(i&30)&&!mR(A)&&(t=Zy(e,i),t===2&&(u=Jw(e),u!==0&&(i=u,t=Ex(e,u))),t===1))throw r=lg,Bd(e,0),sh(e,i),ja(e,gs()),r;switch(e.finishedWork=A,e.finishedLanes=i,t){case 0:case 1:throw Error(or(345));case 2:Ad(e,Na,au);break;case 3:if(sh(e,i),(i&130023424)===i&&(t=F2+500-gs(),10<t)){if(Ly(e,0)!==0)break;if(A=e.suspendedLanes,(A&i)!==i){ma(),e.pingedLanes|=e.suspendedLanes&A;break}e.timeoutHandle=ax(Ad.bind(null,e,Na,au),t);break}Ad(e,Na,au);break;case 4:if(sh(e,i),(i&4194240)===i)break;for(t=e.eventTimes,A=-1;0<i;){var h=31-LA(i);u=1<<h,h=t[h],h>A&&(A=h),i&=~u}if(i=A,i=gs()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*pR(i/1960))-i,10<i){e.timeoutHandle=ax(Ad.bind(null,e,Na,au),i);break}Ad(e,Na,au);break;case 5:Ad(e,Na,au);break;default:throw Error(or(329))}}}return ja(e,gs()),e.callbackNode===r?dT.bind(null,e):null}function Ex(e,t){var r=Um;return e.current.memoizedState.isDehydrated&&(Bd(e,t).flags|=256),e=Zy(e,t),e!==2&&(t=Na,Na=r,t!==null&&Fx(t)),e}function Fx(e){Na===null?Na=e:Na.push.apply(Na,e)}function mR(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var A=r[i],u=A.getSnapshot;A=A.value;try{if(!kA(u(),A))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sh(e,t){for(t&=~E2,t&=~Rv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-LA(t),i=1<<r;e[r]=-1,t&=~i}}function gS(e){if(Rn&6)throw Error(or(327));$f();var t=Ly(e,0);if(!(t&1))return ja(e,gs()),null;var r=Zy(e,t);if(e.tag!==0&&r===2){var i=Jw(e);i!==0&&(t=i,r=Ex(e,i))}if(r===1)throw r=lg,Bd(e,0),sh(e,t),ja(e,gs()),r;if(r===6)throw Error(or(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ad(e,Na,au),ja(e,gs()),null}function I2(e,t){var r=Rn;Rn|=1;try{return e(t)}finally{Rn=r,Rn===0&&(vp=gs()+500,Mv&&Oh())}}function kd(e){hh!==null&&hh.tag===0&&!(Rn&6)&&$f();var t=Rn;Rn|=1;var r=jl.transition,i=Jn;try{if(jl.transition=null,Jn=1,e)return e()}finally{Jn=i,jl.transition=r,Rn=t,!(Rn&6)&&Oh()}}function T2(){dl=Nf.current,Li(Nf)}function Bd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,GQ(r)),Ts!==null)for(r=Ts.return;r!==null;){var i=r;switch(c2(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ry();break;case 3:gp(),Li(za),Li(Yo),v2();break;case 5:y2(i);break;case 4:gp();break;case 13:Li(qi);break;case 19:Li(qi);break;case 10:f2(i.type._context);break;case 22:case 23:T2()}r=r.return}if(lo=e,Ts=e=Ch(e.current,null),wo=dl=t,$s=0,lg=null,E2=Rv=Md=0,Na=Um=null,fd!==null){for(t=0;t<fd.length;t++)if(r=fd[t],i=r.interleaved,i!==null){r.interleaved=null;var A=i.next,u=r.pending;if(u!==null){var h=u.next;u.next=A,i.next=h}r.pending=i}fd=null}return e}function fT(e,t){do{var r=Ts;try{if(d2(),ly.current=Gy,Ky){for(var i=Wi.memoizedState;i!==null;){var A=i.queue;A!==null&&(A.pending=null),i=i.next}Ky=!1}if(Ld=0,oo=Ks=Wi=null,Mm=!1,sg=0,S2.current=null,r===null||r.return===null){$s=1,lg=t,Ts=null;break}e:{var u=e,h=r.return,o=r,g=t;if(t=wo,o.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var x=g,E=o,F=E.tag;if(!(E.mode&1)&&(F===0||F===11||F===15)){var P=E.alternate;P?(E.updateQueue=P.updateQueue,E.memoizedState=P.memoizedState,E.lanes=P.lanes):(E.updateQueue=null,E.memoizedState=null)}var C=iS(h);if(C!==null){C.flags&=-257,sS(C,h,o,u,t),C.mode&1&&nS(u,x,t),t=C,g=x;var D=t.updateQueue;if(D===null){var k=new Set;k.add(g),t.updateQueue=k}else D.add(g);break e}else{if(!(t&1)){nS(u,x,t),P2();break e}g=Error(or(426))}}else if(Ri&&o.mode&1){var j=iS(h);if(j!==null){!(j.flags&65536)&&(j.flags|=256),sS(j,h,o,u,t),u2(yp(g,o));break e}}u=g=yp(g,o),$s!==4&&($s=2),Um===null?Um=[u]:Um.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var U=XI(u,g,t);X5(u,U);break e;case 1:o=g;var N=u.type,K=u.stateNode;if(!(u.flags&128)&&(typeof N.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(bh===null||!bh.has(K)))){u.flags|=65536,t&=-t,u.lanes|=t;var ee=YI(u,o,t);X5(u,ee);break e}}u=u.return}while(u!==null)}gT(r)}catch(se){t=se,Ts===r&&r!==null&&(Ts=r=r.return);continue}break}while(!0)}function pT(){var e=$y.current;return $y.current=Gy,e===null?Gy:e}function P2(){($s===0||$s===3||$s===2)&&($s=4),lo===null||!(Md&268435455)&&!(Rv&268435455)||sh(lo,wo)}function Zy(e,t){var r=Rn;Rn|=2;var i=pT();(lo!==e||wo!==t)&&(au=null,Bd(e,t));do try{gR();break}catch(A){fT(e,A)}while(!0);if(d2(),Rn=r,$y.current=i,Ts!==null)throw Error(or(261));return lo=null,wo=0,$s}function gR(){for(;Ts!==null;)mT(Ts)}function yR(){for(;Ts!==null&&!j6();)mT(Ts)}function mT(e){var t=vT(e.alternate,e,dl);e.memoizedProps=e.pendingProps,t===null?gT(e):Ts=t,S2.current=null}function gT(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uR(r,t),r!==null){r.flags&=32767,Ts=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$s=6,Ts=null;return}}else if(r=cR(r,t,dl),r!==null){Ts=r;return}if(t=t.sibling,t!==null){Ts=t;return}Ts=t=e}while(t!==null);$s===0&&($s=5)}function Ad(e,t,r){var i=Jn,A=jl.transition;try{jl.transition=null,Jn=1,vR(e,t,r,i)}finally{jl.transition=A,Jn=i}return null}function vR(e,t,r,i){do $f();while(hh!==null);if(Rn&6)throw Error(or(327));r=e.finishedWork;var A=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(or(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(J6(e,u),e===lo&&(Ts=lo=null,wo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||p0||(p0=!0,_T(Py,function(){return $f(),null})),u=(r.flags&15990)!==0,r.subtreeFlags&15990||u){u=jl.transition,jl.transition=null;var h=Jn;Jn=1;var o=Rn;Rn|=4,S2.current=null,dR(e,r),uT(r,e),DQ(sx),My=!!ix,sx=ix=null,e.current=r,fR(r),V6(),Rn=o,Jn=h,jl.transition=u}else e.current=r;if(p0&&(p0=!1,hh=e,Wy=A),u=e.pendingLanes,u===0&&(bh=null),$6(r.stateNode),ja(e,gs()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)A=t[r],i(A.value,{componentStack:A.stack,digest:A.digest});if(qy)throw qy=!1,e=Cx,Cx=null,e;return Wy&1&&e.tag!==0&&$f(),u=e.pendingLanes,u&1?e===Sx?Qm++:(Qm=0,Sx=e):Qm=0,Oh(),null}function $f(){if(hh!==null){var e=XF(Wy),t=jl.transition,r=Jn;try{if(jl.transition=null,Jn=16>e?16:e,hh===null)var i=!1;else{if(e=hh,hh=null,Wy=0,Rn&6)throw Error(or(331));var A=Rn;for(Rn|=4,Ir=e.current;Ir!==null;){var u=Ir,h=u.child;if(Ir.flags&16){var o=u.deletions;if(o!==null){for(var g=0;g<o.length;g++){var x=o[g];for(Ir=x;Ir!==null;){var E=Ir;switch(E.tag){case 0:case 11:case 15:km(8,E,u)}var F=E.child;if(F!==null)F.return=E,Ir=F;else for(;Ir!==null;){E=Ir;var P=E.sibling,C=E.return;if(lT(E),E===x){Ir=null;break}if(P!==null){P.return=C,Ir=P;break}Ir=C}}}var D=u.alternate;if(D!==null){var k=D.child;if(k!==null){D.child=null;do{var j=k.sibling;k.sibling=null,k=j}while(k!==null)}}Ir=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,Ir=h;else e:for(;Ir!==null;){if(u=Ir,u.flags&2048)switch(u.tag){case 0:case 11:case 15:km(9,u,u.return)}var U=u.sibling;if(U!==null){U.return=u.return,Ir=U;break e}Ir=u.return}}var N=e.current;for(Ir=N;Ir!==null;){h=Ir;var K=h.child;if(h.subtreeFlags&2064&&K!==null)K.return=h,Ir=K;else e:for(h=N;Ir!==null;){if(o=Ir,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Qv(9,o)}}catch(se){os(o,o.return,se)}if(o===h){Ir=null;break e}var ee=o.sibling;if(ee!==null){ee.return=o.return,Ir=ee;break e}Ir=o.return}}if(Rn=A,Oh(),_c&&typeof _c.onPostCommitFiberRoot=="function")try{_c.onPostCommitFiberRoot(Fv,e)}catch{}i=!0}return i}finally{Jn=r,jl.transition=t}}return!1}function yS(e,t,r){t=yp(r,t),t=XI(e,t,1),e=xh(e,t,1),t=ma(),e!==null&&(Bg(e,1,t),ja(e,t))}function os(e,t,r){if(e.tag===3)yS(e,e,r);else for(;t!==null;){if(t.tag===3){yS(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bh===null||!bh.has(i))){e=yp(r,e),e=YI(t,e,1),t=xh(t,e,1),e=ma(),t!==null&&(Bg(t,1,e),ja(t,e));break}}t=t.return}}function _R(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=ma(),e.pingedLanes|=e.suspendedLanes&r,lo===e&&(wo&r)===r&&($s===4||$s===3&&(wo&130023424)===wo&&500>gs()-F2?Bd(e,0):E2|=r),ja(e,t)}function yT(e,t){t===0&&(e.mode&1?(t=s0,s0<<=1,!(s0&130023424)&&(s0=4194304)):t=1);var r=ma();e=mu(e,t),e!==null&&(Bg(e,t,r),ja(e,r))}function wR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),yT(e,r)}function xR(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,A=e.memoizedState;A!==null&&(r=A.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(or(314))}i!==null&&i.delete(t),yT(e,r)}var vT;vT=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||za.current)Da=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Da=!1,AR(e,t,r);Da=!!(e.flags&131072)}else Da=!1,Ri&&t.flags&1048576&&bI(t,Oy,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;cy(e,t),e=t.pendingProps;var A=fp(t,Yo.current);Gf(t,r),A=w2(null,t,i,e,A,r);var u=x2();return t.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ha(i)?(u=!0,Ny(t)):u=!1,t.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,m2(t),A.updater=Uv,t.stateNode=A,A._reactInternals=t,fx(t,i,e,r),t=gx(null,t,i,!0,u,r)):(t.tag=0,Ri&&u&&A2(t),fa(null,t,A,r),t=t.child),t;case 16:i=t.elementType;e:{switch(cy(e,t),e=t.pendingProps,A=i._init,i=A(i._payload),t.type=i,A=t.tag=BR(i),e=BA(i,e),A){case 0:t=mx(null,t,i,e,r);break e;case 1:t=lS(null,t,i,e,r);break e;case 11:t=oS(null,t,i,e,r);break e;case 14:t=aS(null,t,i,BA(i.type,e),r);break e}throw Error(or(306,i,""))}return t;case 0:return i=t.type,A=t.pendingProps,A=t.elementType===i?A:BA(i,A),mx(e,t,i,A,r);case 1:return i=t.type,A=t.pendingProps,A=t.elementType===i?A:BA(i,A),lS(e,t,i,A,r);case 3:e:{if(rT(t),e===null)throw Error(or(387));i=t.pendingProps,u=t.memoizedState,A=u.element,II(e,t),jy(t,i,null,r);var h=t.memoizedState;if(i=h.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){A=yp(Error(or(423)),t),t=AS(e,t,i,r,A);break e}else if(i!==A){A=yp(Error(or(424)),t),t=AS(e,t,i,r,A);break e}else for(pl=wh(t.stateNode.containerInfo.firstChild),gl=t,Ri=!0,TA=null,r=EI(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pp(),i===A){t=gu(e,t,r);break e}fa(e,t,i,r)}t=t.child}return t;case 5:return TI(t),e===null&&ux(t),i=t.type,A=t.pendingProps,u=e!==null?e.memoizedProps:null,h=A.children,ox(i,A)?h=null:u!==null&&ox(i,u)&&(t.flags|=32),tT(e,t),fa(e,t,h,r),t.child;case 6:return e===null&&ux(t),null;case 13:return nT(e,t,r);case 4:return g2(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=mp(t,null,i,r):fa(e,t,i,r),t.child;case 11:return i=t.type,A=t.pendingProps,A=t.elementType===i?A:BA(i,A),oS(e,t,i,A,r);case 7:return fa(e,t,t.pendingProps,r),t.child;case 8:return fa(e,t,t.pendingProps.children,r),t.child;case 12:return fa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,A=t.pendingProps,u=t.memoizedProps,h=A.value,Bi(zy,i._currentValue),i._currentValue=h,u!==null)if(kA(u.value,h)){if(u.children===A.children&&!za.current){t=gu(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var o=u.dependencies;if(o!==null){h=u.child;for(var g=o.firstContext;g!==null;){if(g.context===i){if(u.tag===1){g=hu(-1,r&-r),g.tag=2;var x=u.updateQueue;if(x!==null){x=x.shared;var E=x.pending;E===null?g.next=g:(g.next=E.next,E.next=g),x.pending=g}}u.lanes|=r,g=u.alternate,g!==null&&(g.lanes|=r),hx(u.return,r,t),o.lanes|=r;break}g=g.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(or(341));h.lanes|=r,o=h.alternate,o!==null&&(o.lanes|=r),hx(h,r,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}fa(e,t,A.children,r),t=t.child}return t;case 9:return A=t.type,i=t.pendingProps.children,Gf(t,r),A=Vl(A),i=i(A),t.flags|=1,fa(e,t,i,r),t.child;case 14:return i=t.type,A=BA(i,t.pendingProps),A=BA(i.type,A),aS(e,t,i,A,r);case 15:return JI(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,A=t.pendingProps,A=t.elementType===i?A:BA(i,A),cy(e,t),t.tag=1,Ha(i)?(e=!0,Ny(t)):e=!1,Gf(t,r),ZI(t,i,A),fx(t,i,A,r),gx(null,t,i,!0,e,r);case 19:return iT(e,t,r);case 22:return eT(e,t,r)}throw Error(or(156,t.tag))};function _T(e,t){return $F(e,t)}function bR(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,r,i){return new bR(e,t,r,i)}function L2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function BR(e){if(typeof e=="function")return L2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xb)return 11;if(e===Yb)return 14}return 2}function Ch(e,t){var r=e.alternate;return r===null?(r=Ol(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function dy(e,t,r,i,A,u){var h=2;if(i=e,typeof e=="function")L2(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case Ff:return Cd(r.children,A,u,t);case Zb:h=8,A|=8;break;case Nw:return e=Ol(12,r,t,A|2),e.elementType=Nw,e.lanes=u,e;case Dw:return e=Ol(13,r,t,A),e.elementType=Dw,e.lanes=u,e;case Ow:return e=Ol(19,r,t,A),e.elementType=Ow,e.lanes=u,e;case TF:return Nv(r,A,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case FF:h=10;break e;case IF:h=9;break e;case Xb:h=11;break e;case Yb:h=14;break e;case th:h=16,i=null;break e}throw Error(or(130,e==null?e:typeof e,""))}return t=Ol(h,r,t,A),t.elementType=e,t.type=i,t.lanes=u,t}function Cd(e,t,r,i){return e=Ol(7,e,i,t),e.lanes=r,e}function Nv(e,t,r,i){return e=Ol(22,e,i,t),e.elementType=TF,e.lanes=r,e.stateNode={isHidden:!1},e}function O_(e,t,r){return e=Ol(6,e,null,t),e.lanes=r,e}function z_(e,t,r){return t=Ol(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function CR(e,t,r,i,A){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w_(0),this.expirationTimes=w_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w_(0),this.identifierPrefix=i,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function M2(e,t,r,i,A,u,h,o,g){return e=new CR(e,t,r,o,g),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Ol(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},m2(u),e}function SR(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ef,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function wT(e){if(!e)return Lh;e=e._reactInternals;e:{if(Dd(e)!==e||e.tag!==1)throw Error(or(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ha(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(or(171))}if(e.tag===1){var r=e.type;if(Ha(r))return wI(e,r,t)}return t}function xT(e,t,r,i,A,u,h,o,g){return e=M2(r,i,!0,e,A,u,h,o,g),e.context=wT(null),r=e.current,i=ma(),A=Bh(r),u=hu(i,A),u.callback=t??null,xh(r,u,A),e.current.lanes=A,Bg(e,A,i),ja(e,i),e}function Dv(e,t,r,i){var A=t.current,u=ma(),h=Bh(A);return r=wT(r),t.context===null?t.context=r:t.pendingContext=r,t=hu(u,h),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=xh(A,t,h),e!==null&&(MA(e,A,h,u),ay(e,A,h)),h}function Xy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function k2(e,t){vS(e,t),(e=e.alternate)&&vS(e,t)}function ER(){return null}var bT=typeof reportError=="function"?reportError:function(e){console.error(e)};function U2(e){this._internalRoot=e}Ov.prototype.render=U2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(or(409));Dv(e,t,null,null)};Ov.prototype.unmount=U2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kd(function(){Dv(null,e,null,null)}),t[pu]=null}};function Ov(e){this._internalRoot=e}Ov.prototype.unstable_scheduleHydration=function(e){if(e){var t=eI();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ih.length&&t!==0&&t<ih[r].priority;r++);ih.splice(r,0,e),r===0&&rI(e)}};function Q2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _S(){}function FR(e,t,r,i,A){if(A){if(typeof i=="function"){var u=i;i=function(){var x=Xy(h);u.call(x)}}var h=xT(t,i,e,0,null,!1,!1,"",_S);return e._reactRootContainer=h,e[pu]=h.current,eg(e.nodeType===8?e.parentNode:e),kd(),h}for(;A=e.lastChild;)e.removeChild(A);if(typeof i=="function"){var o=i;i=function(){var x=Xy(g);o.call(x)}}var g=M2(e,0,!1,null,null,!1,!1,"",_S);return e._reactRootContainer=g,e[pu]=g.current,eg(e.nodeType===8?e.parentNode:e),kd(function(){Dv(t,g,r,i)}),g}function Hv(e,t,r,i,A){var u=r._reactRootContainer;if(u){var h=u;if(typeof A=="function"){var o=A;A=function(){var g=Xy(h);o.call(g)}}Dv(t,h,e,A)}else h=FR(r,t,e,A,i);return Xy(h)}YF=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ym(t.pendingLanes);r!==0&&(t2(t,r|1),ja(t,gs()),!(Rn&6)&&(vp=gs()+500,Oh()))}break;case 13:kd(function(){var i=mu(e,1);if(i!==null){var A=ma();MA(i,e,1,A)}}),k2(e,1)}};r2=function(e){if(e.tag===13){var t=mu(e,134217728);if(t!==null){var r=ma();MA(t,e,134217728,r)}k2(e,134217728)}};JF=function(e){if(e.tag===13){var t=Bh(e),r=mu(e,t);if(r!==null){var i=ma();MA(r,e,t,i)}k2(e,t)}};eI=function(){return Jn};tI=function(e,t){var r=Jn;try{return Jn=e,t()}finally{Jn=r}};Zw=function(e,t,r){switch(t){case"input":if(jw(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var A=Lv(i);if(!A)throw Error(or(90));LF(i),jw(i,A)}}}break;case"textarea":kF(e,r);break;case"select":t=r.value,t!=null&&Hf(e,!!r.multiple,t,!1)}};zF=I2;HF=kd;var IR={usingClientEntryPoint:!1,Events:[Sg,Lf,Lv,DF,OF,I2]},am={findFiberByHostInstance:dd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TR={bundleType:am.bundleType,version:am.version,rendererPackageName:am.rendererPackageName,rendererConfig:am.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=KF(e),e===null?null:e.stateNode},findFiberByHostInstance:am.findFiberByHostInstance||ER,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m0.isDisabled&&m0.supportsFiber)try{Fv=m0.inject(TR),_c=m0}catch{}}_l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;_l.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q2(t))throw Error(or(200));return SR(e,t,null,r)};_l.createRoot=function(e,t){if(!Q2(e))throw Error(or(299));var r=!1,i="",A=bT;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(A=t.onRecoverableError)),t=M2(e,1,!1,null,null,r,!1,i,A),e[pu]=t.current,eg(e.nodeType===8?e.parentNode:e),new U2(t)};_l.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(or(188)):(e=Object.keys(e).join(","),Error(or(268,e)));return e=KF(t),e=e===null?null:e.stateNode,e};_l.flushSync=function(e){return kd(e)};_l.hydrate=function(e,t,r){if(!zv(t))throw Error(or(200));return Hv(null,e,t,!0,r)};_l.hydrateRoot=function(e,t,r){if(!Q2(e))throw Error(or(405));var i=r!=null&&r.hydratedSources||null,A=!1,u="",h=bT;if(r!=null&&(r.unstable_strictMode===!0&&(A=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=xT(t,null,e,1,r??null,A,!1,u,h),e[pu]=t.current,eg(e),i)for(e=0;e<i.length;e++)r=i[e],A=r._getVersion,A=A(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,A]:t.mutableSourceEagerHydrationData.push(r,A);return new Ov(t)};_l.render=function(e,t,r){if(!zv(t))throw Error(or(200));return Hv(null,e,t,!1,r)};_l.unmountComponentAtNode=function(e){if(!zv(e))throw Error(or(40));return e._reactRootContainer?(kd(function(){Hv(null,null,e,!1,function(){e._reactRootContainer=null,e[pu]=null})}),!0):!1};_l.unstable_batchedUpdates=I2;_l.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!zv(r))throw Error(or(200));if(e==null||e._reactInternals===void 0)throw Error(or(38));return Hv(e,t,r,!1,i)};_l.version="18.3.1-next-f1338f8080-20240426";function BT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BT)}catch(e){console.error(e)}}BT(),BF.exports=_l;var Od=BF.exports;const CT=zb(Od);var ST,wS=Od;ST=wS.createRoot,wS.hydrateRoot;const PR=1,LR=1e6;let H_=0;function MR(){return H_=(H_+1)%Number.MAX_SAFE_INTEGER,H_.toString()}const j_=new Map,xS=e=>{if(j_.has(e))return;const t=setTimeout(()=>{j_.delete(e),Rm({type:"REMOVE_TOAST",toastId:e})},LR);j_.set(e,t)},kR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,PR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?xS(r):e.toasts.forEach(i=>{xS(i.id)}),{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},fy=[];let py={toasts:[]};function Rm(e){py=kR(py,e),fy.forEach(t=>{t(py)})}function UR({...e}){const t=MR(),r=A=>Rm({type:"UPDATE_TOAST",toast:{...A,id:t}}),i=()=>Rm({type:"DISMISS_TOAST",toastId:t});return Rm({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:A=>{A||i()}}}),{id:t,dismiss:i,update:r}}function QR(){const[e,t]=te.useState(py);return te.useEffect(()=>(fy.push(t),()=>{const r=fy.indexOf(t);r>-1&&fy.splice(r,1)}),[e]),{...e,toast:UR,dismiss:r=>Rm({type:"DISMISS_TOAST",toastId:r})}}function on(e,t,{checkForDefaultPrevented:r=!0}={}){return function(A){if(e==null||e(A),r===!1||!A.defaultPrevented)return t==null?void 0:t(A)}}function bS(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ET(...e){return t=>{let r=!1;const i=e.map(A=>{const u=bS(A,t);return!r&&typeof u=="function"&&(r=!0),u});if(r)return()=>{for(let A=0;A<i.length;A++){const u=i[A];typeof u=="function"?u():bS(e[A],null)}}}}function li(...e){return te.useCallback(ET(...e),e)}function xu(e,t=[]){let r=[];function i(u,h){const o=te.createContext(h),g=r.length;r=[...r,h];const x=F=>{var U;const{scope:P,children:C,...D}=F,k=((U=P==null?void 0:P[e])==null?void 0:U[g])||o,j=te.useMemo(()=>D,Object.values(D));return Z.jsx(k.Provider,{value:j,children:C})};x.displayName=u+"Provider";function E(F,P){var k;const C=((k=P==null?void 0:P[e])==null?void 0:k[g])||o,D=te.useContext(C);if(D)return D;if(h!==void 0)return h;throw new Error(`\`${F}\` must be used within \`${u}\``)}return[x,E]}const A=()=>{const u=r.map(h=>te.createContext(h));return function(o){const g=(o==null?void 0:o[e])||u;return te.useMemo(()=>({[`__scope${e}`]:{...o,[e]:g}}),[o,g])}};return A.scopeName=e,[i,RR(A,...t)]}function RR(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const i=e.map(A=>({useScope:A(),scopeName:A.scopeName}));return function(u){const h=i.reduce((o,{useScope:g,scopeName:x})=>{const F=g(u)[`__scope${x}`];return{...o,...F}},{});return te.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function Ag(e){const t=DR(e),r=te.forwardRef((i,A)=>{const{children:u,...h}=i,o=te.Children.toArray(u),g=o.find(zR);if(g){const x=g.props.children,E=o.map(F=>F===g?te.Children.count(x)>1?te.Children.only(null):te.isValidElement(x)?x.props.children:null:F);return Z.jsx(t,{...h,ref:A,children:te.isValidElement(x)?te.cloneElement(x,void 0,E):null})}return Z.jsx(t,{...h,ref:A,children:u})});return r.displayName=`${e}.Slot`,r}var NR=Ag("Slot");function DR(e){const t=te.forwardRef((r,i)=>{const{children:A,...u}=r;if(te.isValidElement(A)){const h=jR(A),o=HR(u,A.props);return A.type!==te.Fragment&&(o.ref=i?ET(i,h):h),te.cloneElement(A,o)}return te.Children.count(A)>1?te.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var FT=Symbol("radix.slottable");function OR(e){const t=({children:r})=>Z.jsx(Z.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=FT,t}function zR(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===FT}function HR(e,t){const r={...t};for(const i in t){const A=e[i],u=t[i];/^on[A-Z]/.test(i)?A&&u?r[i]=(...o)=>{const g=u(...o);return A(...o),g}:A&&(r[i]=A):i==="style"?r[i]={...A,...u}:i==="className"&&(r[i]=[A,u].filter(Boolean).join(" "))}return{...e,...r}}function jR(e){var i,A;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(A=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:A.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function R2(e){const t=e+"CollectionProvider",[r,i]=xu(t),[A,u]=r(t,{collectionRef:{current:null},itemMap:new Map}),h=k=>{const{scope:j,children:U}=k,N=hr.useRef(null),K=hr.useRef(new Map).current;return Z.jsx(A,{scope:j,itemMap:K,collectionRef:N,children:U})};h.displayName=t;const o=e+"CollectionSlot",g=Ag(o),x=hr.forwardRef((k,j)=>{const{scope:U,children:N}=k,K=u(o,U),ee=li(j,K.collectionRef);return Z.jsx(g,{ref:ee,children:N})});x.displayName=o;const E=e+"CollectionItemSlot",F="data-radix-collection-item",P=Ag(E),C=hr.forwardRef((k,j)=>{const{scope:U,children:N,...K}=k,ee=hr.useRef(null),se=li(j,ee),pe=u(E,U);return hr.useEffect(()=>(pe.itemMap.set(ee,{ref:ee,...K}),()=>void pe.itemMap.delete(ee))),Z.jsx(P,{[F]:"",ref:se,children:N})});C.displayName=E;function D(k){const j=u(e+"CollectionConsumer",k);return hr.useCallback(()=>{const N=j.collectionRef.current;if(!N)return[];const K=Array.from(N.querySelectorAll(`[${F}]`));return Array.from(j.itemMap.values()).sort((pe,ye)=>K.indexOf(pe.ref.current)-K.indexOf(ye.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:h,Slot:x,ItemSlot:C},D,i]}var VR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bn=VR.reduce((e,t)=>{const r=Ag(`Primitive.${t}`),i=te.forwardRef((A,u)=>{const{asChild:h,...o}=A,g=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Z.jsx(g,{...o,ref:u})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function IT(e,t){e&&Od.flushSync(()=>e.dispatchEvent(t))}function Gl(e){const t=te.useRef(e);return te.useEffect(()=>{t.current=e}),te.useMemo(()=>(...r)=>{var i;return(i=t.current)==null?void 0:i.call(t,...r)},[])}function KR(e,t=globalThis==null?void 0:globalThis.document){const r=Gl(e);te.useEffect(()=>{const i=A=>{A.key==="Escape"&&r(A)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[r,t])}var GR="DismissableLayer",Ix="dismissableLayer.update",$R="dismissableLayer.pointerDownOutside",qR="dismissableLayer.focusOutside",BS,TT=te.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jv=te.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:A,onFocusOutside:u,onInteractOutside:h,onDismiss:o,...g}=e,x=te.useContext(TT),[E,F]=te.useState(null),P=(E==null?void 0:E.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,C]=te.useState({}),D=li(t,ye=>F(ye)),k=Array.from(x.layers),[j]=[...x.layersWithOutsidePointerEventsDisabled].slice(-1),U=k.indexOf(j),N=E?k.indexOf(E):-1,K=x.layersWithOutsidePointerEventsDisabled.size>0,ee=N>=U,se=ZR(ye=>{const ue=ye.target,Te=[...x.branches].some(Ke=>Ke.contains(ue));!ee||Te||(A==null||A(ye),h==null||h(ye),ye.defaultPrevented||o==null||o())},P),pe=XR(ye=>{const ue=ye.target;[...x.branches].some(Ke=>Ke.contains(ue))||(u==null||u(ye),h==null||h(ye),ye.defaultPrevented||o==null||o())},P);return KR(ye=>{N===x.layers.size-1&&(i==null||i(ye),!ye.defaultPrevented&&o&&(ye.preventDefault(),o()))},P),te.useEffect(()=>{if(E)return r&&(x.layersWithOutsidePointerEventsDisabled.size===0&&(BS=P.body.style.pointerEvents,P.body.style.pointerEvents="none"),x.layersWithOutsidePointerEventsDisabled.add(E)),x.layers.add(E),CS(),()=>{r&&x.layersWithOutsidePointerEventsDisabled.size===1&&(P.body.style.pointerEvents=BS)}},[E,P,r,x]),te.useEffect(()=>()=>{E&&(x.layers.delete(E),x.layersWithOutsidePointerEventsDisabled.delete(E),CS())},[E,x]),te.useEffect(()=>{const ye=()=>C({});return document.addEventListener(Ix,ye),()=>document.removeEventListener(Ix,ye)},[]),Z.jsx(bn.div,{...g,ref:D,style:{pointerEvents:K?ee?"auto":"none":void 0,...e.style},onFocusCapture:on(e.onFocusCapture,pe.onFocusCapture),onBlurCapture:on(e.onBlurCapture,pe.onBlurCapture),onPointerDownCapture:on(e.onPointerDownCapture,se.onPointerDownCapture)})});jv.displayName=GR;var WR="DismissableLayerBranch",PT=te.forwardRef((e,t)=>{const r=te.useContext(TT),i=te.useRef(null),A=li(t,i);return te.useEffect(()=>{const u=i.current;if(u)return r.branches.add(u),()=>{r.branches.delete(u)}},[r.branches]),Z.jsx(bn.div,{...e,ref:A})});PT.displayName=WR;function ZR(e,t=globalThis==null?void 0:globalThis.document){const r=Gl(e),i=te.useRef(!1),A=te.useRef(()=>{});return te.useEffect(()=>{const u=o=>{if(o.target&&!i.current){let g=function(){LT($R,r,x,{discrete:!0})};const x={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",A.current),A.current=g,t.addEventListener("click",A.current,{once:!0})):g()}else t.removeEventListener("click",A.current);i.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",u),t.removeEventListener("click",A.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}function XR(e,t=globalThis==null?void 0:globalThis.document){const r=Gl(e),i=te.useRef(!1);return te.useEffect(()=>{const A=u=>{u.target&&!i.current&&LT(qR,r,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",A),()=>t.removeEventListener("focusin",A)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function CS(){const e=new CustomEvent(Ix);document.dispatchEvent(e)}function LT(e,t,r,{discrete:i}){const A=r.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&A.addEventListener(e,t,{once:!0}),i?IT(A,u):A.dispatchEvent(u)}var YR=jv,JR=PT,bo=globalThis!=null&&globalThis.document?te.useLayoutEffect:()=>{},eN="Portal",N2=te.forwardRef((e,t)=>{var o;const{container:r,...i}=e,[A,u]=te.useState(!1);bo(()=>u(!0),[]);const h=r||A&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return h?CT.createPortal(Z.jsx(bn.div,{...i,ref:t}),h):null});N2.displayName=eN;function tN(e,t){return te.useReducer((r,i)=>t[r][i]??r,e)}var Fg=e=>{const{present:t,children:r}=e,i=rN(t),A=typeof r=="function"?r({present:i.isPresent}):te.Children.only(r),u=li(i.ref,nN(A));return typeof r=="function"||i.isPresent?te.cloneElement(A,{ref:u}):null};Fg.displayName="Presence";function rN(e){const[t,r]=te.useState(),i=te.useRef(null),A=te.useRef(e),u=te.useRef("none"),h=e?"mounted":"unmounted",[o,g]=tN(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return te.useEffect(()=>{const x=g0(i.current);u.current=o==="mounted"?x:"none"},[o]),bo(()=>{const x=i.current,E=A.current;if(E!==e){const P=u.current,C=g0(x);e?g("MOUNT"):C==="none"||(x==null?void 0:x.display)==="none"?g("UNMOUNT"):g(E&&P!==C?"ANIMATION_OUT":"UNMOUNT"),A.current=e}},[e,g]),bo(()=>{if(t){let x;const E=t.ownerDocument.defaultView??window,F=C=>{const k=g0(i.current).includes(C.animationName);if(C.target===t&&k&&(g("ANIMATION_END"),!A.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",x=E.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},P=C=>{C.target===t&&(u.current=g0(i.current))};return t.addEventListener("animationstart",P),t.addEventListener("animationcancel",F),t.addEventListener("animationend",F),()=>{E.clearTimeout(x),t.removeEventListener("animationstart",P),t.removeEventListener("animationcancel",F),t.removeEventListener("animationend",F)}}else g("ANIMATION_END")},[t,g]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:te.useCallback(x=>{i.current=x?getComputedStyle(x):null,r(x)},[])}}function g0(e){return(e==null?void 0:e.animationName)||"none"}function nN(e){var i,A;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(A=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:A.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var iN=Gb[" useInsertionEffect ".trim().toString()]||bo;function _p({prop:e,defaultProp:t,onChange:r=()=>{},caller:i}){const[A,u,h]=sN({defaultProp:t,onChange:r}),o=e!==void 0,g=o?e:A;{const E=te.useRef(e!==void 0);te.useEffect(()=>{const F=E.current;F!==o&&console.warn(`${i} is changing from ${F?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),E.current=o},[o,i])}const x=te.useCallback(E=>{var F;if(o){const P=oN(E)?E(e):E;P!==e&&((F=h.current)==null||F.call(h,P))}else u(E)},[o,e,u,h]);return[g,x]}function sN({defaultProp:e,onChange:t}){const[r,i]=te.useState(e),A=te.useRef(r),u=te.useRef(t);return iN(()=>{u.current=t},[t]),te.useEffect(()=>{var h;A.current!==r&&((h=u.current)==null||h.call(u,r),A.current=r)},[r,A]),[r,i,u]}function oN(e){return typeof e=="function"}var MT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),aN="VisuallyHidden",Vv=te.forwardRef((e,t)=>Z.jsx(bn.span,{...e,ref:t,style:{...MT,...e.style}}));Vv.displayName=aN;var lN=Vv,D2="ToastProvider",[O2,AN,cN]=R2("Toast"),[kT,lZ]=xu("Toast",[cN]),[uN,Kv]=kT(D2),UT=e=>{const{__scopeToast:t,label:r="Notification",duration:i=5e3,swipeDirection:A="right",swipeThreshold:u=50,children:h}=e,[o,g]=te.useState(null),[x,E]=te.useState(0),F=te.useRef(!1),P=te.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${D2}\`. Expected non-empty \`string\`.`),Z.jsx(O2.Provider,{scope:t,children:Z.jsx(uN,{scope:t,label:r,duration:i,swipeDirection:A,swipeThreshold:u,toastCount:x,viewport:o,onViewportChange:g,onToastAdd:te.useCallback(()=>E(C=>C+1),[]),onToastRemove:te.useCallback(()=>E(C=>C-1),[]),isFocusedToastEscapeKeyDownRef:F,isClosePausedRef:P,children:h})})};UT.displayName=D2;var QT="ToastViewport",hN=["F8"],Tx="toast.viewportPause",Px="toast.viewportResume",RT=te.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:i=hN,label:A="Notifications ({hotkey})",...u}=e,h=Kv(QT,r),o=AN(r),g=te.useRef(null),x=te.useRef(null),E=te.useRef(null),F=te.useRef(null),P=li(t,F,h.onViewportChange),C=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=h.toastCount>0;te.useEffect(()=>{const j=U=>{var K;i.length!==0&&i.every(ee=>U[ee]||U.code===ee)&&((K=F.current)==null||K.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[i]),te.useEffect(()=>{const j=g.current,U=F.current;if(D&&j&&U){const N=()=>{if(!h.isClosePausedRef.current){const pe=new CustomEvent(Tx);U.dispatchEvent(pe),h.isClosePausedRef.current=!0}},K=()=>{if(h.isClosePausedRef.current){const pe=new CustomEvent(Px);U.dispatchEvent(pe),h.isClosePausedRef.current=!1}},ee=pe=>{!j.contains(pe.relatedTarget)&&K()},se=()=>{j.contains(document.activeElement)||K()};return j.addEventListener("focusin",N),j.addEventListener("focusout",ee),j.addEventListener("pointermove",N),j.addEventListener("pointerleave",se),window.addEventListener("blur",N),window.addEventListener("focus",K),()=>{j.removeEventListener("focusin",N),j.removeEventListener("focusout",ee),j.removeEventListener("pointermove",N),j.removeEventListener("pointerleave",se),window.removeEventListener("blur",N),window.removeEventListener("focus",K)}}},[D,h.isClosePausedRef]);const k=te.useCallback(({tabbingDirection:j})=>{const N=o().map(K=>{const ee=K.ref.current,se=[ee,...CN(ee)];return j==="forwards"?se:se.reverse()});return(j==="forwards"?N.reverse():N).flat()},[o]);return te.useEffect(()=>{const j=F.current;if(j){const U=N=>{var se,pe,ye;const K=N.altKey||N.ctrlKey||N.metaKey;if(N.key==="Tab"&&!K){const ue=document.activeElement,Te=N.shiftKey;if(N.target===j&&Te){(se=x.current)==null||se.focus();return}const he=k({tabbingDirection:Te?"backwards":"forwards"}),Ie=he.findIndex(be=>be===ue);V_(he.slice(Ie+1))?N.preventDefault():Te?(pe=x.current)==null||pe.focus():(ye=E.current)==null||ye.focus()}};return j.addEventListener("keydown",U),()=>j.removeEventListener("keydown",U)}},[o,k]),Z.jsxs(JR,{ref:g,role:"region","aria-label":A.replace("{hotkey}",C),tabIndex:-1,style:{pointerEvents:D?void 0:"none"},children:[D&&Z.jsx(Lx,{ref:x,onFocusFromOutsideViewport:()=>{const j=k({tabbingDirection:"forwards"});V_(j)}}),Z.jsx(O2.Slot,{scope:r,children:Z.jsx(bn.ol,{tabIndex:-1,...u,ref:P})}),D&&Z.jsx(Lx,{ref:E,onFocusFromOutsideViewport:()=>{const j=k({tabbingDirection:"backwards"});V_(j)}})]})});RT.displayName=QT;var NT="ToastFocusProxy",Lx=te.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:i,...A}=e,u=Kv(NT,r);return Z.jsx(Vv,{"aria-hidden":!0,tabIndex:0,...A,ref:t,style:{position:"fixed"},onFocus:h=>{var x;const o=h.relatedTarget;!((x=u.viewport)!=null&&x.contains(o))&&i()}})});Lx.displayName=NT;var Ig="Toast",dN="toast.swipeStart",fN="toast.swipeMove",pN="toast.swipeCancel",mN="toast.swipeEnd",DT=te.forwardRef((e,t)=>{const{forceMount:r,open:i,defaultOpen:A,onOpenChange:u,...h}=e,[o,g]=_p({prop:i,defaultProp:A??!0,onChange:u,caller:Ig});return Z.jsx(Fg,{present:r||o,children:Z.jsx(vN,{open:o,...h,ref:t,onClose:()=>g(!1),onPause:Gl(e.onPause),onResume:Gl(e.onResume),onSwipeStart:on(e.onSwipeStart,x=>{x.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:on(e.onSwipeMove,x=>{const{x:E,y:F}=x.detail.delta;x.currentTarget.setAttribute("data-swipe","move"),x.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${E}px`),x.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${F}px`)}),onSwipeCancel:on(e.onSwipeCancel,x=>{x.currentTarget.setAttribute("data-swipe","cancel"),x.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),x.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),x.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),x.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:on(e.onSwipeEnd,x=>{const{x:E,y:F}=x.detail.delta;x.currentTarget.setAttribute("data-swipe","end"),x.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),x.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),x.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${E}px`),x.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${F}px`),g(!1)})})})});DT.displayName=Ig;var[gN,yN]=kT(Ig,{onClose(){}}),vN=te.forwardRef((e,t)=>{const{__scopeToast:r,type:i="foreground",duration:A,open:u,onClose:h,onEscapeKeyDown:o,onPause:g,onResume:x,onSwipeStart:E,onSwipeMove:F,onSwipeCancel:P,onSwipeEnd:C,...D}=e,k=Kv(Ig,r),[j,U]=te.useState(null),N=li(t,be=>U(be)),K=te.useRef(null),ee=te.useRef(null),se=A||k.duration,pe=te.useRef(0),ye=te.useRef(se),ue=te.useRef(0),{onToastAdd:Te,onToastRemove:Ke}=k,oe=Gl(()=>{var ct;(j==null?void 0:j.contains(document.activeElement))&&((ct=k.viewport)==null||ct.focus()),h()}),he=te.useCallback(be=>{!be||be===1/0||(window.clearTimeout(ue.current),pe.current=new Date().getTime(),ue.current=window.setTimeout(oe,be))},[oe]);te.useEffect(()=>{const be=k.viewport;if(be){const ct=()=>{he(ye.current),x==null||x()},Xe=()=>{const lt=new Date().getTime()-pe.current;ye.current=ye.current-lt,window.clearTimeout(ue.current),g==null||g()};return be.addEventListener(Tx,Xe),be.addEventListener(Px,ct),()=>{be.removeEventListener(Tx,Xe),be.removeEventListener(Px,ct)}}},[k.viewport,se,g,x,he]),te.useEffect(()=>{u&&!k.isClosePausedRef.current&&he(se)},[u,se,k.isClosePausedRef,he]),te.useEffect(()=>(Te(),()=>Ke()),[Te,Ke]);const Ie=te.useMemo(()=>j?GT(j):null,[j]);return k.viewport?Z.jsxs(Z.Fragment,{children:[Ie&&Z.jsx(_N,{__scopeToast:r,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:Ie}),Z.jsx(gN,{scope:r,onClose:oe,children:Od.createPortal(Z.jsx(O2.ItemSlot,{scope:r,children:Z.jsx(YR,{asChild:!0,onEscapeKeyDown:on(o,()=>{k.isFocusedToastEscapeKeyDownRef.current||oe(),k.isFocusedToastEscapeKeyDownRef.current=!1}),children:Z.jsx(bn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":u?"open":"closed","data-swipe-direction":k.swipeDirection,...D,ref:N,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:on(e.onKeyDown,be=>{be.key==="Escape"&&(o==null||o(be.nativeEvent),be.nativeEvent.defaultPrevented||(k.isFocusedToastEscapeKeyDownRef.current=!0,oe()))}),onPointerDown:on(e.onPointerDown,be=>{be.button===0&&(K.current={x:be.clientX,y:be.clientY})}),onPointerMove:on(e.onPointerMove,be=>{if(!K.current)return;const ct=be.clientX-K.current.x,Xe=be.clientY-K.current.y,lt=!!ee.current,Le=["left","right"].includes(k.swipeDirection),ze=["left","up"].includes(k.swipeDirection)?Math.min:Math.max,it=Le?ze(0,ct):0,Lt=Le?0:ze(0,Xe),ne=be.pointerType==="touch"?10:2,Be={x:it,y:Lt},Pe={originalEvent:be,delta:Be};lt?(ee.current=Be,y0(fN,F,Pe,{discrete:!1})):SS(Be,k.swipeDirection,ne)?(ee.current=Be,y0(dN,E,Pe,{discrete:!1}),be.target.setPointerCapture(be.pointerId)):(Math.abs(ct)>ne||Math.abs(Xe)>ne)&&(K.current=null)}),onPointerUp:on(e.onPointerUp,be=>{const ct=ee.current,Xe=be.target;if(Xe.hasPointerCapture(be.pointerId)&&Xe.releasePointerCapture(be.pointerId),ee.current=null,K.current=null,ct){const lt=be.currentTarget,Le={originalEvent:be,delta:ct};SS(ct,k.swipeDirection,k.swipeThreshold)?y0(mN,C,Le,{discrete:!0}):y0(pN,P,Le,{discrete:!0}),lt.addEventListener("click",ze=>ze.preventDefault(),{once:!0})}})})})}),k.viewport)})]}):null}),_N=e=>{const{__scopeToast:t,children:r,...i}=e,A=Kv(Ig,t),[u,h]=te.useState(!1),[o,g]=te.useState(!1);return bN(()=>h(!0)),te.useEffect(()=>{const x=window.setTimeout(()=>g(!0),1e3);return()=>window.clearTimeout(x)},[]),o?null:Z.jsx(N2,{asChild:!0,children:Z.jsx(Vv,{...i,children:u&&Z.jsxs(Z.Fragment,{children:[A.label," ",r]})})})},wN="ToastTitle",OT=te.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return Z.jsx(bn.div,{...i,ref:t})});OT.displayName=wN;var xN="ToastDescription",zT=te.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return Z.jsx(bn.div,{...i,ref:t})});zT.displayName=xN;var HT="ToastAction",jT=te.forwardRef((e,t)=>{const{altText:r,...i}=e;return r.trim()?Z.jsx(KT,{altText:r,asChild:!0,children:Z.jsx(z2,{...i,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${HT}\`. Expected non-empty \`string\`.`),null)});jT.displayName=HT;var VT="ToastClose",z2=te.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e,A=yN(VT,r);return Z.jsx(KT,{asChild:!0,children:Z.jsx(bn.button,{type:"button",...i,ref:t,onClick:on(e.onClick,A.onClose)})})});z2.displayName=VT;var KT=te.forwardRef((e,t)=>{const{__scopeToast:r,altText:i,...A}=e;return Z.jsx(bn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...A,ref:t})});function GT(e){const t=[];return Array.from(e.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&t.push(i.textContent),BN(i)){const A=i.ariaHidden||i.hidden||i.style.display==="none",u=i.dataset.radixToastAnnounceExclude==="";if(!A)if(u){const h=i.dataset.radixToastAnnounceAlt;h&&t.push(h)}else t.push(...GT(i))}}),t}function y0(e,t,r,{discrete:i}){const A=r.originalEvent.currentTarget,u=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&A.addEventListener(e,t,{once:!0}),i?IT(A,u):A.dispatchEvent(u)}var SS=(e,t,r=0)=>{const i=Math.abs(e.x),A=Math.abs(e.y),u=i>A;return t==="left"||t==="right"?u&&i>r:!u&&A>r};function bN(e=()=>{}){const t=Gl(e);bo(()=>{let r=0,i=0;return r=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(i)}},[t])}function BN(e){return e.nodeType===e.ELEMENT_NODE}function CN(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const A=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||A?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function V_(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var SN=UT,$T=RT,qT=DT,WT=OT,ZT=zT,XT=jT,YT=z2;function JT(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var A=e.length;for(t=0;t<A;t++)e[t]&&(r=JT(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function e3(){for(var e,t,r=0,i="",A=arguments.length;r<A;r++)(e=arguments[r])&&(t=JT(e))&&(i&&(i+=" "),i+=t);return i}const ES=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,FS=e3,Gv=(e,t)=>r=>{var i;if((t==null?void 0:t.variants)==null)return FS(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:A,defaultVariants:u}=t,h=Object.keys(A).map(x=>{const E=r==null?void 0:r[x],F=u==null?void 0:u[x];if(E===null)return null;const P=ES(E)||ES(F);return A[x][P]}),o=r&&Object.entries(r).reduce((x,E)=>{let[F,P]=E;return P===void 0||(x[F]=P),x},{}),g=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((x,E)=>{let{class:F,className:P,...C}=E;return Object.entries(C).every(D=>{let[k,j]=D;return Array.isArray(j)?j.includes({...u,...o}[k]):{...u,...o}[k]===j})?[...x,F,P]:x},[]);return FS(e,h,g,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t3=(...e)=>e.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=te.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:A="",children:u,iconNode:h,...o},g)=>te.createElement("svg",{ref:g,...FN,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:t3("lucide",A),...o},[...h.map(([x,E])=>te.createElement(x,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=(e,t)=>{const r=te.forwardRef(({className:i,...A},u)=>te.createElement(IN,{ref:u,iconNode:t,className:t3(`lucide-${EN(e)}`,i),...A}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Ps("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Ps("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Ps("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=Ps("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=Ps("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Ps("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Ps("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Ps("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=Ps("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=Ps("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Ps("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Ps("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=Ps("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Ps("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Ps("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=Ps("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Ps("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=Ps("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=Ps("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=Ps("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),H2="-",HN=e=>{const t=VN(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:h=>{const o=h.split(H2);return o[0]===""&&o.length!==1&&o.shift(),o3(o,t)||jN(h)},getConflictingClassGroupIds:(h,o)=>{const g=r[h]||[];return o&&i[h]?[...g,...i[h]]:g}}},o3=(e,t)=>{var h;if(e.length===0)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),A=i?o3(e.slice(1),i):void 0;if(A)return A;if(t.validators.length===0)return;const u=e.join(H2);return(h=t.validators.find(({validator:o})=>o(u)))==null?void 0:h.classGroupId},PS=/^\[(.+)\]$/,jN=e=>{if(PS.test(e)){const t=PS.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},VN=e=>{const{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return GN(Object.entries(e.classGroups),r).forEach(([u,h])=>{kx(h,i,u,t)}),i},kx=(e,t,r,i)=>{e.forEach(A=>{if(typeof A=="string"){const u=A===""?t:LS(t,A);u.classGroupId=r;return}if(typeof A=="function"){if(KN(A)){kx(A(i),t,r,i);return}t.validators.push({validator:A,classGroupId:r});return}Object.entries(A).forEach(([u,h])=>{kx(h,LS(t,u),r,i)})})},LS=(e,t)=>{let r=e;return t.split(H2).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},KN=e=>e.isThemeGetter,GN=(e,t)=>t?e.map(([r,i])=>{const A=i.map(u=>typeof u=="string"?t+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(([h,o])=>[t+h,o])):u);return[r,A]}):e,$N=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,i=new Map;const A=(u,h)=>{r.set(u,h),t++,t>e&&(t=0,i=r,r=new Map)};return{get(u){let h=r.get(u);if(h!==void 0)return h;if((h=i.get(u))!==void 0)return A(u,h),h},set(u,h){r.has(u)?r.set(u,h):A(u,h)}}},a3="!",qN=e=>{const{separator:t,experimentalParseClassName:r}=e,i=t.length===1,A=t[0],u=t.length,h=o=>{const g=[];let x=0,E=0,F;for(let j=0;j<o.length;j++){let U=o[j];if(x===0){if(U===A&&(i||o.slice(j,j+u)===t)){g.push(o.slice(E,j)),E=j+u;continue}if(U==="/"){F=j;continue}}U==="["?x++:U==="]"&&x--}const P=g.length===0?o:o.substring(E),C=P.startsWith(a3),D=C?P.substring(1):P,k=F&&F>E?F-E:void 0;return{modifiers:g,hasImportantModifier:C,baseClassName:D,maybePostfixModifierPosition:k}};return r?o=>r({className:o,parseClassName:h}):h},WN=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(i=>{i[0]==="["?(t.push(...r.sort(),i),r=[]):r.push(i)}),t.push(...r.sort()),t},ZN=e=>({cache:$N(e.cacheSize),parseClassName:qN(e),...HN(e)}),XN=/\s+/,YN=(e,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:A}=t,u=[],h=e.trim().split(XN);let o="";for(let g=h.length-1;g>=0;g-=1){const x=h[g],{modifiers:E,hasImportantModifier:F,baseClassName:P,maybePostfixModifierPosition:C}=r(x);let D=!!C,k=i(D?P.substring(0,C):P);if(!k){if(!D){o=x+(o.length>0?" "+o:o);continue}if(k=i(P),!k){o=x+(o.length>0?" "+o:o);continue}D=!1}const j=WN(E).join(":"),U=F?j+a3:j,N=U+k;if(u.includes(N))continue;u.push(N);const K=A(k,D);for(let ee=0;ee<K.length;++ee){const se=K[ee];u.push(U+se)}o=x+(o.length>0?" "+o:o)}return o};function JN(){let e=0,t,r,i="";for(;e<arguments.length;)(t=arguments[e++])&&(r=l3(t))&&(i&&(i+=" "),i+=r);return i}const l3=e=>{if(typeof e=="string")return e;let t,r="";for(let i=0;i<e.length;i++)e[i]&&(t=l3(e[i]))&&(r&&(r+=" "),r+=t);return r};function eD(e,...t){let r,i,A,u=h;function h(g){const x=t.reduce((E,F)=>F(E),e());return r=ZN(x),i=r.cache.get,A=r.cache.set,u=o,o(g)}function o(g){const x=i(g);if(x)return x;const E=YN(g,r);return A(g,E),E}return function(){return u(JN.apply(null,arguments))}}const Ii=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},A3=/^\[(?:([a-z-]+):)?(.+)\]$/i,tD=/^\d+\/\d+$/,rD=new Set(["px","full","screen"]),nD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ru=e=>qf(e)||rD.has(e)||tD.test(e),Gu=e=>Fp(e,"length",pD),qf=e=>!!e&&!Number.isNaN(Number(e)),K_=e=>Fp(e,"number",qf),lm=e=>!!e&&Number.isInteger(Number(e)),lD=e=>e.endsWith("%")&&qf(e.slice(0,-1)),yn=e=>A3.test(e),$u=e=>nD.test(e),AD=new Set(["length","size","percentage"]),cD=e=>Fp(e,AD,c3),uD=e=>Fp(e,"position",c3),hD=new Set(["image","url"]),dD=e=>Fp(e,hD,gD),fD=e=>Fp(e,"",mD),Am=()=>!0,Fp=(e,t,r)=>{const i=A3.exec(e);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):r(i[2]):!1},pD=e=>iD.test(e)&&!sD.test(e),c3=()=>!1,mD=e=>oD.test(e),gD=e=>aD.test(e),yD=()=>{const e=Ii("colors"),t=Ii("spacing"),r=Ii("blur"),i=Ii("brightness"),A=Ii("borderColor"),u=Ii("borderRadius"),h=Ii("borderSpacing"),o=Ii("borderWidth"),g=Ii("contrast"),x=Ii("grayscale"),E=Ii("hueRotate"),F=Ii("invert"),P=Ii("gap"),C=Ii("gradientColorStops"),D=Ii("gradientColorStopPositions"),k=Ii("inset"),j=Ii("margin"),U=Ii("opacity"),N=Ii("padding"),K=Ii("saturate"),ee=Ii("scale"),se=Ii("sepia"),pe=Ii("skew"),ye=Ii("space"),ue=Ii("translate"),Te=()=>["auto","contain","none"],Ke=()=>["auto","hidden","clip","visible","scroll"],oe=()=>["auto",yn,t],he=()=>[yn,t],Ie=()=>["",ru,Gu],be=()=>["auto",qf,yn],ct=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Xe=()=>["solid","dashed","dotted","double","none"],lt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Le=()=>["start","end","center","between","around","evenly","stretch"],ze=()=>["","0",yn],it=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Lt=()=>[qf,yn];return{cacheSize:500,separator:":",theme:{colors:[Am],spacing:[ru,Gu],blur:["none","",$u,yn],brightness:Lt(),borderColor:[e],borderRadius:["none","","full",$u,yn],borderSpacing:he(),borderWidth:Ie(),contrast:Lt(),grayscale:ze(),hueRotate:Lt(),invert:ze(),gap:he(),gradientColorStops:[e],gradientColorStopPositions:[lD,Gu],inset:oe(),margin:oe(),opacity:Lt(),padding:he(),saturate:Lt(),scale:Lt(),sepia:ze(),skew:Lt(),space:he(),translate:he()},classGroups:{aspect:[{aspect:["auto","square","video",yn]}],container:["container"],columns:[{columns:[$u]}],"break-after":[{"break-after":it()}],"break-before":[{"break-before":it()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ct(),yn]}],overflow:[{overflow:Ke()}],"overflow-x":[{"overflow-x":Ke()}],"overflow-y":[{"overflow-y":Ke()}],overscroll:[{overscroll:Te()}],"overscroll-x":[{"overscroll-x":Te()}],"overscroll-y":[{"overscroll-y":Te()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lm,yn]}],basis:[{basis:oe()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yn]}],grow:[{grow:ze()}],shrink:[{shrink:ze()}],order:[{order:["first","last","none",lm,yn]}],"grid-cols":[{"grid-cols":[Am]}],"col-start-end":[{col:["auto",{span:["full",lm,yn]},yn]}],"col-start":[{"col-start":be()}],"col-end":[{"col-end":be()}],"grid-rows":[{"grid-rows":[Am]}],"row-start-end":[{row:["auto",{span:[lm,yn]},yn]}],"row-start":[{"row-start":be()}],"row-end":[{"row-end":be()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yn]}],gap:[{gap:[P]}],"gap-x":[{"gap-x":[P]}],"gap-y":[{"gap-y":[P]}],"justify-content":[{justify:["normal",...Le()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Le(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Le(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[ye]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ye]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",yn,t]}],"min-w":[{"min-w":[yn,t,"min","max","fit"]}],"max-w":[{"max-w":[yn,t,"none","full","min","max","fit","prose",{screen:[$u]},$u]}],h:[{h:[yn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[yn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[yn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[yn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",$u,Gu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",K_]}],"font-family":[{font:[Am]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yn]}],"line-clamp":[{"line-clamp":["none",qf,K_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ru,yn]}],"list-image":[{"list-image":["none",yn]}],"list-style-type":[{list:["none","disc","decimal",yn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[U]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[U]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Xe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ru,Gu]}],"underline-offset":[{"underline-offset":["auto",ru,yn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:he()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[U]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ct(),uD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cD]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dD]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[C]}],"gradient-via":[{via:[C]}],"gradient-to":[{to:[C]}],rounded:[{rounded:[u]}],"rounded-s":[{"rounded-s":[u]}],"rounded-e":[{"rounded-e":[u]}],"rounded-t":[{"rounded-t":[u]}],"rounded-r":[{"rounded-r":[u]}],"rounded-b":[{"rounded-b":[u]}],"rounded-l":[{"rounded-l":[u]}],"rounded-ss":[{"rounded-ss":[u]}],"rounded-se":[{"rounded-se":[u]}],"rounded-ee":[{"rounded-ee":[u]}],"rounded-es":[{"rounded-es":[u]}],"rounded-tl":[{"rounded-tl":[u]}],"rounded-tr":[{"rounded-tr":[u]}],"rounded-br":[{"rounded-br":[u]}],"rounded-bl":[{"rounded-bl":[u]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[U]}],"border-style":[{border:[...Xe(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[U]}],"divide-style":[{divide:Xe()}],"border-color":[{border:[A]}],"border-color-x":[{"border-x":[A]}],"border-color-y":[{"border-y":[A]}],"border-color-s":[{"border-s":[A]}],"border-color-e":[{"border-e":[A]}],"border-color-t":[{"border-t":[A]}],"border-color-r":[{"border-r":[A]}],"border-color-b":[{"border-b":[A]}],"border-color-l":[{"border-l":[A]}],"divide-color":[{divide:[A]}],"outline-style":[{outline:["",...Xe()]}],"outline-offset":[{"outline-offset":[ru,yn]}],"outline-w":[{outline:[ru,Gu]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[U]}],"ring-offset-w":[{"ring-offset":[ru,Gu]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",$u,fD]}],"shadow-color":[{shadow:[Am]}],opacity:[{opacity:[U]}],"mix-blend":[{"mix-blend":[...lt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":lt()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",$u,yn]}],grayscale:[{grayscale:[x]}],"hue-rotate":[{"hue-rotate":[E]}],invert:[{invert:[F]}],saturate:[{saturate:[K]}],sepia:[{sepia:[se]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[x]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[E]}],"backdrop-invert":[{"backdrop-invert":[F]}],"backdrop-opacity":[{"backdrop-opacity":[U]}],"backdrop-saturate":[{"backdrop-saturate":[K]}],"backdrop-sepia":[{"backdrop-sepia":[se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yn]}],duration:[{duration:Lt()}],ease:[{ease:["linear","in","out","in-out",yn]}],delay:[{delay:Lt()}],animate:[{animate:["none","spin","ping","pulse","bounce",yn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[ee]}],"scale-x":[{"scale-x":[ee]}],"scale-y":[{"scale-y":[ee]}],rotate:[{rotate:[lm,yn]}],"translate-x":[{"translate-x":[ue]}],"translate-y":[{"translate-y":[ue]}],"skew-x":[{"skew-x":[pe]}],"skew-y":[{"skew-y":[pe]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":he()}],"scroll-mx":[{"scroll-mx":he()}],"scroll-my":[{"scroll-my":he()}],"scroll-ms":[{"scroll-ms":he()}],"scroll-me":[{"scroll-me":he()}],"scroll-mt":[{"scroll-mt":he()}],"scroll-mr":[{"scroll-mr":he()}],"scroll-mb":[{"scroll-mb":he()}],"scroll-ml":[{"scroll-ml":he()}],"scroll-p":[{"scroll-p":he()}],"scroll-px":[{"scroll-px":he()}],"scroll-py":[{"scroll-py":he()}],"scroll-ps":[{"scroll-ps":he()}],"scroll-pe":[{"scroll-pe":he()}],"scroll-pt":[{"scroll-pt":he()}],"scroll-pr":[{"scroll-pr":he()}],"scroll-pb":[{"scroll-pb":he()}],"scroll-pl":[{"scroll-pl":he()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ru,Gu,K_]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vD=eD(yD);function Nn(...e){return vD(e3(e))}const _D=SN,u3=te.forwardRef(({className:e,...t},r)=>Z.jsx($T,{ref:r,className:Nn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));u3.displayName=$T.displayName;const wD=Gv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),h3=te.forwardRef(({className:e,variant:t,...r},i)=>Z.jsx(qT,{ref:i,className:Nn(wD({variant:t}),e),...r}));h3.displayName=qT.displayName;const xD=te.forwardRef(({className:e,...t},r)=>Z.jsx(XT,{ref:r,className:Nn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));xD.displayName=XT.displayName;const d3=te.forwardRef(({className:e,...t},r)=>Z.jsx(YT,{ref:r,className:Nn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:Z.jsx($v,{className:"h-4 w-4"})}));d3.displayName=YT.displayName;const f3=te.forwardRef(({className:e,...t},r)=>Z.jsx(WT,{ref:r,className:Nn("text-sm font-semibold",e),...t}));f3.displayName=WT.displayName;const p3=te.forwardRef(({className:e,...t},r)=>Z.jsx(ZT,{ref:r,className:Nn("text-sm opacity-90",e),...t}));p3.displayName=ZT.displayName;function bD(){const{toasts:e}=QR();return Z.jsxs(_D,{children:[e.map(function({id:t,title:r,description:i,action:A,...u}){return Z.jsxs(h3,{...u,children:[Z.jsxs("div",{className:"grid gap-1",children:[r&&Z.jsx(f3,{children:r}),i&&Z.jsx(p3,{children:i})]}),A,Z.jsx(d3,{})]},t)}),Z.jsx(u3,{})]})}var MS=["light","dark"],BD="(prefers-color-scheme: dark)",CD=te.createContext(void 0),SD={setTheme:e=>{},themes:[]},ED=()=>{var e;return(e=te.useContext(CD))!=null?e:SD};te.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:i,enableColorScheme:A,defaultTheme:u,value:h,attrs:o,nonce:g})=>{let x=u==="system",E=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(D=>`'${D}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,F=A?MS.includes(u)&&u?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${u}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",P=(D,k=!1,j=!0)=>{let U=h?h[D]:D,N=k?D+"|| ''":`'${U}'`,K="";return A&&j&&!k&&MS.includes(D)&&(K+=`d.style.colorScheme = '${D}';`),r==="class"?k||U?K+=`c.add(${N})`:K+="null":U&&(K+=`d[s](n,${N})`),K},C=e?`!function(){${E}${P(e)}}()`:i?`!function(){try{${E}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${x})){var t='${BD}',m=window.matchMedia(t);if(m.media!==t||m.matches){${P("dark")}}else{${P("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${P(h?"x[e]":"e",!0)}}${x?"":"else{"+P(u,!1,!1)+"}"}${F}}catch(e){}}()`:`!function(){try{${E}var e=localStorage.getItem('${t}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${P(h?"x[e]":"e",!0)}}else{${P(u,!1,!1)};}${F}}catch(t){}}();`;return te.createElement("script",{nonce:g,dangerouslySetInnerHTML:{__html:C}})});var FD=e=>{switch(e){case"success":return PD;case"info":return MD;case"warning":return LD;case"error":return kD;default:return null}},ID=Array(12).fill(0),TD=({visible:e,className:t})=>hr.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},hr.createElement("div",{className:"sonner-spinner"},ID.map((r,i)=>hr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),PD=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},hr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),LD=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},hr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),MD=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},hr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kD=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},hr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),UD=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},hr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),hr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),QD=()=>{let[e,t]=hr.useState(document.hidden);return hr.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Ux=1,RD=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:i,...A}=t,u=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Ux++,h=this.toasts.find(g=>g.id===u),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),h?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...t,id:u,title:i}),{...g,...t,id:u,dismissible:o,title:i}):g):this.addToast({title:i,...A,dismissible:o,id:u}),u},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(i=>i({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let i;r.loading!==void 0&&(i=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let A=t instanceof Promise?t:t(),u=i!==void 0,h,o=A.then(async x=>{if(h=["resolve",x],hr.isValidElement(x))u=!1,this.create({id:i,type:"default",message:x});else if(DD(x)&&!x.ok){u=!1;let E=typeof r.error=="function"?await r.error(`HTTP error! status: ${x.status}`):r.error,F=typeof r.description=="function"?await r.description(`HTTP error! status: ${x.status}`):r.description;this.create({id:i,type:"error",message:E,description:F})}else if(r.success!==void 0){u=!1;let E=typeof r.success=="function"?await r.success(x):r.success,F=typeof r.description=="function"?await r.description(x):r.description;this.create({id:i,type:"success",message:E,description:F})}}).catch(async x=>{if(h=["reject",x],r.error!==void 0){u=!1;let E=typeof r.error=="function"?await r.error(x):r.error,F=typeof r.description=="function"?await r.description(x):r.description;this.create({id:i,type:"error",message:E,description:F})}}).finally(()=>{var x;u&&(this.dismiss(i),i=void 0),(x=r.finally)==null||x.call(r)}),g=()=>new Promise((x,E)=>o.then(()=>h[0]==="reject"?E(h[1]):x(h[1])).catch(E));return typeof i!="string"&&typeof i!="number"?{unwrap:g}:Object.assign(i,{unwrap:g})},this.custom=(t,r)=>{let i=(r==null?void 0:r.id)||Ux++;return this.create({jsx:t(i),id:i,...r}),i},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qa=new RD,ND=(e,t)=>{let r=(t==null?void 0:t.id)||Ux++;return Qa.addToast({title:e,...t,id:r}),r},DD=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",OD=ND,zD=()=>Qa.toasts,HD=()=>Qa.getActiveToasts();Object.assign(OD,{success:Qa.success,info:Qa.info,warning:Qa.warning,error:Qa.error,custom:Qa.custom,message:Qa.message,promise:Qa.promise,dismiss:Qa.dismiss,loading:Qa.loading},{getHistory:zD,getToasts:HD});function jD(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}jD(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function v0(e){return e.label!==void 0}var VD=3,KD="32px",GD="16px",kS=4e3,$D=356,qD=14,WD=20,ZD=200;function vA(...e){return e.filter(Boolean).join(" ")}function XD(e){let[t,r]=e.split("-"),i=[];return t&&i.push(t),r&&i.push(r),i}var YD=e=>{var t,r,i,A,u,h,o,g,x,E,F;let{invert:P,toast:C,unstyled:D,interacting:k,setHeights:j,visibleToasts:U,heights:N,index:K,toasts:ee,expanded:se,removeToast:pe,defaultRichColors:ye,closeButton:ue,style:Te,cancelButtonStyle:Ke,actionButtonStyle:oe,className:he="",descriptionClassName:Ie="",duration:be,position:ct,gap:Xe,loadingIcon:lt,expandByDefault:Le,classNames:ze,icons:it,closeButtonAriaLabel:Lt="Close toast",pauseWhenPageIsHidden:ne}=e,[Be,Pe]=hr.useState(null),[$e,nt]=hr.useState(null),[Ze,pt]=hr.useState(!1),[dt,Qt]=hr.useState(!1),[Mt,$t]=hr.useState(!1),[jt,vr]=hr.useState(!1),[It,Ge]=hr.useState(!1),[Cr,pr]=hr.useState(0),[Kt,ar]=hr.useState(0),lr=hr.useRef(C.duration||be||kS),cr=hr.useRef(null),br=hr.useRef(null),Nr=K===0,Kr=K+1<=U,Lr=C.type,Hr=C.dismissible!==!1,un=C.className||"",zr=C.descriptionClassName||"",Yr=hr.useMemo(()=>N.findIndex(Me=>Me.toastId===C.id)||0,[N,C.id]),ur=hr.useMemo(()=>{var Me;return(Me=C.closeButton)!=null?Me:ue},[C.closeButton,ue]),At=hr.useMemo(()=>C.duration||be||kS,[C.duration,be]),le=hr.useRef(0),fe=hr.useRef(0),_e=hr.useRef(0),Qe=hr.useRef(null),[et,tt]=ct.split("-"),yt=hr.useMemo(()=>N.reduce((Me,Rt,nr)=>nr>=Yr?Me:Me+Rt.height,0),[N,Yr]),rt=QD(),Ft=C.invert||P,Ct=Lr==="loading";fe.current=hr.useMemo(()=>Yr*Xe+yt,[Yr,yt]),hr.useEffect(()=>{lr.current=At},[At]),hr.useEffect(()=>{pt(!0)},[]),hr.useEffect(()=>{let Me=br.current;if(Me){let Rt=Me.getBoundingClientRect().height;return ar(Rt),j(nr=>[{toastId:C.id,height:Rt,position:C.position},...nr]),()=>j(nr=>nr.filter(tr=>tr.toastId!==C.id))}},[j,C.id]),hr.useLayoutEffect(()=>{if(!Ze)return;let Me=br.current,Rt=Me.style.height;Me.style.height="auto";let nr=Me.getBoundingClientRect().height;Me.style.height=Rt,ar(nr),j(tr=>tr.find(Ar=>Ar.toastId===C.id)?tr.map(Ar=>Ar.toastId===C.id?{...Ar,height:nr}:Ar):[{toastId:C.id,height:nr,position:C.position},...tr])},[Ze,C.title,C.description,j,C.id]);let at=hr.useCallback(()=>{Qt(!0),pr(fe.current),j(Me=>Me.filter(Rt=>Rt.toastId!==C.id)),setTimeout(()=>{pe(C)},ZD)},[C,pe,j,fe]);hr.useEffect(()=>{if(C.promise&&Lr==="loading"||C.duration===1/0||C.type==="loading")return;let Me;return se||k||ne&&rt?(()=>{if(_e.current<le.current){let Rt=new Date().getTime()-le.current;lr.current=lr.current-Rt}_e.current=new Date().getTime()})():lr.current!==1/0&&(le.current=new Date().getTime(),Me=setTimeout(()=>{var Rt;(Rt=C.onAutoClose)==null||Rt.call(C,C),at()},lr.current)),()=>clearTimeout(Me)},[se,k,C,Lr,ne,rt,at]),hr.useEffect(()=>{C.delete&&at()},[at,C.delete]);function mt(){var Me,Rt,nr;return it!=null&&it.loading?hr.createElement("div",{className:vA(ze==null?void 0:ze.loader,(Me=C==null?void 0:C.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":Lr==="loading"},it.loading):lt?hr.createElement("div",{className:vA(ze==null?void 0:ze.loader,(Rt=C==null?void 0:C.classNames)==null?void 0:Rt.loader,"sonner-loader"),"data-visible":Lr==="loading"},lt):hr.createElement(TD,{className:vA(ze==null?void 0:ze.loader,(nr=C==null?void 0:C.classNames)==null?void 0:nr.loader),visible:Lr==="loading"})}return hr.createElement("li",{tabIndex:0,ref:br,className:vA(he,un,ze==null?void 0:ze.toast,(t=C==null?void 0:C.classNames)==null?void 0:t.toast,ze==null?void 0:ze.default,ze==null?void 0:ze[Lr],(r=C==null?void 0:C.classNames)==null?void 0:r[Lr]),"data-sonner-toast":"","data-rich-colors":(i=C.richColors)!=null?i:ye,"data-styled":!(C.jsx||C.unstyled||D),"data-mounted":Ze,"data-promise":!!C.promise,"data-swiped":It,"data-removed":dt,"data-visible":Kr,"data-y-position":et,"data-x-position":tt,"data-index":K,"data-front":Nr,"data-swiping":Mt,"data-dismissible":Hr,"data-type":Lr,"data-invert":Ft,"data-swipe-out":jt,"data-swipe-direction":$e,"data-expanded":!!(se||Le&&Ze),style:{"--index":K,"--toasts-before":K,"--z-index":ee.length-K,"--offset":`${dt?Cr:fe.current}px`,"--initial-height":Le?"auto":`${Kt}px`,...Te,...C.style},onDragEnd:()=>{$t(!1),Pe(null),Qe.current=null},onPointerDown:Me=>{Ct||!Hr||(cr.current=new Date,pr(fe.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&($t(!0),Qe.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,Rt,nr,tr;if(jt||!Hr)return;Qe.current=null;let Ar=Number(((Me=br.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qt=Number(((Rt=br.current)==null?void 0:Rt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Jr=new Date().getTime()-((nr=cr.current)==null?void 0:nr.getTime()),jr=Be==="x"?Ar:qt,Rr=Math.abs(jr)/Jr;if(Math.abs(jr)>=WD||Rr>.11){pr(fe.current),(tr=C.onDismiss)==null||tr.call(C,C),nt(Be==="x"?Ar>0?"right":"left":qt>0?"down":"up"),at(),vr(!0),Ge(!1);return}$t(!1),Pe(null)},onPointerMove:Me=>{var Rt,nr,tr,Ar;if(!Qe.current||!Hr||((Rt=window.getSelection())==null?void 0:Rt.toString().length)>0)return;let qt=Me.clientY-Qe.current.y,Jr=Me.clientX-Qe.current.x,jr=(nr=e.swipeDirections)!=null?nr:XD(ct);!Be&&(Math.abs(Jr)>1||Math.abs(qt)>1)&&Pe(Math.abs(Jr)>Math.abs(qt)?"x":"y");let Rr={x:0,y:0};Be==="y"?(jr.includes("top")||jr.includes("bottom"))&&(jr.includes("top")&&qt<0||jr.includes("bottom")&&qt>0)&&(Rr.y=qt):Be==="x"&&(jr.includes("left")||jr.includes("right"))&&(jr.includes("left")&&Jr<0||jr.includes("right")&&Jr>0)&&(Rr.x=Jr),(Math.abs(Rr.x)>0||Math.abs(Rr.y)>0)&&Ge(!0),(tr=br.current)==null||tr.style.setProperty("--swipe-amount-x",`${Rr.x}px`),(Ar=br.current)==null||Ar.style.setProperty("--swipe-amount-y",`${Rr.y}px`)}},ur&&!C.jsx?hr.createElement("button",{"aria-label":Lt,"data-disabled":Ct,"data-close-button":!0,onClick:Ct||!Hr?()=>{}:()=>{var Me;at(),(Me=C.onDismiss)==null||Me.call(C,C)},className:vA(ze==null?void 0:ze.closeButton,(A=C==null?void 0:C.classNames)==null?void 0:A.closeButton)},(u=it==null?void 0:it.close)!=null?u:UD):null,C.jsx||te.isValidElement(C.title)?C.jsx?C.jsx:typeof C.title=="function"?C.title():C.title:hr.createElement(hr.Fragment,null,Lr||C.icon||C.promise?hr.createElement("div",{"data-icon":"",className:vA(ze==null?void 0:ze.icon,(h=C==null?void 0:C.classNames)==null?void 0:h.icon)},C.promise||C.type==="loading"&&!C.icon?C.icon||mt():null,C.type!=="loading"?C.icon||(it==null?void 0:it[Lr])||FD(Lr):null):null,hr.createElement("div",{"data-content":"",className:vA(ze==null?void 0:ze.content,(o=C==null?void 0:C.classNames)==null?void 0:o.content)},hr.createElement("div",{"data-title":"",className:vA(ze==null?void 0:ze.title,(g=C==null?void 0:C.classNames)==null?void 0:g.title)},typeof C.title=="function"?C.title():C.title),C.description?hr.createElement("div",{"data-description":"",className:vA(Ie,zr,ze==null?void 0:ze.description,(x=C==null?void 0:C.classNames)==null?void 0:x.description)},typeof C.description=="function"?C.description():C.description):null),te.isValidElement(C.cancel)?C.cancel:C.cancel&&v0(C.cancel)?hr.createElement("button",{"data-button":!0,"data-cancel":!0,style:C.cancelButtonStyle||Ke,onClick:Me=>{var Rt,nr;v0(C.cancel)&&Hr&&((nr=(Rt=C.cancel).onClick)==null||nr.call(Rt,Me),at())},className:vA(ze==null?void 0:ze.cancelButton,(E=C==null?void 0:C.classNames)==null?void 0:E.cancelButton)},C.cancel.label):null,te.isValidElement(C.action)?C.action:C.action&&v0(C.action)?hr.createElement("button",{"data-button":!0,"data-action":!0,style:C.actionButtonStyle||oe,onClick:Me=>{var Rt,nr;v0(C.action)&&((nr=(Rt=C.action).onClick)==null||nr.call(Rt,Me),!Me.defaultPrevented&&at())},className:vA(ze==null?void 0:ze.actionButton,(F=C==null?void 0:C.classNames)==null?void 0:F.actionButton)},C.action.label):null))};function US(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function JD(e,t){let r={};return[e,t].forEach((i,A)=>{let u=A===1,h=u?"--mobile-offset":"--offset",o=u?GD:KD;function g(x){["top","right","bottom","left"].forEach(E=>{r[`${h}-${E}`]=typeof x=="number"?`${x}px`:x})}typeof i=="number"||typeof i=="string"?g(i):typeof i=="object"?["top","right","bottom","left"].forEach(x=>{i[x]===void 0?r[`${h}-${x}`]=o:r[`${h}-${x}`]=typeof i[x]=="number"?`${i[x]}px`:i[x]}):g(o)}),r}var e8=te.forwardRef(function(e,t){let{invert:r,position:i="bottom-right",hotkey:A=["altKey","KeyT"],expand:u,closeButton:h,className:o,offset:g,mobileOffset:x,theme:E="light",richColors:F,duration:P,style:C,visibleToasts:D=VD,toastOptions:k,dir:j=US(),gap:U=qD,loadingIcon:N,icons:K,containerAriaLabel:ee="Notifications",pauseWhenPageIsHidden:se}=e,[pe,ye]=hr.useState([]),ue=hr.useMemo(()=>Array.from(new Set([i].concat(pe.filter(ne=>ne.position).map(ne=>ne.position)))),[pe,i]),[Te,Ke]=hr.useState([]),[oe,he]=hr.useState(!1),[Ie,be]=hr.useState(!1),[ct,Xe]=hr.useState(E!=="system"?E:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),lt=hr.useRef(null),Le=A.join("+").replace(/Key/g,"").replace(/Digit/g,""),ze=hr.useRef(null),it=hr.useRef(!1),Lt=hr.useCallback(ne=>{ye(Be=>{var Pe;return(Pe=Be.find($e=>$e.id===ne.id))!=null&&Pe.delete||Qa.dismiss(ne.id),Be.filter(({id:$e})=>$e!==ne.id)})},[]);return hr.useEffect(()=>Qa.subscribe(ne=>{if(ne.dismiss){ye(Be=>Be.map(Pe=>Pe.id===ne.id?{...Pe,delete:!0}:Pe));return}setTimeout(()=>{CT.flushSync(()=>{ye(Be=>{let Pe=Be.findIndex($e=>$e.id===ne.id);return Pe!==-1?[...Be.slice(0,Pe),{...Be[Pe],...ne},...Be.slice(Pe+1)]:[ne,...Be]})})})}),[]),hr.useEffect(()=>{if(E!=="system"){Xe(E);return}if(E==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Xe("dark"):Xe("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:Be})=>{Xe(Be?"dark":"light")})}catch{ne.addListener(({matches:Pe})=>{try{Xe(Pe?"dark":"light")}catch($e){console.error($e)}})}},[E]),hr.useEffect(()=>{pe.length<=1&&he(!1)},[pe]),hr.useEffect(()=>{let ne=Be=>{var Pe,$e;A.every(nt=>Be[nt]||Be.code===nt)&&(he(!0),(Pe=lt.current)==null||Pe.focus()),Be.code==="Escape"&&(document.activeElement===lt.current||($e=lt.current)!=null&&$e.contains(document.activeElement))&&he(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[A]),hr.useEffect(()=>{if(lt.current)return()=>{ze.current&&(ze.current.focus({preventScroll:!0}),ze.current=null,it.current=!1)}},[lt.current]),hr.createElement("section",{ref:t,"aria-label":`${ee} ${Le}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ue.map((ne,Be)=>{var Pe;let[$e,nt]=ne.split("-");return pe.length?hr.createElement("ol",{key:ne,dir:j==="auto"?US():j,tabIndex:-1,ref:lt,className:o,"data-sonner-toaster":!0,"data-theme":ct,"data-y-position":$e,"data-lifted":oe&&pe.length>1&&!u,"data-x-position":nt,style:{"--front-toast-height":`${((Pe=Te[0])==null?void 0:Pe.height)||0}px`,"--width":`${$D}px`,"--gap":`${U}px`,...C,...JD(g,x)},onBlur:Ze=>{it.current&&!Ze.currentTarget.contains(Ze.relatedTarget)&&(it.current=!1,ze.current&&(ze.current.focus({preventScroll:!0}),ze.current=null))},onFocus:Ze=>{Ze.target instanceof HTMLElement&&Ze.target.dataset.dismissible==="false"||it.current||(it.current=!0,ze.current=Ze.relatedTarget)},onMouseEnter:()=>he(!0),onMouseMove:()=>he(!0),onMouseLeave:()=>{Ie||he(!1)},onDragEnd:()=>he(!1),onPointerDown:Ze=>{Ze.target instanceof HTMLElement&&Ze.target.dataset.dismissible==="false"||be(!0)},onPointerUp:()=>be(!1)},pe.filter(Ze=>!Ze.position&&Be===0||Ze.position===ne).map((Ze,pt)=>{var dt,Qt;return hr.createElement(YD,{key:Ze.id,icons:K,index:pt,toast:Ze,defaultRichColors:F,duration:(dt=k==null?void 0:k.duration)!=null?dt:P,className:k==null?void 0:k.className,descriptionClassName:k==null?void 0:k.descriptionClassName,invert:r,visibleToasts:D,closeButton:(Qt=k==null?void 0:k.closeButton)!=null?Qt:h,interacting:Ie,position:ne,style:k==null?void 0:k.style,unstyled:k==null?void 0:k.unstyled,classNames:k==null?void 0:k.classNames,cancelButtonStyle:k==null?void 0:k.cancelButtonStyle,actionButtonStyle:k==null?void 0:k.actionButtonStyle,removeToast:Lt,toasts:pe.filter(Mt=>Mt.position==Ze.position),heights:Te.filter(Mt=>Mt.position==Ze.position),setHeights:Ke,expandByDefault:u,gap:U,loadingIcon:N,expanded:oe,pauseWhenPageIsHidden:se,swipeDirections:e.swipeDirections})})):null}))});const t8=({...e})=>{const{theme:t="system"}=ED();return Z.jsx(e8,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var r8=Gb[" useId ".trim().toString()]||(()=>{}),n8=0;function qv(e){const[t,r]=te.useState(r8());return bo(()=>{r(i=>i??String(n8++))},[e]),t?`radix-${t}`:""}const i8=["top","right","bottom","left"],Mh=Math.min,fl=Math.max,Yy=Math.round,_0=Math.floor,xc=e=>({x:e,y:e}),s8={left:"right",right:"left",bottom:"top",top:"bottom"},o8={start:"end",end:"start"};function Qx(e,t,r){return fl(e,Mh(t,r))}function yu(e,t){return typeof e=="function"?e(t):e}function vu(e){return e.split("-")[0]}function Ip(e){return e.split("-")[1]}function j2(e){return e==="x"?"y":"x"}function V2(e){return e==="y"?"height":"width"}const a8=new Set(["top","bottom"]);function yc(e){return a8.has(vu(e))?"y":"x"}function K2(e){return j2(yc(e))}function l8(e,t,r){r===void 0&&(r=!1);const i=Ip(e),A=K2(e),u=V2(A);let h=A==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(h=Jy(h)),[h,Jy(h)]}function A8(e){const t=Jy(e);return[Rx(e),t,Rx(t)]}function Rx(e){return e.replace(/start|end/g,t=>o8[t])}const QS=["left","right"],RS=["right","left"],c8=["top","bottom"],u8=["bottom","top"];function h8(e,t,r){switch(e){case"top":case"bottom":return r?t?RS:QS:t?QS:RS;case"left":case"right":return t?c8:u8;default:return[]}}function d8(e,t,r,i){const A=Ip(e);let u=h8(vu(e),r==="start",i);return A&&(u=u.map(h=>h+"-"+A),t&&(u=u.concat(u.map(Rx)))),u}function Jy(e){return e.replace(/left|right|bottom|top/g,t=>s8[t])}function f8(e){return{top:0,right:0,bottom:0,left:0,...e}}function m3(e){return typeof e!="number"?f8(e):{top:e,right:e,bottom:e,left:e}}function ev(e){const{x:t,y:r,width:i,height:A}=e;return{width:i,height:A,top:r,left:t,right:t+i,bottom:r+A,x:t,y:r}}function NS(e,t,r){let{reference:i,floating:A}=e;const u=yc(t),h=K2(t),o=V2(h),g=vu(t),x=u==="y",E=i.x+i.width/2-A.width/2,F=i.y+i.height/2-A.height/2,P=i[o]/2-A[o]/2;let C;switch(g){case"top":C={x:E,y:i.y-A.height};break;case"bottom":C={x:E,y:i.y+i.height};break;case"right":C={x:i.x+i.width,y:F};break;case"left":C={x:i.x-A.width,y:F};break;default:C={x:i.x,y:i.y}}switch(Ip(t)){case"start":C[h]-=P*(r&&x?-1:1);break;case"end":C[h]+=P*(r&&x?-1:1);break}return C}const p8=async(e,t,r)=>{const{placement:i="bottom",strategy:A="absolute",middleware:u=[],platform:h}=r,o=u.filter(Boolean),g=await(h.isRTL==null?void 0:h.isRTL(t));let x=await h.getElementRects({reference:e,floating:t,strategy:A}),{x:E,y:F}=NS(x,i,g),P=i,C={},D=0;for(let k=0;k<o.length;k++){const{name:j,fn:U}=o[k],{x:N,y:K,data:ee,reset:se}=await U({x:E,y:F,initialPlacement:i,placement:P,strategy:A,middlewareData:C,rects:x,platform:h,elements:{reference:e,floating:t}});E=N??E,F=K??F,C={...C,[j]:{...C[j],...ee}},se&&D<=50&&(D++,typeof se=="object"&&(se.placement&&(P=se.placement),se.rects&&(x=se.rects===!0?await h.getElementRects({reference:e,floating:t,strategy:A}):se.rects),{x:E,y:F}=NS(x,P,g)),k=-1)}return{x:E,y:F,placement:P,strategy:A,middlewareData:C}};async function cg(e,t){var r;t===void 0&&(t={});const{x:i,y:A,platform:u,rects:h,elements:o,strategy:g}=e,{boundary:x="clippingAncestors",rootBoundary:E="viewport",elementContext:F="floating",altBoundary:P=!1,padding:C=0}=yu(t,e),D=m3(C),j=o[P?F==="floating"?"reference":"floating":F],U=ev(await u.getClippingRect({element:(r=await(u.isElement==null?void 0:u.isElement(j)))==null||r?j:j.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(o.floating)),boundary:x,rootBoundary:E,strategy:g})),N=F==="floating"?{x:i,y:A,width:h.floating.width,height:h.floating.height}:h.reference,K=await(u.getOffsetParent==null?void 0:u.getOffsetParent(o.floating)),ee=await(u.isElement==null?void 0:u.isElement(K))?await(u.getScale==null?void 0:u.getScale(K))||{x:1,y:1}:{x:1,y:1},se=ev(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:N,offsetParent:K,strategy:g}):N);return{top:(U.top-se.top+D.top)/ee.y,bottom:(se.bottom-U.bottom+D.bottom)/ee.y,left:(U.left-se.left+D.left)/ee.x,right:(se.right-U.right+D.right)/ee.x}}const m8=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:A,rects:u,platform:h,elements:o,middlewareData:g}=t,{element:x,padding:E=0}=yu(e,t)||{};if(x==null)return{};const F=m3(E),P={x:r,y:i},C=K2(A),D=V2(C),k=await h.getDimensions(x),j=C==="y",U=j?"top":"left",N=j?"bottom":"right",K=j?"clientHeight":"clientWidth",ee=u.reference[D]+u.reference[C]-P[C]-u.floating[D],se=P[C]-u.reference[C],pe=await(h.getOffsetParent==null?void 0:h.getOffsetParent(x));let ye=pe?pe[K]:0;(!ye||!await(h.isElement==null?void 0:h.isElement(pe)))&&(ye=o.floating[K]||u.floating[D]);const ue=ee/2-se/2,Te=ye/2-k[D]/2-1,Ke=Mh(F[U],Te),oe=Mh(F[N],Te),he=Ke,Ie=ye-k[D]-oe,be=ye/2-k[D]/2+ue,ct=Qx(he,be,Ie),Xe=!g.arrow&&Ip(A)!=null&&be!==ct&&u.reference[D]/2-(be<he?Ke:oe)-k[D]/2<0,lt=Xe?be<he?be-he:be-Ie:0;return{[C]:P[C]+lt,data:{[C]:ct,centerOffset:be-ct-lt,...Xe&&{alignmentOffset:lt}},reset:Xe}}}),g8=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:A,middlewareData:u,rects:h,initialPlacement:o,platform:g,elements:x}=t,{mainAxis:E=!0,crossAxis:F=!0,fallbackPlacements:P,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:k=!0,...j}=yu(e,t);if((r=u.arrow)!=null&&r.alignmentOffset)return{};const U=vu(A),N=yc(o),K=vu(o)===o,ee=await(g.isRTL==null?void 0:g.isRTL(x.floating)),se=P||(K||!k?[Jy(o)]:A8(o)),pe=D!=="none";!P&&pe&&se.push(...d8(o,k,D,ee));const ye=[o,...se],ue=await cg(t,j),Te=[];let Ke=((i=u.flip)==null?void 0:i.overflows)||[];if(E&&Te.push(ue[U]),F){const be=l8(A,h,ee);Te.push(ue[be[0]],ue[be[1]])}if(Ke=[...Ke,{placement:A,overflows:Te}],!Te.every(be=>be<=0)){var oe,he;const be=(((oe=u.flip)==null?void 0:oe.index)||0)+1,ct=ye[be];if(ct&&(!(F==="alignment"?N!==yc(ct):!1)||Ke.every(Le=>Le.overflows[0]>0&&yc(Le.placement)===N)))return{data:{index:be,overflows:Ke},reset:{placement:ct}};let Xe=(he=Ke.filter(lt=>lt.overflows[0]<=0).sort((lt,Le)=>lt.overflows[1]-Le.overflows[1])[0])==null?void 0:he.placement;if(!Xe)switch(C){case"bestFit":{var Ie;const lt=(Ie=Ke.filter(Le=>{if(pe){const ze=yc(Le.placement);return ze===N||ze==="y"}return!0}).map(Le=>[Le.placement,Le.overflows.filter(ze=>ze>0).reduce((ze,it)=>ze+it,0)]).sort((Le,ze)=>Le[1]-ze[1])[0])==null?void 0:Ie[0];lt&&(Xe=lt);break}case"initialPlacement":Xe=o;break}if(A!==Xe)return{reset:{placement:Xe}}}return{}}}};function DS(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function OS(e){return i8.some(t=>e[t]>=0)}const y8=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...A}=yu(e,t);switch(i){case"referenceHidden":{const u=await cg(t,{...A,elementContext:"reference"}),h=DS(u,r.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:OS(h)}}}case"escaped":{const u=await cg(t,{...A,altBoundary:!0}),h=DS(u,r.floating);return{data:{escapedOffsets:h,escaped:OS(h)}}}default:return{}}}}},g3=new Set(["left","top"]);async function v8(e,t){const{placement:r,platform:i,elements:A}=e,u=await(i.isRTL==null?void 0:i.isRTL(A.floating)),h=vu(r),o=Ip(r),g=yc(r)==="y",x=g3.has(h)?-1:1,E=u&&g?-1:1,F=yu(t,e);let{mainAxis:P,crossAxis:C,alignmentAxis:D}=typeof F=="number"?{mainAxis:F,crossAxis:0,alignmentAxis:null}:{mainAxis:F.mainAxis||0,crossAxis:F.crossAxis||0,alignmentAxis:F.alignmentAxis};return o&&typeof D=="number"&&(C=o==="end"?D*-1:D),g?{x:C*E,y:P*x}:{x:P*x,y:C*E}}const _8=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:A,y:u,placement:h,middlewareData:o}=t,g=await v8(t,e);return h===((r=o.offset)==null?void 0:r.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:A+g.x,y:u+g.y,data:{...g,placement:h}}}}},w8=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:A}=t,{mainAxis:u=!0,crossAxis:h=!1,limiter:o={fn:j=>{let{x:U,y:N}=j;return{x:U,y:N}}},...g}=yu(e,t),x={x:r,y:i},E=await cg(t,g),F=yc(vu(A)),P=j2(F);let C=x[P],D=x[F];if(u){const j=P==="y"?"top":"left",U=P==="y"?"bottom":"right",N=C+E[j],K=C-E[U];C=Qx(N,C,K)}if(h){const j=F==="y"?"top":"left",U=F==="y"?"bottom":"right",N=D+E[j],K=D-E[U];D=Qx(N,D,K)}const k=o.fn({...t,[P]:C,[F]:D});return{...k,data:{x:k.x-r,y:k.y-i,enabled:{[P]:u,[F]:h}}}}}},x8=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:A,rects:u,middlewareData:h}=t,{offset:o=0,mainAxis:g=!0,crossAxis:x=!0}=yu(e,t),E={x:r,y:i},F=yc(A),P=j2(F);let C=E[P],D=E[F];const k=yu(o,t),j=typeof k=="number"?{mainAxis:k,crossAxis:0}:{mainAxis:0,crossAxis:0,...k};if(g){const K=P==="y"?"height":"width",ee=u.reference[P]-u.floating[K]+j.mainAxis,se=u.reference[P]+u.reference[K]-j.mainAxis;C<ee?C=ee:C>se&&(C=se)}if(x){var U,N;const K=P==="y"?"width":"height",ee=g3.has(vu(A)),se=u.reference[F]-u.floating[K]+(ee&&((U=h.offset)==null?void 0:U[F])||0)+(ee?0:j.crossAxis),pe=u.reference[F]+u.reference[K]+(ee?0:((N=h.offset)==null?void 0:N[F])||0)-(ee?j.crossAxis:0);D<se?D=se:D>pe&&(D=pe)}return{[P]:C,[F]:D}}}},b8=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,i;const{placement:A,rects:u,platform:h,elements:o}=t,{apply:g=()=>{},...x}=yu(e,t),E=await cg(t,x),F=vu(A),P=Ip(A),C=yc(A)==="y",{width:D,height:k}=u.floating;let j,U;F==="top"||F==="bottom"?(j=F,U=P===(await(h.isRTL==null?void 0:h.isRTL(o.floating))?"start":"end")?"left":"right"):(U=F,j=P==="end"?"top":"bottom");const N=k-E.top-E.bottom,K=D-E.left-E.right,ee=Mh(k-E[j],N),se=Mh(D-E[U],K),pe=!t.middlewareData.shift;let ye=ee,ue=se;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(ue=K),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(ye=N),pe&&!P){const Ke=fl(E.left,0),oe=fl(E.right,0),he=fl(E.top,0),Ie=fl(E.bottom,0);C?ue=D-2*(Ke!==0||oe!==0?Ke+oe:fl(E.left,E.right)):ye=k-2*(he!==0||Ie!==0?he+Ie:fl(E.top,E.bottom))}await g({...t,availableWidth:ue,availableHeight:ye});const Te=await h.getDimensions(o.floating);return D!==Te.width||k!==Te.height?{reset:{rects:!0}}:{}}}};function Wv(){return typeof window<"u"}function Tp(e){return y3(e)?(e.nodeName||"").toLowerCase():"#document"}function yl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Sc(e){var t;return(t=(y3(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function y3(e){return Wv()?e instanceof Node||e instanceof yl(e).Node:!1}function UA(e){return Wv()?e instanceof Element||e instanceof yl(e).Element:!1}function Cc(e){return Wv()?e instanceof HTMLElement||e instanceof yl(e).HTMLElement:!1}function zS(e){return!Wv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof yl(e).ShadowRoot}const B8=new Set(["inline","contents"]);function Tg(e){const{overflow:t,overflowX:r,overflowY:i,display:A}=QA(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!B8.has(A)}const C8=new Set(["table","td","th"]);function S8(e){return C8.has(Tp(e))}const E8=[":popover-open",":modal"];function Zv(e){return E8.some(t=>{try{return e.matches(t)}catch{return!1}})}const F8=["transform","translate","scale","rotate","perspective"],I8=["transform","translate","scale","rotate","perspective","filter"],T8=["paint","layout","strict","content"];function G2(e){const t=$2(),r=UA(e)?QA(e):e;return F8.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||I8.some(i=>(r.willChange||"").includes(i))||T8.some(i=>(r.contain||"").includes(i))}function P8(e){let t=kh(e);for(;Cc(t)&&!wp(t);){if(G2(t))return t;if(Zv(t))return null;t=kh(t)}return null}function $2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const L8=new Set(["html","body","#document"]);function wp(e){return L8.has(Tp(e))}function QA(e){return yl(e).getComputedStyle(e)}function Xv(e){return UA(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function kh(e){if(Tp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||zS(e)&&e.host||Sc(e);return zS(t)?t.host:t}function v3(e){const t=kh(e);return wp(t)?e.ownerDocument?e.ownerDocument.body:e.body:Cc(t)&&Tg(t)?t:v3(t)}function ug(e,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);const A=v3(e),u=A===((i=e.ownerDocument)==null?void 0:i.body),h=yl(A);if(u){const o=Nx(h);return t.concat(h,h.visualViewport||[],Tg(A)?A:[],o&&r?ug(o):[])}return t.concat(A,ug(A,[],r))}function Nx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _3(e){const t=QA(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const A=Cc(e),u=A?e.offsetWidth:r,h=A?e.offsetHeight:i,o=Yy(r)!==u||Yy(i)!==h;return o&&(r=u,i=h),{width:r,height:i,$:o}}function q2(e){return UA(e)?e:e.contextElement}function Wf(e){const t=q2(e);if(!Cc(t))return xc(1);const r=t.getBoundingClientRect(),{width:i,height:A,$:u}=_3(t);let h=(u?Yy(r.width):r.width)/i,o=(u?Yy(r.height):r.height)/A;return(!h||!Number.isFinite(h))&&(h=1),(!o||!Number.isFinite(o))&&(o=1),{x:h,y:o}}const M8=xc(0);function w3(e){const t=yl(e);return!$2()||!t.visualViewport?M8:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function k8(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==yl(e)?!1:t}function Ud(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r=!1);const A=e.getBoundingClientRect(),u=q2(e);let h=xc(1);t&&(i?UA(i)&&(h=Wf(i)):h=Wf(e));const o=k8(u,r,i)?w3(u):xc(0);let g=(A.left+o.x)/h.x,x=(A.top+o.y)/h.y,E=A.width/h.x,F=A.height/h.y;if(u){const P=yl(u),C=i&&UA(i)?yl(i):i;let D=P,k=Nx(D);for(;k&&i&&C!==D;){const j=Wf(k),U=k.getBoundingClientRect(),N=QA(k),K=U.left+(k.clientLeft+parseFloat(N.paddingLeft))*j.x,ee=U.top+(k.clientTop+parseFloat(N.paddingTop))*j.y;g*=j.x,x*=j.y,E*=j.x,F*=j.y,g+=K,x+=ee,D=yl(k),k=Nx(D)}}return ev({width:E,height:F,x:g,y:x})}function W2(e,t){const r=Xv(e).scrollLeft;return t?t.left+r:Ud(Sc(e)).left+r}function x3(e,t,r){r===void 0&&(r=!1);const i=e.getBoundingClientRect(),A=i.left+t.scrollLeft-(r?0:W2(e,i)),u=i.top+t.scrollTop;return{x:A,y:u}}function U8(e){let{elements:t,rect:r,offsetParent:i,strategy:A}=e;const u=A==="fixed",h=Sc(i),o=t?Zv(t.floating):!1;if(i===h||o&&u)return r;let g={scrollLeft:0,scrollTop:0},x=xc(1);const E=xc(0),F=Cc(i);if((F||!F&&!u)&&((Tp(i)!=="body"||Tg(h))&&(g=Xv(i)),Cc(i))){const C=Ud(i);x=Wf(i),E.x=C.x+i.clientLeft,E.y=C.y+i.clientTop}const P=h&&!F&&!u?x3(h,g,!0):xc(0);return{width:r.width*x.x,height:r.height*x.y,x:r.x*x.x-g.scrollLeft*x.x+E.x+P.x,y:r.y*x.y-g.scrollTop*x.y+E.y+P.y}}function Q8(e){return Array.from(e.getClientRects())}function R8(e){const t=Sc(e),r=Xv(e),i=e.ownerDocument.body,A=fl(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),u=fl(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let h=-r.scrollLeft+W2(e);const o=-r.scrollTop;return QA(i).direction==="rtl"&&(h+=fl(t.clientWidth,i.clientWidth)-A),{width:A,height:u,x:h,y:o}}function N8(e,t){const r=yl(e),i=Sc(e),A=r.visualViewport;let u=i.clientWidth,h=i.clientHeight,o=0,g=0;if(A){u=A.width,h=A.height;const x=$2();(!x||x&&t==="fixed")&&(o=A.offsetLeft,g=A.offsetTop)}return{width:u,height:h,x:o,y:g}}const D8=new Set(["absolute","fixed"]);function O8(e,t){const r=Ud(e,!0,t==="fixed"),i=r.top+e.clientTop,A=r.left+e.clientLeft,u=Cc(e)?Wf(e):xc(1),h=e.clientWidth*u.x,o=e.clientHeight*u.y,g=A*u.x,x=i*u.y;return{width:h,height:o,x:g,y:x}}function HS(e,t,r){let i;if(t==="viewport")i=N8(e,r);else if(t==="document")i=R8(Sc(e));else if(UA(t))i=O8(t,r);else{const A=w3(e);i={x:t.x-A.x,y:t.y-A.y,width:t.width,height:t.height}}return ev(i)}function b3(e,t){const r=kh(e);return r===t||!UA(r)||wp(r)?!1:QA(r).position==="fixed"||b3(r,t)}function z8(e,t){const r=t.get(e);if(r)return r;let i=ug(e,[],!1).filter(o=>UA(o)&&Tp(o)!=="body"),A=null;const u=QA(e).position==="fixed";let h=u?kh(e):e;for(;UA(h)&&!wp(h);){const o=QA(h),g=G2(h);!g&&o.position==="fixed"&&(A=null),(u?!g&&!A:!g&&o.position==="static"&&!!A&&D8.has(A.position)||Tg(h)&&!g&&b3(e,h))?i=i.filter(E=>E!==h):A=o,h=kh(h)}return t.set(e,i),i}function H8(e){let{element:t,boundary:r,rootBoundary:i,strategy:A}=e;const h=[...r==="clippingAncestors"?Zv(t)?[]:z8(t,this._c):[].concat(r),i],o=h[0],g=h.reduce((x,E)=>{const F=HS(t,E,A);return x.top=fl(F.top,x.top),x.right=Mh(F.right,x.right),x.bottom=Mh(F.bottom,x.bottom),x.left=fl(F.left,x.left),x},HS(t,o,A));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function j8(e){const{width:t,height:r}=_3(e);return{width:t,height:r}}function V8(e,t,r){const i=Cc(t),A=Sc(t),u=r==="fixed",h=Ud(e,!0,u,t);let o={scrollLeft:0,scrollTop:0};const g=xc(0);function x(){g.x=W2(A)}if(i||!i&&!u)if((Tp(t)!=="body"||Tg(A))&&(o=Xv(t)),i){const C=Ud(t,!0,u,t);g.x=C.x+t.clientLeft,g.y=C.y+t.clientTop}else A&&x();u&&!i&&A&&x();const E=A&&!i&&!u?x3(A,o):xc(0),F=h.left+o.scrollLeft-g.x-E.x,P=h.top+o.scrollTop-g.y-E.y;return{x:F,y:P,width:h.width,height:h.height}}function G_(e){return QA(e).position==="static"}function jS(e,t){if(!Cc(e)||QA(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Sc(e)===r&&(r=r.ownerDocument.body),r}function B3(e,t){const r=yl(e);if(Zv(e))return r;if(!Cc(e)){let A=kh(e);for(;A&&!wp(A);){if(UA(A)&&!G_(A))return A;A=kh(A)}return r}let i=jS(e,t);for(;i&&S8(i)&&G_(i);)i=jS(i,t);return i&&wp(i)&&G_(i)&&!G2(i)?r:i||P8(e)||r}const K8=async function(e){const t=this.getOffsetParent||B3,r=this.getDimensions,i=await r(e.floating);return{reference:V8(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function G8(e){return QA(e).direction==="rtl"}const $8={convertOffsetParentRelativeRectToViewportRelativeRect:U8,getDocumentElement:Sc,getClippingRect:H8,getOffsetParent:B3,getElementRects:K8,getClientRects:Q8,getDimensions:j8,getScale:Wf,isElement:UA,isRTL:G8};function C3(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function q8(e,t){let r=null,i;const A=Sc(e);function u(){var o;clearTimeout(i),(o=r)==null||o.disconnect(),r=null}function h(o,g){o===void 0&&(o=!1),g===void 0&&(g=1),u();const x=e.getBoundingClientRect(),{left:E,top:F,width:P,height:C}=x;if(o||t(),!P||!C)return;const D=_0(F),k=_0(A.clientWidth-(E+P)),j=_0(A.clientHeight-(F+C)),U=_0(E),K={rootMargin:-D+"px "+-k+"px "+-j+"px "+-U+"px",threshold:fl(0,Mh(1,g))||1};let ee=!0;function se(pe){const ye=pe[0].intersectionRatio;if(ye!==g){if(!ee)return h();ye?h(!1,ye):i=setTimeout(()=>{h(!1,1e-7)},1e3)}ye===1&&!C3(x,e.getBoundingClientRect())&&h(),ee=!1}try{r=new IntersectionObserver(se,{...K,root:A.ownerDocument})}catch{r=new IntersectionObserver(se,K)}r.observe(e)}return h(!0),u}function W8(e,t,r,i){i===void 0&&(i={});const{ancestorScroll:A=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:g=!1}=i,x=q2(e),E=A||u?[...x?ug(x):[],...ug(t)]:[];E.forEach(U=>{A&&U.addEventListener("scroll",r,{passive:!0}),u&&U.addEventListener("resize",r)});const F=x&&o?q8(x,r):null;let P=-1,C=null;h&&(C=new ResizeObserver(U=>{let[N]=U;N&&N.target===x&&C&&(C.unobserve(t),cancelAnimationFrame(P),P=requestAnimationFrame(()=>{var K;(K=C)==null||K.observe(t)})),r()}),x&&!g&&C.observe(x),C.observe(t));let D,k=g?Ud(e):null;g&&j();function j(){const U=Ud(e);k&&!C3(k,U)&&r(),k=U,D=requestAnimationFrame(j)}return r(),()=>{var U;E.forEach(N=>{A&&N.removeEventListener("scroll",r),u&&N.removeEventListener("resize",r)}),F==null||F(),(U=C)==null||U.disconnect(),C=null,g&&cancelAnimationFrame(D)}}const Z8=_8,X8=w8,Y8=g8,J8=b8,eO=y8,VS=m8,tO=x8,rO=(e,t,r)=>{const i=new Map,A={platform:$8,...r},u={...A.platform,_c:i};return p8(e,t,{...A,platform:u})};var nO=typeof document<"u",iO=function(){},my=nO?te.useLayoutEffect:iO;function tv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,i,A;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(i=r;i--!==0;)if(!tv(e[i],t[i]))return!1;return!0}if(A=Object.keys(e),r=A.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(t,A[i]))return!1;for(i=r;i--!==0;){const u=A[i];if(!(u==="_owner"&&e.$$typeof)&&!tv(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function S3(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function KS(e,t){const r=S3(e);return Math.round(t*r)/r}function $_(e){const t=te.useRef(e);return my(()=>{t.current=e}),t}function sO(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:A,elements:{reference:u,floating:h}={},transform:o=!0,whileElementsMounted:g,open:x}=e,[E,F]=te.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[P,C]=te.useState(i);tv(P,i)||C(i);const[D,k]=te.useState(null),[j,U]=te.useState(null),N=te.useCallback(Le=>{Le!==pe.current&&(pe.current=Le,k(Le))},[]),K=te.useCallback(Le=>{Le!==ye.current&&(ye.current=Le,U(Le))},[]),ee=u||D,se=h||j,pe=te.useRef(null),ye=te.useRef(null),ue=te.useRef(E),Te=g!=null,Ke=$_(g),oe=$_(A),he=$_(x),Ie=te.useCallback(()=>{if(!pe.current||!ye.current)return;const Le={placement:t,strategy:r,middleware:P};oe.current&&(Le.platform=oe.current),rO(pe.current,ye.current,Le).then(ze=>{const it={...ze,isPositioned:he.current!==!1};be.current&&!tv(ue.current,it)&&(ue.current=it,Od.flushSync(()=>{F(it)}))})},[P,t,r,oe,he]);my(()=>{x===!1&&ue.current.isPositioned&&(ue.current.isPositioned=!1,F(Le=>({...Le,isPositioned:!1})))},[x]);const be=te.useRef(!1);my(()=>(be.current=!0,()=>{be.current=!1}),[]),my(()=>{if(ee&&(pe.current=ee),se&&(ye.current=se),ee&&se){if(Ke.current)return Ke.current(ee,se,Ie);Ie()}},[ee,se,Ie,Ke,Te]);const ct=te.useMemo(()=>({reference:pe,floating:ye,setReference:N,setFloating:K}),[N,K]),Xe=te.useMemo(()=>({reference:ee,floating:se}),[ee,se]),lt=te.useMemo(()=>{const Le={position:r,left:0,top:0};if(!Xe.floating)return Le;const ze=KS(Xe.floating,E.x),it=KS(Xe.floating,E.y);return o?{...Le,transform:"translate("+ze+"px, "+it+"px)",...S3(Xe.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ze,top:it}},[r,o,Xe.floating,E.x,E.y]);return te.useMemo(()=>({...E,update:Ie,refs:ct,elements:Xe,floatingStyles:lt}),[E,Ie,ct,Xe,lt])}const oO=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:i,padding:A}=typeof e=="function"?e(r):e;return i&&t(i)?i.current!=null?VS({element:i.current,padding:A}).fn(r):{}:i?VS({element:i,padding:A}).fn(r):{}}}},aO=(e,t)=>({...Z8(e),options:[e,t]}),lO=(e,t)=>({...X8(e),options:[e,t]}),AO=(e,t)=>({...tO(e),options:[e,t]}),cO=(e,t)=>({...Y8(e),options:[e,t]}),uO=(e,t)=>({...J8(e),options:[e,t]}),hO=(e,t)=>({...eO(e),options:[e,t]}),dO=(e,t)=>({...oO(e),options:[e,t]});var fO="Arrow",E3=te.forwardRef((e,t)=>{const{children:r,width:i=10,height:A=5,...u}=e;return Z.jsx(bn.svg,{...u,ref:t,width:i,height:A,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:Z.jsx("polygon",{points:"0,0 30,0 15,10"})})});E3.displayName=fO;var pO=E3;function Z2(e){const[t,r]=te.useState(void 0);return bo(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(A=>{if(!Array.isArray(A)||!A.length)return;const u=A[0];let h,o;if("borderBoxSize"in u){const g=u.borderBoxSize,x=Array.isArray(g)?g[0]:g;h=x.inlineSize,o=x.blockSize}else h=e.offsetWidth,o=e.offsetHeight;r({width:h,height:o})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else r(void 0)},[e]),t}var X2="Popper",[F3,Yv]=xu(X2),[mO,I3]=F3(X2),T3=e=>{const{__scopePopper:t,children:r}=e,[i,A]=te.useState(null);return Z.jsx(mO,{scope:t,anchor:i,onAnchorChange:A,children:r})};T3.displayName=X2;var P3="PopperAnchor",L3=te.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:i,...A}=e,u=I3(P3,r),h=te.useRef(null),o=li(t,h);return te.useEffect(()=>{u.onAnchorChange((i==null?void 0:i.current)||h.current)}),i?null:Z.jsx(bn.div,{...A,ref:o})});L3.displayName=P3;var Y2="PopperContent",[gO,yO]=F3(Y2),M3=te.forwardRef((e,t)=>{var Ze,pt,dt,Qt,Mt,$t;const{__scopePopper:r,side:i="bottom",sideOffset:A=0,align:u="center",alignOffset:h=0,arrowPadding:o=0,avoidCollisions:g=!0,collisionBoundary:x=[],collisionPadding:E=0,sticky:F="partial",hideWhenDetached:P=!1,updatePositionStrategy:C="optimized",onPlaced:D,...k}=e,j=I3(Y2,r),[U,N]=te.useState(null),K=li(t,jt=>N(jt)),[ee,se]=te.useState(null),pe=Z2(ee),ye=(pe==null?void 0:pe.width)??0,ue=(pe==null?void 0:pe.height)??0,Te=i+(u!=="center"?"-"+u:""),Ke=typeof E=="number"?E:{top:0,right:0,bottom:0,left:0,...E},oe=Array.isArray(x)?x:[x],he=oe.length>0,Ie={padding:Ke,boundary:oe.filter(_O),altBoundary:he},{refs:be,floatingStyles:ct,placement:Xe,isPositioned:lt,middlewareData:Le}=sO({strategy:"fixed",placement:Te,whileElementsMounted:(...jt)=>W8(...jt,{animationFrame:C==="always"}),elements:{reference:j.anchor},middleware:[aO({mainAxis:A+ue,alignmentAxis:h}),g&&lO({mainAxis:!0,crossAxis:!1,limiter:F==="partial"?AO():void 0,...Ie}),g&&cO({...Ie}),uO({...Ie,apply:({elements:jt,rects:vr,availableWidth:It,availableHeight:Ge})=>{const{width:Cr,height:pr}=vr.reference,Kt=jt.floating.style;Kt.setProperty("--radix-popper-available-width",`${It}px`),Kt.setProperty("--radix-popper-available-height",`${Ge}px`),Kt.setProperty("--radix-popper-anchor-width",`${Cr}px`),Kt.setProperty("--radix-popper-anchor-height",`${pr}px`)}}),ee&&dO({element:ee,padding:o}),wO({arrowWidth:ye,arrowHeight:ue}),P&&hO({strategy:"referenceHidden",...Ie})]}),[ze,it]=Q3(Xe),Lt=Gl(D);bo(()=>{lt&&(Lt==null||Lt())},[lt,Lt]);const ne=(Ze=Le.arrow)==null?void 0:Ze.x,Be=(pt=Le.arrow)==null?void 0:pt.y,Pe=((dt=Le.arrow)==null?void 0:dt.centerOffset)!==0,[$e,nt]=te.useState();return bo(()=>{U&&nt(window.getComputedStyle(U).zIndex)},[U]),Z.jsx("div",{ref:be.setFloating,"data-radix-popper-content-wrapper":"",style:{...ct,transform:lt?ct.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[(Qt=Le.transformOrigin)==null?void 0:Qt.x,(Mt=Le.transformOrigin)==null?void 0:Mt.y].join(" "),...(($t=Le.hide)==null?void 0:$t.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Z.jsx(gO,{scope:r,placedSide:ze,onArrowChange:se,arrowX:ne,arrowY:Be,shouldHideArrow:Pe,children:Z.jsx(bn.div,{"data-side":ze,"data-align":it,...k,ref:K,style:{...k.style,animation:lt?void 0:"none"}})})})});M3.displayName=Y2;var k3="PopperArrow",vO={top:"bottom",right:"left",bottom:"top",left:"right"},U3=te.forwardRef(function(t,r){const{__scopePopper:i,...A}=t,u=yO(k3,i),h=vO[u.placedSide];return Z.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:Z.jsx(pO,{...A,ref:r,style:{...A.style,display:"block"}})})});U3.displayName=k3;function _O(e){return e!==null}var wO=e=>({name:"transformOrigin",options:e,fn(t){var j,U,N;const{placement:r,rects:i,middlewareData:A}=t,h=((j=A.arrow)==null?void 0:j.centerOffset)!==0,o=h?0:e.arrowWidth,g=h?0:e.arrowHeight,[x,E]=Q3(r),F={start:"0%",center:"50%",end:"100%"}[E],P=(((U=A.arrow)==null?void 0:U.x)??0)+o/2,C=(((N=A.arrow)==null?void 0:N.y)??0)+g/2;let D="",k="";return x==="bottom"?(D=h?F:`${P}px`,k=`${-g}px`):x==="top"?(D=h?F:`${P}px`,k=`${i.floating.height+g}px`):x==="right"?(D=`${-g}px`,k=h?F:`${C}px`):x==="left"&&(D=`${i.floating.width+g}px`,k=h?F:`${C}px`),{data:{x:D,y:k}}}});function Q3(e){const[t,r="center"]=e.split("-");return[t,r]}var xO=T3,R3=L3,N3=M3,D3=U3,[Jv,cZ]=xu("Tooltip",[Yv]),J2=Yv(),O3="TooltipProvider",bO=700,GS="tooltip.open",[BO,z3]=Jv(O3),H3=e=>{const{__scopeTooltip:t,delayDuration:r=bO,skipDelayDuration:i=300,disableHoverableContent:A=!1,children:u}=e,h=te.useRef(!0),o=te.useRef(!1),g=te.useRef(0);return te.useEffect(()=>{const x=g.current;return()=>window.clearTimeout(x)},[]),Z.jsx(BO,{scope:t,isOpenDelayedRef:h,delayDuration:r,onOpen:te.useCallback(()=>{window.clearTimeout(g.current),h.current=!1},[]),onClose:te.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>h.current=!0,i)},[i]),isPointerInTransitRef:o,onPointerInTransitChange:te.useCallback(x=>{o.current=x},[]),disableHoverableContent:A,children:u})};H3.displayName=O3;var j3="Tooltip",[uZ,e1]=Jv(j3),Dx="TooltipTrigger",CO=te.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,A=e1(Dx,r),u=z3(Dx,r),h=J2(r),o=te.useRef(null),g=li(t,o,A.onTriggerChange),x=te.useRef(!1),E=te.useRef(!1),F=te.useCallback(()=>x.current=!1,[]);return te.useEffect(()=>()=>document.removeEventListener("pointerup",F),[F]),Z.jsx(R3,{asChild:!0,...h,children:Z.jsx(bn.button,{"aria-describedby":A.open?A.contentId:void 0,"data-state":A.stateAttribute,...i,ref:g,onPointerMove:on(e.onPointerMove,P=>{P.pointerType!=="touch"&&!E.current&&!u.isPointerInTransitRef.current&&(A.onTriggerEnter(),E.current=!0)}),onPointerLeave:on(e.onPointerLeave,()=>{A.onTriggerLeave(),E.current=!1}),onPointerDown:on(e.onPointerDown,()=>{A.open&&A.onClose(),x.current=!0,document.addEventListener("pointerup",F,{once:!0})}),onFocus:on(e.onFocus,()=>{x.current||A.onOpen()}),onBlur:on(e.onBlur,A.onClose),onClick:on(e.onClick,A.onClose)})})});CO.displayName=Dx;var SO="TooltipPortal",[hZ,EO]=Jv(SO,{forceMount:void 0}),xp="TooltipContent",V3=te.forwardRef((e,t)=>{const r=EO(xp,e.__scopeTooltip),{forceMount:i=r.forceMount,side:A="top",...u}=e,h=e1(xp,e.__scopeTooltip);return Z.jsx(Fg,{present:i||h.open,children:h.disableHoverableContent?Z.jsx(K3,{side:A,...u,ref:t}):Z.jsx(FO,{side:A,...u,ref:t})})}),FO=te.forwardRef((e,t)=>{const r=e1(xp,e.__scopeTooltip),i=z3(xp,e.__scopeTooltip),A=te.useRef(null),u=li(t,A),[h,o]=te.useState(null),{trigger:g,onClose:x}=r,E=A.current,{onPointerInTransitChange:F}=i,P=te.useCallback(()=>{o(null),F(!1)},[F]),C=te.useCallback((D,k)=>{const j=D.currentTarget,U={x:D.clientX,y:D.clientY},N=MO(U,j.getBoundingClientRect()),K=kO(U,N),ee=UO(k.getBoundingClientRect()),se=RO([...K,...ee]);o(se),F(!0)},[F]);return te.useEffect(()=>()=>P(),[P]),te.useEffect(()=>{if(g&&E){const D=j=>C(j,E),k=j=>C(j,g);return g.addEventListener("pointerleave",D),E.addEventListener("pointerleave",k),()=>{g.removeEventListener("pointerleave",D),E.removeEventListener("pointerleave",k)}}},[g,E,C,P]),te.useEffect(()=>{if(h){const D=k=>{const j=k.target,U={x:k.clientX,y:k.clientY},N=(g==null?void 0:g.contains(j))||(E==null?void 0:E.contains(j)),K=!QO(U,h);N?P():K&&(P(),x())};return document.addEventListener("pointermove",D),()=>document.removeEventListener("pointermove",D)}},[g,E,h,x,P]),Z.jsx(K3,{...e,ref:u})}),[IO,TO]=Jv(j3,{isInside:!1}),PO=OR("TooltipContent"),K3=te.forwardRef((e,t)=>{const{__scopeTooltip:r,children:i,"aria-label":A,onEscapeKeyDown:u,onPointerDownOutside:h,...o}=e,g=e1(xp,r),x=J2(r),{onClose:E}=g;return te.useEffect(()=>(document.addEventListener(GS,E),()=>document.removeEventListener(GS,E)),[E]),te.useEffect(()=>{if(g.trigger){const F=P=>{const C=P.target;C!=null&&C.contains(g.trigger)&&E()};return window.addEventListener("scroll",F,{capture:!0}),()=>window.removeEventListener("scroll",F,{capture:!0})}},[g.trigger,E]),Z.jsx(jv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:F=>F.preventDefault(),onDismiss:E,children:Z.jsxs(N3,{"data-state":g.stateAttribute,...x,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Z.jsx(PO,{children:i}),Z.jsx(IO,{scope:r,isInside:!0,children:Z.jsx(lN,{id:g.contentId,role:"tooltip",children:A||i})})]})})});V3.displayName=xp;var G3="TooltipArrow",LO=te.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,A=J2(r);return TO(G3,r).isInside?null:Z.jsx(D3,{...A,...i,ref:t})});LO.displayName=G3;function MO(e,t){const r=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),A=Math.abs(t.right-e.x),u=Math.abs(t.left-e.x);switch(Math.min(r,i,A,u)){case u:return"left";case A:return"right";case r:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function kO(e,t,r=5){const i=[];switch(t){case"top":i.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":i.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":i.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":i.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return i}function UO(e){const{top:t,right:r,bottom:i,left:A}=e;return[{x:A,y:t},{x:r,y:t},{x:r,y:i},{x:A,y:i}]}function QO(e,t){const{x:r,y:i}=e;let A=!1;for(let u=0,h=t.length-1;u<t.length;h=u++){const o=t[u],g=t[h],x=o.x,E=o.y,F=g.x,P=g.y;E>i!=P>i&&r<(F-x)*(i-E)/(P-E)+x&&(A=!A)}return A}function RO(e){const t=e.slice();return t.sort((r,i)=>r.x<i.x?-1:r.x>i.x?1:r.y<i.y?-1:r.y>i.y?1:0),NO(t)}function NO(e){if(e.length<=1)return e.slice();const t=[];for(let i=0;i<e.length;i++){const A=e[i];for(;t.length>=2;){const u=t[t.length-1],h=t[t.length-2];if((u.x-h.x)*(A.y-h.y)>=(u.y-h.y)*(A.x-h.x))t.pop();else break}t.push(A)}t.pop();const r=[];for(let i=e.length-1;i>=0;i--){const A=e[i];for(;r.length>=2;){const u=r[r.length-1],h=r[r.length-2];if((u.x-h.x)*(A.y-h.y)>=(u.y-h.y)*(A.x-h.x))r.pop();else break}r.push(A)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var DO=H3,$3=V3;const OO=DO,zO=te.forwardRef(({className:e,sideOffset:t=4,...r},i)=>Z.jsx($3,{ref:i,sideOffset:t,className:Nn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));zO.displayName=$3.displayName;var t1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},r1=typeof window>"u"||"Deno"in globalThis;function CA(){}function HO(e,t){return typeof e=="function"?e(t):e}function jO(e){return typeof e=="number"&&e>=0&&e!==1/0}function VO(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ox(e,t){return typeof e=="function"?e(t):e}function KO(e,t){return typeof e=="function"?e(t):e}function $S(e,t){const{type:r="all",exact:i,fetchStatus:A,predicate:u,queryKey:h,stale:o}=e;if(h){if(i){if(t.queryHash!==eB(h,t.options))return!1}else if(!dg(t.queryKey,h))return!1}if(r!=="all"){const g=t.isActive();if(r==="active"&&!g||r==="inactive"&&g)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||A&&A!==t.state.fetchStatus||u&&!u(t))}function qS(e,t){const{exact:r,status:i,predicate:A,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(hg(t.options.mutationKey)!==hg(u))return!1}else if(!dg(t.options.mutationKey,u))return!1}return!(i&&t.state.status!==i||A&&!A(t))}function eB(e,t){return((t==null?void 0:t.queryKeyHashFn)||hg)(e)}function hg(e){return JSON.stringify(e,(t,r)=>zx(r)?Object.keys(r).sort().reduce((i,A)=>(i[A]=r[A],i),{}):r)}function dg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>dg(e[r],t[r])):!1}function q3(e,t){if(e===t)return e;const r=WS(e)&&WS(t);if(r||zx(e)&&zx(t)){const i=r?e:Object.keys(e),A=i.length,u=r?t:Object.keys(t),h=u.length,o=r?[]:{},g=new Set(i);let x=0;for(let E=0;E<h;E++){const F=r?E:u[E];(!r&&g.has(F)||r)&&e[F]===void 0&&t[F]===void 0?(o[F]=void 0,x++):(o[F]=q3(e[F],t[F]),o[F]===e[F]&&e[F]!==void 0&&x++)}return A===h&&x===A?e:o}return t}function WS(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function zx(e){if(!ZS(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!ZS(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ZS(e){return Object.prototype.toString.call(e)==="[object Object]"}function GO(e){return new Promise(t=>{setTimeout(t,e)})}function $O(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?q3(e,t):t}function qO(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function WO(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var tB=Symbol();function W3(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===tB?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var yd,oh,sp,sF,ZO=(sF=class extends t1{constructor(){super();zn(this,yd);zn(this,oh);zn(this,sp);dn(this,sp,t=>{if(!r1&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Gt(this,oh)||this.setEventListener(Gt(this,sp))}onUnsubscribe(){var t;this.hasListeners()||((t=Gt(this,oh))==null||t.call(this),dn(this,oh,void 0))}setEventListener(t){var r;dn(this,sp,t),(r=Gt(this,oh))==null||r.call(this),dn(this,oh,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){Gt(this,yd)!==t&&(dn(this,yd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Gt(this,yd)=="boolean"?Gt(this,yd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},yd=new WeakMap,oh=new WeakMap,sp=new WeakMap,sF),Z3=new ZO,op,ah,ap,oF,XO=(oF=class extends t1{constructor(){super();zn(this,op,!0);zn(this,ah);zn(this,ap);dn(this,ap,t=>{if(!r1&&window.addEventListener){const r=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){Gt(this,ah)||this.setEventListener(Gt(this,ap))}onUnsubscribe(){var t;this.hasListeners()||((t=Gt(this,ah))==null||t.call(this),dn(this,ah,void 0))}setEventListener(t){var r;dn(this,ap,t),(r=Gt(this,ah))==null||r.call(this),dn(this,ah,t(this.setOnline.bind(this)))}setOnline(t){Gt(this,op)!==t&&(dn(this,op,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return Gt(this,op)}},op=new WeakMap,ah=new WeakMap,ap=new WeakMap,oF),rv=new XO;function YO(){let e,t;const r=new Promise((A,u)=>{e=A,t=u});r.status="pending",r.catch(()=>{});function i(A){Object.assign(r,A),delete r.resolve,delete r.reject}return r.resolve=A=>{i({status:"fulfilled",value:A}),e(A)},r.reject=A=>{i({status:"rejected",reason:A}),t(A)},r}function JO(e){return Math.min(1e3*2**e,3e4)}function X3(e){return(e??"online")==="online"?rv.isOnline():!0}var Y3=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function q_(e){return e instanceof Y3}function J3(e){let t=!1,r=0,i=!1,A;const u=YO(),h=k=>{var j;i||(P(new Y3(k)),(j=e.abort)==null||j.call(e))},o=()=>{t=!0},g=()=>{t=!1},x=()=>Z3.isFocused()&&(e.networkMode==="always"||rv.isOnline())&&e.canRun(),E=()=>X3(e.networkMode)&&e.canRun(),F=k=>{var j;i||(i=!0,(j=e.onSuccess)==null||j.call(e,k),A==null||A(),u.resolve(k))},P=k=>{var j;i||(i=!0,(j=e.onError)==null||j.call(e,k),A==null||A(),u.reject(k))},C=()=>new Promise(k=>{var j;A=U=>{(i||x())&&k(U)},(j=e.onPause)==null||j.call(e)}).then(()=>{var k;A=void 0,i||(k=e.onContinue)==null||k.call(e)}),D=()=>{if(i)return;let k;const j=r===0?e.initialPromise:void 0;try{k=j??e.fn()}catch(U){k=Promise.reject(U)}Promise.resolve(k).then(F).catch(U=>{var pe;if(i)return;const N=e.retry??(r1?0:3),K=e.retryDelay??JO,ee=typeof K=="function"?K(r,U):K,se=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,U);if(t||!se){P(U);return}r++,(pe=e.onFail)==null||pe.call(e,r,U),GO(ee).then(()=>x()?void 0:C()).then(()=>{t?P(U):D()})})};return{promise:u,cancel:h,continue:()=>(A==null||A(),u),cancelRetry:o,continueRetry:g,canStart:E,start:()=>(E()?D():C().then(D),u)}}var ez=e=>setTimeout(e,0);function tz(){let e=[],t=0,r=o=>{o()},i=o=>{o()},A=ez;const u=o=>{t?e.push(o):A(()=>{r(o)})},h=()=>{const o=e;e=[],o.length&&A(()=>{i(()=>{o.forEach(g=>{r(g)})})})};return{batch:o=>{let g;t++;try{g=o()}finally{t--,t||h()}return g},batchCalls:o=>(...g)=>{u(()=>{o(...g)})},schedule:u,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{i=o},setScheduler:o=>{A=o}}}var pa=tz(),vd,aF,eP=(aF=class{constructor(){zn(this,vd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jO(this.gcTime)&&dn(this,vd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(r1?1/0:5*60*1e3))}clearGcTimeout(){Gt(this,vd)&&(clearTimeout(Gt(this,vd)),dn(this,vd,void 0))}},vd=new WeakMap,aF),lp,_d,Ql,wd,Go,wg,xd,EA,ou,lF,rz=(lF=class extends eP{constructor(t){super();zn(this,EA);zn(this,lp);zn(this,_d);zn(this,Ql);zn(this,wd);zn(this,Go);zn(this,wg);zn(this,xd);dn(this,xd,!1),dn(this,wg,t.defaultOptions),this.setOptions(t.options),this.observers=[],dn(this,wd,t.client),dn(this,Ql,Gt(this,wd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,dn(this,lp,iz(this.options)),this.state=t.state??Gt(this,lp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Gt(this,Go))==null?void 0:t.promise}setOptions(t){this.options={...Gt(this,wg),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Gt(this,Ql).remove(this)}setData(t,r){const i=$O(this.state.data,t,this.options);return Do(this,EA,ou).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){Do(this,EA,ou).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,A;const r=(i=Gt(this,Go))==null?void 0:i.promise;return(A=Gt(this,Go))==null||A.cancel(t),r?r.then(CA).catch(CA):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Gt(this,lp))}isActive(){return this.observers.some(t=>KO(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tB||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ox(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!VO(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Gt(this,Go))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Gt(this,Go))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Gt(this,Ql).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Gt(this,Go)&&(Gt(this,xd)?Gt(this,Go).cancel({revert:!0}):Gt(this,Go).cancelRetry()),this.scheduleGc()),Gt(this,Ql).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Do(this,EA,ou).call(this,{type:"invalidate"})}fetch(t,r){var x,E,F;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Gt(this,Go))return Gt(this,Go).continueRetry(),Gt(this,Go).promise}if(t&&this.setOptions(t),!this.options.queryFn){const P=this.observers.find(C=>C.options.queryFn);P&&this.setOptions(P.options)}const i=new AbortController,A=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(dn(this,xd,!0),i.signal)})},u=()=>{const P=W3(this.options,r),D=(()=>{const k={client:Gt(this,wd),queryKey:this.queryKey,meta:this.meta};return A(k),k})();return dn(this,xd,!1),this.options.persister?this.options.persister(P,D,this):P(D)},o=(()=>{const P={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Gt(this,wd),state:this.state,fetchFn:u};return A(P),P})();(x=this.options.behavior)==null||x.onFetch(o,this),dn(this,_d,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((E=o.fetchOptions)==null?void 0:E.meta))&&Do(this,EA,ou).call(this,{type:"fetch",meta:(F=o.fetchOptions)==null?void 0:F.meta});const g=P=>{var C,D,k,j;q_(P)&&P.silent||Do(this,EA,ou).call(this,{type:"error",error:P}),q_(P)||((D=(C=Gt(this,Ql).config).onError)==null||D.call(C,P,this),(j=(k=Gt(this,Ql).config).onSettled)==null||j.call(k,this.state.data,P,this)),this.scheduleGc()};return dn(this,Go,J3({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:i.abort.bind(i),onSuccess:P=>{var C,D,k,j;if(P===void 0){g(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(P)}catch(U){g(U);return}(D=(C=Gt(this,Ql).config).onSuccess)==null||D.call(C,P,this),(j=(k=Gt(this,Ql).config).onSettled)==null||j.call(k,P,this.state.error,this),this.scheduleGc()},onError:g,onFail:(P,C)=>{Do(this,EA,ou).call(this,{type:"failed",failureCount:P,error:C})},onPause:()=>{Do(this,EA,ou).call(this,{type:"pause"})},onContinue:()=>{Do(this,EA,ou).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Gt(this,Go).start()}},lp=new WeakMap,_d=new WeakMap,Ql=new WeakMap,wd=new WeakMap,Go=new WeakMap,wg=new WeakMap,xd=new WeakMap,EA=new WeakSet,ou=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...nz(i.data,this.options),fetchMeta:t.meta??null};case"success":return dn(this,_d,void 0),{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const A=t.error;return q_(A)&&A.revert&&Gt(this,_d)?{...Gt(this,_d),fetchStatus:"idle"}:{...i,error:A,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:A,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),pa.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Gt(this,Ql).notify({query:this,type:"updated",action:t})})},lF);function nz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:X3(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function iz(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var dc,AF,sz=(AF=class extends t1{constructor(t={}){super();zn(this,dc);this.config=t,dn(this,dc,new Map)}build(t,r,i){const A=r.queryKey,u=r.queryHash??eB(A,r);let h=this.get(u);return h||(h=new rz({client:t,queryKey:A,queryHash:u,options:t.defaultQueryOptions(r),state:i,defaultOptions:t.getQueryDefaults(A)}),this.add(h)),h}add(t){Gt(this,dc).has(t.queryHash)||(Gt(this,dc).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Gt(this,dc).get(t.queryHash);r&&(t.destroy(),r===t&&Gt(this,dc).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){pa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Gt(this,dc).get(t)}getAll(){return[...Gt(this,dc).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(i=>$S(r,i))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(i=>$S(t,i)):r}notify(t){pa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){pa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){pa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},dc=new WeakMap,AF),fc,ha,bd,pc,Zu,cF,oz=(cF=class extends eP{constructor(t){super();zn(this,pc);zn(this,fc);zn(this,ha);zn(this,bd);this.mutationId=t.mutationId,dn(this,ha,t.mutationCache),dn(this,fc,[]),this.state=t.state||az(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Gt(this,fc).includes(t)||(Gt(this,fc).push(t),this.clearGcTimeout(),Gt(this,ha).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){dn(this,fc,Gt(this,fc).filter(r=>r!==t)),this.scheduleGc(),Gt(this,ha).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Gt(this,fc).length||(this.state.status==="pending"?this.scheduleGc():Gt(this,ha).remove(this))}continue(){var t;return((t=Gt(this,bd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var u,h,o,g,x,E,F,P,C,D,k,j,U,N,K,ee,se,pe,ye,ue;const r=()=>{Do(this,pc,Zu).call(this,{type:"continue"})};dn(this,bd,J3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(Te,Ke)=>{Do(this,pc,Zu).call(this,{type:"failed",failureCount:Te,error:Ke})},onPause:()=>{Do(this,pc,Zu).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Gt(this,ha).canRun(this)}));const i=this.state.status==="pending",A=!Gt(this,bd).canStart();try{if(i)r();else{Do(this,pc,Zu).call(this,{type:"pending",variables:t,isPaused:A}),await((h=(u=Gt(this,ha).config).onMutate)==null?void 0:h.call(u,t,this));const Ke=await((g=(o=this.options).onMutate)==null?void 0:g.call(o,t));Ke!==this.state.context&&Do(this,pc,Zu).call(this,{type:"pending",context:Ke,variables:t,isPaused:A})}const Te=await Gt(this,bd).start();return await((E=(x=Gt(this,ha).config).onSuccess)==null?void 0:E.call(x,Te,t,this.state.context,this)),await((P=(F=this.options).onSuccess)==null?void 0:P.call(F,Te,t,this.state.context)),await((D=(C=Gt(this,ha).config).onSettled)==null?void 0:D.call(C,Te,null,this.state.variables,this.state.context,this)),await((j=(k=this.options).onSettled)==null?void 0:j.call(k,Te,null,t,this.state.context)),Do(this,pc,Zu).call(this,{type:"success",data:Te}),Te}catch(Te){try{throw await((N=(U=Gt(this,ha).config).onError)==null?void 0:N.call(U,Te,t,this.state.context,this)),await((ee=(K=this.options).onError)==null?void 0:ee.call(K,Te,t,this.state.context)),await((pe=(se=Gt(this,ha).config).onSettled)==null?void 0:pe.call(se,void 0,Te,this.state.variables,this.state.context,this)),await((ue=(ye=this.options).onSettled)==null?void 0:ue.call(ye,void 0,Te,t,this.state.context)),Te}finally{Do(this,pc,Zu).call(this,{type:"error",error:Te})}}finally{Gt(this,ha).runNext(this)}}},fc=new WeakMap,ha=new WeakMap,bd=new WeakMap,pc=new WeakSet,Zu=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),pa.batch(()=>{Gt(this,fc).forEach(i=>{i.onMutationUpdate(t)}),Gt(this,ha).notify({mutation:this,type:"updated",action:t})})},cF);function az(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Au,FA,xg,uF,lz=(uF=class extends t1{constructor(t={}){super();zn(this,Au);zn(this,FA);zn(this,xg);this.config=t,dn(this,Au,new Set),dn(this,FA,new Map),dn(this,xg,0)}build(t,r,i){const A=new oz({mutationCache:this,mutationId:++Jg(this,xg)._,options:t.defaultMutationOptions(r),state:i});return this.add(A),A}add(t){Gt(this,Au).add(t);const r=w0(t);if(typeof r=="string"){const i=Gt(this,FA).get(r);i?i.push(t):Gt(this,FA).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Gt(this,Au).delete(t)){const r=w0(t);if(typeof r=="string"){const i=Gt(this,FA).get(r);if(i)if(i.length>1){const A=i.indexOf(t);A!==-1&&i.splice(A,1)}else i[0]===t&&Gt(this,FA).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=w0(t);if(typeof r=="string"){const i=Gt(this,FA).get(r),A=i==null?void 0:i.find(u=>u.state.status==="pending");return!A||A===t}else return!0}runNext(t){var i;const r=w0(t);if(typeof r=="string"){const A=(i=Gt(this,FA).get(r))==null?void 0:i.find(u=>u!==t&&u.state.isPaused);return(A==null?void 0:A.continue())??Promise.resolve()}else return Promise.resolve()}clear(){pa.batch(()=>{Gt(this,Au).forEach(t=>{this.notify({type:"removed",mutation:t})}),Gt(this,Au).clear(),Gt(this,FA).clear()})}getAll(){return Array.from(Gt(this,Au))}find(t){const r={exact:!0,...t};return this.getAll().find(i=>qS(r,i))}findAll(t={}){return this.getAll().filter(r=>qS(t,r))}notify(t){pa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return pa.batch(()=>Promise.all(t.map(r=>r.continue().catch(CA))))}},Au=new WeakMap,FA=new WeakMap,xg=new WeakMap,uF);function w0(e){var t;return(t=e.options.scope)==null?void 0:t.id}function XS(e){return{onFetch:(t,r)=>{var E,F,P,C,D;const i=t.options,A=(P=(F=(E=t.fetchOptions)==null?void 0:E.meta)==null?void 0:F.fetchMore)==null?void 0:P.direction,u=((C=t.state.data)==null?void 0:C.pages)||[],h=((D=t.state.data)==null?void 0:D.pageParams)||[];let o={pages:[],pageParams:[]},g=0;const x=async()=>{let k=!1;const j=K=>{Object.defineProperty(K,"signal",{enumerable:!0,get:()=>(t.signal.aborted?k=!0:t.signal.addEventListener("abort",()=>{k=!0}),t.signal)})},U=W3(t.options,t.fetchOptions),N=async(K,ee,se)=>{if(k)return Promise.reject();if(ee==null&&K.pages.length)return Promise.resolve(K);const ye=(()=>{const oe={client:t.client,queryKey:t.queryKey,pageParam:ee,direction:se?"backward":"forward",meta:t.options.meta};return j(oe),oe})(),ue=await U(ye),{maxPages:Te}=t.options,Ke=se?WO:qO;return{pages:Ke(K.pages,ue,Te),pageParams:Ke(K.pageParams,ee,Te)}};if(A&&u.length){const K=A==="backward",ee=K?Az:YS,se={pages:u,pageParams:h},pe=ee(i,se);o=await N(se,pe,K)}else{const K=e??u.length;do{const ee=g===0?h[0]??i.initialPageParam:YS(i,o);if(g>0&&ee==null)break;o=await N(o,ee),g++}while(g<K)}return o};t.options.persister?t.fetchFn=()=>{var k,j;return(j=(k=t.options).persister)==null?void 0:j.call(k,x,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=x}}}function YS(e,{pages:t,pageParams:r}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,r[i],r):void 0}function Az(e,{pages:t,pageParams:r}){var i;return t.length>0?(i=e.getPreviousPageParam)==null?void 0:i.call(e,t[0],t,r[0],r):void 0}var is,lh,Ah,Ap,cp,ch,up,hp,hF,cz=(hF=class{constructor(e={}){zn(this,is);zn(this,lh);zn(this,Ah);zn(this,Ap);zn(this,cp);zn(this,ch);zn(this,up);zn(this,hp);dn(this,is,e.queryCache||new sz),dn(this,lh,e.mutationCache||new lz),dn(this,Ah,e.defaultOptions||{}),dn(this,Ap,new Map),dn(this,cp,new Map),dn(this,ch,0)}mount(){Jg(this,ch)._++,Gt(this,ch)===1&&(dn(this,up,Z3.subscribe(async e=>{e&&(await this.resumePausedMutations(),Gt(this,is).onFocus())})),dn(this,hp,rv.subscribe(async e=>{e&&(await this.resumePausedMutations(),Gt(this,is).onOnline())})))}unmount(){var e,t;Jg(this,ch)._--,Gt(this,ch)===0&&((e=Gt(this,up))==null||e.call(this),dn(this,up,void 0),(t=Gt(this,hp))==null||t.call(this),dn(this,hp,void 0))}isFetching(e){return Gt(this,is).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Gt(this,lh).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Gt(this,is).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Gt(this,is).build(this,t),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ox(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return Gt(this,is).findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),A=Gt(this,is).get(i.queryHash),u=A==null?void 0:A.state.data,h=HO(t,u);if(h!==void 0)return Gt(this,is).build(this,i).setData(h,{...r,manual:!0})}setQueriesData(e,t,r){return pa.batch(()=>Gt(this,is).findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Gt(this,is).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Gt(this,is);pa.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Gt(this,is);return pa.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},i=pa.batch(()=>Gt(this,is).findAll(e).map(A=>A.cancel(r)));return Promise.all(i).then(CA).catch(CA)}invalidateQueries(e,t={}){return pa.batch(()=>(Gt(this,is).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},i=pa.batch(()=>Gt(this,is).findAll(e).filter(A=>!A.isDisabled()&&!A.isStatic()).map(A=>{let u=A.fetch(void 0,r);return r.throwOnError||(u=u.catch(CA)),A.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(CA)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Gt(this,is).build(this,t);return r.isStaleByTime(Ox(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(CA).catch(CA)}fetchInfiniteQuery(e){return e.behavior=XS(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(CA).catch(CA)}ensureInfiniteQueryData(e){return e.behavior=XS(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return rv.isOnline()?Gt(this,lh).resumePausedMutations():Promise.resolve()}getQueryCache(){return Gt(this,is)}getMutationCache(){return Gt(this,lh)}getDefaultOptions(){return Gt(this,Ah)}setDefaultOptions(e){dn(this,Ah,e)}setQueryDefaults(e,t){Gt(this,Ap).set(hg(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Gt(this,Ap).values()],r={};return t.forEach(i=>{dg(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,t){Gt(this,cp).set(hg(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Gt(this,cp).values()],r={};return t.forEach(i=>{dg(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Gt(this,Ah).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=eB(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===tB&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Gt(this,Ah).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Gt(this,is).clear(),Gt(this,lh).clear()}},is=new WeakMap,lh=new WeakMap,Ah=new WeakMap,Ap=new WeakMap,cp=new WeakMap,ch=new WeakMap,up=new WeakMap,hp=new WeakMap,hF),uz=te.createContext(void 0),hz=({client:e,children:t})=>(te.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Z.jsx(uz.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nv.apply(this,arguments)}var dh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(dh||(dh={}));const JS="popstate";function dz(e){e===void 0&&(e={});function t(i,A){let{pathname:u,search:h,hash:o}=i.location;return Hx("",{pathname:u,search:h,hash:o},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(i,A){return typeof A=="string"?A:rP(A)}return pz(t,r,null,e)}function Va(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fz(){return Math.random().toString(36).substr(2,8)}function eE(e,t){return{usr:e.state,key:e.key,idx:t}}function Hx(e,t,r,i){return r===void 0&&(r=null),nv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?n1(t):t,{state:r,key:t&&t.key||i||fz()})}function rP(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function n1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function pz(e,t,r,i){i===void 0&&(i={});let{window:A=document.defaultView,v5Compat:u=!1}=i,h=A.history,o=dh.Pop,g=null,x=E();x==null&&(x=0,h.replaceState(nv({},h.state,{idx:x}),""));function E(){return(h.state||{idx:null}).idx}function F(){o=dh.Pop;let j=E(),U=j==null?null:j-x;x=j,g&&g({action:o,location:k.location,delta:U})}function P(j,U){o=dh.Push;let N=Hx(k.location,j,U);x=E()+1;let K=eE(N,x),ee=k.createHref(N);try{h.pushState(K,"",ee)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;A.location.assign(ee)}u&&g&&g({action:o,location:k.location,delta:1})}function C(j,U){o=dh.Replace;let N=Hx(k.location,j,U);x=E();let K=eE(N,x),ee=k.createHref(N);h.replaceState(K,"",ee),u&&g&&g({action:o,location:k.location,delta:0})}function D(j){let U=A.location.origin!=="null"?A.location.origin:A.location.href,N=typeof j=="string"?j:rP(j);return N=N.replace(/ $/,"%20"),Va(U,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,U)}let k={get action(){return o},get location(){return e(A,h)},listen(j){if(g)throw new Error("A history only accepts one active listener");return A.addEventListener(JS,F),g=j,()=>{A.removeEventListener(JS,F),g=null}},createHref(j){return t(A,j)},createURL:D,encodeLocation(j){let U=D(j);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:P,replace:C,go(j){return h.go(j)}};return k}var tE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(tE||(tE={}));function mz(e,t,r){return r===void 0&&(r="/"),gz(e,t,r)}function gz(e,t,r,i){let A=typeof t=="string"?n1(t):t,u=sP(A.pathname||"/",r);if(u==null)return null;let h=nP(e);yz(h);let o=null;for(let g=0;o==null&&g<h.length;++g){let x=Tz(u);o=Ez(h[g],x)}return o}function nP(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let A=(u,h,o)=>{let g={relativePath:o===void 0?u.path||"":o,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(Va(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let x=Zf([i,g.relativePath]),E=r.concat(g);u.children&&u.children.length>0&&(Va(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),nP(u.children,t,E,x)),!(u.path==null&&!u.index)&&t.push({path:x,score:Cz(x,u.index),routesMeta:E})};return e.forEach((u,h)=>{var o;if(u.path===""||!((o=u.path)!=null&&o.includes("?")))A(u,h);else for(let g of iP(u.path))A(u,h,g)}),t}function iP(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,A=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return A?[u,""]:[u];let h=iP(i.join("/")),o=[];return o.push(...h.map(g=>g===""?u:[u,g].join("/"))),A&&o.push(...h),o.map(g=>e.startsWith("/")&&g===""?"/":g)}function yz(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Sz(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const vz=/^:[\w-]+$/,_z=3,wz=2,xz=1,bz=10,Bz=-2,rE=e=>e==="*";function Cz(e,t){let r=e.split("/"),i=r.length;return r.some(rE)&&(i+=Bz),t&&(i+=wz),r.filter(A=>!rE(A)).reduce((A,u)=>A+(vz.test(u)?_z:u===""?xz:bz),i)}function Sz(e,t){return e.length===t.length&&e.slice(0,-1).every((i,A)=>i===t[A])?e[e.length-1]-t[t.length-1]:0}function Ez(e,t,r){let{routesMeta:i}=e,A={},u="/",h=[];for(let o=0;o<i.length;++o){let g=i[o],x=o===i.length-1,E=u==="/"?t:t.slice(u.length)||"/",F=Fz({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},E),P=g.route;if(!F)return null;Object.assign(A,F.params),h.push({params:A,pathname:Zf([u,F.pathname]),pathnameBase:Pz(Zf([u,F.pathnameBase])),route:P}),F.pathnameBase!=="/"&&(u=Zf([u,F.pathnameBase]))}return h}function Fz(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=Iz(e.path,e.caseSensitive,e.end),A=t.match(r);if(!A)return null;let u=A[0],h=u.replace(/(.)\/+$/,"$1"),o=A.slice(1);return{params:i.reduce((x,E,F)=>{let{paramName:P,isOptional:C}=E;if(P==="*"){let k=o[F]||"";h=u.slice(0,u.length-k.length).replace(/(.)\/+$/,"$1")}const D=o[F];return C&&!D?x[P]=void 0:x[P]=(D||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:h,pattern:e}}function Iz(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),tP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],A="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,o,g)=>(i.push({paramName:o,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),A+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?A+="\\/*$":e!==""&&e!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,t?void 0:"i"),i]}function Tz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function sP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}const Zf=e=>e.join("/").replace(/\/\/+/g,"/"),Pz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function Lz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oP=["post","put","patch","delete"];new Set(oP);const Mz=["get",...oP];new Set(Mz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},iv.apply(this,arguments)}const kz=te.createContext(null),Uz=te.createContext(null),aP=te.createContext(null),i1=te.createContext(null),s1=te.createContext({outlet:null,matches:[],isDataRoute:!1}),lP=te.createContext(null);function rB(){return te.useContext(i1)!=null}function AP(){return rB()||Va(!1),te.useContext(i1).location}function Qz(e,t){return Rz(e,t)}function Rz(e,t,r,i){rB()||Va(!1);let{navigator:A}=te.useContext(aP),{matches:u}=te.useContext(s1),h=u[u.length-1],o=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let x=AP(),E;if(t){var F;let j=typeof t=="string"?n1(t):t;g==="/"||(F=j.pathname)!=null&&F.startsWith(g)||Va(!1),E=j}else E=x;let P=E.pathname||"/",C=P;if(g!=="/"){let j=g.replace(/^\//,"").split("/");C="/"+P.replace(/^\//,"").split("/").slice(j.length).join("/")}let D=mz(e,{pathname:C}),k=Hz(D&&D.map(j=>Object.assign({},j,{params:Object.assign({},o,j.params),pathname:Zf([g,A.encodeLocation?A.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:Zf([g,A.encodeLocation?A.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),u,r,i);return t&&k?te.createElement(i1.Provider,{value:{location:iv({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:dh.Pop}},k):k}function Nz(){let e=Gz(),t=Lz(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},t),r?te.createElement("pre",{style:A},r):null,null)}const Dz=te.createElement(Nz,null);class Oz extends te.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?te.createElement(s1.Provider,{value:this.props.routeContext},te.createElement(lP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zz(e){let{routeContext:t,match:r,children:i}=e,A=te.useContext(kz);return A&&A.static&&A.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=r.route.id),te.createElement(s1.Provider,{value:t},i)}function Hz(e,t,r,i){var A;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var u;if(!r)return null;if(r.errors)e=r.matches;else if((u=i)!=null&&u.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,o=(A=r)==null?void 0:A.errors;if(o!=null){let E=h.findIndex(F=>F.route.id&&(o==null?void 0:o[F.route.id])!==void 0);E>=0||Va(!1),h=h.slice(0,Math.min(h.length,E+1))}let g=!1,x=-1;if(r&&i&&i.v7_partialHydration)for(let E=0;E<h.length;E++){let F=h[E];if((F.route.HydrateFallback||F.route.hydrateFallbackElement)&&(x=E),F.route.id){let{loaderData:P,errors:C}=r,D=F.route.loader&&P[F.route.id]===void 0&&(!C||C[F.route.id]===void 0);if(F.route.lazy||D){g=!0,x>=0?h=h.slice(0,x+1):h=[h[0]];break}}}return h.reduceRight((E,F,P)=>{let C,D=!1,k=null,j=null;r&&(C=o&&F.route.id?o[F.route.id]:void 0,k=F.route.errorElement||Dz,g&&(x<0&&P===0?($z("route-fallback"),D=!0,j=null):x===P&&(D=!0,j=F.route.hydrateFallbackElement||null)));let U=t.concat(h.slice(0,P+1)),N=()=>{let K;return C?K=k:D?K=j:F.route.Component?K=te.createElement(F.route.Component,null):F.route.element?K=F.route.element:K=E,te.createElement(zz,{match:F,routeContext:{outlet:E,matches:U,isDataRoute:r!=null},children:K})};return r&&(F.route.ErrorBoundary||F.route.errorElement||P===0)?te.createElement(Oz,{location:r.location,revalidation:r.revalidation,component:k,error:C,children:N(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):N()},null)}var cP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cP||{});function jz(e){let t=te.useContext(Uz);return t||Va(!1),t}function Vz(e){let t=te.useContext(s1);return t||Va(!1),t}function Kz(e){let t=Vz(),r=t.matches[t.matches.length-1];return r.route.id||Va(!1),r.route.id}function Gz(){var e;let t=te.useContext(lP),r=jz(cP.UseRouteError),i=Kz();return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}const nE={};function $z(e,t,r){nE[e]||(nE[e]=!0)}function qz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function jx(e){Va(!1)}function Wz(e){let{basename:t="/",children:r=null,location:i,navigationType:A=dh.Pop,navigator:u,static:h=!1,future:o}=e;rB()&&Va(!1);let g=t.replace(/^\/*/,"/"),x=te.useMemo(()=>({basename:g,navigator:u,static:h,future:iv({v7_relativeSplatPath:!1},o)}),[g,o,u,h]);typeof i=="string"&&(i=n1(i));let{pathname:E="/",search:F="",hash:P="",state:C=null,key:D="default"}=i,k=te.useMemo(()=>{let j=sP(E,g);return j==null?null:{location:{pathname:j,search:F,hash:P,state:C,key:D},navigationType:A}},[g,E,F,P,C,D,A]);return k==null?null:te.createElement(aP.Provider,{value:x},te.createElement(i1.Provider,{children:r,value:k}))}function Zz(e){let{children:t,location:r}=e;return Qz(Vx(t),r)}new Promise(()=>{});function Vx(e,t){t===void 0&&(t=[]);let r=[];return te.Children.forEach(e,(i,A)=>{if(!te.isValidElement(i))return;let u=[...t,A];if(i.type===te.Fragment){r.push.apply(r,Vx(i.props.children,u));return}i.type!==jx&&Va(!1),!i.props.index||!i.props.children||Va(!1);let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Vx(i.props.children,u)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Xz="6";try{window.__reactRouterVersion=Xz}catch{}const Yz="startTransition",iE=Gb[Yz];function Jz(e){let{basename:t,children:r,future:i,window:A}=e,u=te.useRef();u.current==null&&(u.current=dz({window:A,v5Compat:!0}));let h=u.current,[o,g]=te.useState({action:h.action,location:h.location}),{v7_startTransition:x}=i||{},E=te.useCallback(F=>{x&&iE?iE(()=>g(F)):g(F)},[g,x]);return te.useLayoutEffect(()=>h.listen(E),[h,E]),te.useEffect(()=>qz(i),[i]),te.createElement(Wz,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:h,future:i})}var sE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(sE||(sE={}));var oE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(oE||(oE={}));function eH(e){return new Worker("/Domapus/assets/data-processor-CfDSF7fR.js",{name:e==null?void 0:e.name})}function tH(){const e=te.useRef(null),[t,r]=te.useState(!0),[i,A]=te.useState({phase:"Initializing..."}),u=te.useRef(new Map);return te.useEffect(()=>{const o=new eH;return e.current=o,o.onmessage=g=>{const{id:x,type:E,data:F,error:P}=g.data;switch(E){case"PROGRESS":A(F);break;case"ERROR":{r(!1);const C=u.current.get(x);C&&(C.reject(new Error(P)),u.current.delete(x));break}default:{r(!1);const C=u.current.get(x);C&&(C.resolve(F),u.current.delete(x));break}}},o.onerror=g=>{console.error("An unhandled error occurred in the data worker:",g),r(!1),u.current.forEach(x=>x.reject(g)),u.current.clear()},()=>{o.terminate()}},[]),{processData:te.useCallback(o=>{const g=e.current;return g?new Promise((x,E)=>{r(!0),A({phase:"Starting..."});const F=`${Date.now()}-${Math.random()}`;u.current.set(F,{resolve:x,reject:E}),g.postMessage({id:F,...o})}):Promise.reject(new Error("Worker is not available."))},[]),isLoading:t,progress:i}}const rH=Gv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Xo=te.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...A},u)=>{const h=i?NR:"button";return Z.jsx(h,{className:Nn(rH({variant:t,size:r,className:e})),ref:u,...A})});Xo.displayName="Button";const Sh=te.forwardRef(({className:e,...t},r)=>Z.jsx("div",{ref:r,className:Nn("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Sh.displayName="Card";const Nm=te.forwardRef(({className:e,...t},r)=>Z.jsx("div",{ref:r,className:Nn("flex flex-col space-y-1.5 p-6",e),...t}));Nm.displayName="CardHeader";const Dm=te.forwardRef(({className:e,...t},r)=>Z.jsx("h3",{ref:r,className:Nn("text-2xl font-semibold leading-none tracking-tight",e),...t}));Dm.displayName="CardTitle";const nH=te.forwardRef(({className:e,...t},r)=>Z.jsx("p",{ref:r,className:Nn("text-sm text-muted-foreground",e),...t}));nH.displayName="CardDescription";const Eh=te.forwardRef(({className:e,...t},r)=>Z.jsx("div",{ref:r,className:Nn("p-6 pt-0",e),...t}));Eh.displayName="CardContent";const iH=te.forwardRef(({className:e,...t},r)=>Z.jsx("div",{ref:r,className:Nn("flex items-center p-6 pt-0",e),...t}));iH.displayName="CardFooter";var sH=te.createContext(void 0);function nB(e){const t=te.useContext(sH);return e||t||"ltr"}var W_="rovingFocusGroup.onEntryFocus",oH={bubbles:!1,cancelable:!0},Pg="RovingFocusGroup",[Kx,uP,aH]=R2(Pg),[lH,hP]=xu(Pg,[aH]),[AH,cH]=lH(Pg),dP=te.forwardRef((e,t)=>Z.jsx(Kx.Provider,{scope:e.__scopeRovingFocusGroup,children:Z.jsx(Kx.Slot,{scope:e.__scopeRovingFocusGroup,children:Z.jsx(uH,{...e,ref:t})})}));dP.displayName=Pg;var uH=te.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:A=!1,dir:u,currentTabStopId:h,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:g,onEntryFocus:x,preventScrollOnEntryFocus:E=!1,...F}=e,P=te.useRef(null),C=li(t,P),D=nB(u),[k,j]=_p({prop:h,defaultProp:o??null,onChange:g,caller:Pg}),[U,N]=te.useState(!1),K=Gl(x),ee=uP(r),se=te.useRef(!1),[pe,ye]=te.useState(0);return te.useEffect(()=>{const ue=P.current;if(ue)return ue.addEventListener(W_,K),()=>ue.removeEventListener(W_,K)},[K]),Z.jsx(AH,{scope:r,orientation:i,dir:D,loop:A,currentTabStopId:k,onItemFocus:te.useCallback(ue=>j(ue),[j]),onItemShiftTab:te.useCallback(()=>N(!0),[]),onFocusableItemAdd:te.useCallback(()=>ye(ue=>ue+1),[]),onFocusableItemRemove:te.useCallback(()=>ye(ue=>ue-1),[]),children:Z.jsx(bn.div,{tabIndex:U||pe===0?-1:0,"data-orientation":i,...F,ref:C,style:{outline:"none",...e.style},onMouseDown:on(e.onMouseDown,()=>{se.current=!0}),onFocus:on(e.onFocus,ue=>{const Te=!se.current;if(ue.target===ue.currentTarget&&Te&&!U){const Ke=new CustomEvent(W_,oH);if(ue.currentTarget.dispatchEvent(Ke),!Ke.defaultPrevented){const oe=ee().filter(Xe=>Xe.focusable),he=oe.find(Xe=>Xe.active),Ie=oe.find(Xe=>Xe.id===k),ct=[he,Ie,...oe].filter(Boolean).map(Xe=>Xe.ref.current);mP(ct,E)}}se.current=!1}),onBlur:on(e.onBlur,()=>N(!1))})})}),fP="RovingFocusGroupItem",pP=te.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:A=!1,tabStopId:u,children:h,...o}=e,g=qv(),x=u||g,E=cH(fP,r),F=E.currentTabStopId===x,P=uP(r),{onFocusableItemAdd:C,onFocusableItemRemove:D,currentTabStopId:k}=E;return te.useEffect(()=>{if(i)return C(),()=>D()},[i,C,D]),Z.jsx(Kx.ItemSlot,{scope:r,id:x,focusable:i,active:A,children:Z.jsx(bn.span,{tabIndex:F?0:-1,"data-orientation":E.orientation,...o,ref:t,onMouseDown:on(e.onMouseDown,j=>{i?E.onItemFocus(x):j.preventDefault()}),onFocus:on(e.onFocus,()=>E.onItemFocus(x)),onKeyDown:on(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){E.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const U=fH(j,E.orientation,E.dir);if(U!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let K=P().filter(ee=>ee.focusable).map(ee=>ee.ref.current);if(U==="last")K.reverse();else if(U==="prev"||U==="next"){U==="prev"&&K.reverse();const ee=K.indexOf(j.currentTarget);K=E.loop?pH(K,ee+1):K.slice(ee+1)}setTimeout(()=>mP(K))}}),children:typeof h=="function"?h({isCurrentTabStop:F,hasTabStop:k!=null}):h})})});pP.displayName=fP;var hH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dH(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function fH(e,t,r){const i=dH(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return hH[i]}function mP(e,t=!1){const r=document.activeElement;for(const i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function pH(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var mH=dP,gH=pP;function iB(e){const t=te.useRef({value:e,previous:e});return te.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var sB="Radio",[yH,gP]=xu(sB),[vH,_H]=yH(sB),yP=te.forwardRef((e,t)=>{const{__scopeRadio:r,name:i,checked:A=!1,required:u,disabled:h,value:o="on",onCheck:g,form:x,...E}=e,[F,P]=te.useState(null),C=li(t,j=>P(j)),D=te.useRef(!1),k=F?x||!!F.closest("form"):!0;return Z.jsxs(vH,{scope:r,checked:A,disabled:h,children:[Z.jsx(bn.button,{type:"button",role:"radio","aria-checked":A,"data-state":xP(A),"data-disabled":h?"":void 0,disabled:h,value:o,...E,ref:C,onClick:on(e.onClick,j=>{A||g==null||g(),k&&(D.current=j.isPropagationStopped(),D.current||j.stopPropagation())})}),k&&Z.jsx(wP,{control:F,bubbles:!D.current,name:i,value:o,checked:A,required:u,disabled:h,form:x,style:{transform:"translateX(-100%)"}})]})});yP.displayName=sB;var vP="RadioIndicator",_P=te.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:i,...A}=e,u=_H(vP,r);return Z.jsx(Fg,{present:i||u.checked,children:Z.jsx(bn.span,{"data-state":xP(u.checked),"data-disabled":u.disabled?"":void 0,...A,ref:t})})});_P.displayName=vP;var wH="RadioBubbleInput",wP=te.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:i=!0,...A},u)=>{const h=te.useRef(null),o=li(h,u),g=iB(r),x=Z2(t);return te.useEffect(()=>{const E=h.current;if(!E)return;const F=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(F,"checked").set;if(g!==r&&C){const D=new Event("click",{bubbles:i});C.call(E,r),E.dispatchEvent(D)}},[g,r,i]),Z.jsx(bn.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...A,tabIndex:-1,ref:o,style:{...A.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});wP.displayName=wH;function xP(e){return e?"checked":"unchecked"}var xH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],o1="RadioGroup",[bH,dZ]=xu(o1,[hP,gP]),bP=hP(),BP=gP(),[BH,CH]=bH(o1),CP=te.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:i,defaultValue:A,value:u,required:h=!1,disabled:o=!1,orientation:g,dir:x,loop:E=!0,onValueChange:F,...P}=e,C=bP(r),D=nB(x),[k,j]=_p({prop:u,defaultProp:A??null,onChange:F,caller:o1});return Z.jsx(BH,{scope:r,name:i,required:h,disabled:o,value:k,onValueChange:j,children:Z.jsx(mH,{asChild:!0,...C,orientation:g,dir:D,loop:E,children:Z.jsx(bn.div,{role:"radiogroup","aria-required":h,"aria-orientation":g,"data-disabled":o?"":void 0,dir:D,...P,ref:t})})})});CP.displayName=o1;var SP="RadioGroupItem",EP=te.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:i,...A}=e,u=CH(SP,r),h=u.disabled||i,o=bP(r),g=BP(r),x=te.useRef(null),E=li(t,x),F=u.value===A.value,P=te.useRef(!1);return te.useEffect(()=>{const C=k=>{xH.includes(k.key)&&(P.current=!0)},D=()=>P.current=!1;return document.addEventListener("keydown",C),document.addEventListener("keyup",D),()=>{document.removeEventListener("keydown",C),document.removeEventListener("keyup",D)}},[]),Z.jsx(gH,{asChild:!0,...o,focusable:!h,active:F,children:Z.jsx(yP,{disabled:h,required:u.required,checked:F,...g,...A,name:u.name,ref:E,onCheck:()=>u.onValueChange(A.value),onKeyDown:on(C=>{C.key==="Enter"&&C.preventDefault()}),onFocus:on(A.onFocus,()=>{var C;P.current&&((C=x.current)==null||C.click())})})})});EP.displayName=SP;var SH="RadioGroupIndicator",FP=te.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...i}=e,A=BP(r);return Z.jsx(_P,{...A,...i,ref:t})});FP.displayName=SH;var IP=CP,TP=EP,EH=FP;const Gx=te.forwardRef(({className:e,...t},r)=>Z.jsx(IP,{className:Nn("grid gap-2",e),...t,ref:r}));Gx.displayName=IP.displayName;const xf=te.forwardRef(({className:e,...t},r)=>Z.jsx(TP,{ref:r,className:Nn("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:Z.jsx(EH,{className:"flex items-center justify-center",children:Z.jsx(QN,{className:"h-2.5 w-2.5 fill-current text-current"})})}));xf.displayName=TP.displayName;var FH="Label",PP=te.forwardRef((e,t)=>Z.jsx(bn.label,{...e,ref:t,onMouseDown:r=>{var A;r.target.closest("button, input, select, textarea")||((A=e.onMouseDown)==null||A.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));PP.displayName=FH;var LP=PP;const IH=Gv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xu=te.forwardRef(({className:e,...t},r)=>Z.jsx(LP,{ref:r,className:Nn(IH(),e),...t}));Xu.displayName=LP.displayName;function aE(e,[t,r]){return Math.min(r,Math.max(t,e))}var Z_=0;function TH(){te.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??lE()),document.body.insertAdjacentElement("beforeend",e[1]??lE()),Z_++,()=>{Z_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Z_--}},[])}function lE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var X_="focusScope.autoFocusOnMount",Y_="focusScope.autoFocusOnUnmount",AE={bubbles:!1,cancelable:!0},PH="FocusScope",MP=te.forwardRef((e,t)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:A,onUnmountAutoFocus:u,...h}=e,[o,g]=te.useState(null),x=Gl(A),E=Gl(u),F=te.useRef(null),P=li(t,k=>g(k)),C=te.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;te.useEffect(()=>{if(i){let k=function(K){if(C.paused||!o)return;const ee=K.target;o.contains(ee)?F.current=ee:Yu(F.current,{select:!0})},j=function(K){if(C.paused||!o)return;const ee=K.relatedTarget;ee!==null&&(o.contains(ee)||Yu(F.current,{select:!0}))},U=function(K){if(document.activeElement===document.body)for(const se of K)se.removedNodes.length>0&&Yu(o)};document.addEventListener("focusin",k),document.addEventListener("focusout",j);const N=new MutationObserver(U);return o&&N.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",j),N.disconnect()}}},[i,o,C.paused]),te.useEffect(()=>{if(o){uE.add(C);const k=document.activeElement;if(!o.contains(k)){const U=new CustomEvent(X_,AE);o.addEventListener(X_,x),o.dispatchEvent(U),U.defaultPrevented||(LH(RH(kP(o)),{select:!0}),document.activeElement===k&&Yu(o))}return()=>{o.removeEventListener(X_,x),setTimeout(()=>{const U=new CustomEvent(Y_,AE);o.addEventListener(Y_,E),o.dispatchEvent(U),U.defaultPrevented||Yu(k??document.body,{select:!0}),o.removeEventListener(Y_,E),uE.remove(C)},0)}}},[o,x,E,C]);const D=te.useCallback(k=>{if(!r&&!i||C.paused)return;const j=k.key==="Tab"&&!k.altKey&&!k.ctrlKey&&!k.metaKey,U=document.activeElement;if(j&&U){const N=k.currentTarget,[K,ee]=MH(N);K&&ee?!k.shiftKey&&U===ee?(k.preventDefault(),r&&Yu(K,{select:!0})):k.shiftKey&&U===K&&(k.preventDefault(),r&&Yu(ee,{select:!0})):U===N&&k.preventDefault()}},[r,i,C.paused]);return Z.jsx(bn.div,{tabIndex:-1,...h,ref:P,onKeyDown:D})});MP.displayName=PH;function LH(e,{select:t=!1}={}){const r=document.activeElement;for(const i of e)if(Yu(i,{select:t}),document.activeElement!==r)return}function MH(e){const t=kP(e),r=cE(t,e),i=cE(t.reverse(),e);return[r,i]}function kP(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const A=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||A?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function cE(e,t){for(const r of e)if(!kH(r,{upTo:t}))return r}function kH(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function UH(e){return e instanceof HTMLInputElement&&"select"in e}function Yu(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&UH(e)&&t&&e.select()}}var uE=QH();function QH(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=hE(e,t),e.unshift(t)},remove(t){var r;e=hE(e,t),(r=e[0])==null||r.resume()}}}function hE(e,t){const r=[...e],i=r.indexOf(t);return i!==-1&&r.splice(i,1),r}function RH(e){return e.filter(t=>t.tagName!=="A")}var NH=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},uf=new WeakMap,x0=new WeakMap,b0={},J_=0,UP=function(e){return e&&(e.host||UP(e.parentNode))},DH=function(e,t){return t.map(function(r){if(e.contains(r))return r;var i=UP(r);return i&&e.contains(i)?i:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},OH=function(e,t,r,i){var A=DH(t,Array.isArray(e)?e:[e]);b0[r]||(b0[r]=new WeakMap);var u=b0[r],h=[],o=new Set,g=new Set(A),x=function(F){!F||o.has(F)||(o.add(F),x(F.parentNode))};A.forEach(x);var E=function(F){!F||g.has(F)||Array.prototype.forEach.call(F.children,function(P){if(o.has(P))E(P);else try{var C=P.getAttribute(i),D=C!==null&&C!=="false",k=(uf.get(P)||0)+1,j=(u.get(P)||0)+1;uf.set(P,k),u.set(P,j),h.push(P),k===1&&D&&x0.set(P,!0),j===1&&P.setAttribute(r,"true"),D||P.setAttribute(i,"true")}catch(U){console.error("aria-hidden: cannot operate on ",P,U)}})};return E(t),o.clear(),J_++,function(){h.forEach(function(F){var P=uf.get(F)-1,C=u.get(F)-1;uf.set(F,P),u.set(F,C),P||(x0.has(F)||F.removeAttribute(i),x0.delete(F)),C||F.removeAttribute(r)}),J_--,J_||(uf=new WeakMap,uf=new WeakMap,x0=new WeakMap,b0={})}},zH=function(e,t,r){r===void 0&&(r="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),A=NH(e);return A?(i.push.apply(i,Array.from(A.querySelectorAll("[aria-live], script"))),OH(i,A,r,"aria-hidden")):function(){return null}},gc=function(){return gc=Object.assign||function(t){for(var r,i=1,A=arguments.length;i<A;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},gc.apply(this,arguments)};function QP(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,i=Object.getOwnPropertySymbols(e);A<i.length;A++)t.indexOf(i[A])<0&&Object.prototype.propertyIsEnumerable.call(e,i[A])&&(r[i[A]]=e[i[A]]);return r}function HH(e,t,r){if(r||arguments.length===2)for(var i=0,A=t.length,u;i<A;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))}var gy="right-scroll-bar-position",yy="width-before-scroll-bar",jH="with-scroll-bars-hidden",VH="--removed-body-scroll-bar-size";function ew(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function KH(e,t){var r=te.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(i){var A=r.value;A!==i&&(r.value=i,r.callback(i,A))}}}})[0];return r.callback=t,r.facade}var GH=typeof window<"u"?te.useLayoutEffect:te.useEffect,dE=new WeakMap;function $H(e,t){var r=KH(null,function(i){return e.forEach(function(A){return ew(A,i)})});return GH(function(){var i=dE.get(r);if(i){var A=new Set(i),u=new Set(e),h=r.current;A.forEach(function(o){u.has(o)||ew(o,null)}),u.forEach(function(o){A.has(o)||ew(o,h)})}dE.set(r,e)},[e]),r}function qH(e){return e}function WH(e,t){t===void 0&&(t=qH);var r=[],i=!1,A={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(u){var h=t(u,i);return r.push(h),function(){r=r.filter(function(o){return o!==h})}},assignSyncMedium:function(u){for(i=!0;r.length;){var h=r;r=[],h.forEach(u)}r={push:function(o){return u(o)},filter:function(){return r}}},assignMedium:function(u){i=!0;var h=[];if(r.length){var o=r;r=[],o.forEach(u),h=r}var g=function(){var E=h;h=[],E.forEach(u)},x=function(){return Promise.resolve().then(g)};x(),r={push:function(E){h.push(E),x()},filter:function(E){return h=h.filter(E),r}}}};return A}function ZH(e){e===void 0&&(e={});var t=WH(null);return t.options=gc({async:!0,ssr:!1},e),t}var RP=function(e){var t=e.sideCar,r=QP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return te.createElement(i,gc({},r))};RP.isSideCarExport=!0;function XH(e,t){return e.useMedium(t),RP}var NP=ZH(),tw=function(){},a1=te.forwardRef(function(e,t){var r=te.useRef(null),i=te.useState({onScrollCapture:tw,onWheelCapture:tw,onTouchMoveCapture:tw}),A=i[0],u=i[1],h=e.forwardProps,o=e.children,g=e.className,x=e.removeScrollBar,E=e.enabled,F=e.shards,P=e.sideCar,C=e.noRelative,D=e.noIsolation,k=e.inert,j=e.allowPinchZoom,U=e.as,N=U===void 0?"div":U,K=e.gapMode,ee=QP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),se=P,pe=$H([r,t]),ye=gc(gc({},ee),A);return te.createElement(te.Fragment,null,E&&te.createElement(se,{sideCar:NP,removeScrollBar:x,shards:F,noRelative:C,noIsolation:D,inert:k,setCallbacks:u,allowPinchZoom:!!j,lockRef:r,gapMode:K}),h?te.cloneElement(te.Children.only(o),gc(gc({},ye),{ref:pe})):te.createElement(N,gc({},ye,{className:g,ref:pe}),o))});a1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};a1.classNames={fullWidth:yy,zeroRight:gy};var YH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JH(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=YH();return t&&e.setAttribute("nonce",t),e}function ej(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function tj(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var rj=function(){var e=0,t=null;return{add:function(r){e==0&&(t=JH())&&(ej(t,r),tj(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nj=function(){var e=rj();return function(t,r){te.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},DP=function(){var e=nj(),t=function(r){var i=r.styles,A=r.dynamic;return e(i,A),null};return t},ij={left:0,top:0,right:0,gap:0},rw=function(e){return parseInt(e||"",10)||0},sj=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],A=t[e==="padding"?"paddingRight":"marginRight"];return[rw(r),rw(i),rw(A)]},oj=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ij;var t=sj(e),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},aj=DP(),Xf="data-scroll-locked",lj=function(e,t,r,i){var A=e.left,u=e.top,h=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(jH,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(o,"px ").concat(i,`;
  }
  body[`).concat(Xf,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),r==="margin"&&`
    padding-left: `.concat(A,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(i,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gy,` {
    right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(yy,` {
    margin-right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(gy," .").concat(gy,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(yy," .").concat(yy,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Xf,`] {
    `).concat(VH,": ").concat(o,`px;
  }
`)},fE=function(){var e=parseInt(document.body.getAttribute(Xf)||"0",10);return isFinite(e)?e:0},Aj=function(){te.useEffect(function(){return document.body.setAttribute(Xf,(fE()+1).toString()),function(){var e=fE()-1;e<=0?document.body.removeAttribute(Xf):document.body.setAttribute(Xf,e.toString())}},[])},cj=function(e){var t=e.noRelative,r=e.noImportant,i=e.gapMode,A=i===void 0?"margin":i;Aj();var u=te.useMemo(function(){return oj(A)},[A]);return te.createElement(aj,{styles:lj(u,!t,A,r?"":"!important")})},$x=!1;if(typeof window<"u")try{var B0=Object.defineProperty({},"passive",{get:function(){return $x=!0,!0}});window.addEventListener("test",B0,B0),window.removeEventListener("test",B0,B0)}catch{$x=!1}var hf=$x?{passive:!1}:!1,uj=function(e){return e.tagName==="TEXTAREA"},OP=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!uj(e)&&r[t]==="visible")},hj=function(e){return OP(e,"overflowY")},dj=function(e){return OP(e,"overflowX")},pE=function(e,t){var r=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var A=zP(e,i);if(A){var u=HP(e,i),h=u[1],o=u[2];if(h>o)return!0}i=i.parentNode}while(i&&i!==r.body);return!1},fj=function(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;return[t,r,i]},pj=function(e){var t=e.scrollLeft,r=e.scrollWidth,i=e.clientWidth;return[t,r,i]},zP=function(e,t){return e==="v"?hj(t):dj(t)},HP=function(e,t){return e==="v"?fj(t):pj(t)},mj=function(e,t){return e==="h"&&t==="rtl"?-1:1},gj=function(e,t,r,i,A){var u=mj(e,window.getComputedStyle(t).direction),h=u*i,o=r.target,g=t.contains(o),x=!1,E=h>0,F=0,P=0;do{if(!o)break;var C=HP(e,o),D=C[0],k=C[1],j=C[2],U=k-j-u*D;(D||U)&&zP(e,o)&&(F+=U,P+=D);var N=o.parentNode;o=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!g&&o!==document.body||g&&(t.contains(o)||t===o));return(E&&Math.abs(F)<1||!E&&Math.abs(P)<1)&&(x=!0),x},C0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mE=function(e){return[e.deltaX,e.deltaY]},gE=function(e){return e&&"current"in e?e.current:e},yj=function(e,t){return e[0]===t[0]&&e[1]===t[1]},vj=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_j=0,df=[];function wj(e){var t=te.useRef([]),r=te.useRef([0,0]),i=te.useRef(),A=te.useState(_j++)[0],u=te.useState(DP)[0],h=te.useRef(e);te.useEffect(function(){h.current=e},[e]),te.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(A));var k=HH([e.lockRef.current],(e.shards||[]).map(gE),!0).filter(Boolean);return k.forEach(function(j){return j.classList.add("allow-interactivity-".concat(A))}),function(){document.body.classList.remove("block-interactivity-".concat(A)),k.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(A))})}}},[e.inert,e.lockRef.current,e.shards]);var o=te.useCallback(function(k,j){if("touches"in k&&k.touches.length===2||k.type==="wheel"&&k.ctrlKey)return!h.current.allowPinchZoom;var U=C0(k),N=r.current,K="deltaX"in k?k.deltaX:N[0]-U[0],ee="deltaY"in k?k.deltaY:N[1]-U[1],se,pe=k.target,ye=Math.abs(K)>Math.abs(ee)?"h":"v";if("touches"in k&&ye==="h"&&pe.type==="range")return!1;var ue=pE(ye,pe);if(!ue)return!0;if(ue?se=ye:(se=ye==="v"?"h":"v",ue=pE(ye,pe)),!ue)return!1;if(!i.current&&"changedTouches"in k&&(K||ee)&&(i.current=se),!se)return!0;var Te=i.current||se;return gj(Te,j,k,Te==="h"?K:ee)},[]),g=te.useCallback(function(k){var j=k;if(!(!df.length||df[df.length-1]!==u)){var U="deltaY"in j?mE(j):C0(j),N=t.current.filter(function(se){return se.name===j.type&&(se.target===j.target||j.target===se.shadowParent)&&yj(se.delta,U)})[0];if(N&&N.should){j.cancelable&&j.preventDefault();return}if(!N){var K=(h.current.shards||[]).map(gE).filter(Boolean).filter(function(se){return se.contains(j.target)}),ee=K.length>0?o(j,K[0]):!h.current.noIsolation;ee&&j.cancelable&&j.preventDefault()}}},[]),x=te.useCallback(function(k,j,U,N){var K={name:k,delta:j,target:U,should:N,shadowParent:xj(U)};t.current.push(K),setTimeout(function(){t.current=t.current.filter(function(ee){return ee!==K})},1)},[]),E=te.useCallback(function(k){r.current=C0(k),i.current=void 0},[]),F=te.useCallback(function(k){x(k.type,mE(k),k.target,o(k,e.lockRef.current))},[]),P=te.useCallback(function(k){x(k.type,C0(k),k.target,o(k,e.lockRef.current))},[]);te.useEffect(function(){return df.push(u),e.setCallbacks({onScrollCapture:F,onWheelCapture:F,onTouchMoveCapture:P}),document.addEventListener("wheel",g,hf),document.addEventListener("touchmove",g,hf),document.addEventListener("touchstart",E,hf),function(){df=df.filter(function(k){return k!==u}),document.removeEventListener("wheel",g,hf),document.removeEventListener("touchmove",g,hf),document.removeEventListener("touchstart",E,hf)}},[]);var C=e.removeScrollBar,D=e.inert;return te.createElement(te.Fragment,null,D?te.createElement(u,{styles:vj(A)}):null,C?te.createElement(cj,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function xj(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const bj=XH(NP,wj);var jP=te.forwardRef(function(e,t){return te.createElement(a1,gc({},e,{ref:t,sideCar:bj}))});jP.classNames=a1.classNames;var Bj=[" ","Enter","ArrowUp","ArrowDown"],Cj=[" ","Enter"],Qd="Select",[l1,A1,Sj]=R2(Qd),[Pp,fZ]=xu(Qd,[Sj,Yv]),c1=Yv(),[Ej,zh]=Pp(Qd),[Fj,Ij]=Pp(Qd),VP=e=>{const{__scopeSelect:t,children:r,open:i,defaultOpen:A,onOpenChange:u,value:h,defaultValue:o,onValueChange:g,dir:x,name:E,autoComplete:F,disabled:P,required:C,form:D}=e,k=c1(t),[j,U]=te.useState(null),[N,K]=te.useState(null),[ee,se]=te.useState(!1),pe=nB(x),[ye,ue]=_p({prop:i,defaultProp:A??!1,onChange:u,caller:Qd}),[Te,Ke]=_p({prop:h,defaultProp:o,onChange:g,caller:Qd}),oe=te.useRef(null),he=j?D||!!j.closest("form"):!0,[Ie,be]=te.useState(new Set),ct=Array.from(Ie).map(Xe=>Xe.props.value).join(";");return Z.jsx(xO,{...k,children:Z.jsxs(Ej,{required:C,scope:t,trigger:j,onTriggerChange:U,valueNode:N,onValueNodeChange:K,valueNodeHasChildren:ee,onValueNodeHasChildrenChange:se,contentId:qv(),value:Te,onValueChange:Ke,open:ye,onOpenChange:ue,dir:pe,triggerPointerDownPosRef:oe,disabled:P,children:[Z.jsx(l1.Provider,{scope:t,children:Z.jsx(Fj,{scope:e.__scopeSelect,onNativeOptionAdd:te.useCallback(Xe=>{be(lt=>new Set(lt).add(Xe))},[]),onNativeOptionRemove:te.useCallback(Xe=>{be(lt=>{const Le=new Set(lt);return Le.delete(Xe),Le})},[]),children:r})}),he?Z.jsxs(fL,{"aria-hidden":!0,required:C,tabIndex:-1,name:E,autoComplete:F,value:Te,onChange:Xe=>Ke(Xe.target.value),disabled:P,form:D,children:[Te===void 0?Z.jsx("option",{value:""}):null,Array.from(Ie)]},ct):null]})})};VP.displayName=Qd;var KP="SelectTrigger",GP=te.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:i=!1,...A}=e,u=c1(r),h=zh(KP,r),o=h.disabled||i,g=li(t,h.onTriggerChange),x=A1(r),E=te.useRef("touch"),[F,P,C]=mL(k=>{const j=x().filter(K=>!K.disabled),U=j.find(K=>K.value===h.value),N=gL(j,k,U);N!==void 0&&h.onValueChange(N.value)}),D=k=>{o||(h.onOpenChange(!0),C()),k&&(h.triggerPointerDownPosRef.current={x:Math.round(k.pageX),y:Math.round(k.pageY)})};return Z.jsx(R3,{asChild:!0,...u,children:Z.jsx(bn.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":pL(h.value)?"":void 0,...A,ref:g,onClick:on(A.onClick,k=>{k.currentTarget.focus(),E.current!=="mouse"&&D(k)}),onPointerDown:on(A.onPointerDown,k=>{E.current=k.pointerType;const j=k.target;j.hasPointerCapture(k.pointerId)&&j.releasePointerCapture(k.pointerId),k.button===0&&k.ctrlKey===!1&&k.pointerType==="mouse"&&(D(k),k.preventDefault())}),onKeyDown:on(A.onKeyDown,k=>{const j=F.current!=="";!(k.ctrlKey||k.altKey||k.metaKey)&&k.key.length===1&&P(k.key),!(j&&k.key===" ")&&Bj.includes(k.key)&&(D(),k.preventDefault())})})})});GP.displayName=KP;var $P="SelectValue",qP=te.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:A,children:u,placeholder:h="",...o}=e,g=zh($P,r),{onValueNodeHasChildrenChange:x}=g,E=u!==void 0,F=li(t,g.onValueNodeChange);return bo(()=>{x(E)},[x,E]),Z.jsx(bn.span,{...o,ref:F,style:{pointerEvents:"none"},children:pL(g.value)?Z.jsx(Z.Fragment,{children:h}):u})});qP.displayName=$P;var Tj="SelectIcon",WP=te.forwardRef((e,t)=>{const{__scopeSelect:r,children:i,...A}=e;return Z.jsx(bn.span,{"aria-hidden":!0,...A,ref:t,children:i||"▼"})});WP.displayName=Tj;var Pj="SelectPortal",ZP=e=>Z.jsx(N2,{asChild:!0,...e});ZP.displayName=Pj;var Rd="SelectContent",XP=te.forwardRef((e,t)=>{const r=zh(Rd,e.__scopeSelect),[i,A]=te.useState();if(bo(()=>{A(new DocumentFragment)},[]),!r.open){const u=i;return u?Od.createPortal(Z.jsx(YP,{scope:e.__scopeSelect,children:Z.jsx(l1.Slot,{scope:e.__scopeSelect,children:Z.jsx("div",{children:e.children})})}),u):null}return Z.jsx(JP,{...e,ref:t})});XP.displayName=Rd;var bA=10,[YP,Hh]=Pp(Rd),Lj="SelectContentImpl",Mj=Ag("SelectContent.RemoveScroll"),JP=te.forwardRef((e,t)=>{const{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:A,onEscapeKeyDown:u,onPointerDownOutside:h,side:o,sideOffset:g,align:x,alignOffset:E,arrowPadding:F,collisionBoundary:P,collisionPadding:C,sticky:D,hideWhenDetached:k,avoidCollisions:j,...U}=e,N=zh(Rd,r),[K,ee]=te.useState(null),[se,pe]=te.useState(null),ye=li(t,Ze=>ee(Ze)),[ue,Te]=te.useState(null),[Ke,oe]=te.useState(null),he=A1(r),[Ie,be]=te.useState(!1),ct=te.useRef(!1);te.useEffect(()=>{if(K)return zH(K)},[K]),TH();const Xe=te.useCallback(Ze=>{const[pt,...dt]=he().map($t=>$t.ref.current),[Qt]=dt.slice(-1),Mt=document.activeElement;for(const $t of Ze)if($t===Mt||($t==null||$t.scrollIntoView({block:"nearest"}),$t===pt&&se&&(se.scrollTop=0),$t===Qt&&se&&(se.scrollTop=se.scrollHeight),$t==null||$t.focus(),document.activeElement!==Mt))return},[he,se]),lt=te.useCallback(()=>Xe([ue,K]),[Xe,ue,K]);te.useEffect(()=>{Ie&&lt()},[Ie,lt]);const{onOpenChange:Le,triggerPointerDownPosRef:ze}=N;te.useEffect(()=>{if(K){let Ze={x:0,y:0};const pt=Qt=>{var Mt,$t;Ze={x:Math.abs(Math.round(Qt.pageX)-(((Mt=ze.current)==null?void 0:Mt.x)??0)),y:Math.abs(Math.round(Qt.pageY)-((($t=ze.current)==null?void 0:$t.y)??0))}},dt=Qt=>{Ze.x<=10&&Ze.y<=10?Qt.preventDefault():K.contains(Qt.target)||Le(!1),document.removeEventListener("pointermove",pt),ze.current=null};return ze.current!==null&&(document.addEventListener("pointermove",pt),document.addEventListener("pointerup",dt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pt),document.removeEventListener("pointerup",dt,{capture:!0})}}},[K,Le,ze]),te.useEffect(()=>{const Ze=()=>Le(!1);return window.addEventListener("blur",Ze),window.addEventListener("resize",Ze),()=>{window.removeEventListener("blur",Ze),window.removeEventListener("resize",Ze)}},[Le]);const[it,Lt]=mL(Ze=>{const pt=he().filter(Mt=>!Mt.disabled),dt=pt.find(Mt=>Mt.ref.current===document.activeElement),Qt=gL(pt,Ze,dt);Qt&&setTimeout(()=>Qt.ref.current.focus())}),ne=te.useCallback((Ze,pt,dt)=>{const Qt=!ct.current&&!dt;(N.value!==void 0&&N.value===pt||Qt)&&(Te(Ze),Qt&&(ct.current=!0))},[N.value]),Be=te.useCallback(()=>K==null?void 0:K.focus(),[K]),Pe=te.useCallback((Ze,pt,dt)=>{const Qt=!ct.current&&!dt;(N.value!==void 0&&N.value===pt||Qt)&&oe(Ze)},[N.value]),$e=i==="popper"?qx:eL,nt=$e===qx?{side:o,sideOffset:g,align:x,alignOffset:E,arrowPadding:F,collisionBoundary:P,collisionPadding:C,sticky:D,hideWhenDetached:k,avoidCollisions:j}:{};return Z.jsx(YP,{scope:r,content:K,viewport:se,onViewportChange:pe,itemRefCallback:ne,selectedItem:ue,onItemLeave:Be,itemTextRefCallback:Pe,focusSelectedItem:lt,selectedItemText:Ke,position:i,isPositioned:Ie,searchRef:it,children:Z.jsx(jP,{as:Mj,allowPinchZoom:!0,children:Z.jsx(MP,{asChild:!0,trapped:N.open,onMountAutoFocus:Ze=>{Ze.preventDefault()},onUnmountAutoFocus:on(A,Ze=>{var pt;(pt=N.trigger)==null||pt.focus({preventScroll:!0}),Ze.preventDefault()}),children:Z.jsx(jv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:Ze=>Ze.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:Z.jsx($e,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:Ze=>Ze.preventDefault(),...U,...nt,onPlaced:()=>be(!0),ref:ye,style:{display:"flex",flexDirection:"column",outline:"none",...U.style},onKeyDown:on(U.onKeyDown,Ze=>{const pt=Ze.ctrlKey||Ze.altKey||Ze.metaKey;if(Ze.key==="Tab"&&Ze.preventDefault(),!pt&&Ze.key.length===1&&Lt(Ze.key),["ArrowUp","ArrowDown","Home","End"].includes(Ze.key)){let Qt=he().filter(Mt=>!Mt.disabled).map(Mt=>Mt.ref.current);if(["ArrowUp","End"].includes(Ze.key)&&(Qt=Qt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ze.key)){const Mt=Ze.target,$t=Qt.indexOf(Mt);Qt=Qt.slice($t+1)}setTimeout(()=>Xe(Qt)),Ze.preventDefault()}})})})})})})});JP.displayName=Lj;var kj="SelectItemAlignedPosition",eL=te.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:i,...A}=e,u=zh(Rd,r),h=Hh(Rd,r),[o,g]=te.useState(null),[x,E]=te.useState(null),F=li(t,ye=>E(ye)),P=A1(r),C=te.useRef(!1),D=te.useRef(!0),{viewport:k,selectedItem:j,selectedItemText:U,focusSelectedItem:N}=h,K=te.useCallback(()=>{if(u.trigger&&u.valueNode&&o&&x&&k&&j&&U){const ye=u.trigger.getBoundingClientRect(),ue=x.getBoundingClientRect(),Te=u.valueNode.getBoundingClientRect(),Ke=U.getBoundingClientRect();if(u.dir!=="rtl"){const Mt=Ke.left-ue.left,$t=Te.left-Mt,jt=ye.left-$t,vr=ye.width+jt,It=Math.max(vr,ue.width),Ge=window.innerWidth-bA,Cr=aE($t,[bA,Math.max(bA,Ge-It)]);o.style.minWidth=vr+"px",o.style.left=Cr+"px"}else{const Mt=ue.right-Ke.right,$t=window.innerWidth-Te.right-Mt,jt=window.innerWidth-ye.right-$t,vr=ye.width+jt,It=Math.max(vr,ue.width),Ge=window.innerWidth-bA,Cr=aE($t,[bA,Math.max(bA,Ge-It)]);o.style.minWidth=vr+"px",o.style.right=Cr+"px"}const oe=P(),he=window.innerHeight-bA*2,Ie=k.scrollHeight,be=window.getComputedStyle(x),ct=parseInt(be.borderTopWidth,10),Xe=parseInt(be.paddingTop,10),lt=parseInt(be.borderBottomWidth,10),Le=parseInt(be.paddingBottom,10),ze=ct+Xe+Ie+Le+lt,it=Math.min(j.offsetHeight*5,ze),Lt=window.getComputedStyle(k),ne=parseInt(Lt.paddingTop,10),Be=parseInt(Lt.paddingBottom,10),Pe=ye.top+ye.height/2-bA,$e=he-Pe,nt=j.offsetHeight/2,Ze=j.offsetTop+nt,pt=ct+Xe+Ze,dt=ze-pt;if(pt<=Pe){const Mt=oe.length>0&&j===oe[oe.length-1].ref.current;o.style.bottom="0px";const $t=x.clientHeight-k.offsetTop-k.offsetHeight,jt=Math.max($e,nt+(Mt?Be:0)+$t+lt),vr=pt+jt;o.style.height=vr+"px"}else{const Mt=oe.length>0&&j===oe[0].ref.current;o.style.top="0px";const jt=Math.max(Pe,ct+k.offsetTop+(Mt?ne:0)+nt)+dt;o.style.height=jt+"px",k.scrollTop=pt-Pe+k.offsetTop}o.style.margin=`${bA}px 0`,o.style.minHeight=it+"px",o.style.maxHeight=he+"px",i==null||i(),requestAnimationFrame(()=>C.current=!0)}},[P,u.trigger,u.valueNode,o,x,k,j,U,u.dir,i]);bo(()=>K(),[K]);const[ee,se]=te.useState();bo(()=>{x&&se(window.getComputedStyle(x).zIndex)},[x]);const pe=te.useCallback(ye=>{ye&&D.current===!0&&(K(),N==null||N(),D.current=!1)},[K,N]);return Z.jsx(Qj,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:C,onScrollButtonChange:pe,children:Z.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ee},children:Z.jsx(bn.div,{...A,ref:F,style:{boxSizing:"border-box",maxHeight:"100%",...A.style}})})})});eL.displayName=kj;var Uj="SelectPopperPosition",qx=te.forwardRef((e,t)=>{const{__scopeSelect:r,align:i="start",collisionPadding:A=bA,...u}=e,h=c1(r);return Z.jsx(N3,{...h,...u,ref:t,align:i,collisionPadding:A,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qx.displayName=Uj;var[Qj,oB]=Pp(Rd,{}),Wx="SelectViewport",tL=te.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:i,...A}=e,u=Hh(Wx,r),h=oB(Wx,r),o=li(t,u.onViewportChange),g=te.useRef(0);return Z.jsxs(Z.Fragment,{children:[Z.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),Z.jsx(l1.Slot,{scope:r,children:Z.jsx(bn.div,{"data-radix-select-viewport":"",role:"presentation",...A,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...A.style},onScroll:on(A.onScroll,x=>{const E=x.currentTarget,{contentWrapper:F,shouldExpandOnScrollRef:P}=h;if(P!=null&&P.current&&F){const C=Math.abs(g.current-E.scrollTop);if(C>0){const D=window.innerHeight-bA*2,k=parseFloat(F.style.minHeight),j=parseFloat(F.style.height),U=Math.max(k,j);if(U<D){const N=U+C,K=Math.min(D,N),ee=N-K;F.style.height=K+"px",F.style.bottom==="0px"&&(E.scrollTop=ee>0?ee:0,F.style.justifyContent="flex-end")}}}g.current=E.scrollTop})})})]})});tL.displayName=Wx;var rL="SelectGroup",[Rj,Nj]=Pp(rL),Dj=te.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,A=qv();return Z.jsx(Rj,{scope:r,id:A,children:Z.jsx(bn.div,{role:"group","aria-labelledby":A,...i,ref:t})})});Dj.displayName=rL;var nL="SelectLabel",iL=te.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,A=Nj(nL,r);return Z.jsx(bn.div,{id:A.id,...i,ref:t})});iL.displayName=nL;var sv="SelectItem",[Oj,sL]=Pp(sv),oL=te.forwardRef((e,t)=>{const{__scopeSelect:r,value:i,disabled:A=!1,textValue:u,...h}=e,o=zh(sv,r),g=Hh(sv,r),x=o.value===i,[E,F]=te.useState(u??""),[P,C]=te.useState(!1),D=li(t,N=>{var K;return(K=g.itemRefCallback)==null?void 0:K.call(g,N,i,A)}),k=qv(),j=te.useRef("touch"),U=()=>{A||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Z.jsx(Oj,{scope:r,value:i,disabled:A,textId:k,isSelected:x,onItemTextChange:te.useCallback(N=>{F(K=>K||((N==null?void 0:N.textContent)??"").trim())},[]),children:Z.jsx(l1.ItemSlot,{scope:r,value:i,disabled:A,textValue:E,children:Z.jsx(bn.div,{role:"option","aria-labelledby":k,"data-highlighted":P?"":void 0,"aria-selected":x&&P,"data-state":x?"checked":"unchecked","aria-disabled":A||void 0,"data-disabled":A?"":void 0,tabIndex:A?void 0:-1,...h,ref:D,onFocus:on(h.onFocus,()=>C(!0)),onBlur:on(h.onBlur,()=>C(!1)),onClick:on(h.onClick,()=>{j.current!=="mouse"&&U()}),onPointerUp:on(h.onPointerUp,()=>{j.current==="mouse"&&U()}),onPointerDown:on(h.onPointerDown,N=>{j.current=N.pointerType}),onPointerMove:on(h.onPointerMove,N=>{var K;j.current=N.pointerType,A?(K=g.onItemLeave)==null||K.call(g):j.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:on(h.onPointerLeave,N=>{var K;N.currentTarget===document.activeElement&&((K=g.onItemLeave)==null||K.call(g))}),onKeyDown:on(h.onKeyDown,N=>{var ee;((ee=g.searchRef)==null?void 0:ee.current)!==""&&N.key===" "||(Cj.includes(N.key)&&U(),N.key===" "&&N.preventDefault())})})})})});oL.displayName=sv;var _m="SelectItemText",aL=te.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:A,...u}=e,h=zh(_m,r),o=Hh(_m,r),g=sL(_m,r),x=Ij(_m,r),[E,F]=te.useState(null),P=li(t,U=>F(U),g.onItemTextChange,U=>{var N;return(N=o.itemTextRefCallback)==null?void 0:N.call(o,U,g.value,g.disabled)}),C=E==null?void 0:E.textContent,D=te.useMemo(()=>Z.jsx("option",{value:g.value,disabled:g.disabled,children:C},g.value),[g.disabled,g.value,C]),{onNativeOptionAdd:k,onNativeOptionRemove:j}=x;return bo(()=>(k(D),()=>j(D)),[k,j,D]),Z.jsxs(Z.Fragment,{children:[Z.jsx(bn.span,{id:g.textId,...u,ref:P}),g.isSelected&&h.valueNode&&!h.valueNodeHasChildren?Od.createPortal(u.children,h.valueNode):null]})});aL.displayName=_m;var lL="SelectItemIndicator",AL=te.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return sL(lL,r).isSelected?Z.jsx(bn.span,{"aria-hidden":!0,...i,ref:t}):null});AL.displayName=lL;var Zx="SelectScrollUpButton",cL=te.forwardRef((e,t)=>{const r=Hh(Zx,e.__scopeSelect),i=oB(Zx,e.__scopeSelect),[A,u]=te.useState(!1),h=li(t,i.onScrollButtonChange);return bo(()=>{if(r.viewport&&r.isPositioned){let o=function(){const x=g.scrollTop>0;u(x)};const g=r.viewport;return o(),g.addEventListener("scroll",o),()=>g.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),A?Z.jsx(hL,{...e,ref:h,onAutoScroll:()=>{const{viewport:o,selectedItem:g}=r;o&&g&&(o.scrollTop=o.scrollTop-g.offsetHeight)}}):null});cL.displayName=Zx;var Xx="SelectScrollDownButton",uL=te.forwardRef((e,t)=>{const r=Hh(Xx,e.__scopeSelect),i=oB(Xx,e.__scopeSelect),[A,u]=te.useState(!1),h=li(t,i.onScrollButtonChange);return bo(()=>{if(r.viewport&&r.isPositioned){let o=function(){const x=g.scrollHeight-g.clientHeight,E=Math.ceil(g.scrollTop)<x;u(E)};const g=r.viewport;return o(),g.addEventListener("scroll",o),()=>g.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),A?Z.jsx(hL,{...e,ref:h,onAutoScroll:()=>{const{viewport:o,selectedItem:g}=r;o&&g&&(o.scrollTop=o.scrollTop+g.offsetHeight)}}):null});uL.displayName=Xx;var hL=te.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:i,...A}=e,u=Hh("SelectScrollButton",r),h=te.useRef(null),o=A1(r),g=te.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return te.useEffect(()=>()=>g(),[g]),bo(()=>{var E;const x=o().find(F=>F.ref.current===document.activeElement);(E=x==null?void 0:x.ref.current)==null||E.scrollIntoView({block:"nearest"})},[o]),Z.jsx(bn.div,{"aria-hidden":!0,...A,ref:t,style:{flexShrink:0,...A.style},onPointerDown:on(A.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(i,50))}),onPointerMove:on(A.onPointerMove,()=>{var x;(x=u.onItemLeave)==null||x.call(u),h.current===null&&(h.current=window.setInterval(i,50))}),onPointerLeave:on(A.onPointerLeave,()=>{g()})})}),zj="SelectSeparator",dL=te.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return Z.jsx(bn.div,{"aria-hidden":!0,...i,ref:t})});dL.displayName=zj;var Yx="SelectArrow",Hj=te.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,A=c1(r),u=zh(Yx,r),h=Hh(Yx,r);return u.open&&h.position==="popper"?Z.jsx(D3,{...A,...i,ref:t}):null});Hj.displayName=Yx;var jj="SelectBubbleInput",fL=te.forwardRef(({__scopeSelect:e,value:t,...r},i)=>{const A=te.useRef(null),u=li(i,A),h=iB(t);return te.useEffect(()=>{const o=A.current;if(!o)return;const g=window.HTMLSelectElement.prototype,E=Object.getOwnPropertyDescriptor(g,"value").set;if(h!==t&&E){const F=new Event("change",{bubbles:!0});E.call(o,t),o.dispatchEvent(F)}},[h,t]),Z.jsx(bn.select,{...r,style:{...MT,...r.style},ref:u,defaultValue:t})});fL.displayName=jj;function pL(e){return e===""||e===void 0}function mL(e){const t=Gl(e),r=te.useRef(""),i=te.useRef(0),A=te.useCallback(h=>{const o=r.current+h;t(o),function g(x){r.current=x,window.clearTimeout(i.current),x!==""&&(i.current=window.setTimeout(()=>g(""),1e3))}(o)},[t]),u=te.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return te.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,A,u]}function gL(e,t,r){const A=t.length>1&&Array.from(t).every(x=>x===t[0])?t[0]:t,u=r?e.indexOf(r):-1;let h=Vj(e,Math.max(u,0));A.length===1&&(h=h.filter(x=>x!==r));const g=h.find(x=>x.textValue.toLowerCase().startsWith(A.toLowerCase()));return g!==r?g:void 0}function Vj(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var Kj=VP,yL=GP,Gj=qP,$j=WP,qj=ZP,vL=XP,Wj=tL,_L=iL,wL=oL,Zj=aL,Xj=AL,xL=cL,bL=uL,BL=dL;const Jx=Kj,eb=Gj,ov=te.forwardRef(({className:e,children:t,...r},i)=>Z.jsxs(yL,{ref:i,className:Nn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,Z.jsx($j,{asChild:!0,children:Z.jsx(n3,{className:"h-4 w-4 opacity-50"})})]}));ov.displayName=yL.displayName;const CL=te.forwardRef(({className:e,...t},r)=>Z.jsx(xL,{ref:r,className:Nn("flex cursor-default items-center justify-center py-1",e),...t,children:Z.jsx(UN,{className:"h-4 w-4"})}));CL.displayName=xL.displayName;const SL=te.forwardRef(({className:e,...t},r)=>Z.jsx(bL,{ref:r,className:Nn("flex cursor-default items-center justify-center py-1",e),...t,children:Z.jsx(n3,{className:"h-4 w-4"})}));SL.displayName=bL.displayName;const av=te.forwardRef(({className:e,children:t,position:r="popper",...i},A)=>Z.jsx(qj,{children:Z.jsxs(vL,{ref:A,className:Nn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[Z.jsx(CL,{}),Z.jsx(Wj,{className:Nn("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Z.jsx(SL,{})]})}));av.displayName=vL.displayName;const Yj=te.forwardRef(({className:e,...t},r)=>Z.jsx(_L,{ref:r,className:Nn("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Yj.displayName=_L.displayName;const lv=te.forwardRef(({className:e,children:t,...r},i)=>Z.jsxs(wL,{ref:i,className:Nn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Z.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Z.jsx(Xj,{children:Z.jsx(r3,{className:"h-4 w-4"})})}),Z.jsx(Zj,{children:t})]}));lv.displayName=wL.displayName;const Jj=te.forwardRef(({className:e,...t},r)=>Z.jsx(BL,{ref:r,className:Nn("-mx-1 my-1 h-px bg-muted",e),...t}));Jj.displayName=BL.displayName;var u1="Checkbox",[e7,pZ]=xu(u1),[t7,aB]=e7(u1);function r7(e){const{__scopeCheckbox:t,checked:r,children:i,defaultChecked:A,disabled:u,form:h,name:o,onCheckedChange:g,required:x,value:E="on",internal_do_not_use_render:F}=e,[P,C]=_p({prop:r,defaultProp:A??!1,onChange:g,caller:u1}),[D,k]=te.useState(null),[j,U]=te.useState(null),N=te.useRef(!1),K=D?!!h||!!D.closest("form"):!0,ee={checked:P,disabled:u,setChecked:C,control:D,setControl:k,name:o,form:h,value:E,hasConsumerStoppedPropagationRef:N,required:x,defaultChecked:Fh(A)?!1:A,isFormControl:K,bubbleInput:j,setBubbleInput:U};return Z.jsx(t7,{scope:t,...ee,children:n7(F)?F(ee):i})}var EL="CheckboxTrigger",FL=te.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...i},A)=>{const{control:u,value:h,disabled:o,checked:g,required:x,setControl:E,setChecked:F,hasConsumerStoppedPropagationRef:P,isFormControl:C,bubbleInput:D}=aB(EL,e),k=li(A,E),j=te.useRef(g);return te.useEffect(()=>{const U=u==null?void 0:u.form;if(U){const N=()=>F(j.current);return U.addEventListener("reset",N),()=>U.removeEventListener("reset",N)}},[u,F]),Z.jsx(bn.button,{type:"button",role:"checkbox","aria-checked":Fh(g)?"mixed":g,"aria-required":x,"data-state":ML(g),"data-disabled":o?"":void 0,disabled:o,value:h,...i,ref:k,onKeyDown:on(t,U=>{U.key==="Enter"&&U.preventDefault()}),onClick:on(r,U=>{F(N=>Fh(N)?!0:!N),D&&C&&(P.current=U.isPropagationStopped(),P.current||U.stopPropagation())})})});FL.displayName=EL;var lB=te.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:i,checked:A,defaultChecked:u,required:h,disabled:o,value:g,onCheckedChange:x,form:E,...F}=e;return Z.jsx(r7,{__scopeCheckbox:r,checked:A,defaultChecked:u,disabled:o,required:h,onCheckedChange:x,name:i,form:E,value:g,internal_do_not_use_render:({isFormControl:P})=>Z.jsxs(Z.Fragment,{children:[Z.jsx(FL,{...F,ref:t,__scopeCheckbox:r}),P&&Z.jsx(LL,{__scopeCheckbox:r})]})})});lB.displayName=u1;var IL="CheckboxIndicator",TL=te.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:i,...A}=e,u=aB(IL,r);return Z.jsx(Fg,{present:i||Fh(u.checked)||u.checked===!0,children:Z.jsx(bn.span,{"data-state":ML(u.checked),"data-disabled":u.disabled?"":void 0,...A,ref:t,style:{pointerEvents:"none",...e.style}})})});TL.displayName=IL;var PL="CheckboxBubbleInput",LL=te.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:i,hasConsumerStoppedPropagationRef:A,checked:u,defaultChecked:h,required:o,disabled:g,name:x,value:E,form:F,bubbleInput:P,setBubbleInput:C}=aB(PL,e),D=li(r,C),k=iB(u),j=Z2(i);te.useEffect(()=>{const N=P;if(!N)return;const K=window.HTMLInputElement.prototype,se=Object.getOwnPropertyDescriptor(K,"checked").set,pe=!A.current;if(k!==u&&se){const ye=new Event("click",{bubbles:pe});N.indeterminate=Fh(u),se.call(N,Fh(u)?!1:u),N.dispatchEvent(ye)}},[P,k,u,A]);const U=te.useRef(Fh(u)?!1:u);return Z.jsx(bn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??U.current,required:o,disabled:g,name:x,value:E,form:F,...t,tabIndex:-1,ref:D,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});LL.displayName=PL;function n7(e){return typeof e=="function"}function Fh(e){return e==="indeterminate"}function ML(e){return Fh(e)?"indeterminate":e?"checked":"unchecked"}const tb=te.forwardRef(({className:e,...t},r)=>Z.jsx(lB,{ref:r,className:Nn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:Z.jsx(TL,{className:Nn("flex items-center justify-center text-current"),children:Z.jsx(r3,{className:"h-4 w-4"})})}));tb.displayName=lB.displayName;var i7="Separator",yE="horizontal",s7=["horizontal","vertical"],kL=te.forwardRef((e,t)=>{const{decorative:r,orientation:i=yE,...A}=e,u=o7(i)?i:yE,o=r?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return Z.jsx(bn.div,{"data-orientation":u,...o,...A,ref:t})});kL.displayName=i7;function o7(e){return s7.includes(e)}var UL=kL;const QL=te.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...i},A)=>Z.jsx(UL,{ref:A,decorative:r,orientation:t,className:Nn("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...i}));QL.displayName=UL.displayName;function a7({allZipData:e,isExporting:t,onExport:r,onCancel:i}){const[A,u]=te.useState("national"),[h,o]=te.useState(""),[g,x]=te.useState(""),[E,F]=te.useState("png"),[P,C]=te.useState(!0),[D,k]=te.useState(!0),{availableStates:j,availableMetros:U}=te.useMemo(()=>{if(Object.keys(e).length===0)return{availableStates:[],availableMetros:[]};const pe=new Set,ye=new Set;for(const ue of Object.values(e))ue.state&&pe.add(ue.state),ue.parent_metro&&ye.add(ue.parent_metro);return{availableStates:Array.from(pe).sort(),availableMetros:Array.from(ye).sort()}},[e]),N=()=>{r({regionScope:A,selectedState:h,selectedMetro:g,fileFormat:E,includeLegend:P,includeTitle:D})},K=()=>!!(t||A==="state"&&!h||A==="metro"&&!g),ee=pe=>u(pe),se=pe=>F(pe);return Z.jsx("div",{className:"absolute top-0 left-0 w-80 bg-background border-r h-full overflow-y-auto z-20 shadow-xl",children:Z.jsxs("div",{className:"p-6 space-y-6",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:Z.jsx(zN,{className:"h-5 w-5 text-primary"})}),Z.jsxs("div",{children:[Z.jsx("h2",{className:"text-lg font-semibold",children:"Export Map"}),Z.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure your export settings"})]})]}),Z.jsxs(Sh,{children:[Z.jsx(Nm,{children:Z.jsxs(Dm,{className:"text-sm flex items-center gap-2",children:[Z.jsx(ON,{className:"h-4 w-4"}),"Region Scope"]})}),Z.jsxs(Eh,{className:"space-y-4",children:[Z.jsxs(Gx,{value:A,onValueChange:ee,children:[Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(xf,{value:"national",id:"r-national"}),Z.jsx(Xu,{htmlFor:"r-national",children:"National"})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(xf,{value:"state",id:"r-state"}),Z.jsx(Xu,{htmlFor:"r-state",children:"State"})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(xf,{value:"metro",id:"r-metro"}),Z.jsx(Xu,{htmlFor:"r-metro",children:"Metro Area"})]})]}),A==="state"&&Z.jsxs(Jx,{value:h,onValueChange:o,children:[Z.jsx(ov,{children:Z.jsx(eb,{placeholder:"Select a state"})}),Z.jsx(av,{children:j.map(pe=>Z.jsx(lv,{value:pe,children:pe},pe))})]}),A==="metro"&&Z.jsxs(Jx,{value:g,onValueChange:x,children:[Z.jsx(ov,{children:Z.jsx(eb,{placeholder:"Select a metro area"})}),Z.jsx(av,{children:U.map(pe=>Z.jsx(lv,{value:pe,children:pe},pe))})]})]})]}),Z.jsxs(Sh,{children:[Z.jsx(Nm,{children:Z.jsxs(Dm,{className:"text-sm flex items-center gap-2",children:[Z.jsx(RN,{className:"h-4 w-4"}),"File Format"]})}),Z.jsx(Eh,{children:Z.jsxs(Gx,{value:E,onValueChange:se,children:[Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(xf,{value:"png",id:"r-png"}),Z.jsx(Xu,{htmlFor:"r-png",children:"PNG (Image)"})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(xf,{value:"pdf",id:"r-pdf"}),Z.jsx(Xu,{htmlFor:"r-pdf",children:"PDF (Document)"})]})]})})]}),Z.jsxs(Sh,{children:[Z.jsx(Nm,{children:Z.jsx(Dm,{className:"text-sm",children:"Customization"})}),Z.jsxs(Eh,{className:"space-y-2",children:[Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(tb,{id:"c-title",checked:D,onCheckedChange:pe=>k(pe===!0)}),Z.jsx(Xu,{htmlFor:"c-title",children:"Include Title"})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(tb,{id:"c-legend",checked:P,onCheckedChange:pe=>C(pe===!0)}),Z.jsx(Xu,{htmlFor:"c-legend",children:"Include Legend"})]})]})]}),Z.jsx(QL,{}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsx(Xo,{onClick:N,disabled:K(),className:"w-full",size:"lg",children:t?"Processing...":Z.jsxs(Z.Fragment,{children:[Z.jsx(i3,{className:"h-4 w-4 mr-2"}),"Export ",E.toUpperCase()]})}),Z.jsx(Xo,{onClick:i,variant:"outline",className:"w-full",disabled:t,children:"Cancel"})]})]})})}var RL={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.1/LICENSE.txt
 */(function(e,t){(function(r,i){e.exports=i()})(s6,function(){var r={},i={};function A(h,o,g){if(i[h]=g,h==="index"){var x="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",E={};return i.shared(E),i.index(r,E),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))),r}}A("shared",["exports"],function(h){function o(c,s,l,d){return new(l||(l=Promise))(function(m,_){function w(R){try{L(d.next(R))}catch(H){_(H)}}function S(R){try{L(d.throw(R))}catch(H){_(H)}}function L(R){var H;R.done?m(R.value):(H=R.value,H instanceof l?H:new l(function(G){G(H)})).then(w,S)}L((d=d.apply(c,s||[])).next())})}function g(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var x,E;function F(){if(E)return x;function c(s,l){this.x=s,this.y=l}return E=1,x=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,l){return this.clone()._rotateAround(s,l)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var l=s.x-this.x,d=s.y-this.y;return l*l+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,l){return Math.atan2(this.x*l-this.y*s,this.x*s+this.y*l)},_matMult:function(s){var l=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=l,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var l=Math.cos(s),d=Math.sin(s),m=d*this.x+l*this.y;return this.x=l*this.x-d*this.y,this.y=m,this},_rotateAround:function(s,l){var d=Math.cos(s),m=Math.sin(s),_=l.y+m*(this.x-l.x)+d*(this.y-l.y);return this.x=l.x+d*(this.x-l.x)-m*(this.y-l.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(s){return s instanceof c?s:Array.isArray(s)?new c(s[0],s[1]):s},x}typeof SuppressedError=="function"&&SuppressedError;var P,C,D=g(F()),k=function(){if(C)return P;function c(s,l,d,m){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=l,this.p2x=d,this.p2y=m}return C=1,P=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,l){if(l===void 0&&(l=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,m=0;m<8;m++){var _=this.sampleCurveX(d)-s;if(Math.abs(_)<l)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=_/w}var S=0,L=1;for(d=s,m=0;m<20&&(_=this.sampleCurveX(d),!(Math.abs(_-s)<l));m++)s>_?S=d:L=d,d=.5*(L-S)+S;return d},solve:function(s,l){return this.sampleCurveY(this.solveCurveX(s,l))}},P}(),j=g(k);let U,N;function K(){return U==null&&(U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),U}function ee(){if(N==null&&(N=!1,K())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let d=0;d<5*5;d++){const m=4*d;s.fillStyle=`rgb(${m},${m+1},${m+2})`,s.fillRect(d%5,Math.floor(d/5),1,1)}const l=s.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&l[d]!==d){N=!0;break}}}return N||!1}var se=1e-6,pe=typeof Float32Array<"u"?Float32Array:Array;function ye(){var c=new pe(9);return pe!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function ue(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Te(){var c=new pe(3);return pe!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function Ke(c){return Math.hypot(c[0],c[1],c[2])}function oe(c,s,l){var d=new pe(3);return d[0]=c,d[1]=s,d[2]=l,d}function he(c,s,l){return c[0]=s[0]+l[0],c[1]=s[1]+l[1],c[2]=s[2]+l[2],c}function Ie(c,s,l){return c[0]=s[0]*l,c[1]=s[1]*l,c[2]=s[2]*l,c}function be(c,s,l){var d=s[0],m=s[1],_=s[2],w=l[0],S=l[1],L=l[2];return c[0]=m*L-_*S,c[1]=_*w-d*L,c[2]=d*S-m*w,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var ct,Xe=Ke;function lt(c,s,l){var d=s[0],m=s[1],_=s[2],w=s[3];return c[0]=l[0]*d+l[4]*m+l[8]*_+l[12]*w,c[1]=l[1]*d+l[5]*m+l[9]*_+l[13]*w,c[2]=l[2]*d+l[6]*m+l[10]*_+l[14]*w,c[3]=l[3]*d+l[7]*m+l[11]*_+l[15]*w,c}function Le(){var c=new pe(4);return pe!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function ze(c,s,l,d){var m=.5*Math.PI/180;s*=m,l*=m,d*=m;var _=Math.sin(s),w=Math.cos(s),S=Math.sin(l),L=Math.cos(l),R=Math.sin(d),H=Math.cos(d);return c[0]=_*L*H-w*S*R,c[1]=w*S*H+_*L*R,c[2]=w*L*R-_*S*H,c[3]=w*L*H+_*S*R,c}function it(){var c=new pe(2);return pe!=Float32Array&&(c[0]=0,c[1]=0),c}function Lt(c,s){var l=new pe(2);return l[0]=c,l[1]=s,l}Te(),ct=new pe(4),pe!=Float32Array&&(ct[0]=0,ct[1]=0,ct[2]=0,ct[3]=0),Te(),oe(1,0,0),oe(0,1,0),Le(),Le(),ye(),it();const ne=8192;function Be(c,s,l){return s*(ne/(c.tileSize*Math.pow(2,l-c.tileID.overscaledZ)))}function Pe(c,s){return(c%s+s)%s}function $e(c,s,l){return c*(1-l)+s*l}function nt(c){if(c<=0)return 0;if(c>=1)return 1;const s=c*c,l=s*c;return 4*(c<.5?l:3*(c-s)+l-.75)}function Ze(c,s,l,d){const m=new j(c,s,l,d);return _=>m.solve(_)}const pt=Ze(.25,.1,.25,1);function dt(c,s,l){return Math.min(l,Math.max(s,c))}function Qt(c,s,l){const d=l-s,m=((c-s)%d+d)%d+s;return m===s?l:m}function Mt(c,...s){for(const l of s)for(const d in l)c[d]=l[d];return c}let $t=1;function jt(c,s,l){const d={};for(const m in c)d[m]=s.call(this,c[m],m,c);return d}function vr(c,s,l){const d={};for(const m in c)s.call(this,c[m],m,c)&&(d[m]=c[m]);return d}function It(c){return Array.isArray(c)?c.map(It):typeof c=="object"&&c?jt(c,It):c}const Ge={};function Cr(c){Ge[c]||(typeof console<"u"&&console.warn(c),Ge[c]=!0)}function pr(c,s,l){return(l.y-c.y)*(s.x-c.x)>(s.y-c.y)*(l.x-c.x)}function Kt(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let ar=null;function lr(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const cr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function br(c,s,l,d,m){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(c,{timestamp:0});try{const w=_==null?void 0:_.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const S=w.startsWith("BGR"),L=new Uint8ClampedArray(d*m*4);if(yield _.copyTo(L,function(R,H,G,Y,re){const ie=4*Math.max(-H,0),de=(Math.max(0,G)-G)*Y*4+ie,Ce=4*Y,Ue=Math.max(0,H),st=Math.max(0,G);return{rect:{x:Ue,y:st,width:Math.min(R.width,H+Y)-Ue,height:Math.min(R.height,G+re)-st},layout:[{offset:de,stride:Ce}]}}(c,s,l,d,m)),S)for(let R=0;R<L.length;R+=4){const H=L[R];L[R]=L[R+2],L[R+2]=H}return L}finally{_.close()}})}let Nr,Kr;function Lr(c,s,l,d){return c.addEventListener(s,l,d),{unsubscribe:()=>{c.removeEventListener(s,l,d)}}}function Hr(c){return c*Math.PI/180}function un(c){return c/Math.PI*180}const zr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Yr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ur="AbortError";function At(){return new Error(ur)}const le={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function fe(c){return le.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const _e="global-dispatcher";class Qe extends Error{constructor(s,l,d,m){super(`AJAXError: ${l} (${s}): ${d}`),this.status=s,this.statusText=l,this.url=d,this.body=m}}const et=()=>Kt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,tt=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const d=fe(c.url);if(d)return d(c,s);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:_e},s)}if(!(/^file:/.test(l=c.url)||/^file:/.test(et())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,m){return o(this,void 0,void 0,function*(){const _=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:et(),signal:m.signal});let w,S;d.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{w=yield fetch(_)}catch(R){throw new Qe(0,R.message,d.url,new Blob)}if(!w.ok){const R=yield w.blob();throw new Qe(w.status,w.statusText,d.url,R)}S=d.type==="arrayBuffer"||d.type==="image"?w.arrayBuffer():d.type==="json"?w.json():w.text();const L=yield S;if(m.signal.aborted)throw At();return{data:L,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(c,s);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:_e},s)}var l;return function(d,m){return new Promise((_,w)=>{var S;const L=new XMLHttpRequest;L.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(L.responseType="arraybuffer");for(const R in d.headers)L.setRequestHeader(R,d.headers[R]);d.type==="json"&&(L.responseType="text",!((S=d.headers)===null||S===void 0)&&S.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=d.credentials==="include",L.onerror=()=>{w(new Error(L.statusText))},L.onload=()=>{if(!m.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let R=L.response;if(d.type==="json")try{R=JSON.parse(L.response)}catch(H){return void w(H)}_({data:R,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{const R=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});w(new Qe(L.status,L.statusText,d.url,R))}},m.signal.addEventListener("abort",()=>{L.abort(),w(At())}),L.send(d.body)})}(c,s)};function yt(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),l=window.location;return s.protocol===l.protocol&&s.host===l.host}function rt(c,s,l){l[c]&&l[c].indexOf(s)!==-1||(l[c]=l[c]||[],l[c].push(s))}function Ft(c,s,l){if(l&&l[c]){const d=l[c].indexOf(s);d!==-1&&l[c].splice(d,1)}}class Ct{constructor(s,l={}){Mt(this,l),this.type=s}}class at extends Ct{constructor(s,l={}){super("error",Mt({error:s},l))}}class mt{on(s,l){return this._listeners=this._listeners||{},rt(s,l,this._listeners),{unsubscribe:()=>{this.off(s,l)}}}off(s,l){return Ft(s,l,this._listeners),Ft(s,l,this._oneTimeListeners),this}once(s,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},rt(s,l,this._oneTimeListeners),this):new Promise(d=>this.once(s,d))}fire(s,l){typeof s=="string"&&(s=new Ct(s,l||{}));const d=s.type;if(this.listens(d)){s.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const S of m)S.call(this,s);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const S of _)Ft(d,S,this._oneTimeListeners),S.call(this,s);const w=this._eventedParent;w&&(Mt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(s))}else s instanceof at&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,l){return this._eventedParent=s,this._eventedParentData=l,this}}var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Rt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nr(c,s){const l={};for(const d in c)d!=="ref"&&(l[d]=c[d]);return Rt.forEach(d=>{d in s&&(l[d]=s[d])}),l}function tr(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let l=0;l<c.length;l++)if(!tr(c[l],s[l]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const l in c)if(!tr(c[l],s[l]))return!1;return!0}return c===s}function Ar(c,s){c.push(s)}function qt(c,s,l){Ar(l,{command:"addSource",args:[c,s[c]]})}function Jr(c,s,l){Ar(s,{command:"removeSource",args:[c]}),l[c]=!0}function jr(c,s,l,d){Jr(c,l,d),qt(c,s,l)}function Rr(c,s,l){let d;for(d in c[l])if(Object.prototype.hasOwnProperty.call(c[l],d)&&d!=="data"&&!tr(c[l][d],s[l][d]))return!1;for(d in s[l])if(Object.prototype.hasOwnProperty.call(s[l],d)&&d!=="data"&&!tr(c[l][d],s[l][d]))return!1;return!0}function _r(c,s,l,d,m,_){c=c||{},s=s||{};for(const w in c)Object.prototype.hasOwnProperty.call(c,w)&&(tr(c[w],s[w])||l.push({command:_,args:[d,w,s[w],m]}));for(const w in s)Object.prototype.hasOwnProperty.call(s,w)&&!Object.prototype.hasOwnProperty.call(c,w)&&(tr(c[w],s[w])||l.push({command:_,args:[d,w,s[w],m]}))}function Ur(c){return c.id}function Pn(c,s){return c[s.id]=s,c}class Yt{constructor(s,l,d,m){this.message=(s?`${s}: `:"")+d,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function Wn(c,...s){for(const l of s)for(const d in l)c[d]=l[d];return c}class Bn extends Error{constructor(s,l){super(l),this.message=l,this.key=s}}class Xi{constructor(s,l=[]){this.parent=s,this.bindings={};for(const[d,m]of l)this.bindings[d]=m}concat(s){return new Xi(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const as={kind:"null"},Jt={kind:"number"},Dr={kind:"string"},Vr={kind:"boolean"},Ni={kind:"color"},Ga={kind:"projectionDefinition"},Ls={kind:"object"},$r={kind:"value"},qs={kind:"collator"},va={kind:"formatted"},Ai={kind:"padding"},$l={kind:"colorArray"},_a={kind:"numberArray"},Bo={kind:"resolvedImage"},ql={kind:"variableAnchorOffsetCollection"};function ls(c,s){return{kind:"array",itemType:c,N:s}}function Kn(c){if(c.kind==="array"){const s=Kn(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const Tc=[as,Jt,Dr,Vr,Ni,Ga,va,Ls,ls($r),Ai,_a,$l,Bo,ql];function Wl(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Wl(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const l of Tc)if(!Wl(l,s))return null}}return`Expected ${Kn(c)} but found ${Kn(s)} instead.`}function $a(c,s){return s.some(l=>l.kind===c.kind)}function qa(c,s){return s.some(l=>l==="null"?c===null:l==="array"?Array.isArray(c):l==="object"?c&&!Array.isArray(c)&&typeof c=="object":l===typeof c)}function Dn(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const Pc=.96422,Lc=.82521,Mc=4/29,wa=6/29,bu=3*wa*wa,Co=wa*wa*wa,xa=Math.PI/180,Ws=180/Math.PI;function OA(c){return(c%=360)<0&&(c+=360),c}function Wa([c,s,l,d]){let m,_;const w=zA((.2225045*(c=kc(c))+.7168786*(s=kc(s))+.0606169*(l=kc(l)))/1);c===s&&s===l?m=_=w:(m=zA((.4360747*c+.3850649*s+.1430804*l)/Pc),_=zA((.0139322*c+.0971045*s+.7141733*l)/Lc));const S=116*w-16;return[S<0?0:S,500*(m-w),200*(w-_),d]}function kc(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function zA(c){return c>Co?Math.pow(c,1/3):c/bu+Mc}function Bu([c,s,l,d]){let m=(c+16)/116,_=isNaN(s)?m:m+s/500,w=isNaN(l)?m:m-l/200;return m=1*HA(m),_=Pc*HA(_),w=Lc*HA(w),[Zl(3.1338561*_-1.6168667*m-.4906146*w),Zl(-.9787684*_+1.9161415*m+.033454*w),Zl(.0719453*_-.2289914*m+1.4052427*w),d]}function Zl(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function HA(c){return c>wa?c*c*c:bu*(c-Mc)}const Zs=Object.hasOwn||function(c,s){return Object.prototype.hasOwnProperty.call(c,s)};function an(c,s){return Zs(c,s)?c[s]:void 0}function Jo(c){return parseInt(c.padEnd(2,c),16)/255}function ea(c,s){return Ms(s?c/100:c,0,1)}function Ms(c,s,l){return Math.min(Math.max(s,c),l)}function xl(c){return!c.some(Number.isNaN)}const bl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ks(c,s,l){return c+l*(s-c)}function ei(c,s,l){return c.map((d,m)=>ks(d,s[m],l))}class ln{constructor(s,l,d,m=1,_=!0){this.r=s,this.g=l,this.b=d,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[s,l,d,m]))}static parse(s){if(s instanceof ln)return s;if(typeof s!="string")return;const l=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=an(bl,d);if(m){const[w,S,L]=m;return[w/255,S/255,L/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const w=d.length<6?1:2;let S=1;return[Jo(d.slice(S,S+=w)),Jo(d.slice(S,S+=w)),Jo(d.slice(S,S+=w)),Jo(d.slice(S,S+w)||"ff")]}if(d.startsWith("rgb")){const w=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[S,L,R,H,G,Y,re,ie,de,Ce,Ue,st]=w,Ve=[H||" ",re||" ",Ce].join("");if(Ve==="  "||Ve==="  /"||Ve===",,"||Ve===",,,"){const J=[R,Y,de].join(""),xe=J==="%%%"?100:J===""?255:0;if(xe){const qe=[Ms(+L/xe,0,1),Ms(+G/xe,0,1),Ms(+ie/xe,0,1),Ue?ea(+Ue,st):1];if(xl(qe))return qe}}return}}const _=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[w,S,L,R,H,G,Y,re,ie]=_,de=[L||" ",H||" ",Y].join("");if(de==="  "||de==="  /"||de===",,"||de===",,,"){const Ce=[+S,Ms(+R,0,100),Ms(+G,0,100),re?ea(+re,ie):1];if(xl(Ce))return function([Ue,st,Ve,J]){function xe(qe){const bt=(qe+Ue/30)%12,Ht=st*Math.min(Ve,1-Ve);return Ve-Ht*Math.max(-1,Math.min(bt-3,9-bt,1))}return Ue=OA(Ue),st/=100,Ve/=100,[xe(0),xe(8),xe(4),J]}(Ce)}}}(s);return l?new ln(...l,!1):void 0}get rgb(){const{r:s,g:l,b:d,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[s/_,l/_,d/_,m])}get hcl(){return this.overwriteGetter("hcl",function(s){const[l,d,m,_]=Wa(s),w=Math.sqrt(d*d+m*m);return[Math.round(1e4*w)?OA(Math.atan2(m,d)*Ws):NaN,w,l,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Wa(this.rgb))}overwriteGetter(s,l){return Object.defineProperty(this,s,{value:l}),l}toString(){const[s,l,d,m]=this.rgb;return`rgba(${[s,l,d].map(_=>Math.round(255*_)).join(",")},${m})`}static interpolate(s,l,d,m="rgb"){switch(m){case"rgb":{const[_,w,S,L]=ei(s.rgb,l.rgb,d);return new ln(_,w,S,L,!1)}case"hcl":{const[_,w,S,L]=s.hcl,[R,H,G,Y]=l.hcl;let re,ie;if(isNaN(_)||isNaN(R))isNaN(_)?isNaN(R)?re=NaN:(re=R,S!==1&&S!==0||(ie=H)):(re=_,G!==1&&G!==0||(ie=w));else{let Ve=R-_;R>_&&Ve>180?Ve-=360:R<_&&_-R>180&&(Ve+=360),re=_+d*Ve}const[de,Ce,Ue,st]=function([Ve,J,xe,qe]){return Ve=isNaN(Ve)?0:Ve*xa,Bu([xe,Math.cos(Ve)*J,Math.sin(Ve)*J,qe])}([re,ie??ks(w,H,d),ks(S,G,d),ks(L,Y,d)]);return new ln(de,Ce,Ue,st,!1)}case"lab":{const[_,w,S,L]=Bu(ei(s.lab,l.lab,d));return new ln(_,w,S,L,!1)}}}}ln.black=new ln(0,0,0,1),ln.white=new ln(1,1,1,1),ln.transparent=new ln(0,0,0,0),ln.red=new ln(1,0,0,1);class Bl{constructor(s,l,d){this.sensitivity=s?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,l){return this.collator.compare(s,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const qr=["bottom","center","top"];class Uc{constructor(s,l,d,m,_,w){this.text=s,this.image=l,this.scale=d,this.fontStack=m,this.textColor=_,this.verticalAlign=w}}class Yi{constructor(s){this.sections=s}static fromString(s){return new Yi([new Uc(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof Yi?s:Yi.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class kn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof kn)return s;if(typeof s=="number")return new kn([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const l of s)if(typeof l!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new kn(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,d){return new kn(ei(s.values,l.values,d))}}class Di{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Di)return s;if(typeof s=="number")return new Di([s]);if(Array.isArray(s)){for(const l of s)if(typeof l!="number")return;return new Di(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,d){return new Di(ei(s.values,l.values,d))}}class Ci{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Ci)return s;if(typeof s=="string"){const d=ln.parse(s);return d?new Ci([d]):void 0}if(!Array.isArray(s))return;const l=[];for(const d of s){if(typeof d!="string")return;const m=ln.parse(d);if(!m)return;l.push(m)}return new Ci(l)}toString(){return JSON.stringify(this.values)}static interpolate(s,l,d,m="rgb"){const _=[];if(s.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let w=0;w<s.values.length;w++)_.push(ln.interpolate(s.values[w],l.values[w],d,m));return new Ci(_)}}class Un extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}const Cl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class An{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof An)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let l=0;l<s.length;l+=2){const d=s[l],m=s[l+1];if(typeof d!="string"||!Cl.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new An(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,d){const m=s.values,_=l.values;if(m.length!==_.length)throw new Un(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${l.toString()}`);const w=[];for(let S=0;S<m.length;S+=2){if(m[S]!==_[S])throw new Un(`Cannot interpolate values containing mismatched anchors. from[${S}]: ${m[S]}, to[${S}]: ${_[S]}`);w.push(m[S]);const[L,R]=m[S+1],[H,G]=_[S+1];w.push([ks(L,H,d),ks(R,G,d)])}return new An(w)}}class ws{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new ws({name:s,available:!1}):null}}class Gr{constructor(s,l,d){this.from=s,this.to=l,this.transition=d}static interpolate(s,l,d){return new Gr(s,l,d)}static parse(s){return s instanceof Gr?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new Gr(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new Gr(s.from,s.to,s.transition):typeof s=="string"?new Gr(s,s,1):void 0}}function Wr(c,s,l,d){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[c,s,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[c,s,l,d]:[c,s,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ao(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Gr||c instanceof ln||c instanceof Bl||c instanceof Yi||c instanceof kn||c instanceof Di||c instanceof Ci||c instanceof An||c instanceof ws)return!0;if(Array.isArray(c)){for(const s of c)if(!Ao(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!Ao(c[s]))return!1;return!0}return!1}function Tr(c){if(c===null)return as;if(typeof c=="string")return Dr;if(typeof c=="boolean")return Vr;if(typeof c=="number")return Jt;if(c instanceof ln)return Ni;if(c instanceof Gr)return Ga;if(c instanceof Bl)return qs;if(c instanceof Yi)return va;if(c instanceof kn)return Ai;if(c instanceof Di)return _a;if(c instanceof Ci)return $l;if(c instanceof An)return ql;if(c instanceof ws)return Bo;if(Array.isArray(c)){const s=c.length;let l;for(const d of c){const m=Tr(d);if(l){if(l===m)continue;l=$r;break}l=m}return ls(l||$r,s)}return Ls}function Za(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof ln||c instanceof Gr||c instanceof Yi||c instanceof kn||c instanceof Di||c instanceof Ci||c instanceof An||c instanceof ws?c.toString():JSON.stringify(c)}class Si{constructor(s,l){this.type=s,this.value=l}static parse(s,l){if(s.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Ao(s[1]))return l.error("invalid value");const d=s[1];let m=Tr(d);const _=l.expectedType;return m.kind!=="array"||m.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(m=_),new Si(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ba={string:Dr,number:Jt,boolean:Vr,object:Ls};class Oi{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let d,m=1;const _=s[0];if(_==="array"){let S,L;if(s.length>2){const R=s[1];if(typeof R!="string"||!(R in ba)||R==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=ba[R],m++}else S=$r;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return l.error('The length argument to "array" must be a positive integer literal',2);L=s[2],m++}d=ls(S,L)}else{if(!ba[_])throw new Error(`Types doesn't contain name = ${_}`);d=ba[_]}const w=[];for(;m<s.length;m++){const S=l.parse(s[m],m,$r);if(!S)return null;w.push(S)}return new Oi(d,w)}evaluate(s){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(s);if(!Wl(this.type,Tr(d)))return d;if(l===this.args.length-1)throw new Un(`Expected value to be of type ${Kn(this.type)}, but found ${Kn(Tr(d))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const jA={"to-boolean":Vr,"to-color":Ni,"to-number":Jt,"to-string":Dr};class co{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");const d=s[0];if(!jA[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&s.length!==2)return l.error("Expected one argument.");const m=jA[d],_=[];for(let w=1;w<s.length;w++){const S=l.parse(s[w],w,$r);if(!S)return null;_.push(S)}return new co(m,_)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let l,d;for(const m of this.args){if(l=m.evaluate(s),d=null,l instanceof ln)return l;if(typeof l=="string"){const _=s.parseColor(l);if(_)return _}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Wr(l[0],l[1],l[2],l[3]),!d))return new ln(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Un(d||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const d of this.args){l=d.evaluate(s);const m=kn.parse(l);if(m)return m}throw new Un(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const d of this.args){l=d.evaluate(s);const m=Di.parse(l);if(m)return m}throw new Un(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const d of this.args){l=d.evaluate(s);const m=Ci.parse(l);if(m)return m}throw new Un(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const d of this.args){l=d.evaluate(s);const m=An.parse(l);if(m)return m}throw new Un(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const d of this.args){if(l=d.evaluate(s),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new Un(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Yi.fromString(Za(this.args[0].evaluate(s)));case"resolvedImage":return ws.fromString(Za(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return Za(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Qc=["Unknown","Point","LineString","Polygon"];class Rc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Qc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let l=this._parseColorCache.get(s);return l||(l=ln.parse(s),this._parseColorCache.set(s,l)),l}}class Xs{constructor(s,l,d=[],m,_=new Xi,w=[]){this.registry=s,this.path=d,this.key=d.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=w,this.expectedType=m,this._isConstant=l}parse(s,l,d,m,_={}){return l?this.concat(l,d,m)._parse(s,_):this._parse(s,_)}_parse(s,l){function d(m,_,w){return w==="assert"?new Oi(_,[m]):w==="coerce"?new co(_,[m]):m}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=s[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[m];if(_){let w=_.parse(s,this);if(!w)return null;if(this.expectedType){const S=this.expectedType,L=w.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||L.kind!=="value"){if(S.kind==="projectionDefinition"&&["string","array"].includes(L.kind)||["color","formatted","resolvedImage"].includes(S.kind)&&["value","string"].includes(L.kind)||["padding","numberArray"].includes(S.kind)&&["value","number","array"].includes(L.kind)||S.kind==="colorArray"&&["value","string","array"].includes(L.kind)||S.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(L.kind))w=d(w,S,l.typeAnnotation||"coerce");else if(this.checkSubtype(S,L))return null}else w=d(w,S,l.typeAnnotation||"assert")}if(!(w instanceof Si)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const S=new Rc;try{w=new Si(w.type,w.evaluate(S))}catch(L){return this.error(L.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,l,d){const m=typeof s=="number"?this.path.concat(s):this.path,_=d?this.scope.concat(d):this.scope;return new Xs(this.registry,this._isConstant,m,l||null,_,this.errors)}error(s,...l){const d=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new Bn(d,s))}checkSubtype(s,l){const d=Wl(s,l);return d&&this.error(d),d}}class uo{constructor(s,l){this.type=l.type,this.bindings=[].concat(s),this.result=l}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const l of this.bindings)s(l[1]);s(this.result)}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const d=[];for(let _=1;_<s.length-1;_+=2){const w=s[_];if(typeof w!="string")return l.error(`Expected string, but found ${typeof w} instead.`,_);if(/[^a-zA-Z0-9_]/.test(w))return l.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=l.parse(s[_+1],_+1);if(!S)return null;d.push([w,S])}const m=l.parse(s[s.length-1],s.length-1,l.expectedType,d);return m?new uo(d,m):null}outputDefined(){return this.result.outputDefined()}}class ho{constructor(s,l){this.type=l.type,this.name=s,this.boundExpression=l}static parse(s,l){if(s.length!==2||typeof s[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=s[1];return l.scope.has(d)?new ho(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Zn{constructor(s,l,d){this.type=s,this.index=l,this.input=d}static parse(s,l){if(s.length!==3)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=l.parse(s[1],1,Jt),m=l.parse(s[2],2,ls(l.expectedType||$r));return d&&m?new Zn(m.type.itemType,d,m):null}evaluate(s){const l=this.index.evaluate(s),d=this.input.evaluate(s);if(l<0)throw new Un(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new Un(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new Un(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class xs{constructor(s,l){this.type=Vr,this.needle=s,this.haystack=l}static parse(s,l){if(s.length!==3)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=l.parse(s[1],1,$r),m=l.parse(s[2],2,$r);return d&&m?$a(d.type,[Vr,Dr,Jt,as,$r])?new xs(d,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(d.type)} instead`):null}evaluate(s){const l=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!d)return!1;if(!qa(l,["boolean","string","number","null"]))throw new Un(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(Tr(l))} instead.`);if(!qa(d,["string","array"]))throw new Un(`Expected second argument to be of type array or string, but found ${Kn(Tr(d))} instead.`);return d.indexOf(l)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class Xa{constructor(s,l,d){this.type=Jt,this.needle=s,this.haystack=l,this.fromIndex=d}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=l.parse(s[1],1,$r),m=l.parse(s[2],2,$r);if(!d||!m)return null;if(!$a(d.type,[Vr,Dr,Jt,as,$r]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(d.type)} instead`);if(s.length===4){const _=l.parse(s[3],3,Jt);return _?new Xa(d,m,_):null}return new Xa(d,m)}evaluate(s){const l=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!qa(l,["boolean","string","number","null"]))throw new Un(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(Tr(l))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(s)),qa(d,["string"])){const _=d.indexOf(l,m);return _===-1?-1:[...d.slice(0,_)].length}if(qa(d,["array"]))return d.indexOf(l,m);throw new Un(`Expected second argument to be of type array or string, but found ${Kn(Tr(d))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class So{constructor(s,l,d,m,_,w){this.inputType=s,this.type=l,this.input=d,this.cases=m,this.outputs=_,this.otherwise=w}static parse(s,l){if(s.length<5)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return l.error("Expected an even number of arguments.");let d,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const _={},w=[];for(let R=2;R<s.length-1;R+=2){let H=s[R];const G=s[R+1];Array.isArray(H)||(H=[H]);const Y=l.concat(R);if(H.length===0)return Y.error("Expected at least one branch label.");for(const ie of H){if(typeof ie!="number"&&typeof ie!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof ie=="number"&&Math.abs(ie)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ie=="number"&&Math.floor(ie)!==ie)return Y.error("Numeric branch labels must be integer values.");if(d){if(Y.checkSubtype(d,Tr(ie)))return null}else d=Tr(ie);if(_[String(ie)]!==void 0)return Y.error("Branch labels must be unique.");_[String(ie)]=w.length}const re=l.parse(G,R,m);if(!re)return null;m=m||re.type,w.push(re)}const S=l.parse(s[1],1,$r);if(!S)return null;const L=l.parse(s[s.length-1],s.length-1,m);return L?S.type.kind!=="value"&&l.concat(1).checkSubtype(d,S.type)?null:new So(d,m,S,_,w,L):null}evaluate(s){const l=this.input.evaluate(s);return(Tr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class gi{constructor(s,l,d){this.type=s,this.branches=l,this.otherwise=d}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const m=[];for(let w=1;w<s.length-1;w+=2){const S=l.parse(s[w],w,Vr);if(!S)return null;const L=l.parse(s[w+1],w+1,d);if(!L)return null;m.push([S,L]),d=d||L.type}const _=l.parse(s[s.length-1],s.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new gi(d,m,_)}evaluate(s){for(const[l,d]of this.branches)if(l.evaluate(s))return d.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[l,d]of this.branches)s(l),s(d);s(this.otherwise)}outputDefined(){return this.branches.every(([s,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Ba{constructor(s,l,d,m){this.type=s,this.input=l,this.beginIndex=d,this.endIndex=m}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=l.parse(s[1],1,$r),m=l.parse(s[2],2,Jt);if(!d||!m)return null;if(!$a(d.type,[ls($r),Dr,$r]))return l.error(`Expected first argument to be of type array or string, but found ${Kn(d.type)} instead`);if(s.length===4){const _=l.parse(s[3],3,Jt);return _?new Ba(d.type,d,m,_):null}return new Ba(d.type,d,m)}evaluate(s){const l=this.input.evaluate(s),d=this.beginIndex.evaluate(s);let m;if(this.endIndex&&(m=this.endIndex.evaluate(s)),qa(l,["string"]))return[...l].slice(d,m).join("");if(qa(l,["array"]))return l.slice(d,m);throw new Un(`Expected first argument to be of type array or string, but found ${Kn(Tr(l))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Sl(c,s){const l=c.length-1;let d,m,_=0,w=l,S=0;for(;_<=w;)if(S=Math.floor((_+w)/2),d=c[S],m=c[S+1],d<=s){if(S===l||s<m)return S;_=S+1}else{if(!(d>s))throw new Un("Input is not a number.");w=S-1}return 0}class Ca{constructor(s,l,d){this.type=s,this.input=l,this.labels=[],this.outputs=[];for(const[m,_]of d)this.labels.push(m),this.outputs.push(_)}static parse(s,l){if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(s[1],1,Jt);if(!d)return null;const m=[];let _=null;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);for(let w=1;w<s.length;w+=2){const S=w===1?-1/0:s[w],L=s[w+1],R=w,H=w+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(m.length&&m[m.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const G=l.parse(L,H,_);if(!G)return null;_=_||G.type,m.push([S,G])}return new Ca(_,d,m)}evaluate(s){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(s);const m=this.input.evaluate(s);if(m<=l[0])return d[0].evaluate(s);const _=l.length;return m>=l[_-1]?d[_-1].evaluate(s):d[Sl(l,m)].evaluate(s)}eachChild(s){s(this.input);for(const l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Nc(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var ta,Sa,Xl=function(){if(Sa)return ta;function c(s,l,d,m){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=l,this.p2x=d,this.p2y=m}return Sa=1,ta=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,l){if(l===void 0&&(l=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,m=0;m<8;m++){var _=this.sampleCurveX(d)-s;if(Math.abs(_)<l)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=_/w}var S=0,L=1;for(d=s,m=0;m<20&&(_=this.sampleCurveX(d),!(Math.abs(_-s)<l));m++)s>_?S=d:L=d,d=.5*(L-S)+S;return d},solve:function(s,l){return this.sampleCurveY(this.solveCurveX(s,l))}},ta}(),Dc=Nc(Xl);class Ji{constructor(s,l,d,m,_){this.type=s,this.operator=l,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[w,S]of _)this.labels.push(w),this.outputs.push(S)}static interpolationFactor(s,l,d,m){let _=0;if(s.name==="exponential")_=El(l,s.base,d,m);else if(s.name==="linear")_=El(l,1,d,m);else if(s.name==="cubic-bezier"){const w=s.controlPoints;_=new Dc(w[0],w[1],w[2],w[3]).solve(El(l,1,d,m))}return _}static parse(s,l){let[d,m,_,...w]=s;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const R=m[1];if(typeof R!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:R}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const R=m.slice(1);if(R.length!==4||R.some(H=>typeof H!="number"||H<0||H>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:R}}}if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(_=l.parse(_,2,Jt),!_)return null;const S=[];let L=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||l.expectedType==$l?l.expectedType&&l.expectedType.kind!=="value"&&(L=l.expectedType):L=Ni;for(let R=0;R<w.length;R+=2){const H=w[R],G=w[R+1],Y=R+3,re=R+4;if(typeof H!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(S.length&&S[S.length-1][0]>=H)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const ie=l.parse(G,re,L);if(!ie)return null;L=L||ie.type,S.push([H,ie])}return Dn(L,Jt)||Dn(L,Ga)||Dn(L,Ni)||Dn(L,Ai)||Dn(L,_a)||Dn(L,$l)||Dn(L,ql)||Dn(L,ls(Jt))?new Ji(L,d,m,_,S):l.error(`Type ${Kn(L)} is not interpolatable.`)}evaluate(s){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(s);const m=this.input.evaluate(s);if(m<=l[0])return d[0].evaluate(s);const _=l.length;if(m>=l[_-1])return d[_-1].evaluate(s);const w=Sl(l,m),S=Ji.interpolationFactor(this.interpolation,m,l[w],l[w+1]),L=d[w].evaluate(s),R=d[w+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ks(L,R,S);case"color":return ln.interpolate(L,R,S);case"padding":return kn.interpolate(L,R,S);case"colorArray":return Ci.interpolate(L,R,S);case"numberArray":return Di.interpolate(L,R,S);case"variableAnchorOffsetCollection":return An.interpolate(L,R,S);case"array":return ei(L,R,S);case"projectionDefinition":return Gr.interpolate(L,R,S)}case"interpolate-hcl":switch(this.type.kind){case"color":return ln.interpolate(L,R,S,"hcl");case"colorArray":return Ci.interpolate(L,R,S,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ln.interpolate(L,R,S,"lab");case"colorArray":return Ci.interpolate(L,R,S,"lab")}}}eachChild(s){s(this.input);for(const l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function El(c,s,l,d){const m=d-l,_=c-l;return m===0?0:s===1?_/m:(Math.pow(s,_)-1)/(Math.pow(s,m)-1)}const es={color:ln.interpolate,number:ks,padding:kn.interpolate,numberArray:Di.interpolate,colorArray:Ci.interpolate,variableAnchorOffsetCollection:An.interpolate,array:ei};class Mi{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let d=null;const m=l.expectedType;m&&m.kind!=="value"&&(d=m);const _=[];for(const S of s.slice(1)){const L=l.parse(S,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!L)return null;d=d||L.type,_.push(L)}if(!d)throw new Error("No output type");const w=m&&_.some(S=>Wl(m,S.type));return new Mi(w?$r:d,_)}evaluate(s){let l,d=null,m=0;for(const _ of this.args)if(m++,d=_.evaluate(s),d&&d instanceof ws&&!d.available&&(l||(l=d.name),d=null,m===this.args.length&&(d=l)),d!==null)break;return d}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function Yl(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Eo(c,s,l,d){return d.compare(s,l)===0}function Ea(c,s,l){const d=c!=="=="&&c!=="!=";return class NL{constructor(_,w,S){this.type=Vr,this.lhs=_,this.rhs=w,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||w.type.kind==="value"}static parse(_,w){if(_.length!==3&&_.length!==4)return w.error("Expected two or three arguments.");const S=_[0];let L=w.parse(_[1],1,$r);if(!L)return null;if(!Yl(S,L.type))return w.concat(1).error(`"${S}" comparisons are not supported for type '${Kn(L.type)}'.`);let R=w.parse(_[2],2,$r);if(!R)return null;if(!Yl(S,R.type))return w.concat(2).error(`"${S}" comparisons are not supported for type '${Kn(R.type)}'.`);if(L.type.kind!==R.type.kind&&L.type.kind!=="value"&&R.type.kind!=="value")return w.error(`Cannot compare types '${Kn(L.type)}' and '${Kn(R.type)}'.`);d&&(L.type.kind==="value"&&R.type.kind!=="value"?L=new Oi(R.type,[L]):L.type.kind!=="value"&&R.type.kind==="value"&&(R=new Oi(L.type,[R])));let H=null;if(_.length===4){if(L.type.kind!=="string"&&R.type.kind!=="string"&&L.type.kind!=="value"&&R.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(H=w.parse(_[3],3,qs),!H)return null}return new NL(L,R,H)}evaluate(_){const w=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const L=Tr(w),R=Tr(S);if(L.kind!==R.kind||L.kind!=="string"&&L.kind!=="number")throw new Un(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${L.kind}, ${R.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const L=Tr(w),R=Tr(S);if(L.kind!=="string"||R.kind!=="string")return s(_,w,S)}return this.collator?l(_,w,S,this.collator.evaluate(_)):s(_,w,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const Q=Ea("==",function(c,s,l){return s===l},Eo),Ae=Ea("!=",function(c,s,l){return s!==l},function(c,s,l,d){return!Eo(0,s,l,d)}),He=Ea("<",function(c,s,l){return s<l},function(c,s,l,d){return d.compare(s,l)<0}),ot=Ea(">",function(c,s,l){return s>l},function(c,s,l,d){return d.compare(s,l)>0}),vt=Ea("<=",function(c,s,l){return s<=l},function(c,s,l,d){return d.compare(s,l)<=0}),Ut=Ea(">=",function(c,s,l){return s>=l},function(c,s,l,d){return d.compare(s,l)>=0});class Zt{constructor(s,l,d){this.type=qs,this.locale=d,this.caseSensitive=s,this.diacriticSensitive=l}static parse(s,l){if(s.length!==2)return l.error("Expected one argument.");const d=s[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const m=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Vr);if(!m)return null;const _=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Vr);if(!_)return null;let w=null;return d.locale&&(w=l.parse(d.locale,1,Dr),!w)?null:new Zt(m,_,w)}evaluate(s){return new Bl(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class gr{constructor(s,l,d,m,_){this.type=Dr,this.number=s,this.locale=l,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(s,l){if(s.length!==3)return l.error("Expected two arguments.");const d=l.parse(s[1],1,Jt);if(!d)return null;const m=s[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let _=null;if(m.locale&&(_=l.parse(m.locale,1,Dr),!_))return null;let w=null;if(m.currency&&(w=l.parse(m.currency,1,Dr),!w))return null;let S=null;if(m["min-fraction-digits"]&&(S=l.parse(m["min-fraction-digits"],1,Jt),!S))return null;let L=null;return m["max-fraction-digits"]&&(L=l.parse(m["max-fraction-digits"],1,Jt),!L)?null:new gr(d,_,w,S,L)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Mr{constructor(s){this.type=va,this.sections=s}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");const d=s[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const m=[];let _=!1;for(let w=1;w<=s.length-1;++w){const S=s[w];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let L=null;if(S["font-scale"]&&(L=l.parse(S["font-scale"],1,Jt),!L))return null;let R=null;if(S["text-font"]&&(R=l.parse(S["text-font"],1,ls(Dr)),!R))return null;let H=null;if(S["text-color"]&&(H=l.parse(S["text-color"],1,Ni),!H))return null;let G=null;if(S["vertical-align"]){if(typeof S["vertical-align"]=="string"&&!qr.includes(S["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${S["vertical-align"]}' instead.`);if(G=l.parse(S["vertical-align"],1,Dr),!G)return null}const Y=m[m.length-1];Y.scale=L,Y.font=R,Y.textColor=H,Y.verticalAlign=G}else{const L=l.parse(s[w],1,$r);if(!L)return null;const R=L.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:L,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Mr(m)}evaluate(s){return new Yi(this.sections.map(l=>{const d=l.content.evaluate(s);return Tr(d)===Bo?new Uc("",d,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(s):null):new Uc(Za(d),null,l.scale?l.scale.evaluate(s):null,l.font?l.font.evaluate(s).join(","):null,l.textColor?l.textColor.evaluate(s):null,l.verticalAlign?l.verticalAlign.evaluate(s):null)}))}eachChild(s){for(const l of this.sections)s(l.content),l.scale&&s(l.scale),l.font&&s(l.font),l.textColor&&s(l.textColor),l.verticalAlign&&s(l.verticalAlign)}outputDefined(){return!1}}class en{constructor(s){this.type=Bo,this.input=s}static parse(s,l){if(s.length!==2)return l.error("Expected two arguments.");const d=l.parse(s[1],1,Dr);return d?new en(d):l.error("No image name provided.")}evaluate(s){const l=this.input.evaluate(s),d=ws.fromString(l);return d&&s.availableImages&&(d.available=s.availableImages.indexOf(l)>-1),d}eachChild(s){s(this.input)}outputDefined(){return!1}}class Zr{constructor(s){this.type=Jt,this.input=s}static parse(s,l){if(s.length!==2)return l.error(`Expected 1 argument, but found ${s.length-1} instead.`);const d=l.parse(s[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Kn(d.type)} instead.`):new Zr(d):null}evaluate(s){const l=this.input.evaluate(s);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Un(`Expected value to be of type string or array, but found ${Kn(Tr(l))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const nn=8192;function ci(c,s){const l=(180+c[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,m=Math.pow(2,s.z);return[Math.round(l*m*nn),Math.round(d*m*nn)]}function ti(c,s){const l=Math.pow(2,s.z);return[(m=(c[0]/nn+s.x)/l,360*m-180),(d=(c[1]/nn+s.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function ri(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function ki(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function zi(c,s,l){const d=c[0]-s[0],m=c[1]-s[1],_=c[0]-l[0],w=c[1]-l[1];return d*w-_*m==0&&d*_<=0&&m*w<=0}function Us(c,s,l,d){return(m=[d[0]-l[0],d[1]-l[1]])[0]*(_=[s[0]-c[0],s[1]-c[1]])[1]-m[1]*_[0]!=0&&!(!Ya(c,s,l,d)||!Ya(l,d,c,s));var m,_}function Ys(c,s,l){for(const d of l)for(let m=0;m<d.length-1;++m)if(Us(c,s,d[m],d[m+1]))return!0;return!1}function Qs(c,s,l=!1){let d=!1;for(const S of s)for(let L=0;L<S.length-1;L++){if(zi(c,S[L],S[L+1]))return l;(_=S[L])[1]>(m=c)[1]!=(w=S[L+1])[1]>m[1]&&m[0]<(w[0]-_[0])*(m[1]-_[1])/(w[1]-_[1])+_[0]&&(d=!d)}var m,_,w;return d}function Cu(c,s){for(const l of s)if(Qs(c,l))return!0;return!1}function VA(c,s){for(const l of c)if(!Qs(l,s))return!1;for(let l=0;l<c.length-1;++l)if(Ys(c[l],c[l+1],s))return!1;return!0}function Oc(c,s){for(const l of s)if(VA(c,l))return!0;return!1}function Ya(c,s,l,d){const m=d[0]-l[0],_=d[1]-l[1],w=(c[0]-l[0])*_-m*(c[1]-l[1]),S=(s[0]-l[0])*_-m*(s[1]-l[1]);return w>0&&S<0||w<0&&S>0}function Jl(c,s,l){const d=[];for(let m=0;m<c.length;m++){const _=[];for(let w=0;w<c[m].length;w++){const S=ci(c[m][w],l);ri(s,S),_.push(S)}d.push(_)}return d}function KA(c,s,l){const d=[];for(let m=0;m<c.length;m++){const _=Jl(c[m],s,l);d.push(_)}return d}function eA(c,s,l,d){if(c[0]<l[0]||c[0]>l[2]){const m=.5*d;let _=c[0]-l[0]>m?-d:l[0]-c[0]>m?d:0;_===0&&(_=c[0]-l[2]>m?-d:l[2]-c[0]>m?d:0),c[0]+=_}ri(s,c)}function Hi(c,s,l,d){const m=Math.pow(2,d.z)*nn,_=[d.x*nn,d.y*nn],w=[];for(const S of c)for(const L of S){const R=[L.x+_[0],L.y+_[1]];eA(R,s,l,m),w.push(R)}return w}function Fl(c,s,l,d){const m=Math.pow(2,d.z)*nn,_=[d.x*nn,d.y*nn],w=[];for(const L of c){const R=[];for(const H of L){const G=[H.x+_[0],H.y+_[1]];ri(s,G),R.push(G)}w.push(R)}if(s[2]-s[0]<=m/2){(S=s)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const L of w)for(const R of L)eA(R,s,l,m)}var S;return w}class Fo{constructor(s,l){this.type=Vr,this.geojson=s,this.geometries=l}static parse(s,l){if(s.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Ao(s[1])){const d=s[1];if(d.type==="FeatureCollection"){const m=[];for(const _ of d.features){const{type:w,coordinates:S}=_.geometry;w==="Polygon"&&m.push(S),w==="MultiPolygon"&&m.push(...S)}if(m.length)return new Fo(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Fo(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Fo(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(l,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(d.type==="Polygon"){const S=Jl(d.coordinates,_,w),L=Hi(l.geometry(),m,_,w);if(!ki(m,_))return!1;for(const R of L)if(!Qs(R,S))return!1}if(d.type==="MultiPolygon"){const S=KA(d.coordinates,_,w),L=Hi(l.geometry(),m,_,w);if(!ki(m,_))return!1;for(const R of L)if(!Cu(R,S))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(l,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(d.type==="Polygon"){const S=Jl(d.coordinates,_,w),L=Fl(l.geometry(),m,_,w);if(!ki(m,_))return!1;for(const R of L)if(!VA(R,S))return!1}if(d.type==="MultiPolygon"){const S=KA(d.coordinates,_,w),L=Fl(l.geometry(),m,_,w);if(!ki(m,_))return!1;for(const R of L)if(!Oc(R,S))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let tA=class{constructor(c=[],s=(l,d)=>l<d?-1:l>d?1:0){if(this.data=c,this.length=this.data.length,this.compare=s,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:s,compare:l}=this,d=s[c];for(;c>0;){const m=c-1>>1,_=s[m];if(l(d,_)>=0)break;s[c]=_,c=m}s[c]=d}_down(c){const{data:s,compare:l}=this,d=this.length>>1,m=s[c];for(;c<d;){let _=1+(c<<1);const w=_+1;if(w<this.length&&l(s[w],s[_])<0&&(_=w),l(s[_],m)>=0)break;s[c]=s[_],c=_}s[c]=m}};function rA(c,s,l=0,d=c.length-1,m=jh){for(;d>l;){if(d-l>600){const L=d-l+1,R=s-l+1,H=Math.log(L),G=.5*Math.exp(2*H/3),Y=.5*Math.sqrt(H*G*(L-G)/L)*(R-L/2<0?-1:1);rA(c,s,Math.max(l,Math.floor(s-R*G/L+Y)),Math.min(d,Math.floor(s+(L-R)*G/L+Y)),m)}const _=c[s];let w=l,S=d;for(ji(c,l,s),m(c[d],_)>0&&ji(c,l,d);w<S;){for(ji(c,w,S),w++,S--;m(c[w],_)<0;)w++;for(;m(c[S],_)>0;)S--}m(c[l],_)===0?ji(c,l,S):(S++,ji(c,S,d)),S<=s&&(l=S+1),s<=S&&(d=S-1)}}function ji(c,s,l){const d=c[s];c[s]=c[l],c[l]=d}function jh(c,s){return c<s?-1:c>s?1:0}function Il(c,s){if(c.length<=1)return[c];const l=[];let d,m;for(const _ of c){const w=fo(_);w!==0&&(_.area=Math.abs(w),m===void 0&&(m=w<0),m===w<0?(d&&l.push(d),d=[_]):d.push(_))}if(d&&l.push(d),s>1)for(let _=0;_<l.length;_++)l[_].length<=s||(rA(l[_],s,1,l[_].length-1,Su),l[_]=l[_].slice(0,s));return l}function Su(c,s){return s.area-c.area}function fo(c){let s=0;for(let l,d,m=0,_=c.length,w=_-1;m<_;w=m++)l=c[m],d=c[w],s+=(d.x-l.x)*(l.y+d.y);return s}const nA=1/298.257223563,zc=nA*(2-nA),Hc=Math.PI/180;class Fa{constructor(s){const l=6378.137*Hc*1e3,d=Math.cos(s*Hc),m=1/(1-zc*(1-d*d)),_=Math.sqrt(m);this.kx=l*_*d,this.ky=l*_*m*(1-zc)}distance(s,l){const d=this.wrap(s[0]-l[0])*this.kx,m=(s[1]-l[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(s,l){let d,m,_,w,S=1/0;for(let L=0;L<s.length-1;L++){let R=s[L][0],H=s[L][1],G=this.wrap(s[L+1][0]-R)*this.kx,Y=(s[L+1][1]-H)*this.ky,re=0;G===0&&Y===0||(re=(this.wrap(l[0]-R)*this.kx*G+(l[1]-H)*this.ky*Y)/(G*G+Y*Y),re>1?(R=s[L+1][0],H=s[L+1][1]):re>0&&(R+=G/this.kx*re,H+=Y/this.ky*re)),G=this.wrap(l[0]-R)*this.kx,Y=(l[1]-H)*this.ky;const ie=G*G+Y*Y;ie<S&&(S=ie,d=R,m=H,_=L,w=re)}return{point:[d,m],index:_,t:Math.max(0,Math.min(1,w))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function hn(c,s){return s[0]-c[0]}function As(c){return c[1]-c[0]+1}function ui(c,s){return c[1]>=c[0]&&c[1]<s}function Ia(c,s){if(c[0]>c[1])return[null,null];const l=As(c);if(s){if(l===2)return[c,null];const m=Math.floor(l/2);return[[c[0],c[0]+m],[c[0]+m,c[1]]]}if(l===1)return[c,null];const d=Math.floor(l/2)-1;return[[c[0],c[0]+d],[c[0]+d+1,c[1]]]}function ra(c,s){if(!ui(s,c.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let d=s[0];d<=s[1];++d)ri(l,c[d]);return l}function na(c){const s=[1/0,1/0,-1/0,-1/0];for(const l of c)for(const d of l)ri(s,d);return s}function iA(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function ia(c,s,l){if(!iA(c)||!iA(s))return NaN;let d=0,m=0;return c[2]<s[0]&&(d=s[0]-c[2]),c[0]>s[2]&&(d=c[0]-s[2]),c[1]>s[3]&&(m=c[1]-s[3]),c[3]<s[1]&&(m=s[1]-c[3]),l.distance([0,0],[d,m])}function Hn(c,s,l){const d=l.pointOnLine(s,c);return l.distance(c,d.point)}function sA(c,s,l,d,m){const _=Math.min(Hn(c,[l,d],m),Hn(s,[l,d],m)),w=Math.min(Hn(l,[c,s],m),Hn(d,[c,s],m));return Math.min(_,w)}function Rs(c,s,l,d,m){if(!ui(s,c.length)||!ui(d,l.length))return 1/0;let _=1/0;for(let w=s[0];w<s[1];++w){const S=c[w],L=c[w+1];for(let R=d[0];R<d[1];++R){const H=l[R],G=l[R+1];if(Us(S,L,H,G))return 0;_=Math.min(_,sA(S,L,H,G,m))}}return _}function Io(c,s,l,d,m){if(!ui(s,c.length)||!ui(d,l.length))return NaN;let _=1/0;for(let w=s[0];w<=s[1];++w)for(let S=d[0];S<=d[1];++S)if(_=Math.min(_,m.distance(c[w],l[S])),_===0)return _;return _}function GA(c,s,l){if(Qs(c,s,!0))return 0;let d=1/0;for(const m of s){const _=m[0],w=m[m.length-1];if(_!==w&&(d=Math.min(d,Hn(c,[w,_],l)),d===0))return d;const S=l.pointOnLine(m,c);if(d=Math.min(d,l.distance(c,S.point)),d===0)return d}return d}function Eu(c,s,l,d){if(!ui(s,c.length))return NaN;for(let _=s[0];_<=s[1];++_)if(Qs(c[_],l,!0))return 0;let m=1/0;for(let _=s[0];_<s[1];++_){const w=c[_],S=c[_+1];for(const L of l)for(let R=0,H=L.length,G=H-1;R<H;G=R++){const Y=L[G],re=L[R];if(Us(w,S,Y,re))return 0;m=Math.min(m,sA(w,S,Y,re,d))}}return m}function $A(c,s){for(const l of c)for(const d of l)if(Qs(d,s,!0))return!0;return!1}function oA(c,s,l,d=1/0){const m=na(c),_=na(s);if(d!==1/0&&ia(m,_,l)>=d)return d;if(ki(m,_)){if($A(c,s))return 0}else if($A(s,c))return 0;let w=1/0;for(const S of c)for(let L=0,R=S.length,H=R-1;L<R;H=L++){const G=S[H],Y=S[L];for(const re of s)for(let ie=0,de=re.length,Ce=de-1;ie<de;Ce=ie++){const Ue=re[Ce],st=re[ie];if(Us(G,Y,Ue,st))return 0;w=Math.min(w,sA(G,Y,Ue,st,l))}}return w}function Tl(c,s,l,d,m,_){if(!_)return;const w=ia(ra(d,_),m,l);w<s&&c.push([w,_,[0,0]])}function sa(c,s,l,d,m,_,w){if(!_||!w)return;const S=ia(ra(d,_),ra(m,w),l);S<s&&c.push([S,_,w])}function Ta(c,s,l,d,m=1/0){let _=Math.min(d.distance(c[0],l[0][0]),m);if(_===0)return _;const w=new tA([[0,[0,c.length-1],[0,0]]],hn),S=na(l);for(;w.length>0;){const L=w.pop();if(L[0]>=_)continue;const R=L[1],H=s?50:100;if(As(R)<=H){if(!ui(R,c.length))return NaN;if(s){const G=Eu(c,R,l,d);if(isNaN(G)||G===0)return G;_=Math.min(_,G)}else for(let G=R[0];G<=R[1];++G){const Y=GA(c[G],l,d);if(_=Math.min(_,Y),_===0)return 0}}else{const G=Ia(R,s);Tl(w,_,d,c,S,G[0]),Tl(w,_,d,c,S,G[1])}}return _}function Ja(c,s,l,d,m,_=1/0){let w=Math.min(_,m.distance(c[0],l[0]));if(w===0)return w;const S=new tA([[0,[0,c.length-1],[0,l.length-1]]],hn);for(;S.length>0;){const L=S.pop();if(L[0]>=w)continue;const R=L[1],H=L[2],G=s?50:100,Y=d?50:100;if(As(R)<=G&&As(H)<=Y){if(!ui(R,c.length)&&ui(H,l.length))return NaN;let re;if(s&&d)re=Rs(c,R,l,H,m),w=Math.min(w,re);else if(s&&!d){const ie=c.slice(R[0],R[1]+1);for(let de=H[0];de<=H[1];++de)if(re=Hn(l[de],ie,m),w=Math.min(w,re),w===0)return w}else if(!s&&d){const ie=l.slice(H[0],H[1]+1);for(let de=R[0];de<=R[1];++de)if(re=Hn(c[de],ie,m),w=Math.min(w,re),w===0)return w}else re=Io(c,R,l,H,m),w=Math.min(w,re)}else{const re=Ia(R,s),ie=Ia(H,d);sa(S,w,m,c,l,re[0],ie[0]),sa(S,w,m,c,l,re[0],ie[1]),sa(S,w,m,c,l,re[1],ie[0]),sa(S,w,m,c,l,re[1],ie[1])}}return w}function el(c){return c.type==="MultiPolygon"?c.coordinates.map(s=>({type:"Polygon",coordinates:s})):c.type==="MultiLineString"?c.coordinates.map(s=>({type:"LineString",coordinates:s})):c.type==="MultiPoint"?c.coordinates.map(s=>({type:"Point",coordinates:s})):[c]}class Js{constructor(s,l){this.type=Jt,this.geojson=s,this.geometries=l}static parse(s,l){if(s.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Ao(s[1])){const d=s[1];if(d.type==="FeatureCollection")return new Js(d,d.features.map(m=>el(m.geometry)).flat());if(d.type==="Feature")return new Js(d,el(d.geometry));if("type"in d&&"coordinates"in d)return new Js(d,el(d))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(l,d){const m=l.geometry(),_=m.flat().map(L=>ti([L.x,L.y],l.canonical));if(m.length===0)return NaN;const w=new Fa(_[0][1]);let S=1/0;for(const L of d){switch(L.type){case"Point":S=Math.min(S,Ja(_,!1,[L.coordinates],!1,w,S));break;case"LineString":S=Math.min(S,Ja(_,!1,L.coordinates,!0,w,S));break;case"Polygon":S=Math.min(S,Ta(_,!1,L.coordinates,w,S))}if(S===0)return S}return S}(s,this.geometries);if(s.geometryType()==="LineString")return function(l,d){const m=l.geometry(),_=m.flat().map(L=>ti([L.x,L.y],l.canonical));if(m.length===0)return NaN;const w=new Fa(_[0][1]);let S=1/0;for(const L of d){switch(L.type){case"Point":S=Math.min(S,Ja(_,!0,[L.coordinates],!1,w,S));break;case"LineString":S=Math.min(S,Ja(_,!0,L.coordinates,!0,w,S));break;case"Polygon":S=Math.min(S,Ta(_,!0,L.coordinates,w,S))}if(S===0)return S}return S}(s,this.geometries);if(s.geometryType()==="Polygon")return function(l,d){const m=l.geometry();if(m.length===0||m[0].length===0)return NaN;const _=Il(m,0).map(L=>L.map(R=>R.map(H=>ti([H.x,H.y],l.canonical)))),w=new Fa(_[0][0][0][1]);let S=1/0;for(const L of d)for(const R of _){switch(L.type){case"Point":S=Math.min(S,Ta([L.coordinates],!1,R,w,S));break;case"LineString":S=Math.min(S,Ta(L.coordinates,!0,R,w,S));break;case"Polygon":S=Math.min(S,oA(R,L.coordinates,w,S))}if(S===0)return S}return S}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class tl{constructor(s){this.type=$r,this.key=s}static parse(s,l){if(s.length!==2)return l.error(`Expected 1 argument, but found ${s.length-1} instead.`);const d=s[1];return d==null?l.error("Global state property must be defined."):typeof d!="string"?l.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new tl(d)}evaluate(s){var l;const d=(l=s.globals)===null||l===void 0?void 0:l.globalState;return d&&Object.keys(d).length!==0?an(d,this.key):null}eachChild(){}outputDefined(){return!1}}const cs={"==":Q,"!=":Ae,">":ot,"<":He,">=":Ut,"<=":vt,array:Oi,at:Zn,boolean:Oi,case:gi,coalesce:Mi,collator:Zt,format:Mr,image:en,in:xs,"index-of":Xa,interpolate:Ji,"interpolate-hcl":Ji,"interpolate-lab":Ji,length:Zr,let:uo,literal:Si,match:So,number:Oi,"number-format":gr,object:Oi,slice:Ba,step:Ca,string:Oi,"to-boolean":co,"to-color":co,"to-number":co,"to-string":co,var:ho,within:Fo,distance:Js,"global-state":tl};class hi{constructor(s,l,d,m){this.name=s,this.type=l,this._evaluate=d,this.args=m}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,l){const d=s[0],m=hi.definitions[d];if(!m)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=w.filter(([R])=>!Array.isArray(R)||R.length===s.length-1);let L=null;for(const[R,H]of S){L=new Xs(l.registry,To,l.path,null,l.scope);const G=[];let Y=!1;for(let re=1;re<s.length;re++){const ie=s[re],de=Array.isArray(R)?R[re-1]:R.type,Ce=L.parse(ie,1+G.length,de);if(!Ce){Y=!0;break}G.push(Ce)}if(!Y)if(Array.isArray(R)&&R.length!==G.length)L.error(`Expected ${R.length} arguments, but found ${G.length} instead.`);else{for(let re=0;re<G.length;re++){const ie=Array.isArray(R)?R[re]:R.type,de=G[re];L.concat(re+1).checkSubtype(ie,de.type)}if(L.errors.length===0)return new hi(d,_,H,G)}}if(S.length===1)l.errors.push(...L.errors);else{const R=(S.length?S:w).map(([G])=>{return Y=G,Array.isArray(Y)?`(${Y.map(Kn).join(", ")})`:`(${Kn(Y.type)}...)`;var Y}).join(" | "),H=[];for(let G=1;G<s.length;G++){const Y=l.parse(s[G],1+H.length);if(!Y)return null;H.push(Kn(Y.type))}l.error(`Expected arguments of type ${R}, but found (${H.join(", ")}) instead.`)}return null}static register(s,l){hi.definitions=l;for(const d in l)s[d]=hi}}function jn(c,[s,l,d,m]){s=s.evaluate(c),l=l.evaluate(c),d=d.evaluate(c);const _=m?m.evaluate(c):1,w=Wr(s,l,d,_);if(w)throw new Un(w);return new ln(s/255,l/255,d/255,_,!1)}function Vn(c,s){return c in s}function di(c,s){const l=s[c];return l===void 0?null:l}function Xn(c){return{type:c}}function To(c){if(c instanceof ho)return To(c.boundExpression);if(c instanceof hi&&c.name==="error"||c instanceof Zt||c instanceof Fo||c instanceof Js||c instanceof tl)return!1;const s=c instanceof co||c instanceof Oi;let l=!0;return c.eachChild(d=>{l=s?l&&To(d):l&&d instanceof Si}),!!l&&Pl(c)&&rl(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Pl(c){if(c instanceof hi&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Fo||c instanceof Js)return!1;let s=!0;return c.eachChild(l=>{s&&!Pl(l)&&(s=!1)}),s}function Pa(c){if(c instanceof hi&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(l=>{s&&!Pa(l)&&(s=!1)}),s}function rl(c,s){if(c instanceof hi&&s.indexOf(c.name)>=0)return!1;let l=!0;return c.eachChild(d=>{l&&!rl(d,s)&&(l=!1)}),l}function Fu(c){return{result:"success",value:c}}function nl(c){return{result:"error",value:c}}function ts(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function eo(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function qA(c){return!!c.expression&&c.expression.interpolated}function sn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Ll(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&Tr(c)===Ls}function jc(c){return c}function Vc(c,s){const l=c.stops&&typeof c.stops[0][0]=="object",d=l||!(l||c.property!==void 0),m=c.type||(qA(s)?"exponential":"interval"),_=function(H){switch(H.type){case"color":return ln.parse;case"padding":return kn.parse;case"numberArray":return Di.parse;case"colorArray":return Ci.parse;default:return null}}(s);if(_&&((c=Wn({},c)).stops&&(c.stops=c.stops.map(H=>[H[0],_(H[1])])),c.default=_(c.default?c.default:s.default)),c.colorSpace&&(w=c.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var w;const S=function(H){switch(H){case"exponential":return Iu;case"interval":return Vh;case"categorical":return Hd;case"identity":return Kc;default:throw new Error(`Unknown function type "${H}"`)}}(m);let L,R;if(m==="categorical"){L=Object.create(null);for(const H of c.stops)L[H[0]]=H[1];R=typeof c.stops[0][0]}if(l){const H={},G=[];for(let ie=0;ie<c.stops.length;ie++){const de=c.stops[ie],Ce=de[0].zoom;H[Ce]===void 0&&(H[Ce]={zoom:Ce,type:c.type,property:c.property,default:c.default,stops:[]},G.push(Ce)),H[Ce].stops.push([de[0].value,de[1]])}const Y=[];for(const ie of G)Y.push([H[ie].zoom,Vc(H[ie],s)]);const re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:Ji.interpolationFactor.bind(void 0,re),zoomStops:Y.map(ie=>ie[0]),evaluate:({zoom:ie},de)=>Iu({stops:Y,base:c.base},s,ie).evaluate(ie,de)}}if(d){const H=m==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:H,interpolationFactor:Ji.interpolationFactor.bind(void 0,H),zoomStops:c.stops.map(G=>G[0]),evaluate:({zoom:G})=>S(c,s,G,L,R)}}return{kind:"source",evaluate(H,G){const Y=G&&G.properties?G.properties[c.property]:void 0;return Y===void 0?aA(c.default,s.default):S(c,s,Y,L,R)}}}function aA(c,s,l){return c!==void 0?c:s!==void 0?s:l!==void 0?l:void 0}function Hd(c,s,l,d,m){return aA(typeof l===m?d[l]:void 0,c.default,s.default)}function Vh(c,s,l){if(sn(l)!=="number")return aA(c.default,s.default);const d=c.stops.length;if(d===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[d-1][0])return c.stops[d-1][1];const m=Sl(c.stops.map(_=>_[0]),l);return c.stops[m][1]}function Iu(c,s,l){const d=c.base!==void 0?c.base:1;if(sn(l)!=="number")return aA(c.default,s.default);const m=c.stops.length;if(m===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[m-1][0])return c.stops[m-1][1];const _=Sl(c.stops.map(H=>H[0]),l),w=function(H,G,Y,re){const ie=re-Y,de=H-Y;return ie===0?0:G===1?de/ie:(Math.pow(G,de)-1)/(Math.pow(G,ie)-1)}(l,d,c.stops[_][0],c.stops[_+1][0]),S=c.stops[_][1],L=c.stops[_+1][1],R=es[s.type]||jc;return typeof S.evaluate=="function"?{evaluate(...H){const G=S.evaluate.apply(void 0,H),Y=L.evaluate.apply(void 0,H);if(G!==void 0&&Y!==void 0)return R(G,Y,w,c.colorSpace)}}:R(S,L,w,c.colorSpace)}function Kc(c,s,l){switch(s.type){case"color":l=ln.parse(l);break;case"formatted":l=Yi.fromString(l.toString());break;case"resolvedImage":l=ws.fromString(l.toString());break;case"padding":l=kn.parse(l);break;case"colorArray":l=Ci.parse(l);break;case"numberArray":l=Di.parse(l);break;default:sn(l)===s.type||s.type==="enum"&&s.values[l]||(l=void 0)}return aA(l,c.default,s.default)}hi.register(cs,{error:[{kind:"error"},[Dr],(c,[s])=>{throw new Un(s.evaluate(c))}],typeof:[Dr,[$r],(c,[s])=>Kn(Tr(s.evaluate(c)))],"to-rgba":[ls(Jt,4),[Ni],(c,[s])=>{const[l,d,m,_]=s.evaluate(c).rgb;return[255*l,255*d,255*m,_]}],rgb:[Ni,[Jt,Jt,Jt],jn],rgba:[Ni,[Jt,Jt,Jt,Jt],jn],has:{type:Vr,overloads:[[[Dr],(c,[s])=>Vn(s.evaluate(c),c.properties())],[[Dr,Ls],(c,[s,l])=>Vn(s.evaluate(c),l.evaluate(c))]]},get:{type:$r,overloads:[[[Dr],(c,[s])=>di(s.evaluate(c),c.properties())],[[Dr,Ls],(c,[s,l])=>di(s.evaluate(c),l.evaluate(c))]]},"feature-state":[$r,[Dr],(c,[s])=>di(s.evaluate(c),c.featureState||{})],properties:[Ls,[],c=>c.properties()],"geometry-type":[Dr,[],c=>c.geometryType()],id:[$r,[],c=>c.id()],zoom:[Jt,[],c=>c.globals.zoom],"heatmap-density":[Jt,[],c=>c.globals.heatmapDensity||0],elevation:[Jt,[],c=>c.globals.elevation||0],"line-progress":[Jt,[],c=>c.globals.lineProgress||0],accumulated:[$r,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Jt,Xn(Jt),(c,s)=>{let l=0;for(const d of s)l+=d.evaluate(c);return l}],"*":[Jt,Xn(Jt),(c,s)=>{let l=1;for(const d of s)l*=d.evaluate(c);return l}],"-":{type:Jt,overloads:[[[Jt,Jt],(c,[s,l])=>s.evaluate(c)-l.evaluate(c)],[[Jt],(c,[s])=>-s.evaluate(c)]]},"/":[Jt,[Jt,Jt],(c,[s,l])=>s.evaluate(c)/l.evaluate(c)],"%":[Jt,[Jt,Jt],(c,[s,l])=>s.evaluate(c)%l.evaluate(c)],ln2:[Jt,[],()=>Math.LN2],pi:[Jt,[],()=>Math.PI],e:[Jt,[],()=>Math.E],"^":[Jt,[Jt,Jt],(c,[s,l])=>Math.pow(s.evaluate(c),l.evaluate(c))],sqrt:[Jt,[Jt],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))],log2:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[Jt,[Jt],(c,[s])=>Math.sin(s.evaluate(c))],cos:[Jt,[Jt],(c,[s])=>Math.cos(s.evaluate(c))],tan:[Jt,[Jt],(c,[s])=>Math.tan(s.evaluate(c))],asin:[Jt,[Jt],(c,[s])=>Math.asin(s.evaluate(c))],acos:[Jt,[Jt],(c,[s])=>Math.acos(s.evaluate(c))],atan:[Jt,[Jt],(c,[s])=>Math.atan(s.evaluate(c))],min:[Jt,Xn(Jt),(c,s)=>Math.min(...s.map(l=>l.evaluate(c)))],max:[Jt,Xn(Jt),(c,s)=>Math.max(...s.map(l=>l.evaluate(c)))],abs:[Jt,[Jt],(c,[s])=>Math.abs(s.evaluate(c))],round:[Jt,[Jt],(c,[s])=>{const l=s.evaluate(c);return l<0?-Math.round(-l):Math.round(l)}],floor:[Jt,[Jt],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[Jt,[Jt],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Vr,[Dr,$r],(c,[s,l])=>c.properties()[s.value]===l.value],"filter-id-==":[Vr,[$r],(c,[s])=>c.id()===s.value],"filter-type-==":[Vr,[Dr],(c,[s])=>c.geometryType()===s.value],"filter-<":[Vr,[Dr,$r],(c,[s,l])=>{const d=c.properties()[s.value],m=l.value;return typeof d==typeof m&&d<m}],"filter-id-<":[Vr,[$r],(c,[s])=>{const l=c.id(),d=s.value;return typeof l==typeof d&&l<d}],"filter->":[Vr,[Dr,$r],(c,[s,l])=>{const d=c.properties()[s.value],m=l.value;return typeof d==typeof m&&d>m}],"filter-id->":[Vr,[$r],(c,[s])=>{const l=c.id(),d=s.value;return typeof l==typeof d&&l>d}],"filter-<=":[Vr,[Dr,$r],(c,[s,l])=>{const d=c.properties()[s.value],m=l.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[Vr,[$r],(c,[s])=>{const l=c.id(),d=s.value;return typeof l==typeof d&&l<=d}],"filter->=":[Vr,[Dr,$r],(c,[s,l])=>{const d=c.properties()[s.value],m=l.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[Vr,[$r],(c,[s])=>{const l=c.id(),d=s.value;return typeof l==typeof d&&l>=d}],"filter-has":[Vr,[$r],(c,[s])=>s.value in c.properties()],"filter-has-id":[Vr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Vr,[ls(Dr)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Vr,[ls($r)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Vr,[Dr,ls($r)],(c,[s,l])=>l.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Vr,[Dr,ls($r)],(c,[s,l])=>function(d,m,_,w){for(;_<=w;){const S=_+w>>1;if(m[S]===d)return!0;m[S]>d?w=S-1:_=S+1}return!1}(c.properties()[s.value],l.value,0,l.value.length-1)],all:{type:Vr,overloads:[[[Vr,Vr],(c,[s,l])=>s.evaluate(c)&&l.evaluate(c)],[Xn(Vr),(c,s)=>{for(const l of s)if(!l.evaluate(c))return!1;return!0}]]},any:{type:Vr,overloads:[[[Vr,Vr],(c,[s,l])=>s.evaluate(c)||l.evaluate(c)],[Xn(Vr),(c,s)=>{for(const l of s)if(l.evaluate(c))return!0;return!1}]]},"!":[Vr,[Vr],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Vr,[Dr],(c,[s])=>{const l=c.globals&&c.globals.isSupportedScript;return!l||l(s.evaluate(c))}],upcase:[Dr,[Dr],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[Dr,[Dr],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[Dr,Xn($r),(c,s)=>s.map(l=>Za(l.evaluate(c))).join("")],"resolved-locale":[Dr,[qs],(c,[s])=>s.evaluate(c).resolvedLocale()]});class WA{constructor(s,l){this.expression=s,this._warningHistory={},this._evaluator=new Rc,this._defaultValue=l?function(d){if(d.type==="color"&&Ll(d.default))return new ln(0,0,0,0);switch(d.type){case"color":return ln.parse(d.default)||null;case"padding":return kn.parse(d.default)||null;case"numberArray":return Di.parse(d.default)||null;case"colorArray":return Ci.parse(d.default)||null;case"variableAnchorOffsetCollection":return An.parse(d.default)||null;case"projectionDefinition":return Gr.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(s,l,d,m,_,w){return this._evaluator.globals=s,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(s,l,d,m,_,w){this._evaluator.globals=s,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=w||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Un(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Tu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in cs}function Pu(c,s){const l=new Xs(cs,To,[],s?function(m){const _={color:Ni,string:Dr,number:Jt,enum:Dr,boolean:Vr,formatted:va,padding:Ai,numberArray:_a,colorArray:$l,projectionDefinition:Ga,resolvedImage:Bo,variableAnchorOffsetCollection:ql};return m.type==="array"?ls(_[m.value]||$r,m.length):_[m.type]}(s):void 0),d=l.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Fu(new WA(d,s)):nl(l.errors)}class ZA{constructor(s,l){this.kind=s,this._styleExpression=l,this.isStateDependent=s!=="constant"&&!Pa(l.expression),this.globalStateRefs=YA(l.expression)}evaluateWithoutErrorHandling(s,l,d,m,_,w){return this._styleExpression.evaluateWithoutErrorHandling(s,l,d,m,_,w)}evaluate(s,l,d,m,_,w){return this._styleExpression.evaluate(s,l,d,m,_,w)}}class Lu{constructor(s,l,d,m){this.kind=s,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=s!=="camera"&&!Pa(l.expression),this.globalStateRefs=YA(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(s,l,d,m,_,w){return this._styleExpression.evaluateWithoutErrorHandling(s,l,d,m,_,w)}evaluate(s,l,d,m,_,w){return this._styleExpression.evaluate(s,l,d,m,_,w)}interpolationFactor(s,l,d){return this.interpolationType?Ji.interpolationFactor(this.interpolationType,s,l,d):0}}function Kh(c,s){const l=Pu(c,s);if(l.result==="error")return l;const d=l.value.expression,m=Pl(d);if(!m&&!ts(s))return nl([new Bn("","data expressions not supported")]);const _=rl(d,["zoom"]);if(!_&&!eo(s))return nl([new Bn("","zoom expressions not supported")]);const w=XA(d);return w||_?w instanceof Bn?nl([w]):w instanceof Ji&&!qA(s)?nl([new Bn("",'"interpolate" expressions cannot be used with this property')]):Fu(w?new Lu(m?"camera":"composite",l.value,w.labels,w instanceof Ji?w.interpolation:void 0):new ZA(m?"constant":"source",l.value)):nl([new Bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gc{constructor(s,l){this._parameters=s,this._specification=l,Wn(this,Vc(this._parameters,this._specification))}static deserialize(s){return new Gc(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function XA(c){let s=null;if(c instanceof uo)s=XA(c.result);else if(c instanceof Mi){for(const l of c.args)if(s=XA(l),s)break}else(c instanceof Ca||c instanceof Ji)&&c.input instanceof hi&&c.input.name==="zoom"&&(s=c);return s instanceof Bn||c.eachChild(l=>{const d=XA(l);d instanceof Bn?s=d:!s&&d?s=new Bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&d&&s!==d&&(s=new Bn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function YA(c,s=new Set){return c instanceof tl&&s.add(c.key),c.eachChild(l=>{YA(l,s)}),s}function lA(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!lA(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const $c={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Po(c){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};lA(c)||(c=qc(c));const s=Pu(c,$c);if(s.result==="error")throw new Error(s.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,d,m)=>s.value.evaluate(l,d,{},m),needGeometry:jd(c),getGlobalStateRefs:()=>YA(s.value.expression)}}function Mp(c,s){return c<s?-1:c>s?1:0}function jd(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let s=1;s<c.length;s++)if(jd(c[s]))return!0;return!1}function qc(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?Gh(c[1],c[2],"=="):s==="!="?Wc(Gh(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Gh(c[1],c[2],s):s==="any"?(l=c.slice(1),["any"].concat(l.map(qc))):s==="all"?["all"].concat(c.slice(1).map(qc)):s==="none"?["all"].concat(c.slice(1).map(qc).map(Wc)):s==="in"?Vd(c[1],c.slice(2)):s==="!in"?Wc(Vd(c[1],c.slice(2))):s==="has"?Kd(c[1]):s!=="!has"||Wc(Kd(c[1]));var l}function Gh(c,s,l){switch(c){case"$type":return[`filter-type-${l}`,s];case"$id":return[`filter-id-${l}`,s];default:return[`filter-${l}`,c,s]}}function Vd(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(l=>typeof l!=typeof s[0])?["filter-in-large",c,["literal",s.sort(Mp)]]:["filter-in-small",c,["literal",s]]}}function Kd(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Wc(c){return["!",c]}function oa(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let m="[";for(const _ of c)m+=`${oa(_)},`;return`${m}]`}const l=Object.keys(c).sort();let d="{";for(let m=0;m<l.length;m++)d+=`${JSON.stringify(l[m])}:${oa(c[l[m]])},`;return`${d}}`}function to(c){let s="";for(const l of Rt)s+=`/${oa(c[l])}`;return s}function La(c){const s=c.value;return s?[new Yt(c.key,s,"constants have been deprecated as of v8")]:[]}function fi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function il(c){if(Array.isArray(c))return c.map(il);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const l in c)s[l]=il(c[l]);return s}return fi(c)}function Vi(c){const s=c.key,l=c.value,d=c.valueSpec||{},m=c.objectElementValidators||{},_=c.style,w=c.styleSpec,S=c.validateSpec;let L=[];const R=sn(l);if(R!=="object")return[new Yt(s,l,`object expected, ${R} found`)];for(const H in l){const G=H.split(".")[0],Y=an(d,G)||d["*"];let re;if(an(m,G))re=m[G];else if(an(d,G))re=S;else if(m["*"])re=m["*"];else{if(!d["*"]){L.push(new Yt(s,l[H],`unknown property "${H}"`));continue}re=S}L=L.concat(re({key:(s&&`${s}.`)+H,value:l[H],valueSpec:Y,style:_,styleSpec:w,object:l,objectKey:H,validateSpec:S},l))}for(const H in d)m[H]||d[H].required&&d[H].default===void 0&&l[H]===void 0&&L.push(new Yt(s,l,`missing required property "${H}"`));return L}function Ns(c){const s=c.value,l=c.valueSpec,d=c.style,m=c.styleSpec,_=c.key,w=c.arrayElementValidator||c.validateSpec;if(sn(s)!=="array")return[new Yt(_,s,`array expected, ${sn(s)} found`)];if(l.length&&s.length!==l.length)return[new Yt(_,s,`array length ${l.length} expected, length ${s.length} found`)];if(l["min-length"]&&s.length<l["min-length"])return[new Yt(_,s,`array length at least ${l["min-length"]} expected, length ${s.length} found`)];let S={type:l.value,values:l.values};m.$version<7&&(S.function=l.function),sn(l.value)==="object"&&(S=l.value);let L=[];for(let R=0;R<s.length;R++)L=L.concat(w({array:s,arrayIndex:R,value:s[R],valueSpec:S,validateSpec:c.validateSpec,style:d,styleSpec:m,key:`${_}[${R}]`}));return L}function Zc(c){const s=c.key,l=c.value,d=c.valueSpec;let m=sn(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new Yt(s,l,`number expected, ${m} found`)]:"minimum"in d&&l<d.minimum?[new Yt(s,l,`${l} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&l>d.maximum?[new Yt(s,l,`${l} is greater than the maximum value ${d.maximum}`)]:[]}function JA(c){const s=c.valueSpec,l=fi(c.value.type);let d,m,_,w={};const S=l!=="categorical"&&c.value.property===void 0,L=!S,R=sn(c.value.stops)==="array"&&sn(c.value.stops[0])==="array"&&sn(c.value.stops[0][0])==="object",H=Vi({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(re){if(l==="identity")return[new Yt(re.key,re.value,'identity function may not have a "stops" property')];let ie=[];const de=re.value;return ie=ie.concat(Ns({key:re.key,value:de,valueSpec:re.valueSpec,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:G})),sn(de)==="array"&&de.length===0&&ie.push(new Yt(re.key,de,"array must have at least one stop")),ie},default:function(re){return re.validateSpec({key:re.key,value:re.value,valueSpec:s,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec})}}});return l==="identity"&&S&&H.push(new Yt(c.key,c.value,'missing required property "property"')),l==="identity"||c.value.stops||H.push(new Yt(c.key,c.value,'missing required property "stops"')),l==="exponential"&&c.valueSpec.expression&&!qA(c.valueSpec)&&H.push(new Yt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(L&&!ts(c.valueSpec)?H.push(new Yt(c.key,c.value,"property functions not supported")):S&&!eo(c.valueSpec)&&H.push(new Yt(c.key,c.value,"zoom functions not supported"))),l!=="categorical"&&!R||c.value.property!==void 0||H.push(new Yt(c.key,c.value,'"property" property is required')),H;function G(re){let ie=[];const de=re.value,Ce=re.key;if(sn(de)!=="array")return[new Yt(Ce,de,`array expected, ${sn(de)} found`)];if(de.length!==2)return[new Yt(Ce,de,`array length 2 expected, length ${de.length} found`)];if(R){if(sn(de[0])!=="object")return[new Yt(Ce,de,`object expected, ${sn(de[0])} found`)];if(de[0].zoom===void 0)return[new Yt(Ce,de,"object stop key must have zoom")];if(de[0].value===void 0)return[new Yt(Ce,de,"object stop key must have value")];if(_&&_>fi(de[0].zoom))return[new Yt(Ce,de[0].zoom,"stop zoom values must appear in ascending order")];fi(de[0].zoom)!==_&&(_=fi(de[0].zoom),m=void 0,w={}),ie=ie.concat(Vi({key:`${Ce}[0]`,value:de[0],valueSpec:{zoom:{}},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:Zc,value:Y}}))}else ie=ie.concat(Y({key:`${Ce}[0]`,value:de[0],validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec},de));return Tu(il(de[1]))?ie.concat([new Yt(`${Ce}[1]`,de[1],"expressions are not allowed in function stops.")]):ie.concat(re.validateSpec({key:`${Ce}[1]`,value:de[1],valueSpec:s,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec}))}function Y(re,ie){const de=sn(re.value),Ce=fi(re.value),Ue=re.value!==null?re.value:ie;if(d){if(de!==d)return[new Yt(re.key,Ue,`${de} stop domain type must match previous stop domain type ${d}`)]}else d=de;if(de!=="number"&&de!=="string"&&de!=="boolean")return[new Yt(re.key,Ue,"stop domain value must be a number, string, or boolean")];if(de!=="number"&&l!=="categorical"){let st=`number expected, ${de} found`;return ts(s)&&l===void 0&&(st+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yt(re.key,Ue,st)]}return l!=="categorical"||de!=="number"||isFinite(Ce)&&Math.floor(Ce)===Ce?l!=="categorical"&&de==="number"&&m!==void 0&&Ce<m?[new Yt(re.key,Ue,"stop domain values must appear in ascending order")]:(m=Ce,l==="categorical"&&Ce in w?[new Yt(re.key,Ue,"stop domain values must be unique")]:(w[Ce]=!0,[])):[new Yt(re.key,Ue,`integer expected, found ${Ce}`)]}}function AA(c){const s=(c.expressionContext==="property"?Kh:Pu)(il(c.value),c.valueSpec);if(s.result==="error")return s.value.map(d=>new Yt(`${c.key}${d.key}`,c.value,d.message));const l=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!l.outputDefined())return[new Yt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Pa(l))return[new Yt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Pa(l))return[new Yt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!rl(l,["zoom","feature-state"]))return[new Yt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Pl(l))return[new Yt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mu(c){const s=c.key,l=c.value,d=sn(l);return d!=="string"?[new Yt(s,l,`color expected, ${d} found`)]:ln.parse(String(l))?[]:[new Yt(s,l,`color expected, "${l}" found`)]}function ec(c){const s=c.key,l=c.value,d=c.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(fi(l))===-1&&m.push(new Yt(s,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(fi(l))===-1&&m.push(new Yt(s,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function ku(c){return lA(il(c.value))?AA(Wn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Gd(c)}function Gd(c){const s=c.value,l=c.key;if(sn(s)!=="array")return[new Yt(l,s,`array expected, ${sn(s)} found`)];const d=c.styleSpec;let m,_=[];if(s.length<1)return[new Yt(l,s,"filter array must have at least 1 element")];switch(_=_.concat(ec({key:`${l}[0]`,value:s[0],valueSpec:d.filter_operator,style:c.style,styleSpec:c.styleSpec})),fi(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&fi(s[1])==="$type"&&_.push(new Yt(l,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&_.push(new Yt(l,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(m=sn(s[1]),m!=="string"&&_.push(new Yt(`${l}[1]`,s[1],`string expected, ${m} found`)));for(let w=2;w<s.length;w++)m=sn(s[w]),fi(s[1])==="$type"?_=_.concat(ec({key:`${l}[${w}]`,value:s[w],valueSpec:d.geometry_type,style:c.style,styleSpec:c.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&_.push(new Yt(`${l}[${w}]`,s[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<s.length;w++)_=_.concat(Gd({key:`${l}[${w}]`,value:s[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":m=sn(s[1]),s.length!==2?_.push(new Yt(l,s,`filter array for "${s[0]}" operator must have 2 elements`)):m!=="string"&&_.push(new Yt(`${l}[1]`,s[1],`string expected, ${m} found`))}return _}function Xc(c,s){const l=c.key,d=c.validateSpec,m=c.style,_=c.styleSpec,w=c.value,S=c.objectKey,L=_[`${s}_${c.layerType}`];if(!L)return[];const R=S.match(/^(.*)-transition$/);if(s==="paint"&&R&&L[R[1]]&&L[R[1]].transition)return d({key:l,value:w,valueSpec:_.transition,style:m,styleSpec:_});const H=c.valueSpec||L[S];if(!H)return[new Yt(l,w,`unknown property "${S}"`)];let G;if(sn(w)==="string"&&ts(H)&&!H.tokens&&(G=/^{([^}]+)}$/.exec(w)))return[new Yt(l,w,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const Y=[];return c.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&Y.push(new Yt(l,w,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Ll(il(w))&&fi(w.type)==="identity"&&Y.push(new Yt(l,w,'"text-font" does not support identity functions'))),Y.concat(d({key:c.key,value:w,valueSpec:H,style:m,styleSpec:_,expressionContext:"property",propertyType:s,propertyKey:S}))}function sl(c){return Xc(c,"paint")}function Ma(c){return Xc(c,"layout")}function bs(c){let s=[];const l=c.value,d=c.key,m=c.style,_=c.styleSpec;if(sn(l)!=="object")return[new Yt(d,l,`object expected, ${sn(l)} found`)];l.type||l.ref||s.push(new Yt(d,l,'either "type" or "ref" is required'));let w=fi(l.type);const S=fi(l.ref);if(l.id){const L=fi(l.id);for(let R=0;R<c.arrayIndex;R++){const H=m.layers[R];fi(H.id)===L&&s.push(new Yt(d,l.id,`duplicate layer id "${l.id}", previously used at line ${H.id.__line__}`))}}if("ref"in l){let L;["type","source","source-layer","filter","layout"].forEach(R=>{R in l&&s.push(new Yt(d,l[R],`"${R}" is prohibited for ref layers`))}),m.layers.forEach(R=>{fi(R.id)===S&&(L=R)}),L?L.ref?s.push(new Yt(d,l.ref,"ref cannot reference another ref layer")):w=fi(L.type):s.push(new Yt(d,l.ref,`ref layer "${S}" not found`))}else if(w!=="background")if(l.source){const L=m.sources&&m.sources[l.source],R=L&&fi(L.type);L?R==="vector"&&w==="raster"?s.push(new Yt(d,l.source,`layer "${l.id}" requires a raster source`)):R!=="raster-dem"&&w==="hillshade"||R!=="raster-dem"&&w==="color-relief"?s.push(new Yt(d,l.source,`layer "${l.id}" requires a raster-dem source`)):R==="raster"&&w!=="raster"?s.push(new Yt(d,l.source,`layer "${l.id}" requires a vector source`)):R!=="vector"||l["source-layer"]?R==="raster-dem"&&w!=="hillshade"&&w!=="color-relief"?s.push(new Yt(d,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):w!=="line"||!l.paint||!l.paint["line-gradient"]||R==="geojson"&&L.lineMetrics||s.push(new Yt(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Yt(d,l,`layer "${l.id}" must specify a "source-layer"`)):s.push(new Yt(d,l.source,`source "${l.source}" not found`))}else s.push(new Yt(d,l,'missing required property "source"'));return s=s.concat(Vi({key:d,value:l,valueSpec:_.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${d}.type`,value:l.type,valueSpec:_.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:l,objectKey:"type"}),filter:ku,layout:L=>Vi({layer:l,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":R=>Ma(Wn({layerType:w},R))}}),paint:L=>Vi({layer:l,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":R=>sl(Wn({layerType:w},R))}})}})),s}function aa(c){const s=c.value,l=c.key,d=sn(s);return d!=="string"?[new Yt(l,s,`string expected, ${d} found`)]:[]}const Uu={promoteId:function({key:c,value:s}){if(sn(s)==="string")return aa({key:c,value:s});{const l=[];for(const d in s)l.push(...aa({key:`${c}.${d}`,value:s[d]}));return l}}};function $d(c){const s=c.value,l=c.key,d=c.styleSpec,m=c.style,_=c.validateSpec;if(!s.type)return[new Yt(l,s,'"type" is required')];const w=fi(s.type);let S;switch(w){case"vector":case"raster":return S=Vi({key:l,value:s,valueSpec:d[`source_${w.replace("-","_")}`],style:c.style,styleSpec:d,objectElementValidators:Uu,validateSpec:_}),S;case"raster-dem":return S=function(L){var R;const H=(R=L.sourceName)!==null&&R!==void 0?R:"",G=L.value,Y=L.styleSpec,re=Y.source_raster_dem,ie=L.style;let de=[];const Ce=sn(G);if(G===void 0)return de;if(Ce!=="object")return de.push(new Yt("source_raster_dem",G,`object expected, ${Ce} found`)),de;const Ue=fi(G.encoding)==="custom",st=["redFactor","greenFactor","blueFactor","baseShift"],Ve=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const J in G)!Ue&&st.includes(J)?de.push(new Yt(J,G[J],`In "${H}": "${J}" is only valid when "encoding" is set to "custom". ${Ve} encoding found`)):re[J]?de=de.concat(L.validateSpec({key:J,value:G[J],valueSpec:re[J],validateSpec:L.validateSpec,style:ie,styleSpec:Y})):de.push(new Yt(J,G[J],`unknown property "${J}"`));return de}({sourceName:l,value:s,style:c.style,styleSpec:d,validateSpec:_}),S;case"geojson":if(S=Vi({key:l,value:s,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:_,objectElementValidators:Uu}),s.cluster)for(const L in s.clusterProperties){const[R,H]=s.clusterProperties[L],G=typeof R=="string"?[R,["accumulated"],["get",L]]:R;S.push(...AA({key:`${l}.${L}.map`,value:H,expressionContext:"cluster-map"})),S.push(...AA({key:`${l}.${L}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return S;case"video":return Vi({key:l,value:s,valueSpec:d.source_video,style:m,validateSpec:_,styleSpec:d});case"image":return Vi({key:l,value:s,valueSpec:d.source_image,style:m,validateSpec:_,styleSpec:d});case"canvas":return[new Yt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ec({key:`${l}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function qd(c){const s=c.value,l=c.styleSpec,d=l.light,m=c.style;let _=[];const w=sn(s);if(s===void 0)return _;if(w!=="object")return _=_.concat([new Yt("light",s,`object expected, ${w} found`)]),_;for(const S in s){const L=S.match(/^(.*)-transition$/);_=_.concat(L&&d[L[1]]&&d[L[1]].transition?c.validateSpec({key:S,value:s[S],valueSpec:l.transition,validateSpec:c.validateSpec,style:m,styleSpec:l}):d[S]?c.validateSpec({key:S,value:s[S],valueSpec:d[S],validateSpec:c.validateSpec,style:m,styleSpec:l}):[new Yt(S,s[S],`unknown property "${S}"`)])}return _}function tc(c){const s=c.value,l=c.styleSpec,d=l.sky,m=c.style,_=sn(s);if(s===void 0)return[];if(_!=="object")return[new Yt("sky",s,`object expected, ${_} found`)];let w=[];for(const S in s)w=w.concat(d[S]?c.validateSpec({key:S,value:s[S],valueSpec:d[S],style:m,styleSpec:l}):[new Yt(S,s[S],`unknown property "${S}"`)]);return w}function $h(c){const s=c.value,l=c.styleSpec,d=l.terrain,m=c.style;let _=[];const w=sn(s);if(s===void 0)return _;if(w!=="object")return _=_.concat([new Yt("terrain",s,`object expected, ${w} found`)]),_;for(const S in s)_=_.concat(d[S]?c.validateSpec({key:S,value:s[S],valueSpec:d[S],validateSpec:c.validateSpec,style:m,styleSpec:l}):[new Yt(S,s[S],`unknown property "${S}"`)]);return _}function Qu(c){let s=[];const l=c.value,d=c.key;if(Array.isArray(l)){const m=[],_=[];for(const w in l)l[w].id&&m.includes(l[w].id)&&s.push(new Yt(d,l,`all the sprites' ids must be unique, but ${l[w].id} is duplicated`)),m.push(l[w].id),l[w].url&&_.includes(l[w].url)&&s.push(new Yt(d,l,`all the sprites' URLs must be unique, but ${l[w].url} is duplicated`)),_.push(l[w].url),s=s.concat(Vi({key:`${d}[${w}]`,value:l[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return aa({key:d,value:l})}function Wd(c){return s=c.value,s&&s.constructor===Object?[]:[new Yt(c.key,c.value,`object expected, ${sn(c.value)} found`)];var s}const Yc={"*":()=>[],array:Ns,boolean:function(c){const s=c.value,l=c.key,d=sn(s);return d!=="boolean"?[new Yt(l,s,`boolean expected, ${d} found`)]:[]},number:Zc,color:Mu,constants:La,enum:ec,filter:ku,function:JA,layer:bs,object:Vi,source:$d,light:qd,sky:tc,terrain:$h,projection:function(c){const s=c.value,l=c.styleSpec,d=l.projection,m=c.style,_=sn(s);if(s===void 0)return[];if(_!=="object")return[new Yt("projection",s,`object expected, ${_} found`)];let w=[];for(const S in s)w=w.concat(d[S]?c.validateSpec({key:S,value:s[S],valueSpec:d[S],style:m,styleSpec:l}):[new Yt(S,s[S],`unknown property "${S}"`)]);return w},projectionDefinition:function(c){const s=c.key;let l=c.value;l=l instanceof String?l.valueOf():l;const d=sn(l);return d!=="array"||function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"}(l)||function(m){return!!["interpolate","step","literal"].includes(m[0])}(l)?["array","string"].includes(d)?[]:[new Yt(s,l,`projection expected, invalid type "${d}" found`)]:[new Yt(s,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:aa,formatted:function(c){return aa(c).length===0?[]:AA(c)},resolvedImage:function(c){return aa(c).length===0?[]:AA(c)},padding:function(c){const s=c.key,l=c.value;if(sn(l)==="array"){if(l.length<1||l.length>4)return[new Yt(s,l,`padding requires 1 to 4 values; ${l.length} values found`)];const d={type:"number"};let m=[];for(let _=0;_<l.length;_++)m=m.concat(c.validateSpec({key:`${s}[${_}]`,value:l[_],validateSpec:c.validateSpec,valueSpec:d}));return m}return Zc({key:s,value:l,valueSpec:{}})},numberArray:function(c){const s=c.key,l=c.value;if(sn(l)==="array"){const d={type:"number"};if(l.length<1)return[new Yt(s,l,"array length at least 1 expected, length 0 found")];let m=[];for(let _=0;_<l.length;_++)m=m.concat(c.validateSpec({key:`${s}[${_}]`,value:l[_],validateSpec:c.validateSpec,valueSpec:d}));return m}return Zc({key:s,value:l,valueSpec:{}})},colorArray:function(c){const s=c.key,l=c.value;if(sn(l)==="array"){if(l.length<1)return[new Yt(s,l,"array length at least 1 expected, length 0 found")];let d=[];for(let m=0;m<l.length;m++)d=d.concat(Mu({key:`${s}[${m}]`,value:l[m]}));return d}return Mu({key:s,value:l})},variableAnchorOffsetCollection:function(c){const s=c.key,l=c.value,d=sn(l),m=c.styleSpec;if(d!=="array"||l.length<1||l.length%2!=0)return[new Yt(s,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let w=0;w<l.length;w+=2)_=_.concat(ec({key:`${s}[${w}]`,value:l[w],valueSpec:m.layout_symbol["text-anchor"]})),_=_.concat(Ns({key:`${s}[${w+1}]`,value:l[w+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:m}));return _},sprite:Qu,state:Wd};function cA(c){const s=c.value,l=c.valueSpec,d=c.styleSpec;return c.validateSpec=cA,l.expression&&Ll(fi(s))?JA(c):l.expression&&Tu(il(s))?AA(c):l.type&&Yc[l.type]?Yc[l.type](c):Vi(Wn({},c,{valueSpec:l.type?d[l.type]:l}))}function rc(c){const s=c.value,l=c.key,d=aa(c);return d.length||(s.indexOf("{fontstack}")===-1&&d.push(new Yt(l,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&d.push(new Yt(l,s,'"glyphs" url must include a "{range}" token'))),d}function Lo(c,s=Me){let l=[];return l=l.concat(cA({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:cA,objectElementValidators:{glyphs:rc,"*":()=>[]}})),c.constants&&(l=l.concat(La({key:"constants",value:c.constants}))),b(l)}function Mo(c){return function(s){return c({...s,validateSpec:cA})}}function b(c){return[].concat(c).sort((s,l)=>s.line-l.line)}function I(c){return function(...s){return b(c.apply(this,s))}}Lo.source=I(Mo($d)),Lo.sprite=I(Mo(Qu)),Lo.glyphs=I(Mo(rc)),Lo.light=I(Mo(qd)),Lo.sky=I(Mo(tc)),Lo.terrain=I(Mo($h)),Lo.state=I(Mo(Wd)),Lo.layer=I(Mo(bs)),Lo.filter=I(Mo(ku)),Lo.paintProperty=I(Mo(sl)),Lo.layoutProperty=I(Mo(Ma));const O=Lo,q=O.light,ae=O.sky,me=O.paintProperty,ge=O.layoutProperty;function ve(c,s){let l=!1;if(s&&s.length)for(const d of s)c.fire(new at(new Error(d.message))),l=!0;return l}class we{constructor(s,l,d){const m=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const w=new Int32Array(this.arrayBuffer);s=w[0],this.d=(l=w[1])+2*(d=w[2]);for(let L=0;L<this.d*this.d;L++){const R=w[3+L],H=w[3+L+1];m.push(R===H?null:w.subarray(R,H))}const S=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],S),this.bboxes=w.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*d;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=s,this.padding=d,this.scale=l/s,this.uid=0;const _=d/l*s;this.min=-_,this.max=s+_}insert(s,l,d,m,_){this._forEachCell(l,d,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,l,d,m,_,w){this.cells[_].push(w)}query(s,l,d,m,_){const w=this.min,S=this.max;if(s<=w&&l<=w&&S<=d&&S<=m&&!_)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(s,l,d,m,this._queryCell,L,{},_),L}}_queryCell(s,l,d,m,_,w,S,L){const R=this.cells[_];if(R!==null){const H=this.keys,G=this.bboxes;for(let Y=0;Y<R.length;Y++){const re=R[Y];if(S[re]===void 0){const ie=4*re;(L?L(G[ie+0],G[ie+1],G[ie+2],G[ie+3]):s<=G[ie+2]&&l<=G[ie+3]&&d>=G[ie+0]&&m>=G[ie+1])?(S[re]=!0,w.push(H[re])):S[re]=!1}}}}_forEachCell(s,l,d,m,_,w,S,L){const R=this._convertToCellCoord(s),H=this._convertToCellCoord(l),G=this._convertToCellCoord(d),Y=this._convertToCellCoord(m);for(let re=R;re<=G;re++)for(let ie=H;ie<=Y;ie++){const de=this.d*ie+re;if((!L||L(this._convertFromCellCoord(re),this._convertFromCellCoord(ie),this._convertFromCellCoord(re+1),this._convertFromCellCoord(ie+1)))&&_.call(this,s,l,d,m,de,w,S,L))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,l=3+this.cells.length+1+1;let d=0;for(let w=0;w<this.cells.length;w++)d+=this.cells[w].length;const m=new Int32Array(l+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=l;for(let w=0;w<s.length;w++){const S=s[w];m[3+w]=_,m.set(S,_),_+=S.length}return m[3+s.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+s.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(s,l){const d=s.toArrayBuffer();return l&&l.push(d),{buffer:d}}static deserialize(s){return new we(s.buffer)}}const ke={};function Ne(c,s,l={}){if(ke[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),ke[c]={klass:s,omit:l.omit||[],shallow:l.shallow||[]}}Ne("Object",Object),Ne("Set",Set),Ne("TransferableGridIndex",we),Ne("Color",ln),Ne("Error",Error),Ne("AJAXError",Qe),Ne("ResolvedImage",ws),Ne("StylePropertyFunction",Gc),Ne("StyleExpression",WA,{omit:["_evaluator"]}),Ne("ZoomDependentExpression",Lu),Ne("ZoomConstantExpression",ZA),Ne("CompoundExpression",hi,{omit:["_evaluate"]});for(const c in cs)cs[c]._classRegistryKey||Ne(`Expression_${c}`,cs[c]);function Bt(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function wt(c){return c.$name||c.constructor._classRegistryKey}function ft(c){return!function(s){if(s===null||typeof s!="object")return!1;const l=wt(s);return!(!l||l==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Bt(c)||lr(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Ot(c,s){if(ft(c))return(Bt(c)||lr(c))&&s&&s.push(c),ArrayBuffer.isView(c)&&s&&s.push(c.buffer),c instanceof ImageData&&s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const _=[];for(const w of c)_.push(Ot(w,s));return _}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const l=wt(c);if(!l)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!ke[l])throw new Error(`${l} is not registered.`);const{klass:d}=ke[l],m=d.serialize?d.serialize(c,s):{};if(d.serialize){if(s&&m===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in c){if(!c.hasOwnProperty(_)||ke[l].omit.indexOf(_)>=0)continue;const w=c[_];m[_]=ke[l].shallow.indexOf(_)>=0?w:Ot(w,s)}c instanceof Error&&(m.message=c.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(m.$name=l),m}function Pt(c){if(ft(c))return c;if(Array.isArray(c))return c.map(Pt);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const s=wt(c)||"Object";if(!ke[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:l}=ke[s];if(!l)throw new Error(`can't deserialize unregistered class ${s}`);if(l.deserialize)return l.deserialize(c);const d=Object.create(l.prototype);for(const m of Object.keys(c)){if(m==="$name")continue;const _=c[m];d[m]=ke[s].shallow.indexOf(m)>=0?_:Pt(_)}return d}class ut{constructor(){this.first=!0}update(s,l){const d=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=l),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=d,!0))}}const Ye={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Nt(c){for(const s of c)if(fr(s.charCodeAt(0)))return!0;return!1}function Wt(c){for(const s of c)if(!dr(s.charCodeAt(0)))return!1;return!0}function zt(c){const s=c.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(s.join("|"),"u")}const xr=zt(["Arab","Dupl","Mong","Ougr","Syrc"]);function dr(c){return!xr.test(String.fromCodePoint(c))}const Or=zt(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function fr(c){return!(c!==746&&c!==747&&(c<4352||!(Ye["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Ye["CJK Compatibility"](c)||Ye["CJK Strokes"](c)||!(!Ye["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Ye["Enclosed CJK Letters and Months"](c)||Ye["Ideographic Description Characters"](c)||Ye.Kanbun(c)||Ye.Katakana(c)&&c!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Ye["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Ye["Vertical Forms"](c)||Ye["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||Or.test(String.fromCodePoint(c)))))}function Cn(c){return!(fr(c)||function(s){return!!(Ye["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Ye["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Ye["Letterlike Symbols"](s)||Ye["Number Forms"](s)||Ye["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Ye["Control Pictures"](s)&&s!==9251||Ye["Optical Character Recognition"](s)||Ye["Enclosed Alphanumerics"](s)||Ye["Geometric Shapes"](s)||Ye["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Ye["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Ye["CJK Symbols and Punctuation"](s)||Ye.Katakana(s)||Ye["Private Use Area"](s)||Ye["CJK Compatibility Forms"](s)||Ye["Small Form Variants"](s)||Ye["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}const Ln=zt(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function pn(c){return Ln.test(String.fromCodePoint(c))}function vn(c,s){return!(!s&&pn(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Ye.Khmer(c))}function Qn(c){for(const s of c)if(pn(s.charCodeAt(0)))return!0;return!1}const wn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(wn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,s){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const l=c.pluginURL,d=new Promise(_=>{this.loadScriptResolve=_});s(l);const m=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([d,m]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:l};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class Er{constructor(s,l){this.zoom=s,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new ut,this.transition=l.transition||{},this.globalState=l.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ut,this.transition={},this.globalState={})}isSupportedScript(s){return function(l,d){for(const m of l)if(!vn(m.charCodeAt(0),d))return!1;return!0}(s,wn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,l=s-Math.floor(s),d=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*l}}}class ni{constructor(s,l){this.property=s,this.value=l,this.expression=function(d,m){if(Ll(d))return new Gc(d,m);if(Tu(d)){const _=Kh(d,m);if(_.result==="error")throw new Error(_.value.map(w=>`${w.key}: ${w.message}`).join(", "));return _.value}{let _=d;return m.type==="color"&&typeof d=="string"?_=ln.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?m.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?_=An.parse(d):m.type==="projectionDefinition"&&typeof d=="string"&&(_=Gr.parse(d)):_=Ci.parse(d):_=Di.parse(d):_=kn.parse(d),{globalStateRefs:new Set,kind:"constant",evaluate:()=>_}}}(l===void 0?s.specification.default:l,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(s,l,d){return this.property.possiblyEvaluate(this,s,l,d)}}class us{constructor(s){this.property=s,this.value=new ni(s,void 0)}transitioned(s,l){return new Ds(this.property,this.value,l,Mt({},s.transition,this.transition),s.now)}untransitioned(){return new Ds(this.property,this.value,null,{},0)}}class yi{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return It(this._values[s].value.value)}setValue(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new us(this._values[s].property)),this._values[s].value=new ni(this._values[s].property,l===null?void 0:It(l))}getTransition(s){return It(this._values[s].transition)}setTransition(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new us(this._values[s].property)),this._values[s].transition=It(l)||void 0}serialize(){const s={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(s[l]=d);const m=this.getTransition(l);m!==void 0&&(s[`${l}-transition`]=m)}return s}transitioned(s,l){const d=new Mn(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(s,l._values[m]);return d}untransitioned(){const s=new Mn(this._properties);for(const l of Object.keys(this._values))s._values[l]=this._values[l].untransitioned();return s}}class Ds{constructor(s,l,d,m,_){this.property=s,this.value=l,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,s.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(s,l,d){const m=s.now||0,_=this.value.possiblyEvaluate(s,l,d),w=this.prior;if(w){if(m>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(m<this.begin)return w.possiblyEvaluate(s,l,d);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(s,l,d),_,nt(S))}}return _}}class Mn{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,l,d){const m=new Ei(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(s,l,d);return m}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class po{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return It(this._values[s].value)}setValue(s,l){this._values[s]=new ni(this._values[s].property,l===null?void 0:It(l))}serialize(){const s={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(s[l]=d)}return s}possiblyEvaluate(s,l,d){const m=new Ei(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(s,l,d);return m}}class vi{constructor(s,l,d){this.property=s,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,l,d,m){return this.property.evaluate(this.value,this.parameters,s,l,d,m)}}class Ei{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class sr{constructor(s){this.specification=s}possiblyEvaluate(s,l){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(l)}interpolate(s,l,d){const m=es[this.specification.type];return m?m(s,l,d):s}}class wr{constructor(s,l){this.specification=s,this.overrides=l}possiblyEvaluate(s,l,d,m){return new vi(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(l,null,{},d,m)}:s.expression,l)}interpolate(s,l,d){if(s.value.kind!=="constant"||l.value.kind!=="constant")return s;if(s.value.value===void 0||l.value.value===void 0)return new vi(this,{kind:"constant",value:void 0},s.parameters);const m=es[this.specification.type];if(m){const _=m(s.value.value,l.value.value,d);return new vi(this,{kind:"constant",value:_},s.parameters)}return s}evaluate(s,l,d,m,_,w){return s.kind==="constant"?s.value:s.evaluate(l,d,m,_,w)}}class Os extends wr{possiblyEvaluate(s,l,d,m){if(s.value===void 0)return new vi(this,{kind:"constant",value:void 0},l);if(s.expression.kind==="constant"){const _=s.expression.evaluate(l,null,{},d,m),w=s.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(w,w,w,l);return new vi(this,{kind:"constant",value:S},l)}if(s.expression.kind==="camera"){const _=this._calculate(s.expression.evaluate({zoom:l.zoom-1}),s.expression.evaluate({zoom:l.zoom}),s.expression.evaluate({zoom:l.zoom+1}),l);return new vi(this,{kind:"constant",value:_},l)}return new vi(this,s.expression,l)}evaluate(s,l,d,m,_,w){if(s.kind==="source"){const S=s.evaluate(l,d,m,_,w);return this._calculate(S,S,S,l)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(l.zoom)-1},d,m),s.evaluate({zoom:Math.floor(l.zoom)},d,m),s.evaluate({zoom:Math.floor(l.zoom)+1},d,m),l):s.value}_calculate(s,l,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:d,to:l}}interpolate(s){return s}}class ko{constructor(s){this.specification=s}possiblyEvaluate(s,l,d,m){if(s.value!==void 0){if(s.expression.kind==="constant"){const _=s.expression.evaluate(l,null,{},d,m);return this._calculate(_,_,_,l)}return this._calculate(s.expression.evaluate(new Er(Math.floor(l.zoom-1),l)),s.expression.evaluate(new Er(Math.floor(l.zoom),l)),s.expression.evaluate(new Er(Math.floor(l.zoom+1),l)),l)}}_calculate(s,l,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:d,to:l}}interpolate(s){return s}}class _i{constructor(s){this.specification=s}possiblyEvaluate(s,l,d,m){return!!s.expression.evaluate(l,null,{},d,m)}interpolate(){return!1}}class pi{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in s){const d=s[l];d.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new ni(d,void 0),_=this.defaultTransitionablePropertyValues[l]=new us(d);this.defaultTransitioningPropertyValues[l]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}Ne("DataDrivenProperty",wr),Ne("DataConstantProperty",sr),Ne("CrossFadedDataDrivenProperty",Os),Ne("CrossFadedProperty",ko),Ne("ColorRampProperty",_i);const Ml="-transition";class wi extends mt{constructor(s,l){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter,this._featureFilter=Po(s.filter)),l.layout&&(this._unevaluatedLayout=new po(l.layout)),l.paint)){this._transitionablePaint=new yi(l.paint);for(const d in s.paint)this.setPaintProperty(d,s.paint[d],{validate:!1});for(const d in s.layout)this.setLayoutProperty(d,s.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ei(l.paint)}}setFilter(s){this.filter=s,this._featureFilter=Po(s)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}getLayoutAffectingGlobalStateRefs(){const s=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[l];for(const m of d.getGlobalStateRefs())s.add(m)}for(const l of this._featureFilter.getGlobalStateRefs())s.add(l);return s}setLayoutProperty(s,l,d={}){l!=null&&this._validate(ge,`layers.${this.id}.layout.${s}`,s,l,d)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,l):this.visibility=l)}getPaintProperty(s){return s.endsWith(Ml)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,l,d={}){if(l!=null&&this._validate(me,`layers.${this.id}.paint.${s}`,s,l,d))return!1;if(s.endsWith(Ml))return this._transitionablePaint.setTransition(s.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[s],_=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(s,l),this._handleSpecialPaintPropertyUpdate(s);const L=this._transitionablePaint._values[s].value;return L.isDataDriven()||w||_||this._handleOverridablePaintPropertyUpdate(s,S,L)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,l,d){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,l){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,l)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),vr(s,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(s,l,d,m,_={}){return(!_||_.validate!==!1)&&ve(this,s.call(O,{key:l,layerType:this.type,objectKey:d,value:m,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const l=this.paint.get(s);if(l instanceof vi&&ts(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const ol={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class On{constructor(s,l){this._structArray=s,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Gn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,l){return s._trim(),l&&(s.isTransferred=!0,l.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const l=Object.create(this.prototype);return l.arrayBuffer=s.arrayBuffer,l.length=s.length,l.capacity=s.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ii(c,s=1){let l=0,d=0;return{members:c.map(m=>{const _=ol[m.type].BYTES_PER_ELEMENT,w=l=qh(l,Math.max(s,_)),S=m.components||1;return d=Math.max(d,_),l+=_*S,{name:m.name,type:m.type,components:S,offset:w}}),size:qh(l,Math.max(d,s)),alignment:s}}function qh(c,s){return Math.ceil(c/s)*s}class la extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l){const d=this.length;return this.resize(d+1),this.emplace(d,s,l)}emplace(s,l,d){const m=2*s;return this.int16[m+0]=l,this.int16[m+1]=d,s}}la.prototype.bytesPerElement=4,Ne("StructArrayLayout2i4",la);class Uo extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,l,d)}emplace(s,l,d,m){const _=3*s;return this.int16[_+0]=l,this.int16[_+1]=d,this.int16[_+2]=m,s}}Uo.prototype.bytesPerElement=6,Ne("StructArrayLayout3i6",Uo);class nc extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,l,d,m)}emplace(s,l,d,m,_){const w=4*s;return this.int16[w+0]=l,this.int16[w+1]=d,this.int16[w+2]=m,this.int16[w+3]=_,s}}nc.prototype.bytesPerElement=8,Ne("StructArrayLayout4i8",nc);class ro extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w){const S=this.length;return this.resize(S+1),this.emplace(S,s,l,d,m,_,w)}emplace(s,l,d,m,_,w,S){const L=6*s;return this.int16[L+0]=l,this.int16[L+1]=d,this.int16[L+2]=m,this.int16[L+3]=_,this.int16[L+4]=w,this.int16[L+5]=S,s}}ro.prototype.bytesPerElement=12,Ne("StructArrayLayout2i4i12",ro);class Qo extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w){const S=this.length;return this.resize(S+1),this.emplace(S,s,l,d,m,_,w)}emplace(s,l,d,m,_,w,S){const L=4*s,R=8*s;return this.int16[L+0]=l,this.int16[L+1]=d,this.uint8[R+4]=m,this.uint8[R+5]=_,this.uint8[R+6]=w,this.uint8[R+7]=S,s}}Qo.prototype.bytesPerElement=8,Ne("StructArrayLayout2i4ub8",Qo);class ka extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l){const d=this.length;return this.resize(d+1),this.emplace(d,s,l)}emplace(s,l,d){const m=2*s;return this.float32[m+0]=l,this.float32[m+1]=d,s}}ka.prototype.bytesPerElement=8,Ne("StructArrayLayout2f8",ka);class Ru extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w,S,L,R,H){const G=this.length;return this.resize(G+1),this.emplace(G,s,l,d,m,_,w,S,L,R,H)}emplace(s,l,d,m,_,w,S,L,R,H,G){const Y=10*s;return this.uint16[Y+0]=l,this.uint16[Y+1]=d,this.uint16[Y+2]=m,this.uint16[Y+3]=_,this.uint16[Y+4]=w,this.uint16[Y+5]=S,this.uint16[Y+6]=L,this.uint16[Y+7]=R,this.uint16[Y+8]=H,this.uint16[Y+9]=G,s}}Ru.prototype.bytesPerElement=20,Ne("StructArrayLayout10ui20",Ru);class uA extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w,S,L,R,H,G,Y){const re=this.length;return this.resize(re+1),this.emplace(re,s,l,d,m,_,w,S,L,R,H,G,Y)}emplace(s,l,d,m,_,w,S,L,R,H,G,Y,re){const ie=12*s;return this.int16[ie+0]=l,this.int16[ie+1]=d,this.int16[ie+2]=m,this.int16[ie+3]=_,this.uint16[ie+4]=w,this.uint16[ie+5]=S,this.uint16[ie+6]=L,this.uint16[ie+7]=R,this.int16[ie+8]=H,this.int16[ie+9]=G,this.int16[ie+10]=Y,this.int16[ie+11]=re,s}}uA.prototype.bytesPerElement=24,Ne("StructArrayLayout4i4ui4i24",uA);class Nu extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,l,d)}emplace(s,l,d,m){const _=3*s;return this.float32[_+0]=l,this.float32[_+1]=d,this.float32[_+2]=m,s}}Nu.prototype.bytesPerElement=12,Ne("StructArrayLayout3f12",Nu);class y extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint32[1*s+0]=l,s}}y.prototype.bytesPerElement=4,Ne("StructArrayLayout1ul4",y);class n extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w,S,L,R){const H=this.length;return this.resize(H+1),this.emplace(H,s,l,d,m,_,w,S,L,R)}emplace(s,l,d,m,_,w,S,L,R,H){const G=10*s,Y=5*s;return this.int16[G+0]=l,this.int16[G+1]=d,this.int16[G+2]=m,this.int16[G+3]=_,this.int16[G+4]=w,this.int16[G+5]=S,this.uint32[Y+3]=L,this.uint16[G+8]=R,this.uint16[G+9]=H,s}}n.prototype.bytesPerElement=20,Ne("StructArrayLayout6i1ul2ui20",n);class a extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w){const S=this.length;return this.resize(S+1),this.emplace(S,s,l,d,m,_,w)}emplace(s,l,d,m,_,w,S){const L=6*s;return this.int16[L+0]=l,this.int16[L+1]=d,this.int16[L+2]=m,this.int16[L+3]=_,this.int16[L+4]=w,this.int16[L+5]=S,s}}a.prototype.bytesPerElement=12,Ne("StructArrayLayout2i2i2i12",a);class f extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_){const w=this.length;return this.resize(w+1),this.emplace(w,s,l,d,m,_)}emplace(s,l,d,m,_,w){const S=4*s,L=8*s;return this.float32[S+0]=l,this.float32[S+1]=d,this.float32[S+2]=m,this.int16[L+6]=_,this.int16[L+7]=w,s}}f.prototype.bytesPerElement=16,Ne("StructArrayLayout2f1f2i16",f);class p extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w){const S=this.length;return this.resize(S+1),this.emplace(S,s,l,d,m,_,w)}emplace(s,l,d,m,_,w,S){const L=16*s,R=4*s,H=8*s;return this.uint8[L+0]=l,this.uint8[L+1]=d,this.float32[R+1]=m,this.float32[R+2]=_,this.int16[H+6]=w,this.int16[H+7]=S,s}}p.prototype.bytesPerElement=16,Ne("StructArrayLayout2ub2f2i16",p);class v extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,l,d)}emplace(s,l,d,m){const _=3*s;return this.uint16[_+0]=l,this.uint16[_+1]=d,this.uint16[_+2]=m,s}}v.prototype.bytesPerElement=6,Ne("StructArrayLayout3ui6",v);class B extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w,S,L,R,H,G,Y,re,ie,de,Ce,Ue){const st=this.length;return this.resize(st+1),this.emplace(st,s,l,d,m,_,w,S,L,R,H,G,Y,re,ie,de,Ce,Ue)}emplace(s,l,d,m,_,w,S,L,R,H,G,Y,re,ie,de,Ce,Ue,st){const Ve=24*s,J=12*s,xe=48*s;return this.int16[Ve+0]=l,this.int16[Ve+1]=d,this.uint16[Ve+2]=m,this.uint16[Ve+3]=_,this.uint32[J+2]=w,this.uint32[J+3]=S,this.uint32[J+4]=L,this.uint16[Ve+10]=R,this.uint16[Ve+11]=H,this.uint16[Ve+12]=G,this.float32[J+7]=Y,this.float32[J+8]=re,this.uint8[xe+36]=ie,this.uint8[xe+37]=de,this.uint8[xe+38]=Ce,this.uint32[J+10]=Ue,this.int16[Ve+22]=st,s}}B.prototype.bytesPerElement=48,Ne("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",B);class T extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,d,m,_,w,S,L,R,H,G,Y,re,ie,de,Ce,Ue,st,Ve,J,xe,qe,bt,Ht,Et,Tt,Xt,Vt){const er=this.length;return this.resize(er+1),this.emplace(er,s,l,d,m,_,w,S,L,R,H,G,Y,re,ie,de,Ce,Ue,st,Ve,J,xe,qe,bt,Ht,Et,Tt,Xt,Vt)}emplace(s,l,d,m,_,w,S,L,R,H,G,Y,re,ie,de,Ce,Ue,st,Ve,J,xe,qe,bt,Ht,Et,Tt,Xt,Vt,er){const kt=32*s,yr=16*s;return this.int16[kt+0]=l,this.int16[kt+1]=d,this.int16[kt+2]=m,this.int16[kt+3]=_,this.int16[kt+4]=w,this.int16[kt+5]=S,this.int16[kt+6]=L,this.int16[kt+7]=R,this.uint16[kt+8]=H,this.uint16[kt+9]=G,this.uint16[kt+10]=Y,this.uint16[kt+11]=re,this.uint16[kt+12]=ie,this.uint16[kt+13]=de,this.uint16[kt+14]=Ce,this.uint16[kt+15]=Ue,this.uint16[kt+16]=st,this.uint16[kt+17]=Ve,this.uint16[kt+18]=J,this.uint16[kt+19]=xe,this.uint16[kt+20]=qe,this.uint16[kt+21]=bt,this.uint16[kt+22]=Ht,this.uint32[yr+12]=Et,this.float32[yr+13]=Tt,this.float32[yr+14]=Xt,this.uint16[kt+30]=Vt,this.uint16[kt+31]=er,s}}T.prototype.bytesPerElement=64,Ne("StructArrayLayout8i15ui1ul2f2ui64",T);class M extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.float32[1*s+0]=l,s}}M.prototype.bytesPerElement=4,Ne("StructArrayLayout1f4",M);class z extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,l,d)}emplace(s,l,d,m){const _=3*s;return this.uint16[6*s+0]=l,this.float32[_+1]=d,this.float32[_+2]=m,s}}z.prototype.bytesPerElement=12,Ne("StructArrayLayout1ui2f12",z);class V extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,l,d)}emplace(s,l,d,m){const _=4*s;return this.uint32[2*s+0]=l,this.uint16[_+2]=d,this.uint16[_+3]=m,s}}V.prototype.bytesPerElement=8,Ne("StructArrayLayout1ul2ui8",V);class W extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l){const d=this.length;return this.resize(d+1),this.emplace(d,s,l)}emplace(s,l,d){const m=2*s;return this.uint16[m+0]=l,this.uint16[m+1]=d,s}}W.prototype.bytesPerElement=4,Ne("StructArrayLayout2ui4",W);class $ extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint16[1*s+0]=l,s}}$.prototype.bytesPerElement=2,Ne("StructArrayLayout1ui2",$);class X extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,l,d,m)}emplace(s,l,d,m,_){const w=4*s;return this.float32[w+0]=l,this.float32[w+1]=d,this.float32[w+2]=m,this.float32[w+3]=_,s}}X.prototype.bytesPerElement=16,Ne("StructArrayLayout4f16",X);class ce extends On{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new D(this.anchorPointX,this.anchorPointY)}}ce.prototype.size=20;class Ee extends n{get(s){return new ce(this,s)}}Ne("CollisionBoxArray",Ee);class Se extends On{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Se.prototype.size=48;class Fe extends B{get(s){return new Se(this,s)}}Ne("PlacedSymbolArray",Fe);class Re extends On{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Re.prototype.size=64;class je extends T{get(s){return new Re(this,s)}}Ne("SymbolInstanceArray",je);class De extends M{getoffsetX(s){return this.float32[1*s+0]}}Ne("GlyphOffsetArray",De);class We extends Uo{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Ne("SymbolLineVertexArray",We);class Je extends On{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Je.prototype.size=12;class Oe extends z{get(s){return new Je(this,s)}}Ne("TextAnchorOffsetArray",Oe);class ht extends On{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ht.prototype.size=8;class St extends V{get(s){return new ht(this,s)}}Ne("FeatureIndexArray",St);class gt extends la{}class _t extends la{}class xt extends la{}class ir extends ro{}class rr extends Qo{}class Dt extends ka{}class mr extends Ru{}class rn extends uA{}class mn extends Nu{}class $n extends y{}class En extends a{}class Fn extends p{}class xn extends v{}class _n extends W{}const Tn=ii([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ki}=Tn;class fn{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,l,d,m){const _=this.segments[this.segments.length-1];return s>fn.MAX_VERTEX_ARRAY_LENGTH&&Cr(`Max vertices per segment is ${fn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${fn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+s>fn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m?this.createNewSegment(l,d,m):_}createNewSegment(s,l,d){const m={vertexOffset:s.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(m.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(s,l,d){return this.prepareSegment(0,s,l,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const s of this.segments)for(const l in s.vaos)s.vaos[l].destroy()}static simpleSegment(s,l,d,m){return new fn([{vertexOffset:s,primitiveOffset:l,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function rs(c,s){return 256*(c=dt(Math.floor(c),0,255))+dt(Math.floor(s),0,255)}fn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ne("SegmentVector",fn);const Gi=ii([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ua,ic,sc,kl={exports:{}},Wh={exports:{}},Zh={exports:{}},Du=function(){if(sc)return kl.exports;sc=1;var c=(Ua||(Ua=1,Wh.exports=function(l,d){var m,_,w,S,L,R,H,G;for(_=l.length-(m=3&l.length),w=d,L=3432918353,R=461845907,G=0;G<_;)H=255&l.charCodeAt(G)|(255&l.charCodeAt(++G))<<8|(255&l.charCodeAt(++G))<<16|(255&l.charCodeAt(++G))<<24,++G,w=27492+(65535&(S=5*(65535&(w=(w^=H=(65535&(H=(H=(65535&H)*L+(((H>>>16)*L&65535)<<16)&4294967295)<<15|H>>>17))*R+(((H>>>16)*R&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(H=0,m){case 3:H^=(255&l.charCodeAt(G+2))<<16;case 2:H^=(255&l.charCodeAt(G+1))<<8;case 1:w^=H=(65535&(H=(H=(65535&(H^=255&l.charCodeAt(G)))*L+(((H>>>16)*L&65535)<<16)&4294967295)<<15|H>>>17))*R+(((H>>>16)*R&65535)<<16)&4294967295}return w^=l.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),Wh.exports),s=(ic||(ic=1,Zh.exports=function(l,d){for(var m,_=l.length,w=d^_,S=0;_>=4;)m=1540483477*(65535&(m=255&l.charCodeAt(S)|(255&l.charCodeAt(++S))<<8|(255&l.charCodeAt(++S))<<16|(255&l.charCodeAt(++S))<<24))+((1540483477*(m>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),_-=4,++S;switch(_){case 3:w^=(255&l.charCodeAt(S+2))<<16;case 2:w^=(255&l.charCodeAt(S+1))<<8;case 1:w=1540483477*(65535&(w^=255&l.charCodeAt(S)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Zh.exports);return kl.exports=c,kl.exports.murmur3=c,kl.exports.murmur2=s,kl.exports}(),Ro=g(Du);class al{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,l,d,m){this.ids.push(oc(s)),this.positions.push(l,d,m)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=oc(s);let d=0,m=this.ids.length-1;for(;d<m;){const w=d+m>>1;this.ids[w]>=l?m=w:d=w+1}const _=[];for(;this.ids[d]===l;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(s,l){const d=new Float64Array(s.ids),m=new Uint32Array(s.positions);return Jc(d,m,0,d.length-1),l&&l.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(s){const l=new al;return l.ids=s.ids,l.positions=s.positions,l.indexed=!0,l}}function oc(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Ro(String(c))}function Jc(c,s,l,d){for(;l<d;){const m=c[l+d>>1];let _=l-1,w=d+1;for(;;){do _++;while(c[_]<m);do w--;while(c[w]>m);if(_>=w)break;Ui(c,_,w),Ui(s,3*_,3*w),Ui(s,3*_+1,3*w+1),Ui(s,3*_+2,3*w+2)}w-l<d-w?(Jc(c,s,l,w),l=w+1):(Jc(c,s,w+1,d),d=w)}}function Ui(c,s,l){const d=c[s];c[s]=c[l],c[l]=d}Ne("FeaturePositionMap",al);class si{constructor(s,l){this.gl=s.gl,this.location=l}}class mo extends si{constructor(s,l){super(s,l),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class hs extends si{constructor(s,l){super(s,l),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Ug extends si{constructor(s,l){super(s,l),this.current=ln.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const C1=new Float32Array(16);function kp(c){return[rs(255*c.r,255*c.g),rs(255*c.b,255*c.a)]}class Xh{constructor(s,l,d){this.value=s,this.uniformNames=l.map(m=>`u_${m}`),this.type=d}setUniform(s,l,d){s.set(d.constantOr(this.value))}getBinding(s,l,d){return this.type==="color"?new Ug(s,l):new mo(s,l)}}class Ou{constructor(s,l){this.uniformNames=l.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=s.tlbr}setUniform(s,l,d,m){const _=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&s.set(_)}getBinding(s,l,d){return d.substr(0,9)==="u_pattern"?new hs(s,l):new mo(s,l)}}class hA{constructor(s,l,d,m){this.expression=s,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(s,l,d,m,_){const w=this.paintVertexArray.length,S=this.expression.evaluate(new Er(0),l,{},m,[],_);this.paintVertexArray.resize(s),this._setPaintValue(w,s,S)}updatePaintArray(s,l,d,m){const _=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(s,l,_)}_setPaintValue(s,l,d){if(this.type==="color"){const m=kp(d);for(let _=s;_<l;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=s;m<l;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zs{constructor(s,l,d,m,_,w){this.expression=s,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(s,l,d,m,_){const w=this.expression.evaluate(new Er(this.zoom),l,{},m,[],_),S=this.expression.evaluate(new Er(this.zoom+1),l,{},m,[],_),L=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(L,s,w,S)}updatePaintArray(s,l,d,m){const _=this.expression.evaluate({zoom:this.zoom},d,m),w=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(s,l,_,w)}_setPaintValue(s,l,d,m){if(this.type==="color"){const _=kp(d),w=kp(m);for(let S=s;S<l;S++)this.paintVertexArray.emplace(S,_[0],_[1],w[0],w[1])}else{for(let _=s;_<l;_++)this.paintVertexArray.emplace(_,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,l){const d=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=dt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);s.set(m)}getBinding(s,l,d){return new mo(s,l)}}class dA{constructor(s,l,d,m,_,w){this.expression=s,this.type=l,this.useIntegerZoom=d,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(s,l,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(m,s,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(s,l,d,m,_){this._setPaintValues(s,l,d.patterns&&d.patterns[this.layerId],_)}_setPaintValues(s,l,d,m){if(!m||!d)return;const{min:_,mid:w,max:S}=d,L=m[_],R=m[w],H=m[S];if(L&&R&&H)for(let G=s;G<l;G++)this.zoomInPaintVertexArray.emplace(G,R.tl[0],R.tl[1],R.br[0],R.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],R.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,R.tl[0],R.tl[1],R.br[0],R.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],R.pixelRatio,H.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Gi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Gi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Up{constructor(s,l,d){this.binders={},this._buffers=[];const m=[];for(const _ in s.paint._values){if(!d(_))continue;const w=s.paint.get(_);if(!(w instanceof vi&&ts(w.property.specification)))continue;const S=Qp(_,s.type),L=w.value,R=w.property.specification.type,H=w.property.useIntegerZoom,G=w.property.specification["property-type"],Y=G==="cross-faded"||G==="cross-faded-data-driven";if(L.kind==="constant")this.binders[_]=Y?new Ou(L.value,S):new Xh(L.value,S,R),m.push(`/u_${_}`);else if(L.kind==="source"||Y){const re=Rp(_,R,"source");this.binders[_]=Y?new dA(L,R,H,l,re,s.id):new hA(L,S,R,re),m.push(`/a_${_}`)}else{const re=Rp(_,R,"composite");this.binders[_]=new zs(L,S,R,H,l,re),m.push(`/z_${_}`)}}this.cacheKey=m.sort().join("")}getMaxValue(s){const l=this.binders[s];return l instanceof hA||l instanceof zs?l.maxValue:0}populatePaintArrays(s,l,d,m,_){for(const w in this.binders){const S=this.binders[w];(S instanceof hA||S instanceof zs||S instanceof dA)&&S.populatePaintArray(s,l,d,m,_)}}setConstantPatternPositions(s,l){for(const d in this.binders){const m=this.binders[d];m instanceof Ou&&m.setConstantPatternPositions(s,l)}}updatePaintArrays(s,l,d,m,_){let w=!1;for(const S in s){const L=l.getPositions(S);for(const R of L){const H=d.feature(R.index);for(const G in this.binders){const Y=this.binders[G];if((Y instanceof hA||Y instanceof zs||Y instanceof dA)&&Y.expression.isStateDependent===!0){const re=m.paint.get(G);Y.expression=re.value,Y.updatePaintArray(R.start,R.end,H,s[S],_),w=!0}}}}return w}defines(){const s=[];for(const l in this.binders){const d=this.binders[l];(d instanceof Xh||d instanceof Ou)&&s.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return s}getBinderAttributes(){const s=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof hA||d instanceof zs)for(let m=0;m<d.paintVertexAttributes.length;m++)s.push(d.paintVertexAttributes[m].name);else if(d instanceof dA)for(let m=0;m<Gi.members.length;m++)s.push(Gi.members[m].name)}return s}getBinderUniforms(){const s=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof Xh||d instanceof Ou||d instanceof zs)for(const m of d.uniformNames)s.push(m)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,l){const d=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof Xh||_ instanceof Ou||_ instanceof zs){for(const w of _.uniformNames)if(l[w]){const S=_.getBinding(s,l[w],w);d.push({name:w,property:m,binding:S})}}}return d}setUniforms(s,l,d,m){for(const{name:_,property:w,binding:S}of l)this.binders[w].setUniform(S,m,d.get(w),_)}updatePaintBuffers(s){this._buffers=[];for(const l in this.binders){const d=this.binders[l];if(s&&d instanceof dA){const m=s.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof hA||d instanceof zs)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(s){for(const l in this.binders){const d=this.binders[l];(d instanceof hA||d instanceof zs||d instanceof dA)&&d.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const l=this.binders[s];(l instanceof hA||l instanceof zs||l instanceof dA)&&l.destroy()}}}class ac{constructor(s,l,d=()=>!0){this.programConfigurations={};for(const m of s)this.programConfigurations[m.id]=new Up(m,l,d);this.needsUpload=!1,this._featureMap=new al,this._bufferOffset=0}populatePaintArrays(s,l,d,m,_,w){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(s,l,m,_,w);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,l,d,m){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(s,this._featureMap,l,_,m)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Qp(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function Rp(c,s,l){const d={color:{source:ka,composite:X},number:{source:M,composite:ka}},m=function(_){return{"line-pattern":{source:mr,composite:mr},"fill-pattern":{source:mr,composite:mr},"fill-extrusion-pattern":{source:mr,composite:mr}}[_]}(c);return m&&m[l]||d[s][l]}Ne("ConstantBinder",Xh),Ne("CrossFadedConstantBinder",Ou),Ne("SourceExpressionBinder",hA),Ne("CrossFadedCompositeBinder",dA),Ne("CompositeExpressionBinder",zs),Ne("ProgramConfiguration",Up,{omit:["_buffers"]}),Ne("ProgramConfigurationSet",ac);const Yh=Math.pow(2,14)-1,CB=-Yh-1;function Jh(c){const s=ne/c.extent,l=c.loadGeometry();for(let d=0;d<l.length;d++){const m=l[d];for(let _=0;_<m.length;_++){const w=m[_],S=Math.round(w.x*s),L=Math.round(w.y*s);w.x=dt(S,CB,Yh),w.y=dt(L,CB,Yh),(S<w.x||S>w.x+1||L<w.y||L>w.y+1)&&Cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function ed(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?Jh(c):[]}}const SB=-32768;function gk(c,s,l,d,m){c.emplaceBack(SB+8*s+d,SB+8*l+m)}class S1{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new _t,this.indexArray=new xn,this.segments=new fn,this.programConfigurations=new ac(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,d){const m=this.layers[0],_=[];let w=null,S=!1,L=m.type==="heatmap";if(m.type==="circle"){const H=m;w=H.layout.get("circle-sort-key"),S=!w.isConstant(),L=L||H.paint.get("circle-pitch-alignment")==="map"}const R=L?l.subdivisionGranularity.circle:1;for(const{feature:H,id:G,index:Y,sourceLayerIndex:re}of s){const ie=this.layers[0]._featureFilter.needGeometry,de=ed(H,ie);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom,{globalState:this.globalState}),de,d))continue;const Ce=S?w.evaluate(de,{},d):void 0,Ue={id:G,properties:H.properties,type:H.type,sourceLayerIndex:re,index:Y,geometry:ie?de.geometry:Jh(H),patterns:{},sortKey:Ce};_.push(Ue)}S&&_.sort((H,G)=>H.sortKey-G.sortKey);for(const H of _){const{geometry:G,index:Y,sourceLayerIndex:re}=H,ie=s[Y].feature;this.addFeature(H,G,Y,d,R),l.featureIndex.insert(ie,G,Y,re,this.index)}}update(s,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ki),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,l,d,m,_=1){let w;switch(_){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const S=w.length;for(const L of l)for(const R of L){const H=R.x,G=R.y;if(H<0||H>=ne||G<0||G>=ne)continue;const Y=this.segments.prepareSegment(S*S,this.layoutVertexArray,this.indexArray,s.sortKey),re=Y.vertexLength;for(let ie=0;ie<S;ie++)for(let de=0;de<S;de++)gk(this.layoutVertexArray,H,G,w[de],w[ie]);for(let ie=0;ie<S-1;ie++)for(let de=0;de<S-1;de++){const Ce=re+ie*S+de,Ue=re+(ie+1)*S+de;this.indexArray.emplaceBack(Ce,Ue+1,Ce+1),this.indexArray.emplaceBack(Ce,Ue,Ue+1)}Y.vertexLength+=S*S,Y.primitiveLength+=(S-1)*(S-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,{},m)}}function EB(c,s){for(let l=0;l<c.length;l++)if(Zd(s,c[l]))return!0;for(let l=0;l<s.length;l++)if(Zd(c,s[l]))return!0;return!!E1(c,s)}function yk(c,s,l){return!!Zd(c,s)||!!F1(s,c,l)}function FB(c,s){if(c.length===1)return TB(s,c[0]);for(let l=0;l<s.length;l++){const d=s[l];for(let m=0;m<d.length;m++)if(Zd(c,d[m]))return!0}for(let l=0;l<c.length;l++)if(TB(s,c[l]))return!0;for(let l=0;l<s.length;l++)if(E1(c,s[l]))return!0;return!1}function vk(c,s,l){if(c.length>1){if(E1(c,s))return!0;for(let d=0;d<s.length;d++)if(F1(s[d],c,l))return!0}for(let d=0;d<c.length;d++)if(F1(c[d],s,l))return!0;return!1}function E1(c,s){if(c.length===0||s.length===0)return!1;for(let l=0;l<c.length-1;l++){const d=c[l],m=c[l+1];for(let _=0;_<s.length-1;_++)if(_k(d,m,s[_],s[_+1]))return!0}return!1}function _k(c,s,l,d){return pr(c,l,d)!==pr(s,l,d)&&pr(c,s,l)!==pr(c,s,d)}function F1(c,s,l){const d=l*l;if(s.length===1)return c.distSqr(s[0])<d;for(let m=1;m<s.length;m++)if(IB(c,s[m-1],s[m])<d)return!0;return!1}function IB(c,s,l){const d=s.distSqr(l);if(d===0)return c.distSqr(s);const m=((c.x-s.x)*(l.x-s.x)+(c.y-s.y)*(l.y-s.y))/d;return c.distSqr(m<0?s:m>1?l:l.sub(s)._mult(m)._add(s))}function TB(c,s){let l,d,m,_=!1;for(let w=0;w<c.length;w++){l=c[w];for(let S=0,L=l.length-1;S<l.length;L=S++)d=l[S],m=l[L],d.y>s.y!=m.y>s.y&&s.x<(m.x-d.x)*(s.y-d.y)/(m.y-d.y)+d.x&&(_=!_)}return _}function Zd(c,s){let l=!1;for(let d=0,m=c.length-1;d<c.length;m=d++){const _=c[d],w=c[m];_.y>s.y!=w.y>s.y&&s.x<(w.x-_.x)*(s.y-_.y)/(w.y-_.y)+_.x&&(l=!l)}return l}function wk(c,s,l){const d=l[0],m=l[2];if(c.x<d.x&&s.x<d.x||c.x>m.x&&s.x>m.x||c.y<d.y&&s.y<d.y||c.y>m.y&&s.y>m.y)return!1;const _=pr(c,s,l[0]);return _!==pr(c,s,l[1])||_!==pr(c,s,l[2])||_!==pr(c,s,l[3])}function Np(c,s,l){const d=s.paint.get(c).value;return d.kind==="constant"?d.value:l.programConfigurations.get(s.id).getMaxValue(c)}function Qg(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Rg(c,s,l,d,m){if(!s[0]&&!s[1])return c;const _=D.convert(s)._mult(m);l==="viewport"&&_._rotate(-d);const w=[];for(let S=0;S<c.length;S++)w.push(c[S].sub(_));return w}let PB,LB;Ne("CircleBucket",S1,{omit:["layers"]});var xk={get paint(){return LB=LB||new pi({"circle-radius":new wr(Me.paint_circle["circle-radius"]),"circle-color":new wr(Me.paint_circle["circle-color"]),"circle-blur":new wr(Me.paint_circle["circle-blur"]),"circle-opacity":new wr(Me.paint_circle["circle-opacity"]),"circle-translate":new sr(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new sr(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sr(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sr(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wr(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wr(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wr(Me.paint_circle["circle-stroke-opacity"])})},get layout(){return PB=PB||new pi({"circle-sort-key":new wr(Me.layout_circle["circle-sort-key"])})}};class bk extends wi{constructor(s){super(s,xk)}createBucket(s){return new S1(s)}queryRadius(s){const l=s;return Np("circle-radius",this,l)+Np("circle-stroke-width",this,l)+Qg(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:d,geometry:m,transform:_,pixelsToTileUnits:w,unwrappedTileID:S,getElevation:L}){const R=Rg(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,w),H=this.paint.get("circle-radius").evaluate(l,d)+this.paint.get("circle-stroke-width").evaluate(l,d),G=this.paint.get("circle-pitch-alignment")==="map",Y=G?R:function(ie,de,Ce,Ue){return ie.map(st=>MB(st,de,Ce,Ue))}(R,_,S,L),re=G?H*w:H;for(const ie of m)for(const de of ie){const Ce=G?de:MB(de,_,S,L);let Ue=re;const st=_.projectTileCoordinates(de.x,de.y,S,L).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ue*=st/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ue*=_.cameraToCenterDistance/st),yk(Y,Ce,Ue))return!0}return!1}}function MB(c,s,l,d){const m=s.projectTileCoordinates(c.x,c.y,l,d).point;return new D((.5*m.x+.5)*s.width,(.5*-m.y+.5)*s.height)}class kB extends S1{}let UB;Ne("HeatmapBucket",kB,{omit:["layers"]});var Bk={get paint(){return UB=UB||new pi({"heatmap-radius":new wr(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wr(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sr(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _i(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sr(Me.paint_heatmap["heatmap-opacity"])})}};function I1(c,{width:s,height:l},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==s*l*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${s*l*d}`)}else m=new Uint8Array(s*l*d);return c.width=s,c.height=l,c.data=m,c}function QB(c,{width:s,height:l},d){if(s===c.width&&l===c.height)return;const m=I1({},{width:s,height:l},d);T1(c,m,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,l)},d),c.width=s,c.height=l,c.data=m.data}function T1(c,s,l,d,m,_){if(m.width===0||m.height===0)return s;if(m.width>c.width||m.height>c.height||l.x>c.width-m.width||l.y>c.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>s.width||m.height>s.height||d.x>s.width-m.width||d.y>s.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,S=s.data;if(w===S)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<m.height;L++){const R=((l.y+L)*c.width+l.x)*_,H=((d.y+L)*s.width+d.x)*_;for(let G=0;G<m.width*_;G++)S[H+G]=w[R+G]}return s}class Dp{constructor(s,l){I1(this,s,1,l)}resize(s){QB(this,s,1)}clone(){return new Dp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,d,m,_){T1(s,l,d,m,_,1)}}class Aa{constructor(s,l){I1(this,s,4,l)}resize(s){QB(this,s,4)}replace(s,l){l?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Aa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,d,m,_){T1(s,l,d,m,_,4)}setPixel(s,l,d){const m=4*(s*this.width+l);this.data[m+0]=Math.round(255*d.r/d.a),this.data[m+1]=Math.round(255*d.g/d.a),this.data[m+2]=Math.round(255*d.b/d.a),this.data[m+3]=Math.round(255*d.a)}}function RB(c){const s={},l=c.resolution||256,d=c.clips?c.clips.length:1,m=c.image||new Aa({width:l,height:d});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const _=(w,S,L)=>{s[c.evaluationKey]=L;const R=c.expression.evaluate(s);m.setPixel(w/4/l,S/4,R)};if(c.clips)for(let w=0,S=0;w<d;++w,S+=4*l)for(let L=0,R=0;L<l;L++,R+=4){const H=L/(l-1),{start:G,end:Y}=c.clips[w];_(S,R,G*(1-H)+Y*H)}else for(let w=0,S=0;w<l;w++,S+=4)_(0,S,w/(l-1));return m}Ne("AlphaImage",Dp),Ne("RGBAImage",Aa);const P1="big-fb";class Ck extends wi{createBucket(s){return new kB(s)}constructor(s){super(s,Bk),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=RB({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(P1)&&this.heatmapFbos.delete(P1)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let NB;var Sk={get paint(){return NB=NB||new pi({"hillshade-illumination-direction":new sr(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new sr(Me.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new sr(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sr(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sr(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sr(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sr(Me.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new sr(Me.paint_hillshade["hillshade-method"])})}};class Ek extends wi{constructor(s){super(s,Sk),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const _=Math.max(s.length,l.length,d.length,m.length);s=s.concat(Array(_-s.length).fill(s.at(-1))),l=l.concat(Array(_-l.length).fill(l.at(-1))),d=d.concat(Array(_-d.length).fill(d.at(-1))),m=m.concat(Array(_-m.length).fill(m.at(-1)));const w=l.map(Hr);return{directionRadians:s.map(Hr),altitudeRadians:w,shadowColor:m,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let DB;var Fk={get paint(){return DB=DB||new pi({"color-relief-opacity":new sr(Me["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new _i(Me["paint_color-relief"]["color-relief-color"])})}};class L1{constructor(s,l,d,m){this.context=s,this.format=d,this.texture=s.gl.createTexture(),this.update(l,m)}update(s,l,d){const{width:m,height:_}=s,w=!(this.size&&this.size[0]===m&&this.size[1]===_||d),{context:S}=this,{gl:L}=S;if(this.useMipmap=!!(l&&l.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!l||l.premultiply!==!1)),w)this.size=[m,_],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||lr(s)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,s):L.texImage2D(L.TEXTURE_2D,0,this.format,m,_,0,this.format,L.UNSIGNED_BYTE,s.data);else{const{x:R,y:H}=d||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||lr(s)?L.texSubImage2D(L.TEXTURE_2D,0,R,H,L.RGBA,L.UNSIGNED_BYTE,s):L.texSubImage2D(L.TEXTURE_2D,0,R,H,m,_,L.RGBA,L.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D),S.pixelStoreUnpackFlipY.setDefault(),S.pixelStoreUnpack.setDefault(),S.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,l,d){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),s!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,s),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||s),this.filter=s),l!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,l),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class OB{constructor(s,l,d,m=1,_=1,w=1,S=0){if(this.uid=s,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Cr(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const L=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=_,this.blueFactor=w,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let R=0;R<L;R++)this.data[this._idx(-1,R)]=this.data[this._idx(0,R)],this.data[this._idx(L,R)]=this.data[this._idx(L-1,R)],this.data[this._idx(R,-1)]=this.data[this._idx(R,0)],this.data[this._idx(R,L)]=this.data[this._idx(R,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let R=0;R<L;R++)for(let H=0;H<L;H++){const G=this.get(R,H);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(s,l){const d=new Uint8Array(this.data.buffer),m=4*this._idx(s,l);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,l){if(s<-1||s>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(s+1)}unpack(s,l,d){return s*this.redFactor+l*this.greenFactor+d*this.blueFactor-this.baseShift}pack(s){return zB(s,this.getUnpackVector())}getPixels(){return new Aa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,l,d){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,_=l*this.dim+this.dim,w=d*this.dim,S=d*this.dim+this.dim;switch(l){case-1:m=_-1;break;case 1:_=m+1}switch(d){case-1:w=S-1;break;case 1:S=w+1}const L=-l*this.dim,R=-d*this.dim;for(let H=w;H<S;H++)for(let G=m;G<_;G++)this.data[this._idx(G,H)]=s.data[this._idx(G+L,H+R)]}}function zB(c,s){const l=s[0],d=s[1],m=s[2],_=s[3],w=Math.min(l,d,m),S=Math.round((c+_)/w);return{r:Math.floor(S*w/l)%256,g:Math.floor(S*w/d)%256,b:Math.floor(S*w/m)%256}}Ne("DEMData",OB);class Ik extends wi{constructor(s){super(s,Fk)}_createColorRamp(s){const l={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof ZA&&d._styleExpression.expression instanceof Ji){this.colorRampExpression=d;const w=d._styleExpression.expression;l.elevationStops=w.labels,l.colorStops=[];for(const S of l.elevationStops)l.colorStops.push(w.evaluate({globals:{elevation:S}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[ln.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=s)return l;const m={elevationStops:[],colorStops:[]},_=(l.elevationStops.length-1)/(s-1);for(let w=0;w<l.elevationStops.length-.5;w+=_)m.elevationStops.push(l.elevationStops[Math.round(w)]),m.colorStops.push(l.colorStops[Math.round(w)]);return Cr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(s,l,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(l),_=new Aa({width:m.colorStops.length,height:1}),w=new Aa({width:m.colorStops.length,height:1});for(let S=0;S<m.elevationStops.length;S++){const L=zB(m.elevationStops[S],d);w.setPixel(0,S,new ln(L.r/255,L.g/255,L.b/255,1)),_.setPixel(0,S,m.colorStops[S])}return this.colorRampTextures={elevationTexture:new L1(s,w,s.gl.RGBA),colorTexture:new L1(s,_,s.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Tk=ii([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pk}=Tk;function M1(c,s,l){const d=l.patternDependencies;let m=!1;for(const _ of s){const w=_.paint.get(`${c}-pattern`);w.isConstant()||(m=!0);const S=w.constantOr(null);S&&(m=!0,d[S.to]=!0,d[S.from]=!0)}return m}function k1(c,s,l,d,m){const _=m.patternDependencies;for(const w of s){const S=w.paint.get(`${c}-pattern`).value;if(S.kind!=="constant"){let L=S.evaluate({zoom:d-1},l,{},m.availableImages),R=S.evaluate({zoom:d},l,{},m.availableImages),H=S.evaluate({zoom:d+1},l,{},m.availableImages);L=L&&L.name?L.name:L,R=R&&R.name?R.name:R,H=H&&H.name?H.name:H,_[L]=!0,_[R]=!0,_[H]=!0,l.patterns[w.id]={min:L,mid:R,max:H}}}return l}function HB(c,s,l,d,m){let _;if(m===function(w,S,L,R){let H=0;for(let G=S,Y=L-R;G<L;G+=R)H+=(w[Y]-w[G])*(w[G+1]+w[Y+1]),Y=G;return H}(c,s,l,d)>0)for(let w=s;w<l;w+=d)_=GB(w/d|0,c[w],c[w+1],_);else for(let w=l-d;w>=s;w-=d)_=GB(w/d|0,c[w],c[w+1],_);return _&&Xd(_,_.next)&&(jp(_),_=_.next),_}function td(c,s){if(!c)return c;s||(s=c);let l,d=c;do if(l=!1,d.steiner||!Xd(d,d.next)&&$i(d.prev,d,d.next)!==0)d=d.next;else{if(jp(d),d=s=d.prev,d===d.next)break;l=!0}while(l||d!==s);return s}function Op(c,s,l,d,m,_,w){if(!c)return;!w&&_&&function(L,R,H,G){let Y=L;do Y.z===0&&(Y.z=U1(Y.x,Y.y,R,H,G)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==L);Y.prevZ.nextZ=null,Y.prevZ=null,function(re){let ie,de=1;do{let Ce,Ue=re;re=null;let st=null;for(ie=0;Ue;){ie++;let Ve=Ue,J=0;for(let qe=0;qe<de&&(J++,Ve=Ve.nextZ,Ve);qe++);let xe=de;for(;J>0||xe>0&&Ve;)J!==0&&(xe===0||!Ve||Ue.z<=Ve.z)?(Ce=Ue,Ue=Ue.nextZ,J--):(Ce=Ve,Ve=Ve.nextZ,xe--),st?st.nextZ=Ce:re=Ce,Ce.prevZ=st,st=Ce;Ue=Ve}st.nextZ=null,de*=2}while(ie>1)}(Y)}(c,d,m,_);let S=c;for(;c.prev!==c.next;){const L=c.prev,R=c.next;if(_?Mk(c,d,m,_):Lk(c))s.push(L.i,c.i,R.i),jp(c),c=R.next,S=R.next;else if((c=R)===S){w?w===1?Op(c=kk(td(c),s),s,l,d,m,_,2):w===2&&Uk(c,s,l,d,m,_):Op(td(c),s,l,d,m,_,1);break}}}function Lk(c){const s=c.prev,l=c,d=c.next;if($i(s,l,d)>=0)return!1;const m=s.x,_=l.x,w=d.x,S=s.y,L=l.y,R=d.y,H=Math.min(m,_,w),G=Math.min(S,L,R),Y=Math.max(m,_,w),re=Math.max(S,L,R);let ie=d.next;for(;ie!==s;){if(ie.x>=H&&ie.x<=Y&&ie.y>=G&&ie.y<=re&&zp(m,S,_,L,w,R,ie.x,ie.y)&&$i(ie.prev,ie,ie.next)>=0)return!1;ie=ie.next}return!0}function Mk(c,s,l,d){const m=c.prev,_=c,w=c.next;if($i(m,_,w)>=0)return!1;const S=m.x,L=_.x,R=w.x,H=m.y,G=_.y,Y=w.y,re=Math.min(S,L,R),ie=Math.min(H,G,Y),de=Math.max(S,L,R),Ce=Math.max(H,G,Y),Ue=U1(re,ie,s,l,d),st=U1(de,Ce,s,l,d);let Ve=c.prevZ,J=c.nextZ;for(;Ve&&Ve.z>=Ue&&J&&J.z<=st;){if(Ve.x>=re&&Ve.x<=de&&Ve.y>=ie&&Ve.y<=Ce&&Ve!==m&&Ve!==w&&zp(S,H,L,G,R,Y,Ve.x,Ve.y)&&$i(Ve.prev,Ve,Ve.next)>=0||(Ve=Ve.prevZ,J.x>=re&&J.x<=de&&J.y>=ie&&J.y<=Ce&&J!==m&&J!==w&&zp(S,H,L,G,R,Y,J.x,J.y)&&$i(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;Ve&&Ve.z>=Ue;){if(Ve.x>=re&&Ve.x<=de&&Ve.y>=ie&&Ve.y<=Ce&&Ve!==m&&Ve!==w&&zp(S,H,L,G,R,Y,Ve.x,Ve.y)&&$i(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.prevZ}for(;J&&J.z<=st;){if(J.x>=re&&J.x<=de&&J.y>=ie&&J.y<=Ce&&J!==m&&J!==w&&zp(S,H,L,G,R,Y,J.x,J.y)&&$i(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function kk(c,s){let l=c;do{const d=l.prev,m=l.next.next;!Xd(d,m)&&VB(d,l,l.next,m)&&Hp(d,m)&&Hp(m,d)&&(s.push(d.i,l.i,m.i),jp(l),jp(l.next),l=c=m),l=l.next}while(l!==c);return td(l)}function Uk(c,s,l,d,m,_){let w=c;do{let S=w.next.next;for(;S!==w.prev;){if(w.i!==S.i&&Ok(w,S)){let L=KB(w,S);return w=td(w,w.next),L=td(L,L.next),Op(w,s,l,d,m,_,0),void Op(L,s,l,d,m,_,0)}S=S.next}w=w.next}while(w!==c)}function Qk(c,s){let l=c.x-s.x;return l===0&&(l=c.y-s.y,l===0)&&(l=(c.next.y-c.y)/(c.next.x-c.x)-(s.next.y-s.y)/(s.next.x-s.x)),l}function Rk(c,s){const l=function(m,_){let w=_;const S=m.x,L=m.y;let R,H=-1/0;if(Xd(m,w))return w;do{if(Xd(m,w.next))return w.next;if(L<=w.y&&L>=w.next.y&&w.next.y!==w.y){const de=w.x+(L-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(de<=S&&de>H&&(H=de,R=w.x<w.next.x?w:w.next,de===S))return R}w=w.next}while(w!==_);if(!R)return null;const G=R,Y=R.x,re=R.y;let ie=1/0;w=R;do{if(S>=w.x&&w.x>=Y&&S!==w.x&&jB(L<re?S:H,L,Y,re,L<re?H:S,L,w.x,w.y)){const de=Math.abs(L-w.y)/(S-w.x);Hp(w,m)&&(de<ie||de===ie&&(w.x>R.x||w.x===R.x&&Nk(R,w)))&&(R=w,ie=de)}w=w.next}while(w!==G);return R}(c,s);if(!l)return s;const d=KB(l,c);return td(d,d.next),td(l,l.next)}function Nk(c,s){return $i(c.prev,c,s.prev)<0&&$i(s.next,c,c.next)<0}function U1(c,s,l,d,m){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-l)*m|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-d)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Dk(c){let s=c,l=c;do(s.x<l.x||s.x===l.x&&s.y<l.y)&&(l=s),s=s.next;while(s!==c);return l}function jB(c,s,l,d,m,_,w,S){return(m-w)*(s-S)>=(c-w)*(_-S)&&(c-w)*(d-S)>=(l-w)*(s-S)&&(l-w)*(_-S)>=(m-w)*(d-S)}function zp(c,s,l,d,m,_,w,S){return!(c===w&&s===S)&&jB(c,s,l,d,m,_,w,S)}function Ok(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(l,d){let m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==d.i&&m.next.i!==d.i&&VB(m,m.next,l,d))return!0;m=m.next}while(m!==l);return!1}(c,s)&&(Hp(c,s)&&Hp(s,c)&&function(l,d){let m=l,_=!1;const w=(l.x+d.x)/2,S=(l.y+d.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&w<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(_=!_),m=m.next;while(m!==l);return _}(c,s)&&($i(c.prev,c,s.prev)||$i(c,s.prev,s))||Xd(c,s)&&$i(c.prev,c,c.next)>0&&$i(s.prev,s,s.next)>0)}function $i(c,s,l){return(s.y-c.y)*(l.x-s.x)-(s.x-c.x)*(l.y-s.y)}function Xd(c,s){return c.x===s.x&&c.y===s.y}function VB(c,s,l,d){const m=Dg($i(c,s,l)),_=Dg($i(c,s,d)),w=Dg($i(l,d,c)),S=Dg($i(l,d,s));return m!==_&&w!==S||!(m!==0||!Ng(c,l,s))||!(_!==0||!Ng(c,d,s))||!(w!==0||!Ng(l,c,d))||!(S!==0||!Ng(l,s,d))}function Ng(c,s,l){return s.x<=Math.max(c.x,l.x)&&s.x>=Math.min(c.x,l.x)&&s.y<=Math.max(c.y,l.y)&&s.y>=Math.min(c.y,l.y)}function Dg(c){return c>0?1:c<0?-1:0}function Hp(c,s){return $i(c.prev,c,c.next)<0?$i(c,s,c.next)>=0&&$i(c,c.prev,s)>=0:$i(c,s,c.prev)<0||$i(c,c.next,s)<0}function KB(c,s){const l=Q1(c.i,c.x,c.y),d=Q1(s.i,s.x,s.y),m=c.next,_=s.prev;return c.next=s,s.prev=c,l.next=m,m.prev=l,d.next=l,l.prev=d,_.next=d,d.prev=_,d}function GB(c,s,l,d){const m=Q1(c,s,l);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function jp(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Q1(c,s,l){return{i:c,x:s,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Yd{constructor(s,l){if(l>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=l}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class Og{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}Og.noSubdivision=new Og({fill:new Yd(0,0),line:new Yd(0,0),tile:new Yd(0,0),stencil:new Yd(0,0),circle:1}),Ne("SubdivisionGranularityExpression",Yd),Ne("SubdivisionGranularitySetting",Og);const Jd=-32768,Vp=32767;class zk{constructor(s,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=ne/s,this._canonical=l}_getKey(s,l){return(s+=32768)<<16|l+32768}_vertexToIndex(s,l){if(s<-32768||l<-32768||s>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(s),m=0|Math.round(l),_=this._getKey(d,m);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,w),this._vertexBuffer.push(d,m),w}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(m,_){const w=[];for(let S=0;S<_.length;S+=3){const L=_[S],R=_[S+1],H=_[S+2],G=m[2*L],Y=m[2*L+1];(m[2*R]-G)*(m[2*H+1]-Y)-(m[2*R+1]-Y)*(m[2*H]-G)>0?(w.push(L),w.push(H),w.push(R)):(w.push(L),w.push(R),w.push(H))}return w}(this._vertexBuffer,s);const l=[],d=s.length;for(let m=0;m<d;m+=3){const _=[s[m+0],s[m+1],s[m+2]],w=[this._vertexBuffer[2*s[m+0]+0],this._vertexBuffer[2*s[m+0]+1],this._vertexBuffer[2*s[m+1]+0],this._vertexBuffer[2*s[m+1]+1],this._vertexBuffer[2*s[m+2]+0],this._vertexBuffer[2*s[m+2]+1]];let S=1/0,L=1/0,R=-1/0,H=-1/0;for(let de=0;de<3;de++){const Ce=w[2*de],Ue=w[2*de+1];S=Math.min(S,Ce),R=Math.max(R,Ce),L=Math.min(L,Ue),H=Math.max(H,Ue)}if(S===R||L===H)continue;const G=Math.floor(S/this._granularityCellSize),Y=Math.ceil(R/this._granularityCellSize),re=Math.floor(L/this._granularityCellSize),ie=Math.ceil(H/this._granularityCellSize);if(G!==Y||re!==ie)for(let de=re;de<ie;de++){const Ce=this._scanlineGenerateVertexRingForCellRow(de,w,_);Hk(this._vertexBuffer,Ce,l)}else l.push(..._)}return l}_scanlineGenerateVertexRingForCellRow(s,l,d){const m=s*this._granularityCellSize,_=m+this._granularityCellSize,w=[];for(let S=0;S<3;S++){const L=l[2*S],R=l[2*S+1],H=l[2*(S+1)%6],G=l[(2*(S+1)+1)%6],Y=l[2*(S+2)%6],re=l[(2*(S+2)+1)%6],ie=H-L,de=G-R,Ce=ie===0,Ue=de===0,st=(m-R)/de,Ve=(_-R)/de,J=Math.min(st,Ve),xe=Math.max(st,Ve);if(!Ue&&(J>=1||xe<=0)||Ue&&(R<m||R>_)){G>=m&&G<=_&&w.push(d[(S+1)%3]);continue}!Ue&&J>0&&w.push(this._vertexToIndex(L+ie*J,R+de*J));const qe=L+ie*Math.max(J,0),bt=L+ie*Math.min(xe,1);Ce||this._generateIntraEdgeVertices(w,L,R,H,G,qe,bt),!Ue&&xe<1&&w.push(this._vertexToIndex(L+ie*xe,R+de*xe)),(Ue||G>=m&&G<=_)&&w.push(d[(S+1)%3]),!Ue&&(G<=m||G>=_)&&this._generateInterEdgeVertices(w,L,R,H,G,Y,re,bt,m,_)}return w}_generateIntraEdgeVertices(s,l,d,m,_,w,S){const L=m-l,R=_-d,H=R===0,G=H?Math.min(l,m):Math.min(w,S),Y=H?Math.max(l,m):Math.max(w,S),re=Math.floor(G/this._granularityCellSize)+1,ie=Math.ceil(Y/this._granularityCellSize)-1;if(H?l<m:w<S)for(let de=re;de<=ie;de++){const Ce=de*this._granularityCellSize;s.push(this._vertexToIndex(Ce,d+R*(Ce-l)/L))}else for(let de=ie;de>=re;de--){const Ce=de*this._granularityCellSize;s.push(this._vertexToIndex(Ce,d+R*(Ce-l)/L))}}_generateInterEdgeVertices(s,l,d,m,_,w,S,L,R,H){const G=_-d,Y=w-m,re=S-_,ie=(R-_)/re,de=(H-_)/re,Ce=Math.min(ie,de),Ue=Math.max(ie,de),st=m+Y*Ce;let Ve=Math.floor(Math.min(st,L)/this._granularityCellSize)+1,J=Math.ceil(Math.max(st,L)/this._granularityCellSize)-1,xe=L<st;const qe=re===0;if(qe&&(S===R||S===H))return;if(qe||Ce>=1||Ue<=0){const Ht=d-S,Et=w+(l-w)*Math.min((R-S)/Ht,(H-S)/Ht);Ve=Math.floor(Math.min(Et,L)/this._granularityCellSize)+1,J=Math.ceil(Math.max(Et,L)/this._granularityCellSize)-1,xe=L<Et}const bt=G>0?H:R;if(xe)for(let Ht=Ve;Ht<=J;Ht++)s.push(this._vertexToIndex(Ht*this._granularityCellSize,bt));else for(let Ht=J;Ht>=Ve;Ht--)s.push(this._vertexToIndex(Ht*this._granularityCellSize,bt))}_generateOutline(s){const l=[];for(const d of s){const m=rd(d,this._granularity,!0),_=this._pointArrayToIndices(m),w=[];for(let S=1;S<_.length;S++)w.push(_[S-1]),w.push(_[S]);l.push(w)}return l}_handlePoles(s){let l=!1,d=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(l||d)&&this._fillPoles(s,l,d)}_ensureNoPoleVertices(){const s=this._vertexBuffer;for(let l=0;l<s.length;l+=2){const d=s[l+1];d===Jd&&(s[l+1]=-32767),d===Vp&&(s[l+1]=32766)}}_generatePoleQuad(s,l,d,m,_,w){m>_!=(w===Jd)?(s.push(l),s.push(d),s.push(this._vertexToIndex(m,w)),s.push(d),s.push(this._vertexToIndex(_,w)),s.push(this._vertexToIndex(m,w))):(s.push(d),s.push(l),s.push(this._vertexToIndex(m,w)),s.push(this._vertexToIndex(_,w)),s.push(d),s.push(this._vertexToIndex(m,w)))}_fillPoles(s,l,d){const m=this._vertexBuffer,_=ne,w=s.length;for(let S=2;S<w;S+=3){const L=s[S-2],R=s[S-1],H=s[S],G=m[2*L],Y=m[2*L+1],re=m[2*R],ie=m[2*R+1],de=m[2*H],Ce=m[2*H+1];l&&(Y===0&&ie===0&&this._generatePoleQuad(s,L,R,G,re,Jd),ie===0&&Ce===0&&this._generatePoleQuad(s,R,H,re,de,Jd),Ce===0&&Y===0&&this._generatePoleQuad(s,H,L,de,G,Jd)),d&&(Y===_&&ie===_&&this._generatePoleQuad(s,L,R,G,re,Vp),ie===_&&Ce===_&&this._generatePoleQuad(s,R,H,re,de,Vp),Ce===_&&Y===_&&this._generatePoleQuad(s,H,L,de,G,Vp))}}_initializeVertices(s){for(let l=0;l<s.length;l+=2)this._vertexToIndex(s[l],s[l+1])}subdividePolygonInternal(s,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:m}=function(S){const L=[],R=[];for(const H of S)if(H.length!==0){H!==S[0]&&L.push(R.length/2);for(let G=0;G<H.length;G++)R.push(H[G].x),R.push(H[G].y)}return{flattened:R,holeIndices:L}}(s);let _;this._initializeVertices(d);try{const S=function(R,H,G=2){const Y=H&&H.length,re=Y?H[0]*G:R.length;let ie=HB(R,0,re,G,!0);const de=[];if(!ie||ie.next===ie.prev)return de;let Ce,Ue,st;if(Y&&(ie=function(Ve,J,xe,qe){const bt=[];for(let Ht=0,Et=J.length;Ht<Et;Ht++){const Tt=HB(Ve,J[Ht]*qe,Ht<Et-1?J[Ht+1]*qe:Ve.length,qe,!1);Tt===Tt.next&&(Tt.steiner=!0),bt.push(Dk(Tt))}bt.sort(Qk);for(let Ht=0;Ht<bt.length;Ht++)xe=Rk(bt[Ht],xe);return xe}(R,H,ie,G)),R.length>80*G){Ce=1/0,Ue=1/0;let Ve=-1/0,J=-1/0;for(let xe=G;xe<re;xe+=G){const qe=R[xe],bt=R[xe+1];qe<Ce&&(Ce=qe),bt<Ue&&(Ue=bt),qe>Ve&&(Ve=qe),bt>J&&(J=bt)}st=Math.max(Ve-Ce,J-Ue),st=st!==0?32767/st:0}return Op(ie,de,G,Ce,Ue,st,0),de}(d,m),L=this._convertIndices(d,S);_=this._subdivideTrianglesScanline(L)}catch(S){console.error(S)}let w=[];return l&&(w=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:w}}_convertIndices(s,l){const d=[];for(let m=0;m<l.length;m++)d.push(this._vertexToIndex(s[2*l[m]],s[2*l[m]+1]));return d}_pointArrayToIndices(s){const l=[];for(let d=0;d<s.length;d++){const m=s[d];l.push(this._vertexToIndex(m.x,m.y))}return l}}function $B(c,s,l,d=!0){return new zk(l,s).subdividePolygonInternal(c,d)}function rd(c,s,l=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const d=c[0],m=c[c.length-1],_=l&&(d.x!==m.x||d.y!==m.y);if(s<2)return _?[...c,c[0]]:[...c];const w=Math.floor(ne/s),S=[];S.push(new D(c[0].x,c[0].y));const L=c.length,R=_?L:L-1;for(let H=0;H<R;H++){const G=c[H],Y=H<L-1?c[H+1]:c[0],re=G.x,ie=G.y,de=Y.x,Ce=Y.y,Ue=re!==de,st=ie!==Ce;if(!Ue&&!st)continue;const Ve=de-re,J=Ce-ie,xe=Math.abs(Ve),qe=Math.abs(J);let bt=re,Ht=ie;for(;;){const Tt=Ve>0?(Math.floor(bt/w)+1)*w:(Math.ceil(bt/w)-1)*w,Xt=J>0?(Math.floor(Ht/w)+1)*w:(Math.ceil(Ht/w)-1)*w,Vt=Math.abs(bt-Tt),er=Math.abs(Ht-Xt),kt=Math.abs(bt-de),yr=Math.abs(Ht-Ce),Qr=Ue?Vt/xe:Number.POSITIVE_INFINITY,kr=st?er/qe:Number.POSITIVE_INFINITY;if((kt<=Vt||!Ue)&&(yr<=er||!st))break;if(Qr<kr&&Ue||!st){bt=Tt,Ht+=J*Qr;const Sr=new D(bt,Math.round(Ht));S[S.length-1].x===Sr.x&&S[S.length-1].y===Sr.y||S.push(Sr)}else{bt+=Ve*kr,Ht=Xt;const Sr=new D(Math.round(bt),Ht);S[S.length-1].x===Sr.x&&S[S.length-1].y===Sr.y||S.push(Sr)}}const Et=new D(de,Ce);S[S.length-1].x===Et.x&&S[S.length-1].y===Et.y||S.push(Et)}return S}function Hk(c,s,l){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,m=c[2*s[0]];for(let L=1;L<s.length;L++){const R=c[2*s[L]];R<m&&(m=R,d=L)}const _=s.length;let w=d,S=(w+1)%_;for(;;){const L=w-1>=0?w-1:_-1,R=(S+1)%_,H=c[2*s[L]],G=c[2*s[R]],Y=c[2*s[w]],re=c[2*s[w]+1],ie=c[2*s[S]+1];let de=!1;if(H<G)de=!0;else if(H>G)de=!1;else{const Ce=ie-re,Ue=-(c[2*s[S]]-Y),st=re<ie?1:-1;((H-Y)*Ce+(c[2*s[L]+1]-re)*Ue)*st>((G-Y)*Ce+(c[2*s[R]+1]-re)*Ue)*st&&(de=!0)}if(de){const Ce=s[L],Ue=s[w],st=s[S];Ce!==Ue&&Ce!==st&&Ue!==st&&l.push(st,Ue,Ce),w--,w<0&&(w=_-1)}else{const Ce=s[R],Ue=s[w],st=s[S];Ce!==Ue&&Ce!==st&&Ue!==st&&l.push(st,Ue,Ce),S++,S>=_&&(S=0)}if(L===R)break}}function qB(c,s,l,d,m,_,w,S,L){const R=m.length/2,H=w&&S&&L;if(R<fn.MAX_VERTEX_ARRAY_LENGTH){const G=s.prepareSegment(R,l,d),Y=G.vertexLength;for(let de=0;de<_.length;de+=3)d.emplaceBack(Y+_[de],Y+_[de+1],Y+_[de+2]);let re,ie;G.vertexLength+=R,G.primitiveLength+=_.length/3,H&&(ie=w.prepareSegment(R,l,S),re=ie.vertexLength,ie.vertexLength+=R);for(let de=0;de<m.length;de+=2)c(m[de],m[de+1]);if(H)for(let de=0;de<L.length;de++){const Ce=L[de];for(let Ue=1;Ue<Ce.length;Ue+=2)S.emplaceBack(re+Ce[Ue-1],re+Ce[Ue]);ie.primitiveLength+=Ce.length/2}}else(function(G,Y,re,ie,de,Ce){const Ue=[];for(let qe=0;qe<ie.length/2;qe++)Ue.push(-1);const st={count:0};let Ve=0,J=G.getOrCreateLatestSegment(Y,re),xe=J.vertexLength;for(let qe=2;qe<de.length;qe+=3){const bt=de[qe-2],Ht=de[qe-1],Et=de[qe];let Tt=Ue[bt]<Ve,Xt=Ue[Ht]<Ve,Vt=Ue[Et]<Ve;J.vertexLength+((Tt?1:0)+(Xt?1:0)+(Vt?1:0))>fn.MAX_VERTEX_ARRAY_LENGTH&&(J=G.createNewSegment(Y,re),Ve=st.count,Tt=!0,Xt=!0,Vt=!0,xe=0);const er=Kp(Ue,ie,Ce,st,bt,Tt,J),kt=Kp(Ue,ie,Ce,st,Ht,Xt,J),yr=Kp(Ue,ie,Ce,st,Et,Vt,J);re.emplaceBack(xe+er-Ve,xe+kt-Ve,xe+yr-Ve),J.primitiveLength++}})(s,l,d,m,_,c),H&&function(G,Y,re,ie,de,Ce){const Ue=[];for(let qe=0;qe<ie.length/2;qe++)Ue.push(-1);const st={count:0};let Ve=0,J=G.getOrCreateLatestSegment(Y,re),xe=J.vertexLength;for(let qe=0;qe<de.length;qe++){const bt=de[qe];for(let Ht=1;Ht<de[qe].length;Ht+=2){const Et=bt[Ht-1],Tt=bt[Ht];let Xt=Ue[Et]<Ve,Vt=Ue[Tt]<Ve;J.vertexLength+((Xt?1:0)+(Vt?1:0))>fn.MAX_VERTEX_ARRAY_LENGTH&&(J=G.createNewSegment(Y,re),Ve=st.count,Xt=!0,Vt=!0,xe=0);const er=Kp(Ue,ie,Ce,st,Et,Xt,J),kt=Kp(Ue,ie,Ce,st,Tt,Vt,J);re.emplaceBack(xe+er-Ve,xe+kt-Ve),J.primitiveLength++}}}(w,l,S,m,L,c),s.forceNewSegmentOnNextPrepare(),w==null||w.forceNewSegmentOnNextPrepare()}function Kp(c,s,l,d,m,_,w){if(_){const S=d.count;return l(s[2*m],s[2*m+1]),c[m]=d.count,d.count++,w.vertexLength++,S}return c[m]}class R1{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xt,this.indexArray=new xn,this.indexArray2=new _n,this.programConfigurations=new ac(s.layers,s.zoom),this.segments=new fn,this.segments2=new fn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,d){this.hasPattern=M1("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),_=!m.isConstant(),w=[];for(const{feature:S,id:L,index:R,sourceLayerIndex:H}of s){const G=this.layers[0]._featureFilter.needGeometry,Y=ed(S,G);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom,{globalState:this.globalState}),Y,d))continue;const re=_?m.evaluate(Y,{},d,l.availableImages):void 0,ie={id:L,properties:S.properties,type:S.type,sourceLayerIndex:H,index:R,geometry:G?Y.geometry:Jh(S),patterns:{},sortKey:re};w.push(ie)}_&&w.sort((S,L)=>S.sortKey-L.sortKey);for(const S of w){const{geometry:L,index:R,sourceLayerIndex:H}=S;if(this.hasPattern){const G=k1("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(G)}else this.addFeature(S,L,R,d,{},l.subdivisionGranularity);l.featureIndex.insert(s[R].feature,L,R,H,this.index)}}update(s,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,d)}addFeatures(s,l,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,d,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Pk),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,l,d,m,_,w){for(const S of Il(l,500)){const L=$B(S,m,w.fill.getGranularityForZoomLevel(m.z)),R=this.layoutVertexArray;qB((H,G)=>{R.emplaceBack(H,G)},this.segments,this.layoutVertexArray,this.indexArray,L.verticesFlattened,L.indicesTriangles,this.segments2,this.indexArray2,L.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,_,m)}}let WB,ZB;Ne("FillBucket",R1,{omit:["layers","patternFeatures"]});var jk={get paint(){return ZB=ZB||new pi({"fill-antialias":new sr(Me.paint_fill["fill-antialias"]),"fill-opacity":new wr(Me.paint_fill["fill-opacity"]),"fill-color":new wr(Me.paint_fill["fill-color"]),"fill-outline-color":new wr(Me.paint_fill["fill-outline-color"]),"fill-translate":new sr(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new sr(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new Os(Me.paint_fill["fill-pattern"])})},get layout(){return WB=WB||new pi({"fill-sort-key":new wr(Me.layout_fill["fill-sort-key"])})}};class Vk extends wi{constructor(s){super(s,jk)}recalculate(s,l){super.recalculate(s,l);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new R1(s)}queryRadius(){return Qg(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:l,transform:d,pixelsToTileUnits:m}){return FB(Rg(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,m),l)}isTileClipped(){return!0}}const Kk=ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Gk=ii([{name:"a_centroid",components:2,type:"Int16"}],4),{members:$k}=Kk;var N1,XB,D1,YB,O1,JB,eC,zg={};function tC(){if(XB)return N1;XB=1;var c=F();function s(m,_,w,S,L){this.properties={},this.extent=w,this.type=0,this._pbf=m,this._geometry=-1,this._keys=S,this._values=L,m.readFields(l,this,_)}function l(m,_,w){m==1?_.id=w.readVarint():m==2?function(S,L){for(var R=S.readVarint()+S.pos;S.pos<R;){var H=L._keys[S.readVarint()],G=L._values[S.readVarint()];L.properties[H]=G}}(w,_):m==3?_.type=w.readVarint():m==4&&(_._geometry=w.pos)}function d(m){for(var _,w,S=0,L=0,R=m.length,H=R-1;L<R;H=L++)S+=((w=m[H]).x-(_=m[L]).x)*(_.y+w.y);return S}return N1=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var _,w=m.readVarint()+m.pos,S=1,L=0,R=0,H=0,G=[];m.pos<w;){if(L<=0){var Y=m.readVarint();S=7&Y,L=Y>>3}if(L--,S===1||S===2)R+=m.readSVarint(),H+=m.readSVarint(),S===1&&(_&&G.push(_),_=[]),_.push(new c(R,H));else{if(S!==7)throw new Error("unknown command "+S);_&&_.push(_[0].clone())}}return _&&G.push(_),G},s.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var _=m.readVarint()+m.pos,w=1,S=0,L=0,R=0,H=1/0,G=-1/0,Y=1/0,re=-1/0;m.pos<_;){if(S<=0){var ie=m.readVarint();w=7&ie,S=ie>>3}if(S--,w===1||w===2)(L+=m.readSVarint())<H&&(H=L),L>G&&(G=L),(R+=m.readSVarint())<Y&&(Y=R),R>re&&(re=R);else if(w!==7)throw new Error("unknown command "+w)}return[H,Y,G,re]},s.prototype.toGeoJSON=function(m,_,w){var S,L,R=this.extent*Math.pow(2,w),H=this.extent*m,G=this.extent*_,Y=this.loadGeometry(),re=s.types[this.type];function ie(Ue){for(var st=0;st<Ue.length;st++){var Ve=Ue[st];Ue[st]=[360*(Ve.x+H)/R-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ve.y+G)/R)*Math.PI/180))-90]}}switch(this.type){case 1:var de=[];for(S=0;S<Y.length;S++)de[S]=Y[S][0];ie(Y=de);break;case 2:for(S=0;S<Y.length;S++)ie(Y[S]);break;case 3:for(Y=function(Ue){var st=Ue.length;if(st<=1)return[Ue];for(var Ve,J,xe=[],qe=0;qe<st;qe++){var bt=d(Ue[qe]);bt!==0&&(J===void 0&&(J=bt<0),J===bt<0?(Ve&&xe.push(Ve),Ve=[Ue[qe]]):Ve.push(Ue[qe]))}return Ve&&xe.push(Ve),xe}(Y),S=0;S<Y.length;S++)for(L=0;L<Y[S].length;L++)ie(Y[S][L])}Y.length===1?Y=Y[0]:re="Multi"+re;var Ce={type:"Feature",geometry:{type:re,coordinates:Y},properties:this.properties};return"id"in this&&(Ce.id=this.id),Ce},N1}function rC(){if(YB)return D1;YB=1;var c=tC();function s(d,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(l,this,m),this.length=this._features.length}function l(d,m,_){d===15?m.version=_.readVarint():d===1?m.name=_.readString():d===5?m.extent=_.readVarint():d===2?m._features.push(_.pos):d===3?m._keys.push(_.readString()):d===4&&m._values.push(function(w){for(var S=null,L=w.readVarint()+w.pos;w.pos<L;){var R=w.readVarint()>>3;S=R===1?w.readString():R===2?w.readFloat():R===3?w.readDouble():R===4?w.readVarint64():R===5?w.readVarint():R===6?w.readSVarint():R===7?w.readBoolean():null}return S}(_))}return D1=s,s.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var m=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,m,this.extent,this._keys,this._values)},D1}function nC(){return eC||(eC=1,zg.VectorTile=function(){if(JB)return O1;JB=1;var c=rC();function s(l,d,m){if(l===3){var _=new c(m,m.readVarint()+m.pos);_.length&&(d[_.name]=_)}}return O1=function(l,d){this.layers=l.readFields(s,{},d)},O1}(),zg.VectorTileFeature=tC(),zg.VectorTileLayer=rC()),zg}var Gp=g(nC());const qk=Gp.VectorTileFeature.types,z1=Math.pow(2,13);function $p(c,s,l,d,m,_,w,S){c.emplaceBack(s,l,2*Math.floor(d*z1)+w,m*z1*2,_*z1*2,Math.round(S))}class H1{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new ir,this.centroidVertexArray=new gt,this.indexArray=new xn,this.programConfigurations=new ac(s.layers,s.zoom),this.segments=new fn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,d){this.features=[],this.hasPattern=M1("fill-extrusion",this.layers,l);for(const{feature:m,id:_,index:w,sourceLayerIndex:S}of s){const L=this.layers[0]._featureFilter.needGeometry,R=ed(m,L);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom,{globalState:this.globalState}),R,d))continue;const H={id:_,sourceLayerIndex:S,index:w,geometry:L?R.geometry:Jh(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(k1("fill-extrusion",this.layers,H,this.zoom,l)):this.addFeature(H,H.geometry,w,d,{},l.subdivisionGranularity),l.featureIndex.insert(m,H.geometry,w,S,this.index,!0)}}addFeatures(s,l,d){for(const m of this.features){const{geometry:_}=m;this.addFeature(m,_,m.index,l,d,s.subdivisionGranularity)}}update(s,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,$k),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,Gk.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,l,d,m,_,w){for(const S of Il(l,500)){const L={x:0,y:0,sampleCount:0},R=this.layoutVertexArray.length;this.processPolygon(L,m,s,S,w);const H=this.layoutVertexArray.length-R,G=Math.floor(L.x/L.sampleCount),Y=Math.floor(L.y/L.sampleCount);for(let re=0;re<H;re++)this.centroidVertexArray.emplaceBack(G,Y)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,_,m)}processPolygon(s,l,d,m,_){if(m.length<1||iC(m[0]))return;for(const G of m)G.length!==0&&Wk(s,G);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},S=_.fill.getGranularityForZoomLevel(l.z),L=qk[d.type]==="Polygon";for(const G of m){if(G.length===0||iC(G))continue;const Y=rd(G,S,L);this._generateSideFaces(Y,w)}if(!L)return;const R=$B(m,l,S,!1),H=this.layoutVertexArray;qB((G,Y)=>{$p(H,G,Y,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,R.verticesFlattened,R.indicesTriangles)}_generateSideFaces(s,l){let d=0;for(let m=1;m<s.length;m++){const _=s[m],w=s[m-1];if(Zk(_,w))continue;l.segment.vertexLength+4>fn.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const S=_.sub(w)._perp()._unit(),L=w.dist(_);d+L>32768&&(d=0),$p(this.layoutVertexArray,_.x,_.y,S.x,S.y,0,0,d),$p(this.layoutVertexArray,_.x,_.y,S.x,S.y,0,1,d),d+=L,$p(this.layoutVertexArray,w.x,w.y,S.x,S.y,0,0,d),$p(this.layoutVertexArray,w.x,w.y,S.x,S.y,0,1,d);const R=l.segment.vertexLength;this.indexArray.emplaceBack(R,R+2,R+1),this.indexArray.emplaceBack(R+1,R+2,R+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function Wk(c,s){for(let l=0;l<s.length;l++){const d=s[l];l===s.length-1&&s[0].x===d.x&&s[0].y===d.y||(c.x+=d.x,c.y+=d.y,c.sampleCount++)}}function Zk(c,s){return c.x===s.x&&(c.x<0||c.x>ne)||c.y===s.y&&(c.y<0||c.y>ne)}function iC(c){return c.every(s=>s.x<0)||c.every(s=>s.x>ne)||c.every(s=>s.y<0)||c.every(s=>s.y>ne)}let sC;Ne("FillExtrusionBucket",H1,{omit:["layers","features"]});var Xk={get paint(){return sC=sC||new pi({"fill-extrusion-opacity":new sr(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wr(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sr(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sr(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Os(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wr(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wr(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sr(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Yk extends wi{constructor(s){super(s,Xk)}createBucket(s){return new H1(s)}queryRadius(){return Qg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:d,geometry:m,transform:_,pixelsToTileUnits:w,pixelPosMatrix:S}){const L=Rg(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,w),R=this.paint.get("fill-extrusion-height").evaluate(l,d),H=this.paint.get("fill-extrusion-base").evaluate(l,d),G=function(re,ie){const de=[];for(const Ce of re){const Ue=[Ce.x,Ce.y,0,1];lt(Ue,Ue,ie),de.push(new D(Ue[0]/Ue[3],Ue[1]/Ue[3]))}return de}(L,S),Y=function(re,ie,de,Ce){const Ue=[],st=[],Ve=Ce[8]*ie,J=Ce[9]*ie,xe=Ce[10]*ie,qe=Ce[11]*ie,bt=Ce[8]*de,Ht=Ce[9]*de,Et=Ce[10]*de,Tt=Ce[11]*de;for(const Xt of re){const Vt=[],er=[];for(const kt of Xt){const yr=kt.x,Qr=kt.y,kr=Ce[0]*yr+Ce[4]*Qr+Ce[12],Sr=Ce[1]*yr+Ce[5]*Qr+Ce[13],gn=Ce[2]*yr+Ce[6]*Qr+Ce[14],Fi=Ce[3]*yr+Ce[7]*Qr+Ce[15],ds=gn+xe,io=Fi+qe,Al=kr+bt,ca=Sr+Ht,Hs=gn+Et,xi=Fi+Tt,Cs=new D((kr+Ve)/io,(Sr+J)/io);Cs.z=ds/io,Vt.push(Cs);const js=new D(Al/xi,ca/xi);js.z=Hs/xi,er.push(js)}Ue.push(Vt),st.push(er)}return[Ue,st]}(m,H,R,S);return function(re,ie,de){let Ce=1/0;FB(de,ie)&&(Ce=oC(de,ie[0]));for(let Ue=0;Ue<ie.length;Ue++){const st=ie[Ue],Ve=re[Ue];for(let J=0;J<st.length-1;J++){const xe=st[J],qe=[xe,st[J+1],Ve[J+1],Ve[J],xe];EB(de,qe)&&(Ce=Math.min(Ce,oC(de,qe)))}}return Ce!==1/0&&Ce}(Y[0],Y[1],G)}}function qp(c,s){return c.x*s.x+c.y*s.y}function oC(c,s){if(c.length===1){let l=0;const d=s[l++];let m;for(;!m||d.equals(m);)if(m=s[l++],!m)return 1/0;for(;l<s.length;l++){const _=s[l],w=c[0],S=m.sub(d),L=_.sub(d),R=w.sub(d),H=qp(S,S),G=qp(S,L),Y=qp(L,L),re=qp(R,S),ie=qp(R,L),de=H*Y-G*G,Ce=(Y*re-G*ie)/de,Ue=(H*ie-G*re)/de,st=d.z*(1-Ce-Ue)+m.z*Ce+_.z*Ue;if(isFinite(st))return st}return 1/0}{let l=1/0;for(const d of s)l=Math.min(l,d.z);return l}}const Jk=ii([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:eU}=Jk,tU=ii([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:rU}=tU,nU=Gp.VectorTileFeature.types,iU=Math.cos(Math.PI/180*37.5),aC=Math.pow(2,14)/.5;class j1{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new rr,this.layoutVertexArray2=new Dt,this.indexArray=new xn,this.programConfigurations=new ac(s.layers,s.zoom),this.segments=new fn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,d){this.hasPattern=M1("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),_=!m.isConstant(),w=[];for(const{feature:S,id:L,index:R,sourceLayerIndex:H}of s){const G=this.layers[0]._featureFilter.needGeometry,Y=ed(S,G);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom,{globalState:this.globalState}),Y,d))continue;const re=_?m.evaluate(Y,{},d):void 0,ie={id:L,properties:S.properties,type:S.type,sourceLayerIndex:H,index:R,geometry:G?Y.geometry:Jh(S),patterns:{},sortKey:re};w.push(ie)}_&&w.sort((S,L)=>S.sortKey-L.sortKey);for(const S of w){const{geometry:L,index:R,sourceLayerIndex:H}=S;if(this.hasPattern){const G=k1("line",this.layers,S,this.zoom,l);this.patternFeatures.push(G)}else this.addFeature(S,L,R,d,{},l.subdivisionGranularity);l.featureIndex.insert(s[R].feature,L,R,H,this.index)}}update(s,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,d)}addFeatures(s,l,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,d,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,rU)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,eU),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,l,d,m,_,w){const S=this.layers[0].layout,L=S.get("line-join").evaluate(s,{}),R=S.get("line-cap"),H=S.get("line-miter-limit"),G=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const Y of l)this.addLine(Y,s,L,R,H,G,m,w);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,_,m)}addLine(s,l,d,m,_,w,S,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=rd(s,S?L.line.getGranularityForZoomLevel(S.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ve=0;Ve<s.length-1;Ve++)this.totalDistance+=s[Ve].dist(s[Ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=nU[l.type]==="Polygon";let H=s.length;for(;H>=2&&s[H-1].equals(s[H-2]);)H--;let G=0;for(;G<H-1&&s[G].equals(s[G+1]);)G++;if(H<(R?3:2))return;d==="bevel"&&(_=1.05);const Y=this.overscaling<=16?122880/(512*this.overscaling):0,re=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let ie,de,Ce,Ue,st;this.e1=this.e2=-1,R&&(ie=s[H-2],st=s[G].sub(ie)._unit()._perp());for(let Ve=G;Ve<H;Ve++){if(Ce=Ve===H-1?R?s[G+1]:void 0:s[Ve+1],Ce&&s[Ve].equals(Ce))continue;st&&(Ue=st),ie&&(de=ie),ie=s[Ve],st=Ce?Ce.sub(ie)._unit()._perp():Ue,Ue=Ue||st;let J=Ue.add(st);J.x===0&&J.y===0||J._unit();const xe=Ue.x*st.x+Ue.y*st.y,qe=J.x*st.x+J.y*st.y,bt=qe!==0?1/qe:1/0,Ht=2*Math.sqrt(2-2*qe),Et=qe<iU&&de&&Ce,Tt=Ue.x*st.y-Ue.y*st.x>0;if(Et&&Ve>G){const er=ie.dist(de);if(er>2*Y){const kt=ie.sub(ie.sub(de)._mult(Y/er)._round());this.updateDistance(de,kt),this.addCurrentVertex(kt,Ue,0,0,re),de=kt}}const Xt=de&&Ce;let Vt=Xt?d:R?"butt":m;if(Xt&&Vt==="round"&&(bt<w?Vt="miter":bt<=2&&(Vt="fakeround")),Vt==="miter"&&bt>_&&(Vt="bevel"),Vt==="bevel"&&(bt>2&&(Vt="flipbevel"),bt<_&&(Vt="miter")),de&&this.updateDistance(de,ie),Vt==="miter")J._mult(bt),this.addCurrentVertex(ie,J,0,0,re);else if(Vt==="flipbevel"){if(bt>100)J=st.mult(-1);else{const er=bt*Ue.add(st).mag()/Ue.sub(st).mag();J._perp()._mult(er*(Tt?-1:1))}this.addCurrentVertex(ie,J,0,0,re),this.addCurrentVertex(ie,J.mult(-1),0,0,re)}else if(Vt==="bevel"||Vt==="fakeround"){const er=-Math.sqrt(bt*bt-1),kt=Tt?er:0,yr=Tt?0:er;if(de&&this.addCurrentVertex(ie,Ue,kt,yr,re),Vt==="fakeround"){const Qr=Math.round(180*Ht/Math.PI/20);for(let kr=1;kr<Qr;kr++){let Sr=kr/Qr;if(Sr!==.5){const Fi=Sr-.5;Sr+=Sr*Fi*(Sr-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Fi*Fi+(.848013+xe*(.215638*xe-1.06021)))}const gn=st.sub(Ue)._mult(Sr)._add(Ue)._unit()._mult(Tt?-1:1);this.addHalfVertex(ie,gn.x,gn.y,!1,Tt,0,re)}}Ce&&this.addCurrentVertex(ie,st,-kt,-yr,re)}else if(Vt==="butt")this.addCurrentVertex(ie,J,0,0,re);else if(Vt==="square"){const er=de?1:-1;this.addCurrentVertex(ie,J,er,er,re)}else Vt==="round"&&(de&&(this.addCurrentVertex(ie,Ue,0,0,re),this.addCurrentVertex(ie,Ue,1,1,re,!0)),Ce&&(this.addCurrentVertex(ie,st,-1,-1,re,!0),this.addCurrentVertex(ie,st,0,0,re)));if(Et&&Ve<H-1){const er=ie.dist(Ce);if(er>2*Y){const kt=ie.add(Ce.sub(ie)._mult(Y/er)._round());this.updateDistance(ie,kt),this.addCurrentVertex(kt,st,0,0,re),ie=kt}}}}addCurrentVertex(s,l,d,m,_,w=!1){const S=l.y*m-l.x,L=-l.y-l.x*m;this.addHalfVertex(s,l.x+l.y*d,l.y-l.x*d,w,!1,d,_),this.addHalfVertex(s,S,L,w,!0,-m,_),this.distance>aC/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,l,d,m,_,w))}addHalfVertex({x:s,y:l},d,m,_,w,S,L){const R=.5*(this.lineClips?this.scaledDistance*(aC-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(_?1:0),(l<<1)+(w?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const H=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,H,this.e2),L.primitiveLength++),w?this.e2=H:this.e1=H}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,l){this.distance+=s.dist(l),this.updateScaledDistance()}}let lC,AC;Ne("LineBucket",j1,{omit:["layers","patternFeatures"]});var cC={get paint(){return AC=AC||new pi({"line-opacity":new wr(Me.paint_line["line-opacity"]),"line-color":new wr(Me.paint_line["line-color"]),"line-translate":new sr(Me.paint_line["line-translate"]),"line-translate-anchor":new sr(Me.paint_line["line-translate-anchor"]),"line-width":new wr(Me.paint_line["line-width"]),"line-gap-width":new wr(Me.paint_line["line-gap-width"]),"line-offset":new wr(Me.paint_line["line-offset"]),"line-blur":new wr(Me.paint_line["line-blur"]),"line-dasharray":new ko(Me.paint_line["line-dasharray"]),"line-pattern":new Os(Me.paint_line["line-pattern"]),"line-gradient":new _i(Me.paint_line["line-gradient"])})},get layout(){return lC=lC||new pi({"line-cap":new sr(Me.layout_line["line-cap"]),"line-join":new wr(Me.layout_line["line-join"]),"line-miter-limit":new sr(Me.layout_line["line-miter-limit"]),"line-round-limit":new sr(Me.layout_line["line-round-limit"]),"line-sort-key":new wr(Me.layout_line["line-sort-key"])})}};class sU extends wr{possiblyEvaluate(s,l){return l=new Er(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(s,l)}evaluate(s,l,d,m){return l=Mt({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(s,l,d,m)}}let Hg;class oU extends wi{constructor(s){super(s,cC),this.gradientVersion=0,Hg||(Hg=new sU(cC.paint.properties["line-width"].specification),Hg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Ca,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,l){super.recalculate(s,l),this.paint._values["line-floorwidth"]=Hg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new j1(s)}queryRadius(s){const l=s,d=uC(Np("line-width",this,l),Np("line-gap-width",this,l)),m=Np("line-offset",this,l);return d/2+Math.abs(m)+Qg(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:d,geometry:m,transform:_,pixelsToTileUnits:w}){const S=Rg(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,w),L=w/2*uC(this.paint.get("line-width").evaluate(l,d),this.paint.get("line-gap-width").evaluate(l,d)),R=this.paint.get("line-offset").evaluate(l,d);return R&&(m=function(H,G){const Y=[];for(let re=0;re<H.length;re++){const ie=H[re],de=[];for(let Ce=0;Ce<ie.length;Ce++){const Ue=ie[Ce-1],st=ie[Ce],Ve=ie[Ce+1],J=Ce===0?new D(0,0):st.sub(Ue)._unit()._perp(),xe=Ce===ie.length-1?new D(0,0):Ve.sub(st)._unit()._perp(),qe=J._add(xe)._unit(),bt=qe.x*xe.x+qe.y*xe.y;bt!==0&&qe._mult(1/bt),de.push(qe._mult(G)._add(st))}Y.push(de)}return Y}(m,R*w)),function(H,G,Y){for(let re=0;re<G.length;re++){const ie=G[re];if(H.length>=3){for(let de=0;de<ie.length;de++)if(Zd(H,ie[de]))return!0}if(vk(H,ie,Y))return!0}return!1}(S,m,L)}isTileClipped(){return!0}}function uC(c,s){return s>0?s+2*c:c}const aU=ii([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),lU=ii([{name:"a_projected_pos",components:3,type:"Float32"}],4);ii([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const AU=ii([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ii([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hC=ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cU=ii([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function uU(c,s,l){return c.sections.forEach(d=>{d.text=function(m,_,w){const S=_.layout.get("text-transform").evaluate(w,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),wn.applyArabicShaping&&(m=wn.applyArabicShaping(m)),m}(d.text,s,l)}),c}ii([{name:"triangle",components:3,type:"Uint16"}]),ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ii([{type:"Float32",name:"offsetX"}]),ii([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ii([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Wp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var dC,V1,fC,Bs=24,K1={};function hU(){return dC||(dC=1,K1.read=function(c,s,l,d,m){var _,w,S=8*m-d-1,L=(1<<S)-1,R=L>>1,H=-7,G=l?m-1:0,Y=l?-1:1,re=c[s+G];for(G+=Y,_=re&(1<<-H)-1,re>>=-H,H+=S;H>0;_=256*_+c[s+G],G+=Y,H-=8);for(w=_&(1<<-H)-1,_>>=-H,H+=d;H>0;w=256*w+c[s+G],G+=Y,H-=8);if(_===0)_=1-R;else{if(_===L)return w?NaN:1/0*(re?-1:1);w+=Math.pow(2,d),_-=R}return(re?-1:1)*w*Math.pow(2,_-d)},K1.write=function(c,s,l,d,m,_){var w,S,L,R=8*_-m-1,H=(1<<R)-1,G=H>>1,Y=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=d?0:_-1,ie=d?1:-1,de=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(S=isNaN(s)?1:0,w=H):(w=Math.floor(Math.log(s)/Math.LN2),s*(L=Math.pow(2,-w))<1&&(w--,L*=2),(s+=w+G>=1?Y/L:Y*Math.pow(2,1-G))*L>=2&&(w++,L/=2),w+G>=H?(S=0,w=H):w+G>=1?(S=(s*L-1)*Math.pow(2,m),w+=G):(S=s*Math.pow(2,G-1)*Math.pow(2,m),w=0));m>=8;c[l+re]=255&S,re+=ie,S/=256,m-=8);for(w=w<<m|S,R+=m;R>0;c[l+re]=255&w,re+=ie,w/=256,R-=8);c[l+re-ie]|=128*de}),K1}function pC(){if(fC)return V1;fC=1,V1=s;var c=hU();function s(J){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(J)?J:new Uint8Array(J||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var l=4294967296,d=1/l,m=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function _(J){return J.type===s.Bytes?J.readVarint()+J.pos:J.pos+1}function w(J,xe,qe){return qe?4294967296*xe+(J>>>0):4294967296*(xe>>>0)+(J>>>0)}function S(J,xe,qe){var bt=xe<=16383?1:xe<=2097151?2:xe<=268435455?3:Math.floor(Math.log(xe)/(7*Math.LN2));qe.realloc(bt);for(var Ht=qe.pos-1;Ht>=J;Ht--)qe.buf[Ht+bt]=qe.buf[Ht]}function L(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeVarint(J[qe])}function R(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeSVarint(J[qe])}function H(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeFloat(J[qe])}function G(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeDouble(J[qe])}function Y(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeBoolean(J[qe])}function re(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeFixed32(J[qe])}function ie(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeSFixed32(J[qe])}function de(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeFixed64(J[qe])}function Ce(J,xe){for(var qe=0;qe<J.length;qe++)xe.writeSFixed64(J[qe])}function Ue(J,xe){return(J[xe]|J[xe+1]<<8|J[xe+2]<<16)+16777216*J[xe+3]}function st(J,xe,qe){J[qe]=xe,J[qe+1]=xe>>>8,J[qe+2]=xe>>>16,J[qe+3]=xe>>>24}function Ve(J,xe){return(J[xe]|J[xe+1]<<8|J[xe+2]<<16)+(J[xe+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(J,xe,qe){for(qe=qe||this.length;this.pos<qe;){var bt=this.readVarint(),Ht=bt>>3,Et=this.pos;this.type=7&bt,J(Ht,xe,this),this.pos===Et&&this.skip(bt)}return xe},readMessage:function(J,xe){return this.readFields(J,xe,this.readVarint()+this.pos)},readFixed32:function(){var J=Ue(this.buf,this.pos);return this.pos+=4,J},readSFixed32:function(){var J=Ve(this.buf,this.pos);return this.pos+=4,J},readFixed64:function(){var J=Ue(this.buf,this.pos)+Ue(this.buf,this.pos+4)*l;return this.pos+=8,J},readSFixed64:function(){var J=Ue(this.buf,this.pos)+Ve(this.buf,this.pos+4)*l;return this.pos+=8,J},readFloat:function(){var J=c.read(this.buf,this.pos,!0,23,4);return this.pos+=4,J},readDouble:function(){var J=c.read(this.buf,this.pos,!0,52,8);return this.pos+=8,J},readVarint:function(J){var xe,qe,bt=this.buf;return xe=127&(qe=bt[this.pos++]),qe<128?xe:(xe|=(127&(qe=bt[this.pos++]))<<7,qe<128?xe:(xe|=(127&(qe=bt[this.pos++]))<<14,qe<128?xe:(xe|=(127&(qe=bt[this.pos++]))<<21,qe<128?xe:function(Ht,Et,Tt){var Xt,Vt,er=Tt.buf;if(Xt=(112&(Vt=er[Tt.pos++]))>>4,Vt<128||(Xt|=(127&(Vt=er[Tt.pos++]))<<3,Vt<128)||(Xt|=(127&(Vt=er[Tt.pos++]))<<10,Vt<128)||(Xt|=(127&(Vt=er[Tt.pos++]))<<17,Vt<128)||(Xt|=(127&(Vt=er[Tt.pos++]))<<24,Vt<128)||(Xt|=(1&(Vt=er[Tt.pos++]))<<31,Vt<128))return w(Ht,Xt,Et);throw new Error("Expected varint not more than 10 bytes")}(xe|=(15&(qe=bt[this.pos]))<<28,J,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var J=this.readVarint();return J%2==1?(J+1)/-2:J/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var J=this.readVarint()+this.pos,xe=this.pos;return this.pos=J,J-xe>=12&&m?function(qe,bt,Ht){return m.decode(qe.subarray(bt,Ht))}(this.buf,xe,J):function(qe,bt,Ht){for(var Et="",Tt=bt;Tt<Ht;){var Xt,Vt,er,kt=qe[Tt],yr=null,Qr=kt>239?4:kt>223?3:kt>191?2:1;if(Tt+Qr>Ht)break;Qr===1?kt<128&&(yr=kt):Qr===2?(192&(Xt=qe[Tt+1]))==128&&(yr=(31&kt)<<6|63&Xt)<=127&&(yr=null):Qr===3?(Vt=qe[Tt+2],(192&(Xt=qe[Tt+1]))==128&&(192&Vt)==128&&((yr=(15&kt)<<12|(63&Xt)<<6|63&Vt)<=2047||yr>=55296&&yr<=57343)&&(yr=null)):Qr===4&&(Vt=qe[Tt+2],er=qe[Tt+3],(192&(Xt=qe[Tt+1]))==128&&(192&Vt)==128&&(192&er)==128&&((yr=(15&kt)<<18|(63&Xt)<<12|(63&Vt)<<6|63&er)<=65535||yr>=1114112)&&(yr=null)),yr===null?(yr=65533,Qr=1):yr>65535&&(yr-=65536,Et+=String.fromCharCode(yr>>>10&1023|55296),yr=56320|1023&yr),Et+=String.fromCharCode(yr),Tt+=Qr}return Et}(this.buf,xe,J)},readBytes:function(){var J=this.readVarint()+this.pos,xe=this.buf.subarray(this.pos,J);return this.pos=J,xe},readPackedVarint:function(J,xe){if(this.type!==s.Bytes)return J.push(this.readVarint(xe));var qe=_(this);for(J=J||[];this.pos<qe;)J.push(this.readVarint(xe));return J},readPackedSVarint:function(J){if(this.type!==s.Bytes)return J.push(this.readSVarint());var xe=_(this);for(J=J||[];this.pos<xe;)J.push(this.readSVarint());return J},readPackedBoolean:function(J){if(this.type!==s.Bytes)return J.push(this.readBoolean());var xe=_(this);for(J=J||[];this.pos<xe;)J.push(this.readBoolean());return J},readPackedFloat:function(J){if(this.type!==s.Bytes)return J.push(this.readFloat());var xe=_(this);for(J=J||[];this.pos<xe;)J.push(this.readFloat());return J},readPackedDouble:function(J){if(this.type!==s.Bytes)return J.push(this.readDouble());var xe=_(this);for(J=J||[];this.pos<xe;)J.push(this.readDouble());return J},readPackedFixed32:function(J){if(this.type!==s.Bytes)return J.push(this.readFixed32());var xe=_(this);for(J=J||[];this.pos<xe;)J.push(this.readFixed32());return J},readPackedSFixed32:function(J){if(this.type!==s.Bytes)return J.push(this.readSFixed32());var xe=_(this);for(J=J||[];this.pos<xe;)J.push(this.readSFixed32());return J},readPackedFixed64:function(J){if(this.type!==s.Bytes)return J.push(this.readFixed64());var xe=_(this);for(J=J||[];this.pos<xe;)J.push(this.readFixed64());return J},readPackedSFixed64:function(J){if(this.type!==s.Bytes)return J.push(this.readSFixed64());var xe=_(this);for(J=J||[];this.pos<xe;)J.push(this.readSFixed64());return J},skip:function(J){var xe=7&J;if(xe===s.Varint)for(;this.buf[this.pos++]>127;);else if(xe===s.Bytes)this.pos=this.readVarint()+this.pos;else if(xe===s.Fixed32)this.pos+=4;else{if(xe!==s.Fixed64)throw new Error("Unimplemented type: "+xe);this.pos+=8}},writeTag:function(J,xe){this.writeVarint(J<<3|xe)},realloc:function(J){for(var xe=this.length||16;xe<this.pos+J;)xe*=2;if(xe!==this.length){var qe=new Uint8Array(xe);qe.set(this.buf),this.buf=qe,this.length=xe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(J){this.realloc(4),st(this.buf,J,this.pos),this.pos+=4},writeSFixed32:function(J){this.realloc(4),st(this.buf,J,this.pos),this.pos+=4},writeFixed64:function(J){this.realloc(8),st(this.buf,-1&J,this.pos),st(this.buf,Math.floor(J*d),this.pos+4),this.pos+=8},writeSFixed64:function(J){this.realloc(8),st(this.buf,-1&J,this.pos),st(this.buf,Math.floor(J*d),this.pos+4),this.pos+=8},writeVarint:function(J){(J=+J||0)>268435455||J<0?function(xe,qe){var bt,Ht;if(xe>=0?(bt=xe%4294967296|0,Ht=xe/4294967296|0):(Ht=~(-xe/4294967296),4294967295^(bt=~(-xe%4294967296))?bt=bt+1|0:(bt=0,Ht=Ht+1|0)),xe>=18446744073709552e3||xe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");qe.realloc(10),function(Et,Tt,Xt){Xt.buf[Xt.pos++]=127&Et|128,Et>>>=7,Xt.buf[Xt.pos++]=127&Et|128,Et>>>=7,Xt.buf[Xt.pos++]=127&Et|128,Et>>>=7,Xt.buf[Xt.pos++]=127&Et|128,Xt.buf[Xt.pos]=127&(Et>>>=7)}(bt,0,qe),function(Et,Tt){var Xt=(7&Et)<<4;Tt.buf[Tt.pos++]|=Xt|((Et>>>=3)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et)))))}(Ht,qe)}(J,this):(this.realloc(4),this.buf[this.pos++]=127&J|(J>127?128:0),J<=127||(this.buf[this.pos++]=127&(J>>>=7)|(J>127?128:0),J<=127||(this.buf[this.pos++]=127&(J>>>=7)|(J>127?128:0),J<=127||(this.buf[this.pos++]=J>>>7&127))))},writeSVarint:function(J){this.writeVarint(J<0?2*-J-1:2*J)},writeBoolean:function(J){this.writeVarint(!!J)},writeString:function(J){J=String(J),this.realloc(4*J.length),this.pos++;var xe=this.pos;this.pos=function(bt,Ht,Et){for(var Tt,Xt,Vt=0;Vt<Ht.length;Vt++){if((Tt=Ht.charCodeAt(Vt))>55295&&Tt<57344){if(!Xt){Tt>56319||Vt+1===Ht.length?(bt[Et++]=239,bt[Et++]=191,bt[Et++]=189):Xt=Tt;continue}if(Tt<56320){bt[Et++]=239,bt[Et++]=191,bt[Et++]=189,Xt=Tt;continue}Tt=Xt-55296<<10|Tt-56320|65536,Xt=null}else Xt&&(bt[Et++]=239,bt[Et++]=191,bt[Et++]=189,Xt=null);Tt<128?bt[Et++]=Tt:(Tt<2048?bt[Et++]=Tt>>6|192:(Tt<65536?bt[Et++]=Tt>>12|224:(bt[Et++]=Tt>>18|240,bt[Et++]=Tt>>12&63|128),bt[Et++]=Tt>>6&63|128),bt[Et++]=63&Tt|128)}return Et}(this.buf,J,this.pos);var qe=this.pos-xe;qe>=128&&S(xe,qe,this),this.pos=xe-1,this.writeVarint(qe),this.pos+=qe},writeFloat:function(J){this.realloc(4),c.write(this.buf,J,this.pos,!0,23,4),this.pos+=4},writeDouble:function(J){this.realloc(8),c.write(this.buf,J,this.pos,!0,52,8),this.pos+=8},writeBytes:function(J){var xe=J.length;this.writeVarint(xe),this.realloc(xe);for(var qe=0;qe<xe;qe++)this.buf[this.pos++]=J[qe]},writeRawMessage:function(J,xe){this.pos++;var qe=this.pos;J(xe,this);var bt=this.pos-qe;bt>=128&&S(qe,bt,this),this.pos=qe-1,this.writeVarint(bt),this.pos+=bt},writeMessage:function(J,xe,qe){this.writeTag(J,s.Bytes),this.writeRawMessage(xe,qe)},writePackedVarint:function(J,xe){xe.length&&this.writeMessage(J,L,xe)},writePackedSVarint:function(J,xe){xe.length&&this.writeMessage(J,R,xe)},writePackedBoolean:function(J,xe){xe.length&&this.writeMessage(J,Y,xe)},writePackedFloat:function(J,xe){xe.length&&this.writeMessage(J,H,xe)},writePackedDouble:function(J,xe){xe.length&&this.writeMessage(J,G,xe)},writePackedFixed32:function(J,xe){xe.length&&this.writeMessage(J,re,xe)},writePackedSFixed32:function(J,xe){xe.length&&this.writeMessage(J,ie,xe)},writePackedFixed64:function(J,xe){xe.length&&this.writeMessage(J,de,xe)},writePackedSFixed64:function(J,xe){xe.length&&this.writeMessage(J,Ce,xe)},writeBytesField:function(J,xe){this.writeTag(J,s.Bytes),this.writeBytes(xe)},writeFixed32Field:function(J,xe){this.writeTag(J,s.Fixed32),this.writeFixed32(xe)},writeSFixed32Field:function(J,xe){this.writeTag(J,s.Fixed32),this.writeSFixed32(xe)},writeFixed64Field:function(J,xe){this.writeTag(J,s.Fixed64),this.writeFixed64(xe)},writeSFixed64Field:function(J,xe){this.writeTag(J,s.Fixed64),this.writeSFixed64(xe)},writeVarintField:function(J,xe){this.writeTag(J,s.Varint),this.writeVarint(xe)},writeSVarintField:function(J,xe){this.writeTag(J,s.Varint),this.writeSVarint(xe)},writeStringField:function(J,xe){this.writeTag(J,s.Bytes),this.writeString(xe)},writeFloatField:function(J,xe){this.writeTag(J,s.Fixed32),this.writeFloat(xe)},writeDoubleField:function(J,xe){this.writeTag(J,s.Fixed64),this.writeDouble(xe)},writeBooleanField:function(J,xe){this.writeVarintField(J,!!xe)}},V1}var zu,G1=g(pC());function dU(c,s,l){c===1&&l.readMessage(fU,s)}function fU(c,s,l){if(c===3){const{id:d,bitmap:m,width:_,height:w,left:S,top:L,advance:R}=l.readMessage(pU,{});s.push({id:d,bitmap:new Dp({width:_+6,height:w+6},m),metrics:{width:_,height:w,left:S,top:L,advance:R}})}}function pU(c,s,l){c===1?s.id=l.readVarint():c===2?s.bitmap=l.readBytes():c===3?s.width=l.readVarint():c===4?s.height=l.readVarint():c===5?s.left=l.readSVarint():c===6?s.top=l.readSVarint():c===7&&(s.advance=l.readVarint())}function mC(c){let s=0,l=0;for(const w of c)s+=w.w*w.h,l=Math.max(l,w.w);c.sort((w,S)=>S.h-w.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),l),h:1/0}];let m=0,_=0;for(const w of c)for(let S=d.length-1;S>=0;S--){const L=d[S];if(!(w.w>L.w||w.h>L.h)){if(w.x=L.x,w.y=L.y,_=Math.max(_,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===L.w&&w.h===L.h){const R=d.pop();S<d.length&&(d[S]=R)}else w.h===L.h?(L.x+=w.w,L.w-=w.w):w.w===L.w?(L.y+=w.h,L.h-=w.h):(d.push({x:L.x+w.w,y:L.y,w:L.w-w.w,h:w.h}),L.y+=w.h,L.h-=w.h);break}}return{w:m,h:_,fill:s/(m*_)||0}}class $1{constructor(s,{pixelRatio:l,version:d,stretchX:m,stretchY:_,content:w,textFitWidth:S,textFitHeight:L}){this.paddedRect=s,this.pixelRatio=l,this.stretchX=m,this.stretchY=_,this.content=w,this.version=d,this.textFitWidth=S,this.textFitHeight=L}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class gC{constructor(s,l){const d={},m={};this.haveRenderCallbacks=[];const _=[];this.addImages(s,d,_),this.addImages(l,m,_);const{w,h:S}=mC(_),L=new Aa({width:w||1,height:S||1});for(const R in s){const H=s[R],G=d[R].paddedRect;Aa.copy(H.data,L,{x:0,y:0},{x:G.x+1,y:G.y+1},H.data)}for(const R in l){const H=l[R],G=m[R].paddedRect,Y=G.x+1,re=G.y+1,ie=H.data.width,de=H.data.height;Aa.copy(H.data,L,{x:0,y:0},{x:Y,y:re},H.data),Aa.copy(H.data,L,{x:0,y:de-1},{x:Y,y:re-1},{width:ie,height:1}),Aa.copy(H.data,L,{x:0,y:0},{x:Y,y:re+de},{width:ie,height:1}),Aa.copy(H.data,L,{x:ie-1,y:0},{x:Y-1,y:re},{width:1,height:de}),Aa.copy(H.data,L,{x:0,y:0},{x:Y+ie,y:re},{width:1,height:de})}this.image=L,this.iconPositions=d,this.patternPositions=m}addImages(s,l,d){for(const m in s){const _=s[m],w={x:0,y:0,w:_.data.width+2,h:_.data.height+2};d.push(w),l[m]=new $1(w,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(s,l){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in s.updatedImages)this.patchUpdatedImage(this.iconPositions[d],s.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],s.getImage(d),l)}patchUpdatedImage(s,l,d){if(!s||!l||s.version===l.version)return;s.version=l.version;const[m,_]=s.tl;d.update(l.data,void 0,{x:m,y:_})}}Ne("ImagePosition",$1),Ne("ImageAtlas",gC),h.an=void 0,(zu=h.an||(h.an={}))[zu.none=0]="none",zu[zu.horizontal=1]="horizontal",zu[zu.vertical=2]="vertical",zu[zu.horizontalOnly=3]="horizontalOnly";class Zp{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,l,d){const m=new Zp;return m.scale=s||1,m.fontStack=l,m.verticalAlign=d||"bottom",m}static forImage(s,l){const d=new Zp;return d.imageName=s,d.verticalAlign=l||"bottom",d}}class ef{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,l){const d=new ef;for(let m=0;m<s.sections.length;m++){const _=s.sections[m];_.image?d.addImageSection(_):d.addTextSection(_,l)}return d}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let l="";for(let d=0;d<s.length;d++){const m=s.charCodeAt(d+1)||null,_=s.charCodeAt(d-1)||null;l+=m&&Cn(m)&&!Wp[s[d+1]]||_&&Cn(_)&&!Wp[s[d-1]]||!Wp[s[d]]?s[d]:Wp[s[d]]}return l}(this.text)}trim(){let s=0;for(let d=0;d<this.text.length&&Vg[this.text.charCodeAt(d)];d++)s++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=s&&Vg[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(s,l),this.sectionIndex=this.sectionIndex.slice(s,l)}substring(s,l){const d=new ef;return d.text=this.text.substring(s,l),d.sectionIndex=this.sectionIndex.slice(s,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,l)=>Math.max(s,this.sections[l].scale),0)}getMaxImageSize(s){let l=0,d=0;for(let m=0;m<this.length();m++){const _=this.getSection(m);if(_.imageName){const w=s[_.imageName];if(!w)continue;const S=w.displaySize;l=Math.max(l,S[0]),d=Math.max(d,S[1])}}return{maxImageWidth:l,maxImageHeight:d}}addTextSection(s,l){this.text+=s.text,this.sections.push(Zp.forText(s.scale,s.fontStack||l,s.verticalAlign));const d=this.sections.length-1;for(let m=0;m<s.text.length;++m)this.sectionIndex.push(d)}addImageSection(s){const l=s.image?s.image.name:"";if(l.length===0)return void Cr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Zp.forImage(l,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function jg(c,s,l,d,m,_,w,S,L,R,H,G,Y,re,ie){const de=ef.fromFeature(c,m);let Ce;G===h.an.vertical&&de.verticalizePunctuation();const{processBidirectionalText:Ue,processStyledBidirectionalText:st}=wn;if(Ue&&de.sections.length===1){Ce=[];const xe=Ue(de.toString(),q1(de,R,_,s,d,re));for(const qe of xe){const bt=new ef;bt.text=qe,bt.sections=de.sections;for(let Ht=0;Ht<qe.length;Ht++)bt.sectionIndex.push(0);Ce.push(bt)}}else if(st){Ce=[];const xe=st(de.text,de.sectionIndex,q1(de,R,_,s,d,re));for(const qe of xe){const bt=new ef;bt.text=qe[0],bt.sectionIndex=qe[1],bt.sections=de.sections,Ce.push(bt)}}else Ce=function(xe,qe){const bt=[],Ht=xe.text;let Et=0;for(const Tt of qe)bt.push(xe.substring(Et,Tt)),Et=Tt;return Et<Ht.length&&bt.push(xe.substring(Et,Ht.length)),bt}(de,q1(de,R,_,s,d,re));const Ve=[],J={positionedLines:Ve,text:de.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function(xe,qe,bt,Ht,Et,Tt,Xt,Vt,er,kt,yr,Qr){let kr=0,Sr=0,gn=0,Fi=0;const ds=Vt==="right"?1:Vt==="left"?0:.5,io=Bs/Qr;let Al=0;for(const xi of Et){xi.trim();const Cs=xi.getMaxScale(),js={positionedGlyphs:[],lineOffset:0};xe.positionedLines[Al]=js;const Vs=js.positionedGlyphs;let No=0;if(!xi.length()){Sr+=Tt,++Al;continue}const cl=vU(Ht,xi,io);for(let ua=0;ua<xi.length();ua++){const fs=xi.getSection(ua),Es=xi.getSectionIndex(ua),Fs=xi.getCharCode(ua),ns=_U(er,yr,Fs);let oi;if(fs.imageName){if(xe.iconsInText=!0,fs.scale=fs.scale*io,oi=xU(fs,ns,Cs,cl,Ht),!oi)continue;No=Math.max(No,oi.imageOffset)}else if(oi=wU(fs,Fs,ns,cl,qe,bt),!oi)continue;const{rect:fA,metrics:sf,baselineOffset:pA}=oi;Vs.push({glyph:Fs,imageName:fs.imageName,x:kr,y:Sr+pA+-17,vertical:ns,scale:fs.scale,fontStack:fs.fontStack,sectionIndex:Es,metrics:sf,rect:fA}),ns?(xe.verticalizable=!0,kr+=(fs.imageName?sf.advance:Bs)*fs.scale+kt):kr+=sf.advance*fs.scale+kt}Vs.length!==0&&(gn=Math.max(kr-kt,gn),bU(Vs,0,Vs.length-1,ds)),kr=0,js.lineOffset=Math.max(No,(Cs-1)*Bs);const Ss=Tt*Cs+No;Sr+=Ss,Fi=Math.max(Ss,Fi),++Al}const{horizontalAlign:ca,verticalAlign:Hs}=W1(Xt);(function(xi,Cs,js,Vs,No,cl,Ss,ua,fs){const Es=(Cs-js)*No;let Fs=0;Fs=cl!==Ss?-ua*Vs- -17:-Vs*fs*Ss+.5*Ss;for(const ns of xi)for(const oi of ns.positionedGlyphs)oi.x+=Es,oi.y+=Fs})(xe.positionedLines,ds,ca,Hs,gn,Fi,Tt,Sr,Et.length),xe.top+=-Hs*Sr,xe.bottom=xe.top+Sr,xe.left+=-ca*gn,xe.right=xe.left+gn}(J,s,l,d,Ce,w,S,L,G,R,Y,ie),!function(xe){for(const qe of xe)if(qe.positionedGlyphs.length!==0)return!1;return!0}(Ve)&&J}const Vg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mU={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},gU={40:!0};function yC(c,s,l,d,m,_){if(s.imageName){const w=d[s.imageName];return w?w.displaySize[0]*s.scale*Bs/_+m:0}{const w=l[s.fontStack],S=w&&w[c];return S?S.metrics.advance*s.scale+m:0}}function vC(c,s,l,d){const m=Math.pow(c-s,2);return d?c<s?m/2:2*m:m+Math.abs(l)*l}function yU(c,s,l){let d=0;return c===10&&(d-=1e4),l&&(d+=150),c!==40&&c!==65288||(d+=50),s!==41&&s!==65289||(d+=50),d}function _C(c,s,l,d,m,_){let w=null,S=vC(s,l,m,_);for(const L of d){const R=vC(s-L.x,l,m,_)+L.badness;R<=S&&(w=L,S=R)}return{index:c,x:s,priorBreak:w,badness:S}}function wC(c){return c?wC(c.priorBreak).concat(c.index):[]}function q1(c,s,l,d,m,_){if(!c)return[];const w=[],S=function(G,Y,re,ie,de,Ce){let Ue=0;for(let st=0;st<G.length();st++){const Ve=G.getSection(st);Ue+=yC(G.getCharCode(st),Ve,ie,de,Y,Ce)}return Ue/Math.max(1,Math.ceil(Ue/re))}(c,s,l,d,m,_),L=c.text.indexOf("​")>=0;let R=0;for(let G=0;G<c.length();G++){const Y=c.getSection(G),re=c.getCharCode(G);if(Vg[re]||(R+=yC(re,Y,d,m,s,_)),G<c.length()-1){const ie=!((H=re)<11904)&&(!!Ye["CJK Compatibility Forms"](H)||!!Ye["CJK Compatibility"](H)||!!Ye["CJK Strokes"](H)||!!Ye["CJK Symbols and Punctuation"](H)||!!Ye["Enclosed CJK Letters and Months"](H)||!!Ye["Halfwidth and Fullwidth Forms"](H)||!!Ye["Ideographic Description Characters"](H)||!!Ye["Vertical Forms"](H)||Or.test(String.fromCodePoint(H)));(mU[re]||ie||Y.imageName||G!==c.length()-2&&gU[c.getCharCode(G+1)])&&w.push(_C(G+1,R,S,w,yU(re,c.getCharCode(G+1),ie&&L),!1))}}var H;return wC(_C(c.length(),R,S,w,0,!0))}function W1(c){let s=.5,l=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:s,verticalAlign:l}}function vU(c,s,l){const d=s.getMaxScale()*Bs,{maxImageWidth:m,maxImageHeight:_}=s.getMaxImageSize(c),w=Math.max(d,_*l);return{verticalLineContentWidth:Math.max(d,m*l),horizontalLineContentHeight:w}}function xC(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function _U(c,s,l){return!(c===h.an.horizontal||!s&&!fr(l)||s&&(Vg[l]||(d=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function wU(c,s,l,d,m,_){const w=_[c.fontStack],S=function(R,H,G,Y){if(R&&R.rect)return R;const re=H[G.fontStack],ie=re&&re[Y];return ie?{rect:null,metrics:ie.metrics}:null}(w&&w[s],m,c,s);if(S===null)return null;let L;if(l)L=d.verticalLineContentWidth-c.scale*Bs;else{const R=xC(c.verticalAlign);L=(d.horizontalLineContentHeight-c.scale*Bs)*R}return{rect:S.rect,metrics:S.metrics,baselineOffset:L}}function xU(c,s,l,d,m){const _=m[c.imageName];if(!_)return null;const w=_.paddedRect,S=_.displaySize,L={width:S[0],height:S[1],left:1,top:-3,advance:s?S[1]:S[0]};let R;if(s)R=d.verticalLineContentWidth-S[1]*c.scale;else{const H=xC(c.verticalAlign);R=(d.horizontalLineContentHeight-S[1]*c.scale)*H}return{rect:w,metrics:L,baselineOffset:R,imageOffset:(s?S[0]:S[1])*c.scale-Bs*l}}function bU(c,s,l,d){if(d===0)return;const m=c[l],_=(c[l].x+m.metrics.advance*m.scale)*d;for(let w=s;w<=l;w++)c[w].x-=_}function BU(c,s,l){const{horizontalAlign:d,verticalAlign:m}=W1(l),_=s[0]-c.displaySize[0]*d,w=s[1]-c.displaySize[1]*m;return{image:c,top:w,bottom:w+c.displaySize[1],left:_,right:_+c.displaySize[0]}}function bC(c){var s,l;let d=c.left,m=c.top,_=c.right-d,w=c.bottom-m;const S=(s=c.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",L=(l=c.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",R=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(L==="proportional"){if(S==="stretchOnly"&&_/w<R||S==="proportional"){const H=Math.ceil(w*R);d*=H/_,_=H}}else if(S==="proportional"&&L==="stretchOnly"&&R!==0&&_/w>R){const H=Math.ceil(_/R);m*=H/w,w=H}return{x1:d,y1:m,x2:d+_,y2:m+w}}function BC(c,s,l,d,m,_){const w=c.image;let S;if(w.content){const Ce=w.content,Ue=w.pixelRatio||1;S=[Ce[0]/Ue,Ce[1]/Ue,w.displaySize[0]-Ce[2]/Ue,w.displaySize[1]-Ce[3]/Ue]}const L=s.left*_,R=s.right*_;let H,G,Y,re;l==="width"||l==="both"?(re=m[0]+L-d[3],G=m[0]+R+d[1]):(re=m[0]+(L+R-w.displaySize[0])/2,G=re+w.displaySize[0]);const ie=s.top*_,de=s.bottom*_;return l==="height"||l==="both"?(H=m[1]+ie-d[0],Y=m[1]+de+d[2]):(H=m[1]+(ie+de-w.displaySize[1])/2,Y=H+w.displaySize[1]),{image:w,top:H,right:G,bottom:Y,left:re,collisionPadding:S}}const eu=128,Hu=32640;function CC(c,s){const{expression:l}=s;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Er(c+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=l;let _=0;for(;_<d.length&&d[_]<=c;)_++;_=Math.max(0,_-1);let w=_;for(;w<d.length&&d[w]<c+1;)w++;w=Math.min(d.length-1,w);const S=d[_],L=d[w];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:L,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:L,minSize:l.evaluate(new Er(S)),maxSize:l.evaluate(new Er(L)),interpolationType:m}}}function Z1(c,s,l){let d="never";const m=c.get(s);return m?d=m:c.get(l)&&(d="always"),d}const CU=Gp.VectorTileFeature.types,SU=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Kg(c,s,l,d,m,_,w,S,L,R,H,G,Y){const re=S?Math.min(Hu,Math.round(S[0])):0,ie=S?Math.min(Hu,Math.round(S[1])):0;c.emplaceBack(s,l,Math.round(32*d),Math.round(32*m),_,w,(re<<1)+(L?1:0),ie,16*R,16*H,256*G,256*Y)}function X1(c,s,l){c.emplaceBack(s.x,s.y,l),c.emplaceBack(s.x,s.y,l),c.emplaceBack(s.x,s.y,l),c.emplaceBack(s.x,s.y,l)}function EU(c){for(const s of c.sections)if(Qn(s.text))return!0;return!1}class Y1{constructor(s){this.layoutVertexArray=new rn,this.indexArray=new xn,this.programConfigurations=s,this.segments=new fn,this.dynamicLayoutVertexArray=new mn,this.opacityVertexArray=new $n,this.hasVisibleVertices=!1,this.placedSymbolArray=new Fe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,l,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,aU.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,lU.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,SU,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ne("SymbolBuffers",Y1);class J1{constructor(s,l,d){this.layoutVertexArray=new s,this.layoutAttributes=l,this.indexArray=new d,this.segments=new fn,this.collisionVertexArray=new Fn}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,AU.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ne("CollisionBuffers",J1);class tf{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(w=>w.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=CC(this.zoom,l["text-size"]),this.iconSizeData=CC(this.zoom,l["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=Z1(d,"text-overlap","text-allow-overlap")!=="never"||Z1(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(w=>h.an[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=s.sourceID}createArrays(){this.text=new Y1(new ac(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new Y1(new ac(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new De,this.lineVertexArray=new We,this.symbolInstances=new je,this.textAnchorOffsets=new Oe}calculateGlyphDependencies(s,l,d,m,_){for(let w=0;w<s.length;w++)if(l[s.charCodeAt(w)]=!0,(d||m)&&_){const S=Wp[s.charAt(w)];S&&(l[S.charCodeAt(0)]=!0)}}populate(s,l,d){const m=this.layers[0],_=m.layout,w=_.get("text-font"),S=_.get("text-field"),L=_.get("icon-image"),R=(S.value.kind!=="constant"||S.value.value instanceof Yi&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),H=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,G=_.get("symbol-sort-key");if(this.features=[],!R&&!H)return;const Y=l.iconDependencies,re=l.glyphDependencies,ie=l.availableImages,de=new Er(this.zoom,{globalState:this.globalState});for(const{feature:Ce,id:Ue,index:st,sourceLayerIndex:Ve}of s){const J=m._featureFilter.needGeometry,xe=ed(Ce,J);if(!m._featureFilter.filter(de,xe,d))continue;let qe,bt;if(J||(xe.geometry=Jh(Ce)),R){const Et=m.getValueAndResolveTokens("text-field",xe,d,ie),Tt=Yi.factory(Et),Xt=this.hasRTLText=this.hasRTLText||EU(Tt);(!Xt||wn.getRTLTextPluginStatus()==="unavailable"||Xt&&wn.isParsed())&&(qe=uU(Tt,m,xe))}if(H){const Et=m.getValueAndResolveTokens("icon-image",xe,d,ie);bt=Et instanceof ws?Et:ws.fromString(Et)}if(!qe&&!bt)continue;const Ht=this.sortFeaturesByKey?G.evaluate(xe,{},d):void 0;if(this.features.push({id:Ue,text:qe,icon:bt,index:st,sourceLayerIndex:Ve,geometry:xe.geometry,properties:Ce.properties,type:CU[Ce.type],sortKey:Ht}),bt&&(Y[bt.name]=!0),qe){const Et=w.evaluate(xe,{},d).join(","),Tt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.an.vertical)>=0;for(const Xt of qe.sections)if(Xt.image)Y[Xt.image.name]=!0;else{const Vt=Nt(qe.toString()),er=Xt.fontStack||Et,kt=re[er]=re[er]||{};this.calculateGlyphDependencies(Xt.text,kt,Tt,this.allowVerticalPlacement,Vt)}}}_.get("symbol-placement")==="line"&&(this.features=function(Ce){const Ue={},st={},Ve=[];let J=0;function xe(Et){Ve.push(Ce[Et]),J++}function qe(Et,Tt,Xt){const Vt=st[Et];return delete st[Et],st[Tt]=Vt,Ve[Vt].geometry[0].pop(),Ve[Vt].geometry[0]=Ve[Vt].geometry[0].concat(Xt[0]),Vt}function bt(Et,Tt,Xt){const Vt=Ue[Tt];return delete Ue[Tt],Ue[Et]=Vt,Ve[Vt].geometry[0].shift(),Ve[Vt].geometry[0]=Xt[0].concat(Ve[Vt].geometry[0]),Vt}function Ht(Et,Tt,Xt){const Vt=Xt?Tt[0][Tt[0].length-1]:Tt[0][0];return`${Et}:${Vt.x}:${Vt.y}`}for(let Et=0;Et<Ce.length;Et++){const Tt=Ce[Et],Xt=Tt.geometry,Vt=Tt.text?Tt.text.toString():null;if(!Vt){xe(Et);continue}const er=Ht(Vt,Xt),kt=Ht(Vt,Xt,!0);if(er in st&&kt in Ue&&st[er]!==Ue[kt]){const yr=bt(er,kt,Xt),Qr=qe(er,kt,Ve[yr].geometry);delete Ue[er],delete st[kt],st[Ht(Vt,Ve[Qr].geometry,!0)]=Qr,Ve[yr].geometry=null}else er in st?qe(er,kt,Xt):kt in Ue?bt(er,kt,Xt):(xe(Et),Ue[er]=J-1,st[kt]=J-1)}return Ve.filter(Et=>Et.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ce,Ue)=>Ce.sortKey-Ue.sortKey)}update(s,l,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,l,this.layers,d),this.icon.programConfigurations.updatePaintArrays(s,l,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,l){const d=this.lineVertexArray.length;if(s.segment!==void 0){let m=s.dist(l[s.segment+1]),_=s.dist(l[s.segment]);const w={};for(let S=s.segment+1;S<l.length;S++)w[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:m},S<l.length-1&&(m+=l[S+1].dist(l[S]));for(let S=s.segment||0;S>=0;S--)w[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const L=w[S];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(s,l,d,m,_,w,S,L,R,H,G,Y){const re=s.indexArray,ie=s.layoutVertexArray,de=s.segments.prepareSegment(4*l.length,ie,re,this.canOverlap?w.sortKey:void 0),Ce=this.glyphOffsetArray.length,Ue=de.vertexLength,st=this.allowVerticalPlacement&&S===h.an.vertical?Math.PI/2:0,Ve=w.text&&w.text.sections;for(let J=0;J<l.length;J++){const{tl:xe,tr:qe,bl:bt,br:Ht,tex:Et,pixelOffsetTL:Tt,pixelOffsetBR:Xt,minFontScaleX:Vt,minFontScaleY:er,glyphOffset:kt,isSDF:yr,sectionIndex:Qr}=l[J],kr=de.vertexLength,Sr=kt[1];Kg(ie,L.x,L.y,xe.x,Sr+xe.y,Et.x,Et.y,d,yr,Tt.x,Tt.y,Vt,er),Kg(ie,L.x,L.y,qe.x,Sr+qe.y,Et.x+Et.w,Et.y,d,yr,Xt.x,Tt.y,Vt,er),Kg(ie,L.x,L.y,bt.x,Sr+bt.y,Et.x,Et.y+Et.h,d,yr,Tt.x,Xt.y,Vt,er),Kg(ie,L.x,L.y,Ht.x,Sr+Ht.y,Et.x+Et.w,Et.y+Et.h,d,yr,Xt.x,Xt.y,Vt,er),X1(s.dynamicLayoutVertexArray,L,st),re.emplaceBack(kr,kr+2,kr+1),re.emplaceBack(kr+1,kr+2,kr+3),de.vertexLength+=4,de.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kt[0]),J!==l.length-1&&Qr===l[J+1].sectionIndex||s.programConfigurations.populatePaintArrays(ie.length,w,w.index,{},Y,Ve&&Ve[Qr])}s.placedSymbolArray.emplaceBack(L.x,L.y,Ce,this.glyphOffsetArray.length-Ce,Ue,R,H,L.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],S,0,!1,0,G)}_addCollisionDebugVertex(s,l,d,m,_,w){return l.emplaceBack(0,0),s.emplaceBack(d.x,d.y,m,_,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(s,l,d,m,_,w,S){const L=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),R=L.vertexLength,H=_.layoutVertexArray,G=_.collisionVertexArray,Y=S.anchorX,re=S.anchorY;this._addCollisionDebugVertex(H,G,w,Y,re,new D(s,l)),this._addCollisionDebugVertex(H,G,w,Y,re,new D(d,l)),this._addCollisionDebugVertex(H,G,w,Y,re,new D(d,m)),this._addCollisionDebugVertex(H,G,w,Y,re,new D(s,m)),L.vertexLength+=4;const ie=_.indexArray;ie.emplaceBack(R,R+1),ie.emplaceBack(R+1,R+2),ie.emplaceBack(R+2,R+3),ie.emplaceBack(R+3,R),L.primitiveLength+=4}addDebugCollisionBoxes(s,l,d,m){for(let _=s;_<l;_++){const w=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new J1(En,hC.members,_n),this.iconCollisionBox=new J1(En,hC.members,_n);for(let s=0;s<this.symbolInstances.length;s++){const l=this.symbolInstances.get(s);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(s,l,d,m,_,w,S,L,R){const H={};for(let G=l;G<d;G++){const Y=s.get(G);H.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},H.textFeatureIndex=Y.featureIndex;break}for(let G=m;G<_;G++){const Y=s.get(G);H.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},H.verticalTextFeatureIndex=Y.featureIndex;break}for(let G=w;G<S;G++){const Y=s.get(G);H.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},H.iconFeatureIndex=Y.featureIndex;break}for(let G=L;G<R;G++){const Y=s.get(G);H.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},H.verticalIconFeatureIndex=Y.featureIndex;break}return H}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,l){const d=s.placedSymbolArray.get(l),m=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<m;_+=4)s.indexArray.emplaceBack(_,_+2,_+1),s.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(s),d=Math.cos(s),m=[],_=[],w=[];for(let S=0;S<this.symbolInstances.length;++S){w.push(S);const L=this.symbolInstances.get(S);m.push(0|Math.round(l*L.anchorX+d*L.anchorY)),_.push(L.featureIndex)}return w.sort((S,L)=>m[S]-m[L]||_[L]-_[S]),w}addToSortKeyRanges(s,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,_,w)=>{m>=0&&w.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let SC,EC;Ne("SymbolBucket",tf,{omit:["layers","collisionBoxArray","features","compareText"]}),tf.MAX_GLYPHS=65535,tf.addDynamicAttributes=X1;var e_={get paint(){return EC=EC||new pi({"icon-opacity":new wr(Me.paint_symbol["icon-opacity"]),"icon-color":new wr(Me.paint_symbol["icon-color"]),"icon-halo-color":new wr(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new wr(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wr(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new sr(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new sr(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new wr(Me.paint_symbol["text-opacity"]),"text-color":new wr(Me.paint_symbol["text-color"],{runtimeType:Ni,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new wr(Me.paint_symbol["text-halo-color"]),"text-halo-width":new wr(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new wr(Me.paint_symbol["text-halo-blur"]),"text-translate":new sr(Me.paint_symbol["text-translate"]),"text-translate-anchor":new sr(Me.paint_symbol["text-translate-anchor"])})},get layout(){return SC=SC||new pi({"symbol-placement":new sr(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new sr(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sr(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wr(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sr(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sr(Me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sr(Me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sr(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new sr(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sr(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new wr(Me.layout_symbol["icon-size"]),"icon-text-fit":new sr(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sr(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new wr(Me.layout_symbol["icon-image"]),"icon-rotate":new wr(Me.layout_symbol["icon-rotate"]),"icon-padding":new wr(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new sr(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new wr(Me.layout_symbol["icon-offset"]),"icon-anchor":new wr(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sr(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sr(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sr(Me.layout_symbol["text-rotation-alignment"]),"text-field":new wr(Me.layout_symbol["text-field"]),"text-font":new wr(Me.layout_symbol["text-font"]),"text-size":new wr(Me.layout_symbol["text-size"]),"text-max-width":new wr(Me.layout_symbol["text-max-width"]),"text-line-height":new sr(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new wr(Me.layout_symbol["text-letter-spacing"]),"text-justify":new wr(Me.layout_symbol["text-justify"]),"text-radial-offset":new wr(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sr(Me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new wr(Me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new wr(Me.layout_symbol["text-anchor"]),"text-max-angle":new sr(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new sr(Me.layout_symbol["text-writing-mode"]),"text-rotate":new wr(Me.layout_symbol["text-rotate"]),"text-padding":new sr(Me.layout_symbol["text-padding"]),"text-keep-upright":new sr(Me.layout_symbol["text-keep-upright"]),"text-transform":new wr(Me.layout_symbol["text-transform"]),"text-offset":new wr(Me.layout_symbol["text-offset"]),"text-allow-overlap":new sr(Me.layout_symbol["text-allow-overlap"]),"text-overlap":new sr(Me.layout_symbol["text-overlap"]),"text-ignore-placement":new sr(Me.layout_symbol["text-ignore-placement"]),"text-optional":new sr(Me.layout_symbol["text-optional"])})}};class FC{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:as,this.defaultValue=s}evaluate(s){if(s.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(s.formattedSection))return l.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ne("FormatSectionOverride",FC,{omit:["defaultValue"]});class Gg extends wi{constructor(s){super(s,e_)}recalculate(s,l){if(super.recalculate(s,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const _ of d)m.indexOf(_)<0&&m.push(_);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,l,d,m){const _=this.layout.get(s).evaluate(l,{},d,m),w=this._unevaluatedLayout._values[s];return w.isDataDriven()||Tu(w.value)||!_?_:function(S,L){return L.replace(/{([^{}]+)}/g,(R,H)=>S&&H in S?String(S[H]):"")}(l.properties,_)}createBucket(s){return new tf(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of e_.paint.overridableProperties){if(!Gg.hasPaintOverride(this.layout,s))continue;const l=this.paint.get(s),d=new FC(l),m=new WA(d,l.property.specification);let _=null;_=l.value.kind==="constant"||l.value.kind==="source"?new ZA("source",m):new Lu("composite",m,l.value.zoomStops),this.paint._values[s]=new vi(l.property,_,l.parameters)}}_handleOverridablePaintPropertyUpdate(s,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&Gg.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,l){const d=s.get("text-field"),m=e_.paint.properties[l];let _=!1;const w=S=>{for(const L of S)if(m.overrides&&m.overrides.hasOverride(L))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Yi)w(d.value.value.sections);else if(d.value.kind==="source"){const S=R=>{_||(R instanceof Si&&Tr(R.value)===va?w(R.value.sections):R instanceof Mr?w(R.sections):R.eachChild(S))},L=d.value;L._styleExpression&&S(L._styleExpression.expression)}return _}}let IC;var FU={get paint(){return IC=IC||new pi({"background-color":new sr(Me.paint_background["background-color"]),"background-pattern":new ko(Me.paint_background["background-pattern"]),"background-opacity":new sr(Me.paint_background["background-opacity"])})}};class IU extends wi{constructor(s){super(s,FU)}}let TC;var TU={get paint(){return TC=TC||new pi({"raster-opacity":new sr(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new sr(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sr(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sr(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new sr(Me.paint_raster["raster-saturation"]),"raster-contrast":new sr(Me.paint_raster["raster-contrast"]),"raster-resampling":new sr(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new sr(Me.paint_raster["raster-fade-duration"])})}};class PU extends wi{constructor(s){super(s,TU)}}class LU extends wi{constructor(s){super(s,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class MU{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const kU={once:!0},t_=63710088e-1;class ju{constructor(s,l){if(isNaN(s)||isNaN(l))throw new Error(`Invalid LngLat object: (${s}, ${l})`);if(this.lng=+s,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ju(Qt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const l=Math.PI/180,d=this.lat*l,m=s.lat*l,_=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((s.lng-this.lng)*l);return t_*Math.acos(Math.min(_,1))}static convert(s){if(s instanceof ju)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new ju(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new ju(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const PC=2*Math.PI*t_;function LC(c){return PC*Math.cos(c*Math.PI/180)}function MC(c){return(180+c)/360}function kC(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function UC(c,s){return c/LC(s)}function r_(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function QC(c,s){return c*LC(r_(s))}class Xp{constructor(s,l,d=0){this.x=+s,this.y=+l,this.z=+d}static fromLngLat(s,l=0){const d=ju.convert(s);return new Xp(MC(d.lng),kC(d.lat),UC(l,d.lat))}toLngLat(){return new ju(360*this.x-180,r_(this.y))}toAltitude(){return QC(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/PC*(s=r_(this.y),1/Math.cos(s*Math.PI/180));var s}}function RC(c,s,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[c*d-2*Math.PI*6378137/2,s*d-2*Math.PI*6378137/2]}class n_{constructor(s,l,d){if(!function(m,_,w){return!(m<0||m>25||w<0||w>=Math.pow(2,m)||_<0||_>=Math.pow(2,m))}(s,l,d))throw new Error(`x=${l}, y=${d}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=l,this.y=d,this.key=rf(0,s,s,l,d)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,l,d){const m=(w=this.y,S=this.z,L=RC(256*(_=this.x),256*(w=Math.pow(2,S)-w-1),S),R=RC(256*(_+1),256*(w+1),S),L[0]+","+L[1]+","+R[0]+","+R[1]);var _,w,S,L,R;const H=function(G,Y,re){let ie,de="";for(let Ce=G;Ce>0;Ce--)ie=1<<Ce-1,de+=(Y&ie?1:0)+(re&ie?2:0);return de}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,H).replace(/{bbox-epsg-3857}/g,m)}isChildOf(s){const l=this.z-s.z;return l>0&&s.x===this.x>>l&&s.y===this.y>>l}getTilePoint(s){const l=Math.pow(2,this.z);return new D((s.x*l-this.x)*ne,(s.y*l-this.y)*ne)}toString(){return`${this.z}/${this.x}/${this.y}`}}class NC{constructor(s,l){this.wrap=s,this.canonical=l,this.key=rf(s,l.z,l.z,l.x,l.y)}}class ll{constructor(s,l,d,m,_){if(this.terrainRttPosMatrix32f=null,s<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${d}`);this.overscaledZ=s,this.wrap=l,this.canonical=new n_(d,+m,+_),this.key=rf(l,s,d,m,_)}clone(){return new ll(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-s;return s>this.canonical.z?new ll(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ll(s,this.wrap,s,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(s,l){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-s;return s>this.canonical.z?rf(this.wrap*+l,s,this.canonical.z,this.canonical.x,this.canonical.y):rf(this.wrap*+l,s,s,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const l=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>l&&s.canonical.y===this.canonical.y>>l}children(s){if(this.overscaledZ>=s)return[new ll(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new ll(l,this.wrap,l,d,m),new ll(l,this.wrap,l,d+1,m),new ll(l,this.wrap,l,d,m+1),new ll(l,this.wrap,l,d+1,m+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new ll(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new ll(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new NC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Xp(s.x-this.wrap,s.y))}}function rf(c,s,l,d,m){(c*=2)<0&&(c=-1*c-1);const _=1<<l;return(_*_*c+_*m+d).toString(36)+l.toString(36)+s.toString(36)}Ne("CanonicalTileID",n_),Ne("OverscaledTileID",ll,{omit:["terrainRttPosMatrix32f"]});class nd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(s){return this.minX=Math.min(this.minX,s.x),this.minY=Math.min(this.minY,s.y),this.maxX=Math.max(this.maxX,s.x),this.maxY=Math.max(this.maxY,s.y),this}expandBy(s){return this.minX-=s,this.minY-=s,this.maxX+=s,this.maxY+=s,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(s){return this.expandBy(-s)}map(s){const l=new nd;return l.extend(s(new D(this.minX,this.minY))),l.extend(s(new D(this.maxX,this.minY))),l.extend(s(new D(this.minX,this.maxY))),l.extend(s(new D(this.maxX,this.maxY))),l}static fromPoints(s){const l=new nd;for(const d of s)l.extend(d);return l}contains(s){return s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(s){return!this.empty()&&!s.empty()&&s.minX>=this.minX&&s.maxX<=this.maxX&&s.minY>=this.minY&&s.maxY<=this.maxY}intersects(s){return!this.empty()&&!s.empty()&&s.minX<=this.maxX&&s.maxX>=this.minX&&s.minY<=this.maxY&&s.maxY>=this.minY}}class DC{constructor(s){this._stringToNumber={},this._numberToString=[];for(let l=0;l<s.length;l++){const d=s[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class OC{constructor(s,l,d,m,_){this.type="Feature",this._vectorTileFeature=s,s._z=l,s._x=d,s._y=m,this.properties=s.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(s[l]=this[l]);return s}}class zC{constructor(s,l){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new we(ne,16,0),this.grid3D=new we(ne,16,0),this.featureIndexArray=new St,this.promoteId=l}insert(s,l,d,m,_,w){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,_);const L=w?this.grid3D:this.grid;for(let R=0;R<l.length;R++){const H=l[R],G=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<H.length;Y++){const re=H[Y];G[0]=Math.min(G[0],re.x),G[1]=Math.min(G[1],re.y),G[2]=Math.max(G[2],re.x),G[3]=Math.max(G[3],re.y)}G[0]<ne&&G[1]<ne&&G[2]>=0&&G[3]>=0&&L.insert(S,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Gp.VectorTile(new G1(this.rawTileData)).layers,this.sourceLayerCoder=new DC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,l,d,m){this.loadVTLayers();const _=s.params,w=ne/s.tileSize/s.scale,S=Po(_.filter),L=s.queryGeometry,R=s.queryPadding*w,H=nd.fromPoints(L),G=this.grid.query(H.minX-R,H.minY-R,H.maxX+R,H.maxY+R),Y=nd.fromPoints(s.cameraQueryGeometry).expandBy(R),re=this.grid3D.query(Y.minX,Y.minY,Y.maxX,Y.maxY,(Ce,Ue,st,Ve)=>function(J,xe,qe,bt,Ht){for(const Tt of J)if(xe<=Tt.x&&qe<=Tt.y&&bt>=Tt.x&&Ht>=Tt.y)return!0;const Et=[new D(xe,qe),new D(xe,Ht),new D(bt,Ht),new D(bt,qe)];if(J.length>2){for(const Tt of Et)if(Zd(J,Tt))return!0}for(let Tt=0;Tt<J.length-1;Tt++)if(wk(J[Tt],J[Tt+1],Et))return!0;return!1}(s.cameraQueryGeometry,Ce-R,Ue-R,st+R,Ve+R));for(const Ce of re)G.push(Ce);G.sort(UU);const ie={};let de;for(let Ce=0;Ce<G.length;Ce++){const Ue=G[Ce];if(Ue===de)continue;de=Ue;const st=this.featureIndexArray.get(Ue);let Ve=null;this.loadMatchingFeature(ie,st.bucketIndex,st.sourceLayerIndex,st.featureIndex,S,_.layers,_.availableImages,l,d,m,(J,xe,qe)=>(Ve||(Ve=Jh(J)),xe.queryIntersectsFeature({queryGeometry:L,feature:J,featureState:qe,geometry:Ve,zoom:this.z,transform:s.transform,pixelsToTileUnits:w,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return ie}loadMatchingFeature(s,l,d,m,_,w,S,L,R,H,G){const Y=this.bucketLayerIDs[l];if(w&&!Y.some(Ce=>w.has(Ce)))return;const re=this.sourceLayerCoder.decode(d),ie=this.vtLayers[re].feature(m);if(_.needGeometry){const Ce=ed(ie,!0);if(!_.filter(new Er(this.tileID.overscaledZ),Ce,this.tileID.canonical))return}else if(!_.filter(new Er(this.tileID.overscaledZ),ie))return;const de=this.getId(ie,re);for(let Ce=0;Ce<Y.length;Ce++){const Ue=Y[Ce];if(w&&!w.has(Ue))continue;const st=L[Ue];if(!st)continue;let Ve={};de&&H&&(Ve=H.getState(st.sourceLayer||"_geojsonTileLayer",de));const J=Mt({},R[Ue]);J.paint=HC(J.paint,st.paint,ie,Ve,S),J.layout=HC(J.layout,st.layout,ie,Ve,S);const xe=!G||G(ie,st,Ve);if(!xe)continue;const qe=new OC(ie,this.z,this.x,this.y,de);qe.layer=J;let bt=s[Ue];bt===void 0&&(bt=s[Ue]=[]),bt.push({featureIndex:m,feature:qe,intersectionZ:xe})}}lookupSymbolFeatures(s,l,d,m,_,w,S,L){const R={};this.loadVTLayers();const H=Po(_);for(const G of s)this.loadMatchingFeature(R,d,m,G,H,w,S,L,l);return R}hasLayer(s){for(const l of this.bucketLayerIDs)for(const d of l)if(s===d)return!0;return!1}getId(s,l){var d;let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((d=s.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(m=Number(s.properties.cluster_id))),m}}function HC(c,s,l,d,m){return jt(c,(_,w)=>{const S=s instanceof Ei?s.get(w):null;return S&&S.evaluate?S.evaluate(l,d,m):S})}function UU(c,s){return s-c}function jC(c,s,l,d,m){const _=[];for(let w=0;w<c.length;w++){const S=c[w];let L;for(let R=0;R<S.length-1;R++){let H=S[R],G=S[R+1];H.x<s&&G.x<s||(H.x<s?H=new D(s,H.y+(s-H.x)/(G.x-H.x)*(G.y-H.y))._round():G.x<s&&(G=new D(s,H.y+(s-H.x)/(G.x-H.x)*(G.y-H.y))._round()),H.y<l&&G.y<l||(H.y<l?H=new D(H.x+(l-H.y)/(G.y-H.y)*(G.x-H.x),l)._round():G.y<l&&(G=new D(H.x+(l-H.y)/(G.y-H.y)*(G.x-H.x),l)._round()),H.x>=d&&G.x>=d||(H.x>=d?H=new D(d,H.y+(d-H.x)/(G.x-H.x)*(G.y-H.y))._round():G.x>=d&&(G=new D(d,H.y+(d-H.x)/(G.x-H.x)*(G.y-H.y))._round()),H.y>=m&&G.y>=m||(H.y>=m?H=new D(H.x+(m-H.y)/(G.y-H.y)*(G.x-H.x),m)._round():G.y>=m&&(G=new D(H.x+(m-H.y)/(G.y-H.y)*(G.x-H.x),m)._round()),L&&H.equals(L[L.length-1])||(L=[H],_.push(L)),L.push(G)))))}}return _}Ne("FeatureIndex",zC,{omit:["rawTileData","sourceLayerCoder"]});class Vu extends D{constructor(s,l,d,m){super(s,l),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new Vu(this.x,this.y,this.angle,this.segment)}}function VC(c,s,l,d,m){if(s.segment===void 0||l===0)return!0;let _=s,w=s.segment+1,S=0;for(;S>-l/2;){if(w--,w<0)return!1;S-=c[w].dist(_),_=c[w]}S+=c[w].dist(c[w+1]),w++;const L=[];let R=0;for(;S<l/2;){const H=c[w],G=c[w+1];if(!G)return!1;let Y=c[w-1].angleTo(H)-H.angleTo(G);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:S,angleDelta:Y}),R+=Y;S-L[0].distance>d;)R-=L.shift().angleDelta;if(R>m)return!1;w++,S+=H.dist(G)}return!0}function KC(c){let s=0;for(let l=0;l<c.length-1;l++)s+=c[l].dist(c[l+1]);return s}function GC(c,s,l){return c?.6*s*l:0}function $C(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function QU(c,s,l,d,m,_){const w=GC(l,m,_),S=$C(l,d)*_;let L=0;const R=KC(c)/2;for(let H=0;H<c.length-1;H++){const G=c[H],Y=c[H+1],re=G.dist(Y);if(L+re>R){const ie=(R-L)/re,de=es.number(G.x,Y.x,ie),Ce=es.number(G.y,Y.y,ie),Ue=new Vu(de,Ce,Y.angleTo(G),H);return Ue._round(),!w||VC(c,Ue,S,w,s)?Ue:void 0}L+=re}}function RU(c,s,l,d,m,_,w,S,L){const R=GC(d,_,w),H=$C(d,m),G=H*w,Y=c[0].x===0||c[0].x===L||c[0].y===0||c[0].y===L;return s-G<s/4&&(s=G+s/4),qC(c,Y?s/2*S%s:(H/2+2*_)*w*S%s,s,R,l,G,Y,!1,L)}function qC(c,s,l,d,m,_,w,S,L){const R=_/2,H=KC(c);let G=0,Y=s-l,re=[];for(let ie=0;ie<c.length-1;ie++){const de=c[ie],Ce=c[ie+1],Ue=de.dist(Ce),st=Ce.angleTo(de);for(;Y+l<G+Ue;){Y+=l;const Ve=(Y-G)/Ue,J=es.number(de.x,Ce.x,Ve),xe=es.number(de.y,Ce.y,Ve);if(J>=0&&J<L&&xe>=0&&xe<L&&Y-R>=0&&Y+R<=H){const qe=new Vu(J,xe,st,ie);qe._round(),d&&!VC(c,qe,_,d,m)||re.push(qe)}}G+=Ue}return S||re.length||w||(re=qC(c,G/2,l,d,m,_,w,!0,L)),re}function WC(c,s,l,d){const m=[],_=c.image,w=_.pixelRatio,S=_.paddedRect.w-2,L=_.paddedRect.h-2;let R={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const H=_.stretchX||[[0,S]],G=_.stretchY||[[0,L]],Y=(kt,yr)=>kt+yr[1]-yr[0],re=H.reduce(Y,0),ie=G.reduce(Y,0),de=S-re,Ce=L-ie;let Ue=0,st=re,Ve=0,J=ie,xe=0,qe=de,bt=0,Ht=Ce;if(_.content&&d){const kt=_.content,yr=kt[2]-kt[0],Qr=kt[3]-kt[1];(_.textFitWidth||_.textFitHeight)&&(R=bC(c)),Ue=$g(H,0,kt[0]),Ve=$g(G,0,kt[1]),st=$g(H,kt[0],kt[2]),J=$g(G,kt[1],kt[3]),xe=kt[0]-Ue,bt=kt[1]-Ve,qe=yr-st,Ht=Qr-J}const Et=R.x1,Tt=R.y1,Xt=R.x2-Et,Vt=R.y2-Tt,er=(kt,yr,Qr,kr)=>{const Sr=qg(kt.stretch-Ue,st,Xt,Et),gn=Wg(kt.fixed-xe,qe,kt.stretch,re),Fi=qg(yr.stretch-Ve,J,Vt,Tt),ds=Wg(yr.fixed-bt,Ht,yr.stretch,ie),io=qg(Qr.stretch-Ue,st,Xt,Et),Al=Wg(Qr.fixed-xe,qe,Qr.stretch,re),ca=qg(kr.stretch-Ve,J,Vt,Tt),Hs=Wg(kr.fixed-bt,Ht,kr.stretch,ie),xi=new D(Sr,Fi),Cs=new D(io,Fi),js=new D(io,ca),Vs=new D(Sr,ca),No=new D(gn/w,ds/w),cl=new D(Al/w,Hs/w),Ss=s*Math.PI/180;if(Ss){const Es=Math.sin(Ss),Fs=Math.cos(Ss),ns=[Fs,-Es,Es,Fs];xi._matMult(ns),Cs._matMult(ns),Vs._matMult(ns),js._matMult(ns)}const ua=kt.stretch+kt.fixed,fs=yr.stretch+yr.fixed;return{tl:xi,tr:Cs,bl:Vs,br:js,tex:{x:_.paddedRect.x+1+ua,y:_.paddedRect.y+1+fs,w:Qr.stretch+Qr.fixed-ua,h:kr.stretch+kr.fixed-fs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:No,pixelOffsetBR:cl,minFontScaleX:qe/w/Xt,minFontScaleY:Ht/w/Vt,isSDF:l}};if(d&&(_.stretchX||_.stretchY)){const kt=ZC(H,de,re),yr=ZC(G,Ce,ie);for(let Qr=0;Qr<kt.length-1;Qr++){const kr=kt[Qr],Sr=kt[Qr+1];for(let gn=0;gn<yr.length-1;gn++)m.push(er(kr,yr[gn],Sr,yr[gn+1]))}}else m.push(er({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:L+1}));return m}function $g(c,s,l){let d=0;for(const m of c)d+=Math.max(s,Math.min(l,m[1]))-Math.max(s,Math.min(l,m[0]));return d}function ZC(c,s,l){const d=[{fixed:-1,stretch:0}];for(const[m,_]of c){const w=d[d.length-1];d.push({fixed:m-w.stretch,stretch:w.stretch}),d.push({fixed:m-w.stretch,stretch:w.stretch+(_-m)})}return d.push({fixed:s+1,stretch:l}),d}function qg(c,s,l,d){return c/s*l+d}function Wg(c,s,l,d){return c-s*l/d}Ne("Anchor",Vu);class Zg{constructor(s,l,d,m,_,w,S,L,R,H){var G;if(this.boxStartIndex=s.length,R){let Y=w.top,re=w.bottom;const ie=w.collisionPadding;ie&&(Y-=ie[1],re+=ie[3]);let de=re-Y;de>0&&(de=Math.max(10,de),this.circleDiameter=de)}else{const Y=!((G=w.image)===null||G===void 0)&&G.content&&(w.image.textFitWidth||w.image.textFitHeight)?bC(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};Y.y1=Y.y1*S-L[0],Y.y2=Y.y2*S+L[2],Y.x1=Y.x1*S-L[3],Y.x2=Y.x2*S+L[1];const re=w.collisionPadding;if(re&&(Y.x1-=re[0]*S,Y.y1-=re[1]*S,Y.x2+=re[2]*S,Y.y2+=re[3]*S),H){const ie=new D(Y.x1,Y.y1),de=new D(Y.x2,Y.y1),Ce=new D(Y.x1,Y.y2),Ue=new D(Y.x2,Y.y2),st=H*Math.PI/180;ie._rotate(st),de._rotate(st),Ce._rotate(st),Ue._rotate(st),Y.x1=Math.min(ie.x,de.x,Ce.x,Ue.x),Y.x2=Math.max(ie.x,de.x,Ce.x,Ue.x),Y.y1=Math.min(ie.y,de.y,Ce.y,Ue.y),Y.y2=Math.max(ie.y,de.y,Ce.y,Ue.y)}s.emplaceBack(l.x,l.y,Y.x1,Y.y1,Y.x2,Y.y2,d,m,_)}this.boxEndIndex=s.length}}class NU{constructor(s=[],l=(d,m)=>d<m?-1:d>m?1:0){if(this.data=s,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:l,compare:d}=this,m=l[s];for(;s>0;){const _=s-1>>1,w=l[_];if(d(m,w)>=0)break;l[s]=w,s=_}l[s]=m}_down(s){const{data:l,compare:d}=this,m=this.length>>1,_=l[s];for(;s<m;){let w=1+(s<<1);const S=w+1;if(S<this.length&&d(l[S],l[w])<0&&(w=S),d(l[w],_)>=0)break;l[s]=l[w],s=w}l[s]=_}}function DU(c,s=1,l=!1){const d=nd.fromPoints(c[0]),m=Math.min(d.width(),d.height());let _=m/2;const w=new NU([],OU),{minX:S,minY:L,maxX:R,maxY:H}=d;if(m===0)return new D(S,L);for(let re=S;re<R;re+=m)for(let ie=L;ie<H;ie+=m)w.push(new nf(re+_,ie+_,_,c));let G=function(re){let ie=0,de=0,Ce=0;const Ue=re[0];for(let st=0,Ve=Ue.length,J=Ve-1;st<Ve;J=st++){const xe=Ue[st],qe=Ue[J],bt=xe.x*qe.y-qe.x*xe.y;de+=(xe.x+qe.x)*bt,Ce+=(xe.y+qe.y)*bt,ie+=3*bt}return new nf(de/ie,Ce/ie,0,re)}(c),Y=w.length;for(;w.length;){const re=w.pop();(re.d>G.d||!G.d)&&(G=re,l&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,Y)),re.max-G.d<=s||(_=re.h/2,w.push(new nf(re.p.x-_,re.p.y-_,_,c)),w.push(new nf(re.p.x+_,re.p.y-_,_,c)),w.push(new nf(re.p.x-_,re.p.y+_,_,c)),w.push(new nf(re.p.x+_,re.p.y+_,_,c)),Y+=4)}return l&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${G.d}`)),G.p}function OU(c,s){return s.max-c.max}function nf(c,s,l,d){this.p=new D(c,s),this.h=l,this.d=function(m,_){let w=!1,S=1/0;for(let L=0;L<_.length;L++){const R=_[L];for(let H=0,G=R.length,Y=G-1;H<G;Y=H++){const re=R[H],ie=R[Y];re.y>m.y!=ie.y>m.y&&m.x<(ie.x-re.x)*(m.y-re.y)/(ie.y-re.y)+re.x&&(w=!w),S=Math.min(S,IB(m,re,ie))}}return(w?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var no;h.aD=void 0,(no=h.aD||(h.aD={}))[no.center=1]="center",no[no.left=2]="left",no[no.right=3]="right",no[no.top=4]="top",no[no.bottom=5]="bottom",no[no["top-left"]=6]="top-left",no[no["top-right"]=7]="top-right",no[no["bottom-left"]=8]="bottom-left",no[no["bottom-right"]=9]="bottom-right";const i_=Number.POSITIVE_INFINITY;function XC(c,s){return s[1]!==i_?function(l,d,m){let _=0,w=0;switch(d=Math.abs(d),m=Math.abs(m),l){case"top-right":case"top-left":case"top":w=m-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-m}switch(l){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,w]}(c,s[0],s[1]):function(l,d){let m=0,_=0;d<0&&(d=0);const w=d/Math.SQRT2;switch(l){case"top-right":case"top-left":_=w-7;break;case"bottom-right":case"bottom-left":_=7-w;break;case"bottom":_=7-d;break;case"top":_=d-7}switch(l){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=d;break;case"right":m=-d}return[m,_]}(c,s[0])}function YC(c,s,l){var d;const m=c.layout,_=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(s,{},l);if(_){const S=_.values,L=[];for(let R=0;R<S.length;R+=2){const H=L[R]=S[R],G=S[R+1].map(Y=>Y*Bs);H.startsWith("top")?G[1]-=7:H.startsWith("bottom")&&(G[1]+=7),L[R+1]=G}return new An(L)}const w=m.get("text-variable-anchor");if(w){let S;S=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(s,{},l)*Bs,i_]:m.get("text-offset").evaluate(s,{},l).map(R=>R*Bs);const L=[];for(const R of w)L.push(R,XC(R,S));return new An(L)}return null}function s_(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zU(c,s,l,d,m,_,w,S,L,R,H,G){let Y=_.textMaxSize.evaluate(s,{});Y===void 0&&(Y=w);const re=c.layers[0].layout,ie=re.get("icon-offset").evaluate(s,{},H),de=e5(l.horizontal),Ce=w/24,Ue=c.tilePixelRatio*Ce,st=c.tilePixelRatio*Y/24,Ve=c.tilePixelRatio*S,J=c.tilePixelRatio*re.get("symbol-spacing"),xe=re.get("text-padding")*c.tilePixelRatio,qe=function(Qr,kr,Sr,gn=1){const Fi=Qr.get("icon-padding").evaluate(kr,{},Sr),ds=Fi&&Fi.values;return[ds[0]*gn,ds[1]*gn,ds[2]*gn,ds[3]*gn]}(re,s,H,c.tilePixelRatio),bt=re.get("text-max-angle")/180*Math.PI,Ht=re.get("text-rotation-alignment")!=="viewport"&&re.get("symbol-placement")!=="point",Et=re.get("icon-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",Tt=re.get("symbol-placement"),Xt=J/2,Vt=re.get("icon-text-fit");let er;d&&Vt!=="none"&&(c.allowVerticalPlacement&&l.vertical&&(er=BC(d,l.vertical,Vt,re.get("icon-text-fit-padding"),ie,Ce)),de&&(d=BC(d,de,Vt,re.get("icon-text-fit-padding"),ie,Ce)));const kt=H?G.line.getGranularityForZoomLevel(H.z):1,yr=(Qr,kr)=>{kr.x<0||kr.x>=ne||kr.y<0||kr.y>=ne||function(Sr,gn,Fi,ds,io,Al,ca,Hs,xi,Cs,js,Vs,No,cl,Ss,ua,fs,Es,Fs,ns,oi,fA,sf,pA,VU){const of=Sr.addToLineVertexArray(gn,Fi);let id,af,lf,Af,i5=0,s5=0,o5=0,a5=0,d_=-1,f_=-1;const tu={};let l5=Ro("");if(Sr.allowVerticalPlacement&&ds.vertical){const go=Hs.layout.get("text-rotate").evaluate(oi,{},pA)+90;lf=new Zg(xi,gn,Cs,js,Vs,ds.vertical,No,cl,Ss,go),ca&&(Af=new Zg(xi,gn,Cs,js,Vs,ca,fs,Es,Ss,go))}if(io){const go=Hs.layout.get("icon-rotate").evaluate(oi,{}),ul=Hs.layout.get("icon-text-fit")!=="none",sd=WC(io,go,sf,ul),gA=ca?WC(ca,go,sf,ul):void 0;af=new Zg(xi,gn,Cs,js,Vs,io,fs,Es,!1,go),i5=4*sd.length;const od=Sr.iconSizeData;let lc=null;od.kind==="source"?(lc=[eu*Hs.layout.get("icon-size").evaluate(oi,{})],lc[0]>Hu&&Cr(`${Sr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):od.kind==="composite"&&(lc=[eu*fA.compositeIconSizes[0].evaluate(oi,{},pA),eu*fA.compositeIconSizes[1].evaluate(oi,{},pA)],(lc[0]>Hu||lc[1]>Hu)&&Cr(`${Sr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Sr.addSymbols(Sr.icon,sd,lc,ns,Fs,oi,h.an.none,gn,of.lineStartIndex,of.lineLength,-1,pA),d_=Sr.icon.placedSymbolArray.length-1,gA&&(s5=4*gA.length,Sr.addSymbols(Sr.icon,gA,lc,ns,Fs,oi,h.an.vertical,gn,of.lineStartIndex,of.lineLength,-1,pA),f_=Sr.icon.placedSymbolArray.length-1)}const A5=Object.keys(ds.horizontal);for(const go of A5){const ul=ds.horizontal[go];if(!id){l5=Ro(ul.text);const gA=Hs.layout.get("text-rotate").evaluate(oi,{},pA);id=new Zg(xi,gn,Cs,js,Vs,ul,No,cl,Ss,gA)}const sd=ul.positionedLines.length===1;if(o5+=JC(Sr,gn,ul,Al,Hs,Ss,oi,ua,of,ds.vertical?h.an.horizontal:h.an.horizontalOnly,sd?A5:[go],tu,d_,fA,pA),sd)break}ds.vertical&&(a5+=JC(Sr,gn,ds.vertical,Al,Hs,Ss,oi,ua,of,h.an.vertical,["vertical"],tu,f_,fA,pA));const KU=id?id.boxStartIndex:Sr.collisionBoxArray.length,GU=id?id.boxEndIndex:Sr.collisionBoxArray.length,$U=lf?lf.boxStartIndex:Sr.collisionBoxArray.length,qU=lf?lf.boxEndIndex:Sr.collisionBoxArray.length,WU=af?af.boxStartIndex:Sr.collisionBoxArray.length,ZU=af?af.boxEndIndex:Sr.collisionBoxArray.length,XU=Af?Af.boxStartIndex:Sr.collisionBoxArray.length,YU=Af?Af.boxEndIndex:Sr.collisionBoxArray.length;let mA=-1;const Yg=(go,ul)=>go&&go.circleDiameter?Math.max(go.circleDiameter,ul):ul;mA=Yg(id,mA),mA=Yg(lf,mA),mA=Yg(af,mA),mA=Yg(Af,mA);const c5=mA>-1?1:0;c5&&(mA*=VU/Bs),Sr.glyphOffsetArray.length>=tf.MAX_GLYPHS&&Cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),oi.sortKey!==void 0&&Sr.addToSortKeyRanges(Sr.symbolInstances.length,oi.sortKey);const JU=YC(Hs,oi,pA),[e6,t6]=function(go,ul){const sd=go.length,gA=ul==null?void 0:ul.values;if((gA==null?void 0:gA.length)>0)for(let od=0;od<gA.length;od+=2){const lc=gA[od+1];go.emplaceBack(h.aD[gA[od]],lc[0],lc[1])}return[sd,go.length]}(Sr.textAnchorOffsets,JU);Sr.symbolInstances.emplaceBack(gn.x,gn.y,tu.right>=0?tu.right:-1,tu.center>=0?tu.center:-1,tu.left>=0?tu.left:-1,tu.vertical||-1,d_,f_,l5,KU,GU,$U,qU,WU,ZU,XU,YU,Cs,o5,a5,i5,s5,c5,0,No,mA,e6,t6)}(c,kr,Qr,l,d,m,er,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,Ue,[xe,xe,xe,xe],Ht,L,Ve,qe,Et,ie,s,_,R,H,w)};if(Tt==="line")for(const Qr of jC(s.geometry,0,0,ne,ne)){const kr=rd(Qr,kt),Sr=RU(kr,J,bt,l.vertical||de,d,24,st,c.overscaling,ne);for(const gn of Sr)de&&HU(c,de.text,Xt,gn)||yr(kr,gn)}else if(Tt==="line-center"){for(const Qr of s.geometry)if(Qr.length>1){const kr=rd(Qr,kt),Sr=QU(kr,bt,l.vertical||de,d,24,st);Sr&&yr(kr,Sr)}}else if(s.type==="Polygon")for(const Qr of Il(s.geometry,0)){const kr=DU(Qr,16);yr(rd(Qr[0],kt,!0),new Vu(kr.x,kr.y,0))}else if(s.type==="LineString")for(const Qr of s.geometry){const kr=rd(Qr,kt);yr(kr,new Vu(kr[0].x,kr[0].y,0))}else if(s.type==="Point")for(const Qr of s.geometry)for(const kr of Qr)yr([kr],new Vu(kr.x,kr.y,0))}function JC(c,s,l,d,m,_,w,S,L,R,H,G,Y,re,ie){const de=function(st,Ve,J,xe,qe,bt,Ht,Et){const Tt=xe.layout.get("text-rotate").evaluate(bt,{})*Math.PI/180,Xt=[];for(const Vt of Ve.positionedLines)for(const er of Vt.positionedGlyphs){if(!er.rect)continue;const kt=er.rect||{};let yr=4,Qr=!0,kr=1,Sr=0;const gn=(qe||Et)&&er.vertical,Fi=er.metrics.advance*er.scale/2;if(Et&&Ve.verticalizable&&(Sr=Vt.lineOffset/2-(er.imageName?-(Bs-er.metrics.width*er.scale)/2:(er.scale-1)*Bs)),er.imageName){const Es=Ht[er.imageName];Qr=Es.sdf,kr=Es.pixelRatio,yr=1/kr}const ds=qe?[er.x+Fi,er.y]:[0,0];let io=qe?[0,0]:[er.x+Fi+J[0],er.y+J[1]-Sr],Al=[0,0];gn&&(Al=io,io=[0,0]);const ca=er.metrics.isDoubleResolution?2:1,Hs=(er.metrics.left-yr)*er.scale-Fi+io[0],xi=(-er.metrics.top-yr)*er.scale+io[1],Cs=Hs+kt.w/ca*er.scale/kr,js=xi+kt.h/ca*er.scale/kr,Vs=new D(Hs,xi),No=new D(Cs,xi),cl=new D(Hs,js),Ss=new D(Cs,js);if(gn){const Es=new D(-Fi,Fi- -17),Fs=-Math.PI/2,ns=12-Fi,oi=new D(22-ns,-(er.imageName?ns:0)),fA=new D(...Al);Vs._rotateAround(Fs,Es)._add(oi)._add(fA),No._rotateAround(Fs,Es)._add(oi)._add(fA),cl._rotateAround(Fs,Es)._add(oi)._add(fA),Ss._rotateAround(Fs,Es)._add(oi)._add(fA)}if(Tt){const Es=Math.sin(Tt),Fs=Math.cos(Tt),ns=[Fs,-Es,Es,Fs];Vs._matMult(ns),No._matMult(ns),cl._matMult(ns),Ss._matMult(ns)}const ua=new D(0,0),fs=new D(0,0);Xt.push({tl:Vs,tr:No,bl:cl,br:Ss,tex:kt,writingMode:Ve.writingMode,glyphOffset:ds,sectionIndex:er.sectionIndex,isSDF:Qr,pixelOffsetTL:ua,pixelOffsetBR:fs,minFontScaleX:0,minFontScaleY:0})}return Xt}(0,l,S,m,_,w,d,c.allowVerticalPlacement),Ce=c.textSizeData;let Ue=null;Ce.kind==="source"?(Ue=[eu*m.layout.get("text-size").evaluate(w,{})],Ue[0]>Hu&&Cr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ce.kind==="composite"&&(Ue=[eu*re.compositeTextSizes[0].evaluate(w,{},ie),eu*re.compositeTextSizes[1].evaluate(w,{},ie)],(Ue[0]>Hu||Ue[1]>Hu)&&Cr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,de,Ue,S,_,w,R,s,L.lineStartIndex,L.lineLength,Y,ie);for(const st of H)G[st]=c.text.placedSymbolArray.length-1;return 4*de.length}function e5(c){for(const s in c)return c[s];return null}function HU(c,s,l,d){const m=c.compareText;if(s in m){const _=m[s];for(let w=_.length-1;w>=0;w--)if(d.dist(_[w])<l)return!0}else m[s]=[];return m[s].push(d),!1}const t5=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class o_{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,d]=new Uint8Array(s,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const _=t5[15&d];if(!_)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(s,2,1),[S]=new Uint32Array(s,4,1);return new o_(S,w,_,s)}constructor(s,l=64,d=Float64Array,m){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=d,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const _=t5.indexOf(this.ArrayType),w=2*s*this.ArrayType.BYTES_PER_ELEMENT,S=s*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+S+L,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+w+S+L),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+S+L,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=s)}add(s,l){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=s,this.coords[this._pos++]=l,d}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return a_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,l,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:w,nodeSize:S}=this,L=[0,_.length-1,0],R=[];for(;L.length;){const H=L.pop()||0,G=L.pop()||0,Y=L.pop()||0;if(G-Y<=S){for(let Ce=Y;Ce<=G;Ce++){const Ue=w[2*Ce],st=w[2*Ce+1];Ue>=s&&Ue<=d&&st>=l&&st<=m&&R.push(_[Ce])}continue}const re=Y+G>>1,ie=w[2*re],de=w[2*re+1];ie>=s&&ie<=d&&de>=l&&de<=m&&R.push(_[re]),(H===0?s<=ie:l<=de)&&(L.push(Y),L.push(re-1),L.push(1-H)),(H===0?d>=ie:m>=de)&&(L.push(re+1),L.push(G),L.push(1-H))}return R}within(s,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:w}=this,S=[0,m.length-1,0],L=[],R=d*d;for(;S.length;){const H=S.pop()||0,G=S.pop()||0,Y=S.pop()||0;if(G-Y<=w){for(let Ce=Y;Ce<=G;Ce++)n5(_[2*Ce],_[2*Ce+1],s,l)<=R&&L.push(m[Ce]);continue}const re=Y+G>>1,ie=_[2*re],de=_[2*re+1];n5(ie,de,s,l)<=R&&L.push(m[re]),(H===0?s-d<=ie:l-d<=de)&&(S.push(Y),S.push(re-1),S.push(1-H)),(H===0?s+d>=ie:l+d>=de)&&(S.push(re+1),S.push(G),S.push(1-H))}return L}}function a_(c,s,l,d,m,_){if(m-d<=l)return;const w=d+m>>1;r5(c,s,w,d,m,_),a_(c,s,l,d,w-1,1-_),a_(c,s,l,w+1,m,1-_)}function r5(c,s,l,d,m,_){for(;m>d;){if(m-d>600){const R=m-d+1,H=l-d+1,G=Math.log(R),Y=.5*Math.exp(2*G/3),re=.5*Math.sqrt(G*Y*(R-Y)/R)*(H-R/2<0?-1:1);r5(c,s,l,Math.max(d,Math.floor(l-H*Y/R+re)),Math.min(m,Math.floor(l+(R-H)*Y/R+re)),_)}const w=s[2*l+_];let S=d,L=m;for(Yp(c,s,d,l),s[2*m+_]>w&&Yp(c,s,d,m);S<L;){for(Yp(c,s,S,L),S++,L--;s[2*S+_]<w;)S++;for(;s[2*L+_]>w;)L--}s[2*d+_]===w?Yp(c,s,d,L):(L++,Yp(c,s,L,m)),L<=l&&(d=L+1),l<=L&&(m=L-1)}}function Yp(c,s,l,d){l_(c,l,d),l_(s,2*l,2*d),l_(s,2*l+1,2*d+1)}function l_(c,s,l){const d=c[s];c[s]=c[l],c[l]=d}function n5(c,s,l,d){const m=c-l,_=s-d;return m*m+_*_}var A_;h.cw=void 0,(A_=h.cw||(h.cw={})).create="create",A_.load="load",A_.fullLoad="fullLoad";let Xg=null,Jp=[];const c_=1e3/60,u_="loadTime",h_="fullLoadTime",jU={mark(c){performance.mark(c)},frame(c){const s=c;Xg!=null&&Jp.push(s-Xg),Xg=s},clearMetrics(){Xg=null,Jp=[],performance.clearMeasures(u_),performance.clearMeasures(h_);for(const c in h.cw)performance.clearMarks(h.cw[c])},getPerformanceMetrics(){performance.measure(u_,h.cw.create,h.cw.load),performance.measure(h_,h.cw.create,h.cw.fullLoad);const c=performance.getEntriesByName(u_)[0].duration,s=performance.getEntriesByName(h_)[0].duration,l=Jp.length,d=1/(Jp.reduce((_,w)=>_+w,0)/l/1e3),m=Jp.filter(_=>_>c_).reduce((_,w)=>_+(w-c_)/c_,0);return{loadTime:c,fullLoadTime:s,fps:d,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};h.$=ne,h.A=pe,h.B=function([c,s,l]){return s+=90,s*=Math.PI/180,l*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(l),y:c*Math.sin(s)*Math.sin(l),z:c*Math.cos(l)}},h.C=es,h.D=sr,h.E=mt,h.F=Er,h.G=ae,h.H=function(c){if(ar==null){const s=c.navigator?c.navigator.userAgent:null;ar=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return ar},h.I=$1,h.J=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new MU(()=>this.process()),this.subscription=Lr(this.target,"message",l=>this.receive(l),!1),this.globalScope=Kt(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((l,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=s?Lr(s.signal,"abort",()=>{_==null||_.unsubscribe(),delete this.resolveRejects[m];const L={id:m,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(L)},kU):null;this.resolveRejects[m]={resolve:L=>{_==null||_.unsubscribe(),l(L)},reject:L=>{_==null||_.unsubscribe(),d(L)}};const w=[],S=Object.assign(Object.assign({},c),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Ot(c.data,w)});this.target.postMessage(S,{transfer:w})})}receive(c){const s=c.data,l=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[l];const d=this.abortControllers[l];return delete this.abortControllers[l],void(d&&d.abort())}if(Kt(self)||s.mustQueue)return this.tasks[l]=s,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,s)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return o(this,void 0,void 0,function*(){if(s.type==="<response>"){const m=this.resolveRejects[c];return delete this.resolveRejects[c],m?void(s.error?m.reject(Pt(s.error)):m.resolve(Pt(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Pt(s.data),d=new AbortController;this.abortControllers[c]=d;try{const m=yield this.messageHandlers[s.type](s.sourceMapId,l,d);this.completeTask(c,null,m)}catch(m){this.completeTask(c,m)}})}completeTask(c,s,l){const d=[];delete this.abortControllers[c];const m={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Ot(s):null,data:Ot(l,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.K=_e,h.L=function(){var c=new pe(16);return pe!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},h.M=function(c,s,l){var d,m,_,w,S,L,R,H,G,Y,re,ie,de=l[0],Ce=l[1],Ue=l[2];return s===c?(c[12]=s[0]*de+s[4]*Ce+s[8]*Ue+s[12],c[13]=s[1]*de+s[5]*Ce+s[9]*Ue+s[13],c[14]=s[2]*de+s[6]*Ce+s[10]*Ue+s[14],c[15]=s[3]*de+s[7]*Ce+s[11]*Ue+s[15]):(m=s[1],_=s[2],w=s[3],S=s[4],L=s[5],R=s[6],H=s[7],G=s[8],Y=s[9],re=s[10],ie=s[11],c[0]=d=s[0],c[1]=m,c[2]=_,c[3]=w,c[4]=S,c[5]=L,c[6]=R,c[7]=H,c[8]=G,c[9]=Y,c[10]=re,c[11]=ie,c[12]=d*de+S*Ce+G*Ue+s[12],c[13]=m*de+L*Ce+Y*Ue+s[13],c[14]=_*de+R*Ce+re*Ue+s[14],c[15]=w*de+H*Ce+ie*Ue+s[15]),c},h.N=function(c,s,l){var d=l[0],m=l[1],_=l[2];return c[0]=s[0]*d,c[1]=s[1]*d,c[2]=s[2]*d,c[3]=s[3]*d,c[4]=s[4]*m,c[5]=s[5]*m,c[6]=s[6]*m,c[7]=s[7]*m,c[8]=s[8]*_,c[9]=s[9]*_,c[10]=s[10]*_,c[11]=s[11]*_,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},h.O=function(c,s,l){var d=s[0],m=s[1],_=s[2],w=s[3],S=s[4],L=s[5],R=s[6],H=s[7],G=s[8],Y=s[9],re=s[10],ie=s[11],de=s[12],Ce=s[13],Ue=s[14],st=s[15],Ve=l[0],J=l[1],xe=l[2],qe=l[3];return c[0]=Ve*d+J*S+xe*G+qe*de,c[1]=Ve*m+J*L+xe*Y+qe*Ce,c[2]=Ve*_+J*R+xe*re+qe*Ue,c[3]=Ve*w+J*H+xe*ie+qe*st,c[4]=(Ve=l[4])*d+(J=l[5])*S+(xe=l[6])*G+(qe=l[7])*de,c[5]=Ve*m+J*L+xe*Y+qe*Ce,c[6]=Ve*_+J*R+xe*re+qe*Ue,c[7]=Ve*w+J*H+xe*ie+qe*st,c[8]=(Ve=l[8])*d+(J=l[9])*S+(xe=l[10])*G+(qe=l[11])*de,c[9]=Ve*m+J*L+xe*Y+qe*Ce,c[10]=Ve*_+J*R+xe*re+qe*Ue,c[11]=Ve*w+J*H+xe*ie+qe*st,c[12]=(Ve=l[12])*d+(J=l[13])*S+(xe=l[14])*G+(qe=l[15])*de,c[13]=Ve*m+J*L+xe*Y+qe*Ce,c[14]=Ve*_+J*R+xe*re+qe*Ue,c[15]=Ve*w+J*H+xe*ie+qe*st,c},h.P=D,h.Q=function(c,s){const l={};for(let d=0;d<s.length;d++){const m=s[d];m in c&&(l[m]=c[m])}return l},h.R=Aa,h.S=ju,h.T=L1,h.U=kC,h.V=MC,h.W=K,h.X=ee,h.Y=br,h.Z=ll,h._=o,h.a=le,h.a$=function(c,s,l){return c[0]=s[0]*l,c[1]=s[1]*l,c[2]=s[2]*l,c[3]=s[3]*l,c},h.a0=Xp,h.a1=nd,h.a2=25,h.a3=n_,h.a4=c=>{const s=window.document.createElement("video");return s.muted=!0,new Promise(l=>{s.onloadstart=()=>{l(s)};for(const d of c){const m=window.document.createElement("source");yt(d)||(s.crossOrigin="Anonymous"),m.src=d,s.appendChild(m)}})},h.a5=Yt,h.a6=function(){return $t++},h.a7=Ee,h.a8=tf,h.a9=Po,h.aA=Bs,h.aB=Be,h.aC=function(c,s,l,d,m=!1){if(!l[0]&&!l[1])return[0,0];const _=m?d==="map"?-c.bearingInRadians:0:d==="viewport"?c.bearingInRadians:0;if(_){const w=Math.sin(_),S=Math.cos(_);l=[l[0]*S-l[1]*w,l[0]*w+l[1]*S]}return[m?l[0]:Be(s,l[0],c.zoom),m?l[1]:Be(s,l[1],c.zoom)]},h.aE=Z1,h.aF=s_,h.aG=W1,h.aH=o_,h.aI=ii,h.aJ=Og,h.aK=gt,h.aL=fn,h.aM=xn,h.aN=Qt,h.aO=un,h.aP=QC,h.aQ=Ie,h.aR=he,h.aS=function(c){var s=new pe(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},h.aT=function(c,s,l){return c[0]=s[0]-l[0],c[1]=s[1]-l[1],c[2]=s[2]-l[2],c},h.aU=function(c,s){var l=s[0],d=s[1],m=s[2],_=l*l+d*d+m*m;return _>0&&(_=1/Math.sqrt(_)),c[0]=s[0]*_,c[1]=s[1]*_,c[2]=s[2]*_,c},h.aV=be,h.aW=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},h.aX=function(c,s,l){return c[0]=s[0]*l[0],c[1]=s[1]*l[1],c[2]=s[2]*l[2],c[3]=s[3]*l[3],c},h.aY=Ke,h.aZ=function(c,s,l){const d=s[0]*l[0]+s[1]*l[1]+s[2]*l[2];return d===0?null:(-(c[0]*l[0]+c[1]*l[1]+c[2]*l[2])-l[3])/d},h.a_=Xe,h.aa=ed,h.ab=OC,h.ac=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,m,_)=>{const w=m||_;return s[d]=!w||w.toLowerCase(),""}),s["max-age"]){const l=parseInt(s["max-age"],10);isNaN(l)?delete s["max-age"]:s["max-age"]=l}return s},h.ad=Hr,h.ae=function(c){return Math.pow(2,c)},h.af=ue,h.ag=dt,h.ah=85.051129,h.ai=UC,h.aj=function(c){return Math.log(c)/Math.LN2},h.ak=function(c){var s=c[0],l=c[1];return s*s+l*l},h.al=function(c,s){const l=[];for(const d in c)d in s||l.push(d);return l},h.am=function(c,s){let l=0,d=0;if(c.kind==="constant")d=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:w}=c,S=m?dt(Ji.interpolationFactor(m,s,_,w),0,1):0;c.kind==="camera"?d=es.number(c.minSize,c.maxSize,S):l=S}return{uSizeT:l,uSize:d}},h.ao=function(c,{uSize:s,uSizeT:l},{lowerSize:d,upperSize:m}){return c.kind==="source"?d/eu:c.kind==="composite"?es.number(d/eu,m/eu,l):s},h.ap=function(c,s){var l=s[0],d=s[1],m=s[2],_=s[3],w=s[4],S=s[5],L=s[6],R=s[7],H=s[8],G=s[9],Y=s[10],re=s[11],ie=s[12],de=s[13],Ce=s[14],Ue=s[15],st=l*S-d*w,Ve=l*L-m*w,J=l*R-_*w,xe=d*L-m*S,qe=d*R-_*S,bt=m*R-_*L,Ht=H*de-G*ie,Et=H*Ce-Y*ie,Tt=H*Ue-re*ie,Xt=G*Ce-Y*de,Vt=G*Ue-re*de,er=Y*Ue-re*Ce,kt=st*er-Ve*Vt+J*Xt+xe*Tt-qe*Et+bt*Ht;return kt?(c[0]=(S*er-L*Vt+R*Xt)*(kt=1/kt),c[1]=(m*Vt-d*er-_*Xt)*kt,c[2]=(de*bt-Ce*qe+Ue*xe)*kt,c[3]=(Y*qe-G*bt-re*xe)*kt,c[4]=(L*Tt-w*er-R*Et)*kt,c[5]=(l*er-m*Tt+_*Et)*kt,c[6]=(Ce*J-ie*bt-Ue*Ve)*kt,c[7]=(H*bt-Y*J+re*Ve)*kt,c[8]=(w*Vt-S*Tt+R*Ht)*kt,c[9]=(d*Tt-l*Vt-_*Ht)*kt,c[10]=(ie*qe-de*J+Ue*st)*kt,c[11]=(G*J-H*qe-re*st)*kt,c[12]=(S*Et-w*Xt-L*Ht)*kt,c[13]=(l*Xt-d*Et+m*Ht)*kt,c[14]=(de*Ve-ie*xe-Ce*st)*kt,c[15]=(H*xe-G*Ve+Y*st)*kt,c):null},h.aq=it,h.ar=function(c){return Math.hypot(c[0],c[1])},h.as=function(c){return c[0]=0,c[1]=0,c},h.at=function(c,s,l){return c[0]=s[0]*l,c[1]=s[1]*l,c},h.au=X1,h.av=lt,h.aw=function(c,s,l,d){const m=s.y-c.y,_=s.x-c.x,w=d.y-l.y,S=d.x-l.x,L=w*_-S*m;if(L===0)return null;const R=(S*(c.y-l.y)-w*(c.x-l.x))/L;return new D(c.x+R*_,c.y+R*m)},h.ax=jC,h.ay=EB,h.az=function(c){let s=1/0,l=1/0,d=-1/0,m=-1/0;for(const _ of c)s=Math.min(s,_.x),l=Math.min(l,_.y),d=Math.max(d,_.x),m=Math.max(m,_.y);return[s,l,d,m]},h.b=lr,h.b$=cU,h.b0=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]},h.b1=NC,h.b2=rf,h.b3=function(c,s,l,d,m){var _,w=1/Math.tan(s/2);return c[0]=w/l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,m!=null&&m!==1/0?(c[10]=(m+d)*(_=1/(d-m)),c[14]=2*m*d*_):(c[10]=-1,c[14]=-2*d),c},h.b4=function(c){var s=new pe(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},h.b5=function(c,s,l){var d=Math.sin(l),m=Math.cos(l),_=s[0],w=s[1],S=s[2],L=s[3],R=s[4],H=s[5],G=s[6],Y=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=_*m+R*d,c[1]=w*m+H*d,c[2]=S*m+G*d,c[3]=L*m+Y*d,c[4]=R*m-_*d,c[5]=H*m-w*d,c[6]=G*m-S*d,c[7]=Y*m-L*d,c},h.b6=function(c,s,l){var d=Math.sin(l),m=Math.cos(l),_=s[4],w=s[5],S=s[6],L=s[7],R=s[8],H=s[9],G=s[10],Y=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=_*m+R*d,c[5]=w*m+H*d,c[6]=S*m+G*d,c[7]=L*m+Y*d,c[8]=R*m-_*d,c[9]=H*m-w*d,c[10]=G*m-S*d,c[11]=Y*m-L*d,c},h.b7=function(){const c=new Float32Array(16);return ue(c),c},h.b8=function(){const c=new Float64Array(16);return ue(c),c},h.b9=function(){return new Float64Array(16)},h.bA=function(c){return c[0]=0,c[1]=0,c[2]=0,c},h.bB=function(c,s,l,d){const m=Math.sqrt(c*c+s*s),_=Math.sqrt(l*l+d*d);c/=m,s/=m,l/=_,d/=_;const w=Math.acos(c*l+s*d);return-s*l+c*d>0?w:-w},h.bC=function(c,s){const l=Pe(c,2*Math.PI),d=Pe(s,2*Math.PI);return Math.min(Math.abs(l-d),Math.abs(l-d+2*Math.PI),Math.abs(l-d-2*Math.PI))},h.bD=function(){const c={},s=Me.$version;for(const l in Me.$root){const d=Me.$root[l];if(d.required){let m=null;m=l==="version"?s:d.type==="array"?[]:{},m!=null&&(c[l]=m)}}return c},h.bE=ut,h.bF=et,h.bG=function c(s,l){if(Array.isArray(s)){if(!Array.isArray(l)||s.length!==l.length)return!1;for(let d=0;d<s.length;d++)if(!c(s[d],l[d]))return!1;return!0}if(typeof s=="object"&&s!==null&&l!==null){if(typeof l!="object"||Object.keys(s).length!==Object.keys(l).length)return!1;for(const d in s)if(!c(s[d],l[d]))return!1;return!0}return s===l},h.bH=function(c){c=c.slice();const s=Object.create(null);for(let l=0;l<c.length;l++)s[c[l].id]=c[l];for(let l=0;l<c.length;l++)"ref"in c[l]&&(c[l]=nr(c[l],s[c[l].ref]));return c},h.bI=function(c){if(c.type==="custom")return new LU(c);switch(c.type){case"background":return new IU(c);case"circle":return new bk(c);case"color-relief":return new Ik(c);case"fill":return new Vk(c);case"fill-extrusion":return new Yk(c);case"heatmap":return new Ck(c);case"hillshade":return new Ek(c);case"line":return new oU(c);case"raster":return new PU(c);case"symbol":return new Gg(c)}},h.bJ=It,h.bK=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let l=[];try{if(!tr(c.version,s.version))return[{command:"setStyle",args:[s]}];tr(c.center,s.center)||l.push({command:"setCenter",args:[s.center]}),tr(c.state,s.state)||l.push({command:"setGlobalState",args:[s.state]}),tr(c.centerAltitude,s.centerAltitude)||l.push({command:"setCenterAltitude",args:[s.centerAltitude]}),tr(c.zoom,s.zoom)||l.push({command:"setZoom",args:[s.zoom]}),tr(c.bearing,s.bearing)||l.push({command:"setBearing",args:[s.bearing]}),tr(c.pitch,s.pitch)||l.push({command:"setPitch",args:[s.pitch]}),tr(c.roll,s.roll)||l.push({command:"setRoll",args:[s.roll]}),tr(c.sprite,s.sprite)||l.push({command:"setSprite",args:[s.sprite]}),tr(c.glyphs,s.glyphs)||l.push({command:"setGlyphs",args:[s.glyphs]}),tr(c.transition,s.transition)||l.push({command:"setTransition",args:[s.transition]}),tr(c.light,s.light)||l.push({command:"setLight",args:[s.light]}),tr(c.terrain,s.terrain)||l.push({command:"setTerrain",args:[s.terrain]}),tr(c.sky,s.sky)||l.push({command:"setSky",args:[s.sky]}),tr(c.projection,s.projection)||l.push({command:"setProjection",args:[s.projection]});const d={},m=[];(function(w,S,L,R){let H;for(H in S=S||{},w=w||{})Object.prototype.hasOwnProperty.call(w,H)&&(Object.prototype.hasOwnProperty.call(S,H)||Jr(H,L,R));for(H in S)Object.prototype.hasOwnProperty.call(S,H)&&(Object.prototype.hasOwnProperty.call(w,H)?tr(w[H],S[H])||(w[H].type==="geojson"&&S[H].type==="geojson"&&Rr(w,S,H)?Ar(L,{command:"setGeoJSONSourceData",args:[H,S[H].data]}):jr(H,S,L,R)):qt(H,S,L))})(c.sources,s.sources,m,d);const _=[];c.layers&&c.layers.forEach(w=>{"source"in w&&d[w.source]?l.push({command:"removeLayer",args:[w.id]}):_.push(w)}),l=l.concat(m),function(w,S,L){S=S||[];const R=(w=w||[]).map(Ur),H=S.map(Ur),G=w.reduce(Pn,{}),Y=S.reduce(Pn,{}),re=R.slice(),ie=Object.create(null);let de,Ce,Ue,st,Ve;for(let J=0,xe=0;J<R.length;J++)de=R[J],Object.prototype.hasOwnProperty.call(Y,de)?xe++:(Ar(L,{command:"removeLayer",args:[de]}),re.splice(re.indexOf(de,xe),1));for(let J=0,xe=0;J<H.length;J++)de=H[H.length-1-J],re[re.length-1-J]!==de&&(Object.prototype.hasOwnProperty.call(G,de)?(Ar(L,{command:"removeLayer",args:[de]}),re.splice(re.lastIndexOf(de,re.length-xe),1)):xe++,st=re[re.length-J],Ar(L,{command:"addLayer",args:[Y[de],st]}),re.splice(re.length-J,0,de),ie[de]=!0);for(let J=0;J<H.length;J++)if(de=H[J],Ce=G[de],Ue=Y[de],!ie[de]&&!tr(Ce,Ue))if(tr(Ce.source,Ue.source)&&tr(Ce["source-layer"],Ue["source-layer"])&&tr(Ce.type,Ue.type)){for(Ve in _r(Ce.layout,Ue.layout,L,de,null,"setLayoutProperty"),_r(Ce.paint,Ue.paint,L,de,null,"setPaintProperty"),tr(Ce.filter,Ue.filter)||Ar(L,{command:"setFilter",args:[de,Ue.filter]}),tr(Ce.minzoom,Ue.minzoom)&&tr(Ce.maxzoom,Ue.maxzoom)||Ar(L,{command:"setLayerZoomRange",args:[de,Ue.minzoom,Ue.maxzoom]}),Ce)Object.prototype.hasOwnProperty.call(Ce,Ve)&&Ve!=="layout"&&Ve!=="paint"&&Ve!=="filter"&&Ve!=="metadata"&&Ve!=="minzoom"&&Ve!=="maxzoom"&&(Ve.indexOf("paint.")===0?_r(Ce[Ve],Ue[Ve],L,de,Ve.slice(6),"setPaintProperty"):tr(Ce[Ve],Ue[Ve])||Ar(L,{command:"setLayerProperty",args:[de,Ve,Ue[Ve]]}));for(Ve in Ue)Object.prototype.hasOwnProperty.call(Ue,Ve)&&!Object.prototype.hasOwnProperty.call(Ce,Ve)&&Ve!=="layout"&&Ve!=="paint"&&Ve!=="filter"&&Ve!=="metadata"&&Ve!=="minzoom"&&Ve!=="maxzoom"&&(Ve.indexOf("paint.")===0?_r(Ce[Ve],Ue[Ve],L,de,Ve.slice(6),"setPaintProperty"):tr(Ce[Ve],Ue[Ve])||Ar(L,{command:"setLayerProperty",args:[de,Ve,Ue[Ve]]}))}else Ar(L,{command:"removeLayer",args:[de]}),st=re[re.lastIndexOf(de)+1],Ar(L,{command:"addLayer",args:[Ue,st]})}(_,s.layers,l)}catch(d){console.warn("Unable to compute style diff:",d),l=[{command:"setStyle",args:[s]}]}return l},h.bL=function(c){const s=[],l=c.id;return l===void 0&&s.push({message:`layers.${l}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${l}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),s},h.bM=jt,h.bN=vr,h.bO=class extends si{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},h.bP=Ug,h.bQ=class extends si{constructor(c,s){super(c,s),this.current=C1}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},h.bR=hs,h.bS=class extends si{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},h.bT=class extends si{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},h.bU=ye,h.bV=function(c,s){var l=Math.sin(s),d=Math.cos(s);return c[0]=d,c[1]=l,c[2]=0,c[3]=-l,c[4]=d,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},h.bW=function(c,s,l){var d=s[0],m=s[1],_=s[2];return c[0]=d*l[0]+m*l[3]+_*l[6],c[1]=d*l[1]+m*l[4]+_*l[7],c[2]=d*l[2]+m*l[5]+_*l[8],c},h.bX=function(c,s,l,d,m,_,w){var S=1/(s-l),L=1/(d-m),R=1/(_-w);return c[0]=-2*S,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*L,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*R,c[11]=0,c[12]=(s+l)*S,c[13]=(m+d)*L,c[14]=(w+_)*R,c[15]=1,c},h.bY=class extends si{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;const s=new Float32Array(4*c.length);for(let l=0;l<c.length;l++)s[4*l]=c[l].r,s[4*l+1]=c[l].g,s[4*l+2]=c[l].b,s[4*l+3]=c[l].a;this.gl.uniform4fv(this.location,s)}}},h.bZ=class extends si{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;const s=new Float32Array(c);this.gl.uniform1fv(this.location,s)}}},h.b_=class extends f{},h.ba=function(c,s,l){const d=new Float64Array(4);return ze(d,c,s-90,l),d},h.bb=function(c,s,l,d){var m,_,w,S,L,R=s[0],H=s[1],G=s[2],Y=s[3],re=l[0],ie=l[1],de=l[2],Ce=l[3];return(_=R*re+H*ie+G*de+Y*Ce)<0&&(_=-_,re=-re,ie=-ie,de=-de,Ce=-Ce),1-_>se?(m=Math.acos(_),w=Math.sin(m),S=Math.sin((1-d)*m)/w,L=Math.sin(d*m)/w):(S=1-d,L=d),c[0]=S*R+L*re,c[1]=S*H+L*ie,c[2]=S*G+L*de,c[3]=S*Y+L*Ce,c},h.bc=function(c){const s=new Float64Array(9);var l,d,m,_,w,S,L,R,H,G,Y,re,ie,de,Ce,Ue,st,Ve;G=(m=(d=c)[0])*(L=m+m),Y=(_=d[1])*L,ie=(w=d[2])*L,de=w*(R=_+_),Ue=(S=d[3])*L,st=S*R,Ve=S*(H=w+w),(l=s)[0]=1-(re=_*R)-(Ce=w*H),l[3]=Y-Ve,l[6]=ie+st,l[1]=Y+Ve,l[4]=1-G-Ce,l[7]=de-Ue,l[2]=ie-st,l[5]=de+Ue,l[8]=1-G-re;const J=un(-Math.asin(dt(s[2],-1,1)));let xe,qe;return Math.hypot(s[5],s[8])<.001?(xe=0,qe=-un(Math.atan2(s[3],s[4]))):(xe=un(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),qe=un(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:xe,pitch:J+90,bearing:qe}},h.bd=function(c,s){return c.roll==s.roll&&c.pitch==s.pitch&&c.bearing==s.bearing},h.be=ln,h.bf=mo,h.bg=Jd,h.bh=Vp,h.bi=Yd,h.bj=$e,h.bk=nt,h.bl=Gr,h.bm=function(c,s,l,d,m){return $e(d,m,dt((c-s)/(l-s),0,1))},h.bn=Pe,h.bo=function(){return new Float64Array(3)},h.bp=function(c,s,l,d){return c[0]=s[0]+l[0]*d,c[1]=s[1]+l[1]*d,c[2]=s[2]+l[2]*d,c},h.bq=ze,h.br=function(c,s,l){var d=l[0],m=l[1],_=l[2],w=s[0],S=s[1],L=s[2],R=m*L-_*S,H=_*w-d*L,G=d*S-m*w,Y=m*G-_*H,re=_*R-d*G,ie=d*H-m*R,de=2*l[3];return H*=de,G*=de,re*=2,ie*=2,c[0]=w+(R*=de)+(Y*=2),c[1]=S+H+re,c[2]=L+G+ie,c},h.bs=function(c,s,l){const d=(m=[c[0],c[1],c[2],s[0],s[1],s[2],l[0],l[1],l[2]])[0]*((H=m[8])*(w=m[4])-(S=m[5])*(R=m[7]))+m[1]*(-H*(_=m[3])+S*(L=m[6]))+m[2]*(R*_-w*L);var m,_,w,S,L,R,H;if(d===0)return null;const G=be([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),Y=be([],[l[0],l[1],l[2]],[c[0],c[1],c[2]]),re=be([],[c[0],c[1],c[2]],[s[0],s[1],s[2]]),ie=Ie([],G,-c[3]);return he(ie,ie,Ie([],Y,-s[3])),he(ie,ie,Ie([],re,-l[3])),Ie(ie,ie,1/d),ie},h.bt=t_,h.bu=function(){return new Float64Array(4)},h.bv=function(c,s,l,d){var m=[],_=[];return m[0]=s[0]-l[0],m[1]=s[1]-l[1],m[2]=s[2]-l[2],_[0]=m[0]*Math.cos(d)-m[1]*Math.sin(d),_[1]=m[0]*Math.sin(d)+m[1]*Math.cos(d),_[2]=m[2],c[0]=_[0]+l[0],c[1]=_[1]+l[1],c[2]=_[2]+l[2],c},h.bw=function(c,s,l,d){var m=[],_=[];return m[0]=s[0]-l[0],m[1]=s[1]-l[1],m[2]=s[2]-l[2],_[0]=m[0],_[1]=m[1]*Math.cos(d)-m[2]*Math.sin(d),_[2]=m[1]*Math.sin(d)+m[2]*Math.cos(d),c[0]=_[0]+l[0],c[1]=_[1]+l[1],c[2]=_[2]+l[2],c},h.bx=function(c,s,l,d){var m=[],_=[];return m[0]=s[0]-l[0],m[1]=s[1]-l[1],m[2]=s[2]-l[2],_[0]=m[2]*Math.sin(d)+m[0]*Math.cos(d),_[1]=m[1],_[2]=m[2]*Math.cos(d)-m[0]*Math.sin(d),c[0]=_[0]+l[0],c[1]=_[1]+l[1],c[2]=_[2]+l[2],c},h.by=function(c,s,l){var d=Math.sin(l),m=Math.cos(l),_=s[0],w=s[1],S=s[2],L=s[3],R=s[8],H=s[9],G=s[10],Y=s[11];return s!==c&&(c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=_*m-R*d,c[1]=w*m-H*d,c[2]=S*m-G*d,c[3]=L*m-Y*d,c[8]=_*d+R*m,c[9]=w*d+H*m,c[10]=S*d+G*m,c[11]=L*d+Y*m,c},h.bz=function(c,s){const l=Pe(c,360),d=Pe(s,360),m=d-l,_=d>l?m-360:m+360;return Math.abs(m)<Math.abs(_)?m:_},h.c=At,h.c0=class extends v{},h.c1=P1,h.c2=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},h.c3=RB,h.c4=function(c,s,l){var d=s[0],m=s[1],_=s[2],w=l[3]*d+l[7]*m+l[11]*_+l[15];return c[0]=(l[0]*d+l[4]*m+l[8]*_+l[12])/(w=w||1),c[1]=(l[1]*d+l[5]*m+l[9]*_+l[13])/w,c[2]=(l[2]*d+l[6]*m+l[10]*_+l[14])/w,c},h.c5=class extends nc{},h.c6=class extends ${},h.c7=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},h.c8=function(c,s){var l=c[0],d=c[1],m=c[2],_=c[3],w=c[4],S=c[5],L=c[6],R=c[7],H=c[8],G=c[9],Y=c[10],re=c[11],ie=c[12],de=c[13],Ce=c[14],Ue=c[15],st=s[0],Ve=s[1],J=s[2],xe=s[3],qe=s[4],bt=s[5],Ht=s[6],Et=s[7],Tt=s[8],Xt=s[9],Vt=s[10],er=s[11],kt=s[12],yr=s[13],Qr=s[14],kr=s[15];return Math.abs(l-st)<=se*Math.max(1,Math.abs(l),Math.abs(st))&&Math.abs(d-Ve)<=se*Math.max(1,Math.abs(d),Math.abs(Ve))&&Math.abs(m-J)<=se*Math.max(1,Math.abs(m),Math.abs(J))&&Math.abs(_-xe)<=se*Math.max(1,Math.abs(_),Math.abs(xe))&&Math.abs(w-qe)<=se*Math.max(1,Math.abs(w),Math.abs(qe))&&Math.abs(S-bt)<=se*Math.max(1,Math.abs(S),Math.abs(bt))&&Math.abs(L-Ht)<=se*Math.max(1,Math.abs(L),Math.abs(Ht))&&Math.abs(R-Et)<=se*Math.max(1,Math.abs(R),Math.abs(Et))&&Math.abs(H-Tt)<=se*Math.max(1,Math.abs(H),Math.abs(Tt))&&Math.abs(G-Xt)<=se*Math.max(1,Math.abs(G),Math.abs(Xt))&&Math.abs(Y-Vt)<=se*Math.max(1,Math.abs(Y),Math.abs(Vt))&&Math.abs(re-er)<=se*Math.max(1,Math.abs(re),Math.abs(er))&&Math.abs(ie-kt)<=se*Math.max(1,Math.abs(ie),Math.abs(kt))&&Math.abs(de-yr)<=se*Math.max(1,Math.abs(de),Math.abs(yr))&&Math.abs(Ce-Qr)<=se*Math.max(1,Math.abs(Ce),Math.abs(Qr))&&Math.abs(Ue-kr)<=se*Math.max(1,Math.abs(Ue),Math.abs(kr))},h.c9=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},h.cA=function(c){delete le.REGISTERED_PROTOCOLS[c]},h.cB=function(c,s){const l={};for(let m=0;m<c.length;m++){const _=s&&s[c[m].id]||to(c[m]);s&&(s[c[m].id]=_);let w=l[_];w||(w=l[_]=[]),w.push(c[m])}const d=[];for(const m in l)d.push(l[m]);return d},h.cC=Ne,h.cD=DC,h.cE=zC,h.cF=gC,h.cG=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=ne/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],l=s.layout,d=s._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new Er(c.bucket.zoom+1),c.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Er(c.bucket.zoom+1),c.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Er(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:H}=c.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Er(R),c.canonical),d["text-size"].possiblyEvaluate(new Er(H),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:H}=c.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Er(R),c.canonical),d["icon-size"].possiblyEvaluate(new Er(H),c.canonical)]}const _=l.get("text-line-height")*Bs,w=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),L=l.get("text-size");for(const R of c.bucket.features){const H=l.get("text-font").evaluate(R,{},c.canonical).join(","),G=L.evaluate(R,{},c.canonical),Y=m.layoutTextSize.evaluate(R,{},c.canonical),re=m.layoutIconSize.evaluate(R,{},c.canonical),ie={horizontal:{},vertical:void 0},de=R.text;let Ce,Ue=[0,0];if(de){const J=de.toString(),xe=l.get("text-letter-spacing").evaluate(R,{},c.canonical)*Bs,qe=Wt(J)?xe:0,bt=l.get("text-anchor").evaluate(R,{},c.canonical),Ht=YC(s,R,c.canonical);if(!Ht){const Vt=l.get("text-radial-offset").evaluate(R,{},c.canonical);Ue=Vt?XC(bt,[Vt*Bs,i_]):l.get("text-offset").evaluate(R,{},c.canonical).map(er=>er*Bs)}let Et=w?"center":l.get("text-justify").evaluate(R,{},c.canonical);const Tt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(R,{},c.canonical)*Bs:1/0,Xt=()=>{c.bucket.allowVerticalPlacement&&Nt(J)&&(ie.vertical=jg(de,c.glyphMap,c.glyphPositions,c.imagePositions,H,Tt,_,bt,"left",qe,Ue,h.an.vertical,!0,Y,G))};if(!w&&Ht){const Vt=new Set;if(Et==="auto")for(let kt=0;kt<Ht.values.length;kt+=2)Vt.add(s_(Ht.values[kt]));else Vt.add(Et);let er=!1;for(const kt of Vt)if(!ie.horizontal[kt])if(er)ie.horizontal[kt]=ie.horizontal[0];else{const yr=jg(de,c.glyphMap,c.glyphPositions,c.imagePositions,H,Tt,_,"center",kt,qe,Ue,h.an.horizontal,!1,Y,G);yr&&(ie.horizontal[kt]=yr,er=yr.positionedLines.length===1)}Xt()}else{Et==="auto"&&(Et=s_(bt));const Vt=jg(de,c.glyphMap,c.glyphPositions,c.imagePositions,H,Tt,_,bt,Et,qe,Ue,h.an.horizontal,!1,Y,G);Vt&&(ie.horizontal[Et]=Vt),Xt(),Nt(J)&&w&&S&&(ie.vertical=jg(de,c.glyphMap,c.glyphPositions,c.imagePositions,H,Tt,_,bt,Et,qe,Ue,h.an.vertical,!1,Y,G))}}let st=!1;if(R.icon&&R.icon.name){const J=c.imageMap[R.icon.name];J&&(Ce=BU(c.imagePositions[R.icon.name],l.get("icon-offset").evaluate(R,{},c.canonical),l.get("icon-anchor").evaluate(R,{},c.canonical)),st=!!J.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=st:c.bucket.sdfIcons!==st&&Cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(J.pixelRatio!==c.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Ve=e5(ie.horizontal)||ie.vertical;c.bucket.iconsInText=!!Ve&&Ve.iconsInText,(Ve||Ce)&&zU(c.bucket,R,ie,Ce,c.imageMap,m,Y,re,Ue,st,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},h.cH=j1,h.cI=R1,h.cJ=H1,h.cK=Gp,h.cL=G1,h.cM=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},h.cN=function(c,s,l,d,m){return o(this,void 0,void 0,function*(){if(ee())try{return yield br(c,s,l,d,m)}catch{}return function(_,w,S,L,R){const H=_.width,G=_.height;Nr&&Kr||(Nr=new OffscreenCanvas(H,G),Kr=Nr.getContext("2d",{willReadFrequently:!0})),Nr.width=H,Nr.height=G,Kr.drawImage(_,0,0,H,G);const Y=Kr.getImageData(w,S,L,R);return Kr.clearRect(0,0,H,G),Y.data}(c,s,l,d,m)})},h.cO=OB,h.cP=g,h.cQ=F,h.cR=nC,h.cS=pC,h.cT=Pu,h.cU=wn,h.ca=c=>c.type==="symbol",h.cb=c=>c.type==="circle",h.cc=c=>c.type==="heatmap",h.cd=c=>c.type==="line",h.ce=c=>c.type==="fill",h.cf=c=>c.type==="fill-extrusion",h.cg=c=>c.type==="hillshade",h.ch=c=>c.type==="color-relief",h.ci=c=>c.type==="raster",h.cj=c=>c.type==="background",h.ck=c=>c.type==="custom",h.cl=Ze,h.cm=function(c,s,l){const d=Lt(s.x-l.x,s.y-l.y),m=Lt(c.x-l.x,c.y-l.y);var _,w;return un(Math.atan2(d[0]*m[1]-d[1]*m[0],(_=d)[0]*(w=m)[0]+_[1]*w[1]))},h.cn=pt,h.co=function(c,s){return Yr[s]&&(c instanceof MouseEvent||c instanceof WheelEvent)},h.cp=function(c,s){return zr[s]&&"touches"in c},h.cq=function(c){return zr[c]||Yr[c]},h.cr=function(c,s,l){var d=s[0],m=s[1];return c[0]=l[0]*d+l[4]*m+l[12],c[1]=l[1]*d+l[5]*m+l[13],c},h.cs=function(c,s){const{x:l,y:d}=Xp.fromLngLat(s);return!(c<0||c>25||d<0||d>=1||l<0||l>=1)},h.ct=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},h.cu=class extends Uo{},h.cv=jU,h.cx=function(c){return c.message===ur},h.cy=Qe,h.cz=function(c,s){le.REGISTERED_PROTOCOLS[c]=s},h.d=yt,h.e=Mt,h.f=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),h.g=fe,h.h=c=>new Promise((s,l)=>{const d=new Image;d.onload=()=>{s(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=cr})},d.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(c)],{type:"image/png"});d.src=c.byteLength?URL.createObjectURL(m):cr}),h.i=Kt,h.j=(c,s)=>tt(Mt(c,{type:"json"}),s),h.k=at,h.l=Ct,h.m=tt,h.n=(c,s)=>tt(Mt(c,{type:"arrayBuffer"}),s),h.o=function(c){return new G1(c).readFields(dU,[])},h.p=mC,h.q=Dp,h.r=pi,h.s=Lr,h.t=yi,h.u=Ye,h.v=Me,h.w=Cr,h.x=q,h.y=ve,h.z=O}),A("worker",["./shared"],function(h){class o{constructor(le){this.keyCache={},le&&this.replace(le)}replace(le){this._layerConfigs={},this._layers={},this.update(le,[])}update(le,fe){for(const Qe of le){this._layerConfigs[Qe.id]=Qe;const et=this._layers[Qe.id]=h.bI(Qe);et._featureFilter=h.a9(et.filter),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id]}for(const Qe of fe)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const _e=h.cB(Object.values(this._layerConfigs),this.keyCache);for(const Qe of _e){const et=Qe.map(at=>this._layers[at.id]),tt=et[0];if(tt.visibility==="none")continue;const yt=tt.source||"";let rt=this.familiesBySource[yt];rt||(rt=this.familiesBySource[yt]={});const Ft=tt.sourceLayer||"_geojsonTileLayer";let Ct=rt[Ft];Ct||(Ct=rt[Ft]=[]),Ct.push(et)}}}class g{constructor(le){const fe={},_e=[];for(const yt in le){const rt=le[yt],Ft=fe[yt]={};for(const Ct in rt){const at=rt[+Ct];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const mt={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};_e.push(mt),Ft[Ct]={rect:mt,metrics:at.metrics}}}const{w:Qe,h:et}=h.p(_e),tt=new h.q({width:Qe||1,height:et||1});for(const yt in le){const rt=le[yt];for(const Ft in rt){const Ct=rt[+Ft];if(!Ct||Ct.bitmap.width===0||Ct.bitmap.height===0)continue;const at=fe[yt][Ft].rect;h.q.copy(Ct.bitmap,tt,{x:0,y:0},{x:at.x+1,y:at.y+1},Ct.bitmap)}}this.image=tt,this.positions=fe}}h.cC("GlyphAtlas",g);class x{constructor(le){this.tileID=new h.Z(le.tileID.overscaledZ,le.tileID.wrap,le.tileID.canonical.z,le.tileID.canonical.x,le.tileID.canonical.y),this.uid=le.uid,this.zoom=le.zoom,this.pixelRatio=le.pixelRatio,this.tileSize=le.tileSize,this.source=le.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=le.showCollisionBoxes,this.collectResourceTiming=!!le.collectResourceTiming,this.returnDependencies=!!le.returnDependencies,this.promoteId=le.promoteId,this.inFlightDependencies=[],this.globalState=le.globalState}parse(le,fe,_e,Qe,et){return h._(this,void 0,void 0,function*(){this.status="parsing",this.data=le,this.collisionBoxArray=new h.a7;const tt=new h.cD(Object.keys(le.layers).sort()),yt=new h.cE(this.tileID,this.promoteId);yt.bucketLayerIDs=[];const rt={},Ft={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:_e,subdivisionGranularity:et},Ct=fe.familiesBySource[this.source];for(const _r in Ct){const Ur=le.layers[_r];if(!Ur)continue;Ur.version===1&&h.w(`Vector tile source "${this.source}" layer "${_r}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pn=tt.encode(_r),Yt=[];for(let Wn=0;Wn<Ur.length;Wn++){const Bn=Ur.feature(Wn),Xi=yt.getId(Bn,_r);Yt.push({feature:Bn,id:Xi,index:Wn,sourceLayerIndex:Pn})}for(const Wn of Ct[_r]){const Bn=Wn[0];Bn.source!==this.source&&h.w(`layer.source = ${Bn.source} does not equal this.source = ${this.source}`),Bn.minzoom&&this.zoom<Math.floor(Bn.minzoom)||Bn.maxzoom&&this.zoom>=Bn.maxzoom||Bn.visibility!=="none"&&(E(Wn,this.zoom,_e),(rt[Bn.id]=Bn.createBucket({index:yt.bucketLayerIDs.length,layers:Wn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pn,sourceID:this.source,globalState:this.globalState})).populate(Yt,Ft,this.tileID.canonical),yt.bucketLayerIDs.push(Wn.map(Xi=>Xi.id)))}}const at=h.bM(Ft.glyphDependencies,_r=>Object.keys(_r).map(Number));this.inFlightDependencies.forEach(_r=>_r==null?void 0:_r.abort()),this.inFlightDependencies=[];let mt=Promise.resolve({});if(Object.keys(at).length){const _r=new AbortController;this.inFlightDependencies.push(_r),mt=Qe.sendAsync({type:"GG",data:{stacks:at,source:this.source,tileID:this.tileID,type:"glyphs"}},_r)}const Me=Object.keys(Ft.iconDependencies);let Rt=Promise.resolve({});if(Me.length){const _r=new AbortController;this.inFlightDependencies.push(_r),Rt=Qe.sendAsync({type:"GI",data:{icons:Me,source:this.source,tileID:this.tileID,type:"icons"}},_r)}const nr=Object.keys(Ft.patternDependencies);let tr=Promise.resolve({});if(nr.length){const _r=new AbortController;this.inFlightDependencies.push(_r),tr=Qe.sendAsync({type:"GI",data:{icons:nr,source:this.source,tileID:this.tileID,type:"patterns"}},_r)}const[Ar,qt,Jr]=yield Promise.all([mt,Rt,tr]),jr=new g(Ar),Rr=new h.cF(qt,Jr);for(const _r in rt){const Ur=rt[_r];Ur instanceof h.a8?(E(Ur.layers,this.zoom,_e),h.cG({bucket:Ur,glyphMap:Ar,glyphPositions:jr.positions,imageMap:qt,imagePositions:Rr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ft.subdivisionGranularity})):Ur.hasPattern&&(Ur instanceof h.cH||Ur instanceof h.cI||Ur instanceof h.cJ)&&(E(Ur.layers,this.zoom,_e),Ur.addFeatures(Ft,this.tileID.canonical,Rr.patternPositions))}return this.status="done",{buckets:Object.values(rt).filter(_r=>!_r.isEmpty()),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jr.image,imageAtlas:Rr,glyphMap:this.returnDependencies?Ar:null,iconMap:this.returnDependencies?qt:null,glyphPositions:this.returnDependencies?jr.positions:null}})}}function E(At,le,fe){const _e=new h.F(le);for(const Qe of At)Qe.recalculate(_e,fe)}class F{constructor(le,fe,_e){this.actor=le,this.layerIndex=fe,this.availableImages=_e,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(le,fe){return h._(this,void 0,void 0,function*(){const _e=yield h.n(le.request,fe);try{return{vectorTile:new h.cK.VectorTile(new h.cL(_e.data)),rawData:_e.data,cacheControl:_e.cacheControl,expires:_e.expires}}catch(Qe){const et=new Uint8Array(_e.data);let tt=`Unable to parse the tile at ${le.request.url}, `;throw tt+=et[0]===31&&et[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Qe.message}`,new Error(tt)}})}loadTile(le){return h._(this,void 0,void 0,function*(){const fe=le.uid,_e=!!(le&&le.request&&le.request.collectResourceTiming)&&new h.cM(le.request),Qe=new x(le);this.loading[fe]=Qe;const et=new AbortController;Qe.abort=et;try{const tt=yield this.loadVectorTile(le,et);if(delete this.loading[fe],!tt)return null;const yt=tt.rawData,rt={};tt.expires&&(rt.expires=tt.expires),tt.cacheControl&&(rt.cacheControl=tt.cacheControl);const Ft={};if(_e){const at=_e.finish();at&&(Ft.resourceTiming=JSON.parse(JSON.stringify(at)))}Qe.vectorTile=tt.vectorTile;const Ct=Qe.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);this.loaded[fe]=Qe,this.fetching[fe]={rawTileData:yt,cacheControl:rt,resourceTiming:Ft};try{const at=yield Ct;return h.e({rawTileData:yt.slice(0)},at,rt,Ft)}finally{delete this.fetching[fe]}}catch(tt){throw delete this.loading[fe],Qe.status="done",this.loaded[fe]=Qe,tt}})}reloadTile(le){return h._(this,void 0,void 0,function*(){const fe=le.uid;if(!this.loaded||!this.loaded[fe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const _e=this.loaded[fe];if(_e.showCollisionBoxes=le.showCollisionBoxes,_e.globalState=le.globalState,_e.status==="parsing"){const Qe=yield _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);let et;if(this.fetching[fe]){const{rawTileData:tt,cacheControl:yt,resourceTiming:rt}=this.fetching[fe];delete this.fetching[fe],et=h.e({rawTileData:tt.slice(0)},Qe,yt,rt)}else et=Qe;return et}if(_e.status==="done"&&_e.vectorTile)return _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity)})}abortTile(le){return h._(this,void 0,void 0,function*(){const fe=this.loading,_e=le.uid;fe&&fe[_e]&&fe[_e].abort&&(fe[_e].abort.abort(),delete fe[_e])})}removeTile(le){return h._(this,void 0,void 0,function*(){this.loaded&&this.loaded[le.uid]&&delete this.loaded[le.uid]})}}class P{constructor(){this.loaded={}}loadTile(le){return h._(this,void 0,void 0,function*(){const{uid:fe,encoding:_e,rawImageData:Qe,redFactor:et,greenFactor:tt,blueFactor:yt,baseShift:rt}=le,Ft=Qe.width+2,Ct=Qe.height+2,at=h.b(Qe)?new h.R({width:Ft,height:Ct},yield h.cN(Qe,-1,-1,Ft,Ct)):Qe,mt=new h.cO(fe,at,_e,et,tt,yt,rt);return this.loaded=this.loaded||{},this.loaded[fe]=mt,mt})}removeTile(le){const fe=this.loaded,_e=le.uid;fe&&fe[_e]&&delete fe[_e]}}var C,D,k=function(){if(D)return C;function At(fe,_e){if(fe.length!==0){le(fe[0],_e);for(var Qe=1;Qe<fe.length;Qe++)le(fe[Qe],!_e)}}function le(fe,_e){for(var Qe=0,et=0,tt=0,yt=fe.length,rt=yt-1;tt<yt;rt=tt++){var Ft=(fe[tt][0]-fe[rt][0])*(fe[rt][1]+fe[tt][1]),Ct=Qe+Ft;et+=Math.abs(Qe)>=Math.abs(Ft)?Qe-Ct+Ft:Ft-Ct+Qe,Qe=Ct}Qe+et>=0!=!!_e&&fe.reverse()}return D=1,C=function fe(_e,Qe){var et,tt=_e&&_e.type;if(tt==="FeatureCollection")for(et=0;et<_e.features.length;et++)fe(_e.features[et],Qe);else if(tt==="GeometryCollection")for(et=0;et<_e.geometries.length;et++)fe(_e.geometries[et],Qe);else if(tt==="Feature")fe(_e.geometry,Qe);else if(tt==="Polygon")At(_e.coordinates,Qe);else if(tt==="MultiPolygon")for(et=0;et<_e.coordinates.length;et++)At(_e.coordinates[et],Qe);return _e}}(),j=h.cP(k);const U=h.cK.VectorTileFeature.prototype.toGeoJSON;class N{constructor(le){this._feature=le,this.extent=h.$,this.type=le.type,this.properties=le.tags,"id"in le&&!isNaN(le.id)&&(this.id=parseInt(le.id,10))}loadGeometry(){if(this._feature.type===1){const le=[];for(const fe of this._feature.geometry)le.push([new h.P(fe[0],fe[1])]);return le}{const le=[];for(const fe of this._feature.geometry){const _e=[];for(const Qe of fe)_e.push(new h.P(Qe[0],Qe[1]));le.push(_e)}return le}}toGeoJSON(le,fe,_e){return U.call(this,le,fe,_e)}}class K{constructor(le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.$,this.length=le.length,this._features=le}feature(le){return new N(this._features[le])}}var ee,se,pe,ye={exports:{}},ue=function(){if(pe)return ye.exports;pe=1;var At=h.cS(),le=function(){if(se)return ee;se=1;var Ct=h.cQ(),at=h.cR().VectorTileFeature;function mt(Rt,nr){this.options=nr||{},this.features=Rt,this.length=Rt.length}function Me(Rt,nr){this.id=typeof Rt.id=="number"?Rt.id:void 0,this.type=Rt.type,this.rawGeometry=Rt.type===1?[Rt.geometry]:Rt.geometry,this.properties=Rt.tags,this.extent=nr||4096}return ee=mt,mt.prototype.feature=function(Rt){return new Me(this.features[Rt],this.options.extent)},Me.prototype.loadGeometry=function(){var Rt=this.rawGeometry;this.geometry=[];for(var nr=0;nr<Rt.length;nr++){for(var tr=Rt[nr],Ar=[],qt=0;qt<tr.length;qt++)Ar.push(new Ct(tr[qt][0],tr[qt][1]));this.geometry.push(Ar)}return this.geometry},Me.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Rt=this.geometry,nr=1/0,tr=-1/0,Ar=1/0,qt=-1/0,Jr=0;Jr<Rt.length;Jr++)for(var jr=Rt[Jr],Rr=0;Rr<jr.length;Rr++){var _r=jr[Rr];nr=Math.min(nr,_r.x),tr=Math.max(tr,_r.x),Ar=Math.min(Ar,_r.y),qt=Math.max(qt,_r.y)}return[nr,Ar,tr,qt]},Me.prototype.toGeoJSON=at.prototype.toGeoJSON,ee}();function fe(Ct){var at=new At;return function(mt,Me){for(var Rt in mt.layers)Me.writeMessage(3,_e,mt.layers[Rt])}(Ct,at),at.finish()}function _e(Ct,at){var mt;at.writeVarintField(15,Ct.version||1),at.writeStringField(1,Ct.name||""),at.writeVarintField(5,Ct.extent||4096);var Me={keys:[],values:[],keycache:{},valuecache:{}};for(mt=0;mt<Ct.length;mt++)Me.feature=Ct.feature(mt),at.writeMessage(2,Qe,Me);var Rt=Me.keys;for(mt=0;mt<Rt.length;mt++)at.writeStringField(3,Rt[mt]);var nr=Me.values;for(mt=0;mt<nr.length;mt++)at.writeMessage(4,Ft,nr[mt])}function Qe(Ct,at){var mt=Ct.feature;mt.id!==void 0&&at.writeVarintField(1,mt.id),at.writeMessage(2,et,Ct),at.writeVarintField(3,mt.type),at.writeMessage(4,rt,mt)}function et(Ct,at){var mt=Ct.feature,Me=Ct.keys,Rt=Ct.values,nr=Ct.keycache,tr=Ct.valuecache;for(var Ar in mt.properties){var qt=mt.properties[Ar],Jr=nr[Ar];if(qt!==null){Jr===void 0&&(Me.push(Ar),nr[Ar]=Jr=Me.length-1),at.writeVarint(Jr);var jr=typeof qt;jr!=="string"&&jr!=="boolean"&&jr!=="number"&&(qt=JSON.stringify(qt));var Rr=jr+":"+qt,_r=tr[Rr];_r===void 0&&(Rt.push(qt),tr[Rr]=_r=Rt.length-1),at.writeVarint(_r)}}}function tt(Ct,at){return(at<<3)+(7&Ct)}function yt(Ct){return Ct<<1^Ct>>31}function rt(Ct,at){for(var mt=Ct.loadGeometry(),Me=Ct.type,Rt=0,nr=0,tr=mt.length,Ar=0;Ar<tr;Ar++){var qt=mt[Ar],Jr=1;Me===1&&(Jr=qt.length),at.writeVarint(tt(1,Jr));for(var jr=Me===3?qt.length-1:qt.length,Rr=0;Rr<jr;Rr++){Rr===1&&Me!==1&&at.writeVarint(tt(2,jr-1));var _r=qt[Rr].x-Rt,Ur=qt[Rr].y-nr;at.writeVarint(yt(_r)),at.writeVarint(yt(Ur)),Rt+=_r,nr+=Ur}Me===3&&at.writeVarint(tt(7,1))}}function Ft(Ct,at){var mt=typeof Ct;mt==="string"?at.writeStringField(1,Ct):mt==="boolean"?at.writeBooleanField(7,Ct):mt==="number"&&(Ct%1!=0?at.writeDoubleField(3,Ct):Ct<0?at.writeSVarintField(6,Ct):at.writeVarintField(5,Ct))}return ye.exports=fe,ye.exports.fromVectorTileJs=fe,ye.exports.fromGeojsonVt=function(Ct,at){at=at||{};var mt={};for(var Me in Ct)mt[Me]=new le(Ct[Me].features,at),mt[Me].name=Me,mt[Me].version=at.version,mt[Me].extent=at.extent;return fe({layers:mt})},ye.exports.GeoJSONWrapper=le,ye.exports}(),Te=h.cP(ue);const Ke={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:At=>At},oe=Math.fround||(he=new Float32Array(1),At=>(he[0]=+At,he[0]));var he;class Ie{constructor(le){this.options=Object.assign(Object.create(Ke),le),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(le){const{log:fe,minZoom:_e,maxZoom:Qe}=this.options;fe&&console.time("total time");const et=`prepare ${le.length} points`;fe&&console.time(et),this.points=le;const tt=[];for(let rt=0;rt<le.length;rt++){const Ft=le[rt];if(!Ft.geometry)continue;const[Ct,at]=Ft.geometry.coordinates,mt=oe(Xe(Ct)),Me=oe(lt(at));tt.push(mt,Me,1/0,rt,-1,1),this.options.reduce&&tt.push(0)}let yt=this.trees[Qe+1]=this._createTree(tt);fe&&console.timeEnd(et);for(let rt=Qe;rt>=_e;rt--){const Ft=+Date.now();yt=this.trees[rt]=this._createTree(this._cluster(yt,rt)),fe&&console.log("z%d: %d clusters in %dms",rt,yt.numItems,+Date.now()-Ft)}return fe&&console.timeEnd("total time"),this}getClusters(le,fe){let _e=((le[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,le[1]));let et=le[2]===180?180:((le[2]+180)%360+360)%360-180;const tt=Math.max(-90,Math.min(90,le[3]));if(le[2]-le[0]>=360)_e=-180,et=180;else if(_e>et){const at=this.getClusters([_e,Qe,180,tt],fe),mt=this.getClusters([-180,Qe,et,tt],fe);return at.concat(mt)}const yt=this.trees[this._limitZoom(fe)],rt=yt.range(Xe(_e),lt(tt),Xe(et),lt(Qe)),Ft=yt.data,Ct=[];for(const at of rt){const mt=this.stride*at;Ct.push(Ft[mt+5]>1?be(Ft,mt,this.clusterProps):this.points[Ft[mt+3]])}return Ct}getChildren(le){const fe=this._getOriginId(le),_e=this._getOriginZoom(le),Qe="No cluster with the specified id.",et=this.trees[_e];if(!et)throw new Error(Qe);const tt=et.data;if(fe*this.stride>=tt.length)throw new Error(Qe);const yt=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),rt=et.within(tt[fe*this.stride],tt[fe*this.stride+1],yt),Ft=[];for(const Ct of rt){const at=Ct*this.stride;tt[at+4]===le&&Ft.push(tt[at+5]>1?be(tt,at,this.clusterProps):this.points[tt[at+3]])}if(Ft.length===0)throw new Error(Qe);return Ft}getLeaves(le,fe,_e){const Qe=[];return this._appendLeaves(Qe,le,fe=fe||10,_e=_e||0,0),Qe}getTile(le,fe,_e){const Qe=this.trees[this._limitZoom(le)],et=Math.pow(2,le),{extent:tt,radius:yt}=this.options,rt=yt/tt,Ft=(_e-rt)/et,Ct=(_e+1+rt)/et,at={features:[]};return this._addTileFeatures(Qe.range((fe-rt)/et,Ft,(fe+1+rt)/et,Ct),Qe.data,fe,_e,et,at),fe===0&&this._addTileFeatures(Qe.range(1-rt/et,Ft,1,Ct),Qe.data,et,_e,et,at),fe===et-1&&this._addTileFeatures(Qe.range(0,Ft,rt/et,Ct),Qe.data,-1,_e,et,at),at.features.length?at:null}getClusterExpansionZoom(le){let fe=this._getOriginZoom(le)-1;for(;fe<=this.options.maxZoom;){const _e=this.getChildren(le);if(fe++,_e.length!==1)break;le=_e[0].properties.cluster_id}return fe}_appendLeaves(le,fe,_e,Qe,et){const tt=this.getChildren(fe);for(const yt of tt){const rt=yt.properties;if(rt&&rt.cluster?et+rt.point_count<=Qe?et+=rt.point_count:et=this._appendLeaves(le,rt.cluster_id,_e,Qe,et):et<Qe?et++:le.push(yt),le.length===_e)break}return et}_createTree(le){const fe=new h.aH(le.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<le.length;_e+=this.stride)fe.add(le[_e],le[_e+1]);return fe.finish(),fe.data=le,fe}_addTileFeatures(le,fe,_e,Qe,et,tt){for(const yt of le){const rt=yt*this.stride,Ft=fe[rt+5]>1;let Ct,at,mt;if(Ft)Ct=ct(fe,rt,this.clusterProps),at=fe[rt],mt=fe[rt+1];else{const nr=this.points[fe[rt+3]];Ct=nr.properties;const[tr,Ar]=nr.geometry.coordinates;at=Xe(tr),mt=lt(Ar)}const Me={type:1,geometry:[[Math.round(this.options.extent*(at*et-_e)),Math.round(this.options.extent*(mt*et-Qe))]],tags:Ct};let Rt;Rt=Ft||this.options.generateId?fe[rt+3]:this.points[fe[rt+3]].id,Rt!==void 0&&(Me.id=Rt),tt.features.push(Me)}}_limitZoom(le){return Math.max(this.options.minZoom,Math.min(Math.floor(+le),this.options.maxZoom+1))}_cluster(le,fe){const{radius:_e,extent:Qe,reduce:et,minPoints:tt}=this.options,yt=_e/(Qe*Math.pow(2,fe)),rt=le.data,Ft=[],Ct=this.stride;for(let at=0;at<rt.length;at+=Ct){if(rt[at+2]<=fe)continue;rt[at+2]=fe;const mt=rt[at],Me=rt[at+1],Rt=le.within(rt[at],rt[at+1],yt),nr=rt[at+5];let tr=nr;for(const Ar of Rt){const qt=Ar*Ct;rt[qt+2]>fe&&(tr+=rt[qt+5])}if(tr>nr&&tr>=tt){let Ar,qt=mt*nr,Jr=Me*nr,jr=-1;const Rr=(at/Ct<<5)+(fe+1)+this.points.length;for(const _r of Rt){const Ur=_r*Ct;if(rt[Ur+2]<=fe)continue;rt[Ur+2]=fe;const Pn=rt[Ur+5];qt+=rt[Ur]*Pn,Jr+=rt[Ur+1]*Pn,rt[Ur+4]=Rr,et&&(Ar||(Ar=this._map(rt,at,!0),jr=this.clusterProps.length,this.clusterProps.push(Ar)),et(Ar,this._map(rt,Ur)))}rt[at+4]=Rr,Ft.push(qt/tr,Jr/tr,1/0,Rr,-1,tr),et&&Ft.push(jr)}else{for(let Ar=0;Ar<Ct;Ar++)Ft.push(rt[at+Ar]);if(tr>1)for(const Ar of Rt){const qt=Ar*Ct;if(!(rt[qt+2]<=fe)){rt[qt+2]=fe;for(let Jr=0;Jr<Ct;Jr++)Ft.push(rt[qt+Jr])}}}}return Ft}_getOriginId(le){return le-this.points.length>>5}_getOriginZoom(le){return(le-this.points.length)%32}_map(le,fe,_e){if(le[fe+5]>1){const tt=this.clusterProps[le[fe+6]];return _e?Object.assign({},tt):tt}const Qe=this.points[le[fe+3]].properties,et=this.options.map(Qe);return _e&&et===Qe?Object.assign({},et):et}}function be(At,le,fe){return{type:"Feature",id:At[le+3],properties:ct(At,le,fe),geometry:{type:"Point",coordinates:[(_e=At[le],360*(_e-.5)),Le(At[le+1])]}};var _e}function ct(At,le,fe){const _e=At[le+5],Qe=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,et=At[le+6],tt=et===-1?{}:Object.assign({},fe[et]);return Object.assign(tt,{cluster:!0,cluster_id:At[le+3],point_count:_e,point_count_abbreviated:Qe})}function Xe(At){return At/360+.5}function lt(At){const le=Math.sin(At*Math.PI/180),fe=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return fe<0?0:fe>1?1:fe}function Le(At){const le=(180-360*At)*Math.PI/180;return 360*Math.atan(Math.exp(le))/Math.PI-90}function ze(At,le,fe,_e){let Qe=_e;const et=le+(fe-le>>1);let tt,yt=fe-le;const rt=At[le],Ft=At[le+1],Ct=At[fe],at=At[fe+1];for(let mt=le+3;mt<fe;mt+=3){const Me=it(At[mt],At[mt+1],rt,Ft,Ct,at);if(Me>Qe)tt=mt,Qe=Me;else if(Me===Qe){const Rt=Math.abs(mt-et);Rt<yt&&(tt=mt,yt=Rt)}}Qe>_e&&(tt-le>3&&ze(At,le,tt,_e),At[tt+2]=Qe,fe-tt>3&&ze(At,tt,fe,_e))}function it(At,le,fe,_e,Qe,et){let tt=Qe-fe,yt=et-_e;if(tt!==0||yt!==0){const rt=((At-fe)*tt+(le-_e)*yt)/(tt*tt+yt*yt);rt>1?(fe=Qe,_e=et):rt>0&&(fe+=tt*rt,_e+=yt*rt)}return tt=At-fe,yt=le-_e,tt*tt+yt*yt}function Lt(At,le,fe,_e){const Qe={id:At??null,type:le,geometry:fe,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(le==="Point"||le==="MultiPoint"||le==="LineString")ne(Qe,fe);else if(le==="Polygon")ne(Qe,fe[0]);else if(le==="MultiLineString")for(const et of fe)ne(Qe,et);else if(le==="MultiPolygon")for(const et of fe)ne(Qe,et[0]);return Qe}function ne(At,le){for(let fe=0;fe<le.length;fe+=3)At.minX=Math.min(At.minX,le[fe]),At.minY=Math.min(At.minY,le[fe+1]),At.maxX=Math.max(At.maxX,le[fe]),At.maxY=Math.max(At.maxY,le[fe+1])}function Be(At,le,fe,_e){if(!le.geometry)return;const Qe=le.geometry.coordinates;if(Qe&&Qe.length===0)return;const et=le.geometry.type,tt=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2);let yt=[],rt=le.id;if(fe.promoteId?rt=le.properties[fe.promoteId]:fe.generateId&&(rt=_e||0),et==="Point")Pe(Qe,yt);else if(et==="MultiPoint")for(const Ft of Qe)Pe(Ft,yt);else if(et==="LineString")$e(Qe,yt,tt,!1);else if(et==="MultiLineString"){if(fe.lineMetrics){for(const Ft of Qe)yt=[],$e(Ft,yt,tt,!1),At.push(Lt(rt,"LineString",yt,le.properties));return}nt(Qe,yt,tt,!1)}else if(et==="Polygon")nt(Qe,yt,tt,!0);else{if(et!=="MultiPolygon"){if(et==="GeometryCollection"){for(const Ft of le.geometry.geometries)Be(At,{id:rt,geometry:Ft,properties:le.properties},fe,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ft of Qe){const Ct=[];nt(Ft,Ct,tt,!0),yt.push(Ct)}}At.push(Lt(rt,et,yt,le.properties))}function Pe(At,le){le.push(Ze(At[0]),pt(At[1]),0)}function $e(At,le,fe,_e){let Qe,et,tt=0;for(let rt=0;rt<At.length;rt++){const Ft=Ze(At[rt][0]),Ct=pt(At[rt][1]);le.push(Ft,Ct,0),rt>0&&(tt+=_e?(Qe*Ct-Ft*et)/2:Math.sqrt(Math.pow(Ft-Qe,2)+Math.pow(Ct-et,2))),Qe=Ft,et=Ct}const yt=le.length-3;le[2]=1,ze(le,0,yt,fe),le[yt+2]=1,le.size=Math.abs(tt),le.start=0,le.end=le.size}function nt(At,le,fe,_e){for(let Qe=0;Qe<At.length;Qe++){const et=[];$e(At[Qe],et,fe,_e),le.push(et)}}function Ze(At){return At/360+.5}function pt(At){const le=Math.sin(At*Math.PI/180),fe=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return fe<0?0:fe>1?1:fe}function dt(At,le,fe,_e,Qe,et,tt,yt){if(_e/=le,et>=(fe/=le)&&tt<_e)return At;if(tt<fe||et>=_e)return null;const rt=[];for(const Ft of At){const Ct=Ft.geometry;let at=Ft.type;const mt=Qe===0?Ft.minX:Ft.minY,Me=Qe===0?Ft.maxX:Ft.maxY;if(mt>=fe&&Me<_e){rt.push(Ft);continue}if(Me<fe||mt>=_e)continue;let Rt=[];if(at==="Point"||at==="MultiPoint")Qt(Ct,Rt,fe,_e,Qe);else if(at==="LineString")Mt(Ct,Rt,fe,_e,Qe,!1,yt.lineMetrics);else if(at==="MultiLineString")jt(Ct,Rt,fe,_e,Qe,!1);else if(at==="Polygon")jt(Ct,Rt,fe,_e,Qe,!0);else if(at==="MultiPolygon")for(const nr of Ct){const tr=[];jt(nr,tr,fe,_e,Qe,!0),tr.length&&Rt.push(tr)}if(Rt.length){if(yt.lineMetrics&&at==="LineString"){for(const nr of Rt)rt.push(Lt(Ft.id,at,nr,Ft.tags));continue}at!=="LineString"&&at!=="MultiLineString"||(Rt.length===1?(at="LineString",Rt=Rt[0]):at="MultiLineString"),at!=="Point"&&at!=="MultiPoint"||(at=Rt.length===3?"Point":"MultiPoint"),rt.push(Lt(Ft.id,at,Rt,Ft.tags))}}return rt.length?rt:null}function Qt(At,le,fe,_e,Qe){for(let et=0;et<At.length;et+=3){const tt=At[et+Qe];tt>=fe&&tt<=_e&&vr(le,At[et],At[et+1],At[et+2])}}function Mt(At,le,fe,_e,Qe,et,tt){let yt=$t(At);const rt=Qe===0?It:Ge;let Ft,Ct,at=At.start;for(let tr=0;tr<At.length-3;tr+=3){const Ar=At[tr],qt=At[tr+1],Jr=At[tr+2],jr=At[tr+3],Rr=At[tr+4],_r=Qe===0?Ar:qt,Ur=Qe===0?jr:Rr;let Pn=!1;tt&&(Ft=Math.sqrt(Math.pow(Ar-jr,2)+Math.pow(qt-Rr,2))),_r<fe?Ur>fe&&(Ct=rt(yt,Ar,qt,jr,Rr,fe),tt&&(yt.start=at+Ft*Ct)):_r>_e?Ur<_e&&(Ct=rt(yt,Ar,qt,jr,Rr,_e),tt&&(yt.start=at+Ft*Ct)):vr(yt,Ar,qt,Jr),Ur<fe&&_r>=fe&&(Ct=rt(yt,Ar,qt,jr,Rr,fe),Pn=!0),Ur>_e&&_r<=_e&&(Ct=rt(yt,Ar,qt,jr,Rr,_e),Pn=!0),!et&&Pn&&(tt&&(yt.end=at+Ft*Ct),le.push(yt),yt=$t(At)),tt&&(at+=Ft)}let mt=At.length-3;const Me=At[mt],Rt=At[mt+1],nr=Qe===0?Me:Rt;nr>=fe&&nr<=_e&&vr(yt,Me,Rt,At[mt+2]),mt=yt.length-3,et&&mt>=3&&(yt[mt]!==yt[0]||yt[mt+1]!==yt[1])&&vr(yt,yt[0],yt[1],yt[2]),yt.length&&le.push(yt)}function $t(At){const le=[];return le.size=At.size,le.start=At.start,le.end=At.end,le}function jt(At,le,fe,_e,Qe,et){for(const tt of At)Mt(tt,le,fe,_e,Qe,et,!1)}function vr(At,le,fe,_e){At.push(le,fe,_e)}function It(At,le,fe,_e,Qe,et){const tt=(et-le)/(_e-le);return vr(At,et,fe+(Qe-fe)*tt,1),tt}function Ge(At,le,fe,_e,Qe,et){const tt=(et-fe)/(Qe-fe);return vr(At,le+(_e-le)*tt,et,1),tt}function Cr(At,le){const fe=[];for(let _e=0;_e<At.length;_e++){const Qe=At[_e],et=Qe.type;let tt;if(et==="Point"||et==="MultiPoint"||et==="LineString")tt=pr(Qe.geometry,le);else if(et==="MultiLineString"||et==="Polygon"){tt=[];for(const yt of Qe.geometry)tt.push(pr(yt,le))}else if(et==="MultiPolygon"){tt=[];for(const yt of Qe.geometry){const rt=[];for(const Ft of yt)rt.push(pr(Ft,le));tt.push(rt)}}fe.push(Lt(Qe.id,et,tt,Qe.tags))}return fe}function pr(At,le){const fe=[];fe.size=At.size,At.start!==void 0&&(fe.start=At.start,fe.end=At.end);for(let _e=0;_e<At.length;_e+=3)fe.push(At[_e]+le,At[_e+1],At[_e+2]);return fe}function Kt(At,le){if(At.transformed)return At;const fe=1<<At.z,_e=At.x,Qe=At.y;for(const et of At.features){const tt=et.geometry,yt=et.type;if(et.geometry=[],yt===1)for(let rt=0;rt<tt.length;rt+=2)et.geometry.push(ar(tt[rt],tt[rt+1],le,fe,_e,Qe));else for(let rt=0;rt<tt.length;rt++){const Ft=[];for(let Ct=0;Ct<tt[rt].length;Ct+=2)Ft.push(ar(tt[rt][Ct],tt[rt][Ct+1],le,fe,_e,Qe));et.geometry.push(Ft)}}return At.transformed=!0,At}function ar(At,le,fe,_e,Qe,et){return[Math.round(fe*(At*_e-Qe)),Math.round(fe*(le*_e-et))]}function lr(At,le,fe,_e,Qe){const et=le===Qe.maxZoom?0:Qe.tolerance/((1<<le)*Qe.extent),tt={features:[],numPoints:0,numSimplified:0,numFeatures:At.length,source:null,x:fe,y:_e,z:le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const yt of At)cr(tt,yt,et,Qe);return tt}function cr(At,le,fe,_e){const Qe=le.geometry,et=le.type,tt=[];if(At.minX=Math.min(At.minX,le.minX),At.minY=Math.min(At.minY,le.minY),At.maxX=Math.max(At.maxX,le.maxX),At.maxY=Math.max(At.maxY,le.maxY),et==="Point"||et==="MultiPoint")for(let yt=0;yt<Qe.length;yt+=3)tt.push(Qe[yt],Qe[yt+1]),At.numPoints++,At.numSimplified++;else if(et==="LineString")br(tt,Qe,At,fe,!1,!1);else if(et==="MultiLineString"||et==="Polygon")for(let yt=0;yt<Qe.length;yt++)br(tt,Qe[yt],At,fe,et==="Polygon",yt===0);else if(et==="MultiPolygon")for(let yt=0;yt<Qe.length;yt++){const rt=Qe[yt];for(let Ft=0;Ft<rt.length;Ft++)br(tt,rt[Ft],At,fe,!0,Ft===0)}if(tt.length){let yt=le.tags||null;if(et==="LineString"&&_e.lineMetrics){yt={};for(const Ft in le.tags)yt[Ft]=le.tags[Ft];yt.mapbox_clip_start=Qe.start/Qe.size,yt.mapbox_clip_end=Qe.end/Qe.size}const rt={geometry:tt,type:et==="Polygon"||et==="MultiPolygon"?3:et==="LineString"||et==="MultiLineString"?2:1,tags:yt};le.id!==null&&(rt.id=le.id),At.features.push(rt)}}function br(At,le,fe,_e,Qe,et){const tt=_e*_e;if(_e>0&&le.size<(Qe?tt:_e))return void(fe.numPoints+=le.length/3);const yt=[];for(let rt=0;rt<le.length;rt+=3)(_e===0||le[rt+2]>tt)&&(fe.numSimplified++,yt.push(le[rt],le[rt+1])),fe.numPoints++;Qe&&function(rt,Ft){let Ct=0;for(let at=0,mt=rt.length,Me=mt-2;at<mt;Me=at,at+=2)Ct+=(rt[at]-rt[Me])*(rt[at+1]+rt[Me+1]);if(Ct>0===Ft)for(let at=0,mt=rt.length;at<mt/2;at+=2){const Me=rt[at],Rt=rt[at+1];rt[at]=rt[mt-2-at],rt[at+1]=rt[mt-1-at],rt[mt-2-at]=Me,rt[mt-1-at]=Rt}}(yt,et),At.push(yt)}const Nr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Kr{constructor(le,fe){const _e=(fe=this.options=function(et,tt){for(const yt in tt)et[yt]=tt[yt];return et}(Object.create(Nr),fe)).debug;if(_e&&console.time("preprocess data"),fe.maxZoom<0||fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(fe.promoteId&&fe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Qe=function(et,tt){const yt=[];if(et.type==="FeatureCollection")for(let rt=0;rt<et.features.length;rt++)Be(yt,et.features[rt],tt,rt);else Be(yt,et.type==="Feature"?et:{geometry:et},tt);return yt}(le,fe);this.tiles={},this.tileCoords=[],_e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",fe.indexMaxZoom,fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Qe=function(et,tt){const yt=tt.buffer/tt.extent;let rt=et;const Ft=dt(et,1,-1-yt,yt,0,-1,2,tt),Ct=dt(et,1,1-yt,2+yt,0,-1,2,tt);return(Ft||Ct)&&(rt=dt(et,1,-yt,1+yt,0,-1,2,tt)||[],Ft&&(rt=Cr(Ft,1).concat(rt)),Ct&&(rt=rt.concat(Cr(Ct,-1)))),rt}(Qe,fe),Qe.length&&this.splitTile(Qe,0,0,0),_e&&(Qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(le,fe,_e,Qe,et,tt,yt){const rt=[le,fe,_e,Qe],Ft=this.options,Ct=Ft.debug;for(;rt.length;){Qe=rt.pop(),_e=rt.pop(),fe=rt.pop(),le=rt.pop();const at=1<<fe,mt=Lr(fe,_e,Qe);let Me=this.tiles[mt];if(!Me&&(Ct>1&&console.time("creation"),Me=this.tiles[mt]=lr(le,fe,_e,Qe,Ft),this.tileCoords.push({z:fe,x:_e,y:Qe}),Ct)){Ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",fe,_e,Qe,Me.numFeatures,Me.numPoints,Me.numSimplified),console.timeEnd("creation"));const Pn=`z${fe}`;this.stats[Pn]=(this.stats[Pn]||0)+1,this.total++}if(Me.source=le,et==null){if(fe===Ft.indexMaxZoom||Me.numPoints<=Ft.indexMaxPoints)continue}else{if(fe===Ft.maxZoom||fe===et)continue;if(et!=null){const Pn=et-fe;if(_e!==tt>>Pn||Qe!==yt>>Pn)continue}}if(Me.source=null,le.length===0)continue;Ct>1&&console.time("clipping");const Rt=.5*Ft.buffer/Ft.extent,nr=.5-Rt,tr=.5+Rt,Ar=1+Rt;let qt=null,Jr=null,jr=null,Rr=null,_r=dt(le,at,_e-Rt,_e+tr,0,Me.minX,Me.maxX,Ft),Ur=dt(le,at,_e+nr,_e+Ar,0,Me.minX,Me.maxX,Ft);le=null,_r&&(qt=dt(_r,at,Qe-Rt,Qe+tr,1,Me.minY,Me.maxY,Ft),Jr=dt(_r,at,Qe+nr,Qe+Ar,1,Me.minY,Me.maxY,Ft),_r=null),Ur&&(jr=dt(Ur,at,Qe-Rt,Qe+tr,1,Me.minY,Me.maxY,Ft),Rr=dt(Ur,at,Qe+nr,Qe+Ar,1,Me.minY,Me.maxY,Ft),Ur=null),Ct>1&&console.timeEnd("clipping"),rt.push(qt||[],fe+1,2*_e,2*Qe),rt.push(Jr||[],fe+1,2*_e,2*Qe+1),rt.push(jr||[],fe+1,2*_e+1,2*Qe),rt.push(Rr||[],fe+1,2*_e+1,2*Qe+1)}}getTile(le,fe,_e){le=+le,fe=+fe,_e=+_e;const Qe=this.options,{extent:et,debug:tt}=Qe;if(le<0||le>24)return null;const yt=1<<le,rt=Lr(le,fe=fe+yt&yt-1,_e);if(this.tiles[rt])return Kt(this.tiles[rt],et);tt>1&&console.log("drilling down to z%d-%d-%d",le,fe,_e);let Ft,Ct=le,at=fe,mt=_e;for(;!Ft&&Ct>0;)Ct--,at>>=1,mt>>=1,Ft=this.tiles[Lr(Ct,at,mt)];return Ft&&Ft.source?(tt>1&&(console.log("found parent tile z%d-%d-%d",Ct,at,mt),console.time("drilling down")),this.splitTile(Ft.source,Ct,at,mt,le,fe,_e),tt>1&&console.timeEnd("drilling down"),this.tiles[rt]?Kt(this.tiles[rt],et):null):null}}function Lr(At,le,fe){return 32*((1<<At)*fe+le)+At}function Hr(At,le){return le?At.properties[le]:At.id}function un(At,le){if(At==null)return!0;if(At.type==="Feature")return Hr(At,le)!=null;if(At.type==="FeatureCollection"){const fe=new Set;for(const _e of At.features){const Qe=Hr(_e,le);if(Qe==null||fe.has(Qe))return!1;fe.add(Qe)}return!0}return!1}function zr(At,le){const fe=new Map;if(At!=null)if(At.type==="Feature")fe.set(Hr(At,le),At);else for(const _e of At.features)fe.set(Hr(_e,le),_e);return fe}class Yr extends F{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(le,fe){return h._(this,void 0,void 0,function*(){const _e=le.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Qe=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);if(!Qe)return null;const et=new K(Qe.features);let tt=Te(et);return tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),{vectorTile:et,rawData:tt.buffer}})}loadData(le){return h._(this,void 0,void 0,function*(){var fe;(fe=this._pendingRequest)===null||fe===void 0||fe.abort();const _e=!!(le&&le.request&&le.request.collectResourceTiming)&&new h.cM(le.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(le,this._pendingRequest),this._geoJSONIndex=le.cluster?new Ie(function({superclusterOptions:tt,clusterProperties:yt}){if(!yt||!tt)return tt;const rt={},Ft={},Ct={accumulated:null,zoom:0},at={properties:null},mt=Object.keys(yt);for(const Me of mt){const[Rt,nr]=yt[Me],tr=h.cT(nr),Ar=h.cT(typeof Rt=="string"?[Rt,["accumulated"],["get",Me]]:Rt);rt[Me]=tr.value,Ft[Me]=Ar.value}return tt.map=Me=>{at.properties=Me;const Rt={};for(const nr of mt)Rt[nr]=rt[nr].evaluate(Ct,at);return Rt},tt.reduce=(Me,Rt)=>{at.properties=Rt;for(const nr of mt)Ct.accumulated=Me[nr],Me[nr]=Ft[nr].evaluate(Ct,at)},tt}(le)).load((yield this._pendingData).features):(Qe=yield this._pendingData,new Kr(Qe,le.geojsonVtOptions)),this.loaded={};const et={};if(_e){const tt=_e.finish();tt&&(et.resourceTiming={},et.resourceTiming[le.source]=JSON.parse(JSON.stringify(tt)))}return et}catch(et){if(delete this._pendingRequest,h.cx(et))return{abandoned:!0};throw et}var Qe})}getData(){return h._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(le){const fe=this.loaded;return fe&&fe[le.uid]?super.reloadTile(le):this.loadTile(le)}loadAndProcessGeoJSON(le,fe){return h._(this,void 0,void 0,function*(){let _e=yield this.loadGeoJSON(le,fe);if(delete this._pendingRequest,typeof _e!="object")throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(j(_e,!0),le.filter){const Qe=h.cT(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Qe.result==="error")throw new Error(Qe.value.map(tt=>`${tt.key}: ${tt.message}`).join(", "));_e={type:"FeatureCollection",features:_e.features.filter(tt=>Qe.value.evaluate({zoom:0},tt))}}return _e})}loadGeoJSON(le,fe){return h._(this,void 0,void 0,function*(){const{promoteId:_e}=le;if(le.request){const Qe=yield h.j(le.request,fe);return this._dataUpdateable=un(Qe.data,_e)?zr(Qe.data,_e):void 0,Qe.data}if(typeof le.data=="string")try{const Qe=JSON.parse(le.data);return this._dataUpdateable=un(Qe,_e)?zr(Qe,_e):void 0,Qe}catch{throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`)}if(!le.dataDiff)throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${le.source}`);return function(Qe,et,tt){var yt,rt,Ft,Ct;if(et.removeAll&&Qe.clear(),et.remove)for(const at of et.remove)Qe.delete(at);if(et.add)for(const at of et.add){const mt=Hr(at,tt);mt!=null&&Qe.set(mt,at)}if(et.update)for(const at of et.update){let mt=Qe.get(at.id);if(mt==null)continue;const Me=!at.removeAllProperties&&(((yt=at.removeProperties)===null||yt===void 0?void 0:yt.length)>0||((rt=at.addOrUpdateProperties)===null||rt===void 0?void 0:rt.length)>0);if((at.newGeometry||at.removeAllProperties||Me)&&(mt=Object.assign({},mt),Qe.set(at.id,mt),Me&&(mt.properties=Object.assign({},mt.properties))),at.newGeometry&&(mt.geometry=at.newGeometry),at.removeAllProperties)mt.properties={};else if(((Ft=at.removeProperties)===null||Ft===void 0?void 0:Ft.length)>0)for(const Rt of at.removeProperties)Object.prototype.hasOwnProperty.call(mt.properties,Rt)&&delete mt.properties[Rt];if(((Ct=at.addOrUpdateProperties)===null||Ct===void 0?void 0:Ct.length)>0)for(const{key:Rt,value:nr}of at.addOrUpdateProperties)mt.properties[Rt]=nr}}(this._dataUpdateable,le.dataDiff,_e),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(le){return h._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(le){return this._geoJSONIndex.getClusterExpansionZoom(le.clusterId)}getClusterChildren(le){return this._geoJSONIndex.getChildren(le.clusterId)}getClusterLeaves(le){return this._geoJSONIndex.getLeaves(le.clusterId,le.limit,le.offset)}}class ur{constructor(le){this.self=le,this.actor=new h.J(le),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(fe,_e)=>{if(this.externalWorkerSourceTypes[fe])throw new Error(`Worker source with name "${fe}" already registered.`);this.externalWorkerSourceTypes[fe]=_e},this.self.addProtocol=h.cz,this.self.removeProtocol=h.cA,this.self.registerRTLTextPlugin=fe=>{h.cU.setMethods(fe)},this.actor.registerMessageHandler("LDT",(fe,_e)=>this._getDEMWorkerSource(fe,_e.source).loadTile(_e)),this.actor.registerMessageHandler("RDT",(fe,_e)=>h._(this,void 0,void 0,function*(){this._getDEMWorkerSource(fe,_e.source).removeTile(_e)})),this.actor.registerMessageHandler("GCEZ",(fe,_e)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(fe,_e.type,_e.source).getClusterExpansionZoom(_e)})),this.actor.registerMessageHandler("GCC",(fe,_e)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(fe,_e.type,_e.source).getClusterChildren(_e)})),this.actor.registerMessageHandler("GCL",(fe,_e)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(fe,_e.type,_e.source).getClusterLeaves(_e)})),this.actor.registerMessageHandler("LD",(fe,_e)=>this._getWorkerSource(fe,_e.type,_e.source).loadData(_e)),this.actor.registerMessageHandler("GD",(fe,_e)=>this._getWorkerSource(fe,_e.type,_e.source).getData()),this.actor.registerMessageHandler("LT",(fe,_e)=>this._getWorkerSource(fe,_e.type,_e.source).loadTile(_e)),this.actor.registerMessageHandler("RT",(fe,_e)=>this._getWorkerSource(fe,_e.type,_e.source).reloadTile(_e)),this.actor.registerMessageHandler("AT",(fe,_e)=>this._getWorkerSource(fe,_e.type,_e.source).abortTile(_e)),this.actor.registerMessageHandler("RMT",(fe,_e)=>this._getWorkerSource(fe,_e.type,_e.source).removeTile(_e)),this.actor.registerMessageHandler("RS",(fe,_e)=>h._(this,void 0,void 0,function*(){if(!this.workerSources[fe]||!this.workerSources[fe][_e.type]||!this.workerSources[fe][_e.type][_e.source])return;const Qe=this.workerSources[fe][_e.type][_e.source];delete this.workerSources[fe][_e.type][_e.source],Qe.removeSource!==void 0&&Qe.removeSource(_e)})),this.actor.registerMessageHandler("RM",fe=>h._(this,void 0,void 0,function*(){delete this.layerIndexes[fe],delete this.availableImages[fe],delete this.workerSources[fe],delete this.demWorkerSources[fe]})),this.actor.registerMessageHandler("SR",(fe,_e)=>h._(this,void 0,void 0,function*(){this.referrer=_e})),this.actor.registerMessageHandler("SRPS",(fe,_e)=>this._syncRTLPluginState(fe,_e)),this.actor.registerMessageHandler("IS",(fe,_e)=>h._(this,void 0,void 0,function*(){this.self.importScripts(_e)})),this.actor.registerMessageHandler("SI",(fe,_e)=>this._setImages(fe,_e)),this.actor.registerMessageHandler("UL",(fe,_e)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(fe).update(_e.layers,_e.removedIds)})),this.actor.registerMessageHandler("SL",(fe,_e)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(fe).replace(_e)}))}_setImages(le,fe){return h._(this,void 0,void 0,function*(){this.availableImages[le]=fe;for(const _e in this.workerSources[le]){const Qe=this.workerSources[le][_e];for(const et in Qe)Qe[et].availableImages=fe}})}_syncRTLPluginState(le,fe){return h._(this,void 0,void 0,function*(){return yield h.cU.syncState(fe,this.self.importScripts)})}_getAvailableImages(le){let fe=this.availableImages[le];return fe||(fe=[]),fe}_getLayerIndex(le){let fe=this.layerIndexes[le];return fe||(fe=this.layerIndexes[le]=new o),fe}_getWorkerSource(le,fe,_e){if(this.workerSources[le]||(this.workerSources[le]={}),this.workerSources[le][fe]||(this.workerSources[le][fe]={}),!this.workerSources[le][fe][_e]){const Qe={sendAsync:(et,tt)=>(et.targetMapId=le,this.actor.sendAsync(et,tt))};switch(fe){case"vector":this.workerSources[le][fe][_e]=new F(Qe,this._getLayerIndex(le),this._getAvailableImages(le));break;case"geojson":this.workerSources[le][fe][_e]=new Yr(Qe,this._getLayerIndex(le),this._getAvailableImages(le));break;default:this.workerSources[le][fe][_e]=new this.externalWorkerSourceTypes[fe](Qe,this._getLayerIndex(le),this._getAvailableImages(le))}}return this.workerSources[le][fe][_e]}_getDEMWorkerSource(le,fe){return this.demWorkerSources[le]||(this.demWorkerSources[le]={}),this.demWorkerSources[le][fe]||(this.demWorkerSources[le][fe]=new P),this.demWorkerSources[le][fe]}}return h.i(self)&&(self.worker=new ur(self)),ur}),A("index",["exports","./shared"],function(h,o){var g="5.6.1";function x(){var y=new o.A(4);return o.A!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}let E,F;const P={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y,n,a){const f=requestAnimationFrame(v=>{p(),n(v)}),{unsubscribe:p}=o.s(y.signal,"abort",()=>{p(),cancelAnimationFrame(f),a(o.c())},!1)},frameAsync(y){return new Promise((n,a)=>{this.frame(y,n,a)})},getImageData(y,n=0){return this.getImageCanvasContext(y).getImageData(-n,-n,y.width+2*n,y.height+2*n)},getImageCanvasContext(y){const n=window.document.createElement("canvas"),a=n.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return n.width=y.width,n.height=y.height,a.drawImage(y,0,0,y.width,y.height),a},resolveURL:y=>(E||(E=document.createElement("a")),E.href=y,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(F==null&&(F=matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}};class C{static testProp(n){if(!C.docStyle)return n[0];for(let a=0;a<n.length;a++)if(n[a]in C.docStyle)return n[a];return n[0]}static create(n,a,f){const p=window.document.createElement(n);return a!==void 0&&(p.className=a),f&&f.appendChild(p),p}static createNS(n,a){return window.document.createElementNS(n,a)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(n,a){n.style[C.transformProp]=a}static addEventListener(n,a,f,p={}){n.addEventListener(a,f,"passive"in p?p:p.capture)}static removeEventListener(n,a,f,p={}){n.removeEventListener(a,f,"passive"in p?p:p.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static getScale(n){const a=n.getBoundingClientRect();return{x:a.width/n.offsetWidth||1,y:a.height/n.offsetHeight||1,boundingClientRect:a}}static getPoint(n,a,f){const p=a.boundingClientRect;return new o.P((f.clientX-p.left)/a.x-n.clientLeft,(f.clientY-p.top)/a.y-n.clientTop)}static mousePos(n,a){const f=C.getScale(n);return C.getPoint(n,f,a)}static touchPos(n,a){const f=[],p=C.getScale(n);for(let v=0;v<a.length;v++)f.push(C.getPoint(n,p,a[v]));return f}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const a=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),f=a.querySelectorAll("script");for(const p of f)p.remove();return C.clean(a),a.innerHTML}static isPossiblyDangerous(n,a){const f=a.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!f.includes("javascript:")&&!f.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const a=n.children;for(const f of a)C.removeAttributes(f),C.clean(f)}static removeAttributes(n){for(const{name:a,value:f}of n.attributes)C.isPossiblyDangerous(a,f)&&n.removeAttribute(a)}}C.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);const D={supported:!1,testSupport:function(y){!U&&j&&(N?K(y):k=y)}};let k,j,U=!1,N=!1;function K(y){const n=y.createTexture();y.bindTexture(y.TEXTURE_2D,n);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,j),y.isContextLost())return;D.supported=!0}catch{}y.deleteTexture(n),U=!0}var ee;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{k&&K(k),k=null,N=!0},j.onerror=()=>{U=!0,k=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let n,a,f,p;y.resetRequestQueue=()=>{n=[],a=0,f=0,p={}},y.addThrottleControl=M=>{const z=f++;return p[z]=M,z},y.removeThrottleControl=M=>{delete p[M],B()},y.getImage=(M,z,V=!0)=>new Promise((W,$)=>{D.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),o.e(M,{type:"image"}),n.push({abortController:z,requestParameters:M,supportImageRefresh:V,state:"queued",onError:X=>{$(X)},onSuccess:X=>{W(X)}}),B()});const v=M=>o._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:z,supportImageRefresh:V,onError:W,onSuccess:$,abortController:X}=M,ce=V===!1&&!o.i(self)&&!o.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((Fe,Re)=>Fe&&Re==="accept",!0));a++;const Ee=ce?T(z,X):o.m(z,X);try{const Fe=yield Ee;delete M.abortController,M.state="completed",Fe.data instanceof HTMLImageElement||o.b(Fe.data)?$(Fe):Fe.data&&$({data:yield(Se=Fe.data,typeof createImageBitmap=="function"?o.f(Se):o.h(Se)),cacheControl:Fe.cacheControl,expires:Fe.expires})}catch(Fe){delete M.abortController,W(Fe)}finally{a--,B()}var Se}),B=()=>{const M=(()=>{for(const z of Object.keys(p))if(p[z]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=a;z<M&&n.length>0;z++){const V=n.shift();V.abortController.signal.aborted?z--:v(V)}},T=(M,z)=>new Promise((V,W)=>{const $=new Image,X=M.url,ce=M.credentials;ce&&ce==="include"?$.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!o.d(X))&&($.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{$.src="",W(o.c())}),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,V({data:$})},$.onerror=()=>{$.onerror=$.onload=null,z.signal.aborted||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=X})}(ee||(ee={})),ee.resetRequestQueue();class se{constructor(n){this._transformRequestFn=n}transformRequest(n,a){return this._transformRequestFn&&this._transformRequestFn(n,a)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function pe(y){const n=[];if(typeof y=="string")n.push({id:"default",url:y});else if(y&&y.length>0){const a=[];for(const{id:f,url:p}of y){const v=`${f}${p}`;a.indexOf(v)===-1&&(a.push(v),n.push({id:f,url:p}))}}return n}function ye(y,n,a){try{const f=new URL(y);return f.pathname+=`${n}${a}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${y}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ue(y){const{userImage:n}=y;return!!(n&&n.render&&n.render())&&(y.data.replace(new Uint8Array(n.data.buffer)),!0)}class Te extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:a,promiseResolve:f}of this.requestors)f(this._getImagesForIds(a));this.requestors=[]}}getImage(n){const a=this.images[n];if(a&&!a.data&&a.spriteData){const f=a.spriteData;a.data=new o.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),a.spriteData=null}return a}addImage(n,a){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,a)&&(this.images[n]=a)}_validate(n,a){let f=!0;const p=a.data||a.spriteData;return this._validateStretch(a.stretchX,p&&p.width)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchX" value`))),f=!1),this._validateStretch(a.stretchY,p&&p.height)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchY" value`))),f=!1),this._validateContent(a.content,a)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "content" value`))),f=!1),f}_validateStretch(n,a){if(!n)return!0;let f=0;for(const p of n){if(p[0]<f||p[1]<p[0]||a<p[1])return!1;f=p[1]}return!0}_validateContent(n,a){if(!n)return!0;if(n.length!==4)return!1;const f=a.spriteData,p=f&&f.width||a.data.width,v=f&&f.height||a.data.height;return!(n[0]<0||p<n[0]||n[1]<0||v<n[1]||n[2]<0||p<n[2]||n[3]<0||v<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,a,f=!0){const p=this.getImage(n);if(f&&(p.data.width!==a.data.width||p.data.height!==a.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=p.version+1,this.images[n]=a,this.updatedImages[n]=!0}removeImage(n){const a=this.images[n];delete this.images[n],delete this.patterns[n],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((a,f)=>{let p=!0;if(!this.isLoaded())for(const v of n)this.images[v]||(p=!1);this.isLoaded()||p?a(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:a})})}_getImagesForIds(n){const a={};for(const f of n){let p=this.getImage(f);p||(this.fire(new o.l("styleimagemissing",{id:f})),p=this.getImage(f)),p?a[f]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:o.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:n,height:a}=this.atlasImage;return{width:n,height:a}}getPattern(n){const a=this.patterns[n],f=this.getImage(n);if(!f)return null;if(a&&a.position.version===f.version)return a.position;if(a)a.position.version=f.version;else{const p={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new o.I(p,f);this.patterns[n]={bin:p,position:v}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const a=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(n,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const v in this.patterns)n.push(this.patterns[v].bin);const{w:a,h:f}=o.p(n),p=this.atlasImage;p.resize({width:a||1,height:f||1});for(const v in this.patterns){const{bin:B}=this.patterns[v],T=B.x+1,M=B.y+1,z=this.getImage(v).data,V=z.width,W=z.height;o.R.copy(z,p,{x:0,y:0},{x:T,y:M},{width:V,height:W}),o.R.copy(z,p,{x:0,y:W-1},{x:T,y:M-1},{width:V,height:1}),o.R.copy(z,p,{x:0,y:0},{x:T,y:M+W},{width:V,height:1}),o.R.copy(z,p,{x:V-1,y:0},{x:T-1,y:M},{width:1,height:W}),o.R.copy(z,p,{x:0,y:0},{x:T+V,y:M},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const a of n){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const f=this.getImage(a);f||o.w(`Image with ID: "${a}" was not found`),ue(f)&&this.updateImage(a,f)}}}const Ke=1e20;function oe(y,n,a,f,p,v,B,T,M){for(let z=n;z<n+f;z++)he(y,a*v+z,v,p,B,T,M);for(let z=a;z<a+p;z++)he(y,z*v+n,1,f,B,T,M)}function he(y,n,a,f,p,v,B){v[0]=0,B[0]=-Ke,B[1]=Ke,p[0]=y[n];for(let T=1,M=0,z=0;T<f;T++){p[T]=y[n+T*a];const V=T*T;do{const W=v[M];z=(p[T]-p[W]+V-W*W)/(T-W)/2}while(z<=B[M]&&--M>-1);M++,v[M]=T,B[M]=z,B[M+1]=Ke}for(let T=0,M=0;T<f;T++){for(;B[M+1]<T;)M++;const z=v[M],V=T-z;y[n+T*a]=p[z]+V*V}}class Ie{constructor(n,a){this.requestManager=n,this.localIdeographFontFamily=a,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return o._(this,void 0,void 0,function*(){const a=[];for(const v in n)for(const B of n[v])a.push(this._getAndCacheGlyphsPromise(v,B));const f=yield Promise.all(a),p={};for(const{stack:v,id:B,glyph:T}of f)p[v]||(p[v]={}),p[v][B]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return p})}_getAndCacheGlyphsPromise(n,a){return o._(this,void 0,void 0,function*(){let f=this.entries[n];f||(f=this.entries[n]={glyphs:{},requests:{},ranges:{}});let p=f.glyphs[a];if(p!==void 0)return{stack:n,id:a,glyph:p};if(p=this._tinySDF(f,n,a),p)return f.glyphs[a]=p,{stack:n,id:a,glyph:p};const v=Math.floor(a/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[v])return{stack:n,id:a,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[v]){const T=Ie.loadGlyphRange(n,v,this.url,this.requestManager);f.requests[v]=T}const B=yield f.requests[v];for(const T in B)this._doesCharSupportLocalGlyph(+T)||(f.glyphs[+T]=B[+T]);return f.ranges[v]=!0,{stack:n,id:a,glyph:B[a]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(n))||o.u["CJK Unified Ideographs"](n)||o.u["Hangul Syllables"](n)||o.u.Hiragana(n)||o.u.Katakana(n)||o.u["CJK Symbols and Punctuation"](n)||o.u["Halfwidth and Fullwidth Forms"](n))}_tinySDF(n,a,f){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(f))return;let v=n.tinySDF;if(!v){let T="400";/bold/i.test(a)?T="900":/medium/i.test(a)?T="500":/light/i.test(a)&&(T="200"),v=n.tinySDF=new Ie.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:T})}const B=v.draw(String.fromCharCode(f));return{id:f,bitmap:new o.q({width:B.width||60,height:B.height||60},B.data),metrics:{width:B.glyphWidth/2||24,height:B.glyphHeight/2||24,left:B.glyphLeft/2+.5||0,top:B.glyphTop/2-27.5||-8,advance:B.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ie.loadGlyphRange=function(y,n,a,f){return o._(this,void 0,void 0,function*(){const p=256*n,v=p+255,B=f.transformRequest(a.replace("{fontstack}",y).replace("{range}",`${p}-${v}`),"Glyphs"),T=yield o.n(B,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${n}, ${p}-${v}`);const M={};for(const z of o.o(T.data))M[z.id]=z;return M})},Ie.TinySDF=class{constructor({fontSize:y=24,buffer:n=3,radius:a=8,cutoff:f=.25,fontFamily:p="sans-serif",fontWeight:v="normal",fontStyle:B="normal"}={}){this.buffer=n,this.cutoff=f,this.radius=a;const T=this.size=y+4*n,M=this._createCanvas(T),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${B} ${v} ${y}px ${p}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(y){const n=document.createElement("canvas");return n.width=n.height=y,n}draw(y){const{width:n,actualBoundingBoxAscent:a,actualBoundingBoxDescent:f,actualBoundingBoxLeft:p,actualBoundingBoxRight:v}=this.ctx.measureText(y),B=Math.ceil(a),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-p))),M=Math.min(this.size-this.buffer,B+Math.ceil(f)),z=T+2*this.buffer,V=M+2*this.buffer,W=Math.max(z*V,0),$=new Uint8ClampedArray(W),X={data:$,width:z,height:V,glyphWidth:T,glyphHeight:M,glyphTop:B,glyphLeft:0,glyphAdvance:n};if(T===0||M===0)return X;const{ctx:ce,buffer:Ee,gridInner:Se,gridOuter:Fe}=this;ce.clearRect(Ee,Ee,T,M),ce.fillText(y,Ee,Ee+B);const Re=ce.getImageData(Ee,Ee,T,M);Fe.fill(Ke,0,W),Se.fill(0,0,W);for(let je=0;je<M;je++)for(let De=0;De<T;De++){const We=Re.data[4*(je*T+De)+3]/255;if(We===0)continue;const Je=(je+Ee)*z+De+Ee;if(We===1)Fe[Je]=0,Se[Je]=Ke;else{const Oe=.5-We;Fe[Je]=Oe>0?Oe*Oe:0,Se[Je]=Oe<0?Oe*Oe:0}}oe(Fe,0,0,z,V,z,this.f,this.v,this.z),oe(Se,Ee,Ee,T,M,z,this.f,this.v,this.z);for(let je=0;je<W;je++){const De=Math.sqrt(Fe[je])-Math.sqrt(Se[je]);$[je]=Math.round(255-255*(De/this.radius+this.cutoff))}return X}};class be{constructor(){this.specification=o.v.light.position}possiblyEvaluate(n,a){return o.B(n.expression.evaluate(a))}interpolate(n,a,f){return{x:o.C.number(n.x,a.x,f),y:o.C.number(n.y,a.y,f),z:o.C.number(n.z,a.z,f)}}}let ct;class Xe extends o.E{constructor(n){super(),ct=ct||new o.r({anchor:new o.D(o.v.light.anchor),position:new be,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(ct),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,a={}){if(!this._validate(o.x,n,a))for(const f in n){const p=n[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),p):this._transitionable.setValue(f,p)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,a,f){return(!f||f.validate!==!1)&&o.y(this,n.call(o.z,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const lt=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Le extends o.E{constructor(n){super(),this._transitionable=new o.t(lt),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(n,a={}){if(!this._validate(o.G,n,a)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in n){const p=n[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),p):this._transitionable.setValue(f,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,a,f={}){return(f==null?void 0:f.validate)!==!1&&o.y(this,n.call(o.z,o.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class ze{constructor(n,a){this.width=n,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,a){const f=n.join(",")+String(a);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(n,a)),this.dashEntry[f]}getDashRanges(n,a,f){const p=[];let v=n.length%2==1?-n[n.length-1]*f:0,B=n[0]*f,T=!0;p.push({left:v,right:B,isDash:T,zeroLength:n[0]===0});let M=n[0];for(let z=1;z<n.length;z++){T=!T;const V=n[z];v=M*f,M+=V,B=M*f,p.push({left:v,right:B,isDash:T,zeroLength:V===0})}return p}addRoundDash(n,a,f){const p=a/2;for(let v=-f;v<=f;v++){const B=this.width*(this.nextRow+f+v);let T=0,M=n[T];for(let z=0;z<this.width;z++){z/M.right>1&&(M=n[++T]);const V=Math.abs(z-M.left),W=Math.abs(z-M.right),$=Math.min(V,W);let X;const ce=v/f*(p+1);if(M.isDash){const Ee=p-Math.abs(ce);X=Math.sqrt($*$+Ee*Ee)}else X=p-Math.sqrt($*$+ce*ce);this.data[B+z]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(n){for(let T=n.length-1;T>=0;--T){const M=n[T],z=n[T+1];M.zeroLength?n.splice(T,1):z&&z.isDash===M.isDash&&(z.left=M.left,n.splice(T,1))}const a=n[0],f=n[n.length-1];a.isDash===f.isDash&&(a.left=f.left-this.width,f.right=a.right+this.width);const p=this.width*this.nextRow;let v=0,B=n[v];for(let T=0;T<this.width;T++){T/B.right>1&&(B=n[++v]);const M=Math.abs(T-B.left),z=Math.abs(T-B.right),V=Math.min(M,z);this.data[p+T]=Math.max(0,Math.min(255,(B.isDash?V:-V)+128))}}addDash(n,a){const f=a?7:0,p=2*f+1;if(this.nextRow+p>this.height)return o.w("LineAtlas out of space"),null;let v=0;for(let T=0;T<n.length;T++)v+=n[T];if(v!==0){const T=this.width/v,M=this.getDashRanges(n,this.width,T);a?this.addRoundDash(M,T,f):this.addRegularDash(M)}const B={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=p,this.dirty=!0,B}bind(n){const a=n.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const it="maplibre_preloaded_worker_pool";class Lt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Lt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[it]}numActive(){return Object.keys(this.active).length}}const ne=Math.floor(P.hardwareConcurrency/2);let Be,Pe;function $e(){return Be||(Be=new Lt),Be}Lt.workerCount=o.H(globalThis)?Math.max(Math.min(ne,3),1):1;class nt{constructor(n,a){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=a;const f=this.workerPool.acquire(a);for(let p=0;p<f.length;p++){const v=new o.J(f[p],a);v.name=`Worker ${p}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,a){const f=[];for(const p of this.actors)f.push(p.sendAsync({type:n,data:a}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,a){for(const f of this.actors)f.registerMessageHandler(n,a)}}function Ze(){return Pe||(Pe=new nt($e(),o.K),Pe.registerMessageHandler("GR",(y,n,a)=>o.m(n,a))),Pe}function pt(y,n){const a=o.L();return o.M(a,a,[1,1,0]),o.N(a,a,[.5*y.width,.5*y.height,1]),y.calculatePosMatrix?o.O(a,a,y.calculatePosMatrix(n.toUnwrapped())):a}function dt(y,n,a,f,p,v,B){var T;const M=function($,X,ce){if($)for(const Ee of $){const Se=X[Ee];if(Se&&Se.source===ce&&Se.type==="fill-extrusion")return!0}else for(const Ee in X){const Se=X[Ee];if(Se.source===ce&&Se.type==="fill-extrusion")return!0}return!1}((T=p==null?void 0:p.layers)!==null&&T!==void 0?T:null,n,y.id),z=v.maxPitchScaleFactor(),V=y.tilesIn(f,z,M);V.sort(Qt);const W=[];for(const $ of V)W.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(n,a,y._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,p,v,z,pt(y.transform,$.tileID),B?(X,ce)=>B($.tileID,X,ce):void 0)});return function($,X){for(const ce in $)for(const Ee of $[ce])Mt(Ee,X);return $}(function($){const X={},ce={};for(const Ee of $){const Se=Ee.queryResults,Fe=Ee.wrappedTileID,Re=ce[Fe]=ce[Fe]||{};for(const je in Se){const De=Se[je],We=Re[je]=Re[je]||{},Je=X[je]=X[je]||[];for(const Oe of De)We[Oe.featureIndex]||(We[Oe.featureIndex]=!0,Je.push(Oe))}}return X}(W),y)}function Qt(y,n){const a=y.tileID,f=n.tileID;return a.overscaledZ-f.overscaledZ||a.canonical.y-f.canonical.y||a.wrap-f.wrap||a.canonical.x-f.canonical.x}function Mt(y,n){const a=y.feature,f=n.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=f}function $t(y,n,a){return o._(this,void 0,void 0,function*(){let f=y;if(y.url?f=(yield o.j(n.transformRequest(y.url,"Source"),a)).data:yield P.frameAsync(a),!f)return null;const p=o.Q(o.e(f,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(p.vectorLayerIds=f.vector_layers.map(v=>v.id)),p})}class jt{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof o.S?new o.S(n.lng,n.lat):o.S.convert(n),this}setSouthWest(n){return this._sw=n instanceof o.S?new o.S(n.lng,n.lat):o.S.convert(n),this}extend(n){const a=this._sw,f=this._ne;let p,v;if(n instanceof o.S)p=n,v=n;else{if(!(n instanceof jt))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(jt.convert(n)):this.extend(o.S.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(o.S.convert(n)):this;if(p=n._sw,v=n._ne,!p||!v)return this}return a||f?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new o.S(p.lng,p.lat),this._ne=new o.S(v.lng,v.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:f}=o.S.convert(n);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&p}static convert(n){return n instanceof jt?n:n&&new jt(n)}static fromLngLat(n,a=0){const f=360*a/40075017,p=f/Math.cos(Math.PI/180*n.lat);return new jt(new o.S(n.lng-p,n.lat-f),new o.S(n.lng+p,n.lat+f))}adjustAntiMeridian(){const n=new o.S(this._sw.lng,this._sw.lat),a=new o.S(this._ne.lng,this._ne.lat);return new jt(n,n.lng>a.lng?new o.S(a.lng+360,a.lat):a)}}class vr{constructor(n,a,f){this.bounds=jt.convert(this.validateBounds(n)),this.minzoom=a||0,this.maxzoom=f||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const a=Math.pow(2,n.z),f=Math.floor(o.V(this.bounds.getWest())*a),p=Math.floor(o.U(this.bounds.getNorth())*a),v=Math.ceil(o.V(this.bounds.getEast())*a),B=Math.ceil(o.U(this.bounds.getSouth())*a);return n.x>=f&&n.x<v&&n.y>=p&&n.y<B}}class It extends o.E{constructor(n,a,f,p){if(super(),this.id=n,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(a,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(o.e(this,n),n.bounds&&(this.tileBounds=new vr(n.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new o.k(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(n){return o._(this,void 0,void 0,function*(){const a=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(a,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};f.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((v,B)=>{n.reloadPromise={resolve:v,reject:B}})}else n.actor=this.dispatcher.getActor(),p="LT";n.abortController=new AbortController;try{const v=yield n.actor.sendAsync({type:p,data:f},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,v)}catch(v){if(delete n.abortController,n.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,a){if(a&&a.resourceTiming&&(n.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&n.setExpiryData(a),n.loadVectorData(a,this.map.painter),n.reloadPromise){const f=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(f.resolve).catch(f.reject)}}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ge extends o.E{constructor(n,a,f,p){super(),this.id=n,this.dispatcher=f,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},a),o.e(this,o.Q(a,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(n=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(o.e(this,a),a.bounds&&(this.tileBounds=new vr(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return o.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return o._(this,void 0,void 0,function*(){const a=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const f=yield ee.getImage(this.map._requestManager.transformRequest(a,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&n.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const p=this.map.painter.context,v=p.gl,B=f.data;n.texture=this.map.painter.getTileTexture(B.width),n.texture?n.texture.update(B,{useMipmap:!0}):(n.texture=new o.T(p,B,v.RGBA,{useMipmap:!0}),n.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(f){if(delete n.abortController,n.aborted)n.state="unloaded";else if(f)throw n.state="errored",f}})}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Cr extends Ge{constructor(n,a,f,p){super(n,a,f,p),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(n){return o._(this,void 0,void 0,function*(){const a=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(a,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const p=yield ee.getImage(f,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){const v=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const B=o.b(v)&&o.W()?v:yield this.readImageNow(v),T={type:this.type,uid:n.uid,source:this.id,rawImageData:B,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const M=yield n.actor.sendAsync({type:"LDT",data:T});n.dem=M,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}})}readImageNow(n){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.X()){const a=n.width+2,f=n.height+2;try{return new o.R({width:a,height:f},yield o.Y(n,-1,-1,a,f))}catch{}}return P.getImageData(n,1)})}_getNeighboringTiles(n){const a=n.canonical,f=Math.pow(2,a.z),p=(a.x-1+f)%f,v=a.x===0?n.wrap-1:n.wrap,B=(a.x+1+f)%f,T=a.x+1===f?n.wrap+1:n.wrap,M={};return M[new o.Z(n.overscaledZ,v,a.z,p,a.y).key]={backfilled:!1},M[new o.Z(n.overscaledZ,T,a.z,B,a.y).key]={backfilled:!1},a.y>0&&(M[new o.Z(n.overscaledZ,v,a.z,p,a.y-1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,n.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,T,a.z,B,a.y-1).key]={backfilled:!1}),a.y+1<f&&(M[new o.Z(n.overscaledZ,v,a.z,p,a.y+1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,n.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,T,a.z,B,a.y+1).key]={backfilled:!1}),M}unloadTile(n){return o._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class pr extends o.E{constructor(n,a,f,p){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(p),this._data=a.data,this._options=o.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId,a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(a.buffer!==void 0?a.buffer:128),tolerance:this._pixelsToTileUnits(a.tolerance!==void 0?a.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(a.clusterMaxZoom),minPoints:Math.max(2,a.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(a.clusterRadius||50),log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(n){return n*(o.$/this.tileSize)}_getClusterMaxZoom(n){const a=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${a}"`),a}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return o._(this,void 0,void 0,function*(){const n=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}getCoordinatesFromGeometry(n){return n.type==="GeometryCollection"?n.geometries.map(a=>a.coordinates).flat(1/0):n.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const n=new jt,a=yield this.getData();let f;switch(a.type){case"FeatureCollection":f=a.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":f=this.getCoordinatesFromGeometry(a.geometry);break;default:f=this.getCoordinatesFromGeometry(a)}if(f.length==0)return n;for(let p=0;p<f.length-1;p+=2)n.extend([f[p],f[p+1]]);return n})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,a,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:a,offset:f}})}_updateWorkerData(n){return o._(this,void 0,void 0,function*(){const a=o.e({type:this.type},this.workerOptions);n?a.dataDiff=n:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(P.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let p=null;f.resourceTiming&&f.resourceTiming[this.id]&&(p=f.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&o.e(v,{resourceTiming:p}),this.fire(new o.l("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(f))}})}loaded(){return this._pendingLoads===0}loadTile(n){return o._(this,void 0,void 0,function*(){const a=n.actor?"RT":"LT";n.actor=this.actor;const f={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};n.abortController=new AbortController;const p=yield this.actor.sendAsync({type:a,data:f},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(p,this.map.painter,a==="RT")})}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Kt extends o.E{constructor(n,a,f,p){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=f,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=a}load(n){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield ee.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,n&&(this.coordinates=n),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new o.k(a))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const a=n.map(o.a0.fromLngLat);var f;return this.tileID=function(p){const v=o.a1.fromPoints(p),B=v.width(),T=v.height(),M=Math.max(B,T),z=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),V=Math.pow(2,z);return new o.a3(z,Math.floor((v.minX+v.maxX)/2*V),Math.floor((v.minY+v.maxY)/2*V))}(a),this.terrainTileRanges=this._getOverlappingTileRanges(a),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=a.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,a=n.gl;this.texture||(this.texture=new o.T(n,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let f=!1;for(const p in this.tiles){const v=this.tiles[p];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:a,minY:f,maxX:p,maxY:v}=o.a1.fromPoints(n),B={};for(let T=0;T<=o.a2;T++){const M=Math.pow(2,T),z=Math.floor(a*M),V=Math.floor(f*M),W=Math.floor(p*M),$=Math.floor(v*M);B[T]={minTileX:z,minTileY:V,maxTileX:W,maxTileY:$}}return B}}class ar extends Kt{constructor(n,a,f,p){super(n,a,f,p),this.roundZoom=!0,this.type="video",this.options=a}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const a of n.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield o.a4(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new o.k(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const a=this.video.seekable;n<a.start(0)||n>a.end(0)?this.fire(new o.k(new o.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,a=n.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(n,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let f=!1;for(const p in this.tiles){const v=this.tiles[p];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class lr extends Kt{constructor(n,a,f,p){super(n,a,f,p),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(B=>typeof B!="number"))||this.fire(new o.k(new o.a5(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a5(`sources.${n}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new o.k(new o.a5(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a5(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a5(`sources.${n}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,f=a.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(a,this.canvas,f.RGBA,{premultiply:!0});let p=!1;for(const v in this.tiles){const B=this.tiles[v];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const cr={},br=y=>{switch(y){case"geojson":return pr;case"image":return Kt;case"raster":return Ge;case"raster-dem":return Cr;case"vector":return It;case"video":return ar;case"canvas":return lr}return cr[y]},Nr="RTLPluginLoaded";class Kr extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ze()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return o._(this,arguments,void 0,function*(a,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Nr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Lr=null;function Hr(){return Lr||(Lr=new Kr),Lr}class un{constructor(n,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=o.a6(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const a=n+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,a,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(p,v){const B={};if(!v)return B;for(const T of p){const M=T.layerIds.map(z=>v.getLayer(z)).filter(Boolean);if(M.length!==0){T.layers=M,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(z=>M.filter(V=>V.id===z)[0]));for(const z of M)B[z.id]=T}}return B}(n.buckets,a==null?void 0:a.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const v=this.buckets[p];if(v instanceof o.a8){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const v=this.buckets[p];if(v instanceof o.a8&&v.hasRTLText){this.hasRTLText=!0,Hr().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const v=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(p).queryRadius(v))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new o.a7}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const f in this.buckets){const p=this.buckets[f];p.uploadPending()&&p.upload(n)}const a=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(n,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(n,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,a,f,p,v,B,T,M,z,V,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:v,scale:B,tileSize:this.tileSize,pixelPosMatrix:V,transform:M,params:T,queryPadding:this.queryPadding*z,getElevation:W},n,a,f):{}}querySourceFeatures(n,a){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const p=f.loadVTLayers(),v=a&&a.sourceLayer?a.sourceLayer:"",B=p._geojsonTileLayer||p[v];if(!B)return;const T=o.a9(a&&a.filter),{z:M,x:z,y:V}=this.tileID.canonical,W={z:M,x:z,y:V};for(let $=0;$<B.length;$++){const X=B.feature($);if(T.needGeometry){const Se=o.aa(X,!0);if(!T.filter(new o.F(this.tileID.overscaledZ),Se,this.tileID.canonical))continue}else if(!T.filter(new o.F(this.tileID.overscaledZ),X))continue;const ce=f.getId(X,v),Ee=new o.ab(X,M,z,V,ce);Ee.tile=W,n.push(Ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const a=this.expirationTime;if(n.cacheControl){const f=o.ac(n.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const f=Date.now();let p=!1;if(this.expirationTime>f)p=!1;else if(a)if(this.expirationTime<a)p=!0;else{const v=this.expirationTime-a;v?this.expirationTime=f+Math.max(v,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!a.style.hasLayer(p))continue;const v=this.buckets[p],B=v.layers[0].sourceLayer||"_geojsonTileLayer",T=f[B],M=n[B];if(!T||!M||Object.keys(M).length===0)continue;v.update(M,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=a&&a.style&&a.style.getLayer(p);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=P.now()+n}setDependencies(n,a){const f={};for(const p of a)f[p]=!0;this.dependencies[n]=f}hasDependency(n,a){for(const f of n){const p=this.dependencies[f];if(p){for(const v of a)if(p[v])return!0}}return!1}}class zr{constructor(n,a){this.max=n,this.onRemove=a,this.reset()}reset(){for(const n in this.data)for(const a of this.data[n])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(n,a,f){const p=n.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const v={value:a,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(n,v)},f)),this.data[p].push(v),this.order.push(p),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const a=this.data[n].shift();return a.timeout&&clearTimeout(a.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),a.value}getByKey(n){const a=this.data[n];return a?a[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,a){if(!this.has(n))return this;const f=n.wrapped().key,p=a===void 0?0:this.data[f].indexOf(a),v=this.data[f][p];return this.data[f].splice(p,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(n){const a=[];for(const f in this.data)for(const p of this.data[f])n(p.value)||a.push(p);for(const f of a)this.remove(f.value.tileID,f)}}class Yr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,a,f){const p=String(a);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][p]=this.stateChanges[n][p]||{},o.e(this.stateChanges[n][p],f),this.deletedStates[n]===null){this.deletedStates[n]={};for(const v in this.state[n])v!==p&&(this.deletedStates[n][v]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][p]===null){this.deletedStates[n][p]={};for(const v in this.state[n][p])f[v]||(this.deletedStates[n][p][v]=null)}else for(const v in f)this.deletedStates[n]&&this.deletedStates[n][p]&&this.deletedStates[n][p][v]===null&&delete this.deletedStates[n][p][v]}removeFeatureState(n,a,f){if(this.deletedStates[n]===null)return;const p=String(a);if(this.deletedStates[n]=this.deletedStates[n]||{},f&&a!==void 0)this.deletedStates[n][p]!==null&&(this.deletedStates[n][p]=this.deletedStates[n][p]||{},this.deletedStates[n][p][f]=null);else if(a!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][p])for(f in this.deletedStates[n][p]={},this.stateChanges[n][p])this.deletedStates[n][p][f]=null;else this.deletedStates[n][p]=null;else this.deletedStates[n]=null}getState(n,a){const f=String(a),p=o.e({},(this.state[n]||{})[f],(this.stateChanges[n]||{})[f]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const v=this.deletedStates[n][a];if(v===null)return{};for(const B in v)delete p[B]}return p}initializeTileState(n,a){n.setFeatureState(this.state,a)}coalesceChanges(n,a){const f={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const v={};for(const B in this.stateChanges[p])this.state[p][B]||(this.state[p][B]={}),o.e(this.state[p][B],this.stateChanges[p][B]),v[B]=this.state[p][B];f[p]=v}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const v={};if(this.deletedStates[p]===null)for(const B in this.state[p])v[B]={},this.state[p][B]={};else for(const B in this.deletedStates[p]){if(this.deletedStates[p][B]===null)this.state[p][B]={};else for(const T of Object.keys(this.deletedStates[p][B]))delete this.state[p][B][T];v[B]=this.state[p][B]}f[p]=f[p]||{},o.e(f[p],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const p in n)n[p].setFeatureState(f,a)}}const ur=89.25;function At(y,n){const a=o.ag(n.lat,-o.ah,o.ah);return new o.P(o.V(n.lng)*y,o.U(a)*y)}function le(y,n){return new o.a0(n.x/y,n.y/y).toLngLat()}function fe(y){return y.cameraToCenterDistance*Math.min(.85*Math.tan(o.ad(90-y.pitch)),Math.tan(o.ad(ur-y.pitch)))}function _e(y,n){const a=y.canonical,f=n/o.ae(a.z),p=a.x+Math.pow(2,a.z)*y.wrap,v=o.af(new Float64Array(16));return o.M(v,v,[p*f,a.y*f,0]),o.N(v,v,[f/o.$,f/o.$,1]),v}function Qe(y,n,a,f,p){const v=o.a0.fromLngLat(y,n),B=p*o.ai(1,y.lat),T=B*Math.cos(o.ad(a)),M=Math.sqrt(B*B-T*T),z=M*Math.sin(o.ad(-f)),V=M*Math.cos(o.ad(-f));return new o.a0(v.x+z,v.y+V,v.z+T)}function et(y,n,a){const f=n.intersectsFrustum(y);if(!a||f===0)return f;const p=n.intersectsPlane(a);return p===0?0:f===2&&p===2?2:1}function tt(y,n,a){let f=0;const p=(a-n)/10;for(let v=0;v<10;v++)f+=p*Math.pow(Math.cos(n+(v+.5)/10*(a-n)),y);return f}function yt(y,n){return function(a,f,p,v,B){const T=2*((y-1)/o.aj(Math.cos(o.ad(ur-B))/Math.cos(o.ad(ur)))-1),M=Math.acos(p/v),z=2*tt(T-1,0,o.ad(B/2)),V=Math.min(o.ad(ur),M+o.ad(B/2)),W=tt(T-1,Math.min(V,M-o.ad(B/2)),V),$=Math.atan(f/p),X=Math.hypot(f,p);let ce=a;return ce+=o.aj(v/X/Math.max(.5,Math.cos(o.ad(B/2)))),ce+=T*o.aj(Math.cos($))/2,ce-=o.aj(Math.max(1,W/z/n))/2,ce}}const rt=yt(9.314,3);function Ft(y,n){const a=(n.roundZoom?Math.round:Math.floor)(y.zoom+o.aj(y.tileSize/n.tileSize));return Math.max(0,a)}function Ct(y,n){const a=y.getCameraFrustum(),f=y.getClippingPlane(),p=y.screenPointToMercatorCoordinate(y.getCameraPoint()),v=o.a0.fromLngLat(y.center,y.elevation);p.z=v.z+Math.cos(y.pitchInRadians)*y.cameraToCenterDistance/y.worldSize;const B=y.getCoveringTilesDetailsProvider(),T=B.allowVariableZoom(y,n),M=Ft(y,n),z=n.minzoom||0,V=n.maxzoom!==void 0?n.maxzoom:y.maxZoom,W=Math.min(Math.max(0,M),V),$=Math.pow(2,W),X=[$*p.x,$*p.y,0],ce=[$*v.x,$*v.y,0],Ee=Math.hypot(v.x-p.x,v.y-p.y),Se=Math.abs(v.z-p.z),Fe=Math.hypot(Ee,Se),Re=We=>({zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}),je=[],De=[];if(y.renderWorldCopies&&B.allowWorldCopies())for(let We=1;We<=3;We++)je.push(Re(-We)),je.push(Re(We));for(je.push(Re(0));je.length>0;){const We=je.pop(),Je=We.x,Oe=We.y;let ht=We.fullyVisible;const St={x:Je,y:Oe,z:We.zoom},gt=B.getTileBoundingVolume(St,We.wrap,y.elevation,n);if(!ht){const rr=et(a,gt,f);if(rr===0)continue;ht=rr===2}const _t=B.distanceToTile2d(p.x,p.y,St,gt);let xt=M;T&&(xt=(n.calculateTileZoom||rt)(y.zoom+o.aj(y.tileSize/n.tileSize),_t,Se,Fe,y.fov)),xt=(n.roundZoom?Math.round:Math.floor)(xt),xt=Math.max(0,xt);const ir=Math.min(xt,V);if(We.wrap=B.getWrap(v,St,We.wrap),We.zoom>=ir){if(We.zoom<z)continue;const rr=W-We.zoom,Dt=X[0]-.5-(Je<<rr),mr=X[1]-.5-(Oe<<rr),rn=n.reparseOverscaled?Math.max(We.zoom,xt):We.zoom;De.push({tileID:new o.Z(We.zoom===V?rn:We.zoom,We.wrap,We.zoom,Je,Oe),distanceSq:o.ak([ce[0]-.5-Je,ce[1]-.5-Oe]),tileDistanceToCamera:Math.sqrt(Dt*Dt+mr*mr)})}else for(let rr=0;rr<4;rr++)je.push({zoom:We.zoom+1,x:(Je<<1)+rr%2,y:(Oe<<1)+(rr>>1),wrap:We.wrap,fullyVisible:ht})}return De.sort((We,Je)=>We.distanceSq-Je.distanceSq).map(We=>We.tileID)}const at=o.a1.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class mt extends o.E{constructor(n,a,f){super(),this.id=n,this.dispatcher=f,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,v,B,T)=>{const M=new(br(v.type))(p,v,B,T);if(M.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${M.id}`);return M})(n,a,f,this),this._tiles={},this._cache=new zr(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Yr,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const a=this._tiles[n];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,a,f){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,a,f)}catch(p){n.state="errored",p.status!==404?this._source.fire(new o.k(p,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new o.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const f=this._tiles[a];f.upload(n),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Me).map(n=>n.key)}getRenderableIds(n){const a=[];for(const f in this._tiles)this._isIdRenderable(f,n)&&a.push(this._tiles[f]);return n?a.sort((f,p)=>{const v=f.tileID,B=p.tileID,T=new o.P(v.canonical.x,v.canonical.y)._rotate(-this.transform.bearingInRadians),M=new o.P(B.canonical.x,B.canonical.y)._rotate(-this.transform.bearingInRadians);return v.overscaledZ-B.overscaledZ||M.y-T.y||M.x-T.x}).map(f=>f.tileID.key):a.map(f=>f.tileID).sort(Me).map(f=>f.key)}hasRenderableParent(n){const a=this.findLoadedParent(n,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(n,a){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(a||!this._tiles[n].holdingForFade())}reload(n){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)n?this._reloadTile(a,"expired"):this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(n,a){return o._(this,void 0,void 0,function*(){const f=this._tiles[n];f&&(f.state!=="loading"&&(f.state=a),yield this._loadTile(f,n,a))})}_tileLoaded(n,a,f){n.timeAdded=P.now(),f==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(a,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const a=this.getRenderableIds();for(let p=0;p<a.length;p++){const v=a[p];if(n.neighboringTiles&&n.neighboringTiles[v]){const B=this.getTileByID(v);f(n,B),f(B,n)}}function f(p,v){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let B=v.tileID.canonical.x-p.tileID.canonical.x;const T=v.tileID.canonical.y-p.tileID.canonical.y,M=Math.pow(2,p.tileID.canonical.z),z=v.tileID.key;B===0&&T===0||Math.abs(T)>1||(Math.abs(B)>1&&(Math.abs(B+M)===1?B+=M:Math.abs(B-M)===1&&(B-=M)),v.dem&&p.dem&&(p.dem.backfillBorder(v.dem,B,T),p.neighboringTiles&&p.neighboringTiles[z]&&(p.neighboringTiles[z].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,a,f,p){for(const v in this._tiles){let B=this._tiles[v];if(p[v]||!B.hasData()||B.tileID.overscaledZ<=a||B.tileID.overscaledZ>f)continue;let T=B.tileID;for(;B&&B.tileID.overscaledZ>a+1;){const z=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[z.key],B&&B.hasData()&&(T=z)}let M=T;for(;M.overscaledZ>a;)if(M=M.scaledTo(M.overscaledZ-1),n[M.key]||n[M.canonical.key]){p[T.key]=T;break}}}findLoadedParent(n,a){if(n.key in this._loadedParentTiles){const f=this._loadedParentTiles[n.key];return f&&f.tileID.overscaledZ>=a?f:null}for(let f=n.overscaledZ-1;f>=a;f--){const p=n.scaledTo(f),v=this._getLoadedTile(p);if(v)return v}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const a=this._tiles[n.key];return a&&a.hasData()?a:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const a=Math.ceil(n.width/this._source.tileSize)+1,f=Math.ceil(n.height/this._source.tileSize)+1,p=Math.floor(a*f*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(v)}handleWrapJump(n){const a=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,a){const f={};for(const p in this._tiles){const v=this._tiles[p];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+a),f[v.tileID.key]=v}this._tiles=f;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(n,a,f,p,v,B){const T={},M={},z=Object.keys(n),V=P.now();for(const W of z){const $=n[W],X=this._tiles[W];if(!X||X.fadeEndTime!==0&&X.fadeEndTime<=V)continue;const ce=this.findLoadedParent($,a),Ee=this.findLoadedSibling($),Se=ce||Ee||null;Se&&(this._addTile(Se.tileID),T[Se.tileID.key]=Se.tileID),M[W]=$}this._retainLoadedChildren(M,p,f,n);for(const W in T)n[W]||(this._coveredTiles[W]=!0,n[W]=T[W]);if(B){const W={},$={};for(const X of v)this._tiles[X.key].hasData()?W[X.key]=X:$[X.key]=X;for(const X in $){const ce=$[X].children(this._source.maxzoom);this._tiles[ce[0].key]&&this._tiles[ce[1].key]&&this._tiles[ce[2].key]&&this._tiles[ce[3].key]&&(W[ce[0].key]=n[ce[0].key]=ce[0],W[ce[1].key]=n[ce[1].key]=ce[1],W[ce[2].key]=n[ce[2].key]=ce[2],W[ce[3].key]=n[ce[3].key]=ce[3],delete $[X])}for(const X in $){const ce=$[X],Ee=this.findLoadedParent(ce,this._source.minzoom),Se=this.findLoadedSibling(ce),Fe=Ee||Se||null;if(Fe){W[Fe.tileID.key]=n[Fe.tileID.key]=Fe.tileID;for(const Re in W)W[Re].isChildOf(Fe.tileID)&&delete W[Re]}}for(const X in this._tiles)W[X]||(this._coveredTiles[X]=!0)}}update(n,a){if(!this._sourceLoaded||this._paused)return;let f;this.transform=n,this.terrain=a,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new o.Z(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(f=Ct(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter(V=>this._source.hasTile(V)))):f=[];const p=Ft(n,this._source),v=Math.max(p-mt.maxOverzooming,this._source.minzoom),B=Math.max(p+mt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const V={};for(const W of f)if(W.canonical.z>this._source.minzoom){const $=W.scaledTo(W.canonical.z-1);V[$.key]=$;const X=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));V[X.key]=X}f=f.concat(Object.values(V))}const T=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,p);Rt(this._source.type)&&this._updateCoveredAndRetainedTiles(M,v,B,p,f,a);for(const V in M)this._tiles[V].clearFadeHold();const z=o.al(this._tiles,M);for(const V of z){const W=this._tiles[V];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,a){var f;const p={},v={},B=Math.max(a-mt.maxOverzooming,this._source.minzoom),T=Math.max(a+mt.maxUnderzooming,this._source.minzoom),M={};for(const z of n){const V=this._addTile(z);p[z.key]=z,V.hasData()||a<this._source.maxzoom&&(M[z.key]=z)}this._retainLoadedChildren(M,a,T,p);for(const z of n){let V=this._tiles[z.key];if(V.hasData())continue;if(a+1>this._source.maxzoom){const $=z.children(this._source.maxzoom)[0],X=this.getTile($);if(X&&X.hasData()){p[$.key]=$;continue}}else{const $=z.children(this._source.maxzoom);if(p[$[0].key]&&p[$[1].key]&&p[$[2].key]&&p[$[3].key])continue}let W=V.wasRequested();for(let $=z.overscaledZ-1;$>=B;--$){const X=z.scaledTo($);if(v[X.key])break;if(v[X.key]=!0,V=this.getTile(X),!V&&W&&(V=this._addTile(X)),V){const ce=V.hasData();if((ce||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||W)&&(p[X.key]=X),W=V.wasRequested(),ce)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const a=[];let f,p=this._tiles[n].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){f=this._loadedParentTiles[p.key];break}a.push(p.key);const v=p.scaledTo(p.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;p=v}for(const v of a)this._loadedParentTiles[v]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const a=this._tiles[n].tileID,f=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=f}}_addTile(n){let a=this._tiles[n.key];if(a)return a;a=this._cache.getAndRemove(n),a&&(this._setTileReloadTimer(n.key,a),a.tileID=n,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,a)));const f=a;return a||(a=new un(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(a,n.key,a.state)),a.uses++,this._tiles[n.key]=a,f||this._source.fire(new o.l("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(n,a){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const f=a.getExpiryTimeout();f&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},f))}refreshTiles(n){for(const a in this._tiles)(this._isIdRenderable(a)||this._tiles[a].state=="errored")&&n.some(f=>f.equals(this._tiles[a].tileID.canonical))&&this._reloadTile(a,"expired")}_removeTile(n){const a=this._tiles[n];a&&(a.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(n){const a=n.sourceDataType;n.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&a==="content"&&(this.reload(n.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,a,f){const p=[],v=this.transform;if(!v)return p;const B=v.getCoveringTilesDetailsProvider().allowWorldCopies(),T=f?v.getCameraQueryGeometry(n):n,M=X=>v.screenPointToMercatorCoordinate(X,this.terrain),z=this.transformBbox(n,M,!B),V=this.transformBbox(T,M,!B),W=this.getIds(),$=o.a1.fromPoints(V);for(let X=0;X<W.length;X++){const ce=this._tiles[W[X]];if(ce.holdingForFade())continue;const Ee=B?[ce.tileID]:[ce.tileID.unwrapTo(-1),ce.tileID.unwrapTo(0)],Se=Math.pow(2,v.zoom-ce.tileID.overscaledZ),Fe=a*ce.queryPadding*o.$/ce.tileSize/Se;for(const Re of Ee){const je=$.map(De=>Re.getTilePoint(new o.a0(De.x,De.y)));if(je.expandBy(Fe),je.intersects(at)){const De=z.map(Je=>Re.getTilePoint(Je)),We=V.map(Je=>Re.getTilePoint(Je));p.push({tile:ce,tileID:B?Re:Re.unwrapTo(0),queryGeometry:De,cameraQueryGeometry:We,scale:Se})}}}return p}transformBbox(n,a,f){let p=n.map(a);if(f){const v=o.a1.fromPoints(n);v.shrinkBy(.001*Math.min(v.width(),v.height()));const B=v.map(a);o.a1.fromPoints(p).covers(B)||(p=p.map(T=>T.x>.5?new o.a0(T.x-1,T.y,T.z):T))}return p}getVisibleCoordinates(n){const a=this.getRenderableIds(n).map(f=>this._tiles[f].tileID);return this.transform&&this.transform.populateCache(a),a}hasTransition(){if(this._source.hasTransition())return!0;if(Rt(this._source.type)){const n=P.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=n)return!0}return!1}setFeatureState(n,a,f){this._state.updateState(n=n||"_geojsonTileLayer",a,f)}removeFeatureState(n,a,f){this._state.removeFeatureState(n=n||"_geojsonTileLayer",a,f)}getFeatureState(n,a){return this._state.getState(n=n||"_geojsonTileLayer",a)}setDependencies(n,a,f){const p=this._tiles[n];p&&p.setDependencies(a,f)}reloadTilesForDependencies(n,a){for(const f in this._tiles)this._tiles[f].hasDependency(n,a)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(n,a))}}function Me(y,n){const a=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*n.wrap)-+(n.wrap<0);return y.overscaledZ-n.overscaledZ||f-a||n.canonical.y-y.canonical.y||n.canonical.x-y.canonical.x}function Rt(y){return y==="raster"||y==="image"||y==="video"}mt.maxOverzooming=10,mt.maxUnderzooming=3;class nr{constructor(n,a){this.reset(n,a)}reset(n,a){this.points=n||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=o.ag(n,0,1);let a=1,f=this._distances[a];const p=n*this.paddedLength+this.padding;for(;f<p&&a<this._distances.length;)f=this._distances[++a];const v=a-1,B=this._distances[v],T=f-B,M=T>0?(p-B)/T:0;return this.points[v].mult(1-M).add(this.points[a].mult(M))}}function tr(y,n){let a=!0;return y==="always"||y!=="never"&&n!=="never"||(a=!1),a}class Ar{constructor(n,a,f){const p=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(n/f),this.yCellCount=Math.ceil(a/f);for(let B=0;B<this.xCellCount*this.yCellCount;B++)p.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=a,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,a,f,p,v){this._forEachCell(a,f,p,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(a),this.bboxes.push(f),this.bboxes.push(p),this.bboxes.push(v)}insertCircle(n,a,f,p){this._forEachCell(a-p,f-p,a+p,f+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(a),this.circles.push(f),this.circles.push(p)}_insertBoxCell(n,a,f,p,v,B){this.boxCells[v].push(B)}_insertCircleCell(n,a,f,p,v,B){this.circleCells[v].push(B)}_query(n,a,f,p,v,B,T){if(f<0||n>this.width||p<0||a>this.height)return[];const M=[];if(n<=0&&a<=0&&this.width<=f&&this.height<=p){if(v)return[{key:null,x1:n,y1:a,x2:f,y2:p}];for(let z=0;z<this.boxKeys.length;z++)M.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const V=this.circles[3*z],W=this.circles[3*z+1],$=this.circles[3*z+2];M.push({key:this.circleKeys[z],x1:V-$,y1:W-$,x2:V+$,y2:W+$})}}else this._forEachCell(n,a,f,p,this._queryCell,M,{hitTest:v,overlapMode:B,seenUids:{box:{},circle:{}}},T);return M}query(n,a,f,p){return this._query(n,a,f,p,!1,null)}hitTest(n,a,f,p,v,B){return this._query(n,a,f,p,!0,v,B).length>0}hitTestCircle(n,a,f,p,v){const B=n-f,T=n+f,M=a-f,z=a+f;if(T<0||B>this.width||z<0||M>this.height)return!1;const V=[];return this._forEachCell(B,M,T,z,this._queryCellCircle,V,{hitTest:!0,overlapMode:p,circle:{x:n,y:a,radius:f},seenUids:{box:{},circle:{}}},v),V.length>0}_queryCell(n,a,f,p,v,B,T,M){const{seenUids:z,hitTest:V,overlapMode:W}=T,$=this.boxCells[v];if($!==null){const ce=this.bboxes;for(const Ee of $)if(!z.box[Ee]){z.box[Ee]=!0;const Se=4*Ee,Fe=this.boxKeys[Ee];if(n<=ce[Se+2]&&a<=ce[Se+3]&&f>=ce[Se+0]&&p>=ce[Se+1]&&(!M||M(Fe))&&(!V||!tr(W,Fe.overlapMode))&&(B.push({key:Fe,x1:ce[Se],y1:ce[Se+1],x2:ce[Se+2],y2:ce[Se+3]}),V))return!0}}const X=this.circleCells[v];if(X!==null){const ce=this.circles;for(const Ee of X)if(!z.circle[Ee]){z.circle[Ee]=!0;const Se=3*Ee,Fe=this.circleKeys[Ee];if(this._circleAndRectCollide(ce[Se],ce[Se+1],ce[Se+2],n,a,f,p)&&(!M||M(Fe))&&(!V||!tr(W,Fe.overlapMode))){const Re=ce[Se],je=ce[Se+1],De=ce[Se+2];if(B.push({key:Fe,x1:Re-De,y1:je-De,x2:Re+De,y2:je+De}),V)return!0}}}return!1}_queryCellCircle(n,a,f,p,v,B,T,M){const{circle:z,seenUids:V,overlapMode:W}=T,$=this.boxCells[v];if($!==null){const ce=this.bboxes;for(const Ee of $)if(!V.box[Ee]){V.box[Ee]=!0;const Se=4*Ee,Fe=this.boxKeys[Ee];if(this._circleAndRectCollide(z.x,z.y,z.radius,ce[Se+0],ce[Se+1],ce[Se+2],ce[Se+3])&&(!M||M(Fe))&&!tr(W,Fe.overlapMode))return B.push(!0),!0}}const X=this.circleCells[v];if(X!==null){const ce=this.circles;for(const Ee of X)if(!V.circle[Ee]){V.circle[Ee]=!0;const Se=3*Ee,Fe=this.circleKeys[Ee];if(this._circlesCollide(ce[Se],ce[Se+1],ce[Se+2],z.x,z.y,z.radius)&&(!M||M(Fe))&&!tr(W,Fe.overlapMode))return B.push(!0),!0}}}_forEachCell(n,a,f,p,v,B,T,M){const z=this._convertToXCellCoord(n),V=this._convertToYCellCoord(a),W=this._convertToXCellCoord(f),$=this._convertToYCellCoord(p);for(let X=z;X<=W;X++)for(let ce=V;ce<=$;ce++)if(v.call(this,n,a,f,p,this.xCellCount*ce+X,B,T,M))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,a,f,p,v,B){const T=p-n,M=v-a,z=f+B;return z*z>T*T+M*M}_circleAndRectCollide(n,a,f,p,v,B,T){const M=(B-p)/2,z=Math.abs(n-(p+M));if(z>M+f)return!1;const V=(T-v)/2,W=Math.abs(a-(v+V));if(W>V+f)return!1;if(z<=M||W<=V)return!0;const $=z-M,X=W-V;return $*$+X*X<=f*f}}function qt(y,n,a){const f=o.L();if(!y){const{vecSouth:W,vecEast:$}=jr(n),X=x();X[0]=$[0],X[1]=$[1],X[2]=W[0],X[3]=W[1],p=X,(V=(B=(v=X)[0])*(z=v[3])-(M=v[2])*(T=v[1]))&&(p[0]=z*(V=1/V),p[1]=-T*V,p[2]=-M*V,p[3]=B*V),f[0]=X[0],f[1]=X[1],f[4]=X[2],f[5]=X[3]}var p,v,B,T,M,z,V;return o.N(f,f,[1/a,1/a,1]),f}function Jr(y,n,a,f){if(y){const p=o.L();if(!n){const{vecSouth:v,vecEast:B}=jr(a);p[0]=B[0],p[1]=B[1],p[4]=v[0],p[5]=v[1]}return o.N(p,p,[f,f,1]),p}return a.pixelsToClipSpaceMatrix}function jr(y){const n=Math.cos(y.rollInRadians),a=Math.sin(y.rollInRadians),f=Math.cos(y.pitchInRadians),p=Math.cos(y.bearingInRadians),v=Math.sin(y.bearingInRadians),B=o.aq();B[0]=-p*f*a-v*n,B[1]=-v*f*a+p*n;const T=o.ar(B);T<1e-9?o.as(B):o.at(B,B,1/T);const M=o.aq();M[0]=p*f*n-v*a,M[1]=v*f*n+p*a;const z=o.ar(M);return z<1e-9?o.as(M):o.at(M,M,1/z),{vecEast:M,vecSouth:B}}function Rr(y,n,a,f){let p;f?(p=[y,n,f(y,n),1],o.av(p,p,a)):(p=[y,n,0,1],va(p,p,a));const v=p[3];return{point:new o.P(p[0]/v,p[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function _r(y,n){return .5+y/n*.5}function Ur(y,n){return y.x>=-n[0]&&y.x<=n[0]&&y.y>=-n[1]&&y.y<=n[1]}function Pn(y,n,a,f,p,v,B,T,M,z,V,W,$){const X=a?y.textSizeData:y.iconSizeData,ce=o.am(X,n.transform.zoom),Ee=[256/n.width*2+1,256/n.height*2+1],Se=a?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Se.clear();const Fe=y.lineVertexArray,Re=a?y.text.placedSymbolArray:y.icon.placedSymbolArray,je=n.transform.width/n.transform.height;let De=!1;for(let We=0;We<Re.length;We++){const Je=Re.get(We);if(Je.hidden||Je.writingMode===o.an.vertical&&!De){qs(Je.numGlyphs,Se);continue}De=!1;const Oe=new o.P(Je.anchorX,Je.anchorY),ht={getElevation:$,pitchedLabelPlaneMatrix:f,lineVertexArray:Fe,pitchWithMap:v,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:Oe,unwrappedTileID:M,width:z,height:V,translation:W},St=Vr(Je.anchorX,Je.anchorY,ht);if(!Ur(St.point,Ee)){qs(Je.numGlyphs,Se);continue}const gt=_r(n.transform.cameraToCenterDistance,St.signedDistanceFromCamera),_t=o.ao(X,ce,Je),xt=v?_t*n.transform.getPitchedTextCorrection(Je.anchorX,Je.anchorY,M)/gt:_t*gt,ir=Bn({projectionContext:ht,pitchedLabelPlaneMatrixInverse:p,symbol:Je,fontSize:xt,flip:!1,keepUpright:B,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:Se,aspectRatio:je,rotateToLine:T});De=ir.useVertical,(ir.notEnoughRoom||De||ir.needsFlipping&&Bn({projectionContext:ht,pitchedLabelPlaneMatrixInverse:p,symbol:Je,fontSize:xt,flip:!0,keepUpright:B,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:Se,aspectRatio:je,rotateToLine:T}).notEnoughRoom)&&qs(Je.numGlyphs,Se)}a?y.text.dynamicLayoutVertexBuffer.updateData(Se):y.icon.dynamicLayoutVertexBuffer.updateData(Se)}function Yt(y,n,a,f,p,v,B,T){const M=v.glyphStartIndex+v.numGlyphs,z=v.lineStartIndex,V=v.lineStartIndex+v.lineLength,W=n.getoffsetX(v.glyphStartIndex),$=n.getoffsetX(M-1),X=Ls(y*W,a,f,p,v.segment,z,V,T,B);if(!X)return null;const ce=Ls(y*$,a,f,p,v.segment,z,V,T,B);return ce?T.projectionCache.anyProjectionOccluded?null:{first:X,last:ce}:null}function Wn(y,n,a,f){return y===o.an.horizontal&&Math.abs(a.y-n.y)>Math.abs(a.x-n.x)*f?{useVertical:!0}:(y===o.an.vertical?n.y<a.y:n.x>a.x)?{needsFlipping:!0}:null}function Bn(y){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:a,symbol:f,fontSize:p,flip:v,keepUpright:B,glyphOffsetArray:T,dynamicLayoutVertexArray:M,aspectRatio:z,rotateToLine:V}=y,W=p/24,$=f.lineOffsetX*W,X=f.lineOffsetY*W;let ce;if(f.numGlyphs>1){const Ee=f.glyphStartIndex+f.numGlyphs,Se=f.lineStartIndex,Fe=f.lineStartIndex+f.lineLength,Re=Yt(W,T,$,X,v,f,V,n);if(!Re)return{notEnoughRoom:!0};const je=Dr(Re.first.point.x,Re.first.point.y,n,a),De=Dr(Re.last.point.x,Re.last.point.y,n,a);if(B&&!v){const We=Wn(f.writingMode,je,De,z);if(We)return We}ce=[Re.first];for(let We=f.glyphStartIndex+1;We<Ee-1;We++){const Je=Ls(W*T.getoffsetX(We),$,X,v,f.segment,Se,Fe,n,V);if(!Je)return{notEnoughRoom:!0};ce.push(Je)}ce.push(Re.last)}else{if(B&&!v){const Se=Jt(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,Fe=f.lineStartIndex+f.segment+1,Re=new o.P(n.lineVertexArray.getx(Fe),n.lineVertexArray.gety(Fe)),je=Jt(Re.x,Re.y,n),De=je.signedDistanceFromCamera>0?je.point:Xi(n.tileAnchorPoint,Re,Se,1,n),We=Dr(Se.x,Se.y,n,a),Je=Dr(De.x,De.y,n,a),Oe=Wn(f.writingMode,We,Je,z);if(Oe)return Oe}const Ee=Ls(W*T.getoffsetX(f.glyphStartIndex),$,X,v,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,n,V);if(!Ee||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ce=[Ee]}for(const Ee of ce)o.au(M,Ee.point,Ee.angle);return{}}function Xi(y,n,a,f,p){const v=y.add(y.sub(n)._unit()),B=Jt(v.x,v.y,p).point,T=a.sub(B);return a.add(T._mult(f/T.mag()))}function as(y,n,a){const f=n.projectionCache;if(f.projections[y])return f.projections[y];const p=new o.P(n.lineVertexArray.getx(y),n.lineVertexArray.gety(y)),v=Jt(p.x,p.y,n);if(v.signedDistanceFromCamera>0)return f.projections[y]=v.point,f.anyProjectionOccluded=f.anyProjectionOccluded||v.isOccluded,v.point;const B=y-a.direction;return Xi(a.distanceFromAnchor===0?n.tileAnchorPoint:new o.P(n.lineVertexArray.getx(B),n.lineVertexArray.gety(B)),p,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,n)}function Jt(y,n,a){const f=y+a.translation[0],p=n+a.translation[1];let v;return a.pitchWithMap?(v=Rr(f,p,a.pitchedLabelPlaneMatrix,a.getElevation),v.isOccluded=!1):(v=a.transform.projectTileCoordinates(f,p,a.unwrappedTileID,a.getElevation),v.point.x=(.5*v.point.x+.5)*a.width,v.point.y=(.5*-v.point.y+.5)*a.height),v}function Dr(y,n,a,f){if(a.pitchWithMap){const p=[y,n,0,1];return o.av(p,p,f),a.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],a.unwrappedTileID,a.getElevation).point}return{x:y/a.width*2-1,y:1-n/a.height*2}}function Vr(y,n,a){return a.transform.projectTileCoordinates(y,n,a.unwrappedTileID,a.getElevation)}function Ni(y,n,a){return y._unit()._perp()._mult(n*a)}function Ga(y,n,a,f,p,v,B,T,M){if(T.projectionCache.offsets[y])return T.projectionCache.offsets[y];const z=a.add(n);if(y+M.direction<f||y+M.direction>=p)return T.projectionCache.offsets[y]=z,z;const V=as(y+M.direction,T,M),W=Ni(V.sub(a),B,M.direction),$=a.add(W),X=V.add(W);return T.projectionCache.offsets[y]=o.aw(v,z,$,X)||z,T.projectionCache.offsets[y]}function Ls(y,n,a,f,p,v,B,T,M){const z=f?y-n:y+n;let V=z>0?1:-1,W=0;f&&(V*=-1,W=Math.PI),V<0&&(W+=Math.PI);let $,X=V>0?v+p:v+p+1;T.projectionCache.cachedAnchorPoint?$=T.projectionCache.cachedAnchorPoint:($=Jt(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=$);let ce,Ee,Se=$,Fe=$,Re=0,je=0;const De=Math.abs(z),We=[];let Je;for(;Re+je<=De;){if(X+=V,X<v||X>=B)return null;Re+=je,Fe=Se,Ee=ce;const St={absOffsetX:De,direction:V,distanceFromAnchor:Re,previousVertex:Fe};if(Se=as(X,T,St),a===0)We.push(Fe),Je=Se.sub(Fe);else{let gt;const _t=Se.sub(Fe);gt=_t.mag()===0?Ni(as(X+V,T,St).sub(Se),a,V):Ni(_t,a,V),Ee||(Ee=Fe.add(gt)),ce=Ga(X,gt,Se,v,B,Ee,a,T,St),We.push(Ee),Je=ce.sub(Ee)}je=Je.mag()}const Oe=Je._mult((De-Re)/je)._add(Ee||Fe),ht=W+Math.atan2(Se.y-Fe.y,Se.x-Fe.x);return We.push(Oe),{point:Oe,angle:M?ht:0,path:We}}const $r=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qs(y,n){for(let a=0;a<y;a++){const f=n.length;n.resize(f+4),n.float32.set($r,3*f)}}function va(y,n,a){const f=n[0],p=n[1];return y[0]=a[0]*f+a[4]*p+a[12],y[1]=a[1]*f+a[5]*p+a[13],y[3]=a[3]*f+a[7]*p+a[15],y}const Ai=100;class $l{constructor(n,a=new Ar(n.width+200,n.height+200,25),f=new Ar(n.width+200,n.height+200,25)){this.transform=n,this.grid=a,this.ignoredGrid=f,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Ai,this.screenBottomBoundary=n.height+Ai,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,a,f,p,v,B,T,M,z,V,W,$){const X=this.projectAndGetPerspectiveRatio(n.anchorPointX+M[0],n.anchorPointY+M[1],v,V,$),ce=f*X.perspectiveRatio;let Ee;if(B||T)Ee=this._projectCollisionBox(n,ce,p,v,B,T,M,X,V,W,$);else{const Je=X.x+(W?W.x*ce:0),Oe=X.y+(W?W.y*ce:0);Ee={allPointsOccluded:!1,box:[Je+n.x1*ce,Oe+n.y1*ce,Je+n.x2*ce,Oe+n.y2*ce]}}const[Se,Fe,Re,je]=Ee.box,De=B?Ee.allPointsOccluded:X.isOccluded;let We=De;return We||(We=X.perspectiveRatio<this.perspectiveRatioCutoff),We||(We=!this.isInsideGrid(Se,Fe,Re,je)),We||a!=="always"&&this.grid.hitTest(Se,Fe,Re,je,a,z)?{box:[Se,Fe,Re,je],placeable:!1,offscreen:!1,occluded:De}:{box:[Se,Fe,Re,je],placeable:!0,offscreen:this.isOffscreen(Se,Fe,Re,je),occluded:De}}placeCollisionCircles(n,a,f,p,v,B,T,M,z,V,W,$,X,ce){const Ee=[],Se=new o.P(a.anchorX,a.anchorY),Fe=this.getPerspectiveRatio(Se.x,Se.y,B,ce),Re=(z?v*this.transform.getPitchedTextCorrection(a.anchorX,a.anchorY,B)/Fe:v*Fe)/o.aA,je={getElevation:ce,pitchedLabelPlaneMatrix:T,lineVertexArray:f,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Se,unwrappedTileID:B,width:this.transform.width,height:this.transform.height,translation:X},De=Yt(Re,p,a.lineOffsetX*Re,a.lineOffsetY*Re,!1,a,!1,je);let We=!1,Je=!1,Oe=!0;if(De){const ht=.5*W*Fe+$,St=new o.P(-100,-100),gt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),_t=new nr,xt=De.first,ir=De.last;let rr=[];for(let rn=xt.path.length-1;rn>=1;rn--)rr.push(xt.path[rn]);for(let rn=1;rn<ir.path.length;rn++)rr.push(ir.path[rn]);const Dt=2.5*ht;if(z){const rn=this.projectPathToScreenSpace(rr,je);rr=rn.some(mn=>mn.signedDistanceFromCamera<=0)?[]:rn.map(mn=>mn.point)}let mr=[];if(rr.length>0){const rn=rr[0].clone(),mn=rr[0].clone();for(let $n=1;$n<rr.length;$n++)rn.x=Math.min(rn.x,rr[$n].x),rn.y=Math.min(rn.y,rr[$n].y),mn.x=Math.max(mn.x,rr[$n].x),mn.y=Math.max(mn.y,rr[$n].y);mr=rn.x>=St.x&&mn.x<=gt.x&&rn.y>=St.y&&mn.y<=gt.y?[rr]:mn.x<St.x||rn.x>gt.x||mn.y<St.y||rn.y>gt.y?[]:o.ax([rr],St.x,St.y,gt.x,gt.y)}for(const rn of mr){_t.reset(rn,.25*ht);let mn=0;mn=_t.length<=.5*ht?1:Math.ceil(_t.paddedLength/Dt)+1;for(let $n=0;$n<mn;$n++){const En=$n/Math.max(mn-1,1),Fn=_t.lerp(En),xn=Fn.x+Ai,_n=Fn.y+Ai;Ee.push(xn,_n,ht,0);const Tn=xn-ht,Ki=_n-ht,fn=xn+ht,rs=_n+ht;if(Oe=Oe&&this.isOffscreen(Tn,Ki,fn,rs),Je=Je||this.isInsideGrid(Tn,Ki,fn,rs),n!=="always"&&this.grid.hitTestCircle(xn,_n,ht,n,V)&&(We=!0,!M))return{circles:[],offscreen:!1,collisionDetected:We}}}}return{circles:!M&&We||!Je||Fe<this.perspectiveRatioCutoff?[]:Ee,offscreen:Oe,collisionDetected:We}}projectPathToScreenSpace(n,a){const f=function(p,v){const B=o.L();return o.ap(B,v.pitchedLabelPlaneMatrix),p.map(T=>{const M=Rr(T.x,T.y,B,v.getElevation),z=v.transform.projectTileCoordinates(M.point.x,M.point.y,v.unwrappedTileID,v.getElevation);return z.point.x=(.5*z.point.x+.5)*v.width,z.point.y=(.5*-z.point.y+.5)*v.height,z})}(n,a);return function(p){let v=0,B=0,T=0,M=0;for(let z=0;z<p.length;z++)p[z].isOccluded?(T=z+1,M=0):(M++,M>B&&(B=M,v=T));return p.slice(v,v+B)}(f)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[],f=new o.a1;for(const W of n){const $=new o.P(W.x+Ai,W.y+Ai);f.extend($),a.push($)}const{minX:p,minY:v,maxX:B,maxY:T}=f,M=this.grid.query(p,v,B,T).concat(this.ignoredGrid.query(p,v,B,T)),z={},V={};for(const W of M){const $=W.key;if(z[$.bucketInstanceId]===void 0&&(z[$.bucketInstanceId]={}),z[$.bucketInstanceId][$.featureIndex])continue;const X=[new o.P(W.x1,W.y1),new o.P(W.x2,W.y1),new o.P(W.x2,W.y2),new o.P(W.x1,W.y2)];o.ay(a,X)&&(z[$.bucketInstanceId][$.featureIndex]=!0,V[$.bucketInstanceId]===void 0&&(V[$.bucketInstanceId]=[]),V[$.bucketInstanceId].push($.featureIndex))}return V}insertCollisionBox(n,a,f,p,v,B){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:v,collisionGroupID:B,overlapMode:a},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,a,f,p,v,B){const T=f?this.ignoredGrid:this.grid,M={bucketInstanceId:p,featureIndex:v,collisionGroupID:B,overlapMode:a};for(let z=0;z<n.length;z+=4)T.insertCircle(M,n[z],n[z+1],n[z+2])}projectAndGetPerspectiveRatio(n,a,f,p,v){if(v){let B;p?(B=[n,a,p(n,a),1],o.av(B,B,v)):(B=[n,a,0,1],va(B,B,v));const T=B[3];return{x:(B[0]/T+1)/2*this.transform.width+Ai,y:(-B[1]/T+1)/2*this.transform.height+Ai,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T*.5,isOccluded:!1,signedDistanceFromCamera:T}}{const B=this.transform.projectTileCoordinates(n,a,f,p);return{x:(B.point.x+1)/2*this.transform.width+Ai,y:(1-B.point.y)/2*this.transform.height+Ai,perspectiveRatio:.5+this.transform.cameraToCenterDistance/B.signedDistanceFromCamera*.5,isOccluded:B.isOccluded,signedDistanceFromCamera:B.signedDistanceFromCamera}}}getPerspectiveRatio(n,a,f,p){const v=this.transform.projectTileCoordinates(n,a,f,p);return .5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5}isOffscreen(n,a,f,p){return f<Ai||n>=this.screenRightBoundary||p<Ai||a>this.screenBottomBoundary}isInsideGrid(n,a,f,p){return f>=0&&n<this.gridRightBoundary&&p>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const n=o.af([]);return o.M(n,n,[-100,-100,0]),n}_projectCollisionBox(n,a,f,p,v,B,T,M,z,V,W){let $=1,X=0,ce=0,Ee=1;const Se=n.anchorPointX+T[0],Fe=n.anchorPointY+T[1];if(B&&!v){const rr=this.projectAndGetPerspectiveRatio(Se+1,Fe,p,z,W),Dt=rr.x-M.x,mr=Math.atan((rr.y-M.y)/Dt)+(Dt<0?Math.PI:0),rn=Math.sin(mr),mn=Math.cos(mr);$=mn,X=rn,ce=-rn,Ee=mn}else if(!B&&v){const rr=jr(this.transform);$=rr.vecEast[0],X=rr.vecEast[1],ce=rr.vecSouth[0],Ee=rr.vecSouth[1]}let Re=M.x,je=M.y,De=a;v&&(Re=Se,je=Fe,De=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),De*=this.transform.getPitchedTextCorrection(Se,Fe,p),V||(De*=o.ag(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(Re+=$*V.x*De+ce*V.y*De,je+=X*V.x*De+Ee*V.y*De);const We=n.x1*De,Je=n.x2*De,Oe=(We+Je)/2,ht=n.y1*De,St=n.y2*De,gt=(ht+St)/2,_t=[{offsetX:We,offsetY:ht},{offsetX:Oe,offsetY:ht},{offsetX:Je,offsetY:ht},{offsetX:Je,offsetY:gt},{offsetX:Je,offsetY:St},{offsetX:Oe,offsetY:St},{offsetX:We,offsetY:St},{offsetX:We,offsetY:gt}];let xt=[];for(const{offsetX:rr,offsetY:Dt}of _t)xt.push(new o.P(Re+$*rr+ce*Dt,je+X*rr+Ee*Dt));let ir=!1;if(v){const rr=xt.map(Dt=>this.projectAndGetPerspectiveRatio(Dt.x,Dt.y,p,z,W));ir=rr.some(Dt=>!Dt.isOccluded),xt=rr.map(Dt=>new o.P(Dt.x,Dt.y))}else ir=!0;return{box:o.az(xt),allPointsOccluded:!ir}}}class _a{constructor(n,a,f,p){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?a:-a))):p&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Bo{constructor(n,a,f,p,v){this.text=new _a(n?n.text:null,a,f,v),this.icon=new _a(n?n.icon:null,a,p,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ql{constructor(n,a,f){this.text=n,this.icon=a,this.skipFade=f}}class ls{constructor(n,a,f,p,v){this.bucketInstanceId=n,this.featureIndex=a,this.sourceLayerIndex=f,this.bucketIndex=p,this.tileID=v}}class Kn{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const a=++this.maxGroupID;this.collisionGroups[n]={ID:a,predicate:f=>f.collisionGroupID===a}}return this.collisionGroups[n]}}function Tc(y,n,a,f,p){const{horizontalAlign:v,verticalAlign:B}=o.aG(y);return new o.P(-(v-.5)*n+f[0]*p,-(B-.5)*a+f[1]*p)}class Wl{constructor(n,a,f,p,v){this.transform=n.clone(),this.terrain=a,this.collisionIndex=new $l(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Kn(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const a=this.terrain;return a?(f,p)=>a.getElevation(n,f,p):null}getBucketParts(n,a,f,p){const v=f.getBucket(a),B=f.latestFeatureIndex;if(!v||!B||a.id!==v.layerIds[0])return;const T=f.collisionBoxArray,M=v.layers[0].layout,z=v.layers[0].paint,V=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),W=f.tileSize/o.$,$=f.tileID.toUnwrapped(),X=M.get("text-rotation-alignment")==="map",ce=o.aB(f,1,this.transform.zoom),Ee=o.aC(this.collisionIndex.transform,f,z.get("text-translate"),z.get("text-translate-anchor")),Se=o.aC(this.collisionIndex.transform,f,z.get("icon-translate"),z.get("icon-translate-anchor")),Fe=qt(X,this.transform,ce);this.retainedQueryData[v.bucketInstanceId]=new ls(v.bucketInstanceId,B,v.sourceLayerIndex,v.index,f.tileID);const Re={bucket:v,layout:M,translationText:Ee,translationIcon:Se,unwrappedTileID:$,pitchedLabelPlaneMatrix:Fe,scale:V,textPixelRatio:W,holdingForFade:f.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:o.am(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(p)for(const je of v.sortKeyRanges){const{sortKey:De,symbolInstanceStart:We,symbolInstanceEnd:Je}=je;n.push({sortKey:De,symbolInstanceStart:We,symbolInstanceEnd:Je,parameters:Re})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Re})}attemptAnchorPlacement(n,a,f,p,v,B,T,M,z,V,W,$,X,ce,Ee,Se,Fe,Re,je,De){const We=o.aD[n.textAnchor],Je=[n.textOffset0,n.textOffset1],Oe=Tc(We,f,p,Je,v),ht=this.collisionIndex.placeCollisionBox(a,$,M,z,V,T,B,Se,W.predicate,je,Oe,De);if((!Re||this.collisionIndex.placeCollisionBox(Re,$,M,z,V,T,B,Fe,W.predicate,je,Oe,De).placeable)&&ht.placeable){let St;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(St=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Je,width:f,height:p,anchor:We,textBoxScale:v,prevAnchor:St},this.markUsedJustification(ce,We,X,Ee),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,Ee,X),this.placedOrientations[X.crossTileID]=Ee),{shift:Oe,placedGlyphBoxes:ht}}}placeLayerBucketPart(n,a,f){const{bucket:p,layout:v,translationText:B,translationIcon:T,unwrappedTileID:M,pitchedLabelPlaneMatrix:z,textPixelRatio:V,holdingForFade:W,collisionBoxArray:$,partiallyEvaluatedTextSize:X,collisionGroup:ce}=n.parameters,Ee=v.get("text-optional"),Se=v.get("icon-optional"),Fe=o.aE(v,"text-overlap","text-allow-overlap"),Re=Fe==="always",je=o.aE(v,"icon-overlap","icon-allow-overlap"),De=je==="always",We=v.get("text-rotation-alignment")==="map",Je=v.get("text-pitch-alignment")==="map",Oe=v.get("icon-text-fit")!=="none",ht=v.get("symbol-z-order")==="viewport-y",St=Re&&(De||!p.hasIconData()||Se),gt=De&&(Re||!p.hasTextData()||Ee);!p.collisionArrays&&$&&p.deserializeCollisionBoxes($);const _t=this.retainedQueryData[p.bucketInstanceId].tileID,xt=this._getTerrainElevationFunc(_t),ir=this.transform.getFastPathSimpleProjectionMatrix(_t),rr=(Dt,mr,rn)=>{var mn,$n;if(a[Dt.crossTileID])return;if(W)return void(this.placements[Dt.crossTileID]=new ql(!1,!1,!1));let En=!1,Fn=!1,xn=!0,_n=null,Tn={box:null,placeable:!1,offscreen:null,occluded:!1},Ki={placeable:!1},fn=null,rs=null,Gi=null,Ua=0,ic=0,sc=0;mr.textFeatureIndex?Ua=mr.textFeatureIndex:Dt.useRuntimeCollisionCircles&&(Ua=Dt.featureIndex),mr.verticalTextFeatureIndex&&(ic=mr.verticalTextFeatureIndex);const kl=mr.textBox;if(kl){const Ro=Ui=>{let si=o.an.horizontal;if(p.allowVerticalPlacement&&!Ui&&this.prevPlacement){const mo=this.prevPlacement.placedOrientations[Dt.crossTileID];mo&&(this.placedOrientations[Dt.crossTileID]=mo,si=mo,this.markUsedOrientation(p,si,Dt))}return si},al=(Ui,si)=>{if(p.allowVerticalPlacement&&Dt.numVerticalGlyphVertices>0&&mr.verticalTextBox){for(const mo of p.writingModes)if(mo===o.an.vertical?(Tn=si(),Ki=Tn):Tn=Ui(),Tn&&Tn.placeable)break}else Tn=Ui()},oc=Dt.textAnchorOffsetStartIndex,Jc=Dt.textAnchorOffsetEndIndex;if(Jc===oc){const Ui=(si,mo)=>{const hs=this.collisionIndex.placeCollisionBox(si,Fe,V,_t,M,Je,We,B,ce.predicate,xt,void 0,ir);return hs&&hs.placeable&&(this.markUsedOrientation(p,mo,Dt),this.placedOrientations[Dt.crossTileID]=mo),hs};al(()=>Ui(kl,o.an.horizontal),()=>{const si=mr.verticalTextBox;return p.allowVerticalPlacement&&Dt.numVerticalGlyphVertices>0&&si?Ui(si,o.an.vertical):{box:null,offscreen:null}}),Ro(Tn&&Tn.placeable)}else{let Ui=o.aD[($n=(mn=this.prevPlacement)===null||mn===void 0?void 0:mn.variableOffsets[Dt.crossTileID])===null||$n===void 0?void 0:$n.anchor];const si=(hs,Ug,C1)=>{const kp=hs.x2-hs.x1,Xh=hs.y2-hs.y1,Ou=Dt.textBoxScale,hA=Oe&&je==="never"?Ug:null;let zs=null,dA=Fe==="never"?1:2,Up="never";Ui&&dA++;for(let ac=0;ac<dA;ac++){for(let Qp=oc;Qp<Jc;Qp++){const Rp=p.textAnchorOffsets.get(Qp);if(Ui&&Rp.textAnchor!==Ui)continue;const Yh=this.attemptAnchorPlacement(Rp,hs,kp,Xh,Ou,We,Je,V,_t,M,ce,Up,Dt,p,C1,B,T,hA,xt);if(Yh&&(zs=Yh.placedGlyphBoxes,zs&&zs.placeable))return En=!0,_n=Yh.shift,zs}Ui?Ui=null:Up=Fe}return f&&!zs&&(zs={box:this.collisionIndex.placeCollisionBox(kl,"always",V,_t,M,Je,We,B,ce.predicate,xt,void 0,ir).box,offscreen:!1,placeable:!1,occluded:!1}),zs};al(()=>si(kl,mr.iconBox,o.an.horizontal),()=>{const hs=mr.verticalTextBox;return p.allowVerticalPlacement&&(!Tn||!Tn.placeable)&&Dt.numVerticalGlyphVertices>0&&hs?si(hs,mr.verticalIconBox,o.an.vertical):{box:null,occluded:!0,offscreen:null}}),Tn&&(En=Tn.placeable,xn=Tn.offscreen);const mo=Ro(Tn&&Tn.placeable);if(!En&&this.prevPlacement){const hs=this.prevPlacement.variableOffsets[Dt.crossTileID];hs&&(this.variableOffsets[Dt.crossTileID]=hs,this.markUsedJustification(p,hs.anchor,Dt,mo))}}}if(fn=Tn,En=fn&&fn.placeable,xn=fn&&fn.offscreen,Dt.useRuntimeCollisionCircles){const Ro=p.text.placedSymbolArray.get(Dt.centerJustifiedTextSymbolIndex),al=o.ao(p.textSizeData,X,Ro),oc=v.get("text-padding");rs=this.collisionIndex.placeCollisionCircles(Fe,Ro,p.lineVertexArray,p.glyphOffsetArray,al,M,z,f,Je,ce.predicate,Dt.collisionCircleDiameter,oc,B,xt),rs.circles.length&&rs.collisionDetected&&!f&&o.w("Collisions detected, but collision boxes are not shown"),En=Re||rs.circles.length>0&&!rs.collisionDetected,xn=xn&&rs.offscreen}if(mr.iconFeatureIndex&&(sc=mr.iconFeatureIndex),mr.iconBox){const Ro=al=>this.collisionIndex.placeCollisionBox(al,je,V,_t,M,Je,We,T,ce.predicate,xt,Oe&&_n?_n:void 0,ir);Ki&&Ki.placeable&&mr.verticalIconBox?(Gi=Ro(mr.verticalIconBox),Fn=Gi.placeable):(Gi=Ro(mr.iconBox),Fn=Gi.placeable),xn=xn&&Gi.offscreen}const Wh=Ee||Dt.numHorizontalGlyphVertices===0&&Dt.numVerticalGlyphVertices===0,Zh=Se||Dt.numIconVertices===0;Wh||Zh?Zh?Wh||(Fn=Fn&&En):En=Fn&&En:Fn=En=Fn&&En;const Du=Fn&&Gi.placeable;if(En&&fn.placeable&&this.collisionIndex.insertCollisionBox(fn.box,Fe,v.get("text-ignore-placement"),p.bucketInstanceId,Ki&&Ki.placeable&&ic?ic:Ua,ce.ID),Du&&this.collisionIndex.insertCollisionBox(Gi.box,je,v.get("icon-ignore-placement"),p.bucketInstanceId,sc,ce.ID),rs&&En&&this.collisionIndex.insertCollisionCircles(rs.circles,Fe,v.get("text-ignore-placement"),p.bucketInstanceId,Ua,ce.ID),f&&this.storeCollisionData(p.bucketInstanceId,rn,mr,fn,Gi,rs),Dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Dt.crossTileID]=new ql((En||St)&&!(fn!=null&&fn.occluded),(Fn||gt)&&!(Gi!=null&&Gi.occluded),xn||p.justReloaded),a[Dt.crossTileID]=!0};if(ht){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Dt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let mr=Dt.length-1;mr>=0;--mr){const rn=Dt[mr];rr(p.symbolInstances.get(rn),p.collisionArrays[rn],rn)}}else for(let Dt=n.symbolInstanceStart;Dt<n.symbolInstanceEnd;Dt++)rr(p.symbolInstances.get(Dt),p.collisionArrays[Dt],Dt);p.justReloaded=!1}storeCollisionData(n,a,f,p,v,B){if(f.textBox||f.iconBox){let T,M;this.collisionBoxArrays.has(n)?T=this.collisionBoxArrays.get(n):(T=new Map,this.collisionBoxArrays.set(n,T)),T.has(a)?M=T.get(a):(M={text:null,icon:null},T.set(a,M)),f.textBox&&(M.text=p.box),f.iconBox&&(M.icon=v.box)}if(B){let T=this.collisionCircleArrays[n];T===void 0&&(T=this.collisionCircleArrays[n]=[]);for(let M=0;M<B.circles.length;M+=4)T.push(B.circles[M+0]-Ai),T.push(B.circles[M+1]-Ai),T.push(B.circles[M+2]),T.push(B.collisionDetected?1:0)}}markUsedJustification(n,a,f,p){let v;v=p===o.an.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[o.aF(a)];const B=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const T of B)T>=0&&(n.text.placedSymbolArray.get(T).crossTileID=v>=0&&T!==v?0:f.crossTileID)}markUsedOrientation(n,a,f){const p=a===o.an.horizontal||a===o.an.horizontalOnly?a:0,v=a===o.an.vertical?a:0,B=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const T of B)n.text.placedSymbolArray.get(T).placedOrientation=p;f.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let f=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const p=a?a.symbolFadeChange(n):1,v=a?a.opacities:{},B=a?a.variableOffsets:{},T=a?a.placedOrientations:{};for(const M in this.placements){const z=this.placements[M],V=v[M];V?(this.opacities[M]=new Bo(V,p,z.text,z.icon),f=f||z.text!==V.text.placed||z.icon!==V.icon.placed):(this.opacities[M]=new Bo(null,p,z.text,z.icon,z.skipFade),f=f||z.text||z.icon)}for(const M in v){const z=v[M];if(!this.opacities[M]){const V=new Bo(z,p,!1,!1);V.isHidden()||(this.opacities[M]=V,f=f||z.text.placed||z.icon.placed)}}for(const M in B)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=B[M]);for(const M in T)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=T[M]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:n)}updateLayerOpacities(n,a){const f={};for(const p of a){const v=p.getBucket(n);v&&p.latestFeatureIndex&&n.id===v.layerIds[0]&&this.updateBucketOpacities(v,p.tileID,f,p.collisionBoxArray)}}updateBucketOpacities(n,a,f,p){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const v=n.layers[0],B=v.layout,T=new Bo(null,0,!1,!1,!0),M=B.get("text-allow-overlap"),z=B.get("icon-allow-overlap"),V=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=B.get("text-rotation-alignment")==="map",$=B.get("text-pitch-alignment")==="map",X=B.get("icon-text-fit")!=="none",ce=new Bo(null,0,M&&(z||!n.hasIconData()||B.get("icon-optional")),z&&(M||!n.hasTextData()||B.get("text-optional")),!0);!n.collisionArrays&&p&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(p);const Ee=(Fe,Re,je)=>{for(let De=0;De<Re/4;De++)Fe.opacityVertexArray.emplaceBack(je);Fe.hasVisibleVertices=Fe.hasVisibleVertices||je!==xa},Se=this.collisionBoxArrays.get(n.bucketInstanceId);for(let Fe=0;Fe<n.symbolInstances.length;Fe++){const Re=n.symbolInstances.get(Fe),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:De,crossTileID:We}=Re;let Je=this.opacities[We];f[We]?Je=T:Je||(Je=ce,this.opacities[We]=Je),f[We]=!0;const Oe=Re.numIconVertices>0,ht=this.placedOrientations[Re.crossTileID],St=ht===o.an.vertical,gt=ht===o.an.horizontal||ht===o.an.horizontalOnly;if(je>0||De>0){const xt=Co(Je.text);Ee(n.text,je,St?xa:xt),Ee(n.text,De,gt?xa:xt);const ir=Je.text.isHidden();[Re.rightJustifiedTextSymbolIndex,Re.centerJustifiedTextSymbolIndex,Re.leftJustifiedTextSymbolIndex].forEach(mr=>{mr>=0&&(n.text.placedSymbolArray.get(mr).hidden=ir||St?1:0)}),Re.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(Re.verticalPlacedTextSymbolIndex).hidden=ir||gt?1:0);const rr=this.variableOffsets[Re.crossTileID];rr&&this.markUsedJustification(n,rr.anchor,Re,ht);const Dt=this.placedOrientations[Re.crossTileID];Dt&&(this.markUsedJustification(n,"left",Re,Dt),this.markUsedOrientation(n,Dt,Re))}if(Oe){const xt=Co(Je.icon),ir=!(X&&Re.verticalPlacedIconSymbolIndex&&St);Re.placedIconSymbolIndex>=0&&(Ee(n.icon,Re.numIconVertices,ir?xt:xa),n.icon.placedSymbolArray.get(Re.placedIconSymbolIndex).hidden=Je.icon.isHidden()),Re.verticalPlacedIconSymbolIndex>=0&&(Ee(n.icon,Re.numVerticalIconVertices,ir?xa:xt),n.icon.placedSymbolArray.get(Re.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}const _t=Se&&Se.has(Fe)?Se.get(Fe):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const xt=n.collisionArrays[Fe];if(xt){let ir=new o.P(0,0);if(xt.textBox||xt.verticalTextBox){let rr=!0;if(V){const Dt=this.variableOffsets[We];Dt?(ir=Tc(Dt.anchor,Dt.width,Dt.height,Dt.textOffset,Dt.textBoxScale),W&&ir._rotate($?-this.transform.bearingInRadians:this.transform.bearingInRadians)):rr=!1}if(xt.textBox||xt.verticalTextBox){let Dt;xt.textBox&&(Dt=St),xt.verticalTextBox&&(Dt=gt),$a(n.textCollisionBox.collisionVertexArray,Je.text.placed,!rr||Dt,_t.text,ir.x,ir.y)}}if(xt.iconBox||xt.verticalIconBox){const rr=!!(!gt&&xt.verticalIconBox);let Dt;xt.iconBox&&(Dt=rr),xt.verticalIconBox&&(Dt=!rr),$a(n.iconCollisionBox.collisionVertexArray,Je.icon.placed,Dt,_t.icon,X?ir.x:0,X?ir.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,a){const f=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*f>n}setStale(){this.stale=!0}}function $a(y,n,a,f,p,v){f&&f.length!==0||(f=[0,0,0,0]);const B=f[0]-Ai,T=f[1]-Ai,M=f[2]-Ai,z=f[3]-Ai;y.emplaceBack(n?1:0,a?1:0,p||0,v||0,B,T),y.emplaceBack(n?1:0,a?1:0,p||0,v||0,M,T),y.emplaceBack(n?1:0,a?1:0,p||0,v||0,M,z),y.emplaceBack(n?1:0,a?1:0,p||0,v||0,B,z)}const qa=Math.pow(2,25),Dn=Math.pow(2,24),Pc=Math.pow(2,17),Lc=Math.pow(2,16),Mc=Math.pow(2,9),wa=Math.pow(2,8),bu=Math.pow(2,1);function Co(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const n=y.placed?1:0,a=Math.floor(127*y.opacity);return a*qa+n*Dn+a*Pc+n*Lc+a*Mc+n*wa+a*bu+n}const xa=0;class Ws{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,a,f,p,v){const B=this._bucketParts;for(;this._currentTileIndex<n.length;)if(a.getBucketParts(B,p,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort((T,M)=>T.sortKey-M.sortKey));this._currentPartIndex<B.length;)if(a.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class OA{constructor(n,a,f,p,v,B,T,M){this.placement=new Wl(n,a,B,T,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(n,a,f){const p=P.now(),v=()=>!this._forceFullPlacement&&P.now()-p>2;for(;this._currentPlacementIndex>=0;){const B=a[n[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=T)&&(!B.maxzoom||B.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Ws(B)),this._inProgressLayer.continuePlacement(f[B.source],this.placement,this._showCollisionBoxes,B,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Wa=512/o.$/2;class kc{constructor(n,a,f){this.tileID=n,this.bucketInstanceId=f,this._symbolsByKey={};const p=new Map;for(let v=0;v<a.length;v++){const B=a.get(v),T=B.key,M=p.get(T);M?M.push(B):p.set(T,[B])}for(const[v,B]of p){const T={positions:B.map(M=>({x:Math.floor(M.anchorX*Wa),y:Math.floor(M.anchorY*Wa)})),crossTileIDs:B.map(M=>M.crossTileID)};if(T.positions.length>128){const M=new o.aH(T.positions.length,16,Uint16Array);for(const{x:z,y:V}of T.positions)M.add(z,V);M.finish(),delete T.positions,T.index=M}this._symbolsByKey[v]=T}}getScaledCoordinates(n,a){const{x:f,y:p,z:v}=this.tileID.canonical,{x:B,y:T,z:M}=a.canonical,z=Wa/Math.pow(2,M-v),V=(T*o.$+n.anchorY)*z,W=p*o.$*Wa;return{x:Math.floor((B*o.$+n.anchorX)*z-f*o.$*Wa),y:Math.floor(V-W)}}findMatches(n,a,f){const p=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let v=0;v<n.length;v++){const B=n.get(v);if(B.crossTileID)continue;const T=this._symbolsByKey[B.key];if(!T)continue;const M=this.getScaledCoordinates(B,a);if(T.index){const z=T.index.range(M.x-p,M.y-p,M.x+p,M.y+p).sort();for(const V of z){const W=T.crossTileIDs[V];if(!f[W]){f[W]=!0,B.crossTileID=W;break}}}else if(T.positions)for(let z=0;z<T.positions.length;z++){const V=T.positions[z],W=T.crossTileIDs[z];if(Math.abs(V.x-M.x)<=p&&Math.abs(V.y-M.y)<=p&&!f[W]){f[W]=!0,B.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class zA{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Bu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const a=Math.round((n-this.lng)/360);if(a!==0)for(const f in this.indexes){const p=this.indexes[f],v={};for(const B in p){const T=p[B];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+a),v[T.tileID.key]=T}this.indexes[f]=v}this.lng=n}addBucket(n,a,f){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let v=0;v<a.symbolInstances.length;v++)a.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const p=this.usedCrossTileIDs[n.overscaledZ];for(const v in this.indexes){const B=this.indexes[v];if(Number(v)>n.overscaledZ)for(const T in B){const M=B[T];M.tileID.isChildOf(n)&&M.findMatches(a.symbolInstances,n,p)}else{const T=B[n.scaledTo(Number(v)).key];T&&T.findMatches(a.symbolInstances,n,p)}}for(let v=0;v<a.symbolInstances.length;v++){const B=a.symbolInstances.get(v);B.crossTileID||(B.crossTileID=f.generate(),p[B.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new kc(n,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(n,a){for(const f of a.getCrossTileIDsLists())for(const p of f)delete this.usedCrossTileIDs[n][p]}removeStaleBuckets(n){let a=!1;for(const f in this.indexes){const p=this.indexes[f];for(const v in p)n[p[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,p[v]),delete p[v],a=!0)}return a}}class Zl{constructor(){this.layerIndexes={},this.crossTileIDs=new zA,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,a,f){let p=this.layerIndexes[n.id];p===void 0&&(p=this.layerIndexes[n.id]=new Bu);let v=!1;const B={};p.handleWrapJump(f);for(const T of a){const M=T.getBucket(n);M&&n.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(T.tileID,M,this.crossTileIDs)&&(v=!0),B[M.bucketInstanceId]=!0)}return p.removeStaleBuckets(B)&&(v=!0),v}pruneUnusedLayers(n){const a={};n.forEach(f=>{a[f]=!0});for(const f in this.layerIndexes)a[f]||delete this.layerIndexes[f]}}var HA="void main() {fragColor=vec4(1.0);}";const Zs={prelude:an(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:an("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:an("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:an(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:an(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:an(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:an(HA,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:an(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:an(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:an("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:an("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:an(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:an("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:an(HA,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:an(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:an(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:an(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:an(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:an(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:an(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:an(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:an(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:an(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:an(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:an(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:an(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:an(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:an(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:an(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:an(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:an("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:an("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:an("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:an("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:an(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:an("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function an(y,n){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=n.match(/in ([\w]+) ([\w]+)/g),p=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=v?v.concat(p):p,T={};return{fragmentSource:y=y.replace(a,(M,z,V,W,$)=>(T[$]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
in ${V} ${W} ${$};
#else
uniform ${V} ${W} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${V} ${W} ${$} = u_${$};
#endif
`)),vertexSource:n=n.replace(a,(M,z,V,W,$)=>{const X=W==="float"?"vec2":"vec4",ce=$.match(/color/)?"color":X;return T[$]?z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${V} ${X} a_${$};
out ${V} ${W} ${$};
#else
uniform ${V} ${W} u_${$};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${V} ${W} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${ce}(a_${$}, u_${$}_t);
#else
    ${V} ${W} ${$} = u_${$};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${V} ${X} a_${$};
#else
uniform ${V} ${W} u_${$};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${V} ${W} ${$} = a_${$};
#else
    ${V} ${W} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${V} ${W} ${$} = unpack_mix_${ce}(a_${$}, u_${$}_t);
#else
    ${V} ${W} ${$} = u_${$};
#endif
`}),staticAttributes:f,staticUniforms:B}}class Jo{constructor(n,a,f){this.vertexBuffer=n,this.indexBuffer=a,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ea=o.aI([{name:"a_pos",type:"Int16",components:2}]);const Ms="#define PROJECTION_MERCATOR",xl="mercator";class bl{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return xl}get shaderDefine(){return Ms}get shaderPreludeCode(){return Zs.projectionMercator}get vertexShaderPreludeCode(){return Zs.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,a,f,p,v){if(this._cachedMesh)return this._cachedMesh;const B=new o.aK;B.emplaceBack(0,0),B.emplaceBack(o.$,0),B.emplaceBack(0,o.$),B.emplaceBack(o.$,o.$);const T=n.createVertexBuffer(B,ea.members),M=o.aL.simpleSegment(0,0,4,2),z=new o.aM;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);const V=n.createIndexBuffer(z);return this._cachedMesh=new Jo(T,V,M),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class ks{constructor(n=0,a=0,f=0,p=0){if(isNaN(n)||n<0||isNaN(a)||a<0||isNaN(f)||f<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=a,this.left=f,this.right=p}interpolate(n,a,f){return a.top!=null&&n.top!=null&&(this.top=o.C.number(n.top,a.top,f)),a.bottom!=null&&n.bottom!=null&&(this.bottom=o.C.number(n.bottom,a.bottom,f)),a.left!=null&&n.left!=null&&(this.left=o.C.number(n.left,a.left,f)),a.right!=null&&n.right!=null&&(this.right=o.C.number(n.right,a.right,f)),this}getCenter(n,a){const f=o.ag((this.left+n-this.right)/2,0,n),p=o.ag((this.top+a-this.bottom)/2,0,a);return new o.P(f,p)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new ks(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ei(y,n){if(!y.renderWorldCopies||y.lngRange)return;const a=n.lng-y.center.lng;n.lng+=a>180?-360:a<-180?360:0}function ln(y){return Math.max(0,Math.floor(y))}class Bl{constructor(n,a,f,p,v,B){this._callbacks=n,this._tileSize=512,this._renderWorldCopies=B===void 0||!!B,this._minZoom=a||0,this._maxZoom=f||22,this._minPitch=p??0,this._maxPitch=v??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ln(this._zoom),this._scale=o.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ks,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,a,f){this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=ln(this._zoom),this._scale=o.ae(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new ks(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!f&&n.autoCalculateNearFarZ,a&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const a=o.aN(n,-180,180)*Math.PI/180;var f,p,v,B,T,M,z,V,W;this._bearingInRadians!==a&&(this._unmodified=!1,this._bearingInRadians=a,this._calcMatrices(),this._rotationMatrix=x(),f=this._rotationMatrix,v=-this._bearingInRadians,B=(p=this._rotationMatrix)[0],T=p[1],M=p[2],z=p[3],V=Math.sin(v),W=Math.cos(v),f[0]=B*W+M*V,f[1]=T*W+z*V,f[2]=B*-V+M*W,f[3]=T*-V+z*W)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const a=o.ag(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==a&&(this._unmodified=!1,this._pitchInRadians=a,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const a=n/180*Math.PI;this._rollInRadians!==a&&(this._unmodified=!1,this._rollInRadians=a,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aO(this._fovInRadians)}setFov(n){n=o.ag(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=o.ad(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const a=this.getConstrained(this._center,n).zoom;this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this._tileZoom=Math.max(0,Math.floor(a)),this._scale=o.ae(a),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,a){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=a,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,a,f){this._unmodified=!1,this._edgeInsets.interpolate(n,a,f),this._constrain(),this._calcMatrices()}resize(n,a,f=!0){this._width=n,this._height=a,f&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new jt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ah,o.ah])}getConstrained(n,a){return this._callbacks.getConstrained(n,a)}getCameraQueryGeometry(n,a){if(a.length===1)return[a[0],n];{const{minX:f,minY:p,maxX:v,maxY:B}=o.a1.fromPoints(a).extend(n);return[new o.P(f,p),new o.P(v,p),new o.P(v,B),new o.P(f,B),new o.P(f,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:a,zoom:f}=this.getConstrained(this.center,this.zoom);this.setCenter(a),this.setZoom(f),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=o.af(new Float64Array(16));o.N(n,n,[this._width/2,-this._height/2,1]),o.M(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=o.af(new Float64Array(16)),o.N(n,n,[1,-1,1]),o.M(n,n,[-1,-1,0]),o.N(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,a,f,p){const v=f!==void 0?f:this.bearing,B=p=p!==void 0?p:this.pitch,T=o.a0.fromLngLat(n,a),M=-Math.cos(o.ad(B)),z=Math.sin(o.ad(B)),V=z*Math.sin(o.ad(v)),W=-z*Math.cos(o.ad(v));let $=this.elevation;const X=a-$;let ce;M*X>=0||Math.abs(M)<.1?(ce=1e4,$=a+ce*M):ce=-X/M;let Ee,Se,Fe=o.aP(1,T.y),Re=0;do{if(Re+=1,Re>10)break;Se=ce/Fe,Ee=new o.a0(T.x+V*Se,T.y+W*Se),Fe=1/Ee.meterInMercatorCoordinateUnits()}while(Math.abs(ce-Se*Fe)>1e-12);return{center:Ee.toLngLat(),elevation:$,zoom:o.aj(this.height/2/Math.tan(this.fovInRadians/2)/Se/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const a=o.ai(1,this.center.lat)*this.worldSize,f=this.cameraToCenterDistance/a,p=o.a0.fromLngLat(this.center,this.elevation),v=Qe(this.center,this.elevation,this.pitch,this.bearing,f);this._elevation=n;const B=this.calculateCenterFromCameraLngLatAlt(v.toLngLat(),o.aP(v.z,p.y),this.bearing,this.pitch);this._elevation=B.elevation,this._center=B.center,this.setZoom(B.zoom)}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=o.ai(1,this.center.lat)*this.worldSize;return Qe(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const a=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/a,n.canonical.y/a,1/a/o.$,1/a/o.$]}}class qr{constructor(n,a){this.min=n,this.max=a,this.center=o.aQ([],o.aR([],this.min,this.max),.5)}quadrant(n){const a=[n%2==0,n<2],f=o.aS(this.min),p=o.aS(this.max);for(let v=0;v<a.length;v++)f[v]=a[v]?this.min[v]:this.center[v],p[v]=a[v]?this.center[v]:this.max[v];return p[2]=this.max[2],new qr(f,p)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let a=!0;for(let f=0;f<n.planes.length;f++){const p=this.intersectsPlane(n.planes[f]);if(p===0)return 0;p===1&&(a=!1)}return a?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let a=n[3],f=n[3];for(let p=0;p<3;p++)n[p]>0?(a+=n[p]*this.min[p],f+=n[p]*this.max[p]):(f+=n[p]*this.min[p],a+=n[p]*this.max[p]);return a>=0?2:f<0?0:1}}class Uc{distanceToTile2d(n,a,f,p){const v=p.distanceX([n,a]),B=p.distanceY([n,a]);return Math.hypot(v,B)}getWrap(n,a,f){return f}getTileBoundingVolume(n,a,f,p){var v,B;let T=f,M=f;if(p!=null&&p.terrain){const V=new o.Z(n.z,a,n.z,n.x,n.y),W=p.terrain.getMinMaxElevation(V);T=(v=W.minElevation)!==null&&v!==void 0?v:f,M=(B=W.maxElevation)!==null&&B!==void 0?B:f}const z=1<<n.z;return new qr([a+n.x/z,n.y/z,T],[a+(n.x+1)/z,(n.y+1)/z,M])}allowVariableZoom(n,a){const f=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,p=o.ag(78.5-f/2,0,60);return!!a.terrain||n.pitch>p}allowWorldCopies(){return!0}prepareNextFrame(){}}class Yi{constructor(n,a,f){this.points=n,this.planes=a,this.aabb=f}static fromInvProjectionMatrix(n,a=1,f=0,p,v){const B=v?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],T=Math.pow(2,f),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($=>function(X,ce,Ee,Se){const Fe=o.av([],X,ce),Re=1/Fe[3]/Ee*Se;return o.aX(Fe,Fe,[Re,Re,1/Fe[3],Re])}($,n,a,T));p&&function($,X,ce,Ee){const Se=Ee?4:0,Fe=Ee?0:4;let Re=0;const je=[],De=[];for(let Oe=0;Oe<4;Oe++){const ht=o.aT([],$[Oe+Fe],$[Oe+Se]),St=o.aY(ht);o.aQ(ht,ht,1/St),je.push(St),De.push(ht)}for(let Oe=0;Oe<4;Oe++){const ht=o.aZ($[Oe+Se],De[Oe],ce);Re=ht!==null&&ht>=0?Math.max(Re,ht):Math.max(Re,je[Oe])}const We=function(Oe,ht){const St=o.aT([],Oe[ht[0]],Oe[ht[1]]),gt=o.aT([],Oe[ht[2]],Oe[ht[1]]),_t=[0,0,0,0];return o.aU(_t,o.aV([],St,gt)),_t[3]=-o.aW(_t,Oe[ht[0]]),_t}($,X),Je=function(Oe,ht){const St=o.a_(Oe),gt=o.a$([],Oe,1/St),_t=o.aT([],ht,o.aQ([],gt,o.aW(ht,gt))),xt=o.a_(_t);if(xt>0){const ir=Math.sqrt(1-gt[3]*gt[3]),rr=o.aQ([],gt,-gt[3]),Dt=o.aR([],rr,o.aQ([],_t,ir/xt));return o.b0(ht,Dt)}return null}(ce,We);if(Je!==null){const Oe=Je/o.aW(De[0],We);Re=Math.min(Re,Oe)}for(let Oe=0;Oe<4;Oe++){const ht=Math.min(Re,je[Oe]);$[Oe+Fe]=[$[Oe+Se][0]+De[Oe][0]*ht,$[Oe+Se][1]+De[Oe][1]*ht,$[Oe+Se][2]+De[Oe][2]*ht,1]}}(M,B[0],p,v);const z=B.map($=>{const X=o.aT([],M[$[0]],M[$[1]]),ce=o.aT([],M[$[2]],M[$[1]]),Ee=o.aU([],o.aV([],X,ce)),Se=-o.aW(Ee,M[$[1]]);return Ee.concat(Se)}),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],W=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const $ of M)for(let X=0;X<3;X++)V[X]=Math.min(V[X],$[X]),W[X]=Math.max(W[X],$[X]);return new Yi(M,z,new qr(V,W))}}class kn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,a,f){return this._helper.interpolatePadding(n,a,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,a,f=!0){this._helper.resize(n,a,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,a){this._helper.overrideNearFarZ(n,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,a){}constructor(n,a,f,p,v){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Bl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(B,T)=>this.getConstrained(B,T)},n,a,f,p,v),this._coveringTilesDetailsProvider=new Uc}clone(){const n=new kn;return n.apply(this),n}apply(n,a,f){this._helper.apply(n,a,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const a=[new o.b1(0,n)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new o.P(0,0)),p=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),v=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),B=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),T=Math.floor(Math.min(f.x,p.x,v.x,B.x)),M=Math.floor(Math.max(f.x,p.x,v.x,B.x)),z=1;for(let V=T-z;V<=M+z;V++)V!==0&&a.push(new o.b1(V,n))}return a}getCameraFrustum(){return Yi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const a=this.screenPointToLocation(this.centerPoint,n),f=n?n.getElevationForLngLatZoom(a,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(n,a){const f=o.ai(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(a,f),v=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),B=o.a0.fromLngLat(n),T=new o.a0(B.x-(p.x-v.x),B.y-(p.y-v.y));this.setCenter(T==null?void 0:T.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,a){return a?this.coordinatePoint(o.a0.fromLngLat(n),a.getElevationForLngLatZoom(n,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a0.fromLngLat(n))}screenPointToLocation(n,a){var f;return(f=this.screenPointToMercatorCoordinate(n,a))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(n,a){if(a){const f=a.pointCoordinate(n);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,a){const f=a||0,p=[n.x,n.y,0,1],v=[n.x,n.y,1,1];o.av(p,p,this._pixelMatrixInverse),o.av(v,v,this._pixelMatrixInverse);const B=p[3],T=v[3],M=p[1]/B,z=v[1]/T,V=p[2]/B,W=v[2]/T,$=V===W?0:(f-V)/(W-V);return new o.a0(o.C.number(p[0]/B,v[0]/T,$)/this.worldSize,o.C.number(M,z,$)/this.worldSize,f)}coordinatePoint(n,a=0,f=this._pixelMatrix){const p=[n.x*this.worldSize,n.y*this.worldSize,a,1];return o.av(p,p,f),new o.P(p[0]/p[3],p[1]/p[3])}getBounds(){const n=Math.max(0,this._helper._height/2-fe(this));return new jt().extend(this.screenPointToLocation(new o.P(0,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(n,a){return a?a.pointCoordinate(n)!=null:n.y>this.height/2-fe(this)}calculatePosMatrix(n,a=!1,f){var p;const v=(p=n.key)!==null&&p!==void 0?p:o.b2(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),B=a?this._alignedPosMatrixCache:this._posMatrixCache;if(B.has(v)){const z=B.get(v);return f?z.f32:z.f64}const T=_e(n,this.worldSize);o.O(T,a?this._alignedProjMatrix:this._viewProjMatrix,T);const M={f64:T,f32:new Float32Array(T)};return B.set(v,M),f?M.f32:M.f64}calculateFogMatrix(n){const a=n.key,f=this._fogMatrixCacheF32;if(f.has(a))return f.get(a);const p=_e(n,this.worldSize);return o.O(p,this._fogMatrix,p),f.set(a,new Float32Array(p)),f.get(a)}getConstrained(n,a){a=o.ag(+a,this.minZoom,this.maxZoom);const f={center:new o.S(n.lng,n.lat),zoom:a};let p=this._helper._lngRange;if(!this._helper._renderWorldCopies&&p===null){const je=179.9999999999;p=[-je,je]}const v=this.tileSize*o.ae(f.zoom);let B=0,T=v,M=0,z=v,V=0,W=0;const{x:$,y:X}=this.size;if(this._helper._latRange){const je=this._helper._latRange;B=o.U(je[1])*v,T=o.U(je[0])*v,T-B<X&&(V=X/(T-B))}p&&(M=o.aN(o.V(p[0])*v,0,v),z=o.aN(o.V(p[1])*v,0,v),z<M&&(z+=v),z-M<$&&(W=$/(z-M)));const{x:ce,y:Ee}=At(v,n);let Se,Fe;const Re=Math.max(W||0,V||0);if(Re){const je=new o.P(W?(z+M)/2:ce,V?(T+B)/2:Ee);return f.center=le(v,je).wrap(),f.zoom+=o.aj(Re),f}if(this._helper._latRange){const je=X/2;Ee-je<B&&(Fe=B+je),Ee+je>T&&(Fe=T-je)}if(p){const je=(M+z)/2;let De=ce;this._helper._renderWorldCopies&&(De=o.aN(ce,je-v/2,je+v/2));const We=$/2;De-We<M&&(Se=M+We),De+We>z&&(Se=z-We)}if(Se!==void 0||Fe!==void 0){const je=new o.P(Se??ce,Fe??Ee);f.center=le(v,je).wrap()}return f}calculateCenterFromCameraLngLatAlt(n,a,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,a,f,p)}_calculateNearFarZIfNeeded(n,a,f){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),v=n-p*this._helper._pixelPerMeter/Math.cos(a),B=p<0?v:n,T=Math.PI/2+this.pitchInRadians,M=o.ad(this.fov)*(Math.abs(Math.cos(o.ad(this.roll)))*this.height+Math.abs(Math.sin(o.ad(this.roll)))*this.width)/this.height*(.5+f.y/this.height),z=Math.sin(M)*B/Math.sin(o.ag(Math.PI-T-M,.01,Math.PI-.01)),V=fe(this),W=Math.atan(V/this._helper.cameraToCenterDistance),$=o.ad(.75),X=W>$?2*W*(.5+f.y/(2*V)):$,ce=Math.sin(X)*B/Math.sin(o.ag(Math.PI-T-X,.01,Math.PI-.01)),Ee=Math.min(z,ce);this._helper._farZ=1.01*(Math.cos(Math.PI/2-a)*Ee+B),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,a=At(this.worldSize,this.center),f=a.x,p=a.y;this._helper._pixelPerMeter=o.ai(1,this.center.lat)*this.worldSize;const v=o.ad(Math.min(this.pitch,ur)),B=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(v));let T;this._calculateNearFarZIfNeeded(B,v,n),T=new Float64Array(16),o.b3(T,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.ap(this._invProjMatrix,T),T[8]=2*-n.x/this._helper._width,T[9]=2*n.y/this._helper._height,this._projectionMatrix=o.b4(T),o.N(T,T,[1,-1,1]),o.M(T,T,[0,0,-this._helper.cameraToCenterDistance]),o.b5(T,T,-this.rollInRadians),o.b6(T,T,this.pitchInRadians),o.b5(T,T,-this.bearingInRadians),o.M(T,T,[-f,-p,0]),this._mercatorMatrix=o.N([],T,[this.worldSize,this.worldSize,this.worldSize]),o.N(T,T,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,T),o.M(T,T,[0,0,-this.elevation]),this._viewProjMatrix=T,this._invViewProjMatrix=o.ap([],T);const M=[0,0,-1,1];o.av(M,M,this._invViewProjMatrix),this._cameraPosition=[M[0]/M[3],M[1]/M[3],M[2]/M[3]],this._fogMatrix=new Float64Array(16),o.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,B,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-f,-p,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,T);const z=this._helper._width%2/2,V=this._helper._height%2/2,W=Math.cos(this.bearingInRadians),$=Math.sin(-this.bearingInRadians),X=f-Math.round(f)+W*z+$*V,ce=p-Math.round(p)+W*V+$*z,Ee=new Float64Array(T);if(o.M(Ee,Ee,[X>.5?X-1:X,ce>.5?ce-1:ce,0]),this._alignedProjMatrix=Ee,T=o.ap(new Float64Array(16),this._pixelMatrix),!T)throw new Error("failed to invert matrix");this._pixelMatrixInverse=T,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new o.P(0,0)),a=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.av(a,a,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=o.ai(1,this.center.lat)*this.worldSize;return Qe(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,a){const f=o.a0.fromLngLat(n),p=[f.x*this.worldSize,f.y*this.worldSize,a,1];return o.av(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(n){const{overscaledTileID:a,aligned:f,applyTerrainMatrix:p}=n,v=this._helper.getMercatorTileCoordinates(a),B=a?this.calculatePosMatrix(a,f,!0):null;let T;return T=a&&a.terrainRttPosMatrix32f&&p?a.terrainRttPosMatrix32f:B||o.b7(),{mainMatrix:T,tileMercatorCoords:v,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:T}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,a,f){return 1}transformLightDirection(n){return o.aS(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,a,f,p){const v=this.calculatePosMatrix(f);let B;p?(B=[n,a,p(n,a),1],o.av(B,B,v)):(B=[n,a,0,1],va(B,B,v));const T=B[3];return{point:new o.P(B[0]/T,B[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}populateCache(n){for(const a of n)this.calculatePosMatrix(a)}getMatrixForModel(n,a){const f=o.a0.fromLngLat(n,a),p=f.meterInMercatorCoordinateUnits(),v=o.b8();return o.M(v,v,[f.x,f.y,f.z]),o.b5(v,v,Math.PI),o.b6(v,v,Math.PI/2),o.N(v,v,[-p,p,p]),v}getProjectionDataForCustomLayer(n=!0){const a=new o.Z(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:a,applyGlobeMatrix:n}),p=_e(a,this.worldSize);o.O(p,this._viewProjMatrix,p),f.tileMercatorCoords=[0,0,1,1];const v=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],B=o.b9();return o.N(B,p,v),f.fallbackMatrix=B,f.mainMatrix=B,f}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function Di(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ci(y){if(y.useSlerp)if(y.k<1){const n=o.ba(y.startEulerAngles.roll,y.startEulerAngles.pitch,y.startEulerAngles.bearing),a=o.ba(y.endEulerAngles.roll,y.endEulerAngles.pitch,y.endEulerAngles.bearing),f=new Float64Array(4);o.bb(f,n,a,y.k);const p=o.bc(f);y.tr.setRoll(p.roll),y.tr.setPitch(p.pitch),y.tr.setBearing(p.bearing)}else y.tr.setRoll(y.endEulerAngles.roll),y.tr.setPitch(y.endEulerAngles.pitch),y.tr.setBearing(y.endEulerAngles.bearing);else y.tr.setRoll(o.C.number(y.startEulerAngles.roll,y.endEulerAngles.roll,y.k)),y.tr.setPitch(o.C.number(y.startEulerAngles.pitch,y.endEulerAngles.pitch,y.k)),y.tr.setBearing(o.C.number(y.startEulerAngles.bearing,y.endEulerAngles.bearing,y.k))}function Un(y,n,a,f,p){const v=p.padding,B=At(p.worldSize,a.getNorthWest()),T=At(p.worldSize,a.getNorthEast()),M=At(p.worldSize,a.getSouthEast()),z=At(p.worldSize,a.getSouthWest()),V=o.ad(-f),W=B.rotate(V),$=T.rotate(V),X=M.rotate(V),ce=z.rotate(V),Ee=new o.P(Math.max(W.x,$.x,ce.x,X.x),Math.max(W.y,$.y,ce.y,X.y)),Se=new o.P(Math.min(W.x,$.x,ce.x,X.x),Math.min(W.y,$.y,ce.y,X.y)),Fe=Ee.sub(Se),Re=(p.width-(v.left+v.right+n.left+n.right))/Fe.x,je=(p.height-(v.top+v.bottom+n.top+n.bottom))/Fe.y;if(je<0||Re<0)return void Di();const De=Math.min(o.aj(p.scale*Math.min(Re,je)),y.maxZoom),We=o.P.convert(y.offset),Je=new o.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(o.ad(f)),Oe=We.add(Je).mult(p.scale/o.ae(De));return{center:le(p.worldSize,B.add(M).div(2).sub(Oe)),zoom:De,bearing:f}}class Cl{get useGlobeControls(){return!1}handlePanInertia(n,a){return{easingOffset:n,easingCenter:a.center}}handleMapControlsRollPitchBearingZoom(n,a){n.bearingDelta&&a.setBearing(a.bearing+n.bearingDelta),n.pitchDelta&&a.setPitch(a.pitch+n.pitchDelta),n.rollDelta&&a.setRoll(a.roll+n.rollDelta),n.zoomDelta&&a.setZoom(a.zoom+n.zoomDelta)}handleMapControlsPan(n,a,f){n.around.distSqr(a.centerPoint)<.01||a.setLocationAtPoint(f,n.around)}cameraForBoxAndBearing(n,a,f,p,v){return Un(n,a,f,p,v)}handleJumpToCenterZoom(n,a){n.zoom!==(a.zoom!==void 0?+a.zoom:n.zoom)&&n.setZoom(+a.zoom),a.center!==void 0&&n.setCenter(o.S.convert(a.center))}handleEaseTo(n,a){const f=n.zoom,p=n.padding,v={roll:n.roll,pitch:n.pitch,bearing:n.bearing},B={roll:a.roll===void 0?n.roll:a.roll,pitch:a.pitch===void 0?n.pitch:a.pitch,bearing:a.bearing===void 0?n.bearing:a.bearing},T=a.zoom!==void 0,M=!n.isPaddingEqual(a.padding);let z=!1;const V=T?+a.zoom:n.zoom;let W=n.centerPoint.add(a.offsetAsPoint);const $=n.screenPointToLocation(W),{center:X,zoom:ce}=n.getConstrained(o.S.convert(a.center||$),V??f);ei(n,X);const Ee=At(n.worldSize,$),Se=At(n.worldSize,X).sub(Ee),Fe=o.ae(ce-f);return z=ce!==f,{easeFunc:Re=>{if(z&&n.setZoom(o.C.number(f,ce,Re)),o.bd(v,B)||Ci({startEulerAngles:v,endEulerAngles:B,tr:n,k:Re,useSlerp:v.roll!=B.roll}),M&&(n.interpolatePadding(p,a.padding,Re),W=n.centerPoint.add(a.offsetAsPoint)),a.around)n.setLocationAtPoint(a.around,a.aroundPoint);else{const je=o.ae(n.zoom-f),De=ce>f?Math.min(2,Fe):Math.max(.5,Fe),We=Math.pow(De,1-Re),Je=le(n.worldSize,Ee.add(Se.mult(Re*We)).mult(je));n.setLocationAtPoint(n.renderWorldCopies?Je.wrap():Je,W)}},isZooming:z,elevationCenter:X}}handleFlyTo(n,a){const f=a.zoom!==void 0,p=n.zoom,v=n.getConstrained(o.S.convert(a.center||a.locationAtOffset),f?+a.zoom:p),B=v.center,T=v.zoom;ei(n,B);const M=At(n.worldSize,a.locationAtOffset),z=At(n.worldSize,B).sub(M),V=z.mag(),W=o.ae(T-p);let $;if(a.minZoom!==void 0){const X=Math.min(+a.minZoom,p,T),ce=n.getConstrained(B,X).zoom;$=o.ae(ce-p)}return{easeFunc:(X,ce,Ee,Se)=>{n.setZoom(X===1?T:p+o.aj(ce));const Fe=X===1?B:le(n.worldSize,M.add(z.mult(Ee)).mult(ce));n.setLocationAtPoint(n.renderWorldCopies?Fe.wrap():Fe,Se)},scaleOfZoom:W,targetCenter:B,scaleOfMinZoom:$,pixelPathLength:V}}}class An{constructor(n,a,f){this.blendFunction=n,this.blendColor=a,this.mask=f}}An.Replace=[1,0],An.disabled=new An(An.Replace,o.be.transparent,[!1,!1,!1,!1]),An.unblended=new An(An.Replace,o.be.transparent,[!0,!0,!0,!0]),An.alphaBlended=new An([1,771],o.be.transparent,[!0,!0,!0,!0]);const ws=2305;class Gr{constructor(n,a,f){this.enable=n,this.mode=a,this.frontFace=f}}Gr.disabled=new Gr(!1,1029,ws),Gr.backCCW=new Gr(!0,1029,ws),Gr.frontCCW=new Gr(!0,1028,ws);class Wr{constructor(n,a,f){this.func=n,this.mask=a,this.range=f}}Wr.ReadOnly=!1,Wr.ReadWrite=!0,Wr.disabled=new Wr(519,Wr.ReadOnly,[0,1]);const Ao=7680;class Tr{constructor(n,a,f,p,v,B){this.test=n,this.ref=a,this.mask=f,this.fail=p,this.depthFail=v,this.pass=B}}Tr.disabled=new Tr({func:519,mask:0},0,0,Ao,Ao,Ao);const Za=new WeakMap;function Si(y){var n;if(Za.has(y))return Za.get(y);{const a=(n=y.getParameter(y.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Za.set(y,a),a}}class ba{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const a=n.context,f=a.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const p=new o.aK;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const v=new o.aM;v.emplaceBack(0,1,2),this._fullscreenTriangle=new Jo(a.createVertexBuffer(p,ea.members),a.createIndexBuffer(v),o.aL.simpleSegment(0,0,p.length,v.length)),this._resultBuffer=new Uint8Array(4),a.activeTexture.set(f.TEXTURE1);const B=f.createTexture();f.bindTexture(f.TEXTURE_2D,B),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=a.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(B),Si(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,a){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,a),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,a=n.gl;n.activeTexture.set(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,a){const f=this._cachedRenderContext.context,p=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:o.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,p.TRIANGLES,Wr.disabled,Tr.disabled,An.unblended,Gr.disabled,((v,B)=>({u_input:v,u_output_expected:B}))(n,a),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Si(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const v=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:v}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Si(n)){const a=n.clientWaitSync(this._readbackQueue.sync,0,0);if(a===n.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(a===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ba._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let a=0;return a+=n[0]/256,a+=n[1]/65536,a+=n[2]/16777216,n[3]<127&&(a=-a),a/128}}const Oi=o.$/128;function jA(y,n){const a=y.granularity!==void 0?Math.max(y.granularity,1):1,f=a+(y.generateBorders?2:0),p=a+(y.extendToNorthPole||y.generateBorders?1:0)+(y.extendToSouthPole||y.generateBorders?1:0),v=f+1,B=p+1,T=y.generateBorders?-1:0,M=y.generateBorders||y.extendToNorthPole?-1:0,z=a+(y.generateBorders?1:0),V=a+(y.generateBorders||y.extendToSouthPole?1:0),W=v*B,$=f*p*6,X=v*B>65536;if(X&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ce=X||n==="32bit",Ee=new Int16Array(2*W);let Se=0;for(let je=M;je<=V;je++)for(let De=T;De<=z;De++){let We=De/a*o.$;De===-1&&(We=-Oi),De===a+1&&(We=o.$+Oi);let Je=je/a*o.$;je===-1&&(Je=y.extendToNorthPole?o.bg:-Oi),je===a+1&&(Je=y.extendToSouthPole?o.bh:o.$+Oi),Ee[Se++]=We,Ee[Se++]=Je}const Fe=ce?new Uint32Array($):new Uint16Array($);let Re=0;for(let je=0;je<p;je++)for(let De=0;De<f;De++){const We=De+1+je*v,Je=De+(je+1)*v,Oe=De+1+(je+1)*v;Fe[Re++]=De+je*v,Fe[Re++]=Je,Fe[Re++]=We,Fe[Re++]=We,Fe[Re++]=Je,Fe[Re++]=Oe}return{vertices:Ee.buffer.slice(0),indices:Fe.buffer.slice(0),uses32bitIndices:ce}}const co=new o.aJ({fill:new o.bi(128,2),line:new o.bi(512,0),tile:new o.bi(128,32),stencil:new o.bi(128,1),circle:3});class Qc{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Zs.projectionGlobe}get vertexShaderPreludeCode(){return Zs.projectionMercator.vertexSource}get subdivisionGranularity(){return co}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new ba(n));const a=o.U(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-a*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(a,f),v=P.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=v);const B=Math.min(Math.max((v-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bk(B))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,a,f,p,v){const B=(v==="stencil"?co.stencil:co.tile).getGranularityForZoomLevel(a.z);return this._getMesh(n,{granularity:B,generateBorders:f,extendToNorthPole:a.y===0&&p,extendToSouthPole:a.y===(1<<a.z)-1&&p})}_getMesh(n,a){const f=this._getMeshKey(a);if(f in this._tileMeshCache)return this._tileMeshCache[f];const p=function(v,B){const T=jA(B,"16bit"),M=o.aK.deserialize({arrayBuffer:T.vertices,length:T.vertices.byteLength/2/2}),z=o.aM.deserialize({arrayBuffer:T.indices,length:T.indices.byteLength/2/3});return new Jo(v.createVertexBuffer(M,ea.members),v.createIndexBuffer(z),o.aL.simpleSegment(0,0,M.length,z.length))}(n,a);return this._tileMeshCache[f]=p,p}recalculate(n){}hasTransition(){const n=P.now();let a=!1;return a=a||(n-this._errorMeasurementLastChangeTime)/1e3<.7,a=a||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,a}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const Rc=new o.r({type:new o.D(o.v.projection.type)});class Xs extends o.E{constructor(n){super(),this._transitionable=new o.t(Rc),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new bl,this._verticalPerspectiveProjection=new Qc}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof o.bl){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,a,f,p,v){return this.currentProjection.getMeshFromTileID(n,a,f,p,v)}setProjection(n){this._transitionable.setValue("type",(n==null?void 0:n.type)||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function uo(y){const n=xs(y.worldSize,y.center.lat);return 2*Math.PI*n}function ho(y,n,a,f,p){const v=1/(1<<p),B=n/o.$*v+f*v,T=o.bn((y/o.$*v+a*v)*Math.PI*2+Math.PI,2*Math.PI),M=2*Math.atan(Math.exp(Math.PI-B*Math.PI*2))-.5*Math.PI,z=Math.cos(M),V=new Float64Array(3);return V[0]=Math.sin(T)*z,V[1]=Math.sin(M),V[2]=Math.cos(T)*z,V}function Zn(y){return function(n,a){const f=Math.cos(a),p=new Float64Array(3);return p[0]=Math.sin(n)*f,p[1]=Math.sin(a),p[2]=Math.cos(n)*f,p}(y.lng*Math.PI/180,y.lat*Math.PI/180)}function xs(y,n){return y/(2*Math.PI)/Math.cos(n*Math.PI/180)}function Xa(y){const n=Math.asin(y[1])/Math.PI*180,a=Math.sqrt(y[0]*y[0]+y[2]*y[2]);if(a>1e-6){const f=y[0]/a,p=Math.acos(y[2]/a),v=(f>0?p:-p)/Math.PI*180;return new o.S(o.aN(v,-180,180),n)}return new o.S(0,n)}function So(y){return Math.cos(y*Math.PI/180)}function gi(y,n){const a=So(y),f=So(n);return o.aj(f/a)}function Ba(y,n){const a=y.rotate(n.bearingInRadians),f=n.zoom+gi(n.center.lat,0),p=o.bj(1/So(n.center.lat),1/So(Math.min(Math.abs(n.center.lat),60)),o.bm(f,7,3,0,1)),v=360/uo({worldSize:n.worldSize,center:{lat:n.center.lat}});return new o.S(n.center.lng-a.x*v*p,o.ag(n.center.lat+a.y*v,-o.ah,o.ah))}function Sl(y){const n=.5*y,a=Math.sin(n),f=Math.cos(n);return Math.log(a+f)-Math.log(f-a)}function Ca(y,n,a,f){const p=y.lat+a*f;if(Math.abs(a)>1){const v=(Math.sign(y.lat+a)!==Math.sign(y.lat)?-Math.abs(y.lat):Math.abs(y.lat))*Math.PI/180,B=Math.abs(y.lat+a)*Math.PI/180,T=Sl(v+f*(B-v)),M=Sl(v),z=Sl(B);return new o.S(y.lng+n*((T-M)/(z-M)),p)}return new o.S(y.lng+n*f,p)}class Nc{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,a,f,p){const v=`${n.z}_${n.x}_${n.y}_${p!=null&&p.terrain?"t":""}`,B=this._cache.get(v);if(B)return B;const T=this._cachePrevious.get(v);if(T)return this._cache.set(v,T),T;const M=this._boundingVolumeFactory(n,a,f,p);return this._cache.set(v,M),this._hadAnyChanges=!0,M}}class ta{constructor(n,a,f,p){this.min=f,this.max=p,this.points=n,this.planes=a}static fromAabb(n,a){const f=[];for(let p=0;p<8;p++)f.push([1&~p?n[0]:a[0],(p>>1&1)==1?a[1]:n[1],(p>>2&1)==1?a[2]:n[2]]);return new ta(f,[[-1,0,0,a[0]],[1,0,0,-n[0]],[0,-1,0,a[1]],[0,1,0,-n[1]],[0,0,-1,a[2]],[0,0,1,-n[2]]],n,a)}static fromCenterSizeAngles(n,a,f){const p=o.bq([],f[0],f[1],f[2]),v=o.br([],[a[0],0,0],p),B=o.br([],[0,a[1],0],p),T=o.br([],[0,0,a[2]],p),M=[...n],z=[...n];for(let W=0;W<8;W++)for(let $=0;$<3;$++){const X=n[$]+v[$]*(1&~W?-1:1)+B[$]*((W>>1&1)==1?1:-1)+T[$]*((W>>2&1)==1?1:-1);M[$]=Math.min(M[$],X),z[$]=Math.max(z[$],X)}const V=[];for(let W=0;W<8;W++){const $=[...n];o.aR($,$,o.aQ([],v,1&~W?-1:1)),o.aR($,$,o.aQ([],B,(W>>1&1)==1?1:-1)),o.aR($,$,o.aQ([],T,(W>>2&1)==1?1:-1)),V.push($)}return new ta(V,[[...v,-o.aW(v,V[0])],[...B,-o.aW(B,V[0])],[...T,-o.aW(T,V[0])],[-v[0],-v[1],-v[2],-o.aW(v,V[7])],[-B[0],-B[1],-B[2],-o.aW(B,V[7])],[-T[0],-T[1],-T[2],-o.aW(T,V[7])]],M,z)}intersectsFrustum(n){let a=!0;const f=this.points.length,p=this.planes.length,v=n.planes.length,B=n.points.length;for(let T=0;T<v;T++){const M=n.planes[T];let z=0;for(let V=0;V<f;V++){const W=this.points[V];M[0]*W[0]+M[1]*W[1]+M[2]*W[2]+M[3]>=0&&z++}if(z===0)return 0;z<f&&(a=!1)}if(a)return 2;for(let T=0;T<p;T++){const M=this.planes[T];let z=0;for(let V=0;V<B;V++){const W=n.points[V];M[0]*W[0]+M[1]*W[1]+M[2]*W[2]+M[3]>=0&&z++}if(z===0)return 0}return 1}intersectsPlane(n){const a=this.points.length;let f=0;for(let p=0;p<a;p++){const v=this.points[p];n[0]*v[0]+n[1]*v[1]+n[2]*v[2]+n[3]>=0&&f++}return f===a?2:f===0?0:1}}function Sa(y,n,a){const f=y-n;return f<0?-f:Math.max(0,f-a)}function Xl(y,n,a,f,p){const v=y-a;let B;return B=v<0?Math.min(-v,1+v-p):v>1?Math.min(Math.max(v-p,0),1-v):0,Math.max(B,Sa(n,f,p))}class Dc{constructor(){this._boundingVolumeCache=new Nc(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,a,f,p){const v=1<<f.z,B=1/v,T=f.x/v,M=f.y/v;let z=2;return z=Math.min(z,Xl(n,a,T,M,B)),z=Math.min(z,Xl(n,a,T+.5,-M-B,B)),z=Math.min(z,Xl(n,a,T+.5,2-M-B,B)),z}getWrap(n,a,f){const p=1<<a.z,v=1/p,B=a.x/p,T=Sa(n.x,B,v),M=Sa(n.x,B-1,v),z=Sa(n.x,B+1,v),V=Math.min(T,M,z);return V===z?1:V===M?-1:0}allowVariableZoom(n,a){return Ft(n,a)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,a,f,p){return this._boundingVolumeCache.getTileBoundingVolume(n,a,f,p)}_computeTileBoundingVolume(n,a,f,p){var v,B;let T=f,M=f;if(p!=null&&p.terrain){const z=new o.Z(n.z,a,n.z,n.x,n.y),V=p.terrain.getMinMaxElevation(z);T=(v=V.minElevation)!==null&&v!==void 0?v:f,M=(B=V.maxElevation)!==null&&B!==void 0?B:f}if(T/=o.bt,M/=o.bt,T+=1,M+=1,n.z<=0)return ta.fromAabb([-M,-M,-M],[M,M,M]);if(n.z===1)return ta.fromAabb([n.x===0?-M:0,n.y===0?0:-M,-M],[n.x===0?0:M,n.y===0?M:0,M]);{const z=[ho(0,0,n.x,n.y,n.z),ho(o.$,0,n.x,n.y,n.z),ho(o.$,o.$,n.x,n.y,n.z),ho(0,o.$,n.x,n.y,n.z)],V=[];for(const _t of z)V.push(o.aQ([],_t,M));if(M!==T)for(const _t of z)V.push(o.aQ([],_t,T));n.y===0&&V.push([0,1,0]),n.y===(1<<n.z)-1&&V.push([0,-1,0]);const W=[1,1,1],$=[-1,-1,-1];for(const _t of V)for(let xt=0;xt<3;xt++)W[xt]=Math.min(W[xt],_t[xt]),$[xt]=Math.max($[xt],_t[xt]);const X=ho(o.$/2,o.$/2,n.x,n.y,n.z),ce=o.aV([],[0,1,0],X);o.aU(ce,ce);const Ee=o.aV([],X,ce);o.aU(Ee,Ee);const Se=o.aV([],z[2],z[1]);o.aU(Se,Se);const Fe=o.aV([],z[0],z[3]);o.aU(Fe,Fe),V.push(o.aQ([],X,M)),n.y>=(1<<n.z)/2&&V.push(o.aQ([],ho(o.$/2,0,n.x,n.y,n.z),M)),n.y<(1<<n.z)/2&&V.push(o.aQ([],ho(o.$/2,o.$,n.x,n.y,n.z),M));const Re=Ji(X,V),je=Ji(Ee,V),De=[-X[0],-X[1],-X[2],Re.max],We=[X[0],X[1],X[2],-Re.min],Je=[-Ee[0],-Ee[1],-Ee[2],je.max],Oe=[Ee[0],Ee[1],Ee[2],-je.min],ht=[...Se,0],St=[...Fe,0],gt=[];return n.y===0?gt.push(o.bs(St,ht,De),o.bs(St,ht,We)):gt.push(o.bs(Je,ht,De),o.bs(Je,ht,We),o.bs(Je,St,De),o.bs(Je,St,We)),n.y===(1<<n.z)-1?gt.push(o.bs(St,ht,De),o.bs(St,ht,We)):gt.push(o.bs(Oe,ht,De),o.bs(Oe,ht,We),o.bs(Oe,St,De),o.bs(Oe,St,We)),new ta(gt,[De,We,Je,Oe,ht,St],W,$)}}}function Ji(y,n){let a=1/0,f=-1/0;for(const p of n){const v=o.aW(y,p);a=Math.min(a,v),f=Math.max(f,v)}return{min:a,max:f}}class El{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,a,f){return this._helper.interpolatePadding(n,a,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,a){this._helper.resize(n,a)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,a){this._helper.overrideNearFarZ(n,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(){this._cachedClippingPlane=o.bu(),this._projectionMatrix=o.b8(),this._globeViewProjMatrix32f=o.b7(),this._globeViewProjMatrixNoCorrection=o.b8(),this._globeViewProjMatrixNoCorrectionInverted=o.b8(),this._globeProjMatrixInverted=o.b8(),this._cameraPosition=o.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Bl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,a)=>this.getConstrained(n,a)}),this._coveringTilesDetailsProvider=new Dc}clone(){const n=new El;return n.apply(this),n}apply(n,a){this._globeLatitudeErrorCorrectionRadians=a||0,this._helper.apply(n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=o.bo();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:a,applyGlobeMatrix:f}=n,p=this._helper.getMercatorTileCoordinates(a);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const a=this.pitchInRadians,f=this.cameraToCenterDistance/n,p=Math.sin(a)*f,v=Math.cos(a)*f+1,B=1/Math.sqrt(p*p+v*v)*1;let T=-p,M=v;const z=Math.sqrt(T*T+M*M);T/=z,M/=z;const V=[0,T,M];o.bv(V,V,[0,0,0],-this.bearingInRadians),o.bw(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),o.bx(V,V,[0,0,0],this.center.lng*Math.PI/180);const W=1/o.aY(V);return o.aQ(V,V,W),[...V,-B*W]}isLocationOccluded(n){return!this.isSurfacePointVisible(Zn(n))}transformLightDirection(n){const a=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,p=Math.cos(f),v=[Math.sin(a)*p,Math.sin(f),Math.cos(a)*p],B=[v[2],0,-v[0]],T=[0,0,0];o.aV(T,B,v),o.aU(B,B),o.aU(T,T);const M=[0,0,0];return o.aU(M,[B[0]*n[0]+T[0]*n[1]+v[0]*n[2],B[1]*n[0]+T[1]*n[1]+v[1]*n[2],B[2]*n[0]+T[2]*n[1]+v[2]*n[2]]),M}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,a,f){const p=function(T,M,z){const V=1/(1<<z.z);return new o.a0(T/o.$*V+z.x*V,M/o.$*V+z.y*V)}(n,a,f.canonical),v=(B=p.y,[o.bn(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-B*Math.PI*2))-.5*Math.PI]);var B;return this.getCircleRadiusCorrection()/Math.cos(v[1])}projectTileCoordinates(n,a,f,p){const v=f.canonical,B=ho(n,a,v.x,v.y,v.z),T=1+(p?p(n,a):0)/o.bt,M=[B[0]*T,B[1]*T,B[2]*T,1];o.av(M,M,this._globeViewProjMatrixNoCorrection);const z=this._cachedClippingPlane,V=z[0]*B[0]+z[1]*B[1]+z[2]*B[2]+z[3]<0;return{point:new o.P(M[0]/M[3],M[1]/M[3]),signedDistanceFromCamera:M[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=xs(this.worldSize,this.center.lat),a=o.b9(),f=o.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),o.b3(a,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;a[8]=2*-p.x/this._helper._width,a[9]=2*p.y/this._helper._height,this._projectionMatrix=o.b4(a),this._globeProjMatrixInverted=o.b9(),o.ap(this._globeProjMatrixInverted,a),o.M(a,a,[0,0,-this.cameraToCenterDistance]),o.b5(a,a,this.rollInRadians),o.b6(a,a,-this.pitchInRadians),o.b5(a,a,this.bearingInRadians),o.M(a,a,[0,0,-n]);const v=o.bo();v[0]=n,v[1]=n,v[2]=n,o.b6(f,a,this.center.lat*Math.PI/180),o.by(f,f,-this.center.lng*Math.PI/180),o.N(f,f,v),this._globeViewProjMatrixNoCorrection=f,o.b6(a,a,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.by(a,a,-this.center.lng*Math.PI/180),o.N(a,a,v),this._globeViewProjMatrix32f=new Float32Array(a),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),o.ap(this._globeViewProjMatrixNoCorrectionInverted,f);const B=o.bo();this._cameraPosition=o.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/n,o.bv(this._cameraPosition,this._cameraPosition,B,-this.rollInRadians),o.bw(this._cameraPosition,this._cameraPosition,B,this.pitchInRadians),o.bv(this._cameraPosition,this._cameraPosition,B,-this.bearingInRadians),o.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bw(this._cameraPosition,this._cameraPosition,B,-this.center.lat*Math.PI/180),o.bx(this._cameraPosition,this._cameraPosition,B,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const T=o.b4(this._globeViewProjMatrixNoCorrectionInverted);o.N(T,T,[1,1,-1]),this._cachedFrustum=Yi.fromInvProjectionMatrix(T,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){o.w("calculateFogMatrix is not supported on globe projection.");const a=o.b9();return o.af(a),a}getVisibleUnwrappedCoordinates(n){return[new o.b1(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,a){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=Zn(n);o.aQ(f,f,1+a/o.bt);const p=o.bu();return o.av(p,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(n){}getBounds(){const n=.5*this.width,a=.5*this.height,f=[new o.P(0,0),new o.P(n,0),new o.P(this.width,0),new o.P(this.width,a),new o.P(this.width,this.height),new o.P(n,this.height),new o.P(0,this.height),new o.P(0,a)],p=[];for(const W of f)p.push(this.unprojectScreenPoint(W));let v=0,B=0,T=0,M=0;const z=this.center;for(const W of p){const $=o.bz(z.lng,W.lng),X=o.bz(z.lat,W.lat);$<B&&(B=$),$>v&&(v=$),X<M&&(M=X),X>T&&(T=X)}const V=[z.lng+B,z.lat+M,z.lng+v,z.lat+T];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new jt(V)}getConstrained(n,a){const f=o.ag(n.lat,-o.ah,o.ah),p=o.ag(+a,this.minZoom+gi(0,f),this.maxZoom);return{center:new o.S(n.lng,f),zoom:p}}calculateCenterFromCameraLngLatAlt(n,a,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,a,f,p)}setLocationAtPoint(n,a){const f=Zn(this.unprojectScreenPoint(a)),p=Zn(n),v=o.bo();o.bA(v);const B=o.bo();o.bx(B,f,v,-this.center.lng*Math.PI/180),o.bw(B,B,v,this.center.lat*Math.PI/180);const T=p[0]*p[0]+p[2]*p[2],M=B[0]*B[0];if(T<M)return;const z=Math.sqrt(T-M),V=-z,W=o.bB(p[0],p[2],B[0],z),$=o.bB(p[0],p[2],B[0],V),X=o.bo();o.bx(X,p,v,-W);const ce=o.bB(X[1],X[2],B[1],B[2]),Ee=o.bo();o.bx(Ee,p,v,-$);const Se=o.bB(Ee[1],Ee[2],B[1],B[2]),Fe=.5*Math.PI,Re=ce>=-Fe&&ce<=Fe,je=Se>=-Fe&&Se<=Fe;let De,We;if(Re&&je){const St=this.center.lng*Math.PI/180,gt=this.center.lat*Math.PI/180;o.bC(W,St)+o.bC(ce,gt)<o.bC($,St)+o.bC(Se,gt)?(De=W,We=ce):(De=$,We=Se)}else if(Re)De=W,We=ce;else{if(!je)return;De=$,We=Se}const Je=De/Math.PI*180,Oe=We/Math.PI*180,ht=this.center.lat;this.setCenter(new o.S(Je,o.ag(Oe,-90,90))),this.setZoom(this.zoom+gi(ht,this.center.lat))}locationToScreenPoint(n,a){const f=Zn(n);if(a){const p=a.getElevationForLngLatZoom(n,this._helper._tileZoom);o.aQ(f,f,1+p/o.bt)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(n){const a=o.bu();return o.av(a,[...n,1],this._globeViewProjMatrixNoCorrection),a[0]/=a[3],a[1]/=a[3],new o.P((.5*a[0]+.5)*this.width,(.5*-a[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,a){if(a){const f=a.pointCoordinate(n);if(f)return f}return o.a0.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,a){var f;return(f=this.screenPointToMercatorCoordinate(n,a))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(n,a){const f=this._cameraPosition,p=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(f,p)}getRayDirectionFromPixel(n){const a=o.bu();a[0]=n.x/this.width*2-1,a[1]=-1*(n.y/this.height*2-1),a[2]=1,a[3]=1,o.av(a,a,this._globeViewProjMatrixNoCorrectionInverted),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3];const f=o.bo();f[0]=a[0]-this._cameraPosition[0],f[1]=a[1]-this._cameraPosition[1],f[2]=a[2]-this._cameraPosition[2];const p=o.bo();return o.aU(p,f),p}isSurfacePointVisible(n){const a=this._cachedClippingPlane;return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const a=o.bu();return o.av(a,[...n,1],this._globeViewProjMatrixNoCorrection),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3],a[0]>-1&&a[0]<1&&a[1]>-1&&a[1]<1&&a[2]>-1&&a[2]<1}rayPlanetIntersection(n,a){const f=o.aW(n,a),p=o.bo(),v=o.bo();o.aQ(v,a,f),o.aT(p,n,v);const B=1-o.aW(p,p);if(B<0)return null;const T=o.aW(n,n)-1,M=-f+(f<0?1:-1)*Math.sqrt(B),z=T/M,V=M;return{tMin:Math.min(z,V),tMax:Math.max(z,V)}}unprojectScreenPoint(n){const a=this._cameraPosition,f=this.getRayDirectionFromPixel(n),p=this.rayPlanetIntersection(a,f);if(p){const V=o.bo();o.aR(V,a,[f[0]*p.tMin,f[1]*p.tMin,f[2]*p.tMin]);const W=o.bo();return o.aU(W,V),Xa(W)}const v=this._cachedClippingPlane,B=v[0]*f[0]+v[1]*f[1]+v[2]*f[2],T=-o.b0(v,a)/B,M=o.bo();if(T>0)o.aR(M,a,[f[0]*T,f[1]*T,f[2]*T]);else{const V=o.bo();o.aR(V,a,[2*f[0],2*f[1],2*f[2]]);const W=o.b0(this._cachedClippingPlane,V);o.aT(M,V,[this._cachedClippingPlane[0]*W,this._cachedClippingPlane[1]*W,this._cachedClippingPlane[2]*W])}const z=function(V){const W=o.bo();return W[0]=V[0]*-V[3],W[1]=V[1]*-V[3],W[2]=V[2]*-V[3],{center:W,radius:Math.sqrt(1-V[3]*V[3])}}(v);return Xa(function(V,W,$){const X=o.bo();o.aT(X,$,V);const ce=o.bo();return o.bp(ce,V,X,W/o.a_(X)),ce}(z.center,z.radius,M))}getMatrixForModel(n,a){const f=o.S.convert(n),p=1/o.bt,v=o.b8();return o.by(v,v,f.lng/180*Math.PI),o.b6(v,v,-f.lat/180*Math.PI),o.M(v,v,[0,0,1+a/o.bt]),o.b6(v,v,.5*Math.PI),o.N(v,v,[p,p,p]),v}getProjectionDataForCustomLayer(n=!0){const a=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:n});return a.tileMercatorCoords=[0,0,1,1],a}getFastPathSimpleProjectionMatrix(n){}}class es{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,a,f){return this._helper.interpolatePadding(n,a,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,a,f=!0){this._helper.resize(n,a,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,a){this._helper.overrideNearFarZ(n,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,a){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=a,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Bl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,a)=>this.getConstrained(n,a)}),this._globeness=1,this._mercatorTransform=new kn,this._verticalPerspectiveTransform=new El}clone(){const n=new es;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this),n}apply(n){this._helper.apply(n),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const a=this._mercatorTransform.getProjectionData(n),f=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:a.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:a.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return o.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,a,f){const p=this._mercatorTransform.getPitchedTextCorrection(n,a,f),v=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,a,f);return o.bj(p,v,this._globeness)}projectTileCoordinates(n,a,f,p){return this.currentTransform.projectTileCoordinates(n,a,f,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,a){return this.currentTransform.lngLatToCameraDepth(n,a)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}getConstrained(n,a){return this.currentTransform.getConstrained(n,a)}calculateCenterFromCameraLngLatAlt(n,a,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,a,f,p)}setLocationAtPoint(n,a){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,a),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(n,a),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(n,a){return this.currentTransform.locationToScreenPoint(n,a)}screenPointToMercatorCoordinate(n,a){return this.currentTransform.screenPointToMercatorCoordinate(n,a)}screenPointToLocation(n,a){return this.currentTransform.screenPointToLocation(n,a)}isPointOnMapSurface(n,a){return this.currentTransform.isPointOnMapSurface(n,a)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,a){return this.currentTransform.getMatrixForModel(n,a)}getProjectionDataForCustomLayer(n=!0){const a=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return a;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return f.fallbackMatrix=a.mainMatrix,f}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class Mi{get useGlobeControls(){return!0}handlePanInertia(n,a){const f=Ba(n,a);return Math.abs(f.lng-a.center.lng)>180&&(f.lng=a.center.lng+179.5*Math.sign(f.lng-a.center.lng)),{easingCenter:f,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,a){const f=n.around,p=a.screenPointToLocation(f);n.bearingDelta&&a.setBearing(a.bearing+n.bearingDelta),n.pitchDelta&&a.setPitch(a.pitch+n.pitchDelta),n.rollDelta&&a.setRoll(a.roll+n.rollDelta);const v=a.zoom;n.zoomDelta&&a.setZoom(a.zoom+n.zoomDelta);const B=a.zoom-v;if(B===0)return;const T=o.bz(a.center.lng,p.lng),M=T/(Math.abs(T/180)+1),z=o.bz(a.center.lat,p.lat),V=a.getRayDirectionFromPixel(f),W=a.cameraPosition,$=-1*o.aW(W,V),X=o.bo();o.aR(X,W,[V[0]*$,V[1]*$,V[2]*$]);const ce=o.aY(X)-1,Ee=Math.exp(.5*-Math.max(ce-.3,0)),Se=xs(a.worldSize,a.center.lat)/Math.min(a.width,a.height),Fe=o.bm(Se,.9,.5,1,.25),Re=(1-o.ae(-B))*Math.min(Ee,Fe),je=a.center.lat,De=a.zoom,We=new o.S(a.center.lng+M*Re,o.ag(a.center.lat+z*Re,-o.ah,o.ah));a.setLocationAtPoint(p,f);const Je=a.center,Oe=o.bm(Math.abs(T),45,85,0,1),ht=o.bm(Se,.75,.35,0,1),St=Math.pow(Math.max(Oe,ht),.25),gt=o.bz(Je.lng,We.lng),_t=o.bz(Je.lat,We.lat);a.setCenter(new o.S(Je.lng+gt*St,Je.lat+_t*St).wrap()),a.setZoom(De+gi(je,a.center.lat))}handleMapControlsPan(n,a,f){if(!n.panDelta)return;const p=a.center.lat,v=a.zoom;a.setCenter(Ba(n.panDelta,a).wrap()),a.setZoom(v+gi(p,a.center.lat))}cameraForBoxAndBearing(n,a,f,p,v){const B=Un(n,a,f,p,v),T=a.left/v.width*2-1,M=(v.width-a.right)/v.width*2-1,z=a.top/v.height*-2+1,V=(v.height-a.bottom)/v.height*-2+1,W=o.bz(f.getWest(),f.getEast())<0,$=W?f.getEast():f.getWest(),X=W?f.getWest():f.getEast(),ce=Math.max(f.getNorth(),f.getSouth()),Ee=Math.min(f.getNorth(),f.getSouth()),Se=$+.5*o.bz($,X),Fe=ce+.5*o.bz(ce,Ee),Re=v.clone();Re.setCenter(B.center),Re.setBearing(B.bearing),Re.setPitch(0),Re.setRoll(0),Re.setZoom(B.zoom);const je=Re.modelViewProjectionMatrix,De=[Zn(f.getNorthWest()),Zn(f.getNorthEast()),Zn(f.getSouthWest()),Zn(f.getSouthEast()),Zn(new o.S(X,Fe)),Zn(new o.S($,Fe)),Zn(new o.S(Se,ce)),Zn(new o.S(Se,Ee))],We=Zn(B.center);let Je=Number.POSITIVE_INFINITY;for(const Oe of De)T<0&&(Je=Mi.getLesserNonNegativeNonNull(Je,Mi.solveVectorScale(Oe,We,je,"x",T))),M>0&&(Je=Mi.getLesserNonNegativeNonNull(Je,Mi.solveVectorScale(Oe,We,je,"x",M))),z>0&&(Je=Mi.getLesserNonNegativeNonNull(Je,Mi.solveVectorScale(Oe,We,je,"y",z))),V<0&&(Je=Mi.getLesserNonNegativeNonNull(Je,Mi.solveVectorScale(Oe,We,je,"y",V)));if(Number.isFinite(Je)&&Je!==0)return B.zoom=Re.zoom+o.aj(Je),B;Di()}handleJumpToCenterZoom(n,a){const f=n.center.lat,p=n.getConstrained(a.center?o.S.convert(a.center):n.center,n.zoom).center;n.setCenter(p.wrap());const v=a.zoom!==void 0?+a.zoom:n.zoom+gi(f,p.lat);n.zoom!==v&&n.setZoom(v)}handleEaseTo(n,a){const f=n.zoom,p=n.center,v=n.padding,B={roll:n.roll,pitch:n.pitch,bearing:n.bearing},T={roll:a.roll===void 0?n.roll:a.roll,pitch:a.pitch===void 0?n.pitch:a.pitch,bearing:a.bearing===void 0?n.bearing:a.bearing},M=a.zoom!==void 0,z=!n.isPaddingEqual(a.padding);let V=!1;const W=a.center?o.S.convert(a.center):p,$=n.getConstrained(W,f).center;ei(n,$);const X=n.clone();X.setCenter($),X.setZoom(M?+a.zoom:f+gi(p.lat,W.lat)),X.setBearing(a.bearing);const ce=new o.P(o.ag(n.centerPoint.x+a.offsetAsPoint.x,0,n.width),o.ag(n.centerPoint.y+a.offsetAsPoint.y,0,n.height));X.setLocationAtPoint($,ce);const Ee=(a.offset&&a.offsetAsPoint.mag())>0?X.center:$,Se=M?+a.zoom:f+gi(p.lat,Ee.lat),Fe=f+gi(p.lat,0),Re=Se+gi(Ee.lat,0),je=o.bz(p.lng,Ee.lng),De=o.bz(p.lat,Ee.lat),We=o.ae(Re-Fe);return V=Se!==f,{easeFunc:Je=>{if(o.bd(B,T)||Ci({startEulerAngles:B,endEulerAngles:T,tr:n,k:Je,useSlerp:B.roll!=T.roll}),z&&n.interpolatePadding(v,a.padding,Je),a.around)o.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(a.around,a.aroundPoint);else{const Oe=Re>Fe?Math.min(2,We):Math.max(.5,We),ht=Math.pow(Oe,1-Je),St=Ca(p,je,De,Je*ht);n.setCenter(St.wrap())}if(V){const Oe=o.C.number(Fe,Re,Je)+gi(0,n.center.lat);n.setZoom(Oe)}},isZooming:V,elevationCenter:Ee}}handleFlyTo(n,a){const f=a.zoom!==void 0,p=n.center,v=n.zoom,B=n.padding,T=!n.isPaddingEqual(a.padding),M=n.getConstrained(o.S.convert(a.center||a.locationAtOffset),v).center,z=f?+a.zoom:n.zoom+gi(n.center.lat,M.lat),V=n.clone();V.setCenter(M),V.setZoom(z),V.setBearing(a.bearing);const W=new o.P(o.ag(n.centerPoint.x+a.offsetAsPoint.x,0,n.width),o.ag(n.centerPoint.y+a.offsetAsPoint.y,0,n.height));V.setLocationAtPoint(M,W);const $=V.center;ei(n,$);const X=function(De,We,Je){const Oe=Zn(We),ht=Zn(Je),St=o.aW(Oe,ht),gt=Math.acos(St),_t=uo(De);return gt/(2*Math.PI)*_t}(n,p,$),ce=v+gi(p.lat,0),Ee=z+gi($.lat,0),Se=o.ae(Ee-ce);let Fe;if(typeof a.minZoom=="number"){const De=+a.minZoom+gi($.lat,0),We=Math.min(De,ce,Ee)+gi(0,$.lat),Je=n.getConstrained($,We).zoom+gi($.lat,0);Fe=o.ae(Je-ce)}const Re=o.bz(p.lng,$.lng),je=o.bz(p.lat,$.lat);return{easeFunc:(De,We,Je,Oe)=>{const ht=Ca(p,Re,je,Je);T&&n.interpolatePadding(B,a.padding,De);const St=De===1?$:ht;n.setCenter(St.wrap());const gt=ce+o.aj(We);n.setZoom(De===1?z:gt+gi(0,St.lat))},scaleOfZoom:Se,targetCenter:$,scaleOfMinZoom:Fe,pixelPathLength:X}}static solveVectorScale(n,a,f,p,v){const B=p==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],T=[f[3],f[7],f[11],f[15]],M=n[0]*B[0]+n[1]*B[1]+n[2]*B[2],z=n[0]*T[0]+n[1]*T[1]+n[2]*T[2],V=a[0]*B[0]+a[1]*B[1]+a[2]*B[2],W=a[0]*T[0]+a[1]*T[1]+a[2]*T[2];return V+v*z===M+v*W||T[3]*(M-V)+B[3]*(W-z)+M*W==V*z?null:(V+B[3]-v*W-v*T[3])/(V-M-v*W+v*z)}static getLesserNonNegativeNonNull(n,a){return a!==null&&a>=0&&a<n?a:n}}class Yl{constructor(n){this._globe=n,this._mercatorCameraHelper=new Cl,this._verticalPerspectiveCameraHelper=new Mi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,a){return this.currentHelper.handlePanInertia(n,a)}handleMapControlsRollPitchBearingZoom(n,a){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,a)}handleMapControlsPan(n,a,f){this.currentHelper.handleMapControlsPan(n,a,f)}cameraForBoxAndBearing(n,a,f,p,v){return this.currentHelper.cameraForBoxAndBearing(n,a,f,p,v)}handleJumpToCenterZoom(n,a){this.currentHelper.handleJumpToCenterZoom(n,a)}handleEaseTo(n,a){return this.currentHelper.handleEaseTo(n,a)}handleFlyTo(n,a){return this.currentHelper.handleFlyTo(n,a)}}const Eo=(y,n)=>o.y(y,n&&n.filter(a=>a.identifier!=="source.canvas")),Ea=o.bD();class Q extends o.E{constructor(n,a={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const p=this.sourceCaches[f].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[f].reload()}},this.map=n,this.dispatcher=new nt($e(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,p)=>this.getGlyphs(f,p)),this.dispatcher.registerMessageHandler("GI",(f,p)=>this.getImages(f,p)),this.imageManager=new Te,this.imageManager.setEventedParent(this),this.glyphManager=new Ie(n._requestManager,a.localIdeographFontFamily),this.lineAtlas=new ze(256,512),this.crossTileSymbolIndex=new Zl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bF()),Hr().on(Nr,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const p=this.sourceCaches[f.sourceId];if(!p)return;const v=p.getSource();if(v&&v.vectorLayerIds)for(const B in this._layers){const T=this._layers[B];T.source===v.id&&this._validateLayer(T)}})}setGlobalStateProperty(n,a){var f,p,v;this._checkLoaded();const B=a===null?(v=(p=(f=this.stylesheet.state)===null||f===void 0?void 0:f[n])===null||p===void 0?void 0:p.default)!==null&&v!==void 0?v:null:a;if(o.bG(B,this._globalState[n]))return this;this._globalState[n]=B;const T=this._findGlobalStateAffectedSources([n]);for(const M in this.sourceCaches)T.has(M)&&(this._reloadSource(M),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const a=[];for(const p in n)!o.bG(this._globalState[p],n[p].default)&&(a.push(p),this._globalState[p]=n[p].default);const f=this._findGlobalStateAffectedSources(a);for(const p in this.sourceCaches)f.has(p)&&(this._reloadSource(p),this._changed=!0)}_findGlobalStateAffectedSources(n){if(n.length===0)return new Set;const a=new Set;for(const f in this._layers){const p=this._layers[f],v=p.getLayoutAffectingGlobalStateRefs();for(const B of n)v.has(B)&&a.add(p.source)}return a}loadURL(n,a={},f){this.fire(new o.l("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const p=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const v=this._loadStyleRequest;o.j(p,this._loadStyleRequest).then(B=>{this._loadStyleRequest=null,this._load(B.data,a,f)}).catch(B=>{this._loadStyleRequest=null,B&&!v.signal.aborted&&this.fire(new o.k(B))})}loadJSON(n,a={},f){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(n,a,f)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Ea,{validate:!1})}_load(n,a,f){var p,v,B;const T=a.transformStyle?a.transformStyle(f,n):n;if(!a.validate||!Eo(this,o.z(T))){this._loaded=!0,this.stylesheet=T;for(const M in T.sources)this.addSource(M,T.sources[M],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new Xe(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new Le(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.setGlobalState((B=this.stylesheet.state)!==null&&B!==void 0?B:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const n=o.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of n){const f=o.bI(a);f.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=f}}_loadSprite(n,a=!1,f=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,B,T,M){return o._(this,void 0,void 0,function*(){const z=pe(v),V=T>1?"@2x":"",W={},$={};for(const{id:X,url:ce}of z){const Ee=B.transformRequest(ye(ce,V,".json"),"SpriteJSON");W[X]=o.j(Ee,M);const Se=B.transformRequest(ye(ce,V,".png"),"SpriteImage");$[X]=ee.getImage(Se,M)}return yield Promise.all([...Object.values(W),...Object.values($)]),function(X,ce){return o._(this,void 0,void 0,function*(){const Ee={};for(const Se in X){Ee[Se]={};const Fe=P.getImageCanvasContext((yield ce[Se]).data),Re=(yield X[Se]).data;for(const je in Re){const{width:De,height:We,x:Je,y:Oe,sdf:ht,pixelRatio:St,stretchX:gt,stretchY:_t,content:xt,textFitWidth:ir,textFitHeight:rr}=Re[je];Ee[Se][je]={data:null,pixelRatio:St,sdf:ht,stretchX:gt,stretchY:_t,content:xt,textFitWidth:ir,textFitHeight:rr,spriteData:{width:De,height:We,x:Je,y:Oe,context:Fe}}}}return Ee})}(W,$)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const B in v){this._spritesImagesIds[B]=[];const T=this._spritesImagesIds[B]?this._spritesImagesIds[B].filter(M=>!(M in v)):[];for(const M of T)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in v[B]){const z=B==="default"?M:`${B}:${M}`;this._spritesImagesIds[B].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,v[B][M],!1):this.imageManager.addImage(z,v[B][M]),a&&(this._changedImages[z]=!0)}}}).catch(v=>{this._spriteRequest=null,p=v,this.fire(new o.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),f&&f(p)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(n){const a=this.sourceCaches[n.source];if(!a)return;const f=n.sourceLayer;if(!f)return;const p=a.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(f)===-1)&&this.fire(new o.k(new Error(`Source layer "${f}" does not exist on source "${p.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,a=!1){const f=this._serializedAllLayers();if(!n||n.length===0)return Object.values(a?o.bJ(f):f);const p=[];for(const v of n)if(f[v]){const B=a?o.bJ(f[v]):f[v];p.push(B)}return p}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const a=Object.keys(this._layers);for(const f of a){const p=this._layers[f];p.type!=="custom"&&(n[f]=p.serialize())}return n}hasTransitions(){var n,a,f;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((a=this.sky)===null||a===void 0)&&a.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const a=this._changed;if(a){const p=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(p.length||v.length)&&this._updateWorkerLayers(p,v);for(const B in this._updatedSources){const T=this._updatedSources[B];if(T==="reload")this._reloadSource(B);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(B)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const f={};for(const p in this.sourceCaches){const v=this.sourceCaches[p];f[p]=v.used,v.used=!1}for(const p of this._order){const v=this._layers[p];v.recalculate(n,this._availableImages),!v.isHidden(n.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const p in f){const v=this.sourceCaches[p];!!f[p]!=!!v.used&&v.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,a&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,a={}){var f;this._checkLoaded();const p=this.serialize();if(n=a.transformStyle?a.transformStyle(p,n):n,((f=a.validate)===null||f===void 0||f)&&Eo(this,o.z(n)))return!1;(n=o.bJ(n)).layers=o.bH(n.layers);const v=o.bK(p,n),B=this._getOperationsToPerform(v);if(B.unimplemented.length>0)throw new Error(`Unimplemented: ${B.unimplemented.join(", ")}.`);if(B.operations.length===0)return!1;for(const T of B.operations)T();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const a=[],f=[];for(const p of n)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":a.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":a.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":a.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setGlobalState":a.push(()=>this.setGlobalState.apply(this,p.args));break;case"setTransition":a.push(()=>{});break;default:f.push(p.command)}return{operations:a,unimplemented:f}}addImage(n,a){if(this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,a),this._afterImageUpdated(n)}updateImage(n,a){this.imageManager.updateImage(n,a)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,a,f={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(o.z.source,`sources.${n}`,a,null,f))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const p=this.sourceCaches[n]=new mt(n,a,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:n})),p.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===n)return this.fire(new o.k(new Error(`Source "${n}" cannot be removed while layer "${f}" is using it.`)));const a=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],a.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,a){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const f=this.sourceCaches[n].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(a),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,a,f={}){this._checkLoaded();const p=n.id;if(this.getLayer(p))return void this.fire(new o.k(new Error(`Layer "${p}" already exists on this map.`)));let v;if(n.type==="custom"){if(Eo(this,o.bL(n)))return;v=o.bI(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(p,n.source),n=o.bJ(n),n=o.e(n,{source:p})),this._validate(o.z.layer,`layers.${p}`,n,{arrayIndex:-1},f))return;v=o.bI(n),this._validateLayer(v),v.setEventedParent(this,{layer:{id:p}})}const B=a?this._order.indexOf(a):this._order.length;if(a&&B===-1)this.fire(new o.k(new Error(`Cannot add layer "${p}" before non-existing layer "${a}".`)));else{if(this._order.splice(B,0,p),this._layerOrderChanged=!0,this._layers[p]=v,this._removedLayers[p]&&v.source&&v.type!=="custom"){const T=this._removedLayers[p];delete this._removedLayers[p],T.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(n,a){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new o.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===a)return;const f=this._order.indexOf(n);this._order.splice(f,1);const p=a?this._order.indexOf(a):this._order.length;a&&p===-1?this.fire(new o.k(new Error(`Cannot move layer "${n}" before non-existing layer "${a}".`))):(this._order.splice(p,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const a=this._layers[n];if(!a)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${n}".`)));a.setEventedParent(null);const f=this._order.indexOf(n);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=a,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],a.onRemove&&a.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,a,f){this._checkLoaded();const p=this.getLayer(n);p?p.minzoom===a&&p.maxzoom===f||(a!=null&&(p.minzoom=a),f!=null&&(p.maxzoom=f),this._updateLayer(p)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,a,f={}){this._checkLoaded();const p=this.getLayer(n);if(p){if(!o.bG(p.filter,a))return a==null?(p.setFilter(void 0),void this._updateLayer(p)):void(this._validate(o.z.filter,`layers.${p.id}.filter`,a,null,f)||(p.setFilter(o.bJ(a)),this._updateLayer(p)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return o.bJ(this.getLayer(n).filter)}setLayoutProperty(n,a,f,p={}){this._checkLoaded();const v=this.getLayer(n);v?o.bG(v.getLayoutProperty(a),f)||(v.setLayoutProperty(a,f,p),this._updateLayer(v)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,a){const f=this.getLayer(n);if(f)return f.getLayoutProperty(a);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,a,f,p={}){this._checkLoaded();const v=this.getLayer(n);v?o.bG(v.getPaintProperty(a),f)||(v.setPaintProperty(a,f,p)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,a){return this.getLayer(n).getPaintProperty(a)}setFeatureState(n,a){this._checkLoaded();const f=n.source,p=n.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const B=v.getSource().type;B==="geojson"&&p?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):B!=="vector"||p?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),v.setFeatureState(p,n.id,a)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,a){this._checkLoaded();const f=n.source,p=this.sourceCaches[f];if(p===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const v=p.getSource().type,B=v==="vector"?n.sourceLayer:void 0;v!=="vector"||B?a&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(B,n.id,a):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const a=n.source,f=n.sourceLayer,p=this.sourceCaches[a];if(p!==void 0)return p.getSource().type!=="vector"||f?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(f,n.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=o.bM(this.sourceCaches,v=>v.serialize()),a=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,p=this.stylesheet;return o.bN({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:n,layers:a,terrain:f},v=>v!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const a=B=>this._layers[B].type==="fill-extrusion",f={},p=[];for(let B=this._order.length-1;B>=0;B--){const T=this._order[B];if(a(T)){f[T]=B;for(const M of n){const z=M[T];if(z)for(const V of z)p.push(V)}}}p.sort((B,T)=>T.intersectionZ-B.intersectionZ);const v=[];for(let B=this._order.length-1;B>=0;B--){const T=this._order[B];if(a(T))for(let M=p.length-1;M>=0;M--){const z=p[M].feature;if(f[z.layer.id]<B)break;v.push(z),p.pop()}else for(const M of n){const z=M[T];if(z)for(const V of z)v.push(V.feature)}}return v}queryRenderedFeatures(n,a,f){a&&a.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",a.filter,null,a);const p={};if(a&&a.layers){if(!(Array.isArray(a.layers)||a.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const z of a.layers){const V=this._layers[z];if(!V)return this.fire(new o.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];p[V.source]=!0}}const v=[];a.availableImages=this._availableImages;const B=this._serializedAllLayers(),T=a.layers instanceof Set?a.layers:Array.isArray(a.layers)?new Set(a.layers):null,M=Object.assign(Object.assign({},a),{layers:T});for(const z in this.sourceCaches)a.layers&&!p[z]||v.push(dt(this.sourceCaches[z],this._layers,B,n,M,f,this.map.terrain?(V,W,$)=>this.map.terrain.getElevation(V,W,$):void 0));return this.placement&&v.push(function(z,V,W,$,X,ce,Ee){const Se={},Fe=ce.queryRenderedSymbols($),Re=[];for(const je of Object.keys(Fe).map(Number))Re.push(Ee[je]);Re.sort(Qt);for(const je of Re){const De=je.featureIndex.lookupSymbolFeatures(Fe[je.bucketInstanceId],V,je.bucketIndex,je.sourceLayerIndex,X.filter,X.layers,X.availableImages,z);for(const We in De){const Je=Se[We]=Se[We]||[],Oe=De[We];Oe.sort((ht,St)=>{const gt=je.featureSortOrder;if(gt){const _t=gt.indexOf(ht.featureIndex);return gt.indexOf(St.featureIndex)-_t}return St.featureIndex-ht.featureIndex});for(const ht of Oe)Je.push(ht)}}return function(je,De,We){for(const Je in je)for(const Oe of je[Je])Mt(Oe,We[De[Je].source]);return je}(Se,z,W)}(this._layers,B,this.sourceCaches,n,M,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(n,a){a&&a.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",a.filter,null,a);const f=this.sourceCaches[n];return f?function(p,v){const B=p.getRenderableIds().map(z=>p.getTileByID(z)),T=[],M={};for(let z=0;z<B.length;z++){const V=B[z],W=V.tileID.canonical.key;M[W]||(M[W]=!0,V.querySourceFeatures(T,v))}return T}(f,a):[]}getLight(){return this.light.getLight()}setLight(n,a={}){this._checkLoaded();const f=this.light.getLight();let p=!1;for(const B in n)if(!o.bG(n[B],f[B])){p=!0;break}if(!p)return;const v={now:P.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,a),this.light.updateTransitions(v)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=n,this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,a={}){this._checkLoaded();const f=this.getSky();let p=!1;if(!n&&!f)return;if(n&&!f)p=!0;else if(!n&&f)p=!0;else for(const B in n)if(!o.bG(n[B],f[B])){p=!0;break}if(!p)return;const v={now:P.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,a),this.sky.updateTransitions(v)}_setProjectionInternal(n){const a=function(f){if(Array.isArray(f)){const p=new Xs({type:f});return{projection:p,transform:new es,cameraHelper:new Yl(p)}}switch(f){case"mercator":return{projection:new bl,transform:new kn,cameraHelper:new Cl};case"globe":{const p=new Xs({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new es,cameraHelper:new Yl(p)}}case"vertical-perspective":return{projection:new Qc,transform:new El,cameraHelper:new Mi};default:return o.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new bl,transform:new kn,cameraHelper:new Cl}}}(n);this.projection=a.projection,this.map.migrateProjection(a.transform,a.cameraHelper);for(const f in this.sourceCaches)this.sourceCaches[f].reload()}_validate(n,a,f,p,v={}){return(!v||v.validate!==!1)&&Eo(this,n.call(o.z,o.e({key:a,style:this.serialize(),value:f,styleSpec:o.v},p)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Hr().off(Nr,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const f=this.sourceCaches[a];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const a in this.sourceCaches)this.sourceCaches[a].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,a,f,p,v=!1){let B=!1,T=!1;const M={};for(const z of this._order){const V=this._layers[z];if(V.type!=="symbol")continue;if(!M[V.source]){const $=this.sourceCaches[V.source];M[V.source]=$.getRenderableIds(!0).map(X=>$.getTileByID(X)).sort((X,ce)=>ce.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(ce.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(V,M[V.source],n.center.lng);B=B||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(P.now(),n.zoom))&&(this.pauseablePlacement=new OA(n,this.map.terrain,this._order,v,a,f,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(P.now()),T=!0),B&&this.pauseablePlacement.placement.setStale()),T||B)for(const z of this._order){const V=this._layers[z];V.type==="symbol"&&this.placement.updateLayerOpacities(V,M[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(P.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,a){return o._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,a.icons),f})}getGlyphs(n,a){return o._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(a.stacks),p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,a={}){this._checkLoaded(),n&&this._validate(o.z.glyphs,"glyphs",n,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,a,f={},p){this._checkLoaded();const v=[{id:n,url:a}],B=[...pe(this.stylesheet.sprite),...v];this._validate(o.z.sprite,"sprite",B,null,f)||(this.stylesheet.sprite=B,this._loadSprite(v,!0,p))}removeSprite(n){this._checkLoaded();const a=pe(this.stylesheet.sprite);if(a.find(f=>f.id===n)){if(this._spritesImagesIds[n])for(const f of this._spritesImagesIds[n])this.imageManager.removeImage(f),this._changedImages[f]=!0;a.splice(a.findIndex(f=>f.id===n),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return pe(this.stylesheet.sprite)}setSprite(n,a={},f){this._checkLoaded(),n&&this._validate(o.z.sprite,"sprite",n,null,a)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,f):(this._unloadSprite(),f&&f(null)))}}var Ae=o.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class He{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,a,f,p,v,B,T,M,z){this.context=n;let V=this.boundPaintVertexBuffers.length!==p.length;for(let W=0;!V&&W<p.length;W++)this.boundPaintVertexBuffers[W]!==p[W]&&(V=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==f||V||this.boundIndexBuffer!==v||this.boundVertexOffset!==B||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==z?this.freshBind(a,f,p,v,B,T,M,z):(n.bindVertexArray.set(this.vao),T&&T.bind(),v&&v.dynamicDraw&&v.bind(),M&&M.bind(),z&&z.bind())}freshBind(n,a,f,p,v,B,T,M){const z=n.numAttributes,V=this.context,W=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=p,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=M,a.enableAttributes(W,n);for(const $ of f)$.enableAttributes(W,n);B&&B.enableAttributes(W,n),T&&T.enableAttributes(W,n),M&&M.enableAttributes(W,n),a.bind(),a.setVertexAttribPointers(W,n,v);for(const $ of f)$.bind(),$.setVertexAttribPointers(W,n,v);B&&(B.bind(),B.setVertexAttribPointers(W,n,v)),p&&p.bind(),T&&(T.bind(),T.setVertexAttribPointers(W,n,v)),M&&(M.bind(),M.setVertexAttribPointers(W,n,v)),V.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ot=(y,n,a,f,p)=>({u_texture:0,u_ele_delta:y,u_fog_matrix:n,u_fog_color:a?a.properties.get("fog-color"):o.be.white,u_fog_ground_blend:a?a.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:a?a.calculateFogBlendOpacity(f):0,u_horizon_color:a?a.properties.get("horizon-color"):o.be.white,u_horizon_fog_blend:a?a.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),vt={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ut(y){const n=[];for(let a=0;a<y.length;a++){if(y[a]===null)continue;const f=y[a].split(" ");n.push(f.pop())}return n}class Zt{constructor(n,a,f,p,v,B,T,M,z=[]){const V=n.gl;this.program=V.createProgram();const W=Ut(a.staticAttributes),$=f?f.getBinderAttributes():[],X=W.concat($),ce=Zs.prelude.staticUniforms?Ut(Zs.prelude.staticUniforms):[],Ee=T.staticUniforms?Ut(T.staticUniforms):[],Se=a.staticUniforms?Ut(a.staticUniforms):[],Fe=f?f.getBinderUniforms():[],Re=ce.concat(Ee).concat(Se).concat(Fe),je=[];for(const gt of Re)je.indexOf(gt)<0&&je.push(gt);const De=f?f.defines():[];Si(V)&&De.unshift("#version 300 es"),v&&De.push("#define OVERDRAW_INSPECTOR;"),B&&De.push("#define TERRAIN3D;"),M&&De.push(M),z&&De.push(...z);let We=De.concat(Zs.prelude.fragmentSource,T.fragmentSource,a.fragmentSource).join(`
`),Je=De.concat(Zs.prelude.vertexSource,T.vertexSource,a.vertexSource).join(`
`);Si(V)||(We=function(gt){return gt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(We),Je=function(gt){return gt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Je));const Oe=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Oe,We),V.compileShader(Oe),!V.getShaderParameter(Oe,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(Oe)}`);V.attachShader(this.program,Oe);const ht=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(ht,Je),V.compileShader(ht),!V.getShaderParameter(ht,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(ht)}`);V.attachShader(this.program,ht),this.attributes={};const St={};this.numAttributes=X.length;for(let gt=0;gt<this.numAttributes;gt++)X[gt]&&(V.bindAttribLocation(this.program,gt,X[gt]),this.attributes[X[gt]]=gt);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(ht),V.deleteShader(Oe);for(let gt=0;gt<je.length;gt++){const _t=je[gt];if(_t&&!St[_t]){const xt=V.getUniformLocation(this.program,_t);xt&&(St[_t]=xt)}}this.fixedUniforms=p(n,St),this.terrainUniforms=((gt,_t)=>({u_depth:new o.bO(gt,_t.u_depth),u_terrain:new o.bO(gt,_t.u_terrain),u_terrain_dim:new o.bf(gt,_t.u_terrain_dim),u_terrain_matrix:new o.bQ(gt,_t.u_terrain_matrix),u_terrain_unpack:new o.bR(gt,_t.u_terrain_unpack),u_terrain_exaggeration:new o.bf(gt,_t.u_terrain_exaggeration)}))(n,St),this.projectionUniforms=((gt,_t)=>({u_projection_matrix:new o.bQ(gt,_t.u_projection_matrix),u_projection_tile_mercator_coords:new o.bR(gt,_t.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bR(gt,_t.u_projection_clipping_plane),u_projection_transition:new o.bf(gt,_t.u_projection_transition),u_projection_fallback_matrix:new o.bQ(gt,_t.u_projection_fallback_matrix)}))(n,St),this.binderUniforms=f?f.getUniforms(n,St):[]}draw(n,a,f,p,v,B,T,M,z,V,W,$,X,ce,Ee,Se,Fe,Re,je){const De=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(f),n.setStencilMode(p),n.setColorMode(v),n.setCullFace(B),M){n.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,M.depthTexture),n.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,M.texture);for(const Je in this.terrainUniforms)this.terrainUniforms[Je].set(M[Je])}if(z)for(const Je in z)this.projectionUniforms[vt[Je]].set(z[Je]);if(T)for(const Je in this.fixedUniforms)this.fixedUniforms[Je].set(T[Je]);Se&&Se.setUniforms(n,this.binderUniforms,ce,{zoom:Ee});let We=0;switch(a){case De.LINES:We=2;break;case De.TRIANGLES:We=3;break;case De.LINE_STRIP:We=1}for(const Je of X.get()){const Oe=Je.vaos||(Je.vaos={});(Oe[V]||(Oe[V]=new He)).bind(n,this,W,Se?Se.getPaintVertexBuffers():[],$,Je.vertexOffset,Fe,Re,je),De.drawElements(a,Je.primitiveLength*We,De.UNSIGNED_SHORT,Je.primitiveOffset*We*2)}}}function gr(y,n,a){const f=1/o.aB(a,1,n.transform.tileZoom),p=Math.pow(2,a.tileID.overscaledZ),v=a.tileSize*Math.pow(2,n.transform.tileZoom)/p,B=v*(a.tileID.canonical.x+a.tileID.wrap*p),T=v*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[B>>16,T>>16],u_pixel_coord_lower:[65535&B,65535&T]}}const Mr=(y,n,a,f)=>{const p=y.style.light,v=p.properties.get("position"),B=[v.x,v.y,v.z],T=o.bU();p.properties.get("anchor")==="viewport"&&o.bV(T,y.transform.bearingInRadians),o.bW(B,B,T);const M=y.transform.transformLightDirection(B),z=p.properties.get("color");return{u_lightpos:B,u_lightpos_globe:M,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+n,u_opacity:a,u_fill_translate:f}},en=(y,n,a,f,p,v,B)=>o.e(Mr(y,n,a,f),gr(v,y,B),{u_height_factor:-Math.pow(2,p.overscaledZ)/B.tileSize/8}),Zr=(y,n,a,f)=>o.e(gr(n,y,a),{u_fill_translate:f}),nn=(y,n)=>({u_world:y,u_fill_translate:n}),ci=(y,n,a,f,p)=>o.e(Zr(y,n,a,p),{u_world:f}),ti=(y,n,a,f,p)=>{const v=y.transform;let B,T,M=0;if(a.paint.get("circle-pitch-alignment")==="map"){const z=o.aB(n,1,v.zoom);B=!0,T=[z,z],M=z/(o.$*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*p}else B=!1,T=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(a.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+B,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:T,u_globe_extrude_scale:M,u_translate:f}},ri=y=>({u_pixel_extrude_scale:[1/y.width,1/y.height]}),ki=y=>({u_viewport_size:[y.width,y.height]}),zi=(y,n=1)=>({u_color:y,u_overlay:0,u_overlay_scale:n}),Us=(y,n,a,f)=>{const p=o.aB(y,1,n)/(o.$*Math.pow(2,y.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:o.aB(y,1,n),u_intensity:a,u_globe_extrude_scale:p}},Ys=(y,n,a,f)=>{const p=o.L();o.bX(p,0,y.width,y.height,0,0,1);const v=y.context.gl;return{u_matrix:p,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:a,u_color_ramp:f,u_opacity:n.paint.get("heatmap-opacity")}},Qs=(y,n,a)=>{const f=a.paint.get("hillshade-accent-color");let p;switch(a.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const v=a.getIlluminationProperties();for(let B=0;B<v.directionRadians.length;B++)a.paint.get("hillshade-illumination-anchor")==="viewport"&&(v.directionRadians[B]+=y.transform.bearingInRadians);return{u_image:0,u_latrange:VA(0,n.tileID),u_exaggeration:a.paint.get("hillshade-exaggeration"),u_altitudes:v.altitudeRadians,u_azimuths:v.directionRadians,u_accent:f,u_method:p,u_highlights:v.highlightColor,u_shadows:v.shadowColor}},Cu=(y,n)=>{const a=n.stride,f=o.L();return o.bX(f,0,o.$,-o.$,0,0,1),o.M(f,f,[0,-o.$,0]),{u_matrix:f,u_image:1,u_dimension:[a,a],u_zoom:y.overscaledZ,u_unpack:n.getUnpackVector()}};function VA(y,n){const a=Math.pow(2,n.canonical.z),f=n.canonical.y;return[new o.a0(0,f/a).toLngLat().lat,new o.a0(0,(f+1)/a).toLngLat().lat]}const Oc=(y,n,a=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:a,u_opacity:y.paint.get("color-relief-opacity")}),Ya=(y,n,a,f)=>{const p=y.transform;return{u_translation:Fl(y,n,a),u_ratio:f/o.aB(n,1,p.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Jl=(y,n,a,f,p)=>o.e(Ya(y,n,a,f),{u_image:0,u_image_height:p}),KA=(y,n,a,f,p)=>{const v=y.transform,B=Hi(n,v);return{u_translation:Fl(y,n,a),u_texsize:n.imageAtlasTexture.size,u_ratio:f/o.aB(n,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[B,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},eA=(y,n,a,f,p,v)=>{const B=y.lineAtlas,T=Hi(n,y.transform),M=a.layout.get("line-cap")==="round",z=B.getDash(p.from,M),V=B.getDash(p.to,M),W=z.width*v.fromScale,$=V.width*v.toScale;return o.e(Ya(y,n,a,f),{u_patternscale_a:[T/W,-z.height/2],u_patternscale_b:[T/$,-V.height/2],u_sdfgamma:B.width/(256*Math.min(W,$)*y.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:V.y,u_mix:v.t})};function Hi(y,n){return 1/o.aB(y,1,n.tileZoom)}function Fl(y,n,a){return o.aC(y.transform,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const Fo=(y,n,a,f,p)=>{return{u_tl_parent:y,u_scale_parent:n,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(B=f.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(v=f.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:tA(f.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var v,B};function tA(y){y*=Math.PI/180;const n=Math.sin(y),a=Math.cos(y);return[(2*a+1)/3,(-Math.sqrt(3)*n-a+1)/3,(Math.sqrt(3)*n-a+1)/3]}const rA=(y,n,a,f,p,v,B,T,M,z,V,W,$)=>{const X=B.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:X.width/X.height,u_fade_change:B.options.fadeDuration?B.symbolFadeChange:1,u_label_plane_matrix:T,u_coord_matrix:M,u_is_text:+V,u_pitch_with_map:+f,u_is_along_line:p,u_is_variable_anchor:v,u_texsize:W,u_texture:0,u_translation:z,u_pitched_scale:$}},ji=(y,n,a,f,p,v,B,T,M,z,V,W,$,X)=>{const ce=B.transform;return o.e(rA(y,n,a,f,p,v,B,T,M,z,V,W,X),{u_gamma_scale:f?Math.cos(ce.pitch*Math.PI/180)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:B.pixelRatio,u_is_halo:1})},jh=(y,n,a,f,p,v,B,T,M,z,V,W,$)=>o.e(ji(y,n,a,f,p,v,B,T,M,z,!0,V,0,$),{u_texsize_icon:W,u_texture_icon:1}),Il=(y,n)=>({u_opacity:y,u_color:n}),Su=(y,n,a,f,p)=>o.e(function(v,B,T,M){const z=T.imageManager.getPattern(v.from.toString()),V=T.imageManager.getPattern(v.to.toString()),{width:W,height:$}=T.imageManager.getPixelSize(),X=Math.pow(2,M.tileID.overscaledZ),ce=M.tileSize*Math.pow(2,T.transform.tileZoom)/X,Ee=ce*(M.tileID.canonical.x+M.tileID.wrap*X),Se=ce*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[W,$],u_mix:B.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/o.aB(M,1,T.transform.tileZoom),u_pixel_coord_upper:[Ee>>16,Se>>16],u_pixel_coord_lower:[65535&Ee,65535&Se]}}(a,p,n,f),{u_opacity:y}),fo=(y,n)=>{},nA={fillExtrusion:(y,n)=>({u_lightpos:new o.bS(y,n.u_lightpos),u_lightpos_globe:new o.bS(y,n.u_lightpos_globe),u_lightintensity:new o.bf(y,n.u_lightintensity),u_lightcolor:new o.bS(y,n.u_lightcolor),u_vertical_gradient:new o.bf(y,n.u_vertical_gradient),u_opacity:new o.bf(y,n.u_opacity),u_fill_translate:new o.bT(y,n.u_fill_translate)}),fillExtrusionPattern:(y,n)=>({u_lightpos:new o.bS(y,n.u_lightpos),u_lightpos_globe:new o.bS(y,n.u_lightpos_globe),u_lightintensity:new o.bf(y,n.u_lightintensity),u_lightcolor:new o.bS(y,n.u_lightcolor),u_vertical_gradient:new o.bf(y,n.u_vertical_gradient),u_height_factor:new o.bf(y,n.u_height_factor),u_opacity:new o.bf(y,n.u_opacity),u_fill_translate:new o.bT(y,n.u_fill_translate),u_image:new o.bO(y,n.u_image),u_texsize:new o.bT(y,n.u_texsize),u_pixel_coord_upper:new o.bT(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(y,n.u_pixel_coord_lower),u_scale:new o.bS(y,n.u_scale),u_fade:new o.bf(y,n.u_fade)}),fill:(y,n)=>({u_fill_translate:new o.bT(y,n.u_fill_translate)}),fillPattern:(y,n)=>({u_image:new o.bO(y,n.u_image),u_texsize:new o.bT(y,n.u_texsize),u_pixel_coord_upper:new o.bT(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(y,n.u_pixel_coord_lower),u_scale:new o.bS(y,n.u_scale),u_fade:new o.bf(y,n.u_fade),u_fill_translate:new o.bT(y,n.u_fill_translate)}),fillOutline:(y,n)=>({u_world:new o.bT(y,n.u_world),u_fill_translate:new o.bT(y,n.u_fill_translate)}),fillOutlinePattern:(y,n)=>({u_world:new o.bT(y,n.u_world),u_image:new o.bO(y,n.u_image),u_texsize:new o.bT(y,n.u_texsize),u_pixel_coord_upper:new o.bT(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(y,n.u_pixel_coord_lower),u_scale:new o.bS(y,n.u_scale),u_fade:new o.bf(y,n.u_fade),u_fill_translate:new o.bT(y,n.u_fill_translate)}),circle:(y,n)=>({u_camera_to_center_distance:new o.bf(y,n.u_camera_to_center_distance),u_scale_with_map:new o.bO(y,n.u_scale_with_map),u_pitch_with_map:new o.bO(y,n.u_pitch_with_map),u_extrude_scale:new o.bT(y,n.u_extrude_scale),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_globe_extrude_scale:new o.bf(y,n.u_globe_extrude_scale),u_translate:new o.bT(y,n.u_translate)}),collisionBox:(y,n)=>({u_pixel_extrude_scale:new o.bT(y,n.u_pixel_extrude_scale)}),collisionCircle:(y,n)=>({u_viewport_size:new o.bT(y,n.u_viewport_size)}),debug:(y,n)=>({u_color:new o.bP(y,n.u_color),u_overlay:new o.bO(y,n.u_overlay),u_overlay_scale:new o.bf(y,n.u_overlay_scale)}),depth:fo,clippingMask:fo,heatmap:(y,n)=>({u_extrude_scale:new o.bf(y,n.u_extrude_scale),u_intensity:new o.bf(y,n.u_intensity),u_globe_extrude_scale:new o.bf(y,n.u_globe_extrude_scale)}),heatmapTexture:(y,n)=>({u_matrix:new o.bQ(y,n.u_matrix),u_world:new o.bT(y,n.u_world),u_image:new o.bO(y,n.u_image),u_color_ramp:new o.bO(y,n.u_color_ramp),u_opacity:new o.bf(y,n.u_opacity)}),hillshade:(y,n)=>({u_image:new o.bO(y,n.u_image),u_latrange:new o.bT(y,n.u_latrange),u_exaggeration:new o.bf(y,n.u_exaggeration),u_altitudes:new o.bZ(y,n.u_altitudes),u_azimuths:new o.bZ(y,n.u_azimuths),u_accent:new o.bP(y,n.u_accent),u_method:new o.bO(y,n.u_method),u_shadows:new o.bY(y,n.u_shadows),u_highlights:new o.bY(y,n.u_highlights)}),hillshadePrepare:(y,n)=>({u_matrix:new o.bQ(y,n.u_matrix),u_image:new o.bO(y,n.u_image),u_dimension:new o.bT(y,n.u_dimension),u_zoom:new o.bf(y,n.u_zoom),u_unpack:new o.bR(y,n.u_unpack)}),colorRelief:(y,n)=>({u_image:new o.bO(y,n.u_image),u_unpack:new o.bR(y,n.u_unpack),u_dimension:new o.bT(y,n.u_dimension),u_elevation_stops:new o.bO(y,n.u_elevation_stops),u_color_stops:new o.bO(y,n.u_color_stops),u_color_ramp_size:new o.bO(y,n.u_color_ramp_size),u_opacity:new o.bf(y,n.u_opacity)}),line:(y,n)=>({u_translation:new o.bT(y,n.u_translation),u_ratio:new o.bf(y,n.u_ratio),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(y,n.u_units_to_pixels)}),lineGradient:(y,n)=>({u_translation:new o.bT(y,n.u_translation),u_ratio:new o.bf(y,n.u_ratio),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(y,n.u_units_to_pixels),u_image:new o.bO(y,n.u_image),u_image_height:new o.bf(y,n.u_image_height)}),linePattern:(y,n)=>({u_translation:new o.bT(y,n.u_translation),u_texsize:new o.bT(y,n.u_texsize),u_ratio:new o.bf(y,n.u_ratio),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_image:new o.bO(y,n.u_image),u_units_to_pixels:new o.bT(y,n.u_units_to_pixels),u_scale:new o.bS(y,n.u_scale),u_fade:new o.bf(y,n.u_fade)}),lineSDF:(y,n)=>({u_translation:new o.bT(y,n.u_translation),u_ratio:new o.bf(y,n.u_ratio),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(y,n.u_units_to_pixels),u_patternscale_a:new o.bT(y,n.u_patternscale_a),u_patternscale_b:new o.bT(y,n.u_patternscale_b),u_sdfgamma:new o.bf(y,n.u_sdfgamma),u_image:new o.bO(y,n.u_image),u_tex_y_a:new o.bf(y,n.u_tex_y_a),u_tex_y_b:new o.bf(y,n.u_tex_y_b),u_mix:new o.bf(y,n.u_mix)}),raster:(y,n)=>({u_tl_parent:new o.bT(y,n.u_tl_parent),u_scale_parent:new o.bf(y,n.u_scale_parent),u_buffer_scale:new o.bf(y,n.u_buffer_scale),u_fade_t:new o.bf(y,n.u_fade_t),u_opacity:new o.bf(y,n.u_opacity),u_image0:new o.bO(y,n.u_image0),u_image1:new o.bO(y,n.u_image1),u_brightness_low:new o.bf(y,n.u_brightness_low),u_brightness_high:new o.bf(y,n.u_brightness_high),u_saturation_factor:new o.bf(y,n.u_saturation_factor),u_contrast_factor:new o.bf(y,n.u_contrast_factor),u_spin_weights:new o.bS(y,n.u_spin_weights),u_coords_top:new o.bR(y,n.u_coords_top),u_coords_bottom:new o.bR(y,n.u_coords_bottom)}),symbolIcon:(y,n)=>({u_is_size_zoom_constant:new o.bO(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(y,n.u_is_size_feature_constant),u_size_t:new o.bf(y,n.u_size_t),u_size:new o.bf(y,n.u_size),u_camera_to_center_distance:new o.bf(y,n.u_camera_to_center_distance),u_pitch:new o.bf(y,n.u_pitch),u_rotate_symbol:new o.bO(y,n.u_rotate_symbol),u_aspect_ratio:new o.bf(y,n.u_aspect_ratio),u_fade_change:new o.bf(y,n.u_fade_change),u_label_plane_matrix:new o.bQ(y,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(y,n.u_coord_matrix),u_is_text:new o.bO(y,n.u_is_text),u_pitch_with_map:new o.bO(y,n.u_pitch_with_map),u_is_along_line:new o.bO(y,n.u_is_along_line),u_is_variable_anchor:new o.bO(y,n.u_is_variable_anchor),u_texsize:new o.bT(y,n.u_texsize),u_texture:new o.bO(y,n.u_texture),u_translation:new o.bT(y,n.u_translation),u_pitched_scale:new o.bf(y,n.u_pitched_scale)}),symbolSDF:(y,n)=>({u_is_size_zoom_constant:new o.bO(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(y,n.u_is_size_feature_constant),u_size_t:new o.bf(y,n.u_size_t),u_size:new o.bf(y,n.u_size),u_camera_to_center_distance:new o.bf(y,n.u_camera_to_center_distance),u_pitch:new o.bf(y,n.u_pitch),u_rotate_symbol:new o.bO(y,n.u_rotate_symbol),u_aspect_ratio:new o.bf(y,n.u_aspect_ratio),u_fade_change:new o.bf(y,n.u_fade_change),u_label_plane_matrix:new o.bQ(y,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(y,n.u_coord_matrix),u_is_text:new o.bO(y,n.u_is_text),u_pitch_with_map:new o.bO(y,n.u_pitch_with_map),u_is_along_line:new o.bO(y,n.u_is_along_line),u_is_variable_anchor:new o.bO(y,n.u_is_variable_anchor),u_texsize:new o.bT(y,n.u_texsize),u_texture:new o.bO(y,n.u_texture),u_gamma_scale:new o.bf(y,n.u_gamma_scale),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_is_halo:new o.bO(y,n.u_is_halo),u_translation:new o.bT(y,n.u_translation),u_pitched_scale:new o.bf(y,n.u_pitched_scale)}),symbolTextAndIcon:(y,n)=>({u_is_size_zoom_constant:new o.bO(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(y,n.u_is_size_feature_constant),u_size_t:new o.bf(y,n.u_size_t),u_size:new o.bf(y,n.u_size),u_camera_to_center_distance:new o.bf(y,n.u_camera_to_center_distance),u_pitch:new o.bf(y,n.u_pitch),u_rotate_symbol:new o.bO(y,n.u_rotate_symbol),u_aspect_ratio:new o.bf(y,n.u_aspect_ratio),u_fade_change:new o.bf(y,n.u_fade_change),u_label_plane_matrix:new o.bQ(y,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(y,n.u_coord_matrix),u_is_text:new o.bO(y,n.u_is_text),u_pitch_with_map:new o.bO(y,n.u_pitch_with_map),u_is_along_line:new o.bO(y,n.u_is_along_line),u_is_variable_anchor:new o.bO(y,n.u_is_variable_anchor),u_texsize:new o.bT(y,n.u_texsize),u_texsize_icon:new o.bT(y,n.u_texsize_icon),u_texture:new o.bO(y,n.u_texture),u_texture_icon:new o.bO(y,n.u_texture_icon),u_gamma_scale:new o.bf(y,n.u_gamma_scale),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_is_halo:new o.bO(y,n.u_is_halo),u_translation:new o.bT(y,n.u_translation),u_pitched_scale:new o.bf(y,n.u_pitched_scale)}),background:(y,n)=>({u_opacity:new o.bf(y,n.u_opacity),u_color:new o.bP(y,n.u_color)}),backgroundPattern:(y,n)=>({u_opacity:new o.bf(y,n.u_opacity),u_image:new o.bO(y,n.u_image),u_pattern_tl_a:new o.bT(y,n.u_pattern_tl_a),u_pattern_br_a:new o.bT(y,n.u_pattern_br_a),u_pattern_tl_b:new o.bT(y,n.u_pattern_tl_b),u_pattern_br_b:new o.bT(y,n.u_pattern_br_b),u_texsize:new o.bT(y,n.u_texsize),u_mix:new o.bf(y,n.u_mix),u_pattern_size_a:new o.bT(y,n.u_pattern_size_a),u_pattern_size_b:new o.bT(y,n.u_pattern_size_b),u_scale_a:new o.bf(y,n.u_scale_a),u_scale_b:new o.bf(y,n.u_scale_b),u_pixel_coord_upper:new o.bT(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(y,n.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bf(y,n.u_tile_units_to_pixels)}),terrain:(y,n)=>({u_texture:new o.bO(y,n.u_texture),u_ele_delta:new o.bf(y,n.u_ele_delta),u_fog_matrix:new o.bQ(y,n.u_fog_matrix),u_fog_color:new o.bP(y,n.u_fog_color),u_fog_ground_blend:new o.bf(y,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bf(y,n.u_fog_ground_blend_opacity),u_horizon_color:new o.bP(y,n.u_horizon_color),u_horizon_fog_blend:new o.bf(y,n.u_horizon_fog_blend),u_is_globe_mode:new o.bf(y,n.u_is_globe_mode)}),terrainDepth:(y,n)=>({u_ele_delta:new o.bf(y,n.u_ele_delta)}),terrainCoords:(y,n)=>({u_texture:new o.bO(y,n.u_texture),u_terrain_coords_id:new o.bf(y,n.u_terrain_coords_id),u_ele_delta:new o.bf(y,n.u_ele_delta)}),projectionErrorMeasurement:(y,n)=>({u_input:new o.bf(y,n.u_input),u_output_expected:new o.bf(y,n.u_output_expected)}),atmosphere:(y,n)=>({u_sun_pos:new o.bS(y,n.u_sun_pos),u_atmosphere_blend:new o.bf(y,n.u_atmosphere_blend),u_globe_position:new o.bS(y,n.u_globe_position),u_globe_radius:new o.bf(y,n.u_globe_radius),u_inv_proj_matrix:new o.bQ(y,n.u_inv_proj_matrix)}),sky:(y,n)=>({u_sky_color:new o.bP(y,n.u_sky_color),u_horizon_color:new o.bP(y,n.u_horizon_color),u_horizon:new o.bT(y,n.u_horizon),u_horizon_normal:new o.bT(y,n.u_horizon_normal),u_sky_horizon_blend:new o.bf(y,n.u_sky_horizon_blend),u_sky_blend:new o.bf(y,n.u_sky_blend)})};class zc{constructor(n,a,f){this.context=n;const p=n.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fa{constructor(n,a,f,p){this.length=a.length,this.attributes=f,this.itemSize=a.bytesPerElement,this.dynamicDraw=p,this.context=n;const v=n.gl;this.buffer=v.createBuffer(),n.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,a){for(let f=0;f<this.attributes.length;f++){const p=a.attributes[this.attributes[f].name];p!==void 0&&n.enableVertexAttribArray(p)}}setVertexAttribPointers(n,a,f){for(let p=0;p<this.attributes.length;p++){const v=this.attributes[p],B=a.attributes[v.name];B!==void 0&&n.vertexAttribPointer(B,v.components,n[Hc[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class hn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class As extends hn{getDefault(){return o.be.transparent}set(n){const a=this.current;(n.r!==a.r||n.g!==a.g||n.b!==a.b||n.a!==a.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class ui extends hn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Ia extends hn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class ra extends hn{getDefault(){return[!0,!0,!0,!0]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||n[2]!==a[2]||n[3]!==a[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class na extends hn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class iA extends hn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class ia extends hn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const a=this.current;(n.func!==a.func||n.ref!==a.ref||n.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Hn extends hn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||n[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class sA extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;n?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=n,this.dirty=!1}}class Rs extends hn{getDefault(){return[0,1]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Io extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;n?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=n,this.dirty=!1}}class GA extends hn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Eu extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;n?a.enable(a.BLEND):a.disable(a.BLEND),this.current=n,this.dirty=!1}}class $A extends hn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class oA extends hn{getDefault(){return o.be.transparent}set(n){const a=this.current;(n.r!==a.r||n.g!==a.g||n.b!==a.b||n.a!==a.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Tl extends hn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class sa extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;n?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=n,this.dirty=!1}}class Ta extends hn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Ja extends hn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class el extends hn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Js extends hn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class tl extends hn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||n[2]!==a[2]||n[3]!==a[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class cs extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class hi extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class jn extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Vn extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class di extends hn{getDefault(){return null}set(n){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Xn extends hn{getDefault(){return null}set(n){var a;if(n===this.current&&!this.dirty)return;const f=this.gl;Si(f)?f.bindVertexArray(n):(a=f.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class To extends hn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Pl extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Pa extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class rl extends hn{constructor(n,a){super(n),this.context=n,this.parent=a}getDefault(){return null}}class Fu extends rl{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class nl extends rl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class ts extends rl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const eo="Framebuffer is not complete";class qA{constructor(n,a,f,p,v){this.context=n,this.width=a,this.height=f;const B=n.gl,T=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new Fu(n,T),p)this.depthAttachment=v?new ts(n,T):new nl(n,T);else if(v)throw new Error("Stencil cannot be set without depth");if(B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error(eo)}destroy(){const n=this.context.gl,a=this.colorAttachment.get();if(a&&n.deleteTexture(a),this.depthAttachment){const f=this.depthAttachment.get();f&&n.deleteRenderbuffer(f)}n.deleteFramebuffer(this.framebuffer)}}class sn{constructor(n){var a,f;if(this.gl=n,this.clearColor=new As(this),this.clearDepth=new ui(this),this.clearStencil=new Ia(this),this.colorMask=new ra(this),this.depthMask=new na(this),this.stencilMask=new iA(this),this.stencilFunc=new ia(this),this.stencilOp=new Hn(this),this.stencilTest=new sA(this),this.depthRange=new Rs(this),this.depthTest=new Io(this),this.depthFunc=new GA(this),this.blend=new Eu(this),this.blendFunc=new $A(this),this.blendColor=new oA(this),this.blendEquation=new Tl(this),this.cullFace=new sa(this),this.cullFaceSide=new Ta(this),this.frontFace=new Ja(this),this.program=new el(this),this.activeTexture=new Js(this),this.viewport=new tl(this),this.bindFramebuffer=new cs(this),this.bindRenderbuffer=new hi(this),this.bindTexture=new jn(this),this.bindVertexBuffer=new Vn(this),this.bindElementBuffer=new di(this),this.bindVertexArray=new Xn(this),this.pixelStoreUnpack=new To(this),this.pixelStoreUnpackPremultiplyAlpha=new Pl(this),this.pixelStoreUnpackFlipY=new Pa(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Si(n)){this.HALF_FLOAT=n.HALF_FLOAT;const p=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=n.RGBA16F)!==null&&a!==void 0?a:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(f=n.RGB16F)!==null&&f!==void 0?f:p==null?void 0:p.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const p=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,a){return new zc(this,n,a)}createVertexBuffer(n,a,f){return new Fa(this,n,a,f)}createRenderbuffer(n,a,f){const p=this.gl,v=p.createRenderbuffer();return this.bindRenderbuffer.set(v),p.renderbufferStorage(p.RENDERBUFFER,n,a,f),this.bindRenderbuffer.set(null),v}createFramebuffer(n,a,f,p){return new qA(this,n,a,f,p)}clear({color:n,depth:a,stencil:f}){const p=this.gl;let v=0;n&&(v|=p.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(v|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),f!==void 0&&(v|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),p.clear(v)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){o.bG(n.blendFunction,An.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Si(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var a;return Si(this.gl)?this.gl.deleteVertexArray(n):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let Ll;function jc(y,n,a,f,p){const v=y.context,B=y.transform,T=v.gl,M=y.useProgram("collisionBox"),z=[];let V=0,W=0;for(let Fe=0;Fe<f.length;Fe++){const Re=f[Fe],je=n.getTile(Re).getBucket(a);if(!je)continue;const De=p?je.textCollisionBox:je.iconCollisionBox,We=je.collisionCircleArray;We.length>0&&(z.push({circleArray:We,circleOffset:W,coord:Re}),V+=We.length/4,W=V),De&&M.draw(v,T.LINES,Wr.disabled,Tr.disabled,y.colorModeForRenderPass(),Gr.disabled,ri(y.transform),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Re),B.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),a.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,null,y.transform.zoom,null,null,De.collisionVertexBuffer)}if(!p||!z.length)return;const $=y.useProgram("collisionCircle"),X=new o.b_;X.resize(4*V),X._trim();let ce=0;for(const Fe of z)for(let Re=0;Re<Fe.circleArray.length/4;Re++){const je=4*Re,De=Fe.circleArray[je+0],We=Fe.circleArray[je+1],Je=Fe.circleArray[je+2],Oe=Fe.circleArray[je+3];X.emplace(ce++,De,We,Je,Oe,0),X.emplace(ce++,De,We,Je,Oe,1),X.emplace(ce++,De,We,Je,Oe,2),X.emplace(ce++,De,We,Je,Oe,3)}(!Ll||Ll.length<2*V)&&(Ll=function(Fe){const Re=2*Fe,je=new o.c0;je.resize(Re),je._trim();for(let De=0;De<Re;De++){const We=6*De;je.uint16[We+0]=4*De+0,je.uint16[We+1]=4*De+1,je.uint16[We+2]=4*De+2,je.uint16[We+3]=4*De+2,je.uint16[We+4]=4*De+3,je.uint16[We+5]=4*De+0}return je}(V));const Ee=v.createIndexBuffer(Ll,!0),Se=v.createVertexBuffer(X,o.b$.members,!0);for(const Fe of z){const Re=ki(y.transform);$.draw(v,T.TRIANGLES,Wr.disabled,Tr.disabled,y.colorModeForRenderPass(),Gr.disabled,Re,y.style.map.terrain&&y.style.map.terrain.getTerrainData(Fe.coord),null,a.id,Se,Ee,o.aL.simpleSegment(0,2*Fe.circleOffset,Fe.circleArray.length,Fe.circleArray.length/2),null,y.transform.zoom,null,null,null)}Se.destroy(),Ee.destroy()}const Vc=o.af(new Float32Array(16));function aA(y,n,a,f,p,v){const{horizontalAlign:B,verticalAlign:T}=o.aG(y);return new o.P((-(B-.5)*n/p+f[0])*v,(-(T-.5)*a/p+f[1])*v)}function Hd(y,n,a,f,p,v){const B=n.tileAnchorPoint.add(new o.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let T=f.mult(v);a||(T=T.rotate(-p));const M=B.add(T);return Rr(M.x,M.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(a){const T=Jt(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(y),M=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return y.add(f.rotate(M))}return y.add(f)}function Vh(y,n,a,f,p,v,B,T,M,z,V,W){const $=y.text.placedSymbolArray,X=y.text.dynamicLayoutVertexArray,ce=y.icon.dynamicLayoutVertexArray,Ee={};X.clear();for(let Se=0;Se<$.length;Se++){const Fe=$.get(Se),Re=Fe.hidden||!Fe.crossTileID||y.allowVerticalPlacement&&!Fe.placedOrientation?null:f[Fe.crossTileID];if(Re){const je=new o.P(Fe.anchorX,Fe.anchorY),De={getElevation:W,width:p.width,height:p.height,pitchedLabelPlaneMatrix:v,pitchWithMap:a,transform:p,tileAnchorPoint:je,translation:z,unwrappedTileID:V},We=a?Vr(je.x,je.y,De):Jt(je.x,je.y,De),Je=_r(p.cameraToCenterDistance,We.signedDistanceFromCamera);let Oe=o.ao(y.textSizeData,T,Fe)*Je/o.aA;a&&(Oe*=y.tilePixelRatio/B);const{width:ht,height:St,anchor:gt,textOffset:_t,textBoxScale:xt}=Re,ir=aA(gt,ht,St,_t,xt,Oe),rr=p.getPitchedTextCorrection(je.x+z[0],je.y+z[1],V),Dt=Hd(We.point,De,n,ir,-p.bearingInRadians,rr),mr=y.allowVerticalPlacement&&Fe.placedOrientation===o.an.vertical?Math.PI/2:0;for(let rn=0;rn<Fe.numGlyphs;rn++)o.au(X,Dt,mr);M&&Fe.associatedIconIndex>=0&&(Ee[Fe.associatedIconIndex]={shiftedAnchor:Dt,angle:mr})}else qs(Fe.numGlyphs,X)}if(M){ce.clear();const Se=y.icon.placedSymbolArray;for(let Fe=0;Fe<Se.length;Fe++){const Re=Se.get(Fe);if(Re.hidden)qs(Re.numGlyphs,ce);else{const je=Ee[Fe];if(je)for(let De=0;De<Re.numGlyphs;De++)o.au(ce,je.shiftedAnchor,je.angle);else qs(Re.numGlyphs,ce)}}y.icon.dynamicLayoutVertexBuffer.updateData(ce)}y.text.dynamicLayoutVertexBuffer.updateData(X)}function Iu(y,n,a){return a.iconsInText&&n?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Kc(y,n,a,f,p,v,B,T,M,z,V,W,$){const X=y.context,ce=X.gl,Ee=y.transform,Se=T==="map",Fe=M==="map",Re=T!=="viewport"&&a.layout.get("symbol-placement")!=="point",je=Se&&!Fe&&!Re,De=!a.layout.get("symbol-sort-key").isConstant();let We=!1;const Je=y.getDepthModeForSublayer(0,Wr.ReadOnly),Oe=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ht=[],St=Ee.getCircleRadiusCorrection();for(const gt of f){const _t=n.getTile(gt),xt=_t.getBucket(a);if(!xt)continue;const ir=p?xt.text:xt.icon;if(!ir||!ir.segments.get().length||!ir.hasVisibleVertices)continue;const rr=ir.programConfigurations.get(a.id),Dt=p||xt.sdfIcons,mr=p?xt.textSizeData:xt.iconSizeData,rn=Fe||Ee.pitch!==0,mn=y.useProgram(Iu(Dt,p,xt),rr),$n=o.am(mr,Ee.zoom),En=y.style.map.terrain&&y.style.map.terrain.getTerrainData(gt);let Fn,xn,_n,Tn,Ki=[0,0],fn=null;if(p)xn=_t.glyphAtlasTexture,_n=ce.LINEAR,Fn=_t.glyphAtlasTexture.size,xt.iconsInText&&(Ki=_t.imageAtlasTexture.size,fn=_t.imageAtlasTexture,Tn=rn||y.options.rotating||y.options.zooming||mr.kind==="composite"||mr.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const Ui=a.layout.get("icon-size").constantOr(0)!==1||xt.iconsNeedLinear;xn=_t.imageAtlasTexture,_n=Dt||y.options.rotating||y.options.zooming||Ui||rn?ce.LINEAR:ce.NEAREST,Fn=_t.imageAtlasTexture.size}const rs=o.aB(_t,1,y.transform.zoom),Gi=qt(Se,y.transform,rs),Ua=o.L();o.ap(Ua,Gi);const ic=Jr(Fe,Se,y.transform,rs),sc=o.aC(Ee,_t,v,B),kl=Ee.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Wh=Oe&&xt.hasTextData(),Zh=a.layout.get("icon-text-fit")!=="none"&&Wh&&xt.hasIconData();if(Re){const Ui=y.style.map.terrain?(mo,hs)=>y.style.map.terrain.getElevation(gt,mo,hs):null,si=a.layout.get("text-rotation-alignment")==="map";Pn(xt,y,p,Gi,Ua,Fe,z,si,gt.toUnwrapped(),Ee.width,Ee.height,sc,Ui)}const Du=p&&Oe||Zh,Ro=Re||Du?Vc:Fe?Gi:y.transform.clipSpaceToPixelsMatrix,al=Dt&&a.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oc;oc=Dt?xt.iconsInText?jh(mr.kind,$n,je,Fe,Re,Du,y,Ro,ic,sc,Fn,Ki,St):ji(mr.kind,$n,je,Fe,Re,Du,y,Ro,ic,sc,p,Fn,0,St):rA(mr.kind,$n,je,Fe,Re,Du,y,Ro,ic,sc,p,Fn,St);const Jc={program:mn,buffers:ir,uniformValues:oc,projectionData:kl,atlasTexture:xn,atlasTextureIcon:fn,atlasInterpolation:_n,atlasInterpolationIcon:Tn,isSDF:Dt,hasHalo:al};if(De&&xt.canOverlap){We=!0;const Ui=ir.segments.get();for(const si of Ui)ht.push({segments:new o.aL([si]),sortKey:si.sortKey,state:Jc,terrainData:En})}else ht.push({segments:ir.segments,sortKey:0,state:Jc,terrainData:En})}We&&ht.sort((gt,_t)=>gt.sortKey-_t.sortKey);for(const gt of ht){const _t=gt.state;if(X.activeTexture.set(ce.TEXTURE0),_t.atlasTexture.bind(_t.atlasInterpolation,ce.CLAMP_TO_EDGE),_t.atlasTextureIcon&&(X.activeTexture.set(ce.TEXTURE1),_t.atlasTextureIcon&&_t.atlasTextureIcon.bind(_t.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),_t.isSDF){const xt=_t.uniformValues;_t.hasHalo&&(xt.u_is_halo=1,WA(_t.buffers,gt.segments,a,y,_t.program,Je,V,W,xt,_t.projectionData,gt.terrainData)),xt.u_is_halo=0}WA(_t.buffers,gt.segments,a,y,_t.program,Je,V,W,_t.uniformValues,_t.projectionData,gt.terrainData)}}function WA(y,n,a,f,p,v,B,T,M,z,V){const W=f.context;p.draw(W,W.gl.TRIANGLES,v,B,T,Gr.backCCW,M,V,z,a.id,y.layoutVertexBuffer,y.indexBuffer,n,a.paint,f.transform.zoom,y.programConfigurations.get(a.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Tu(y,n,a,f,p){const v=y.context,B=v.gl,T=Tr.disabled,M=new An([B.ONE,B.ONE],o.be.transparent,[!0,!0,!0,!0]),z=n.getBucket(a);if(!z)return;const V=f.key;let W=a.heatmapFbos.get(V);W||(W=ZA(v,n.tileSize,n.tileSize),a.heatmapFbos.set(V,W)),v.bindFramebuffer.set(W.framebuffer),v.viewport.set([0,0,n.tileSize,n.tileSize]),v.clear({color:o.be.transparent});const $=z.programConfigurations.get(a.id),X=y.useProgram("heatmap",$,!p),ce=y.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ee=y.style.map.terrain.getTerrainData(f);X.draw(v,B.TRIANGLES,Wr.disabled,T,M,Gr.disabled,Us(n,y.transform.zoom,a.paint.get("heatmap-intensity"),1),Ee,ce,a.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,a.paint,y.transform.zoom,$)}function Pu(y,n,a,f,p){const v=y.context,B=v.gl,T=y.transform;v.setColorMode(y.colorModeForRenderPass());const M=Lu(v,n),z=a.key,V=n.heatmapFbos.get(z);if(!V)return;v.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,V.colorAttachment.get()),v.activeTexture.set(B.TEXTURE1),M.bind(B.LINEAR,B.CLAMP_TO_EDGE);const W=T.getProjectionData({overscaledTileID:a,applyTerrainMatrix:p,applyGlobeMatrix:!f});y.useProgram("heatmapTexture").draw(v,B.TRIANGLES,Wr.disabled,Tr.disabled,y.colorModeForRenderPass(),Gr.disabled,Ys(y,n,0,1),null,W,n.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,n.paint,T.zoom),V.destroy(),n.heatmapFbos.delete(z)}function ZA(y,n,a){var f,p;const v=y.gl,B=v.createTexture();v.bindTexture(v.TEXTURE_2D,B),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);const T=(f=y.HALF_FLOAT)!==null&&f!==void 0?f:v.UNSIGNED_BYTE,M=(p=y.RGBA16F)!==null&&p!==void 0?p:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,M,n,a,0,v.RGBA,T,null);const z=y.createFramebuffer(n,a,!1,!1);return z.colorAttachment.set(B),z}function Lu(y,n){return n.colorRampTexture||(n.colorRampTexture=new o.T(y,n.colorRamp,y.gl.RGBA)),n.colorRampTexture}function Kh(y,n,a,f,p){if(!a||!f||!f.imageAtlas)return;const v=f.imageAtlas.patternPositions;let B=v[a.to.toString()],T=v[a.from.toString()];if(!B&&T&&(B=T),!T&&B&&(T=B),!B||!T){const M=p.getPaintProperty(n);B=v[M],T=v[M]}B&&T&&y.setConstantPatternPositions(B,T)}function Gc(y,n,a,f,p,v,B,T){const M=y.context.gl,z="fill-pattern",V=a.paint.get(z),W=V&&V.constantOr(1),$=a.getCrossfadeParameters();let X,ce,Ee,Se,Fe;const Re=y.transform,je=a.paint.get("fill-translate"),De=a.paint.get("fill-translate-anchor");B?(ce=W&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=M.LINES):(ce=W?"fillPattern":"fill",X=M.TRIANGLES);const We=V.constantOr(null);for(const Je of f){const Oe=n.getTile(Je);if(W&&!Oe.patternsLoaded())continue;const ht=Oe.getBucket(a);if(!ht)continue;const St=ht.programConfigurations.get(a.id),gt=y.useProgram(ce,St),_t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Je);W&&(y.context.activeTexture.set(M.TEXTURE0),Oe.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),St.updatePaintBuffers($)),Kh(St,z,We,Oe,a);const xt=Re.getProjectionData({overscaledTileID:Je,applyGlobeMatrix:!T,applyTerrainMatrix:!0}),ir=o.aC(Re,Oe,je,De);if(B){Se=ht.indexBuffer2,Fe=ht.segments2;const Dt=[M.drawingBufferWidth,M.drawingBufferHeight];Ee=ce==="fillOutlinePattern"&&W?ci(y,$,Oe,Dt,ir):nn(Dt,ir)}else Se=ht.indexBuffer,Fe=ht.segments,Ee=W?Zr(y,$,Oe,ir):{u_fill_translate:ir};const rr=y.stencilModeForClipping(Je);gt.draw(y.context,X,p,rr,v,Gr.backCCW,Ee,_t,xt,a.id,ht.layoutVertexBuffer,Se,Fe,a.paint,y.transform.zoom,St)}}function XA(y,n,a,f,p,v,B,T){const M=y.context,z=M.gl,V="fill-extrusion-pattern",W=a.paint.get(V),$=W.constantOr(1),X=a.getCrossfadeParameters(),ce=a.paint.get("fill-extrusion-opacity"),Ee=W.constantOr(null),Se=y.transform;for(const Fe of f){const Re=n.getTile(Fe),je=Re.getBucket(a);if(!je)continue;const De=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Fe),We=je.programConfigurations.get(a.id),Je=y.useProgram($?"fillExtrusionPattern":"fillExtrusion",We);$&&(y.context.activeTexture.set(z.TEXTURE0),Re.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),We.updatePaintBuffers(X));const Oe=Se.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!T,applyTerrainMatrix:!0});Kh(We,V,Ee,Re,a);const ht=o.aC(Se,Re,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),St=a.paint.get("fill-extrusion-vertical-gradient"),gt=$?en(y,St,ce,ht,Fe,X,Re):Mr(y,St,ce,ht);Je.draw(M,M.gl.TRIANGLES,p,v,B,Gr.backCCW,gt,De,Oe,a.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,a.paint,y.transform.zoom,We,y.style.map.terrain&&je.centroidVertexBuffer)}}function YA(y,n,a,f,p,v,B,T,M){var z;const V=y.style.projection,W=y.context,$=y.transform,X=W.gl,ce=[`#define NUM_ILLUMINATION_SOURCES ${a.paint.get("hillshade-highlight-color").values.length}`],Ee=y.useProgram("hillshade",null,!1,ce),Se=!y.options.moving;for(const Fe of f){const Re=n.getTile(Fe),je=Re.fbo;if(!je)continue;const De=V.getMeshFromTileID(W,Fe.canonical,T,!0,"raster"),We=(z=y.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(Fe);W.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,je.colorAttachment.get());const Je=$.getProjectionData({overscaledTileID:Fe,aligned:Se,applyGlobeMatrix:!M,applyTerrainMatrix:!0});Ee.draw(W,X.TRIANGLES,v,p[Fe.overscaledZ],B,Gr.backCCW,Qs(y,Re,a),We,Je,a.id,De.vertexBuffer,De.indexBuffer,De.segments)}}function lA(y,n,a,f,p,v,B,T,M){var z;const V=y.style.projection,W=y.context,$=y.transform,X=W.gl,ce=y.useProgram("colorRelief"),Ee=!y.options.moving;let Se=!0,Fe=0;for(const Re of f){const je=n.getTile(Re),De=je.dem;if(Se){const gt=X.getParameter(X.MAX_TEXTURE_SIZE),{elevationTexture:_t,colorTexture:xt}=a.getColorRampTextures(W,gt,De.getUnpackVector());W.activeTexture.set(X.TEXTURE1),_t.bind(X.NEAREST,X.CLAMP_TO_EDGE),W.activeTexture.set(X.TEXTURE4),xt.bind(X.LINEAR,X.CLAMP_TO_EDGE),Se=!1,Fe=_t.size[0]}if(!De||!De.data)continue;const We=De.stride,Je=De.getPixels();if(W.activeTexture.set(X.TEXTURE0),W.pixelStoreUnpackPremultiplyAlpha.set(!1),je.demTexture=je.demTexture||y.getTileTexture(We),je.demTexture){const gt=je.demTexture;gt.update(Je,{premultiply:!1}),gt.bind(X.LINEAR,X.CLAMP_TO_EDGE)}else je.demTexture=new o.T(W,Je,X.RGBA,{premultiply:!1}),je.demTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE);const Oe=V.getMeshFromTileID(W,Re.canonical,T,!0,"raster"),ht=(z=y.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(Re),St=$.getProjectionData({overscaledTileID:Re,aligned:Ee,applyGlobeMatrix:!M,applyTerrainMatrix:!0});ce.draw(W,X.TRIANGLES,v,p[Re.overscaledZ],B,Gr.backCCW,Oc(a,je.dem,Fe),ht,St,a.id,Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}}const $c=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function Po(y,n,a,f,p,v,B,T,M=!1,z=!1){const V=f[f.length-1].overscaledZ,W=y.context,$=W.gl,X=y.useProgram("raster"),ce=y.transform,Ee=y.style.projection,Se=y.colorModeForRenderPass(),Fe=!y.options.moving;for(const Re of f){const je=y.getDepthModeForSublayer(Re.overscaledZ-V,a.paint.get("raster-opacity")===1?Wr.ReadWrite:Wr.ReadOnly,$.LESS),De=n.getTile(Re);De.registerFadeDuration(a.paint.get("raster-fade-duration"));const We=n.findLoadedParent(Re,0),Je=n.findLoadedSibling(Re),Oe=Mp(De,We||Je||null,n,a,y.transform,y.style.map.terrain);let ht,St;const gt=a.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;W.activeTexture.set($.TEXTURE0),De.texture.bind(gt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),W.activeTexture.set($.TEXTURE1),We?(We.texture.bind(gt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),ht=Math.pow(2,We.tileID.overscaledZ-De.tileID.overscaledZ),St=[De.tileID.canonical.x*ht%1,De.tileID.canonical.y*ht%1]):De.texture.bind(gt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),De.texture.useMipmap&&W.extTextureFilterAnisotropic&&y.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);const _t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Re),xt=ce.getProjectionData({overscaledTileID:Re,aligned:Fe,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),ir=Fo(St||[0,0],ht||1,Oe,a,T),rr=Ee.getMeshFromTileID(W,Re.canonical,v,B,"raster");X.draw(W,$.TRIANGLES,je,p?p[Re.overscaledZ]:Tr.disabled,Se,M?Gr.frontCCW:Gr.backCCW,ir,_t,xt,a.id,rr.vertexBuffer,rr.indexBuffer,rr.segments)}}function Mp(y,n,a,f,p,v){const B=f.paint.get("raster-fade-duration");if(!v&&B>0){const T=P.now(),M=(T-y.timeAdded)/B,z=n?(T-n.timeAdded)/B:-1,V=a.getSource(),W=Ft(p,{tileSize:V.tileSize,roundZoom:V.roundZoom}),$=!n||Math.abs(n.tileID.overscaledZ-W)>Math.abs(y.tileID.overscaledZ-W),X=$&&y.refreshedUponExpiration?1:o.ag($?M:1-z,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),n?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}const jd=new o.be(1,0,0,1),qc=new o.be(0,1,0,1),Gh=new o.be(0,0,1,1),Vd=new o.be(1,0,1,1),Kd=new o.be(0,1,1,1);function Wc(y,n,a,f){to(y,0,n+a/2,y.transform.width,a,f)}function oa(y,n,a,f){to(y,n-a/2,0,a,y.transform.height,f)}function to(y,n,a,f,p,v){const B=y.context,T=B.gl;T.enable(T.SCISSOR_TEST),T.scissor(n*y.pixelRatio,a*y.pixelRatio,f*y.pixelRatio,p*y.pixelRatio),B.clear({color:v}),T.disable(T.SCISSOR_TEST)}function La(y,n,a){const f=y.context,p=f.gl,v=y.useProgram("debug"),B=Wr.disabled,T=Tr.disabled,M=y.colorModeForRenderPass(),z="$debug",V=y.style.map.terrain&&y.style.map.terrain.getTerrainData(a);f.activeTexture.set(p.TEXTURE0);const W=n.getTileByID(a.key).latestRawTileData,$=Math.floor((W&&W.byteLength||0)/1024),X=n.getTile(a).tileSize,ce=512/Math.min(X,512)*(a.overscaledZ/y.transform.zoom)*.5;let Ee=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(Ee+=` => ${a.overscaledZ}`),function(Fe,Re){Fe.initDebugOverlayCanvas();const je=Fe.debugOverlayCanvas,De=Fe.context.gl,We=Fe.debugOverlayCanvas.getContext("2d");We.clearRect(0,0,je.width,je.height),We.shadowColor="white",We.shadowBlur=2,We.lineWidth=1.5,We.strokeStyle="white",We.textBaseline="top",We.font="bold 36px Open Sans, sans-serif",We.fillText(Re,5,5),We.strokeText(Re,5,5),Fe.debugOverlayTexture.update(je),Fe.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(y,`${Ee} ${$}kB`);const Se=y.transform.getProjectionData({overscaledTileID:a,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(f,p.TRIANGLES,B,T,An.alphaBlended,Gr.disabled,zi(o.be.transparent,ce),null,Se,z,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),v.draw(f,p.LINE_STRIP,B,T,M,Gr.disabled,zi(o.be.red),V,Se,z,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function fi(y,n,a,f){const{isRenderingGlobe:p}=f,v=y.context,B=v.gl,T=y.transform,M=y.colorModeForRenderPass(),z=y.getDepthModeFor3D(),V=y.useProgram("terrain");v.bindFramebuffer.set(null),v.viewport.set([0,0,y.width,y.height]);for(const W of a){const $=n.getTerrainMesh(W.tileID),X=y.renderToTexture.getTexture(W),ce=n.getTerrainData(W.tileID);v.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,X.texture);const Ee=n.getMeshFrameDelta(T.zoom),Se=T.calculateFogMatrix(W.tileID.toUnwrapped()),Fe=ot(Ee,Se,y.style.sky,T.pitch,p),Re=T.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(v,B.TRIANGLES,z,Tr.disabled,M,Gr.backCCW,Fe,ce,Re,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}function il(y,n){if(!n.mesh){const a=new o.aK;a.emplaceBack(-1,-1),a.emplaceBack(1,-1),a.emplaceBack(1,1),a.emplaceBack(-1,1);const f=new o.aM;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),n.mesh=new Jo(y.createVertexBuffer(a,ea.members),y.createIndexBuffer(f),o.aL.simpleSegment(0,0,a.length,f.length))}return n.mesh}class Vi{constructor(n,a){this.context=new sn(n),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=mt.maxUnderzooming+mt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Zl}resize(n,a,f){if(this.width=Math.floor(n*f),this.height=Math.floor(a*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const n=this.context,a=new o.aK;a.emplaceBack(0,0),a.emplaceBack(o.$,0),a.emplaceBack(0,o.$),a.emplaceBack(o.$,o.$),this.tileExtentBuffer=n.createVertexBuffer(a,ea.members),this.tileExtentSegments=o.aL.simpleSegment(0,0,4,2);const f=new o.aK;f.emplaceBack(0,0),f.emplaceBack(o.$,0),f.emplaceBack(0,o.$),f.emplaceBack(o.$,o.$),this.debugBuffer=n.createVertexBuffer(f,ea.members),this.debugSegments=o.aL.simpleSegment(0,0,4,5);const p=new o.c5;p.emplaceBack(0,0,0,0),p.emplaceBack(o.$,0,o.$,0),p.emplaceBack(0,o.$,0,o.$),p.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=n.createVertexBuffer(p,Ae.members),this.rasterBoundsSegments=o.aL.simpleSegment(0,0,4,2);const v=new o.aK;v.emplaceBack(0,0),v.emplaceBack(o.$,0),v.emplaceBack(0,o.$),v.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(v,ea.members),this.rasterBoundsSegmentsPosOnly=o.aL.simpleSegment(0,0,4,5);const B=new o.aK;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(B,ea.members),this.viewportSegments=o.aL.simpleSegment(0,0,4,2);const T=new o.c6;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(T);const M=new o.aM;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(M);const z=this.context.gl;this.stencilClearMode=new Tr({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new Jo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,a=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=o.L();o.bX(f,0,this.width,this.height,0,0,1),o.N(f,f,[a.drawingBufferWidth,a.drawingBufferHeight,0]);const p={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(n,a.TRIANGLES,Wr.disabled,this.stencilClearMode,An.disabled,Gr.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,a,f){if(this.currentStencilSource===n.source||!n.isTileClipped()||!a||!a.length)return;this.currentStencilSource=n.source,this.nextStencilID+a.length>256&&this.clearStencil();const p=this.context;p.setColorMode(An.disabled),p.setDepthMode(Wr.disabled);const v={};for(const B of a)v[B.key]=this.nextStencilID++;this._renderTileMasks(v,a,f,!0),this._renderTileMasks(v,a,f,!1),this._tileClippingMaskIDs=v}_renderTileMasks(n,a,f,p){const v=this.context,B=v.gl,T=this.style.projection,M=this.transform,z=this.useProgram("clippingMask");for(const V of a){const W=n[V.key],$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),X=T.getMeshFromTileID(this.context,V.canonical,p,!0,"stencil"),ce=M.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!f,applyTerrainMatrix:!0});z.draw(v,B.TRIANGLES,Wr.disabled,new Tr({func:B.ALWAYS,mask:0},W,255,B.KEEP,B.KEEP,B.REPLACE),An.disabled,f?Gr.disabled:Gr.backCCW,null,$,ce,"$clipping",X.vertexBuffer,X.indexBuffer,X.segments)}}_renderTilesDepthBuffer(){const n=this.context,a=n.gl,f=this.style.projection,p=this.transform,v=this.useProgram("depth"),B=this.getDepthModeFor3D(),T=Ct(p,{tileSize:p.tileSize});for(const M of T){const z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M),V=f.getMeshFromTileID(this.context,M.canonical,!0,!0,"raster"),W=p.getProjectionData({overscaledTileID:M,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(n,a.TRIANGLES,B,Tr.disabled,An.disabled,Gr.backCCW,null,z,W,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,a=this.context.gl;return new Tr({func:a.NOTEQUAL,mask:255},n,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(n){const a=this.context.gl;return new Tr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,a.KEEP,a.KEEP,a.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const a=this.context.gl,f=n.sort((B,T)=>T.overscaledZ-B.overscaledZ),p=f[f.length-1].overscaledZ,v=f[0].overscaledZ-p+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const B={};for(let T=0;T<v;T++)B[T+p]=new Tr({func:a.GEQUAL,mask:255},T+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=v,[B,f]}return[{[p]:Tr.disabled},f]}stencilConfigForOverlapTwoPass(n){const a=this.context.gl,f=n.sort((B,T)=>T.overscaledZ-B.overscaledZ),p=f[f.length-1].overscaledZ,v=f[0].overscaledZ-p+1;if(this.clearStencil(),v>1){const B={},T={};for(let M=0;M<v;M++)B[M+p]=new Tr({func:a.GREATER,mask:255},v+1+M,255,a.KEEP,a.KEEP,a.REPLACE),T[M+p]=new Tr({func:a.GREATER,mask:255},1+M,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID=2*v+1,[B,T,f]}return this.nextStencilID=3,[{[p]:new Tr({func:a.GREATER,mask:255},2,255,a.KEEP,a.KEEP,a.REPLACE)},{[p]:new Tr({func:a.GREATER,mask:255},1,255,a.KEEP,a.KEEP,a.REPLACE)},f]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new An([n.CONSTANT_COLOR,n.ONE],new o.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?An.unblended:An.alphaBlended}getDepthModeForSublayer(n,a,f){if(!this.opaquePassEnabledForLayer())return Wr.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Wr(f||this.context.gl.LEQUAL,a,[p,p])}getDepthModeFor3D(){return new Wr(this.context.gl.LEQUAL,Wr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,a){var f,p;this.style=n,this.options=a,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(P.now()),this.imageManager.beginFrame();const v=this.style._order,B=this.style.sourceCaches,T={},M={},z={},V={isRenderingToTexture:!1,isRenderingGlobe:((f=n.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const $ in B){const X=B[$];X.used&&X.prepare(this.context),T[$]=X.getVisibleCoordinates(!1),M[$]=T[$].slice().reverse(),z[$]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<v.length;$++)if(this.style._layers[v[$]].is3D()){this.opaquePassCutoff=$;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const $ of v){const X=this.style._layers[$];if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const ce=M[X.source];(X.type==="custom"||ce.length)&&this.renderLayer(this,B[X.source],X,ce,V)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:$=>this.useProgram($)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?o.be.black:o.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function($,X){const ce=$.context,Ee=ce.gl,Se=((Je,Oe,ht)=>{const St=Math.cos(Oe.rollInRadians),gt=Math.sin(Oe.rollInRadians),_t=fe(Oe),xt=Oe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Je.properties.get("sky-color"),u_horizon_color:Je.properties.get("horizon-color"),u_horizon:[(Oe.width/2-_t*gt)*ht,(Oe.height/2+_t*St)*ht],u_horizon_normal:[-gt,St],u_sky_horizon_blend:Je.properties.get("sky-horizon-blend")*Oe.height/2*ht,u_sky_blend:xt}})(X,$.style.map.transform,$.pixelRatio),Fe=new Wr(Ee.LEQUAL,Wr.ReadWrite,[0,1]),Re=Tr.disabled,je=$.colorModeForRenderPass(),De=$.useProgram("sky"),We=il(ce,X);De.draw(ce,Ee.TRIANGLES,Fe,Re,je,Gr.disabled,Se,null,void 0,"sky",We.vertexBuffer,We.indexBuffer,We.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[v[this.currentLayer]],X=B[$.source],ce=T[$.source];this._renderTileClippingMasks($,ce,!1),this.renderLayer(this,X,$,ce,V)}this.renderPass="translucent";let W=!1;for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const $=this.style._layers[v[this.currentLayer]],X=B[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($,V))continue;this.opaquePassEnabledForLayer()||W||(W=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ce=($.type==="symbol"?z:M)[$.source];this._renderTileClippingMasks($,T[$.source],!!this.renderToTexture),this.renderLayer(this,X,$,ce,V)}if(V.isRenderingGlobe&&function($,X,ce){const Ee=$.context,Se=Ee.gl,Fe=$.useProgram("atmosphere"),Re=new Wr(Se.LEQUAL,Wr.ReadOnly,[0,1]),je=$.transform,De=function(xt,ir){const rr=xt.properties.get("position"),Dt=[-rr.x,-rr.y,-rr.z],mr=o.af(new Float64Array(16));return xt.properties.get("anchor")==="map"&&(o.b5(mr,mr,ir.rollInRadians),o.b6(mr,mr,-ir.pitchInRadians),o.b5(mr,mr,ir.bearingInRadians),o.b6(mr,mr,ir.center.lat*Math.PI/180),o.by(mr,mr,-ir.center.lng*Math.PI/180)),o.c4(Dt,Dt,mr),Dt}(ce,$.transform),We=je.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Je=X.properties.get("atmosphere-blend")*We.projectionTransition;if(Je===0)return;const Oe=xs(je.worldSize,je.center.lat),ht=je.inverseProjectionMatrix,St=new Float64Array(4);St[3]=1,o.av(St,St,je.modelViewProjectionMatrix),St[0]/=St[3],St[1]/=St[3],St[2]/=St[3],St[3]=1,o.av(St,St,ht),St[0]/=St[3],St[1]/=St[3],St[2]/=St[3],St[3]=1;const gt=((xt,ir,rr,Dt,mr)=>({u_sun_pos:xt,u_atmosphere_blend:ir,u_globe_position:rr,u_globe_radius:Dt,u_inv_proj_matrix:mr}))(De,Je,[St[0],St[1],St[2]],Oe,ht),_t=il(Ee,X);Fe.draw(Ee,Se.TRIANGLES,Re,Tr.disabled,An.alphaBlended,Gr.disabled,gt,null,null,"atmosphere",_t.vertexBuffer,_t.indexBuffer,_t.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const $=function(X,ce){let Ee=null;const Se=Object.values(X._layers).flatMap(De=>De.source&&!De.isHidden(ce)?[X.sourceCaches[De.source]]:[]),Fe=Se.filter(De=>De.getSource().type==="vector"),Re=Se.filter(De=>De.getSource().type!=="vector"),je=De=>{(!Ee||Ee.getSource().maxzoom<De.getSource().maxzoom)&&(Ee=De)};return Fe.forEach(De=>je(De)),Ee||Re.forEach(De=>je(De)),Ee}(this.style,this.transform.zoom);$&&function(X,ce,Ee){for(let Se=0;Se<Ee.length;Se++)La(X,ce,Ee[Se])}(this,$,$.getVisibleCoordinates())}this.options.showPadding&&function($){const X=$.transform.padding;Wc($,$.transform.height-(X.top||0),3,jd),Wc($,X.bottom||0,3,qc),oa($,X.left||0,3,Gh),oa($,$.transform.width-(X.right||0),3,Vd);const ce=$.transform.centerPoint;(function(Ee,Se,Fe,Re){to(Ee,Se-1,Fe-10,2,20,Re),to(Ee,Se-10,Fe-1,20,2,Re)})($,ce.x,$.transform.height-ce.y,Kd)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=n?!o.c7(a,f):!o.c8(a,f)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(o.c9(a,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,B){const T=v.context,M=T.gl,z=v.transform,V=An.unblended,W=new Wr(M.LEQUAL,Wr.ReadWrite,[0,1]),$=B.sourceCache.getRenderableTiles(),X=v.useProgram("terrainDepth");T.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),T.clear({color:o.be.transparent,depth:1});for(const ce of $){const Ee=B.getTerrainMesh(ce.tileID),Se=B.getTerrainData(ce.tileID),Fe=z.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Re={u_ele_delta:B.getMeshFrameDelta(z.zoom)};X.draw(T,M.TRIANGLES,W,Tr.disabled,V,Gr.backCCW,Re,Se,Fe,"terrain",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,B){const T=v.context,M=T.gl,z=v.transform,V=An.unblended,W=new Wr(M.LEQUAL,Wr.ReadWrite,[0,1]),$=B.getCoordsTexture(),X=B.sourceCache.getRenderableTiles(),ce=v.useProgram("terrainCoords");T.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),T.clear({color:o.be.transparent,depth:1}),B.coordsIndex=[];for(const Ee of X){const Se=B.getTerrainMesh(Ee.tileID),Fe=B.getTerrainData(Ee.tileID);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,$.texture);const Re={u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(z.zoom)},je=z.getProjectionData({overscaledTileID:Ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ce.draw(T,M.TRIANGLES,W,Tr.disabled,V,Gr.backCCW,Re,Fe,je,"terrain",Se.vertexBuffer,Se.indexBuffer,Se.segments),B.coordsIndex.push(Ee.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(n,a,f,p,v){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(p||[]).length)&&(this.id=f.id,o.ca(f)?function(B,T,M,z,V,W){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:$}=W,X=Tr.disabled,ce=B.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ee,Se,Fe,Re,je,De,We,Je,Oe){const ht=Se.transform,St=Se.style.map.terrain,gt=je==="map",_t=De==="map";for(const xt of Ee){const ir=Re.getTile(xt),rr=ir.getBucket(Fe);if(!rr||!rr.text||!rr.text.segments.get().length)continue;const Dt=o.am(rr.textSizeData,ht.zoom),mr=o.aB(ir,1,Se.transform.zoom),rn=qt(gt,Se.transform,mr),mn=Fe.layout.get("icon-text-fit")!=="none"&&rr.hasIconData();if(Dt){const $n=Math.pow(2,ht.zoom-ir.tileID.overscaledZ),En=St?(Fn,xn)=>St.getElevation(xt,Fn,xn):null;Vh(rr,gt,_t,Oe,ht,rn,$n,Dt,mn,o.aC(ht,ir,We,Je),xt.toUnwrapped(),En)}}}(z,B,M,T,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),V),M.paint.get("icon-opacity").constantOr(1)!==0&&Kc(B,T,M,z,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),X,ce,$),M.paint.get("text-opacity").constantOr(1)!==0&&Kc(B,T,M,z,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),X,ce,$),T.map.showCollisionBoxes&&(jc(B,T,M,z,!0),jc(B,T,M,z,!1))}(n,a,f,p,this.style.placement.variableOffsets,v):o.cb(f)?function(B,T,M,z,V){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:W}=V,$=M.paint.get("circle-opacity"),X=M.paint.get("circle-stroke-width"),ce=M.paint.get("circle-stroke-opacity"),Ee=!M.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(X.constantOr(1)===0||ce.constantOr(1)===0))return;const Se=B.context,Fe=Se.gl,Re=B.transform,je=B.getDepthModeForSublayer(0,Wr.ReadOnly),De=Tr.disabled,We=B.colorModeForRenderPass(),Je=[],Oe=Re.getCircleRadiusCorrection();for(let ht=0;ht<z.length;ht++){const St=z[ht],gt=T.getTile(St),_t=gt.getBucket(M);if(!_t)continue;const xt=M.paint.get("circle-translate"),ir=M.paint.get("circle-translate-anchor"),rr=o.aC(Re,gt,xt,ir),Dt=_t.programConfigurations.get(M.id),mr=B.useProgram("circle",Dt),rn=_t.layoutVertexBuffer,mn=_t.indexBuffer,$n=B.style.map.terrain&&B.style.map.terrain.getTerrainData(St),En={programConfiguration:Dt,program:mr,layoutVertexBuffer:rn,indexBuffer:mn,uniformValues:ti(B,gt,M,rr,Oe),terrainData:$n,projectionData:Re.getProjectionData({overscaledTileID:St,applyGlobeMatrix:!W,applyTerrainMatrix:!0})};if(Ee){const Fn=_t.segments.get();for(const xn of Fn)Je.push({segments:new o.aL([xn]),sortKey:xn.sortKey,state:En})}else Je.push({segments:_t.segments,sortKey:0,state:En})}Ee&&Je.sort((ht,St)=>ht.sortKey-St.sortKey);for(const ht of Je){const{programConfiguration:St,program:gt,layoutVertexBuffer:_t,indexBuffer:xt,uniformValues:ir,terrainData:rr,projectionData:Dt}=ht.state;gt.draw(Se,Fe.TRIANGLES,je,De,We,Gr.backCCW,ir,rr,Dt,M.id,_t,xt,ht.segments,M.paint,B.transform.zoom,St)}}(n,a,f,p,v):o.cc(f)?function(B,T,M,z,V){if(M.paint.get("heatmap-opacity")===0)return;const W=B.context,{isRenderingToTexture:$,isRenderingGlobe:X}=V;if(B.style.map.terrain){for(const ce of z){const Ee=T.getTile(ce);T.hasRenderableParent(ce)||(B.renderPass==="offscreen"?Tu(B,Ee,M,ce,X):B.renderPass==="translucent"&&Pu(B,M,ce,$,X))}W.viewport.set([0,0,B.width,B.height])}else B.renderPass==="offscreen"?function(ce,Ee,Se,Fe){const Re=ce.context,je=Re.gl,De=ce.transform,We=Tr.disabled,Je=new An([je.ONE,je.ONE],o.be.transparent,[!0,!0,!0,!0]);(function(Oe,ht,St){const gt=Oe.gl;Oe.activeTexture.set(gt.TEXTURE1),Oe.viewport.set([0,0,ht.width/4,ht.height/4]);let _t=St.heatmapFbos.get(o.c1);_t?(gt.bindTexture(gt.TEXTURE_2D,_t.colorAttachment.get()),Oe.bindFramebuffer.set(_t.framebuffer)):(_t=ZA(Oe,ht.width/4,ht.height/4),St.heatmapFbos.set(o.c1,_t))})(Re,ce,Se),Re.clear({color:o.be.transparent});for(let Oe=0;Oe<Fe.length;Oe++){const ht=Fe[Oe];if(Ee.hasRenderableParent(ht))continue;const St=Ee.getTile(ht),gt=St.getBucket(Se);if(!gt)continue;const _t=gt.programConfigurations.get(Se.id),xt=ce.useProgram("heatmap",_t),ir=De.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),rr=De.getCircleRadiusCorrection();xt.draw(Re,je.TRIANGLES,Wr.disabled,We,Je,Gr.backCCW,Us(St,De.zoom,Se.paint.get("heatmap-intensity"),rr),null,ir,Se.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,Se.paint,De.zoom,_t)}Re.viewport.set([0,0,ce.width,ce.height])}(B,T,M,z):B.renderPass==="translucent"&&function(ce,Ee){const Se=ce.context,Fe=Se.gl;Se.setColorMode(ce.colorModeForRenderPass());const Re=Ee.heatmapFbos.get(o.c1);Re&&(Se.activeTexture.set(Fe.TEXTURE0),Fe.bindTexture(Fe.TEXTURE_2D,Re.colorAttachment.get()),Se.activeTexture.set(Fe.TEXTURE1),Lu(Se,Ee).bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(Se,Fe.TRIANGLES,Wr.disabled,Tr.disabled,ce.colorModeForRenderPass(),Gr.disabled,Ys(ce,Ee,0,1),null,null,Ee.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,Ee.paint,ce.transform.zoom))}(B,M)}(n,a,f,p,v):o.cd(f)?function(B,T,M,z,V){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:W}=V,$=M.paint.get("line-opacity"),X=M.paint.get("line-width");if($.constantOr(1)===0||X.constantOr(1)===0)return;const ce=B.getDepthModeForSublayer(0,Wr.ReadOnly),Ee=B.colorModeForRenderPass(),Se=M.paint.get("line-dasharray"),Fe=M.paint.get("line-pattern"),Re=Fe.constantOr(1),je=M.paint.get("line-gradient"),De=M.getCrossfadeParameters(),We=Re?"linePattern":Se?"lineSDF":je?"lineGradient":"line",Je=B.context,Oe=Je.gl,ht=B.transform;let St=!0;for(const gt of z){const _t=T.getTile(gt);if(Re&&!_t.patternsLoaded())continue;const xt=_t.getBucket(M);if(!xt)continue;const ir=xt.programConfigurations.get(M.id),rr=B.context.program.get(),Dt=B.useProgram(We,ir),mr=St||Dt.program!==rr,rn=B.style.map.terrain&&B.style.map.terrain.getTerrainData(gt),mn=Fe.constantOr(null);if(mn&&_t.imageAtlas){const _n=_t.imageAtlas,Tn=_n.patternPositions[mn.to.toString()],Ki=_n.patternPositions[mn.from.toString()];Tn&&Ki&&ir.setConstantPatternPositions(Tn,Ki)}const $n=ht.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),En=ht.getPixelScale(),Fn=Re?KA(B,_t,M,En,De):Se?eA(B,_t,M,En,Se,De):je?Jl(B,_t,M,En,xt.lineClipsArray.length):Ya(B,_t,M,En);if(Re)Je.activeTexture.set(Oe.TEXTURE0),_t.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),ir.updatePaintBuffers(De);else if(Se&&(mr||B.lineAtlas.dirty))Je.activeTexture.set(Oe.TEXTURE0),B.lineAtlas.bind(Je);else if(je){const _n=xt.gradients[M.id];let Tn=_n.texture;if(M.gradientVersion!==_n.version){let Ki=256;if(M.stepInterpolant){const fn=T.getSource().maxzoom,rs=gt.canonical.z===fn?Math.ceil(1<<B.transform.maxZoom-gt.canonical.z):1;Ki=o.ag(o.c2(xt.maxLineLength/o.$*1024*rs),256,Je.maxTextureSize)}_n.gradient=o.c3({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:Ki,image:_n.gradient||void 0,clips:xt.lineClipsArray}),_n.texture?_n.texture.update(_n.gradient):_n.texture=new o.T(Je,_n.gradient,Oe.RGBA),_n.version=M.gradientVersion,Tn=_n.texture}Je.activeTexture.set(Oe.TEXTURE0),Tn.bind(M.stepInterpolant?Oe.NEAREST:Oe.LINEAR,Oe.CLAMP_TO_EDGE)}const xn=B.stencilModeForClipping(gt);Dt.draw(Je,Oe.TRIANGLES,ce,xn,Ee,Gr.disabled,Fn,rn,$n,M.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,M.paint,B.transform.zoom,ir,xt.layoutVertexBuffer2),St=!1}}(n,a,f,p,v):o.ce(f)?function(B,T,M,z,V){const W=M.paint.get("fill-color"),$=M.paint.get("fill-opacity");if($.constantOr(1)===0)return;const{isRenderingToTexture:X}=V,ce=B.colorModeForRenderPass(),Ee=M.paint.get("fill-pattern"),Se=B.opaquePassEnabledForLayer()&&!Ee.constantOr(1)&&W.constantOr(o.be.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===Se){const Fe=B.getDepthModeForSublayer(1,B.renderPass==="opaque"?Wr.ReadWrite:Wr.ReadOnly);Gc(B,T,M,z,Fe,ce,!1,X)}if(B.renderPass==="translucent"&&M.paint.get("fill-antialias")){const Fe=B.getDepthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Wr.ReadOnly);Gc(B,T,M,z,Fe,ce,!0,X)}}(n,a,f,p,v):o.cf(f)?function(B,T,M,z,V){const W=M.paint.get("fill-extrusion-opacity");if(W===0)return;const{isRenderingToTexture:$}=V;if(B.renderPass==="translucent"){const X=new Wr(B.context.gl.LEQUAL,Wr.ReadWrite,B.depthRangeFor3D);if(W!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))XA(B,T,M,z,X,Tr.disabled,An.disabled,$),XA(B,T,M,z,X,B.stencilModeFor3D(),B.colorModeForRenderPass(),$);else{const ce=B.colorModeForRenderPass();XA(B,T,M,z,X,Tr.disabled,ce,$)}}}(n,a,f,p,v):o.cg(f)?function(B,T,M,z,V){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const{isRenderingToTexture:W}=V,$=B.context,X=B.style.projection.useSubdivision,ce=B.getDepthModeForSublayer(0,Wr.ReadOnly),Ee=B.colorModeForRenderPass();if(B.renderPass==="offscreen")(function(Se,Fe,Re,je,De,We,Je){const Oe=Se.context,ht=Oe.gl;for(const St of Re){const gt=Fe.getTile(St),_t=gt.dem;if(!_t||!_t.data||!gt.needsHillshadePrepare)continue;const xt=_t.dim,ir=_t.stride,rr=_t.getPixels();if(Oe.activeTexture.set(ht.TEXTURE1),Oe.pixelStoreUnpackPremultiplyAlpha.set(!1),gt.demTexture=gt.demTexture||Se.getTileTexture(ir),gt.demTexture){const mr=gt.demTexture;mr.update(rr,{premultiply:!1}),mr.bind(ht.NEAREST,ht.CLAMP_TO_EDGE)}else gt.demTexture=new o.T(Oe,rr,ht.RGBA,{premultiply:!1}),gt.demTexture.bind(ht.NEAREST,ht.CLAMP_TO_EDGE);Oe.activeTexture.set(ht.TEXTURE0);let Dt=gt.fbo;if(!Dt){const mr=new o.T(Oe,{width:xt,height:xt,data:null},ht.RGBA);mr.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),Dt=gt.fbo=Oe.createFramebuffer(xt,xt,!0,!1),Dt.colorAttachment.set(mr.texture)}Oe.bindFramebuffer.set(Dt.framebuffer),Oe.viewport.set([0,0,xt,xt]),Se.useProgram("hillshadePrepare").draw(Oe,ht.TRIANGLES,De,We,Je,Gr.disabled,Cu(gt.tileID,_t),null,null,je.id,Se.rasterBoundsBuffer,Se.quadTriangleIndexBuffer,Se.rasterBoundsSegments),gt.needsHillshadePrepare=!1}})(B,T,z,M,ce,Tr.disabled,Ee),$.viewport.set([0,0,B.width,B.height]);else if(B.renderPass==="translucent")if(X){const[Se,Fe,Re]=B.stencilConfigForOverlapTwoPass(z);YA(B,T,M,Re,Se,ce,Ee,!1,W),YA(B,T,M,Re,Fe,ce,Ee,!0,W)}else{const[Se,Fe]=B.getStencilConfigForOverlapAndUpdateStencilID(z);YA(B,T,M,Fe,Se,ce,Ee,!1,W)}}(n,a,f,p,v):o.ch(f)?function(B,T,M,z,V){if(B.renderPass!=="translucent"||!z.length)return;const{isRenderingToTexture:W}=V,$=B.style.projection.useSubdivision,X=B.getDepthModeForSublayer(0,Wr.ReadOnly),ce=B.colorModeForRenderPass();if($){const[Ee,Se,Fe]=B.stencilConfigForOverlapTwoPass(z);lA(B,T,M,Fe,Ee,X,ce,!1,W),lA(B,T,M,Fe,Se,X,ce,!0,W)}else{const[Ee,Se]=B.getStencilConfigForOverlapAndUpdateStencilID(z);lA(B,T,M,Se,Ee,X,ce,!1,W)}}(n,a,f,p,v):o.ci(f)?function(B,T,M,z,V){if(B.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!z.length)return;const{isRenderingToTexture:W}=V,$=T.getSource(),X=B.style.projection.useSubdivision;if($ instanceof Kt)Po(B,T,M,z,null,!1,!1,$.tileCoords,$.flippedWindingOrder,W);else if(X){const[ce,Ee,Se]=B.stencilConfigForOverlapTwoPass(z);Po(B,T,M,Se,ce,!1,!0,$c,!1,W),Po(B,T,M,Se,Ee,!0,!0,$c,!1,W)}else{const[ce,Ee]=B.getStencilConfigForOverlapAndUpdateStencilID(z);Po(B,T,M,Ee,ce,!1,!0,$c,!1,W)}}(n,a,f,p,v):o.cj(f)?function(B,T,M,z,V){const W=M.paint.get("background-color"),$=M.paint.get("background-opacity");if($===0)return;const{isRenderingToTexture:X}=V,ce=B.context,Ee=ce.gl,Se=B.style.projection,Fe=B.transform,Re=Fe.tileSize,je=M.paint.get("background-pattern");if(B.isPatternMissing(je))return;const De=!je&&W.a===1&&$===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==De)return;const We=Tr.disabled,Je=B.getDepthModeForSublayer(0,De==="opaque"?Wr.ReadWrite:Wr.ReadOnly),Oe=B.colorModeForRenderPass(),ht=B.useProgram(je?"backgroundPattern":"background"),St=z||Ct(Fe,{tileSize:Re,terrain:B.style.map.terrain});je&&(ce.activeTexture.set(Ee.TEXTURE0),B.imageManager.bind(B.context));const gt=M.getCrossfadeParameters();for(const _t of St){const xt=Fe.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),ir=je?Su($,B,je,{tileID:_t,tileSize:Re},gt):Il($,W),rr=B.style.map.terrain&&B.style.map.terrain.getTerrainData(_t),Dt=Se.getMeshFromTileID(ce,_t.canonical,!1,!0,"raster");ht.draw(ce,Ee.TRIANGLES,Je,We,Oe,Gr.backCCW,ir,rr,xt,M.id,Dt.vertexBuffer,Dt.indexBuffer,Dt.segments)}}(n,0,f,p,v):o.ck(f)&&function(B,T,M,z){const{isRenderingGlobe:V}=z,W=B.context,$=M.implementation,X=B.style.projection,ce=B.transform,Ee=ce.getProjectionDataForCustomLayer(V),Se={farZ:ce.farZ,nearZ:ce.nearZ,fov:ce.fov*Math.PI/180,modelViewProjectionMatrix:ce.modelViewProjectionMatrix,projectionMatrix:ce.projectionMatrix,shaderData:{variantName:X.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${X.shaderPreludeCode.vertexSource}`,define:X.shaderDefine},defaultProjectionData:Ee},Fe=$.renderingMode?$.renderingMode:"2d";if(B.renderPass==="offscreen"){const Re=$.prerender;Re&&(B.setCustomLayerDefaults(),W.setColorMode(B.colorModeForRenderPass()),Re.call($,W.gl,Se),W.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),W.setColorMode(B.colorModeForRenderPass()),W.setStencilMode(Tr.disabled);const Re=Fe==="3d"?B.getDepthModeFor3D():B.getDepthModeForSublayer(0,Wr.ReadOnly);W.setDepthMode(Re),$.render(W.gl,Se),W.setDirty(),B.setBaseState(),W.bindFramebuffer.set(null)}}(n,0,f,v))}saveTileTexture(n){const a=this._tileTextures[n.size[0]];a?a.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const a=this._tileTextures[n];return a&&a.length>0?a.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const a=this.imageManager.getPattern(n.from.toString()),f=this.imageManager.getPattern(n.to.toString());return!a||!f}useProgram(n,a,f=!1,p=[]){this.cache=this.cache||{};const v=!!this.style.map.terrain,B=this.style.projection,T=f?Zs.projectionMercator:B.shaderPreludeCode,M=f?Ms:B.shaderDefine,z=n+(a?a.cacheKey:"")+`/${f?xl:B.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(v?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[z]||(this.cache[z]=new Zt(this.context,Zs[n],a,nA[n],this._showOverdrawInspector,v,T,M,p)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:a}=this.context.gl;return this.width!==n||this.height!==a}}function Ns(y,n){let a,f=!1,p=null,v=null;const B=()=>{p=null,f&&(y.apply(v,a),p=setTimeout(B,n),f=!1)};return(...T)=>(f=!0,v=this,a=T,p||B(),p)}class Zc{constructor(n){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let f;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(f=p)}),(f&&f[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(!this._isValidHash(a))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:f,pitch:+(a[4]||0)}),!0},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const f=a.join("/");let p=f;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${f}`);let v=window.location.hash.replace(p,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let B=window.location.href.replace(/(#.+)?$/,v);B=B.replace("&&","&"),window.history.replaceState(window.history.state,null,B)},this._updateHash=Ns(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const a=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,p=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,p),B=Math.round(a.lng*v)/v,T=Math.round(a.lat*v)/v,M=this._map.getBearing(),z=this._map.getPitch();let V="";if(V+=n?`/${B}/${T}/${f}`:`${f}/${T}/${B}`,(M||z)&&(V+="/"+Math.round(10*M)/10),z&&(V+=`/${Math.round(z)}`),this._hashName){const W=this._hashName;let $=!1;const X=window.location.hash.slice(1).split("&").map(ce=>{const Ee=ce.split("=")[0];return Ee===W?($=!0,`${Ee}=${V}`):ce}).filter(ce=>ce);return $||X.push(`${W}=${V}`),`#${X.join("&")}`}return`#${V}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new o.S(+n[2],+n[1])}catch{return!1}const a=+n[0],f=+(n[3]||0),p=+(n[4]||0);return a>=this._map.getMinZoom()&&a<=this._map.getMaxZoom()&&f>=-180&&f<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const JA={linearity:.3,easing:o.cl(0,0,.3,1)},AA=o.e({deceleration:2500,maxSpeed:1400},JA),Mu=o.e({deceleration:20,maxSpeed:1400},JA),ec=o.e({deceleration:1e3,maxSpeed:360},JA),ku=o.e({deceleration:1e3,maxSpeed:90},JA),Gd=o.e({deceleration:1e3,maxSpeed:360},JA);class Xc{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:P.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,a=P.now();for(;n.length>0&&a-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)a.zoom+=v.zoomDelta||0,a.bearing+=v.bearingDelta||0,a.pitch+=v.pitchDelta||0,a.roll+=v.rollDelta||0,v.panDelta&&a.pan._add(v.panDelta),v.around&&(a.around=v.around),v.pinchAround&&(a.pinchAround=v.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(a.pan.mag()){const v=Ma(a.pan.mag(),f,o.e({},AA,n||{})),B=a.pan.mult(v.amount/a.pan.mag()),T=this._map.cameraHelper.handlePanInertia(B,this._map.transform);p.center=T.easingCenter,p.offset=T.easingOffset,sl(p,v)}if(a.zoom){const v=Ma(a.zoom,f,Mu);p.zoom=this._map.transform.zoom+v.amount,sl(p,v)}if(a.bearing){const v=Ma(a.bearing,f,ec);p.bearing=this._map.transform.bearing+o.ag(v.amount,-179,179),sl(p,v)}if(a.pitch){const v=Ma(a.pitch,f,ku);p.pitch=this._map.transform.pitch+v.amount,sl(p,v)}if(a.roll){const v=Ma(a.roll,f,Gd);p.roll=this._map.transform.roll+o.ag(v.amount,-179,179),sl(p,v)}if(p.zoom||p.bearing){const v=a.pinchAround===void 0?a.around:a.pinchAround;p.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),o.e(p,{noMoveStart:!0})}}function sl(y,n){(!y.duration||y.duration<n.duration)&&(y.duration=n.duration,y.easing=n.easing)}function Ma(y,n,a){const{maxSpeed:f,linearity:p,deceleration:v}=a,B=o.ag(y*p/(n/1e3),-f,f),T=Math.abs(B)/(v*p);return{easing:a.easing,duration:1e3*T,amount:B*(T/2)}}class bs extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,a,f,p={}){f=f instanceof MouseEvent?f:new MouseEvent(n,f);const v=C.mousePos(a.getCanvas(),f),B=a.unproject(v);super(n,o.e({point:v,lngLat:B,originalEvent:f},p)),this._defaultPrevented=!1,this.target=a}}class aa extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,a,f){const p=n==="touchend"?f.changedTouches:f.touches,v=C.touchPos(a.getCanvasContainer(),p),B=v.map(M=>a.unproject(M)),T=v.reduce((M,z,V,W)=>M.add(z.div(W.length)),new o.P(0,0));super(n,{points:v,point:T,lngLats:B,lngLat:a.unproject(T),originalEvent:f}),this._defaultPrevented=!1}}class Uu extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,a,f){super(n,{originalEvent:f}),this._defaultPrevented=!1}}class $d{constructor(n,a){this._map=n,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Uu(n.type,this._map,n))}mousedown(n,a){return this._mousedownPos=a,this._firePreventable(new bs(n.type,this._map,n))}mouseup(n){this._map.fire(new bs(n.type,this._map,n))}click(n,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new bs(n.type,this._map,n))}dblclick(n){return this._firePreventable(new bs(n.type,this._map,n))}mouseover(n){this._map.fire(new bs(n.type,this._map,n))}mouseout(n){this._map.fire(new bs(n.type,this._map,n))}touchstart(n){return this._firePreventable(new aa(n.type,this._map,n))}touchmove(n){this._map.fire(new aa(n.type,this._map,n))}touchend(n){this._map.fire(new aa(n.type,this._map,n))}touchcancel(n){this._map.fire(new aa(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qd{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new bs(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new bs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new bs(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class tc{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(o.P.convert(n),this._map.terrain)}}class $h{constructor(n,a){this._map=n,this._tr=new tc(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,a){this.isEnabled()&&n.shiftKey&&n.button===0&&(C.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(n,a){if(!this._active)return;const f=a;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=f,this._box||(this._box=C.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const v=Math.min(p.x,f.x),B=Math.max(p.x,f.x),T=Math.min(p.y,f.y),M=Math.max(p.y,f.y);C.setTransform(this._box,`translate(${v}px,${T}px)`),this._box.style.width=B-v+"px",this._box.style.height=M-T+"px"}mouseupWindow(n,a){if(!this._active||n.button!==0)return;const f=this._startPos,p=a;if(this.reset(),C.suppressClick(),f.x!==p.x||f.y!==p.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:n})),{cameraAnimation:v=>v.fitScreenCoordinates(f,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,a){return this._map.fire(new o.l(n,{originalEvent:a}))}}function Qu(y,n){if(y.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${n.length}`);const a={};for(let f=0;f<y.length;f++)a[y[f].identifier]=n[f];return a}class Wd{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,a,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),f.length===this.numTouches&&(this.centroid=function(p){const v=new o.P(0,0);for(const B of p)v._add(B);return v.div(p.length)}(a),this.touches=Qu(f,a)))}touchmove(n,a,f){if(this.aborted||!this.centroid)return;const p=Qu(f,a);for(const v in this.touches){const B=p[v];(!B||B.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(n,a,f){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Yc{constructor(n){this.singleTap=new Wd(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,a,f){this.singleTap.touchstart(n,a,f)}touchmove(n,a,f){this.singleTap.touchmove(n,a,f)}touchend(n,a,f){const p=this.singleTap.touchend(n,a,f);if(p){const v=n.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(p)<30;if(v&&B||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class cA{constructor(n){this._tr=new tc(n),this._zoomIn=new Yc({numTouches:1,numTaps:2}),this._zoomOut=new Yc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,a,f){this._zoomIn.touchstart(n,a,f),this._zoomOut.touchstart(n,a,f)}touchmove(n,a,f){this._zoomIn.touchmove(n,a,f),this._zoomOut.touchmove(n,a,f)}touchend(n,a,f){const p=this._zoomIn.touchend(n,a,f),v=this._zoomOut.touchend(n,a,f),B=this._tr;return p?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:B.zoom+1,around:B.unproject(p)},{originalEvent:n})}):v?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:B.zoom-1,around:B.unproject(v)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rc{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const a=this._moveFunction(...n);if(a.bearingDelta||a.pitchDelta||a.rollDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(n,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(a)?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,a){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const p=Array.isArray(a)?a[0]:a;return!this._moved&&p.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(f,p))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&C.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Lo=0,Mo=2,b={[Lo]:1,[Mo]:2};class I{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const a=C.mouseButton(n);this._eventButton=a}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(a,f){const p=b[f];return a.buttons===void 0||(a.buttons&p)!==p}(n,this._eventButton)}isValidEndEvent(n){return C.mouseButton(n)===this._eventButton}}class O{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class q{constructor(n=new I({checkCorrectEvent:()=>!0}),a=new O){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=a}_executeRelevantHandler(n,a,f){return n instanceof MouseEvent?a(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?f(n):void 0}startMove(n){this._executeRelevantHandler(n,a=>this.mouseMoveStateManager.startMove(a),a=>this.oneFingerTouchMoveStateManager.startMove(a))}endMove(n){this._executeRelevantHandler(n,a=>this.mouseMoveStateManager.endMove(a),a=>this.oneFingerTouchMoveStateManager.endMove(a))}isValidStartEvent(n){return this._executeRelevantHandler(n,a=>this.mouseMoveStateManager.isValidStartEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidStartEvent(a))}isValidMoveEvent(n){return this._executeRelevantHandler(n,a=>this.mouseMoveStateManager.isValidMoveEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(a))}isValidEndEvent(n){return this._executeRelevantHandler(n,a=>this.mouseMoveStateManager.isValidEndEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidEndEvent(a))}}const ae=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=n=>{n.preventDefault()}};class me{constructor(n,a){this._clickTolerance=n.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,a,f){return this._calculateTransform(n,a,f)}touchmove(n,a,f){if(this._active){if(!this._shouldBePrevented(f.length))return n.preventDefault(),this._calculateTransform(n,a,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,a,f){this._calculateTransform(n,a,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,a,f){f.length>0&&(this._active=!0);const p=Qu(f,a),v=new o.P(0,0),B=new o.P(0,0);let T=0;for(const z in p){const V=p[z],W=this._touches[z];W&&(v._add(V),B._add(V.sub(W)),T++,p[z]=V)}if(this._touches=p,this._shouldBePrevented(T)||!B.mag())return;const M=B.div(T);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(T),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ge{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,a,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([a[0],a[1]]))}touchmove(n,a,f){if(!this._firstTwoTouches)return;n.preventDefault();const[p,v]=this._firstTwoTouches,B=ve(f,a,p),T=ve(f,a,v);if(!B||!T)return;const M=this._aroundCenter?null:B.add(T).div(2);return this._move([B,T],M,n)}touchend(n,a,f){if(!this._firstTwoTouches)return;const[p,v]=this._firstTwoTouches,B=ve(f,a,p),T=ve(f,a,v);B&&T||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ve(y,n,a){for(let f=0;f<y.length;f++)if(y[f].identifier===a)return n[f]}function we(y,n){return Math.log(y/n)/Math.LN2}class ke extends ge{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,a){const f=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(we(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:we(this._distance,f),pinchAround:a}}}function Ne(y,n){return 180*y.angleWith(n)/Math.PI}class Bt extends ge{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,a,f){const p=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ne(this._vector,p),pinchAround:a}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const a=25/(Math.PI*this._minDiameter)*360,f=Ne(n,this._startVector);return Math.abs(f)<a}}function wt(y){return Math.abs(y.y)>Math.abs(y.x)}class ft extends ge{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,a,f){super.touchstart(n,a,f),this._currentTouchCount=f.length}_start(n){this._lastPoints=n,wt(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,a,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=n[0].sub(this._lastPoints[0]),v=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,v,f.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(p.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(n,a,f){if(this._valid!==void 0)return this._valid;const p=n.mag()>=2,v=a.mag()>=2;if(!p&&!v)return;if(!p||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const B=n.y>0==a.y>0;return wt(n)&&wt(a)&&B}}const Ot={panStep:100,bearingStep:15,pitchStep:10};class Pt{constructor(n){this._tr=new tc(n);const a=Ot;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let a=0,f=0,p=0,v=0,B=0;switch(n.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:n.shiftKey?f=-1:(n.preventDefault(),v=-1);break;case 39:n.shiftKey?f=1:(n.preventDefault(),v=1);break;case 38:n.shiftKey?p=1:(n.preventDefault(),B=-1);break;case 40:n.shiftKey?p=-1:(n.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(f=0,p=0),{cameraAnimation:T=>{const M=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:ut,zoom:a?Math.round(M.zoom)+a*(n.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+p*this._pitchStep,offset:[-v*this._panStep,-B*this._panStep],center:M.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ut(y){return y*(2-y)}const Ye=4.000244140625,Nt=1/450;class Wt{constructor(n,a){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=n,this._tr=new tc(n),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Nt}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let a=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const f=P.now(),p=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,a!==0&&a%Ye==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(p*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),n.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=n,this._delta-=a,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=C.mousePos(this._map.getCanvas(),n),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(o.S.convert(f.center)):a,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const T=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=T),typeof this._targetZoom=="number"&&(this._targetZoom+=T)}if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Ye?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&M!==0&&(M=1/M);const z=typeof this._targetZoom!="number"?n.scale:o.ae(this._targetZoom);this._targetZoom=n.getConstrained(n.getCameraLngLat(),o.aj(z*M)).zoom,this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,f=this._startZoom,p=this._easing;let v,B=!1;if(this._type==="wheel"&&f&&p){const T=P.now()-this._lastWheelEventTime,M=Math.min((T+5)/200,1),z=p(M);v=o.C.number(f,a,z),M<1?this._frameId||(this._frameId=!0):B=!0}else v=a,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=v,{noInertia:!0,needsRenderFrame:!B,zoomDelta:v-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let a=o.cn;if(this._prevEase){const f=this._prevEase,p=(P.now()-f.start)/f.duration,v=f.easing(p+.01)-f.easing(p),B=.27/Math.sqrt(v*v+1e-4)*.01,T=Math.sqrt(.0729-B*B);a=o.cl(B,T,.25,1)}return this._prevEase={start:P.now(),duration:n,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class zt{constructor(n,a){this._clickZoom=n,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class xr{constructor(n){this._tr=new tc(n),this.reset()}reset(){this._active=!1}dblclick(n,a){return n.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dr{constructor(){this._tap=new Yc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,a,f){if(!this._swipePoint)if(this._tapTime){const p=a[0],v=n.timeStamp-this._tapTime<500,B=this._tapPoint.dist(p)<30;v&&B?f.length>0&&(this._swipePoint=p,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(n,a,f)}touchmove(n,a,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const p=a[0],v=p.y-this._swipePoint.y;return this._swipePoint=p,n.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(n,a,f)}touchend(n,a,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const p=this._tap.touchend(n,a,f);p&&(this._tapTime=n.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Or{constructor(n,a,f){this._el=n,this._mousePan=a,this._touchPan=f}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fr{constructor(n,a,f,p){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=a,this._mousePitch=f,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Cn{constructor(n,a,f,p){this._el=n,this._touchZoom=a,this._touchRotate=f,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ln{constructor(n,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=C.create("div","maplibregl-cooperative-gesture-screen",n);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=a,this._container.appendChild(p);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=f,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(C.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,a){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:n,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const pn=y=>y.zoom||y.drag||y.roll||y.pitch||y.rotate;class vn extends o.l{}function Qn(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta||y.rollDelta}class wn{constructor(n,a){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,v)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const B=p.type==="renderFrame"?void 0:p,T={needsRenderFrame:!1},M={},z={};for(const{handlerName:$,handler:X,allowed:ce}of this._handlers){if(!X.isEnabled())continue;let Ee;if(this._blockedByActive(z,ce,$))X.reset();else if(X[v||p.type]){if(o.co(p,v||p.type)){const Se=C.mousePos(this._map.getCanvas(),p);Ee=X[v||p.type](p,Se)}else if(o.cp(p,v||p.type)){const Se=this._getMapTouches(p.touches),Fe=C.touchPos(this._map.getCanvas(),Se);Ee=X[v||p.type](p,Fe,Se)}else o.cq(v||p.type)||(Ee=X[v||p.type](p));this.mergeHandlerResult(T,M,Ee,$,B),Ee&&Ee.needsRenderFrame&&this._triggerRenderFrame()}(Ee||X.isActive())&&(z[$]=X)}const V={};for(const $ in this._previousActiveHandlers)z[$]||(V[$]=B);this._previousActiveHandlers=z,(Object.keys(V).length||Qn(T))&&(this._changes.push([T,M,V]),this._triggerRenderFrame()),(Object.keys(z).length||Qn(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=T;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xc(n),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,v,B]of this._listeners)C.addEventListener(p,v,p===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[n,a,f]of this._listeners)C.removeEventListener(n,a,n===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(n){const a=this._map,f=a.getCanvasContainer();this._add("mapEvent",new $d(a,n));const p=a.boxZoom=new $h(a,n);this._add("boxZoom",p),n.interactive&&n.boxZoom&&p.enable();const v=a.cooperativeGestures=new Ln(a,n.cooperativeGestures);this._add("cooperativeGestures",v),n.cooperativeGestures&&v.enable();const B=new cA(a),T=new xr(a);a.doubleClickZoom=new zt(T,B),this._add("tapZoom",B),this._add("clickZoom",T),n.interactive&&n.doubleClickZoom&&a.doubleClickZoom.enable();const M=new dr;this._add("tapDragZoom",M);const z=a.touchPitch=new ft(a);this._add("touchPitch",z),n.interactive&&n.touchPitch&&a.touchPitch.enable(n.touchPitch);const V=()=>a.project(a.getCenter()),W=function({enable:De,clickTolerance:We,aroundCenter:Je=!0,minPixelCenterThreshold:Oe=100,rotateDegreesPerPixelMoved:ht=.8},St){const gt=new I({checkCorrectEvent:_t=>C.mouseButton(_t)===0&&_t.ctrlKey||C.mouseButton(_t)===2&&!_t.ctrlKey});return new rc({clickTolerance:We,move:(_t,xt)=>{const ir=St();if(Je&&Math.abs(ir.y-_t.y)>Oe)return{bearingDelta:o.cm(new o.P(_t.x,xt.y),xt,ir)};let rr=(xt.x-_t.x)*ht;return Je&&xt.y<ir.y&&(rr=-rr),{bearingDelta:rr}},moveStateManager:gt,enable:De,assignEvents:ae})}(n,V),$=function({enable:De,clickTolerance:We,pitchDegreesPerPixelMoved:Je=-.5}){const Oe=new I({checkCorrectEvent:ht=>C.mouseButton(ht)===0&&ht.ctrlKey||C.mouseButton(ht)===2});return new rc({clickTolerance:We,move:(ht,St)=>({pitchDelta:(St.y-ht.y)*Je}),moveStateManager:Oe,enable:De,assignEvents:ae})}(n),X=function({enable:De,clickTolerance:We,rollDegreesPerPixelMoved:Je=.3},Oe){const ht=new I({checkCorrectEvent:St=>C.mouseButton(St)===2&&St.ctrlKey});return new rc({clickTolerance:We,move:(St,gt)=>{const _t=Oe();let xt=(gt.x-St.x)*Je;return gt.y<_t.y&&(xt=-xt),{rollDelta:xt}},moveStateManager:ht,enable:De,assignEvents:ae})}(n,V);a.dragRotate=new fr(n,W,$,X),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",$,["mouseRotate","mouseRoll"]),this._add("mouseRoll",X,["mousePitch"]),n.interactive&&n.dragRotate&&a.dragRotate.enable();const ce=function({enable:De,clickTolerance:We}){const Je=new I({checkCorrectEvent:Oe=>C.mouseButton(Oe)===0&&!Oe.ctrlKey});return new rc({clickTolerance:We,move:(Oe,ht)=>({around:ht,panDelta:ht.sub(Oe)}),activateOnStart:!0,moveStateManager:Je,enable:De,assignEvents:ae})}(n),Ee=new me(n,a);a.dragPan=new Or(f,ce,Ee),this._add("mousePan",ce),this._add("touchPan",Ee,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&a.dragPan.enable(n.dragPan);const Se=new Bt,Fe=new ke;a.touchZoomRotate=new Cn(f,Fe,Se,M),this._add("touchRotate",Se,["touchPan","touchZoom"]),this._add("touchZoom",Fe,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&a.touchZoomRotate.enable(n.touchZoomRotate);const Re=a.scrollZoom=new Wt(a,()=>this._triggerRenderFrame());this._add("scrollZoom",Re,["mousePan"]),n.interactive&&n.scrollZoom&&a.scrollZoom.enable(n.scrollZoom);const je=a.keyboard=new Pt(a);this._add("keyboard",je),n.interactive&&n.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new qd(a))}_add(n,a,f){this._handlers.push({handlerName:n,handler:a,allowed:f}),this._handlersById[n]=a}stop(n){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!pn(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,a,f){for(const p in n)if(p!==f&&(!a||a.indexOf(p)<0))return!0;return!1}_getMapTouches(n){const a=[];for(const f of n)this._el.contains(f.target)&&a.push(f);return a}mergeHandlerResult(n,a,f,p,v){if(!f)return;o.e(n,f);const B={handlerName:p,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(a.zoom=B),f.panDelta!==void 0&&(a.drag=B),f.rollDelta!==void 0&&(a.roll=B),f.pitchDelta!==void 0&&(a.pitch=B),f.bearingDelta!==void 0&&(a.rotate=B)}_applyChanges(){const n={},a={},f={};for(const[p,v,B]of this._changes)p.panDelta&&(n.panDelta=(n.panDelta||new o.P(0,0))._add(p.panDelta)),p.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(n.rollDelta=(n.rollDelta||0)+p.rollDelta),p.around!==void 0&&(n.around=p.around),p.pinchAround!==void 0&&(n.pinchAround=p.pinchAround),p.noInertia&&(n.noInertia=p.noInertia),o.e(a,v),o.e(f,B);this._updateMapTransform(n,a,f),this._changes=[]}_updateMapTransform(n,a,f){const p=this._map,v=p._getTransformForUpdate(),B=p.terrain;if(!(Qn(n)||B&&this._terrainMovement))return this._fireEvents(a,f,!0);p._stop(!0);let{panDelta:T,zoomDelta:M,bearingDelta:z,pitchDelta:V,rollDelta:W,around:$,pinchAround:X}=n;X!==void 0&&($=X),$=$||p.transform.centerPoint,B&&!v.isPointOnMapSurface($)&&($=v.centerPoint);const ce={panDelta:T,zoomDelta:M,rollDelta:W,pitchDelta:V,bearingDelta:z,around:$};this._map.cameraHelper.useGlobeControls&&!v.isPointOnMapSurface($)&&($=v.centerPoint);const Ee=$.distSqr(v.centerPoint)<.01?v.center:v.screenPointToLocation(T?$.sub(T):$);B?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ce,v),this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?v.setCenter(v.screenPointToLocation(v.centerPoint.sub(T))):this._map.cameraHelper.handleMapControlsPan(ce,v,Ee):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ce,v,Ee))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ce,v),this._map.cameraHelper.handleMapControlsPan(ce,v,Ee)),p._applyUpdatedTransform(v),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(a,f,!0)}_fireEvents(n,a,f){const p=pn(this._eventsInProgress),v=pn(n),B={};for(const W in n){const{originalEvent:$}=n[W];this._eventsInProgress[W]||(B[`${W}start`]=$),this._eventsInProgress[W]=n[W]}!p&&v&&this._fireEvent("movestart",v.originalEvent);for(const W in B)this._fireEvent(W,B[W]);v&&this._fireEvent("move",v.originalEvent);for(const W in n){const{originalEvent:$}=n[W];this._fireEvent(W,$)}const T={};let M;for(const W in this._eventsInProgress){const{handlerName:$,originalEvent:X}=this._eventsInProgress[W];this._handlersById[$].isActive()||(delete this._eventsInProgress[W],M=a[$]||X,T[`${W}end`]=M)}for(const W in T)this._fireEvent(W,T[W]);const z=pn(this._eventsInProgress),V=(p||v)&&!z;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const W=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&W.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(W)}if(f&&V){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!W||!W.essential&&P.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:M})),$(this._map.getBearing())&&this._map.resetNorth()):($(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(n,a){this._map.fire(new o.l(n,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new vn("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Er extends o.E{constructor(n,a,f){super(),this._renderFrameCallback=()=>{const p=Math.min((P.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=f.bearingSnap,this.cameraHelper=a,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(n,a){n.apply(this.transform),this.transform=n,this.cameraHelper=a}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(n,a){return this.jumpTo({center:n},a)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,a){return this.jumpTo({elevation:n},a),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,a,f){return n=o.P.convert(n).mult(-1),this.panTo(this.transform.center,o.e({offset:n},a),f)}panTo(n,a,f){return this.easeTo(o.e({center:n},a),f)}getZoom(){return this.transform.zoom}setZoom(n,a){return this.jumpTo({zoom:n},a),this}zoomTo(n,a,f){return this.easeTo(o.e({zoom:n},a),f)}zoomIn(n,a){return this.zoomTo(this.getZoom()+1,n,a),this}zoomOut(n,a){return this.zoomTo(this.getZoom()-1,n,a),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,a){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new o.l("movestart",a)).fire(new o.l("move",a)).fire(new o.l("moveend",a))),this}getBearing(){return this.transform.bearing}setBearing(n,a){return this.jumpTo({bearing:n},a),this}getPadding(){return this.transform.padding}setPadding(n,a){return this.jumpTo({padding:n},a),this}rotateTo(n,a,f){return this.easeTo(o.e({bearing:n},a),f)}resetNorth(n,a){return this.rotateTo(0,o.e({duration:1e3},n),a),this}resetNorthPitch(n,a){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},n),a),this}snapToNorth(n,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,a):this}getPitch(){return this.transform.pitch}setPitch(n,a){return this.jumpTo({pitch:n},a),this}getRoll(){return this.transform.roll}setRoll(n,a){return this.jumpTo({roll:n},a),this}cameraForBounds(n,a){n=jt.convert(n).adjustAntiMeridian();const f=a&&a.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),f,a)}_cameraForBoxAndBearing(n,a,f,p){const v={top:0,bottom:0,right:0,left:0};if(typeof(p=o.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const z=p.padding;p.padding={top:z,bottom:z,right:z,left:z}}const B=o.e(v,p.padding);p.padding=B;const T=this.transform,M=new jt(n,a);return this.cameraHelper.cameraForBoxAndBearing(p,B,M,f,T)}fitBounds(n,a,f){return this._fitInternal(this.cameraForBounds(n,a),a,f)}fitScreenCoordinates(n,a,f,p,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(n)),this.transform.screenPointToLocation(o.P.convert(a)),f,p),p,v)}_fitInternal(n,a,f){return n?(delete(a=o.e(n,a)).padding,a.linear?this.easeTo(a,f):this.flyTo(a,f)):this}jumpTo(n,a){this.stop();const f=this._getTransformForUpdate();let p=!1,v=!1,B=!1;const T=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,n);const M=f.zoom!==T;return"elevation"in n&&f.elevation!==+n.elevation&&f.setElevation(+n.elevation),"bearing"in n&&f.bearing!==+n.bearing&&(p=!0,f.setBearing(+n.bearing)),"pitch"in n&&f.pitch!==+n.pitch&&(v=!0,f.setPitch(+n.pitch)),"roll"in n&&f.roll!==+n.roll&&(B=!0,f.setRoll(+n.roll)),n.padding==null||f.isPaddingEqual(n.padding)||f.setPadding(n.padding),this._applyUpdatedTransform(f),this.fire(new o.l("movestart",a)).fire(new o.l("move",a)),M&&this.fire(new o.l("zoomstart",a)).fire(new o.l("zoom",a)).fire(new o.l("zoomend",a)),p&&this.fire(new o.l("rotatestart",a)).fire(new o.l("rotate",a)).fire(new o.l("rotateend",a)),v&&this.fire(new o.l("pitchstart",a)).fire(new o.l("pitch",a)).fire(new o.l("pitchend",a)),B&&this.fire(new o.l("rollstart",a)).fire(new o.l("roll",a)).fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}calculateCameraOptionsFromTo(n,a,f,p=0){const v=o.a0.fromLngLat(n,a),B=o.a0.fromLngLat(f,p),T=B.x-v.x,M=B.y-v.y,z=B.z-v.z,V=Math.hypot(T,M,z);if(V===0)throw new Error("Can't calculate camera options with same From and To");const W=Math.hypot(T,M),$=o.aj(this.transform.cameraToCenterDistance/V/this.transform.tileSize),X=180*Math.atan2(T,-M)/Math.PI;let ce=180*Math.acos(W/V)/Math.PI;return ce=z<0?90-ce:90+ce,{center:B.toLngLat(),elevation:p,zoom:$,pitch:ce,bearing:X}}calculateCameraOptionsFromCameraLngLatAltRotation(n,a,f,p,v){const B=this.transform.calculateCenterFromCameraLngLatAlt(n,a,f,p);return{center:B.center,elevation:B.elevation,zoom:B.zoom,bearing:f,pitch:p,roll:v}}easeTo(n,a){this._stop(!1,n.easeId),((n=o.e({offset:[0,0],duration:500,easing:o.cn},n)).animate===!1||!n.essential&&P.prefersReducedMotion)&&(n.duration=0);const f=this._getTransformForUpdate(),p=this.getBearing(),v=f.pitch,B=f.roll,T="bearing"in n?this._normalizeBearing(n.bearing,p):p,M="pitch"in n?+n.pitch:v,z="roll"in n?this._normalizeBearing(n.roll,B):B,V="padding"in n?n.padding:f.padding,W=o.P.convert(n.offset);let $,X;n.around&&($=o.S.convert(n.around),X=f.locationToScreenPoint($));const ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ee=this.cameraHelper.handleEaseTo(f,{bearing:T,pitch:M,roll:z,padding:V,around:$,aroundPoint:X,offsetAsPoint:W,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||p!==T,this._pitching=this._pitching||M!==v,this._rolling=this._rolling||z!==B,this._padding=!f.isPaddingEqual(V),this._zooming=this._zooming||Ee.isZooming,this._easeId=n.easeId,this._prepareEase(a,n.noMoveStart,ce),this.terrain&&this._prepareElevation(Ee.elevationCenter),this._ease(Se=>{Ee.easeFunc(Se),this.terrain&&!n.freezeElevation&&this._updateElevation(Se),this._applyUpdatedTransform(f),this._fireMoveEvents(a)},Se=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(a,Se)},n),this}_prepareEase(n,a,f={}){this._moving=!0,a||f.moving||this.fire(new o.l("movestart",n)),this._zooming&&!f.zooming&&this.fire(new o.l("zoomstart",n)),this._rotating&&!f.rotating&&this.fire(new o.l("rotatestart",n)),this._pitching&&!f.pitching&&this.fire(new o.l("pitchstart",n)),this._rolling&&!f.rolling&&this.fire(new o.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&a!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(f-(a-(f*n+this._elevationStart))/(1-n)),this._elevationTarget=a}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const a=n.getCameraLngLat(),f=n.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(a,n.zoom):0;if(f<p){const v=this.calculateCameraOptionsFromTo(a,p,n.center,n.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(n){const a=[];if(a.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&a.push(p=>this.transformCameraUpdate(p)),!a.length)return;const f=n.clone();for(const p of a){const v=f.clone(),{center:B,zoom:T,roll:M,pitch:z,bearing:V,elevation:W}=p(v);B&&v.setCenter(B),W!==void 0&&v.setElevation(W),T!==void 0&&v.setZoom(T),M!==void 0&&v.setRoll(M),z!==void 0&&v.setPitch(z),V!==void 0&&v.setBearing(V),f.apply(v)}this.transform.apply(f)}_fireMoveEvents(n){this.fire(new o.l("move",n)),this._zooming&&this.fire(new o.l("zoom",n)),this._rotating&&this.fire(new o.l("rotate",n)),this._pitching&&this.fire(new o.l("pitch",n)),this._rolling&&this.fire(new o.l("roll",n))}_afterEase(n,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const f=this._zooming,p=this._rotating,v=this._pitching,B=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new o.l("zoomend",n)),p&&this.fire(new o.l("rotateend",n)),v&&this.fire(new o.l("pitchend",n)),B&&this.fire(new o.l("rollend",n)),this.fire(new o.l("moveend",n))}flyTo(n,a){if(!n.essential&&P.prefersReducedMotion){const xt=o.Q(n,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(xt,a)}this.stop(),n=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cn},n);const f=this._getTransformForUpdate(),p=f.bearing,v=f.pitch,B=f.roll,T=f.padding,M="bearing"in n?this._normalizeBearing(n.bearing,p):p,z="pitch"in n?+n.pitch:v,V="roll"in n?this._normalizeBearing(n.roll,B):B,W="padding"in n?n.padding:f.padding,$=o.P.convert(n.offset);let X=f.centerPoint.add($);const ce=f.screenPointToLocation(X),Ee=this.cameraHelper.handleFlyTo(f,{bearing:M,pitch:z,roll:V,padding:W,locationAtOffset:ce,offsetAsPoint:$,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let Se=n.curve;const Fe=Math.max(f.width,f.height),Re=Fe/Ee.scaleOfZoom,je=Ee.pixelPathLength;typeof Ee.scaleOfMinZoom=="number"&&(Se=Math.sqrt(Fe/Ee.scaleOfMinZoom/je*2));const De=Se*Se;function We(xt){const ir=(Re*Re-Fe*Fe+(xt?-1:1)*De*De*je*je)/(2*(xt?Re:Fe)*De*je);return Math.log(Math.sqrt(ir*ir+1)-ir)}function Je(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function Oe(xt){return(Math.exp(xt)+Math.exp(-xt))/2}const ht=We(!1);let St=function(xt){return Oe(ht)/Oe(ht+Se*xt)},gt=function(xt){return Fe*((Oe(ht)*(Je(ir=ht+Se*xt)/Oe(ir))-Je(ht))/De)/je;var ir},_t=(We(!0)-ht)/Se;if(Math.abs(je)<2e-6||!isFinite(_t)){if(Math.abs(Fe-Re)<1e-6)return this.easeTo(n,a);const xt=Re<Fe?-1:1;_t=Math.abs(Math.log(Re/Fe))/Se,gt=()=>0,St=ir=>Math.exp(xt*Se*ir)}return n.duration="duration"in n?+n.duration:1e3*_t/("screenSpeed"in n?+n.screenSpeed/Se:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=p!==M,this._pitching=z!==v,this._rolling=V!==B,this._padding=!f.isPaddingEqual(W),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(Ee.targetCenter),this._ease(xt=>{const ir=xt*_t,rr=1/St(ir),Dt=gt(ir);this._rotating&&f.setBearing(o.C.number(p,M,xt)),this._pitching&&f.setPitch(o.C.number(v,z,xt)),this._rolling&&f.setRoll(o.C.number(B,V,xt)),this._padding&&(f.interpolatePadding(T,W,xt),X=f.centerPoint.add($)),Ee.easeFunc(xt,rr,Dt,X),this.terrain&&!n.freezeElevation&&this._updateElevation(xt),this._applyUpdatedTransform(f),this._fireMoveEvents(a)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,a){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,a)}return n||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(n,a,f){f.animate===!1||f.duration===0?(n(1),a()):(this._easeStart=P.now(),this._easeOptions=f,this._onEaseFrame=n,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,a){n=o.aN(n,-180,180);const f=Math.abs(n-a);return Math.abs(n-360-a)<f&&(n-=360),Math.abs(n+360-a)<f&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(n),this.transform.tileZoom):null}}const ni={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class us{constructor(n=ni){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,a){const f=this._map._getUIString(`AttributionControl.${a}`);n.title=f,n.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const a=this._map.style.sourceCaches;for(const p in a){const v=a[p];if(v.used||v.usedForTerrain){const B=v.getSource();B.attribution&&n.indexOf(B.attribution)<0&&n.push(B.attribution)}}n=n.filter(p=>String(p).trim()),n.sort((p,v)=>p.length-v.length),n=n.filter((p,v)=>{for(let B=v+1;B<n.length;B++)if(n[B].indexOf(p)>=0)return!1;return!0});const f=n.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,n.length?(this._innerContainer.innerHTML=C.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class yi{constructor(n={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const f=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=C.create("div","maplibregl-ctrl");const a=C.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ds{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const a=++this._id;return this._queue.push({callback:n,id:a,cancelled:!1}),a}remove(n){const a=this._currentlyRunning,f=a?this._queue.concat(a):this._queue;for(const p of f)if(p.id===n)return void(p.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const f of a)if(!f.cancelled&&(f.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Mn=o.aI([{name:"a_pos3d",type:"Int16",components:3}]);class po extends o.E{constructor(n){super(),this._lastTilesetChange=P.now(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,a){this.sourceCache.update(n,a),this._renderableTilesKeys=[];const f={};for(const p of Ct(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))f[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),o.bX(p.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[p.key]=new un(p,this.tileSize),this._lastTilesetChange=P.now());for(const p in this._tiles)f[p]||delete this._tiles[p]}freeRtt(n){for(const a in this._tiles){const f=this._tiles[a];(!n||f.tileID.equals(n)||f.tileID.isChildOf(n)||n.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,a){return a?this._getTerrainCoordsForTileRanges(n,a):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const a={};for(const f of this._renderableTilesKeys){const p=this._tiles[f].tileID,v=n.clone(),B=o.b9();if(p.canonical.equals(n.canonical))o.bX(B,0,o.$,o.$,0,0,1);else if(p.canonical.isChildOf(n.canonical)){const T=p.canonical.z-n.canonical.z,M=p.canonical.x-(p.canonical.x>>T<<T),z=p.canonical.y-(p.canonical.y>>T<<T),V=o.$>>T;o.bX(B,0,V,V,0,0,1),o.M(B,B,[-M*V,-z*V,0])}else{if(!n.canonical.isChildOf(p.canonical))continue;{const T=n.canonical.z-p.canonical.z,M=n.canonical.x-(n.canonical.x>>T<<T),z=n.canonical.y-(n.canonical.y>>T<<T),V=o.$>>T;o.bX(B,0,o.$,o.$,0,0,1),o.M(B,B,[M*V,z*V,0]),o.N(B,B,[1/2**T,1/2**T,0])}}v.terrainRttPosMatrix32f=new Float32Array(B),a[f]=v}return a}_getTerrainCoordsForTileRanges(n,a){const f={};for(const p of this._renderableTilesKeys){const v=this._tiles[p].tileID;if(!this._isWithinTileRanges(v,a))continue;const B=n.clone(),T=o.b9();if(v.canonical.z===n.canonical.z){const M=n.canonical.x-v.canonical.x,z=n.canonical.y-v.canonical.y;o.bX(T,0,o.$,o.$,0,0,1),o.M(T,T,[M*o.$,z*o.$,0])}else if(v.canonical.z>n.canonical.z){const M=v.canonical.z-n.canonical.z,z=v.canonical.x-(v.canonical.x>>M<<M),V=v.canonical.y-(v.canonical.y>>M<<M),W=n.canonical.x-(v.canonical.x>>M),$=n.canonical.y-(v.canonical.y>>M),X=o.$>>M;o.bX(T,0,X,X,0,0,1),o.M(T,T,[-z*X+W*o.$,-V*X+$*o.$,0])}else{const M=n.canonical.z-v.canonical.z,z=n.canonical.x-(n.canonical.x>>M<<M),V=n.canonical.y-(n.canonical.y>>M<<M),W=(n.canonical.x>>M)-v.canonical.x,$=(n.canonical.y>>M)-v.canonical.y,X=o.$<<M;o.bX(T,0,X,X,0,0,1),o.M(T,T,[z*o.$+W*X,V*o.$+$*X,0])}B.terrainRttPosMatrix32f=new Float32Array(T),f[p]=B}return f}getSourceTile(n,a){const f=this.sourceCache._source;let p=n.overscaledZ-this.deltaZoom;if(p>f.maxzoom&&(p=f.maxzoom),p<f.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(p).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!v||!v.dem)&&a)for(;p>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(n.scaledTo(p--).key);return v}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,a){return a[n.canonical.z]&&n.canonical.x>=a[n.canonical.z].minTileX&&n.canonical.x<=a[n.canonical.z].maxTileX&&n.canonical.y>=a[n.canonical.z].minTileY&&n.canonical.y<=a[n.canonical.z].maxTileY}}class vi{constructor(n,a,f){this._meshCache={},this.painter=n,this.sourceCache=new po(a),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,a,f,p=o.$){var v;if(!(a>=0&&a<p&&f>=0&&f<p))return 0;const B=this.getTerrainData(n),T=(v=B.tile)===null||v===void 0?void 0:v.dem;if(!T)return 0;const M=o.cr([],[a/p*o.$,f/p*o.$],B.u_terrain_matrix),z=[M[0]*T.dim,M[1]*T.dim],V=Math.floor(z[0]),W=Math.floor(z[1]),$=z[0]-V,X=z[1]-W;return T.get(V,W)*(1-$)*(1-X)+T.get(V+1,W)*$*(1-X)+T.get(V,W+1)*(1-$)*X+T.get(V+1,W+1)*$*X}getElevationForLngLatZoom(n,a){if(!o.cs(a,n.wrap()))return 0;const{tileID:f,mercatorX:p,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(n,a);return this.getElevation(f,p%o.$,v%o.$,o.$)}getElevation(n,a,f,p=o.$){return this.getDEMElevation(n,a,f,p)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const p=this.painter.context,v=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(p,v,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(p,new o.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.af([])}const a=this.sourceCache.getSourceTile(n,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const p=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new o.T(p,a.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),a.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const f=a&&a+a.tileID.key+n.key;if(f&&!this._demMatrixCache[f]){const p=this.sourceCache.sourceCache._source.maxzoom;let v=n.canonical.z-a.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=p?v=n.canonical.z-p:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const B=n.canonical.x-(n.canonical.x>>v<<v),T=n.canonical.y-(n.canonical.y>>v<<v),M=o.ct(new Float64Array(16),[1/(o.$<<v),1/(o.$<<v),0]);o.M(M,M,[B*o.$,T*o.$,0]),this._demMatrixCache[n.key]={matrix:M,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(n){const a=this.painter,f=a.width/devicePixelRatio,p=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(a.context,{width:f,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(a.context,{width:f,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(f,p,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,f,p))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,B=0;v<this._coordsTextureSize;v++)for(let T=0;T<this._coordsTextureSize;T++,B+=4)a[B+0]=255&T,a[B+1]=255&v,a[B+2]=T>>8<<4|v>>8,a[B+3]=0;const f=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),p=new o.T(n,f,n.gl.RGBA,{premultiply:!1});return p.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),f=this.painter.context,p=f.gl,v=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),B=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(v,T-B-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),f.bindFramebuffer.set(null);const M=a[0]+(a[2]>>4<<8),z=a[1]+((15&a[2])<<8),V=this.coordsIndex[255-a[3]],W=V&&this.sourceCache.getTileByID(V);if(!W)return null;const $=this._coordsTextureSize,X=(1<<W.tileID.canonical.z)*$;return new o.a0((W.tileID.canonical.x*$+M)/X+W.tileID.wrap,(W.tileID.canonical.y*$+z)/X,this.getElevation(W.tileID,M,z,$))}depthAtPoint(n){const a=new Uint8Array(4),f=this.painter.context,p=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),f.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(n){var a;const f=((a=this.painter.style.projection)===null||a===void 0?void 0:a.transitionState)>0,p=f&&n.canonical.y===0,v=f&&n.canonical.y===(1<<n.canonical.z)-1,B=`m_${p?"n":""}_${v?"s":""}`;if(this._meshCache[B])return this._meshCache[B];const T=this.painter.context,M=new o.cu,z=new o.aM,V=this.meshSize,W=o.$/V,$=V*V;for(let Oe=0;Oe<=V;Oe++)for(let ht=0;ht<=V;ht++)M.emplaceBack(ht*W,Oe*W,0);for(let Oe=0;Oe<$;Oe+=V+1)for(let ht=0;ht<V;ht++)z.emplaceBack(ht+Oe,V+ht+Oe+1,V+ht+Oe+2),z.emplaceBack(ht+Oe,V+ht+Oe+2,ht+Oe+1);const X=M.length,ce=X+(V+1),Ee=(V+1)*V,Se=p?o.bg:0,Fe=p?0:1,Re=v?o.bh:o.$,je=v?0:1;for(let Oe=0;Oe<=V;Oe++)M.emplaceBack(Oe*W,Se,Fe);for(let Oe=0;Oe<=V;Oe++)M.emplaceBack(Oe*W,Re,je);for(let Oe=0;Oe<V;Oe++)z.emplaceBack(Ee+Oe,ce+Oe,ce+Oe+1),z.emplaceBack(Ee+Oe,ce+Oe+1,Ee+Oe+1),z.emplaceBack(0+Oe,X+Oe+1,X+Oe),z.emplaceBack(0+Oe,0+Oe+1,X+Oe+1);const De=M.length,We=De+2*(V+1);for(const Oe of[0,1])for(let ht=0;ht<=V;ht++)for(const St of[0,1])M.emplaceBack(Oe*o.$,ht*W,St);for(let Oe=0;Oe<2*V;Oe+=2)z.emplaceBack(De+Oe,De+Oe+1,De+Oe+3),z.emplaceBack(De+Oe,De+Oe+3,De+Oe+2),z.emplaceBack(We+Oe,We+Oe+3,We+Oe+1),z.emplaceBack(We+Oe,We+Oe+2,We+Oe+3);const Je=new Jo(T.createVertexBuffer(M,Mn.members),T.createIndexBuffer(z),o.aL.simpleSegment(0,0,M.length,z.length));return this._meshCache[B]=Je,Je}getMeshFrameDelta(n){return 2*Math.PI*o.bt/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,a){var f;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(n,a);return(f=this.getMinMaxElevation(p).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(n){const a=this.getTerrainData(n).tile,f={minElevation:null,maxElevation:null};return a&&a.dem&&(f.minElevation=a.dem.min*this.exaggeration,f.maxElevation=a.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(n,a){const f=o.a0.fromLngLat(n.wrap()),p=(1<<a)*o.$,v=f.x*p,B=f.y*p,T=Math.floor(v/o.$),M=Math.floor(B/o.$);return{tileID:new o.Z(a,0,a,T,M),mercatorX:v,mercatorY:B}}}class Ei{constructor(n,a,f){this._context=n,this._size=a,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(f.texture),{id:n,fbo:a,texture:f,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>n.id!==a),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const sr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class wr{constructor(n,a){this.painter=n,this.terrain=a,this.pool=new Ei(n.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(f=>!n._layers[f].isHidden(a)),this._coordsAscending={};for(const f in n.sourceCaches){this._coordsAscending[f]={};const p=n.sourceCaches[f].getVisibleCoordinates(),v=n.sourceCaches[f].getSource(),B=v instanceof Kt?v.terrainTileRanges:null;for(const T of p){const M=this.terrain.sourceCache.getTerrainCoords(T,B);for(const z in M)this._coordsAscending[f][z]||(this._coordsAscending[f][z]=[]),this._coordsAscending[f][z].push(M[z])}}this._coordsAscendingStr={};for(const f of n._order){const p=n._layers[f],v=p.source;if(sr[p.type]&&!this._coordsAscendingStr[v]){this._coordsAscendingStr[v]={};for(const B in this._coordsAscending[v])this._coordsAscendingStr[v][B]=this._coordsAscending[v][B].map(T=>T.key).sort().join()}}for(const f of this._renderableTiles)for(const p in this._coordsAscendingStr){const v=this._coordsAscendingStr[p][f.tileID.key];v&&v!==f.rttCoords[p]&&(f.rtt=[])}}renderLayer(n,a){if(n.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},a),{isRenderingToTexture:!0}),p=n.type,v=this.painter,B=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(sr[p]&&(this._prevType&&sr[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(n.id),!B))return!0;if(sr[this._prevType]||sr[p]&&B){this._prevType=p;const T=this._stacks.length-1,M=this._stacks[T]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(fi(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[T]){const W=this.pool.getObjectForId(z.rtt[T].id);if(W.stamp===z.rtt[T].stamp){this.pool.useObject(W);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),z.rtt[T]={id:V.id,stamp:V.stamp},v.context.bindFramebuffer.set(V.fbo.framebuffer),v.context.clear({color:o.be.transparent,stencil:0}),v.currentStencilSource=void 0;for(let W=0;W<M.length;W++){const $=v.style._layers[M[W]],X=$.source?this._coordsAscending[$.source][z.tileID.key]:[z.tileID];v.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),v._renderTileClippingMasks($,X,!0),v.renderLayer(v,v.style.sourceCaches[$.source],$,X,f),$.source&&(z.rttCoords[$.source]=this._coordsAscendingStr[$.source][z.tileID.key])}}return fi(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),sr[p]}return!1}}const Os={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ko=g,_i={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ni,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},pi={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ml{constructor(n,a,f=!1){this.mousedown=v=>{this.startMove(v,C.mousePos(this.element,v)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=v=>{this.move(v,C.mousePos(this.element,v))},this.mouseup=v=>{this._rotatePitchHanlder.dragEnd(v),this.offTemp()},this.touchstart=v=>{v.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,v.targetTouches)[0],this.startMove(v,this._startPos),C.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.addEventListener(window,"touchend",this.touchend))},this.touchmove=v=>{v.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,v.targetTouches)[0],this.move(v,this._lastPos))},this.touchend=v=>{v.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=a;const p=new q;this._rotatePitchHanlder=new rc({clickTolerance:3,move:(v,B)=>{const T=a.getBoundingClientRect(),M=new o.P((T.bottom-T.top)/2,(T.right-T.left)/2);return{bearingDelta:o.cm(new o.P(v.x,B.y),B,M),pitchDelta:f?-.5*(B.y-v.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=n,C.addEventListener(a,"mousedown",this.mousedown),C.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(a,"touchcancel",this.reset)}startMove(n,a){this._rotatePitchHanlder.dragStart(n,a),C.disableDrag()}move(n,a){const f=this.map,{bearingDelta:p,pitchDelta:v}=this._rotatePitchHanlder.dragMove(n,a)||{};p&&f.setBearing(f.getBearing()+p),v&&f.setPitch(f.getPitch()+v)}off(){const n=this.element;C.removeEventListener(n,"mousedown",this.mousedown),C.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend),C.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend)}}let wi;function ol(y,n,a,f=!1){if(f||!a.getCoveringTilesDetailsProvider().allowWorldCopies())return y==null?void 0:y.wrap();const p=new o.S(y.lng,y.lat);if(y=new o.S(y.lng,y.lat),n){const v=new o.S(y.lng-360,y.lat),B=new o.S(y.lng+360,y.lat),T=a.locationToScreenPoint(y).distSqr(n);a.locationToScreenPoint(v).distSqr(n)<T?y=v:a.locationToScreenPoint(B).distSqr(n)<T&&(y=B)}for(;Math.abs(y.lng-a.center.lng)>180;){const v=a.locationToScreenPoint(y);if(v.x>=0&&v.y>=0&&v.x<=a.width&&v.y<=a.height)break;y.lng>a.center.lng?y.lng-=360:y.lng+=360}return y.lng!==p.lng&&a.isPointOnMapSurface(a.locationToScreenPoint(y))?y:p}const On={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gn(y,n,a){const f=y.classList;for(const p in On)f.remove(`maplibregl-${a}-anchor-${p}`);f.add(`maplibregl-${a}-anchor-${n}`)}class ii extends o.E{constructor(n){if(super(),this._onKeyPress=a=>{const f=a.code,p=a.charCode||a.keyCode;f!=="Space"&&f!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=a=>{const f=a.originalEvent.target,p=this._element;this._popup&&(f===p||p.contains(f))&&this.togglePopup()},this._update=a=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=ol(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${On[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${p}`),P.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=o.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div");const a=C.createNS("http://www.w3.org/2000/svg","svg"),f=41,p=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${f}px`),a.setAttributeNS(null,"width",`${p}px`),a.setAttributeNS(null,"viewBox",`0 0 ${p} ${f}`);const v=C.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const B=C.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const T=C.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Fe of M){const Re=C.createNS("http://www.w3.org/2000/svg","ellipse");Re.setAttributeNS(null,"opacity","0.04"),Re.setAttributeNS(null,"cx","10.5"),Re.setAttributeNS(null,"cy","5.80029008"),Re.setAttributeNS(null,"rx",Fe.rx),Re.setAttributeNS(null,"ry",Fe.ry),T.appendChild(Re)}const z=C.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const V=C.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(V);const W=C.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");const $=C.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild($);const X=C.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(6.0, 7.0)"),X.setAttributeNS(null,"fill","#FFFFFF");const ce=C.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ee=C.createNS("http://www.w3.org/2000/svg","circle");Ee.setAttributeNS(null,"fill","#000000"),Ee.setAttributeNS(null,"opacity","0.25"),Ee.setAttributeNS(null,"cx","5.5"),Ee.setAttributeNS(null,"cy","5.5"),Ee.setAttributeNS(null,"r","5.4999962");const Se=C.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#FFFFFF"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962"),ce.appendChild(Ee),ce.appendChild(Se),B.appendChild(T),B.appendChild(z),B.appendChild(W),B.appendChild(X),B.appendChild(ce),a.appendChild(B),a.setAttributeNS(null,"height",f*this._scale+"px"),a.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(a),this._offset=o.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),Gn(this._element,this._anchor,"marker"),n&&n.className)for(const a of n.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=o.S.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const p=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var a,f;const p=(a=this._map)===null||a===void 0?void 0:a.terrain,v=this._map.transform.isLocationOccluded(this._lngLat);if(!p||v){const X=v?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==X&&(this._element.style.opacity=X))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const B=this._map,T=B.terrain.depthAtPoint(this._pos),M=B.terrain.getElevationForLngLatZoom(this._lngLat,B.transform.tileZoom);if(B.transform.lngLatToCameraDepth(this._lngLat,M)-T<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/B.transform.pixelsPerMeter,V=Math.sin(B.getPitch()*Math.PI/180)*z,W=B.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),$=B.transform.lngLatToCameraDepth(this._lngLat,M+V)-W>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&$&&this._popup.remove(),this._element.style.opacity=$?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=o.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,a){return(this._opacity===void 0||n===void 0&&a===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const qh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let la=0,Uo=!1;const nc={maxWidth:100,unit:"metric"};function ro(y,n,a){const f=a&&a.maxWidth||100,p=y._container.clientHeight/2,v=y._container.clientWidth/2,B=y.unproject([v-f/2,p]),T=y.unproject([v+f/2,p]),M=Math.round(y.project(T).x-y.project(B).x),z=Math.min(f,M,y._container.clientWidth),V=B.distanceTo(T);if(a&&a.unit==="imperial"){const W=3.2808*V;W>5280?Qo(n,z,W/5280,y._getUIString("ScaleControl.Miles")):Qo(n,z,W,y._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Qo(n,z,V/1852,y._getUIString("ScaleControl.NauticalMiles")):V>=1e3?Qo(n,z,V/1e3,y._getUIString("ScaleControl.Kilometers")):Qo(n,z,V,y._getUIString("ScaleControl.Meters"))}function Qo(y,n,a,f){const p=function(v){const B=Math.pow(10,`${Math.floor(v)}`.length-1);let T=v/B;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(M){const z=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*z)/z}(T),B*T}(a);y.style.width=n*(p/a)+"px",y.innerHTML=`${p}&nbsp;${f}`}const ka={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Ru=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function uA(y){if(y){if(typeof y=="number"){const n=Math.round(Math.abs(y)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,y),"top-left":new o.P(n,n),"top-right":new o.P(-n,n),bottom:new o.P(0,-y),"bottom-left":new o.P(n,-n),"bottom-right":new o.P(-n,-n),left:new o.P(y,0),right:new o.P(-y,0)}}if(y instanceof o.P||Array.isArray(y)){const n=o.P.convert(y);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:o.P.convert(y.center||[0,0]),top:o.P.convert(y.top||[0,0]),"top-left":o.P.convert(y["top-left"]||[0,0]),"top-right":o.P.convert(y["top-right"]||[0,0]),bottom:o.P.convert(y.bottom||[0,0]),"bottom-left":o.P.convert(y["bottom-left"]||[0,0]),"bottom-right":o.P.convert(y["bottom-right"]||[0,0]),left:o.P.convert(y.left||[0,0]),right:o.P.convert(y.right||[0,0])}}return uA(new o.P(0,0))}const Nu=g;h.AJAXError=o.cy,h.Event=o.l,h.Evented=o.E,h.LngLat=o.S,h.MercatorCoordinate=o.a0,h.Point=o.P,h.addProtocol=o.cz,h.config=o.a,h.removeProtocol=o.cA,h.AttributionControl=us,h.BoxZoomHandler=$h,h.CanvasSource=lr,h.CooperativeGesturesHandler=Ln,h.DoubleClickZoomHandler=zt,h.DragPanHandler=Or,h.DragRotateHandler=fr,h.EdgeInsets=ks,h.FullscreenControl=class extends o.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var n;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=a==null?void 0:a.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=pr,h.GeolocateControl=class extends o.E{constructor(y){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const a=new o.S(n.coords.longitude,n.coords.latitude),f=n.coords.accuracy,p=this._map.getBearing(),v=o.e({bearing:p},this.options.fitBoundsOptions),B=jt.fromLngLat(a,f);this._map.fitBounds(B,v,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const a=new o.S(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Uo)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ii({element:this._dotElement}),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ii({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},qh,y)}onAdd(y){return this._map=y,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(n=!1){if(wi!==void 0&&!n)return wi;if(window.navigator.permissions===void 0)return wi=!!window.navigator.geolocation,wi;try{wi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{wi=!!window.navigator.geolocation}return wi})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,la=0,Uo=!1}_isOutOfMapMaxBounds(y){const n=this._map.getMaxBounds(),a=y.coords;return n&&(a.longitude<n.getWest()||a.longitude>n.getEast()||a.latitude<n.getSouth()||a.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),n=y.getSouthEast(),a=y.getNorthEast(),f=n.distanceTo(a),p=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":la--,Uo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),la++,la>1?(y={maximumAge:6e5,timeout:0},Uo=!0):(y=this.options.positionOptions,Uo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.GlobeControl=class{constructor(){this._toggleProjection=()=>{var y;const n=(y=this._map.getProjection())===null||y===void 0?void 0:y.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var y;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((y=this._map.getProjection())===null||y===void 0?void 0:y.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(y){return this._map=y,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=C.create("button","maplibregl-ctrl-globe",this._container),C.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},h.Hash=Zc,h.ImageSource=Kt,h.KeyboardHandler=Pt,h.LngLatBounds=jt,h.LogoControl=yi,h.Map=class extends Er{constructor(y){var n,a;o.cv.mark(o.cw.create);const f=Object.assign(Object.assign(Object.assign({},_i),y),{canvasContextAttributes:Object.assign(Object.assign({},_i.canvasContextAttributes),y.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new kn,v=new Cl;if(f.minZoom!==void 0&&p.setMinZoom(f.minZoom),f.maxZoom!==void 0&&p.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&p.setMinPitch(f.minPitch),f.maxPitch!==void 0&&p.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&p.setRenderWorldCopies(f.renderWorldCopies),super(p,v,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ds,this._controls=[],this._mapId=o.a6(),this._contextLost=T=>{T.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:T}))},this._contextRestored=T=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:T}))},this._onMapScroll=T=>{if(T.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Os),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ee.addThrottleControl(()=>this.isMoving()),this._requestManager=new se(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let T=!1;const M=Ns(z=>{this._trackResize&&!this._removed&&(this.resize(z),this.redraw())},50);this._resizeObserver=new ResizeObserver(z=>{T?M(z):T=!0}),this._resizeObserver.observe(this._container)}this.handlers=new wn(this,f),this._hash=f.hash&&new Zc(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,o.e({},f.fitBoundsOptions,{duration:0}))));const B=typeof f.style=="string"||((a=(n=f.style)===null||n===void 0?void 0:n.projection)===null||a===void 0?void 0:a.type)!=="globe";this.resize(null,B),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new us(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new yi,f.logoPosition),this.on("style.load",()=>{if(B||this._resizeTransform(),this.transform.unmodified){const T=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(T)}}),this.on("data",T=>{this._update(T.dataType==="style"),this.fire(new o.l(`${T.dataType}data`,T))}),this.on("dataloading",T=>{this.fire(new o.l(`${T.dataType}dataloading`,T))}),this.on("dataabort",T=>{this.fire(new o.l("sourcedataabort",T))})}_getMapId(){return this._mapId}setGlobalStateProperty(y,n){return this.style.setGlobalStateProperty(y,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(y,n){if(n===void 0&&(n=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[n];return n.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(y);return n>-1&&this._controls.splice(n,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,n,a,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,n,a,f)}resize(y,n=!0){const[a,f]=this._containerDimensions(),p=this._getClampedPixelRatio(a,f);if(this._resizeCanvas(a,f,p),this.painter.resize(a,f,p),this.painter.overLimit()){const B=this.painter.context.gl;this._maxCanvasSize=[B.drawingBufferWidth,B.drawingBufferHeight];const T=this._getClampedPixelRatio(a,f);this._resizeCanvas(a,f,T),this.painter.resize(a,f,T)}this._resizeTransform(n);const v=!this._moving;return v&&(this.stop(),this.fire(new o.l("movestart",y)).fire(new o.l("move",y))),this.fire(new o.l("resize",y)),v&&this.fire(new o.l("moveend",y)),this}_resizeTransform(y=!0){var n;const[a,f]=this._containerDimensions();this.transform.resize(a,f,y),(n=this._requestedCameraState)===null||n===void 0||n.resize(a,f,y)}_getClampedPixelRatio(y,n){const{0:a,1:f}=this._maxCanvasSize,p=this.getPixelRatio(),v=y*p,B=n*p;return Math.min(v>a?a/v:1,B>f?f/B:1)*p}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(jt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.setMinZoom(y),this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.setMaxZoom(y),this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.setMinPitch(y),this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(y>=this.transform.minPitch)return this.transform.setMaxPitch(y),this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.setRenderWorldCopies(y),this._update()}project(y){return this.transform.locationToScreenPoint(o.S.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.screenPointToLocation(o.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,n,a){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layers:n,listener:a,delegates:{mousemove:v=>{const B=n.filter(M=>this.getLayer(M)),T=B.length!==0?this.queryRenderedFeatures(v.point,{layers:B}):[];T.length?f||(f=!0,a.call(this,new bs(y,this,v.originalEvent,{features:T}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layers:n,listener:a,delegates:{mousemove:B=>{const T=n.filter(M=>this.getLayer(M));(T.length!==0?this.queryRenderedFeatures(B.point,{layers:T}):[]).length?f=!0:f&&(f=!1,a.call(this,new bs(y,this,B.originalEvent)))},mouseout:B=>{f&&(f=!1,a.call(this,new bs(y,this,B.originalEvent)))}}}}{const f=p=>{const v=n.filter(T=>this.getLayer(T)),B=v.length!==0?this.queryRenderedFeatures(p.point,{layers:v}):[];B.length&&(p.features=B,a.call(this,p),delete p.features)};return{layers:n,listener:a,delegates:{[y]:f}}}}_saveDelegatedListener(y,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(n)}_removeDelegatedListener(y,n,a){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const f=this._delegatedListeners[y];for(let p=0;p<f.length;p++){const v=f[p];if(v.listener===a&&v.layers.length===n.length&&v.layers.every(B=>n.includes(B))){for(const B in v.delegates)this.off(B,v.delegates[B]);return void f.splice(p,1)}}}on(y,n,a){if(a===void 0)return super.on(y,n);const f=typeof n=="string"?[n]:n,p=this._createDelegatedListener(y,f,a);this._saveDelegatedListener(y,p);for(const v in p.delegates)this.on(v,p.delegates[v]);return{unsubscribe:()=>{this._removeDelegatedListener(y,f,a)}}}once(y,n,a){if(a===void 0)return super.once(y,n);const f=typeof n=="string"?[n]:n,p=this._createDelegatedListener(y,f,a);for(const v in p.delegates){const B=p.delegates[v];p.delegates[v]=(...T)=>{this._removeDelegatedListener(y,f,a),B(...T)}}this._saveDelegatedListener(y,p);for(const v in p.delegates)this.once(v,p.delegates[v]);return this}off(y,n,a){return a===void 0?super.off(y,n):(this._removeDelegatedListener(y,typeof n=="string"?[n]:n,a),this)}queryRenderedFeatures(y,n){if(!this.style)return[];let a;const f=y instanceof o.P||Array.isArray(y),p=f?y:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(f?{}:y)||{},p instanceof o.P||typeof p[0]=="number")a=[o.P.convert(p)];else{const v=o.P.convert(p[0]),B=o.P.convert(p[1]);a=[v,new o.P(B.x,v.y),B,new o.P(v.x,B.y),v]}return this.style.queryRenderedFeatures(a,n,this.transform)}querySourceFeatures(y,n){return this.style.querySourceFeatures(y,n)}setStyle(y,n){return(n=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(y,n))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const n=this._locale[y];if(n==null)throw new Error(`Missing UI string '${y}'`);return n}_updateStyle(y,n){var a,f;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,n));const p=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Q(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,n,p):this.style.loadJSON(y,n,p),this):((f=(a=this.style)===null||a===void 0?void 0:a.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Q(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,n){if(typeof y=="string"){const a=this._requestManager.transformRequest(y,"Style");o.j(a,new AbortController).then(f=>{this._updateDiff(f.data,n)}).catch(f=>{f&&this.fire(new o.k(f))})}else typeof y=="object"&&this._updateDiff(y,n)}_updateDiff(y,n){try{this.style.setState(y,n)&&this._update(!0)}catch(a){o.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(y,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(y,n){return this._lazyInitEmptyStyle(),this.style.addSource(y,n),this._update(!0)}isSourceLoaded(y){const n=this.style&&this.style.sourceCaches[y];if(n!==void 0)return n.loaded();this.fire(new o.k(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const n=this.style.sourceCaches[y.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&n.reload();for(const a in this.style._layers){const f=this.style._layers[a];f.type==="hillshade"&&f.source===y.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===y.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vi(this.painter,n,y),this.painter.renderToTexture=new wr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=a=>{var f;a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==y.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=a.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:y})),this}getTerrain(){var y,n;return(n=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const n in y){const a=y[n]._tiles;for(const f in a){const p=a[f];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}setSourceTileLodParams(y,n,a){if(a){const f=this.getSource(a);if(!f)throw new Error(`There is no source with ID "${a}", cannot set LOD parameters`);f.calculateTileZoom=yt(Math.max(1,y),Math.max(1,n))}else for(const f in this.style.sourceCaches)this.style.sourceCaches[f].getSource().calculateTileZoom=yt(Math.max(1,y),Math.max(1,n));return this._update(!0),this}refreshTiles(y,n){const a=this.style.sourceCaches[y];if(!a)throw new Error(`There is no source cache with ID "${y}", cannot refresh tile`);n===void 0?a.reload(!0):a.refreshTiles(n.map(f=>new o.a3(f.z,f.x,f.y)))}addImage(y,n,a={}){const{pixelRatio:f=1,sdf:p=!1,stretchX:v,stretchY:B,content:T,textFitWidth:M,textFitHeight:z}=a;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||o.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:V,height:W,data:$}=n,X=n;return this.style.addImage(y,{data:new o.R({width:V,height:W},new Uint8Array($)),pixelRatio:f,stretchX:v,stretchY:B,content:T,textFitWidth:M,textFitHeight:z,sdf:p,version:0,userImage:X}),X.onAdd&&X.onAdd(this,y),this}}{const{width:V,height:W,data:$}=P.getImageData(n);this.style.addImage(y,{data:new o.R({width:V,height:W},$),pixelRatio:f,stretchX:v,stretchY:B,content:T,textFitWidth:M,textFitHeight:z,sdf:p,version:0})}}updateImage(y,n){const a=this.style.getImage(y);if(!a)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=n instanceof HTMLImageElement||o.b(n)?P.getImageData(n):n,{width:p,height:v,data:B}=f;if(p===void 0||v===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==a.data.width||v!==a.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(n instanceof HTMLImageElement||o.b(n));return a.data.replace(B,T),this.style.updateImage(y,a),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return ee.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,n){return this._lazyInitEmptyStyle(),this.style.addLayer(y,n),this._update(!0)}moveLayer(y,n){return this.style.moveLayer(y,n),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,n,a){return this.style.setLayerZoomRange(y,n,a),this._update(!0)}setFilter(y,n,a={}){return this.style.setFilter(y,n,a),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,n,a,f={}){return this.style.setPaintProperty(y,n,a,f),this._update(!0)}getPaintProperty(y,n){return this.style.getPaintProperty(y,n)}setLayoutProperty(y,n,a,f={}){return this.style.setLayoutProperty(y,n,a,f),this._update(!0)}getLayoutProperty(y,n){return this.style.getLayoutProperty(y,n)}setGlyphs(y,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,n,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,n,a,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,n,a=>{a||this._update(!0)}),this}setLight(y,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(y,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(y,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,n){return this.style.setFeatureState(y,n),this._update()}removeFeatureState(y,n){return this.style.removeFeatureState(y,n),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,n=0;return this._container&&(y=this._container.clientWidth||400,n=this._container.clientHeight||300),[y,n]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const n=this._canvasContainer=C.create("div","maplibregl-canvas-container",y);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),f=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],f);const p=this._controlContainer=C.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{v[B]=C.create("div",`maplibregl-ctrl-${B} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,n,a){this._canvas.width=Math.floor(a*y),this._canvas.height=Math.floor(a*n),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const y=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{n={requestedAttributes:y},f&&(n.statusMessage=f.statusMessage,n.type=f.type)},{once:!0});let a=null;if(a=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,y):this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y),!a){const f="Failed to initialize WebGL";throw n?(n.message=f,new Error(JSON.stringify(n))):new Error(f)}this.painter=new Vi(a,this.transform),D.testSupport(a)}migrateProjection(y,n){super.migrateProjection(y,n),this.painter.transform=y,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){var n,a,f,p,v;const B=this._idleTriggered?this._fadeDuration:0,T=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,$=P.now();this.style.zoomHistory.update(W,$);const X=new o.F(W,{now:$,fadeDuration:B,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),ce=X.crossFadingFactor();ce===1&&ce===this._crossFadingFactor||(M=!0,this._crossFadingFactor=ce),this.style.update(X)}const z=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0!==T;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(v=this.style.projection)===null||v===void 0?void 0:v.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,B,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:B,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cv.mark(o.cw.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,o.cv.mark(o.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ee.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cv.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,y=>{o.cv.frame(y),this._frameRequest=null;try{this._render(y)}catch(n){if(!o.cx(n)&&!function(a){return a.message===eo}(n))throw n}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return ko}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(y){return this._lazyInitEmptyStyle(),this.style.setProjection(y),this._update(!0)}},h.MapMouseEvent=bs,h.MapTouchEvent=aa,h.MapWheelEvent=Uu,h.Marker=ii,h.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const n=this._map.getZoom(),a=n===this._map.getMaxZoom(),f=n===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,a)=>{const f=this._map._getUIString(`NavigationControl.${a}`);n.title=f,n.setAttribute("aria-label",f)},this.options=o.e({},pi,y),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),C.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),C.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ml(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,n){const a=C.create("button",y,this._container);return a.type="button",a.addEventListener("click",n),a}},h.Popup=class extends o.E{constructor(y){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=C.create("div","maplibregl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const B of this.options.className.split(" "))this._container.classList.add(B);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ol(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const a=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const p=uA(this.options.offset);if(!f){const B=this._container.offsetWidth,T=this._container.offsetHeight;let M;M=a.y+p.bottom.y<T?["top"]:a.y>this._map.transform.height-T?["bottom"]:[],a.x<B/2?M.push("left"):a.x>this._map.transform.width-B/2&&M.push("right"),f=M.length===0?"bottom":M.join("-")}let v=a.add(p[f]);this.options.subpixelPositioning||(v=v.round()),C.setTransform(this._container,`${On[f]} translate(${v.x}px,${v.y}px)`),Gn(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(ka),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=o.S.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const n=document.createDocumentFragment(),a=document.createElement("body");let f;for(a.innerHTML=y;f=a.firstChild,f;)n.appendChild(f);return this.setDOMContent(n)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Ru);y&&y.focus()}},h.RasterDEMTileSource=Cr,h.RasterTileSource=Ge,h.ScaleControl=class{constructor(y){this._onMove=()=>{ro(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,ro(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},nc),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=Wt,h.Style=Q,h.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=C.create("button","maplibregl-ctrl-terrain",this._container),C.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){C.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=ft,h.TwoFingersTouchRotateHandler=Bt,h.TwoFingersTouchZoomHandler=ke,h.TwoFingersTouchZoomRotateHandler=Cn,h.VectorTileSource=It,h.VideoSource=ar,h.addSourceType=(y,n)=>o._(void 0,void 0,void 0,function*(){if(br(y))throw new Error(`A source type called "${y}" already exists.`);((a,f)=>{cr[a]=f})(y,n)}),h.clearPrewarmedResources=function(){const y=Be;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(it),Be=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.createTileMesh=jA,h.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return Hr().getRTLTextPluginStatus()},h.getVersion=function(){return Nu},h.getWorkerCount=function(){return Lt.workerCount},h.getWorkerUrl=function(){return o.a.WORKER_URL},h.importScriptInWorkers=function(y){return Ze().broadcast("IS",y)},h.prewarm=function(){$e().acquire(it)},h.setMaxParallelImageRequests=function(y){o.a.MAX_PARALLEL_IMAGE_REQUESTS=y},h.setRTLTextPlugin=function(y,n){return Hr().setRTLTextPlugin(y,n)},h.setWorkerCount=function(y){Lt.workerCount=y},h.setWorkerUrl=function(y){o.a.WORKER_URL=y}});var u=r;return u})})(RL);var l7=RL.exports;const Yf=zb(l7);function vy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function A7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function DL(e){let t,r,i;e.length!==2?(t=vy,r=(o,g)=>vy(e(o),g),i=(o,g)=>e(o)-g):(t=e===vy||e===A7?e:c7,r=e,i=e);function A(o,g,x=0,E=o.length){if(x<E){if(t(g,g)!==0)return E;do{const F=x+E>>>1;r(o[F],g)<0?x=F+1:E=F}while(x<E)}return x}function u(o,g,x=0,E=o.length){if(x<E){if(t(g,g)!==0)return E;do{const F=x+E>>>1;r(o[F],g)<=0?x=F+1:E=F}while(x<E)}return x}function h(o,g,x=0,E=o.length){const F=A(o,g,x,E-1);return F>x&&i(o[F-1],g)>-i(o[F],g)?F-1:F}return{left:A,center:h,right:u}}function c7(){return 0}function u7(e){return e===null?NaN:+e}const h7=DL(vy),d7=h7.right;DL(u7).center;const f7=Math.sqrt(50),p7=Math.sqrt(10),m7=Math.sqrt(2);function Av(e,t,r){const i=(t-e)/Math.max(0,r),A=Math.floor(Math.log10(i)),u=i/Math.pow(10,A),h=u>=f7?10:u>=p7?5:u>=m7?2:1;let o,g,x;return A<0?(x=Math.pow(10,-A)/h,o=Math.round(e*x),g=Math.round(t*x),o/x<e&&++o,g/x>t&&--g,x=-x):(x=Math.pow(10,A)*h,o=Math.round(e/x),g=Math.round(t/x),o*x<e&&++o,g*x>t&&--g),g<o&&.5<=r&&r<2?Av(e,t,r*2):[o,g,x]}function g7(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const i=t<e,[A,u,h]=i?Av(t,e,r):Av(e,t,r);if(!(u>=A))return[];const o=u-A+1,g=new Array(o);if(i)if(h<0)for(let x=0;x<o;++x)g[x]=(u-x)/-h;else for(let x=0;x<o;++x)g[x]=(u-x)*h;else if(h<0)for(let x=0;x<o;++x)g[x]=(A+x)/-h;else for(let x=0;x<o;++x)g[x]=(A+x)*h;return g}function rb(e,t,r){return t=+t,e=+e,r=+r,Av(e,t,r)[2]}function y7(e,t,r){t=+t,e=+e,r=+r;const i=t<e,A=i?rb(t,e,r):rb(e,t,r);return(i?-1:1)*(A<0?1/-A:A)}function v7(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function AB(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function OL(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function Lg(){}var fg=.7,cv=1/fg,Jf="\\s*([+-]?\\d+)\\s*",pg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_7=/^#([0-9a-f]{3,8})$/,w7=new RegExp(`^rgb\\(${Jf},${Jf},${Jf}\\)$`),x7=new RegExp(`^rgb\\(${bc},${bc},${bc}\\)$`),b7=new RegExp(`^rgba\\(${Jf},${Jf},${Jf},${pg}\\)$`),B7=new RegExp(`^rgba\\(${bc},${bc},${bc},${pg}\\)$`),C7=new RegExp(`^hsl\\(${pg},${bc},${bc}\\)$`),S7=new RegExp(`^hsla\\(${pg},${bc},${bc},${pg}\\)$`),vE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};AB(Lg,mg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_E,formatHex:_E,formatHex8:E7,formatHsl:F7,formatRgb:wE,toString:wE});function _E(){return this.rgb().formatHex()}function E7(){return this.rgb().formatHex8()}function F7(){return zL(this).formatHsl()}function wE(){return this.rgb().formatRgb()}function mg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=_7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?xE(t):r===3?new Oa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?S0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?S0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=w7.exec(e))?new Oa(t[1],t[2],t[3],1):(t=x7.exec(e))?new Oa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=b7.exec(e))?S0(t[1],t[2],t[3],t[4]):(t=B7.exec(e))?S0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=C7.exec(e))?CE(t[1],t[2]/100,t[3]/100,1):(t=S7.exec(e))?CE(t[1],t[2]/100,t[3]/100,t[4]):vE.hasOwnProperty(e)?xE(vE[e]):e==="transparent"?new Oa(NaN,NaN,NaN,0):null}function xE(e){return new Oa(e>>16&255,e>>8&255,e&255,1)}function S0(e,t,r,i){return i<=0&&(e=t=r=NaN),new Oa(e,t,r,i)}function I7(e){return e instanceof Lg||(e=mg(e)),e?(e=e.rgb(),new Oa(e.r,e.g,e.b,e.opacity)):new Oa}function nb(e,t,r,i){return arguments.length===1?I7(e):new Oa(e,t,r,i??1)}function Oa(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}AB(Oa,nb,OL(Lg,{brighter(e){return e=e==null?cv:Math.pow(cv,e),new Oa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fg:Math.pow(fg,e),new Oa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Oa(Sd(this.r),Sd(this.g),Sd(this.b),uv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bE,formatHex:bE,formatHex8:T7,formatRgb:BE,toString:BE}));function bE(){return`#${md(this.r)}${md(this.g)}${md(this.b)}`}function T7(){return`#${md(this.r)}${md(this.g)}${md(this.b)}${md((isNaN(this.opacity)?1:this.opacity)*255)}`}function BE(){const e=uv(this.opacity);return`${e===1?"rgb(":"rgba("}${Sd(this.r)}, ${Sd(this.g)}, ${Sd(this.b)}${e===1?")":`, ${e})`}`}function uv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function md(e){return e=Sd(e),(e<16?"0":"")+e.toString(16)}function CE(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new PA(e,t,r,i)}function zL(e){if(e instanceof PA)return new PA(e.h,e.s,e.l,e.opacity);if(e instanceof Lg||(e=mg(e)),!e)return new PA;if(e instanceof PA)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,A=Math.min(t,r,i),u=Math.max(t,r,i),h=NaN,o=u-A,g=(u+A)/2;return o?(t===u?h=(r-i)/o+(r<i)*6:r===u?h=(i-t)/o+2:h=(t-r)/o+4,o/=g<.5?u+A:2-u-A,h*=60):o=g>0&&g<1?0:h,new PA(h,o,g,e.opacity)}function P7(e,t,r,i){return arguments.length===1?zL(e):new PA(e,t,r,i??1)}function PA(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}AB(PA,P7,OL(Lg,{brighter(e){return e=e==null?cv:Math.pow(cv,e),new PA(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fg:Math.pow(fg,e),new PA(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,A=2*r-i;return new Oa(nw(e>=240?e-240:e+120,A,i),nw(e,A,i),nw(e<120?e+240:e-120,A,i),this.opacity)},clamp(){return new PA(SE(this.h),E0(this.s),E0(this.l),uv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uv(this.opacity);return`${e===1?"hsl(":"hsla("}${SE(this.h)}, ${E0(this.s)*100}%, ${E0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function SE(e){return e=(e||0)%360,e<0?e+360:e}function E0(e){return Math.max(0,Math.min(1,e||0))}function nw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const cB=e=>()=>e;function L7(e,t){return function(r){return e+r*t}}function M7(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function k7(e){return(e=+e)==1?HL:function(t,r){return r-t?M7(t,r,e):cB(isNaN(t)?r:t)}}function HL(e,t){var r=t-e;return r?L7(e,r):cB(isNaN(e)?t:e)}const EE=function e(t){var r=k7(t);function i(A,u){var h=r((A=nb(A)).r,(u=nb(u)).r),o=r(A.g,u.g),g=r(A.b,u.b),x=HL(A.opacity,u.opacity);return function(E){return A.r=h(E),A.g=o(E),A.b=g(E),A.opacity=x(E),A+""}}return i.gamma=e,i}(1);function U7(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),A;return function(u){for(A=0;A<r;++A)i[A]=e[A]*(1-u)+t[A]*u;return i}}function Q7(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function R7(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,A=new Array(i),u=new Array(r),h;for(h=0;h<i;++h)A[h]=uB(e[h],t[h]);for(;h<r;++h)u[h]=t[h];return function(o){for(h=0;h<i;++h)u[h]=A[h](o);return u}}function N7(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}function hv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function D7(e,t){var r={},i={},A;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(A in t)A in e?r[A]=uB(e[A],t[A]):i[A]=t[A];return function(u){for(A in r)i[A]=r[A](u);return i}}var ib=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iw=new RegExp(ib.source,"g");function O7(e){return function(){return e}}function z7(e){return function(t){return e(t)+""}}function H7(e,t){var r=ib.lastIndex=iw.lastIndex=0,i,A,u,h=-1,o=[],g=[];for(e=e+"",t=t+"";(i=ib.exec(e))&&(A=iw.exec(t));)(u=A.index)>r&&(u=t.slice(r,u),o[h]?o[h]+=u:o[++h]=u),(i=i[0])===(A=A[0])?o[h]?o[h]+=A:o[++h]=A:(o[++h]=null,g.push({i:h,x:hv(i,A)})),r=iw.lastIndex;return r<t.length&&(u=t.slice(r),o[h]?o[h]+=u:o[++h]=u),o.length<2?g[0]?z7(g[0].x):O7(t):(t=g.length,function(x){for(var E=0,F;E<t;++E)o[(F=g[E]).i]=F.x(x);return o.join("")})}function uB(e,t){var r=typeof t,i;return t==null||r==="boolean"?cB(t):(r==="number"?hv:r==="string"?(i=mg(t))?(t=i,EE):H7:t instanceof mg?EE:t instanceof Date?N7:Q7(t)?U7:Array.isArray(t)?R7:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?D7:hv)(e,t)}function j7(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function V7(e){return function(){return e}}function K7(e){return+e}var FE=[0,1];function Df(e){return e}function sb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:V7(isNaN(t)?NaN:.5)}function G7(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function $7(e,t,r){var i=e[0],A=e[1],u=t[0],h=t[1];return A<i?(i=sb(A,i),u=r(h,u)):(i=sb(i,A),u=r(u,h)),function(o){return u(i(o))}}function q7(e,t,r){var i=Math.min(e.length,t.length)-1,A=new Array(i),u=new Array(i),h=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<i;)A[h]=sb(e[h],e[h+1]),u[h]=r(t[h],t[h+1]);return function(o){var g=d7(e,o,1,i)-1;return u[g](A[g](o))}}function W7(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Z7(){var e=FE,t=FE,r=uB,i,A,u,h=Df,o,g,x;function E(){var P=Math.min(e.length,t.length);return h!==Df&&(h=G7(e[0],e[P-1])),o=P>2?q7:$7,g=x=null,F}function F(P){return P==null||isNaN(P=+P)?u:(g||(g=o(e.map(i),t,r)))(i(h(P)))}return F.invert=function(P){return h(A((x||(x=o(t,e.map(i),hv)))(P)))},F.domain=function(P){return arguments.length?(e=Array.from(P,K7),E()):e.slice()},F.range=function(P){return arguments.length?(t=Array.from(P),E()):t.slice()},F.rangeRound=function(P){return t=Array.from(P),r=j7,E()},F.clamp=function(P){return arguments.length?(h=P?!0:Df,E()):h!==Df},F.interpolate=function(P){return arguments.length?(r=P,E()):r},F.unknown=function(P){return arguments.length?(u=P,F):u},function(P,C){return i=P,A=C,E()}}function X7(){return Z7()(Df,Df)}function Y7(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function dv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function bp(e){return e=dv(Math.abs(e)),e?e[1]:NaN}function J7(e,t){return function(r,i){for(var A=r.length,u=[],h=0,o=e[0],g=0;A>0&&o>0&&(g+o+1>i&&(o=Math.max(1,i-g)),u.push(r.substring(A-=o,A+o)),!((g+=o+1)>i));)o=e[h=(h+1)%e.length];return u.reverse().join(t)}}function e9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var t9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fv(e){if(!(t=t9.exec(e)))throw new Error("invalid format: "+e);var t;return new hB({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fv.prototype=hB.prototype;function hB(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r9(e){e:for(var t=e.length,r=1,i=-1,A;r<t;++r)switch(e[r]){case".":i=A=r;break;case"0":i===0&&(i=r),A=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(A+1):e}var jL;function n9(e,t){var r=dv(e,t);if(!r)return e+"";var i=r[0],A=r[1],u=A-(jL=Math.max(-8,Math.min(8,Math.floor(A/3)))*3)+1,h=i.length;return u===h?i:u>h?i+new Array(u-h+1).join("0"):u>0?i.slice(0,u)+"."+i.slice(u):"0."+new Array(1-u).join("0")+dv(e,Math.max(0,t+u-1))[0]}function IE(e,t){var r=dv(e,t);if(!r)return e+"";var i=r[0],A=r[1];return A<0?"0."+new Array(-A).join("0")+i:i.length>A+1?i.slice(0,A+1)+"."+i.slice(A+1):i+new Array(A-i.length+2).join("0")}const TE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Y7,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>IE(e*100,t),r:IE,s:n9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function PE(e){return e}var LE=Array.prototype.map,ME=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function i9(e){var t=e.grouping===void 0||e.thousands===void 0?PE:J7(LE.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",A=e.decimal===void 0?".":e.decimal+"",u=e.numerals===void 0?PE:e9(LE.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",g=e.nan===void 0?"NaN":e.nan+"";function x(F){F=fv(F);var P=F.fill,C=F.align,D=F.sign,k=F.symbol,j=F.zero,U=F.width,N=F.comma,K=F.precision,ee=F.trim,se=F.type;se==="n"?(N=!0,se="g"):TE[se]||(K===void 0&&(K=12),ee=!0,se="g"),(j||P==="0"&&C==="=")&&(j=!0,P="0",C="=");var pe=k==="$"?r:k==="#"&&/[boxX]/.test(se)?"0"+se.toLowerCase():"",ye=k==="$"?i:/[%p]/.test(se)?h:"",ue=TE[se],Te=/[defgprs%]/.test(se);K=K===void 0?6:/[gprs]/.test(se)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function Ke(oe){var he=pe,Ie=ye,be,ct,Xe;if(se==="c")Ie=ue(oe)+Ie,oe="";else{oe=+oe;var lt=oe<0||1/oe<0;if(oe=isNaN(oe)?g:ue(Math.abs(oe),K),ee&&(oe=r9(oe)),lt&&+oe==0&&D!=="+"&&(lt=!1),he=(lt?D==="("?D:o:D==="-"||D==="("?"":D)+he,Ie=(se==="s"?ME[8+jL/3]:"")+Ie+(lt&&D==="("?")":""),Te){for(be=-1,ct=oe.length;++be<ct;)if(Xe=oe.charCodeAt(be),48>Xe||Xe>57){Ie=(Xe===46?A+oe.slice(be+1):oe.slice(be))+Ie,oe=oe.slice(0,be);break}}}N&&!j&&(oe=t(oe,1/0));var Le=he.length+oe.length+Ie.length,ze=Le<U?new Array(U-Le+1).join(P):"";switch(N&&j&&(oe=t(ze+oe,ze.length?U-Ie.length:1/0),ze=""),C){case"<":oe=he+oe+Ie+ze;break;case"=":oe=he+ze+oe+Ie;break;case"^":oe=ze.slice(0,Le=ze.length>>1)+he+oe+Ie+ze.slice(Le);break;default:oe=ze+he+oe+Ie;break}return u(oe)}return Ke.toString=function(){return F+""},Ke}function E(F,P){var C=x((F=fv(F),F.type="f",F)),D=Math.max(-8,Math.min(8,Math.floor(bp(P)/3)))*3,k=Math.pow(10,-D),j=ME[8+D/3];return function(U){return C(k*U)+j}}return{format:x,formatPrefix:E}}var F0,VL,KL;s9({thousands:",",grouping:[3],currency:["$",""]});function s9(e){return F0=i9(e),VL=F0.format,KL=F0.formatPrefix,F0}function o9(e){return Math.max(0,-bp(Math.abs(e)))}function a9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bp(t)/3)))*3-bp(Math.abs(e)))}function l9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bp(t)-bp(e))+1}function A9(e,t,r,i){var A=y7(e,t,r),u;switch(i=fv(i??",f"),i.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(u=a9(A,h))&&(i.precision=u),KL(i,h)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(u=l9(A,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=u-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(u=o9(A))&&(i.precision=u-(i.type==="%")*2);break}}return VL(i)}function c9(e){var t=e.domain;return e.ticks=function(r){var i=t();return g7(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var A=t();return A9(A[0],A[A.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),A=0,u=i.length-1,h=i[A],o=i[u],g,x,E=10;for(o<h&&(x=h,h=o,o=x,x=A,A=u,u=x);E-- >0;){if(x=rb(h,o,r),x===g)return i[A]=h,i[u]=o,t(i);if(x>0)h=Math.floor(h/x)*x,o=Math.ceil(o/x)*x;else if(x<0)h=Math.ceil(h*x)/x,o=Math.floor(o*x)/x;else break;g=x}return e},e}function dB(){var e=X7();return e.copy=function(){return W7(e,dB())},v7.apply(e,arguments),c9(e)}function u9({filteredData:e,geoJSON:t,selectedMetric:r,regionScope:i,onRenderComplete:A}){const u=te.useRef(null),h=te.useRef(null),o=te.useRef(null),g=te.useRef({}).current,x=te.useMemo(()=>{const C=e.map(D=>D[r]).filter(D=>typeof D=="number"&&D>0).sort((D,k)=>D-k);return C.length<2?null:dB().domain([C[0],C[C.length-1]]).range(["#FFF9B0","#E84C61","#2E0B59"])},[e,r]),{continental:E,alaska:F,hawaii:P}=te.useMemo(()=>{if(i!=="national"||!t)return{continental:t,alaska:null,hawaii:null};const C=[],D=[],k=[],j=new Set(e.filter(N=>N.state==="Alaska").map(N=>N.zipCode)),U=new Set(e.filter(N=>N.state==="Hawaii").map(N=>N.zipCode));return t.features.forEach(N=>{const K=N.properties.zipCode;j.has(K)?D.push(N):U.has(K)?k.push(N):C.push(N)}),{continental:{type:"FeatureCollection",features:C},alaska:{type:"FeatureCollection",features:D},hawaii:{type:"FeatureCollection",features:k}}},[t,i,e]);return te.useEffect(()=>{const C=[{key:"main",ref:u,center:[-98.5,39.8],zoom:3.5,data:E},...i==="national"?[{key:"alaska",ref:h,center:[-152,64],zoom:2.5,data:F},{key:"hawaii",ref:o,center:[-157,21],zoom:5,data:P}]:[]];let D=C.length,k=0;const j=()=>{k++,k===D&&A&&A()};return C.forEach(({key:U,ref:N,center:K,zoom:ee,data:se})=>{if(!N.current||g[U])return;const pe=new Yf.Map({container:N.current,style:{version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"#ffffff"}}]},center:K,zoom:ee,interactive:!1,attributionControl:!1});g[U]=pe,pe.on("load",()=>{if(!se||!x||se.features.length===0){j();return}const ye={...se,features:se.features.map(ue=>{const Te=e.find(oe=>oe.zipCode===ue.properties.zipCode),Ke=Te?Te[r]:0;return{...ue,properties:{...ue.properties,metricValue:Ke}}})};if(pe.addSource(U,{type:"geojson",data:ye}),pe.addLayer({id:`${U}-fill`,type:"fill",source:U,paint:{"fill-color":["case",["!",["has","metricValue"]],"#ccc",["interpolate",["linear"],["get","metricValue"],...x.domain().flatMap(ue=>[ue,x(ue)])]],"fill-opacity":.8}}),U==="main"&&(i==="state"||i==="metro")){const ue=new Yf.LngLatBounds;se.features.forEach(Te=>{var Ke,oe;((Ke=Te.geometry)==null?void 0:Ke.type)==="Polygon"&&Te.geometry.coordinates[0].forEach(he=>ue.extend(he)),((oe=Te.geometry)==null?void 0:oe.type)==="MultiPolygon"&&Te.geometry.coordinates.forEach(he=>he[0].forEach(Ie=>ue.extend(Ie)))}),ue.isEmpty()||pe.fitBounds(ue,{padding:40,duration:0})}pe.once("idle",j)})}),()=>{Object.values(g).forEach(U=>U==null?void 0:U.remove())}},[E,F,P,x,A,i,r,e]),Z.jsxs("div",{className:"relative w-full h-full",children:[Z.jsx("div",{ref:u,className:"w-full h-full"}),i==="national"&&Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"absolute bottom-4 left-4 w-40 h-32 border border-gray-300 rounded bg-white",children:Z.jsx("div",{ref:h,className:"w-full h-full"})}),Z.jsx("div",{className:"absolute bottom-4 left-48 w-32 h-24 border border-gray-300 rounded bg-white",children:Z.jsx("div",{ref:o,className:"w-full h-full"})})]})]})}function sw(e,t){if(e==null||isNaN(e))return"N/A";switch(t){case"currency":return`$${e.toLocaleString()}`;case"percent":return`${e.toFixed(1)}%`;case"ratio":return`${(e*100).toFixed(1)}%`;case"number":return e.toLocaleString();default:return e.toString()}}function h9(e,t){if(!e||!e.zipCode)return'<div class="p-2">No data available</div>';const i={median_sale_price:{key:"median_sale_price",label:"Median Sale Price",format:"currency"},median_list_price:{key:"median_list_price",label:"Median List Price",format:"currency"},median_dom:{key:"median_dom",label:"Median Days on Market",format:"number"},inventory:{key:"inventory",label:"Inventory",format:"number"},new_listings:{key:"new_listings",label:"New Listings",format:"number"},homes_sold:{key:"homes_sold",label:"Homes Sold",format:"number"},avg_sale_to_list_ratio:{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",format:"ratio"},sold_above_list:{key:"sold_above_list",label:"% Sold Above List",format:"percent"},off_market_in_two_weeks:{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",format:"percent"}}[t],A=i?e[i.key]:null;let u="N/A";if(typeof A=="number"&&isFinite(A))switch(i.format){case"currency":u=`$${A.toLocaleString()}`;break;case"percent":u=`${A.toFixed(1)}%`;break;case"ratio":u=`${(A*100).toFixed(1)}%`;break;case"number":u=A.toLocaleString();break}return`
    <div class="p-2 bg-white rounded shadow-lg border text-black font-sans">
      <div class="font-bold text-base">${e.zipCode}</div>
      <div class="text-sm text-gray-600">${e.city||"Unknown City"}, ${e.state}</div>
      <div class="text-sm mt-2">
        <span class="font-semibold">${(i==null?void 0:i.label)||t}:</span>
        <span class="font-normal"> ${u}</span>
      </div>
    </div>
  `}function d9({filteredZipData:e,selectedMetric:t,className:r=""}){const i=te.useMemo(()=>{const x={"median-sale-price":{key:"median_sale_price",format:"currency"},"median-list-price":{key:"median_list_price",format:"currency"},"median-dom":{key:"median_dom",format:"number"},inventory:{key:"inventory",format:"number"},"new-listings":{key:"new_listings",format:"number"},"homes-sold":{key:"homes_sold",format:"number"},"sale-to-list-ratio":{key:"avg_sale_to_list_ratio",format:"ratio"},"homes-sold-above-list":{key:"sold_above_list",format:"percent"},"off-market-2-weeks":{key:"off_market_in_two_weeks",format:"percent"}}[t];if(!x||!Array.isArray(e)||e.length===0)return{minDisplay:"N/A",maxDisplay:"N/A",quintileDisplays:[],zipCount:0};const E=e.map(P=>P[x.key]).filter(P=>typeof P=="number"&&isFinite(P)&&P>0).sort((P,C)=>P-C);if(E.length<2)return{minDisplay:"N/A",maxDisplay:"N/A",quintileDisplays:[],zipCount:e.length};const F=[];for(let P=0;P<=4;P++){const C=Math.floor((E.length-1)*(P/4));F.push(sw(E[C],x.format))}return{minDisplay:sw(E[0],x.format),maxDisplay:sw(E[E.length-1],x.format),quintileDisplays:F,zipCount:e.length}},[e,t]),{minDisplay:A,maxDisplay:u,quintileDisplays:h,zipCount:o}=i;return Z.jsxs("div",{className:`bg-white border border-gray-300 rounded p-4 inline-block ${r}`,children:[Z.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-900",children:"Legend"}),Z.jsxs("div",{className:"mb-3",children:[Z.jsx("div",{className:"h-4 rounded-lg",style:{background:"linear-gradient(to right, #FFF9B0, #FFA873, #E84C61, #922C7E, #2E0B59)"}}),Z.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[Z.jsx("span",{children:A}),Z.jsx("span",{children:u})]})]}),Z.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:h.map((g,x)=>{const E=["#FFF9B0","#FFA873","#E84C61","#922C7E","#2E0B59"];return Z.jsxs("div",{className:"text-center",children:[Z.jsx("div",{className:"w-4 h-4 rounded mx-auto mb-1",style:{backgroundColor:E[x]}}),Z.jsx("span",{className:"text-[10px] text-gray-600 leading-tight block",children:g})]},x)})}),Z.jsxs("div",{className:"text-xs text-gray-500 text-center pt-2 border-t border-gray-200",children:[o.toLocaleString()," ZIP codes"]})]})}function f9({className:e,showText:t=!0,size:r="md"}){const i={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"},A={sm:"text-sm",md:"text-base",lg:"text-xl"};return Z.jsxs("div",{className:Nn("flex items-center space-x-2",e),children:[Z.jsx("div",{className:Nn("relative",i[r]),children:Z.jsxs("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[Z.jsx("path",{d:"M4 6h24c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V8c0-1.1.9-2 2-2z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),Z.jsx("path",{d:"M12 10l4-3 4 3v8h-2v-4h-4v4h-2v-8z",fill:"currentColor"}),Z.jsx("path",{d:"M8 12h16M8 16h16M8 20h16M12 8v16M20 8v16",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.3"}),Z.jsx("circle",{cx:"10",cy:"14",r:"1",fill:"currentColor",opacity:"0.6"}),Z.jsx("circle",{cx:"14",cy:"18",r:"1",fill:"currentColor",opacity:"0.6"}),Z.jsx("circle",{cx:"22",cy:"12",r:"1",fill:"currentColor",opacity:"0.6"}),Z.jsx("circle",{cx:"24",cy:"20",r:"1",fill:"currentColor",opacity:"0.6"})]})}),t&&Z.jsx("span",{className:Nn("font-bold text-gray-800",A[r]),children:"Domapus"})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ob=function(e,t){return ob=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var A in i)Object.prototype.hasOwnProperty.call(i,A)&&(r[A]=i[A])},ob(e,t)};function RA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ob(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ab=function(){return ab=Object.assign||function(t){for(var r,i=1,A=arguments.length;i<A;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},ab.apply(this,arguments)};function da(e,t,r,i){function A(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function o(E){try{x(i.next(E))}catch(F){h(F)}}function g(E){try{x(i.throw(E))}catch(F){h(F)}}function x(E){E.done?u(E.value):A(E.value).then(o,g)}x((i=i.apply(e,[])).next())})}function $o(e,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,A,u,h;return h={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function o(x){return function(E){return g([x,E])}}function g(x){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,A&&(u=x[0]&2?A.return:x[0]?A.throw||((u=A.return)&&u.call(A),0):A.next)&&!(u=u.call(A,x[1])).done)return u;switch(A=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,A=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){r.label=x[1];break}if(x[0]===6&&r.label<u[1]){r.label=u[1],u=x;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(x);break}u[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(E){x=[6,E],A=0}finally{i=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}function I0(e,t,r){if(arguments.length===2)for(var i=0,A=t.length,u;i<A;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||t)}var _u=function(){function e(t,r,i,A){this.left=t,this.top=r,this.width=i,this.height=A}return e.prototype.add=function(t,r,i,A){return new e(this.left+t,this.top+r,this.width+i,this.height+A)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var i=Array.from(r).find(function(A){return A.width!==0});return i?new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),h1=function(e,t){return _u.fromClientRect(e,t.getBoundingClientRect())},p9=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),A=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new _u(0,0,i,A)},d1=function(e){for(var t=[],r=0,i=e.length;r<i;){var A=e.charCodeAt(r++);if(A>=55296&&A<=56319&&r<i){var u=e.charCodeAt(r++);(u&64512)===56320?t.push(((A&1023)<<10)+(u&1023)+65536):(t.push(A),r--)}else t.push(A)}return t},ms=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],A=-1,u="";++A<r;){var h=e[A];h<=65535?i.push(h):(h-=65536,i.push((h>>10)+55296,h%1024+56320)),(A+1===r||i.length>16384)&&(u+=String.fromCharCode.apply(String,i),i.length=0)}return u},kE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m9=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var T0=0;T0<kE.length;T0++)m9[kE.charCodeAt(T0)]=T0;var UE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var P0=0;P0<UE.length;P0++)wm[UE.charCodeAt(P0)]=P0;var g9=function(e){var t=e.length*.75,r=e.length,i,A=0,u,h,o,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var x=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),E=Array.isArray(x)?x:new Uint8Array(x);for(i=0;i<r;i+=4)u=wm[e.charCodeAt(i)],h=wm[e.charCodeAt(i+1)],o=wm[e.charCodeAt(i+2)],g=wm[e.charCodeAt(i+3)],E[A++]=u<<2|h>>4,E[A++]=(h&15)<<4|o>>2,E[A++]=(o&3)<<6|g&63;return x},y9=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},v9=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},Ed=5,fB=11,ow=2,_9=fB-Ed,GL=65536>>Ed,w9=1<<Ed,aw=w9-1,x9=1024>>Ed,b9=GL+x9,B9=b9,C9=32,S9=B9+C9,E9=65536>>fB,F9=1<<_9,I9=F9-1,QE=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},T9=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},P9=function(e,t){var r=g9(e),i=Array.isArray(r)?v9(r):new Uint32Array(r),A=Array.isArray(r)?y9(r):new Uint16Array(r),u=24,h=QE(A,u/2,i[4]/2),o=i[5]===2?QE(A,(u+i[4])/2):T9(i,Math.ceil((u+i[4])/4));return new L9(i[0],i[1],i[2],i[3],h,o)},L9=function(){function e(t,r,i,A,u,h){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=A,this.index=u,this.data=h}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Ed],r=(r<<ow)+(t&aw),this.data[r];if(t<=65535)return r=this.index[GL+(t-55296>>Ed)],r=(r<<ow)+(t&aw),this.data[r];if(t<this.highStart)return r=S9-E9+(t>>fB),r=this.index[r],r+=t>>Ed&I9,r=this.index[r],r=(r<<ow)+(t&aw),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),RE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M9=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var L0=0;L0<RE.length;L0++)M9[RE.charCodeAt(L0)]=L0;var k9="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",NE=50,U9=1,$L=2,qL=3,Q9=4,R9=5,DE=7,WL=8,OE=9,fh=10,lb=11,zE=12,Ab=13,N9=14,xm=15,cb=16,M0=17,cm=18,D9=19,HE=20,ub=21,um=22,lw=23,ff=24,hl=25,bm=26,Bm=27,pf=28,O9=29,ud=30,z9=31,k0=32,U0=33,hb=34,db=35,fb=36,gg=37,pb=38,_y=39,wy=40,Aw=41,ZL=42,H9=43,j9=[9001,65288],XL="!",In="×",Q0="÷",mb=P9(k9),nu=[ud,fb],gb=[U9,$L,qL,R9],YL=[fh,WL],jE=[Bm,bm],V9=gb.concat(YL),VE=[pb,_y,wy,hb,db],K9=[xm,Ab],G9=function(e,t){t===void 0&&(t="strict");var r=[],i=[],A=[];return e.forEach(function(u,h){var o=mb.get(u);if(o>NE?(A.push(!0),o-=NE):A.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(u)!==-1)return i.push(h),r.push(cb);if(o===Q9||o===lb){if(h===0)return i.push(h),r.push(ud);var g=r[h-1];return V9.indexOf(g)===-1?(i.push(i[h-1]),r.push(g)):(i.push(h),r.push(ud))}if(i.push(h),o===z9)return r.push(t==="strict"?ub:gg);if(o===ZL||o===O9)return r.push(ud);if(o===H9)return u>=131072&&u<=196605||u>=196608&&u<=262141?r.push(gg):r.push(ud);r.push(o)}),[i,r,A]},cw=function(e,t,r,i){var A=i[r];if(Array.isArray(e)?e.indexOf(A)!==-1:e===A)for(var u=r;u<=i.length;){u++;var h=i[u];if(h===t)return!0;if(h!==fh)break}if(A===fh)for(var u=r;u>0;){u--;var o=i[u];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var g=r;g<=i.length;){g++;var h=i[g];if(h===t)return!0;if(h!==fh)break}if(o!==fh)break}return!1},KE=function(e,t){for(var r=e;r>=0;){var i=t[r];if(i===fh)r--;else return i}return 0},$9=function(e,t,r,i,A){if(r[i]===0)return In;var u=i-1;if(Array.isArray(A)&&A[u]===!0)return In;var h=u-1,o=u+1,g=t[u],x=h>=0?t[h]:0,E=t[o];if(g===$L&&E===qL)return In;if(gb.indexOf(g)!==-1)return XL;if(gb.indexOf(E)!==-1||YL.indexOf(E)!==-1)return In;if(KE(u,t)===WL)return Q0;if(mb.get(e[u])===lb||(g===k0||g===U0)&&mb.get(e[o])===lb||g===DE||E===DE||g===OE||[fh,Ab,xm].indexOf(g)===-1&&E===OE||[M0,cm,D9,ff,pf].indexOf(E)!==-1||KE(u,t)===um||cw(lw,um,u,t)||cw([M0,cm],ub,u,t)||cw(zE,zE,u,t))return In;if(g===fh)return Q0;if(g===lw||E===lw)return In;if(E===cb||g===cb)return Q0;if([Ab,xm,ub].indexOf(E)!==-1||g===N9||x===fb&&K9.indexOf(g)!==-1||g===pf&&E===fb||E===HE||nu.indexOf(E)!==-1&&g===hl||nu.indexOf(g)!==-1&&E===hl||g===Bm&&[gg,k0,U0].indexOf(E)!==-1||[gg,k0,U0].indexOf(g)!==-1&&E===bm||nu.indexOf(g)!==-1&&jE.indexOf(E)!==-1||jE.indexOf(g)!==-1&&nu.indexOf(E)!==-1||[Bm,bm].indexOf(g)!==-1&&(E===hl||[um,xm].indexOf(E)!==-1&&t[o+1]===hl)||[um,xm].indexOf(g)!==-1&&E===hl||g===hl&&[hl,pf,ff].indexOf(E)!==-1)return In;if([hl,pf,ff,M0,cm].indexOf(E)!==-1)for(var F=u;F>=0;){var P=t[F];if(P===hl)return In;if([pf,ff].indexOf(P)!==-1)F--;else break}if([Bm,bm].indexOf(E)!==-1)for(var F=[M0,cm].indexOf(g)!==-1?h:u;F>=0;){var P=t[F];if(P===hl)return In;if([pf,ff].indexOf(P)!==-1)F--;else break}if(pb===g&&[pb,_y,hb,db].indexOf(E)!==-1||[_y,hb].indexOf(g)!==-1&&[_y,wy].indexOf(E)!==-1||[wy,db].indexOf(g)!==-1&&E===wy||VE.indexOf(g)!==-1&&[HE,bm].indexOf(E)!==-1||VE.indexOf(E)!==-1&&g===Bm||nu.indexOf(g)!==-1&&nu.indexOf(E)!==-1||g===ff&&nu.indexOf(E)!==-1||nu.concat(hl).indexOf(g)!==-1&&E===um&&j9.indexOf(e[o])===-1||nu.concat(hl).indexOf(E)!==-1&&g===cm)return In;if(g===Aw&&E===Aw){for(var C=r[u],D=1;C>0&&(C--,t[C]===Aw);)D++;if(D%2!==0)return In}return g===k0&&E===U0?In:Q0},q9=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=G9(e,t.lineBreak),i=r[0],A=r[1],u=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(A=A.map(function(o){return[hl,ud,ZL].indexOf(o)!==-1?gg:o}));var h=t.wordBreak==="keep-all"?u.map(function(o,g){return o&&e[g]>=19968&&e[g]<=40959}):void 0;return[i,A,h]},W9=function(){function e(t,r,i,A){this.codePoints=t,this.required=r===XL,this.start=i,this.end=A}return e.prototype.slice=function(){return ms.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Z9=function(e,t){var r=d1(e),i=q9(r,t),A=i[0],u=i[1],h=i[2],o=r.length,g=0,x=0;return{next:function(){if(x>=o)return{done:!0,value:null};for(var E=In;x<o&&(E=$9(r,u,A,++x,h))===In;);if(E!==In||x===o){var F=new W9(r,E,g,x);return g=x,{value:F,done:!1}}return{done:!0,value:null}}}},X9=1,Y9=2,Mg=4,GE=8,pv=10,$E=47,Om=92,J9=9,eV=32,R0=34,hm=61,tV=35,rV=36,nV=37,N0=39,D0=40,dm=41,iV=95,Ra=45,sV=33,oV=60,aV=62,lV=64,AV=91,cV=93,uV=61,hV=123,O0=63,dV=125,qE=124,fV=126,pV=128,WE=65533,uw=42,gd=43,mV=44,gV=58,yV=59,yg=46,vV=0,_V=8,wV=11,xV=14,bV=31,BV=127,cc=-1,JL=48,eM=97,tM=101,CV=102,SV=117,EV=122,rM=65,nM=69,iM=70,FV=85,IV=90,qo=function(e){return e>=JL&&e<=57},TV=function(e){return e>=55296&&e<=57343},mf=function(e){return qo(e)||e>=rM&&e<=iM||e>=eM&&e<=CV},PV=function(e){return e>=eM&&e<=EV},LV=function(e){return e>=rM&&e<=IV},MV=function(e){return PV(e)||LV(e)},kV=function(e){return e>=pV},z0=function(e){return e===pv||e===J9||e===eV},mv=function(e){return MV(e)||kV(e)||e===iV},ZE=function(e){return mv(e)||qo(e)||e===Ra},UV=function(e){return e>=vV&&e<=_V||e===wV||e>=xV&&e<=bV||e===BV},nh=function(e,t){return e!==Om?!1:t!==pv},H0=function(e,t,r){return e===Ra?mv(t)||nh(t,r):mv(e)?!0:!!(e===Om&&nh(e,t))},hw=function(e,t,r){return e===gd||e===Ra?qo(t)?!0:t===yg&&qo(r):qo(e===yg?t:e)},QV=function(e){var t=0,r=1;(e[t]===gd||e[t]===Ra)&&(e[t]===Ra&&(r=-1),t++);for(var i=[];qo(e[t]);)i.push(e[t++]);var A=i.length?parseInt(ms.apply(void 0,i),10):0;e[t]===yg&&t++;for(var u=[];qo(e[t]);)u.push(e[t++]);var h=u.length,o=h?parseInt(ms.apply(void 0,u),10):0;(e[t]===nM||e[t]===tM)&&t++;var g=1;(e[t]===gd||e[t]===Ra)&&(e[t]===Ra&&(g=-1),t++);for(var x=[];qo(e[t]);)x.push(e[t++]);var E=x.length?parseInt(ms.apply(void 0,x),10):0;return r*(A+o*Math.pow(10,-h))*Math.pow(10,g*E)},RV={type:2},NV={type:3},DV={type:4},OV={type:13},zV={type:8},HV={type:21},jV={type:9},VV={type:10},KV={type:11},GV={type:12},$V={type:14},j0={type:23},qV={type:1},WV={type:25},ZV={type:24},XV={type:26},YV={type:27},JV={type:28},eK={type:29},tK={type:31},yb={type:32},sM=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(d1(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==yb;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case R0:return this.consumeStringToken(R0);case tV:var r=this.peekCodePoint(0),i=this.peekCodePoint(1),A=this.peekCodePoint(2);if(ZE(r)||nh(i,A)){var u=H0(r,i,A)?Y9:X9,h=this.consumeName();return{type:5,value:h,flags:u}}break;case rV:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),OV;break;case N0:return this.consumeStringToken(N0);case D0:return RV;case dm:return NV;case uw:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),$V;break;case gd:if(hw(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case mV:return DV;case Ra:var o=t,g=this.peekCodePoint(0),x=this.peekCodePoint(1);if(hw(o,g,x))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(H0(o,g,x))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(g===Ra&&x===aV)return this.consumeCodePoint(),this.consumeCodePoint(),ZV;break;case yg:if(hw(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case $E:if(this.peekCodePoint(0)===uw)for(this.consumeCodePoint();;){var E=this.consumeCodePoint();if(E===uw&&(E=this.consumeCodePoint(),E===$E))return this.consumeToken();if(E===cc)return this.consumeToken()}break;case gV:return XV;case yV:return YV;case oV:if(this.peekCodePoint(0)===sV&&this.peekCodePoint(1)===Ra&&this.peekCodePoint(2)===Ra)return this.consumeCodePoint(),this.consumeCodePoint(),WV;break;case lV:var F=this.peekCodePoint(0),P=this.peekCodePoint(1),C=this.peekCodePoint(2);if(H0(F,P,C)){var h=this.consumeName();return{type:7,value:h}}break;case AV:return JV;case Om:if(nh(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case cV:return eK;case uV:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),zV;break;case hV:return KV;case dV:return GV;case SV:case FV:var D=this.peekCodePoint(0),k=this.peekCodePoint(1);return D===gd&&(mf(k)||k===O0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case qE:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),jV;if(this.peekCodePoint(0)===qE)return this.consumeCodePoint(),HV;break;case fV:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),VV;break;case cc:return yb}return z0(t)?(this.consumeWhiteSpace(),tK):qo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):mv(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:ms(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();mf(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var i=!1;r===O0&&t.length<6;)t.push(r),r=this.consumeCodePoint(),i=!0;if(i){var A=parseInt(ms.apply(void 0,t.map(function(g){return g===O0?JL:g})),16),u=parseInt(ms.apply(void 0,t.map(function(g){return g===O0?iM:g})),16);return{type:30,start:A,end:u}}var h=parseInt(ms.apply(void 0,t),16);if(this.peekCodePoint(0)===Ra&&mf(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];mf(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var u=parseInt(ms.apply(void 0,o),16);return{type:30,start:h,end:u}}else return{type:30,start:h,end:h}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===D0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===D0?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===cc)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===N0||r===R0){var i=this.consumeStringToken(this.consumeCodePoint());return i.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===cc||this.peekCodePoint(0)===dm)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),j0)}for(;;){var A=this.consumeCodePoint();if(A===cc||A===dm)return{type:22,value:ms.apply(void 0,t)};if(z0(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===cc||this.peekCodePoint(0)===dm?(this.consumeCodePoint(),{type:22,value:ms.apply(void 0,t)}):(this.consumeBadUrlRemnants(),j0);if(A===R0||A===N0||A===D0||UV(A))return this.consumeBadUrlRemnants(),j0;if(A===Om)if(nh(A,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),j0;else t.push(A)}},e.prototype.consumeWhiteSpace=function(){for(;z0(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===dm||t===cc)return;nh(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,i="";t>0;){var A=Math.min(r,t);i+=ms.apply(void 0,this._value.splice(0,A)),t-=A}return this._value.shift(),i},e.prototype.consumeStringToken=function(t){var r="",i=0;do{var A=this._value[i];if(A===cc||A===void 0||A===t)return r+=this.consumeStringSlice(i),{type:0,value:r};if(A===pv)return this._value.splice(0,i),qV;if(A===Om){var u=this._value[i+1];u!==cc&&u!==void 0&&(u===pv?(r+=this.consumeStringSlice(i),i=-1,this._value.shift()):nh(A,u)&&(r+=this.consumeStringSlice(i),r+=ms(this.consumeEscapedCodePoint()),i=-1))}i++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=Mg,i=this.peekCodePoint(0);for((i===gd||i===Ra)&&t.push(this.consumeCodePoint());qo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(i===yg&&qo(A))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=GE;qo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),A=this.peekCodePoint(1);var u=this.peekCodePoint(2);if((i===nM||i===tM)&&((A===gd||A===Ra)&&qo(u)||qo(A)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=GE;qo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[QV(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],i=t[1],A=this.peekCodePoint(0),u=this.peekCodePoint(1),h=this.peekCodePoint(2);if(H0(A,u,h)){var o=this.consumeName();return{type:15,number:r,flags:i,unit:o}}return A===nV?(this.consumeCodePoint(),{type:16,number:r,flags:i}):{type:17,number:r,flags:i}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(mf(t)){for(var r=ms(t);mf(this.peekCodePoint(0))&&r.length<6;)r+=ms(this.consumeCodePoint());z0(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(r,16);return i===0||TV(i)||i>1114111?WE:i}return t===cc?WE:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(ZE(r))t+=ms(r);else if(nh(r,this.peekCodePoint(0)))t+=ms(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),oM=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new sM;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},i=this.consumeToken();;){if(i.type===32||nK(i,t))return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue()),i=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(i.type===32||i.type===3)return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?yb:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),kg=function(e){return e.type===15},Lp=function(e){return e.type===17},ai=function(e){return e.type===20},rK=function(e){return e.type===0},vb=function(e,t){return ai(e)&&e.value===t},aM=function(e){return e.type!==31},Bp=function(e){return e.type!==31&&e.type!==4},Ec=function(e){var t=[],r=[];return e.forEach(function(i){if(i.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}i.type!==31&&r.push(i)}),r.length&&t.push(r),t},nK=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Uh=function(e){return e.type===17||e.type===15},Is=function(e){return e.type===16||Uh(e)},lM=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},_o={type:17,number:0,flags:Mg},pB={type:16,number:50,flags:Mg},ph={type:16,number:100,flags:Mg},Cm=function(e,t,r){var i=e[0],A=e[1];return[bi(i,t),bi(typeof A<"u"?A:i,r)]},bi=function(e,t){if(e.type===16)return e.number/100*t;if(kg(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},AM="deg",cM="grad",uM="rad",hM="turn",f1={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case AM:return Math.PI*t.number/180;case cM:return Math.PI/200*t.number;case uM:return t.number;case hM:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},dM=function(e){return e.type===15&&(e.unit===AM||e.unit===cM||e.unit===uM||e.unit===hM)},fM=function(e){var t=e.filter(ai).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[_o,_o];case"to top":case"bottom":return zl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[_o,ph];case"to right":case"left":return zl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ph,ph];case"to bottom":case"top":return zl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ph,_o];case"to left":case"right":return zl(270)}return 0},zl=function(e){return Math.PI*e/180},Ih={name:"color",parse:function(e,t){if(t.type===18){var r=iK[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var i=t.value.substring(0,1),A=t.value.substring(1,2),u=t.value.substring(2,3);return mh(parseInt(i+i,16),parseInt(A+A,16),parseInt(u+u,16),1)}if(t.value.length===4){var i=t.value.substring(0,1),A=t.value.substring(1,2),u=t.value.substring(2,3),h=t.value.substring(3,4);return mh(parseInt(i+i,16),parseInt(A+A,16),parseInt(u+u,16),parseInt(h+h,16)/255)}if(t.value.length===6){var i=t.value.substring(0,2),A=t.value.substring(2,4),u=t.value.substring(4,6);return mh(parseInt(i,16),parseInt(A,16),parseInt(u,16),1)}if(t.value.length===8){var i=t.value.substring(0,2),A=t.value.substring(2,4),u=t.value.substring(4,6),h=t.value.substring(6,8);return mh(parseInt(i,16),parseInt(A,16),parseInt(u,16),parseInt(h,16)/255)}}if(t.type===20){var o=du[t.value.toUpperCase()];if(typeof o<"u")return o}return du.TRANSPARENT}},Th=function(e){return(255&e)===0},so=function(e){var t=255&e,r=255&e>>8,i=255&e>>16,A=255&e>>24;return t<255?"rgba("+A+","+i+","+r+","+t/255+")":"rgb("+A+","+i+","+r+")"},mh=function(e,t,r,i){return(e<<24|t<<16|r<<8|Math.round(i*255)<<0)>>>0},XE=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},YE=function(e,t){var r=t.filter(Bp);if(r.length===3){var i=r.map(XE),A=i[0],u=i[1],h=i[2];return mh(A,u,h,1)}if(r.length===4){var o=r.map(XE),A=o[0],u=o[1],h=o[2],g=o[3];return mh(A,u,h,g)}return 0};function dw(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var JE=function(e,t){var r=t.filter(Bp),i=r[0],A=r[1],u=r[2],h=r[3],o=(i.type===17?zl(i.number):f1.parse(e,i))/(Math.PI*2),g=Is(A)?A.number/100:0,x=Is(u)?u.number/100:0,E=typeof h<"u"&&Is(h)?bi(h,1):1;if(g===0)return mh(x*255,x*255,x*255,1);var F=x<=.5?x*(g+1):x+g-x*g,P=x*2-F,C=dw(P,F,o+1/3),D=dw(P,F,o),k=dw(P,F,o-1/3);return mh(C*255,D*255,k*255,E)},iK={hsl:JE,hsla:JE,rgb:YE,rgba:YE},zm=function(e,t){return Ih.parse(e,oM.create(t).parseComponentValue())},du={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},sK={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(ai(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},oK={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},p1=function(e,t){var r=Ih.parse(e,t[0]),i=t[1];return i&&Is(i)?{color:r,stop:i}:{color:r,stop:null}},e4=function(e,t){var r=e[0],i=e[e.length-1];r.stop===null&&(r.stop=_o),i.stop===null&&(i.stop=ph);for(var A=[],u=0,h=0;h<e.length;h++){var o=e[h].stop;if(o!==null){var g=bi(o,t);g>u?A.push(g):A.push(u),u=g}else A.push(null)}for(var x=null,h=0;h<A.length;h++){var E=A[h];if(E===null)x===null&&(x=h);else if(x!==null){for(var F=h-x,P=A[x-1],C=(E-P)/(F+1),D=1;D<=F;D++)A[x+D-1]=C*D;x=null}}return e.map(function(k,j){var U=k.color;return{color:U,stop:Math.max(Math.min(1,A[j]/t),0)}})},aK=function(e,t,r){var i=t/2,A=r/2,u=bi(e[0],t)-i,h=A-bi(e[1],r);return(Math.atan2(h,u)+Math.PI*2)%(Math.PI*2)},lK=function(e,t,r){var i=typeof e=="number"?e:aK(e,t,r),A=Math.abs(t*Math.sin(i))+Math.abs(r*Math.cos(i)),u=t/2,h=r/2,o=A/2,g=Math.sin(i-Math.PI/2)*o,x=Math.cos(i-Math.PI/2)*o;return[A,u-x,u+x,h-g,h+g]},xA=function(e,t){return Math.sqrt(e*e+t*t)},t4=function(e,t,r,i,A){var u=[[0,0],[0,t],[e,0],[e,t]];return u.reduce(function(h,o){var g=o[0],x=o[1],E=xA(r-g,i-x);return(A?E<h.optimumDistance:E>h.optimumDistance)?{optimumCorner:o,optimumDistance:E}:h},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},AK=function(e,t,r,i,A){var u=0,h=0;switch(e.size){case 0:e.shape===0?u=h=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-A)):e.shape===1&&(u=Math.min(Math.abs(t),Math.abs(t-i)),h=Math.min(Math.abs(r),Math.abs(r-A)));break;case 2:if(e.shape===0)u=h=Math.min(xA(t,r),xA(t,r-A),xA(t-i,r),xA(t-i,r-A));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-A))/Math.min(Math.abs(t),Math.abs(t-i)),g=t4(i,A,t,r,!0),x=g[0],E=g[1];u=xA(x-t,(E-r)/o),h=o*u}break;case 1:e.shape===0?u=h=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-A)):e.shape===1&&(u=Math.max(Math.abs(t),Math.abs(t-i)),h=Math.max(Math.abs(r),Math.abs(r-A)));break;case 3:if(e.shape===0)u=h=Math.max(xA(t,r),xA(t,r-A),xA(t-i,r),xA(t-i,r-A));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-A))/Math.max(Math.abs(t),Math.abs(t-i)),F=t4(i,A,t,r,!1),x=F[0],E=F[1];u=xA(x-t,(E-r)/o),h=o*u}break}return Array.isArray(e.size)&&(u=bi(e.size[0],i),h=e.size.length===2?bi(e.size[1],A):u),[u,h]},cK=function(e,t){var r=zl(180),i=[];return Ec(t).forEach(function(A,u){if(u===0){var h=A[0];if(h.type===20&&h.value==="to"){r=fM(A);return}else if(dM(h)){r=f1.parse(e,h);return}}var o=p1(e,A);i.push(o)}),{angle:r,stops:i,type:1}},V0=function(e,t){var r=zl(180),i=[];return Ec(t).forEach(function(A,u){if(u===0){var h=A[0];if(h.type===20&&["top","left","right","bottom"].indexOf(h.value)!==-1){r=fM(A);return}else if(dM(h)){r=(f1.parse(e,h)+zl(270))%zl(360);return}}var o=p1(e,A);i.push(o)}),{angle:r,stops:i,type:1}},uK=function(e,t){var r=zl(180),i=[],A=1,u=0,h=3,o=[];return Ec(t).forEach(function(g,x){var E=g[0];if(x===0){if(ai(E)&&E.value==="linear"){A=1;return}else if(ai(E)&&E.value==="radial"){A=2;return}}if(E.type===18){if(E.name==="from"){var F=Ih.parse(e,E.values[0]);i.push({stop:_o,color:F})}else if(E.name==="to"){var F=Ih.parse(e,E.values[0]);i.push({stop:ph,color:F})}else if(E.name==="color-stop"){var P=E.values.filter(Bp);if(P.length===2){var F=Ih.parse(e,P[1]),C=P[0];Lp(C)&&i.push({stop:{type:16,number:C.number*100,flags:C.flags},color:F})}}}}),A===1?{angle:(r+zl(180))%zl(360),stops:i,type:A}:{size:h,shape:u,stops:i,position:o,type:A}},pM="closest-side",mM="farthest-side",gM="closest-corner",yM="farthest-corner",vM="circle",_M="ellipse",wM="cover",xM="contain",hK=function(e,t){var r=0,i=3,A=[],u=[];return Ec(t).forEach(function(h,o){var g=!0;if(o===0){var x=!1;g=h.reduce(function(F,P){if(x)if(ai(P))switch(P.value){case"center":return u.push(pB),F;case"top":case"left":return u.push(_o),F;case"right":case"bottom":return u.push(ph),F}else(Is(P)||Uh(P))&&u.push(P);else if(ai(P))switch(P.value){case vM:return r=0,!1;case _M:return r=1,!1;case"at":return x=!0,!1;case pM:return i=0,!1;case wM:case mM:return i=1,!1;case xM:case gM:return i=2,!1;case yM:return i=3,!1}else if(Uh(P)||Is(P))return Array.isArray(i)||(i=[]),i.push(P),!1;return F},g)}if(g){var E=p1(e,h);A.push(E)}}),{size:i,shape:r,stops:A,position:u,type:2}},K0=function(e,t){var r=0,i=3,A=[],u=[];return Ec(t).forEach(function(h,o){var g=!0;if(o===0?g=h.reduce(function(E,F){if(ai(F))switch(F.value){case"center":return u.push(pB),!1;case"top":case"left":return u.push(_o),!1;case"right":case"bottom":return u.push(ph),!1}else if(Is(F)||Uh(F))return u.push(F),!1;return E},g):o===1&&(g=h.reduce(function(E,F){if(ai(F))switch(F.value){case vM:return r=0,!1;case _M:return r=1,!1;case xM:case pM:return i=0,!1;case mM:return i=1,!1;case gM:return i=2,!1;case wM:case yM:return i=3,!1}else if(Uh(F)||Is(F))return Array.isArray(i)||(i=[]),i.push(F),!1;return E},g)),g){var x=p1(e,h);A.push(x)}}),{size:i,shape:r,stops:A,position:u,type:2}},dK=function(e){return e.type===1},fK=function(e){return e.type===2},mB={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var i=bM[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function pK(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!bM[e.name])}var bM={"linear-gradient":cK,"-moz-linear-gradient":V0,"-ms-linear-gradient":V0,"-o-linear-gradient":V0,"-webkit-linear-gradient":V0,"radial-gradient":hK,"-moz-radial-gradient":K0,"-ms-radial-gradient":K0,"-o-radial-gradient":K0,"-webkit-radial-gradient":K0,"-webkit-gradient":uK},mK={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(i){return Bp(i)&&pK(i)}).map(function(i){return mB.parse(e,i)})}},gK={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(ai(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},yK={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Ec(t).map(function(r){return r.filter(Is)}).map(lM)}},vK={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Ec(t).map(function(r){return r.filter(ai).map(function(i){return i.value}).join(" ")}).map(_K)}},_K=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ep;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(ep||(ep={}));var wK={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Ec(t).map(function(r){return r.filter(xK)})}},xK=function(e){return ai(e)||Is(e)},m1=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},bK=m1("top"),BK=m1("right"),CK=m1("bottom"),SK=m1("left"),g1=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return lM(r.filter(Is))}}},EK=g1("top-left"),FK=g1("top-right"),IK=g1("bottom-right"),TK=g1("bottom-left"),y1=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},PK=y1("top"),LK=y1("right"),MK=y1("bottom"),kK=y1("left"),v1=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return kg(r)?r.number:0}}},UK=v1("top"),QK=v1("right"),RK=v1("bottom"),NK=v1("left"),DK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},OK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},zK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(ai).reduce(function(r,i){return r|HK(i.value)},0)}},HK=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},jK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},VK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},gv;(function(e){e.NORMAL="normal",e.STRICT="strict"})(gv||(gv={}));var KK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return gv.STRICT;case"normal":default:return gv.NORMAL}}},GK={name:"line-height",initialValue:"normal",prefix:!1,type:4},r4=function(e,t){return ai(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Is(e)?bi(e,t):t},$K={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:mB.parse(e,t)}},qK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},_b={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},_1=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},WK=_1("top"),ZK=_1("right"),XK=_1("bottom"),YK=_1("left"),JK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(ai).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},eG={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},w1=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},tG=w1("top"),rG=w1("right"),nG=w1("bottom"),iG=w1("left"),sG={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},oG={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},aG={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&vb(t[0],"none")?[]:Ec(t).map(function(r){for(var i={color:du.TRANSPARENT,offsetX:_o,offsetY:_o,blur:_o},A=0,u=0;u<r.length;u++){var h=r[u];Uh(h)?(A===0?i.offsetX=h:A===1?i.offsetY=h:i.blur=h,A++):i.color=Ih.parse(e,h)}return i})}},lG={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},AG={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=hG[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},cG=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},uG=function(e){var t=e.filter(function(g){return g.type===17}).map(function(g){return g.number}),r=t[0],i=t[1];t[2],t[3];var A=t[4],u=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var h=t[12],o=t[13];return t[14],t[15],t.length===16?[r,i,A,u,h,o]:null},hG={matrix:cG,matrix3d:uG},n4={type:16,number:50,flags:Mg},dG=[n4,n4],fG={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Is);return r.length!==2?dG:[r[0],r[1]]}},pG={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Hm;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Hm||(Hm={}));var mG={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Hm.BREAK_ALL;case"keep-all":return Hm.KEEP_ALL;case"normal":default:return Hm.NORMAL}}},gG={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Lp(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},BM={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},yG={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Lp(t)?t.number:1}},vG={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_G={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(ai).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},wG={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],i=[];return t.forEach(function(A){switch(A.type){case 20:case 0:r.push(A.value);break;case 17:r.push(A.number.toString());break;case 4:i.push(r.join(" ")),r.length=0;break}}),r.length&&i.push(r.join(" ")),i.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},xG={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},bG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Lp(t))return t.number;if(ai(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},BG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(ai).map(function(r){return r.value})}},CG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Gs=function(e,t){return(e&t)!==0},SG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},EG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var i=[],A=t.filter(aM),u=0;u<A.length;u++){var h=A[u],o=A[u+1];if(h.type===20){var g=o&&Lp(o)?o.number:1;i.push({counter:h.value,increment:g})}}return i}},FG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],i=t.filter(aM),A=0;A<i.length;A++){var u=i[A],h=i[A+1];if(ai(u)&&u.value!=="none"){var o=h&&Lp(h)?h.number:0;r.push({counter:u.value,reset:o})}}return r}},IG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(kg).map(function(r){return BM.parse(e,r)})}},TG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var i=[],A=t.filter(rK);if(A.length%2!==0)return null;for(var u=0;u<A.length;u+=2){var h=A[u].value,o=A[u+1].value;i.push({open:h,close:o})}return i}},i4=function(e,t,r){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?r?i.open:i.close:""},PG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&vb(t[0],"none")?[]:Ec(t).map(function(r){for(var i={color:255,offsetX:_o,offsetY:_o,blur:_o,spread:_o,inset:!1},A=0,u=0;u<r.length;u++){var h=r[u];vb(h,"inset")?i.inset=!0:Uh(h)?(A===0?i.offsetX=h:A===1?i.offsetY=h:A===2?i.blur=h:i.spread=h,A++):i.color=Ih.parse(e,h)}return i})}},LG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],i=[];return t.filter(ai).forEach(function(A){switch(A.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2);break}}),r.forEach(function(A){i.indexOf(A)===-1&&i.push(A)}),i}},MG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},kG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return kg(t)?t.number:0}},UG=function(){function e(t,r){var i,A;this.animationDuration=Fr(t,IG,r.animationDuration),this.backgroundClip=Fr(t,sK,r.backgroundClip),this.backgroundColor=Fr(t,oK,r.backgroundColor),this.backgroundImage=Fr(t,mK,r.backgroundImage),this.backgroundOrigin=Fr(t,gK,r.backgroundOrigin),this.backgroundPosition=Fr(t,yK,r.backgroundPosition),this.backgroundRepeat=Fr(t,vK,r.backgroundRepeat),this.backgroundSize=Fr(t,wK,r.backgroundSize),this.borderTopColor=Fr(t,bK,r.borderTopColor),this.borderRightColor=Fr(t,BK,r.borderRightColor),this.borderBottomColor=Fr(t,CK,r.borderBottomColor),this.borderLeftColor=Fr(t,SK,r.borderLeftColor),this.borderTopLeftRadius=Fr(t,EK,r.borderTopLeftRadius),this.borderTopRightRadius=Fr(t,FK,r.borderTopRightRadius),this.borderBottomRightRadius=Fr(t,IK,r.borderBottomRightRadius),this.borderBottomLeftRadius=Fr(t,TK,r.borderBottomLeftRadius),this.borderTopStyle=Fr(t,PK,r.borderTopStyle),this.borderRightStyle=Fr(t,LK,r.borderRightStyle),this.borderBottomStyle=Fr(t,MK,r.borderBottomStyle),this.borderLeftStyle=Fr(t,kK,r.borderLeftStyle),this.borderTopWidth=Fr(t,UK,r.borderTopWidth),this.borderRightWidth=Fr(t,QK,r.borderRightWidth),this.borderBottomWidth=Fr(t,RK,r.borderBottomWidth),this.borderLeftWidth=Fr(t,NK,r.borderLeftWidth),this.boxShadow=Fr(t,PG,r.boxShadow),this.color=Fr(t,DK,r.color),this.direction=Fr(t,OK,r.direction),this.display=Fr(t,zK,r.display),this.float=Fr(t,jK,r.cssFloat),this.fontFamily=Fr(t,wG,r.fontFamily),this.fontSize=Fr(t,xG,r.fontSize),this.fontStyle=Fr(t,CG,r.fontStyle),this.fontVariant=Fr(t,BG,r.fontVariant),this.fontWeight=Fr(t,bG,r.fontWeight),this.letterSpacing=Fr(t,VK,r.letterSpacing),this.lineBreak=Fr(t,KK,r.lineBreak),this.lineHeight=Fr(t,GK,r.lineHeight),this.listStyleImage=Fr(t,$K,r.listStyleImage),this.listStylePosition=Fr(t,qK,r.listStylePosition),this.listStyleType=Fr(t,_b,r.listStyleType),this.marginTop=Fr(t,WK,r.marginTop),this.marginRight=Fr(t,ZK,r.marginRight),this.marginBottom=Fr(t,XK,r.marginBottom),this.marginLeft=Fr(t,YK,r.marginLeft),this.opacity=Fr(t,yG,r.opacity);var u=Fr(t,JK,r.overflow);this.overflowX=u[0],this.overflowY=u[u.length>1?1:0],this.overflowWrap=Fr(t,eG,r.overflowWrap),this.paddingTop=Fr(t,tG,r.paddingTop),this.paddingRight=Fr(t,rG,r.paddingRight),this.paddingBottom=Fr(t,nG,r.paddingBottom),this.paddingLeft=Fr(t,iG,r.paddingLeft),this.paintOrder=Fr(t,LG,r.paintOrder),this.position=Fr(t,oG,r.position),this.textAlign=Fr(t,sG,r.textAlign),this.textDecorationColor=Fr(t,vG,(i=r.textDecorationColor)!==null&&i!==void 0?i:r.color),this.textDecorationLine=Fr(t,_G,(A=r.textDecorationLine)!==null&&A!==void 0?A:r.textDecoration),this.textShadow=Fr(t,aG,r.textShadow),this.textTransform=Fr(t,lG,r.textTransform),this.transform=Fr(t,AG,r.transform),this.transformOrigin=Fr(t,fG,r.transformOrigin),this.visibility=Fr(t,pG,r.visibility),this.webkitTextStrokeColor=Fr(t,MG,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Fr(t,kG,r.webkitTextStrokeWidth),this.wordBreak=Fr(t,mG,r.wordBreak),this.zIndex=Fr(t,gG,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Th(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Gs(this.display,4)||Gs(this.display,33554432)||Gs(this.display,268435456)||Gs(this.display,536870912)||Gs(this.display,67108864)||Gs(this.display,134217728)},e}(),QG=function(){function e(t,r){this.content=Fr(t,SG,r.content),this.quotes=Fr(t,TG,r.quotes)}return e}(),s4=function(){function e(t,r){this.counterIncrement=Fr(t,EG,r.counterIncrement),this.counterReset=Fr(t,FG,r.counterReset)}return e}(),Fr=function(e,t,r){var i=new sM,A=r!==null&&typeof r<"u"?r.toString():t.initialValue;i.write(A);var u=new oM(i.read());switch(t.type){case 2:var h=u.parseComponentValue();return t.parse(e,ai(h)?h.value:t.initialValue);case 0:return t.parse(e,u.parseComponentValue());case 1:return t.parse(e,u.parseComponentValues());case 4:return u.parseComponentValue();case 3:switch(t.format){case"angle":return f1.parse(e,u.parseComponentValue());case"color":return Ih.parse(e,u.parseComponentValue());case"image":return mB.parse(e,u.parseComponentValue());case"length":var o=u.parseComponentValue();return Uh(o)?o:_o;case"length-percentage":var g=u.parseComponentValue();return Is(g)?g:_o;case"time":return BM.parse(e,u.parseComponentValue())}break}},RG="data-html2canvas-debug",NG=function(e){var t=e.getAttribute(RG);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},wb=function(e,t){var r=NG(e);return r===1||t===r},Fc=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,wb(r,3))debugger;this.styles=new UG(t,window.getComputedStyle(r,null)),Bb(r)&&(this.styles.animationDuration.some(function(i){return i>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=h1(this.context,r),wb(r,4)&&(this.flags|=16)}return e}(),DG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",o4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var G0=0;G0<o4.length;G0++)Sm[o4.charCodeAt(G0)]=G0;var OG=function(e){var t=e.length*.75,r=e.length,i,A=0,u,h,o,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var x=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),E=Array.isArray(x)?x:new Uint8Array(x);for(i=0;i<r;i+=4)u=Sm[e.charCodeAt(i)],h=Sm[e.charCodeAt(i+1)],o=Sm[e.charCodeAt(i+2)],g=Sm[e.charCodeAt(i+3)],E[A++]=u<<2|h>>4,E[A++]=(h&15)<<4|o>>2,E[A++]=(o&3)<<6|g&63;return x},zG=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},HG=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},Fd=5,gB=11,fw=2,jG=gB-Fd,CM=65536>>Fd,VG=1<<Fd,pw=VG-1,KG=1024>>Fd,GG=CM+KG,$G=GG,qG=32,WG=$G+qG,ZG=65536>>gB,XG=1<<jG,YG=XG-1,a4=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},JG=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},e$=function(e,t){var r=OG(e),i=Array.isArray(r)?HG(r):new Uint32Array(r),A=Array.isArray(r)?zG(r):new Uint16Array(r),u=24,h=a4(A,u/2,i[4]/2),o=i[5]===2?a4(A,(u+i[4])/2):JG(i,Math.ceil((u+i[4])/4));return new t$(i[0],i[1],i[2],i[3],h,o)},t$=function(){function e(t,r,i,A,u,h){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=A,this.index=u,this.data=h}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Fd],r=(r<<fw)+(t&pw),this.data[r];if(t<=65535)return r=this.index[CM+(t-55296>>Fd)],r=(r<<fw)+(t&pw),this.data[r];if(t<this.highStart)return r=WG-ZG+(t>>gB),r=this.index[r],r+=t>>Fd&YG,r=this.index[r],r=(r<<fw)+(t&pw),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),l4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r$=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $0=0;$0<l4.length;$0++)r$[l4.charCodeAt($0)]=$0;var n$=1,mw=2,gw=3,A4=4,c4=5,i$=7,u4=8,yw=9,vw=10,h4=11,d4=12,f4=13,p4=14,_w=15,s$=function(e){for(var t=[],r=0,i=e.length;r<i;){var A=e.charCodeAt(r++);if(A>=55296&&A<=56319&&r<i){var u=e.charCodeAt(r++);(u&64512)===56320?t.push(((A&1023)<<10)+(u&1023)+65536):(t.push(A),r--)}else t.push(A)}return t},o$=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],A=-1,u="";++A<r;){var h=e[A];h<=65535?i.push(h):(h-=65536,i.push((h>>10)+55296,h%1024+56320)),(A+1===r||i.length>16384)&&(u+=String.fromCharCode.apply(String,i),i.length=0)}return u},a$=e$(DG),Ul="×",ww="÷",l$=function(e){return a$.get(e)},A$=function(e,t,r){var i=r-2,A=t[i],u=t[r-1],h=t[r];if(u===mw&&h===gw)return Ul;if(u===mw||u===gw||u===A4||h===mw||h===gw||h===A4)return ww;if(u===u4&&[u4,yw,h4,d4].indexOf(h)!==-1||(u===h4||u===yw)&&(h===yw||h===vw)||(u===d4||u===vw)&&h===vw||h===f4||h===c4||h===i$||u===n$)return Ul;if(u===f4&&h===p4){for(;A===c4;)A=t[--i];if(A===p4)return Ul}if(u===_w&&h===_w){for(var o=0;A===_w;)o++,A=t[--i];if(o%2===0)return Ul}return ww},c$=function(e){var t=s$(e),r=t.length,i=0,A=0,u=t.map(l$);return{next:function(){if(i>=r)return{done:!0,value:null};for(var h=Ul;i<r&&(h=A$(t,u,++i))===Ul;);if(h!==Ul||i===r){var o=o$.apply(null,t.slice(A,i));return A=i,{value:o,done:!1}}return{done:!0,value:null}}}},u$=function(e){for(var t=c$(e),r=[],i;!(i=t.next()).done;)i.value&&r.push(i.value.slice());return r},h$=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height=t+"px",i.style.display="block",e.body.appendChild(i),r.selectNode(i);var A=r.getBoundingClientRect(),u=Math.round(A.height);if(e.body.removeChild(i),u===t)return!0}}return!1},d$=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var i=t.firstChild,A=d1(i.data).map(function(g){return ms(g)}),u=0,h={},o=A.every(function(g,x){r.setStart(i,u),r.setEnd(i,u+g.length);var E=r.getBoundingClientRect();u+=g.length;var F=E.x>h.x||E.y>h.y;return h=E,x===0?!0:F});return e.body.removeChild(t),o},f$=function(){return typeof new Image().crossOrigin<"u"},p$=function(){return typeof new XMLHttpRequest().responseType=="string"},m$=function(e){var t=new Image,r=e.createElement("canvas"),i=r.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},m4=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},g$=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,r,r);var A=new Image,u=t.toDataURL();A.src=u;var h=xb(r,r,0,0,A);return i.fillStyle="red",i.fillRect(0,0,r,r),g4(h).then(function(o){i.drawImage(o,0,0);var g=i.getImageData(0,0,r,r).data;i.fillStyle="red",i.fillRect(0,0,r,r);var x=e.createElement("div");return x.style.backgroundImage="url("+u+")",x.style.height=r+"px",m4(g)?g4(xb(r,r,0,0,x)):Promise.reject(!1)}).then(function(o){return i.drawImage(o,0,0),m4(i.getImageData(0,0,r,r).data)}).catch(function(){return!1})},xb=function(e,t,r,i,A){var u="http://www.w3.org/2000/svg",h=document.createElementNS(u,"svg"),o=document.createElementNS(u,"foreignObject");return h.setAttributeNS(null,"width",e.toString()),h.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",i.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),h.appendChild(o),o.appendChild(A),h},g4=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){return t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},vo={get SUPPORT_RANGE_BOUNDS(){var e=h$(document);return Object.defineProperty(vo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=vo.SUPPORT_RANGE_BOUNDS&&d$(document);return Object.defineProperty(vo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=m$(document);return Object.defineProperty(vo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?g$(document):Promise.resolve(!1);return Object.defineProperty(vo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=f$();return Object.defineProperty(vo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=p$();return Object.defineProperty(vo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(vo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(vo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},jm=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),y$=function(e,t,r,i){var A=w$(t,r),u=[],h=0;return A.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(vo.SUPPORT_RANGE_BOUNDS){var g=y4(i,h,o.length).getClientRects();if(g.length>1){var x=yB(o),E=0;x.forEach(function(P){u.push(new jm(P,_u.fromDOMRectList(e,y4(i,E+h,P.length).getClientRects()))),E+=P.length})}else u.push(new jm(o,_u.fromDOMRectList(e,g)))}else{var F=i.splitText(o.length);u.push(new jm(o,v$(e,i))),i=F}else vo.SUPPORT_RANGE_BOUNDS||(i=i.splitText(o.length));h+=o.length}),u},v$=function(e,t){var r=t.ownerDocument;if(r){var i=r.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var A=t.parentNode;if(A){A.replaceChild(i,t);var u=h1(e,i);return i.firstChild&&A.replaceChild(i.firstChild,i),u}}return _u.EMPTY},y4=function(e,t,r){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var A=i.createRange();return A.setStart(e,t),A.setEnd(e,t+r),A},yB=function(e){if(vo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return u$(e)},_$=function(e,t){if(vo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(i){return i.segment})}return b$(e,t)},w$=function(e,t){return t.letterSpacing!==0?yB(e):_$(e,t)},x$=[32,160,4961,65792,65793,4153,4241],b$=function(e,t){for(var r=Z9(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),i=[],A,u=function(){if(A.value){var h=A.value.slice(),o=d1(h),g="";o.forEach(function(x){x$.indexOf(x)===-1?g+=ms(x):(g.length&&i.push(g),i.push(ms(x)),g="")}),g.length&&i.push(g)}};!(A=r.next()).done;)u();return i},B$=function(){function e(t,r,i){this.text=C$(r.data,i.textTransform),this.textBounds=y$(t,this.text,i,r)}return e}(),C$=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(S$,E$);case 2:return e.toUpperCase();default:return e}},S$=/(^|\s|:|-|\(|\))([a-z])/g,E$=function(e,t,r){return e.length>0?t+r.toUpperCase():e},SM=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;return A.src=i.currentSrc||i.src,A.intrinsicWidth=i.naturalWidth,A.intrinsicHeight=i.naturalHeight,A.context.cache.addImage(A.src),A}return t}(Fc),EM=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;return A.canvas=i,A.intrinsicWidth=i.width,A.intrinsicHeight=i.height,A}return t}(Fc),FM=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this,u=new XMLSerializer,h=h1(r,i);return i.setAttribute("width",h.width+"px"),i.setAttribute("height",h.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(u.serializeToString(i)),A.intrinsicWidth=i.width.baseVal.value,A.intrinsicHeight=i.height.baseVal.value,A.context.cache.addImage(A.svg),A}return t}(Fc),IM=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;return A.value=i.value,A}return t}(Fc),bb=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;return A.start=i.start,A.reversed=typeof i.reversed=="boolean"&&i.reversed===!0,A}return t}(Fc),F$=[{type:15,flags:0,unit:"px",number:3}],I$=[{type:16,flags:0,number:50}],T$=function(e){return e.width>e.height?new _u(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new _u(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},P$=function(e){var t=e.type===L$?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},yv="checkbox",vv="radio",L$="password",v4=707406591,vB=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;switch(A.type=i.type.toLowerCase(),A.checked=i.checked,A.value=P$(i),(A.type===yv||A.type===vv)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=T$(A.bounds)),A.type){case yv:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=F$;break;case vv:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=I$;break}return A}return t}(Fc),TM=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this,u=i.options[i.selectedIndex||0];return A.value=u&&u.text||"",A}return t}(Fc),PM=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;return A.value=i.value,A}return t}(Fc),LM=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;A.src=i.src,A.width=parseInt(i.width,10)||0,A.height=parseInt(i.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){A.tree=kM(r,i.contentWindow.document.documentElement);var u=i.contentWindow.document.documentElement?zm(r,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):du.TRANSPARENT,h=i.contentWindow.document.body?zm(r,getComputedStyle(i.contentWindow.document.body).backgroundColor):du.TRANSPARENT;A.backgroundColor=Th(u)?Th(h)?A.styles.backgroundColor:h:u}}catch{}return A}return t}(Fc),M$=["OL","UL","MENU"],xy=function(e,t,r,i){for(var A=t.firstChild,u=void 0;A;A=u)if(u=A.nextSibling,UM(A)&&A.data.trim().length>0)r.textNodes.push(new B$(e,A,r.styles));else if(Of(A))if(DM(A)&&A.assignedNodes)A.assignedNodes().forEach(function(o){return xy(e,o,r,i)});else{var h=MM(e,A);h.styles.isVisible()&&(k$(A,h,i)?h.flags|=4:U$(h.styles)&&(h.flags|=2),M$.indexOf(A.tagName)!==-1&&(h.flags|=8),r.elements.push(h),A.slot,A.shadowRoot?xy(e,A.shadowRoot,h,i):!_v(A)&&!QM(A)&&!wv(A)&&xy(e,A,h,i))}},MM=function(e,t){return Cb(t)?new SM(e,t):RM(t)?new EM(e,t):QM(t)?new FM(e,t):Q$(t)?new IM(e,t):R$(t)?new bb(e,t):N$(t)?new vB(e,t):wv(t)?new TM(e,t):_v(t)?new PM(e,t):NM(t)?new LM(e,t):new Fc(e,t)},kM=function(e,t){var r=MM(e,t);return r.flags|=4,xy(e,t,r,r),r},k$=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||_B(e)&&r.styles.isTransparent()},U$=function(e){return e.isPositioned()||e.isFloating()},UM=function(e){return e.nodeType===Node.TEXT_NODE},Of=function(e){return e.nodeType===Node.ELEMENT_NODE},Bb=function(e){return Of(e)&&typeof e.style<"u"&&!by(e)},by=function(e){return typeof e.className=="object"},Q$=function(e){return e.tagName==="LI"},R$=function(e){return e.tagName==="OL"},N$=function(e){return e.tagName==="INPUT"},D$=function(e){return e.tagName==="HTML"},QM=function(e){return e.tagName==="svg"},_B=function(e){return e.tagName==="BODY"},RM=function(e){return e.tagName==="CANVAS"},_4=function(e){return e.tagName==="VIDEO"},Cb=function(e){return e.tagName==="IMG"},NM=function(e){return e.tagName==="IFRAME"},w4=function(e){return e.tagName==="STYLE"},O$=function(e){return e.tagName==="SCRIPT"},_v=function(e){return e.tagName==="TEXTAREA"},wv=function(e){return e.tagName==="SELECT"},DM=function(e){return e.tagName==="SLOT"},x4=function(e){return e.tagName.indexOf("-")>0},z$=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(i){return r.counters[i].pop()})},e.prototype.parse=function(t){var r=this,i=t.counterIncrement,A=t.counterReset,u=!0;i!==null&&i.forEach(function(o){var g=r.counters[o.counter];g&&o.increment!==0&&(u=!1,g.length||g.push(1),g[Math.max(0,g.length-1)]+=o.increment)});var h=[];return u&&A.forEach(function(o){var g=r.counters[o.counter];h.push(o.counter),g||(g=r.counters[o.counter]=[]),g.push(o.reset)}),h},e}(),b4={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},B4={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},H$={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},j$={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},gf=function(e,t,r,i,A,u){return e<t||e>r?vg(e,A,u.length>0):i.integers.reduce(function(h,o,g){for(;e>=o;)e-=o,h+=i.values[g];return h},"")+u},OM=function(e,t,r,i){var A="";do r||e--,A=i(e)+A,e/=t;while(e*t>=t);return A},ps=function(e,t,r,i,A){var u=r-t+1;return(e<0?"-":"")+(OM(Math.abs(e),u,i,function(h){return ms(Math.floor(h%u)+t)})+A)},ad=function(e,t,r){r===void 0&&(r=". ");var i=t.length;return OM(Math.abs(e),i,!1,function(A){return t[Math.floor(A%i)]})+r},bf=1,Ju=2,eh=4,Em=8,iu=function(e,t,r,i,A,u){if(e<-9999||e>9999)return vg(e,4,A.length>0);var h=Math.abs(e),o=A;if(h===0)return t[0]+o;for(var g=0;h>0&&g<=4;g++){var x=h%10;x===0&&Gs(u,bf)&&o!==""?o=t[x]+o:x>1||x===1&&g===0||x===1&&g===1&&Gs(u,Ju)||x===1&&g===1&&Gs(u,eh)&&e>100||x===1&&g>1&&Gs(u,Em)?o=t[x]+(g>0?r[g-1]:"")+o:x===1&&g>0&&(o=r[g-1]+o),h=Math.floor(h/10)}return(e<0?i:"")+o},C4="十百千萬",S4="拾佰仟萬",E4="マイナス",xw="마이너스",vg=function(e,t,r){var i=r?". ":"",A=r?"、":"",u=r?", ":"",h=r?" ":"";switch(t){case 0:return"•"+h;case 1:return"◦"+h;case 2:return"◾"+h;case 5:var o=ps(e,48,57,!0,i);return o.length<4?"0"+o:o;case 4:return ad(e,"〇一二三四五六七八九",A);case 6:return gf(e,1,3999,b4,3,i).toLowerCase();case 7:return gf(e,1,3999,b4,3,i);case 8:return ps(e,945,969,!1,i);case 9:return ps(e,97,122,!1,i);case 10:return ps(e,65,90,!1,i);case 11:return ps(e,1632,1641,!0,i);case 12:case 49:return gf(e,1,9999,B4,3,i);case 35:return gf(e,1,9999,B4,3,i).toLowerCase();case 13:return ps(e,2534,2543,!0,i);case 14:case 30:return ps(e,6112,6121,!0,i);case 15:return ad(e,"子丑寅卯辰巳午未申酉戌亥",A);case 16:return ad(e,"甲乙丙丁戊己庚辛壬癸",A);case 17:case 48:return iu(e,"零一二三四五六七八九",C4,"負",A,Ju|eh|Em);case 47:return iu(e,"零壹貳參肆伍陸柒捌玖",S4,"負",A,bf|Ju|eh|Em);case 42:return iu(e,"零一二三四五六七八九",C4,"负",A,Ju|eh|Em);case 41:return iu(e,"零壹贰叁肆伍陆柒捌玖",S4,"负",A,bf|Ju|eh|Em);case 26:return iu(e,"〇一二三四五六七八九","十百千万",E4,A,0);case 25:return iu(e,"零壱弐参四伍六七八九","拾百千万",E4,A,bf|Ju|eh);case 31:return iu(e,"영일이삼사오육칠팔구","십백천만",xw,u,bf|Ju|eh);case 33:return iu(e,"零一二三四五六七八九","十百千萬",xw,u,0);case 32:return iu(e,"零壹貳參四五六七八九","拾百千",xw,u,bf|Ju|eh);case 18:return ps(e,2406,2415,!0,i);case 20:return gf(e,1,19999,j$,3,i);case 21:return ps(e,2790,2799,!0,i);case 22:return ps(e,2662,2671,!0,i);case 22:return gf(e,1,10999,H$,3,i);case 23:return ad(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return ad(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return ps(e,3302,3311,!0,i);case 28:return ad(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",A);case 29:return ad(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",A);case 34:return ps(e,3792,3801,!0,i);case 37:return ps(e,6160,6169,!0,i);case 38:return ps(e,4160,4169,!0,i);case 39:return ps(e,2918,2927,!0,i);case 40:return ps(e,1776,1785,!0,i);case 43:return ps(e,3046,3055,!0,i);case 44:return ps(e,3174,3183,!0,i);case 45:return ps(e,3664,3673,!0,i);case 46:return ps(e,3872,3881,!0,i);case 3:default:return ps(e,48,57,!0,i)}},zM="data-html2canvas-ignore",F4=function(){function e(t,r,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=r,this.counters=new z$,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var i=this,A=V$(t,r);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var u=t.defaultView.pageXOffset,h=t.defaultView.pageYOffset,o=A.contentWindow,g=o.document,x=$$(A).then(function(){return da(i,void 0,void 0,function(){var E,F;return $o(this,function(P){switch(P.label){case 0:return this.scrolledElements.forEach(X$),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),E=this.options.onclone,F=this.clonedReferenceElement,typeof F>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:g.fonts&&g.fonts.ready?[4,g.fonts.ready]:[3,2];case 1:P.sent(),P.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,G$(g)]:[3,4];case 3:P.sent(),P.label=4;case 4:return typeof E=="function"?[2,Promise.resolve().then(function(){return E(g,F)}).then(function(){return A})]:[2,A]}})})});return g.open(),g.write(W$(document.doctype)+"<html></html>"),Z$(this.referenceElement.ownerDocument,u,h),g.replaceChild(g.adoptNode(this.documentElement),g.documentElement),g.close(),x},e.prototype.createElementClone=function(t){if(wb(t,2))debugger;if(RM(t))return this.createCanvasClone(t);if(_4(t))return this.createVideoClone(t);if(w4(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return Cb(r)&&(Cb(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),x4(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return bw(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var i=[].slice.call(r.cssRules,0).reduce(function(u,h){return h&&typeof h.cssText=="string"?u+h.cssText:u},""),A=t.cloneNode(!1);return A.textContent=i,A}}catch(u){if(this.context.logger.error("Unable to access cssRules property",u),u.name!=="SecurityError")throw u}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var A=t.cloneNode(!1);try{A.width=t.width,A.height=t.height;var u=t.getContext("2d"),h=A.getContext("2d");if(h)if(!this.options.allowTaint&&u)h.putImageData(u.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var g=o.getContextAttributes();(g==null?void 0:g.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}h.drawImage(t,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return A},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var i=r.getContext("2d");try{return i&&(i.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||i.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var A=t.ownerDocument.createElement("canvas");return A.width=t.offsetWidth,A.height=t.offsetHeight,A},e.prototype.appendChildNode=function(t,r,i){(!Of(r)||!O$(r)&&!r.hasAttribute(zM)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Of(r)||!w4(r))&&t.appendChild(this.cloneNode(r,i))},e.prototype.cloneChildNodes=function(t,r,i){for(var A=this,u=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;u;u=u.nextSibling)if(Of(u)&&DM(u)&&typeof u.assignedNodes=="function"){var h=u.assignedNodes();h.length&&h.forEach(function(o){return A.appendChildNode(r,o,i)})}else this.appendChildNode(r,u,i)},e.prototype.cloneNode=function(t,r){if(UM(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&Of(t)&&(Bb(t)||by(t))){var A=this.createElementClone(t);A.style.transitionProperty="none";var u=i.getComputedStyle(t),h=i.getComputedStyle(t,":before"),o=i.getComputedStyle(t,":after");this.referenceElement===t&&Bb(A)&&(this.clonedReferenceElement=A),_B(A)&&eq(A);var g=this.counters.parse(new s4(this.context,u)),x=this.resolvePseudoContent(t,A,h,Vm.BEFORE);x4(t)&&(r=!0),_4(t)||this.cloneChildNodes(t,A,r),x&&A.insertBefore(x,A.firstChild);var E=this.resolvePseudoContent(t,A,o,Vm.AFTER);return E&&A.appendChild(E),this.counters.pop(g),(u&&(this.options.copyStyles||by(t))&&!NM(t)||r)&&bw(u,A),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([A,t.scrollLeft,t.scrollTop]),(_v(t)||wv(t))&&(_v(A)||wv(A))&&(A.value=t.value),A}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,i,A){var u=this;if(i){var h=i.content,o=r.ownerDocument;if(!(!o||!h||h==="none"||h==="-moz-alt-content"||i.display==="none")){this.counters.parse(new s4(this.context,i));var g=new QG(this.context,i),x=o.createElement("html2canvaspseudoelement");bw(i,x),g.content.forEach(function(F){if(F.type===0)x.appendChild(o.createTextNode(F.value));else if(F.type===22){var P=o.createElement("img");P.src=F.value,P.style.opacity="1",x.appendChild(P)}else if(F.type===18){if(F.name==="attr"){var C=F.values.filter(ai);C.length&&x.appendChild(o.createTextNode(t.getAttribute(C[0].value)||""))}else if(F.name==="counter"){var D=F.values.filter(Bp),k=D[0],j=D[1];if(k&&ai(k)){var U=u.counters.getCounterValue(k.value),N=j&&ai(j)?_b.parse(u.context,j.value):3;x.appendChild(o.createTextNode(vg(U,N,!1)))}}else if(F.name==="counters"){var K=F.values.filter(Bp),k=K[0],ee=K[1],j=K[2];if(k&&ai(k)){var se=u.counters.getCounterValues(k.value),pe=j&&ai(j)?_b.parse(u.context,j.value):3,ye=ee&&ee.type===0?ee.value:"",ue=se.map(function(oe){return vg(oe,pe,!1)}).join(ye);x.appendChild(o.createTextNode(ue))}}}else if(F.type===20)switch(F.value){case"open-quote":x.appendChild(o.createTextNode(i4(g.quotes,u.quoteDepth++,!0)));break;case"close-quote":x.appendChild(o.createTextNode(i4(g.quotes,--u.quoteDepth,!1)));break;default:x.appendChild(o.createTextNode(F.value))}}),x.className=Sb+" "+Eb;var E=A===Vm.BEFORE?" "+Sb:" "+Eb;return by(r)?r.className.baseValue+=E:r.className+=E,x}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Vm;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Vm||(Vm={}));var V$=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(zM,"true"),e.body.appendChild(r),r},K$=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},G$=function(e){return Promise.all([].slice.call(e.images,0).map(K$))},$$=function(e){return new Promise(function(t,r){var i=e.contentWindow;if(!i)return r("No window assigned for iframe");var A=i.document;i.onload=e.onload=function(){i.onload=e.onload=null;var u=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(u),t(e))},50)}})},q$=["all","d","content"],bw=function(e,t){for(var r=e.length-1;r>=0;r--){var i=e.item(r);q$.indexOf(i)===-1&&t.style.setProperty(i,e.getPropertyValue(i))}return t},W$=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Z$=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},X$=function(e){var t=e[0],r=e[1],i=e[2];t.scrollLeft=r,t.scrollTop=i},Y$=":before",J$=":after",Sb="___html2canvas___pseudoelement_before",Eb="___html2canvas___pseudoelement_after",I4=`{
    content: "" !important;
    display: none !important;
}`,eq=function(e){tq(e,"."+Sb+Y$+I4+`
         .`+Eb+J$+I4)},tq=function(e,t){var r=e.ownerDocument;if(r){var i=r.createElement("style");i.textContent=t,e.appendChild(i)}},HM=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),rq=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(Cw(t)||oq(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return da(this,void 0,void 0,function(){var r,i,A,u,h=this;return $o(this,function(o){switch(o.label){case 0:return r=HM.isSameOrigin(t),i=!Bw(t)&&this._options.useCORS===!0&&vo.SUPPORT_CORS_IMAGES&&!r,A=!Bw(t)&&!r&&!Cw(t)&&typeof this._options.proxy=="string"&&vo.SUPPORT_CORS_XHR&&!i,!r&&this._options.allowTaint===!1&&!Bw(t)&&!Cw(t)&&!A&&!i?[2]:(u=t,A?[4,this.proxy(u)]:[3,2]);case 1:u=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(g,x){var E=new Image;E.onload=function(){return g(E)},E.onerror=x,(aq(u)||i)&&(E.crossOrigin="anonymous"),E.src=u,E.complete===!0&&setTimeout(function(){return g(E)},500),h._options.imageTimeout>0&&setTimeout(function(){return x("Timed out ("+h._options.imageTimeout+"ms) loading image")},h._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var A=t.substring(0,256);return new Promise(function(u,h){var o=vo.SUPPORT_RESPONSE_TYPE?"blob":"text",g=new XMLHttpRequest;g.onload=function(){if(g.status===200)if(o==="text")u(g.response);else{var F=new FileReader;F.addEventListener("load",function(){return u(F.result)},!1),F.addEventListener("error",function(P){return h(P)},!1),F.readAsDataURL(g.response)}else h("Failed to proxy resource "+A+" with status code "+g.status)},g.onerror=h;var x=i.indexOf("?")>-1?"&":"?";if(g.open("GET",""+i+x+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&g instanceof XMLHttpRequest&&(g.responseType=o),r._options.imageTimeout){var E=r._options.imageTimeout;g.timeout=E,g.ontimeout=function(){return h("Timed out ("+E+"ms) proxying "+A)}}g.send()})},e}(),nq=/^data:image\/svg\+xml/i,iq=/^data:image\/.*;base64,/i,sq=/^data:image\/.*/i,oq=function(e){return vo.SUPPORT_SVG_DRAWING||!lq(e)},Bw=function(e){return sq.test(e)},aq=function(e){return iq.test(e)},Cw=function(e){return e.substr(0,4)==="blob"},lq=function(e){return e.substr(-3).toLowerCase()==="svg"||nq.test(e)},Br=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),yf=function(e,t,r){return new Br(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},q0=function(){function e(t,r,i,A){this.type=1,this.start=t,this.startControl=r,this.endControl=i,this.end=A}return e.prototype.subdivide=function(t,r){var i=yf(this.start,this.startControl,t),A=yf(this.startControl,this.endControl,t),u=yf(this.endControl,this.end,t),h=yf(i,A,t),o=yf(A,u,t),g=yf(h,o,t);return r?new e(this.start,i,h,g):new e(g,o,u,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Dl=function(e){return e.type===1},Aq=function(){function e(t){var r=t.styles,i=t.bounds,A=Cm(r.borderTopLeftRadius,i.width,i.height),u=A[0],h=A[1],o=Cm(r.borderTopRightRadius,i.width,i.height),g=o[0],x=o[1],E=Cm(r.borderBottomRightRadius,i.width,i.height),F=E[0],P=E[1],C=Cm(r.borderBottomLeftRadius,i.width,i.height),D=C[0],k=C[1],j=[];j.push((u+g)/i.width),j.push((D+F)/i.width),j.push((h+k)/i.height),j.push((x+P)/i.height);var U=Math.max.apply(Math,j);U>1&&(u/=U,h/=U,g/=U,x/=U,F/=U,P/=U,D/=U,k/=U);var N=i.width-g,K=i.height-P,ee=i.width-F,se=i.height-k,pe=r.borderTopWidth,ye=r.borderRightWidth,ue=r.borderBottomWidth,Te=r.borderLeftWidth,Ke=bi(r.paddingTop,t.bounds.width),oe=bi(r.paddingRight,t.bounds.width),he=bi(r.paddingBottom,t.bounds.width),Ie=bi(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=u>0||h>0?Qi(i.left+Te/3,i.top+pe/3,u-Te/3,h-pe/3,qn.TOP_LEFT):new Br(i.left+Te/3,i.top+pe/3),this.topRightBorderDoubleOuterBox=u>0||h>0?Qi(i.left+N,i.top+pe/3,g-ye/3,x-pe/3,qn.TOP_RIGHT):new Br(i.left+i.width-ye/3,i.top+pe/3),this.bottomRightBorderDoubleOuterBox=F>0||P>0?Qi(i.left+ee,i.top+K,F-ye/3,P-ue/3,qn.BOTTOM_RIGHT):new Br(i.left+i.width-ye/3,i.top+i.height-ue/3),this.bottomLeftBorderDoubleOuterBox=D>0||k>0?Qi(i.left+Te/3,i.top+se,D-Te/3,k-ue/3,qn.BOTTOM_LEFT):new Br(i.left+Te/3,i.top+i.height-ue/3),this.topLeftBorderDoubleInnerBox=u>0||h>0?Qi(i.left+Te*2/3,i.top+pe*2/3,u-Te*2/3,h-pe*2/3,qn.TOP_LEFT):new Br(i.left+Te*2/3,i.top+pe*2/3),this.topRightBorderDoubleInnerBox=u>0||h>0?Qi(i.left+N,i.top+pe*2/3,g-ye*2/3,x-pe*2/3,qn.TOP_RIGHT):new Br(i.left+i.width-ye*2/3,i.top+pe*2/3),this.bottomRightBorderDoubleInnerBox=F>0||P>0?Qi(i.left+ee,i.top+K,F-ye*2/3,P-ue*2/3,qn.BOTTOM_RIGHT):new Br(i.left+i.width-ye*2/3,i.top+i.height-ue*2/3),this.bottomLeftBorderDoubleInnerBox=D>0||k>0?Qi(i.left+Te*2/3,i.top+se,D-Te*2/3,k-ue*2/3,qn.BOTTOM_LEFT):new Br(i.left+Te*2/3,i.top+i.height-ue*2/3),this.topLeftBorderStroke=u>0||h>0?Qi(i.left+Te/2,i.top+pe/2,u-Te/2,h-pe/2,qn.TOP_LEFT):new Br(i.left+Te/2,i.top+pe/2),this.topRightBorderStroke=u>0||h>0?Qi(i.left+N,i.top+pe/2,g-ye/2,x-pe/2,qn.TOP_RIGHT):new Br(i.left+i.width-ye/2,i.top+pe/2),this.bottomRightBorderStroke=F>0||P>0?Qi(i.left+ee,i.top+K,F-ye/2,P-ue/2,qn.BOTTOM_RIGHT):new Br(i.left+i.width-ye/2,i.top+i.height-ue/2),this.bottomLeftBorderStroke=D>0||k>0?Qi(i.left+Te/2,i.top+se,D-Te/2,k-ue/2,qn.BOTTOM_LEFT):new Br(i.left+Te/2,i.top+i.height-ue/2),this.topLeftBorderBox=u>0||h>0?Qi(i.left,i.top,u,h,qn.TOP_LEFT):new Br(i.left,i.top),this.topRightBorderBox=g>0||x>0?Qi(i.left+N,i.top,g,x,qn.TOP_RIGHT):new Br(i.left+i.width,i.top),this.bottomRightBorderBox=F>0||P>0?Qi(i.left+ee,i.top+K,F,P,qn.BOTTOM_RIGHT):new Br(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=D>0||k>0?Qi(i.left,i.top+se,D,k,qn.BOTTOM_LEFT):new Br(i.left,i.top+i.height),this.topLeftPaddingBox=u>0||h>0?Qi(i.left+Te,i.top+pe,Math.max(0,u-Te),Math.max(0,h-pe),qn.TOP_LEFT):new Br(i.left+Te,i.top+pe),this.topRightPaddingBox=g>0||x>0?Qi(i.left+Math.min(N,i.width-ye),i.top+pe,N>i.width+ye?0:Math.max(0,g-ye),Math.max(0,x-pe),qn.TOP_RIGHT):new Br(i.left+i.width-ye,i.top+pe),this.bottomRightPaddingBox=F>0||P>0?Qi(i.left+Math.min(ee,i.width-Te),i.top+Math.min(K,i.height-ue),Math.max(0,F-ye),Math.max(0,P-ue),qn.BOTTOM_RIGHT):new Br(i.left+i.width-ye,i.top+i.height-ue),this.bottomLeftPaddingBox=D>0||k>0?Qi(i.left+Te,i.top+Math.min(se,i.height-ue),Math.max(0,D-Te),Math.max(0,k-ue),qn.BOTTOM_LEFT):new Br(i.left+Te,i.top+i.height-ue),this.topLeftContentBox=u>0||h>0?Qi(i.left+Te+Ie,i.top+pe+Ke,Math.max(0,u-(Te+Ie)),Math.max(0,h-(pe+Ke)),qn.TOP_LEFT):new Br(i.left+Te+Ie,i.top+pe+Ke),this.topRightContentBox=g>0||x>0?Qi(i.left+Math.min(N,i.width+Te+Ie),i.top+pe+Ke,N>i.width+Te+Ie?0:g-Te+Ie,x-(pe+Ke),qn.TOP_RIGHT):new Br(i.left+i.width-(ye+oe),i.top+pe+Ke),this.bottomRightContentBox=F>0||P>0?Qi(i.left+Math.min(ee,i.width-(Te+Ie)),i.top+Math.min(K,i.height+pe+Ke),Math.max(0,F-(ye+oe)),P-(ue+he),qn.BOTTOM_RIGHT):new Br(i.left+i.width-(ye+oe),i.top+i.height-(ue+he)),this.bottomLeftContentBox=D>0||k>0?Qi(i.left+Te+Ie,i.top+se,Math.max(0,D-(Te+Ie)),k-(ue+he),qn.BOTTOM_LEFT):new Br(i.left+Te+Ie,i.top+i.height-(ue+he))}return e}(),qn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(qn||(qn={}));var Qi=function(e,t,r,i,A){var u=4*((Math.sqrt(2)-1)/3),h=r*u,o=i*u,g=e+r,x=t+i;switch(A){case qn.TOP_LEFT:return new q0(new Br(e,x),new Br(e,x-o),new Br(g-h,t),new Br(g,t));case qn.TOP_RIGHT:return new q0(new Br(e,t),new Br(e+h,t),new Br(g,x-o),new Br(g,x));case qn.BOTTOM_RIGHT:return new q0(new Br(g,t),new Br(g,t+o),new Br(e+h,x),new Br(e,x));case qn.BOTTOM_LEFT:default:return new q0(new Br(g,x),new Br(g-h,x),new Br(e,t+o),new Br(e,t))}},xv=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},cq=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},bv=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},uq=function(){function e(t,r,i){this.offsetX=t,this.offsetY=r,this.matrix=i,this.type=0,this.target=6}return e}(),W0=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),hq=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),dq=function(e){return e.type===0},jM=function(e){return e.type===1},fq=function(e){return e.type===2},T4=function(e,t){return e.length===t.length?e.some(function(r,i){return r===t[i]}):!1},pq=function(e,t,r,i,A){return e.map(function(u,h){switch(h){case 0:return u.add(t,r);case 1:return u.add(t+i,r);case 2:return u.add(t+i,r+A);case 3:return u.add(t,r+A)}return u})},VM=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),KM=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new Aq(this.container),this.container.styles.opacity<1&&this.effects.push(new hq(this.container.styles.opacity)),this.container.styles.transform!==null){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,u=this.container.styles.transform;this.effects.push(new uq(i,A,u))}if(this.container.styles.overflowX!==0){var h=xv(this.curves),o=bv(this.curves);T4(h,o)?this.effects.push(new W0(h,6)):(this.effects.push(new W0(h,2)),this.effects.push(new W0(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,i=this.parent,A=this.effects.slice(0);i;){var u=i.effects.filter(function(g){return!jM(g)});if(r||i.container.styles.position!==0||!i.parent){if(A.unshift.apply(A,u),r=[2,3].indexOf(i.container.styles.position)===-1,i.container.styles.overflowX!==0){var h=xv(i.curves),o=bv(i.curves);T4(h,o)||A.unshift(new W0(o,6))}}else A.unshift.apply(A,u);i=i.parent}return A.filter(function(g){return Gs(g.target,t)})},e}(),Fb=function(e,t,r,i){e.container.elements.forEach(function(A){var u=Gs(A.flags,4),h=Gs(A.flags,2),o=new KM(A,e);Gs(A.styles.display,2048)&&i.push(o);var g=Gs(A.flags,8)?[]:i;if(u||h){var x=u||A.styles.isPositioned()?r:t,E=new VM(o);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var F=A.styles.zIndex.order;if(F<0){var P=0;x.negativeZIndex.some(function(D,k){return F>D.element.container.styles.zIndex.order?(P=k,!1):P>0}),x.negativeZIndex.splice(P,0,E)}else if(F>0){var C=0;x.positiveZIndex.some(function(D,k){return F>=D.element.container.styles.zIndex.order?(C=k+1,!1):C>0}),x.positiveZIndex.splice(C,0,E)}else x.zeroOrAutoZIndexOrTransformedOrOpacity.push(E)}else A.styles.isFloating()?x.nonPositionedFloats.push(E):x.nonPositionedInlineLevel.push(E);Fb(o,E,u?E:r,g)}else A.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),Fb(o,t,r,g);Gs(A.flags,8)&&GM(A,g)})},GM=function(e,t){for(var r=e instanceof bb?e.start:1,i=e instanceof bb?e.reversed:!1,A=0;A<t.length;A++){var u=t[A];u.container instanceof IM&&typeof u.container.value=="number"&&u.container.value!==0&&(r=u.container.value),u.listValue=vg(r,u.container.styles.listStyleType,!0),r+=i?-1:1}},mq=function(e){var t=new KM(e,null),r=new VM(t),i=[];return Fb(t,r,r,i),GM(t.container,i),r},P4=function(e,t){switch(t){case 0:return Hl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Hl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Hl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Hl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},gq=function(e,t){switch(t){case 0:return Hl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Hl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Hl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Hl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},yq=function(e,t){switch(t){case 0:return Hl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Hl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Hl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Hl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},vq=function(e,t){switch(t){case 0:return Z0(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Z0(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Z0(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Z0(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Z0=function(e,t){var r=[];return Dl(e)?r.push(e.subdivide(.5,!1)):r.push(e),Dl(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Hl=function(e,t,r,i){var A=[];return Dl(e)?A.push(e.subdivide(.5,!1)):A.push(e),Dl(r)?A.push(r.subdivide(.5,!0)):A.push(r),Dl(i)?A.push(i.subdivide(.5,!0).reverse()):A.push(i),Dl(t)?A.push(t.subdivide(.5,!1).reverse()):A.push(t),A},$M=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Bv=function(e){var t=e.styles,r=e.bounds,i=bi(t.paddingLeft,r.width),A=bi(t.paddingRight,r.width),u=bi(t.paddingTop,r.width),h=bi(t.paddingBottom,r.width);return r.add(i+t.borderLeftWidth,u+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+A),-(t.borderTopWidth+t.borderBottomWidth+u+h))},_q=function(e,t){return e===0?t.bounds:e===2?Bv(t):$M(t)},wq=function(e,t){return e===0?t.bounds:e===2?Bv(t):$M(t)},Sw=function(e,t,r){var i=_q(Bf(e.styles.backgroundOrigin,t),e),A=wq(Bf(e.styles.backgroundClip,t),e),u=xq(Bf(e.styles.backgroundSize,t),r,i),h=u[0],o=u[1],g=Cm(Bf(e.styles.backgroundPosition,t),i.width-h,i.height-o),x=bq(Bf(e.styles.backgroundRepeat,t),g,u,i,A),E=Math.round(i.left+g[0]),F=Math.round(i.top+g[1]);return[x,E,F,h,o]},vf=function(e){return ai(e)&&e.value===ep.AUTO},X0=function(e){return typeof e=="number"},xq=function(e,t,r){var i=t[0],A=t[1],u=t[2],h=e[0],o=e[1];if(!h)return[0,0];if(Is(h)&&o&&Is(o))return[bi(h,r.width),bi(o,r.height)];var g=X0(u);if(ai(h)&&(h.value===ep.CONTAIN||h.value===ep.COVER)){if(X0(u)){var x=r.width/r.height;return x<u!=(h.value===ep.COVER)?[r.width,r.width/u]:[r.height*u,r.height]}return[r.width,r.height]}var E=X0(i),F=X0(A),P=E||F;if(vf(h)&&(!o||vf(o))){if(E&&F)return[i,A];if(!g&&!P)return[r.width,r.height];if(P&&g){var C=E?i:A*u,D=F?A:i/u;return[C,D]}var k=E?i:r.width,j=F?A:r.height;return[k,j]}if(g){var U=0,N=0;return Is(h)?U=bi(h,r.width):Is(o)&&(N=bi(o,r.height)),vf(h)?U=N*u:(!o||vf(o))&&(N=U/u),[U,N]}var K=null,ee=null;if(Is(h)?K=bi(h,r.width):o&&Is(o)&&(ee=bi(o,r.height)),K!==null&&(!o||vf(o))&&(ee=E&&F?K/i*A:r.height),ee!==null&&vf(h)&&(K=E&&F?ee/A*i:r.width),K!==null&&ee!==null)return[K,ee];throw new Error("Unable to calculate background-size for element")},Bf=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},bq=function(e,t,r,i,A){var u=t[0],h=t[1],o=r[0],g=r[1];switch(e){case 2:return[new Br(Math.round(i.left),Math.round(i.top+h)),new Br(Math.round(i.left+i.width),Math.round(i.top+h)),new Br(Math.round(i.left+i.width),Math.round(g+i.top+h)),new Br(Math.round(i.left),Math.round(g+i.top+h))];case 3:return[new Br(Math.round(i.left+u),Math.round(i.top)),new Br(Math.round(i.left+u+o),Math.round(i.top)),new Br(Math.round(i.left+u+o),Math.round(i.height+i.top)),new Br(Math.round(i.left+u),Math.round(i.height+i.top))];case 1:return[new Br(Math.round(i.left+u),Math.round(i.top+h)),new Br(Math.round(i.left+u+o),Math.round(i.top+h)),new Br(Math.round(i.left+u+o),Math.round(i.top+h+g)),new Br(Math.round(i.left+u),Math.round(i.top+h+g))];default:return[new Br(Math.round(A.left),Math.round(A.top)),new Br(Math.round(A.left+A.width),Math.round(A.top)),new Br(Math.round(A.left+A.width),Math.round(A.height+A.top)),new Br(Math.round(A.left),Math.round(A.height+A.top))]}},Bq="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",L4="Hidden Text",Cq=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var i=this._document.createElement("div"),A=this._document.createElement("img"),u=this._document.createElement("span"),h=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",h.appendChild(i),A.src=Bq,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",u.style.fontFamily=t,u.style.fontSize=r,u.style.margin="0",u.style.padding="0",u.appendChild(this._document.createTextNode(L4)),i.appendChild(u),i.appendChild(A);var o=A.offsetTop-u.offsetTop+2;i.removeChild(u),i.appendChild(this._document.createTextNode(L4)),i.style.lineHeight="normal",A.style.verticalAlign="super";var g=A.offsetTop-i.offsetTop+2;return h.removeChild(i),{baseline:o,middle:g}},e.prototype.getMetrics=function(t,r){var i=t+" "+r;return typeof this._data[i]>"u"&&(this._data[i]=this.parseMetrics(t,r)),this._data[i]},e}(),qM=function(){function e(t,r){this.context=t,this.options=r}return e}(),Sq=1e4,Eq=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;return A._activeEffects=[],A.canvas=i.canvas?i.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),i.canvas||(A.canvas.width=Math.floor(i.width*i.scale),A.canvas.height=Math.floor(i.height*i.scale),A.canvas.style.width=i.width+"px",A.canvas.style.height=i.height+"px"),A.fontMetrics=new Cq(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-i.x,-i.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),A}return t.prototype.applyEffects=function(r){for(var i=this;this._activeEffects.length;)this.popEffect();r.forEach(function(A){return i.applyEffect(A)})},t.prototype.applyEffect=function(r){this.ctx.save(),fq(r)&&(this.ctx.globalAlpha=r.opacity),dq(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),jM(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return da(this,void 0,void 0,function(){var i;return $o(this,function(A){switch(A.label){case 0:return i=r.element.container.styles,i.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return da(this,void 0,void 0,function(){return $o(this,function(i){switch(i.label){case 0:if(Gs(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return i.sent(),[4,this.renderNodeContent(r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,i,A){var u=this;if(i===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+A);else{var h=yB(r.text);h.reduce(function(o,g){return u.ctx.fillText(g,o,r.bounds.top+A),o+u.ctx.measureText(g).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var i=r.fontVariant.filter(function(h){return h==="normal"||h==="small-caps"}).join(""),A=Lq(r.fontFamily).join(", "),u=kg(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,i,r.fontWeight,u,A].join(" "),A,u]},t.prototype.renderTextNode=function(r,i){return da(this,void 0,void 0,function(){var A,u,h,o,g,x,E,F,P=this;return $o(this,function(C){return A=this.createFontStyle(i),u=A[0],h=A[1],o=A[2],this.ctx.font=u,this.ctx.direction=i.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",g=this.fontMetrics.getMetrics(h,o),x=g.baseline,E=g.middle,F=i.paintOrder,r.textBounds.forEach(function(D){F.forEach(function(k){switch(k){case 0:P.ctx.fillStyle=so(i.color),P.renderTextWithLetterSpacing(D,i.letterSpacing,x);var j=i.textShadow;j.length&&D.text.trim().length&&(j.slice(0).reverse().forEach(function(U){P.ctx.shadowColor=so(U.color),P.ctx.shadowOffsetX=U.offsetX.number*P.options.scale,P.ctx.shadowOffsetY=U.offsetY.number*P.options.scale,P.ctx.shadowBlur=U.blur.number,P.renderTextWithLetterSpacing(D,i.letterSpacing,x)}),P.ctx.shadowColor="",P.ctx.shadowOffsetX=0,P.ctx.shadowOffsetY=0,P.ctx.shadowBlur=0),i.textDecorationLine.length&&(P.ctx.fillStyle=so(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(U){switch(U){case 1:P.ctx.fillRect(D.bounds.left,Math.round(D.bounds.top+x),D.bounds.width,1);break;case 2:P.ctx.fillRect(D.bounds.left,Math.round(D.bounds.top),D.bounds.width,1);break;case 3:P.ctx.fillRect(D.bounds.left,Math.ceil(D.bounds.top+E),D.bounds.width,1);break}}));break;case 1:i.webkitTextStrokeWidth&&D.text.trim().length&&(P.ctx.strokeStyle=so(i.webkitTextStrokeColor),P.ctx.lineWidth=i.webkitTextStrokeWidth,P.ctx.lineJoin=window.chrome?"miter":"round",P.ctx.strokeText(D.text,D.bounds.left,D.bounds.top+x)),P.ctx.strokeStyle="",P.ctx.lineWidth=0,P.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,i,A){if(A&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var u=Bv(r),h=bv(i);this.path(h),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,r.intrinsicWidth,r.intrinsicHeight,u.left,u.top,u.width,u.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return da(this,void 0,void 0,function(){var i,A,u,h,o,g,N,N,x,E,F,P,ee,C,D,se,k,j,U,N,K,ee,se;return $o(this,function(pe){switch(pe.label){case 0:this.applyEffects(r.getEffects(4)),i=r.container,A=r.curves,u=i.styles,h=0,o=i.textNodes,pe.label=1;case 1:return h<o.length?(g=o[h],[4,this.renderTextNode(g,u)]):[3,4];case 2:pe.sent(),pe.label=3;case 3:return h++,[3,1];case 4:if(!(i instanceof SM))return[3,8];pe.label=5;case 5:return pe.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return N=pe.sent(),this.renderReplacedElement(i,A,N),[3,8];case 7:return pe.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof EM&&this.renderReplacedElement(i,A,i.canvas),!(i instanceof FM))return[3,12];pe.label=9;case 9:return pe.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return N=pe.sent(),this.renderReplacedElement(i,A,N),[3,12];case 11:return pe.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof LM&&i.tree?(x=new t(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}),[4,x.render(i.tree)]):[3,14];case 13:E=pe.sent(),i.width&&i.height&&this.ctx.drawImage(E,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),pe.label=14;case 14:if(i instanceof vB&&(F=Math.min(i.bounds.width,i.bounds.height),i.type===yv?i.checked&&(this.ctx.save(),this.path([new Br(i.bounds.left+F*.39363,i.bounds.top+F*.79),new Br(i.bounds.left+F*.16,i.bounds.top+F*.5549),new Br(i.bounds.left+F*.27347,i.bounds.top+F*.44071),new Br(i.bounds.left+F*.39694,i.bounds.top+F*.5649),new Br(i.bounds.left+F*.72983,i.bounds.top+F*.23),new Br(i.bounds.left+F*.84,i.bounds.top+F*.34085),new Br(i.bounds.left+F*.39363,i.bounds.top+F*.79)]),this.ctx.fillStyle=so(v4),this.ctx.fill(),this.ctx.restore()):i.type===vv&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+F/2,i.bounds.top+F/2,F/4,0,Math.PI*2,!0),this.ctx.fillStyle=so(v4),this.ctx.fill(),this.ctx.restore())),Fq(i)&&i.value.length){switch(P=this.createFontStyle(u),ee=P[0],C=P[1],D=this.fontMetrics.getMetrics(ee,C).baseline,this.ctx.font=ee,this.ctx.fillStyle=so(u.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Tq(i.styles.textAlign),se=Bv(i),k=0,i.styles.textAlign){case 1:k+=se.width/2;break;case 2:k+=se.width;break}j=se.add(k,0,0,-se.height/2+1),this.ctx.save(),this.path([new Br(se.left,se.top),new Br(se.left+se.width,se.top),new Br(se.left+se.width,se.top+se.height),new Br(se.left,se.top+se.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new jm(i.value,j),u.letterSpacing,D),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Gs(i.styles.display,2048))return[3,20];if(i.styles.listStyleImage===null)return[3,19];if(U=i.styles.listStyleImage,U.type!==0)return[3,18];N=void 0,K=U.url,pe.label=15;case 15:return pe.trys.push([15,17,,18]),[4,this.context.cache.match(K)];case 16:return N=pe.sent(),this.ctx.drawImage(N,i.bounds.left-(N.width+10),i.bounds.top),[3,18];case 17:return pe.sent(),this.context.logger.error("Error loading list-style-image "+K),[3,18];case 18:return[3,20];case 19:r.listValue&&i.styles.listStyleType!==-1&&(ee=this.createFontStyle(u)[0],this.ctx.font=ee,this.ctx.fillStyle=so(u.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",se=new _u(i.bounds.left,i.bounds.top+bi(i.styles.paddingTop,i.bounds.width),i.bounds.width,r4(u.lineHeight,u.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new jm(r.listValue,se),u.letterSpacing,r4(u.lineHeight,u.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),pe.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return da(this,void 0,void 0,function(){var i,A,U,u,h,U,o,g,U,x,E,U,F,P,U,C,D,U,k,j,U;return $o(this,function(N){switch(N.label){case 0:if(Gs(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:N.sent(),i=0,A=r.negativeZIndex,N.label=2;case 2:return i<A.length?(U=A[i],[4,this.renderStack(U)]):[3,5];case 3:N.sent(),N.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:N.sent(),u=0,h=r.nonInlineLevel,N.label=7;case 7:return u<h.length?(U=h[u],[4,this.renderNode(U)]):[3,10];case 8:N.sent(),N.label=9;case 9:return u++,[3,7];case 10:o=0,g=r.nonPositionedFloats,N.label=11;case 11:return o<g.length?(U=g[o],[4,this.renderStack(U)]):[3,14];case 12:N.sent(),N.label=13;case 13:return o++,[3,11];case 14:x=0,E=r.nonPositionedInlineLevel,N.label=15;case 15:return x<E.length?(U=E[x],[4,this.renderStack(U)]):[3,18];case 16:N.sent(),N.label=17;case 17:return x++,[3,15];case 18:F=0,P=r.inlineLevel,N.label=19;case 19:return F<P.length?(U=P[F],[4,this.renderNode(U)]):[3,22];case 20:N.sent(),N.label=21;case 21:return F++,[3,19];case 22:C=0,D=r.zeroOrAutoZIndexOrTransformedOrOpacity,N.label=23;case 23:return C<D.length?(U=D[C],[4,this.renderStack(U)]):[3,26];case 24:N.sent(),N.label=25;case 25:return C++,[3,23];case 26:k=0,j=r.positiveZIndex,N.label=27;case 27:return k<j.length?(U=j[k],[4,this.renderStack(U)]):[3,30];case 28:N.sent(),N.label=29;case 29:return k++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var i=this;r.forEach(function(A,u){var h=Dl(A)?A.start:A;u===0?i.ctx.moveTo(h.x,h.y):i.ctx.lineTo(h.x,h.y),Dl(A)&&i.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},t.prototype.renderRepeat=function(r,i,A,u){this.path(r),this.ctx.fillStyle=i,this.ctx.translate(A,u),this.ctx.fill(),this.ctx.translate(-A,-u)},t.prototype.resizeImage=function(r,i,A){var u;if(r.width===i&&r.height===A)return r;var h=(u=this.canvas.ownerDocument)!==null&&u!==void 0?u:document,o=h.createElement("canvas");o.width=Math.max(1,i),o.height=Math.max(1,A);var g=o.getContext("2d");return g.drawImage(r,0,0,r.width,r.height,0,0,i,A),o},t.prototype.renderBackgroundImage=function(r){return da(this,void 0,void 0,function(){var i,A,u,h,o,g;return $o(this,function(x){switch(x.label){case 0:i=r.styles.backgroundImage.length-1,A=function(E){var F,P,C,Ke,Xe,lt,Ie,be,ue,D,Ke,Xe,lt,Ie,be,k,j,U,N,K,ee,se,pe,ye,ue,Te,Ke,oe,he,Ie,be,ct,Xe,lt,Le,ze,it,Lt,ne,Be,Pe,$e;return $o(this,function(nt){switch(nt.label){case 0:if(E.type!==0)return[3,5];F=void 0,P=E.url,nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,u.context.cache.match(P)];case 2:return F=nt.sent(),[3,4];case 3:return nt.sent(),u.context.logger.error("Error loading background-image "+P),[3,4];case 4:return F&&(C=Sw(r,i,[F.width,F.height,F.width/F.height]),Ke=C[0],Xe=C[1],lt=C[2],Ie=C[3],be=C[4],ue=u.ctx.createPattern(u.resizeImage(F,Ie,be),"repeat"),u.renderRepeat(Ke,ue,Xe,lt)),[3,6];case 5:dK(E)?(D=Sw(r,i,[null,null,null]),Ke=D[0],Xe=D[1],lt=D[2],Ie=D[3],be=D[4],k=lK(E.angle,Ie,be),j=k[0],U=k[1],N=k[2],K=k[3],ee=k[4],se=document.createElement("canvas"),se.width=Ie,se.height=be,pe=se.getContext("2d"),ye=pe.createLinearGradient(U,K,N,ee),e4(E.stops,j).forEach(function(Ze){return ye.addColorStop(Ze.stop,so(Ze.color))}),pe.fillStyle=ye,pe.fillRect(0,0,Ie,be),Ie>0&&be>0&&(ue=u.ctx.createPattern(se,"repeat"),u.renderRepeat(Ke,ue,Xe,lt))):fK(E)&&(Te=Sw(r,i,[null,null,null]),Ke=Te[0],oe=Te[1],he=Te[2],Ie=Te[3],be=Te[4],ct=E.position.length===0?[pB]:E.position,Xe=bi(ct[0],Ie),lt=bi(ct[ct.length-1],be),Le=AK(E,Xe,lt,Ie,be),ze=Le[0],it=Le[1],ze>0&&it>0&&(Lt=u.ctx.createRadialGradient(oe+Xe,he+lt,0,oe+Xe,he+lt,ze),e4(E.stops,ze*2).forEach(function(Ze){return Lt.addColorStop(Ze.stop,so(Ze.color))}),u.path(Ke),u.ctx.fillStyle=Lt,ze!==it?(ne=r.bounds.left+.5*r.bounds.width,Be=r.bounds.top+.5*r.bounds.height,Pe=it/ze,$e=1/Pe,u.ctx.save(),u.ctx.translate(ne,Be),u.ctx.transform(1,0,0,Pe,0,0),u.ctx.translate(-ne,-Be),u.ctx.fillRect(oe,$e*(he-Be)+Be,Ie,be*$e),u.ctx.restore()):u.ctx.fill())),nt.label=6;case 6:return i--,[2]}})},u=this,h=0,o=r.styles.backgroundImage.slice(0).reverse(),x.label=1;case 1:return h<o.length?(g=o[h],[5,A(g)]):[3,4];case 2:x.sent(),x.label=3;case 3:return h++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,i,A){return da(this,void 0,void 0,function(){return $o(this,function(u){return this.path(P4(A,i)),this.ctx.fillStyle=so(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,i,A,u){return da(this,void 0,void 0,function(){var h,o;return $o(this,function(g){switch(g.label){case 0:return i<3?[4,this.renderSolidBorder(r,A,u)]:[3,2];case 1:return g.sent(),[2];case 2:return h=gq(u,A),this.path(h),this.ctx.fillStyle=so(r),this.ctx.fill(),o=yq(u,A),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return da(this,void 0,void 0,function(){var i,A,u,h,o,g,x,E,F=this;return $o(this,function(P){switch(P.label){case 0:return this.applyEffects(r.getEffects(2)),i=r.container.styles,A=!Th(i.backgroundColor)||i.backgroundImage.length,u=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],h=Iq(Bf(i.backgroundClip,0),r.curves),A||i.boxShadow.length?(this.ctx.save(),this.path(h),this.ctx.clip(),Th(i.backgroundColor)||(this.ctx.fillStyle=so(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:P.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(C){F.ctx.save();var D=xv(r.curves),k=C.inset?0:Sq,j=pq(D,-k+(C.inset?1:-1)*C.spread.number,(C.inset?1:-1)*C.spread.number,C.spread.number*(C.inset?-2:2),C.spread.number*(C.inset?-2:2));C.inset?(F.path(D),F.ctx.clip(),F.mask(j)):(F.mask(D),F.ctx.clip(),F.path(j)),F.ctx.shadowOffsetX=C.offsetX.number+k,F.ctx.shadowOffsetY=C.offsetY.number,F.ctx.shadowColor=so(C.color),F.ctx.shadowBlur=C.blur.number,F.ctx.fillStyle=C.inset?so(C.color):"rgba(0,0,0,1)",F.ctx.fill(),F.ctx.restore()}),P.label=2;case 2:o=0,g=0,x=u,P.label=3;case 3:return g<x.length?(E=x[g],E.style!==0&&!Th(E.color)&&E.width>0?E.style!==2?[3,5]:[4,this.renderDashedDottedBorder(E.color,E.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return P.sent(),[3,11];case 5:return E.style!==3?[3,7]:[4,this.renderDashedDottedBorder(E.color,E.width,o,r.curves,3)];case 6:return P.sent(),[3,11];case 7:return E.style!==4?[3,9]:[4,this.renderDoubleBorder(E.color,E.width,o,r.curves)];case 8:return P.sent(),[3,11];case 9:return[4,this.renderSolidBorder(E.color,o,r.curves)];case 10:P.sent(),P.label=11;case 11:o++,P.label=12;case 12:return g++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,i,A,u,h){return da(this,void 0,void 0,function(){var o,g,x,E,F,P,C,D,k,j,U,N,K,ee,se,pe,se,pe;return $o(this,function(ye){return this.ctx.save(),o=vq(u,A),g=P4(u,A),h===2&&(this.path(g),this.ctx.clip()),Dl(g[0])?(x=g[0].start.x,E=g[0].start.y):(x=g[0].x,E=g[0].y),Dl(g[1])?(F=g[1].end.x,P=g[1].end.y):(F=g[1].x,P=g[1].y),A===0||A===2?C=Math.abs(x-F):C=Math.abs(E-P),this.ctx.beginPath(),h===3?this.formatPath(o):this.formatPath(g.slice(0,2)),D=i<3?i*3:i*2,k=i<3?i*2:i,h===3&&(D=i,k=i),j=!0,C<=D*2?j=!1:C<=D*2+k?(U=C/(2*D+k),D*=U,k*=U):(N=Math.floor((C+k)/(D+k)),K=(C-N*D)/(N-1),ee=(C-(N+1)*D)/N,k=ee<=0||Math.abs(k-K)<Math.abs(k-ee)?K:ee),j&&(h===3?this.ctx.setLineDash([0,D+k]):this.ctx.setLineDash([D,k])),h===3?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=i*2+1.1,this.ctx.strokeStyle=so(r),this.ctx.stroke(),this.ctx.setLineDash([]),h===2&&(Dl(g[0])&&(se=g[3],pe=g[0],this.ctx.beginPath(),this.formatPath([new Br(se.end.x,se.end.y),new Br(pe.start.x,pe.start.y)]),this.ctx.stroke()),Dl(g[1])&&(se=g[1],pe=g[2],this.ctx.beginPath(),this.formatPath([new Br(se.end.x,se.end.y),new Br(pe.start.x,pe.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return da(this,void 0,void 0,function(){var i;return $o(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=so(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=mq(r),[4,this.renderStack(i)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(qM),Fq=function(e){return e instanceof PM||e instanceof TM?!0:e instanceof vB&&e.type!==vv&&e.type!==yv},Iq=function(e,t){switch(e){case 0:return xv(t);case 2:return cq(t);case 1:default:return bv(t)}},Tq=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Pq=["-apple-system","system-ui"],Lq=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Pq.indexOf(t)===-1}):e},Mq=function(e){RA(t,e);function t(r,i){var A=e.call(this,r,i)||this;return A.canvas=i.canvas?i.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=i,A.canvas.width=Math.floor(i.width*i.scale),A.canvas.height=Math.floor(i.height*i.scale),A.canvas.style.width=i.width+"px",A.canvas.style.height=i.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-i.x,-i.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),A}return t.prototype.render=function(r){return da(this,void 0,void 0,function(){var i,A;return $o(this,function(u){switch(u.label){case 0:return i=xb(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,kq(i)];case 1:return A=u.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=so(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(qM),kq=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Uq=function(){function e(t){var r=t.id,i=t.enabled;this.id=r,this.enabled=i,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,I0([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,I0([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,I0([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,I0([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Qq=function(){function e(t,r){var i;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new Uq({id:this.instanceName,enabled:t.logging}),this.cache=(i=t.cache)!==null&&i!==void 0?i:new rq(this,t)}return e.instanceCount=1,e}(),WM=function(e,t){return t===void 0&&(t={}),Rq(e,t)};typeof window<"u"&&HM.setContext(window);var Rq=function(e,t){return da(void 0,void 0,void 0,function(){var r,i,A,u,h,o,g,x,E,F,P,C,D,k,j,U,N,K,ee,se,ye,pe,ye,ue,Te,Ke,oe,he,Ie,be,ct,Xe,lt,Le,ze,it,Lt,ne,Be,Pe;return $o(this,function($e){switch($e.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(i=r.defaultView,!i)throw new Error("Document is not attached to a Window");return A={allowTaint:(ue=t.allowTaint)!==null&&ue!==void 0?ue:!1,imageTimeout:(Te=t.imageTimeout)!==null&&Te!==void 0?Te:15e3,proxy:t.proxy,useCORS:(Ke=t.useCORS)!==null&&Ke!==void 0?Ke:!1},u=ab({logging:(oe=t.logging)!==null&&oe!==void 0?oe:!0,cache:t.cache},A),h={windowWidth:(he=t.windowWidth)!==null&&he!==void 0?he:i.innerWidth,windowHeight:(Ie=t.windowHeight)!==null&&Ie!==void 0?Ie:i.innerHeight,scrollX:(be=t.scrollX)!==null&&be!==void 0?be:i.pageXOffset,scrollY:(ct=t.scrollY)!==null&&ct!==void 0?ct:i.pageYOffset},o=new _u(h.scrollX,h.scrollY,h.windowWidth,h.windowHeight),g=new Qq(u,o),x=(Xe=t.foreignObjectRendering)!==null&&Xe!==void 0?Xe:!1,E={allowTaint:(lt=t.allowTaint)!==null&&lt!==void 0?lt:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:x,copyStyles:x},g.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),F=new F4(g,e,E),P=F.clonedReferenceElement,P?[4,F.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return C=$e.sent(),D=_B(P)||D$(P)?p9(P.ownerDocument):h1(g,P),k=D.width,j=D.height,U=D.left,N=D.top,K=Nq(g,P,t.backgroundColor),ee={canvas:t.canvas,backgroundColor:K,scale:(ze=(Le=t.scale)!==null&&Le!==void 0?Le:i.devicePixelRatio)!==null&&ze!==void 0?ze:1,x:((it=t.x)!==null&&it!==void 0?it:0)+U,y:((Lt=t.y)!==null&&Lt!==void 0?Lt:0)+N,width:(ne=t.width)!==null&&ne!==void 0?ne:Math.ceil(k),height:(Be=t.height)!==null&&Be!==void 0?Be:Math.ceil(j)},x?(g.logger.debug("Document cloned, using foreign object rendering"),ye=new Mq(g,ee),[4,ye.render(P)]):[3,3];case 2:return se=$e.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+U+","+N+" with size "+k+"x"+j+" using computed rendering"),g.logger.debug("Starting DOM parsing"),pe=kM(g,P),K===pe.styles.backgroundColor&&(pe.styles.backgroundColor=du.TRANSPARENT),g.logger.debug("Starting renderer for element at "+ee.x+","+ee.y+" with size "+ee.width+"x"+ee.height),ye=new Eq(g,ee),[4,ye.render(pe)];case 4:se=$e.sent(),$e.label=5;case 5:return(!((Pe=t.removeContainer)!==null&&Pe!==void 0)||Pe)&&(F4.destroy(C)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),g.logger.debug("Finished rendering"),[2,se]}})})},Nq=function(e,t,r){var i=t.ownerDocument,A=i.documentElement?zm(e,getComputedStyle(i.documentElement).backgroundColor):du.TRANSPARENT,u=i.body?zm(e,getComputedStyle(i.body).backgroundColor):du.TRANSPARENT,h=typeof r=="string"?zm(e,r):r===null?du.TRANSPARENT:4294967295;return t===i.documentElement?Th(A)?Th(u)?h:u:A:h};const Dq=Object.freeze(Object.defineProperty({__proto__:null,default:WM},Symbol.toStringTag,{value:"Module"})),Oq="modulepreload",zq=function(e){return"/Domapus/"+e},M4={},Ib=function(t,r,i){let A=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),o=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));A=Promise.allSettled(r.map(g=>{if(g=zq(g),g in M4)return;M4[g]=!0;const x=g.endsWith(".css"),E=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const F=document.createElement("link");if(F.rel=x?"stylesheet":Oq,x||(F.as="script"),F.crossOrigin="",F.href=g,o&&F.setAttribute("nonce",o),document.head.appendChild(F),x)return new Promise((P,C)=>{F.addEventListener("load",P),F.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(h){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=h,window.dispatchEvent(o),!o.defaultPrevented)throw h}return A.then(h=>{for(const o of h||[])o.status==="rejected"&&u(o.reason);return t().catch(u)})};function Yn(e){"@babel/helpers - typeof";return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(e)}var Zo=Uint8Array,ml=Uint16Array,wB=Int32Array,x1=new Zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),b1=new Zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tb=new Zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ZM=function(e,t){for(var r=new ml(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var A=new wB(r[30]),i=1;i<30;++i)for(var u=r[i];u<r[i+1];++u)A[u]=u-r[i]<<5|i;return{b:r,r:A}},XM=ZM(x1,2),YM=XM.b,Pb=XM.r;YM[28]=258,Pb[258]=28;var JM=ZM(b1,0),Hq=JM.b,k4=JM.r,Lb=new ml(32768);for(var Pi=0;Pi<32768;++Pi){var qu=(Pi&43690)>>1|(Pi&21845)<<1;qu=(qu&52428)>>2|(qu&13107)<<2,qu=(qu&61680)>>4|(qu&3855)<<4,Lb[Pi]=((qu&65280)>>8|(qu&255)<<8)>>1}var Bc=function(e,t,r){for(var i=e.length,A=0,u=new ml(t);A<i;++A)e[A]&&++u[e[A]-1];var h=new ml(t);for(A=1;A<t;++A)h[A]=h[A-1]+u[A-1]<<1;var o;if(r){o=new ml(1<<t);var g=15-t;for(A=0;A<i;++A)if(e[A])for(var x=A<<4|e[A],E=t-e[A],F=h[e[A]-1]++<<E,P=F|(1<<E)-1;F<=P;++F)o[Lb[F]>>g]=x}else for(o=new ml(i),A=0;A<i;++A)e[A]&&(o[A]=Lb[h[e[A]-1]++]>>15-e[A]);return o},Qh=new Zo(288);for(var Pi=0;Pi<144;++Pi)Qh[Pi]=8;for(var Pi=144;Pi<256;++Pi)Qh[Pi]=9;for(var Pi=256;Pi<280;++Pi)Qh[Pi]=7;for(var Pi=280;Pi<288;++Pi)Qh[Pi]=8;var _g=new Zo(32);for(var Pi=0;Pi<32;++Pi)_g[Pi]=5;var jq=Bc(Qh,9,0),Vq=Bc(Qh,9,1),Kq=Bc(_g,5,0),Gq=Bc(_g,5,1),Ew=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},_A=function(e,t,r){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&r},Fw=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},xB=function(e){return(e+7)/8|0},ek=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Zo(e.subarray(t,r))},$q=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],SA=function(e,t,r){var i=new Error(t||$q[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,SA),!r)throw i;return i},qq=function(e,t,r,i){var A=e.length,u=0;if(!A||t.f&&!t.l)return r||new Zo(0);var h=!r,o=h||t.i!=2,g=t.i;h&&(r=new Zo(A*3));var x=function(Mt){var $t=r.length;if(Mt>$t){var jt=new Zo(Math.max($t*2,Mt));jt.set(r),r=jt}},E=t.f||0,F=t.p||0,P=t.b||0,C=t.l,D=t.d,k=t.m,j=t.n,U=A*8;do{if(!C){E=_A(e,F,1);var N=_A(e,F+1,3);if(F+=3,N)if(N==1)C=Vq,D=Gq,k=9,j=5;else if(N==2){var pe=_A(e,F,31)+257,ye=_A(e,F+10,15)+4,ue=pe+_A(e,F+5,31)+1;F+=14;for(var Te=new Zo(ue),Ke=new Zo(19),oe=0;oe<ye;++oe)Ke[Tb[oe]]=_A(e,F+oe*3,7);F+=ye*3;for(var he=Ew(Ke),Ie=(1<<he)-1,be=Bc(Ke,he,1),oe=0;oe<ue;){var ct=be[_A(e,F,Ie)];F+=ct&15;var K=ct>>4;if(K<16)Te[oe++]=K;else{var Xe=0,lt=0;for(K==16?(lt=3+_A(e,F,3),F+=2,Xe=Te[oe-1]):K==17?(lt=3+_A(e,F,7),F+=3):K==18&&(lt=11+_A(e,F,127),F+=7);lt--;)Te[oe++]=Xe}}var Le=Te.subarray(0,pe),ze=Te.subarray(pe);k=Ew(Le),j=Ew(ze),C=Bc(Le,k,1),D=Bc(ze,j,1)}else SA(1);else{var K=xB(F)+4,ee=e[K-4]|e[K-3]<<8,se=K+ee;if(se>A){g&&SA(0);break}o&&x(P+ee),r.set(e.subarray(K,se),P),t.b=P+=ee,t.p=F=se*8,t.f=E;continue}if(F>U){g&&SA(0);break}}o&&x(P+131072);for(var it=(1<<k)-1,Lt=(1<<j)-1,ne=F;;ne=F){var Xe=C[Fw(e,F)&it],Be=Xe>>4;if(F+=Xe&15,F>U){g&&SA(0);break}if(Xe||SA(2),Be<256)r[P++]=Be;else if(Be==256){ne=F,C=null;break}else{var Pe=Be-254;if(Be>264){var oe=Be-257,$e=x1[oe];Pe=_A(e,F,(1<<$e)-1)+YM[oe],F+=$e}var nt=D[Fw(e,F)&Lt],Ze=nt>>4;nt||SA(3),F+=nt&15;var ze=Hq[Ze];if(Ze>3){var $e=b1[Ze];ze+=Fw(e,F)&(1<<$e)-1,F+=$e}if(F>U){g&&SA(0);break}o&&x(P+131072);var pt=P+Pe;if(P<ze){var dt=u-ze,Qt=Math.min(ze,pt);for(dt+P<0&&SA(3);P<Qt;++P)r[P]=i[dt+P]}for(;P<pt;++P)r[P]=r[P-ze]}}t.l=C,t.p=ne,t.b=P,t.f=E,C&&(E=1,t.m=k,t.d=D,t.n=j)}while(!E);return P!=r.length&&h?ek(r,0,P):r.subarray(0,P)},su=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8},fm=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},Iw=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var A=r.length,u=r.slice();if(!A)return{t:rk,l:0};if(A==1){var h=new Zo(r[0].s+1);return h[r[0].s]=1,{t:h,l:1}}r.sort(function(se,pe){return se.f-pe.f}),r.push({s:-1,f:25001});var o=r[0],g=r[1],x=0,E=1,F=2;for(r[0]={s:-1,f:o.f+g.f,l:o,r:g};E!=A-1;)o=r[r[x].f<r[F].f?x++:F++],g=r[x!=E&&r[x].f<r[F].f?x++:F++],r[E++]={s:-1,f:o.f+g.f,l:o,r:g};for(var P=u[0].s,i=1;i<A;++i)u[i].s>P&&(P=u[i].s);var C=new ml(P+1),D=Mb(r[E-1],C,0);if(D>t){var i=0,k=0,j=D-t,U=1<<j;for(u.sort(function(pe,ye){return C[ye.s]-C[pe.s]||pe.f-ye.f});i<A;++i){var N=u[i].s;if(C[N]>t)k+=U-(1<<D-C[N]),C[N]=t;else break}for(k>>=j;k>0;){var K=u[i].s;C[K]<t?k-=1<<t-C[K]++-1:++i}for(;i>=0&&k;--i){var ee=u[i].s;C[ee]==t&&(--C[ee],++k)}D=t}return{t:new Zo(C),l:D}},Mb=function(e,t,r){return e.s==-1?Math.max(Mb(e.l,t,r+1),Mb(e.r,t,r+1)):t[e.s]=r},U4=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ml(++t),i=0,A=e[0],u=1,h=function(g){r[i++]=g},o=1;o<=t;++o)if(e[o]==A&&o!=t)++u;else{if(!A&&u>2){for(;u>138;u-=138)h(32754);u>2&&(h(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(h(A),--u;u>6;u-=6)h(8304);u>2&&(h(u-3<<5|8208),u=0)}for(;u--;)h(A);u=1,A=e[o]}return{c:r.subarray(0,i),n:t}},pm=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},tk=function(e,t,r){var i=r.length,A=xB(t+2);e[A]=i&255,e[A+1]=i>>8,e[A+2]=e[A]^255,e[A+3]=e[A+1]^255;for(var u=0;u<i;++u)e[A+u+4]=r[u];return(A+4+i)*8},Q4=function(e,t,r,i,A,u,h,o,g,x,E){su(t,E++,r),++A[256];for(var F=Iw(A,15),P=F.t,C=F.l,D=Iw(u,15),k=D.t,j=D.l,U=U4(P),N=U.c,K=U.n,ee=U4(k),se=ee.c,pe=ee.n,ye=new ml(19),ue=0;ue<N.length;++ue)++ye[N[ue]&31];for(var ue=0;ue<se.length;++ue)++ye[se[ue]&31];for(var Te=Iw(ye,7),Ke=Te.t,oe=Te.l,he=19;he>4&&!Ke[Tb[he-1]];--he);var Ie=x+5<<3,be=pm(A,Qh)+pm(u,_g)+h,ct=pm(A,P)+pm(u,k)+h+14+3*he+pm(ye,Ke)+2*ye[16]+3*ye[17]+7*ye[18];if(g>=0&&Ie<=be&&Ie<=ct)return tk(t,E,e.subarray(g,g+x));var Xe,lt,Le,ze;if(su(t,E,1+(ct<be)),E+=2,ct<be){Xe=Bc(P,C,0),lt=P,Le=Bc(k,j,0),ze=k;var it=Bc(Ke,oe,0);su(t,E,K-257),su(t,E+5,pe-1),su(t,E+10,he-4),E+=14;for(var ue=0;ue<he;++ue)su(t,E+3*ue,Ke[Tb[ue]]);E+=3*he;for(var Lt=[N,se],ne=0;ne<2;++ne)for(var Be=Lt[ne],ue=0;ue<Be.length;++ue){var Pe=Be[ue]&31;su(t,E,it[Pe]),E+=Ke[Pe],Pe>15&&(su(t,E,Be[ue]>>5&127),E+=Be[ue]>>12)}}else Xe=jq,lt=Qh,Le=Kq,ze=_g;for(var ue=0;ue<o;++ue){var $e=i[ue];if($e>255){var Pe=$e>>18&31;fm(t,E,Xe[Pe+257]),E+=lt[Pe+257],Pe>7&&(su(t,E,$e>>23&31),E+=x1[Pe]);var nt=$e&31;fm(t,E,Le[nt]),E+=ze[nt],nt>3&&(fm(t,E,$e>>5&8191),E+=b1[nt])}else fm(t,E,Xe[$e]),E+=lt[$e]}return fm(t,E,Xe[256]),E+lt[256]},Wq=new wB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rk=new Zo(0),Zq=function(e,t,r,i,A,u){var h=u.z||e.length,o=new Zo(i+h+5*(1+Math.ceil(h/7e3))+A),g=o.subarray(i,o.length-A),x=u.l,E=(u.r||0)&7;if(t){E&&(g[0]=u.r>>3);for(var F=Wq[t-1],P=F>>13,C=F&8191,D=(1<<r)-1,k=u.p||new ml(32768),j=u.h||new ml(D+1),U=Math.ceil(r/3),N=2*U,K=function(vr){return(e[vr]^e[vr+1]<<U^e[vr+2]<<N)&D},ee=new wB(25e3),se=new ml(288),pe=new ml(32),ye=0,ue=0,Te=u.i||0,Ke=0,oe=u.w||0,he=0;Te+2<h;++Te){var Ie=K(Te),be=Te&32767,ct=j[Ie];if(k[be]=ct,j[Ie]=be,oe<=Te){var Xe=h-Te;if((ye>7e3||Ke>24576)&&(Xe>423||!x)){E=Q4(e,g,0,ee,se,pe,ue,Ke,he,Te-he,E),Ke=ye=ue=0,he=Te;for(var lt=0;lt<286;++lt)se[lt]=0;for(var lt=0;lt<30;++lt)pe[lt]=0}var Le=2,ze=0,it=C,Lt=be-ct&32767;if(Xe>2&&Ie==K(Te-Lt))for(var ne=Math.min(P,Xe)-1,Be=Math.min(32767,Te),Pe=Math.min(258,Xe);Lt<=Be&&--it&&be!=ct;){if(e[Te+Le]==e[Te+Le-Lt]){for(var $e=0;$e<Pe&&e[Te+$e]==e[Te+$e-Lt];++$e);if($e>Le){if(Le=$e,ze=Lt,$e>ne)break;for(var nt=Math.min(Lt,$e-2),Ze=0,lt=0;lt<nt;++lt){var pt=Te-Lt+lt&32767,dt=k[pt],Qt=pt-dt&32767;Qt>Ze&&(Ze=Qt,ct=pt)}}}be=ct,ct=k[be],Lt+=be-ct&32767}if(ze){ee[Ke++]=268435456|Pb[Le]<<18|k4[ze];var Mt=Pb[Le]&31,$t=k4[ze]&31;ue+=x1[Mt]+b1[$t],++se[257+Mt],++pe[$t],oe=Te+Le,++ye}else ee[Ke++]=e[Te],++se[e[Te]]}}for(Te=Math.max(Te,oe);Te<h;++Te)ee[Ke++]=e[Te],++se[e[Te]];E=Q4(e,g,x,ee,se,pe,ue,Ke,he,Te-he,E),x||(u.r=E&7|g[E/8|0]<<3,E-=7,u.h=j,u.p=k,u.i=Te,u.w=oe)}else{for(var Te=u.w||0;Te<h+x;Te+=65535){var jt=Te+65535;jt>=h&&(g[E/8|0]=x,jt=h),E=tk(g,E+1,e.subarray(Te,jt))}u.i=h}return ek(o,0,i+xB(E)+A)},nk=function(){var e=1,t=0;return{p:function(r){for(var i=e,A=t,u=r.length|0,h=0;h!=u;){for(var o=Math.min(h+2655,u);h<o;++h)A+=i+=r[h];i=(i&65535)+15*(i>>16),A=(A&65535)+15*(A>>16)}e=i,t=A},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Xq=function(e,t,r,i,A){if(!A&&(A={l:1},t.dictionary)){var u=t.dictionary.subarray(-32768),h=new Zo(u.length+e.length);h.set(u),h.set(e,u.length),e=h,A.w=u.length}return Zq(e,t.level==null?6:t.level,t.mem==null?A.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,i,A)},ik=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Yq=function(e,t){var r=t.level,i=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var A=nk();A.p(t.dictionary),ik(e,2,A.d())}},Jq=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&SA(6,"invalid zlib data"),(e[1]>>5&1)==1&&SA(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function kb(e,t){t||(t={});var r=nk();r.p(e);var i=Xq(e,t,t.dictionary?6:2,4);return Yq(i,t),ik(i,i.length-4,r.d()),i}function eW(e,t){return qq(e.subarray(Jq(e),-4),{i:2},t,t)}var tW=typeof TextDecoder<"u"&&new TextDecoder,rW=0;try{tW.decode(rk,{stream:!0}),rW=1}catch{}var tn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Tw(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var mi={log:Tw,warn:function(e){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):Tw.call(null,arguments))},error:function(e){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):Tw(e))}};function Pw(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){cd(i.response,t,r)},i.onerror=function(){mi.error("could not download file")},i.send()}function R4(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Y0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Km,Ub,cd=tn.saveAs||((typeof window>"u"?"undefined":Yn(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var i=tn.URL||tn.webkitURL,A=document.createElement("a");t=t||e.name||"download",A.download=t,A.rel="noopener",typeof e=="string"?(A.href=e,A.origin!==location.origin?R4(A.href)?Pw(e,t,r):Y0(A,A.target="_blank"):Y0(A)):(A.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(A.href)},4e4),setTimeout(function(){Y0(A)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(R4(e))Pw(e,t,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){Y0(i)})}else navigator.msSaveOrOpenBlob(function(A,u){return u===void 0?u={autoBom:!1}:Yn(u)!=="object"&&(mi.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(A.type)?new Blob(["\uFEFF",A],{type:A.type}):A}(e,r),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return Pw(e,t,r);var A=e.type==="application/octet-stream",u=/constructor/i.test(tn.HTMLElement)||tn.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||A&&u)&&(typeof FileReader>"u"?"undefined":Yn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var E=o.result;E=h?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=E:location=E,i=null},o.readAsDataURL(e)}else{var g=tn.URL||tn.webkitURL,x=g.createObjectURL(e);i?i.location=x:location.href=x,i=null,setTimeout(function(){g.revokeObjectURL(x)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function sk(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<r.length;i++){var A=r[i].re,u=r[i].process,h=A.exec(e);h&&(t=u(h),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),g=this.g.toString(16),x=this.b.toString(16);return o.length==1&&(o="0"+o),g.length==1&&(g="0"+g),x.length==1&&(x="0"+x),"#"+o+g+x}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Lw(e,t){var r=e[0],i=e[1],A=e[2],u=e[3];r=Ho(r,i,A,u,t[0],7,-680876936),u=Ho(u,r,i,A,t[1],12,-389564586),A=Ho(A,u,r,i,t[2],17,606105819),i=Ho(i,A,u,r,t[3],22,-1044525330),r=Ho(r,i,A,u,t[4],7,-176418897),u=Ho(u,r,i,A,t[5],12,1200080426),A=Ho(A,u,r,i,t[6],17,-1473231341),i=Ho(i,A,u,r,t[7],22,-45705983),r=Ho(r,i,A,u,t[8],7,1770035416),u=Ho(u,r,i,A,t[9],12,-1958414417),A=Ho(A,u,r,i,t[10],17,-42063),i=Ho(i,A,u,r,t[11],22,-1990404162),r=Ho(r,i,A,u,t[12],7,1804603682),u=Ho(u,r,i,A,t[13],12,-40341101),A=Ho(A,u,r,i,t[14],17,-1502002290),r=jo(r,i=Ho(i,A,u,r,t[15],22,1236535329),A,u,t[1],5,-165796510),u=jo(u,r,i,A,t[6],9,-1069501632),A=jo(A,u,r,i,t[11],14,643717713),i=jo(i,A,u,r,t[0],20,-373897302),r=jo(r,i,A,u,t[5],5,-701558691),u=jo(u,r,i,A,t[10],9,38016083),A=jo(A,u,r,i,t[15],14,-660478335),i=jo(i,A,u,r,t[4],20,-405537848),r=jo(r,i,A,u,t[9],5,568446438),u=jo(u,r,i,A,t[14],9,-1019803690),A=jo(A,u,r,i,t[3],14,-187363961),i=jo(i,A,u,r,t[8],20,1163531501),r=jo(r,i,A,u,t[13],5,-1444681467),u=jo(u,r,i,A,t[2],9,-51403784),A=jo(A,u,r,i,t[7],14,1735328473),r=Vo(r,i=jo(i,A,u,r,t[12],20,-1926607734),A,u,t[5],4,-378558),u=Vo(u,r,i,A,t[8],11,-2022574463),A=Vo(A,u,r,i,t[11],16,1839030562),i=Vo(i,A,u,r,t[14],23,-35309556),r=Vo(r,i,A,u,t[1],4,-1530992060),u=Vo(u,r,i,A,t[4],11,1272893353),A=Vo(A,u,r,i,t[7],16,-155497632),i=Vo(i,A,u,r,t[10],23,-1094730640),r=Vo(r,i,A,u,t[13],4,681279174),u=Vo(u,r,i,A,t[0],11,-358537222),A=Vo(A,u,r,i,t[3],16,-722521979),i=Vo(i,A,u,r,t[6],23,76029189),r=Vo(r,i,A,u,t[9],4,-640364487),u=Vo(u,r,i,A,t[12],11,-421815835),A=Vo(A,u,r,i,t[15],16,530742520),r=Ko(r,i=Vo(i,A,u,r,t[2],23,-995338651),A,u,t[0],6,-198630844),u=Ko(u,r,i,A,t[7],10,1126891415),A=Ko(A,u,r,i,t[14],15,-1416354905),i=Ko(i,A,u,r,t[5],21,-57434055),r=Ko(r,i,A,u,t[12],6,1700485571),u=Ko(u,r,i,A,t[3],10,-1894986606),A=Ko(A,u,r,i,t[10],15,-1051523),i=Ko(i,A,u,r,t[1],21,-2054922799),r=Ko(r,i,A,u,t[8],6,1873313359),u=Ko(u,r,i,A,t[15],10,-30611744),A=Ko(A,u,r,i,t[6],15,-1560198380),i=Ko(i,A,u,r,t[13],21,1309151649),r=Ko(r,i,A,u,t[4],6,-145523070),u=Ko(u,r,i,A,t[11],10,-1120210379),A=Ko(A,u,r,i,t[2],15,718787259),i=Ko(i,A,u,r,t[9],21,-343485551),e[0]=gh(r,e[0]),e[1]=gh(i,e[1]),e[2]=gh(A,e[2]),e[3]=gh(u,e[3])}function B1(e,t,r,i,A,u){return t=gh(gh(t,e),gh(i,u)),gh(t<<A|t>>>32-A,r)}function Ho(e,t,r,i,A,u,h){return B1(t&r|~t&i,e,t,A,u,h)}function jo(e,t,r,i,A,u,h){return B1(t&i|r&~i,e,t,A,u,h)}function Vo(e,t,r,i,A,u,h){return B1(t^r^i,e,t,A,u,h)}function Ko(e,t,r,i,A,u,h){return B1(r^(t|~i),e,t,A,u,h)}function ok(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Lw(i,nW(e.substring(t-64,t)));e=e.substring(t-64);var A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)A[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(A[t>>2]|=128<<(t%4<<3),t>55)for(Lw(i,A),t=0;t<16;t++)A[t]=0;return A[14]=8*r,Lw(i,A),i}function nW(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Km=tn.atob.bind(tn),Ub=tn.btoa.bind(tn);var N4="0123456789abcdef".split("");function iW(e){for(var t="",r=0;r<4;r++)t+=N4[e>>8*r+4&15]+N4[e>>8*r&15];return t}function sW(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Qb(e){return ok(e).map(sW).join("")}var oW=function(e){for(var t=0;t<e.length;t++)e[t]=iW(e[t]);return e.join("")}(ok("hello"))!="5d41402abc4b2a76b9719d911017c592";function gh(e,t){if(oW){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Rb(e,t){var r,i,A,u;if(e!==r){for(var h=(A=e,u=1+(256/e.length>>0),new Array(u+1).join(A)),o=[],g=0;g<256;g++)o[g]=g;var x=0;for(g=0;g<256;g++){var E=o[g];x=(x+E+h.charCodeAt(g))%256,o[g]=o[x],o[x]=E}r=e,i=o}else o=i;var F=t.length,P=0,C=0,D="";for(g=0;g<F;g++)C=(C+(E=o[P=(P+1)%256]))%256,o[P]=o[C],o[C]=E,h=o[(o[P]+o[C])%256],D+=String.fromCharCode(t.charCodeAt(g)^h);return D}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var D4={print:4,modify:8,copy:16,"annot-forms":32};function Cf(e,t,r,i){this.v=1,this.r=2;var A=192;e.forEach(function(o){if(D4.perm!==void 0)throw new Error("Invalid permission: "+o);A+=D4[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var u=(t+this.padding).substr(0,32),h=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,h),this.P=-(1+(255^A)),this.encryptionKey=Qb(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Rb(this.encryptionKey,this.padding)}function Sf(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,i=0;i<r;i++){var A=e.charCodeAt(i);A<33||A===35||A===37||A===40||A===41||A===47||A===60||A===62||A===91||A===93||A===123||A===125||A>126?t+="#"+("0"+A.toString(16)).slice(-2):t+=e[i]}return t}function O4(e){if(Yn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,i,A){if(A=A||!1,typeof r!="string"||typeof i!="function"||typeof A!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var u=Math.random().toString(35);return t[r][u]=[i,!!A],u},this.unsubscribe=function(r){for(var i in t)if(t[i][r])return delete t[i][r],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),A=[];for(var u in t[r]){var h=t[r][u];try{h[0].apply(e,i)}catch(o){tn.console&&mi.error("jsPDF PubSub Error",o.message,o)}h[1]&&A.push(u)}A.length&&A.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Cv(e){if(!(this instanceof Cv))return new Cv(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function ak(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function hd(e,t,r,i,A){if(!(this instanceof hd))return new hd(e,t,r,i,A);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,ak.call(this,i,A)}function zf(e,t,r,i,A){if(!(this instanceof zf))return new zf(e,t,r,i,A);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,ak.call(this,i,A)}function Xr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],A=arguments[2],u=arguments[3],h=[],o=1,g=16,x="S",E=null;Yn(e=e||{})==="object"&&(r=e.orientation,i=e.unit||i,A=e.format||A,u=e.compress||e.compressPdf||u,(E=e.encryption||null)!==null&&(E.userPassword=E.userPassword||"",E.ownerPassword=E.ownerPassword||"",E.userPermissions=E.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(g=e.floatPrecision),x=e.defaultPathOperation||"S"),h=e.filters||(u===!0?["FlateEncode"]:h),i=i||"mm",r=(""+(r||"P")).toLowerCase();var F=e.putOnlyUsedFonts||!1,P={},C={internal:{},__private__:{}};C.__private__.PubSub=O4;var D="1.3",k=C.__private__.getPdfVersion=function(){return D};C.__private__.setPdfVersion=function(Q){D=Q};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return j};var U=C.__private__.getPageFormat=function(Q){return j[Q]};A=A||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},K=N.COMPAT;function ee(){this.saveGraphicsState(),Ge(new qt(ur,0,0,-ur,0,Eo()*ur).toString()+" cm"),this.setFontSize(this.getFontSize()/ur),x="n",K=N.ADVANCED}function se(){this.restoreGraphicsState(),x="S",K=N.COMPAT}var pe=C.__private__.combineFontStyleAndFontWeight=function(Q,Ae){if(Q=="bold"&&Ae=="normal"||Q=="bold"&&Ae==400||Q=="normal"&&Ae=="italic"||Q=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(Q=Ae==400||Ae==="normal"?Q==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||Q!=="normal"?(Ae==700?"bold":Ae)+""+Q:"bold"),Q};C.advancedAPI=function(Q){var Ae=K===N.COMPAT;return Ae&&ee.call(this),typeof Q!="function"||(Q(this),Ae&&se.call(this)),this},C.compatAPI=function(Q){var Ae=K===N.ADVANCED;return Ae&&se.call(this),typeof Q!="function"||(Q(this),Ae&&ee.call(this)),this},C.isAdvancedAPI=function(){return K===N.ADVANCED};var ye,ue=function(Q){if(K!==N.ADVANCED)throw new Error(Q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Te=C.roundToPrecision=C.__private__.roundToPrecision=function(Q,Ae){var He=t||Ae;if(isNaN(Q)||isNaN(He))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Q.toFixed(He).replace(/0+$/,"")};ye=C.hpf=C.__private__.hpf=typeof g=="number"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(Q,g)}:g==="smart"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(Q,Q>-1&&Q<1?16:5)}:function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(Q,16)};var Ke=C.f2=C.__private__.f2=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f2");return Te(Q,2)},oe=C.__private__.f3=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f3");return Te(Q,3)},he=C.scale=C.__private__.scale=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.scale");return K===N.COMPAT?Q*ur:K===N.ADVANCED?Q:void 0},Ie=function(Q){return K===N.COMPAT?Eo()-Q:K===N.ADVANCED?Q:void 0},be=function(Q){return he(Ie(Q))};C.__private__.setPrecision=C.setPrecision=function(Q){typeof parseInt(Q,10)=="number"&&(t=parseInt(Q,10))};var ct,Xe="00000000000000000000000000000000",lt=C.__private__.getFileId=function(){return Xe},Le=C.__private__.setFileId=function(Q){return Xe=Q!==void 0&&/^[a-fA-F0-9]{32}$/.test(Q)?Q.toUpperCase():Xe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),E!==null&&(ei=new Cf(E.userPermissions,E.userPassword,E.ownerPassword,Xe)),Xe};C.setFileId=function(Q){return Le(Q),this},C.getFileId=function(){return lt()};var ze=C.__private__.convertDateToPDFDate=function(Q){var Ae=Q.getTimezoneOffset(),He=Ae<0?"+":"-",ot=Math.floor(Math.abs(Ae/60)),vt=Math.abs(Ae%60),Ut=[He,Pe(ot),"'",Pe(vt),"'"].join("");return["D:",Q.getFullYear(),Pe(Q.getMonth()+1),Pe(Q.getDate()),Pe(Q.getHours()),Pe(Q.getMinutes()),Pe(Q.getSeconds()),Ut].join("")},it=C.__private__.convertPDFDateToDate=function(Q){var Ae=parseInt(Q.substr(2,4),10),He=parseInt(Q.substr(6,2),10)-1,ot=parseInt(Q.substr(8,2),10),vt=parseInt(Q.substr(10,2),10),Ut=parseInt(Q.substr(12,2),10),Zt=parseInt(Q.substr(14,2),10);return new Date(Ae,He,ot,vt,Ut,Zt,0)},Lt=C.__private__.setCreationDate=function(Q){var Ae;if(Q===void 0&&(Q=new Date),Q instanceof Date)Ae=ze(Q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=Q}return ct=Ae},ne=C.__private__.getCreationDate=function(Q){var Ae=ct;return Q==="jsDate"&&(Ae=it(ct)),Ae};C.setCreationDate=function(Q){return Lt(Q),this},C.getCreationDate=function(Q){return ne(Q)};var Be,Pe=C.__private__.padd2=function(Q){return("0"+parseInt(Q)).slice(-2)},$e=C.__private__.padd2Hex=function(Q){return("00"+(Q=Q.toString())).substr(Q.length)},nt=0,Ze=[],pt=[],dt=0,Qt=[],Mt=[],$t=!1,jt=pt,vr=function(){nt=0,dt=0,pt=[],Ze=[],Qt=[],Wn=Ur(),Bn=Ur()};C.__private__.setCustomOutputDestination=function(Q){$t=!0,jt=Q};var It=function(Q){$t||(jt=Q)};C.__private__.resetCustomOutputDestination=function(){$t=!1,jt=pt};var Ge=C.__private__.out=function(Q){return Q=Q.toString(),dt+=Q.length+1,jt.push(Q),jt},Cr=C.__private__.write=function(Q){return Ge(arguments.length===1?Q.toString():Array.prototype.join.call(arguments," "))},pr=C.__private__.getArrayBuffer=function(Q){for(var Ae=Q.length,He=new ArrayBuffer(Ae),ot=new Uint8Array(He);Ae--;)ot[Ae]=Q.charCodeAt(Ae);return He},Kt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return Kt};var ar=e.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(Q){return ar=K===N.ADVANCED?Q/ur:Q,this};var lr,cr=C.__private__.getFontSize=C.getFontSize=function(){return K===N.COMPAT?ar:ar*ur},br=e.R2L||!1;C.__private__.setR2L=C.setR2L=function(Q){return br=Q,this},C.__private__.getR2L=C.getR2L=function(){return br};var Nr,Kr=C.__private__.setZoomMode=function(Q){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Q))lr=Q;else if(isNaN(Q)){if(Ae.indexOf(Q)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Q+'" is not recognized.');lr=Q}else lr=parseInt(Q,10)};C.__private__.getZoomMode=function(){return lr};var Lr,Hr=C.__private__.setPageMode=function(Q){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Q)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Q+'" is not recognized.');Nr=Q};C.__private__.getPageMode=function(){return Nr};var un=C.__private__.setLayoutMode=function(Q){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Q)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Q+'" is not recognized.');Lr=Q};C.__private__.getLayoutMode=function(){return Lr},C.__private__.setDisplayMode=C.setDisplayMode=function(Q,Ae,He){return Kr(Q),un(Ae),Hr(He),this};var zr={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(Q){if(Object.keys(zr).indexOf(Q)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return zr[Q]},C.__private__.getDocumentProperties=function(){return zr},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(Q){for(var Ae in zr)zr.hasOwnProperty(Ae)&&Q[Ae]&&(zr[Ae]=Q[Ae]);return this},C.__private__.setDocumentProperty=function(Q,Ae){if(Object.keys(zr).indexOf(Q)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return zr[Q]=Ae};var Yr,ur,At,le,fe,_e={},Qe={},et=[],tt={},yt={},rt={},Ft={},Ct=null,at=0,mt=[],Me=new O4(C),Rt=e.hotfixes||[],nr={},tr={},Ar=[],qt=function Q(Ae,He,ot,vt,Ut,Zt){if(!(this instanceof Q))return new Q(Ae,He,ot,vt,Ut,Zt);isNaN(Ae)&&(Ae=1),isNaN(He)&&(He=0),isNaN(ot)&&(ot=0),isNaN(vt)&&(vt=1),isNaN(Ut)&&(Ut=0),isNaN(Zt)&&(Zt=0),this._matrix=[Ae,He,ot,vt,Ut,Zt]};Object.defineProperty(qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qt.prototype.join=function(Q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ye).join(Q)},qt.prototype.multiply=function(Q){var Ae=Q.sx*this.sx+Q.shy*this.shx,He=Q.sx*this.shy+Q.shy*this.sy,ot=Q.shx*this.sx+Q.sy*this.shx,vt=Q.shx*this.shy+Q.sy*this.sy,Ut=Q.tx*this.sx+Q.ty*this.shx+this.tx,Zt=Q.tx*this.shy+Q.ty*this.sy+this.ty;return new qt(Ae,He,ot,vt,Ut,Zt)},qt.prototype.decompose=function(){var Q=this.sx,Ae=this.shy,He=this.shx,ot=this.sy,vt=this.tx,Ut=this.ty,Zt=Math.sqrt(Q*Q+Ae*Ae),gr=(Q/=Zt)*He+(Ae/=Zt)*ot;He-=Q*gr,ot-=Ae*gr;var Mr=Math.sqrt(He*He+ot*ot);return gr/=Mr,Q*(ot/=Mr)<Ae*(He/=Mr)&&(Q=-Q,Ae=-Ae,gr=-gr,Zt=-Zt),{scale:new qt(Zt,0,0,Mr,0,0),translate:new qt(1,0,0,1,vt,Ut),rotate:new qt(Q,Ae,-Ae,Q,0,0),skew:new qt(1,0,gr,1,0,0)}},qt.prototype.toString=function(Q){return this.join(" ")},qt.prototype.inversed=function(){var Q=this.sx,Ae=this.shy,He=this.shx,ot=this.sy,vt=this.tx,Ut=this.ty,Zt=1/(Q*ot-Ae*He),gr=ot*Zt,Mr=-Ae*Zt,en=-He*Zt,Zr=Q*Zt;return new qt(gr,Mr,en,Zr,-gr*vt-en*Ut,-Mr*vt-Zr*Ut)},qt.prototype.applyToPoint=function(Q){var Ae=Q.x*this.sx+Q.y*this.shx+this.tx,He=Q.x*this.shy+Q.y*this.sy+this.ty;return new Sa(Ae,He)},qt.prototype.applyToRectangle=function(Q){var Ae=this.applyToPoint(Q),He=this.applyToPoint(new Sa(Q.x+Q.w,Q.y+Q.h));return new Xl(Ae.x,Ae.y,He.x-Ae.x,He.y-Ae.y)},qt.prototype.clone=function(){var Q=this.sx,Ae=this.shy,He=this.shx,ot=this.sy,vt=this.tx,Ut=this.ty;return new qt(Q,Ae,He,ot,vt,Ut)},C.Matrix=qt;var Jr=C.matrixMult=function(Q,Ae){return Ae.multiply(Q)},jr=new qt(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=jr;var Rr=function(Q,Ae){if(!yt[Q]){var He=(Ae instanceof hd?"Sh":"P")+(Object.keys(tt).length+1).toString(10);Ae.id=He,yt[Q]=He,tt[He]=Ae,Me.publish("addPattern",Ae)}};C.ShadingPattern=hd,C.TilingPattern=zf,C.addShadingPattern=function(Q,Ae){return ue("addShadingPattern()"),Rr(Q,Ae),this},C.beginTilingPattern=function(Q){ue("beginTilingPattern()"),Ji(Q.boundingBox[0],Q.boundingBox[1],Q.boundingBox[2]-Q.boundingBox[0],Q.boundingBox[3]-Q.boundingBox[1],Q.matrix)},C.endTilingPattern=function(Q,Ae){ue("endTilingPattern()"),Ae.stream=Mt[Be].join(`
`),Rr(Q,Ae),Me.publish("endTilingPattern",Ae),Ar.pop().restore()};var _r=C.__private__.newObject=function(){var Q=Ur();return Pn(Q,!0),Q},Ur=C.__private__.newObjectDeferred=function(){return nt++,Ze[nt]=function(){return dt},nt},Pn=function(Q,Ae){return Ae=typeof Ae=="boolean"&&Ae,Ze[Q]=dt,Ae&&Ge(Q+" 0 obj"),Q},Yt=C.__private__.newAdditionalObject=function(){var Q={objId:Ur(),content:""};return Qt.push(Q),Q},Wn=Ur(),Bn=Ur(),Xi=C.__private__.decodeColorString=function(Q){var Ae=Q.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var He=parseFloat(Ae[0]);Ae=[He,He,He,"r"]}for(var ot="#",vt=0;vt<3;vt++)ot+=("0"+Math.floor(255*parseFloat(Ae[vt])).toString(16)).slice(-2);return ot},as=C.__private__.encodeColorString=function(Q){var Ae;typeof Q=="string"&&(Q={ch1:Q});var He=Q.ch1,ot=Q.ch2,vt=Q.ch3,Ut=Q.ch4,Zt=Q.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof He=="string"&&He.charAt(0)!=="#"){var gr=new sk(He);if(gr.ok)He=gr.toHex();else if(!/^\d*\.?\d*$/.test(He))throw new Error('Invalid color "'+He+'" passed to jsPDF.encodeColorString.')}if(typeof He=="string"&&/^#[0-9A-Fa-f]{3}$/.test(He)&&(He="#"+He[1]+He[1]+He[2]+He[2]+He[3]+He[3]),typeof He=="string"&&/^#[0-9A-Fa-f]{6}$/.test(He)){var Mr=parseInt(He.substr(1),16);He=Mr>>16&255,ot=Mr>>8&255,vt=255&Mr}if(ot===void 0||Ut===void 0&&He===ot&&ot===vt)if(typeof He=="string")Ae=He+" "+Zt[0];else switch(Q.precision){case 2:Ae=Ke(He/255)+" "+Zt[0];break;case 3:default:Ae=oe(He/255)+" "+Zt[0]}else if(Ut===void 0||Yn(Ut)==="object"){if(Ut&&!isNaN(Ut.a)&&Ut.a===0)return Ae=["1.","1.","1.",Zt[1]].join(" ");if(typeof He=="string")Ae=[He,ot,vt,Zt[1]].join(" ");else switch(Q.precision){case 2:Ae=[Ke(He/255),Ke(ot/255),Ke(vt/255),Zt[1]].join(" ");break;default:case 3:Ae=[oe(He/255),oe(ot/255),oe(vt/255),Zt[1]].join(" ")}}else if(typeof He=="string")Ae=[He,ot,vt,Ut,Zt[2]].join(" ");else switch(Q.precision){case 2:Ae=[Ke(He),Ke(ot),Ke(vt),Ke(Ut),Zt[2]].join(" ");break;case 3:default:Ae=[oe(He),oe(ot),oe(vt),oe(Ut),Zt[2]].join(" ")}return Ae},Jt=C.__private__.getFilters=function(){return h},Dr=C.__private__.putStream=function(Q){var Ae=(Q=Q||{}).data||"",He=Q.filters||Jt(),ot=Q.alreadyAppliedFilters||[],vt=Q.addLength1||!1,Ut=Ae.length,Zt=Q.objectId,gr=function(ki){return ki};if(E!==null&&Zt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");E!==null&&(gr=ei.encryptor(Zt,0));var Mr={};He===!0&&(He=["FlateEncode"]);var en=Q.additionalKeyValues||[],Zr=(Mr=Xr.API.processDataByFilters!==void 0?Xr.API.processDataByFilters(Ae,He):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(ot)?ot.join(" "):ot.toString());if(Mr.data.length!==0&&(en.push({key:"Length",value:Mr.data.length}),vt===!0&&en.push({key:"Length1",value:Ut})),Zr.length!=0)if(Zr.split("/").length-1==1)en.push({key:"Filter",value:Zr});else{en.push({key:"Filter",value:"["+Zr+"]"});for(var nn=0;nn<en.length;nn+=1)if(en[nn].key==="DecodeParms"){for(var ci=[],ti=0;ti<Mr.reverseChain.split("/").length-1;ti+=1)ci.push("null");ci.push(en[nn].value),en[nn].value="["+ci.join(" ")+"]"}}Ge("<<");for(var ri=0;ri<en.length;ri++)Ge("/"+en[ri].key+" "+en[ri].value);Ge(">>"),Mr.data.length!==0&&(Ge("stream"),Ge(gr(Mr.data)),Ge("endstream"))},Vr=C.__private__.putPage=function(Q){var Ae=Q.number,He=Q.data,ot=Q.objId,vt=Q.contentsObjId;Pn(ot,!0),Ge("<</Type /Page"),Ge("/Parent "+Q.rootDictionaryObjId+" 0 R"),Ge("/Resources "+Q.resourceDictionaryObjId+" 0 R"),Ge("/MediaBox ["+parseFloat(ye(Q.mediaBox.bottomLeftX))+" "+parseFloat(ye(Q.mediaBox.bottomLeftY))+" "+ye(Q.mediaBox.topRightX)+" "+ye(Q.mediaBox.topRightY)+"]"),Q.cropBox!==null&&Ge("/CropBox ["+ye(Q.cropBox.bottomLeftX)+" "+ye(Q.cropBox.bottomLeftY)+" "+ye(Q.cropBox.topRightX)+" "+ye(Q.cropBox.topRightY)+"]"),Q.bleedBox!==null&&Ge("/BleedBox ["+ye(Q.bleedBox.bottomLeftX)+" "+ye(Q.bleedBox.bottomLeftY)+" "+ye(Q.bleedBox.topRightX)+" "+ye(Q.bleedBox.topRightY)+"]"),Q.trimBox!==null&&Ge("/TrimBox ["+ye(Q.trimBox.bottomLeftX)+" "+ye(Q.trimBox.bottomLeftY)+" "+ye(Q.trimBox.topRightX)+" "+ye(Q.trimBox.topRightY)+"]"),Q.artBox!==null&&Ge("/ArtBox ["+ye(Q.artBox.bottomLeftX)+" "+ye(Q.artBox.bottomLeftY)+" "+ye(Q.artBox.topRightX)+" "+ye(Q.artBox.topRightY)+"]"),typeof Q.userUnit=="number"&&Q.userUnit!==1&&Ge("/UserUnit "+Q.userUnit),Me.publish("putPage",{objId:ot,pageContext:mt[Ae],pageNumber:Ae,page:He}),Ge("/Contents "+vt+" 0 R"),Ge(">>"),Ge("endobj");var Ut=He.join(`
`);return K===N.ADVANCED&&(Ut+=`
Q`),Pn(vt,!0),Dr({data:Ut,filters:Jt(),objectId:vt}),Ge("endobj"),ot},Ni=C.__private__.putPages=function(){var Q,Ae,He=[];for(Q=1;Q<=at;Q++)mt[Q].objId=Ur(),mt[Q].contentsObjId=Ur();for(Q=1;Q<=at;Q++)He.push(Vr({number:Q,data:Mt[Q],objId:mt[Q].objId,contentsObjId:mt[Q].contentsObjId,mediaBox:mt[Q].mediaBox,cropBox:mt[Q].cropBox,bleedBox:mt[Q].bleedBox,trimBox:mt[Q].trimBox,artBox:mt[Q].artBox,userUnit:mt[Q].userUnit,rootDictionaryObjId:Wn,resourceDictionaryObjId:Bn}));Pn(Wn,!0),Ge("<</Type /Pages");var ot="/Kids [";for(Ae=0;Ae<at;Ae++)ot+=He[Ae]+" 0 R ";Ge(ot+"]"),Ge("/Count "+at),Ge(">>"),Ge("endobj"),Me.publish("postPutPages")},Ga=function(Q){Me.publish("putFont",{font:Q,out:Ge,newObject:_r,putStream:Dr}),Q.isAlreadyPutted!==!0&&(Q.objectNumber=_r(),Ge("<<"),Ge("/Type /Font"),Ge("/BaseFont /"+Sf(Q.postScriptName)),Ge("/Subtype /Type1"),typeof Q.encoding=="string"&&Ge("/Encoding /"+Q.encoding),Ge("/FirstChar 32"),Ge("/LastChar 255"),Ge(">>"),Ge("endobj"))},Ls=function(){for(var Q in _e)_e.hasOwnProperty(Q)&&(F===!1||F===!0&&P.hasOwnProperty(Q))&&Ga(_e[Q])},$r=function(Q){Q.objectNumber=_r();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[ye(Q.x),ye(Q.y),ye(Q.x+Q.width),ye(Q.y+Q.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"});var He=Q.pages[1].join(`
`);Dr({data:He,additionalKeyValues:Ae,objectId:Q.objectNumber}),Ge("endobj")},qs=function(){for(var Q in nr)nr.hasOwnProperty(Q)&&$r(nr[Q])},va=function(Q,Ae){var He,ot=[],vt=1/(Ae-1);for(He=0;He<1;He+=vt)ot.push(He);if(ot.push(1),Q[0].offset!=0){var Ut={offset:0,color:Q[0].color};Q.unshift(Ut)}if(Q[Q.length-1].offset!=1){var Zt={offset:1,color:Q[Q.length-1].color};Q.push(Zt)}for(var gr="",Mr=0,en=0;en<ot.length;en++){for(He=ot[en];He>Q[Mr+1].offset;)Mr++;var Zr=Q[Mr].offset,nn=(He-Zr)/(Q[Mr+1].offset-Zr),ci=Q[Mr].color,ti=Q[Mr+1].color;gr+=$e(Math.round((1-nn)*ci[0]+nn*ti[0]).toString(16))+$e(Math.round((1-nn)*ci[1]+nn*ti[1]).toString(16))+$e(Math.round((1-nn)*ci[2]+nn*ti[2]).toString(16))}return gr.trim()},Ai=function(Q,Ae){Ae||(Ae=21);var He=_r(),ot=va(Q.colors,Ae),vt=[];vt.push({key:"FunctionType",value:"0"}),vt.push({key:"Domain",value:"[0.0 1.0]"}),vt.push({key:"Size",value:"["+Ae+"]"}),vt.push({key:"BitsPerSample",value:"8"}),vt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Dr({data:ot,additionalKeyValues:vt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:He}),Ge("endobj"),Q.objectNumber=_r(),Ge("<< /ShadingType "+Q.type),Ge("/ColorSpace /DeviceRGB");var Ut="/Coords ["+ye(parseFloat(Q.coords[0]))+" "+ye(parseFloat(Q.coords[1]))+" ";Q.type===2?Ut+=ye(parseFloat(Q.coords[2]))+" "+ye(parseFloat(Q.coords[3])):Ut+=ye(parseFloat(Q.coords[2]))+" "+ye(parseFloat(Q.coords[3]))+" "+ye(parseFloat(Q.coords[4]))+" "+ye(parseFloat(Q.coords[5])),Ge(Ut+="]"),Q.matrix&&Ge("/Matrix ["+Q.matrix.toString()+"]"),Ge("/Function "+He+" 0 R"),Ge("/Extend [true true]"),Ge(">>"),Ge("endobj")},$l=function(Q,Ae){var He=Ur(),ot=_r();Ae.push({resourcesOid:He,objectOid:ot}),Q.objectNumber=ot;var vt=[];vt.push({key:"Type",value:"/Pattern"}),vt.push({key:"PatternType",value:"1"}),vt.push({key:"PaintType",value:"1"}),vt.push({key:"TilingType",value:"1"}),vt.push({key:"BBox",value:"["+Q.boundingBox.map(ye).join(" ")+"]"}),vt.push({key:"XStep",value:ye(Q.xStep)}),vt.push({key:"YStep",value:ye(Q.yStep)}),vt.push({key:"Resources",value:He+" 0 R"}),Q.matrix&&vt.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"}),Dr({data:Q.stream,additionalKeyValues:vt,objectId:Q.objectNumber}),Ge("endobj")},_a=function(Q){var Ae;for(Ae in tt)tt.hasOwnProperty(Ae)&&(tt[Ae]instanceof hd?Ai(tt[Ae]):tt[Ae]instanceof zf&&$l(tt[Ae],Q))},Bo=function(Q){for(var Ae in Q.objectNumber=_r(),Ge("<<"),Q)switch(Ae){case"opacity":Ge("/ca "+Ke(Q[Ae]));break;case"stroke-opacity":Ge("/CA "+Ke(Q[Ae]))}Ge(">>"),Ge("endobj")},ql=function(){var Q;for(Q in rt)rt.hasOwnProperty(Q)&&Bo(rt[Q])},ls=function(){for(var Q in Ge("/XObject <<"),nr)nr.hasOwnProperty(Q)&&nr[Q].objectNumber>=0&&Ge("/"+Q+" "+nr[Q].objectNumber+" 0 R");Me.publish("putXobjectDict"),Ge(">>")},Kn=function(){ei.oid=_r(),Ge("<<"),Ge("/Filter /Standard"),Ge("/V "+ei.v),Ge("/R "+ei.r),Ge("/U <"+ei.toHexString(ei.U)+">"),Ge("/O <"+ei.toHexString(ei.O)+">"),Ge("/P "+ei.P),Ge(">>"),Ge("endobj")},Tc=function(){for(var Q in Ge("/Font <<"),_e)_e.hasOwnProperty(Q)&&(F===!1||F===!0&&P.hasOwnProperty(Q))&&Ge("/"+Q+" "+_e[Q].objectNumber+" 0 R");Ge(">>")},Wl=function(){if(Object.keys(tt).length>0){for(var Q in Ge("/Shading <<"),tt)tt.hasOwnProperty(Q)&&tt[Q]instanceof hd&&tt[Q].objectNumber>=0&&Ge("/"+Q+" "+tt[Q].objectNumber+" 0 R");Me.publish("putShadingPatternDict"),Ge(">>")}},$a=function(Q){if(Object.keys(tt).length>0){for(var Ae in Ge("/Pattern <<"),tt)tt.hasOwnProperty(Ae)&&tt[Ae]instanceof C.TilingPattern&&tt[Ae].objectNumber>=0&&tt[Ae].objectNumber<Q&&Ge("/"+Ae+" "+tt[Ae].objectNumber+" 0 R");Me.publish("putTilingPatternDict"),Ge(">>")}},qa=function(){if(Object.keys(rt).length>0){var Q;for(Q in Ge("/ExtGState <<"),rt)rt.hasOwnProperty(Q)&&rt[Q].objectNumber>=0&&Ge("/"+Q+" "+rt[Q].objectNumber+" 0 R");Me.publish("putGStateDict"),Ge(">>")}},Dn=function(Q){Pn(Q.resourcesOid,!0),Ge("<<"),Ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Tc(),Wl(),$a(Q.objectOid),qa(),ls(),Ge(">>"),Ge("endobj")},Pc=function(){var Q=[];Ls(),ql(),qs(),_a(Q),Me.publish("putResources"),Q.forEach(Dn),Dn({resourcesOid:Bn,objectOid:Number.MAX_SAFE_INTEGER}),Me.publish("postPutResources")},Lc=function(){Me.publish("putAdditionalObjects");for(var Q=0;Q<Qt.length;Q++){var Ae=Qt[Q];Pn(Ae.objId,!0),Ge(Ae.content),Ge("endobj")}Me.publish("postPutAdditionalObjects")},Mc=function(Q){Qe[Q.fontName]=Qe[Q.fontName]||{},Qe[Q.fontName][Q.fontStyle]=Q.id},wa=function(Q,Ae,He,ot,vt){var Ut={id:"F"+(Object.keys(_e).length+1).toString(10),postScriptName:Q,fontName:Ae,fontStyle:He,encoding:ot,isStandardFont:vt||!1,metadata:{}};return Me.publish("addFont",{font:Ut,instance:this}),_e[Ut.id]=Ut,Mc(Ut),Ut.id},bu=function(Q){for(var Ae=0,He=Kt.length;Ae<He;Ae++){var ot=wa.call(this,Q[Ae][0],Q[Ae][1],Q[Ae][2],Kt[Ae][3],!0);F===!1&&(P[ot]=!0);var vt=Q[Ae][0].split("-");Mc({id:ot,fontName:vt[0],fontStyle:vt[1]||""})}Me.publish("addFonts",{fonts:_e,dictionary:Qe})},Co=function(Q){return Q.foo=function(){try{return Q.apply(this,arguments)}catch(ot){var Ae=ot.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var He="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+ot.message;if(!tn.console)throw new Error(He);tn.console.error(He,ot),tn.alert&&alert(He)}},Q.foo.bar=Q,Q.foo},xa=function(Q,Ae){var He,ot,vt,Ut,Zt,gr,Mr,en,Zr;if(vt=(Ae=Ae||{}).sourceEncoding||"Unicode",Zt=Ae.outputEncoding,(Ae.autoencode||Zt)&&_e[Yr].metadata&&_e[Yr].metadata[vt]&&_e[Yr].metadata[vt].encoding&&(Ut=_e[Yr].metadata[vt].encoding,!Zt&&_e[Yr].encoding&&(Zt=_e[Yr].encoding),!Zt&&Ut.codePages&&(Zt=Ut.codePages[0]),typeof Zt=="string"&&(Zt=Ut[Zt]),Zt)){for(Mr=!1,gr=[],He=0,ot=Q.length;He<ot;He++)(en=Zt[Q.charCodeAt(He)])?gr.push(String.fromCharCode(en)):gr.push(Q[He]),gr[He].charCodeAt(0)>>8&&(Mr=!0);Q=gr.join("")}for(He=Q.length;Mr===void 0&&He!==0;)Q.charCodeAt(He-1)>>8&&(Mr=!0),He--;if(!Mr)return Q;for(gr=Ae.noBOM?[]:[254,255],He=0,ot=Q.length;He<ot;He++){if((Zr=(en=Q.charCodeAt(He))>>8)>>8)throw new Error("Character at position "+He+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gr.push(Zr),gr.push(en-(Zr<<8))}return String.fromCharCode.apply(void 0,gr)},Ws=C.__private__.pdfEscape=C.pdfEscape=function(Q,Ae){return xa(Q,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},OA=C.__private__.beginPage=function(Q){Mt[++at]=[],mt[at]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Q[0]),topRightY:Number(Q[1])}},zA(at),It(Mt[Be])},Wa=function(Q,Ae){var He,ot,vt;switch(r=Ae||r,typeof Q=="string"&&(He=U(Q.toLowerCase()),Array.isArray(He)&&(ot=He[0],vt=He[1])),Array.isArray(Q)&&(ot=Q[0]*ur,vt=Q[1]*ur),isNaN(ot)&&(ot=A[0],vt=A[1]),(ot>14400||vt>14400)&&(mi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ot=Math.min(14400,ot),vt=Math.min(14400,vt)),A=[ot,vt],r.substr(0,1)){case"l":vt>ot&&(A=[vt,ot]);break;case"p":ot>vt&&(A=[vt,ot])}OA(A),jA(ba),Ge(xs),Ca!==0&&Ge(Ca+" J"),Nc!==0&&Ge(Nc+" j"),Me.publish("addPage",{pageNumber:at})},kc=function(Q){Q>0&&Q<=at&&(Mt.splice(Q,1),mt.splice(Q,1),at--,Be>at&&(Be=at),this.setPage(Be))},zA=function(Q){Q>0&&Q<=at&&(Be=Q)},Bu=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return Mt.length-1},Zl=function(Q,Ae,He){var ot,vt=void 0;return He=He||{},Q=Q!==void 0?Q:_e[Yr].fontName,Ae=Ae!==void 0?Ae:_e[Yr].fontStyle,ot=Q.toLowerCase(),Qe[ot]!==void 0&&Qe[ot][Ae]!==void 0?vt=Qe[ot][Ae]:Qe[Q]!==void 0&&Qe[Q][Ae]!==void 0?vt=Qe[Q][Ae]:He.disableWarning===!1&&mi.warn("Unable to look up font label for font '"+Q+"', '"+Ae+"'. Refer to getFontList() for available fonts."),vt||He.noFallback||(vt=Qe.times[Ae])==null&&(vt=Qe.times.normal),vt},HA=C.__private__.putInfo=function(){var Q=_r(),Ae=function(ot){return ot};for(var He in E!==null&&(Ae=ei.encryptor(Q,0)),Ge("<<"),Ge("/Producer ("+Ws(Ae("jsPDF "+Xr.version))+")"),zr)zr.hasOwnProperty(He)&&zr[He]&&Ge("/"+He.substr(0,1).toUpperCase()+He.substr(1)+" ("+Ws(Ae(zr[He]))+")");Ge("/CreationDate ("+Ws(Ae(ct))+")"),Ge(">>"),Ge("endobj")},Zs=C.__private__.putCatalog=function(Q){var Ae=(Q=Q||{}).rootDictionaryObjId||Wn;switch(_r(),Ge("<<"),Ge("/Type /Catalog"),Ge("/Pages "+Ae+" 0 R"),lr||(lr="fullwidth"),lr){case"fullwidth":Ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ge("/OpenAction [3 0 R /Fit]");break;case"original":Ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var He=""+lr;He.substr(He.length-1)==="%"&&(lr=parseInt(lr)/100),typeof lr=="number"&&Ge("/OpenAction [3 0 R /XYZ null null "+Ke(lr)+"]")}switch(Lr||(Lr="continuous"),Lr){case"continuous":Ge("/PageLayout /OneColumn");break;case"single":Ge("/PageLayout /SinglePage");break;case"two":case"twoleft":Ge("/PageLayout /TwoColumnLeft");break;case"tworight":Ge("/PageLayout /TwoColumnRight")}Nr&&Ge("/PageMode /"+Nr),Me.publish("putCatalog"),Ge(">>"),Ge("endobj")},an=C.__private__.putTrailer=function(){Ge("trailer"),Ge("<<"),Ge("/Size "+(nt+1)),Ge("/Root "+nt+" 0 R"),Ge("/Info "+(nt-1)+" 0 R"),E!==null&&Ge("/Encrypt "+ei.oid+" 0 R"),Ge("/ID [ <"+Xe+"> <"+Xe+"> ]"),Ge(">>")},Jo=C.__private__.putHeader=function(){Ge("%PDF-"+D),Ge("%ºß¬à")},ea=C.__private__.putXRef=function(){var Q="0000000000";Ge("xref"),Ge("0 "+(nt+1)),Ge("0000000000 65535 f ");for(var Ae=1;Ae<=nt;Ae++)typeof Ze[Ae]=="function"?Ge((Q+Ze[Ae]()).slice(-10)+" 00000 n "):Ze[Ae]!==void 0?Ge((Q+Ze[Ae]).slice(-10)+" 00000 n "):Ge("0000000000 00000 n ")},Ms=C.__private__.buildDocument=function(){vr(),It(pt),Me.publish("buildDocument"),Jo(),Ni(),Lc(),Pc(),E!==null&&Kn(),HA(),Zs();var Q=dt;return ea(),an(),Ge("startxref"),Ge(""+Q),Ge("%%EOF"),It(Mt[Be]),pt.join(`
`)},xl=C.__private__.getBlob=function(Q){return new Blob([pr(Q)],{type:"application/pdf"})},bl=C.output=C.__private__.output=Co(function(Q,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",Q){case void 0:return Ms();case"save":C.save(Ae.filename);break;case"arraybuffer":return pr(Ms());case"blob":return xl(Ms());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(xl(Ms()))||void 0;mi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var He="",ot=Ms();try{He=Ub(ot)}catch{He=Ub(unescape(encodeURIComponent(ot)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+He;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var vt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ut=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(vt=Ae.pdfObjectUrl,Ut="");var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+vt+'"'+Ut+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",gr=tn.open();return gr!==null&&gr.document.write(Zt),gr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',en=tn.open();if(en!==null){en.document.write(Mr);var Zr=this;en.document.documentElement.querySelector("#pdfViewer").onload=function(){en.document.title=Ae.filename,en.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Zr.output("bloburl"))}}return en}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',ci=tn.open();if(ci!==null&&(ci.document.write(nn),ci.document.title=Ae.filename),ci||typeof safari>"u")return ci;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",Ae);default:return null}}),ks=function(Q){return Array.isArray(Rt)===!0&&Rt.indexOf(Q)>-1};switch(i){case"pt":ur=1;break;case"mm":ur=72/25.4;break;case"cm":ur=72/2.54;break;case"in":ur=72;break;case"px":ur=ks("px_scaling")==1?.75:96/72;break;case"pc":case"em":ur=12;break;case"ex":ur=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);ur=i}var ei=null;Lt(),Le();var ln=function(Q){return E!==null?ei.encryptor(Q,0):function(Ae){return Ae}},Bl=C.__private__.getPageInfo=C.getPageInfo=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[Q].objId,pageNumber:Q,pageContext:mt[Q]}},qr=C.__private__.getPageInfoByObjId=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in mt)if(mt[Ae].objId===Q)break;return Bl(Ae)},Uc=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:mt[Be].objId,pageNumber:Be,pageContext:mt[Be]}};C.addPage=function(){return Wa.apply(this,arguments),this},C.setPage=function(){return zA.apply(this,arguments),It.call(this,Mt[Be]),this},C.insertPage=function(Q){return this.addPage(),this.movePage(Be,Q),this},C.movePage=function(Q,Ae){var He,ot;if(Q>Ae){He=Mt[Q],ot=mt[Q];for(var vt=Q;vt>Ae;vt--)Mt[vt]=Mt[vt-1],mt[vt]=mt[vt-1];Mt[Ae]=He,mt[Ae]=ot,this.setPage(Ae)}else if(Q<Ae){He=Mt[Q],ot=mt[Q];for(var Ut=Q;Ut<Ae;Ut++)Mt[Ut]=Mt[Ut+1],mt[Ut]=mt[Ut+1];Mt[Ae]=He,mt[Ae]=ot,this.setPage(Ae)}return this},C.deletePage=function(){return kc.apply(this,arguments),this},C.__private__.text=C.text=function(Q,Ae,He,ot,vt){var Ut,Zt,gr,Mr,en,Zr,nn,ci,ti,ri=(ot=ot||{}).scope||this;if(typeof Q=="number"&&typeof Ae=="number"&&(typeof He=="string"||Array.isArray(He))){var ki=He;He=Ae,Ae=Q,Q=ki}if(arguments[3]instanceof qt?(ue("The transform parameter of text() with a Matrix value"),ti=vt):(gr=arguments[4],Mr=arguments[5],Yn(nn=arguments[3])==="object"&&nn!==null||(typeof gr=="string"&&(Mr=gr,gr=null),typeof nn=="string"&&(Mr=nn,nn=null),typeof nn=="number"&&(gr=nn,nn=null),ot={flags:nn,angle:gr,align:Mr})),isNaN(Ae)||isNaN(He)||Q==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Q.length===0)return ri;var zi="",Us=!1,Ys=typeof ot.lineHeightFactor=="number"?ot.lineHeightFactor:Si,Qs=ri.internal.scaleFactor;function Cu(jn){return jn=jn.split("	").join(Array(ot.TabLen||9).join(" ")),Ws(jn,nn)}function VA(jn){for(var Vn,di=jn.concat(),Xn=[],To=di.length;To--;)typeof(Vn=di.shift())=="string"?Xn.push(Vn):Array.isArray(jn)&&(Vn.length===1||Vn[1]===void 0&&Vn[2]===void 0)?Xn.push(Vn[0]):Xn.push([Vn[0],Vn[1],Vn[2]]);return Xn}function Oc(jn,Vn){var di;if(typeof jn=="string")di=Vn(jn)[0];else if(Array.isArray(jn)){for(var Xn,To,Pl=jn.concat(),Pa=[],rl=Pl.length;rl--;)typeof(Xn=Pl.shift())=="string"?Pa.push(Vn(Xn)[0]):Array.isArray(Xn)&&typeof Xn[0]=="string"&&(To=Vn(Xn[0],Xn[1],Xn[2]),Pa.push([To[0],To[1],To[2]]));di=Pa}return di}var Ya=!1,Jl=!0;if(typeof Q=="string")Ya=!0;else if(Array.isArray(Q)){var KA=Q.concat();Zt=[];for(var eA,Hi=KA.length;Hi--;)(typeof(eA=KA.shift())!="string"||Array.isArray(eA)&&typeof eA[0]!="string")&&(Jl=!1);Ya=Jl}if(Ya===!1)throw new Error('Type of text must be string or Array. "'+Q+'" is not recognized.');typeof Q=="string"&&(Q=Q.match(/[\r?\n]/)?Q.split(/\r\n|\r|\n/g):[Q]);var Fl=ar/ri.internal.scaleFactor,Fo=Fl*(Ys-1);switch(ot.baseline){case"bottom":He-=Fo;break;case"top":He+=Fl-Fo;break;case"hanging":He+=Fl-2*Fo;break;case"middle":He+=Fl/2-Fo}if((Zr=ot.maxWidth||0)>0&&(typeof Q=="string"?Q=ri.splitTextToSize(Q,Zr):Object.prototype.toString.call(Q)==="[object Array]"&&(Q=Q.reduce(function(jn,Vn){return jn.concat(ri.splitTextToSize(Vn,Zr))},[]))),Ut={text:Q,x:Ae,y:He,options:ot,mutex:{pdfEscape:Ws,activeFontKey:Yr,fonts:_e,activeFontSize:ar}},Me.publish("preProcessText",Ut),Q=Ut.text,gr=(ot=Ut.options).angle,!(ti instanceof qt)&&gr&&typeof gr=="number"){gr*=Math.PI/180,ot.rotationDirection===0&&(gr=-gr),K===N.ADVANCED&&(gr=-gr);var tA=Math.cos(gr),rA=Math.sin(gr);ti=new qt(tA,rA,-rA,tA,0,0)}else gr&&gr instanceof qt&&(ti=gr);K!==N.ADVANCED||ti||(ti=jr),(en=ot.charSpace||Ba)!==void 0&&(zi+=ye(he(en))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ci=ot.horizontalScale)!==void 0&&(zi+=ye(100*ci)+` Tz
`),ot.lang;var ji=-1,jh=ot.renderingMode!==void 0?ot.renderingMode:ot.stroke,Il=ri.internal.getCurrentPageInfo().pageContext;switch(jh){case 0:case!1:case"fill":ji=0;break;case 1:case!0:case"stroke":ji=1;break;case 2:case"fillThenStroke":ji=2;break;case 3:case"invisible":ji=3;break;case 4:case"fillAndAddForClipping":ji=4;break;case 5:case"strokeAndAddPathForClipping":ji=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ji=6;break;case 7:case"addToPathForClipping":ji=7}var Su=Il.usedRenderingMode!==void 0?Il.usedRenderingMode:-1;ji!==-1?zi+=ji+` Tr
`:Su!==-1&&(zi+=`0 Tr
`),ji!==-1&&(Il.usedRenderingMode=ji),Mr=ot.align||"left";var fo,nA=ar*Ys,zc=ri.internal.pageSize.getWidth(),Hc=_e[Yr];en=ot.charSpace||Ba,Zr=ot.maxWidth||0,nn=Object.assign({autoencode:!0,noBOM:!0},ot.flags);var Fa=[],hn=function(jn){return ri.getStringUnitWidth(jn,{font:Hc,charSpace:en,fontSize:ar,doKerning:!1})*ar/Qs};if(Object.prototype.toString.call(Q)==="[object Array]"){var As;Zt=VA(Q),Mr!=="left"&&(fo=Zt.map(hn));var ui,Ia=0;if(Mr==="right"){Ae-=fo[0],Q=[],Hi=Zt.length;for(var ra=0;ra<Hi;ra++)ra===0?(ui=Xs(Ae),As=uo(He)):(ui=he(Ia-fo[ra]),As=-nA),Q.push([Zt[ra],ui,As]),Ia=fo[ra]}else if(Mr==="center"){Ae-=fo[0]/2,Q=[],Hi=Zt.length;for(var na=0;na<Hi;na++)na===0?(ui=Xs(Ae),As=uo(He)):(ui=he((Ia-fo[na])/2),As=-nA),Q.push([Zt[na],ui,As]),Ia=fo[na]}else if(Mr==="left"){Q=[],Hi=Zt.length;for(var iA=0;iA<Hi;iA++)Q.push(Zt[iA])}else if(Mr==="justify"&&Hc.encoding==="Identity-H"){Q=[],Hi=Zt.length,Zr=Zr!==0?Zr:zc;for(var ia=0,Hn=0;Hn<Hi;Hn++)if(As=Hn===0?uo(He):-nA,ui=Hn===0?Xs(Ae):ia,Hn<Hi-1){var sA=he((Zr-fo[Hn])/(Zt[Hn].split(" ").length-1)),Rs=Zt[Hn].split(" ");Q.push([Rs[0]+" ",ui,As]),ia=0;for(var Io=1;Io<Rs.length;Io++){var GA=(hn(Rs[Io-1]+" "+Rs[Io])-hn(Rs[Io]))*Qs+sA;Io==Rs.length-1?Q.push([Rs[Io],GA,0]):Q.push([Rs[Io]+" ",GA,0]),ia-=GA}}else Q.push([Zt[Hn],ui,As]);Q.push(["",ia,0])}else{if(Mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Q=[],Hi=Zt.length,Zr=Zr!==0?Zr:zc,Hn=0;Hn<Hi;Hn++)As=Hn===0?uo(He):-nA,ui=Hn===0?Xs(Ae):0,Hn<Hi-1?Fa.push(ye(he((Zr-fo[Hn])/(Zt[Hn].split(" ").length-1)))):Fa.push(0),Q.push([Zt[Hn],ui,As])}}var Eu=typeof ot.R2L=="boolean"?ot.R2L:br;Eu===!0&&(Q=Oc(Q,function(jn,Vn,di){return[jn.split("").reverse().join(""),Vn,di]})),Ut={text:Q,x:Ae,y:He,options:ot,mutex:{pdfEscape:Ws,activeFontKey:Yr,fonts:_e,activeFontSize:ar}},Me.publish("postProcessText",Ut),Q=Ut.text,Us=Ut.mutex.isHex||!1;var $A=_e[Yr].encoding;$A!=="WinAnsiEncoding"&&$A!=="StandardEncoding"||(Q=Oc(Q,function(jn,Vn,di){return[Cu(jn),Vn,di]})),Zt=VA(Q),Q=[];for(var oA,Tl,sa,Ta=0,Ja=1,el=Array.isArray(Zt[0])?Ja:Ta,Js="",tl=function(jn,Vn,di){var Xn="";return di instanceof qt?(di=typeof ot.angle=="number"?Jr(di,new qt(1,0,0,1,jn,Vn)):Jr(new qt(1,0,0,1,jn,Vn),di),K===N.ADVANCED&&(di=Jr(new qt(1,0,0,-1,0,0),di)),Xn=di.join(" ")+` Tm
`):Xn=ye(jn)+" "+ye(Vn)+` Td
`,Xn},cs=0;cs<Zt.length;cs++){switch(Js="",el){case Ja:sa=(Us?"<":"(")+Zt[cs][0]+(Us?">":")"),oA=parseFloat(Zt[cs][1]),Tl=parseFloat(Zt[cs][2]);break;case Ta:sa=(Us?"<":"(")+Zt[cs]+(Us?">":")"),oA=Xs(Ae),Tl=uo(He)}Fa!==void 0&&Fa[cs]!==void 0&&(Js=Fa[cs]+` Tw
`),cs===0?Q.push(Js+tl(oA,Tl,ti)+sa):el===Ta?Q.push(Js+sa):el===Ja&&Q.push(Js+tl(oA,Tl,ti)+sa)}Q=el===Ta?Q.join(` Tj
T* `):Q.join(` Tj
`),Q+=` Tj
`;var hi=`BT
/`;return hi+=Yr+" "+ar+` Tf
`,hi+=ye(ar*Ys)+` TL
`,hi+=So+`
`,hi+=zi,hi+=Q,Ge(hi+="ET"),P[Yr]=!0,ri};var Yi=C.__private__.clip=C.clip=function(Q){return Ge(Q==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return Yi("evenodd")},C.__private__.discardPath=C.discardPath=function(){return Ge("n"),this};var kn=C.__private__.isValidStyle=function(Q){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Q)!==-1&&(Ae=!0),Ae};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(Q){return kn(Q)&&(x=Q),this};var Di=C.__private__.getStyle=C.getStyle=function(Q){var Ae=x;switch(Q){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=Q}return Ae},Ci=C.close=function(){return Ge("h"),this};C.stroke=function(){return Ge("S"),this},C.fill=function(Q){return Un("f",Q),this},C.fillEvenOdd=function(Q){return Un("f*",Q),this},C.fillStroke=function(Q){return Un("B",Q),this},C.fillStrokeEvenOdd=function(Q){return Un("B*",Q),this};var Un=function(Q,Ae){Yn(Ae)==="object"?ws(Ae,Q):Ge(Q)},Cl=function(Q){Q===null||K===N.ADVANCED&&Q===void 0||(Q=Di(Q),Ge(Q))};function An(Q,Ae,He,ot,vt){var Ut=new zf(Ae||this.boundingBox,He||this.xStep,ot||this.yStep,this.gState,vt||this.matrix);Ut.stream=this.stream;var Zt=Q+"$$"+this.cloneIndex+++"$$";return Rr(Zt,Ut),Ut}var ws=function(Q,Ae){var He=yt[Q.key],ot=tt[He];if(ot instanceof hd)Ge("q"),Ge(Gr(Ae)),ot.gState&&C.setGState(ot.gState),Ge(Q.matrix.toString()+" cm"),Ge("/"+He+" sh"),Ge("Q");else if(ot instanceof zf){var vt=new qt(1,0,0,-1,0,Eo());Q.matrix&&(vt=vt.multiply(Q.matrix||jr),He=An.call(ot,Q.key,Q.boundingBox,Q.xStep,Q.yStep,vt).id),Ge("q"),Ge("/Pattern cs"),Ge("/"+He+" scn"),ot.gState&&C.setGState(ot.gState),Ge(Ae),Ge("Q")}},Gr=function(Q){switch(Q){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Wr=C.moveTo=function(Q,Ae){return Ge(ye(he(Q))+" "+ye(be(Ae))+" m"),this},Ao=C.lineTo=function(Q,Ae){return Ge(ye(he(Q))+" "+ye(be(Ae))+" l"),this},Tr=C.curveTo=function(Q,Ae,He,ot,vt,Ut){return Ge([ye(he(Q)),ye(be(Ae)),ye(he(He)),ye(be(ot)),ye(he(vt)),ye(be(Ut)),"c"].join(" ")),this};C.__private__.line=C.line=function(Q,Ae,He,ot,vt){if(isNaN(Q)||isNaN(Ae)||isNaN(He)||isNaN(ot)||!kn(vt))throw new Error("Invalid arguments passed to jsPDF.line");return K===N.COMPAT?this.lines([[He-Q,ot-Ae]],Q,Ae,[1,1],vt||"S"):this.lines([[He-Q,ot-Ae]],Q,Ae,[1,1]).stroke()},C.__private__.lines=C.lines=function(Q,Ae,He,ot,vt,Ut){var Zt,gr,Mr,en,Zr,nn,ci,ti,ri,ki,zi,Us;if(typeof Q=="number"&&(Us=He,He=Ae,Ae=Q,Q=Us),ot=ot||[1,1],Ut=Ut||!1,isNaN(Ae)||isNaN(He)||!Array.isArray(Q)||!Array.isArray(ot)||!kn(vt)||typeof Ut!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wr(Ae,He),Zt=ot[0],gr=ot[1],en=Q.length,ki=Ae,zi=He,Mr=0;Mr<en;Mr++)(Zr=Q[Mr]).length===2?(ki=Zr[0]*Zt+ki,zi=Zr[1]*gr+zi,Ao(ki,zi)):(nn=Zr[0]*Zt+ki,ci=Zr[1]*gr+zi,ti=Zr[2]*Zt+ki,ri=Zr[3]*gr+zi,ki=Zr[4]*Zt+ki,zi=Zr[5]*gr+zi,Tr(nn,ci,ti,ri,ki,zi));return Ut&&Ci(),Cl(vt),this},C.path=function(Q){for(var Ae=0;Ae<Q.length;Ae++){var He=Q[Ae],ot=He.c;switch(He.op){case"m":Wr(ot[0],ot[1]);break;case"l":Ao(ot[0],ot[1]);break;case"c":Tr.apply(this,ot);break;case"h":Ci()}}return this},C.__private__.rect=C.rect=function(Q,Ae,He,ot,vt){if(isNaN(Q)||isNaN(Ae)||isNaN(He)||isNaN(ot)||!kn(vt))throw new Error("Invalid arguments passed to jsPDF.rect");return K===N.COMPAT&&(ot=-ot),Ge([ye(he(Q)),ye(be(Ae)),ye(he(He)),ye(he(ot)),"re"].join(" ")),Cl(vt),this},C.__private__.triangle=C.triangle=function(Q,Ae,He,ot,vt,Ut,Zt){if(isNaN(Q)||isNaN(Ae)||isNaN(He)||isNaN(ot)||isNaN(vt)||isNaN(Ut)||!kn(Zt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[He-Q,ot-Ae],[vt-He,Ut-ot],[Q-vt,Ae-Ut]],Q,Ae,[1,1],Zt,!0),this},C.__private__.roundedRect=C.roundedRect=function(Q,Ae,He,ot,vt,Ut,Zt){if(isNaN(Q)||isNaN(Ae)||isNaN(He)||isNaN(ot)||isNaN(vt)||isNaN(Ut)||!kn(Zt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var gr=4/3*(Math.SQRT2-1);return vt=Math.min(vt,.5*He),Ut=Math.min(Ut,.5*ot),this.lines([[He-2*vt,0],[vt*gr,0,vt,Ut-Ut*gr,vt,Ut],[0,ot-2*Ut],[0,Ut*gr,-vt*gr,Ut,-vt,Ut],[2*vt-He,0],[-vt*gr,0,-vt,-Ut*gr,-vt,-Ut],[0,2*Ut-ot],[0,-Ut*gr,vt*gr,-Ut,vt,-Ut]],Q+vt,Ae,[1,1],Zt,!0),this},C.__private__.ellipse=C.ellipse=function(Q,Ae,He,ot,vt){if(isNaN(Q)||isNaN(Ae)||isNaN(He)||isNaN(ot)||!kn(vt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ut=4/3*(Math.SQRT2-1)*He,Zt=4/3*(Math.SQRT2-1)*ot;return Wr(Q+He,Ae),Tr(Q+He,Ae-Zt,Q+Ut,Ae-ot,Q,Ae-ot),Tr(Q-Ut,Ae-ot,Q-He,Ae-Zt,Q-He,Ae),Tr(Q-He,Ae+Zt,Q-Ut,Ae+ot,Q,Ae+ot),Tr(Q+Ut,Ae+ot,Q+He,Ae+Zt,Q+He,Ae),Cl(vt),this},C.__private__.circle=C.circle=function(Q,Ae,He,ot){if(isNaN(Q)||isNaN(Ae)||isNaN(He)||!kn(ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Q,Ae,He,He,ot)},C.setFont=function(Q,Ae,He){return He&&(Ae=pe(Ae,He)),Yr=Zl(Q,Ae,{disableWarning:!1}),this};var Za=C.__private__.getFont=C.getFont=function(){return _e[Zl.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var Q,Ae,He={};for(Q in Qe)if(Qe.hasOwnProperty(Q))for(Ae in He[Q]=[],Qe[Q])Qe[Q].hasOwnProperty(Ae)&&He[Q].push(Ae);return He},C.addFont=function(Q,Ae,He,ot,vt){var Ut=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ut.indexOf(arguments[3])!==-1?vt=arguments[3]:arguments[3]&&Ut.indexOf(arguments[3])==-1&&(He=pe(He,ot)),vt=vt||"Identity-H",wa.call(this,Q,Ae,He,vt)};var Si,ba=e.lineWidth||.200025,Oi=C.__private__.getLineWidth=C.getLineWidth=function(){return ba},jA=C.__private__.setLineWidth=C.setLineWidth=function(Q){return ba=Q,Ge(ye(he(Q))+" w"),this};C.__private__.setLineDash=Xr.API.setLineDash=Xr.API.setLineDashPattern=function(Q,Ae){if(Q=Q||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(Q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Q=Q.map(function(He){return ye(he(He))}).join(" "),Ae=ye(he(Ae)),Ge("["+Q+"] "+Ae+" d"),this};var co=C.__private__.getLineHeight=C.getLineHeight=function(){return ar*Si};C.__private__.getLineHeight=C.getLineHeight=function(){return ar*Si};var Qc=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(Q){return typeof(Q=Q||1.15)=="number"&&(Si=Q),this},Rc=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return Si};Qc(e.lineHeight);var Xs=C.__private__.getHorizontalCoordinate=function(Q){return he(Q)},uo=C.__private__.getVerticalCoordinate=function(Q){return K===N.ADVANCED?Q:mt[Be].mediaBox.topRightY-mt[Be].mediaBox.bottomLeftY-he(Q)},ho=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(Q){return ye(Xs(Q))},Zn=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(Q){return ye(uo(Q))},xs=e.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return Xi(xs)},C.__private__.setStrokeColor=C.setDrawColor=function(Q,Ae,He,ot){return xs=as({ch1:Q,ch2:Ae,ch3:He,ch4:ot,pdfColorType:"draw",precision:2}),Ge(xs),this};var Xa=e.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return Xi(Xa)},C.__private__.setFillColor=C.setFillColor=function(Q,Ae,He,ot){return Xa=as({ch1:Q,ch2:Ae,ch3:He,ch4:ot,pdfColorType:"fill",precision:2}),Ge(Xa),this};var So=e.textColor||"0 g",gi=C.__private__.getTextColor=C.getTextColor=function(){return Xi(So)};C.__private__.setTextColor=C.setTextColor=function(Q,Ae,He,ot){return So=as({ch1:Q,ch2:Ae,ch3:He,ch4:ot,pdfColorType:"text",precision:3}),this};var Ba=e.charSpace,Sl=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(Ba||0)};C.__private__.setCharSpace=C.setCharSpace=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ba=Q,this};var Ca=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(Q){var Ae=C.CapJoinStyles[Q];if(Ae===void 0)throw new Error("Line cap style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ca=Ae,Ge(Ae+" J"),this};var Nc=0;C.__private__.setLineJoin=C.setLineJoin=function(Q){var Ae=C.CapJoinStyles[Q];if(Ae===void 0)throw new Error("Line join style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nc=Ae,Ge(Ae+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(Q){if(Q=Q||0,isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ge(ye(he(Q))+" M"),this},C.GState=Cv,C.setGState=function(Q){(Q=typeof Q=="string"?rt[Ft[Q]]:ta(null,Q)).equals(Ct)||(Ge("/"+Q.id+" gs"),Ct=Q)};var ta=function(Q,Ae){if(!Q||!Ft[Q]){var He=!1;for(var ot in rt)if(rt.hasOwnProperty(ot)&&rt[ot].equals(Ae)){He=!0;break}if(He)Ae=rt[ot];else{var vt="GS"+(Object.keys(rt).length+1).toString(10);rt[vt]=Ae,Ae.id=vt}return Q&&(Ft[Q]=Ae.id),Me.publish("addGState",Ae),Ae}};C.addGState=function(Q,Ae){return ta(Q,Ae),this},C.saveGraphicsState=function(){return Ge("q"),et.push({key:Yr,size:ar,color:So}),this},C.restoreGraphicsState=function(){Ge("Q");var Q=et.pop();return Yr=Q.key,ar=Q.size,So=Q.color,Ct=null,this},C.setCurrentTransformationMatrix=function(Q){return Ge(Q.toString()+" cm"),this},C.comment=function(Q){return Ge("#"+Q),this};var Sa=function(Q,Ae){var He=Q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return He},set:function(Ut){isNaN(Ut)||(He=parseFloat(Ut))}});var ot=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ot},set:function(Ut){isNaN(Ut)||(ot=parseFloat(Ut))}});var vt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return vt},set:function(Ut){vt=Ut.toString()}}),this},Xl=function(Q,Ae,He,ot){Sa.call(this,Q,Ae),this.type="rect";var vt=He||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return vt},set:function(Zt){isNaN(Zt)||(vt=parseFloat(Zt))}});var Ut=ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ut},set:function(Zt){isNaN(Zt)||(Ut=parseFloat(Zt))}}),this},Dc=function(){this.page=at,this.currentPage=Be,this.pages=Mt.slice(0),this.pagesContext=mt.slice(0),this.x=At,this.y=le,this.matrix=fe,this.width=Mi(Be),this.height=Eo(Be),this.outputDestination=jt,this.id="",this.objectNumber=-1};Dc.prototype.restore=function(){at=this.page,Be=this.currentPage,mt=this.pagesContext,Mt=this.pages,At=this.x,le=this.y,fe=this.matrix,Yl(Be,this.width),Ea(Be,this.height),jt=this.outputDestination};var Ji=function(Q,Ae,He,ot,vt){Ar.push(new Dc),at=Be=0,Mt=[],At=Q,le=Ae,fe=vt,OA([He,ot])},El=function(Q){if(tr[Q])Ar.pop().restore();else{var Ae=new Dc,He="Xo"+(Object.keys(nr).length+1).toString(10);Ae.id=He,tr[Q]=He,nr[He]=Ae,Me.publish("addFormObject",Ae),Ar.pop().restore()}};for(var es in C.beginFormObject=function(Q,Ae,He,ot,vt){return Ji(Q,Ae,He,ot,vt),this},C.endFormObject=function(Q){return El(Q),this},C.doFormObject=function(Q,Ae){var He=nr[tr[Q]];return Ge("q"),Ge(Ae.toString()+" cm"),Ge("/"+He.id+" Do"),Ge("Q"),this},C.getFormObject=function(Q){var Ae=nr[tr[Q]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},C.save=function(Q,Ae){return Q=Q||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(cd(xl(Ms()),Q),typeof cd.unload=="function"&&tn.setTimeout&&setTimeout(cd.unload,911),this):new Promise(function(He,ot){try{var vt=cd(xl(Ms()),Q);typeof cd.unload=="function"&&tn.setTimeout&&setTimeout(cd.unload,911),He(vt)}catch(Ut){ot(Ut.message)}})},Xr.API)Xr.API.hasOwnProperty(es)&&(es==="events"&&Xr.API.events.length?function(Q,Ae){var He,ot,vt;for(vt=Ae.length-1;vt!==-1;vt--)He=Ae[vt][0],ot=Ae[vt][1],Q.subscribe.apply(Q,[He].concat(typeof ot=="function"?[ot]:ot))}(Me,Xr.API.events):C[es]=Xr.API[es]);var Mi=C.getPageWidth=function(Q){return(mt[Q=Q||Be].mediaBox.topRightX-mt[Q].mediaBox.bottomLeftX)/ur},Yl=C.setPageWidth=function(Q,Ae){mt[Q].mediaBox.topRightX=Ae*ur+mt[Q].mediaBox.bottomLeftX},Eo=C.getPageHeight=function(Q){return(mt[Q=Q||Be].mediaBox.topRightY-mt[Q].mediaBox.bottomLeftY)/ur},Ea=C.setPageHeight=function(Q,Ae){mt[Q].mediaBox.topRightY=Ae*ur+mt[Q].mediaBox.bottomLeftY};return C.internal={pdfEscape:Ws,getStyle:Di,getFont:Za,getFontSize:cr,getCharSpace:Sl,getTextColor:gi,getLineHeight:co,getLineHeightFactor:Rc,getLineWidth:Oi,write:Cr,getHorizontalCoordinate:Xs,getVerticalCoordinate:uo,getCoordinateString:ho,getVerticalCoordinateString:Zn,collections:{},newObject:_r,newAdditionalObject:Yt,newObjectDeferred:Ur,newObjectDeferredBegin:Pn,getFilters:Jt,putStream:Dr,events:Me,scaleFactor:ur,pageSize:{getWidth:function(){return Mi(Be)},setWidth:function(Q){Yl(Be,Q)},getHeight:function(){return Eo(Be)},setHeight:function(Q){Ea(Be,Q)}},encryptionOptions:E,encryption:ei,getEncryptor:ln,output:bl,getNumberOfPages:Bu,pages:Mt,out:Ge,f2:Ke,f3:oe,getPageInfo:Bl,getPageInfoByObjId:qr,getCurrentPageInfo:Uc,getPDFVersion:k,Point:Sa,Rectangle:Xl,Matrix:qt,hasHotfix:ks},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return Mi(Be)},set:function(Q){Yl(Be,Q)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return Eo(Be)},set:function(Q){Ea(Be,Q)},enumerable:!0,configurable:!0}),bu.call(C,Kt),Yr="F1",Wa(A,r),Me.publish("initialized"),C}Cf.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Cf.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Cf.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Cf.prototype.processOwnerPassword=function(e,t){return Rb(Qb(t).substr(0,5),e)},Cf.prototype.encryptor=function(e,t){var r=Qb(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return Rb(r,i)}},Cv.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Yn(e)!==Yn(this))return!1;var i=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&i--;return i===0},Xr.API={events:[]},Xr.version="3.0.1";var ss=Xr.API,bB=1,zd=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_f=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},cn=function(e){return e.toFixed(2)},Wu=function(e){return e.toFixed(5)};ss.__acroform__={};var Ka=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},z4=function(e){return e*bB},uc=function(e){var t=new Ak,r=Pr.internal.getHeight(e)||0,i=Pr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(cn(i)),Number(cn(r))],t},aW=ss.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},lW=ss.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},AW=ss.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ys=ss.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return AW(e,t-1)},vs=ss.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aW(e,t-1)},_s=ss.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return lW(e,t-1)},cW=ss.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,A=e[0],u=e[1],h=e[2],o=e[3],g={};return g.lowerLeft_X=r(A)||0,g.lowerLeft_Y=i(u+o)||0,g.upperRight_X=r(A+h)||0,g.upperRight_Y=i(u)||0,[Number(cn(g.lowerLeft_X)),Number(cn(g.lowerLeft_Y)),Number(cn(g.upperRight_X)),Number(cn(g.upperRight_Y))]},uW=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,i=Nb(e,r),A=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+A+" "+cn(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var u=uc(e);return u.scope=e.scope,u.stream=t.join(`
`),u}},Nb=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},A=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");A=e.multiline?A.map(function(oe){return oe.split(`
`)}):A.map(function(oe){return[oe]});var u=r,h=Pr.internal.getHeight(e)||0;h=h<0?-h:h;var o=Pr.internal.getWidth(e)||0;o=o<0?-o:o;var g=function(oe,he,Ie){if(oe+1<A.length){var be=he+" "+A[oe+1][0];return J0(be,e,Ie).width<=o-4}return!1};u++;e:for(;u>0;){t="",u--;var x,E,F=J0("3",e,u).height,P=e.multiline?h-u:(h-F)/2,C=P+=2,D=0,k=0,j=0;if(u<=0){t=`(...) Tj
`,t+="% Width of Text: "+J0(t,e,u=12).width+", FieldWidth:"+o+`
`;break}for(var U="",N=0,K=0;K<A.length;K++)if(A.hasOwnProperty(K)){var ee=!1;if(A[K].length!==1&&j!==A[K].length-1){if((F+2)*(N+2)+2>h)continue e;U+=A[K][j],ee=!0,k=K,K--}else{U=(U+=A[K][j]+" ").substr(U.length-1)==" "?U.substr(0,U.length-1):U;var se=parseInt(K),pe=g(se,U,u),ye=K>=A.length-1;if(pe&&!ye){U+=" ",j=0;continue}if(pe||ye){if(ye)k=se;else if(e.multiline&&(F+2)*(N+2)+2>h)continue e}else{if(!e.multiline||(F+2)*(N+2)+2>h)continue e;k=se}}for(var ue="",Te=D;Te<=k;Te++){var Ke=A[Te];if(e.multiline){if(Te===k){ue+=Ke[j]+" ",j=(j+1)%Ke.length;continue}if(Te===D){ue+=Ke[Ke.length-1]+" ";continue}}ue+=Ke[0]+" "}switch(ue=ue.substr(ue.length-1)==" "?ue.substr(0,ue.length-1):ue,E=J0(ue,e,u).width,e.textAlign){case"right":x=o-E-2;break;case"center":x=(o-E)/2;break;case"left":default:x=2}t+=cn(x)+" "+cn(C)+` Td
`,t+="("+zd(ue)+`) Tj
`,t+=-cn(x)+` 0 Td
`,C=-(u+2),E=0,D=ee?k:k+1,N++,U=""}break}return i.text=t,i.fontSize=u,i},J0=function(e,t,r){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),A=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:A}},hW={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dW=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},fW=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var i=r,A=e[r];t.internal.newObjectDeferredBegin(A.objId,!0),Yn(A)==="object"&&typeof A.putStream=="function"&&A.putStream(),delete e[i]}},pW=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(NA.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(hW)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");bB=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ck,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var A in i)if(i.hasOwnProperty(A)){var u=i[A];u.objId=void 0,u.hasAnnotation&&dW(u,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(i,A){var u=!i;for(var h in i||(A.internal.newObjectDeferredBegin(A.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),A.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||A.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(h)){var o=i[h],g=[],x=o.Rect;if(o.Rect&&(o.Rect=cW(o.Rect,A)),A.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Pr.createDefaultAppearanceStream(o),Yn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(g=o.getKeyValueListForStream()),o.Rect=x,o.hasAppearanceStream&&!o.appearanceStreamContent){var E=uW(o);g.push({key:"AP",value:"<</N "+E+">>"}),A.internal.acroformPlugin.xForms.push(E)}if(o.appearanceStreamContent){var F="";for(var P in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(P)){var C=o.appearanceStreamContent[P];if(F+="/"+P+" ",F+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var h in C)if(C.hasOwnProperty(h)){var D=C[h];typeof D=="function"&&(D=D.call(A,o)),F+="/"+h+" "+D+" ",A.internal.acroformPlugin.xForms.indexOf(D)>=0||A.internal.acroformPlugin.xForms.push(D)}}else typeof(D=C)=="function"&&(D=D.call(A,o)),F+="/"+h+" "+D,A.internal.acroformPlugin.xForms.indexOf(D)>=0||A.internal.acroformPlugin.xForms.push(D);F+=">>"}g.push({key:"AP",value:`<<
`+F+">>"})}A.internal.putStream({additionalKeyValues:g,objectId:o.objId}),A.internal.out("endobj")}u&&fW(A.internal.acroformPlugin.xForms,A)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},lk=ss.__acroform__.arrayToPdfArray=function(e,t,r){var i=function(h){return h};if(Array.isArray(e)){for(var A="[",u=0;u<e.length;u++)switch(u!==0&&(A+=" "),Yn(e[u])){case"boolean":case"number":case"object":A+=e[u].toString();break;case"string":e[u].substr(0,1)!=="/"?(t!==void 0&&r&&(i=r.internal.getEncryptor(t)),A+="("+zd(i(e[u].toString()))+")"):A+=e[u].toString()}return A+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Mw=function(e,t,r){var i=function(A){return A};return t!==void 0&&r&&(i=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+zd(i(e))+")"},vc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};vc.prototype.toString=function(){return this.objId+" 0 R"},vc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},vc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var i=t[r],A=this[i];A&&(Array.isArray(A)?e.push({key:i,value:lk(A,this.objId,this.scope)}):A instanceof vc?(A.scope=this.scope,e.push({key:i,value:A.objId+" 0 R"})):typeof A!="function"&&e.push({key:i,value:A}))}return e};var Ak=function(){vc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ka(Ak,vc);var ck=function(){vc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+zd(r(e))+")"}},set:function(r){e=r}})};Ka(ck,vc);var NA=function e(){vc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(U){if(isNaN(U))throw new Error('Invalid value "'+U+'" for attribute F supplied.');t=U}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ys(t,3)},set:function(U){U?this.F=vs(t,3):this.F=_s(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(U){if(isNaN(U))throw new Error('Invalid value "'+U+'" for attribute Ff supplied.');r=U}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(U){i=U!==void 0?U:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(U){i[0]=U}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(U){i[1]=U}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(U){i[2]=U}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(U){i[3]=U}});var A="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return A},set:function(U){switch(U){case"/Btn":case"/Tx":case"/Ch":case"/Sig":A=U;break;default:throw new Error('Invalid value "'+U+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof Sv)return;u="FieldObject"+e.FieldNum++}var U=function(N){return N};return this.scope&&(U=this.scope.internal.getEncryptor(this.objId)),"("+zd(U(u))+")"},set:function(U){u=U.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(U){u=U}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(U){h=U}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(U){o=U}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(U){g=U}});var x=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return x===void 0?50/bB:x},set:function(U){x=U}});var E="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return E},set:function(U){E=U}});var F="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!F||this instanceof Sv||this instanceof Id))return Mw(F,this.objId,this.scope)},set:function(U){U=U.toString(),F=U}});var P=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof ao?P:Mw(P,this.objId,this.scope)},set:function(U){U=U.toString(),P=this instanceof ao?U:U.substr(0,1)==="("?_f(U.substr(1,U.length-2)):_f(U)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ao?_f(P.substr(1,P.length-1)):P},set:function(U){U=U.toString(),P=this instanceof ao?"/"+U:U}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(U){this.V=U}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof ao?C:Mw(C,this.objId,this.scope)},set:function(U){U=U.toString(),C=this instanceof ao?U:U.substr(0,1)==="("?_f(U.substr(1,U.length-2)):_f(U)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ao?_f(C.substr(1,C.length-1)):C},set:function(U){U=U.toString(),C=this instanceof ao?"/"+U:U}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(U){U=!!U,k=U}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(U){D=U}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,1)},set:function(U){U?this.Ff=vs(this.Ff,1):this.Ff=_s(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,2)},set:function(U){U?this.Ff=vs(this.Ff,2):this.Ff=_s(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,3)},set:function(U){U?this.Ff=vs(this.Ff,3):this.Ff=_s(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(U){if([0,1,2].indexOf(U)===-1)throw new Error('Invalid value "'+U+'" for attribute Q supplied.');j=U}}),Object.defineProperty(this,"textAlign",{get:function(){var U;switch(j){case 0:default:U="left";break;case 1:U="center";break;case 2:U="right"}return U},configurable:!0,enumerable:!0,set:function(U){switch(U){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};Ka(NA,vc);var tp=function(){NA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lk(t,this.objId,this.scope)},set:function(r){var i,A;A=[],typeof(i=r)=="string"&&(A=function(u,h,o){o||(o=1);for(var g,x=[];g=h.exec(u);)x.push(g[o]);return x}(i,/\((.*?)\)/g)),t=A}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,18)},set:function(r){r?this.Ff=vs(this.Ff,18):this.Ff=_s(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=vs(this.Ff,19):this.Ff=_s(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,20)},set:function(r){r?(this.Ff=vs(this.Ff,20),t.sort()):this.Ff=_s(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,22)},set:function(r){r?this.Ff=vs(this.Ff,22):this.Ff=_s(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,23)},set:function(r){r?this.Ff=vs(this.Ff,23):this.Ff=_s(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,27)},set:function(r){r?this.Ff=vs(this.Ff,27):this.Ff=_s(this.Ff,27)}}),this.hasAppearanceStream=!1};Ka(tp,NA);var rp=function(){tp.call(this),this.fontName="helvetica",this.combo=!1};Ka(rp,tp);var np=function(){rp.call(this),this.combo=!0};Ka(np,rp);var By=function(){np.call(this),this.edit=!0};Ka(By,np);var ao=function(){NA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,15)},set:function(r){r?this.Ff=vs(this.Ff,15):this.Ff=_s(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,16)},set:function(r){r?this.Ff=vs(this.Ff,16):this.Ff=_s(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,17)},set:function(r){r?this.Ff=vs(this.Ff,17):this.Ff=_s(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,26)},set:function(r){r?this.Ff=vs(this.Ff,26):this.Ff=_s(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(u){return u};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,A=[];for(i in A.push("<<"),t)A.push("/"+i+" ("+zd(r(t[i]))+")");return A.push(">>"),A.join(`
`)}},set:function(r){Yn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ka(ao,NA);var Cy=function(){ao.call(this),this.pushButton=!0};Ka(Cy,ao);var ip=function(){ao.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ka(ip,ao);var Sv=function(){var e,t;NA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){e=A}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(A){t=A}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var A=function(o){return o};this.scope&&(A=this.scope.internal.getEncryptor(this.objId));var u,h=[];for(u in h.push("<<"),i)h.push("/"+u+" ("+zd(A(i[u]))+")");return h.push(">>"),h.join(`
`)},set:function(A){Yn(A)==="object"&&(i=A)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(A){typeof A=="string"&&(i.CA=A)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(A){r=A}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(A){r="/"+A}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ka(Sv,NA),ip.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ip.prototype.createOption=function(e){var t=new Sv;return t.Parent=this,t.optionName=e,this.Kids.push(t),mW.call(this.scope,t),t};var Sy=function(){ao.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pr.CheckBox.createAppearanceStream()};Ka(Sy,ao);var Id=function(){NA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,13)},set:function(t){t?this.Ff=vs(this.Ff,13):this.Ff=_s(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,21)},set:function(t){t?this.Ff=vs(this.Ff,21):this.Ff=_s(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,23)},set:function(t){t?this.Ff=vs(this.Ff,23):this.Ff=_s(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,24)},set:function(t){t?this.Ff=vs(this.Ff,24):this.Ff=_s(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,25)},set:function(t){t?this.Ff=vs(this.Ff,25):this.Ff=_s(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,26)},set:function(t){t?this.Ff=vs(this.Ff,26):this.Ff=_s(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ka(Id,NA);var Ey=function(){Id.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ys(this.Ff,14)},set:function(e){e?this.Ff=vs(this.Ff,14):this.Ff=_s(this.Ff,14)}}),this.password=!0};Ka(Ey,Id);var Pr={CheckBox:{createAppearanceStream:function(){return{N:{On:Pr.CheckBox.YesNormal},D:{On:Pr.CheckBox.YesPushDown,Off:Pr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,A=e.scope.__private__.encodeColorString(e.color),u=Nb(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+cn(Pr.internal.getWidth(e))+" "+cn(Pr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+cn(u.fontSize)+" Tf "+A),r.push("BT"),r.push(u.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),A=[],u=Pr.internal.getHeight(e),h=Pr.internal.getWidth(e),o=Nb(e,e.caption);return A.push("1 g"),A.push("0 0 "+cn(h)+" "+cn(u)+" re"),A.push("f"),A.push("q"),A.push("0 0 1 rg"),A.push("0 0 "+cn(h-1)+" "+cn(u-1)+" re"),A.push("W"),A.push("n"),A.push("0 g"),A.push("BT"),A.push("/"+r+" "+cn(o.fontSize)+" Tf "+i),A.push(o.text),A.push("ET"),A.push("Q"),t.stream=A.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+cn(Pr.internal.getWidth(e))+" "+cn(Pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Pr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Pr.RadioButton.Circle.YesNormal,t.D[e]=Pr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=[],i=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var A=Pr.internal.Bezier_C,u=Number((i*A).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Wu(Pr.internal.getWidth(e)/2)+" "+Wu(Pr.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+u+" "+u+" "+i+" 0 "+i+" c"),r.push("-"+u+" "+i+" -"+i+" "+u+" -"+i+" 0 c"),r.push("-"+i+" -"+u+" -"+u+" -"+i+" 0 -"+i+" c"),r.push(u+" -"+i+" "+i+" -"+u+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],i=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var A=Number((2*i).toFixed(5)),u=Number((A*Pr.internal.Bezier_C).toFixed(5)),h=Number((i*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wu(Pr.internal.getWidth(e)/2)+" "+Wu(Pr.internal.getHeight(e)/2)+" cm"),r.push(A+" 0 m"),r.push(A+" "+u+" "+u+" "+A+" 0 "+A+" c"),r.push("-"+u+" "+A+" -"+A+" "+u+" -"+A+" 0 c"),r.push("-"+A+" -"+u+" -"+u+" -"+A+" 0 -"+A+" c"),r.push(u+" -"+A+" "+A+" -"+u+" "+A+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Wu(Pr.internal.getWidth(e)/2)+" "+Wu(Pr.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+h+" "+h+" "+i+" 0 "+i+" c"),r.push("-"+h+" "+i+" -"+i+" "+h+" -"+i+" 0 c"),r.push("-"+i+" -"+h+" -"+h+" -"+i+" 0 -"+i+" c"),r.push(h+" -"+i+" "+i+" -"+h+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],i=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var A=Number((2*i).toFixed(5)),u=Number((A*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wu(Pr.internal.getWidth(e)/2)+" "+Wu(Pr.internal.getHeight(e)/2)+" cm"),r.push(A+" 0 m"),r.push(A+" "+u+" "+u+" "+A+" 0 "+A+" c"),r.push("-"+u+" "+A+" -"+A+" "+u+" -"+A+" 0 c"),r.push("-"+A+" -"+u+" -"+u+" -"+A+" 0 -"+A+" c"),r.push(u+" -"+A+" "+A+" -"+u+" "+A+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Pr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Pr.RadioButton.Cross.YesNormal,t.D[e]=Pr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=[],i=Pr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+cn(Pr.internal.getWidth(e)-2)+" "+cn(Pr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(cn(i.x1.x)+" "+cn(i.x1.y)+" m"),r.push(cn(i.x2.x)+" "+cn(i.x2.y)+" l"),r.push(cn(i.x4.x)+" "+cn(i.x4.y)+" m"),r.push(cn(i.x3.x)+" "+cn(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=Pr.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+cn(Pr.internal.getWidth(e))+" "+cn(Pr.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+cn(Pr.internal.getWidth(e)-2)+" "+cn(Pr.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(cn(r.x1.x)+" "+cn(r.x1.y)+" m"),i.push(cn(r.x2.x)+" "+cn(r.x2.y)+" l"),i.push(cn(r.x4.x)+" "+cn(r.x4.y)+" m"),i.push(cn(r.x3.x)+" "+cn(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+cn(Pr.internal.getWidth(e))+" "+cn(Pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Pr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Pr.internal.getWidth(e),r=Pr.internal.getHeight(e),i=Math.min(t,r);return{x1:{x:(t-i)/2,y:(r-i)/2+i},x2:{x:(t-i)/2+i,y:(r-i)/2},x3:{x:(t-i)/2,y:(r-i)/2},x4:{x:(t-i)/2+i,y:(r-i)/2+i}}}},Pr.internal.getWidth=function(e){var t=0;return Yn(e)==="object"&&(t=z4(e.Rect[2])),t},Pr.internal.getHeight=function(e){var t=0;return Yn(e)==="object"&&(t=z4(e.Rect[3])),t};var mW=ss.addField=function(e){if(pW(this,e),!(e instanceof NA))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ss.AcroFormChoiceField=tp,ss.AcroFormListBox=rp,ss.AcroFormComboBox=np,ss.AcroFormEditBox=By,ss.AcroFormButton=ao,ss.AcroFormPushButton=Cy,ss.AcroFormRadioButton=ip,ss.AcroFormCheckBox=Sy,ss.AcroFormTextField=Id,ss.AcroFormPasswordField=Ey,ss.AcroFormAppearance=Pr,ss.AcroForm={ChoiceField:tp,ListBox:rp,ComboBox:np,EditBox:By,Button:ao,PushButton:Cy,RadioButton:ip,CheckBox:Sy,TextField:Id,PasswordField:Ey,Appearance:Pr},Xr.AcroForm={ChoiceField:tp,ListBox:rp,ComboBox:np,EditBox:By,Button:ao,PushButton:Cy,RadioButton:ip,CheckBox:Sy,TextField:Id,PasswordField:Ey,Appearance:Pr};Xr.AcroForm;function uk(e){return e.reduce(function(t,r,i){return t[r]=i,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(oe,he){var Ie,be,ct,Xe,lt,Le=t;if((he=he||t)==="RGBA"||oe.data!==void 0&&oe.data instanceof Uint8ClampedArray&&"height"in oe&&"width"in oe)return"RGBA";if(pe(oe))for(lt in r)for(ct=r[lt],Ie=0;Ie<ct.length;Ie+=1){for(Xe=!0,be=0;be<ct[Ie].length;be+=1)if(ct[Ie][be]!==void 0&&ct[Ie][be]!==oe[be]){Xe=!1;break}if(Xe===!0){Le=lt;break}}else for(lt in r)for(ct=r[lt],Ie=0;Ie<ct.length;Ie+=1){for(Xe=!0,be=0;be<ct[Ie].length;be+=1)if(ct[Ie][be]!==void 0&&ct[Ie][be]!==oe.charCodeAt(be)){Xe=!1;break}if(Xe===!0){Le=lt;break}}return Le===t&&he!==t&&(Le=he),Le},A=function oe(he){for(var Ie=this.internal.write,be=this.internal.putStream,ct=(0,this.internal.getFilters)();ct.indexOf("FlateEncode")!==-1;)ct.splice(ct.indexOf("FlateEncode"),1);he.objectId=this.internal.newObject();var Xe=[];if(Xe.push({key:"Type",value:"/XObject"}),Xe.push({key:"Subtype",value:"/Image"}),Xe.push({key:"Width",value:he.width}),Xe.push({key:"Height",value:he.height}),he.colorSpace===j.INDEXED?Xe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(he.palette.length/3-1)+" "+("sMask"in he&&he.sMask!==void 0?he.objectId+2:he.objectId+1)+" 0 R]"}):(Xe.push({key:"ColorSpace",value:"/"+he.colorSpace}),he.colorSpace===j.DEVICE_CMYK&&Xe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Xe.push({key:"BitsPerComponent",value:he.bitsPerComponent}),"decodeParameters"in he&&he.decodeParameters!==void 0&&Xe.push({key:"DecodeParms",value:"<<"+he.decodeParameters+">>"}),"transparency"in he&&Array.isArray(he.transparency)){for(var lt="",Le=0,ze=he.transparency.length;Le<ze;Le++)lt+=he.transparency[Le]+" "+he.transparency[Le]+" ";Xe.push({key:"Mask",value:"["+lt+"]"})}he.sMask!==void 0&&Xe.push({key:"SMask",value:he.objectId+1+" 0 R"});var it=he.filter!==void 0?["/"+he.filter]:void 0;if(be({data:he.data,additionalKeyValues:Xe,alreadyAppliedFilters:it,objectId:he.objectId}),Ie("endobj"),"sMask"in he&&he.sMask!==void 0){var Lt="/Predictor "+he.predictor+" /Colors 1 /BitsPerComponent "+he.bitsPerComponent+" /Columns "+he.width,ne={width:he.width,height:he.height,colorSpace:"DeviceGray",bitsPerComponent:he.bitsPerComponent,decodeParameters:Lt,data:he.sMask};"filter"in he&&(ne.filter=he.filter),oe.call(this,ne)}if(he.colorSpace===j.INDEXED){var Be=this.internal.newObject();be({data:ue(new Uint8Array(he.palette)),objectId:Be}),Ie("endobj")}},u=function(){var oe=this.internal.collections.addImage_images;for(var he in oe)A.call(this,oe[he])},h=function(){var oe,he=this.internal.collections.addImage_images,Ie=this.internal.write;for(var be in he)Ie("/I"+(oe=he[be]).index,oe.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",h))},g=function(){var oe=this.internal.collections.addImage_images;return o.call(this),oe},x=function(){return Object.keys(this.internal.collections.addImage_images).length},E=function(oe){return typeof e["process"+oe.toUpperCase()]=="function"},F=function(oe){return Yn(oe)==="object"&&oe.nodeType===1},P=function(oe,he){if(oe.nodeName==="IMG"&&oe.hasAttribute("src")){var Ie=""+oe.getAttribute("src");if(Ie.indexOf("data:image/")===0)return Km(unescape(Ie).split("base64,").pop());var be=e.loadFile(Ie,!0);if(be!==void 0)return be}if(oe.nodeName==="CANVAS"){if(oe.width===0||oe.height===0)throw new Error("Given canvas must have data. Canvas width: "+oe.width+", height: "+oe.height);var ct;switch(he){case"PNG":ct="image/png";break;case"WEBP":ct="image/webp";break;case"JPEG":case"JPG":default:ct="image/jpeg"}return Km(oe.toDataURL(ct,1).split("base64,").pop())}},C=function(oe){var he=this.internal.collections.addImage_images;if(he){for(var Ie in he)if(oe===he[Ie].alias)return he[Ie]}},D=function(oe,he,Ie){return oe||he||(oe=-96,he=-96),oe<0&&(oe=-1*Ie.width*72/oe/this.internal.scaleFactor),he<0&&(he=-1*Ie.height*72/he/this.internal.scaleFactor),oe===0&&(oe=he*Ie.width/Ie.height),he===0&&(he=oe*Ie.height/Ie.width),[oe,he]},k=function(oe,he,Ie,be,ct,Xe){var lt=D.call(this,Ie,be,ct),Le=this.internal.getCoordinateString,ze=this.internal.getVerticalCoordinateString,it=g.call(this);if(Ie=lt[0],be=lt[1],it[ct.index]=ct,Xe){Xe*=Math.PI/180;var Lt=Math.cos(Xe),ne=Math.sin(Xe),Be=function($e){return $e.toFixed(4)},Pe=[Be(Lt),Be(ne),Be(-1*ne),Be(Lt),0,0,"cm"]}this.internal.write("q"),Xe?(this.internal.write([1,"0","0",1,Le(oe),ze(he+be),"cm"].join(" ")),this.internal.write(Pe.join(" ")),this.internal.write([Le(Ie),"0","0",Le(be),"0","0","cm"].join(" "))):this.internal.write([Le(Ie),"0","0",Le(be),Le(oe),ze(he+be),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ct.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var U=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(oe){var he,Ie,be=0;if(typeof oe=="string")for(Ie=oe.length,he=0;he<Ie;he++)be=(be<<5)-be+oe.charCodeAt(he),be|=0;else if(pe(oe))for(Ie=oe.byteLength/2,he=0;he<Ie;he++)be=(be<<5)-be+oe[he],be|=0;return be},K=e.__addimage__.validateStringAsBase64=function(oe){(oe=oe||"").toString().trim();var he=!0;return oe.length===0&&(he=!1),oe.length%4!=0&&(he=!1),/^[A-Za-z0-9+/]+$/.test(oe.substr(0,oe.length-2))===!1&&(he=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(oe.substr(-2))===!1&&(he=!1),he},ee=e.__addimage__.extractImageFromDataUrl=function(oe){if(oe==null||!(oe=oe.trim()).startsWith("data:"))return null;var he=oe.indexOf(",");return he<0?null:oe.substring(0,he).trim().endsWith("base64")?oe.substring(he+1):null},se=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(oe){return se()&&oe instanceof ArrayBuffer};var pe=e.__addimage__.isArrayBufferView=function(oe){return se()&&typeof Uint32Array<"u"&&(oe instanceof Int8Array||oe instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&oe instanceof Uint8ClampedArray||oe instanceof Int16Array||oe instanceof Uint16Array||oe instanceof Int32Array||oe instanceof Uint32Array||oe instanceof Float32Array||oe instanceof Float64Array)},ye=e.__addimage__.binaryStringToUint8Array=function(oe){for(var he=oe.length,Ie=new Uint8Array(he),be=0;be<he;be++)Ie[be]=oe.charCodeAt(be);return Ie},ue=e.__addimage__.arrayBufferToBinaryString=function(oe){for(var he="",Ie=pe(oe)?oe:new Uint8Array(oe),be=0;be<Ie.length;be+=8192)he+=String.fromCharCode.apply(null,Ie.subarray(be,be+8192));return he};e.addImage=function(){var oe,he,Ie,be,ct,Xe,lt,Le,ze;if(typeof arguments[1]=="number"?(he=t,Ie=arguments[1],be=arguments[2],ct=arguments[3],Xe=arguments[4],lt=arguments[5],Le=arguments[6],ze=arguments[7]):(he=arguments[1],Ie=arguments[2],be=arguments[3],ct=arguments[4],Xe=arguments[5],lt=arguments[6],Le=arguments[7],ze=arguments[8]),Yn(oe=arguments[0])==="object"&&!F(oe)&&"imageData"in oe){var it=oe;oe=it.imageData,he=it.format||he||t,Ie=it.x||Ie||0,be=it.y||be||0,ct=it.w||it.width||ct,Xe=it.h||it.height||Xe,lt=it.alias||lt,Le=it.compression||Le,ze=it.rotation||it.angle||ze}var Lt=this.internal.getFilters();if(Le===void 0&&Lt.indexOf("FlateEncode")!==-1&&(Le="SLOW"),isNaN(Ie)||isNaN(be))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var ne=Te.call(this,oe,he,lt,Le);return k.call(this,Ie,be,ct,Xe,ne,ze),this};var Te=function(oe,he,Ie,be){var ct,Xe,lt;if(typeof oe=="string"&&i(oe)===t){oe=unescape(oe);var Le=Ke(oe,!1);(Le!==""||(Le=e.loadFile(oe,!0))!==void 0)&&(oe=Le)}if(F(oe)&&(oe=P(oe,he)),he=i(oe,he),!E(he))throw new Error("addImage does not support files of type '"+he+"', please ensure that a plugin for '"+he+"' support is added.");if(((lt=Ie)==null||lt.length===0)&&(Ie=function(ze){return typeof ze=="string"||pe(ze)?N(ze):pe(ze.data)?N(ze.data):null}(oe)),(ct=C.call(this,Ie))||(se()&&(oe instanceof Uint8Array||he==="RGBA"||(Xe=oe,oe=ye(oe))),ct=this["process"+he.toUpperCase()](oe,x.call(this),Ie,function(ze){return ze&&typeof ze=="string"&&(ze=ze.toUpperCase()),ze in e.image_compression?ze:U.NONE}(be),Xe)),!ct)throw new Error("An unknown error occurred whilst processing the image.");return ct},Ke=e.__addimage__.convertBase64ToBinaryString=function(oe,he){he=typeof he!="boolean"||he;var Ie,be="";if(typeof oe=="string"){var ct;Ie=(ct=ee(oe))!==null&&ct!==void 0?ct:oe;try{be=Km(Ie)}catch(Xe){if(he)throw K(Ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Xe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return be};e.getImageProperties=function(oe){var he,Ie,be="";if(F(oe)&&(oe=P(oe)),typeof oe=="string"&&i(oe)===t&&((be=Ke(oe,!1))===""&&(be=e.loadFile(oe)||""),oe=be),Ie=i(oe),!E(Ie))throw new Error("addImage does not support files of type '"+Ie+"', please ensure that a plugin for '"+Ie+"' support is added.");if(!se()||oe instanceof Uint8Array||(oe=ye(oe)),!(he=this["process"+Ie.toUpperCase()](oe)))throw new Error("An unknown error occurred whilst processing the image");return he.fileType=Ie,he}})(Xr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Xr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var i,A,u,h=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(r.objId),x=r.pageContext.annotations,E=!1,F=0;F<x.length&&!E;F++)switch((i=x[F]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(E=!0);break;case"reference":case"text":case"freetext":E=!0}if(E!=0){this.internal.write("/Annots [");for(var P=0;P<x.length;P++){i=x[P];var C=this.internal.pdfEscape,D=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),U=this.internal.getEncryptor(k.objId),N=i.title||"Note";u="<</Type /Annot /Subtype /Text "+(A="/Rect ["+h(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+h(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+C(U(i.contents))+")",u+=" /Popup "+j.objId+" 0 R",u+=" /P "+g.objId+" 0 R",u+=" /T ("+C(U(N))+") >>",k.content=u;var K=k.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(A="/Rect ["+h(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+h(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+K,i.open&&(u+=" /Open true"),u+=" >>",j.content=u,this.internal.write(k.objId,"0 R",j.objId,"0 R");break;case"freetext":A="/Rect ["+h(i.bounds.x)+" "+o(i.bounds.y)+" "+h(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var ee=i.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+A+"/Contents ("+C(D(i.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ee+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(i.options.name){var se=this.annotations._nameMap[i.options.name];i.options.pageNumber=se.page,i.options.top=se.y}else i.options.top||(i.options.top=0);if(A="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",u="",i.options.url)u="<</Type /Annot /Subtype /Link "+A+"/Border [0 0 0] /A <</S /URI /URI ("+C(D(i.options.url))+") >>";else if(i.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+A+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,u+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var pe=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),u+=" /XYZ "+i.options.left+" "+pe+" "+i.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},e.link=function(r,i,A,u,h){var o=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,x=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:g(r),y:x(i),w:g(r+A),h:x(i+u)},options:h,type:"link"})},e.textWithLink=function(r,i,A,u){var h,o,g=this.getTextWidth(r),x=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){o=u.maxWidth;var E=this.splitTextToSize(r,o).length;h=Math.ceil(x*E)}else o=g,h=x;return this.text(r,i,A,u),A+=.2*x,u.align==="center"&&(i-=g/2),u.align==="right"&&(i-=g),this.link(i,A-x,o,h,u),g},e.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(Xr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},A=[1570,1571,1573,1575];e.__arabicParser__={};var u=e.__arabicParser__.isInArabicSubstitutionA=function(k){return t[k.charCodeAt(0)]!==void 0},h=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},o=e.__arabicParser__.isArabicEndLetter=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length<=2},g=e.__arabicParser__.isArabicAlfLetter=function(k){return h(k)&&A.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length>=1};var x=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length>=3};var E=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length==4},F=e.__arabicParser__.resolveLigatures=function(k){var j=0,U=r,N="",K=0;for(j=0;j<k.length;j+=1)U[k.charCodeAt(j)]!==void 0?(K++,typeof(U=U[k.charCodeAt(j)])=="number"&&(N+=String.fromCharCode(U),U=r,K=0),j===k.length-1&&(U=r,N+=k.charAt(j-(K-1)),j-=K-1,K=0)):(U=r,N+=k.charAt(j-K),j-=K,K=0);return N};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&i[k.charCodeAt(0)]!==void 0};var P=e.__arabicParser__.getCorrectForm=function(k,j,U){return h(k)?u(k)===!1?-1:!x(k)||!h(j)&&!h(U)||!h(U)&&o(j)||o(k)&&!h(j)||o(k)&&g(j)||o(k)&&o(j)?0:E(k)&&h(j)&&!o(j)&&h(U)&&x(U)?3:o(k)||!h(U)?1:2:-1},C=function(k){var j=0,U=0,N=0,K="",ee="",se="",pe=(k=k||"").split("\\s+"),ye=[];for(j=0;j<pe.length;j+=1){for(ye.push(""),U=0;U<pe[j].length;U+=1)K=pe[j][U],ee=pe[j][U-1],se=pe[j][U+1],h(K)?(N=P(K,ee,se),ye[j]+=N!==-1?String.fromCharCode(t[K.charCodeAt(0)][N]):K):ye[j]+=K;ye[j]=F(ye[j])}return ye.join(" ")},D=e.__arabicParser__.processArabic=e.processArabic=function(){var k,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,U=[];if(Array.isArray(j)){var N=0;for(U=[],N=0;N<j.length;N+=1)Array.isArray(j[N])?U.push([C(j[N][0]),j[N][1],j[N][2]]):U.push([C(j[N])]);k=U}else k=C(j);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",D])}(Xr.API),Xr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var A=300;Object.defineProperty(this,"height",{get:function(){return A},set:function(o){A=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=A+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(o){u=o}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(o){h=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,i){var A;if((r=r||"2d")!=="2d")return null;for(A in i)this.pdf.context2d.hasOwnProperty(A)&&(this.pdf.context2d[A]=i[A]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Xr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),A.call(this))},A=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var x=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return x},set:function(k){x=k}});var E=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return E},set:function(k){E=k}});var F=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return F},set:function(k){F=k}});var P=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return P},set:function(k){P=k}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(k){C=k}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(k){D=k}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(g){return i.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},e.getTextDimensions=function(g,x){i.call(this);var E=(x=x||{}).fontSize||this.getFontSize(),F=x.font||this.getFont(),P=x.scaleFactor||this.internal.scaleFactor,C=0,D=0,k=0,j=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var U=x.maxWidth;U>0?typeof g=="string"?g=this.splitTextToSize(g,U):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(K,ee){return K.concat(j.splitTextToSize(ee,U))},[])):g=Array.isArray(g)?g:[g];for(var N=0;N<g.length;N++)C<(k=this.getStringUnitWidth(g[N],{font:F})*E)&&(C=k);return C!==0&&(D=g.length),{w:C/=P,h:Math.max((D*E*this.getLineHeightFactor()-E*(this.getLineHeightFactor()-1))/P,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var g=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new u(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=e.cell=function(){var g;g=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var x=this.internal.__cell__.lastCell,E=this.internal.__cell__.padding,F=this.internal.__cell__.margins||t,P=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return x.lineNumber!==void 0&&(x.lineNumber===g.lineNumber?(g.x=(x.x||0)+(x.width||0),g.y=x.y||0):x.y+x.height+g.height+F.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=F.top,C&&P&&(this.printHeaderRow(g.lineNumber,!0),g.y+=P[0].height)):g.y=x.y+x.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,r===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-E,g.y+E,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+E,{align:"center",baseline:"top",maxWidth:g.width-E-E}):this.text(g.text,g.x+E,g.y+E,{align:"left",baseline:"top",maxWidth:g.width-E-E})),this.internal.__cell__.lastCell=g,this};e.table=function(g,x,E,F,P){if(i.call(this),!E)throw new Error("No data for PDF table.");var C,D,k,j,U=[],N=[],K=[],ee={},se={},pe=[],ye=[],ue=(P=P||{}).autoSize||!1,Te=P.printHeaders!==!1,Ke=P.css&&P.css["font-size"]!==void 0?16*P.css["font-size"]:P.fontSize||12,oe=P.margins||Object.assign({width:this.getPageWidth()},t),he=typeof P.padding=="number"?P.padding:3,Ie=P.headerBackgroundColor||"#c8c8c8",be=P.headerTextColor||"#000";if(A.call(this),this.internal.__cell__.printHeaders=Te,this.internal.__cell__.margins=oe,this.internal.__cell__.table_font_size=Ke,this.internal.__cell__.padding=he,this.internal.__cell__.headerBackgroundColor=Ie,this.internal.__cell__.headerTextColor=be,this.setFontSize(Ke),F==null)N=U=Object.keys(E[0]),K=U.map(function(){return"left"});else if(Array.isArray(F)&&Yn(F[0])==="object")for(U=F.map(function(it){return it.name}),N=F.map(function(it){return it.prompt||it.name||""}),K=F.map(function(it){return it.align||"left"}),C=0;C<F.length;C+=1)se[F[C].name]=F[C].width*(19.049976/25.4);else Array.isArray(F)&&typeof F[0]=="string"&&(N=U=F,K=U.map(function(){return"left"}));if(ue||Array.isArray(F)&&typeof F[0]=="string")for(C=0;C<U.length;C+=1){for(ee[j=U[C]]=E.map(function(it){return it[j]}),this.setFont(void 0,"bold"),pe.push(this.getTextDimensions(N[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=ee[j],this.setFont(void 0,"normal"),k=0;k<D.length;k+=1)pe.push(this.getTextDimensions(D[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[j]=Math.max.apply(null,pe)+he+he,pe=[]}if(Te){var ct={};for(C=0;C<U.length;C+=1)ct[U[C]]={},ct[U[C]].text=N[C],ct[U[C]].align=K[C];var Xe=o.call(this,ct,se);ye=U.map(function(it){return new u(g,x,se[it],Xe,ct[it].text,void 0,ct[it].align)}),this.setTableHeaderRow(ye),this.printHeaderRow(1,!1)}var lt=F.reduce(function(it,Lt){return it[Lt.name]=Lt.align,it},{});for(C=0;C<E.length;C+=1){"rowStart"in P&&P.rowStart instanceof Function&&P.rowStart({row:C,data:E[C]},this);var Le=o.call(this,E[C],se);for(k=0;k<U.length;k+=1){var ze=E[C][U[k]];"cellStart"in P&&P.cellStart instanceof Function&&P.cellStart({row:C,col:k,data:ze},this),h.call(this,new u(g,x,se[U[k]],Le,ze,C+2,lt[U[k]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=x,this};var o=function(g,x){var E=this.internal.__cell__.padding,F=this.internal.__cell__.table_font_size,P=this.internal.scaleFactor;return Object.keys(g).map(function(C){var D=g[C];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,x[C]-E-E)},this).map(function(C){return this.getLineHeightFactor()*C.length*F/P+E+E},this).reduce(function(C,D){return Math.max(C,D)},0)};e.setTableHeaderRow=function(g){i.call(this),this.internal.__cell__.tableHeaderRow=g},e.printHeaderRow=function(g,x){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var E;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var F=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(F[0],F[1],F[2],F[3],void 0,-1)}this.setFont(void 0,"bold");for(var P=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){E=this.internal.__cell__.tableHeaderRow[C].clone(),x&&(E.y=this.internal.__cell__.margins.top||0,P.push(E)),E.lineNumber=g;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,E),this.setTextColor(D)}P.length>0&&this.setTableHeaderRow(P),this.setFont(void 0,"normal"),r=!1}}(Xr.API);var hk={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},dk=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Db=uk(dk),fk=[100,200,300,400,500,600,700,800,900],gW=uk(fk);function Ob(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(u){return hk[u=u||"normal"]?u:"normal"}(e.style),i=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(e.weight),A=function(u){return typeof Db[u=u||"normal"]=="number"?u:"normal"}(e.stretch);return{family:t,style:r,weight:i,stretch:A,src:e.src||[],ref:e.ref||{name:t,style:[A,r,i].join(" ")}}}function H4(e,t,r,i){var A;for(A=r;A>=0&&A<t.length;A+=i)if(e[t[A]])return e[t[A]];for(A=r;A>=0&&A<t.length;A-=i)if(e[t[A]])return e[t[A]]}var yW={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},j4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function V4(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function vW(e,t,r){for(var i=(r=r||{}).defaultFontFamily||"times",A=Object.assign({},yW,r.genericFontFamilies||{}),u=null,h=null,o=0;o<t.length;++o)if(A[(u=Ob(t[o])).family]&&(u.family=A[u.family]),e.hasOwnProperty(u.family)){h=e[u.family];break}if(!(h=h||e[i]))throw new Error("Could not find a font-family for the rule '"+V4(u)+"' and default family '"+i+"'.");if(h=function(g,x){if(x[g])return x[g];var E=Db[g],F=E<=Db.normal?-1:1,P=H4(x,dk,E,F);if(!P)throw new Error("Could not find a matching font-stretch value for "+g);return P}(u.stretch,h),h=function(g,x){if(x[g])return x[g];for(var E=hk[g],F=0;F<E.length;++F)if(x[E[F]])return x[E[F]];throw new Error("Could not find a matching font-style for "+g)}(u.style,h),!(h=function(g,x){if(x[g])return x[g];if(g===400&&x[500])return x[500];if(g===500&&x[400])return x[400];var E=gW[g],F=H4(x,fk,E,g<400?-1:1);if(!F)throw new Error("Could not find a matching font-weight for value "+g);return F}(u.weight,h)))throw new Error("Failed to resolve a font for the rule '"+V4(u)+"'.");return h}function K4(e){return e.trimLeft()}function _W(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function wW(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var ey,G4,$4,kw=["times"];(function(e){var t,r,i,A,u,h,o,g,x,E=function(ne){return ne=ne||{},this.isStrokeTransparent=ne.isStrokeTransparent||!1,this.strokeOpacity=ne.strokeOpacity||1,this.strokeStyle=ne.strokeStyle||"#000000",this.fillStyle=ne.fillStyle||"#000000",this.isFillTransparent=ne.isFillTransparent||!1,this.fillOpacity=ne.fillOpacity||1,this.font=ne.font||"10px sans-serif",this.textBaseline=ne.textBaseline||"alphabetic",this.textAlign=ne.textAlign||"left",this.lineWidth=ne.lineWidth||1,this.lineJoin=ne.lineJoin||"miter",this.lineCap=ne.lineCap||"butt",this.path=ne.path||[],this.transform=ne.transform!==void 0?ne.transform.clone():new g,this.globalCompositeOperation=ne.globalCompositeOperation||"normal",this.globalAlpha=ne.globalAlpha||1,this.clip_path=ne.clip_path||[],this.currentPoint=ne.currentPoint||new h,this.miterLimit=ne.miterLimit||10,this.lastPoint=ne.lastPoint||new h,this.lineDashOffset=ne.lineDashOffset||0,this.lineDash=ne.lineDash||[],this.margin=ne.margin||[0,0,0,0],this.prevPageLastElemOffset=ne.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ne.ignoreClearRect!="boolean"||ne.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new F(this),t=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,A=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,h=this.internal.Point,o=this.internal.Rectangle,g=this.internal.Matrix,x=new E}]);var F=function(ne){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Be=ne;Object.defineProperty(this,"pdf",{get:function(){return Be}});var Pe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Pe},set:function(It){Pe=!!It}});var $e=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $e},set:function(It){$e=!!It}});var nt=0;Object.defineProperty(this,"posX",{get:function(){return nt},set:function(It){isNaN(It)||(nt=It)}});var Ze=0;Object.defineProperty(this,"posY",{get:function(){return Ze},set:function(It){isNaN(It)||(Ze=It)}}),Object.defineProperty(this,"margin",{get:function(){return x.margin},set:function(It){var Ge;typeof It=="number"?Ge=[It,It,It,It]:((Ge=new Array(4))[0]=It[0],Ge[1]=It.length>=2?It[1]:Ge[0],Ge[2]=It.length>=3?It[2]:Ge[0],Ge[3]=It.length>=4?It[3]:Ge[1]),x.margin=Ge}});var pt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pt},set:function(It){pt=It}});var dt=0;Object.defineProperty(this,"lastBreak",{get:function(){return dt},set:function(It){dt=It}});var Qt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Qt},set:function(It){Qt=It}}),Object.defineProperty(this,"ctx",{get:function(){return x},set:function(It){It instanceof E&&(x=It)}}),Object.defineProperty(this,"path",{get:function(){return x.path},set:function(It){x.path=It}});var Mt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Mt},set:function(It){Mt=It}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(It){var Ge;Ge=P(It),this.ctx.fillStyle=Ge.style,this.ctx.isFillTransparent=Ge.a===0,this.ctx.fillOpacity=Ge.a,this.pdf.setFillColor(Ge.r,Ge.g,Ge.b,{a:Ge.a}),this.pdf.setTextColor(Ge.r,Ge.g,Ge.b,{a:Ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(It){var Ge=P(It);this.ctx.strokeStyle=Ge.style,this.ctx.isStrokeTransparent=Ge.a===0,this.ctx.strokeOpacity=Ge.a,Ge.a===0?this.pdf.setDrawColor(255,255,255):(Ge.a,this.pdf.setDrawColor(Ge.r,Ge.g,Ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(It){["butt","round","square"].indexOf(It)!==-1&&(this.ctx.lineCap=It,this.pdf.setLineCap(It))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(It){isNaN(It)||(this.ctx.lineWidth=It,this.pdf.setLineWidth(It))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(It){["bevel","round","miter"].indexOf(It)!==-1&&(this.ctx.lineJoin=It,this.pdf.setLineJoin(It))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(It){isNaN(It)||(this.ctx.miterLimit=It,this.pdf.setMiterLimit(It))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(It){this.ctx.textBaseline=It}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(It){["right","end","center","left","start"].indexOf(It)!==-1&&(this.ctx.textAlign=It)}});var $t=null;function jt(It,Ge){if($t===null){var Cr=function(pr){var Kt=[];return Object.keys(pr).forEach(function(ar){pr[ar].forEach(function(lr){var cr=null;switch(lr){case"bold":cr={family:ar,weight:"bold"};break;case"italic":cr={family:ar,style:"italic"};break;case"bolditalic":cr={family:ar,weight:"bold",style:"italic"};break;case"":case"normal":cr={family:ar}}cr!==null&&(cr.ref={name:ar,style:lr},Kt.push(cr))})}),Kt}(It.getFontList());$t=function(pr){for(var Kt={},ar=0;ar<pr.length;++ar){var lr=Ob(pr[ar]),cr=lr.family,br=lr.stretch,Nr=lr.style,Kr=lr.weight;Kt[cr]=Kt[cr]||{},Kt[cr][br]=Kt[cr][br]||{},Kt[cr][br][Nr]=Kt[cr][br][Nr]||{},Kt[cr][br][Nr][Kr]=lr}return Kt}(Cr.concat(Ge))}return $t}var vr=null;Object.defineProperty(this,"fontFaces",{get:function(){return vr},set:function(It){$t=null,vr=It}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(It){var Ge;if(this.ctx.font=It,(Ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(It))!==null){var Cr=Ge[1];Ge[2];var pr=Ge[3],Kt=Ge[4];Ge[5];var ar=Ge[6],lr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Kt)[2];Kt=Math.floor(lr==="px"?parseFloat(Kt)*this.pdf.internal.scaleFactor:lr==="em"?parseFloat(Kt)*this.pdf.getFontSize():parseFloat(Kt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Kt);var cr=function(zr){var Yr,ur,At=[],le=zr.trim();if(le==="")return kw;if(le in j4)return[j4[le]];for(;le!=="";){switch(ur=null,Yr=(le=K4(le)).charAt(0)){case'"':case"'":ur=_W(le.substring(1),Yr);break;default:ur=wW(le)}if(ur===null||(At.push(ur[0]),(le=K4(ur[1]))!==""&&le.charAt(0)!==","))return kw;le=le.replace(/^,/,"")}return At}(ar);if(this.fontFaces){var br=vW(jt(this.pdf,this.fontFaces),cr.map(function(zr){return{family:zr,stretch:"normal",weight:pr,style:Cr}}));this.pdf.setFont(br.ref.name,br.ref.style)}else{var Nr="";(pr==="bold"||parseInt(pr,10)>=700||Cr==="bold")&&(Nr="bold"),Cr==="italic"&&(Nr+="italic"),Nr.length===0&&(Nr="normal");for(var Kr="",Lr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Hr=0;Hr<cr.length;Hr++){if(this.pdf.internal.getFont(cr[Hr],Nr,{noFallback:!0,disableWarning:!0})!==void 0){Kr=cr[Hr];break}if(Nr==="bolditalic"&&this.pdf.internal.getFont(cr[Hr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Kr=cr[Hr],Nr="bold";else if(this.pdf.internal.getFont(cr[Hr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Kr=cr[Hr],Nr="normal";break}}if(Kr===""){for(var un=0;un<cr.length;un++)if(Lr[cr[un]]){Kr=Lr[cr[un]];break}}Kr=Kr===""?"Times":Kr,this.pdf.setFont(Kr,Nr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(It){this.ctx.globalCompositeOperation=It}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(It){this.ctx.globalAlpha=It}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(It){this.ctx.lineDashOffset=It,Lt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(It){this.ctx.lineDash=It,Lt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(It){this.ctx.ignoreClearRect=!!It}})};F.prototype.setLineDash=function(ne){this.lineDash=ne},F.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},F.prototype.fill=function(){ee.call(this,"fill",!1)},F.prototype.stroke=function(){ee.call(this,"stroke",!1)},F.prototype.beginPath=function(){this.path=[{type:"begin"}]},F.prototype.moveTo=function(ne,Be){if(isNaN(ne)||isNaN(Be))throw mi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Pe=this.ctx.transform.applyToPoint(new h(ne,Be));this.path.push({type:"mt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new h(ne,Be)},F.prototype.closePath=function(){var ne=new h(0,0),Be=0;for(Be=this.path.length-1;Be!==-1;Be--)if(this.path[Be].type==="begin"&&Yn(this.path[Be+1])==="object"&&typeof this.path[Be+1].x=="number"){ne=new h(this.path[Be+1].x,this.path[Be+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(ne.x,ne.y)},F.prototype.lineTo=function(ne,Be){if(isNaN(ne)||isNaN(Be))throw mi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Pe=this.ctx.transform.applyToPoint(new h(ne,Be));this.path.push({type:"lt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new h(Pe.x,Pe.y)},F.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ee.call(this,null,!0)},F.prototype.quadraticCurveTo=function(ne,Be,Pe,$e){if(isNaN(Pe)||isNaN($e)||isNaN(ne)||isNaN(Be))throw mi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var nt=this.ctx.transform.applyToPoint(new h(Pe,$e)),Ze=this.ctx.transform.applyToPoint(new h(ne,Be));this.path.push({type:"qct",x1:Ze.x,y1:Ze.y,x:nt.x,y:nt.y}),this.ctx.lastPoint=new h(nt.x,nt.y)},F.prototype.bezierCurveTo=function(ne,Be,Pe,$e,nt,Ze){if(isNaN(nt)||isNaN(Ze)||isNaN(ne)||isNaN(Be)||isNaN(Pe)||isNaN($e))throw mi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pt=this.ctx.transform.applyToPoint(new h(nt,Ze)),dt=this.ctx.transform.applyToPoint(new h(ne,Be)),Qt=this.ctx.transform.applyToPoint(new h(Pe,$e));this.path.push({type:"bct",x1:dt.x,y1:dt.y,x2:Qt.x,y2:Qt.y,x:pt.x,y:pt.y}),this.ctx.lastPoint=new h(pt.x,pt.y)},F.prototype.arc=function(ne,Be,Pe,$e,nt,Ze){if(isNaN(ne)||isNaN(Be)||isNaN(Pe)||isNaN($e)||isNaN(nt))throw mi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ze=!!Ze,!this.ctx.transform.isIdentity){var pt=this.ctx.transform.applyToPoint(new h(ne,Be));ne=pt.x,Be=pt.y;var dt=this.ctx.transform.applyToPoint(new h(0,Pe)),Qt=this.ctx.transform.applyToPoint(new h(0,0));Pe=Math.sqrt(Math.pow(dt.x-Qt.x,2)+Math.pow(dt.y-Qt.y,2))}Math.abs(nt-$e)>=2*Math.PI&&($e=0,nt=2*Math.PI),this.path.push({type:"arc",x:ne,y:Be,radius:Pe,startAngle:$e,endAngle:nt,counterclockwise:Ze})},F.prototype.arcTo=function(ne,Be,Pe,$e,nt){throw new Error("arcTo not implemented.")},F.prototype.rect=function(ne,Be,Pe,$e){if(isNaN(ne)||isNaN(Be)||isNaN(Pe)||isNaN($e))throw mi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ne,Be),this.lineTo(ne+Pe,Be),this.lineTo(ne+Pe,Be+$e),this.lineTo(ne,Be+$e),this.lineTo(ne,Be),this.lineTo(ne+Pe,Be),this.lineTo(ne,Be)},F.prototype.fillRect=function(ne,Be,Pe,$e){if(isNaN(ne)||isNaN(Be)||isNaN(Pe)||isNaN($e))throw mi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var nt={};this.lineCap!=="butt"&&(nt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(nt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ne,Be,Pe,$e),this.fill(),nt.hasOwnProperty("lineCap")&&(this.lineCap=nt.lineCap),nt.hasOwnProperty("lineJoin")&&(this.lineJoin=nt.lineJoin)}},F.prototype.strokeRect=function(ne,Be,Pe,$e){if(isNaN(ne)||isNaN(Be)||isNaN(Pe)||isNaN($e))throw mi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect(ne,Be,Pe,$e),this.stroke())},F.prototype.clearRect=function(ne,Be,Pe,$e){if(isNaN(ne)||isNaN(Be)||isNaN(Pe)||isNaN($e))throw mi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ne,Be,Pe,$e))},F.prototype.save=function(ne){ne=typeof ne!="boolean"||ne;for(var Be=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Be),ne){this.ctx.fontSize=this.pdf.internal.getFontSize();var $e=new E(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$e}},F.prototype.restore=function(ne){ne=typeof ne!="boolean"||ne;for(var Be=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("Q");this.pdf.setPage(Be),ne&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},F.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var P=function(ne){var Be,Pe,$e,nt;if(ne.isCanvasGradient===!0&&(ne=ne.getColor()),!ne)return{r:0,g:0,b:0,a:0,style:ne};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ne))Be=0,Pe=0,$e=0,nt=0;else{var Ze=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ne);if(Ze!==null)Be=parseInt(Ze[1]),Pe=parseInt(Ze[2]),$e=parseInt(Ze[3]),nt=1;else if((Ze=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ne))!==null)Be=parseInt(Ze[1]),Pe=parseInt(Ze[2]),$e=parseInt(Ze[3]),nt=parseFloat(Ze[4]);else{if(nt=1,typeof ne=="string"&&ne.charAt(0)!=="#"){var pt=new sk(ne);ne=pt.ok?pt.toHex():"#000000"}ne.length===4?(Be=ne.substring(1,2),Be+=Be,Pe=ne.substring(2,3),Pe+=Pe,$e=ne.substring(3,4),$e+=$e):(Be=ne.substring(1,3),Pe=ne.substring(3,5),$e=ne.substring(5,7)),Be=parseInt(Be,16),Pe=parseInt(Pe,16),$e=parseInt($e,16)}}return{r:Be,g:Pe,b:$e,a:nt,style:ne}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},D=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};F.prototype.fillText=function(ne,Be,Pe,$e){if(isNaN(Be)||isNaN(Pe)||typeof ne!="string")throw mi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($e=isNaN($e)?void 0:$e,!C.call(this)){var nt=Le(this.ctx.transform.rotation),Ze=this.ctx.transform.scaleX;he.call(this,{text:ne,x:Be,y:Pe,scale:Ze,angle:nt,align:this.textAlign,maxWidth:$e})}},F.prototype.strokeText=function(ne,Be,Pe,$e){if(isNaN(Be)||isNaN(Pe)||typeof ne!="string")throw mi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){$e=isNaN($e)?void 0:$e;var nt=Le(this.ctx.transform.rotation),Ze=this.ctx.transform.scaleX;he.call(this,{text:ne,x:Be,y:Pe,scale:Ze,renderingMode:"stroke",angle:nt,align:this.textAlign,maxWidth:$e})}},F.prototype.measureText=function(ne){if(typeof ne!="string")throw mi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Be=this.pdf,Pe=this.pdf.internal.scaleFactor,$e=Be.internal.getFontSize(),nt=Be.getStringUnitWidth(ne)*$e/Be.internal.scaleFactor,Ze=function(pt){var dt=(pt=pt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return dt}}),this};return new Ze({width:nt*=Math.round(96*Pe/72*1e4)/1e4})},F.prototype.scale=function(ne,Be){if(isNaN(ne)||isNaN(Be))throw mi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Pe=new g(ne,0,0,Be,0,0);this.ctx.transform=this.ctx.transform.multiply(Pe)},F.prototype.rotate=function(ne){if(isNaN(ne))throw mi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Be=new g(Math.cos(ne),Math.sin(ne),-Math.sin(ne),Math.cos(ne),0,0);this.ctx.transform=this.ctx.transform.multiply(Be)},F.prototype.translate=function(ne,Be){if(isNaN(ne)||isNaN(Be))throw mi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Pe=new g(1,0,0,1,ne,Be);this.ctx.transform=this.ctx.transform.multiply(Pe)},F.prototype.transform=function(ne,Be,Pe,$e,nt,Ze){if(isNaN(ne)||isNaN(Be)||isNaN(Pe)||isNaN($e)||isNaN(nt)||isNaN(Ze))throw mi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pt=new g(ne,Be,Pe,$e,nt,Ze);this.ctx.transform=this.ctx.transform.multiply(pt)},F.prototype.setTransform=function(ne,Be,Pe,$e,nt,Ze){ne=isNaN(ne)?1:ne,Be=isNaN(Be)?0:Be,Pe=isNaN(Pe)?0:Pe,$e=isNaN($e)?1:$e,nt=isNaN(nt)?0:nt,Ze=isNaN(Ze)?0:Ze,this.ctx.transform=new g(ne,Be,Pe,$e,nt,Ze)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};F.prototype.drawImage=function(ne,Be,Pe,$e,nt,Ze,pt,dt,Qt){var Mt=this.pdf.getImageProperties(ne),$t=1,jt=1,vr=1,It=1;$e!==void 0&&dt!==void 0&&(vr=dt/$e,It=Qt/nt,$t=Mt.width/$e*dt/$e,jt=Mt.height/nt*Qt/nt),Ze===void 0&&(Ze=Be,pt=Pe,Be=0,Pe=0),$e!==void 0&&dt===void 0&&(dt=$e,Qt=nt),$e===void 0&&dt===void 0&&(dt=Mt.width,Qt=Mt.height);for(var Ge,Cr=this.ctx.transform.decompose(),pr=Le(Cr.rotate.shx),Kt=new g,ar=(Kt=(Kt=(Kt=Kt.multiply(Cr.translate)).multiply(Cr.skew)).multiply(Cr.scale)).applyToRectangle(new o(Ze-Be*vr,pt-Pe*It,$e*$t,nt*jt)),lr=j.call(this,ar),cr=[],br=0;br<lr.length;br+=1)cr.indexOf(lr[br])===-1&&cr.push(lr[br]);if(K(cr),this.autoPaging)for(var Nr=cr[0],Kr=cr[cr.length-1],Lr=Nr;Lr<Kr+1;Lr++){this.pdf.setPage(Lr);var Hr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],un=Lr===1?this.posY+this.margin[0]:this.margin[0],zr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ur=Lr===1?0:zr+(Lr-2)*Yr;if(this.ctx.clip_path.length!==0){var At=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Ge,this.posX+this.margin[3],-ur+un+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=At}var le=JSON.parse(JSON.stringify(ar));le=N([le],this.posX+this.margin[3],-ur+un+this.ctx.prevPageLastElemOffset)[0];var fe=(Lr>Nr||Lr<Kr)&&k.call(this);fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Hr,Yr,null).clip().discardPath()),this.pdf.addImage(ne,"JPEG",le.x,le.y,le.w,le.h,null,null,pr),fe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ne,"JPEG",ar.x,ar.y,ar.w,ar.h,null,null,pr)};var j=function(ne,Be,Pe){var $e=[];Be=Be||this.pdf.internal.pageSize.width,Pe=Pe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var nt=this.posY+this.ctx.prevPageLastElemOffset;switch(ne.type){default:case"mt":case"lt":$e.push(Math.floor((ne.y+nt)/Pe)+1);break;case"arc":$e.push(Math.floor((ne.y+nt-ne.radius)/Pe)+1),$e.push(Math.floor((ne.y+nt+ne.radius)/Pe)+1);break;case"qct":var Ze=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ne.x1,ne.y1,ne.x,ne.y);$e.push(Math.floor((Ze.y+nt)/Pe)+1),$e.push(Math.floor((Ze.y+Ze.h+nt)/Pe)+1);break;case"bct":var pt=it(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ne.x1,ne.y1,ne.x2,ne.y2,ne.x,ne.y);$e.push(Math.floor((pt.y+nt)/Pe)+1),$e.push(Math.floor((pt.y+pt.h+nt)/Pe)+1);break;case"rect":$e.push(Math.floor((ne.y+nt)/Pe)+1),$e.push(Math.floor((ne.y+ne.h+nt)/Pe)+1)}for(var dt=0;dt<$e.length;dt+=1)for(;this.pdf.internal.getNumberOfPages()<$e[dt];)U.call(this);return $e},U=function(){var ne=this.fillStyle,Be=this.strokeStyle,Pe=this.font,$e=this.lineCap,nt=this.lineWidth,Ze=this.lineJoin;this.pdf.addPage(),this.fillStyle=ne,this.strokeStyle=Be,this.font=Pe,this.lineCap=$e,this.lineWidth=nt,this.lineJoin=Ze},N=function(ne,Be,Pe){for(var $e=0;$e<ne.length;$e++)switch(ne[$e].type){case"bct":ne[$e].x2+=Be,ne[$e].y2+=Pe;case"qct":ne[$e].x1+=Be,ne[$e].y1+=Pe;case"mt":case"lt":case"arc":default:ne[$e].x+=Be,ne[$e].y+=Pe}return ne},K=function(ne){return ne.sort(function(Be,Pe){return Be-Pe})},ee=function(ne,Be){for(var Pe,$e,nt=this.fillStyle,Ze=this.strokeStyle,pt=this.lineCap,dt=this.lineWidth,Qt=Math.abs(dt*this.ctx.transform.scaleX),Mt=this.lineJoin,$t=JSON.parse(JSON.stringify(this.path)),jt=JSON.parse(JSON.stringify(this.path)),vr=[],It=0;It<jt.length;It++)if(jt[It].x!==void 0)for(var Ge=j.call(this,jt[It]),Cr=0;Cr<Ge.length;Cr+=1)vr.indexOf(Ge[Cr])===-1&&vr.push(Ge[Cr]);for(var pr=0;pr<vr.length;pr++)for(;this.pdf.internal.getNumberOfPages()<vr[pr];)U.call(this);if(K(vr),this.autoPaging)for(var Kt=vr[0],ar=vr[vr.length-1],lr=Kt;lr<ar+1;lr++){this.pdf.setPage(lr),this.fillStyle=nt,this.strokeStyle=Ze,this.lineCap=pt,this.lineWidth=Qt,this.lineJoin=Mt;var cr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],br=lr===1?this.posY+this.margin[0]:this.margin[0],Nr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Lr=lr===1?0:Nr+(lr-2)*Kr;if(this.ctx.clip_path.length!==0){var Hr=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Pe,this.posX+this.margin[3],-Lr+br+this.ctx.prevPageLastElemOffset),se.call(this,ne,!0),this.path=Hr}if($e=JSON.parse(JSON.stringify($t)),this.path=N($e,this.posX+this.margin[3],-Lr+br+this.ctx.prevPageLastElemOffset),Be===!1||lr===0){var un=(lr>Kt||lr<ar)&&k.call(this);un&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cr,Kr,null).clip().discardPath()),se.call(this,ne,Be),un&&this.pdf.restoreGraphicsState()}this.lineWidth=dt}else this.lineWidth=Qt,se.call(this,ne,Be),this.lineWidth=dt;this.path=$t},se=function(ne,Be){if((ne!=="stroke"||Be||!D.call(this))&&(ne==="stroke"||Be||!C.call(this))){for(var Pe,$e,nt=[],Ze=this.path,pt=0;pt<Ze.length;pt++){var dt=Ze[pt];switch(dt.type){case"begin":nt.push({begin:!0});break;case"close":nt.push({close:!0});break;case"mt":nt.push({start:dt,deltas:[],abs:[]});break;case"lt":var Qt=nt.length;if(Ze[pt-1]&&!isNaN(Ze[pt-1].x)&&(Pe=[dt.x-Ze[pt-1].x,dt.y-Ze[pt-1].y],Qt>0)){for(;Qt>=0;Qt--)if(nt[Qt-1].close!==!0&&nt[Qt-1].begin!==!0){nt[Qt-1].deltas.push(Pe),nt[Qt-1].abs.push(dt);break}}break;case"bct":Pe=[dt.x1-Ze[pt-1].x,dt.y1-Ze[pt-1].y,dt.x2-Ze[pt-1].x,dt.y2-Ze[pt-1].y,dt.x-Ze[pt-1].x,dt.y-Ze[pt-1].y],nt[nt.length-1].deltas.push(Pe);break;case"qct":var Mt=Ze[pt-1].x+2/3*(dt.x1-Ze[pt-1].x),$t=Ze[pt-1].y+2/3*(dt.y1-Ze[pt-1].y),jt=dt.x+2/3*(dt.x1-dt.x),vr=dt.y+2/3*(dt.y1-dt.y),It=dt.x,Ge=dt.y;Pe=[Mt-Ze[pt-1].x,$t-Ze[pt-1].y,jt-Ze[pt-1].x,vr-Ze[pt-1].y,It-Ze[pt-1].x,Ge-Ze[pt-1].y],nt[nt.length-1].deltas.push(Pe);break;case"arc":nt.push({deltas:[],abs:[],arc:!0}),Array.isArray(nt[nt.length-1].abs)&&nt[nt.length-1].abs.push(dt)}}$e=Be?null:ne==="stroke"?"stroke":"fill";for(var Cr=!1,pr=0;pr<nt.length;pr++)if(nt[pr].arc)for(var Kt=nt[pr].abs,ar=0;ar<Kt.length;ar++){var lr=Kt[ar];lr.type==="arc"?ue.call(this,lr.x,lr.y,lr.radius,lr.startAngle,lr.endAngle,lr.counterclockwise,void 0,Be,!Cr):Ie.call(this,lr.x,lr.y),Cr=!0}else if(nt[pr].close===!0)this.pdf.internal.out("h"),Cr=!1;else if(nt[pr].begin!==!0){var cr=nt[pr].start.x,br=nt[pr].start.y;be.call(this,nt[pr].deltas,cr,br),Cr=!0}$e&&Te.call(this,$e),Be&&Ke.call(this)}},pe=function(ne){var Be=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Pe=Be*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ne-Pe;case"top":return ne+Be-Pe;case"hanging":return ne+Be-2*Pe;case"middle":return ne+Be/2-Pe;case"ideographic":return ne;case"alphabetic":default:return ne}},ye=function(ne){return ne+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};F.prototype.createLinearGradient=function(){var ne=function(){};return ne.colorStops=[],ne.addColorStop=function(Be,Pe){this.colorStops.push([Be,Pe])},ne.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ne.isCanvasGradient=!0,ne},F.prototype.createPattern=function(){return this.createLinearGradient()},F.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ue=function(ne,Be,Pe,$e,nt,Ze,pt,dt,Qt){for(var Mt=Xe.call(this,Pe,$e,nt,Ze),$t=0;$t<Mt.length;$t++){var jt=Mt[$t];$t===0&&(Qt?oe.call(this,jt.x1+ne,jt.y1+Be):Ie.call(this,jt.x1+ne,jt.y1+Be)),ct.call(this,ne,Be,jt.x2,jt.y2,jt.x3,jt.y3,jt.x4,jt.y4)}dt?Ke.call(this):Te.call(this,pt)},Te=function(ne){switch(ne){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ke=function(){this.pdf.clip(),this.pdf.discardPath()},oe=function(ne,Be){this.pdf.internal.out(r(ne)+" "+i(Be)+" m")},he=function(ne){var Be;switch(ne.align){case"right":case"end":Be="right";break;case"center":Be="center";break;case"left":case"start":default:Be="left"}var Pe=this.pdf.getTextDimensions(ne.text),$e=pe.call(this,ne.y),nt=ye.call(this,$e)-Pe.h,Ze=this.ctx.transform.applyToPoint(new h(ne.x,$e)),pt=this.ctx.transform.decompose(),dt=new g;dt=(dt=(dt=dt.multiply(pt.translate)).multiply(pt.skew)).multiply(pt.scale);for(var Qt,Mt,$t,jt=this.ctx.transform.applyToRectangle(new o(ne.x,$e,Pe.w,Pe.h)),vr=dt.applyToRectangle(new o(ne.x,nt,Pe.w,Pe.h)),It=j.call(this,vr),Ge=[],Cr=0;Cr<It.length;Cr+=1)Ge.indexOf(It[Cr])===-1&&Ge.push(It[Cr]);if(K(Ge),this.autoPaging)for(var pr=Ge[0],Kt=Ge[Ge.length-1],ar=pr;ar<Kt+1;ar++){this.pdf.setPage(ar);var lr=ar===1?this.posY+this.margin[0]:this.margin[0],cr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],br=this.pdf.internal.pageSize.height-this.margin[2],Nr=br-this.margin[0],Kr=this.pdf.internal.pageSize.width-this.margin[1],Lr=Kr-this.margin[3],Hr=ar===1?0:cr+(ar-2)*Nr;if(this.ctx.clip_path.length!==0){var un=this.path;Qt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Qt,this.posX+this.margin[3],-1*Hr+lr),se.call(this,"fill",!0),this.path=un}var zr=N([JSON.parse(JSON.stringify(vr))],this.posX+this.margin[3],-Hr+lr+this.ctx.prevPageLastElemOffset)[0];ne.scale>=.01&&(Mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Mt*ne.scale),$t=this.lineWidth,this.lineWidth=$t*ne.scale);var Yr=this.autoPaging!=="text";if(Yr||zr.y+zr.h<=br){if(Yr||zr.y>=lr&&zr.x<=Kr){var ur=Yr?ne.text:this.pdf.splitTextToSize(ne.text,ne.maxWidth||Kr-zr.x)[0],At=N([JSON.parse(JSON.stringify(jt))],this.posX+this.margin[3],-Hr+lr+this.ctx.prevPageLastElemOffset)[0],le=Yr&&(ar>pr||ar<Kt)&&k.call(this);le&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lr,Nr,null).clip().discardPath()),this.pdf.text(ur,At.x,At.y,{angle:ne.angle,align:Be,renderingMode:ne.renderingMode}),le&&this.pdf.restoreGraphicsState()}}else zr.y<br&&(this.ctx.prevPageLastElemOffset+=br-zr.y);ne.scale>=.01&&(this.pdf.setFontSize(Mt),this.lineWidth=$t)}else ne.scale>=.01&&(Mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Mt*ne.scale),$t=this.lineWidth,this.lineWidth=$t*ne.scale),this.pdf.text(ne.text,Ze.x+this.posX,Ze.y+this.posY,{angle:ne.angle,align:Be,renderingMode:ne.renderingMode,maxWidth:ne.maxWidth}),ne.scale>=.01&&(this.pdf.setFontSize(Mt),this.lineWidth=$t)},Ie=function(ne,Be,Pe,$e){Pe=Pe||0,$e=$e||0,this.pdf.internal.out(r(ne+Pe)+" "+i(Be+$e)+" l")},be=function(ne,Be,Pe){return this.pdf.lines(ne,Be,Pe,null,null)},ct=function(ne,Be,Pe,$e,nt,Ze,pt,dt){this.pdf.internal.out([t(A(Pe+ne)),t(u($e+Be)),t(A(nt+ne)),t(u(Ze+Be)),t(A(pt+ne)),t(u(dt+Be)),"c"].join(" "))},Xe=function(ne,Be,Pe,$e){for(var nt=2*Math.PI,Ze=Math.PI/2;Be>Pe;)Be-=nt;var pt=Math.abs(Pe-Be);pt<nt&&$e&&(pt=nt-pt);for(var dt=[],Qt=$e?-1:1,Mt=Be;pt>1e-5;){var $t=Mt+Qt*Math.min(pt,Ze);dt.push(lt.call(this,ne,Mt,$t)),pt-=Math.abs($t-Mt),Mt=$t}return dt},lt=function(ne,Be,Pe){var $e=(Pe-Be)/2,nt=ne*Math.cos($e),Ze=ne*Math.sin($e),pt=nt,dt=-Ze,Qt=pt*pt+dt*dt,Mt=Qt+pt*nt+dt*Ze,$t=4/3*(Math.sqrt(2*Qt*Mt)-Mt)/(pt*Ze-dt*nt),jt=pt-$t*dt,vr=dt+$t*pt,It=jt,Ge=-vr,Cr=$e+Be,pr=Math.cos(Cr),Kt=Math.sin(Cr);return{x1:ne*Math.cos(Be),y1:ne*Math.sin(Be),x2:jt*pr-vr*Kt,y2:jt*Kt+vr*pr,x3:It*pr-Ge*Kt,y3:It*Kt+Ge*pr,x4:ne*Math.cos(Pe),y4:ne*Math.sin(Pe)}},Le=function(ne){return 180*ne/Math.PI},ze=function(ne,Be,Pe,$e,nt,Ze){var pt=ne+.5*(Pe-ne),dt=Be+.5*($e-Be),Qt=nt+.5*(Pe-nt),Mt=Ze+.5*($e-Ze),$t=Math.min(ne,nt,pt,Qt),jt=Math.max(ne,nt,pt,Qt),vr=Math.min(Be,Ze,dt,Mt),It=Math.max(Be,Ze,dt,Mt);return new o($t,vr,jt-$t,It-vr)},it=function(ne,Be,Pe,$e,nt,Ze,pt,dt){var Qt,Mt,$t,jt,vr,It,Ge,Cr,pr,Kt,ar,lr,cr,br,Nr=Pe-ne,Kr=$e-Be,Lr=nt-Pe,Hr=Ze-$e,un=pt-nt,zr=dt-Ze;for(Mt=0;Mt<41;Mt++)pr=(Ge=($t=ne+(Qt=Mt/40)*Nr)+Qt*((vr=Pe+Qt*Lr)-$t))+Qt*(vr+Qt*(nt+Qt*un-vr)-Ge),Kt=(Cr=(jt=Be+Qt*Kr)+Qt*((It=$e+Qt*Hr)-jt))+Qt*(It+Qt*(Ze+Qt*zr-It)-Cr),Mt==0?(ar=pr,lr=Kt,cr=pr,br=Kt):(ar=Math.min(ar,pr),lr=Math.min(lr,Kt),cr=Math.max(cr,pr),br=Math.max(br,Kt));return new o(Math.round(ar),Math.round(lr),Math.round(cr-ar),Math.round(br-lr))},Lt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ne,Be,Pe=(ne=this.ctx.lineDash,Be=this.ctx.lineDashOffset,JSON.stringify({lineDash:ne,lineDashOffset:Be}));this.prevLineDash!==Pe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Pe)}}})(Xr.API),function(e){var t=function(u){var h,o,g,x,E,F,P,C,D,k;for(o=[],g=0,x=(u+=h="\0\0\0\0".slice(u.length%4||4)).length;x>g;g+=4)(E=(u.charCodeAt(g)<<24)+(u.charCodeAt(g+1)<<16)+(u.charCodeAt(g+2)<<8)+u.charCodeAt(g+3))!==0?(F=(E=((E=((E=((E=(E-(k=E%85))/85)-(D=E%85))/85)-(C=E%85))/85)-(P=E%85))/85)%85,o.push(F+33,P+33,C+33,D+33,k+33)):o.push(122);return function(j,U){for(var N=U;N>0;N--)j.pop()}(o,h.length),String.fromCharCode.apply(String,o)+"~>"},r=function(u){var h,o,g,x,E,F=String,P="length",C=255,D="charCodeAt",k="slice",j="replace";for(u[k](-2),u=u[k](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),g=[],x=0,E=(u+=h="uuuuu"[k](u[P]%5||5))[P];E>x;x+=5)o=52200625*(u[D](x)-33)+614125*(u[D](x+1)-33)+7225*(u[D](x+2)-33)+85*(u[D](x+3)-33)+(u[D](x+4)-33),g.push(C&o>>24,C&o>>16,C&o>>8,C&o);return function(U,N){for(var K=N;K>0;K--)U.pop()}(g,h[P]),F.fromCharCode.apply(F,g)},i=function(u){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),h.test(u)===!1)return"";for(var o="",g=0;g<u.length;g+=2)o+=String.fromCharCode("0x"+(u[g]+u[g+1]));return o},A=function(u){for(var h=new Uint8Array(u.length),o=u.length;o--;)h[o]=u.charCodeAt(o);return u=(h=kb(h)).reduce(function(g,x){return g+String.fromCharCode(x)},"")};e.processDataByFilters=function(u,h){var o=0,g=u||"",x=[];for(typeof(h=h||[])=="string"&&(h=[h]),o=0;o<h.length;o+=1)switch(h[o]){case"ASCII85Decode":case"/ASCII85Decode":g=r(g),x.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=t(g),x.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=i(g),x.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=g.split("").map(function(E){return("0"+E.charCodeAt().toString(16)).slice(-2)}).join("")+">",x.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=A(g),x.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[o]+'" is not implemented')}return{data:g,reverseChain:x.reverse().join(" ")}}}(Xr.API),function(e){e.loadFile=function(t,r,i){return function(A,u,h){u=u!==!1,h=typeof h=="function"?h:function(){};var o=void 0;try{o=function(g,x,E){var F=new XMLHttpRequest,P=0,C=function(D){var k=D.length,j=[],U=String.fromCharCode;for(P=0;P<k;P+=1)j.push(U(255&D.charCodeAt(P)));return j.join("")};if(F.open("GET",g,!x),F.overrideMimeType("text/plain; charset=x-user-defined"),x===!1&&(F.onload=function(){F.status===200?E(C(this.responseText)):E(void 0)}),F.send(null),x&&F.status===200)return C(F.responseText)}(A,u,h)}catch{}return o}(t,r,i)},e.loadImageFile=e.loadFile}(Xr.API),function(e){function t(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):Ib(()=>Promise.resolve().then(()=>Dq),void 0)).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function r(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):Ib(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var i=function(h){var o=Yn(h);return o==="undefined"?"undefined":o==="string"||h instanceof String?"string":o==="number"||h instanceof Number?"number":o==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":o==="object"?"object":"unknown"},A=function(h,o){var g=document.createElement(h);for(var x in o.className&&(g.className=o.className),o.innerHTML&&o.dompurify&&(g.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)g.style[x]=o.style[x];return g},u=function h(o){var g=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),x=h.convert(Promise.resolve(),g);return x=(x=x.setProgress(1,h,1,[h])).set(o)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(h,o){return h.__proto__=o||u.prototype,h},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(h,o){return this.then(function(){switch(o=o||function(g){switch(i(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(r).then(function(g){return this.set({src:A("div",{innerHTML:h,dompurify:g})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},u.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function g(x,E){for(var F=x.nodeType===3?document.createTextNode(x.nodeValue):x.cloneNode(!1),P=x.firstChild;P;P=P.nextSibling)E!==!0&&P.nodeType===1&&P.nodeName==="SCRIPT"||F.appendChild(g(P,E));return x.nodeType===1&&(x.nodeName==="CANVAS"?(F.width=x.width,F.height=x.height,F.getContext("2d").drawImage(x,0,0)):x.nodeName!=="TEXTAREA"&&x.nodeName!=="SELECT"||(F.value=x.value),F.addEventListener("load",function(){F.scrollTop=x.scrollTop,F.scrollLeft=x.scrollLeft},!0)),F}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=A("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=A("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(A("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(o){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,o(this.prop.container,g)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(o){var g=this.opt.jsPDF,x=this.opt.fontFaces,E=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,F=Object.assign({async:!0,allowTaint:!0,scale:E,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete F.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=x,x)for(var P=0;P<x.length;++P){var C=x[P],D=C.src.find(function(k){return k.format==="truetype"});D&&g.addFont(D.url,C.ref.name,C.ref.style)}return F.windowHeight=F.windowHeight||0,F.windowHeight=F.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):F.windowHeight,g.context2d.save(!0),o(this.prop.container,F)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(h,o,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(h,o):this.outputPdf(h,o)},u.prototype.outputPdf=function(h,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,o)})},u.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},u.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(h){if(i(h)!=="object")return this;var o=Object.keys(h||{}).map(function(g){if(g in u.template.prop)return function(){this.prop[g]=h[g]};switch(g){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[g]=h[g]}}},this);return this.then(function(){return this.thenList(o)})},u.prototype.get=function(h,o){return this.then(function(){var g=h in u.template.prop?this.prop[h]:this.opt[h];return o?o(g):g})},u.prototype.setMargin=function(h){return this.then(function(){switch(i(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},u.prototype.setPageSize=function(h){function o(g,x){return Math.floor(g*x/72*96)}return this.then(function(){(h=h||Xr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:o(h.inner.width,h.k),height:o(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},u.prototype.setProgress=function(h,o,g,x){return h!=null&&(this.progress.val=h),o!=null&&(this.progress.state=o),g!=null&&(this.progress.n=g),x!=null&&(this.progress.stack=x),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(h,o,g,x){return this.setProgress(h?this.progress.val+h:null,o||null,g?this.progress.n+g:null,x?this.progress.stack.concat(x):null)},u.prototype.then=function(h,o){var g=this;return this.thenCore(h,o,function(x,E){return g.updateProgress(null,null,1,[x]),Promise.prototype.then.call(this,function(F){return g.updateProgress(null,x),F}).then(x,E).then(function(F){return g.updateProgress(1),F})})},u.prototype.thenCore=function(h,o,g){g=g||Promise.prototype.then,h&&(h=h.bind(this)),o&&(o=o.bind(this));var x=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),E=g.call(x,h,o);return u.convert(E,this.__proto__)},u.prototype.thenExternal=function(h,o){return Promise.prototype.then.call(this,h,o)},u.prototype.thenList=function(h){var o=this;return h.forEach(function(g){o=o.thenCore(g)}),o},u.prototype.catch=function(h){h&&(h=h.bind(this));var o=Promise.prototype.catch.call(this,h);return u.convert(o,this)},u.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},u.prototype.error=function(h){return this.then(function(){throw new Error(h)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Xr.getPageSize=function(h,o,g){if(Yn(h)==="object"){var x=h;h=x.orientation,o=x.unit||o,g=x.format||g}o=o||"mm",g=g||"a4",h=(""+(h||"P")).toLowerCase();var E,F=(""+g).toLowerCase(),P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":E=1;break;case"mm":E=72/25.4;break;case"cm":E=72/2.54;break;case"in":E=72;break;case"px":E=.75;break;case"pc":case"em":E=12;break;case"ex":E=6;break;default:throw"Invalid unit: "+o}var C,D=0,k=0;if(P.hasOwnProperty(F))D=P[F][1]/E,k=P[F][0]/E;else try{D=g[1],k=g[0]}catch{throw new Error("Invalid format: "+g)}if(h==="p"||h==="portrait")h="p",k>D&&(C=k,k=D,D=C);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",D>k&&(C=k,k=D,D=C)}return{width:k,height:D,unit:o,k:E,orientation:h}},e.html=function(h,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Ob):null;var g=new u(o);return o.worker?g:g.from(h).doCallback()}}(Xr.API),Xr.API.addJS=function(e){return $4=e,this.internal.events.subscribe("postPutResources",function(){ey=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ey+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),G4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ey!==void 0&&G4!==void 0&&this.internal.out("/Names <</JavaScript "+ey+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var A=r.outline.render().split(/\r\n/),u=0;u<A.length;u++){var h=A[u],o=i.exec(h);if(o!=null){var g=o[1];r.internal.newObjectDeferredBegin(g,!1)}r.internal.write(h)}if(this.outline.createNamedDestinations){var x=this.internal.pages.length,E=[];for(u=0;u<x;u++){var F=r.internal.newObject();E.push(F);var P=r.internal.getPageInfo(u+1);r.internal.write("<< /D["+P.objId+" 0 R /XYZ null null null]>> endobj")}var C=r.internal.newObject();for(r.internal.write("<< /Names [ "),u=0;u<E.length;u++)r.internal.write("(page_"+(u+1)+")"+E[u]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+C+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,A,u){var h={title:A,options:u,children:[]};return i==null&&(i=this.root),i.children.push(h),h},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var A=0;A<i.children.length;A++)this.genIds_r(i.children[A])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var A=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<i.children.length;u++){var h=i.children[u];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(i)),u>0&&this.line("/Prev "+this.makeRef(i.children[u-1])),u<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[u+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var o=this.count=this.count_r({count:0},h);if(o>0&&this.line("/Count "+o),h.options&&h.options.pageNumber){var g=r.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+A(0)+" 0]")}this.objEnd()}for(var x=0;x<i.children.length;x++)this.renderItems(i.children[x])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,A){for(var u=0;u<A.children.length;u++)i.count++,this.count_r(i,A.children[u]);return i.count}}])}(Xr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,i,A,u,h,o){var g,x=this.decode.DCT_DECODE,E=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=h||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(g=function(F){for(var P,C=256*F.charCodeAt(4)+F.charCodeAt(5),D=F.length,k={width:0,height:0,numcomponents:1},j=4;j<D;j+=2){if(j+=C,t.indexOf(F.charCodeAt(j+1))!==-1){P=256*F.charCodeAt(j+5)+F.charCodeAt(j+6),k={width:256*F.charCodeAt(j+7)+F.charCodeAt(j+8),height:P,numcomponents:F.charCodeAt(j+9)};break}C=256*F.charCodeAt(j+2)+F.charCodeAt(j+3)}return k}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}E={data:r,width:g.width,height:g.height,colorSpace:o,bitsPerComponent:8,filter:x,index:i,alias:A}}return E}}(Xr.API);var wf,ty,q4,W4,Z4,xW=function(){var e,t,r;function i(u){var h,o,g,x,E,F,P,C,D,k,j,U,N,K;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},F=null;;){switch(h=this.readUInt32(),D=(function(){var ee,se;for(se=[],ee=0;ee<4;++ee)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":F&&this.animation.frames.push(F),this.pos+=4,F={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},E=this.readUInt16(),x=this.readUInt16()||100,F.delay=1e3*E/x,F.disposeOp=this.data[this.pos++],F.blendOp=this.data[this.pos++],F.data=[];break;case"IDAT":case"fdAT":for(D==="fdAT"&&(this.pos+=4,h-=4),u=(F!=null?F.data:void 0)||this.imgData,U=0;0<=h?U<h:U>h;0<=h?++U:--U)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(g=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>g)throw new Error("More transparent colors than palette size");if((k=g-this.transparency.indexed.length)>0)for(N=0;0<=k?N<k:N>k;0<=k?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":P=(j=this.read(h)).indexOf(0),C=String.fromCharCode.apply(String,j.slice(0,P)),this.text[C]=String.fromCharCode.apply(String,j.slice(P+1));break;case"IEND":return F&&this.animation.frames.push(F),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(K=this.colorType)===4||K===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(u){var h,o;for(o=[],h=0;0<=u?h<u:h>u;0<=u?++h:--h)o.push(this.data[this.pos++]);return o},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(u){var h=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*h),g=0,x=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function E(F,P,C,D){var k,j,U,N,K,ee,se,pe,ye,ue,Te,Ke,oe,he,Ie,be,ct,Xe,lt,Le,ze,it=Math.ceil((x.width-F)/C),Lt=Math.ceil((x.height-P)/D),ne=x.width==it&&x.height==Lt;for(he=h*it,Ke=ne?o:new Uint8Array(he*Lt),ee=u.length,oe=0,j=0;oe<Lt&&g<ee;){switch(u[g++]){case 0:for(N=ct=0;ct<he;N=ct+=1)Ke[j++]=u[g++];break;case 1:for(N=Xe=0;Xe<he;N=Xe+=1)k=u[g++],K=N<h?0:Ke[j-h],Ke[j++]=(k+K)%256;break;case 2:for(N=lt=0;lt<he;N=lt+=1)k=u[g++],U=(N-N%h)/h,Ie=oe&&Ke[(oe-1)*he+U*h+N%h],Ke[j++]=(Ie+k)%256;break;case 3:for(N=Le=0;Le<he;N=Le+=1)k=u[g++],U=(N-N%h)/h,K=N<h?0:Ke[j-h],Ie=oe&&Ke[(oe-1)*he+U*h+N%h],Ke[j++]=(k+Math.floor((K+Ie)/2))%256;break;case 4:for(N=ze=0;ze<he;N=ze+=1)k=u[g++],U=(N-N%h)/h,K=N<h?0:Ke[j-h],oe===0?Ie=be=0:(Ie=Ke[(oe-1)*he+U*h+N%h],be=U&&Ke[(oe-1)*he+(U-1)*h+N%h]),se=K+Ie-be,pe=Math.abs(se-K),ue=Math.abs(se-Ie),Te=Math.abs(se-be),ye=pe<=ue&&pe<=Te?K:ue<=Te?Ie:be,Ke[j++]=(k+ye)%256;break;default:throw new Error("Invalid filter algorithm: "+u[g-1])}if(!ne){var Be=((P+oe*D)*x.width+F)*h,Pe=oe*he;for(N=0;N<it;N+=1){for(var $e=0;$e<h;$e+=1)o[Be++]=Ke[Pe++];Be+=(C-1)*h}}oe++}}return u=eW(u),x.interlaceMethod==1?(E(0,0,8,8),E(4,0,8,8),E(0,4,4,8),E(2,0,4,4),E(0,2,2,4),E(1,0,2,2),E(0,1,1,2)):E(0,0,1,1),o},i.prototype.decodePalette=function(){var u,h,o,g,x,E,F,P,C;for(o=this.palette,E=this.transparency.indexed||[],x=new Uint8Array((E.length||0)+o.length),g=0,u=0,h=F=0,P=o.length;F<P;h=F+=3)x[g++]=o[h],x[g++]=o[h+1],x[g++]=o[h+2],x[g++]=(C=E[u++])!=null?C:255;return x},i.prototype.copyToImageData=function(u,h){var o,g,x,E,F,P,C,D,k,j,U;if(g=this.colors,k=null,o=this.hasAlphaChannel,this.palette.length&&(k=(U=this._decodedPalette)!=null?U:this._decodedPalette=this.decodePalette(),g=4,o=!0),D=(x=u.data||u).length,F=k||h,E=P=0,g===1)for(;E<D;)C=k?4*h[E/4]:P,j=F[C++],x[E++]=j,x[E++]=j,x[E++]=j,x[E++]=o?F[C++]:255,P=C;else for(;E<D;)C=k?4*h[E/4]:P,x[E++]=F[C++],x[E++]=F[C++],x[E++]=F[C++],x[E++]=o?F[C++]:255,P=C},i.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var A=function(){if(Object.prototype.toString.call(tn)==="[object Window]"){try{t=tn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return A(),e=function(u){var h;if(A()===!0)return r.width=u.width,r.height=u.height,r.clearRect(0,0,u.width,u.height),r.putImageData(u,0,0),(h=new Image).src=t.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(u){var h,o,g,x,E,F,P,C;if(this.animation){for(C=[],o=E=0,F=(P=this.animation.frames).length;E<F;o=++E)h=P[o],g=u.createImageData(h.width,h.height),x=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(g,x),h.imageData=g,C.push(h.image=e(g));return C}},i.prototype.renderFrame=function(u,h){var o,g,x;return o=(g=this.animation.frames)[h],x=g[h-1],h===0&&u.clearRect(0,0,this.width,this.height),(x!=null?x.disposeOp:void 0)===1?u.clearRect(x.xOffset,x.yOffset,x.width,x.height):(x!=null?x.disposeOp:void 0)===2&&u.putImageData(x.imageData,x.xOffset,x.yOffset),o.blendOp===0&&u.clearRect(o.xOffset,o.yOffset,o.width,o.height),u.drawImage(o.image,o.xOffset,o.yOffset)},i.prototype.animate=function(u){var h,o,g,x,E,F,P=this;return o=0,F=this.animation,x=F.numFrames,g=F.frames,E=F.numPlays,(h=function(){var C,D;if(C=o++%x,D=g[C],P.renderFrame(u,C),x>1&&o/x<E)return P.animation._timeout=setTimeout(h,D.delay)})()},i.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},i.prototype.render=function(u){var h,o;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,h=u.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(o=h.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),h.putImageData(o,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function bW(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,A=e[t++],u=A>>7,h=1<<(7&A)+1;e[t++],e[t++];var o=null,g=null;u&&(o=t,g=h,t+=3*h);var x=!0,E=[],F=0,P=null,C=0,D=null;for(this.width=r,this.height=i;x&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,D=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((oe=e[t++])>=0))throw Error("Invalid block size");if(oe===0)break;t+=oe}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[t++];F=e[t++]|e[t++]<<8,P=e[t++],!(1&k)&&(P=null),C=k>>2&7,t++;break;case 254:for(;;){if(!((oe=e[t++])>=0))throw Error("Invalid block size");if(oe===0)break;t+=oe}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,U=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,K=e[t++]|e[t++]<<8,ee=e[t++],se=ee>>6&1,pe=1<<(7&ee)+1,ye=o,ue=g,Te=!1;ee>>7&&(Te=!0,ye=t,ue=pe,t+=3*pe);var Ke=t;for(t++;;){var oe;if(!((oe=e[t++])>=0))throw Error("Invalid block size");if(oe===0)break;t+=oe}E.push({x:j,y:U,width:N,height:K,has_local_palette:Te,palette_offset:ye,palette_size:ue,data_offset:Ke,data_length:t-Ke,transparent_index:P,interlaced:!!se,delay:F,disposal:C});break;case 59:x=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return E.length},this.loopCount=function(){return D},this.frameInfo=function(he){if(he<0||he>=E.length)throw new Error("Frame index out of range.");return E[he]},this.decodeAndBlitFrameBGRA=function(he,Ie){var be=this.frameInfo(he),ct=be.width*be.height,Xe=new Uint8Array(ct);X4(e,be.data_offset,Xe,ct);var lt=be.palette_offset,Le=be.transparent_index;Le===null&&(Le=256);var ze=be.width,it=r-ze,Lt=ze,ne=4*(be.y*r+be.x),Be=4*((be.y+be.height)*r+be.x),Pe=ne,$e=4*it;be.interlaced===!0&&($e+=4*r*7);for(var nt=8,Ze=0,pt=Xe.length;Ze<pt;++Ze){var dt=Xe[Ze];if(Lt===0&&(Lt=ze,(Pe+=$e)>=Be&&($e=4*it+4*r*(nt-1),Pe=ne+(ze+it)*(nt<<1),nt>>=1)),dt===Le)Pe+=4;else{var Qt=e[lt+3*dt],Mt=e[lt+3*dt+1],$t=e[lt+3*dt+2];Ie[Pe++]=$t,Ie[Pe++]=Mt,Ie[Pe++]=Qt,Ie[Pe++]=255}--Lt}},this.decodeAndBlitFrameRGBA=function(he,Ie){var be=this.frameInfo(he),ct=be.width*be.height,Xe=new Uint8Array(ct);X4(e,be.data_offset,Xe,ct);var lt=be.palette_offset,Le=be.transparent_index;Le===null&&(Le=256);var ze=be.width,it=r-ze,Lt=ze,ne=4*(be.y*r+be.x),Be=4*((be.y+be.height)*r+be.x),Pe=ne,$e=4*it;be.interlaced===!0&&($e+=4*r*7);for(var nt=8,Ze=0,pt=Xe.length;Ze<pt;++Ze){var dt=Xe[Ze];if(Lt===0&&(Lt=ze,(Pe+=$e)>=Be&&($e=4*it+4*r*(nt-1),Pe=ne+(ze+it)*(nt<<1),nt>>=1)),dt===Le)Pe+=4;else{var Qt=e[lt+3*dt],Mt=e[lt+3*dt+1],$t=e[lt+3*dt+2];Ie[Pe++]=Qt,Ie[Pe++]=Mt,Ie[Pe++]=$t,Ie[Pe++]=255}--Lt}}}function X4(e,t,r,i){for(var A=e[t++],u=1<<A,h=u+1,o=h+1,g=A+1,x=(1<<g)-1,E=0,F=0,P=0,C=e[t++],D=new Int32Array(4096),k=null;;){for(;E<16&&C!==0;)F|=e[t++]<<E,E+=8,C===1?C=e[t++]:--C;if(E<g)break;var j=F&x;if(F>>=g,E-=g,j!==u){if(j===h)break;for(var U=j<o?j:k,N=0,K=U;K>u;)K=D[K]>>8,++N;var ee=K;if(P+N+(U!==j?1:0)>i)return void mi.log("Warning, gif stream longer than expected.");r[P++]=ee;var se=P+=N;for(U!==j&&(r[P++]=ee),K=U;N--;)K=D[K],r[--se]=255&K,K>>=8;k!==null&&o<4096&&(D[o++]=k<<8|ee,o>=x+1&&g<12&&(++g,x=x<<1|1)),k=j}else o=h+1,x=(1<<(g=A+1))-1,k=null}return P!==i&&mi.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Uw(e){var t,r,i,A,u,h=Math.floor,o=new Array(64),g=new Array(64),x=new Array(64),E=new Array(64),F=new Array(65535),P=new Array(65535),C=new Array(64),D=new Array(64),k=[],j=0,U=7,N=new Array(64),K=new Array(64),ee=new Array(64),se=new Array(256),pe=new Array(2048),ye=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ue=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Te=[0,1,2,3,4,5,6,7,8,9,10,11],Ke=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],oe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],he=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ie=[0,1,2,3,4,5,6,7,8,9,10,11],be=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ct=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Xe(ne,Be){for(var Pe=0,$e=0,nt=new Array,Ze=1;Ze<=16;Ze++){for(var pt=1;pt<=ne[Ze];pt++)nt[Be[$e]]=[],nt[Be[$e]][0]=Pe,nt[Be[$e]][1]=Ze,$e++,Pe++;Pe*=2}return nt}function lt(ne){for(var Be=ne[0],Pe=ne[1]-1;Pe>=0;)Be&1<<Pe&&(j|=1<<U),Pe--,--U<0&&(j==255?(Le(255),Le(0)):Le(j),U=7,j=0)}function Le(ne){k.push(ne)}function ze(ne){Le(ne>>8&255),Le(255&ne)}function it(ne,Be,Pe,$e,nt){for(var Ze,pt=nt[0],dt=nt[240],Qt=function(Kt,ar){var lr,cr,br,Nr,Kr,Lr,Hr,un,zr,Yr,ur=0;for(zr=0;zr<8;++zr){lr=Kt[ur],cr=Kt[ur+1],br=Kt[ur+2],Nr=Kt[ur+3],Kr=Kt[ur+4],Lr=Kt[ur+5],Hr=Kt[ur+6];var At=lr+(un=Kt[ur+7]),le=lr-un,fe=cr+Hr,_e=cr-Hr,Qe=br+Lr,et=br-Lr,tt=Nr+Kr,yt=Nr-Kr,rt=At+tt,Ft=At-tt,Ct=fe+Qe,at=fe-Qe;Kt[ur]=rt+Ct,Kt[ur+4]=rt-Ct;var mt=.707106781*(at+Ft);Kt[ur+2]=Ft+mt,Kt[ur+6]=Ft-mt;var Me=.382683433*((rt=yt+et)-(at=_e+le)),Rt=.5411961*rt+Me,nr=1.306562965*at+Me,tr=.707106781*(Ct=et+_e),Ar=le+tr,qt=le-tr;Kt[ur+5]=qt+Rt,Kt[ur+3]=qt-Rt,Kt[ur+1]=Ar+nr,Kt[ur+7]=Ar-nr,ur+=8}for(ur=0,zr=0;zr<8;++zr){lr=Kt[ur],cr=Kt[ur+8],br=Kt[ur+16],Nr=Kt[ur+24],Kr=Kt[ur+32],Lr=Kt[ur+40],Hr=Kt[ur+48];var Jr=lr+(un=Kt[ur+56]),jr=lr-un,Rr=cr+Hr,_r=cr-Hr,Ur=br+Lr,Pn=br-Lr,Yt=Nr+Kr,Wn=Nr-Kr,Bn=Jr+Yt,Xi=Jr-Yt,as=Rr+Ur,Jt=Rr-Ur;Kt[ur]=Bn+as,Kt[ur+32]=Bn-as;var Dr=.707106781*(Jt+Xi);Kt[ur+16]=Xi+Dr,Kt[ur+48]=Xi-Dr;var Vr=.382683433*((Bn=Wn+Pn)-(Jt=_r+jr)),Ni=.5411961*Bn+Vr,Ga=1.306562965*Jt+Vr,Ls=.707106781*(as=Pn+_r),$r=jr+Ls,qs=jr-Ls;Kt[ur+40]=qs+Ni,Kt[ur+24]=qs-Ni,Kt[ur+8]=$r+Ga,Kt[ur+56]=$r-Ga,ur++}for(zr=0;zr<64;++zr)Yr=Kt[zr]*ar[zr],C[zr]=Yr>0?Yr+.5|0:Yr-.5|0;return C}(ne,Be),Mt=0;Mt<64;++Mt)D[ye[Mt]]=Qt[Mt];var $t=D[0]-Pe;Pe=D[0],$t==0?lt($e[0]):(lt($e[P[Ze=32767+$t]]),lt(F[Ze]));for(var jt=63;jt>0&&D[jt]==0;)jt--;if(jt==0)return lt(pt),Pe;for(var vr,It=1;It<=jt;){for(var Ge=It;D[It]==0&&It<=jt;)++It;var Cr=It-Ge;if(Cr>=16){vr=Cr>>4;for(var pr=1;pr<=vr;++pr)lt(dt);Cr&=15}Ze=32767+D[It],lt(nt[(Cr<<4)+P[Ze]]),lt(F[Ze]),It++}return jt!=63&&lt(pt),Pe}function Lt(ne){ne=Math.min(Math.max(ne,1),100),u!=ne&&(function(Be){for(var Pe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$e=0;$e<64;$e++){var nt=h((Pe[$e]*Be+50)/100);nt=Math.min(Math.max(nt,1),255),o[ye[$e]]=nt}for(var Ze=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pt=0;pt<64;pt++){var dt=h((Ze[pt]*Be+50)/100);dt=Math.min(Math.max(dt,1),255),g[ye[pt]]=dt}for(var Qt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Mt=0,$t=0;$t<8;$t++)for(var jt=0;jt<8;jt++)x[Mt]=1/(o[ye[Mt]]*Qt[$t]*Qt[jt]*8),E[Mt]=1/(g[ye[Mt]]*Qt[$t]*Qt[jt]*8),Mt++}(ne<50?Math.floor(5e3/ne):Math.floor(200-2*ne)),u=ne)}this.encode=function(ne,Be){Be&&Lt(Be),k=new Array,j=0,U=7,ze(65496),ze(65504),ze(16),Le(74),Le(70),Le(73),Le(70),Le(0),Le(1),Le(1),Le(0),ze(1),ze(1),Le(0),Le(0),function(){ze(65499),ze(132),Le(0);for(var cr=0;cr<64;cr++)Le(o[cr]);Le(1);for(var br=0;br<64;br++)Le(g[br])}(),function(cr,br){ze(65472),ze(17),Le(8),ze(br),ze(cr),Le(3),Le(1),Le(17),Le(0),Le(2),Le(17),Le(1),Le(3),Le(17),Le(1)}(ne.width,ne.height),function(){ze(65476),ze(418),Le(0);for(var cr=0;cr<16;cr++)Le(ue[cr+1]);for(var br=0;br<=11;br++)Le(Te[br]);Le(16);for(var Nr=0;Nr<16;Nr++)Le(Ke[Nr+1]);for(var Kr=0;Kr<=161;Kr++)Le(oe[Kr]);Le(1);for(var Lr=0;Lr<16;Lr++)Le(he[Lr+1]);for(var Hr=0;Hr<=11;Hr++)Le(Ie[Hr]);Le(17);for(var un=0;un<16;un++)Le(be[un+1]);for(var zr=0;zr<=161;zr++)Le(ct[zr])}(),ze(65498),ze(12),Le(3),Le(1),Le(0),Le(2),Le(17),Le(3),Le(17),Le(0),Le(63),Le(0);var Pe=0,$e=0,nt=0;j=0,U=7,this.encode.displayName="_encode_";for(var Ze,pt,dt,Qt,Mt,$t,jt,vr,It,Ge=ne.data,Cr=ne.width,pr=ne.height,Kt=4*Cr,ar=0;ar<pr;){for(Ze=0;Ze<Kt;){for(Mt=Kt*ar+Ze,jt=-1,vr=0,It=0;It<64;It++)$t=Mt+(vr=It>>3)*Kt+(jt=4*(7&It)),ar+vr>=pr&&($t-=Kt*(ar+1+vr-pr)),Ze+jt>=Kt&&($t-=Ze+jt-Kt+4),pt=Ge[$t++],dt=Ge[$t++],Qt=Ge[$t++],N[It]=(pe[pt]+pe[dt+256>>0]+pe[Qt+512>>0]>>16)-128,K[It]=(pe[pt+768>>0]+pe[dt+1024>>0]+pe[Qt+1280>>0]>>16)-128,ee[It]=(pe[pt+1280>>0]+pe[dt+1536>>0]+pe[Qt+1792>>0]>>16)-128;Pe=it(N,x,Pe,t,i),$e=it(K,E,$e,r,A),nt=it(ee,E,nt,r,A),Ze+=32}ar+=8}if(U>=0){var lr=[];lr[1]=U+1,lr[0]=(1<<U+1)-1,lt(lr)}return ze(65497),new Uint8Array(k)},e=e||50,function(){for(var ne=String.fromCharCode,Be=0;Be<256;Be++)se[Be]=ne(Be)}(),t=Xe(ue,Te),r=Xe(he,Ie),i=Xe(Ke,oe),A=Xe(be,ct),function(){for(var ne=1,Be=2,Pe=1;Pe<=15;Pe++){for(var $e=ne;$e<Be;$e++)P[32767+$e]=Pe,F[32767+$e]=[],F[32767+$e][1]=Pe,F[32767+$e][0]=$e;for(var nt=-(Be-1);nt<=-ne;nt++)P[32767+nt]=Pe,F[32767+nt]=[],F[32767+nt][1]=Pe,F[32767+nt][0]=Be-1+nt;ne<<=1,Be<<=1}}(),function(){for(var ne=0;ne<256;ne++)pe[ne]=19595*ne,pe[ne+256>>0]=38470*ne,pe[ne+512>>0]=7471*ne+32768,pe[ne+768>>0]=-11059*ne,pe[ne+1024>>0]=-21709*ne,pe[ne+1280>>0]=32768*ne+8421375,pe[ne+1536>>0]=-27439*ne,pe[ne+1792>>0]=-5329*ne}(),Lt(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wA(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Y4(e){function t(ue){if(!ue)throw Error("assert :P")}function r(ue,Te,Ke){for(var oe=0;4>oe;oe++)if(ue[Te+oe]!=Ke.charCodeAt(oe))return!0;return!1}function i(ue,Te,Ke,oe,he){for(var Ie=0;Ie<he;Ie++)ue[Te+Ie]=Ke[oe+Ie]}function A(ue,Te,Ke,oe){for(var he=0;he<oe;he++)ue[Te+he]=Ke}function u(ue){return new Int32Array(ue)}function h(ue,Te){for(var Ke=[],oe=0;oe<ue;oe++)Ke.push(new Te);return Ke}function o(ue,Te){var Ke=[];return function oe(he,Ie,be){for(var ct=be[Ie],Xe=0;Xe<ct&&(he.push(be.length>Ie+1?[]:new Te),!(be.length<Ie+1));Xe++)oe(he[Xe],Ie+1,be)}(Ke,0,ue),Ke}var g=function(){var ue=this;function Te(b,I){for(var O=1<<I-1>>>0;b&O;)O>>>=1;return O?(b&O-1)+O:b}function Ke(b,I,O,q,ae){t(!(q%O));do b[I+(q-=O)]=ae;while(0<q)}function oe(b,I,O,q,ae){if(t(2328>=ae),512>=ae)var me=u(512);else if((me=u(ae))==null)return 0;return function(ge,ve,we,ke,Ne,Bt){var wt,ft,Ot=ve,Pt=1<<we,ut=u(16),Ye=u(16);for(t(Ne!=0),t(ke!=null),t(ge!=null),t(0<we),ft=0;ft<Ne;++ft){if(15<ke[ft])return 0;++ut[ke[ft]]}if(ut[0]==Ne)return 0;for(Ye[1]=0,wt=1;15>wt;++wt){if(ut[wt]>1<<wt)return 0;Ye[wt+1]=Ye[wt]+ut[wt]}for(ft=0;ft<Ne;++ft)wt=ke[ft],0<ke[ft]&&(Bt[Ye[wt]++]=ft);if(Ye[15]==1)return(ke=new he).g=0,ke.value=Bt[0],Ke(ge,Ot,1,Pt,ke),Pt;var Nt,Wt=-1,zt=Pt-1,xr=0,dr=1,Or=1,fr=1<<we;for(ft=0,wt=1,Ne=2;wt<=we;++wt,Ne<<=1){if(dr+=Or<<=1,0>(Or-=ut[wt]))return 0;for(;0<ut[wt];--ut[wt])(ke=new he).g=wt,ke.value=Bt[ft++],Ke(ge,Ot+xr,Ne,fr,ke),xr=Te(xr,wt)}for(wt=we+1,Ne=2;15>=wt;++wt,Ne<<=1){if(dr+=Or<<=1,0>(Or-=ut[wt]))return 0;for(;0<ut[wt];--ut[wt]){if(ke=new he,(xr&zt)!=Wt){for(Ot+=fr,Nt=1<<(Wt=wt)-we;15>Wt&&!(0>=(Nt-=ut[Wt]));)++Wt,Nt<<=1;Pt+=fr=1<<(Nt=Wt-we),ge[ve+(Wt=xr&zt)].g=Nt+we,ge[ve+Wt].value=Ot-ve-Wt}ke.g=wt-we,ke.value=Bt[ft++],Ke(ge,Ot+(xr>>we),Ne,fr,ke),xr=Te(xr,wt)}}return dr!=2*Ye[15]-1?0:Pt}(b,I,O,q,ae,me)}function he(){this.value=this.g=0}function Ie(){this.value=this.g=0}function be(){this.G=h(5,he),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(Hi,Ie)}function ct(b,I,O,q){t(b!=null),t(I!=null),t(2147483648>q),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=I,b.pa=O,b.Jd=I,b.Yc=O+q,b.Zc=4<=q?O+q-4+1:O,Ze(b)}function Xe(b,I){for(var O=0;0<I--;)O|=dt(b,128)<<I;return O}function lt(b,I){var O=Xe(b,I);return pt(b)?-O:O}function Le(b,I,O,q){var ae,me=0;for(t(b!=null),t(I!=null),t(4294967288>q),b.Sb=q,b.Ra=0,b.u=0,b.h=0,4<q&&(q=4),ae=0;ae<q;++ae)me+=I[O+ae]<<8*ae;b.Ra=me,b.bb=q,b.oa=I,b.pa=O}function ze(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<tA-8>>>0,++b.bb,b.u-=8;Pe(b)&&(b.h=1,b.u=0)}function it(b,I){if(t(0<=I),!b.h&&I<=Fo){var O=Be(b)&Fl[I];return b.u+=I,ze(b),O}return b.h=1,b.u=0}function Lt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ne(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Be(b){return b.Ra>>>(b.u&tA-1)>>>0}function Pe(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>tA}function $e(b,I){b.u=I,b.h=Pe(b)}function nt(b){b.u>=rA&&(t(b.u>=rA),ze(b))}function Ze(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function pt(b){return Xe(b,1)}function dt(b,I){var O=b.Ca;0>b.b&&Ze(b);var q=b.b,ae=O*I>>>8,me=(b.I>>>q>ae)+0;for(me?(O-=ae,b.I-=ae+1<<q>>>0):O=ae+1,q=O,ae=0;256<=q;)ae+=8,q>>=8;return q=7^ae+ji[q],b.b-=q,b.Ca=(O<<q)-1,me}function Qt(b,I,O){b[I+0]=O>>24&255,b[I+1]=O>>16&255,b[I+2]=O>>8&255,b[I+3]=O>>0&255}function Mt(b,I){return b[I+0]<<0|b[I+1]<<8}function $t(b,I){return Mt(b,I)|b[I+2]<<16}function jt(b,I){return Mt(b,I)|Mt(b,I+2)<<16}function vr(b,I){var O=1<<I;return t(b!=null),t(0<I),b.X=u(O),b.X==null?0:(b.Mb=32-I,b.Xa=I,1)}function It(b,I){t(b!=null),t(I!=null),t(b.Xa==I.Xa),i(I.X,0,b.X,0,1<<I.Xa)}function Ge(){this.X=[],this.Xa=this.Mb=0}function Cr(b,I,O,q){t(O!=null),t(q!=null);var ae=O[0],me=q[0];return ae==0&&(ae=(b*me+I/2)/I),me==0&&(me=(I*ae+b/2)/b),0>=ae||0>=me?0:(O[0]=ae,q[0]=me,1)}function pr(b,I){return b+(1<<I)-1>>>I}function Kt(b,I){return((4278255360&b)+(4278255360&I)>>>0&4278255360)+((16711935&b)+(16711935&I)>>>0&16711935)>>>0}function ar(b,I){ue[I]=function(O,q,ae,me,ge,ve,we){var ke;for(ke=0;ke<ge;++ke){var Ne=ue[b](ve[we+ke-1],ae,me+ke);ve[we+ke]=Kt(O[q+ke],Ne)}}}function lr(){this.ud=this.hd=this.jd=0}function cr(b,I){return((4278124286&(b^I))>>>1)+(b&I)>>>0}function br(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Nr(b,I){return br(b+(b-I+.5>>1))}function Kr(b,I,O){return Math.abs(I-O)-Math.abs(b-O)}function Lr(b,I,O,q,ae,me,ge){for(q=me[ge-1],O=0;O<ae;++O)me[ge+O]=q=Kt(b[I+O],q)}function Hr(b,I,O,q,ae){var me;for(me=0;me<O;++me){var ge=b[I+me],ve=ge>>8&255,we=16711935&(we=(we=16711935&ge)+((ve<<16)+ve));q[ae+me]=(4278255360&ge)+we>>>0}}function un(b,I){I.jd=b>>0&255,I.hd=b>>8&255,I.ud=b>>16&255}function zr(b,I,O,q,ae,me){var ge;for(ge=0;ge<q;++ge){var ve=I[O+ge],we=ve>>>8,ke=ve,Ne=255&(Ne=(Ne=ve>>>16)+((b.jd<<24>>24)*(we<<24>>24)>>>5));ke=255&(ke=(ke=ke+((b.hd<<24>>24)*(we<<24>>24)>>>5))+((b.ud<<24>>24)*(Ne<<24>>24)>>>5)),ae[me+ge]=(4278255360&ve)+(Ne<<16)+ke}}function Yr(b,I,O,q,ae){ue[I]=function(me,ge,ve,we,ke,Ne,Bt,wt,ft){for(we=Bt;we<wt;++we)for(Bt=0;Bt<ft;++Bt)ke[Ne++]=ae(ve[q(me[ge++])])},ue[b]=function(me,ge,ve,we,ke,Ne,Bt){var wt=8>>me.b,ft=me.Ea,Ot=me.K[0],Pt=me.w;if(8>wt)for(me=(1<<me.b)-1,Pt=(1<<wt)-1;ge<ve;++ge){var ut,Ye=0;for(ut=0;ut<ft;++ut)ut&me||(Ye=q(we[ke++])),Ne[Bt++]=ae(Ot[Ye&Pt]),Ye>>=wt}else ue["VP8LMapColor"+O](we,ke,Ot,Pt,Ne,Bt,ge,ve,ft)}}function ur(b,I,O,q,ae){for(O=I+O;I<O;){var me=b[I++];q[ae++]=me>>16&255,q[ae++]=me>>8&255,q[ae++]=me>>0&255}}function At(b,I,O,q,ae){for(O=I+O;I<O;){var me=b[I++];q[ae++]=me>>16&255,q[ae++]=me>>8&255,q[ae++]=me>>0&255,q[ae++]=me>>24&255}}function le(b,I,O,q,ae){for(O=I+O;I<O;){var me=(ge=b[I++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;q[ae++]=me,q[ae++]=ge}}function fe(b,I,O,q,ae){for(O=I+O;I<O;){var me=(ge=b[I++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;q[ae++]=me,q[ae++]=ge}}function _e(b,I,O,q,ae){for(O=I+O;I<O;){var me=b[I++];q[ae++]=me>>0&255,q[ae++]=me>>8&255,q[ae++]=me>>16&255}}function Qe(b,I,O,q,ae,me){if(me==0)for(O=I+O;I<O;)Qt(q,((me=b[I++])[0]>>24|me[1]>>8&65280|me[2]<<8&16711680|me[3]<<24)>>>0),ae+=32;else i(q,ae,b,I,O)}function et(b,I){ue[I][0]=ue[b+"0"],ue[I][1]=ue[b+"1"],ue[I][2]=ue[b+"2"],ue[I][3]=ue[b+"3"],ue[I][4]=ue[b+"4"],ue[I][5]=ue[b+"5"],ue[I][6]=ue[b+"6"],ue[I][7]=ue[b+"7"],ue[I][8]=ue[b+"8"],ue[I][9]=ue[b+"9"],ue[I][10]=ue[b+"10"],ue[I][11]=ue[b+"11"],ue[I][12]=ue[b+"12"],ue[I][13]=ue[b+"13"],ue[I][14]=ue[b+"0"],ue[I][15]=ue[b+"0"]}function tt(b){return b==Vh||b==Iu||b==Kc||b==WA}function yt(){this.eb=[],this.size=this.A=this.fb=0}function rt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ft(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new yt,this.f.kb=new rt,this.sd=null}function Ct(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function at(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mt(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Me(b,I){var O=b.T,q=I.ba.f.RGBA,ae=q.eb,me=q.fb+b.ka*q.A,ge=Ns[I.ba.S],ve=b.y,we=b.O,ke=b.f,Ne=b.N,Bt=b.ea,wt=b.W,ft=I.cc,Ot=I.dc,Pt=I.Mc,ut=I.Nc,Ye=b.ka,Nt=b.ka+b.T,Wt=b.U,zt=Wt+1>>1;for(Ye==0?ge(ve,we,null,null,ke,Ne,Bt,wt,ke,Ne,Bt,wt,ae,me,null,null,Wt):(ge(I.ec,I.fc,ve,we,ft,Ot,Pt,ut,ke,Ne,Bt,wt,ae,me-q.A,ae,me,Wt),++O);Ye+2<Nt;Ye+=2)ft=ke,Ot=Ne,Pt=Bt,ut=wt,Ne+=b.Rc,wt+=b.Rc,me+=2*q.A,ge(ve,(we+=2*b.fa)-b.fa,ve,we,ft,Ot,Pt,ut,ke,Ne,Bt,wt,ae,me-q.A,ae,me,Wt);return we+=b.fa,b.j+Nt<b.o?(i(I.ec,I.fc,ve,we,Wt),i(I.cc,I.dc,ke,Ne,zt),i(I.Mc,I.Nc,Bt,wt,zt),O--):1&Nt||ge(ve,we,null,null,ke,Ne,Bt,wt,ke,Ne,Bt,wt,ae,me+q.A,null,null,Wt),O}function Rt(b,I,O){var q=b.F,ae=[b.J];if(q!=null){var me=b.U,ge=I.ba.S,ve=ge==Vc||ge==Kc;I=I.ba.f.RGBA;var we=[0],ke=b.ka;we[0]=b.T,b.Kb&&(ke==0?--we[0]:(--ke,ae[0]-=b.width),b.j+b.ka+b.T==b.o&&(we[0]=b.o-b.j-ke));var Ne=I.eb;ke=I.fb+ke*I.A,b=Vn(q,ae[0],b.width,me,we,Ne,ke+(ve?0:3),I.A),t(O==we),b&&tt(ge)&&hi(Ne,ke,ve,me,we,I.A)}return 0}function nr(b){var I=b.ma,O=I.ba.S,q=11>O,ae=O==sn||O==jc||O==Vc||O==aA||O==12||tt(O);if(I.memory=null,I.Ib=null,I.Jb=null,I.Nd=null,!Jl(I.Oa,b,ae?11:12))return 0;if(ae&&tt(O)&&Zt(),b.da)alert("todo:use_scaling");else{if(q){if(I.Ib=mt,b.Kb){if(O=b.U+1>>1,I.memory=u(b.U+2*O),I.memory==null)return 0;I.ec=I.memory,I.fc=0,I.cc=I.ec,I.dc=I.fc+b.U,I.Mc=I.cc,I.Nc=I.dc+O,I.Ib=Me,Zt()}}else alert("todo:EmitYUV");ae&&(I.Jb=Rt,q&&vt())}if(q&&!Uu){for(b=0;256>b;++b)$d[b]=89858*(b-128)+sl>>Xc,$h[b]=-22014*(b-128)+sl,tc[b]=-45773*(b-128),qd[b]=113618*(b-128)+sl>>Xc;for(b=Ma;b<bs;++b)I=76283*(b-16)+sl>>Xc,Qu[b-Ma]=Ys(I,255),Wd[b-Ma]=Ys(I+8>>4,15);Uu=1}return 1}function tr(b){var I=b.ma,O=b.U,q=b.T;return t(!(1&b.ka)),0>=O||0>=q?0:(O=I.Ib(b,I),I.Jb!=null&&I.Jb(b,I,O),I.Dc+=O,1)}function Ar(b){b.ma.memory=null}function qt(b,I,O,q){return it(b,8)!=47?0:(I[0]=it(b,14)+1,O[0]=it(b,14)+1,q[0]=it(b,1),it(b,3)!=0?0:!b.h)}function Jr(b,I){if(4>b)return b+1;var O=b-2>>1;return(2+(1&b)<<O)+it(I,O)+1}function jr(b,I){return 120<I?I-120:1<=(O=((O=Gc[I-1])>>4)*b+(8-(15&O)))?O:1;var O}function Rr(b,I,O){var q=Be(O),ae=b[I+=255&q].g-8;return 0<ae&&($e(O,O.u+8),q=Be(O),I+=b[I].value,I+=q&(1<<ae)-1),$e(O,O.u+b[I].g),b[I].value}function _r(b,I,O){return O.g+=b.g,O.value+=b.value<<I>>>0,t(8>=O.g),b.g}function Ur(b,I,O){var q=b.xc;return t((I=q==0?0:b.vc[b.md*(O>>q)+(I>>q)])<b.Wb),b.Ya[I]}function Pn(b,I,O,q){var ae=b.ab,me=b.c*I,ge=b.C;I=ge+I;var ve=O,we=q;for(q=b.Ta,O=b.Ua;0<ae--;){var ke=b.gc[ae],Ne=ge,Bt=I,wt=ve,ft=we,Ot=(we=q,ve=O,ke.Ea);switch(t(Ne<Bt),t(Bt<=ke.nc),ke.hc){case 2:Su(wt,ft,(Bt-Ne)*Ot,we,ve);break;case 0:var Pt=Ne,ut=Bt,Ye=we,Nt=ve,Wt=(fr=ke).Ea;Pt==0&&(jh(wt,ft,null,null,1,Ye,Nt),Lr(wt,ft+1,0,0,Wt-1,Ye,Nt+1),ft+=Wt,Nt+=Wt,++Pt);for(var zt=1<<fr.b,xr=zt-1,dr=pr(Wt,fr.b),Or=fr.K,fr=fr.w+(Pt>>fr.b)*dr;Pt<ut;){var Cn=Or,Ln=fr,pn=1;for(Il(wt,ft,Ye,Nt-Wt,1,Ye,Nt);pn<Wt;){var vn=(pn&~xr)+zt;vn>Wt&&(vn=Wt),(0,Fa[Cn[Ln++]>>8&15])(wt,ft+ +pn,Ye,Nt+pn-Wt,vn-pn,Ye,Nt+pn),pn=vn}ft+=Wt,Nt+=Wt,++Pt&xr||(fr+=dr)}Bt!=ke.nc&&i(we,ve-Ot,we,ve+(Bt-Ne-1)*Ot,Ot);break;case 1:for(Ot=wt,ut=ft,Wt=(wt=ke.Ea)-(Nt=wt&~(Ye=(ft=1<<ke.b)-1)),Pt=pr(wt,ke.b),zt=ke.K,ke=ke.w+(Ne>>ke.b)*Pt;Ne<Bt;){for(xr=zt,dr=ke,Or=new lr,fr=ut+Nt,Cn=ut+wt;ut<fr;)un(xr[dr++],Or),hn(Or,Ot,ut,ft,we,ve),ut+=ft,ve+=ft;ut<Cn&&(un(xr[dr++],Or),hn(Or,Ot,ut,Wt,we,ve),ut+=Wt,ve+=Wt),++Ne&Ye||(ke+=Pt)}break;case 3:if(wt==we&&ft==ve&&0<ke.b){for(ut=we,wt=Ot=ve+(Bt-Ne)*Ot-(Nt=(Bt-Ne)*pr(ke.Ea,ke.b)),ft=we,Ye=ve,Pt=[],Nt=(Wt=Nt)-1;0<=Nt;--Nt)Pt[Nt]=ft[Ye+Nt];for(Nt=Wt-1;0<=Nt;--Nt)ut[wt+Nt]=Pt[Nt];fo(ke,Ne,Bt,we,Ot,we,ve)}else fo(ke,Ne,Bt,wt,ft,we,ve)}ve=q,we=O}we!=O&&i(q,O,ve,we,me)}function Yt(b,I){var O=b.V,q=b.Ba+b.c*b.C,ae=I-b.C;if(t(I<=b.l.o),t(16>=ae),0<ae){var me=b.l,ge=b.Ta,ve=b.Ua,we=me.width;if(Pn(b,ae,O,q),ae=ve=[ve],t((O=b.C)<(q=I)),t(me.v<me.va),q>me.o&&(q=me.o),O<me.j){var ke=me.j-O;O=me.j,ae[0]+=ke*we}if(O>=q?O=0:(ae[0]+=4*me.v,me.ka=O-me.j,me.U=me.va-me.v,me.T=q-O,O=1),O){if(ve=ve[0],11>(O=b.ca).S){var Ne=O.f.RGBA,Bt=(q=O.S,ae=me.U,me=me.T,ke=Ne.eb,Ne.A),wt=me;for(Ne=Ne.fb+b.Ma*Ne.A;0<wt--;){var ft=ge,Ot=ve,Pt=ae,ut=ke,Ye=Ne;switch(q){case qA:As(ft,Ot,Pt,ut,Ye);break;case sn:ui(ft,Ot,Pt,ut,Ye);break;case Vh:ui(ft,Ot,Pt,ut,Ye),hi(ut,Ye,0,Pt,1,0);break;case Ll:na(ft,Ot,Pt,ut,Ye);break;case jc:Qe(ft,Ot,Pt,ut,Ye,1);break;case Iu:Qe(ft,Ot,Pt,ut,Ye,1),hi(ut,Ye,0,Pt,1,0);break;case Vc:Qe(ft,Ot,Pt,ut,Ye,0);break;case Kc:Qe(ft,Ot,Pt,ut,Ye,0),hi(ut,Ye,1,Pt,1,0);break;case aA:Ia(ft,Ot,Pt,ut,Ye);break;case WA:Ia(ft,Ot,Pt,ut,Ye),jn(ut,Ye,Pt,1,0);break;case Hd:ra(ft,Ot,Pt,ut,Ye);break;default:t(0)}ve+=we,Ne+=Bt}b.Ma+=me}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=O.height)}}b.C=I,t(b.C<=b.i)}function Wn(b){var I;if(0<b.ua)return 0;for(I=0;I<b.Wb;++I){var O=b.Ya[I].G,q=b.Ya[I].H;if(0<O[1][q[1]+0].g||0<O[2][q[2]+0].g||0<O[3][q[3]+0].g)return 0}return 1}function Bn(b,I,O,q,ae,me){if(b.Z!=0){var ge=b.qd,ve=b.rd;for(t(Vi[b.Z]!=null);I<O;++I)Vi[b.Z](ge,ve,q,ae,q,ae,me),ge=q,ve=ae,ae+=me;b.qd=ge,b.rd=ve}}function Xi(b,I){var O=b.l.ma,q=O.Z==0||O.Z==1?b.l.j:b.C;if(q=b.C<q?q:b.C,t(I<=b.l.o),I>q){var ae=b.l.width,me=O.ca,ge=O.tb+ae*q,ve=b.V,we=b.Ba+b.c*q,ke=b.gc;t(b.ab==1),t(ke[0].hc==3),zc(ke[0],q,I,ve,we,me,ge),Bn(O,q,I,me,ge,ae)}b.C=b.Ma=I}function as(b,I,O,q,ae,me,ge){var ve=b.$/q,we=b.$%q,ke=b.m,Ne=b.s,Bt=O+b.$,wt=Bt;ae=O+q*ae;var ft=O+q*me,Ot=280+Ne.ua,Pt=b.Pb?ve:16777216,ut=0<Ne.ua?Ne.Wa:null,Ye=Ne.wc,Nt=Bt<ft?Ur(Ne,we,ve):null;t(b.C<me),t(ft<=ae);var Wt=!1;e:for(;;){for(;Wt||Bt<ft;){var zt=0;if(ve>=Pt){var xr=Bt-O;t((Pt=b).Pb),Pt.wd=Pt.m,Pt.xd=xr,0<Pt.s.ua&&It(Pt.s.Wa,Pt.s.vb),Pt=ve+YA}if(we&Ye||(Nt=Ur(Ne,we,ve)),t(Nt!=null),Nt.Qb&&(I[Bt]=Nt.qb,Wt=!0),!Wt)if(nt(ke),Nt.jc){zt=ke,xr=I;var dr=Bt,Or=Nt.pd[Be(zt)&Hi-1];t(Nt.jc),256>Or.g?($e(zt,zt.u+Or.g),xr[dr]=Or.value,zt=0):($e(zt,zt.u+Or.g-256),t(256<=Or.value),zt=Or.value),zt==0&&(Wt=!0)}else zt=Rr(Nt.G[0],Nt.H[0],ke);if(ke.h)break;if(Wt||256>zt){if(!Wt)if(Nt.nd)I[Bt]=(Nt.qb|zt<<8)>>>0;else{if(nt(ke),Wt=Rr(Nt.G[1],Nt.H[1],ke),nt(ke),xr=Rr(Nt.G[2],Nt.H[2],ke),dr=Rr(Nt.G[3],Nt.H[3],ke),ke.h)break;I[Bt]=(dr<<24|Wt<<16|zt<<8|xr)>>>0}if(Wt=!1,++Bt,++we>=q&&(we=0,++ve,ge!=null&&ve<=me&&!(ve%16)&&ge(b,ve),ut!=null))for(;wt<Bt;)zt=I[wt++],ut.X[(506832829*zt&4294967295)>>>ut.Mb]=zt}else if(280>zt){if(zt=Jr(zt-256,ke),xr=Rr(Nt.G[4],Nt.H[4],ke),nt(ke),xr=jr(q,xr=Jr(xr,ke)),ke.h)break;if(Bt-O<xr||ae-Bt<zt)break e;for(dr=0;dr<zt;++dr)I[Bt+dr]=I[Bt+dr-xr];for(Bt+=zt,we+=zt;we>=q;)we-=q,++ve,ge!=null&&ve<=me&&!(ve%16)&&ge(b,ve);if(t(Bt<=ae),we&Ye&&(Nt=Ur(Ne,we,ve)),ut!=null)for(;wt<Bt;)zt=I[wt++],ut.X[(506832829*zt&4294967295)>>>ut.Mb]=zt}else{if(!(zt<Ot))break e;for(Wt=zt-280,t(ut!=null);wt<Bt;)zt=I[wt++],ut.X[(506832829*zt&4294967295)>>>ut.Mb]=zt;zt=Bt,t(!(Wt>>>(xr=ut).Xa)),I[zt]=xr.X[Wt],Wt=!0}Wt||t(ke.h==Pe(ke))}if(b.Pb&&ke.h&&Bt<ae)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&It(b.s.vb,b.s.Wa);else{if(ke.h)break e;ge!=null&&ge(b,ve>me?me:ve),b.a=0,b.$=Bt-O}return 1}return b.a=3,0}function Jt(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var I=b.Wa;I!=null&&(I.X=null),b.vb=null,t(b!=null)}function Dr(){var b=new El;return b==null?null:(b.a=0,b.xb=il,et("Predictor","VP8LPredictors"),et("Predictor","VP8LPredictors_C"),et("PredictorAdd","VP8LPredictorsAdd"),et("PredictorAdd","VP8LPredictorsAdd_C"),Su=Hr,hn=zr,As=ur,ui=At,Ia=le,ra=fe,na=_e,ue.VP8LMapColor32b=nA,ue.VP8LMapColor8b=Hc,b)}function Vr(b,I,O,q,ae){var me=1,ge=[b],ve=[I],we=q.m,ke=q.s,Ne=null,Bt=0;e:for(;;){if(O)for(;me&&it(we,1);){var wt=ge,ft=ve,Ot=q,Pt=1,ut=Ot.m,Ye=Ot.gc[Ot.ab],Nt=it(ut,2);if(Ot.Oc&1<<Nt)me=0;else{switch(Ot.Oc|=1<<Nt,Ye.hc=Nt,Ye.Ea=wt[0],Ye.nc=ft[0],Ye.K=[null],++Ot.ab,t(4>=Ot.ab),Nt){case 0:case 1:Ye.b=it(ut,3)+2,Pt=Vr(pr(Ye.Ea,Ye.b),pr(Ye.nc,Ye.b),0,Ot,Ye.K),Ye.K=Ye.K[0];break;case 3:var Wt,zt=it(ut,8)+1,xr=16<zt?0:4<zt?1:2<zt?2:3;if(wt[0]=pr(Ye.Ea,xr),Ye.b=xr,Wt=Pt=Vr(zt,1,0,Ot,Ye.K)){var dr,Or=zt,fr=Ye,Cn=1<<(8>>fr.b),Ln=u(Cn);if(Ln==null)Wt=0;else{var pn=fr.K[0],vn=fr.w;for(Ln[0]=fr.K[0][0],dr=1;dr<1*Or;++dr)Ln[dr]=Kt(pn[vn+dr],Ln[dr-1]);for(;dr<4*Cn;++dr)Ln[dr]=0;fr.K[0]=null,fr.K[0]=Ln,Wt=1}}Pt=Wt;break;case 2:break;default:t(0)}me=Pt}}if(ge=ge[0],ve=ve[0],me&&it(we,1)&&!(me=1<=(Bt=it(we,4))&&11>=Bt)){q.a=3;break e}var Qn;if(Qn=me)t:{var wn,Er,ni,us=q,yi=ge,Ds=ve,Mn=Bt,po=O,vi=us.m,Ei=us.s,sr=[null],wr=1,Os=0,ko=XA[Mn];r:for(;;){if(po&&it(vi,1)){var _i=it(vi,3)+2,pi=pr(yi,_i),Ml=pr(Ds,_i),wi=pi*Ml;if(!Vr(pi,Ml,0,us,sr))break r;for(sr=sr[0],Ei.xc=_i,wn=0;wn<wi;++wn){var ol=sr[wn]>>8&65535;sr[wn]=ol,ol>=wr&&(wr=ol+1)}}if(vi.h)break r;for(Er=0;5>Er;++Er){var On=ZA[Er];!Er&&0<Mn&&(On+=1<<Mn),Os<On&&(Os=On)}var Gn=h(wr*ko,he),ii=wr,qh=h(ii,be);if(qh==null)var la=null;else t(65536>=ii),la=qh;var Uo=u(Os);if(la==null||Uo==null||Gn==null){us.a=1;break r}var nc=Gn;for(wn=ni=0;wn<wr;++wn){var ro=la[wn],Qo=ro.G,ka=ro.H,Ru=0,uA=1,Nu=0;for(Er=0;5>Er;++Er){On=ZA[Er],Qo[Er]=nc,ka[Er]=ni,!Er&&0<Mn&&(On+=1<<Mn);i:{var y,n=On,a=us,f=Uo,p=nc,v=ni,B=0,T=a.m,M=it(T,1);if(A(f,0,0,n),M){var z=it(T,1)+1,V=it(T,1),W=it(T,V==0?1:8);f[W]=1,z==2&&(f[W=it(T,8)]=1);var $=1}else{var X=u(19),ce=it(T,4)+4;if(19<ce){a.a=3;var Ee=0;break i}for(y=0;y<ce;++y)X[Kh[y]]=it(T,3);var Se=void 0,Fe=void 0,Re=a,je=X,De=n,We=f,Je=0,Oe=Re.m,ht=8,St=h(128,he);n:for(;oe(St,0,7,je,19);){if(it(Oe,1)){var gt=2+2*it(Oe,3);if((Se=2+it(Oe,gt))>De)break n}else Se=De;for(Fe=0;Fe<De&&Se--;){nt(Oe);var _t=St[0+(127&Be(Oe))];$e(Oe,Oe.u+_t.g);var xt=_t.value;if(16>xt)We[Fe++]=xt,xt!=0&&(ht=xt);else{var ir=xt==16,rr=xt-16,Dt=Pu[rr],mr=it(Oe,Tu[rr])+Dt;if(Fe+mr>De)break n;for(var rn=ir?ht:0;0<mr--;)We[Fe++]=rn}}Je=1;break n}Je||(Re.a=3),$=Je}($=$&&!T.h)&&(B=oe(p,v,8,f,n)),$&&B!=0?Ee=B:(a.a=3,Ee=0)}if(Ee==0)break r;if(uA&&Lu[Er]==1&&(uA=nc[ni].g==0),Ru+=nc[ni].g,ni+=Ee,3>=Er){var mn,$n=Uo[0];for(mn=1;mn<On;++mn)Uo[mn]>$n&&($n=Uo[mn]);Nu+=$n}}if(ro.nd=uA,ro.Qb=0,uA&&(ro.qb=(Qo[3][ka[3]+0].value<<24|Qo[1][ka[1]+0].value<<16|Qo[2][ka[2]+0].value)>>>0,Ru==0&&256>Qo[0][ka[0]+0].value&&(ro.Qb=1,ro.qb+=Qo[0][ka[0]+0].value<<8)),ro.jc=!ro.Qb&&6>Nu,ro.jc){var En,Fn=ro;for(En=0;En<Hi;++En){var xn=En,_n=Fn.pd[xn],Tn=Fn.G[0][Fn.H[0]+xn];256<=Tn.value?(_n.g=Tn.g+256,_n.value=Tn.value):(_n.g=0,_n.value=0,xn>>=_r(Tn,8,_n),xn>>=_r(Fn.G[1][Fn.H[1]+xn],16,_n),xn>>=_r(Fn.G[2][Fn.H[2]+xn],0,_n),_r(Fn.G[3][Fn.H[3]+xn],24,_n))}}}Ei.vc=sr,Ei.Wb=wr,Ei.Ya=la,Ei.yc=Gn,Qn=1;break t}Qn=0}if(!(me=Qn)){q.a=3;break e}if(0<Bt){if(ke.ua=1<<Bt,!vr(ke.Wa,Bt)){q.a=1,me=0;break e}}else ke.ua=0;var Ki=q,fn=ge,rs=ve,Gi=Ki.s,Ua=Gi.xc;if(Ki.c=fn,Ki.i=rs,Gi.md=pr(fn,Ua),Gi.wc=Ua==0?-1:(1<<Ua)-1,O){q.xb=fi;break e}if((Ne=u(ge*ve))==null){q.a=1,me=0;break e}me=(me=as(q,Ne,0,ge,ve,ve,null))&&!we.h;break e}return me?(ae!=null?ae[0]=Ne:(t(Ne==null),t(O)),q.$=0,O||Jt(ke)):Jt(ke),me}function Ni(b,I){var O=b.c*b.i,q=O+I+16*I;return t(b.c<=I),b.V=u(q),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+O+I,1)}function Ga(b,I){var O=b.C,q=I-O,ae=b.V,me=b.Ba+b.c*O;for(t(I<=b.l.o);0<q;){var ge=16<q?16:q,ve=b.l.ma,we=b.l.width,ke=we*ge,Ne=ve.ca,Bt=ve.tb+we*O,wt=b.Ta,ft=b.Ua;Pn(b,ge,ae,me),di(wt,ft,Ne,Bt,ke),Bn(ve,O,O+ge,Ne,Bt,we),q-=ge,ae+=ge*b.c,O+=ge}t(O==I),b.C=b.Ma=I}function Ls(){this.ub=this.yd=this.td=this.Rb=0}function $r(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qs(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function va(){this.Yb=function(){var b=[];return function I(O,q,ae){for(var me=ae[q],ge=0;ge<me&&(O.push(ae.length>q+1?[]:0),!(ae.length<q+1));ge++)I(O[ge],q+1,ae)}(b,0,[3,11]),b}()}function Ai(){this.jb=u(3),this.Wc=o([4,8],va),this.Xc=o([4,17],va)}function $l(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function _a(){this.ld=this.La=this.dd=this.tc=0}function Bo(){this.Na=this.la=0}function ql(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ls(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Kn(){this.uc=this.M=this.Nb=0,this.wa=Array(new _a),this.Y=0,this.ya=Array(new ls),this.aa=0,this.l=new $a}function Tc(){this.y=u(16),this.f=u(8),this.ea=u(8)}function Wl(){this.cb=this.a=0,this.sc="",this.m=new Lt,this.Od=new Ls,this.Kc=new $r,this.ed=new $l,this.Qa=new qs,this.Ic=this.$c=this.Aa=0,this.D=new Kn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,Lt),this.ia=0,this.pb=h(4,ql),this.Pa=new Ai,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Tc),this.Hd=0,this.rb=Array(new Bo),this.sb=0,this.wa=Array(new _a),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ls),this.L=this.aa=0,this.gd=o([4,2],_a),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function $a(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function qa(){var b=new Wl;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Po||(Po=Mc)),b}function Dn(b,I,O){return b.a==0&&(b.a=I,b.sc=O,b.cb=0),0}function Pc(b,I,O){return 3<=O&&b[I+0]==157&&b[I+1]==1&&b[I+2]==42}function Lc(b,I){if(b==null)return 0;if(b.a=0,b.sc="OK",I==null)return Dn(b,2,"null VP8Io passed to VP8GetHeaders()");var O=I.data,q=I.w,ae=I.ha;if(4>ae)return Dn(b,7,"Truncated header.");var me=O[q+0]|O[q+1]<<8|O[q+2]<<16,ge=b.Od;if(ge.Rb=!(1&me),ge.td=me>>1&7,ge.yd=me>>4&1,ge.ub=me>>5,3<ge.td)return Dn(b,3,"Incorrect keyframe parameters.");if(!ge.yd)return Dn(b,4,"Frame not displayable.");q+=3,ae-=3;var ve=b.Kc;if(ge.Rb){if(7>ae)return Dn(b,7,"cannot parse picture header");if(!Pc(O,q,ae))return Dn(b,3,"Bad code word");ve.c=16383&(O[q+4]<<8|O[q+3]),ve.Td=O[q+4]>>6,ve.i=16383&(O[q+6]<<8|O[q+5]),ve.Ud=O[q+6]>>6,q+=7,ae-=7,b.za=ve.c+15>>4,b.Ub=ve.i+15>>4,I.width=ve.c,I.height=ve.i,I.Da=0,I.j=0,I.v=0,I.va=I.width,I.o=I.height,I.da=0,I.ib=I.width,I.hb=I.height,I.U=I.width,I.T=I.height,A((me=b.Pa).jb,0,255,me.jb.length),t((me=b.Qa)!=null),me.Cb=0,me.Bb=0,me.Fb=1,A(me.Zb,0,0,me.Zb.length),A(me.Lb,0,0,me.Lb)}if(ge.ub>ae)return Dn(b,7,"bad partition length");ct(me=b.m,O,q,ge.ub),q+=ge.ub,ae-=ge.ub,ge.Rb&&(ve.Ld=pt(me),ve.Kd=pt(me)),ve=b.Qa;var we,ke=b.Pa;if(t(me!=null),t(ve!=null),ve.Cb=pt(me),ve.Cb){if(ve.Bb=pt(me),pt(me)){for(ve.Fb=pt(me),we=0;4>we;++we)ve.Zb[we]=pt(me)?lt(me,7):0;for(we=0;4>we;++we)ve.Lb[we]=pt(me)?lt(me,6):0}if(ve.Bb)for(we=0;3>we;++we)ke.jb[we]=pt(me)?Xe(me,8):255}else ve.Bb=0;if(me.Ka)return Dn(b,3,"cannot parse segment header");if((ve=b.ed).zd=pt(me),ve.Tb=Xe(me,6),ve.wb=Xe(me,3),ve.Pc=pt(me),ve.Pc&&pt(me)){for(ke=0;4>ke;++ke)pt(me)&&(ve.vd[ke]=lt(me,6));for(ke=0;4>ke;++ke)pt(me)&&(ve.od[ke]=lt(me,6))}if(b.L=ve.Tb==0?0:ve.zd?1:2,me.Ka)return Dn(b,3,"cannot parse filter header");var Ne=ae;if(ae=we=q,q=we+Ne,ve=Ne,b.Xb=(1<<Xe(b.m,2))-1,Ne<3*(ke=b.Xb))O=7;else{for(we+=3*ke,ve-=3*ke,Ne=0;Ne<ke;++Ne){var Bt=O[ae+0]|O[ae+1]<<8|O[ae+2]<<16;Bt>ve&&(Bt=ve),ct(b.Jc[+Ne],O,we,Bt),we+=Bt,ve-=Bt,ae+=3}ct(b.Jc[+ke],O,we,ve),O=we<q?0:5}if(O!=0)return Dn(b,O,"cannot parse partitions");for(O=Xe(we=b.m,7),ae=pt(we)?lt(we,4):0,q=pt(we)?lt(we,4):0,ve=pt(we)?lt(we,4):0,ke=pt(we)?lt(we,4):0,we=pt(we)?lt(we,4):0,Ne=b.Qa,Bt=0;4>Bt;++Bt){if(Ne.Cb){var wt=Ne.Zb[Bt];Ne.Fb||(wt+=O)}else{if(0<Bt){b.pb[Bt]=b.pb[0];continue}wt=O}var ft=b.pb[Bt];ft.Sc[0]=lA[Ys(wt+ae,127)],ft.Sc[1]=$c[Ys(wt+0,127)],ft.Eb[0]=2*lA[Ys(wt+q,127)],ft.Eb[1]=101581*$c[Ys(wt+ve,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=lA[Ys(wt+ke,117)],ft.Qc[1]=$c[Ys(wt+we,127)],ft.lc=wt+we}if(!ge.Rb)return Dn(b,4,"Not a key frame.");for(pt(me),ge=b.Pa,O=0;4>O;++O){for(ae=0;8>ae;++ae)for(q=0;3>q;++q)for(ve=0;11>ve;++ve)ke=dt(me,Kd[O][ae][q][ve])?Xe(me,8):Gh[O][ae][q][ve],ge.Wc[O][ae].Yb[q][ve]=ke;for(ae=0;17>ae;++ae)ge.Xc[O][ae]=ge.Wc[O][Wc[ae]]}return b.kc=pt(me),b.kc&&(b.Bd=Xe(me,8)),b.cb=1}function Mc(b,I,O,q,ae,me,ge){var ve=I[ae].Yb[O];for(O=0;16>ae;++ae){if(!dt(b,ve[O+0]))return ae;for(;!dt(b,ve[O+1]);)if(ve=I[++ae].Yb[0],O=0,ae==16)return 16;var we=I[ae+1].Yb;if(dt(b,ve[O+2])){var ke=b,Ne=0;if(dt(ke,(wt=ve)[(Bt=O)+3]))if(dt(ke,wt[Bt+6])){for(ve=0,Bt=2*(Ne=dt(ke,wt[Bt+8]))+(wt=dt(ke,wt[Bt+9+Ne])),Ne=0,wt=Mp[Bt];wt[ve];++ve)Ne+=Ne+dt(ke,wt[ve]);Ne+=3+(8<<Bt)}else dt(ke,wt[Bt+7])?(Ne=7+2*dt(ke,165),Ne+=dt(ke,145)):Ne=5+dt(ke,159);else Ne=dt(ke,wt[Bt+4])?3+dt(ke,wt[Bt+5]):2;ve=we[2]}else Ne=1,ve=we[1];we=ge+jd[ae],0>(ke=b).b&&Ze(ke);var Bt,wt=ke.b,ft=(Bt=ke.Ca>>1)-(ke.I>>wt)>>31;--ke.b,ke.Ca+=ft,ke.Ca|=1,ke.I-=(Bt+1&ft)<<wt,me[we]=((Ne^ft)-ft)*q[(0<ae)+0]}return 16}function wa(b){var I=b.rb[b.sb-1];I.la=0,I.Na=0,A(b.zc,0,0,b.zc.length),b.ja=0}function bu(b,I){if(b==null)return 0;if(I==null)return Dn(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!Lc(b,I))return 0;if(t(b.cb),I.ac==null||I.ac(I)){I.ob&&(b.L=0);var O=cA[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=I.v-O>>4,b.zb=I.j-O>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=I.o+15+O>>4,b.Hb=I.va+15+O>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var q=b.ed;for(O=0;4>O;++O){var ae;if(b.Qa.Cb){var me=b.Qa.Lb[O];b.Qa.Fb||(me+=q.Tb)}else me=q.Tb;for(ae=0;1>=ae;++ae){var ge=b.gd[O][ae],ve=me;if(q.Pc&&(ve+=q.vd[0],ae&&(ve+=q.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var we=ve;0<q.wb&&(we=4<q.wb?we>>2:we>>1)>9-q.wb&&(we=9-q.wb),1>we&&(we=1),ge.dd=we,ge.tc=2*ve+we,ge.ld=40<=ve?2:15<=ve?1:0}else ge.tc=0;ge.La=ae}}}O=0}else Dn(b,6,"Frame setup failed"),O=b.a;if(O=O==0){if(O){b.$c=0,0<b.Aa||(b.Ic=Lo);e:{O=b.Ic,q=4*(we=b.za);var ke=32*we,Ne=we+1,Bt=0<b.L?we*(0<b.Aa?2:1):0,wt=(b.Aa==2?2:1)*we;if((ge=q+832+(ae=3*(16*O+cA[b.L])/2*ke)+(me=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=ge)O=0;else{if(ge>b.Vb){if(b.Vb=0,b.Ec=u(ge),b.Fc=0,b.Ec==null){O=Dn(b,1,"no memory during frame initialization.");break e}b.Vb=ge}ge=b.Ec,ve=b.Fc,b.Ac=ge,b.Bc=ve,ve+=q,b.Gd=h(ke,Tc),b.Hd=0,b.rb=h(Ne+1,Bo),b.sb=1,b.wa=Bt?h(Bt,_a):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=we),t(!0),b.oc=ge,b.pc=ve,ve+=832,b.ya=h(wt,ls),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=we),b.R=16*we,b.B=8*we,we=(ke=cA[b.L])*b.R,ke=ke/2*b.B,b.sa=ge,b.ta=ve+we,b.qa=b.sa,b.ra=b.ta+16*O*b.R+ke,b.Ha=b.qa,b.Ia=b.ra+8*O*b.B+ke,b.$c=0,ve+=ae,b.mb=me?ge:null,b.nb=me?ve:null,t(ve+me<=b.Fc+b.Vb),wa(b),A(b.Ac,b.Bc,0,q),O=1}}if(O){if(I.ka=0,I.y=b.sa,I.O=b.ta,I.f=b.qa,I.N=b.ra,I.ea=b.Ha,I.Vd=b.Ia,I.fa=b.R,I.Rc=b.B,I.F=null,I.J=0,!rl){for(O=-255;255>=O;++O)Xn[255+O]=0>O?-O:O;for(O=-1020;1020>=O;++O)To[1020+O]=-128>O?-128:127<O?127:O;for(O=-112;112>=O;++O)Pl[112+O]=-16>O?-16:15<O?15:O;for(O=-255;510>=O;++O)Pa[255+O]=0>O?0:255<O?255:O;rl=1}iA=HA,ia=kc,sA=zA,Rs=Bu,Io=Zl,Hn=Wa,GA=Xa,Eu=So,$A=Sl,oA=Ca,Tl=gi,sa=Ba,Ta=Nc,Ja=ta,el=Rc,Js=Xs,tl=uo,cs=ho,to[0]=kn,to[1]=an,to[2]=Uc,to[3]=Yi,to[4]=Di,to[5]=Un,to[6]=Ci,to[7]=Cl,to[8]=ws,to[9]=An,oa[0]=ks,oa[1]=ea,oa[2]=Ms,oa[3]=xl,oa[4]=ei,oa[5]=ln,oa[6]=Bl,La[0]=Tr,La[1]=Jo,La[2]=Gr,La[3]=Wr,La[4]=Si,La[5]=Za,La[6]=ba,O=1}else O=0}O&&(O=function(ft,Ot){for(ft.M=0;ft.M<ft.Va;++ft.M){var Pt,ut=ft.Jc[ft.M&ft.Xb],Ye=ft.m,Nt=ft;for(Pt=0;Pt<Nt.za;++Pt){var Wt=Ye,zt=Nt,xr=zt.Ac,dr=zt.Bc+4*Pt,Or=zt.zc,fr=zt.ya[zt.aa+Pt];if(zt.Qa.Bb?fr.$b=dt(Wt,zt.Pa.jb[0])?2+dt(Wt,zt.Pa.jb[2]):dt(Wt,zt.Pa.jb[1]):fr.$b=0,zt.kc&&(fr.Ad=dt(Wt,zt.Bd)),fr.Za=!dt(Wt,145)+0,fr.Za){var Cn=fr.Ob,Ln=0;for(zt=0;4>zt;++zt){var pn,vn=Or[0+zt];for(pn=0;4>pn;++pn){vn=Vd[xr[dr+pn]][vn];for(var Qn=qc[dt(Wt,vn[0])];0<Qn;)Qn=qc[2*Qn+dt(Wt,vn[Qn])];vn=-Qn,xr[dr+pn]=vn}i(Cn,Ln,xr,dr,4),Ln+=4,Or[0+zt]=vn}}else vn=dt(Wt,156)?dt(Wt,128)?1:3:dt(Wt,163)?2:0,fr.Ob[0]=vn,A(xr,dr,vn,4),A(Or,0,vn,4);fr.Dd=dt(Wt,142)?dt(Wt,114)?dt(Wt,183)?1:3:2:0}if(Nt.m.Ka)return Dn(ft,7,"Premature end-of-partition0 encountered.");for(;ft.ja<ft.za;++ft.ja){if(Nt=ut,Wt=(Ye=ft).rb[Ye.sb-1],xr=Ye.rb[Ye.sb+Ye.ja],Pt=Ye.ya[Ye.aa+Ye.ja],dr=Ye.kc?Pt.Ad:0)Wt.la=xr.la=0,Pt.Za||(Wt.Na=xr.Na=0),Pt.Hc=0,Pt.Gc=0,Pt.ia=0;else{var wn,Er;if(Wt=xr,xr=Nt,dr=Ye.Pa.Xc,Or=Ye.ya[Ye.aa+Ye.ja],fr=Ye.pb[Or.$b],zt=Or.ad,Cn=0,Ln=Ye.rb[Ye.sb-1],vn=pn=0,A(zt,Cn,0,384),Or.Za)var ni=0,us=dr[3];else{Qn=u(16);var yi=Wt.Na+Ln.Na;if(yi=Po(xr,dr[1],yi,fr.Eb,0,Qn,0),Wt.Na=Ln.Na=(0<yi)+0,1<yi)iA(Qn,0,zt,Cn);else{var Ds=Qn[0]+3>>3;for(Qn=0;256>Qn;Qn+=16)zt[Cn+Qn]=Ds}ni=1,us=dr[0]}var Mn=15&Wt.la,po=15&Ln.la;for(Qn=0;4>Qn;++Qn){var vi=1&po;for(Ds=Er=0;4>Ds;++Ds)Mn=Mn>>1|(vi=(yi=Po(xr,us,yi=vi+(1&Mn),fr.Sc,ni,zt,Cn))>ni)<<7,Er=Er<<2|(3<yi?3:1<yi?2:zt[Cn+0]!=0),Cn+=16;Mn>>=4,po=po>>1|vi<<7,pn=(pn<<8|Er)>>>0}for(us=Mn,ni=po>>4,wn=0;4>wn;wn+=2){for(Er=0,Mn=Wt.la>>4+wn,po=Ln.la>>4+wn,Qn=0;2>Qn;++Qn){for(vi=1&po,Ds=0;2>Ds;++Ds)yi=vi+(1&Mn),Mn=Mn>>1|(vi=0<(yi=Po(xr,dr[2],yi,fr.Qc,0,zt,Cn)))<<3,Er=Er<<2|(3<yi?3:1<yi?2:zt[Cn+0]!=0),Cn+=16;Mn>>=2,po=po>>1|vi<<5}vn|=Er<<4*wn,us|=Mn<<4<<wn,ni|=(240&po)<<wn}Wt.la=us,Ln.la=ni,Or.Hc=pn,Or.Gc=vn,Or.ia=43690&vn?0:fr.ia,dr=!(pn|vn)}if(0<Ye.L&&(Ye.wa[Ye.Y+Ye.ja]=Ye.gd[Pt.$b][Pt.Za],Ye.wa[Ye.Y+Ye.ja].La|=!dr),Nt.Ka)return Dn(ft,7,"Premature end-of-file encountered.")}if(wa(ft),Ye=Ot,Nt=1,Pt=(ut=ft).D,Wt=0<ut.L&&ut.M>=ut.zb&&ut.M<=ut.Va,ut.Aa==0)e:{if(Pt.M=ut.M,Pt.uc=Wt,Oc(ut,Pt),Nt=1,Pt=(Er=ut.D).Nb,Wt=(vn=cA[ut.L])*ut.R,xr=vn/2*ut.B,Qn=16*Pt*ut.R,Ds=8*Pt*ut.B,dr=ut.sa,Or=ut.ta-Wt+Qn,fr=ut.qa,zt=ut.ra-xr+Ds,Cn=ut.Ha,Ln=ut.Ia-xr+Ds,po=(Mn=Er.M)==0,pn=Mn>=ut.Va-1,ut.Aa==2&&Oc(ut,Er),Er.uc)for(vi=(yi=ut).D.M,t(yi.D.uc),Er=yi.yb;Er<yi.Hb;++Er){ni=Er,us=vi;var Ei=(sr=(On=yi).D).Nb;wn=On.R;var sr=sr.wa[sr.Y+ni],wr=On.sa,Os=On.ta+16*Ei*wn+16*ni,ko=sr.dd,_i=sr.tc;if(_i!=0)if(t(3<=_i),On.L==1)0<ni&&Js(wr,Os,wn,_i+4),sr.La&&cs(wr,Os,wn,_i),0<us&&el(wr,Os,wn,_i+4),sr.La&&tl(wr,Os,wn,_i);else{var pi=On.B,Ml=On.qa,wi=On.ra+8*Ei*pi+8*ni,ol=On.Ha,On=On.Ia+8*Ei*pi+8*ni;Ei=sr.ld,0<ni&&(Eu(wr,Os,wn,_i+4,ko,Ei),oA(Ml,wi,ol,On,pi,_i+4,ko,Ei)),sr.La&&(sa(wr,Os,wn,_i,ko,Ei),Ja(Ml,wi,ol,On,pi,_i,ko,Ei)),0<us&&(GA(wr,Os,wn,_i+4,ko,Ei),$A(Ml,wi,ol,On,pi,_i+4,ko,Ei)),sr.La&&(Tl(wr,Os,wn,_i,ko,Ei),Ta(Ml,wi,ol,On,pi,_i,ko,Ei))}}if(ut.ia&&alert("todo:DitherRow"),Ye.put!=null){if(Er=16*Mn,Mn=16*(Mn+1),po?(Ye.y=ut.sa,Ye.O=ut.ta+Qn,Ye.f=ut.qa,Ye.N=ut.ra+Ds,Ye.ea=ut.Ha,Ye.W=ut.Ia+Ds):(Er-=vn,Ye.y=dr,Ye.O=Or,Ye.f=fr,Ye.N=zt,Ye.ea=Cn,Ye.W=Ln),pn||(Mn-=vn),Mn>Ye.o&&(Mn=Ye.o),Ye.F=null,Ye.J=null,ut.Fa!=null&&0<ut.Fa.length&&Er<Mn&&(Ye.J=Ea(ut,Ye,Er,Mn-Er),Ye.F=ut.mb,Ye.F==null&&Ye.F.length==0)){Nt=Dn(ut,3,"Could not decode alpha data.");break e}Er<Ye.j&&(vn=Ye.j-Er,Er=Ye.j,t(!(1&vn)),Ye.O+=ut.R*vn,Ye.N+=ut.B*(vn>>1),Ye.W+=ut.B*(vn>>1),Ye.F!=null&&(Ye.J+=Ye.width*vn)),Er<Mn&&(Ye.O+=Ye.v,Ye.N+=Ye.v>>1,Ye.W+=Ye.v>>1,Ye.F!=null&&(Ye.J+=Ye.v),Ye.ka=Er-Ye.j,Ye.U=Ye.va-Ye.v,Ye.T=Mn-Er,Nt=Ye.put(Ye))}Pt+1!=ut.Ic||pn||(i(ut.sa,ut.ta-Wt,dr,Or+16*ut.R,Wt),i(ut.qa,ut.ra-xr,fr,zt+8*ut.B,xr),i(ut.Ha,ut.Ia-xr,Cn,Ln+8*ut.B,xr))}if(!Nt)return Dn(ft,6,"Output aborted.")}return 1}(b,I)),I.bc!=null&&I.bc(I),O&=1}return O?(b.cb=0,O):0}function Co(b,I,O,q,ae){ae=b[I+O+32*q]+(ae>>3),b[I+O+32*q]=-256&ae?0>ae?0:255:ae}function xa(b,I,O,q,ae,me){Co(b,I,0,O,q+ae),Co(b,I,1,O,q+me),Co(b,I,2,O,q-me),Co(b,I,3,O,q-ae)}function Ws(b){return(20091*b>>16)+b}function OA(b,I,O,q){var ae,me=0,ge=u(16);for(ae=0;4>ae;++ae){var ve=b[I+0]+b[I+8],we=b[I+0]-b[I+8],ke=(35468*b[I+4]>>16)-Ws(b[I+12]),Ne=Ws(b[I+4])+(35468*b[I+12]>>16);ge[me+0]=ve+Ne,ge[me+1]=we+ke,ge[me+2]=we-ke,ge[me+3]=ve-Ne,me+=4,I++}for(ae=me=0;4>ae;++ae)ve=(b=ge[me+0]+4)+ge[me+8],we=b-ge[me+8],ke=(35468*ge[me+4]>>16)-Ws(ge[me+12]),Co(O,q,0,0,ve+(Ne=Ws(ge[me+4])+(35468*ge[me+12]>>16))),Co(O,q,1,0,we+ke),Co(O,q,2,0,we-ke),Co(O,q,3,0,ve-Ne),me++,q+=32}function Wa(b,I,O,q){var ae=b[I+0]+4,me=35468*b[I+4]>>16,ge=Ws(b[I+4]),ve=35468*b[I+1]>>16;xa(O,q,0,ae+ge,b=Ws(b[I+1]),ve),xa(O,q,1,ae+me,b,ve),xa(O,q,2,ae-me,b,ve),xa(O,q,3,ae-ge,b,ve)}function kc(b,I,O,q,ae){OA(b,I,O,q),ae&&OA(b,I+16,O,q+4)}function zA(b,I,O,q){ia(b,I+0,O,q,1),ia(b,I+32,O,q+128,1)}function Bu(b,I,O,q){var ae;for(b=b[I+0]+4,ae=0;4>ae;++ae)for(I=0;4>I;++I)Co(O,q,I,ae,b)}function Zl(b,I,O,q){b[I+0]&&Rs(b,I+0,O,q),b[I+16]&&Rs(b,I+16,O,q+4),b[I+32]&&Rs(b,I+32,O,q+128),b[I+48]&&Rs(b,I+48,O,q+128+4)}function HA(b,I,O,q){var ae,me=u(16);for(ae=0;4>ae;++ae){var ge=b[I+0+ae]+b[I+12+ae],ve=b[I+4+ae]+b[I+8+ae],we=b[I+4+ae]-b[I+8+ae],ke=b[I+0+ae]-b[I+12+ae];me[0+ae]=ge+ve,me[8+ae]=ge-ve,me[4+ae]=ke+we,me[12+ae]=ke-we}for(ae=0;4>ae;++ae)ge=(b=me[0+4*ae]+3)+me[3+4*ae],ve=me[1+4*ae]+me[2+4*ae],we=me[1+4*ae]-me[2+4*ae],ke=b-me[3+4*ae],O[q+0]=ge+ve>>3,O[q+16]=ke+we>>3,O[q+32]=ge-ve>>3,O[q+48]=ke-we>>3,q+=64}function Zs(b,I,O){var q,ae=I-32,me=ts,ge=255-b[ae-1];for(q=0;q<O;++q){var ve,we=me,ke=ge+b[I-1];for(ve=0;ve<O;++ve)b[I+ve]=we[ke+b[ae+ve]];I+=32}}function an(b,I){Zs(b,I,4)}function Jo(b,I){Zs(b,I,8)}function ea(b,I){Zs(b,I,16)}function Ms(b,I){var O;for(O=0;16>O;++O)i(b,I+32*O,b,I-32,16)}function xl(b,I){var O;for(O=16;0<O;--O)A(b,I,b[I-1],16),I+=32}function bl(b,I,O){var q;for(q=0;16>q;++q)A(I,O+32*q,b,16)}function ks(b,I){var O,q=16;for(O=0;16>O;++O)q+=b[I-1+32*O]+b[I+O-32];bl(q>>5,b,I)}function ei(b,I){var O,q=8;for(O=0;16>O;++O)q+=b[I-1+32*O];bl(q>>4,b,I)}function ln(b,I){var O,q=8;for(O=0;16>O;++O)q+=b[I+O-32];bl(q>>4,b,I)}function Bl(b,I){bl(128,b,I)}function qr(b,I,O){return b+2*I+O+2>>2}function Uc(b,I){var O,q=I-32;for(q=new Uint8Array([qr(b[q-1],b[q+0],b[q+1]),qr(b[q+0],b[q+1],b[q+2]),qr(b[q+1],b[q+2],b[q+3]),qr(b[q+2],b[q+3],b[q+4])]),O=0;4>O;++O)i(b,I+32*O,q,0,q.length)}function Yi(b,I){var O=b[I-1],q=b[I-1+32],ae=b[I-1+64],me=b[I-1+96];Qt(b,I+0,16843009*qr(b[I-1-32],O,q)),Qt(b,I+32,16843009*qr(O,q,ae)),Qt(b,I+64,16843009*qr(q,ae,me)),Qt(b,I+96,16843009*qr(ae,me,me))}function kn(b,I){var O,q=4;for(O=0;4>O;++O)q+=b[I+O-32]+b[I-1+32*O];for(q>>=3,O=0;4>O;++O)A(b,I+32*O,q,4)}function Di(b,I){var O=b[I-1+0],q=b[I-1+32],ae=b[I-1+64],me=b[I-1-32],ge=b[I+0-32],ve=b[I+1-32],we=b[I+2-32],ke=b[I+3-32];b[I+0+96]=qr(q,ae,b[I-1+96]),b[I+1+96]=b[I+0+64]=qr(O,q,ae),b[I+2+96]=b[I+1+64]=b[I+0+32]=qr(me,O,q),b[I+3+96]=b[I+2+64]=b[I+1+32]=b[I+0+0]=qr(ge,me,O),b[I+3+64]=b[I+2+32]=b[I+1+0]=qr(ve,ge,me),b[I+3+32]=b[I+2+0]=qr(we,ve,ge),b[I+3+0]=qr(ke,we,ve)}function Ci(b,I){var O=b[I+1-32],q=b[I+2-32],ae=b[I+3-32],me=b[I+4-32],ge=b[I+5-32],ve=b[I+6-32],we=b[I+7-32];b[I+0+0]=qr(b[I+0-32],O,q),b[I+1+0]=b[I+0+32]=qr(O,q,ae),b[I+2+0]=b[I+1+32]=b[I+0+64]=qr(q,ae,me),b[I+3+0]=b[I+2+32]=b[I+1+64]=b[I+0+96]=qr(ae,me,ge),b[I+3+32]=b[I+2+64]=b[I+1+96]=qr(me,ge,ve),b[I+3+64]=b[I+2+96]=qr(ge,ve,we),b[I+3+96]=qr(ve,we,we)}function Un(b,I){var O=b[I-1+0],q=b[I-1+32],ae=b[I-1+64],me=b[I-1-32],ge=b[I+0-32],ve=b[I+1-32],we=b[I+2-32],ke=b[I+3-32];b[I+0+0]=b[I+1+64]=me+ge+1>>1,b[I+1+0]=b[I+2+64]=ge+ve+1>>1,b[I+2+0]=b[I+3+64]=ve+we+1>>1,b[I+3+0]=we+ke+1>>1,b[I+0+96]=qr(ae,q,O),b[I+0+64]=qr(q,O,me),b[I+0+32]=b[I+1+96]=qr(O,me,ge),b[I+1+32]=b[I+2+96]=qr(me,ge,ve),b[I+2+32]=b[I+3+96]=qr(ge,ve,we),b[I+3+32]=qr(ve,we,ke)}function Cl(b,I){var O=b[I+0-32],q=b[I+1-32],ae=b[I+2-32],me=b[I+3-32],ge=b[I+4-32],ve=b[I+5-32],we=b[I+6-32],ke=b[I+7-32];b[I+0+0]=O+q+1>>1,b[I+1+0]=b[I+0+64]=q+ae+1>>1,b[I+2+0]=b[I+1+64]=ae+me+1>>1,b[I+3+0]=b[I+2+64]=me+ge+1>>1,b[I+0+32]=qr(O,q,ae),b[I+1+32]=b[I+0+96]=qr(q,ae,me),b[I+2+32]=b[I+1+96]=qr(ae,me,ge),b[I+3+32]=b[I+2+96]=qr(me,ge,ve),b[I+3+64]=qr(ge,ve,we),b[I+3+96]=qr(ve,we,ke)}function An(b,I){var O=b[I-1+0],q=b[I-1+32],ae=b[I-1+64],me=b[I-1+96];b[I+0+0]=O+q+1>>1,b[I+2+0]=b[I+0+32]=q+ae+1>>1,b[I+2+32]=b[I+0+64]=ae+me+1>>1,b[I+1+0]=qr(O,q,ae),b[I+3+0]=b[I+1+32]=qr(q,ae,me),b[I+3+32]=b[I+1+64]=qr(ae,me,me),b[I+3+64]=b[I+2+64]=b[I+0+96]=b[I+1+96]=b[I+2+96]=b[I+3+96]=me}function ws(b,I){var O=b[I-1+0],q=b[I-1+32],ae=b[I-1+64],me=b[I-1+96],ge=b[I-1-32],ve=b[I+0-32],we=b[I+1-32],ke=b[I+2-32];b[I+0+0]=b[I+2+32]=O+ge+1>>1,b[I+0+32]=b[I+2+64]=q+O+1>>1,b[I+0+64]=b[I+2+96]=ae+q+1>>1,b[I+0+96]=me+ae+1>>1,b[I+3+0]=qr(ve,we,ke),b[I+2+0]=qr(ge,ve,we),b[I+1+0]=b[I+3+32]=qr(O,ge,ve),b[I+1+32]=b[I+3+64]=qr(q,O,ge),b[I+1+64]=b[I+3+96]=qr(ae,q,O),b[I+1+96]=qr(me,ae,q)}function Gr(b,I){var O;for(O=0;8>O;++O)i(b,I+32*O,b,I-32,8)}function Wr(b,I){var O;for(O=0;8>O;++O)A(b,I,b[I-1],8),I+=32}function Ao(b,I,O){var q;for(q=0;8>q;++q)A(I,O+32*q,b,8)}function Tr(b,I){var O,q=8;for(O=0;8>O;++O)q+=b[I+O-32]+b[I-1+32*O];Ao(q>>4,b,I)}function Za(b,I){var O,q=4;for(O=0;8>O;++O)q+=b[I+O-32];Ao(q>>3,b,I)}function Si(b,I){var O,q=4;for(O=0;8>O;++O)q+=b[I-1+32*O];Ao(q>>3,b,I)}function ba(b,I){Ao(128,b,I)}function Oi(b,I,O){var q=b[I-O],ae=b[I+0],me=3*(ae-q)+Fu[1020+b[I-2*O]-b[I+O]],ge=nl[112+(me+4>>3)];b[I-O]=ts[255+q+nl[112+(me+3>>3)]],b[I+0]=ts[255+ae-ge]}function jA(b,I,O,q){var ae=b[I+0],me=b[I+O];return eo[255+b[I-2*O]-b[I-O]]>q||eo[255+me-ae]>q}function co(b,I,O,q){return 4*eo[255+b[I-O]-b[I+0]]+eo[255+b[I-2*O]-b[I+O]]<=q}function Qc(b,I,O,q,ae){var me=b[I-3*O],ge=b[I-2*O],ve=b[I-O],we=b[I+0],ke=b[I+O],Ne=b[I+2*O],Bt=b[I+3*O];return 4*eo[255+ve-we]+eo[255+ge-ke]>q?0:eo[255+b[I-4*O]-me]<=ae&&eo[255+me-ge]<=ae&&eo[255+ge-ve]<=ae&&eo[255+Bt-Ne]<=ae&&eo[255+Ne-ke]<=ae&&eo[255+ke-we]<=ae}function Rc(b,I,O,q){var ae=2*q+1;for(q=0;16>q;++q)co(b,I+q,O,ae)&&Oi(b,I+q,O)}function Xs(b,I,O,q){var ae=2*q+1;for(q=0;16>q;++q)co(b,I+q*O,1,ae)&&Oi(b,I+q*O,1)}function uo(b,I,O,q){var ae;for(ae=3;0<ae;--ae)Rc(b,I+=4*O,O,q)}function ho(b,I,O,q){var ae;for(ae=3;0<ae;--ae)Xs(b,I+=4,O,q)}function Zn(b,I,O,q,ae,me,ge,ve){for(me=2*me+1;0<ae--;){if(Qc(b,I,O,me,ge))if(jA(b,I,O,ve))Oi(b,I,O);else{var we=b,ke=I,Ne=O,Bt=we[ke-2*Ne],wt=we[ke-Ne],ft=we[ke+0],Ot=we[ke+Ne],Pt=we[ke+2*Ne],ut=27*(Nt=Fu[1020+3*(ft-wt)+Fu[1020+Bt-Ot]])+63>>7,Ye=18*Nt+63>>7,Nt=9*Nt+63>>7;we[ke-3*Ne]=ts[255+we[ke-3*Ne]+Nt],we[ke-2*Ne]=ts[255+Bt+Ye],we[ke-Ne]=ts[255+wt+ut],we[ke+0]=ts[255+ft-ut],we[ke+Ne]=ts[255+Ot-Ye],we[ke+2*Ne]=ts[255+Pt-Nt]}I+=q}}function xs(b,I,O,q,ae,me,ge,ve){for(me=2*me+1;0<ae--;){if(Qc(b,I,O,me,ge))if(jA(b,I,O,ve))Oi(b,I,O);else{var we=b,ke=I,Ne=O,Bt=we[ke-Ne],wt=we[ke+0],ft=we[ke+Ne],Ot=nl[112+((Pt=3*(wt-Bt))+4>>3)],Pt=nl[112+(Pt+3>>3)],ut=Ot+1>>1;we[ke-2*Ne]=ts[255+we[ke-2*Ne]+ut],we[ke-Ne]=ts[255+Bt+Pt],we[ke+0]=ts[255+wt-Ot],we[ke+Ne]=ts[255+ft-ut]}I+=q}}function Xa(b,I,O,q,ae,me){Zn(b,I,O,1,16,q,ae,me)}function So(b,I,O,q,ae,me){Zn(b,I,1,O,16,q,ae,me)}function gi(b,I,O,q,ae,me){var ge;for(ge=3;0<ge;--ge)xs(b,I+=4*O,O,1,16,q,ae,me)}function Ba(b,I,O,q,ae,me){var ge;for(ge=3;0<ge;--ge)xs(b,I+=4,1,O,16,q,ae,me)}function Sl(b,I,O,q,ae,me,ge,ve){Zn(b,I,ae,1,8,me,ge,ve),Zn(O,q,ae,1,8,me,ge,ve)}function Ca(b,I,O,q,ae,me,ge,ve){Zn(b,I,1,ae,8,me,ge,ve),Zn(O,q,1,ae,8,me,ge,ve)}function Nc(b,I,O,q,ae,me,ge,ve){xs(b,I+4*ae,ae,1,8,me,ge,ve),xs(O,q+4*ae,ae,1,8,me,ge,ve)}function ta(b,I,O,q,ae,me,ge,ve){xs(b,I+4,1,ae,8,me,ge,ve),xs(O,q+4,1,ae,8,me,ge,ve)}function Sa(){this.ba=new Ft,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new at,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Dc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ji(){this.ua=0,this.Wa=new Ge,this.vb=new Ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new he}function El(){this.xb=this.a=0,this.l=new $a,this.ca=new Ft,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ne,this.Pb=0,this.wd=new ne,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ji,this.ab=0,this.gc=h(4,Dc),this.Oc=0}function es(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $a,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Mi(b,I,O,q,ae,me,ge){for(b=b==null?0:b[I+0],I=0;I<ge;++I)ae[me+I]=b+O[q+I]&255,b=ae[me+I]}function Yl(b,I,O,q,ae,me,ge){var ve;if(b==null)Mi(null,null,O,q,ae,me,ge);else for(ve=0;ve<ge;++ve)ae[me+ve]=b[I+ve]+O[q+ve]&255}function Eo(b,I,O,q,ae,me,ge){if(b==null)Mi(null,null,O,q,ae,me,ge);else{var ve,we=b[I+0],ke=we,Ne=we;for(ve=0;ve<ge;++ve)ke=Ne+(we=b[I+ve])-ke,Ne=O[q+ve]+(-256&ke?0>ke?0:255:ke)&255,ke=we,ae[me+ve]=Ne}}function Ea(b,I,O,q){var ae=I.width,me=I.o;if(t(b!=null&&I!=null),0>O||0>=q||O+q>me)return null;if(!b.Cc){if(b.ga==null){var ge;if(b.ga=new es,(ge=b.ga==null)||(ge=I.width*I.o,t(b.Gb.length==0),b.Gb=u(ge),b.Uc=0,b.Gb==null?ge=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,ge=1),ge=!ge),!ge){ge=b.ga;var ve=b.Fa,we=b.P,ke=b.qc,Ne=b.mb,Bt=b.nb,wt=we+1,ft=ke-1,Ot=ge.l;if(t(ve!=null&&Ne!=null&&I!=null),Vi[0]=null,Vi[1]=Mi,Vi[2]=Yl,Vi[3]=Eo,ge.ca=Ne,ge.tb=Bt,ge.c=I.width,ge.i=I.height,t(0<ge.c&&0<ge.i),1>=ke)I=0;else if(ge.$a=ve[we+0]>>0&3,ge.Z=ve[we+0]>>2&3,ge.Lc=ve[we+0]>>4&3,we=ve[we+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||we)I=0;else if(Ot.put=tr,Ot.ac=nr,Ot.bc=Ar,Ot.ma=ge,Ot.width=I.width,Ot.height=I.height,Ot.Da=I.Da,Ot.v=I.v,Ot.va=I.va,Ot.j=I.j,Ot.o=I.o,ge.$a)e:{t(ge.$a==1),I=Dr();t:for(;;){if(I==null){I=0;break e}if(t(ge!=null),ge.mc=I,I.c=ge.c,I.i=ge.i,I.l=ge.l,I.l.ma=ge,I.l.width=ge.c,I.l.height=ge.i,I.a=0,Le(I.m,ve,wt,ft),!Vr(ge.c,ge.i,1,I,null)||(I.ab==1&&I.gc[0].hc==3&&Wn(I.s)?(ge.ic=1,ve=I.c*I.i,I.Ta=null,I.Ua=0,I.V=u(ve),I.Ba=0,I.V==null?(I.a=1,I=0):I=1):(ge.ic=0,I=Ni(I,ge.c)),!I))break t;I=1;break e}ge.mc=null,I=0}else I=ft>=ge.c*ge.i;ge=!I}if(ge)return null;b.ga.Lc!=1?b.Ga=0:q=me-O}t(b.ga!=null),t(O+q<=me);e:{if(I=(ve=b.ga).c,me=ve.l.o,ve.$a==0){if(wt=b.rc,ft=b.Vc,Ot=b.Fa,we=b.P+1+O*I,ke=b.mb,Ne=b.nb+O*I,t(we<=b.P+b.qc),ve.Z!=0)for(t(Vi[ve.Z]!=null),ge=0;ge<q;++ge)Vi[ve.Z](wt,ft,Ot,we,ke,Ne,I),wt=ke,ft=Ne,Ne+=I,we+=I;else for(ge=0;ge<q;++ge)i(ke,Ne,Ot,we,I),wt=ke,ft=Ne,Ne+=I,we+=I;b.rc=wt,b.Vc=ft}else{if(t(ve.mc!=null),I=O+q,t((ge=ve.mc)!=null),t(I<=ge.i),ge.C>=I)I=1;else if(ve.ic||vt(),ve.ic){ve=ge.V,wt=ge.Ba,ft=ge.c;var Pt=ge.i,ut=(Ot=1,we=ge.$/ft,ke=ge.$%ft,Ne=ge.m,Bt=ge.s,ge.$),Ye=ft*Pt,Nt=ft*I,Wt=Bt.wc,zt=ut<Nt?Ur(Bt,ke,we):null;t(ut<=Ye),t(I<=Pt),t(Wn(Bt));t:for(;;){for(;!Ne.h&&ut<Nt;){if(ke&Wt||(zt=Ur(Bt,ke,we)),t(zt!=null),nt(Ne),256>(Pt=Rr(zt.G[0],zt.H[0],Ne)))ve[wt+ut]=Pt,++ut,++ke>=ft&&(ke=0,++we<=I&&!(we%16)&&Xi(ge,we));else{if(!(280>Pt)){Ot=0;break t}Pt=Jr(Pt-256,Ne);var xr,dr=Rr(zt.G[4],zt.H[4],Ne);if(nt(Ne),!(ut>=(dr=jr(ft,dr=Jr(dr,Ne)))&&Ye-ut>=Pt)){Ot=0;break t}for(xr=0;xr<Pt;++xr)ve[wt+ut+xr]=ve[wt+ut+xr-dr];for(ut+=Pt,ke+=Pt;ke>=ft;)ke-=ft,++we<=I&&!(we%16)&&Xi(ge,we);ut<Nt&&ke&Wt&&(zt=Ur(Bt,ke,we))}t(Ne.h==Pe(Ne))}Xi(ge,we>I?I:we);break t}!Ot||Ne.h&&ut<Ye?(Ot=0,ge.a=Ne.h?5:3):ge.$=ut,I=Ot}else I=as(ge,ge.V,ge.Ba,ge.c,ge.i,I,Ga);if(!I){q=0;break e}}O+q>=me&&(b.Cc=1),q=1}if(!q)return null;if(b.Cc&&((q=b.ga)!=null&&(q.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+O*ae}function Q(b,I,O,q,ae,me){for(;0<ae--;){var ge,ve=b,we=I+(O?1:0),ke=b,Ne=I+(O?0:3);for(ge=0;ge<q;++ge){var Bt=ke[Ne+4*ge];Bt!=255&&(Bt*=32897,ve[we+4*ge+0]=ve[we+4*ge+0]*Bt>>23,ve[we+4*ge+1]=ve[we+4*ge+1]*Bt>>23,ve[we+4*ge+2]=ve[we+4*ge+2]*Bt>>23)}I+=me}}function Ae(b,I,O,q,ae){for(;0<q--;){var me;for(me=0;me<O;++me){var ge=b[I+2*me+0],ve=15&(ke=b[I+2*me+1]),we=4369*ve,ke=(240&ke|ke>>4)*we>>16;b[I+2*me+0]=(240&ge|ge>>4)*we>>16&240|(15&ge|ge<<4)*we>>16>>4&15,b[I+2*me+1]=240&ke|ve}I+=ae}}function He(b,I,O,q,ae,me,ge,ve){var we,ke,Ne=255;for(ke=0;ke<ae;++ke){for(we=0;we<q;++we){var Bt=b[I+we];me[ge+4*we]=Bt,Ne&=Bt}I+=O,ge+=ve}return Ne!=255}function ot(b,I,O,q,ae){var me;for(me=0;me<ae;++me)O[q+me]=b[I+me]>>8}function vt(){hi=Q,jn=Ae,Vn=He,di=ot}function Ut(b,I,O){ue[b]=function(q,ae,me,ge,ve,we,ke,Ne,Bt,wt,ft,Ot,Pt,ut,Ye,Nt,Wt){var zt,xr=Wt-1>>1,dr=ve[we+0]|ke[Ne+0]<<16,Or=Bt[wt+0]|ft[Ot+0]<<16;t(q!=null);var fr=3*dr+Or+131074>>2;for(I(q[ae+0],255&fr,fr>>16,Pt,ut),me!=null&&(fr=3*Or+dr+131074>>2,I(me[ge+0],255&fr,fr>>16,Ye,Nt)),zt=1;zt<=xr;++zt){var Cn=ve[we+zt]|ke[Ne+zt]<<16,Ln=Bt[wt+zt]|ft[Ot+zt]<<16,pn=dr+Cn+Or+Ln+524296,vn=pn+2*(Cn+Or)>>3;fr=vn+dr>>1,dr=(pn=pn+2*(dr+Ln)>>3)+Cn>>1,I(q[ae+2*zt-1],255&fr,fr>>16,Pt,ut+(2*zt-1)*O),I(q[ae+2*zt-0],255&dr,dr>>16,Pt,ut+(2*zt-0)*O),me!=null&&(fr=pn+Or>>1,dr=vn+Ln>>1,I(me[ge+2*zt-1],255&fr,fr>>16,Ye,Nt+(2*zt-1)*O),I(me[ge+2*zt+0],255&dr,dr>>16,Ye,Nt+(2*zt+0)*O)),dr=Cn,Or=Ln}1&Wt||(fr=3*dr+Or+131074>>2,I(q[ae+Wt-1],255&fr,fr>>16,Pt,ut+(Wt-1)*O),me!=null&&(fr=3*Or+dr+131074>>2,I(me[ge+Wt-1],255&fr,fr>>16,Ye,Nt+(Wt-1)*O)))}}function Zt(){Ns[qA]=Zc,Ns[sn]=AA,Ns[Ll]=JA,Ns[jc]=Mu,Ns[Vc]=ec,Ns[aA]=ku,Ns[Hd]=Gd,Ns[Vh]=AA,Ns[Iu]=Mu,Ns[Kc]=ec,Ns[WA]=ku}function gr(b){return b&-16384?0>b?0:255:b>>aa}function Mr(b,I){return gr((19077*b>>8)+(26149*I>>8)-14234)}function en(b,I,O){return gr((19077*b>>8)-(6419*I>>8)-(13320*O>>8)+8708)}function Zr(b,I){return gr((19077*b>>8)+(33050*I>>8)-17685)}function nn(b,I,O,q,ae){q[ae+0]=Mr(b,O),q[ae+1]=en(b,I,O),q[ae+2]=Zr(b,I)}function ci(b,I,O,q,ae){q[ae+0]=Zr(b,I),q[ae+1]=en(b,I,O),q[ae+2]=Mr(b,O)}function ti(b,I,O,q,ae){var me=en(b,I,O);I=me<<3&224|Zr(b,I)>>3,q[ae+0]=248&Mr(b,O)|me>>5,q[ae+1]=I}function ri(b,I,O,q,ae){var me=240&Zr(b,I)|15;q[ae+0]=240&Mr(b,O)|en(b,I,O)>>4,q[ae+1]=me}function ki(b,I,O,q,ae){q[ae+0]=255,nn(b,I,O,q,ae+1)}function zi(b,I,O,q,ae){ci(b,I,O,q,ae),q[ae+3]=255}function Us(b,I,O,q,ae){nn(b,I,O,q,ae),q[ae+3]=255}function Ys(b,I){return 0>b?0:b>I?I:b}function Qs(b,I,O){ue[b]=function(q,ae,me,ge,ve,we,ke,Ne,Bt){for(var wt=Ne+(-2&Bt)*O;Ne!=wt;)I(q[ae+0],me[ge+0],ve[we+0],ke,Ne),I(q[ae+1],me[ge+0],ve[we+0],ke,Ne+O),ae+=2,++ge,++we,Ne+=2*O;1&Bt&&I(q[ae+0],me[ge+0],ve[we+0],ke,Ne)}}function Cu(b,I,O){return O==0?b==0?I==0?6:5:I==0?4:0:O}function VA(b,I,O,q,ae){switch(b>>>30){case 3:ia(I,O,q,ae,0);break;case 2:Hn(I,O,q,ae);break;case 1:Rs(I,O,q,ae)}}function Oc(b,I){var O,q,ae=I.M,me=I.Nb,ge=b.oc,ve=b.pc+40,we=b.oc,ke=b.pc+584,Ne=b.oc,Bt=b.pc+600;for(O=0;16>O;++O)ge[ve+32*O-1]=129;for(O=0;8>O;++O)we[ke+32*O-1]=129,Ne[Bt+32*O-1]=129;for(0<ae?ge[ve-1-32]=we[ke-1-32]=Ne[Bt-1-32]=129:(A(ge,ve-32-1,127,21),A(we,ke-32-1,127,9),A(Ne,Bt-32-1,127,9)),q=0;q<b.za;++q){var wt=I.ya[I.aa+q];if(0<q){for(O=-1;16>O;++O)i(ge,ve+32*O-4,ge,ve+32*O+12,4);for(O=-1;8>O;++O)i(we,ke+32*O-4,we,ke+32*O+4,4),i(Ne,Bt+32*O-4,Ne,Bt+32*O+4,4)}var ft=b.Gd,Ot=b.Hd+q,Pt=wt.ad,ut=wt.Hc;if(0<ae&&(i(ge,ve-32,ft[Ot].y,0,16),i(we,ke-32,ft[Ot].f,0,8),i(Ne,Bt-32,ft[Ot].ea,0,8)),wt.Za){var Ye=ge,Nt=ve-32+16;for(0<ae&&(q>=b.za-1?A(Ye,Nt,ft[Ot].y[15],4):i(Ye,Nt,ft[Ot+1].y,0,4)),O=0;4>O;O++)Ye[Nt+128+O]=Ye[Nt+256+O]=Ye[Nt+384+O]=Ye[Nt+0+O];for(O=0;16>O;++O,ut<<=2)Ye=ge,Nt=ve+Yc[O],to[wt.Ob[O]](Ye,Nt),VA(ut,Pt,16*+O,Ye,Nt)}else if(Ye=Cu(q,ae,wt.Ob[0]),oa[Ye](ge,ve),ut!=0)for(O=0;16>O;++O,ut<<=2)VA(ut,Pt,16*+O,ge,ve+Yc[O]);for(O=wt.Gc,Ye=Cu(q,ae,wt.Dd),La[Ye](we,ke),La[Ye](Ne,Bt),ut=Pt,Ye=we,Nt=ke,255&(wt=O>>0)&&(170&wt?sA(ut,256,Ye,Nt):Io(ut,256,Ye,Nt)),wt=Ne,ut=Bt,255&(O>>=8)&&(170&O?sA(Pt,320,wt,ut):Io(Pt,320,wt,ut)),ae<b.Ub-1&&(i(ft[Ot].y,0,ge,ve+480,16),i(ft[Ot].f,0,we,ke+224,8),i(ft[Ot].ea,0,Ne,Bt+224,8)),O=8*me*b.B,ft=b.sa,Ot=b.ta+16*q+16*me*b.R,Pt=b.qa,wt=b.ra+8*q+O,ut=b.Ha,Ye=b.Ia+8*q+O,O=0;16>O;++O)i(ft,Ot+O*b.R,ge,ve+32*O,16);for(O=0;8>O;++O)i(Pt,wt+O*b.B,we,ke+32*O,8),i(ut,Ye+O*b.B,Ne,Bt+32*O,8)}}function Ya(b,I,O,q,ae,me,ge,ve,we){var ke=[0],Ne=[0],Bt=0,wt=we!=null?we.kd:0,ft=we??new Xl;if(b==null||12>O)return 7;ft.data=b,ft.w=I,ft.ha=O,I=[I],O=[O],ft.gb=[ft.gb];e:{var Ot=I,Pt=O,ut=ft.gb;if(t(b!=null),t(Pt!=null),t(ut!=null),ut[0]=0,12<=Pt[0]&&!r(b,Ot[0],"RIFF")){if(r(b,Ot[0]+8,"WEBP")){ut=3;break e}var Ye=jt(b,Ot[0]+4);if(12>Ye||4294967286<Ye){ut=3;break e}if(wt&&Ye>Pt[0]-8){ut=7;break e}ut[0]=Ye,Ot[0]+=12,Pt[0]-=12}ut=0}if(ut!=0)return ut;for(Ye=0<ft.gb[0],O=O[0];;){e:{var Nt=b;Pt=I,ut=O;var Wt=ke,zt=Ne,xr=Ot=[0];if((fr=Bt=[Bt])[0]=0,8>ut[0])ut=7;else{if(!r(Nt,Pt[0],"VP8X")){if(jt(Nt,Pt[0]+4)!=10){ut=3;break e}if(18>ut[0]){ut=7;break e}var dr=jt(Nt,Pt[0]+8),Or=1+$t(Nt,Pt[0]+12);if(2147483648<=Or*(Nt=1+$t(Nt,Pt[0]+15))){ut=3;break e}xr!=null&&(xr[0]=dr),Wt!=null&&(Wt[0]=Or),zt!=null&&(zt[0]=Nt),Pt[0]+=18,ut[0]-=18,fr[0]=1}ut=0}}if(Bt=Bt[0],Ot=Ot[0],ut!=0)return ut;if(Pt=!!(2&Ot),!Ye&&Bt)return 3;if(me!=null&&(me[0]=!!(16&Ot)),ge!=null&&(ge[0]=Pt),ve!=null&&(ve[0]=0),ge=ke[0],Ot=Ne[0],Bt&&Pt&&we==null){ut=0;break}if(4>O){ut=7;break}if(Ye&&Bt||!Ye&&!Bt&&!r(b,I[0],"ALPH")){O=[O],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];e:{dr=b,ut=I,Ye=O;var fr=ft.gb;Wt=ft.na,zt=ft.P,xr=ft.Sa,Or=22,t(dr!=null),t(Ye!=null),Nt=ut[0];var Cn=Ye[0];for(t(Wt!=null),t(xr!=null),Wt[0]=null,zt[0]=null,xr[0]=0;;){if(ut[0]=Nt,Ye[0]=Cn,8>Cn){ut=7;break e}var Ln=jt(dr,Nt+4);if(4294967286<Ln){ut=3;break e}var pn=8+Ln+1&-2;if(Or+=pn,0<fr&&Or>fr){ut=3;break e}if(!r(dr,Nt,"VP8 ")||!r(dr,Nt,"VP8L")){ut=0;break e}if(Cn[0]<pn){ut=7;break e}r(dr,Nt,"ALPH")||(Wt[0]=dr,zt[0]=Nt+8,xr[0]=Ln),Nt+=pn,Cn-=pn}}if(O=O[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],ut!=0)break}O=[O],ft.Ja=[ft.Ja],ft.xa=[ft.xa];e:if(fr=b,ut=I,Ye=O,Wt=ft.gb[0],zt=ft.Ja,xr=ft.xa,dr=ut[0],Nt=!r(fr,dr,"VP8 "),Or=!r(fr,dr,"VP8L"),t(fr!=null),t(Ye!=null),t(zt!=null),t(xr!=null),8>Ye[0])ut=7;else{if(Nt||Or){if(fr=jt(fr,dr+4),12<=Wt&&fr>Wt-12){ut=3;break e}if(wt&&fr>Ye[0]-8){ut=7;break e}zt[0]=fr,ut[0]+=8,Ye[0]-=8,xr[0]=Or}else xr[0]=5<=Ye[0]&&fr[dr+0]==47&&!(fr[dr+4]>>5),zt[0]=Ye[0];ut=0}if(O=O[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],I=I[0],ut!=0)break;if(4294967286<ft.Ja)return 3;if(ve==null||Pt||(ve[0]=ft.xa?2:1),ge=[ge],Ot=[Ot],ft.xa){if(5>O){ut=7;break}ve=ge,wt=Ot,Pt=me,b==null||5>O?b=0:5<=O&&b[I+0]==47&&!(b[I+4]>>5)?(Ye=[0],fr=[0],Wt=[0],Le(zt=new ne,b,I,O),qt(zt,Ye,fr,Wt)?(ve!=null&&(ve[0]=Ye[0]),wt!=null&&(wt[0]=fr[0]),Pt!=null&&(Pt[0]=Wt[0]),b=1):b=0):b=0}else{if(10>O){ut=7;break}ve=Ot,b==null||10>O||!Pc(b,I+3,O-3)?b=0:(wt=b[I+0]|b[I+1]<<8|b[I+2]<<16,Pt=16383&(b[I+7]<<8|b[I+6]),b=16383&(b[I+9]<<8|b[I+8]),1&wt||3<(wt>>1&7)||!(wt>>4&1)||wt>>5>=ft.Ja||!Pt||!b?b=0:(ge&&(ge[0]=Pt),ve&&(ve[0]=b),b=1))}if(!b||(ge=ge[0],Ot=Ot[0],Bt&&(ke[0]!=ge||Ne[0]!=Ot)))return 3;we!=null&&(we[0]=ft,we.offset=I-we.w,t(4294967286>I-we.w),t(we.offset==we.ha-O));break}return ut==0||ut==7&&Bt&&we==null?(me!=null&&(me[0]|=ft.na!=null&&0<ft.na.length),q!=null&&(q[0]=ge),ae!=null&&(ae[0]=Ot),0):ut}function Jl(b,I,O){var q=I.width,ae=I.height,me=0,ge=0,ve=q,we=ae;if(I.Da=b!=null&&0<b.Da,I.Da&&(ve=b.cd,we=b.bd,me=b.v,ge=b.j,11>O||(me&=-2,ge&=-2),0>me||0>ge||0>=ve||0>=we||me+ve>q||ge+we>ae))return 0;if(I.v=me,I.j=ge,I.va=me+ve,I.o=ge+we,I.U=ve,I.T=we,I.da=b!=null&&0<b.da,I.da){if(!Cr(ve,we,O=[b.ib],me=[b.hb]))return 0;I.ib=O[0],I.hb=me[0]}return I.ob=b!=null&&b.ob,I.Kb=b==null||!b.Sd,I.da&&(I.ob=I.ib<3*q/4&&I.hb<3*ae/4,I.Kb=0),1}function KA(b){if(b==null)return 2;if(11>b.S){var I=b.f.RGBA;I.fb+=(b.height-1)*I.A,I.A=-I.A}else I=b.f.kb,b=b.height,I.O+=(b-1)*I.fa,I.fa=-I.fa,I.N+=(b-1>>1)*I.Ab,I.Ab=-I.Ab,I.W+=(b-1>>1)*I.Db,I.Db=-I.Db,I.F!=null&&(I.J+=(b-1)*I.lb,I.lb=-I.lb);return 0}function eA(b,I,O,q){if(q==null||0>=b||0>=I)return 2;if(O!=null){if(O.Da){var ae=O.cd,me=O.bd,ge=-2&O.v,ve=-2&O.j;if(0>ge||0>ve||0>=ae||0>=me||ge+ae>b||ve+me>I)return 2;b=ae,I=me}if(O.da){if(!Cr(b,I,ae=[O.ib],me=[O.hb]))return 2;b=ae[0],I=me[0]}}q.width=b,q.height=I;e:{var we=q.width,ke=q.height;if(b=q.S,0>=we||0>=ke||!(b>=qA&&13>b))b=2;else{if(0>=q.Rd&&q.sd==null){ge=me=ae=I=0;var Ne=(ve=we*Mo[b])*ke;if(11>b||(me=(ke+1)/2*(I=(we+1)/2),b==12&&(ge=(ae=we)*ke)),(ke=u(Ne+2*me+ge))==null){b=1;break e}q.sd=ke,11>b?((we=q.f.RGBA).eb=ke,we.fb=0,we.A=ve,we.size=Ne):((we=q.f.kb).y=ke,we.O=0,we.fa=ve,we.Fd=Ne,we.f=ke,we.N=0+Ne,we.Ab=I,we.Cd=me,we.ea=ke,we.W=0+Ne+me,we.Db=I,we.Ed=me,b==12&&(we.F=ke,we.J=0+Ne+2*me),we.Tc=ge,we.lb=ae)}if(I=1,ae=q.S,me=q.width,ge=q.height,ae>=qA&&13>ae)if(11>ae)b=q.f.RGBA,I&=(ve=Math.abs(b.A))*(ge-1)+me<=b.size,I&=ve>=me*Mo[ae],I&=b.eb!=null;else{b=q.f.kb,ve=(me+1)/2,Ne=(ge+1)/2,we=Math.abs(b.fa),ke=Math.abs(b.Ab);var Bt=Math.abs(b.Db),wt=Math.abs(b.lb),ft=wt*(ge-1)+me;I&=we*(ge-1)+me<=b.Fd,I&=ke*(Ne-1)+ve<=b.Cd,I=(I&=Bt*(Ne-1)+ve<=b.Ed)&we>=me&ke>=ve&Bt>=ve,I&=b.y!=null,I&=b.f!=null,I&=b.ea!=null,ae==12&&(I&=wt>=me,I&=ft<=b.Tc,I&=b.F!=null)}else I=0;b=I?0:2}}return b!=0||O!=null&&O.fd&&(b=KA(q)),b}var Hi=64,Fl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Fo=24,tA=32,rA=8,ji=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ar("Predictor0","PredictorAdd0"),ue.Predictor0=function(){return 4278190080},ue.Predictor1=function(b){return b},ue.Predictor2=function(b,I,O){return I[O+0]},ue.Predictor3=function(b,I,O){return I[O+1]},ue.Predictor4=function(b,I,O){return I[O-1]},ue.Predictor5=function(b,I,O){return cr(cr(b,I[O+1]),I[O+0])},ue.Predictor6=function(b,I,O){return cr(b,I[O-1])},ue.Predictor7=function(b,I,O){return cr(b,I[O+0])},ue.Predictor8=function(b,I,O){return cr(I[O-1],I[O+0])},ue.Predictor9=function(b,I,O){return cr(I[O+0],I[O+1])},ue.Predictor10=function(b,I,O){return cr(cr(b,I[O-1]),cr(I[O+0],I[O+1]))},ue.Predictor11=function(b,I,O){var q=I[O+0];return 0>=Kr(q>>24&255,b>>24&255,(I=I[O-1])>>24&255)+Kr(q>>16&255,b>>16&255,I>>16&255)+Kr(q>>8&255,b>>8&255,I>>8&255)+Kr(255&q,255&b,255&I)?q:b},ue.Predictor12=function(b,I,O){var q=I[O+0];return(br((b>>24&255)+(q>>24&255)-((I=I[O-1])>>24&255))<<24|br((b>>16&255)+(q>>16&255)-(I>>16&255))<<16|br((b>>8&255)+(q>>8&255)-(I>>8&255))<<8|br((255&b)+(255&q)-(255&I)))>>>0},ue.Predictor13=function(b,I,O){var q=I[O-1];return(Nr((b=cr(b,I[O+0]))>>24&255,q>>24&255)<<24|Nr(b>>16&255,q>>16&255)<<16|Nr(b>>8&255,q>>8&255)<<8|Nr(b>>0&255,q>>0&255))>>>0};var jh=ue.PredictorAdd0;ue.PredictorAdd1=Lr,ar("Predictor2","PredictorAdd2"),ar("Predictor3","PredictorAdd3"),ar("Predictor4","PredictorAdd4"),ar("Predictor5","PredictorAdd5"),ar("Predictor6","PredictorAdd6"),ar("Predictor7","PredictorAdd7"),ar("Predictor8","PredictorAdd8"),ar("Predictor9","PredictorAdd9"),ar("Predictor10","PredictorAdd10"),ar("Predictor11","PredictorAdd11"),ar("Predictor12","PredictorAdd12"),ar("Predictor13","PredictorAdd13");var Il=ue.PredictorAdd2;Yr("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),Yr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Su,fo=ue.ColorIndexInverseTransform,nA=ue.MapARGB,zc=ue.VP8LColorIndexInverseTransformAlpha,Hc=ue.MapAlpha,Fa=ue.VP8LPredictorsAdd=[];Fa.length=16,(ue.VP8LPredictors=[]).length=16,(ue.VP8LPredictorsAdd_C=[]).length=16,(ue.VP8LPredictors_C=[]).length=16;var hn,As,ui,Ia,ra,na,iA,ia,Hn,sA,Rs,Io,GA,Eu,$A,oA,Tl,sa,Ta,Ja,el,Js,tl,cs,hi,jn,Vn,di,Xn=u(511),To=u(2041),Pl=u(225),Pa=u(767),rl=0,Fu=To,nl=Pl,ts=Pa,eo=Xn,qA=0,sn=1,Ll=2,jc=3,Vc=4,aA=5,Hd=6,Vh=7,Iu=8,Kc=9,WA=10,Tu=[2,3,7],Pu=[3,3,11],ZA=[280,256,256,256,40],Lu=[0,1,1,1,0],Kh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Gc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],XA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],YA=8,lA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$c=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Po=null,Mp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],jd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],qc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Vd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Kd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],oa=[],to=[],La=[],fi=1,il=2,Vi=[],Ns=[];Ut("UpsampleRgbLinePair",nn,3),Ut("UpsampleBgrLinePair",ci,3),Ut("UpsampleRgbaLinePair",Us,4),Ut("UpsampleBgraLinePair",zi,4),Ut("UpsampleArgbLinePair",ki,4),Ut("UpsampleRgba4444LinePair",ri,2),Ut("UpsampleRgb565LinePair",ti,2);var Zc=ue.UpsampleRgbLinePair,JA=ue.UpsampleBgrLinePair,AA=ue.UpsampleRgbaLinePair,Mu=ue.UpsampleBgraLinePair,ec=ue.UpsampleArgbLinePair,ku=ue.UpsampleRgba4444LinePair,Gd=ue.UpsampleRgb565LinePair,Xc=16,sl=1<<Xc-1,Ma=-227,bs=482,aa=6,Uu=0,$d=u(256),qd=u(256),tc=u(256),$h=u(256),Qu=u(bs-Ma),Wd=u(bs-Ma);Qs("YuvToRgbRow",nn,3),Qs("YuvToBgrRow",ci,3),Qs("YuvToRgbaRow",Us,4),Qs("YuvToBgraRow",zi,4),Qs("YuvToArgbRow",ki,4),Qs("YuvToRgba4444Row",ri,2),Qs("YuvToRgb565Row",ti,2);var Yc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],cA=[0,2,8],rc=[8,7,6,4,4,2,2,2,1,1,1,1],Lo=1;this.WebPDecodeRGBA=function(b,I,O,q,ae){var me=sn,ge=new Sa,ve=new Ft;ge.ba=ve,ve.S=me,ve.width=[ve.width],ve.height=[ve.height];var we=ve.width,ke=ve.height,Ne=new Ct;if(Ne==null||b==null)var Bt=2;else t(Ne!=null),Bt=Ya(b,I,O,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(Bt!=0?we=0:(we!=null&&(we[0]=Ne.width[0]),ke!=null&&(ke[0]=Ne.height[0]),we=1),we){ve.width=ve.width[0],ve.height=ve.height[0],q!=null&&(q[0]=ve.width),ae!=null&&(ae[0]=ve.height);e:{if(q=new $a,(ae=new Xl).data=b,ae.w=I,ae.ha=O,ae.kd=1,I=[0],t(ae!=null),((b=Ya(ae.data,ae.w,ae.ha,null,null,null,I,null,ae))==0||b==7)&&I[0]&&(b=4),(I=b)==0){if(t(ge!=null),q.data=ae.data,q.w=ae.w+ae.offset,q.ha=ae.ha-ae.offset,q.put=tr,q.ac=nr,q.bc=Ar,q.ma=ge,ae.xa){if((b=Dr())==null){ge=1;break e}if(function(wt,ft){var Ot=[0],Pt=[0],ut=[0];t:for(;;){if(wt==null)return 0;if(ft==null)return wt.a=2,0;if(wt.l=ft,wt.a=0,Le(wt.m,ft.data,ft.w,ft.ha),!qt(wt.m,Ot,Pt,ut)){wt.a=3;break t}if(wt.xb=il,ft.width=Ot[0],ft.height=Pt[0],!Vr(Ot[0],Pt[0],1,wt,null))break t;return 1}return t(wt.a!=0),0}(b,q)){if(q=(I=eA(q.width,q.height,ge.Oa,ge.ba))==0){t:{q=b;r:for(;;){if(q==null){q=0;break t}if(t(q.s.yc!=null),t(q.s.Ya!=null),t(0<q.s.Wb),t((O=q.l)!=null),t((ae=O.ma)!=null),q.xb!=0){if(q.ca=ae.ba,q.tb=ae.tb,t(q.ca!=null),!Jl(ae.Oa,O,jc)){q.a=2;break r}if(!Ni(q,O.width)||O.da)break r;if((O.da||tt(q.ca.S))&&vt(),11>q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),q.ca.f.kb.F!=null&&vt()),q.Pb&&0<q.s.ua&&q.s.vb.X==null&&!vr(q.s.vb,q.s.Wa.Xa)){q.a=1;break r}q.xb=0}if(!as(q,q.V,q.Ba,q.c,q.i,O.o,Yt))break r;ae.Dc=q.Ma,q=1;break t}t(q.a!=0),q=0}q=!q}q&&(I=b.a)}else I=b.a}else{if((b=new qa)==null){ge=1;break e}if(b.Fa=ae.na,b.P=ae.P,b.qc=ae.Sa,Lc(b,q)){if((I=eA(q.width,q.height,ge.Oa,ge.ba))==0){if(b.Aa=0,O=ge.Oa,t((ae=b)!=null),O!=null){if(0<(we=0>(we=O.Md)?0:100<we?255:255*we/100)){for(ke=Ne=0;4>ke;++ke)12>(Bt=ae.pb[ke]).lc&&(Bt.ia=we*rc[0>Bt.lc?0:Bt.lc]>>3),Ne|=Bt.ia;Ne&&(alert("todo:VP8InitRandom"),ae.ia=1)}ae.Ga=O.Id,100<ae.Ga?ae.Ga=100:0>ae.Ga&&(ae.Ga=0)}bu(b,q)||(I=b.a)}}else I=b.a}I==0&&ge.Oa!=null&&ge.Oa.fd&&(I=KA(ge.ba))}ge=I}me=ge!=0?null:11>me?ve.f.RGBA.eb:ve.f.kb.y}else me=null;return me};var Mo=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function x(ue,Te){for(var Ke="",oe=0;oe<4;oe++)Ke+=String.fromCharCode(ue[Te++]);return Ke}function E(ue,Te){return(ue[Te+0]<<0|ue[Te+1]<<8|ue[Te+2]<<16)>>>0}function F(ue,Te){return(ue[Te+0]<<0|ue[Te+1]<<8|ue[Te+2]<<16|ue[Te+3]<<24)>>>0}new g;var P=[0],C=[0],D=[],k=new g,j=e,U=function(ue,Te){var Ke={},oe=0,he=!1,Ie=0,be=0;if(Ke.frames=[],!function(Be,Pe,$e,nt){for(var Ze=0;Ze<nt;Ze++)if(Be[Pe+Ze]!=$e.charCodeAt(Ze))return!0;return!1}(ue,Te,"RIFF",4)){for(F(ue,Te+=4),Te+=8;Te<ue.length;){var ct=x(ue,Te),Xe=F(ue,Te+=4);Te+=4;var lt=Xe+(1&Xe);switch(ct){case"VP8 ":case"VP8L":Ke.frames[oe]===void 0&&(Ke.frames[oe]={}),(it=Ke.frames[oe]).src_off=he?be:Te-8,it.src_size=Ie+Xe+8,oe++,he&&(he=!1,Ie=0,be=0);break;case"VP8X":(it=Ke.header={}).feature_flags=ue[Te];var Le=Te+4;it.canvas_width=1+E(ue,Le),Le+=3,it.canvas_height=1+E(ue,Le),Le+=3;break;case"ALPH":he=!0,Ie=lt+8,be=Te-8;break;case"ANIM":(it=Ke.header).bgcolor=F(ue,Te),Le=Te+4,it.loop_count=(Lt=ue)[(ne=Le)+0]<<0|Lt[ne+1]<<8,Le+=2;break;case"ANMF":var ze,it;(it=Ke.frames[oe]={}).offset_x=2*E(ue,Te),Te+=3,it.offset_y=2*E(ue,Te),Te+=3,it.width=1+E(ue,Te),Te+=3,it.height=1+E(ue,Te),Te+=3,it.duration=E(ue,Te),Te+=3,ze=ue[Te++],it.dispose=1&ze,it.blend=ze>>1&1}ct!="ANMF"&&(Te+=lt)}var Lt,ne;return Ke}}(j,0);U.response=j,U.rgbaoutput=!0,U.dataurl=!1;var N=U.header?U.header:null,K=U.frames?U.frames:null;if(N){N.loop_counter=N.loop_count,P=[N.canvas_height],C=[N.canvas_width];for(var ee=0;ee<K.length&&K[ee].blend!=0;ee++);}var se=K[0],pe=k.WebPDecodeRGBA(j,se.src_off,se.src_size,C,P);se.rgba=pe,se.imgwidth=C[0],se.imgheight=P[0];for(var ye=0;ye<C[0]*P[0]*4;ye++)D[ye]=pe[ye];return this.width=C,this.height=P,this.data=D,this}(function(e){var t=function(){return typeof kb=="function"},r=function(P,C,D,k){var j=4,U=h;switch(k){case e.image_compression.FAST:j=1,U=u;break;case e.image_compression.MEDIUM:j=6,U=o;break;case e.image_compression.SLOW:j=9,U=g}P=i(P,C,D,U);var N=kb(P,{level:j});return e.__addimage__.arrayBufferToBinaryString(N)},i=function(P,C,D,k){for(var j,U,N,K=P.length/C,ee=new Uint8Array(P.length+K),se=E(),pe=0;pe<K;pe+=1){if(N=pe*C,j=P.subarray(N,N+C),k)ee.set(k(j,D,U),N+pe);else{for(var ye,ue=se.length,Te=[];ye<ue;ye+=1)Te[ye]=se[ye](j,D,U);var Ke=F(Te.concat());ee.set(Te[Ke],N+pe)}U=j}return ee},A=function(P){var C=Array.apply([],P);return C.unshift(0),C},u=function(P,C){var D,k=[],j=P.length;k[0]=1;for(var U=0;U<j;U+=1)D=P[U-C]||0,k[U+1]=P[U]-D+256&255;return k},h=function(P,C,D){var k,j=[],U=P.length;j[0]=2;for(var N=0;N<U;N+=1)k=D&&D[N]||0,j[N+1]=P[N]-k+256&255;return j},o=function(P,C,D){var k,j,U=[],N=P.length;U[0]=3;for(var K=0;K<N;K+=1)k=P[K-C]||0,j=D&&D[K]||0,U[K+1]=P[K]+256-(k+j>>>1)&255;return U},g=function(P,C,D){var k,j,U,N,K=[],ee=P.length;K[0]=4;for(var se=0;se<ee;se+=1)k=P[se-C]||0,j=D&&D[se]||0,U=D&&D[se-C]||0,N=x(k,j,U),K[se+1]=P[se]-N+256&255;return K},x=function(P,C,D){if(P===C&&C===D)return P;var k=Math.abs(C-D),j=Math.abs(P-D),U=Math.abs(P+C-D-D);return k<=j&&k<=U?P:j<=U?C:D},E=function(){return[A,u,h,o,g]},F=function(P){var C=P.map(function(D){return D.reduce(function(k,j){return k+Math.abs(j)},0)});return C.indexOf(Math.min.apply(null,C))};e.processPNG=function(P,C,D,k){var j,U,N,K,ee,se,pe,ye,ue,Te,Ke,oe,he,Ie,be,ct=this.decode.FLATE_DECODE,Xe="";if(this.__addimage__.isArrayBuffer(P)&&(P=new Uint8Array(P)),this.__addimage__.isArrayBufferView(P)){if(P=(N=new xW(P)).imgData,U=N.bits,j=N.colorSpace,ee=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){ue=(ye=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,Ke=new Uint8Array(ue*N.colors),Te=new Uint8Array(ue);var lt,Le=N.pixelBitlength-N.bits;for(Ie=0,be=0;Ie<ue;Ie++){for(he=ye[Ie],lt=0;lt<Le;)Ke[be++]=he>>>lt&255,lt+=N.bits;Te[Ie]=he>>>lt&255}}if(N.bits===16){ue=(ye=new Uint32Array(N.decodePixels().buffer)).length,Ke=new Uint8Array(ue*(32/N.pixelBitlength)*N.colors),Te=new Uint8Array(ue*(32/N.pixelBitlength)),oe=N.colors>1,Ie=0,be=0;for(var ze=0;Ie<ue;)he=ye[Ie++],Ke[be++]=he>>>0&255,oe&&(Ke[be++]=he>>>16&255,he=ye[Ie++],Ke[be++]=he>>>0&255),Te[ze++]=he>>>16&255;U=8}k!==e.image_compression.NONE&&t()?(P=r(Ke,N.width*N.colors,N.colors,k),pe=r(Te,N.width,1,k)):(P=Ke,pe=Te,ct=void 0)}if(N.colorType===3&&(j=this.color_spaces.INDEXED,se=N.palette,N.transparency.indexed)){var it=N.transparency.indexed,Lt=0;for(Ie=0,ue=it.length;Ie<ue;++Ie)Lt+=it[Ie];if((Lt/=255)===ue-1&&it.indexOf(0)!==-1)K=[it.indexOf(0)];else if(Lt!==ue){for(ye=N.decodePixels(),Te=new Uint8Array(ye.length),Ie=0,ue=ye.length;Ie<ue;Ie++)Te[Ie]=it[ye[Ie]];pe=r(Te,N.width,1)}}var ne=function(Be){var Pe;switch(Be){case e.image_compression.FAST:Pe=11;break;case e.image_compression.MEDIUM:Pe=13;break;case e.image_compression.SLOW:Pe=14;break;default:Pe=12}return Pe}(k);return ct===this.decode.FLATE_DECODE&&(Xe="/Predictor "+ne+" "),Xe+="/Colors "+ee+" /BitsPerComponent "+U+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),(pe&&this.__addimage__.isArrayBuffer(pe)||this.__addimage__.isArrayBufferView(pe))&&(pe=this.__addimage__.arrayBufferToBinaryString(pe)),{alias:D,data:P,index:C,filter:ct,decodeParameters:Xe,transparency:K,palette:se,sMask:pe,predictor:ne,width:N.width,height:N.height,bitsPerComponent:U,colorSpace:j}}}})(Xr.API),function(e){e.processGIF89A=function(t,r,i,A){var u=new bW(t),h=u.width,o=u.height,g=[];u.decodeAndBlitFrameRGBA(0,g);var x={data:g,width:h,height:o},E=new Uw(100).encode(x,100);return e.processJPEG.call(this,E,r,i,A)},e.processGIF87A=e.processGIF89A}(Xr.API),wA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),A=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:A,green:i,blue:r,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wA.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){mi.log("bit decode error:"+r)}},wA.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,A=0;A<t;A++)for(var u=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+8*A*4,o=0;o<8&&8*A+o<this.width;o++){var g=this.palette[u>>7-o&1];this.data[h+4*o]=g.blue,this.data[h+4*o+1]=g.green,this.data[h+4*o+2]=g.red,this.data[h+4*o+3]=255}r!==0&&(this.pos+=4-r)}},wA.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,A=0;A<e;A++){var u=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+2*A*4,o=u>>4,g=15&u,x=this.palette[o];if(this.data[h]=x.blue,this.data[h+1]=x.green,this.data[h+2]=x.red,this.data[h+3]=255,2*A+1>=this.width)break;x=this.palette[g],this.data[h+4]=x.blue,this.data[h+4+1]=x.green,this.data[h+4+2]=x.red,this.data[h+4+3]=255}t!==0&&(this.pos+=4-t)}},wA.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var A=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*i;if(A<this.palette.length){var h=this.palette[A];this.data[u]=h.red,this.data[u+1]=h.green,this.data[u+2]=h.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}e!==0&&(this.pos+=4-e)}},wA.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,A=0;A<this.width;A++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(u&t)/t*255|0,o=(u>>5&t)/t*255|0,g=(u>>10&t)/t*255|0,x=u>>15?255:0,E=i*this.width*4+4*A;this.data[E]=g,this.data[E+1]=o,this.data[E+2]=h,this.data[E+3]=x}this.pos+=e}},wA.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var A=this.bottom_up?i:this.height-1-i,u=0;u<this.width;u++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(h&t)/t*255|0,g=(h>>5&r)/r*255|0,x=(h>>11)/t*255|0,E=A*this.width*4+4*u;this.data[E]=x,this.data[E+1]=g,this.data[E+2]=o,this.data[E+3]=255}this.pos+=e}},wA.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),A=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*r;this.data[h]=u,this.data[h+1]=A,this.data[h+2]=i,this.data[h+3]=255}this.pos+=this.width%4}},wA.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),A=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=u,this.data[o+1]=A,this.data[o+2]=i,this.data[o+3]=h}},wA.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,i,A){var u=new wA(t,!1),h=u.width,o=u.height,g={data:u.getData(),width:h,height:o},x=new Uw(100).encode(g,100);return e.processJPEG.call(this,x,r,i,A)}}(Xr.API),Y4.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,i,A){var u=new Y4(t),h=u.width,o=u.height,g={data:u.getData(),width:h,height:o},x=new Uw(100).encode(g,100);return e.processJPEG.call(this,x,r,i,A)}}(Xr.API),Xr.API.processRGBA=function(e,t,r){for(var i=e.data,A=i.length,u=new Uint8Array(A/4*3),h=new Uint8Array(A/4),o=0,g=0,x=0;x<A;x+=4){var E=i[x],F=i[x+1],P=i[x+2],C=i[x+3];u[o++]=E,u[o++]=F,u[o++]=P,h[g++]=C}var D=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:D,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Xr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},wf=Xr.API,ty=wf.getCharWidthsArray=function(e,t){var r,i,A=(t=t||{}).font||this.internal.getFont(),u=t.fontSize||this.internal.getFontSize(),h=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:A.metadata.Unicode.widths,g=o.fof?o.fof:1,x=t.kerning?t.kerning:A.metadata.Unicode.kerning,E=x.fof?x.fof:1,F=t.doKerning!==!1,P=0,C=e.length,D=0,k=o[0]||g,j=[];for(r=0;r<C;r++)i=e.charCodeAt(r),typeof A.metadata.widthOfString=="function"?j.push((A.metadata.widthOfGlyph(A.metadata.characterToGlyph(i))+h*(1e3/u)||0)/1e3):(P=F&&Yn(x[i])==="object"&&!isNaN(parseInt(x[i][D],10))?x[i][D]/E:0,j.push((o[i]||k)/g+P)),D=i;return j},q4=wf.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),A=t.charSpace||this.internal.getCharSpace();return wf.processArabic&&(e=wf.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,r,A)/r:ty.apply(this,arguments).reduce(function(u,h){return u+h},0)},W4=function(e,t,r,i){for(var A=[],u=0,h=e.length,o=0;u!==h&&o+t[u]<r;)o+=t[u],u++;A.push(e.slice(0,u));var g=u;for(o=0;u!==h;)o+t[u]>i&&(A.push(e.slice(g,u)),o=0,g=u),o+=t[u],u++;return g!==u&&A.push(e.slice(g,u)),A},Z4=function(e,t,r){r||(r={});var i,A,u,h,o,g,x,E=[],F=[E],P=r.textIndent||0,C=0,D=0,k=e.split(" "),j=ty.apply(this,[" ",r])[0];if(g=r.lineIndent===-1?k[0].length+2:r.lineIndent||0){var U=Array(g).join(" "),N=[];k.map(function(ee){(ee=ee.split(/\s*\n/)).length>1?N=N.concat(ee.map(function(se,pe){return(pe&&se.length?`
`:"")+se})):N.push(ee[0])}),k=N,g=q4.apply(this,[U,r])}for(u=0,h=k.length;u<h;u++){var K=0;if(i=k[u],g&&i[0]==`
`&&(i=i.substr(1),K=1),P+C+(D=(A=ty.apply(this,[i,r])).reduce(function(ee,se){return ee+se},0))>t||K){if(D>t){for(o=W4.apply(this,[i,A,t-(P+C),t]),E.push(o.shift()),E=[o.pop()];o.length;)F.push([o.shift()]);D=A.slice(i.length-(E[0]?E[0].length:0)).reduce(function(ee,se){return ee+se},0)}else E=[i];F.push(E),P=D+g,C=j}else E.push(i),P+=C+D,C=j}return x=g?function(ee,se){return(se?U:"")+ee.join(" ")}:function(ee){return ee.join(" ")},F.map(x)},wf.splitTextToSize=function(e,t,r){var i,A=(r=r||{}).fontSize||this.internal.getFontSize(),u=(function(E){if(E.widths&&E.kerning)return{widths:E.widths,kerning:E.kerning};var F=this.internal.getFont(E.fontName,E.fontStyle);return F.metadata.Unicode?{widths:F.metadata.Unicode.widths||{0:1},kerning:F.metadata.Unicode.kerning||{}}:{font:F.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var h=1*this.internal.scaleFactor*t/A;u.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/A:0,u.lineIndent=r.lineIndent;var o,g,x=[];for(o=0,g=i.length;o<g;o++)x=x.concat(Z4.apply(this,[i[o],h,u]));return x},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},i={},A=0;A<t.length;A++)r[t[A]]="0123456789abcdef"[A],i["0123456789abcdef"[A]]=t[A];var u=function(F){return"0x"+parseInt(F,10).toString(16)},h=e.__fontmetrics__.compress=function(F){var P,C,D,k,j=["{"];for(var U in F){if(P=F[U],isNaN(parseInt(U,10))?C="'"+U+"'":(U=parseInt(U,10),C=(C=u(U).slice(2)).slice(0,-1)+i[C.slice(-1)]),typeof P=="number")P<0?(D=u(P).slice(3),k="-"):(D=u(P).slice(2),k=""),D=k+D.slice(0,-1)+i[D.slice(-1)];else{if(Yn(P)!=="object")throw new Error("Don't know what to do with value type "+Yn(P)+".");D=h(P)}j.push(C+D)}return j.push("}"),j.join("")},o=e.__fontmetrics__.uncompress=function(F){if(typeof F!="string")throw new Error("Invalid argument passed to uncompress.");for(var P,C,D,k,j={},U=1,N=j,K=[],ee="",se="",pe=F.length-1,ye=1;ye<pe;ye+=1)(k=F[ye])=="'"?P?(D=P.join(""),P=void 0):P=[]:P?P.push(k):k=="{"?(K.push([N,D]),N={},D=void 0):k=="}"?((C=K.pop())[0][C[1]]=N,D=void 0,N=C[0]):k=="-"?U=-1:D===void 0?r.hasOwnProperty(k)?(ee+=r[k],D=parseInt(ee,16)*U,U=1,ee=""):ee+=k:r.hasOwnProperty(k)?(se+=r[k],N[D]=parseInt(se,16)*U,U=1,D=void 0,se=""):se+=k;return j},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},x={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},E={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(F){var P=F.font,C=E.Unicode[P.postScriptName];C&&(P.metadata.Unicode={},P.metadata.Unicode.widths=C.widths,P.metadata.Unicode.kerning=C.kerning);var D=x.Unicode[P.postScriptName];D&&(P.metadata.Unicode.encoding=D,P.encoding=D.codePages[0])}])}(Xr.API),function(e){var t=function(r){for(var i=r.length,A=new Uint8Array(i),u=0;u<i;u++)A[u]=r.charCodeAt(u);return A};e.API.events.push(["addFont",function(r){var i=void 0,A=r.font,u=r.instance;if(!A.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+A.postScriptName+"').");if(typeof(i=u.existsFileInVFS(A.postScriptName)===!1?u.loadFile(A.postScriptName):u.getFileFromVFS(A.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+A.postScriptName+"').");(function(h,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Km(o)),h.metadata=e.API.TTFFont.open(o),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(A,i)}}])}(Xr),function(e){function t(){return(tn.canvg?Promise.resolve(tn.canvg):Ib(()=>import("./index.es-Rp3tA1c5.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Xr.API.addSvgAsImage=function(r,i,A,u,h,o,g,x){if(isNaN(i)||isNaN(A))throw mi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(h))throw mi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var E=document.createElement("canvas");E.width=u,E.height=h;var F=E.getContext("2d");F.fillStyle="#fff",F.fillRect(0,0,E.width,E.height);var P={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return t().then(function(D){return D.fromString(F,r,P)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(D){return D.render(P)}).then(function(){C.addImage(E.toDataURL("image/jpeg",1),i,A,u,h,g,x)})}}(),Xr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var A=0;A<this.internal.pages[i].length;A++)this.internal.pages[i][A]=this.internal.pages[i][A].replace(t,r);return this},Xr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var i,A,u,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(h),g=[],x=0,E=0,F=0;function P(D,k){var j,U=!1;for(j=0;j<D.length;j+=1)D[j]===k&&(U=!0);return U}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var C=o.length;for(F=0;F<C;F+=1)r[o[F]].value=r[o[F]].defaultValue,r[o[F]].explicitSet=!1}if(Yn(e)==="object"){for(A in e)if(u=e[A],P(o,A)&&u!==void 0){if(r[A].type==="boolean"&&typeof u=="boolean")r[A].value=u;else if(r[A].type==="name"&&P(r[A].valueSet,u))r[A].value=u;else if(r[A].type==="integer"&&Number.isInteger(u))r[A].value=u;else if(r[A].type==="array"){for(x=0;x<u.length;x+=1)if(i=!0,u[x].length===1&&typeof u[x][0]=="number")g.push(String(u[x]-1));else if(u[x].length>1){for(E=0;E<u[x].length;E+=1)typeof u[x][E]!="number"&&(i=!1);i===!0&&g.push([u[x][0]-1,u[x][1]-1].join(" "))}r[A].value="["+g.join(" ")+"]"}else r[A].value=r[A].defaultValue;r[A].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var D,k=[];for(D in r)r[D].explicitSet===!0&&(r[D].type==="name"?k.push("/"+D+" /"+r[D].value):k.push("/"+D+" "+r[D].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',A=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(i)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),x=u.length+h.length+o.length+A.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+x+" >>"),this.internal.write("stream"),this.internal.write(A+u+h+o+g),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,A){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:A||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Xr.API),function(e){var t=e.API,r=t.pdfEscape16=function(u,h){for(var o,g=h.metadata.Unicode.widths,x=["","0","00","000","0000"],E=[""],F=0,P=u.length;F<P;++F){if(o=h.metadata.characterToGlyph(u.charCodeAt(F)),h.metadata.glyIdsUsed.push(o),h.metadata.toUnicode[o]=u.charCodeAt(F),g.indexOf(o)==-1&&(g.push(o),g.push([parseInt(h.metadata.widthOfGlyph(o),10)])),o=="0")return E.join("");o=o.toString(16),E.push(x[4-o.length],o)}return E.join("")},i=function(u){var h,o,g,x,E,F,P;for(E=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],F=0,P=(o=Object.keys(u).sort(function(C,D){return C-D})).length;F<P;F++)h=o[F],g.length>=100&&(E+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),u[h]!==void 0&&u[h]!==null&&typeof u[h].toString=="function"&&(x=("0000"+u[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),g.push("<"+h+"><"+x+">"));return g.length&&(E+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),E+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(u){(function(h){var o=h.font,g=h.out,x=h.newObject,E=h.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var F=o.metadata.Unicode.widths,P=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),C="",D=0;D<P.length;D++)C+=String.fromCharCode(P[D]);var k=x();E({data:C,addLength1:!0,objectId:k}),g("endobj");var j=x();E({data:i(o.metadata.toUnicode),addLength1:!0,objectId:j}),g("endobj");var U=x();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+Sf(o.fontName)),g("/FontFile2 "+k+" 0 R"),g("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),g("/Flags "+o.metadata.flags),g("/StemV "+o.metadata.stemV),g("/ItalicAngle "+o.metadata.italicAngle),g("/Ascent "+o.metadata.ascender),g("/Descent "+o.metadata.decender),g("/CapHeight "+o.metadata.capHeight),g(">>"),g("endobj");var N=x();g("<<"),g("/Type /Font"),g("/BaseFont /"+Sf(o.fontName)),g("/FontDescriptor "+U+" 0 R"),g("/W "+e.API.PDFObject.convert(F)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+o.encoding+")"),g(">>"),g(">>"),g("endobj"),o.objectNumber=x(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+j+" 0 R"),g("/BaseFont /"+Sf(o.fontName)),g("/Encoding /"+o.encoding),g("/DescendantFonts ["+N+" 0 R]"),g(">>"),g("endobj"),o.isAlreadyPutted=!0}})(u)}]),t.events.push(["putFont",function(u){(function(h){var o=h.font,g=h.out,x=h.newObject,E=h.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var F=o.metadata.rawData,P="",C=0;C<F.length;C++)P+=String.fromCharCode(F[C]);var D=x();E({data:P,addLength1:!0,objectId:D}),g("endobj");var k=x();E({data:i(o.metadata.toUnicode),addLength1:!0,objectId:k}),g("endobj");var j=x();g("<<"),g("/Descent "+o.metadata.decender),g("/CapHeight "+o.metadata.capHeight),g("/StemV "+o.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+D+" 0 R"),g("/Flags 96"),g("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),g("/FontName /"+Sf(o.fontName)),g("/ItalicAngle "+o.metadata.italicAngle),g("/Ascent "+o.metadata.ascender),g(">>"),g("endobj"),o.objectNumber=x();for(var U=0;U<o.metadata.hmtx.widths.length;U++)o.metadata.hmtx.widths[U]=parseInt(o.metadata.hmtx.widths[U]*(1e3/o.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Sf(o.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),g("endobj"),o.isAlreadyPutted=!0}})(u)}]);var A=function(u){var h,o=u.text||"",g=u.x,x=u.y,E=u.options||{},F=u.mutex||{},P=F.pdfEscape,C=F.activeFontKey,D=F.fonts,k=C,j="",U=0,N="",K=D[k].encoding;if(D[k].encoding!=="Identity-H")return{text:o,x:g,y:x,options:E,mutex:F};for(N=o,k=C,Array.isArray(o)&&(N=o[0]),U=0;U<N.length;U+=1)D[k].metadata.hasOwnProperty("cmap")&&(h=D[k].metadata.cmap.unicode.codeMap[N[U].charCodeAt(0)]),h||N[U].charCodeAt(0)<256&&D[k].metadata.hasOwnProperty("Unicode")?j+=N[U]:j+="";var ee="";return parseInt(k.slice(1))<14||K==="WinAnsiEncoding"?ee=P(j,k).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):K==="Identity-H"&&(ee=r(j,D[k])),F.isHex=!0,{text:ee,x:g,y:x,options:E,mutex:F}};t.events.push(["postProcessText",function(u){var h=u.text||"",o=[],g={text:h,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(h)){var x=0;for(x=0;x<h.length;x+=1)Array.isArray(h[x])&&h[x].length===3?o.push([A(Object.assign({},g,{text:h[x][0]})).text,h[x][1],h[x][2]]):o.push(A(Object.assign({},g,{text:h[x]})).text);u.text=o}else u.text=A(Object.assign({},g,{text:h})).text}])}(Xr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,i){return t.call(this),this.internal.vFS[r]=i,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Xr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var A,u,h,o,g,x,E,F=t,P=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],U=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,K=0;this.__bidiEngine__={};var ee=function(oe){var he=oe.charCodeAt(),Ie=he>>8,be=k[Ie];return be!==void 0?F[256*be+(255&he)]:Ie===252||Ie===253?"AL":U.test(Ie)?"L":Ie===8?"R":"N"},se=function(oe){for(var he,Ie=0;Ie<oe.length;Ie++){if((he=ee(oe.charAt(Ie)))==="L")return!1;if(he==="R")return!0}return!1},pe=function(oe,he,Ie,be){var ct,Xe,lt,Le,ze=he[be];switch(ze){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(ze="AN");break;case"AL":N=!0,ze="R";break;case"WS":ze="N";break;case"CS":be<1||be+1>=he.length||(ct=Ie[be-1])!=="EN"&&ct!=="AN"||(Xe=he[be+1])!=="EN"&&Xe!=="AN"?ze="N":N&&(Xe="AN"),ze=Xe===ct?Xe:"N";break;case"ES":ze=(ct=be>0?Ie[be-1]:"B")==="EN"&&be+1<he.length&&he[be+1]==="EN"?"EN":"N";break;case"ET":if(be>0&&Ie[be-1]==="EN"){ze="EN";break}if(N){ze="N";break}for(lt=be+1,Le=he.length;lt<Le&&he[lt]==="ET";)lt++;ze=lt<Le&&he[lt]==="EN"?"EN":"N";break;case"NSM":if(h&&!o){for(Le=he.length,lt=be+1;lt<Le&&he[lt]==="NSM";)lt++;if(lt<Le){var it=oe[be],Lt=it>=1425&&it<=2303||it===64286;if(ct=he[lt],Lt&&(ct==="R"||ct==="AL")){ze="R";break}}}ze=be<1||(ct=he[be-1])==="B"?"N":Ie[be-1];break;case"B":N=!1,A=!0,ze=K;break;case"S":u=!0,ze="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":ze="N"}return ze},ye=function(oe,he,Ie){var be=oe.split("");return Ie&&ue(be,Ie,{hiLevel:K}),be.reverse(),he&&he.reverse(),be.join("")},ue=function(oe,he,Ie){var be,ct,Xe,lt,Le,ze=-1,it=oe.length,Lt=0,ne=[],Be=K?C:P,Pe=[];for(N=!1,A=!1,u=!1,ct=0;ct<it;ct++)Pe[ct]=ee(oe[ct]);for(Xe=0;Xe<it;Xe++){if(Le=Lt,ne[Xe]=pe(oe,Pe,ne,Xe),be=240&(Lt=Be[Le][D[ne[Xe]]]),Lt&=15,he[Xe]=lt=Be[Lt][5],be>0)if(be===16){for(ct=ze;ct<Xe;ct++)he[ct]=1;ze=-1}else ze=-1;if(Be[Lt][6])ze===-1&&(ze=Xe);else if(ze>-1){for(ct=ze;ct<Xe;ct++)he[ct]=lt;ze=-1}Pe[Xe]==="B"&&(he[Xe]=0),Ie.hiLevel|=lt}u&&function($e,nt,Ze){for(var pt=0;pt<Ze;pt++)if($e[pt]==="S"){nt[pt]=K;for(var dt=pt-1;dt>=0&&$e[dt]==="WS";dt--)nt[dt]=K}}(Pe,he,it)},Te=function(oe,he,Ie,be,ct){if(!(ct.hiLevel<oe)){if(oe===1&&K===1&&!A)return he.reverse(),void(Ie&&Ie.reverse());for(var Xe,lt,Le,ze,it=he.length,Lt=0;Lt<it;){if(be[Lt]>=oe){for(Le=Lt+1;Le<it&&be[Le]>=oe;)Le++;for(ze=Lt,lt=Le-1;ze<lt;ze++,lt--)Xe=he[ze],he[ze]=he[lt],he[lt]=Xe,Ie&&(Xe=Ie[ze],Ie[ze]=Ie[lt],Ie[lt]=Xe);Lt=Le}Lt++}}},Ke=function(oe,he,Ie){var be=oe.split(""),ct={hiLevel:K};return Ie||(Ie=[]),ue(be,Ie,ct),function(Xe,lt,Le){if(Le.hiLevel!==0&&E)for(var ze,it=0;it<Xe.length;it++)lt[it]===1&&(ze=j.indexOf(Xe[it]))>=0&&(Xe[it]=j[ze+1])}(be,Ie,ct),Te(2,be,he,Ie,ct),Te(1,be,he,Ie,ct),be.join("")};return this.__bidiEngine__.doBidiReorder=function(oe,he,Ie){if(function(ct,Xe){if(Xe)for(var lt=0;lt<ct.length;lt++)Xe[lt]=lt;o===void 0&&(o=se(ct)),x===void 0&&(x=se(ct))}(oe,he),h||!g||x)if(h&&g&&o^x)K=o?1:0,oe=ye(oe,he,Ie);else if(!h&&g&&x)K=o?1:0,oe=Ke(oe,he,Ie),oe=ye(oe,he);else if(!h||o||g||x){if(h&&!g&&o^x)oe=ye(oe,he),o?(K=0,oe=Ke(oe,he,Ie)):(K=1,oe=Ke(oe,he,Ie),oe=ye(oe,he));else if(h&&o&&!g&&x)K=1,oe=Ke(oe,he,Ie),oe=ye(oe,he);else if(!h&&!g&&o^x){var be=E;o?(K=1,oe=Ke(oe,he,Ie),K=0,E=!1,oe=Ke(oe,he,Ie),E=be):(K=0,oe=Ke(oe,he,Ie),oe=ye(oe,he),K=1,E=!1,oe=Ke(oe,he,Ie),E=be,oe=ye(oe,he))}}else K=0,oe=Ke(oe,he,Ie);else K=o?1:0,oe=Ke(oe,he,Ie);return oe},this.__bidiEngine__.setOptions=function(oe){oe&&(h=oe.isInputVisual,g=oe.isOutputVisual,o=oe.isInputRtl,x=oe.isOutputRtl,E=oe.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var A=i.text;i.x,i.y;var u=i.options||{};i.mutex,u.lang;var h=[];if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,r.setOptions(u),Object.prototype.toString.call(A)==="[object Array]"){var o=0;for(h=[],o=0;o<A.length;o+=1)Object.prototype.toString.call(A[o])==="[object Array]"?h.push([r.doBidiReorder(A[o][0]),A[o][1],A[o][2]]):h.push([r.doBidiReorder(A[o])]);i.text=h}else i.text=r.doBidiReorder(A);r.setOptions({isInputVisual:!0})}])}(Xr),Xr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Rh(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new NW(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new BW(this.contents),this.head=new SW(this),this.name=new PW(this),this.cmap=new pk(this),this.toUnicode={},this.hhea=new EW(this),this.maxp=new LW(this),this.hmtx=new MW(this),this.post=new IW(this),this.os2=new FW(this),this.loca=new RW(this),this.glyf=new kW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,i,A,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,o,g,x;for(x=[],h=0,o=(g=this.bbox).length;h<o;h++)t=g[h],x.push(Math.round(t*this.scaleFactor));return x}).call(this),this.stemV=0,this.post.exists?(i=255&(A=this.post.italic_angle),32768&(r=A>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,i){var A,u,h,o;for(h=0,u=0,o=(t=""+t).length;0<=o?u<o:u>o;u=0<=o?++u:--u)A=t.charCodeAt(u),h+=this.widthOfGlyph(this.characterToGlyph(A))+i*(1e3/r)||0;return h*(r/1e3)},e.prototype.lineHeight=function(t,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var DA,Rh=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,i;for(i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var r,i,A;for(A=[],r=0,i=t.length;0<=i?r<i:r>i;r=0<=i?++r:--r)A.push(this.writeByte(t.charCodeAt(r)));return A},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,i,A,u,h,o,g;return t=this.readByte(),r=this.readByte(),i=this.readByte(),A=this.readByte(),u=this.readByte(),h=this.readByte(),o=this.readByte(),g=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^A)+16777216*(255^u)+65536*(255^h)+256*(255^o)+(255^g)+1):72057594037927940*t+281474976710656*r+1099511627776*i+4294967296*A+16777216*u+65536*h+256*o+g},e.prototype.writeLongLong=function(t){var r,i;return r=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,i;for(r=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)r.push(this.readByte());return r},e.prototype.write=function(t){var r,i,A,u;for(u=[],i=0,A=t.length;i<A;i++)r=t[i],u.push(this.writeByte(r));return u},e}(),BW=function(){var e;function t(r){var i,A,u;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},A=0,u=this.tableCount;0<=u?A<u:A>u;A=0<=u?++A:--A)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(r){var i,A,u,h,o,g,x,E,F,P,C,D,k;for(k in C=Object.keys(r).length,g=Math.log(2),F=16*Math.floor(Math.log(C)/g),h=Math.floor(F/g),E=16*C-F,(A=new Rh).writeInt(this.scalarType),A.writeShort(C),A.writeShort(F),A.writeShort(h),A.writeShort(E),u=16*C,x=A.pos+u,o=null,D=[],r)for(P=r[k],A.writeString(k),A.writeInt(e(P)),A.writeInt(x),A.writeInt(P.length),D=D.concat(P),k==="head"&&(o=x),x+=P.length;x%4;)D.push(0),x++;return A.write(D),i=2981146554-e(A.data),A.pos=o+8,A.writeUInt32(i),A.data},e=function(r){var i,A,u,h;for(r=mk.call(r);r.length%4;)r.push(0);for(u=new Rh(r),A=0,i=0,h=r.length;i<h;i=i+=4)A+=u.readUInt32();return 4294967295&A},t}(),CW={}.hasOwnProperty,Ic=function(e,t){for(var r in t)CW.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};DA=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var SW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var i;return(i=new Rh).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(r),i.writeShort(this.glyphDataFormat),i.data},t}(),J4=function(){function e(t,r){var i,A,u,h,o,g,x,E,F,P,C,D,k,j,U,N,K;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),F=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=t.readByte();break;case 4:for(C=t.readUInt16(),P=C/2,t.pos+=6,u=function(){var ee,se;for(se=[],g=ee=0;0<=P?ee<P:ee>P;g=0<=P?++ee:--ee)se.push(t.readUInt16());return se}(),t.pos+=2,k=function(){var ee,se;for(se=[],g=ee=0;0<=P?ee<P:ee>P;g=0<=P?++ee:--ee)se.push(t.readUInt16());return se}(),x=function(){var ee,se;for(se=[],g=ee=0;0<=P?ee<P:ee>P;g=0<=P?++ee:--ee)se.push(t.readUInt16());return se}(),E=function(){var ee,se;for(se=[],g=ee=0;0<=P?ee<P:ee>P;g=0<=P?++ee:--ee)se.push(t.readUInt16());return se}(),A=(this.length-t.pos+this.offset)/2,o=function(){var ee,se;for(se=[],g=ee=0;0<=A?ee<A:ee>A;g=0<=A?++ee:--ee)se.push(t.readUInt16());return se}(),g=U=0,K=u.length;U<K;g=++U)for(j=u[g],i=N=D=k[g];D<=j?N<=j:N>=j;i=D<=j?++N:--N)E[g]===0?h=i+x[g]:(h=o[E[g]/2+(i-D)-(P-g)]||0)!==0&&(h+=x[g]),this.codeMap[i]=65535&h}t.pos=F}return e.encode=function(t,r){var i,A,u,h,o,g,x,E,F,P,C,D,k,j,U,N,K,ee,se,pe,ye,ue,Te,Ke,oe,he,Ie,be,ct,Xe,lt,Le,ze,it,Lt,ne,Be,Pe,$e,nt,Ze,pt,dt,Qt,Mt,$t;switch(be=new Rh,h=Object.keys(t).sort(function(jt,vr){return jt-vr}),r){case"macroman":for(k=0,j=function(){var jt=[];for(D=0;D<256;++D)jt.push(0);return jt}(),N={0:0},u={},ct=0,ze=h.length;ct<ze;ct++)N[dt=t[A=h[ct]]]==null&&(N[dt]=++k),u[A]={old:t[A],new:N[t[A]]},j[A]=N[t[A]];return be.writeUInt16(1),be.writeUInt16(0),be.writeUInt32(12),be.writeUInt16(0),be.writeUInt16(262),be.writeUInt16(0),be.write(j),{charMap:u,subtable:be.data,maxGlyphID:k+1};case"unicode":for(he=[],F=[],K=0,N={},i={},U=x=null,Xe=0,it=h.length;Xe<it;Xe++)N[se=t[A=h[Xe]]]==null&&(N[se]=++K),i[A]={old:se,new:N[se]},o=N[se]-A,U!=null&&o===x||(U&&F.push(U),he.push(A),x=o),U=A;for(U&&F.push(U),F.push(65535),he.push(65535),Ke=2*(Te=he.length),ue=2*Math.pow(Math.log(Te)/Math.LN2,2),P=Math.log(ue/2)/Math.LN2,ye=2*Te-ue,g=[],pe=[],C=[],D=lt=0,Lt=he.length;lt<Lt;D=++lt){if(oe=he[D],E=F[D],oe===65535){g.push(0),pe.push(0);break}if(oe-(Ie=i[oe].new)>=32768)for(g.push(0),pe.push(2*(C.length+Te-D)),A=Le=oe;oe<=E?Le<=E:Le>=E;A=oe<=E?++Le:--Le)C.push(i[A].new);else g.push(Ie-oe),pe.push(0)}for(be.writeUInt16(3),be.writeUInt16(1),be.writeUInt32(12),be.writeUInt16(4),be.writeUInt16(16+8*Te+2*C.length),be.writeUInt16(0),be.writeUInt16(Ke),be.writeUInt16(ue),be.writeUInt16(P),be.writeUInt16(ye),Ze=0,ne=F.length;Ze<ne;Ze++)A=F[Ze],be.writeUInt16(A);for(be.writeUInt16(0),pt=0,Be=he.length;pt<Be;pt++)A=he[pt],be.writeUInt16(A);for(Qt=0,Pe=g.length;Qt<Pe;Qt++)o=g[Qt],be.writeUInt16(o);for(Mt=0,$e=pe.length;Mt<$e;Mt++)ee=pe[Mt],be.writeUInt16(ee);for($t=0,nt=C.length;$t<nt;$t++)k=C[$t],be.writeUInt16(k);return{charMap:i,subtable:be.data,maxGlyphID:K+1}}},e}(),pk=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="cmap",t.prototype.parse=function(r){var i,A,u;for(r.pos=this.offset,this.version=r.readUInt16(),u=r.readUInt16(),this.tables=[],this.unicode=null,A=0;0<=u?A<u:A>u;A=0<=u?++A:--A)i=new J4(r,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(r,i){var A,u;return i==null&&(i="macroman"),A=J4.encode(r,i),(u=new Rh).writeUInt16(0),u.writeUInt16(1),A.table=u.data.concat(A.subtable),A},t}(),EW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),FW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var i,A;for(A=[],i=0;i<10;++i)A.push(r.readByte());return A}(),this.charRange=function(){var i,A;for(A=[],i=0;i<4;++i)A.push(r.readInt());return A}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var i,A;for(A=[],i=0;i<2;i=++i)A.push(r.readInt());return A}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),IW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="post",t.prototype.parse=function(r){var i,A,u;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var h;for(A=r.readUInt16(),this.glyphNameIndex=[],h=0;0<=A?h<A:h>A;h=0<=A?++h:--h)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],u=[];r.pos<this.offset+this.length;)i=r.readByte(),u.push(this.names.push(r.readString(i)));return u;case 151552:return A=r.readUInt16(),this.offsets=r.read(A);case 196608:break;case 262144:return this.map=(function(){var o,g,x;for(x=[],h=o=0,g=this.file.maxp.numGlyphs;0<=g?o<g:o>g;h=0<=g?++o:--o)x.push(r.readUInt32());return x}).call(this)}},t}(),TW=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},PW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="name",t.prototype.parse=function(r){var i,A,u,h,o,g,x,E,F,P,C;for(r.pos=this.offset,r.readShort(),i=r.readShort(),g=r.readShort(),A=[],h=0;0<=i?h<i:h>i;h=0<=i?++h:--h)A.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+g+r.readShort()});for(x={},h=F=0,P=A.length;F<P;h=++F)u=A[h],r.pos=u.offset,E=r.readString(u.length),o=new TW(E,u),x[C=u.nameID]==null&&(x[C]=[]),x[u.nameID].push(o);this.strings=x,this.copyright=x[0],this.fontFamily=x[1],this.fontSubfamily=x[2],this.uniqueSubfamily=x[3],this.fontName=x[4],this.version=x[5];try{this.postscriptName=x[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=x[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=x[7],this.manufacturer=x[8],this.designer=x[9],this.description=x[10],this.vendorUrl=x[11],this.designerUrl=x[12],this.license=x[13],this.licenseUrl=x[14],this.preferredFamily=x[15],this.preferredSubfamily=x[17],this.compatibleFull=x[18],this.sampleText=x[19]},t}(),LW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),MW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="hmtx",t.prototype.parse=function(r){var i,A,u,h,o,g,x;for(r.pos=this.offset,this.metrics=[],i=0,g=this.file.hhea.numberOfMetrics;0<=g?i<g:i>g;i=0<=g?++i:--i)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var E,F;for(F=[],i=E=0;0<=u?E<u:E>u;i=0<=u?++E:--E)F.push(r.readInt16());return F}(),this.widths=(function(){var E,F,P,C;for(C=[],E=0,F=(P=this.metrics).length;E<F;E++)h=P[E],C.push(h.advance);return C}).call(this),A=this.widths[this.widths.length-1],x=[],i=o=0;0<=u?o<u:o>u;i=0<=u?++o:--o)x.push(this.widths.push(A));return x},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),mk=[].slice,kW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var i,A,u,h,o,g,x,E,F,P;return r in this.cache?this.cache[r]:(h=this.file.loca,i=this.file.contents,A=h.indexOf(r),(u=h.lengthOf(r))===0?this.cache[r]=null:(i.pos=this.offset+A,o=(g=new Rh(i.read(u))).readShort(),E=g.readShort(),P=g.readShort(),x=g.readShort(),F=g.readShort(),this.cache[r]=o===-1?new QW(g,E,P,x,F):new UW(g,o,E,P,x,F),this.cache[r]))},t.prototype.encode=function(r,i,A){var u,h,o,g,x;for(o=[],h=[],g=0,x=i.length;g<x;g++)u=r[i[g]],h.push(o.length),u&&(o=o.concat(u.encode(A)));return h.push(o.length),{table:o,offsets:h}},t}(),UW=function(){function e(t,r,i,A,u,h){this.raw=t,this.numberOfContours=r,this.xMin=i,this.yMin=A,this.xMax=u,this.yMax=h,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),QW=function(){function e(t,r,i,A,u){var h,o;for(this.raw=t,this.xMin=r,this.yMin=i,this.xMax=A,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;o=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&o;)h.pos+=1&o?4:2,128&o?h.pos+=8:64&o?h.pos+=4:8&o&&(h.pos+=2)}return e.prototype.encode=function(){var t,r,i;for(r=new Rh(mk.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),RW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ic(t,DA),t.prototype.tag="loca",t.prototype.parse=function(r){var i,A;return r.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var u,h;for(h=[],A=0,u=this.length;A<u;A+=2)h.push(2*r.readUInt16());return h}).call(this):(function(){var u,h;for(h=[],A=0,u=this.length;A<u;A+=4)h.push(r.readUInt32());return h}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,i){for(var A=new Uint32Array(this.offsets.length),u=0,h=0,o=0;o<A.length;++o)if(A[o]=u,h<i.length&&i[h]==o){++h,A[o]=u;var g=this.offsets[o],x=this.offsets[o+1]-g;x>0&&(u+=x)}for(var E=new Array(4*A.length),F=0;F<A.length;++F)E[4*F+3]=255&A[F],E[4*F+2]=(65280&A[F])>>8,E[4*F+1]=(16711680&A[F])>>16,E[4*F]=(4278190080&A[F])>>24;return E},t}(),NW=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,i,A,u;for(r in A=this.font.cmap.tables[0].codeMap,t={},u=this.subset)i=u[r],t[r]=A[i];return t},e.prototype.glyphsFor=function(t){var r,i,A,u,h,o,g;for(A={},h=0,o=t.length;h<o;h++)A[u=t[h]]=this.font.glyf.glyphFor(u);for(u in r=[],A)(i=A[u])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(u in g=this.glyphsFor(r))i=g[u],A[u]=i;return A},e.prototype.encode=function(t,r){var i,A,u,h,o,g,x,E,F,P,C,D,k,j,U;for(A in i=pk.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(t),C={0:0},U=i.charMap)C[(g=U[A]).old]=g.new;for(D in P=i.maxGlyphID,h)D in C||(C[D]=P++);return E=function(N){var K,ee;for(K in ee={},N)ee[N[K]]=K;return ee}(C),F=Object.keys(E).sort(function(N,K){return N-K}),k=function(){var N,K,ee;for(ee=[],N=0,K=F.length;N<K;N++)o=F[N],ee.push(E[o]);return ee}(),u=this.font.glyf.encode(h,k,C),x=this.font.loca.encode(u.offsets,k),j={cmap:this.font.cmap.raw(),glyf:u.table,loca:x,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e}();Xr.API.PDFObject=function(){var e;function t(){}return e=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},t.convert=function(r){var i,A,u,h;if(Array.isArray(r))return"["+function(){var o,g,x;for(x=[],o=0,g=r.length;o<g;o++)i=r[o],x.push(t.convert(i));return x}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(A in u=["<<"],r)h=r[A],u.push("/"+A+" "+t.convert(h));return u.push(">>"),u.join(`
`)}return""+r},t}();function DW({filteredData:e,filteredGeoJSON:t,selectedMetric:r,exportOptions:i,onExportComplete:A}){const u=te.useRef(null),h=te.useCallback(async()=>{if(!u.current){console.error("Export failed: Render container not found."),A();return}try{const E=await WM(u.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff"});if(i.fileFormat==="png"){const F=document.createElement("a");F.download=`domapus-map-${r}.png`,F.href=E.toDataURL("image/png"),F.click()}else{const F=E.toDataURL("image/png"),P=new Xr({orientation:"landscape",unit:"px",format:[E.width,E.height]});P.addImage(F,"PNG",0,0,E.width,E.height),P.save(`domapus-map-${r}.pdf`)}}catch(E){console.error("Export failed during screenshot process:",E)}finally{A()}},[i,r]),o=E=>({"median-sale-price":"Median Sale Price","median-list-price":"Median List Price","median-dom":"Median Days on Market",inventory:"Inventory","new-listings":"New Listings","homes-sold":"Homes Sold","sale-to-list-ratio":"Sale to List Ratio","homes-sold-above-list":"Homes Sold Above List","off-market-2-weeks":"Off Market in 2 Weeks"})[E]||E,g=()=>i.regionScope==="state"?i.selectedState||"State":i.regionScope==="metro"?i.selectedMetro||"Metro Area":"United States",x=()=>new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});return Z.jsxs("div",{ref:u,className:"fixed top-0 left-0 w-[1200px] h-[900px] bg-white p-8 flex flex-col font-sans",style:{transform:"translateX(-9999px)"},children:[i.includeTitle&&Z.jsxs("header",{className:"text-center mb-4",children:[Z.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[o(r)," by ZIP Code"]}),Z.jsxs("p",{className:"text-lg text-gray-600",children:[g(),", ",x()]})]}),Z.jsx("main",{className:"flex-grow border border-gray-200 rounded-lg overflow-hidden bg-gray-50",children:t&&e.length>0?Z.jsx(u9,{filteredData:e,geoJSON:t,selectedMetric:r,regionScope:i.regionScope,onRenderComplete:h}):Z.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Preparing map data..."})}),Z.jsxs("footer",{className:"pt-4 flex justify-between items-end",children:[i.includeLegend&&Z.jsx(d9,{filteredZipData:e,selectedMetric:r,exportOptions:i}),Z.jsxs("div",{className:"text-right",children:[Z.jsx(f9,{size:"sm",className:"mb-1 justify-end"}),Z.jsx("p",{className:"text-xs text-gray-500",children:"Analytics by Domapus"}),Z.jsx("p",{className:"text-xs text-gray-400",children:"Data sourced from Redfin"})]})]})]})}function OW({allZipData:e,fullGeoJSON:t,selectedMetric:r}){const[i,A]=te.useState(!1),[u,h]=te.useState(null),[o,g]=te.useState(!1),{filteredData:x,filteredGeoJSON:E}=te.useMemo(()=>{if(!u||Object.keys(e).length===0||!t)return{filteredData:[],filteredGeoJSON:null};const D=Object.values(e).filter(U=>u.regionScope==="state"&&u.selectedState?U.state===u.selectedState:u.regionScope==="metro"&&u.selectedMetro?U.parent_metro===u.selectedMetro:!0),k=new Set(D.map(U=>U.zipCode)),j=t.features.filter(U=>{var N;return k.has((N=U.properties)==null?void 0:N.zipCode)});return{filteredData:D,filteredGeoJSON:{type:"FeatureCollection",features:j}}},[e,t,u]),F=D=>{h(D),g(!0)},P=()=>{g(!1),A(!1),h(null)},C=()=>{A(!1),g(!1),h(null)};return i?Z.jsxs("div",{className:"fixed inset-0 bg-gray-100 z-50 flex",children:[Z.jsx(a7,{allZipData:e,isExporting:o,onExport:F,onCancel:C}),Z.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:Z.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border text-center space-y-4",children:[Z.jsx("div",{role:"progressbar","aria-label":"Loading export map data",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),Z.jsxs("div",{children:[Z.jsx("h3",{className:"font-semibold text-lg",children:"Generating Your Export"}),Z.jsx("p",{className:"text-sm text-gray-600",children:"Please keep this window open. Your download will begin shortly."})]})]})}),o&&Z.jsx(DW,{filteredData:x,filteredGeoJSON:E,selectedMetric:r,exportOptions:u,onExportComplete:P})]}):Z.jsxs(Xo,{variant:"outline",size:"sm",onClick:()=>A(!0),children:[Z.jsx(i3,{className:"h-4 w-4 mr-2"}),"Export"]})}const zW={median_sale_price:"Median Sale Price",median_list_price:"Median List Price",median_dom:"Median Days on Market",inventory:"Inventory",new_listings:"New Listings",homes_sold:"Homes Sold",avg_sale_to_list_ratio:"Sale-to-List Price Ratio",sold_above_list:"% Homes Sold Above List",off_market_in_two_weeks:"% Off-Market in 2 Weeks"};function eF({selectedMetric:e,onMetricChange:t}){return Z.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-sm",children:[Z.jsx("label",{className:"block text-sm font-medium text-dashboard-text-secondary mb-2",children:"Visualization Metric"}),Z.jsxs(Jx,{value:e,onValueChange:t,children:[Z.jsx(ov,{className:"w-64","aria-label":"Select visualization metric",children:Z.jsx(eb,{placeholder:"Select a metric"})}),Z.jsx(av,{className:"z-[9999]",children:Object.entries(zW).map(([r,i])=>Z.jsx(lv,{value:r,children:i},r))})]})]})}const BB=te.forwardRef(({className:e,type:t,...r},i)=>Z.jsx("input",{type:t,className:Nn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));BB.displayName="Input";const HW=(e,t)=>{const[r,i]=te.useState(e);return te.useEffect(()=>{const A=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(A)}},[e,t]),r};function tF({onSearch:e}){const[t,r]=te.useState(""),i=HW(t,300);te.useEffect(()=>{i.trim()&&i.length>=3&&e(i.trim())},[i,e]);const A=h=>{const o=h.target.value.replace(/\D/g,"");r(o)},u=h=>{h.preventDefault(),t.trim()&&e(t.trim())};return Z.jsxs("form",{onSubmit:u,className:"flex items-center space-x-2",children:[Z.jsxs("div",{className:"relative flex-1",children:[Z.jsx(s3,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-dashboard-text-secondary"}),Z.jsx(BB,{type:"text",pattern:"[0-9]*",inputMode:"numeric",placeholder:"Enter ZIP code...",value:t,onChange:A,className:"pl-10 w-48",maxLength:5,"aria-label":"Search for ZIP code"})]}),Z.jsx(Xo,{type:"submit",variant:"outline",size:"sm","aria-label":"Search",children:"Search"})]})}function jW({lastUpdated:e}){const t=r=>{if(!r)return"July 1, 2025";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"July 1, 2025"}};return Z.jsxs("div",{className:"flex items-center space-x-2 bg-dashboard-panel border border-dashboard-border rounded-lg px-3 py-2 shadow-sm",children:[Z.jsx(PN,{className:"h-4 w-4 text-dashboard-text-secondary"}),Z.jsxs("span",{className:"text-sm text-dashboard-text-secondary",children:["Updated: ",t(e||"")]})]})}const Qw=768;function VW(){const[e,t]=te.useState(void 0);return te.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Qw-1}px)`),i=()=>{t(window.innerWidth<Qw)};return r.addEventListener("change",i),t(window.innerWidth<Qw),()=>r.removeEventListener("change",i)},[]),!!e}function KW({selectedMetric:e,onMetricChange:t,onSearch:r,lastUpdated:i,children:A}){const u=VW();return Z.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-4 bg-dashboard-panel border-b border-dashboard-border",children:[Z.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-6",children:[Z.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>window.location.reload(),title:"Click to reload page",children:[Z.jsx("img",{src:"/Domapus/apple-touch-icon.png",alt:"Domapus Logo",className:"h-8 w-8 sm:h-10 sm:w-10"}),Z.jsxs("div",{className:"flex flex-col font-logo",children:[Z.jsx("h1",{className:"text-lg sm:text-xl font-bold text-dashboard-text-primary leading-tight",children:"Domapus"}),Z.jsx("p",{className:"text-xs sm:text-sm text-dashboard-text-secondary leading-tight",children:"U.S. Housing Market Dashboard"})]})]}),!u&&Z.jsx(eF,{selectedMetric:e,onMetricChange:t})]}),Z.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[!u&&Z.jsx(tF,{onSearch:r}),!u&&Z.jsx(jW,{lastUpdated:i}),!u&&A,Z.jsx(Xo,{variant:"outline",size:"sm",asChild:!0,className:"hidden sm:flex",children:Z.jsxs("a",{href:"https://github.com/Jasperc2024/Domapus",target:"_blank",rel:"noopener noreferrer",children:[Z.jsx(NN,{className:"h-4 w-4 mr-2"}),Z.jsx("span",{children:"GitHub"})]})}),Z.jsx(Xo,{variant:"default",size:"sm",asChild:!0,className:"hidden sm:flex bg-pink-600 hover:bg-pink-700 text-white",children:Z.jsxs("a",{href:"https://buymeacoffee.com/JasperC",target:"_blank",rel:"noopener noreferrer",children:[Z.jsx(Mx,{className:"h-4 w-4 mr-2"}),Z.jsx("span",{children:"Sponsor"})]})})]}),u&&Z.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[1001] bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-lg",children:Z.jsxs("div",{className:"space-y-3",children:[Z.jsx(eF,{selectedMetric:e,onMetricChange:t}),Z.jsx(tF,{onSearch:r})]})})]})}const GW="https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json",$W="https://basemaps.cartocdn.com/gl/positron-labels-gl-style/style.json";function qW(e){const t=new Yf.Map({container:e,style:GW,center:[-98.5795,39.8283],zoom:5,minZoom:3,maxZoom:12,maxBounds:[[-180,-85],[180,85]],attributionControl:!1});return t.addControl(new Yf.NavigationControl({visualizePitch:!1}),"top-right"),t.addControl(new Yf.AttributionControl({customAttribution:"© <a href='https://carto.com/attributions'>CARTO</a>",compact:!0}),"bottom-left"),t.on("load",async()=>{try{t.getSource("zips")||t.addSource("zips",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.getLayer("zips-fill")||(t.addLayer({id:"zips-fill",type:"fill",source:"zips",paint:{"fill-color":["case",["has","metricValue"],["get","metricColor"],"#e0e0e0"],"fill-opacity":.7}}),t.addLayer({id:"zips-border",type:"line",source:"zips",paint:{"line-color":"#ffffff","line-width":.5,"line-opacity":.8}}),t.addLayer({id:"zips-points",type:"circle",source:"zips",filter:["all",["==",["geometry-type"],"Point"]],minzoom:8,paint:{"circle-color":["case",["has","metricValue"],["get","metricColor"],"#e0e0e0"],"circle-radius":5,"circle-stroke-width":1,"circle-stroke-color":"#ffffff"}}));const r=await fetch($W);if(r.ok){const i=await r.json();i.layers.forEach(A=>{if(A.type==="symbol"||A.type==="line"&&A.id.includes("boundary")||A.type==="line"&&A.id.includes("admin")){if(A.source&&!t.getSource(A.source)){const u=i.sources[A.source];u&&t.addSource(A.source,u)}t.getLayer(A.id)||t.addLayer({...A,id:`labels-${A.id}`})}})}}catch(r){console.warn("Failed to load label layers:",r)}}),t}function WW({selectedMetric:e,onZipSelect:t,searchZip:r,zipData:i,colorScaleDomain:A,isLoading:u,progress:h,processData:o}){const g=te.useRef(null),x=te.useRef(null),[E,F]=te.useState(!1),[P,C]=te.useState(null),D=te.useRef(!1),[k,j]=te.useState(null),U="/Domapus/";te.useEffect(()=>{if(x.current||!g.current)return;x.current=qW(g.current),x.current.once("load",()=>{F(!0)}),x.current.on("error",se=>{console.error("MapLibre error:",se),C("Map failed to initialize.")});const ee=new ResizeObserver(()=>{x.current&&x.current.resize()});return g.current&&ee.observe(g.current),()=>{ee.disconnect(),x.current&&(x.current.remove(),x.current=null)}});const N=te.useMemo(()=>!A||A.length<2?null:dB().domain(A).range(["#FFF9B0","#E84C61","#2E0B59"]).clamp(!0),[A]);te.useEffect(()=>{if(!k&&E){const ee=new AbortController;return(async()=>{try{const se=new URL(`${U}data/us-zip-codes.geojson.gz`,window.location.origin).href,pe=await fetch(se,{signal:ee.signal});if(!pe.ok)throw new Error(`Failed to fetch GeoJSON. Status: ${pe.status}`);const ye=await pe.json();j(ye)}catch(se){ee.signal.aborted||(console.error("Error loading base GeoJSON:",se),C("Failed to load base GeoJSON"))}})(),()=>ee.abort()}},[E,k]),te.useEffect(()=>{if(!E||!k||!N||Object.keys(i).length===0)return;const ee=new AbortController;return(async()=>{var se;try{C(null);const pe=await o({type:"PROCESS_GEOJSON",data:{geojson:k,zipData:i,selectedMetric:e}});if(ee.signal.aborted||!((se=x.current)!=null&&se.isStyleLoaded()))return;const ye=pe.features.map(Te=>{var Ke;return(Ke=Te.properties)!=null&&Ke.metricValue&&Te.properties.metricValue>0&&(Te.properties.metricColor=N(Te.properties.metricValue)),Te}),ue=x.current.getSource("zips");ue&&ue.setData({type:"FeatureCollection",features:ye}),D.current||(K(x.current),D.current=!0)}catch(pe){ee.signal.aborted||(console.error("Failed to update map layers:",pe),C("Failed to update map layers"))}})(),()=>ee.abort()},[E,k,N,i,e,o]),te.useEffect(()=>{if(!E||!x.current||!r||!i[r])return;const{longitude:ee,latitude:se}=i[r];ee&&se&&x.current.flyTo({center:[ee,se],zoom:10})},[E,r,i]);const K=ee=>{let se=null;const pe=["zips-fill"];ee.on("mousemove",pe,ye=>{var ue,Te,Ke,oe;if(ee.getCanvas().style.cursor=(ue=ye.features)!=null&&ue.length?"pointer":"",(oe=(Ke=(Te=ye.features)==null?void 0:Te[0])==null?void 0:Ke.properties)!=null&&oe.zipCode){const he=ye.features[0].properties,Ie=ye.features[0].geometry.type==="Point"?ye.features[0].geometry.coordinates:ye.lngLat;se==null||se.remove(),se=new Yf.Popup({closeButton:!1,offset:[0,-10]}).setLngLat(Ie).setHTML(h9(i[he.zipCode],e)).addTo(ee)}}),ee.on("mouseleave",pe,()=>{ee.getCanvas().style.cursor="",se==null||se.remove()}),ee.on("click",pe,ye=>{var Te,Ke;const ue=(Ke=(Te=ye.features)==null?void 0:Te[0])==null?void 0:Ke.properties;ue!=null&&ue.zipCode&&i[ue.zipCode]&&t(i[ue.zipCode])})};return Z.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[Z.jsx("div",{ref:g,"data-testid":"map-container",role:"application",className:"w-full h-full"}),(u||!E||P)&&Z.jsx("div",{role:"status","aria-label":"Loading...",className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-10",children:P?Z.jsx("div",{className:"text-red-500 font-bold",children:P}):Z.jsxs("div",{className:"text-center space-y-4",children:[Z.jsx("div",{role:"progressbar","aria-label":"Loading map data",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),Z.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[h.phase,"..."]})]})})]})}function rF(e,t){return t.includes("price")?`$${(e/1e3).toFixed(0)}k`:t.includes("ratio")||t.includes("above-list")?`${(e*100).toFixed(0)}%`:t.includes("dom")?`${Math.round(e)}`:e.toLocaleString()}function ZW({selectedMetric:e,colorScaleDomain:t}){const r=te.useMemo(()=>{if(!t)return{min:"N/A",max:"N/A"};const[A,u]=t;return{min:rF(A,e),max:rF(u,e)}},[e,t]),i=A=>({"median-sale-price":"Median Sale Price","median-list-price":"Median List Price","median-dom":"Median Days on Market",inventory:"Current Inventory","homes-sold":"Homes Sold","sale-to-list-ratio":"Sale-to-List Ratio"})[A]||"Metric";return Z.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-lg p-3 shadow-lg w-full max-w-xs",children:[Z.jsx("h3",{className:"text-xs font-semibold mb-2 text-gray-800",children:i(e)}),Z.jsx("div",{className:"h-3 rounded",style:{background:"linear-gradient(to right, #FFF9B0, #E84C61, #2E0B59)"}}),Z.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600 mt-1 font-medium",children:[Z.jsx("span",{children:r.min}),Z.jsx("span",{children:r.max})]})]})}function XW({onClose:e}){return te.useEffect(()=>{const t=setTimeout(e,2e4);return()=>clearTimeout(t)},[e]),Z.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:Z.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg shadow-lg p-4",children:[Z.jsxs("div",{className:"flex items-start justify-between",children:[Z.jsxs("div",{className:"flex items-start space-x-3",children:[Z.jsx(Mx,{className:"h-5 w-5 text-pink-600 mt-0.5 flex-shrink-0"}),Z.jsxs("div",{className:"text-sm text-dashboard-text-primary",children:[Z.jsx("p",{className:"font-semibold mb-1",children:"This site is proudly ad-free and built to serve the public."}),Z.jsx("p",{className:"text-dashboard-text-secondary",children:"If you find it useful, please consider sponsoring or supporting us to keep the data flowing and the site improving."})]})]}),Z.jsx(Xo,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0 flex-shrink-0",children:Z.jsx($v,{className:"h-4 w-4"})})]}),Z.jsxs("div",{className:"mt-3 flex space-x-2",children:[Z.jsx(Xo,{size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:Z.jsxs("a",{href:"https://buymeacoffee.com/jasperc",target:"_blank",rel:"noopener noreferrer",children:[Z.jsx(Mx,{className:"h-4 w-4 mr-2"}),"Sponsor"]})}),Z.jsx(Xo,{variant:"outline",size:"sm",onClick:e,children:"Maybe later"})]})]})})}const YW=Gv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function nF({className:e,variant:t,...r}){return Z.jsx("div",{className:Nn(YW({variant:t}),e),...r})}function JW({currentZip:e,allZipData:t,onClose:r}){const[i,A]=te.useState(""),[u,h]=te.useState(null),[o,g]=te.useState(""),x=()=>{if(!i.trim())return;g("");const C=t[i.trim()];C?h(C):(g("ZIP code not found in our database."),h(null))},E=(C,D)=>{if(C==null)return"N/A";const k=Number(C);if(isNaN(k))return"N/A";switch(D){case"price":return`$${k.toLocaleString()}`;case"days":return`${k} days`;case"percentage":return`${k.toFixed(1)}%`;case"ratio":return`${(k*100).toFixed(1)}%`;default:return k.toLocaleString()}},F=(C,D)=>{const k=Number(C),j=Number(D);if(isNaN(k)||isNaN(j))return"same";const U=k-j;return Math.abs(U)<.01?"same":U>0?"higher":"lower"},P=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"inventory",label:"Inventory",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"}];return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),Z.jsx(Xo,{variant:"ghost",size:"sm",onClick:r,"aria-label":"Close comparison",children:Z.jsx($v,{className:"h-4 w-4"})})]}),Z.jsxs("div",{className:"flex space-x-2",children:[Z.jsx(BB,{type:"text",pattern:"[0-9]*",inputMode:"numeric",maxLength:5,placeholder:"Enter ZIP code...",value:i,onChange:C=>A(C.target.value.replace(/\D/g,"")),onKeyDown:C=>{C.key==="Enter"&&x()},"aria-label":"ZIP code to compare"}),Z.jsx(Xo,{onClick:x,size:"sm","aria-label":"Search",children:Z.jsx(s3,{className:"h-4 w-4"})})]}),o&&Z.jsx("div",{className:"text-sm text-red-500 p-2 rounded bg-red-50",children:o}),u&&Z.jsxs("div",{className:"space-y-3 pt-2",children:[Z.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[Z.jsxs("div",{children:[Z.jsx(nF,{variant:"secondary",children:e.zipCode}),Z.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.city})]}),Z.jsx("div",{className:"text-xs text-muted-foreground self-center",children:"vs"}),Z.jsxs("div",{children:[Z.jsx(nF,{variant:"secondary",children:u.zipCode}),Z.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:u.city})]})]}),Z.jsx("div",{className:"space-y-2",children:P.map(C=>{const D=e[C.key],k=u[C.key],j=F(D,k),U=!C.key.includes("dom");return Z.jsx(Sh,{children:Z.jsxs(Eh,{className:"p-3",children:[Z.jsx("div",{className:"text-center mb-2 text-xs font-medium text-muted-foreground",children:C.label}),Z.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Z.jsx("div",{className:`text-center font-bold text-sm ${j==="higher"?U?"text-green-600":"text-red-600":j==="lower"?U?"text-red-600":"text-green-600":""}`,children:E(D,C.type)}),Z.jsx("div",{className:`text-center font-bold text-sm ${j==="lower"?U?"text-green-600":"text-red-600":j==="higher"?U?"text-red-600":"text-green-600":""}`,children:E(k,C.type)})]})]})},C.key)})})]})]})}function eZ({isOpen:e,isCollapsed:t,zipData:r,allZipData:i,onClose:A,onToggleCollapse:u}){const[h,o]=te.useState(!1);if(!e||!r)return null;const g=(F,P)=>{if(F==null)return"N/A";const C=Number(F);if(isNaN(C))return"N/A";switch(P){case"price":return`$${C.toLocaleString()}`;case"days":return`${C} days`;case"percentage":return`${C.toFixed(1)}%`;case"ratio":return`${(C*100).toFixed(1)}%`;case"coordinate":return C.toFixed(4);default:return C.toLocaleString()}},x=F=>{if(F==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const P=Number(F);if(isNaN(P))return{formatted:"N/A",isPositive:!1,isZero:!0};const C=P>0,D=P===0;return{formatted:`${C?"+":""}${P.toFixed(1)}%`,isPositive:C,isZero:D}},E=[{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom_pct",yoyKey:"median_sale_price_yoy_pct"},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom_pct",yoyKey:"median_list_price_yoy_pct"},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom_pct",yoyKey:"median_dom_yoy_pct"},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom_pct",yoyKey:"inventory_yoy_pct"},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom_pct",yoyKey:"new_listings_yoy_pct"},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom_pct",yoyKey:"homes_sold_yoy_pct"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:"avg_sale_to_list_ratio_mom_pct",yoyKey:"avg_sale_to_list_ratio_yoy_pct"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:"sold_above_list_mom_pct",yoyKey:"sold_above_list_yoy_pct"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:"off_market_in_two_weeks_mom_pct",yoyKey:"off_market_in_two_weeks_yoy_pct"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:"median_ppsf_mom_pct",yoyKey:"median_ppsf_yoy_pct"},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:"pending_sales_mom_pct",yoyKey:"pending_sales_yoy_pct"}].map(F=>({...F,value:r[F.key]})).filter(F=>F.value!==null&&F.value!==void 0);return Z.jsxs("div",{className:`fixed left-0 top-0 h-full bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 ${t?"w-16":"w-96"}`,children:[Z.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dashboard-border",role:"banner",children:[!t&&Z.jsxs("div",{children:[Z.jsx("h2",{className:"text-lg font-semibold",children:r.zipCode}),Z.jsx("p",{className:"text-sm text-muted-foreground",children:r.city})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(Xo,{variant:"ghost",size:"sm",onClick:u,"aria-label":t?"Expand sidebar":"Collapse sidebar",children:t?Z.jsx(kN,{className:"h-4 w-4"}):Z.jsx(MN,{className:"h-4 w-4"})}),!t&&Z.jsx(Xo,{variant:"ghost",size:"sm",onClick:A,"aria-label":"Close sidebar",children:Z.jsx($v,{className:"h-4 w-4"})})]})]}),!t&&Z.jsxs("div",{className:"flex flex-col h-[calc(100vh-73px)]",children:[h?Z.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:Z.jsx(JW,{currentZip:r,allZipData:i,onClose:()=>o(!1)})}):Z.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[Z.jsxs(Sh,{children:[Z.jsx(Nm,{children:Z.jsxs(Dm,{className:"text-sm flex items-center",children:[Z.jsx(DN,{className:"h-4 w-4 mr-2"}),"Location Information"]})}),Z.jsxs(Eh,{className:"space-y-2 text-sm",children:[Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"City:"}),Z.jsx("span",{className:"font-medium",children:r.city})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"County:"}),Z.jsx("span",{className:"font-medium",children:r.county})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Metro Area:"}),Z.jsx("span",{className:"font-medium",children:r.parent_metro})]})]})]}),Z.jsxs("h3",{className:"text-sm font-medium pt-2 flex items-center",children:[Z.jsx(TN,{className:"h-4 w-4 mr-2"}),"Market Data"]}),Z.jsx("div",{className:"space-y-3",children:E.map((F,P)=>{const C=F.momKey?x(r[F.momKey]):null,D=F.yoyKey?x(r[F.yoyKey]):null;return Z.jsx(Sh,{children:Z.jsx(Eh,{className:"p-4",children:Z.jsxs("div",{className:"space-y-2",children:[Z.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:F.label}),Z.jsx("p",{className:"text-xl font-bold",children:g(F.value,F.type)}),Z.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[C&&!C.isZero&&Z.jsxs("span",{className:`flex items-center ${C.isPositive?"text-green-600":"text-red-600"}`,children:[C.isPositive?Z.jsx(TS,{className:"h-3 w-3 mr-1"}):Z.jsx(IS,{className:"h-3 w-3 mr-1"}),C.formatted," vs last month"]}),D&&!D.isZero&&Z.jsxs("span",{className:`flex items-center ${D.isPositive?"text-green-600":"text-red-600"}`,children:[D.isPositive?Z.jsx(TS,{className:"h-3 w-3 mr-1"}):Z.jsx(IS,{className:"h-3 w-3 mr-1"}),D.formatted," vs last year"]})]})]})})},P)})})]}),Z.jsxs("div",{className:"p-4 mt-auto space-y-3 border-t border-dashboard-border bg-dashboard-panel",children:[Z.jsxs(Xo,{variant:"outline",className:"w-full",onClick:()=>o(!h),children:[Z.jsx(LN,{className:"h-4 w-4 mr-2"}),h?"Back to Details":"Compare ZIP Codes"]}),Z.jsx(Sh,{children:Z.jsx(Eh,{className:"p-3",children:Z.jsx("p",{className:"text-xs text-muted-foreground",children:"Data sourced from Redfin Data Center."})})})]})]})]})}const iF="/Domapus/";function tZ(){const[e,t]=te.useState("median_sale_price"),[r,i]=te.useState(null),[A,u]=te.useState(""),[h,o]=te.useState({}),[g,x]=te.useState(null),[E,F]=te.useState(null),[P,C]=te.useState(""),[D,k]=te.useState(!1),[j,U]=te.useState(!1),[N,K]=te.useState(!1),{processData:ee,isLoading:se,progress:pe}=tH();te.useEffect(()=>{(async()=>{const oe=new URL(`${iF}data/zip-data.json.gz`,window.location.origin).href,he=new URL(`${iF}data/us-zip-codes.geojson.gz`,window.location.origin).href;try{const Ie=await ee({type:"LOAD_AND_PROCESS_DATA",data:{url:oe,selectedMetric:"median_sale_price"}});Ie&&(o(Ie.zip_codes),x(Ie.bounds),C(Ie.last_updated_utc));const be=await fetch(he);if(!be.ok)throw new Error(`Failed to fetch GeoJSON. Status: ${be.status}`);const ct=await be.json();F(ct)}catch(Ie){console.error("❌ [HousingDashboard] CRITICAL ERROR: Failed to load initial data.",Ie)}})();const Ke=setTimeout(()=>K(!0),3e4);return()=>clearTimeout(Ke)},[ee]);const ye=Te=>{i(Te),k(!0)},ue=()=>{U(!j)};return Z.jsxs("div",{className:"w-full h-screen bg-dashboard-bg overflow-hidden flex flex-col",children:[N&&Z.jsx(XW,{onClose:()=>K(!1)}),Z.jsx(KW,{selectedMetric:e,onMetricChange:t,onSearch:u,lastUpdated:P,children:Z.jsx(OW,{allZipData:h,fullGeoJSON:E,selectedMetric:e})}),Z.jsxs("div",{className:"flex flex-1 relative",children:[D&&Z.jsx(eZ,{isOpen:D,isCollapsed:j,zipData:r,allZipData:h,onClose:()=>k(!1),onToggleCollapse:ue}),Z.jsxs("div",{className:`flex-1 relative transition-all duration-300 ${D?j?"ml-16":"ml-96":"ml-0"}`,children:[Z.jsx("div",{className:"absolute inset-0",children:Z.jsx(WW,{selectedMetric:e,onZipSelect:ye,searchZip:A,zipData:h,colorScaleDomain:g?[g.min,g.max]:null,isLoading:se||!E,progress:pe,processData:ee})}),Z.jsx("div",{className:"absolute bottom-4 right-4 w-64 z-[1000] pointer-events-auto",children:Z.jsx(ZW,{selectedMetric:e,colorScaleDomain:g?[g.min,g.max]:null})})]})]})]})}const rZ=()=>Z.jsx(tZ,{}),nZ=()=>{const e=AP();return te.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),Z.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:Z.jsxs("div",{className:"text-center",children:[Z.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),Z.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),Z.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},iZ=new cz,sZ=()=>Z.jsx(hz,{client:iZ,children:Z.jsxs(OO,{children:[Z.jsx(bD,{}),Z.jsx(t8,{}),Z.jsx(Jz,{basename:"/Domapus",children:Z.jsxs(Zz,{children:[Z.jsx(jx,{path:"/",element:Z.jsx(rZ,{})}),Z.jsx(jx,{path:"*",element:Z.jsx(nZ,{})})]})})]})});class oZ extends hr.Component{constructor(r){super(r);h5(this,"handleTryAgain",()=>{this.setState({hasError:!1})});this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(r,i){console.error("Error Boundary Caught:",r,i)}render(){return this.state.hasError?Z.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center p-4",children:[Z.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Something went wrong."}),Z.jsx("p",{className:"text-gray-700 mb-6",children:"We've logged the issue and will look into it. Please try again."}),Z.jsx(Xo,{onClick:this.handleTryAgain,children:"Try Again"})]}):this.props.children}}ST(document.getElementById("root")).render(Z.jsx(oZ,{children:Z.jsx(sZ,{})}));export{Yn as _,s6 as c,zb as g};
