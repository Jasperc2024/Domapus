function zT(e,n){for(var i=0;i<n.length;i++){const l=n[i];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in e)){const f=Object.getOwnPropertyDescriptor(l,h);f&&Object.defineProperty(e,h,f.get?f:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const f of h)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function i(h){const f={};return h.integrity&&(f.integrity=h.integrity),h.referrerPolicy&&(f.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?f.credentials="include":h.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(h){if(h.ep)return;h.ep=!0;const f=i(h);fetch(h.href,f)}})();var ZV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vv={exports:{}},rm={},Gv={exports:{}},ri={};var Pb;function HT(){if(Pb)return ri;Pb=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),U=Symbol.iterator;function Q(Ue){return Ue===null||typeof Ue!="object"?null:(Ue=U&&Ue[U]||Ue["@@iterator"],typeof Ue=="function"?Ue:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,z={};function O(Ue,ie,Ee){this.props=Ue,this.context=ie,this.refs=z,this.updater=Ee||P}O.prototype.isReactComponent={},O.prototype.setState=function(Ue,ie){if(typeof Ue!="object"&&typeof Ue!="function"&&Ue!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ue,ie,"setState")},O.prototype.forceUpdate=function(Ue){this.updater.enqueueForceUpdate(this,Ue,"forceUpdate")};function W(){}W.prototype=O.prototype;function ne(Ue,ie,Ee){this.props=Ue,this.context=ie,this.refs=z,this.updater=Ee||P}var ce=ne.prototype=new W;ce.constructor=ne,$(ce,O.prototype),ce.isPureReactComponent=!0;var de=Array.isArray,Se=Object.prototype.hasOwnProperty,ze={current:null},Ze={key:!0,ref:!0,__self:!0,__source:!0};function Qe(Ue,ie,Ee){var De,Ye={},at=null,tt=null;if(ie!=null)for(De in ie.ref!==void 0&&(tt=ie.ref),ie.key!==void 0&&(at=""+ie.key),ie)Se.call(ie,De)&&!Ze.hasOwnProperty(De)&&(Ye[De]=ie[De]);var wt=arguments.length-2;if(wt===1)Ye.children=Ee;else if(1<wt){for(var Et=Array(wt),Pt=0;Pt<wt;Pt++)Et[Pt]=arguments[Pt+2];Ye.children=Et}if(Ue&&Ue.defaultProps)for(De in wt=Ue.defaultProps,wt)Ye[De]===void 0&&(Ye[De]=wt[De]);return{$$typeof:e,type:Ue,key:at,ref:tt,props:Ye,_owner:ze.current}}function be(Ue,ie){return{$$typeof:e,type:Ue.type,key:ie,ref:Ue.ref,props:Ue.props,_owner:Ue._owner}}function Ge(Ue){return typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===e}function le(Ue){var ie={"=":"=0",":":"=2"};return"$"+Ue.replace(/[=:]/g,function(Ee){return ie[Ee]})}var ge=/\/+/g;function Pe(Ue,ie){return typeof Ue=="object"&&Ue!==null&&Ue.key!=null?le(""+Ue.key):ie.toString(36)}function Fe(Ue,ie,Ee,De,Ye){var at=typeof Ue;(at==="undefined"||at==="boolean")&&(Ue=null);var tt=!1;if(Ue===null)tt=!0;else switch(at){case"string":case"number":tt=!0;break;case"object":switch(Ue.$$typeof){case e:case n:tt=!0}}if(tt)return tt=Ue,Ye=Ye(tt),Ue=De===""?"."+Pe(tt,0):De,de(Ye)?(Ee="",Ue!=null&&(Ee=Ue.replace(ge,"$&/")+"/"),Fe(Ye,ie,Ee,"",function(Pt){return Pt})):Ye!=null&&(Ge(Ye)&&(Ye=be(Ye,Ee+(!Ye.key||tt&&tt.key===Ye.key?"":(""+Ye.key).replace(ge,"$&/")+"/")+Ue)),ie.push(Ye)),1;if(tt=0,De=De===""?".":De+":",de(Ue))for(var wt=0;wt<Ue.length;wt++){at=Ue[wt];var Et=De+Pe(at,wt);tt+=Fe(at,ie,Ee,Et,Ye)}else if(Et=Q(Ue),typeof Et=="function")for(Ue=Et.call(Ue),wt=0;!(at=Ue.next()).done;)at=at.value,Et=De+Pe(at,wt++),tt+=Fe(at,ie,Ee,Et,Ye);else if(at==="object")throw ie=String(Ue),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(Ue).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return tt}function pt(Ue,ie,Ee){if(Ue==null)return Ue;var De=[],Ye=0;return Fe(Ue,De,"","",function(at){return ie.call(Ee,at,Ye++)}),De}function ut(Ue){if(Ue._status===-1){var ie=Ue._result;ie=ie(),ie.then(function(Ee){(Ue._status===0||Ue._status===-1)&&(Ue._status=1,Ue._result=Ee)},function(Ee){(Ue._status===0||Ue._status===-1)&&(Ue._status=2,Ue._result=Ee)}),Ue._status===-1&&(Ue._status=0,Ue._result=ie)}if(Ue._status===1)return Ue._result.default;throw Ue._result}var At={current:null},Ne={transition:null},Ie={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Ne,ReactCurrentOwner:ze};function yt(){throw Error("act(...) is not supported in production builds of React.")}return ri.Children={map:pt,forEach:function(Ue,ie,Ee){pt(Ue,function(){ie.apply(this,arguments)},Ee)},count:function(Ue){var ie=0;return pt(Ue,function(){ie++}),ie},toArray:function(Ue){return pt(Ue,function(ie){return ie})||[]},only:function(Ue){if(!Ge(Ue))throw Error("React.Children.only expected to receive a single React element child.");return Ue}},ri.Component=O,ri.Fragment=i,ri.Profiler=h,ri.PureComponent=ne,ri.StrictMode=l,ri.Suspense=x,ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,ri.act=yt,ri.cloneElement=function(Ue,ie,Ee){if(Ue==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ue+".");var De=$({},Ue.props),Ye=Ue.key,at=Ue.ref,tt=Ue._owner;if(ie!=null){if(ie.ref!==void 0&&(at=ie.ref,tt=ze.current),ie.key!==void 0&&(Ye=""+ie.key),Ue.type&&Ue.type.defaultProps)var wt=Ue.type.defaultProps;for(Et in ie)Se.call(ie,Et)&&!Ze.hasOwnProperty(Et)&&(De[Et]=ie[Et]===void 0&&wt!==void 0?wt[Et]:ie[Et])}var Et=arguments.length-2;if(Et===1)De.children=Ee;else if(1<Et){wt=Array(Et);for(var Pt=0;Pt<Et;Pt++)wt[Pt]=arguments[Pt+2];De.children=wt}return{$$typeof:e,type:Ue.type,key:Ye,ref:at,props:De,_owner:tt}},ri.createContext=function(Ue){return Ue={$$typeof:m,_currentValue:Ue,_currentValue2:Ue,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ue.Provider={$$typeof:f,_context:Ue},Ue.Consumer=Ue},ri.createElement=Qe,ri.createFactory=function(Ue){var ie=Qe.bind(null,Ue);return ie.type=Ue,ie},ri.createRef=function(){return{current:null}},ri.forwardRef=function(Ue){return{$$typeof:a,render:Ue}},ri.isValidElement=Ge,ri.lazy=function(Ue){return{$$typeof:I,_payload:{_status:-1,_result:Ue},_init:ut}},ri.memo=function(Ue,ie){return{$$typeof:S,type:Ue,compare:ie===void 0?null:ie}},ri.startTransition=function(Ue){var ie=Ne.transition;Ne.transition={};try{Ue()}finally{Ne.transition=ie}},ri.unstable_act=yt,ri.useCallback=function(Ue,ie){return At.current.useCallback(Ue,ie)},ri.useContext=function(Ue){return At.current.useContext(Ue)},ri.useDebugValue=function(){},ri.useDeferredValue=function(Ue){return At.current.useDeferredValue(Ue)},ri.useEffect=function(Ue,ie){return At.current.useEffect(Ue,ie)},ri.useId=function(){return At.current.useId()},ri.useImperativeHandle=function(Ue,ie,Ee){return At.current.useImperativeHandle(Ue,ie,Ee)},ri.useInsertionEffect=function(Ue,ie){return At.current.useInsertionEffect(Ue,ie)},ri.useLayoutEffect=function(Ue,ie){return At.current.useLayoutEffect(Ue,ie)},ri.useMemo=function(Ue,ie){return At.current.useMemo(Ue,ie)},ri.useReducer=function(Ue,ie,Ee){return At.current.useReducer(Ue,ie,Ee)},ri.useRef=function(Ue){return At.current.useRef(Ue)},ri.useState=function(Ue){return At.current.useState(Ue)},ri.useSyncExternalStore=function(Ue,ie,Ee){return At.current.useSyncExternalStore(Ue,ie,Ee)},ri.useTransition=function(){return At.current.useTransition()},ri.version="18.3.1",ri}var Lb;function gw(){return Lb||(Lb=1,Gv.exports=HT()),Gv.exports}var Mb;function jT(){if(Mb)return rm;Mb=1;var e=gw(),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,h=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function m(a,x,S){var I,U={},Q=null,P=null;S!==void 0&&(Q=""+S),x.key!==void 0&&(Q=""+x.key),x.ref!==void 0&&(P=x.ref);for(I in x)l.call(x,I)&&!f.hasOwnProperty(I)&&(U[I]=x[I]);if(a&&a.defaultProps)for(I in x=a.defaultProps,x)U[I]===void 0&&(U[I]=x[I]);return{$$typeof:n,type:a,key:Q,ref:P,props:U,_owner:h.current}}return rm.Fragment=i,rm.jsx=m,rm.jsxs=m,rm}var kb;function VT(){return kb||(kb=1,Vv.exports=jT()),Vv.exports}var oe=VT(),Dg={},Kv={exports:{}},$c={},qv={exports:{}},$v={};var Ub;function GT(){return Ub||(Ub=1,(function(e){function n(Ne,Ie){var yt=Ne.length;Ne.push(Ie);e:for(;0<yt;){var Ue=yt-1>>>1,ie=Ne[Ue];if(0<h(ie,Ie))Ne[Ue]=Ie,Ne[yt]=ie,yt=Ue;else break e}}function i(Ne){return Ne.length===0?null:Ne[0]}function l(Ne){if(Ne.length===0)return null;var Ie=Ne[0],yt=Ne.pop();if(yt!==Ie){Ne[0]=yt;e:for(var Ue=0,ie=Ne.length,Ee=ie>>>1;Ue<Ee;){var De=2*(Ue+1)-1,Ye=Ne[De],at=De+1,tt=Ne[at];if(0>h(Ye,yt))at<ie&&0>h(tt,Ye)?(Ne[Ue]=tt,Ne[at]=yt,Ue=at):(Ne[Ue]=Ye,Ne[De]=yt,Ue=De);else if(at<ie&&0>h(tt,yt))Ne[Ue]=tt,Ne[at]=yt,Ue=at;else break e}}return Ie}function h(Ne,Ie){var yt=Ne.sortIndex-Ie.sortIndex;return yt!==0?yt:Ne.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var m=Date,a=m.now();e.unstable_now=function(){return m.now()-a}}var x=[],S=[],I=1,U=null,Q=3,P=!1,$=!1,z=!1,O=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(Ne){for(var Ie=i(S);Ie!==null;){if(Ie.callback===null)l(S);else if(Ie.startTime<=Ne)l(S),Ie.sortIndex=Ie.expirationTime,n(x,Ie);else break;Ie=i(S)}}function de(Ne){if(z=!1,ce(Ne),!$)if(i(x)!==null)$=!0,ut(Se);else{var Ie=i(S);Ie!==null&&At(de,Ie.startTime-Ne)}}function Se(Ne,Ie){$=!1,z&&(z=!1,W(Qe),Qe=-1),P=!0;var yt=Q;try{for(ce(Ie),U=i(x);U!==null&&(!(U.expirationTime>Ie)||Ne&&!le());){var Ue=U.callback;if(typeof Ue=="function"){U.callback=null,Q=U.priorityLevel;var ie=Ue(U.expirationTime<=Ie);Ie=e.unstable_now(),typeof ie=="function"?U.callback=ie:U===i(x)&&l(x),ce(Ie)}else l(x);U=i(x)}if(U!==null)var Ee=!0;else{var De=i(S);De!==null&&At(de,De.startTime-Ie),Ee=!1}return Ee}finally{U=null,Q=yt,P=!1}}var ze=!1,Ze=null,Qe=-1,be=5,Ge=-1;function le(){return!(e.unstable_now()-Ge<be)}function ge(){if(Ze!==null){var Ne=e.unstable_now();Ge=Ne;var Ie=!0;try{Ie=Ze(!0,Ne)}finally{Ie?Pe():(ze=!1,Ze=null)}}else ze=!1}var Pe;if(typeof ne=="function")Pe=function(){ne(ge)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,pt=Fe.port2;Fe.port1.onmessage=ge,Pe=function(){pt.postMessage(null)}}else Pe=function(){O(ge,0)};function ut(Ne){Ze=Ne,ze||(ze=!0,Pe())}function At(Ne,Ie){Qe=O(function(){Ne(e.unstable_now())},Ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){$||P||($=!0,ut(Se))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return Q},e.unstable_getFirstCallbackNode=function(){return i(x)},e.unstable_next=function(Ne){switch(Q){case 1:case 2:case 3:var Ie=3;break;default:Ie=Q}var yt=Q;Q=Ie;try{return Ne()}finally{Q=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,Ie){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var yt=Q;Q=Ne;try{return Ie()}finally{Q=yt}},e.unstable_scheduleCallback=function(Ne,Ie,yt){var Ue=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Ue+yt:Ue):yt=Ue,Ne){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=yt+ie,Ne={id:I++,callback:Ie,priorityLevel:Ne,startTime:yt,expirationTime:ie,sortIndex:-1},yt>Ue?(Ne.sortIndex=yt,n(S,Ne),i(x)===null&&Ne===i(S)&&(z?(W(Qe),Qe=-1):z=!0,At(de,yt-Ue))):(Ne.sortIndex=ie,n(x,Ne),$||P||($=!0,ut(Se))),Ne},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(Ne){var Ie=Q;return function(){var yt=Q;Q=Ie;try{return Ne.apply(this,arguments)}finally{Q=yt}}}})($v)),$v}var Db;function KT(){return Db||(Db=1,qv.exports=GT()),qv.exports}var Rb;function qT(){if(Rb)return $c;Rb=1;var e=gw(),n=KT();function i(u){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+u,C=1;C<arguments.length;C++)g+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+u+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,h={};function f(u,g){m(u,g),m(u+"Capture",g)}function m(u,g){for(h[u]=g,u=0;u<g.length;u++)l.add(g[u])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},U={};function Q(u){return x.call(U,u)?!0:x.call(I,u)?!1:S.test(u)?U[u]=!0:(I[u]=!0,!1)}function P(u,g,C,M){if(C!==null&&C.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return M?!1:C!==null?!C.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function $(u,g,C,M){if(g===null||typeof g>"u"||P(u,g,C,M))return!0;if(M)return!1;if(C!==null)switch(C.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function z(u,g,C,M,V,X,we){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=M,this.attributeNamespace=V,this.mustUseProperty=C,this.propertyName=u,this.type=g,this.sanitizeURL=X,this.removeEmptyString=we}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){O[u]=new z(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var g=u[0];O[g]=new z(g,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){O[u]=new z(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){O[u]=new z(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){O[u]=new z(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){O[u]=new z(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){O[u]=new z(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){O[u]=new z(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){O[u]=new z(u,5,!1,u.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function ne(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var g=u.replace(W,ne);O[g]=new z(g,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var g=u.replace(W,ne);O[g]=new z(g,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var g=u.replace(W,ne);O[g]=new z(g,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){O[u]=new z(u,1,!1,u.toLowerCase(),null,!1,!1)}),O.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){O[u]=new z(u,1,!1,u.toLowerCase(),null,!0,!0)});function ce(u,g,C,M){var V=O.hasOwnProperty(g)?O[g]:null;(V!==null?V.type!==0:M||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&($(g,C,V,M)&&(C=null),M||V===null?Q(g)&&(C===null?u.removeAttribute(g):u.setAttribute(g,""+C)):V.mustUseProperty?u[V.propertyName]=C===null?V.type===3?!1:"":C:(g=V.attributeName,M=V.attributeNamespace,C===null?u.removeAttribute(g):(V=V.type,C=V===3||V===4&&C===!0?"":""+C,M?u.setAttributeNS(M,g,C):u.setAttribute(g,C))))}var de=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),ze=Symbol.for("react.portal"),Ze=Symbol.for("react.fragment"),Qe=Symbol.for("react.strict_mode"),be=Symbol.for("react.profiler"),Ge=Symbol.for("react.provider"),le=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),ut=Symbol.for("react.lazy"),At=Symbol.for("react.offscreen"),Ne=Symbol.iterator;function Ie(u){return u===null||typeof u!="object"?null:(u=Ne&&u[Ne]||u["@@iterator"],typeof u=="function"?u:null)}var yt=Object.assign,Ue;function ie(u){if(Ue===void 0)try{throw Error()}catch(C){var g=C.stack.trim().match(/\n( *(at )?)/);Ue=g&&g[1]||""}return`
`+Ue+u}var Ee=!1;function De(u,g){if(!u||Ee)return"";Ee=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Ht){var M=Ht}Reflect.construct(u,[],g)}else{try{g.call()}catch(Ht){M=Ht}u.call(g.prototype)}else{try{throw Error()}catch(Ht){M=Ht}u()}}catch(Ht){if(Ht&&M&&typeof Ht.stack=="string"){for(var V=Ht.stack.split(`
`),X=M.stack.split(`
`),we=V.length-1,lt=X.length-1;1<=we&&0<=lt&&V[we]!==X[lt];)lt--;for(;1<=we&&0<=lt;we--,lt--)if(V[we]!==X[lt]){if(we!==1||lt!==1)do if(we--,lt--,0>lt||V[we]!==X[lt]){var _t=`
`+V[we].replace(" at new "," at ");return u.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",u.displayName)),_t}while(1<=we&&0<=lt);break}}}finally{Ee=!1,Error.prepareStackTrace=C}return(u=u?u.displayName||u.name:"")?ie(u):""}function Ye(u){switch(u.tag){case 5:return ie(u.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return u=De(u.type,!1),u;case 11:return u=De(u.type.render,!1),u;case 1:return u=De(u.type,!0),u;default:return""}}function at(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case Ze:return"Fragment";case ze:return"Portal";case be:return"Profiler";case Qe:return"StrictMode";case Pe:return"Suspense";case Fe:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case le:return(u.displayName||"Context")+".Consumer";case Ge:return(u._context.displayName||"Context")+".Provider";case ge:var g=u.render;return u=u.displayName,u||(u=g.displayName||g.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case pt:return g=u.displayName||null,g!==null?g:at(u.type)||"Memo";case ut:g=u._payload,u=u._init;try{return at(u(g))}catch{}}return null}function tt(u){var g=u.type;switch(u.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=g.render,u=u.displayName||u.name||"",g.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return at(g);case 8:return g===Qe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function wt(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Et(u){var g=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Pt(u){var g=Et(u)?"checked":"value",C=Object.getOwnPropertyDescriptor(u.constructor.prototype,g),M=""+u[g];if(!u.hasOwnProperty(g)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var V=C.get,X=C.set;return Object.defineProperty(u,g,{configurable:!0,get:function(){return V.call(this)},set:function(we){M=""+we,X.call(this,we)}}),Object.defineProperty(u,g,{enumerable:C.enumerable}),{getValue:function(){return M},setValue:function(we){M=""+we},stopTracking:function(){u._valueTracker=null,delete u[g]}}}}function Wt(u){u._valueTracker||(u._valueTracker=Pt(u))}function lr(u){if(!u)return!1;var g=u._valueTracker;if(!g)return!0;var C=g.getValue(),M="";return u&&(M=Et(u)?u.checked?"true":"false":u.value),u=M,u!==C?(g.setValue(u),!0):!1}function fr(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Br(u,g){var C=g.checked;return yt({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??u._wrapperState.initialChecked})}function He(u,g){var C=g.defaultValue==null?"":g.defaultValue,M=g.checked!=null?g.checked:g.defaultChecked;C=wt(g.value!=null?g.value:C),u._wrapperState={initialChecked:M,initialValue:C,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function yr(u,g){g=g.checked,g!=null&&ce(u,"checked",g,!1)}function kr(u,g){yr(u,g);var C=wt(g.value),M=g.type;if(C!=null)M==="number"?(C===0&&u.value===""||u.value!=C)&&(u.value=""+C):u.value!==""+C&&(u.value=""+C);else if(M==="submit"||M==="reset"){u.removeAttribute("value");return}g.hasOwnProperty("value")?or(u,g.type,C):g.hasOwnProperty("defaultValue")&&or(u,g.type,wt(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(u.defaultChecked=!!g.defaultChecked)}function qr(u,g,C){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var M=g.type;if(!(M!=="submit"&&M!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+u._wrapperState.initialValue,C||g===u.value||(u.value=g),u.defaultValue=g}C=u.name,C!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,C!==""&&(u.name=C)}function or(u,g,C){(g!=="number"||fr(u.ownerDocument)!==u)&&(C==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+C&&(u.defaultValue=""+C))}var $r=Array.isArray;function Sr(u,g,C,M){if(u=u.options,g){g={};for(var V=0;V<C.length;V++)g["$"+C[V]]=!0;for(C=0;C<u.length;C++)V=g.hasOwnProperty("$"+u[C].value),u[C].selected!==V&&(u[C].selected=V),V&&M&&(u[C].defaultSelected=!0)}else{for(C=""+wt(C),g=null,V=0;V<u.length;V++){if(u[V].value===C){u[V].selected=!0,M&&(u[V].defaultSelected=!0);return}g!==null||u[V].disabled||(g=u[V])}g!==null&&(g.selected=!0)}}function Qr(u,g){if(g.dangerouslySetInnerHTML!=null)throw Error(i(91));return yt({},g,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Dr(u,g){var C=g.value;if(C==null){if(C=g.children,g=g.defaultValue,C!=null){if(g!=null)throw Error(i(92));if($r(C)){if(1<C.length)throw Error(i(93));C=C[0]}g=C}g==null&&(g=""),C=g}u._wrapperState={initialValue:wt(C)}}function Qn(u,g){var C=wt(g.value),M=wt(g.defaultValue);C!=null&&(C=""+C,C!==u.value&&(u.value=C),g.defaultValue==null&&u.defaultValue!==C&&(u.defaultValue=C)),M!=null&&(u.defaultValue=""+M)}function un(u){var g=u.textContent;g===u._wrapperState.initialValue&&g!==""&&g!==null&&(u.value=g)}function ft(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(u,g){return u==null||u==="http://www.w3.org/1999/xhtml"?ft(g):u==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var fe,ye=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,C,M,V){MSApp.execUnsafeLocalFunction(function(){return u(g,C,M,V)})}:u})(function(u,g){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=g;else{for(fe=fe||document.createElement("div"),fe.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=fe.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;g.firstChild;)u.appendChild(g.firstChild)}});function Ke(u,g){if(g){var C=u.firstChild;if(C&&C===u.lastChild&&C.nodeType===3){C.nodeValue=g;return}}u.textContent=g}var $e={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bt=["Webkit","ms","Moz","O"];Object.keys($e).forEach(function(u){Bt.forEach(function(g){g=g+u.charAt(0).toUpperCase()+u.substring(1),$e[g]=$e[u]})});function gt(u,g,C){return g==null||typeof g=="boolean"||g===""?"":C||typeof g!="number"||g===0||$e.hasOwnProperty(u)&&$e[u]?(""+g).trim():g+"px"}function st(u,g){u=u.style;for(var C in g)if(g.hasOwnProperty(C)){var M=C.indexOf("--")===0,V=gt(C,g[C],M);C==="float"&&(C="cssFloat"),M?u.setProperty(C,V):u[C]=V}}var xt=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zt(u,g){if(g){if(xt[u]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(i(137,u));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(i(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(i(61))}if(g.style!=null&&typeof g.style!="object")throw Error(i(62))}}function St(u,g){if(u.indexOf("-")===-1)return typeof g.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function Yt(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var hr=null,tn=null,Ir=null;function dt(u){if(u=Ua(u)){if(typeof hr!="function")throw Error(i(280));var g=u.stateNode;g&&(g=NA(g),hr(u.stateNode,u.type,g))}}function en(u){tn?Ir?Ir.push(u):Ir=[u]:tn=u}function Rr(){if(tn){var u=tn,g=Ir;if(Ir=tn=null,dt(u),g)for(u=0;u<g.length;u++)dt(g[u])}}function pr(u,g){return u(g)}function Gr(){}var Un=!1;function _r(u,g,C){if(Un)return u(g,C);Un=!0;try{return pr(u,g,C)}finally{Un=!1,(tn!==null||Ir!==null)&&(Gr(),Rr())}}function In(u,g){var C=u.stateNode;if(C===null)return null;var M=NA(C);if(M===null)return null;C=M[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(u=u.type,M=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!M;break e;default:u=!1}if(u)return null;if(C&&typeof C!="function")throw Error(i(231,g,typeof C));return C}var bn=!1;if(a)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){bn=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{bn=!1}function Ui(u,g,C,M,V,X,we,lt,_t){var Ht=Array.prototype.slice.call(arguments,3);try{g.apply(C,Ht)}catch(ur){this.onError(ur)}}var oi=!1,Xt=null,Wn=!1,qi=null,rl={onError:function(u){oi=!0,Xt=u}};function rs(u,g,C,M,V,X,we,lt,_t){oi=!1,Xt=null,Ui.apply(rl,arguments)}function dr(u,g,C,M,V,X,we,lt,_t){if(rs.apply(this,arguments),oi){if(oi){var Ht=Xt;oi=!1,Xt=null}else throw Error(i(198));Wn||(Wn=!0,qi=Ht)}}function rn(u){var g=u,C=u;if(u.alternate)for(;g.return;)g=g.return;else{u=g;do g=u,(g.flags&4098)!==0&&(C=g.return),u=g.return;while(u)}return g.tag===3?C:null}function An(u){if(u.tag===13){var g=u.memoizedState;if(g===null&&(u=u.alternate,u!==null&&(g=u.memoizedState)),g!==null)return g.dehydrated}return null}function Di(u){if(rn(u)!==u)throw Error(i(188))}function xl(u){var g=u.alternate;if(!g){if(g=rn(u),g===null)throw Error(i(188));return g!==u?null:u}for(var C=u,M=g;;){var V=C.return;if(V===null)break;var X=V.alternate;if(X===null){if(M=V.return,M!==null){C=M;continue}break}if(V.child===X.child){for(X=V.child;X;){if(X===C)return Di(V),u;if(X===M)return Di(V),g;X=X.sibling}throw Error(i(188))}if(C.return!==M.return)C=V,M=X;else{for(var we=!1,lt=V.child;lt;){if(lt===C){we=!0,C=V,M=X;break}if(lt===M){we=!0,M=V,C=X;break}lt=lt.sibling}if(!we){for(lt=X.child;lt;){if(lt===C){we=!0,C=X,M=V;break}if(lt===M){we=!0,M=X,C=V;break}lt=lt.sibling}if(!we)throw Error(i(189))}}if(C.alternate!==M)throw Error(i(190))}if(C.tag!==3)throw Error(i(188));return C.stateNode.current===C?u:g}function Ls(u){return u=xl(u),u!==null?hn(u):null}function hn(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var g=hn(u);if(g!==null)return g;u=u.sibling}return null}var nl=n.unstable_scheduleCallback,il=n.unstable_cancelCallback,Zl=n.unstable_shouldYield,xc=n.unstable_requestPaint,fi=n.unstable_now,Xl=n.unstable_getCurrentPriorityLevel,bl=n.unstable_ImmediatePriority,Bi=n.unstable_UserBlockingPriority,Hn=n.unstable_NormalPriority,Jc=n.unstable_LowPriority,sl=n.unstable_IdlePriority,ol=null,Ms=null;function Uo(u){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(ol,u,void 0,(u.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:Ln,xa=Math.log,CA=Math.LN2;function Ln(u){return u>>>=0,u===0?32:31-(xa(u)/CA|0)|0}var bc=64,Do=4194304;function Ro(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Bc(u,g){var C=u.pendingLanes;if(C===0)return 0;var M=0,V=u.suspendedLanes,X=u.pingedLanes,we=C&268435455;if(we!==0){var lt=we&~V;lt!==0?M=Ro(lt):(X&=we,X!==0&&(M=Ro(X)))}else we=C&~V,we!==0?M=Ro(we):X!==0&&(M=Ro(X));if(M===0)return 0;if(g!==0&&g!==M&&(g&V)===0&&(V=M&-M,X=g&-g,V>=X||V===16&&(X&4194240)!==0))return g;if((M&4)!==0&&(M|=C&16),g=u.entangledLanes,g!==0)for(u=u.entanglements,g&=M;0<g;)C=31-hs(g),V=1<<C,M|=u[C],g&=~V;return M}function oa(u,g){switch(u){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ms(u,g){for(var C=u.suspendedLanes,M=u.pingedLanes,V=u.expirationTimes,X=u.pendingLanes;0<X;){var we=31-hs(X),lt=1<<we,_t=V[we];_t===-1?((lt&C)===0||(lt&M)!==0)&&(V[we]=oa(lt,g)):_t<=g&&(u.expiredLanes|=lt),X&=~lt}}function No(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function eA(){var u=bc;return bc<<=1,(bc&4194240)===0&&(bc=64),u}function tA(u){for(var g=[],C=0;31>C;C++)g.push(u);return g}function Yl(u,g,C){u.pendingLanes|=g,g!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,g=31-hs(g),u[g]=C}function ba(u,g){var C=u.pendingLanes&~g;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=g,u.mutableReadLanes&=g,u.entangledLanes&=g,g=u.entanglements;var M=u.eventTimes;for(u=u.expirationTimes;0<C;){var V=31-hs(C),X=1<<V;g[V]=0,M[V]=-1,u[V]=-1,C&=~X}}function SA(u,g){var C=u.entangledLanes|=g;for(u=u.entanglements;C;){var M=31-hs(C),V=1<<M;V&g|u[M]&g&&(u[M]|=g),C&=~V}}var Gn=0;function Bl(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Jl,Cl,EA,Cc,aa,al=!1,on=[],Ba=null,Qo=null,Oo=null,gs=new Map,Kr=new Map,Yn=[],ln="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ni(u,g){switch(u){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Qo=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":gs.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(g.pointerId)}}function ys(u,g,C,M,V,X){return u===null||u.nativeEvent!==X?(u={blockedOn:g,domEventName:C,eventSystemFlags:M,nativeEvent:X,targetContainers:[V]},g!==null&&(g=Ua(g),g!==null&&Cl(g)),u):(u.eventSystemFlags|=M,g=u.targetContainers,V!==null&&g.indexOf(V)===-1&&g.push(V),u)}function $i(u,g,C,M,V){switch(g){case"focusin":return Ba=ys(Ba,u,g,C,M,V),!0;case"dragenter":return Qo=ys(Qo,u,g,C,M,V),!0;case"mouseover":return Oo=ys(Oo,u,g,C,M,V),!0;case"pointerover":var X=V.pointerId;return gs.set(X,ys(gs.get(X)||null,u,g,C,M,V)),!0;case"gotpointercapture":return X=V.pointerId,Kr.set(X,ys(Kr.get(X)||null,u,g,C,M,V)),!0}return!1}function co(u){var g=ka(u.target);if(g!==null){var C=rn(g);if(C!==null){if(g=C.tag,g===13){if(g=An(C),g!==null){u.blockedOn=g,aa(u.priority,function(){EA(C)});return}}else if(g===3&&C.stateNode.current.memoizedState.isDehydrated){u.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}u.blockedOn=null}function vs(u){if(u.blockedOn!==null)return!1;for(var g=u.targetContainers;0<g.length;){var C=tc(u.domEventName,u.eventSystemFlags,g[0],u.nativeEvent);if(C===null){C=u.nativeEvent;var M=new C.constructor(C.type,C);ar=M,C.target.dispatchEvent(M),ar=null}else return g=Ua(C),g!==null&&Cl(g),u.blockedOn=C,!1;g.shift()}return!0}function Ca(u,g,C){vs(u)&&C.delete(g)}function Sa(){al=!1,Ba!==null&&vs(Ba)&&(Ba=null),Qo!==null&&vs(Qo)&&(Qo=null),Oo!==null&&vs(Oo)&&(Oo=null),gs.forEach(Ca),Kr.forEach(Ca)}function ei(u,g){u.blockedOn===g&&(u.blockedOn=null,al||(al=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Sa)))}function la(u){function g(V){return ei(V,u)}if(0<on.length){ei(on[0],u);for(var C=1;C<on.length;C++){var M=on[C];M.blockedOn===u&&(M.blockedOn=null)}}for(Ba!==null&&ei(Ba,u),Qo!==null&&ei(Qo,u),Oo!==null&&ei(Oo,u),gs.forEach(g),Kr.forEach(g),C=0;C<Yn.length;C++)M=Yn[C],M.blockedOn===u&&(M.blockedOn=null);for(;0<Yn.length&&(C=Yn[0],C.blockedOn===null);)co(C),C.blockedOn===null&&Yn.shift()}var Wi=de.ReactCurrentBatchConfig,ec=!0;function Gs(u,g,C,M){var V=Gn,X=Wi.transition;Wi.transition=null;try{Gn=1,zo(u,g,C,M)}finally{Gn=V,Wi.transition=X}}function ll(u,g,C,M){var V=Gn,X=Wi.transition;Wi.transition=null;try{Gn=4,zo(u,g,C,M)}finally{Gn=V,Wi.transition=X}}function zo(u,g,C,M){if(ec){var V=tc(u,g,C,M);if(V===null)Uc(u,g,M,ca,C),ni(u,M);else if($i(V,u,g,C,M))M.stopPropagation();else if(ni(u,M),g&4&&-1<ln.indexOf(u)){for(;V!==null;){var X=Ua(V);if(X!==null&&Jl(X),X=tc(u,g,C,M),X===null&&Uc(u,g,M,ca,C),X===V)break;V=X}V!==null&&M.stopPropagation()}else Uc(u,g,M,null,C)}}var ca=null;function tc(u,g,C,M){if(ca=null,u=Yt(M),u=ka(u),u!==null)if(g=rn(u),g===null)u=null;else if(C=g.tag,C===13){if(u=An(g),u!==null)return u;u=null}else if(C===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;u=null}else g!==u&&(u=null);return ca=u,null}function Aa(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xl()){case bl:return 1;case Bi:return 4;case Hn:case Jc:return 16;case sl:return 536870912;default:return 16}default:return 16}}var Rn=null,Ho=null,Cn=null;function pn(){if(Cn)return Cn;var u,g=Ho,C=g.length,M,V="value"in Rn?Rn.value:Rn.textContent,X=V.length;for(u=0;u<C&&g[u]===V[u];u++);var we=C-u;for(M=1;M<=we&&g[C-M]===V[X-M];M++);return Cn=V.slice(u,1<M?1-M:void 0)}function Ea(u){var g=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&g===13&&(u=13)):u=g,u===10&&(u=13),32<=u||u===13?u:0}function xn(){return!0}function jo(){return!1}function Ci(u){function g(C,M,V,X,we){this._reactName=C,this._targetInst=V,this.type=M,this.nativeEvent=X,this.target=we,this.currentTarget=null;for(var lt in u)u.hasOwnProperty(lt)&&(C=u[lt],this[lt]=C?C(X):X[lt]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?xn:jo,this.isPropagationStopped=jo,this}return yt(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=xn)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=xn)},persist:function(){},isPersistent:xn}),g}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Ci(so),j=yt({},so,{view:0,detail:0}),me=Ci(j),Je,mt,Ft,Vt=yt({},j,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Ft&&(Ft&&u.type==="mousemove"?(Je=u.screenX-Ft.screenX,mt=u.screenY-Ft.screenY):mt=Je=0,Ft=u),Je)},movementY:function(u){return"movementY"in u?u.movementY:mt}}),ir=Ci(Vt),xr=yt({},Vt,{dataTransfer:0}),jr=Ci(xr),mn=yt({},j,{relatedTarget:0}),gn=Ci(mn),cn=yt({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),Hi=Ci(cn),ns=yt({},so,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Si=Ci(ns),ks=yt({},so,{data:0}),Li=Ci(ks),_s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ha={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fa(u){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(u):(u=ha[u])?!!g[u]:!1}function Fa(){return fa}var cl=yt({},j,{key:function(u){if(u.key){var g=_s[u.key]||u.key;if(g!=="Unidentified")return g}return u.type==="keypress"?(u=Ea(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Vo[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(u){return u.type==="keypress"?Ea(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Ea(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Ei=Ci(cl),Sc=yt({},Vt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),da=Ci(Sc),Ia=yt({},j,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa}),Zi=Ci(Ia),rA=yt({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sl=Ci(rA),tu=yt({},Vt,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),El=Ci(tu),Ks=[9,13,27,32],Ta=a&&"CompositionEvent"in window,Al=null;a&&"documentMode"in document&&(Al=document.documentMode);var FA=a&&"TextEvent"in window&&!Al,xo=a&&(!Ta||Al&&8<Al&&11>=Al),Fl=" ",nA=!1;function iA(u,g){switch(u){case"keyup":return Ks.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Il(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var qs=!1;function Go(u,g){switch(u){case"compositionend":return Il(g);case"keypress":return g.which!==32?null:(nA=!0,Fl);case"textInput":return u=g.data,u===Fl&&nA?null:u;default:return null}}function bo(u,g){if(qs)return u==="compositionend"||!Ta&&iA(u,g)?(u=pn(),Cn=Ho=Rn=null,qs=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return xo&&g.locale!=="ko"?null:g.data;default:return null}}var pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ul(u){var g=u&&u.nodeName&&u.nodeName.toLowerCase();return g==="input"?!!pa[u.type]:g==="textarea"}function Pa(u,g,C,M){en(M),g=kA(g,"onChange"),0<g.length&&(C=new ua("onChange","change",null,C,M),u.push({event:C,listeners:g}))}var rc=null,Tl=null;function is(u){nu(u,0)}function hl(u){var g=Da(u);if(lr(g))return u}function fl(u,g){if(u==="change")return g}var ma=!1;if(a){var Ec;if(a){var Pl="oninput"in document;if(!Pl){var Ao=document.createElement("div");Ao.setAttribute("oninput","return;"),Pl=typeof Ao.oninput=="function"}Ec=Pl}else Ec=!1;ma=Ec&&(!document.documentMode||9<document.documentMode)}function nc(){rc&&(rc.detachEvent("onpropertychange",dl),Tl=rc=null)}function dl(u){if(u.propertyName==="value"&&hl(Tl)){var g=[];Pa(g,Tl,u,Yt(u)),_r(is,g)}}function Ll(u,g,C){u==="focusin"?(nc(),rc=g,Tl=C,rc.attachEvent("onpropertychange",dl)):u==="focusout"&&nc()}function Ml(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return hl(Tl)}function kl(u,g){if(u==="click")return hl(g)}function Ko(u,g){if(u==="input"||u==="change")return hl(g)}function ic(u,g){return u===g&&(u!==0||1/u===1/g)||u!==u&&g!==g}var ss=typeof Object.is=="function"?Object.is:ic;function Bo(u,g){if(ss(u,g))return!0;if(typeof u!="object"||u===null||typeof g!="object"||g===null)return!1;var C=Object.keys(u),M=Object.keys(g);if(C.length!==M.length)return!1;for(M=0;M<C.length;M++){var V=C[M];if(!x.call(g,V)||!ss(u[V],g[V]))return!1}return!0}function ii(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function vi(u,g){var C=ii(u);u=0;for(var M;C;){if(C.nodeType===3){if(M=u+C.textContent.length,u<=g&&M>=g)return{node:C,offset:g-u};u=M}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=ii(C)}}function Xi(u,g){return u&&g?u===g?!0:u&&u.nodeType===3?!1:g&&g.nodeType===3?Xi(u,g.parentNode):"contains"in u?u.contains(g):u.compareDocumentPosition?!!(u.compareDocumentPosition(g)&16):!1:!1}function ws(){for(var u=window,g=fr();g instanceof u.HTMLIFrameElement;){try{var C=typeof g.contentWindow.location.href=="string"}catch{C=!1}if(C)u=g.contentWindow;else break;g=fr(u.document)}return g}function Tn(u){var g=u&&u.nodeName&&u.nodeName.toLowerCase();return g&&(g==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||g==="textarea"||u.contentEditable==="true")}function Fc(u){var g=ws(),C=u.focusedElem,M=u.selectionRange;if(g!==C&&C&&C.ownerDocument&&Xi(C.ownerDocument.documentElement,C)){if(M!==null&&Tn(C)){if(g=M.start,u=M.end,u===void 0&&(u=g),"selectionStart"in C)C.selectionStart=g,C.selectionEnd=Math.min(u,C.value.length);else if(u=(g=C.ownerDocument||document)&&g.defaultView||window,u.getSelection){u=u.getSelection();var V=C.textContent.length,X=Math.min(M.start,V);M=M.end===void 0?X:Math.min(M.end,V),!u.extend&&X>M&&(V=M,M=X,X=V),V=vi(C,X);var we=vi(C,M);V&&we&&(u.rangeCount!==1||u.anchorNode!==V.node||u.anchorOffset!==V.offset||u.focusNode!==we.node||u.focusOffset!==we.offset)&&(g=g.createRange(),g.setStart(V.node,V.offset),u.removeAllRanges(),X>M?(u.addRange(g),u.extend(we.node,we.offset)):(g.setEnd(we.node,we.offset),u.addRange(g)))}}for(g=[],u=C;u=u.parentNode;)u.nodeType===1&&g.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<g.length;C++)u=g[C],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var sc=a&&"documentMode"in document&&11>=document.documentMode,La=null,IA=null,Ma=null,Ic=!1;function Tc(u,g,C){var M=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;Ic||La==null||La!==fr(M)||(M=La,"selectionStart"in M&&Tn(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Ma&&Bo(Ma,M)||(Ma=M,M=kA(IA,"onSelect"),0<M.length&&(g=new ua("onSelect","select",null,g,C),u.push({event:g,listeners:M}),g.target=La)))}function uo(u,g){var C={};return C[u.toLowerCase()]=g.toLowerCase(),C["Webkit"+u]="webkit"+g,C["Moz"+u]="moz"+g,C}var Pc={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionend:uo("Transition","TransitionEnd")},Lc={},ru={};a&&(ru=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function pl(u){if(Lc[u])return Lc[u];if(!Pc[u])return u;var g=Pc[u],C;for(C in g)if(g.hasOwnProperty(C)&&C in ru)return Lc[u]=g[C];return u}var TA=pl("animationend"),PA=pl("animationiteration"),sA=pl("animationstart"),LA=pl("transitionend"),Pu=new Map,Mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Co(u,g){Pu.set(u,g),f(g,[u])}for(var oA=0;oA<Mc.length;oA++){var oo=Mc[oA],dn=oo.toLowerCase(),aA=oo[0].toUpperCase()+oo.slice(1);Co(dn,"on"+aA)}Co(TA,"onAnimationEnd"),Co(PA,"onAnimationIteration"),Co(sA,"onAnimationStart"),Co("dblclick","onDoubleClick"),Co("focusin","onFocus"),Co("focusout","onBlur"),Co(LA,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sh=new Set("cancel close invalid load scroll toggle".split(" ").concat(kc));function oc(u,g,C){var M=u.type||"unknown-event";u.currentTarget=C,dr(M,g,void 0,u),u.currentTarget=null}function nu(u,g){g=(g&4)!==0;for(var C=0;C<u.length;C++){var M=u[C],V=M.event;M=M.listeners;e:{var X=void 0;if(g)for(var we=M.length-1;0<=we;we--){var lt=M[we],_t=lt.instance,Ht=lt.currentTarget;if(lt=lt.listener,_t!==X&&V.isPropagationStopped())break e;oc(V,lt,Ht),X=_t}else for(we=0;we<M.length;we++){if(lt=M[we],_t=lt.instance,Ht=lt.currentTarget,lt=lt.listener,_t!==X&&V.isPropagationStopped())break e;oc(V,lt,Ht),X=_t}}}if(Wn)throw u=qi,Wn=!1,qi=null,u}function Fi(u,g){var C=g[$s];C===void 0&&(C=g[$s]=new Set);var M=u+"__bubble";C.has(M)||(Ul(g,u,2,!1),C.add(M))}function iu(u,g,C){var M=0;g&&(M|=4),Ul(C,u,M,g)}var MA="_reactListening"+Math.random().toString(36).slice(2);function ac(u){if(!u[MA]){u[MA]=!0,l.forEach(function(C){C!=="selectionchange"&&(sh.has(C)||iu(C,!1,u),iu(C,!0,u))});var g=u.nodeType===9?u:u.ownerDocument;g===null||g[MA]||(g[MA]=!0,iu("selectionchange",!1,g))}}function Ul(u,g,C,M){switch(Aa(g)){case 1:var V=Gs;break;case 4:V=ll;break;default:V=zo}C=V.bind(null,g,C,u),V=void 0,!bn||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(V=!0),M?V!==void 0?u.addEventListener(g,C,{capture:!0,passive:V}):u.addEventListener(g,C,!0):V!==void 0?u.addEventListener(g,C,{passive:V}):u.addEventListener(g,C,!1)}function Uc(u,g,C,M,V){var X=M;if((g&1)===0&&(g&2)===0&&M!==null)e:for(;;){if(M===null)return;var we=M.tag;if(we===3||we===4){var lt=M.stateNode.containerInfo;if(lt===V||lt.nodeType===8&&lt.parentNode===V)break;if(we===4)for(we=M.return;we!==null;){var _t=we.tag;if((_t===3||_t===4)&&(_t=we.stateNode.containerInfo,_t===V||_t.nodeType===8&&_t.parentNode===V))return;we=we.return}for(;lt!==null;){if(we=ka(lt),we===null)return;if(_t=we.tag,_t===5||_t===6){M=X=we;continue e}lt=lt.parentNode}}M=M.return}_r(function(){var Ht=X,ur=Yt(C),gr=[];e:{var Ar=Pu.get(u);if(Ar!==void 0){var Nr=ua,Jr=u;switch(u){case"keypress":if(Ea(C)===0)break e;case"keydown":case"keyup":Nr=Ei;break;case"focusin":Jr="focus",Nr=gn;break;case"focusout":Jr="blur",Nr=gn;break;case"beforeblur":case"afterblur":Nr=gn;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nr=ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nr=jr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nr=Zi;break;case TA:case PA:case sA:Nr=Hi;break;case LA:Nr=Sl;break;case"scroll":Nr=me;break;case"wheel":Nr=El;break;case"copy":case"cut":case"paste":Nr=Si;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nr=da}var Vr=(g&4)!==0,Is=!Vr&&u==="scroll",Rt=Vr?Ar!==null?Ar+"Capture":null:Ar;Vr=[];for(var Ct=Ht,Ot;Ct!==null;){Ot=Ct;var br=Ot.stateNode;if(Ot.tag===5&&br!==null&&(Ot=br,Rt!==null&&(br=In(Ct,Rt),br!=null&&Vr.push(Dc(Ct,br,Ot)))),Is)break;Ct=Ct.return}0<Vr.length&&(Ar=new Nr(Ar,Jr,null,C,ur),gr.push({event:Ar,listeners:Vr}))}}if((g&7)===0){e:{if(Ar=u==="mouseover"||u==="pointerover",Nr=u==="mouseout"||u==="pointerout",Ar&&C!==ar&&(Jr=C.relatedTarget||C.fromElement)&&(ka(Jr)||Jr[Us]))break e;if((Nr||Ar)&&(Ar=ur.window===ur?ur:(Ar=ur.ownerDocument)?Ar.defaultView||Ar.parentWindow:window,Nr?(Jr=C.relatedTarget||C.toElement,Nr=Ht,Jr=Jr?ka(Jr):null,Jr!==null&&(Is=rn(Jr),Jr!==Is||Jr.tag!==5&&Jr.tag!==6)&&(Jr=null)):(Nr=null,Jr=Ht),Nr!==Jr)){if(Vr=ir,br="onMouseLeave",Rt="onMouseEnter",Ct="mouse",(u==="pointerout"||u==="pointerover")&&(Vr=da,br="onPointerLeave",Rt="onPointerEnter",Ct="pointer"),Is=Nr==null?Ar:Da(Nr),Ot=Jr==null?Ar:Da(Jr),Ar=new Vr(br,Ct+"leave",Nr,C,ur),Ar.target=Is,Ar.relatedTarget=Ot,br=null,ka(ur)===Ht&&(Vr=new Vr(Rt,Ct+"enter",Jr,C,ur),Vr.target=Ot,Vr.relatedTarget=Is,br=Vr),Is=br,Nr&&Jr)t:{for(Vr=Nr,Rt=Jr,Ct=0,Ot=Vr;Ot;Ot=lc(Ot))Ct++;for(Ot=0,br=Rt;br;br=lc(br))Ot++;for(;0<Ct-Ot;)Vr=lc(Vr),Ct--;for(;0<Ot-Ct;)Rt=lc(Rt),Ot--;for(;Ct--;){if(Vr===Rt||Rt!==null&&Vr===Rt.alternate)break t;Vr=lc(Vr),Rt=lc(Rt)}Vr=null}else Vr=null;Nr!==null&&su(gr,Ar,Nr,Vr,!1),Jr!==null&&Is!==null&&su(gr,Is,Jr,Vr,!0)}}e:{if(Ar=Ht?Da(Ht):window,Nr=Ar.nodeName&&Ar.nodeName.toLowerCase(),Nr==="select"||Nr==="input"&&Ar.type==="file")var an=fl;else if(ul(Ar))if(ma)an=Ko;else{an=Ml;var vn=Ll}else(Nr=Ar.nodeName)&&Nr.toLowerCase()==="input"&&(Ar.type==="checkbox"||Ar.type==="radio")&&(an=kl);if(an&&(an=an(u,Ht))){Pa(gr,an,C,ur);break e}vn&&vn(u,Ar,Ht),u==="focusout"&&(vn=Ar._wrapperState)&&vn.controlled&&Ar.type==="number"&&or(Ar,"number",Ar.value)}switch(vn=Ht?Da(Ht):window,u){case"focusin":(ul(vn)||vn.contentEditable==="true")&&(La=vn,IA=Ht,Ma=null);break;case"focusout":Ma=IA=La=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Tc(gr,C,ur);break;case"selectionchange":if(sc)break;case"keydown":case"keyup":Tc(gr,C,ur)}var _n;if(Ta)e:{switch(u){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else qs?iA(u,C)&&(Pn="onCompositionEnd"):u==="keydown"&&C.keyCode===229&&(Pn="onCompositionStart");Pn&&(xo&&C.locale!=="ko"&&(qs||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&qs&&(_n=pn()):(Rn=ur,Ho="value"in Rn?Rn.value:Rn.textContent,qs=!0)),vn=kA(Ht,Pn),0<vn.length&&(Pn=new Li(Pn,u,null,C,ur),gr.push({event:Pn,listeners:vn}),_n?Pn.data=_n:(_n=Il(C),_n!==null&&(Pn.data=_n)))),(_n=FA?Go(u,C):bo(u,C))&&(Ht=kA(Ht,"onBeforeInput"),0<Ht.length&&(ur=new Li("onBeforeInput","beforeinput",null,C,ur),gr.push({event:ur,listeners:Ht}),ur.data=_n))}nu(gr,g)})}function Dc(u,g,C){return{instance:u,listener:g,currentTarget:C}}function kA(u,g){for(var C=g+"Capture",M=[];u!==null;){var V=u,X=V.stateNode;V.tag===5&&X!==null&&(V=X,X=In(u,C),X!=null&&M.unshift(Dc(u,X,V)),X=In(u,g),X!=null&&M.push(Dc(u,X,V))),u=u.return}return M}function lc(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function su(u,g,C,M,V){for(var X=g._reactName,we=[];C!==null&&C!==M;){var lt=C,_t=lt.alternate,Ht=lt.stateNode;if(_t!==null&&_t===M)break;lt.tag===5&&Ht!==null&&(lt=Ht,V?(_t=In(C,X),_t!=null&&we.unshift(Dc(C,_t,lt))):V||(_t=In(C,X),_t!=null&&we.push(Dc(C,_t,lt)))),C=C.return}we.length!==0&&u.push({event:g,listeners:we})}var Lu=/\r\n?/g,lA=/\u0000|\uFFFD/g;function Rc(u){return(typeof u=="string"?u:""+u).replace(Lu,`
`).replace(lA,"")}function UA(u,g,C){if(g=Rc(g),Rc(u)!==g&&C)throw Error(i(425))}function DA(){}var cc=null,cA=null;function Mu(u,g){return u==="textarea"||u==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var AA=typeof setTimeout=="function"?setTimeout:void 0,ou=typeof clearTimeout=="function"?clearTimeout:void 0,oh=typeof Promise=="function"?Promise:void 0,Qh=typeof queueMicrotask=="function"?queueMicrotask:typeof oh<"u"?function(u){return oh.resolve(null).then(u).catch(au)}:AA;function au(u){setTimeout(function(){throw u})}function RA(u,g){var C=g,M=0;do{var V=C.nextSibling;if(u.removeChild(C),V&&V.nodeType===8)if(C=V.data,C==="/$"){if(M===0){u.removeChild(V),la(g);return}M--}else C!=="$"&&C!=="$?"&&C!=="$!"||M++;C=V}while(C);la(g)}function ho(u){for(;u!=null;u=u.nextSibling){var g=u.nodeType;if(g===1||g===3)break;if(g===8){if(g=u.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return u}function ga(u){u=u.previousSibling;for(var g=0;u;){if(u.nodeType===8){var C=u.data;if(C==="$"||C==="$!"||C==="$?"){if(g===0)return u;g--}else C==="/$"&&g++}u=u.previousSibling}return null}var qn=Math.random().toString(36).slice(2),fo="__reactFiber$"+qn,ao="__reactProps$"+qn,Us="__reactContainer$"+qn,$s="__reactEvents$"+qn,ku="__reactListeners$"+qn,Nc="__reactHandles$"+qn;function ka(u){var g=u[fo];if(g)return g;for(var C=u.parentNode;C;){if(g=C[Us]||C[fo]){if(C=g.alternate,g.child!==null||C!==null&&C.child!==null)for(u=ga(u);u!==null;){if(C=u[fo])return C;u=ga(u)}return g}u=C,C=u.parentNode}return null}function Ua(u){return u=u[fo]||u[Us],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Da(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(i(33))}function NA(u){return u[ao]||null}var Uu=[],Dl=-1;function Ra(u){return{current:u}}function ai(u){0>Dl||(u.current=Uu[Dl],Uu[Dl]=null,Dl--)}function Zn(u,g){Dl++,Uu[Dl]=u.current,u.current=g}var Rl={},Ds=Ra(Rl),Ws=Ra(!1),Qc=Rl;function Oc(u,g){var C=u.type.contextTypes;if(!C)return Rl;var M=u.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===g)return M.__reactInternalMemoizedMaskedChildContext;var V={},X;for(X in C)V[X]=g[X];return M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=g,u.__reactInternalMemoizedMaskedChildContext=V),V}function po(u){return u=u.childContextTypes,u!=null}function lu(){ai(Ws),ai(Ds)}function Du(u,g,C){if(Ds.current!==Rl)throw Error(i(168));Zn(Ds,g),Zn(Ws,C)}function uA(u,g,C){var M=u.stateNode;if(g=g.childContextTypes,typeof M.getChildContext!="function")return C;M=M.getChildContext();for(var V in M)if(!(V in g))throw Error(i(108,tt(u)||"Unknown",V));return yt({},C,M)}function Na(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Rl,Qc=Ds.current,Zn(Ds,u),Zn(Ws,Ws.current),!0}function ya(u,g,C){var M=u.stateNode;if(!M)throw Error(i(169));C?(u=uA(u,g,Qc),M.__reactInternalMemoizedMergedChildContext=u,ai(Ws),ai(Ds),Zn(Ds,u)):ai(Ws),Zn(Ws,C)}var Rs=null,QA=!1,T=!1;function D(u){Rs===null?Rs=[u]:Rs.push(u)}function q(u){QA=!0,D(u)}function ee(){if(!T&&Rs!==null){T=!0;var u=0,g=Gn;try{var C=Rs;for(Gn=1;u<C.length;u++){var M=C[u];do M=M(!0);while(M!==null)}Rs=null,QA=!1}catch(V){throw Rs!==null&&(Rs=Rs.slice(u+1)),nl(bl,ee),V}finally{Gn=g,T=!1}}return null}var pe=[],_e=0,Be=null,Te=0,ke=[],Ve=0,qe=null,Mt=1,Xe="";function bt(u,g){pe[_e++]=Te,pe[_e++]=Be,Be=u,Te=g}function It(u,g,C){ke[Ve++]=Mt,ke[Ve++]=Xe,ke[Ve++]=qe,qe=u;var M=Mt;u=Xe;var V=32-hs(M)-1;M&=~(1<<V),C+=1;var X=32-hs(g)+V;if(30<X){var we=V-V%5;X=(M&(1<<we)-1).toString(32),M>>=we,V-=we,Mt=1<<32-hs(g)+V|C<<V|M,Xe=X+u}else Mt=1<<X|C<<V|M,Xe=u}function $t(u){u.return!==null&&(bt(u,1),It(u,1,0))}function kt(u){for(;u===Be;)Be=pe[--_e],pe[_e]=null,Te=pe[--_e],pe[_e]=null;for(;u===qe;)qe=ke[--Ve],ke[Ve]=null,Xe=ke[--Ve],ke[Ve]=null,Mt=ke[--Ve],ke[Ve]=null}var Gt=null,qt=null,er=!1,Jt=null;function nn(u,g){var C=mc(5,null,null,0);C.elementType="DELETED",C.stateNode=g,C.return=u,g=u.deletions,g===null?(u.deletions=[C],u.flags|=16):g.push(C)}function Or(u,g){switch(u.tag){case 5:var C=u.type;return g=g.nodeType!==1||C.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(u.stateNode=g,Gt=u,qt=ho(g.firstChild),!0):!1;case 6:return g=u.pendingProps===""||g.nodeType!==3?null:g,g!==null?(u.stateNode=g,Gt=u,qt=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(C=qe!==null?{id:Mt,overflow:Xe}:null,u.memoizedState={dehydrated:g,treeContext:C,retryLane:1073741824},C=mc(18,null,null,0),C.stateNode=g,C.return=u,u.child=C,Gt=u,qt=null,!0):!1;default:return!1}}function Bn(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Wr(u){if(er){var g=qt;if(g){var C=g;if(!Or(u,g)){if(Bn(u))throw Error(i(418));g=ho(C.nextSibling);var M=Gt;g&&Or(u,g)?nn(M,C):(u.flags=u.flags&-4097|2,er=!1,Gt=u)}}else{if(Bn(u))throw Error(i(418));u.flags=u.flags&-4097|2,er=!1,Gt=u}}}function Nn(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Gt=u}function Ri(u){if(u!==Gt)return!1;if(!er)return Nn(u),er=!0,!1;var g;if((g=u.tag!==3)&&!(g=u.tag!==5)&&(g=u.type,g=g!=="head"&&g!=="body"&&!Mu(u.type,u.memoizedProps)),g&&(g=qt)){if(Bn(u))throw Sn(),Error(i(418));for(;g;)nn(u,g),g=ho(g.nextSibling)}if(Nn(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,g=0;u;){if(u.nodeType===8){var C=u.data;if(C==="/$"){if(g===0){qt=ho(u.nextSibling);break e}g--}else C!=="$"&&C!=="$!"&&C!=="$?"||g++}u=u.nextSibling}qt=null}}else qt=Gt?ho(u.stateNode.nextSibling):null;return!0}function Sn(){for(var u=qt;u;)u=ho(u.nextSibling)}function zr(){qt=Gt=null,er=!1}function Er(u){Jt===null?Jt=[u]:Jt.push(u)}var di=de.ReactCurrentBatchConfig;function Lr(u,g,C){if(u=C.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(i(309));var M=C.stateNode}if(!M)throw Error(i(147,u));var V=M,X=""+u;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===X?g.ref:(g=function(we){var lt=V.refs;we===null?delete lt[X]:lt[X]=we},g._stringRef=X,g)}if(typeof u!="string")throw Error(i(284));if(!C._owner)throw Error(i(290,u))}return u}function On(u,g){throw u=Object.prototype.toString.call(g),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":u))}function pi(u){var g=u._init;return g(u._payload)}function os(u){function g(Rt,Ct){if(u){var Ot=Rt.deletions;Ot===null?(Rt.deletions=[Ct],Rt.flags|=16):Ot.push(Ct)}}function C(Rt,Ct){if(!u)return null;for(;Ct!==null;)g(Rt,Ct),Ct=Ct.sibling;return null}function M(Rt,Ct){for(Rt=new Map;Ct!==null;)Ct.key!==null?Rt.set(Ct.key,Ct):Rt.set(Ct.index,Ct),Ct=Ct.sibling;return Rt}function V(Rt,Ct){return Rt=fu(Rt,Ct),Rt.index=0,Rt.sibling=null,Rt}function X(Rt,Ct,Ot){return Rt.index=Ot,u?(Ot=Rt.alternate,Ot!==null?(Ot=Ot.index,Ot<Ct?(Rt.flags|=2,Ct):Ot):(Rt.flags|=2,Ct)):(Rt.flags|=1048576,Ct)}function we(Rt){return u&&Rt.alternate===null&&(Rt.flags|=2),Rt}function lt(Rt,Ct,Ot,br){return Ct===null||Ct.tag!==6?(Ct=Hp(Ot,Rt.mode,br),Ct.return=Rt,Ct):(Ct=V(Ct,Ot),Ct.return=Rt,Ct)}function _t(Rt,Ct,Ot,br){var an=Ot.type;return an===Ze?ur(Rt,Ct,Ot.props.children,br,Ot.key):Ct!==null&&(Ct.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===ut&&pi(an)===Ct.type)?(br=V(Ct,Ot.props),br.ref=Lr(Rt,Ct,Ot),br.return=Rt,br):(br=kf(Ot.type,Ot.key,Ot.props,null,Rt.mode,br),br.ref=Lr(Rt,Ct,Ot),br.return=Rt,br)}function Ht(Rt,Ct,Ot,br){return Ct===null||Ct.tag!==4||Ct.stateNode.containerInfo!==Ot.containerInfo||Ct.stateNode.implementation!==Ot.implementation?(Ct=bd(Ot,Rt.mode,br),Ct.return=Rt,Ct):(Ct=V(Ct,Ot.children||[]),Ct.return=Rt,Ct)}function ur(Rt,Ct,Ot,br,an){return Ct===null||Ct.tag!==7?(Ct=xh(Ot,Rt.mode,br,an),Ct.return=Rt,Ct):(Ct=V(Ct,Ot),Ct.return=Rt,Ct)}function gr(Rt,Ct,Ot){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return Ct=Hp(""+Ct,Rt.mode,Ot),Ct.return=Rt,Ct;if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case Se:return Ot=kf(Ct.type,Ct.key,Ct.props,null,Rt.mode,Ot),Ot.ref=Lr(Rt,null,Ct),Ot.return=Rt,Ot;case ze:return Ct=bd(Ct,Rt.mode,Ot),Ct.return=Rt,Ct;case ut:var br=Ct._init;return gr(Rt,br(Ct._payload),Ot)}if($r(Ct)||Ie(Ct))return Ct=xh(Ct,Rt.mode,Ot,null),Ct.return=Rt,Ct;On(Rt,Ct)}return null}function Ar(Rt,Ct,Ot,br){var an=Ct!==null?Ct.key:null;if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number")return an!==null?null:lt(Rt,Ct,""+Ot,br);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case Se:return Ot.key===an?_t(Rt,Ct,Ot,br):null;case ze:return Ot.key===an?Ht(Rt,Ct,Ot,br):null;case ut:return an=Ot._init,Ar(Rt,Ct,an(Ot._payload),br)}if($r(Ot)||Ie(Ot))return an!==null?null:ur(Rt,Ct,Ot,br,null);On(Rt,Ot)}return null}function Nr(Rt,Ct,Ot,br,an){if(typeof br=="string"&&br!==""||typeof br=="number")return Rt=Rt.get(Ot)||null,lt(Ct,Rt,""+br,an);if(typeof br=="object"&&br!==null){switch(br.$$typeof){case Se:return Rt=Rt.get(br.key===null?Ot:br.key)||null,_t(Ct,Rt,br,an);case ze:return Rt=Rt.get(br.key===null?Ot:br.key)||null,Ht(Ct,Rt,br,an);case ut:var vn=br._init;return Nr(Rt,Ct,Ot,vn(br._payload),an)}if($r(br)||Ie(br))return Rt=Rt.get(Ot)||null,ur(Ct,Rt,br,an,null);On(Ct,br)}return null}function Jr(Rt,Ct,Ot,br){for(var an=null,vn=null,_n=Ct,Pn=Ct=0,Io=null;_n!==null&&Pn<Ot.length;Pn++){_n.index>Pn?(Io=_n,_n=null):Io=_n.sibling;var yi=Ar(Rt,_n,Ot[Pn],br);if(yi===null){_n===null&&(_n=Io);break}u&&_n&&yi.alternate===null&&g(Rt,_n),Ct=X(yi,Ct,Pn),vn===null?an=yi:vn.sibling=yi,vn=yi,_n=Io}if(Pn===Ot.length)return C(Rt,_n),er&&bt(Rt,Pn),an;if(_n===null){for(;Pn<Ot.length;Pn++)_n=gr(Rt,Ot[Pn],br),_n!==null&&(Ct=X(_n,Ct,Pn),vn===null?an=_n:vn.sibling=_n,vn=_n);return er&&bt(Rt,Pn),an}for(_n=M(Rt,_n);Pn<Ot.length;Pn++)Io=Nr(_n,Rt,Pn,Ot[Pn],br),Io!==null&&(u&&Io.alternate!==null&&_n.delete(Io.key===null?Pn:Io.key),Ct=X(Io,Ct,Pn),vn===null?an=Io:vn.sibling=Io,vn=Io);return u&&_n.forEach(function($a){return g(Rt,$a)}),er&&bt(Rt,Pn),an}function Vr(Rt,Ct,Ot,br){var an=Ie(Ot);if(typeof an!="function")throw Error(i(150));if(Ot=an.call(Ot),Ot==null)throw Error(i(151));for(var vn=an=null,_n=Ct,Pn=Ct=0,Io=null,yi=Ot.next();_n!==null&&!yi.done;Pn++,yi=Ot.next()){_n.index>Pn?(Io=_n,_n=null):Io=_n.sibling;var $a=Ar(Rt,_n,yi.value,br);if($a===null){_n===null&&(_n=Io);break}u&&_n&&$a.alternate===null&&g(Rt,_n),Ct=X($a,Ct,Pn),vn===null?an=$a:vn.sibling=$a,vn=$a,_n=Io}if(yi.done)return C(Rt,_n),er&&bt(Rt,Pn),an;if(_n===null){for(;!yi.done;Pn++,yi=Ot.next())yi=gr(Rt,yi.value,br),yi!==null&&(Ct=X(yi,Ct,Pn),vn===null?an=yi:vn.sibling=yi,vn=yi);return er&&bt(Rt,Pn),an}for(_n=M(Rt,_n);!yi.done;Pn++,yi=Ot.next())yi=Nr(_n,Rt,Pn,yi.value,br),yi!==null&&(u&&yi.alternate!==null&&_n.delete(yi.key===null?Pn:yi.key),Ct=X(yi,Ct,Pn),vn===null?an=yi:vn.sibling=yi,vn=yi);return u&&_n.forEach(function(Vu){return g(Rt,Vu)}),er&&bt(Rt,Pn),an}function Is(Rt,Ct,Ot,br){if(typeof Ot=="object"&&Ot!==null&&Ot.type===Ze&&Ot.key===null&&(Ot=Ot.props.children),typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case Se:e:{for(var an=Ot.key,vn=Ct;vn!==null;){if(vn.key===an){if(an=Ot.type,an===Ze){if(vn.tag===7){C(Rt,vn.sibling),Ct=V(vn,Ot.props.children),Ct.return=Rt,Rt=Ct;break e}}else if(vn.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===ut&&pi(an)===vn.type){C(Rt,vn.sibling),Ct=V(vn,Ot.props),Ct.ref=Lr(Rt,vn,Ot),Ct.return=Rt,Rt=Ct;break e}C(Rt,vn);break}else g(Rt,vn);vn=vn.sibling}Ot.type===Ze?(Ct=xh(Ot.props.children,Rt.mode,br,Ot.key),Ct.return=Rt,Rt=Ct):(br=kf(Ot.type,Ot.key,Ot.props,null,Rt.mode,br),br.ref=Lr(Rt,Ct,Ot),br.return=Rt,Rt=br)}return we(Rt);case ze:e:{for(vn=Ot.key;Ct!==null;){if(Ct.key===vn)if(Ct.tag===4&&Ct.stateNode.containerInfo===Ot.containerInfo&&Ct.stateNode.implementation===Ot.implementation){C(Rt,Ct.sibling),Ct=V(Ct,Ot.children||[]),Ct.return=Rt,Rt=Ct;break e}else{C(Rt,Ct);break}else g(Rt,Ct);Ct=Ct.sibling}Ct=bd(Ot,Rt.mode,br),Ct.return=Rt,Rt=Ct}return we(Rt);case ut:return vn=Ot._init,Is(Rt,Ct,vn(Ot._payload),br)}if($r(Ot))return Jr(Rt,Ct,Ot,br);if(Ie(Ot))return Vr(Rt,Ct,Ot,br);On(Rt,Ot)}return typeof Ot=="string"&&Ot!==""||typeof Ot=="number"?(Ot=""+Ot,Ct!==null&&Ct.tag===6?(C(Rt,Ct.sibling),Ct=V(Ct,Ot),Ct.return=Rt,Rt=Ct):(C(Rt,Ct),Ct=Hp(Ot,Rt.mode,br),Ct.return=Rt,Rt=Ct),we(Rt)):C(Rt,Ct)}return Is}var as=os(!0),Ni=os(!1),xs=Ra(null),bs=null,Qi=null,En=null;function Xn(){En=Qi=bs=null}function mr(u){var g=xs.current;ai(xs),u._currentValue=g}function wr(u,g,C){for(;u!==null;){var M=u.alternate;if((u.childLanes&g)!==g?(u.childLanes|=g,M!==null&&(M.childLanes|=g)):M!==null&&(M.childLanes&g)!==g&&(M.childLanes|=g),u===C)break;u=u.return}}function Ii(u,g){bs=u,En=Qi=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&g)!==0&&(Ga=!0),u.firstContext=null)}function ji(u){var g=u._currentValue;if(En!==u)if(u={context:u,memoizedValue:g,next:null},Qi===null){if(bs===null)throw Error(i(308));Qi=u,bs.dependencies={lanes:0,firstContext:u}}else Qi=Qi.next=u;return g}var Jn=null;function li(u){Jn===null?Jn=[u]:Jn.push(u)}function Dn(u,g,C,M){var V=g.interleaved;return V===null?(C.next=C,li(g)):(C.next=V.next,V.next=C),g.interleaved=C,_i(u,M)}function _i(u,g){u.lanes|=g;var C=u.alternate;for(C!==null&&(C.lanes|=g),C=u,u=u.return;u!==null;)u.childLanes|=g,C=u.alternate,C!==null&&(C.childLanes|=g),C=u,u=u.return;return C.tag===3?C.stateNode:null}var Bs=!1;function Zs(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function So(u,g){u=u.updateQueue,g.updateQueue===u&&(g.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Mi(u,g){return{eventTime:u,lane:g,tag:0,payload:null,callback:null,next:null}}function Fn(u,g,C){var M=u.updateQueue;if(M===null)return null;if(M=M.shared,(gi&2)!==0){var V=M.pending;return V===null?g.next=g:(g.next=V.next,V.next=g),M.pending=g,_i(u,C)}return V=M.interleaved,V===null?(g.next=g,li(M)):(g.next=V.next,V.next=g),M.interleaved=g,_i(u,C)}function jn(u,g,C){if(g=g.updateQueue,g!==null&&(g=g.shared,(C&4194240)!==0)){var M=g.lanes;M&=u.pendingLanes,C|=M,g.lanes=C,SA(u,C)}}function wi(u,g){var C=u.updateQueue,M=u.alternate;if(M!==null&&(M=M.updateQueue,C===M)){var V=null,X=null;if(C=C.firstBaseUpdate,C!==null){do{var we={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};X===null?V=X=we:X=X.next=we,C=C.next}while(C!==null);X===null?V=X=g:X=X.next=g}else V=X=g;C={baseState:M.baseState,firstBaseUpdate:V,lastBaseUpdate:X,shared:M.shared,effects:M.effects},u.updateQueue=C;return}u=C.lastBaseUpdate,u===null?C.firstBaseUpdate=g:u.next=g,C.lastBaseUpdate=g}function Cs(u,g,C,M){var V=u.updateQueue;Bs=!1;var X=V.firstBaseUpdate,we=V.lastBaseUpdate,lt=V.shared.pending;if(lt!==null){V.shared.pending=null;var _t=lt,Ht=_t.next;_t.next=null,we===null?X=Ht:we.next=Ht,we=_t;var ur=u.alternate;ur!==null&&(ur=ur.updateQueue,lt=ur.lastBaseUpdate,lt!==we&&(lt===null?ur.firstBaseUpdate=Ht:lt.next=Ht,ur.lastBaseUpdate=_t))}if(X!==null){var gr=V.baseState;we=0,ur=Ht=_t=null,lt=X;do{var Ar=lt.lane,Nr=lt.eventTime;if((M&Ar)===Ar){ur!==null&&(ur=ur.next={eventTime:Nr,lane:0,tag:lt.tag,payload:lt.payload,callback:lt.callback,next:null});e:{var Jr=u,Vr=lt;switch(Ar=g,Nr=C,Vr.tag){case 1:if(Jr=Vr.payload,typeof Jr=="function"){gr=Jr.call(Nr,gr,Ar);break e}gr=Jr;break e;case 3:Jr.flags=Jr.flags&-65537|128;case 0:if(Jr=Vr.payload,Ar=typeof Jr=="function"?Jr.call(Nr,gr,Ar):Jr,Ar==null)break e;gr=yt({},gr,Ar);break e;case 2:Bs=!0}}lt.callback!==null&&lt.lane!==0&&(u.flags|=64,Ar=V.effects,Ar===null?V.effects=[lt]:Ar.push(lt))}else Nr={eventTime:Nr,lane:Ar,tag:lt.tag,payload:lt.payload,callback:lt.callback,next:null},ur===null?(Ht=ur=Nr,_t=gr):ur=ur.next=Nr,we|=Ar;if(lt=lt.next,lt===null){if(lt=V.shared.pending,lt===null)break;Ar=lt,lt=Ar.next,Ar.next=null,V.lastBaseUpdate=Ar,V.shared.pending=null}}while(!0);if(ur===null&&(_t=gr),V.baseState=_t,V.firstBaseUpdate=Ht,V.lastBaseUpdate=ur,g=V.shared.interleaved,g!==null){V=g;do we|=V.lane,V=V.next;while(V!==g)}else X===null&&(V.shared.lanes=0);zi|=we,u.lanes=we,u.memoizedState=gr}}function Eo(u,g,C){if(u=g.effects,g.effects=null,u!==null)for(g=0;g<u.length;g++){var M=u[g],V=M.callback;if(V!==null){if(M.callback=null,M=C,typeof V!="function")throw Error(i(191,V));V.call(M)}}}var Xs={},Ss=Ra(Xs),Yi=Ra(Xs),Qa=Ra(Xs);function Oa(u){if(u===Xs)throw Error(i(174));return u}function zc(u,g){switch(Zn(Qa,g),Zn(Yi,u),Zn(Ss,Xs),u=g.nodeType,u){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:he(null,"");break;default:u=u===8?g.parentNode:g,g=u.namespaceURI||null,u=u.tagName,g=he(g,u)}ai(Ss),Zn(Ss,g)}function za(){ai(Ss),ai(Yi),ai(Qa)}function Nl(u){Oa(Qa.current);var g=Oa(Ss.current),C=he(g,u.type);g!==C&&(Zn(Yi,u),Zn(Ss,C))}function OA(u){Yi.current===u&&(ai(Ss),ai(Yi))}var mi=Ra(0);function qo(u){for(var g=u;g!==null;){if(g.tag===13){var C=g.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var hA=[];function cu(){for(var u=0;u<hA.length;u++)hA[u]._workInProgressVersionPrimary=null;hA.length=0}var Ql=de.ReactCurrentDispatcher,Ol=de.ReactCurrentBatchConfig,Ha=0,xi=null,ki=null,Ji=null,Hc=!1,ja=!1,jc=0,w=0;function r(){throw Error(i(321))}function c(u,g){if(g===null)return!1;for(var C=0;C<g.length&&C<u.length;C++)if(!ss(u[C],g[C]))return!1;return!0}function d(u,g,C,M,V,X){if(Ha=X,xi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ql.current=u===null||u.memoizedState===null?Gi:Ys,u=C(M,V),ja){X=0;do{if(ja=!1,jc=0,25<=X)throw Error(i(301));X+=1,Ji=ki=null,g.updateQueue=null,Ql.current=Fs,u=C(M,V)}while(ja)}if(Ql.current=Es,g=ki!==null&&ki.next!==null,Ha=0,Ji=ki=xi=null,Hc=!1,g)throw Error(i(300));return u}function y(){var u=jc!==0;return jc=0,u}function b(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ji===null?xi.memoizedState=Ji=u:Ji=Ji.next=u,Ji}function E(){if(ki===null){var u=xi.alternate;u=u!==null?u.memoizedState:null}else u=ki.next;var g=Ji===null?xi.memoizedState:Ji.next;if(g!==null)Ji=g,ki=u;else{if(u===null)throw Error(i(310));ki=u,u={memoizedState:ki.memoizedState,baseState:ki.baseState,baseQueue:ki.baseQueue,queue:ki.queue,next:null},Ji===null?xi.memoizedState=Ji=u:Ji=Ji.next=u}return Ji}function L(u,g){return typeof g=="function"?g(u):g}function R(u){var g=E(),C=g.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=u;var M=ki,V=M.baseQueue,X=C.pending;if(X!==null){if(V!==null){var we=V.next;V.next=X.next,X.next=we}M.baseQueue=V=X,C.pending=null}if(V!==null){X=V.next,M=M.baseState;var lt=we=null,_t=null,Ht=X;do{var ur=Ht.lane;if((Ha&ur)===ur)_t!==null&&(_t=_t.next={lane:0,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null}),M=Ht.hasEagerState?Ht.eagerState:u(M,Ht.action);else{var gr={lane:ur,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null};_t===null?(lt=_t=gr,we=M):_t=_t.next=gr,xi.lanes|=ur,zi|=ur}Ht=Ht.next}while(Ht!==null&&Ht!==X);_t===null?we=M:_t.next=lt,ss(M,g.memoizedState)||(Ga=!0),g.memoizedState=M,g.baseState=we,g.baseQueue=_t,C.lastRenderedState=M}if(u=C.interleaved,u!==null){V=u;do X=V.lane,xi.lanes|=X,zi|=X,V=V.next;while(V!==u)}else V===null&&(C.lanes=0);return[g.memoizedState,C.dispatch]}function H(u){var g=E(),C=g.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=u;var M=C.dispatch,V=C.pending,X=g.memoizedState;if(V!==null){C.pending=null;var we=V=V.next;do X=u(X,we.action),we=we.next;while(we!==V);ss(X,g.memoizedState)||(Ga=!0),g.memoizedState=X,g.baseQueue===null&&(g.baseState=X),C.lastRenderedState=X}return[X,M]}function K(){}function re(u,g){var C=xi,M=E(),V=g(),X=!ss(M.memoizedState,V);if(X&&(M.memoizedState=V,Ga=!0),M=M.queue,rt(ve.bind(null,C,M,u),[u]),M.getSnapshot!==g||X||Ji!==null&&Ji.memoizedState.tag&1){if(C.flags|=2048,je(9,Ae.bind(null,C,M,V,g),void 0,null),Jo===null)throw Error(i(349));(Ha&30)!==0||J(C,g,V)}return V}function J(u,g,C){u.flags|=16384,u={getSnapshot:g,value:C},g=xi.updateQueue,g===null?(g={lastEffect:null,stores:null},xi.updateQueue=g,g.stores=[u]):(C=g.stores,C===null?g.stores=[u]:C.push(u))}function Ae(u,g,C,M){g.value=C,g.getSnapshot=M,Me(g)&&Oe(u)}function ve(u,g,C){return C(function(){Me(g)&&Oe(u)})}function Me(u){var g=u.getSnapshot;u=u.value;try{var C=g();return!ss(u,C)}catch{return!0}}function Oe(u){var g=_i(u,1);g!==null&&pc(g,u,1,-1)}function Re(u){var g=b();return typeof u=="function"&&(u=u()),g.memoizedState=g.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:L,lastRenderedState:u},g.queue=u,u=u.dispatch=Oi.bind(null,xi,u),[g.memoizedState,u]}function je(u,g,C,M){return u={tag:u,create:g,destroy:C,deps:M,next:null},g=xi.updateQueue,g===null?(g={lastEffect:null,stores:null},xi.updateQueue=g,g.lastEffect=u.next=u):(C=g.lastEffect,C===null?g.lastEffect=u.next=u:(M=C.next,C.next=u,u.next=M,g.lastEffect=u)),u}function it(){return E().memoizedState}function We(u,g,C,M){var V=b();xi.flags|=u,V.memoizedState=je(1|g,C,void 0,M===void 0?null:M)}function ot(u,g,C,M){var V=E();M=M===void 0?null:M;var X=void 0;if(ki!==null){var we=ki.memoizedState;if(X=we.destroy,M!==null&&c(M,we.deps)){V.memoizedState=je(g,C,X,M);return}}xi.flags|=u,V.memoizedState=je(1|g,C,X,M)}function ht(u,g){return We(8390656,8,u,g)}function rt(u,g){return ot(2048,8,u,g)}function vt(u,g){return ot(4,2,u,g)}function Ut(u,g){return ot(4,4,u,g)}function Tt(u,g){if(typeof g=="function")return u=u(),g(u),function(){g(null)};if(g!=null)return u=u(),g.current=u,function(){g.current=null}}function Dt(u,g,C){return C=C!=null?C.concat([u]):null,ot(4,4,Tt.bind(null,g,u),C)}function Nt(){}function rr(u,g){var C=E();g=g===void 0?null:g;var M=C.memoizedState;return M!==null&&g!==null&&c(g,M[1])?M[0]:(C.memoizedState=[u,g],u)}function cr(u,g){var C=E();g=g===void 0?null:g;var M=C.memoizedState;return M!==null&&g!==null&&c(g,M[1])?M[0]:(u=u(),C.memoizedState=[u,g],u)}function tr(u,g,C){return(Ha&21)===0?(u.baseState&&(u.baseState=!1,Ga=!0),u.memoizedState=C):(ss(C,g)||(C=eA(),xi.lanes|=C,zi|=C,u.baseState=!0),g)}function Ur(u,g){var C=Gn;Gn=C!==0&&4>C?C:4,u(!0);var M=Ol.transition;Ol.transition={};try{u(!1),g()}finally{Gn=C,Ol.transition=M}}function yn(){return E().memoizedState}function ci(u,g,C){var M=Kc(u);if(C={lane:M,action:C,hasEagerState:!1,eagerState:null,next:null},Ai(u))Vi(g,C);else if(C=Dn(u,g,C,M),C!==null){var V=qa();pc(C,u,M,V),Ti(C,g,M)}}function Oi(u,g,C){var M=Kc(u),V={lane:M,action:C,hasEagerState:!1,eagerState:null,next:null};if(Ai(u))Vi(g,V);else{var X=u.alternate;if(u.lanes===0&&(X===null||X.lanes===0)&&(X=g.lastRenderedReducer,X!==null))try{var we=g.lastRenderedState,lt=X(we,C);if(V.hasEagerState=!0,V.eagerState=lt,ss(lt,we)){var _t=g.interleaved;_t===null?(V.next=V,li(g)):(V.next=_t.next,_t.next=V),g.interleaved=V;return}}catch{}finally{}C=Dn(u,g,V,M),C!==null&&(V=qa(),pc(C,u,M,V),Ti(C,g,M))}}function Ai(u){var g=u.alternate;return u===xi||g!==null&&g===xi}function Vi(u,g){ja=Hc=!0;var C=u.pending;C===null?g.next=g:(g.next=C.next,C.next=g),u.pending=g}function Ti(u,g,C){if((C&4194240)!==0){var M=g.lanes;M&=u.pendingLanes,C|=M,g.lanes=C,SA(u,C)}}var Es={readContext:ji,useCallback:r,useContext:r,useEffect:r,useImperativeHandle:r,useInsertionEffect:r,useLayoutEffect:r,useMemo:r,useReducer:r,useRef:r,useState:r,useDebugValue:r,useDeferredValue:r,useTransition:r,useMutableSource:r,useSyncExternalStore:r,useId:r,unstable_isNewReconciler:!1},Gi={readContext:ji,useCallback:function(u,g){return b().memoizedState=[u,g===void 0?null:g],u},useContext:ji,useEffect:ht,useImperativeHandle:function(u,g,C){return C=C!=null?C.concat([u]):null,We(4194308,4,Tt.bind(null,g,u),C)},useLayoutEffect:function(u,g){return We(4194308,4,u,g)},useInsertionEffect:function(u,g){return We(4,2,u,g)},useMemo:function(u,g){var C=b();return g=g===void 0?null:g,u=u(),C.memoizedState=[u,g],u},useReducer:function(u,g,C){var M=b();return g=C!==void 0?C(g):g,M.memoizedState=M.baseState=g,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:g},M.queue=u,u=u.dispatch=ci.bind(null,xi,u),[M.memoizedState,u]},useRef:function(u){var g=b();return u={current:u},g.memoizedState=u},useState:Re,useDebugValue:Nt,useDeferredValue:function(u){return b().memoizedState=u},useTransition:function(){var u=Re(!1),g=u[0];return u=Ur.bind(null,u[1]),b().memoizedState=u,[g,u]},useMutableSource:function(){},useSyncExternalStore:function(u,g,C){var M=xi,V=b();if(er){if(C===void 0)throw Error(i(407));C=C()}else{if(C=g(),Jo===null)throw Error(i(349));(Ha&30)!==0||J(M,g,C)}V.memoizedState=C;var X={value:C,getSnapshot:g};return V.queue=X,ht(ve.bind(null,M,X,u),[u]),M.flags|=2048,je(9,Ae.bind(null,M,X,C,g),void 0,null),C},useId:function(){var u=b(),g=Jo.identifierPrefix;if(er){var C=Xe,M=Mt;C=(M&~(1<<32-hs(M)-1)).toString(32)+C,g=":"+g+"R"+C,C=jc++,0<C&&(g+="H"+C.toString(32)),g+=":"}else C=w++,g=":"+g+"r"+C.toString(32)+":";return u.memoizedState=g},unstable_isNewReconciler:!1},Ys={readContext:ji,useCallback:rr,useContext:ji,useEffect:rt,useImperativeHandle:Dt,useInsertionEffect:vt,useLayoutEffect:Ut,useMemo:cr,useReducer:R,useRef:it,useState:function(){return R(L)},useDebugValue:Nt,useDeferredValue:function(u){var g=E();return tr(g,ki.memoizedState,u)},useTransition:function(){var u=R(L)[0],g=E().memoizedState;return[u,g]},useMutableSource:K,useSyncExternalStore:re,useId:yn,unstable_isNewReconciler:!1},Fs={readContext:ji,useCallback:rr,useContext:ji,useEffect:rt,useImperativeHandle:Dt,useInsertionEffect:vt,useLayoutEffect:Ut,useMemo:cr,useReducer:H,useRef:it,useState:function(){return H(L)},useDebugValue:Nt,useDeferredValue:function(u){var g=E();return ki===null?g.memoizedState=u:tr(g,ki.memoizedState,u)},useTransition:function(){var u=H(L)[0],g=E().memoizedState;return[u,g]},useMutableSource:K,useSyncExternalStore:re,useId:yn,unstable_isNewReconciler:!1};function ui(u,g){if(u&&u.defaultProps){g=yt({},g),u=u.defaultProps;for(var C in u)g[C]===void 0&&(g[C]=u[C]);return g}return g}function lo(u,g,C,M){g=u.memoizedState,C=C(M,g),C=C==null?g:yt({},g,C),u.memoizedState=C,u.lanes===0&&(u.updateQueue.baseState=C)}var mo={isMounted:function(u){return(u=u._reactInternals)?rn(u)===u:!1},enqueueSetState:function(u,g,C){u=u._reactInternals;var M=qa(),V=Kc(u),X=Mi(M,V);X.payload=g,C!=null&&(X.callback=C),g=Fn(u,X,V),g!==null&&(pc(g,u,V,M),jn(g,u,V))},enqueueReplaceState:function(u,g,C){u=u._reactInternals;var M=qa(),V=Kc(u),X=Mi(M,V);X.tag=1,X.payload=g,C!=null&&(X.callback=C),g=Fn(u,X,V),g!==null&&(pc(g,u,V,M),jn(g,u,V))},enqueueForceUpdate:function(u,g){u=u._reactInternals;var C=qa(),M=Kc(u),V=Mi(C,M);V.tag=2,g!=null&&(V.callback=g),g=Fn(u,V,M),g!==null&&(pc(g,u,M,C),jn(g,u,M))}};function Ac(u,g,C,M,V,X,we){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(M,X,we):g.prototype&&g.prototype.isPureReactComponent?!Bo(C,M)||!Bo(V,X):!0}function fA(u,g,C){var M=!1,V=Rl,X=g.contextType;return typeof X=="object"&&X!==null?X=ji(X):(V=po(g)?Qc:Ds.current,M=g.contextTypes,X=(M=M!=null)?Oc(u,V):Rl),g=new g(C,X),u.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=mo,u.stateNode=g,g._reactInternals=u,M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=V,u.__reactInternalMemoizedMaskedChildContext=X),g}function zA(u,g,C,M){u=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(C,M),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(C,M),g.state!==u&&mo.enqueueReplaceState(g,g.state,null)}function Ru(u,g,C,M){var V=u.stateNode;V.props=C,V.state=u.memoizedState,V.refs={},Zs(u);var X=g.contextType;typeof X=="object"&&X!==null?V.context=ji(X):(X=po(g)?Qc:Ds.current,V.context=Oc(u,X)),V.state=u.memoizedState,X=g.getDerivedStateFromProps,typeof X=="function"&&(lo(u,g,X,C),V.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(g=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),g!==V.state&&mo.enqueueReplaceState(V,V.state,null),Cs(u,C,V,M),V.state=u.memoizedState),typeof V.componentDidMount=="function"&&(u.flags|=4194308)}function uc(u,g){try{var C="",M=g;do C+=Ye(M),M=M.return;while(M);var V=C}catch(X){V=`
Error generating stack: `+X.message+`
`+X.stack}return{value:u,source:g,stack:V,digest:null}}function zl(u,g,C){return{value:u,source:null,stack:C??null,digest:g??null}}function Js(u,g){try{console.error(g.value)}catch(C){setTimeout(function(){throw C})}}var $o=typeof WeakMap=="function"?WeakMap:Map;function go(u,g,C){C=Mi(-1,C),C.tag=3,C.payload={element:null};var M=g.value;return C.callback=function(){Ou||(Ou=!0,If=M),Js(u,g)},C}function ml(u,g,C){C=Mi(-1,C),C.tag=3;var M=u.type.getDerivedStateFromError;if(typeof M=="function"){var V=g.value;C.payload=function(){return M(V)},C.callback=function(){Js(u,g)}}var X=u.stateNode;return X!==null&&typeof X.componentDidCatch=="function"&&(C.callback=function(){Js(u,g),typeof M!="function"&&(fc===null?fc=new Set([this]):fc.add(this));var we=g.stack;this.componentDidCatch(g.value,{componentStack:we!==null?we:""})}),C}function Ns(u,g,C){var M=u.pingCache;if(M===null){M=u.pingCache=new $o;var V=new Set;M.set(g,V)}else V=M.get(g),V===void 0&&(V=new Set,M.set(g,V));V.has(C)||(V.add(C),u=Lf.bind(null,u,g,C),g.then(u,u))}function eo(u){do{var g;if((g=u.tag===13)&&(g=u.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return u;u=u.return}while(u!==null);return null}function Va(u,g,C,M,V){return(u.mode&1)===0?(u===g?u.flags|=65536:(u.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(g=Mi(-1,1),g.tag=2,Fn(C,g,1))),C.lanes|=1),u):(u.flags|=65536,u.lanes=V,u)}var ls=de.ReactCurrentOwner,Ga=!1;function Wo(u,g,C,M){g.child=u===null?Ni(g,null,C,M):as(g,u.child,C,M)}function Oh(u,g,C,M,V){C=C.render;var X=g.ref;return Ii(g,V),M=d(u,g,C,M,X,V),C=y(),u!==null&&!Ga?(g.updateQueue=u.updateQueue,g.flags&=-2053,u.lanes&=~V,Vc(u,g,V)):(er&&C&&$t(g),g.flags|=1,Wo(u,g,M,V),g.child)}function bf(u,g,C,M,V){if(u===null){var X=C.type;return typeof X=="function"&&!Mf(X)&&X.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(g.tag=15,g.type=X,HA(u,g,X,M,V)):(u=kf(C.type,null,M,g,g.mode,V),u.ref=g.ref,u.return=g,g.child=u)}if(X=u.child,(u.lanes&V)===0){var we=X.memoizedProps;if(C=C.compare,C=C!==null?C:Bo,C(we,M)&&u.ref===g.ref)return Vc(u,g,V)}return g.flags|=1,u=fu(X,M),u.ref=g.ref,u.return=g,g.child=u}function HA(u,g,C,M,V){if(u!==null){var X=u.memoizedProps;if(Bo(X,M)&&u.ref===g.ref)if(Ga=!1,g.pendingProps=M=X,(u.lanes&V)!==0)(u.flags&131072)!==0&&(Ga=!0);else return g.lanes=u.lanes,Vc(u,g,V)}return zh(u,g,C,M,V)}function jA(u,g,C){var M=g.pendingProps,V=M.children,X=u!==null?u.memoizedState:null;if(M.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zn(fh,hc),hc|=C;else{if((C&1073741824)===0)return u=X!==null?X.baseLanes|C:C,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:u,cachePool:null,transitions:null},g.updateQueue=null,Zn(fh,hc),hc|=u,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=X!==null?X.baseLanes:C,Zn(fh,hc),hc|=M}else X!==null?(M=X.baseLanes|C,g.memoizedState=null):M=C,Zn(fh,hc),hc|=M;return Wo(u,g,V,C),g.child}function dA(u,g){var C=g.ref;(u===null&&C!==null||u!==null&&u.ref!==C)&&(g.flags|=512,g.flags|=2097152)}function zh(u,g,C,M,V){var X=po(C)?Qc:Ds.current;return X=Oc(g,X),Ii(g,V),C=d(u,g,C,M,X,V),M=y(),u!==null&&!Ga?(g.updateQueue=u.updateQueue,g.flags&=-2053,u.lanes&=~V,Vc(u,g,V)):(er&&M&&$t(g),g.flags|=1,Wo(u,g,C,V),g.child)}function ah(u,g,C,M,V){if(po(C)){var X=!0;Na(g)}else X=!1;if(Ii(g,V),g.stateNode===null)hh(u,g),fA(g,C,M),Ru(g,C,M,V),M=!0;else if(u===null){var we=g.stateNode,lt=g.memoizedProps;we.props=lt;var _t=we.context,Ht=C.contextType;typeof Ht=="object"&&Ht!==null?Ht=ji(Ht):(Ht=po(C)?Qc:Ds.current,Ht=Oc(g,Ht));var ur=C.getDerivedStateFromProps,gr=typeof ur=="function"||typeof we.getSnapshotBeforeUpdate=="function";gr||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(lt!==M||_t!==Ht)&&zA(g,we,M,Ht),Bs=!1;var Ar=g.memoizedState;we.state=Ar,Cs(g,M,we,V),_t=g.memoizedState,lt!==M||Ar!==_t||Ws.current||Bs?(typeof ur=="function"&&(lo(g,C,ur,M),_t=g.memoizedState),(lt=Bs||Ac(g,C,lt,M,Ar,_t,Ht))?(gr||typeof we.UNSAFE_componentWillMount!="function"&&typeof we.componentWillMount!="function"||(typeof we.componentWillMount=="function"&&we.componentWillMount(),typeof we.UNSAFE_componentWillMount=="function"&&we.UNSAFE_componentWillMount()),typeof we.componentDidMount=="function"&&(g.flags|=4194308)):(typeof we.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=M,g.memoizedState=_t),we.props=M,we.state=_t,we.context=Ht,M=lt):(typeof we.componentDidMount=="function"&&(g.flags|=4194308),M=!1)}else{we=g.stateNode,So(u,g),lt=g.memoizedProps,Ht=g.type===g.elementType?lt:ui(g.type,lt),we.props=Ht,gr=g.pendingProps,Ar=we.context,_t=C.contextType,typeof _t=="object"&&_t!==null?_t=ji(_t):(_t=po(C)?Qc:Ds.current,_t=Oc(g,_t));var Nr=C.getDerivedStateFromProps;(ur=typeof Nr=="function"||typeof we.getSnapshotBeforeUpdate=="function")||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(lt!==gr||Ar!==_t)&&zA(g,we,M,_t),Bs=!1,Ar=g.memoizedState,we.state=Ar,Cs(g,M,we,V);var Jr=g.memoizedState;lt!==gr||Ar!==Jr||Ws.current||Bs?(typeof Nr=="function"&&(lo(g,C,Nr,M),Jr=g.memoizedState),(Ht=Bs||Ac(g,C,Ht,M,Ar,Jr,_t)||!1)?(ur||typeof we.UNSAFE_componentWillUpdate!="function"&&typeof we.componentWillUpdate!="function"||(typeof we.componentWillUpdate=="function"&&we.componentWillUpdate(M,Jr,_t),typeof we.UNSAFE_componentWillUpdate=="function"&&we.UNSAFE_componentWillUpdate(M,Jr,_t)),typeof we.componentDidUpdate=="function"&&(g.flags|=4),typeof we.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof we.componentDidUpdate!="function"||lt===u.memoizedProps&&Ar===u.memoizedState||(g.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||lt===u.memoizedProps&&Ar===u.memoizedState||(g.flags|=1024),g.memoizedProps=M,g.memoizedState=Jr),we.props=M,we.state=Jr,we.context=_t,M=Ht):(typeof we.componentDidUpdate!="function"||lt===u.memoizedProps&&Ar===u.memoizedState||(g.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||lt===u.memoizedProps&&Ar===u.memoizedState||(g.flags|=1024),M=!1)}return lh(u,g,C,M,X,V)}function lh(u,g,C,M,V,X){dA(u,g);var we=(g.flags&128)!==0;if(!M&&!we)return V&&ya(g,C,!1),Vc(u,g,X);M=g.stateNode,ls.current=g;var lt=we&&typeof C.getDerivedStateFromError!="function"?null:M.render();return g.flags|=1,u!==null&&we?(g.child=as(g,u.child,null,X),g.child=as(g,null,lt,X)):Wo(u,g,lt,X),g.memoizedState=M.state,V&&ya(g,C,!0),g.child}function Au(u){var g=u.stateNode;g.pendingContext?Du(u,g.pendingContext,g.pendingContext!==g.context):g.context&&Du(u,g.context,!1),zc(u,g.containerInfo)}function Hh(u,g,C,M,V){return zr(),Er(V),g.flags|=256,Wo(u,g,C,M),g.child}var ch={dehydrated:null,treeContext:null,retryLane:0};function Bf(u){return{baseLanes:u,cachePool:null,transitions:null}}function Jm(u,g,C){var M=g.pendingProps,V=mi.current,X=!1,we=(g.flags&128)!==0,lt;if((lt=we)||(lt=u!==null&&u.memoizedState===null?!1:(V&2)!==0),lt?(X=!0,g.flags&=-129):(u===null||u.memoizedState!==null)&&(V|=1),Zn(mi,V&1),u===null)return Wr(g),u=g.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((g.mode&1)===0?g.lanes=1:u.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(we=M.children,u=M.fallback,X?(M=g.mode,X=g.child,we={mode:"hidden",children:we},(M&1)===0&&X!==null?(X.childLanes=0,X.pendingProps=we):X=bh(we,M,0,null),u=xh(u,M,C,null),X.return=g,u.return=g,X.sibling=u,g.child=X,g.child.memoizedState=Bf(C),g.memoizedState=ch,u):Cf(g,we));if(V=u.memoizedState,V!==null&&(lt=V.dehydrated,lt!==null))return eg(u,g,we,M,lt,V,C);if(X){X=M.fallback,we=g.mode,V=u.child,lt=V.sibling;var _t={mode:"hidden",children:M.children};return(we&1)===0&&g.child!==V?(M=g.child,M.childLanes=0,M.pendingProps=_t,g.deletions=null):(M=fu(V,_t),M.subtreeFlags=V.subtreeFlags&14680064),lt!==null?X=fu(lt,X):(X=xh(X,we,C,null),X.flags|=2),X.return=g,M.return=g,M.sibling=X,g.child=M,M=X,X=g.child,we=u.child.memoizedState,we=we===null?Bf(C):{baseLanes:we.baseLanes|C,cachePool:null,transitions:we.transitions},X.memoizedState=we,X.childLanes=u.childLanes&~C,g.memoizedState=ch,M}return X=u.child,u=X.sibling,M=fu(X,{mode:"visible",children:M.children}),(g.mode&1)===0&&(M.lanes=C),M.return=g,M.sibling=null,u!==null&&(C=g.deletions,C===null?(g.deletions=[u],g.flags|=16):C.push(u)),g.child=M,g.memoizedState=null,M}function Cf(u,g){return g=bh({mode:"visible",children:g},u.mode,0,null),g.return=u,u.child=g}function Sf(u,g,C,M){return M!==null&&Er(M),as(g,u.child,null,C),u=Cf(g,g.pendingProps.children),u.flags|=2,g.memoizedState=null,u}function eg(u,g,C,M,V,X,we){if(C)return g.flags&256?(g.flags&=-257,M=zl(Error(i(422))),Sf(u,g,we,M)):g.memoizedState!==null?(g.child=u.child,g.flags|=128,null):(X=M.fallback,V=g.mode,M=bh({mode:"visible",children:M.children},V,0,null),X=xh(X,V,we,null),X.flags|=2,M.return=g,X.return=g,M.sibling=X,g.child=M,(g.mode&1)!==0&&as(g,u.child,null,we),g.child.memoizedState=Bf(we),g.memoizedState=ch,X);if((g.mode&1)===0)return Sf(u,g,we,null);if(V.data==="$!"){if(M=V.nextSibling&&V.nextSibling.dataset,M)var lt=M.dgst;return M=lt,X=Error(i(419)),M=zl(X,M,void 0),Sf(u,g,we,M)}if(lt=(we&u.childLanes)!==0,Ga||lt){if(M=Jo,M!==null){switch(we&-we){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=(V&(M.suspendedLanes|we))!==0?0:V,V!==0&&V!==X.retryLane&&(X.retryLane=V,_i(u,V),pc(M,u,V,-1))}return _d(),M=zl(Error(i(421))),Sf(u,g,we,M)}return V.data==="$?"?(g.flags|=128,g.child=u.child,g=iv.bind(null,u),V._reactRetry=g,null):(u=X.treeContext,qt=ho(V.nextSibling),Gt=g,er=!0,Jt=null,u!==null&&(ke[Ve++]=Mt,ke[Ve++]=Xe,ke[Ve++]=qe,Mt=u.id,Xe=u.overflow,qe=g),g=Cf(g,M.children),g.flags|=4096,g)}function Ah(u,g,C){u.lanes|=g;var M=u.alternate;M!==null&&(M.lanes|=g),wr(u.return,g,C)}function Sp(u,g,C,M,V){var X=u.memoizedState;X===null?u.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:M,tail:C,tailMode:V}:(X.isBackwards=g,X.rendering=null,X.renderingStartTime=0,X.last=M,X.tail=C,X.tailMode=V)}function uh(u,g,C){var M=g.pendingProps,V=M.revealOrder,X=M.tail;if(Wo(u,g,M.children,C),M=mi.current,(M&2)!==0)M=M&1|2,g.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=g.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Ah(u,C,g);else if(u.tag===19)Ah(u,C,g);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===g)break e;for(;u.sibling===null;){if(u.return===null||u.return===g)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}M&=1}if(Zn(mi,M),(g.mode&1)===0)g.memoizedState=null;else switch(V){case"forwards":for(C=g.child,V=null;C!==null;)u=C.alternate,u!==null&&qo(u)===null&&(V=C),C=C.sibling;C=V,C===null?(V=g.child,g.child=null):(V=C.sibling,C.sibling=null),Sp(g,!1,V,C,X);break;case"backwards":for(C=null,V=g.child,g.child=null;V!==null;){if(u=V.alternate,u!==null&&qo(u)===null){g.child=V;break}u=V.sibling,V.sibling=C,C=V,V=u}Sp(g,!0,C,null,X);break;case"together":Sp(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function hh(u,g){(g.mode&1)===0&&u!==null&&(u.alternate=null,g.alternate=null,g.flags|=2)}function Vc(u,g,C){if(u!==null&&(g.dependencies=u.dependencies),zi|=g.lanes,(C&g.childLanes)===0)return null;if(u!==null&&g.child!==u.child)throw Error(i(153));if(g.child!==null){for(u=g.child,C=fu(u,u.pendingProps),g.child=C,C.return=g;u.sibling!==null;)u=u.sibling,C=C.sibling=fu(u,u.pendingProps),C.return=g;C.sibling=null}return g.child}function tv(u,g,C){switch(g.tag){case 3:Au(g),zr();break;case 5:Nl(g);break;case 1:po(g.type)&&Na(g);break;case 4:zc(g,g.stateNode.containerInfo);break;case 10:var M=g.type._context,V=g.memoizedProps.value;Zn(xs,M._currentValue),M._currentValue=V;break;case 13:if(M=g.memoizedState,M!==null)return M.dehydrated!==null?(Zn(mi,mi.current&1),g.flags|=128,null):(C&g.child.childLanes)!==0?Jm(u,g,C):(Zn(mi,mi.current&1),u=Vc(u,g,C),u!==null?u.sibling:null);Zn(mi,mi.current&1);break;case 19:if(M=(C&g.childLanes)!==0,(u.flags&128)!==0){if(M)return uh(u,g,C);g.flags|=128}if(V=g.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),Zn(mi,mi.current),M)break;return null;case 22:case 23:return g.lanes=0,jA(u,g,C)}return Vc(u,g,C)}var tg,Ep,rg,ng;tg=function(u,g){for(var C=g.child;C!==null;){if(C.tag===5||C.tag===6)u.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===g)break;for(;C.sibling===null;){if(C.return===null||C.return===g)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Ep=function(){},rg=function(u,g,C,M){var V=u.memoizedProps;if(V!==M){u=g.stateNode,Oa(Ss.current);var X=null;switch(C){case"input":V=Br(u,V),M=Br(u,M),X=[];break;case"select":V=yt({},V,{value:void 0}),M=yt({},M,{value:void 0}),X=[];break;case"textarea":V=Qr(u,V),M=Qr(u,M),X=[];break;default:typeof V.onClick!="function"&&typeof M.onClick=="function"&&(u.onclick=DA)}zt(C,M);var we;C=null;for(Ht in V)if(!M.hasOwnProperty(Ht)&&V.hasOwnProperty(Ht)&&V[Ht]!=null)if(Ht==="style"){var lt=V[Ht];for(we in lt)lt.hasOwnProperty(we)&&(C||(C={}),C[we]="")}else Ht!=="dangerouslySetInnerHTML"&&Ht!=="children"&&Ht!=="suppressContentEditableWarning"&&Ht!=="suppressHydrationWarning"&&Ht!=="autoFocus"&&(h.hasOwnProperty(Ht)?X||(X=[]):(X=X||[]).push(Ht,null));for(Ht in M){var _t=M[Ht];if(lt=V?.[Ht],M.hasOwnProperty(Ht)&&_t!==lt&&(_t!=null||lt!=null))if(Ht==="style")if(lt){for(we in lt)!lt.hasOwnProperty(we)||_t&&_t.hasOwnProperty(we)||(C||(C={}),C[we]="");for(we in _t)_t.hasOwnProperty(we)&&lt[we]!==_t[we]&&(C||(C={}),C[we]=_t[we])}else C||(X||(X=[]),X.push(Ht,C)),C=_t;else Ht==="dangerouslySetInnerHTML"?(_t=_t?_t.__html:void 0,lt=lt?lt.__html:void 0,_t!=null&&lt!==_t&&(X=X||[]).push(Ht,_t)):Ht==="children"?typeof _t!="string"&&typeof _t!="number"||(X=X||[]).push(Ht,""+_t):Ht!=="suppressContentEditableWarning"&&Ht!=="suppressHydrationWarning"&&(h.hasOwnProperty(Ht)?(_t!=null&&Ht==="onScroll"&&Fi("scroll",u),X||lt===_t||(X=[])):(X=X||[]).push(Ht,_t))}C&&(X=X||[]).push("style",C);var Ht=X;(g.updateQueue=Ht)&&(g.flags|=4)}},ng=function(u,g,C,M){C!==M&&(g.flags|=4)};function jh(u,g){if(!er)switch(u.tailMode){case"hidden":g=u.tail;for(var C=null;g!==null;)g.alternate!==null&&(C=g),g=g.sibling;C===null?u.tail=null:C.sibling=null;break;case"collapsed":C=u.tail;for(var M=null;C!==null;)C.alternate!==null&&(M=C),C=C.sibling;M===null?g||u.tail===null?u.tail=null:u.tail.sibling=null:M.sibling=null}}function Zo(u){var g=u.alternate!==null&&u.alternate.child===u.child,C=0,M=0;if(g)for(var V=u.child;V!==null;)C|=V.lanes|V.childLanes,M|=V.subtreeFlags&14680064,M|=V.flags&14680064,V.return=u,V=V.sibling;else for(V=u.child;V!==null;)C|=V.lanes|V.childLanes,M|=V.subtreeFlags,M|=V.flags,V.return=u,V=V.sibling;return u.subtreeFlags|=M,u.childLanes=C,g}function ig(u,g,C){var M=g.pendingProps;switch(kt(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zo(g),null;case 1:return po(g.type)&&lu(),Zo(g),null;case 3:return M=g.stateNode,za(),ai(Ws),ai(Ds),cu(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(u===null||u.child===null)&&(Ri(g)?g.flags|=4:u===null||u.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Jt!==null&&(Qp(Jt),Jt=null))),Ep(u,g),Zo(g),null;case 5:OA(g);var V=Oa(Qa.current);if(C=g.type,u!==null&&g.stateNode!=null)rg(u,g,C,M,V),u.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!M){if(g.stateNode===null)throw Error(i(166));return Zo(g),null}if(u=Oa(Ss.current),Ri(g)){M=g.stateNode,C=g.type;var X=g.memoizedProps;switch(M[fo]=g,M[ao]=X,u=(g.mode&1)!==0,C){case"dialog":Fi("cancel",M),Fi("close",M);break;case"iframe":case"object":case"embed":Fi("load",M);break;case"video":case"audio":for(V=0;V<kc.length;V++)Fi(kc[V],M);break;case"source":Fi("error",M);break;case"img":case"image":case"link":Fi("error",M),Fi("load",M);break;case"details":Fi("toggle",M);break;case"input":He(M,X),Fi("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!X.multiple},Fi("invalid",M);break;case"textarea":Dr(M,X),Fi("invalid",M)}zt(C,X),V=null;for(var we in X)if(X.hasOwnProperty(we)){var lt=X[we];we==="children"?typeof lt=="string"?M.textContent!==lt&&(X.suppressHydrationWarning!==!0&&UA(M.textContent,lt,u),V=["children",lt]):typeof lt=="number"&&M.textContent!==""+lt&&(X.suppressHydrationWarning!==!0&&UA(M.textContent,lt,u),V=["children",""+lt]):h.hasOwnProperty(we)&&lt!=null&&we==="onScroll"&&Fi("scroll",M)}switch(C){case"input":Wt(M),qr(M,X,!0);break;case"textarea":Wt(M),un(M);break;case"select":case"option":break;default:typeof X.onClick=="function"&&(M.onclick=DA)}M=V,g.updateQueue=M,M!==null&&(g.flags|=4)}else{we=V.nodeType===9?V:V.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=ft(C)),u==="http://www.w3.org/1999/xhtml"?C==="script"?(u=we.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof M.is=="string"?u=we.createElement(C,{is:M.is}):(u=we.createElement(C),C==="select"&&(we=u,M.multiple?we.multiple=!0:M.size&&(we.size=M.size))):u=we.createElementNS(u,C),u[fo]=g,u[ao]=M,tg(u,g,!1,!1),g.stateNode=u;e:{switch(we=St(C,M),C){case"dialog":Fi("cancel",u),Fi("close",u),V=M;break;case"iframe":case"object":case"embed":Fi("load",u),V=M;break;case"video":case"audio":for(V=0;V<kc.length;V++)Fi(kc[V],u);V=M;break;case"source":Fi("error",u),V=M;break;case"img":case"image":case"link":Fi("error",u),Fi("load",u),V=M;break;case"details":Fi("toggle",u),V=M;break;case"input":He(u,M),V=Br(u,M),Fi("invalid",u);break;case"option":V=M;break;case"select":u._wrapperState={wasMultiple:!!M.multiple},V=yt({},M,{value:void 0}),Fi("invalid",u);break;case"textarea":Dr(u,M),V=Qr(u,M),Fi("invalid",u);break;default:V=M}zt(C,V),lt=V;for(X in lt)if(lt.hasOwnProperty(X)){var _t=lt[X];X==="style"?st(u,_t):X==="dangerouslySetInnerHTML"?(_t=_t?_t.__html:void 0,_t!=null&&ye(u,_t)):X==="children"?typeof _t=="string"?(C!=="textarea"||_t!=="")&&Ke(u,_t):typeof _t=="number"&&Ke(u,""+_t):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(h.hasOwnProperty(X)?_t!=null&&X==="onScroll"&&Fi("scroll",u):_t!=null&&ce(u,X,_t,we))}switch(C){case"input":Wt(u),qr(u,M,!1);break;case"textarea":Wt(u),un(u);break;case"option":M.value!=null&&u.setAttribute("value",""+wt(M.value));break;case"select":u.multiple=!!M.multiple,X=M.value,X!=null?Sr(u,!!M.multiple,X,!1):M.defaultValue!=null&&Sr(u,!!M.multiple,M.defaultValue,!0);break;default:typeof V.onClick=="function"&&(u.onclick=DA)}switch(C){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Zo(g),null;case 6:if(u&&g.stateNode!=null)ng(u,g,u.memoizedProps,M);else{if(typeof M!="string"&&g.stateNode===null)throw Error(i(166));if(C=Oa(Qa.current),Oa(Ss.current),Ri(g)){if(M=g.stateNode,C=g.memoizedProps,M[fo]=g,(X=M.nodeValue!==C)&&(u=Gt,u!==null))switch(u.tag){case 3:UA(M.nodeValue,C,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&UA(M.nodeValue,C,(u.mode&1)!==0)}X&&(g.flags|=4)}else M=(C.nodeType===9?C:C.ownerDocument).createTextNode(M),M[fo]=g,g.stateNode=M}return Zo(g),null;case 13:if(ai(mi),M=g.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(er&&qt!==null&&(g.mode&1)!==0&&(g.flags&128)===0)Sn(),zr(),g.flags|=98560,X=!1;else if(X=Ri(g),M!==null&&M.dehydrated!==null){if(u===null){if(!X)throw Error(i(318));if(X=g.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(i(317));X[fo]=g}else zr(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Zo(g),X=!1}else Jt!==null&&(Qp(Jt),Jt=null),X=!0;if(!X)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=C,g):(M=M!==null,M!==(u!==null&&u.memoizedState!==null)&&M&&(g.child.flags|=8192,(g.mode&1)!==0&&(u===null||(mi.current&1)!==0?Qs===0&&(Qs=3):_d())),g.updateQueue!==null&&(g.flags|=4),Zo(g),null);case 4:return za(),Ep(u,g),u===null&&ac(g.stateNode.containerInfo),Zo(g),null;case 10:return mr(g.type._context),Zo(g),null;case 17:return po(g.type)&&lu(),Zo(g),null;case 19:if(ai(mi),X=g.memoizedState,X===null)return Zo(g),null;if(M=(g.flags&128)!==0,we=X.rendering,we===null)if(M)jh(X,!1);else{if(Qs!==0||u!==null&&(u.flags&128)!==0)for(u=g.child;u!==null;){if(we=qo(u),we!==null){for(g.flags|=128,jh(X,!1),M=we.updateQueue,M!==null&&(g.updateQueue=M,g.flags|=4),g.subtreeFlags=0,M=C,C=g.child;C!==null;)X=C,u=M,X.flags&=14680066,we=X.alternate,we===null?(X.childLanes=0,X.lanes=u,X.child=null,X.subtreeFlags=0,X.memoizedProps=null,X.memoizedState=null,X.updateQueue=null,X.dependencies=null,X.stateNode=null):(X.childLanes=we.childLanes,X.lanes=we.lanes,X.child=we.child,X.subtreeFlags=0,X.deletions=null,X.memoizedProps=we.memoizedProps,X.memoizedState=we.memoizedState,X.updateQueue=we.updateQueue,X.type=we.type,u=we.dependencies,X.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),C=C.sibling;return Zn(mi,mi.current&1|2),g.child}u=u.sibling}X.tail!==null&&fi()>ph&&(g.flags|=128,M=!0,jh(X,!1),g.lanes=4194304)}else{if(!M)if(u=qo(we),u!==null){if(g.flags|=128,M=!0,C=u.updateQueue,C!==null&&(g.updateQueue=C,g.flags|=4),jh(X,!0),X.tail===null&&X.tailMode==="hidden"&&!we.alternate&&!er)return Zo(g),null}else 2*fi()-X.renderingStartTime>ph&&C!==1073741824&&(g.flags|=128,M=!0,jh(X,!1),g.lanes=4194304);X.isBackwards?(we.sibling=g.child,g.child=we):(C=X.last,C!==null?C.sibling=we:g.child=we,X.last=we)}return X.tail!==null?(g=X.tail,X.rendering=g,X.tail=g.sibling,X.renderingStartTime=fi(),g.sibling=null,C=mi.current,Zn(mi,M?C&1|2:C&1),g):(Zo(g),null);case 22:case 23:return vd(),M=g.memoizedState!==null,u!==null&&u.memoizedState!==null!==M&&(g.flags|=8192),M&&(g.mode&1)!==0?(hc&1073741824)!==0&&(Zo(g),g.subtreeFlags&6&&(g.flags|=8192)):Zo(g),null;case 24:return null;case 25:return null}throw Error(i(156,g.tag))}function sg(u,g){switch(kt(g),g.tag){case 1:return po(g.type)&&lu(),u=g.flags,u&65536?(g.flags=u&-65537|128,g):null;case 3:return za(),ai(Ws),ai(Ds),cu(),u=g.flags,(u&65536)!==0&&(u&128)===0?(g.flags=u&-65537|128,g):null;case 5:return OA(g),null;case 13:if(ai(mi),u=g.memoizedState,u!==null&&u.dehydrated!==null){if(g.alternate===null)throw Error(i(340));zr()}return u=g.flags,u&65536?(g.flags=u&-65537|128,g):null;case 19:return ai(mi),null;case 4:return za(),null;case 10:return mr(g.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var Ad=!1,Ka=!1,og=typeof WeakSet=="function"?WeakSet:Set,Zr=null;function Vh(u,g){var C=u.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(M){to(u,g,M)}else C.current=null}function Ef(u,g,C){try{C()}catch(M){to(u,g,M)}}var Fp=!1;function Ip(u,g){if(cc=ec,u=ws(),Tn(u)){if("selectionStart"in u)var C={start:u.selectionStart,end:u.selectionEnd};else e:{C=(C=u.ownerDocument)&&C.defaultView||window;var M=C.getSelection&&C.getSelection();if(M&&M.rangeCount!==0){C=M.anchorNode;var V=M.anchorOffset,X=M.focusNode;M=M.focusOffset;try{C.nodeType,X.nodeType}catch{C=null;break e}var we=0,lt=-1,_t=-1,Ht=0,ur=0,gr=u,Ar=null;t:for(;;){for(var Nr;gr!==C||V!==0&&gr.nodeType!==3||(lt=we+V),gr!==X||M!==0&&gr.nodeType!==3||(_t=we+M),gr.nodeType===3&&(we+=gr.nodeValue.length),(Nr=gr.firstChild)!==null;)Ar=gr,gr=Nr;for(;;){if(gr===u)break t;if(Ar===C&&++Ht===V&&(lt=we),Ar===X&&++ur===M&&(_t=we),(Nr=gr.nextSibling)!==null)break;gr=Ar,Ar=gr.parentNode}gr=Nr}C=lt===-1||_t===-1?null:{start:lt,end:_t}}else C=null}C=C||{start:0,end:0}}else C=null;for(cA={focusedElem:u,selectionRange:C},ec=!1,Zr=g;Zr!==null;)if(g=Zr,u=g.child,(g.subtreeFlags&1028)!==0&&u!==null)u.return=g,Zr=u;else for(;Zr!==null;){g=Zr;try{var Jr=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Jr!==null){var Vr=Jr.memoizedProps,Is=Jr.memoizedState,Rt=g.stateNode,Ct=Rt.getSnapshotBeforeUpdate(g.elementType===g.type?Vr:ui(g.type,Vr),Is);Rt.__reactInternalSnapshotBeforeUpdate=Ct}break;case 3:var Ot=g.stateNode.containerInfo;Ot.nodeType===1?Ot.textContent="":Ot.nodeType===9&&Ot.documentElement&&Ot.removeChild(Ot.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(br){to(g,g.return,br)}if(u=g.sibling,u!==null){u.return=g.return,Zr=u;break}Zr=g.return}return Jr=Fp,Fp=!1,Jr}function uu(u,g,C){var M=g.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var V=M=M.next;do{if((V.tag&u)===u){var X=V.destroy;V.destroy=void 0,X!==void 0&&Ef(g,C,X)}V=V.next}while(V!==M)}}function Xo(u,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&u)===u){var M=C.create;C.destroy=M()}C=C.next}while(C!==g)}}function ud(u){var g=u.ref;if(g!==null){var C=u.stateNode;switch(u.tag){case 5:u=C;break;default:u=C}typeof g=="function"?g(u):g.current=u}}function hd(u){var g=u.alternate;g!==null&&(u.alternate=null,hd(g)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(g=u.stateNode,g!==null&&(delete g[fo],delete g[ao],delete g[$s],delete g[ku],delete g[Nc])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function ag(u){return u.tag===5||u.tag===3||u.tag===4}function Tp(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||ag(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Pp(u,g,C){var M=u.tag;if(M===5||M===6)u=u.stateNode,g?C.nodeType===8?C.parentNode.insertBefore(u,g):C.insertBefore(u,g):(C.nodeType===8?(g=C.parentNode,g.insertBefore(u,C)):(g=C,g.appendChild(u)),C=C._reactRootContainer,C!=null||g.onclick!==null||(g.onclick=DA));else if(M!==4&&(u=u.child,u!==null))for(Pp(u,g,C),u=u.sibling;u!==null;)Pp(u,g,C),u=u.sibling}function Lp(u,g,C){var M=u.tag;if(M===5||M===6)u=u.stateNode,g?C.insertBefore(u,g):C.appendChild(u);else if(M!==4&&(u=u.child,u!==null))for(Lp(u,g,C),u=u.sibling;u!==null;)Lp(u,g,C),u=u.sibling}var Yo=null,pA=!1;function VA(u,g,C){for(C=C.child;C!==null;)Mp(u,g,C),C=C.sibling}function Mp(u,g,C){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(ol,C)}catch{}switch(C.tag){case 5:Ka||Vh(C,g);case 6:var M=Yo,V=pA;Yo=null,VA(u,g,C),Yo=M,pA=V,Yo!==null&&(pA?(u=Yo,C=C.stateNode,u.nodeType===8?u.parentNode.removeChild(C):u.removeChild(C)):Yo.removeChild(C.stateNode));break;case 18:Yo!==null&&(pA?(u=Yo,C=C.stateNode,u.nodeType===8?RA(u.parentNode,C):u.nodeType===1&&RA(u,C),la(u)):RA(Yo,C.stateNode));break;case 4:M=Yo,V=pA,Yo=C.stateNode.containerInfo,pA=!0,VA(u,g,C),Yo=M,pA=V;break;case 0:case 11:case 14:case 15:if(!Ka&&(M=C.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){V=M=M.next;do{var X=V,we=X.destroy;X=X.tag,we!==void 0&&((X&2)!==0||(X&4)!==0)&&Ef(C,g,we),V=V.next}while(V!==M)}VA(u,g,C);break;case 1:if(!Ka&&(Vh(C,g),M=C.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=C.memoizedProps,M.state=C.memoizedState,M.componentWillUnmount()}catch(lt){to(C,g,lt)}VA(u,g,C);break;case 21:VA(u,g,C);break;case 22:C.mode&1?(Ka=(M=Ka)||C.memoizedState!==null,VA(u,g,C),Ka=M):VA(u,g,C);break;default:VA(u,g,C)}}function kp(u){var g=u.updateQueue;if(g!==null){u.updateQueue=null;var C=u.stateNode;C===null&&(C=u.stateNode=new og),g.forEach(function(M){var V=sv.bind(null,u,M);C.has(M)||(C.add(M),M.then(V,V))})}}function mA(u,g){var C=g.deletions;if(C!==null)for(var M=0;M<C.length;M++){var V=C[M];try{var X=u,we=g,lt=we;e:for(;lt!==null;){switch(lt.tag){case 5:Yo=lt.stateNode,pA=!1;break e;case 3:Yo=lt.stateNode.containerInfo,pA=!0;break e;case 4:Yo=lt.stateNode.containerInfo,pA=!0;break e}lt=lt.return}if(Yo===null)throw Error(i(160));Mp(X,we,V),Yo=null,pA=!1;var _t=V.alternate;_t!==null&&(_t.return=null),V.return=null}catch(Ht){to(V,g,Ht)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)lg(g,u),g=g.sibling}function lg(u,g){var C=u.alternate,M=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(mA(g,u),GA(u),M&4){try{uu(3,u,u.return),Xo(3,u)}catch(Vr){to(u,u.return,Vr)}try{uu(5,u,u.return)}catch(Vr){to(u,u.return,Vr)}}break;case 1:mA(g,u),GA(u),M&512&&C!==null&&Vh(C,C.return);break;case 5:if(mA(g,u),GA(u),M&512&&C!==null&&Vh(C,C.return),u.flags&32){var V=u.stateNode;try{Ke(V,"")}catch(Vr){to(u,u.return,Vr)}}if(M&4&&(V=u.stateNode,V!=null)){var X=u.memoizedProps,we=C!==null?C.memoizedProps:X,lt=u.type,_t=u.updateQueue;if(u.updateQueue=null,_t!==null)try{lt==="input"&&X.type==="radio"&&X.name!=null&&yr(V,X),St(lt,we);var Ht=St(lt,X);for(we=0;we<_t.length;we+=2){var ur=_t[we],gr=_t[we+1];ur==="style"?st(V,gr):ur==="dangerouslySetInnerHTML"?ye(V,gr):ur==="children"?Ke(V,gr):ce(V,ur,gr,Ht)}switch(lt){case"input":kr(V,X);break;case"textarea":Qn(V,X);break;case"select":var Ar=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!X.multiple;var Nr=X.value;Nr!=null?Sr(V,!!X.multiple,Nr,!1):Ar!==!!X.multiple&&(X.defaultValue!=null?Sr(V,!!X.multiple,X.defaultValue,!0):Sr(V,!!X.multiple,X.multiple?[]:"",!1))}V[ao]=X}catch(Vr){to(u,u.return,Vr)}}break;case 6:if(mA(g,u),GA(u),M&4){if(u.stateNode===null)throw Error(i(162));V=u.stateNode,X=u.memoizedProps;try{V.nodeValue=X}catch(Vr){to(u,u.return,Vr)}}break;case 3:if(mA(g,u),GA(u),M&4&&C!==null&&C.memoizedState.isDehydrated)try{la(g.containerInfo)}catch(Vr){to(u,u.return,Vr)}break;case 4:mA(g,u),GA(u);break;case 13:mA(g,u),GA(u),V=u.child,V.flags&8192&&(X=V.memoizedState!==null,V.stateNode.isHidden=X,!X||V.alternate!==null&&V.alternate.memoizedState!==null||(dh=fi())),M&4&&kp(u);break;case 22:if(ur=C!==null&&C.memoizedState!==null,u.mode&1?(Ka=(Ht=Ka)||ur,mA(g,u),Ka=Ht):mA(g,u),GA(u),M&8192){if(Ht=u.memoizedState!==null,(u.stateNode.isHidden=Ht)&&!ur&&(u.mode&1)!==0)for(Zr=u,ur=u.child;ur!==null;){for(gr=Zr=ur;Zr!==null;){switch(Ar=Zr,Nr=Ar.child,Ar.tag){case 0:case 11:case 14:case 15:uu(4,Ar,Ar.return);break;case 1:Vh(Ar,Ar.return);var Jr=Ar.stateNode;if(typeof Jr.componentWillUnmount=="function"){M=Ar,C=Ar.return;try{g=M,Jr.props=g.memoizedProps,Jr.state=g.memoizedState,Jr.componentWillUnmount()}catch(Vr){to(M,C,Vr)}}break;case 5:Vh(Ar,Ar.return);break;case 22:if(Ar.memoizedState!==null){Nu(gr);continue}}Nr!==null?(Nr.return=Ar,Zr=Nr):Nu(gr)}ur=ur.sibling}e:for(ur=null,gr=u;;){if(gr.tag===5){if(ur===null){ur=gr;try{V=gr.stateNode,Ht?(X=V.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none"):(lt=gr.stateNode,_t=gr.memoizedProps.style,we=_t!=null&&_t.hasOwnProperty("display")?_t.display:null,lt.style.display=gt("display",we))}catch(Vr){to(u,u.return,Vr)}}}else if(gr.tag===6){if(ur===null)try{gr.stateNode.nodeValue=Ht?"":gr.memoizedProps}catch(Vr){to(u,u.return,Vr)}}else if((gr.tag!==22&&gr.tag!==23||gr.memoizedState===null||gr===u)&&gr.child!==null){gr.child.return=gr,gr=gr.child;continue}if(gr===u)break e;for(;gr.sibling===null;){if(gr.return===null||gr.return===u)break e;ur===gr&&(ur=null),gr=gr.return}ur===gr&&(ur=null),gr.sibling.return=gr.return,gr=gr.sibling}}break;case 19:mA(g,u),GA(u),M&4&&kp(u);break;case 21:break;default:mA(g,u),GA(u)}}function GA(u){var g=u.flags;if(g&2){try{e:{for(var C=u.return;C!==null;){if(ag(C)){var M=C;break e}C=C.return}throw Error(i(160))}switch(M.tag){case 5:var V=M.stateNode;M.flags&32&&(Ke(V,""),M.flags&=-33);var X=Tp(u);Lp(u,X,V);break;case 3:case 4:var we=M.stateNode.containerInfo,lt=Tp(u);Pp(u,lt,we);break;default:throw Error(i(161))}}catch(_t){to(u,u.return,_t)}u.flags&=-3}g&4096&&(u.flags&=-4097)}function fd(u,g,C){Zr=u,dd(u)}function dd(u,g,C){for(var M=(u.mode&1)!==0;Zr!==null;){var V=Zr,X=V.child;if(V.tag===22&&M){var we=V.memoizedState!==null||Ad;if(!we){var lt=V.alternate,_t=lt!==null&&lt.memoizedState!==null||Ka;lt=Ad;var Ht=Ka;if(Ad=we,(Ka=_t)&&!Ht)for(Zr=V;Zr!==null;)we=Zr,_t=we.child,we.tag===22&&we.memoizedState!==null?Gh(V):_t!==null?(_t.return=we,Zr=_t):Gh(V);for(;X!==null;)Zr=X,dd(X),X=X.sibling;Zr=V,Ad=lt,Ka=Ht}Up(u)}else(V.subtreeFlags&8772)!==0&&X!==null?(X.return=V,Zr=X):Up(u)}}function Up(u){for(;Zr!==null;){var g=Zr;if((g.flags&8772)!==0){var C=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:Ka||Xo(5,g);break;case 1:var M=g.stateNode;if(g.flags&4&&!Ka)if(C===null)M.componentDidMount();else{var V=g.elementType===g.type?C.memoizedProps:ui(g.type,C.memoizedProps);M.componentDidUpdate(V,C.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var X=g.updateQueue;X!==null&&Eo(g,X,M);break;case 3:var we=g.updateQueue;if(we!==null){if(C=null,g.child!==null)switch(g.child.tag){case 5:C=g.child.stateNode;break;case 1:C=g.child.stateNode}Eo(g,we,C)}break;case 5:var lt=g.stateNode;if(C===null&&g.flags&4){C=lt;var _t=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":_t.autoFocus&&C.focus();break;case"img":_t.src&&(C.src=_t.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Ht=g.alternate;if(Ht!==null){var ur=Ht.memoizedState;if(ur!==null){var gr=ur.dehydrated;gr!==null&&la(gr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Ka||g.flags&512&&ud(g)}catch(Ar){to(g,g.return,Ar)}}if(g===u){Zr=null;break}if(C=g.sibling,C!==null){C.return=g.return,Zr=C;break}Zr=g.return}}function Nu(u){for(;Zr!==null;){var g=Zr;if(g===u){Zr=null;break}var C=g.sibling;if(C!==null){C.return=g.return,Zr=C;break}Zr=g.return}}function Gh(u){for(;Zr!==null;){var g=Zr;try{switch(g.tag){case 0:case 11:case 15:var C=g.return;try{Xo(4,g)}catch(_t){to(g,C,_t)}break;case 1:var M=g.stateNode;if(typeof M.componentDidMount=="function"){var V=g.return;try{M.componentDidMount()}catch(_t){to(g,V,_t)}}var X=g.return;try{ud(g)}catch(_t){to(g,X,_t)}break;case 5:var we=g.return;try{ud(g)}catch(_t){to(g,we,_t)}}}catch(_t){to(g,g.return,_t)}if(g===u){Zr=null;break}var lt=g.sibling;if(lt!==null){lt.return=g.return,Zr=lt;break}Zr=g.return}}var rv=Math.ceil,pd=de.ReactCurrentDispatcher,Dp=de.ReactCurrentOwner,Gc=de.ReactCurrentBatchConfig,gi=0,Jo=null,yo=null,Fo=0,hc=0,fh=Ra(0),Qs=0,Ff=null,zi=0,hu=0,md=0,Qu=null,va=null,dh=0,ph=1/0,KA=null,Ou=!1,If=null,fc=null,mh=!1,dc=null,zu=0,Tf=0,gd=null,qA=-1,yd=0;function qa(){return(gi&6)!==0?fi():qA!==-1?qA:qA=fi()}function Kc(u){return(u.mode&1)===0?1:(gi&2)!==0&&Fo!==0?Fo&-Fo:di.transition!==null?(yd===0&&(yd=eA()),yd):(u=Gn,u!==0||(u=window.event,u=u===void 0?16:Aa(u.type)),u)}function pc(u,g,C,M){if(50<Tf)throw Tf=0,gd=null,Error(i(185));Yl(u,C,M),((gi&2)===0||u!==Jo)&&(u===Jo&&((gi&2)===0&&(hu|=C),Qs===4&&Hu(u,Fo)),gl(u,M),C===1&&gi===0&&(g.mode&1)===0&&(ph=fi()+500,QA&&ee()))}function gl(u,g){var C=u.callbackNode;ms(u,g);var M=Bc(u,u===Jo?Fo:0);if(M===0)C!==null&&il(C),u.callbackNode=null,u.callbackPriority=0;else if(g=M&-M,u.callbackPriority!==g){if(C!=null&&il(C),g===1)u.tag===0?q(cg.bind(null,u)):D(cg.bind(null,u)),Qh(function(){(gi&6)===0&&ee()}),C=null;else{switch(Bl(M)){case 1:C=bl;break;case 4:C=Bi;break;case 16:C=Hn;break;case 536870912:C=sl;break;default:C=Hn}C=mg(C,Rp.bind(null,u))}u.callbackPriority=g,u.callbackNode=C}}function Rp(u,g){if(qA=-1,yd=0,(gi&6)!==0)throw Error(i(327));var C=u.callbackNode;if(wh()&&u.callbackNode!==C)return null;var M=Bc(u,u===Jo?Fo:0);if(M===0)return null;if((M&30)!==0||(M&u.expiredLanes)!==0||g)g=wd(u,M);else{g=M;var V=gi;gi|=2;var X=ug();(Jo!==u||Fo!==g)&&(KA=null,ph=fi()+500,vh(u,g));do try{Pf();break}catch(lt){Ag(u,lt)}while(!0);Xn(),pd.current=X,gi=V,yo!==null?g=0:(Jo=null,Fo=0,g=Qs)}if(g!==0){if(g===2&&(V=No(u),V!==0&&(M=V,g=Np(u,V))),g===1)throw C=Ff,vh(u,0),Hu(u,M),gl(u,fi()),C;if(g===6)Hu(u,M);else{if(V=u.current.alternate,(M&30)===0&&!nv(V)&&(g=wd(u,M),g===2&&(X=No(u),X!==0&&(M=X,g=Np(u,X))),g===1))throw C=Ff,vh(u,0),Hu(u,M),gl(u,fi()),C;switch(u.finishedWork=V,u.finishedLanes=M,g){case 0:case 1:throw Error(i(345));case 2:_h(u,va,KA);break;case 3:if(Hu(u,M),(M&130023424)===M&&(g=dh+500-fi(),10<g)){if(Bc(u,0)!==0)break;if(V=u.suspendedLanes,(V&M)!==M){qa(),u.pingedLanes|=u.suspendedLanes&V;break}u.timeoutHandle=AA(_h.bind(null,u,va,KA),g);break}_h(u,va,KA);break;case 4:if(Hu(u,M),(M&4194240)===M)break;for(g=u.eventTimes,V=-1;0<M;){var we=31-hs(M);X=1<<we,we=g[we],we>V&&(V=we),M&=~X}if(M=V,M=fi()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*rv(M/1960))-M,10<M){u.timeoutHandle=AA(_h.bind(null,u,va,KA),M);break}_h(u,va,KA);break;case 5:_h(u,va,KA);break;default:throw Error(i(329))}}}return gl(u,fi()),u.callbackNode===C?Rp.bind(null,u):null}function Np(u,g){var C=Qu;return u.current.memoizedState.isDehydrated&&(vh(u,g).flags|=256),u=wd(u,g),u!==2&&(g=va,va=C,g!==null&&Qp(g)),u}function Qp(u){va===null?va=u:va.push.apply(va,u)}function nv(u){for(var g=u;;){if(g.flags&16384){var C=g.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var M=0;M<C.length;M++){var V=C[M],X=V.getSnapshot;V=V.value;try{if(!ss(X(),V))return!1}catch{return!1}}}if(C=g.child,g.subtreeFlags&16384&&C!==null)C.return=g,g=C;else{if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Hu(u,g){for(g&=~md,g&=~hu,u.suspendedLanes|=g,u.pingedLanes&=~g,u=u.expirationTimes;0<g;){var C=31-hs(g),M=1<<C;u[C]=-1,g&=~M}}function cg(u){if((gi&6)!==0)throw Error(i(327));wh();var g=Bc(u,0);if((g&1)===0)return gl(u,fi()),null;var C=wd(u,g);if(u.tag!==0&&C===2){var M=No(u);M!==0&&(g=M,C=Np(u,M))}if(C===1)throw C=Ff,vh(u,0),Hu(u,g),gl(u,fi()),C;if(C===6)throw Error(i(345));return u.finishedWork=u.current.alternate,u.finishedLanes=g,_h(u,va,KA),gl(u,fi()),null}function gh(u,g){var C=gi;gi|=1;try{return u(g)}finally{gi=C,gi===0&&(ph=fi()+500,QA&&ee())}}function yh(u){dc!==null&&dc.tag===0&&(gi&6)===0&&wh();var g=gi;gi|=1;var C=Gc.transition,M=Gn;try{if(Gc.transition=null,Gn=1,u)return u()}finally{Gn=M,Gc.transition=C,gi=g,(gi&6)===0&&ee()}}function vd(){hc=fh.current,ai(fh)}function vh(u,g){u.finishedWork=null,u.finishedLanes=0;var C=u.timeoutHandle;if(C!==-1&&(u.timeoutHandle=-1,ou(C)),yo!==null)for(C=yo.return;C!==null;){var M=C;switch(kt(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&lu();break;case 3:za(),ai(Ws),ai(Ds),cu();break;case 5:OA(M);break;case 4:za();break;case 13:ai(mi);break;case 19:ai(mi);break;case 10:mr(M.type._context);break;case 22:case 23:vd()}C=C.return}if(Jo=u,yo=u=fu(u.current,null),Fo=hc=g,Qs=0,Ff=null,md=hu=zi=0,va=Qu=null,Jn!==null){for(g=0;g<Jn.length;g++)if(C=Jn[g],M=C.interleaved,M!==null){C.interleaved=null;var V=M.next,X=C.pending;if(X!==null){var we=X.next;X.next=V,M.next=we}C.pending=M}Jn=null}return u}function Ag(u,g){do{var C=yo;try{if(Xn(),Ql.current=Es,Hc){for(var M=xi.memoizedState;M!==null;){var V=M.queue;V!==null&&(V.pending=null),M=M.next}Hc=!1}if(Ha=0,Ji=ki=xi=null,ja=!1,jc=0,Dp.current=null,C===null||C.return===null){Qs=1,Ff=g,yo=null;break}e:{var X=u,we=C.return,lt=C,_t=g;if(g=Fo,lt.flags|=32768,_t!==null&&typeof _t=="object"&&typeof _t.then=="function"){var Ht=_t,ur=lt,gr=ur.tag;if((ur.mode&1)===0&&(gr===0||gr===11||gr===15)){var Ar=ur.alternate;Ar?(ur.updateQueue=Ar.updateQueue,ur.memoizedState=Ar.memoizedState,ur.lanes=Ar.lanes):(ur.updateQueue=null,ur.memoizedState=null)}var Nr=eo(we);if(Nr!==null){Nr.flags&=-257,Va(Nr,we,lt,X,g),Nr.mode&1&&Ns(X,Ht,g),g=Nr,_t=Ht;var Jr=g.updateQueue;if(Jr===null){var Vr=new Set;Vr.add(_t),g.updateQueue=Vr}else Jr.add(_t);break e}else{if((g&1)===0){Ns(X,Ht,g),_d();break e}_t=Error(i(426))}}else if(er&&lt.mode&1){var Is=eo(we);if(Is!==null){(Is.flags&65536)===0&&(Is.flags|=256),Va(Is,we,lt,X,g),Er(uc(_t,lt));break e}}X=_t=uc(_t,lt),Qs!==4&&(Qs=2),Qu===null?Qu=[X]:Qu.push(X),X=we;do{switch(X.tag){case 3:X.flags|=65536,g&=-g,X.lanes|=g;var Rt=go(X,_t,g);wi(X,Rt);break e;case 1:lt=_t;var Ct=X.type,Ot=X.stateNode;if((X.flags&128)===0&&(typeof Ct.getDerivedStateFromError=="function"||Ot!==null&&typeof Ot.componentDidCatch=="function"&&(fc===null||!fc.has(Ot)))){X.flags|=65536,g&=-g,X.lanes|=g;var br=ml(X,lt,g);wi(X,br);break e}}X=X.return}while(X!==null)}hg(C)}catch(an){g=an,yo===C&&C!==null&&(yo=C=C.return);continue}break}while(!0)}function ug(){var u=pd.current;return pd.current=Es,u===null?Es:u}function _d(){(Qs===0||Qs===3||Qs===2)&&(Qs=4),Jo===null||(zi&268435455)===0&&(hu&268435455)===0||Hu(Jo,Fo)}function wd(u,g){var C=gi;gi|=2;var M=ug();(Jo!==u||Fo!==g)&&(KA=null,vh(u,g));do try{Op();break}catch(V){Ag(u,V)}while(!0);if(Xn(),gi=C,pd.current=M,yo!==null)throw Error(i(261));return Jo=null,Fo=0,Qs}function Op(){for(;yo!==null;)xd(yo)}function Pf(){for(;yo!==null&&!Zl();)xd(yo)}function xd(u){var g=pg(u.alternate,u,hc);u.memoizedProps=u.pendingProps,g===null?hg(u):yo=g,Dp.current=null}function hg(u){var g=u;do{var C=g.alternate;if(u=g.return,(g.flags&32768)===0){if(C=ig(C,g,hc),C!==null){yo=C;return}}else{if(C=sg(C,g),C!==null){C.flags&=32767,yo=C;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Qs=6,yo=null;return}}if(g=g.sibling,g!==null){yo=g;return}yo=g=u}while(g!==null);Qs===0&&(Qs=5)}function _h(u,g,C){var M=Gn,V=Gc.transition;try{Gc.transition=null,Gn=1,fg(u,g,C,M)}finally{Gc.transition=V,Gn=M}return null}function fg(u,g,C,M){do wh();while(dc!==null);if((gi&6)!==0)throw Error(i(327));C=u.finishedWork;var V=u.finishedLanes;if(C===null)return null;if(u.finishedWork=null,u.finishedLanes=0,C===u.current)throw Error(i(177));u.callbackNode=null,u.callbackPriority=0;var X=C.lanes|C.childLanes;if(ba(u,X),u===Jo&&(yo=Jo=null,Fo=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||mh||(mh=!0,mg(Hn,function(){return wh(),null})),X=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||X){X=Gc.transition,Gc.transition=null;var we=Gn;Gn=1;var lt=gi;gi|=4,Dp.current=null,Ip(u,C),lg(C,u),Fc(cA),ec=!!cc,cA=cc=null,u.current=C,fd(C),xc(),gi=lt,Gn=we,Gc.transition=X}else u.current=C;if(mh&&(mh=!1,dc=u,zu=V),X=u.pendingLanes,X===0&&(fc=null),Uo(C.stateNode),gl(u,fi()),g!==null)for(M=u.onRecoverableError,C=0;C<g.length;C++)V=g[C],M(V.value,{componentStack:V.stack,digest:V.digest});if(Ou)throw Ou=!1,u=If,If=null,u;return(zu&1)!==0&&u.tag!==0&&wh(),X=u.pendingLanes,(X&1)!==0?u===gd?Tf++:(Tf=0,gd=u):Tf=0,ee(),null}function wh(){if(dc!==null){var u=Bl(zu),g=Gc.transition,C=Gn;try{if(Gc.transition=null,Gn=16>u?16:u,dc===null)var M=!1;else{if(u=dc,dc=null,zu=0,(gi&6)!==0)throw Error(i(331));var V=gi;for(gi|=4,Zr=u.current;Zr!==null;){var X=Zr,we=X.child;if((Zr.flags&16)!==0){var lt=X.deletions;if(lt!==null){for(var _t=0;_t<lt.length;_t++){var Ht=lt[_t];for(Zr=Ht;Zr!==null;){var ur=Zr;switch(ur.tag){case 0:case 11:case 15:uu(8,ur,X)}var gr=ur.child;if(gr!==null)gr.return=ur,Zr=gr;else for(;Zr!==null;){ur=Zr;var Ar=ur.sibling,Nr=ur.return;if(hd(ur),ur===Ht){Zr=null;break}if(Ar!==null){Ar.return=Nr,Zr=Ar;break}Zr=Nr}}}var Jr=X.alternate;if(Jr!==null){var Vr=Jr.child;if(Vr!==null){Jr.child=null;do{var Is=Vr.sibling;Vr.sibling=null,Vr=Is}while(Vr!==null)}}Zr=X}}if((X.subtreeFlags&2064)!==0&&we!==null)we.return=X,Zr=we;else e:for(;Zr!==null;){if(X=Zr,(X.flags&2048)!==0)switch(X.tag){case 0:case 11:case 15:uu(9,X,X.return)}var Rt=X.sibling;if(Rt!==null){Rt.return=X.return,Zr=Rt;break e}Zr=X.return}}var Ct=u.current;for(Zr=Ct;Zr!==null;){we=Zr;var Ot=we.child;if((we.subtreeFlags&2064)!==0&&Ot!==null)Ot.return=we,Zr=Ot;else e:for(we=Ct;Zr!==null;){if(lt=Zr,(lt.flags&2048)!==0)try{switch(lt.tag){case 0:case 11:case 15:Xo(9,lt)}}catch(an){to(lt,lt.return,an)}if(lt===we){Zr=null;break e}var br=lt.sibling;if(br!==null){br.return=lt.return,Zr=br;break e}Zr=lt.return}}if(gi=V,ee(),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(ol,u)}catch{}M=!0}return M}finally{Gn=C,Gc.transition=g}}return!1}function dg(u,g,C){g=uc(C,g),g=go(u,g,1),u=Fn(u,g,1),g=qa(),u!==null&&(Yl(u,1,g),gl(u,g))}function to(u,g,C){if(u.tag===3)dg(u,u,C);else for(;g!==null;){if(g.tag===3){dg(g,u,C);break}else if(g.tag===1){var M=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(fc===null||!fc.has(M))){u=uc(C,u),u=ml(g,u,1),g=Fn(g,u,1),u=qa(),g!==null&&(Yl(g,1,u),gl(g,u));break}}g=g.return}}function Lf(u,g,C){var M=u.pingCache;M!==null&&M.delete(g),g=qa(),u.pingedLanes|=u.suspendedLanes&C,Jo===u&&(Fo&C)===C&&(Qs===4||Qs===3&&(Fo&130023424)===Fo&&500>fi()-dh?vh(u,0):md|=C),gl(u,g)}function zp(u,g){g===0&&((u.mode&1)===0?g=1:(g=Do,Do<<=1,(Do&130023424)===0&&(Do=4194304)));var C=qa();u=_i(u,g),u!==null&&(Yl(u,g,C),gl(u,C))}function iv(u){var g=u.memoizedState,C=0;g!==null&&(C=g.retryLane),zp(u,C)}function sv(u,g){var C=0;switch(u.tag){case 13:var M=u.stateNode,V=u.memoizedState;V!==null&&(C=V.retryLane);break;case 19:M=u.stateNode;break;default:throw Error(i(314))}M!==null&&M.delete(g),zp(u,C)}var pg;pg=function(u,g,C){if(u!==null)if(u.memoizedProps!==g.pendingProps||Ws.current)Ga=!0;else{if((u.lanes&C)===0&&(g.flags&128)===0)return Ga=!1,tv(u,g,C);Ga=(u.flags&131072)!==0}else Ga=!1,er&&(g.flags&1048576)!==0&&It(g,Te,g.index);switch(g.lanes=0,g.tag){case 2:var M=g.type;hh(u,g),u=g.pendingProps;var V=Oc(g,Ds.current);Ii(g,C),V=d(null,g,M,u,V,C);var X=y();return g.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,po(M)?(X=!0,Na(g)):X=!1,g.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,Zs(g),V.updater=mo,g.stateNode=V,V._reactInternals=g,Ru(g,M,u,C),g=lh(null,g,M,!0,X,C)):(g.tag=0,er&&X&&$t(g),Wo(null,g,V,C),g=g.child),g;case 16:M=g.elementType;e:{switch(hh(u,g),u=g.pendingProps,V=M._init,M=V(M._payload),g.type=M,V=g.tag=gg(M),u=ui(M,u),V){case 0:g=zh(null,g,M,u,C);break e;case 1:g=ah(null,g,M,u,C);break e;case 11:g=Oh(null,g,M,u,C);break e;case 14:g=bf(null,g,M,ui(M.type,u),C);break e}throw Error(i(306,M,""))}return g;case 0:return M=g.type,V=g.pendingProps,V=g.elementType===M?V:ui(M,V),zh(u,g,M,V,C);case 1:return M=g.type,V=g.pendingProps,V=g.elementType===M?V:ui(M,V),ah(u,g,M,V,C);case 3:e:{if(Au(g),u===null)throw Error(i(387));M=g.pendingProps,X=g.memoizedState,V=X.element,So(u,g),Cs(g,M,null,C);var we=g.memoizedState;if(M=we.element,X.isDehydrated)if(X={element:M,isDehydrated:!1,cache:we.cache,pendingSuspenseBoundaries:we.pendingSuspenseBoundaries,transitions:we.transitions},g.updateQueue.baseState=X,g.memoizedState=X,g.flags&256){V=uc(Error(i(423)),g),g=Hh(u,g,M,C,V);break e}else if(M!==V){V=uc(Error(i(424)),g),g=Hh(u,g,M,C,V);break e}else for(qt=ho(g.stateNode.containerInfo.firstChild),Gt=g,er=!0,Jt=null,C=Ni(g,null,M,C),g.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(zr(),M===V){g=Vc(u,g,C);break e}Wo(u,g,M,C)}g=g.child}return g;case 5:return Nl(g),u===null&&Wr(g),M=g.type,V=g.pendingProps,X=u!==null?u.memoizedProps:null,we=V.children,Mu(M,V)?we=null:X!==null&&Mu(M,X)&&(g.flags|=32),dA(u,g),Wo(u,g,we,C),g.child;case 6:return u===null&&Wr(g),null;case 13:return Jm(u,g,C);case 4:return zc(g,g.stateNode.containerInfo),M=g.pendingProps,u===null?g.child=as(g,null,M,C):Wo(u,g,M,C),g.child;case 11:return M=g.type,V=g.pendingProps,V=g.elementType===M?V:ui(M,V),Oh(u,g,M,V,C);case 7:return Wo(u,g,g.pendingProps,C),g.child;case 8:return Wo(u,g,g.pendingProps.children,C),g.child;case 12:return Wo(u,g,g.pendingProps.children,C),g.child;case 10:e:{if(M=g.type._context,V=g.pendingProps,X=g.memoizedProps,we=V.value,Zn(xs,M._currentValue),M._currentValue=we,X!==null)if(ss(X.value,we)){if(X.children===V.children&&!Ws.current){g=Vc(u,g,C);break e}}else for(X=g.child,X!==null&&(X.return=g);X!==null;){var lt=X.dependencies;if(lt!==null){we=X.child;for(var _t=lt.firstContext;_t!==null;){if(_t.context===M){if(X.tag===1){_t=Mi(-1,C&-C),_t.tag=2;var Ht=X.updateQueue;if(Ht!==null){Ht=Ht.shared;var ur=Ht.pending;ur===null?_t.next=_t:(_t.next=ur.next,ur.next=_t),Ht.pending=_t}}X.lanes|=C,_t=X.alternate,_t!==null&&(_t.lanes|=C),wr(X.return,C,g),lt.lanes|=C;break}_t=_t.next}}else if(X.tag===10)we=X.type===g.type?null:X.child;else if(X.tag===18){if(we=X.return,we===null)throw Error(i(341));we.lanes|=C,lt=we.alternate,lt!==null&&(lt.lanes|=C),wr(we,C,g),we=X.sibling}else we=X.child;if(we!==null)we.return=X;else for(we=X;we!==null;){if(we===g){we=null;break}if(X=we.sibling,X!==null){X.return=we.return,we=X;break}we=we.return}X=we}Wo(u,g,V.children,C),g=g.child}return g;case 9:return V=g.type,M=g.pendingProps.children,Ii(g,C),V=ji(V),M=M(V),g.flags|=1,Wo(u,g,M,C),g.child;case 14:return M=g.type,V=ui(M,g.pendingProps),V=ui(M.type,V),bf(u,g,M,V,C);case 15:return HA(u,g,g.type,g.pendingProps,C);case 17:return M=g.type,V=g.pendingProps,V=g.elementType===M?V:ui(M,V),hh(u,g),g.tag=1,po(M)?(u=!0,Na(g)):u=!1,Ii(g,C),fA(g,M,V),Ru(g,M,V,C),lh(null,g,M,!0,u,C);case 19:return uh(u,g,C);case 22:return jA(u,g,C)}throw Error(i(156,g.tag))};function mg(u,g){return nl(u,g)}function ov(u,g,C,M){this.tag=u,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mc(u,g,C,M){return new ov(u,g,C,M)}function Mf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function gg(u){if(typeof u=="function")return Mf(u)?1:0;if(u!=null){if(u=u.$$typeof,u===ge)return 11;if(u===pt)return 14}return 2}function fu(u,g){var C=u.alternate;return C===null?(C=mc(u.tag,g,u.key,u.mode),C.elementType=u.elementType,C.type=u.type,C.stateNode=u.stateNode,C.alternate=u,u.alternate=C):(C.pendingProps=g,C.type=u.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=u.flags&14680064,C.childLanes=u.childLanes,C.lanes=u.lanes,C.child=u.child,C.memoizedProps=u.memoizedProps,C.memoizedState=u.memoizedState,C.updateQueue=u.updateQueue,g=u.dependencies,C.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},C.sibling=u.sibling,C.index=u.index,C.ref=u.ref,C}function kf(u,g,C,M,V,X){var we=2;if(M=u,typeof u=="function")Mf(u)&&(we=1);else if(typeof u=="string")we=5;else e:switch(u){case Ze:return xh(C.children,V,X,g);case Qe:we=8,V|=8;break;case be:return u=mc(12,C,g,V|2),u.elementType=be,u.lanes=X,u;case Pe:return u=mc(13,C,g,V),u.elementType=Pe,u.lanes=X,u;case Fe:return u=mc(19,C,g,V),u.elementType=Fe,u.lanes=X,u;case At:return bh(C,V,X,g);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case Ge:we=10;break e;case le:we=9;break e;case ge:we=11;break e;case pt:we=14;break e;case ut:we=16,M=null;break e}throw Error(i(130,u==null?u:typeof u,""))}return g=mc(we,C,g,V),g.elementType=u,g.type=M,g.lanes=X,g}function xh(u,g,C,M){return u=mc(7,u,M,g),u.lanes=C,u}function bh(u,g,C,M){return u=mc(22,u,M,g),u.elementType=At,u.lanes=C,u.stateNode={isHidden:!1},u}function Hp(u,g,C){return u=mc(6,u,null,g),u.lanes=C,u}function bd(u,g,C){return g=mc(4,u.children!==null?u.children:[],u.key,g),g.lanes=C,g.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},g}function av(u,g,C,M,V){this.tag=g,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tA(0),this.expirationTimes=tA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tA(0),this.identifierPrefix=M,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function jp(u,g,C,M,V,X,we,lt,_t){return u=new av(u,g,C,lt,_t),g===1?(g=1,X===!0&&(g|=8)):g=0,X=mc(3,null,null,g),u.current=X,X.stateNode=u,X.memoizedState={element:M,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zs(X),u}function lv(u,g,C){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ze,key:M==null?null:""+M,children:u,containerInfo:g,implementation:C}}function Vp(u){if(!u)return Rl;u=u._reactInternals;e:{if(rn(u)!==u||u.tag!==1)throw Error(i(170));var g=u;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(po(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(i(171))}if(u.tag===1){var C=u.type;if(po(C))return uA(u,C,g)}return g}function yg(u,g,C,M,V,X,we,lt,_t){return u=jp(C,M,!0,u,V,X,we,lt,_t),u.context=Vp(null),C=u.current,M=qa(),V=Kc(C),X=Mi(M,V),X.callback=g??null,Fn(C,X,V),u.current.lanes=V,Yl(u,V,M),gl(u,M),u}function Bd(u,g,C,M){var V=g.current,X=qa(),we=Kc(V);return C=Vp(C),g.context===null?g.context=C:g.pendingContext=C,g=Mi(X,we),g.payload={element:u},M=M===void 0?null:M,M!==null&&(g.callback=M),u=Fn(V,g,we),u!==null&&(pc(u,V,we,X),jn(u,V,we)),we}function Os(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function Kh(u,g){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var C=u.retryLane;u.retryLane=C!==0&&C<g?C:g}}function Gp(u,g){Kh(u,g),(u=u.alternate)&&Kh(u,g)}function cv(){return null}var Kp=typeof reportError=="function"?reportError:function(u){console.error(u)};function Cd(u){this._internalRoot=u}Sd.prototype.render=Cd.prototype.render=function(u){var g=this._internalRoot;if(g===null)throw Error(i(409));Bd(u,g,null,null)},Sd.prototype.unmount=Cd.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var g=u.containerInfo;yh(function(){Bd(null,u,null,null)}),g[Us]=null}};function Sd(u){this._internalRoot=u}Sd.prototype.unstable_scheduleHydration=function(u){if(u){var g=Cc();u={blockedOn:null,target:u,priority:g};for(var C=0;C<Yn.length&&g!==0&&g<Yn[C].priority;C++);Yn.splice(C,0,u),C===0&&co(u)}};function Ed(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Uf(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function Bh(){}function qp(u,g,C,M,V){if(V){if(typeof M=="function"){var X=M;M=function(){var Ht=Os(we);X.call(Ht)}}var we=yg(g,M,u,0,null,!1,!1,"",Bh);return u._reactRootContainer=we,u[Us]=we.current,ac(u.nodeType===8?u.parentNode:u),yh(),we}for(;V=u.lastChild;)u.removeChild(V);if(typeof M=="function"){var lt=M;M=function(){var Ht=Os(_t);lt.call(Ht)}}var _t=jp(u,0,!1,null,null,!1,!1,"",Bh);return u._reactRootContainer=_t,u[Us]=_t.current,ac(u.nodeType===8?u.parentNode:u),yh(function(){Bd(g,_t,C,M)}),_t}function Df(u,g,C,M,V){var X=C._reactRootContainer;if(X){var we=X;if(typeof V=="function"){var lt=V;V=function(){var _t=Os(we);lt.call(_t)}}Bd(g,we,u,V)}else we=qp(C,g,u,V,M);return Os(we)}Jl=function(u){switch(u.tag){case 3:var g=u.stateNode;if(g.current.memoizedState.isDehydrated){var C=Ro(g.pendingLanes);C!==0&&(SA(g,C|1),gl(g,fi()),(gi&6)===0&&(ph=fi()+500,ee()))}break;case 13:yh(function(){var M=_i(u,1);if(M!==null){var V=qa();pc(M,u,1,V)}}),Gp(u,1)}},Cl=function(u){if(u.tag===13){var g=_i(u,134217728);if(g!==null){var C=qa();pc(g,u,134217728,C)}Gp(u,134217728)}},EA=function(u){if(u.tag===13){var g=Kc(u),C=_i(u,g);if(C!==null){var M=qa();pc(C,u,g,M)}Gp(u,g)}},Cc=function(){return Gn},aa=function(u,g){var C=Gn;try{return Gn=u,g()}finally{Gn=C}},hr=function(u,g,C){switch(g){case"input":if(kr(u,C),g=C.name,C.type==="radio"&&g!=null){for(C=u;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<C.length;g++){var M=C[g];if(M!==u&&M.form===u.form){var V=NA(M);if(!V)throw Error(i(90));lr(M),kr(M,V)}}}break;case"textarea":Qn(u,C);break;case"select":g=C.value,g!=null&&Sr(u,!!C.multiple,g,!1)}},pr=gh,Gr=yh;var vg={usingClientEntryPoint:!1,Events:[Ua,Da,NA,en,Rr,gh]},ju={findFiberByHostInstance:ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qh={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Ls(u),u===null?null:u.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{ol=Rf.inject(qh),Ms=Rf}catch{}}return $c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vg,$c.createPortal=function(u,g){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ed(g))throw Error(i(200));return lv(u,g,null,C)},$c.createRoot=function(u,g){if(!Ed(u))throw Error(i(299));var C=!1,M="",V=Kp;return g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(M=g.identifierPrefix),g.onRecoverableError!==void 0&&(V=g.onRecoverableError)),g=jp(u,1,!1,null,null,C,!1,M,V),u[Us]=g.current,ac(u.nodeType===8?u.parentNode:u),new Cd(g)},$c.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var g=u._reactInternals;if(g===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=Ls(g),u=u===null?null:u.stateNode,u},$c.flushSync=function(u){return yh(u)},$c.hydrate=function(u,g,C){if(!Uf(g))throw Error(i(200));return Df(null,u,g,!0,C)},$c.hydrateRoot=function(u,g,C){if(!Ed(u))throw Error(i(405));var M=C!=null&&C.hydratedSources||null,V=!1,X="",we=Kp;if(C!=null&&(C.unstable_strictMode===!0&&(V=!0),C.identifierPrefix!==void 0&&(X=C.identifierPrefix),C.onRecoverableError!==void 0&&(we=C.onRecoverableError)),g=yg(g,null,u,1,C??null,V,!1,X,we),u[Us]=g.current,ac(u),M)for(u=0;u<M.length;u++)C=M[u],V=C._getVersion,V=V(C._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[C,V]:g.mutableSourceEagerHydrationData.push(C,V);return new Sd(g)},$c.render=function(u,g,C){if(!Uf(g))throw Error(i(200));return Df(null,u,g,!1,C)},$c.unmountComponentAtNode=function(u){if(!Uf(u))throw Error(i(40));return u._reactRootContainer?(yh(function(){Df(null,null,u,!1,function(){u._reactRootContainer=null,u[Us]=null})}),!0):!1},$c.unstable_batchedUpdates=gh,$c.unstable_renderSubtreeIntoContainer=function(u,g,C,M){if(!Uf(C))throw Error(i(200));if(u==null||u._reactInternals===void 0)throw Error(i(38));return Df(u,g,C,!1,M)},$c.version="18.3.1-next-f1338f8080-20240426",$c}var Nb;function w5(){if(Nb)return Kv.exports;Nb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Kv.exports=qT(),Kv.exports}var Qb;function $T(){if(Qb)return Dg;Qb=1;var e=w5();return Dg.createRoot=e.createRoot,Dg.hydrateRoot=e.hydrateRoot,Dg}var WT=$T(),te=gw();const Tr=mw(te),_y=zT({__proto__:null,default:Tr},[te]),ZT=1,XT=1e6;let Wv=0;function YT(){return Wv=(Wv+1)%Number.MAX_SAFE_INTEGER,Wv.toString()}const Zv=new Map,Ob=e=>{if(Zv.has(e))return;const n=setTimeout(()=>{Zv.delete(e),vm({type:"REMOVE_TOAST",toastId:e})},XT);Zv.set(e,n)},JT=(e,n)=>{switch(n.type){case"ADD_TOAST":return{...e,toasts:[n.toast,...e.toasts].slice(0,ZT)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(i=>i.id===n.toast.id?{...i,...n.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=n;return i?Ob(i):e.toasts.forEach(l=>{Ob(l.id)}),{...e,toasts:e.toasts.map(l=>l.id===i||i===void 0?{...l,open:!1}:l)}}case"REMOVE_TOAST":return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==n.toastId)}}},E0=[];let F0={toasts:[]};function vm(e){F0=JT(F0,e),E0.forEach(n=>{n(F0)})}function n1({...e}){const n=YT(),i=h=>vm({type:"UPDATE_TOAST",toast:{...h,id:n}}),l=()=>vm({type:"DISMISS_TOAST",toastId:n});return vm({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:h=>{h||l()}}}),{id:n,dismiss:l,update:i}}function e3(){const[e,n]=te.useState(F0);return te.useEffect(()=>(E0.push(n),()=>{const i=E0.indexOf(n);i>-1&&E0.splice(i,1)}),[e]),{...e,toast:n1,dismiss:i=>vm({type:"DISMISS_TOAST",toastId:i})}}var yp=w5();const x5=mw(yp);function kn(e,n,{checkForDefaultPrevented:i=!0}={}){return function(h){if(e?.(h),i===!1||!h.defaultPrevented)return n?.(h)}}function zb(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function zm(...e){return n=>{let i=!1;const l=e.map(h=>{const f=zb(h,n);return!i&&typeof f=="function"&&(i=!0),f});if(i)return()=>{for(let h=0;h<l.length;h++){const f=l[h];typeof f=="function"?f():zb(e[h],null)}}}}function us(...e){return te.useCallback(zm(...e),e)}function Nh(e,n=[]){let i=[];function l(f,m){const a=te.createContext(m),x=i.length;i=[...i,m];const S=U=>{const{scope:Q,children:P,...$}=U,z=Q?.[e]?.[x]||a,O=te.useMemo(()=>$,Object.values($));return oe.jsx(z.Provider,{value:O,children:P})};S.displayName=f+"Provider";function I(U,Q){const P=Q?.[e]?.[x]||a,$=te.useContext(P);if($)return $;if(m!==void 0)return m;throw new Error(`\`${U}\` must be used within \`${f}\``)}return[S,I]}const h=()=>{const f=i.map(m=>te.createContext(m));return function(a){const x=a?.[e]||f;return te.useMemo(()=>({[`__scope${e}`]:{...a,[e]:x}}),[a,x])}};return h.scopeName=e,[l,t3(h,...n)]}function t3(...e){const n=e[0];if(e.length===1)return n;const i=()=>{const l=e.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(f){const m=l.reduce((a,{useScope:x,scopeName:S})=>{const U=x(f)[`__scope${S}`];return{...a,...U}},{});return te.useMemo(()=>({[`__scope${n.scopeName}`]:m}),[m])}};return i.scopeName=n.scopeName,i}function Hb(e){const n=r3(e),i=te.forwardRef((l,h)=>{const{children:f,...m}=l,a=te.Children.toArray(f),x=a.find(i3);if(x){const S=x.props.children,I=a.map(U=>U===x?te.Children.count(S)>1?te.Children.only(null):te.isValidElement(S)?S.props.children:null:U);return oe.jsx(n,{...m,ref:h,children:te.isValidElement(S)?te.cloneElement(S,void 0,I):null})}return oe.jsx(n,{...m,ref:h,children:f})});return i.displayName=`${e}.Slot`,i}function r3(e){const n=te.forwardRef((i,l)=>{const{children:h,...f}=i;if(te.isValidElement(h)){const m=o3(h),a=s3(f,h.props);return h.type!==te.Fragment&&(a.ref=l?zm(l,m):m),te.cloneElement(h,a)}return te.Children.count(h)>1?te.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var n3=Symbol("radix.slottable");function i3(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===n3}function s3(e,n){const i={...n};for(const l in n){const h=e[l],f=n[l];/^on[A-Z]/.test(l)?h&&f?i[l]=(...a)=>{const x=f(...a);return h(...a),x}:h&&(i[l]=h):l==="style"?i[l]={...h,...f}:l==="className"&&(i[l]=[h,f].filter(Boolean).join(" "))}return{...e,...i}}function o3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function yw(e){const n=e+"CollectionProvider",[i,l]=Nh(n),[h,f]=i(n,{collectionRef:{current:null},itemMap:new Map}),m=z=>{const{scope:O,children:W}=z,ne=Tr.useRef(null),ce=Tr.useRef(new Map).current;return oe.jsx(h,{scope:O,itemMap:ce,collectionRef:ne,children:W})};m.displayName=n;const a=e+"CollectionSlot",x=Hb(a),S=Tr.forwardRef((z,O)=>{const{scope:W,children:ne}=z,ce=f(a,W),de=us(O,ce.collectionRef);return oe.jsx(x,{ref:de,children:ne})});S.displayName=a;const I=e+"CollectionItemSlot",U="data-radix-collection-item",Q=Hb(I),P=Tr.forwardRef((z,O)=>{const{scope:W,children:ne,...ce}=z,de=Tr.useRef(null),Se=us(O,de),ze=f(I,W);return Tr.useEffect(()=>(ze.itemMap.set(de,{ref:de,...ce}),()=>void ze.itemMap.delete(de))),oe.jsx(Q,{[U]:"",ref:Se,children:ne})});P.displayName=I;function $(z){const O=f(e+"CollectionConsumer",z);return Tr.useCallback(()=>{const ne=O.collectionRef.current;if(!ne)return[];const ce=Array.from(ne.querySelectorAll(`[${U}]`));return Array.from(O.itemMap.values()).sort((ze,Ze)=>ce.indexOf(ze.ref.current)-ce.indexOf(Ze.ref.current))},[O.collectionRef,O.itemMap])}return[{Provider:m,Slot:S,ItemSlot:P},$,l]}function a3(e){const n=l3(e),i=te.forwardRef((l,h)=>{const{children:f,...m}=l,a=te.Children.toArray(f),x=a.find(A3);if(x){const S=x.props.children,I=a.map(U=>U===x?te.Children.count(S)>1?te.Children.only(null):te.isValidElement(S)?S.props.children:null:U);return oe.jsx(n,{...m,ref:h,children:te.isValidElement(S)?te.cloneElement(S,void 0,I):null})}return oe.jsx(n,{...m,ref:h,children:f})});return i.displayName=`${e}.Slot`,i}function l3(e){const n=te.forwardRef((i,l)=>{const{children:h,...f}=i;if(te.isValidElement(h)){const m=h3(h),a=u3(f,h.props);return h.type!==te.Fragment&&(a.ref=l?zm(l,m):m),te.cloneElement(h,a)}return te.Children.count(h)>1?te.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var c3=Symbol("radix.slottable");function A3(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===c3}function u3(e,n){const i={...n};for(const l in n){const h=e[l],f=n[l];/^on[A-Z]/.test(l)?h&&f?i[l]=(...a)=>{const x=f(...a);return h(...a),x}:h&&(i[l]=h):l==="style"?i[l]={...h,...f}:l==="className"&&(i[l]=[h,f].filter(Boolean).join(" "))}return{...e,...i}}function h3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var f3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],si=f3.reduce((e,n)=>{const i=a3(`Primitive.${n}`),l=te.forwardRef((h,f)=>{const{asChild:m,...a}=h,x=m?i:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),oe.jsx(x,{...a,ref:f})});return l.displayName=`Primitive.${n}`,{...e,[n]:l}},{});function b5(e,n){e&&yp.flushSync(()=>e.dispatchEvent(n))}function JA(e){const n=te.useRef(e);return te.useEffect(()=>{n.current=e}),te.useMemo(()=>(...i)=>n.current?.(...i),[])}function d3(e,n=globalThis?.document){const i=JA(e);te.useEffect(()=>{const l=h=>{h.key==="Escape"&&i(h)};return n.addEventListener("keydown",l,{capture:!0}),()=>n.removeEventListener("keydown",l,{capture:!0})},[i,n])}var p3="DismissableLayer",i1="dismissableLayer.update",m3="dismissableLayer.pointerDownOutside",g3="dismissableLayer.focusOutside",jb,B5=te.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wy=te.forwardRef((e,n)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:l,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:a,...x}=e,S=te.useContext(B5),[I,U]=te.useState(null),Q=I?.ownerDocument??globalThis?.document,[,P]=te.useState({}),$=us(n,Ze=>U(Ze)),z=Array.from(S.layers),[O]=[...S.layersWithOutsidePointerEventsDisabled].slice(-1),W=z.indexOf(O),ne=I?z.indexOf(I):-1,ce=S.layersWithOutsidePointerEventsDisabled.size>0,de=ne>=W,Se=v3(Ze=>{const Qe=Ze.target,be=[...S.branches].some(Ge=>Ge.contains(Qe));!de||be||(h?.(Ze),m?.(Ze),Ze.defaultPrevented||a?.())},Q),ze=_3(Ze=>{const Qe=Ze.target;[...S.branches].some(Ge=>Ge.contains(Qe))||(f?.(Ze),m?.(Ze),Ze.defaultPrevented||a?.())},Q);return d3(Ze=>{ne===S.layers.size-1&&(l?.(Ze),!Ze.defaultPrevented&&a&&(Ze.preventDefault(),a()))},Q),te.useEffect(()=>{if(I)return i&&(S.layersWithOutsidePointerEventsDisabled.size===0&&(jb=Q.body.style.pointerEvents,Q.body.style.pointerEvents="none"),S.layersWithOutsidePointerEventsDisabled.add(I)),S.layers.add(I),Vb(),()=>{i&&S.layersWithOutsidePointerEventsDisabled.size===1&&(Q.body.style.pointerEvents=jb)}},[I,Q,i,S]),te.useEffect(()=>()=>{I&&(S.layers.delete(I),S.layersWithOutsidePointerEventsDisabled.delete(I),Vb())},[I,S]),te.useEffect(()=>{const Ze=()=>P({});return document.addEventListener(i1,Ze),()=>document.removeEventListener(i1,Ze)},[]),oe.jsx(si.div,{...x,ref:$,style:{pointerEvents:ce?de?"auto":"none":void 0,...e.style},onFocusCapture:kn(e.onFocusCapture,ze.onFocusCapture),onBlurCapture:kn(e.onBlurCapture,ze.onBlurCapture),onPointerDownCapture:kn(e.onPointerDownCapture,Se.onPointerDownCapture)})});wy.displayName=p3;var y3="DismissableLayerBranch",C5=te.forwardRef((e,n)=>{const i=te.useContext(B5),l=te.useRef(null),h=us(n,l);return te.useEffect(()=>{const f=l.current;if(f)return i.branches.add(f),()=>{i.branches.delete(f)}},[i.branches]),oe.jsx(si.div,{...e,ref:h})});C5.displayName=y3;function v3(e,n=globalThis?.document){const i=JA(e),l=te.useRef(!1),h=te.useRef(()=>{});return te.useEffect(()=>{const f=a=>{if(a.target&&!l.current){let x=function(){S5(m3,i,S,{discrete:!0})};const S={originalEvent:a};a.pointerType==="touch"?(n.removeEventListener("click",h.current),h.current=x,n.addEventListener("click",h.current,{once:!0})):x()}else n.removeEventListener("click",h.current);l.current=!1},m=window.setTimeout(()=>{n.addEventListener("pointerdown",f)},0);return()=>{window.clearTimeout(m),n.removeEventListener("pointerdown",f),n.removeEventListener("click",h.current)}},[n,i]),{onPointerDownCapture:()=>l.current=!0}}function _3(e,n=globalThis?.document){const i=JA(e),l=te.useRef(!1);return te.useEffect(()=>{const h=f=>{f.target&&!l.current&&S5(g3,i,{originalEvent:f},{discrete:!1})};return n.addEventListener("focusin",h),()=>n.removeEventListener("focusin",h)},[n,i]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function Vb(){const e=new CustomEvent(i1);document.dispatchEvent(e)}function S5(e,n,i,{discrete:l}){const h=i.originalEvent.target,f=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});n&&h.addEventListener(e,n,{once:!0}),l?b5(h,f):h.dispatchEvent(f)}var w3=wy,x3=C5,wl=globalThis?.document?te.useLayoutEffect:()=>{},b3="Portal",vw=te.forwardRef((e,n)=>{const{container:i,...l}=e,[h,f]=te.useState(!1);wl(()=>f(!0),[]);const m=i||h&&globalThis?.document?.body;return m?x5.createPortal(oe.jsx(si.div,{...l,ref:n}),m):null});vw.displayName=b3;function B3(e,n){return te.useReducer((i,l)=>n[i][l]??i,e)}var Hm=e=>{const{present:n,children:i}=e,l=C3(n),h=typeof i=="function"?i({present:l.isPresent}):te.Children.only(i),f=us(l.ref,S3(h));return typeof i=="function"||l.isPresent?te.cloneElement(h,{ref:f}):null};Hm.displayName="Presence";function C3(e){const[n,i]=te.useState(),l=te.useRef(null),h=te.useRef(e),f=te.useRef("none"),m=e?"mounted":"unmounted",[a,x]=B3(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return te.useEffect(()=>{const S=Rg(l.current);f.current=a==="mounted"?S:"none"},[a]),wl(()=>{const S=l.current,I=h.current;if(I!==e){const Q=f.current,P=Rg(S);e?x("MOUNT"):P==="none"||S?.display==="none"?x("UNMOUNT"):x(I&&Q!==P?"ANIMATION_OUT":"UNMOUNT"),h.current=e}},[e,x]),wl(()=>{if(n){let S;const I=n.ownerDocument.defaultView??window,U=P=>{const z=Rg(l.current).includes(CSS.escape(P.animationName));if(P.target===n&&z&&(x("ANIMATION_END"),!h.current)){const O=n.style.animationFillMode;n.style.animationFillMode="forwards",S=I.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=O)})}},Q=P=>{P.target===n&&(f.current=Rg(l.current))};return n.addEventListener("animationstart",Q),n.addEventListener("animationcancel",U),n.addEventListener("animationend",U),()=>{I.clearTimeout(S),n.removeEventListener("animationstart",Q),n.removeEventListener("animationcancel",U),n.removeEventListener("animationend",U)}}else x("ANIMATION_END")},[n,x]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:te.useCallback(S=>{l.current=S?getComputedStyle(S):null,i(S)},[])}}function Rg(e){return e?.animationName||"none"}function S3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var E3=_y[" useInsertionEffect ".trim().toString()]||wl;function fp({prop:e,defaultProp:n,onChange:i=()=>{},caller:l}){const[h,f,m]=F3({defaultProp:n,onChange:i}),a=e!==void 0,x=a?e:h;{const I=te.useRef(e!==void 0);te.useEffect(()=>{const U=I.current;U!==a&&console.warn(`${l} is changing from ${U?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),I.current=a},[a,l])}const S=te.useCallback(I=>{if(a){const U=I3(I)?I(e):I;U!==e&&m.current?.(U)}else f(I)},[a,e,f,m]);return[x,S]}function F3({defaultProp:e,onChange:n}){const[i,l]=te.useState(e),h=te.useRef(i),f=te.useRef(n);return E3(()=>{f.current=n},[n]),te.useEffect(()=>{h.current!==i&&(f.current?.(i),h.current=i)},[i,h]),[i,l,f]}function I3(e){return typeof e=="function"}var E5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),T3="VisuallyHidden",xy=te.forwardRef((e,n)=>oe.jsx(si.span,{...e,ref:n,style:{...E5,...e.style}}));xy.displayName=T3;var P3=xy,_w="ToastProvider",[ww,L3,M3]=yw("Toast"),[F5]=Nh("Toast",[M3]),[k3,by]=F5(_w),I5=e=>{const{__scopeToast:n,label:i="Notification",duration:l=5e3,swipeDirection:h="right",swipeThreshold:f=50,children:m}=e,[a,x]=te.useState(null),[S,I]=te.useState(0),U=te.useRef(!1),Q=te.useRef(!1);return i.trim()||console.error(`Invalid prop \`label\` supplied to \`${_w}\`. Expected non-empty \`string\`.`),oe.jsx(ww.Provider,{scope:n,children:oe.jsx(k3,{scope:n,label:i,duration:l,swipeDirection:h,swipeThreshold:f,toastCount:S,viewport:a,onViewportChange:x,onToastAdd:te.useCallback(()=>I(P=>P+1),[]),onToastRemove:te.useCallback(()=>I(P=>P-1),[]),isFocusedToastEscapeKeyDownRef:U,isClosePausedRef:Q,children:m})})};I5.displayName=_w;var T5="ToastViewport",U3=["F8"],s1="toast.viewportPause",o1="toast.viewportResume",P5=te.forwardRef((e,n)=>{const{__scopeToast:i,hotkey:l=U3,label:h="Notifications ({hotkey})",...f}=e,m=by(T5,i),a=L3(i),x=te.useRef(null),S=te.useRef(null),I=te.useRef(null),U=te.useRef(null),Q=us(n,U,m.onViewportChange),P=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=m.toastCount>0;te.useEffect(()=>{const O=W=>{l.length!==0&&l.every(ce=>W[ce]||W.code===ce)&&U.current?.focus()};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[l]),te.useEffect(()=>{const O=x.current,W=U.current;if($&&O&&W){const ne=()=>{if(!m.isClosePausedRef.current){const ze=new CustomEvent(s1);W.dispatchEvent(ze),m.isClosePausedRef.current=!0}},ce=()=>{if(m.isClosePausedRef.current){const ze=new CustomEvent(o1);W.dispatchEvent(ze),m.isClosePausedRef.current=!1}},de=ze=>{!O.contains(ze.relatedTarget)&&ce()},Se=()=>{O.contains(document.activeElement)||ce()};return O.addEventListener("focusin",ne),O.addEventListener("focusout",de),O.addEventListener("pointermove",ne),O.addEventListener("pointerleave",Se),window.addEventListener("blur",ne),window.addEventListener("focus",ce),()=>{O.removeEventListener("focusin",ne),O.removeEventListener("focusout",de),O.removeEventListener("pointermove",ne),O.removeEventListener("pointerleave",Se),window.removeEventListener("blur",ne),window.removeEventListener("focus",ce)}}},[$,m.isClosePausedRef]);const z=te.useCallback(({tabbingDirection:O})=>{const ne=a().map(ce=>{const de=ce.ref.current,Se=[de,...$3(de)];return O==="forwards"?Se:Se.reverse()});return(O==="forwards"?ne.reverse():ne).flat()},[a]);return te.useEffect(()=>{const O=U.current;if(O){const W=ne=>{const ce=ne.altKey||ne.ctrlKey||ne.metaKey;if(ne.key==="Tab"&&!ce){const Se=document.activeElement,ze=ne.shiftKey;if(ne.target===O&&ze){S.current?.focus();return}const be=z({tabbingDirection:ze?"backwards":"forwards"}),Ge=be.findIndex(le=>le===Se);Xv(be.slice(Ge+1))?ne.preventDefault():ze?S.current?.focus():I.current?.focus()}};return O.addEventListener("keydown",W),()=>O.removeEventListener("keydown",W)}},[a,z]),oe.jsxs(x3,{ref:x,role:"region","aria-label":h.replace("{hotkey}",P),tabIndex:-1,style:{pointerEvents:$?void 0:"none"},children:[$&&oe.jsx(a1,{ref:S,onFocusFromOutsideViewport:()=>{const O=z({tabbingDirection:"forwards"});Xv(O)}}),oe.jsx(ww.Slot,{scope:i,children:oe.jsx(si.ol,{tabIndex:-1,...f,ref:Q})}),$&&oe.jsx(a1,{ref:I,onFocusFromOutsideViewport:()=>{const O=z({tabbingDirection:"backwards"});Xv(O)}})]})});P5.displayName=T5;var L5="ToastFocusProxy",a1=te.forwardRef((e,n)=>{const{__scopeToast:i,onFocusFromOutsideViewport:l,...h}=e,f=by(L5,i);return oe.jsx(xy,{tabIndex:0,...h,ref:n,style:{position:"fixed"},onFocus:m=>{const a=m.relatedTarget;!f.viewport?.contains(a)&&l()}})});a1.displayName=L5;var jm="Toast",D3="toast.swipeStart",R3="toast.swipeMove",N3="toast.swipeCancel",Q3="toast.swipeEnd",M5=te.forwardRef((e,n)=>{const{forceMount:i,open:l,defaultOpen:h,onOpenChange:f,...m}=e,[a,x]=fp({prop:l,defaultProp:h??!0,onChange:f,caller:jm});return oe.jsx(Hm,{present:i||a,children:oe.jsx(H3,{open:a,...m,ref:n,onClose:()=>x(!1),onPause:JA(e.onPause),onResume:JA(e.onResume),onSwipeStart:kn(e.onSwipeStart,S=>{S.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:kn(e.onSwipeMove,S=>{const{x:I,y:U}=S.detail.delta;S.currentTarget.setAttribute("data-swipe","move"),S.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${I}px`),S.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${U}px`)}),onSwipeCancel:kn(e.onSwipeCancel,S=>{S.currentTarget.setAttribute("data-swipe","cancel"),S.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),S.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),S.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),S.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:kn(e.onSwipeEnd,S=>{const{x:I,y:U}=S.detail.delta;S.currentTarget.setAttribute("data-swipe","end"),S.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),S.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),S.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${I}px`),S.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${U}px`),x(!1)})})})});M5.displayName=jm;var[O3,z3]=F5(jm,{onClose(){}}),H3=te.forwardRef((e,n)=>{const{__scopeToast:i,type:l="foreground",duration:h,open:f,onClose:m,onEscapeKeyDown:a,onPause:x,onResume:S,onSwipeStart:I,onSwipeMove:U,onSwipeCancel:Q,onSwipeEnd:P,...$}=e,z=by(jm,i),[O,W]=te.useState(null),ne=us(n,Fe=>W(Fe)),ce=te.useRef(null),de=te.useRef(null),Se=h||z.duration,ze=te.useRef(0),Ze=te.useRef(Se),Qe=te.useRef(0),{onToastAdd:be,onToastRemove:Ge}=z,le=JA(()=>{O?.contains(document.activeElement)&&z.viewport?.focus(),m()}),ge=te.useCallback(Fe=>{!Fe||Fe===1/0||(window.clearTimeout(Qe.current),ze.current=new Date().getTime(),Qe.current=window.setTimeout(le,Fe))},[le]);te.useEffect(()=>{const Fe=z.viewport;if(Fe){const pt=()=>{ge(Ze.current),S?.()},ut=()=>{const At=new Date().getTime()-ze.current;Ze.current=Ze.current-At,window.clearTimeout(Qe.current),x?.()};return Fe.addEventListener(s1,ut),Fe.addEventListener(o1,pt),()=>{Fe.removeEventListener(s1,ut),Fe.removeEventListener(o1,pt)}}},[z.viewport,Se,x,S,ge]),te.useEffect(()=>{f&&!z.isClosePausedRef.current&&ge(Se)},[f,Se,z.isClosePausedRef,ge]),te.useEffect(()=>(be(),()=>Ge()),[be,Ge]);const Pe=te.useMemo(()=>O?O5(O):null,[O]);return z.viewport?oe.jsxs(oe.Fragment,{children:[Pe&&oe.jsx(j3,{__scopeToast:i,role:"status","aria-live":l==="foreground"?"assertive":"polite",children:Pe}),oe.jsx(O3,{scope:i,onClose:le,children:yp.createPortal(oe.jsx(ww.ItemSlot,{scope:i,children:oe.jsx(w3,{asChild:!0,onEscapeKeyDown:kn(a,()=>{z.isFocusedToastEscapeKeyDownRef.current||le(),z.isFocusedToastEscapeKeyDownRef.current=!1}),children:oe.jsx(si.li,{tabIndex:0,"data-state":f?"open":"closed","data-swipe-direction":z.swipeDirection,...$,ref:ne,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:kn(e.onKeyDown,Fe=>{Fe.key==="Escape"&&(a?.(Fe.nativeEvent),Fe.nativeEvent.defaultPrevented||(z.isFocusedToastEscapeKeyDownRef.current=!0,le()))}),onPointerDown:kn(e.onPointerDown,Fe=>{Fe.button===0&&(ce.current={x:Fe.clientX,y:Fe.clientY})}),onPointerMove:kn(e.onPointerMove,Fe=>{if(!ce.current)return;const pt=Fe.clientX-ce.current.x,ut=Fe.clientY-ce.current.y,At=!!de.current,Ne=["left","right"].includes(z.swipeDirection),Ie=["left","up"].includes(z.swipeDirection)?Math.min:Math.max,yt=Ne?Ie(0,pt):0,Ue=Ne?0:Ie(0,ut),ie=Fe.pointerType==="touch"?10:2,Ee={x:yt,y:Ue},De={originalEvent:Fe,delta:Ee};At?(de.current=Ee,Ng(R3,U,De,{discrete:!1})):Gb(Ee,z.swipeDirection,ie)?(de.current=Ee,Ng(D3,I,De,{discrete:!1}),Fe.target.setPointerCapture(Fe.pointerId)):(Math.abs(pt)>ie||Math.abs(ut)>ie)&&(ce.current=null)}),onPointerUp:kn(e.onPointerUp,Fe=>{const pt=de.current,ut=Fe.target;if(ut.hasPointerCapture(Fe.pointerId)&&ut.releasePointerCapture(Fe.pointerId),de.current=null,ce.current=null,pt){const At=Fe.currentTarget,Ne={originalEvent:Fe,delta:pt};Gb(pt,z.swipeDirection,z.swipeThreshold)?Ng(Q3,P,Ne,{discrete:!0}):Ng(N3,Q,Ne,{discrete:!0}),At.addEventListener("click",Ie=>Ie.preventDefault(),{once:!0})}})})})}),z.viewport)})]}):null}),j3=e=>{const{__scopeToast:n,children:i,...l}=e,h=by(jm,n),[f,m]=te.useState(!1),[a,x]=te.useState(!1);return K3(()=>m(!0)),te.useEffect(()=>{const S=window.setTimeout(()=>x(!0),1e3);return()=>window.clearTimeout(S)},[]),a?null:oe.jsx(vw,{asChild:!0,children:oe.jsx(xy,{...l,children:f&&oe.jsxs(oe.Fragment,{children:[h.label," ",i]})})})},V3="ToastTitle",k5=te.forwardRef((e,n)=>{const{__scopeToast:i,...l}=e;return oe.jsx(si.div,{...l,ref:n})});k5.displayName=V3;var G3="ToastDescription",U5=te.forwardRef((e,n)=>{const{__scopeToast:i,...l}=e;return oe.jsx(si.div,{...l,ref:n})});U5.displayName=G3;var D5="ToastAction",R5=te.forwardRef((e,n)=>{const{altText:i,...l}=e;return i.trim()?oe.jsx(Q5,{altText:i,asChild:!0,children:oe.jsx(xw,{...l,ref:n})}):(console.error(`Invalid prop \`altText\` supplied to \`${D5}\`. Expected non-empty \`string\`.`),null)});R5.displayName=D5;var N5="ToastClose",xw=te.forwardRef((e,n)=>{const{__scopeToast:i,...l}=e,h=z3(N5,i);return oe.jsx(Q5,{asChild:!0,children:oe.jsx(si.button,{type:"button",...l,ref:n,onClick:kn(e.onClick,h.onClose)})})});xw.displayName=N5;var Q5=te.forwardRef((e,n)=>{const{__scopeToast:i,altText:l,...h}=e;return oe.jsx(si.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":l||void 0,...h,ref:n})});function O5(e){const n=[];return Array.from(e.childNodes).forEach(l=>{if(l.nodeType===l.TEXT_NODE&&l.textContent&&n.push(l.textContent),q3(l)){const h=l.ariaHidden||l.hidden||l.style.display==="none",f=l.dataset.radixToastAnnounceExclude==="";if(!h)if(f){const m=l.dataset.radixToastAnnounceAlt;m&&n.push(m)}else n.push(...O5(l))}}),n}function Ng(e,n,i,{discrete:l}){const h=i.originalEvent.currentTarget,f=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:i});n&&h.addEventListener(e,n,{once:!0}),l?b5(h,f):h.dispatchEvent(f)}var Gb=(e,n,i=0)=>{const l=Math.abs(e.x),h=Math.abs(e.y),f=l>h;return n==="left"||n==="right"?f&&l>i:!f&&h>i};function K3(e=()=>{}){const n=JA(e);wl(()=>{let i=0,l=0;return i=window.requestAnimationFrame(()=>l=window.requestAnimationFrame(n)),()=>{window.cancelAnimationFrame(i),window.cancelAnimationFrame(l)}},[n])}function q3(e){return e.nodeType===e.ELEMENT_NODE}function $3(e){const n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const h=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||h?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function Xv(e){const n=document.activeElement;return e.some(i=>i===n?!0:(i.focus(),document.activeElement!==n))}var W3=I5,z5=P5,H5=M5,j5=k5,V5=U5,G5=R5,K5=xw;function q5(e){var n,i,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(n=0;n<h;n++)e[n]&&(i=q5(e[n]))&&(l&&(l+=" "),l+=i)}else for(i in e)e[i]&&(l&&(l+=" "),l+=i);return l}function $5(){for(var e,n,i=0,l="",h=arguments.length;i<h;i++)(e=arguments[i])&&(n=q5(e))&&(l&&(l+=" "),l+=n);return l}const Kb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qb=$5,By=(e,n)=>i=>{var l;if(n?.variants==null)return qb(e,i?.class,i?.className);const{variants:h,defaultVariants:f}=n,m=Object.keys(h).map(S=>{const I=i?.[S],U=f?.[S];if(I===null)return null;const Q=Kb(I)||Kb(U);return h[S][Q]}),a=i&&Object.entries(i).reduce((S,I)=>{let[U,Q]=I;return Q===void 0||(S[U]=Q),S},{}),x=n==null||(l=n.compoundVariants)===null||l===void 0?void 0:l.reduce((S,I)=>{let{class:U,className:Q,...P}=I;return Object.entries(P).every($=>{let[z,O]=$;return Array.isArray(O)?O.includes({...f,...a}[z]):{...f,...a}[z]===O})?[...S,U,Q]:S},[]);return qb(e,m,x,i?.class,i?.className)};const Z3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W5=(...e)=>e.filter((n,i,l)=>!!n&&n.trim()!==""&&l.indexOf(n)===i).join(" ").trim();var X3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Y3=te.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:h="",children:f,iconNode:m,...a},x)=>te.createElement("svg",{ref:x,...X3,width:n,height:n,stroke:e,strokeWidth:l?Number(i)*24/Number(n):i,className:W5("lucide",h),...a},[...m.map(([S,I])=>te.createElement(S,I)),...Array.isArray(f)?f:[f]]));const tl=(e,n)=>{const i=te.forwardRef(({className:l,...h},f)=>te.createElement(Y3,{ref:f,iconNode:n,className:W5(`lucide-${Z3(e)}`,l),...h}));return i.displayName=`${e}`,i};const J3=tl("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const eP=tl("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const tP=tl("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Z5=tl("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const X5=tl("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const rP=tl("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const nP=tl("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Y5=tl("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const iP=tl("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);const sP=tl("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const l1=tl("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const oP=tl("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const aP=tl("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const bw=tl("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const lP=tl("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const $b=tl("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Wb=tl("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Vm=tl("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bw="-",cP=e=>{const n=uP(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:l}=e;return{getClassGroupId:m=>{const a=m.split(Bw);return a[0]===""&&a.length!==1&&a.shift(),J5(a,n)||AP(m)},getConflictingClassGroupIds:(m,a)=>{const x=i[m]||[];return a&&l[m]?[...x,...l[m]]:x}}},J5=(e,n)=>{if(e.length===0)return n.classGroupId;const i=e[0],l=n.nextPart.get(i),h=l?J5(e.slice(1),l):void 0;if(h)return h;if(n.validators.length===0)return;const f=e.join(Bw);return n.validators.find(({validator:m})=>m(f))?.classGroupId},Zb=/^\[(.+)\]$/,AP=e=>{if(Zb.test(e)){const n=Zb.exec(e)[1],i=n?.substring(0,n.indexOf(":"));if(i)return"arbitrary.."+i}},uP=e=>{const{theme:n,prefix:i}=e,l={nextPart:new Map,validators:[]};return fP(Object.entries(e.classGroups),i).forEach(([f,m])=>{c1(m,l,f,n)}),l},c1=(e,n,i,l)=>{e.forEach(h=>{if(typeof h=="string"){const f=h===""?n:Xb(n,h);f.classGroupId=i;return}if(typeof h=="function"){if(hP(h)){c1(h(l),n,i,l);return}n.validators.push({validator:h,classGroupId:i});return}Object.entries(h).forEach(([f,m])=>{c1(m,Xb(n,f),i,l)})})},Xb=(e,n)=>{let i=e;return n.split(Bw).forEach(l=>{i.nextPart.has(l)||i.nextPart.set(l,{nextPart:new Map,validators:[]}),i=i.nextPart.get(l)}),i},hP=e=>e.isThemeGetter,fP=(e,n)=>n?e.map(([i,l])=>{const h=l.map(f=>typeof f=="string"?n+f:typeof f=="object"?Object.fromEntries(Object.entries(f).map(([m,a])=>[n+m,a])):f);return[i,h]}):e,dP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,i=new Map,l=new Map;const h=(f,m)=>{i.set(f,m),n++,n>e&&(n=0,l=i,i=new Map)};return{get(f){let m=i.get(f);if(m!==void 0)return m;if((m=l.get(f))!==void 0)return h(f,m),m},set(f,m){i.has(f)?i.set(f,m):h(f,m)}}},eS="!",pP=e=>{const{separator:n,experimentalParseClassName:i}=e,l=n.length===1,h=n[0],f=n.length,m=a=>{const x=[];let S=0,I=0,U;for(let O=0;O<a.length;O++){let W=a[O];if(S===0){if(W===h&&(l||a.slice(O,O+f)===n)){x.push(a.slice(I,O)),I=O+f;continue}if(W==="/"){U=O;continue}}W==="["?S++:W==="]"&&S--}const Q=x.length===0?a:a.substring(I),P=Q.startsWith(eS),$=P?Q.substring(1):Q,z=U&&U>I?U-I:void 0;return{modifiers:x,hasImportantModifier:P,baseClassName:$,maybePostfixModifierPosition:z}};return i?a=>i({className:a,parseClassName:m}):m},mP=e=>{if(e.length<=1)return e;const n=[];let i=[];return e.forEach(l=>{l[0]==="["?(n.push(...i.sort(),l),i=[]):i.push(l)}),n.push(...i.sort()),n},gP=e=>({cache:dP(e.cacheSize),parseClassName:pP(e),...cP(e)}),yP=/\s+/,vP=(e,n)=>{const{parseClassName:i,getClassGroupId:l,getConflictingClassGroupIds:h}=n,f=[],m=e.trim().split(yP);let a="";for(let x=m.length-1;x>=0;x-=1){const S=m[x],{modifiers:I,hasImportantModifier:U,baseClassName:Q,maybePostfixModifierPosition:P}=i(S);let $=!!P,z=l($?Q.substring(0,P):Q);if(!z){if(!$){a=S+(a.length>0?" "+a:a);continue}if(z=l(Q),!z){a=S+(a.length>0?" "+a:a);continue}$=!1}const O=mP(I).join(":"),W=U?O+eS:O,ne=W+z;if(f.includes(ne))continue;f.push(ne);const ce=h(z,$);for(let de=0;de<ce.length;++de){const Se=ce[de];f.push(W+Se)}a=S+(a.length>0?" "+a:a)}return a};function _P(){let e=0,n,i,l="";for(;e<arguments.length;)(n=arguments[e++])&&(i=tS(n))&&(l&&(l+=" "),l+=i);return l}const tS=e=>{if(typeof e=="string")return e;let n,i="";for(let l=0;l<e.length;l++)e[l]&&(n=tS(e[l]))&&(i&&(i+=" "),i+=n);return i};function wP(e,...n){let i,l,h,f=m;function m(x){const S=n.reduce((I,U)=>U(I),e());return i=gP(S),l=i.cache.get,h=i.cache.set,f=a,a(x)}function a(x){const S=l(x);if(S)return S;const I=vP(x,i);return h(x,I),I}return function(){return f(_P.apply(null,arguments))}}const js=e=>{const n=i=>i[e]||[];return n.isThemeGetter=!0,n},rS=/^\[(?:([a-z-]+):)?(.+)\]$/i,xP=/^\d+\/\d+$/,bP=new Set(["px","full","screen"]),BP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,FP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fh=e=>ip(e)||bP.has(e)||xP.test(e),Yh=e=>vp(e,"length",DP),ip=e=>!!e&&!Number.isNaN(Number(e)),Yv=e=>vp(e,"number",ip),nm=e=>!!e&&Number.isInteger(Number(e)),IP=e=>e.endsWith("%")&&ip(e.slice(0,-1)),$n=e=>rS.test(e),Jh=e=>BP.test(e),TP=new Set(["length","size","percentage"]),PP=e=>vp(e,TP,nS),LP=e=>vp(e,"position",nS),MP=new Set(["image","url"]),kP=e=>vp(e,MP,NP),UP=e=>vp(e,"",RP),im=()=>!0,vp=(e,n,i)=>{const l=rS.exec(e);return l?l[1]?typeof n=="string"?l[1]===n:n.has(l[1]):i(l[2]):!1},DP=e=>CP.test(e)&&!SP.test(e),nS=()=>!1,RP=e=>EP.test(e),NP=e=>FP.test(e),QP=()=>{const e=js("colors"),n=js("spacing"),i=js("blur"),l=js("brightness"),h=js("borderColor"),f=js("borderRadius"),m=js("borderSpacing"),a=js("borderWidth"),x=js("contrast"),S=js("grayscale"),I=js("hueRotate"),U=js("invert"),Q=js("gap"),P=js("gradientColorStops"),$=js("gradientColorStopPositions"),z=js("inset"),O=js("margin"),W=js("opacity"),ne=js("padding"),ce=js("saturate"),de=js("scale"),Se=js("sepia"),ze=js("skew"),Ze=js("space"),Qe=js("translate"),be=()=>["auto","contain","none"],Ge=()=>["auto","hidden","clip","visible","scroll"],le=()=>["auto",$n,n],ge=()=>[$n,n],Pe=()=>["",Fh,Yh],Fe=()=>["auto",ip,$n],pt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ut=()=>["solid","dashed","dotted","double","none"],At=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>["start","end","center","between","around","evenly","stretch"],Ie=()=>["","0",$n],yt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ue=()=>[ip,$n];return{cacheSize:500,separator:":",theme:{colors:[im],spacing:[Fh,Yh],blur:["none","",Jh,$n],brightness:Ue(),borderColor:[e],borderRadius:["none","","full",Jh,$n],borderSpacing:ge(),borderWidth:Pe(),contrast:Ue(),grayscale:Ie(),hueRotate:Ue(),invert:Ie(),gap:ge(),gradientColorStops:[e],gradientColorStopPositions:[IP,Yh],inset:le(),margin:le(),opacity:Ue(),padding:ge(),saturate:Ue(),scale:Ue(),sepia:Ie(),skew:Ue(),space:ge(),translate:ge()},classGroups:{aspect:[{aspect:["auto","square","video",$n]}],container:["container"],columns:[{columns:[Jh]}],"break-after":[{"break-after":yt()}],"break-before":[{"break-before":yt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...pt(),$n]}],overflow:[{overflow:Ge()}],"overflow-x":[{"overflow-x":Ge()}],"overflow-y":[{"overflow-y":Ge()}],overscroll:[{overscroll:be()}],"overscroll-x":[{"overscroll-x":be()}],"overscroll-y":[{"overscroll-y":be()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[z]}],"inset-x":[{"inset-x":[z]}],"inset-y":[{"inset-y":[z]}],start:[{start:[z]}],end:[{end:[z]}],top:[{top:[z]}],right:[{right:[z]}],bottom:[{bottom:[z]}],left:[{left:[z]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nm,$n]}],basis:[{basis:le()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$n]}],grow:[{grow:Ie()}],shrink:[{shrink:Ie()}],order:[{order:["first","last","none",nm,$n]}],"grid-cols":[{"grid-cols":[im]}],"col-start-end":[{col:["auto",{span:["full",nm,$n]},$n]}],"col-start":[{"col-start":Fe()}],"col-end":[{"col-end":Fe()}],"grid-rows":[{"grid-rows":[im]}],"row-start-end":[{row:["auto",{span:[nm,$n]},$n]}],"row-start":[{"row-start":Fe()}],"row-end":[{"row-end":Fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$n]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$n]}],gap:[{gap:[Q]}],"gap-x":[{"gap-x":[Q]}],"gap-y":[{"gap-y":[Q]}],"justify-content":[{justify:["normal",...Ne()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ne(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ne(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[ne]}],px:[{px:[ne]}],py:[{py:[ne]}],ps:[{ps:[ne]}],pe:[{pe:[ne]}],pt:[{pt:[ne]}],pr:[{pr:[ne]}],pb:[{pb:[ne]}],pl:[{pl:[ne]}],m:[{m:[O]}],mx:[{mx:[O]}],my:[{my:[O]}],ms:[{ms:[O]}],me:[{me:[O]}],mt:[{mt:[O]}],mr:[{mr:[O]}],mb:[{mb:[O]}],ml:[{ml:[O]}],"space-x":[{"space-x":[Ze]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Ze]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",$n,n]}],"min-w":[{"min-w":[$n,n,"min","max","fit"]}],"max-w":[{"max-w":[$n,n,"none","full","min","max","fit","prose",{screen:[Jh]},Jh]}],h:[{h:[$n,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[$n,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[$n,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[$n,n,"auto","min","max","fit"]}],"font-size":[{text:["base",Jh,Yh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yv]}],"font-family":[{font:[im]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$n]}],"line-clamp":[{"line-clamp":["none",ip,Yv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fh,$n]}],"list-image":[{"list-image":["none",$n]}],"list-style-type":[{list:["none","disc","decimal",$n]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[W]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ut(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fh,Yh]}],"underline-offset":[{"underline-offset":["auto",Fh,$n]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ge()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$n]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$n]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[W]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...pt(),LP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",PP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[$]}],"gradient-via-pos":[{via:[$]}],"gradient-to-pos":[{to:[$]}],"gradient-from":[{from:[P]}],"gradient-via":[{via:[P]}],"gradient-to":[{to:[P]}],rounded:[{rounded:[f]}],"rounded-s":[{"rounded-s":[f]}],"rounded-e":[{"rounded-e":[f]}],"rounded-t":[{"rounded-t":[f]}],"rounded-r":[{"rounded-r":[f]}],"rounded-b":[{"rounded-b":[f]}],"rounded-l":[{"rounded-l":[f]}],"rounded-ss":[{"rounded-ss":[f]}],"rounded-se":[{"rounded-se":[f]}],"rounded-ee":[{"rounded-ee":[f]}],"rounded-es":[{"rounded-es":[f]}],"rounded-tl":[{"rounded-tl":[f]}],"rounded-tr":[{"rounded-tr":[f]}],"rounded-br":[{"rounded-br":[f]}],"rounded-bl":[{"rounded-bl":[f]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[W]}],"border-style":[{border:[...ut(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[W]}],"divide-style":[{divide:ut()}],"border-color":[{border:[h]}],"border-color-x":[{"border-x":[h]}],"border-color-y":[{"border-y":[h]}],"border-color-s":[{"border-s":[h]}],"border-color-e":[{"border-e":[h]}],"border-color-t":[{"border-t":[h]}],"border-color-r":[{"border-r":[h]}],"border-color-b":[{"border-b":[h]}],"border-color-l":[{"border-l":[h]}],"divide-color":[{divide:[h]}],"outline-style":[{outline:["",...ut()]}],"outline-offset":[{"outline-offset":[Fh,$n]}],"outline-w":[{outline:[Fh,Yh]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[W]}],"ring-offset-w":[{"ring-offset":[Fh,Yh]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Jh,UP]}],"shadow-color":[{shadow:[im]}],opacity:[{opacity:[W]}],"mix-blend":[{"mix-blend":[...At(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":At()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[l]}],contrast:[{contrast:[x]}],"drop-shadow":[{"drop-shadow":["","none",Jh,$n]}],grayscale:[{grayscale:[S]}],"hue-rotate":[{"hue-rotate":[I]}],invert:[{invert:[U]}],saturate:[{saturate:[ce]}],sepia:[{sepia:[Se]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[l]}],"backdrop-contrast":[{"backdrop-contrast":[x]}],"backdrop-grayscale":[{"backdrop-grayscale":[S]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[I]}],"backdrop-invert":[{"backdrop-invert":[U]}],"backdrop-opacity":[{"backdrop-opacity":[W]}],"backdrop-saturate":[{"backdrop-saturate":[ce]}],"backdrop-sepia":[{"backdrop-sepia":[Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[m]}],"border-spacing-x":[{"border-spacing-x":[m]}],"border-spacing-y":[{"border-spacing-y":[m]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$n]}],duration:[{duration:Ue()}],ease:[{ease:["linear","in","out","in-out",$n]}],delay:[{delay:Ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",$n]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[de]}],"scale-x":[{"scale-x":[de]}],"scale-y":[{"scale-y":[de]}],rotate:[{rotate:[nm,$n]}],"translate-x":[{"translate-x":[Qe]}],"translate-y":[{"translate-y":[Qe]}],"skew-x":[{"skew-x":[ze]}],"skew-y":[{"skew-y":[ze]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$n]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$n]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ge()}],"scroll-mx":[{"scroll-mx":ge()}],"scroll-my":[{"scroll-my":ge()}],"scroll-ms":[{"scroll-ms":ge()}],"scroll-me":[{"scroll-me":ge()}],"scroll-mt":[{"scroll-mt":ge()}],"scroll-mr":[{"scroll-mr":ge()}],"scroll-mb":[{"scroll-mb":ge()}],"scroll-ml":[{"scroll-ml":ge()}],"scroll-p":[{"scroll-p":ge()}],"scroll-px":[{"scroll-px":ge()}],"scroll-py":[{"scroll-py":ge()}],"scroll-ps":[{"scroll-ps":ge()}],"scroll-pe":[{"scroll-pe":ge()}],"scroll-pt":[{"scroll-pt":ge()}],"scroll-pr":[{"scroll-pr":ge()}],"scroll-pb":[{"scroll-pb":ge()}],"scroll-pl":[{"scroll-pl":ge()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$n]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Fh,Yh,Yv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},OP=wP(QP);function Pi(...e){return OP($5(e))}const zP=W3,iS=te.forwardRef(({className:e,...n},i)=>oe.jsx(z5,{ref:i,className:Pi("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...n}));iS.displayName=z5.displayName;const HP=By("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sS=te.forwardRef(({className:e,variant:n,...i},l)=>oe.jsx(H5,{ref:l,className:Pi(HP({variant:n}),e),...i}));sS.displayName=H5.displayName;const jP=te.forwardRef(({className:e,...n},i)=>oe.jsx(G5,{ref:i,className:Pi("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...n}));jP.displayName=G5.displayName;const oS=te.forwardRef(({className:e,...n},i)=>oe.jsx(K5,{ref:i,className:Pi("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...n,children:oe.jsx(Vm,{className:"h-4 w-4"})}));oS.displayName=K5.displayName;const aS=te.forwardRef(({className:e,...n},i)=>oe.jsx(j5,{ref:i,className:Pi("text-sm font-semibold",e),...n}));aS.displayName=j5.displayName;const lS=te.forwardRef(({className:e,...n},i)=>oe.jsx(V5,{ref:i,className:Pi("text-sm opacity-90",e),...n}));lS.displayName=V5.displayName;function VP(){const{toasts:e}=e3();return oe.jsxs(zP,{children:[e.map(function({id:n,title:i,description:l,action:h,...f}){return oe.jsxs(sS,{...f,children:[oe.jsxs("div",{className:"grid gap-1",children:[i&&oe.jsx(aS,{children:i}),l&&oe.jsx(lS,{children:l})]}),h,oe.jsx(oS,{})]},n)}),oe.jsx(iS,{})]})}var Yb=["light","dark"],GP="(prefers-color-scheme: dark)",KP=te.createContext(void 0),qP={setTheme:e=>{},themes:[]},$P=()=>{var e;return(e=te.useContext(KP))!=null?e:qP};te.memo(({forcedTheme:e,storageKey:n,attribute:i,enableSystem:l,enableColorScheme:h,defaultTheme:f,value:m,attrs:a,nonce:x})=>{let S=f==="system",I=i==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map($=>`'${$}'`).join(",")})`};`:`var d=document.documentElement,n='${i}',s='setAttribute';`,U=h?Yb.includes(f)&&f?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${f}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",Q=($,z=!1,O=!0)=>{let W=m?m[$]:$,ne=z?$+"|| ''":`'${W}'`,ce="";return h&&O&&!z&&Yb.includes($)&&(ce+=`d.style.colorScheme = '${$}';`),i==="class"?z||W?ce+=`c.add(${ne})`:ce+="null":W&&(ce+=`d[s](n,${ne})`),ce},P=e?`!function(){${I}${Q(e)}}()`:l?`!function(){try{${I}var e=localStorage.getItem('${n}');if('system'===e||(!e&&${S})){var t='${GP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${Q("dark")}}else{${Q("light")}}}else if(e){${m?`var x=${JSON.stringify(m)};`:""}${Q(m?"x[e]":"e",!0)}}${S?"":"else{"+Q(f,!1,!1)+"}"}${U}}catch(e){}}()`:`!function(){try{${I}var e=localStorage.getItem('${n}');if(e){${m?`var x=${JSON.stringify(m)};`:""}${Q(m?"x[e]":"e",!0)}}else{${Q(f,!1,!1)};}${U}}catch(t){}}();`;return te.createElement("script",{nonce:x,dangerouslySetInnerHTML:{__html:P}})});var WP=e=>{switch(e){case"success":return YP;case"info":return eL;case"warning":return JP;case"error":return tL;default:return null}},ZP=Array(12).fill(0),XP=({visible:e,className:n})=>Tr.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":e},Tr.createElement("div",{className:"sonner-spinner"},ZP.map((i,l)=>Tr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),YP=Tr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Tr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),JP=Tr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Tr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),eL=Tr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Tr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),tL=Tr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Tr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),rL=Tr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Tr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Tr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),nL=()=>{let[e,n]=Tr.useState(document.hidden);return Tr.useEffect(()=>{let i=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e},A1=1,iL=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let i=this.subscribers.indexOf(n);this.subscribers.splice(i,1)}),this.publish=n=>{this.subscribers.forEach(i=>i(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var i;let{message:l,...h}=n,f=typeof n?.id=="number"||((i=n.id)==null?void 0:i.length)>0?n.id:A1++,m=this.toasts.find(x=>x.id===f),a=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(f)&&this.dismissedToasts.delete(f),m?this.toasts=this.toasts.map(x=>x.id===f?(this.publish({...x,...n,id:f,title:l}),{...x,...n,id:f,dismissible:a,title:l}):x):this.addToast({title:l,...h,dismissible:a,id:f}),f},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(i=>{this.subscribers.forEach(l=>l({id:i.id,dismiss:!0}))}),this.subscribers.forEach(i=>i({id:n,dismiss:!0})),n),this.message=(n,i)=>this.create({...i,message:n}),this.error=(n,i)=>this.create({...i,message:n,type:"error"}),this.success=(n,i)=>this.create({...i,type:"success",message:n}),this.info=(n,i)=>this.create({...i,type:"info",message:n}),this.warning=(n,i)=>this.create({...i,type:"warning",message:n}),this.loading=(n,i)=>this.create({...i,type:"loading",message:n}),this.promise=(n,i)=>{if(!i)return;let l;i.loading!==void 0&&(l=this.create({...i,promise:n,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));let h=n instanceof Promise?n:n(),f=l!==void 0,m,a=h.then(async S=>{if(m=["resolve",S],Tr.isValidElement(S))f=!1,this.create({id:l,type:"default",message:S});else if(oL(S)&&!S.ok){f=!1;let I=typeof i.error=="function"?await i.error(`HTTP error! status: ${S.status}`):i.error,U=typeof i.description=="function"?await i.description(`HTTP error! status: ${S.status}`):i.description;this.create({id:l,type:"error",message:I,description:U})}else if(i.success!==void 0){f=!1;let I=typeof i.success=="function"?await i.success(S):i.success,U=typeof i.description=="function"?await i.description(S):i.description;this.create({id:l,type:"success",message:I,description:U})}}).catch(async S=>{if(m=["reject",S],i.error!==void 0){f=!1;let I=typeof i.error=="function"?await i.error(S):i.error,U=typeof i.description=="function"?await i.description(S):i.description;this.create({id:l,type:"error",message:I,description:U})}}).finally(()=>{var S;f&&(this.dismiss(l),l=void 0),(S=i.finally)==null||S.call(i)}),x=()=>new Promise((S,I)=>a.then(()=>m[0]==="reject"?I(m[1]):S(m[1])).catch(I));return typeof l!="string"&&typeof l!="number"?{unwrap:x}:Object.assign(l,{unwrap:x})},this.custom=(n,i)=>{let l=i?.id||A1++;return this.create({jsx:n(l),id:l,...i}),l},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Wc=new iL,sL=(e,n)=>{let i=n?.id||A1++;return Wc.addToast({title:e,...n,id:i}),i},oL=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",aL=sL,lL=()=>Wc.toasts,cL=()=>Wc.getActiveToasts();Object.assign(aL,{success:Wc.success,info:Wc.info,warning:Wc.warning,error:Wc.error,custom:Wc.custom,message:Wc.message,promise:Wc.promise,dismiss:Wc.dismiss,loading:Wc.loading},{getHistory:lL,getToasts:cL});function AL(e,{insertAt:n}={}){if(typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",n==="top"&&i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}AL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Qg(e){return e.label!==void 0}var uL=3,hL="32px",fL="16px",Jb=4e3,dL=356,pL=14,mL=20,gL=200;function vu(...e){return e.filter(Boolean).join(" ")}function yL(e){let[n,i]=e.split("-"),l=[];return n&&l.push(n),i&&l.push(i),l}var vL=e=>{var n,i,l,h,f,m,a,x,S,I,U;let{invert:Q,toast:P,unstyled:$,interacting:z,setHeights:O,visibleToasts:W,heights:ne,index:ce,toasts:de,expanded:Se,removeToast:ze,defaultRichColors:Ze,closeButton:Qe,style:be,cancelButtonStyle:Ge,actionButtonStyle:le,className:ge="",descriptionClassName:Pe="",duration:Fe,position:pt,gap:ut,loadingIcon:At,expandByDefault:Ne,classNames:Ie,icons:yt,closeButtonAriaLabel:Ue="Close toast",pauseWhenPageIsHidden:ie}=e,[Ee,De]=Tr.useState(null),[Ye,at]=Tr.useState(null),[tt,wt]=Tr.useState(!1),[Et,Pt]=Tr.useState(!1),[Wt,lr]=Tr.useState(!1),[fr,Br]=Tr.useState(!1),[He,yr]=Tr.useState(!1),[kr,qr]=Tr.useState(0),[or,$r]=Tr.useState(0),Sr=Tr.useRef(P.duration||Fe||Jb),Qr=Tr.useRef(null),Dr=Tr.useRef(null),Qn=ce===0,un=ce+1<=W,ft=P.type,he=P.dismissible!==!1,fe=P.className||"",ye=P.descriptionClassName||"",Ke=Tr.useMemo(()=>ne.findIndex(Rr=>Rr.toastId===P.id)||0,[ne,P.id]),$e=Tr.useMemo(()=>{var Rr;return(Rr=P.closeButton)!=null?Rr:Qe},[P.closeButton,Qe]),Bt=Tr.useMemo(()=>P.duration||Fe||Jb,[P.duration,Fe]),gt=Tr.useRef(0),st=Tr.useRef(0),xt=Tr.useRef(0),zt=Tr.useRef(null),[St,ar]=pt.split("-"),Yt=Tr.useMemo(()=>ne.reduce((Rr,pr,Gr)=>Gr>=Ke?Rr:Rr+pr.height,0),[ne,Ke]),hr=nL(),tn=P.invert||Q,Ir=ft==="loading";st.current=Tr.useMemo(()=>Ke*ut+Yt,[Ke,Yt]),Tr.useEffect(()=>{Sr.current=Bt},[Bt]),Tr.useEffect(()=>{wt(!0)},[]),Tr.useEffect(()=>{let Rr=Dr.current;if(Rr){let pr=Rr.getBoundingClientRect().height;return $r(pr),O(Gr=>[{toastId:P.id,height:pr,position:P.position},...Gr]),()=>O(Gr=>Gr.filter(Un=>Un.toastId!==P.id))}},[O,P.id]),Tr.useLayoutEffect(()=>{if(!tt)return;let Rr=Dr.current,pr=Rr.style.height;Rr.style.height="auto";let Gr=Rr.getBoundingClientRect().height;Rr.style.height=pr,$r(Gr),O(Un=>Un.find(_r=>_r.toastId===P.id)?Un.map(_r=>_r.toastId===P.id?{..._r,height:Gr}:_r):[{toastId:P.id,height:Gr,position:P.position},...Un])},[tt,P.title,P.description,O,P.id]);let dt=Tr.useCallback(()=>{Pt(!0),qr(st.current),O(Rr=>Rr.filter(pr=>pr.toastId!==P.id)),setTimeout(()=>{ze(P)},gL)},[P,ze,O,st]);Tr.useEffect(()=>{if(P.promise&&ft==="loading"||P.duration===1/0||P.type==="loading")return;let Rr;return Se||z||ie&&hr?(()=>{if(xt.current<gt.current){let pr=new Date().getTime()-gt.current;Sr.current=Sr.current-pr}xt.current=new Date().getTime()})():Sr.current!==1/0&&(gt.current=new Date().getTime(),Rr=setTimeout(()=>{var pr;(pr=P.onAutoClose)==null||pr.call(P,P),dt()},Sr.current)),()=>clearTimeout(Rr)},[Se,z,P,ft,ie,hr,dt]),Tr.useEffect(()=>{P.delete&&dt()},[dt,P.delete]);function en(){var Rr,pr,Gr;return yt!=null&&yt.loading?Tr.createElement("div",{className:vu(Ie?.loader,(Rr=P?.classNames)==null?void 0:Rr.loader,"sonner-loader"),"data-visible":ft==="loading"},yt.loading):At?Tr.createElement("div",{className:vu(Ie?.loader,(pr=P?.classNames)==null?void 0:pr.loader,"sonner-loader"),"data-visible":ft==="loading"},At):Tr.createElement(XP,{className:vu(Ie?.loader,(Gr=P?.classNames)==null?void 0:Gr.loader),visible:ft==="loading"})}return Tr.createElement("li",{tabIndex:0,ref:Dr,className:vu(ge,fe,Ie?.toast,(n=P?.classNames)==null?void 0:n.toast,Ie?.default,Ie?.[ft],(i=P?.classNames)==null?void 0:i[ft]),"data-sonner-toast":"","data-rich-colors":(l=P.richColors)!=null?l:Ze,"data-styled":!(P.jsx||P.unstyled||$),"data-mounted":tt,"data-promise":!!P.promise,"data-swiped":He,"data-removed":Et,"data-visible":un,"data-y-position":St,"data-x-position":ar,"data-index":ce,"data-front":Qn,"data-swiping":Wt,"data-dismissible":he,"data-type":ft,"data-invert":tn,"data-swipe-out":fr,"data-swipe-direction":Ye,"data-expanded":!!(Se||Ne&&tt),style:{"--index":ce,"--toasts-before":ce,"--z-index":de.length-ce,"--offset":`${Et?kr:st.current}px`,"--initial-height":Ne?"auto":`${or}px`,...be,...P.style},onDragEnd:()=>{lr(!1),De(null),zt.current=null},onPointerDown:Rr=>{Ir||!he||(Qr.current=new Date,qr(st.current),Rr.target.setPointerCapture(Rr.pointerId),Rr.target.tagName!=="BUTTON"&&(lr(!0),zt.current={x:Rr.clientX,y:Rr.clientY}))},onPointerUp:()=>{var Rr,pr,Gr,Un;if(fr||!he)return;zt.current=null;let _r=Number(((Rr=Dr.current)==null?void 0:Rr.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),In=Number(((pr=Dr.current)==null?void 0:pr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),bn=new Date().getTime()-((Gr=Qr.current)==null?void 0:Gr.getTime()),wn=Ee==="x"?_r:In,Ui=Math.abs(wn)/bn;if(Math.abs(wn)>=mL||Ui>.11){qr(st.current),(Un=P.onDismiss)==null||Un.call(P,P),at(Ee==="x"?_r>0?"right":"left":In>0?"down":"up"),dt(),Br(!0),yr(!1);return}lr(!1),De(null)},onPointerMove:Rr=>{var pr,Gr,Un,_r;if(!zt.current||!he||((pr=window.getSelection())==null?void 0:pr.toString().length)>0)return;let In=Rr.clientY-zt.current.y,bn=Rr.clientX-zt.current.x,wn=(Gr=e.swipeDirections)!=null?Gr:yL(pt);!Ee&&(Math.abs(bn)>1||Math.abs(In)>1)&&De(Math.abs(bn)>Math.abs(In)?"x":"y");let Ui={x:0,y:0};Ee==="y"?(wn.includes("top")||wn.includes("bottom"))&&(wn.includes("top")&&In<0||wn.includes("bottom")&&In>0)&&(Ui.y=In):Ee==="x"&&(wn.includes("left")||wn.includes("right"))&&(wn.includes("left")&&bn<0||wn.includes("right")&&bn>0)&&(Ui.x=bn),(Math.abs(Ui.x)>0||Math.abs(Ui.y)>0)&&yr(!0),(Un=Dr.current)==null||Un.style.setProperty("--swipe-amount-x",`${Ui.x}px`),(_r=Dr.current)==null||_r.style.setProperty("--swipe-amount-y",`${Ui.y}px`)}},$e&&!P.jsx?Tr.createElement("button",{"aria-label":Ue,"data-disabled":Ir,"data-close-button":!0,onClick:Ir||!he?()=>{}:()=>{var Rr;dt(),(Rr=P.onDismiss)==null||Rr.call(P,P)},className:vu(Ie?.closeButton,(h=P?.classNames)==null?void 0:h.closeButton)},(f=yt?.close)!=null?f:rL):null,P.jsx||te.isValidElement(P.title)?P.jsx?P.jsx:typeof P.title=="function"?P.title():P.title:Tr.createElement(Tr.Fragment,null,ft||P.icon||P.promise?Tr.createElement("div",{"data-icon":"",className:vu(Ie?.icon,(m=P?.classNames)==null?void 0:m.icon)},P.promise||P.type==="loading"&&!P.icon?P.icon||en():null,P.type!=="loading"?P.icon||yt?.[ft]||WP(ft):null):null,Tr.createElement("div",{"data-content":"",className:vu(Ie?.content,(a=P?.classNames)==null?void 0:a.content)},Tr.createElement("div",{"data-title":"",className:vu(Ie?.title,(x=P?.classNames)==null?void 0:x.title)},typeof P.title=="function"?P.title():P.title),P.description?Tr.createElement("div",{"data-description":"",className:vu(Pe,ye,Ie?.description,(S=P?.classNames)==null?void 0:S.description)},typeof P.description=="function"?P.description():P.description):null),te.isValidElement(P.cancel)?P.cancel:P.cancel&&Qg(P.cancel)?Tr.createElement("button",{"data-button":!0,"data-cancel":!0,style:P.cancelButtonStyle||Ge,onClick:Rr=>{var pr,Gr;Qg(P.cancel)&&he&&((Gr=(pr=P.cancel).onClick)==null||Gr.call(pr,Rr),dt())},className:vu(Ie?.cancelButton,(I=P?.classNames)==null?void 0:I.cancelButton)},P.cancel.label):null,te.isValidElement(P.action)?P.action:P.action&&Qg(P.action)?Tr.createElement("button",{"data-button":!0,"data-action":!0,style:P.actionButtonStyle||le,onClick:Rr=>{var pr,Gr;Qg(P.action)&&((Gr=(pr=P.action).onClick)==null||Gr.call(pr,Rr),!Rr.defaultPrevented&&dt())},className:vu(Ie?.actionButton,(U=P?.classNames)==null?void 0:U.actionButton)},P.action.label):null))};function e2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function _L(e,n){let i={};return[e,n].forEach((l,h)=>{let f=h===1,m=f?"--mobile-offset":"--offset",a=f?fL:hL;function x(S){["top","right","bottom","left"].forEach(I=>{i[`${m}-${I}`]=typeof S=="number"?`${S}px`:S})}typeof l=="number"||typeof l=="string"?x(l):typeof l=="object"?["top","right","bottom","left"].forEach(S=>{l[S]===void 0?i[`${m}-${S}`]=a:i[`${m}-${S}`]=typeof l[S]=="number"?`${l[S]}px`:l[S]}):x(a)}),i}var wL=te.forwardRef(function(e,n){let{invert:i,position:l="bottom-right",hotkey:h=["altKey","KeyT"],expand:f,closeButton:m,className:a,offset:x,mobileOffset:S,theme:I="light",richColors:U,duration:Q,style:P,visibleToasts:$=uL,toastOptions:z,dir:O=e2(),gap:W=pL,loadingIcon:ne,icons:ce,containerAriaLabel:de="Notifications",pauseWhenPageIsHidden:Se}=e,[ze,Ze]=Tr.useState([]),Qe=Tr.useMemo(()=>Array.from(new Set([l].concat(ze.filter(ie=>ie.position).map(ie=>ie.position)))),[ze,l]),[be,Ge]=Tr.useState([]),[le,ge]=Tr.useState(!1),[Pe,Fe]=Tr.useState(!1),[pt,ut]=Tr.useState(I!=="system"?I:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),At=Tr.useRef(null),Ne=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ie=Tr.useRef(null),yt=Tr.useRef(!1),Ue=Tr.useCallback(ie=>{Ze(Ee=>{var De;return(De=Ee.find(Ye=>Ye.id===ie.id))!=null&&De.delete||Wc.dismiss(ie.id),Ee.filter(({id:Ye})=>Ye!==ie.id)})},[]);return Tr.useEffect(()=>Wc.subscribe(ie=>{if(ie.dismiss){Ze(Ee=>Ee.map(De=>De.id===ie.id?{...De,delete:!0}:De));return}setTimeout(()=>{x5.flushSync(()=>{Ze(Ee=>{let De=Ee.findIndex(Ye=>Ye.id===ie.id);return De!==-1?[...Ee.slice(0,De),{...Ee[De],...ie},...Ee.slice(De+1)]:[ie,...Ee]})})})}),[]),Tr.useEffect(()=>{if(I!=="system"){ut(I);return}if(I==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ut("dark"):ut("light")),typeof window>"u")return;let ie=window.matchMedia("(prefers-color-scheme: dark)");try{ie.addEventListener("change",({matches:Ee})=>{ut(Ee?"dark":"light")})}catch{ie.addListener(({matches:De})=>{try{ut(De?"dark":"light")}catch(Ye){console.error(Ye)}})}},[I]),Tr.useEffect(()=>{ze.length<=1&&ge(!1)},[ze]),Tr.useEffect(()=>{let ie=Ee=>{var De,Ye;h.every(at=>Ee[at]||Ee.code===at)&&(ge(!0),(De=At.current)==null||De.focus()),Ee.code==="Escape"&&(document.activeElement===At.current||(Ye=At.current)!=null&&Ye.contains(document.activeElement))&&ge(!1)};return document.addEventListener("keydown",ie),()=>document.removeEventListener("keydown",ie)},[h]),Tr.useEffect(()=>{if(At.current)return()=>{Ie.current&&(Ie.current.focus({preventScroll:!0}),Ie.current=null,yt.current=!1)}},[At.current]),Tr.createElement("section",{ref:n,"aria-label":`${de} ${Ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Qe.map((ie,Ee)=>{var De;let[Ye,at]=ie.split("-");return ze.length?Tr.createElement("ol",{key:ie,dir:O==="auto"?e2():O,tabIndex:-1,ref:At,className:a,"data-sonner-toaster":!0,"data-theme":pt,"data-y-position":Ye,"data-lifted":le&&ze.length>1&&!f,"data-x-position":at,style:{"--front-toast-height":`${((De=be[0])==null?void 0:De.height)||0}px`,"--width":`${dL}px`,"--gap":`${W}px`,...P,..._L(x,S)},onBlur:tt=>{yt.current&&!tt.currentTarget.contains(tt.relatedTarget)&&(yt.current=!1,Ie.current&&(Ie.current.focus({preventScroll:!0}),Ie.current=null))},onFocus:tt=>{tt.target instanceof HTMLElement&&tt.target.dataset.dismissible==="false"||yt.current||(yt.current=!0,Ie.current=tt.relatedTarget)},onMouseEnter:()=>ge(!0),onMouseMove:()=>ge(!0),onMouseLeave:()=>{Pe||ge(!1)},onDragEnd:()=>ge(!1),onPointerDown:tt=>{tt.target instanceof HTMLElement&&tt.target.dataset.dismissible==="false"||Fe(!0)},onPointerUp:()=>Fe(!1)},ze.filter(tt=>!tt.position&&Ee===0||tt.position===ie).map((tt,wt)=>{var Et,Pt;return Tr.createElement(vL,{key:tt.id,icons:ce,index:wt,toast:tt,defaultRichColors:U,duration:(Et=z?.duration)!=null?Et:Q,className:z?.className,descriptionClassName:z?.descriptionClassName,invert:i,visibleToasts:$,closeButton:(Pt=z?.closeButton)!=null?Pt:m,interacting:Pe,position:ie,style:z?.style,unstyled:z?.unstyled,classNames:z?.classNames,cancelButtonStyle:z?.cancelButtonStyle,actionButtonStyle:z?.actionButtonStyle,removeToast:Ue,toasts:ze.filter(Wt=>Wt.position==tt.position),heights:be.filter(Wt=>Wt.position==tt.position),setHeights:Ge,expandByDefault:f,gap:W,loadingIcon:ne,expanded:le,pauseWhenPageIsHidden:Se,swipeDirections:e.swipeDirections})})):null}))});const xL=({...e})=>{const{theme:n="system"}=$P();return oe.jsx(wL,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var bL=_y[" useId ".trim().toString()]||(()=>{}),BL=0;function Cy(e){const[n,i]=te.useState(bL());return wl(()=>{i(l=>l??String(BL++))},[e]),n?`radix-${n}`:""}const CL=["top","right","bottom","left"],gf=Math.min,xA=Math.max,V0=Math.round,Og=Math.floor,Yu=e=>({x:e,y:e}),SL={left:"right",right:"left",bottom:"top",top:"bottom"},EL={start:"end",end:"start"};function u1(e,n,i){return xA(e,gf(n,i))}function Uh(e,n){return typeof e=="function"?e(n):e}function Dh(e){return e.split("-")[0]}function _p(e){return e.split("-")[1]}function Cw(e){return e==="x"?"y":"x"}function Sw(e){return e==="y"?"height":"width"}const FL=new Set(["top","bottom"]);function Zu(e){return FL.has(Dh(e))?"y":"x"}function Ew(e){return Cw(Zu(e))}function IL(e,n,i){i===void 0&&(i=!1);const l=_p(e),h=Ew(e),f=Sw(h);let m=h==="x"?l===(i?"end":"start")?"right":"left":l==="start"?"bottom":"top";return n.reference[f]>n.floating[f]&&(m=G0(m)),[m,G0(m)]}function TL(e){const n=G0(e);return[h1(e),n,h1(n)]}function h1(e){return e.replace(/start|end/g,n=>EL[n])}const t2=["left","right"],r2=["right","left"],PL=["top","bottom"],LL=["bottom","top"];function ML(e,n,i){switch(e){case"top":case"bottom":return i?n?r2:t2:n?t2:r2;case"left":case"right":return n?PL:LL;default:return[]}}function kL(e,n,i,l){const h=_p(e);let f=ML(Dh(e),i==="start",l);return h&&(f=f.map(m=>m+"-"+h),n&&(f=f.concat(f.map(h1)))),f}function G0(e){return e.replace(/left|right|bottom|top/g,n=>SL[n])}function UL(e){return{top:0,right:0,bottom:0,left:0,...e}}function cS(e){return typeof e!="number"?UL(e):{top:e,right:e,bottom:e,left:e}}function K0(e){const{x:n,y:i,width:l,height:h}=e;return{width:l,height:h,top:i,left:n,right:n+l,bottom:i+h,x:n,y:i}}function n2(e,n,i){let{reference:l,floating:h}=e;const f=Zu(n),m=Ew(n),a=Sw(m),x=Dh(n),S=f==="y",I=l.x+l.width/2-h.width/2,U=l.y+l.height/2-h.height/2,Q=l[a]/2-h[a]/2;let P;switch(x){case"top":P={x:I,y:l.y-h.height};break;case"bottom":P={x:I,y:l.y+l.height};break;case"right":P={x:l.x+l.width,y:U};break;case"left":P={x:l.x-h.width,y:U};break;default:P={x:l.x,y:l.y}}switch(_p(n)){case"start":P[m]-=Q*(i&&S?-1:1);break;case"end":P[m]+=Q*(i&&S?-1:1);break}return P}const DL=async(e,n,i)=>{const{placement:l="bottom",strategy:h="absolute",middleware:f=[],platform:m}=i,a=f.filter(Boolean),x=await(m.isRTL==null?void 0:m.isRTL(n));let S=await m.getElementRects({reference:e,floating:n,strategy:h}),{x:I,y:U}=n2(S,l,x),Q=l,P={},$=0;for(let z=0;z<a.length;z++){const{name:O,fn:W}=a[z],{x:ne,y:ce,data:de,reset:Se}=await W({x:I,y:U,initialPlacement:l,placement:Q,strategy:h,middlewareData:P,rects:S,platform:m,elements:{reference:e,floating:n}});I=ne??I,U=ce??U,P={...P,[O]:{...P[O],...de}},Se&&$<=50&&($++,typeof Se=="object"&&(Se.placement&&(Q=Se.placement),Se.rects&&(S=Se.rects===!0?await m.getElementRects({reference:e,floating:n,strategy:h}):Se.rects),{x:I,y:U}=n2(S,Q,x)),z=-1)}return{x:I,y:U,placement:Q,strategy:h,middlewareData:P}};async function Em(e,n){var i;n===void 0&&(n={});const{x:l,y:h,platform:f,rects:m,elements:a,strategy:x}=e,{boundary:S="clippingAncestors",rootBoundary:I="viewport",elementContext:U="floating",altBoundary:Q=!1,padding:P=0}=Uh(n,e),$=cS(P),O=a[Q?U==="floating"?"reference":"floating":U],W=K0(await f.getClippingRect({element:(i=await(f.isElement==null?void 0:f.isElement(O)))==null||i?O:O.contextElement||await(f.getDocumentElement==null?void 0:f.getDocumentElement(a.floating)),boundary:S,rootBoundary:I,strategy:x})),ne=U==="floating"?{x:l,y:h,width:m.floating.width,height:m.floating.height}:m.reference,ce=await(f.getOffsetParent==null?void 0:f.getOffsetParent(a.floating)),de=await(f.isElement==null?void 0:f.isElement(ce))?await(f.getScale==null?void 0:f.getScale(ce))||{x:1,y:1}:{x:1,y:1},Se=K0(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:ne,offsetParent:ce,strategy:x}):ne);return{top:(W.top-Se.top+$.top)/de.y,bottom:(Se.bottom-W.bottom+$.bottom)/de.y,left:(W.left-Se.left+$.left)/de.x,right:(Se.right-W.right+$.right)/de.x}}const RL=e=>({name:"arrow",options:e,async fn(n){const{x:i,y:l,placement:h,rects:f,platform:m,elements:a,middlewareData:x}=n,{element:S,padding:I=0}=Uh(e,n)||{};if(S==null)return{};const U=cS(I),Q={x:i,y:l},P=Ew(h),$=Sw(P),z=await m.getDimensions(S),O=P==="y",W=O?"top":"left",ne=O?"bottom":"right",ce=O?"clientHeight":"clientWidth",de=f.reference[$]+f.reference[P]-Q[P]-f.floating[$],Se=Q[P]-f.reference[P],ze=await(m.getOffsetParent==null?void 0:m.getOffsetParent(S));let Ze=ze?ze[ce]:0;(!Ze||!await(m.isElement==null?void 0:m.isElement(ze)))&&(Ze=a.floating[ce]||f.floating[$]);const Qe=de/2-Se/2,be=Ze/2-z[$]/2-1,Ge=gf(U[W],be),le=gf(U[ne],be),ge=Ge,Pe=Ze-z[$]-le,Fe=Ze/2-z[$]/2+Qe,pt=u1(ge,Fe,Pe),ut=!x.arrow&&_p(h)!=null&&Fe!==pt&&f.reference[$]/2-(Fe<ge?Ge:le)-z[$]/2<0,At=ut?Fe<ge?Fe-ge:Fe-Pe:0;return{[P]:Q[P]+At,data:{[P]:pt,centerOffset:Fe-pt-At,...ut&&{alignmentOffset:At}},reset:ut}}}),NL=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var i,l;const{placement:h,middlewareData:f,rects:m,initialPlacement:a,platform:x,elements:S}=n,{mainAxis:I=!0,crossAxis:U=!0,fallbackPlacements:Q,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:$="none",flipAlignment:z=!0,...O}=Uh(e,n);if((i=f.arrow)!=null&&i.alignmentOffset)return{};const W=Dh(h),ne=Zu(a),ce=Dh(a)===a,de=await(x.isRTL==null?void 0:x.isRTL(S.floating)),Se=Q||(ce||!z?[G0(a)]:TL(a)),ze=$!=="none";!Q&&ze&&Se.push(...kL(a,z,$,de));const Ze=[a,...Se],Qe=await Em(n,O),be=[];let Ge=((l=f.flip)==null?void 0:l.overflows)||[];if(I&&be.push(Qe[W]),U){const Fe=IL(h,m,de);be.push(Qe[Fe[0]],Qe[Fe[1]])}if(Ge=[...Ge,{placement:h,overflows:be}],!be.every(Fe=>Fe<=0)){var le,ge;const Fe=(((le=f.flip)==null?void 0:le.index)||0)+1,pt=Ze[Fe];if(pt&&(!(U==="alignment"?ne!==Zu(pt):!1)||Ge.every(Ne=>Zu(Ne.placement)===ne?Ne.overflows[0]>0:!0)))return{data:{index:Fe,overflows:Ge},reset:{placement:pt}};let ut=(ge=Ge.filter(At=>At.overflows[0]<=0).sort((At,Ne)=>At.overflows[1]-Ne.overflows[1])[0])==null?void 0:ge.placement;if(!ut)switch(P){case"bestFit":{var Pe;const At=(Pe=Ge.filter(Ne=>{if(ze){const Ie=Zu(Ne.placement);return Ie===ne||Ie==="y"}return!0}).map(Ne=>[Ne.placement,Ne.overflows.filter(Ie=>Ie>0).reduce((Ie,yt)=>Ie+yt,0)]).sort((Ne,Ie)=>Ne[1]-Ie[1])[0])==null?void 0:Pe[0];At&&(ut=At);break}case"initialPlacement":ut=a;break}if(h!==ut)return{reset:{placement:ut}}}return{}}}};function i2(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function s2(e){return CL.some(n=>e[n]>=0)}const QL=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:i}=n,{strategy:l="referenceHidden",...h}=Uh(e,n);switch(l){case"referenceHidden":{const f=await Em(n,{...h,elementContext:"reference"}),m=i2(f,i.reference);return{data:{referenceHiddenOffsets:m,referenceHidden:s2(m)}}}case"escaped":{const f=await Em(n,{...h,altBoundary:!0}),m=i2(f,i.floating);return{data:{escapedOffsets:m,escaped:s2(m)}}}default:return{}}}}},AS=new Set(["left","top"]);async function OL(e,n){const{placement:i,platform:l,elements:h}=e,f=await(l.isRTL==null?void 0:l.isRTL(h.floating)),m=Dh(i),a=_p(i),x=Zu(i)==="y",S=AS.has(m)?-1:1,I=f&&x?-1:1,U=Uh(n,e);let{mainAxis:Q,crossAxis:P,alignmentAxis:$}=typeof U=="number"?{mainAxis:U,crossAxis:0,alignmentAxis:null}:{mainAxis:U.mainAxis||0,crossAxis:U.crossAxis||0,alignmentAxis:U.alignmentAxis};return a&&typeof $=="number"&&(P=a==="end"?$*-1:$),x?{x:P*I,y:Q*S}:{x:Q*S,y:P*I}}const zL=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var i,l;const{x:h,y:f,placement:m,middlewareData:a}=n,x=await OL(n,e);return m===((i=a.offset)==null?void 0:i.placement)&&(l=a.arrow)!=null&&l.alignmentOffset?{}:{x:h+x.x,y:f+x.y,data:{...x,placement:m}}}}},HL=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:i,y:l,placement:h}=n,{mainAxis:f=!0,crossAxis:m=!1,limiter:a={fn:O=>{let{x:W,y:ne}=O;return{x:W,y:ne}}},...x}=Uh(e,n),S={x:i,y:l},I=await Em(n,x),U=Zu(Dh(h)),Q=Cw(U);let P=S[Q],$=S[U];if(f){const O=Q==="y"?"top":"left",W=Q==="y"?"bottom":"right",ne=P+I[O],ce=P-I[W];P=u1(ne,P,ce)}if(m){const O=U==="y"?"top":"left",W=U==="y"?"bottom":"right",ne=$+I[O],ce=$-I[W];$=u1(ne,$,ce)}const z=a.fn({...n,[Q]:P,[U]:$});return{...z,data:{x:z.x-i,y:z.y-l,enabled:{[Q]:f,[U]:m}}}}}},jL=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:i,y:l,placement:h,rects:f,middlewareData:m}=n,{offset:a=0,mainAxis:x=!0,crossAxis:S=!0}=Uh(e,n),I={x:i,y:l},U=Zu(h),Q=Cw(U);let P=I[Q],$=I[U];const z=Uh(a,n),O=typeof z=="number"?{mainAxis:z,crossAxis:0}:{mainAxis:0,crossAxis:0,...z};if(x){const ce=Q==="y"?"height":"width",de=f.reference[Q]-f.floating[ce]+O.mainAxis,Se=f.reference[Q]+f.reference[ce]-O.mainAxis;P<de?P=de:P>Se&&(P=Se)}if(S){var W,ne;const ce=Q==="y"?"width":"height",de=AS.has(Dh(h)),Se=f.reference[U]-f.floating[ce]+(de&&((W=m.offset)==null?void 0:W[U])||0)+(de?0:O.crossAxis),ze=f.reference[U]+f.reference[ce]+(de?0:((ne=m.offset)==null?void 0:ne[U])||0)-(de?O.crossAxis:0);$<Se?$=Se:$>ze&&($=ze)}return{[Q]:P,[U]:$}}}},VL=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var i,l;const{placement:h,rects:f,platform:m,elements:a}=n,{apply:x=()=>{},...S}=Uh(e,n),I=await Em(n,S),U=Dh(h),Q=_p(h),P=Zu(h)==="y",{width:$,height:z}=f.floating;let O,W;U==="top"||U==="bottom"?(O=U,W=Q===(await(m.isRTL==null?void 0:m.isRTL(a.floating))?"start":"end")?"left":"right"):(W=U,O=Q==="end"?"top":"bottom");const ne=z-I.top-I.bottom,ce=$-I.left-I.right,de=gf(z-I[O],ne),Se=gf($-I[W],ce),ze=!n.middlewareData.shift;let Ze=de,Qe=Se;if((i=n.middlewareData.shift)!=null&&i.enabled.x&&(Qe=ce),(l=n.middlewareData.shift)!=null&&l.enabled.y&&(Ze=ne),ze&&!Q){const Ge=xA(I.left,0),le=xA(I.right,0),ge=xA(I.top,0),Pe=xA(I.bottom,0);P?Qe=$-2*(Ge!==0||le!==0?Ge+le:xA(I.left,I.right)):Ze=z-2*(ge!==0||Pe!==0?ge+Pe:xA(I.top,I.bottom))}await x({...n,availableWidth:Qe,availableHeight:Ze});const be=await m.getDimensions(a.floating);return $!==be.width||z!==be.height?{reset:{rects:!0}}:{}}}};function Sy(){return typeof window<"u"}function wp(e){return uS(e)?(e.nodeName||"").toLowerCase():"#document"}function BA(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function th(e){var n;return(n=(uS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function uS(e){return Sy()?e instanceof Node||e instanceof BA(e).Node:!1}function Cu(e){return Sy()?e instanceof Element||e instanceof BA(e).Element:!1}function eh(e){return Sy()?e instanceof HTMLElement||e instanceof BA(e).HTMLElement:!1}function o2(e){return!Sy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof BA(e).ShadowRoot}const GL=new Set(["inline","contents"]);function Gm(e){const{overflow:n,overflowX:i,overflowY:l,display:h}=Su(e);return/auto|scroll|overlay|hidden|clip/.test(n+l+i)&&!GL.has(h)}const KL=new Set(["table","td","th"]);function qL(e){return KL.has(wp(e))}const $L=[":popover-open",":modal"];function Ey(e){return $L.some(n=>{try{return e.matches(n)}catch{return!1}})}const WL=["transform","translate","scale","rotate","perspective"],ZL=["transform","translate","scale","rotate","perspective","filter"],XL=["paint","layout","strict","content"];function Fw(e){const n=Iw(),i=Cu(e)?Su(e):e;return WL.some(l=>i[l]?i[l]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!n&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!n&&(i.filter?i.filter!=="none":!1)||ZL.some(l=>(i.willChange||"").includes(l))||XL.some(l=>(i.contain||"").includes(l))}function YL(e){let n=yf(e);for(;eh(n)&&!dp(n);){if(Fw(n))return n;if(Ey(n))return null;n=yf(n)}return null}function Iw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JL=new Set(["html","body","#document"]);function dp(e){return JL.has(wp(e))}function Su(e){return BA(e).getComputedStyle(e)}function Fy(e){return Cu(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function yf(e){if(wp(e)==="html")return e;const n=e.assignedSlot||e.parentNode||o2(e)&&e.host||th(e);return o2(n)?n.host:n}function hS(e){const n=yf(e);return dp(n)?e.ownerDocument?e.ownerDocument.body:e.body:eh(n)&&Gm(n)?n:hS(n)}function Fm(e,n,i){var l;n===void 0&&(n=[]),i===void 0&&(i=!0);const h=hS(e),f=h===((l=e.ownerDocument)==null?void 0:l.body),m=BA(h);if(f){const a=f1(m);return n.concat(m,m.visualViewport||[],Gm(h)?h:[],a&&i?Fm(a):[])}return n.concat(h,Fm(h,[],i))}function f1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function fS(e){const n=Su(e);let i=parseFloat(n.width)||0,l=parseFloat(n.height)||0;const h=eh(e),f=h?e.offsetWidth:i,m=h?e.offsetHeight:l,a=V0(i)!==f||V0(l)!==m;return a&&(i=f,l=m),{width:i,height:l,$:a}}function Tw(e){return Cu(e)?e:e.contextElement}function sp(e){const n=Tw(e);if(!eh(n))return Yu(1);const i=n.getBoundingClientRect(),{width:l,height:h,$:f}=fS(n);let m=(f?V0(i.width):i.width)/l,a=(f?V0(i.height):i.height)/h;return(!m||!Number.isFinite(m))&&(m=1),(!a||!Number.isFinite(a))&&(a=1),{x:m,y:a}}const eM=Yu(0);function dS(e){const n=BA(e);return!Iw()||!n.visualViewport?eM:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function tM(e,n,i){return n===void 0&&(n=!1),!i||n&&i!==BA(e)?!1:n}function td(e,n,i,l){n===void 0&&(n=!1),i===void 0&&(i=!1);const h=e.getBoundingClientRect(),f=Tw(e);let m=Yu(1);n&&(l?Cu(l)&&(m=sp(l)):m=sp(e));const a=tM(f,i,l)?dS(f):Yu(0);let x=(h.left+a.x)/m.x,S=(h.top+a.y)/m.y,I=h.width/m.x,U=h.height/m.y;if(f){const Q=BA(f),P=l&&Cu(l)?BA(l):l;let $=Q,z=f1($);for(;z&&l&&P!==$;){const O=sp(z),W=z.getBoundingClientRect(),ne=Su(z),ce=W.left+(z.clientLeft+parseFloat(ne.paddingLeft))*O.x,de=W.top+(z.clientTop+parseFloat(ne.paddingTop))*O.y;x*=O.x,S*=O.y,I*=O.x,U*=O.y,x+=ce,S+=de,$=BA(z),z=f1($)}}return K0({width:I,height:U,x,y:S})}function Iy(e,n){const i=Fy(e).scrollLeft;return n?n.left+i:td(th(e)).left+i}function pS(e,n){const i=e.getBoundingClientRect(),l=i.left+n.scrollLeft-Iy(e,i),h=i.top+n.scrollTop;return{x:l,y:h}}function rM(e){let{elements:n,rect:i,offsetParent:l,strategy:h}=e;const f=h==="fixed",m=th(l),a=n?Ey(n.floating):!1;if(l===m||a&&f)return i;let x={scrollLeft:0,scrollTop:0},S=Yu(1);const I=Yu(0),U=eh(l);if((U||!U&&!f)&&((wp(l)!=="body"||Gm(m))&&(x=Fy(l)),eh(l))){const P=td(l);S=sp(l),I.x=P.x+l.clientLeft,I.y=P.y+l.clientTop}const Q=m&&!U&&!f?pS(m,x):Yu(0);return{width:i.width*S.x,height:i.height*S.y,x:i.x*S.x-x.scrollLeft*S.x+I.x+Q.x,y:i.y*S.y-x.scrollTop*S.y+I.y+Q.y}}function nM(e){return Array.from(e.getClientRects())}function iM(e){const n=th(e),i=Fy(e),l=e.ownerDocument.body,h=xA(n.scrollWidth,n.clientWidth,l.scrollWidth,l.clientWidth),f=xA(n.scrollHeight,n.clientHeight,l.scrollHeight,l.clientHeight);let m=-i.scrollLeft+Iy(e);const a=-i.scrollTop;return Su(l).direction==="rtl"&&(m+=xA(n.clientWidth,l.clientWidth)-h),{width:h,height:f,x:m,y:a}}const a2=25;function sM(e,n){const i=BA(e),l=th(e),h=i.visualViewport;let f=l.clientWidth,m=l.clientHeight,a=0,x=0;if(h){f=h.width,m=h.height;const I=Iw();(!I||I&&n==="fixed")&&(a=h.offsetLeft,x=h.offsetTop)}const S=Iy(l);if(S<=0){const I=l.ownerDocument,U=I.body,Q=getComputedStyle(U),P=I.compatMode==="CSS1Compat"&&parseFloat(Q.marginLeft)+parseFloat(Q.marginRight)||0,$=Math.abs(l.clientWidth-U.clientWidth-P);$<=a2&&(f-=$)}else S<=a2&&(f+=S);return{width:f,height:m,x:a,y:x}}const oM=new Set(["absolute","fixed"]);function aM(e,n){const i=td(e,!0,n==="fixed"),l=i.top+e.clientTop,h=i.left+e.clientLeft,f=eh(e)?sp(e):Yu(1),m=e.clientWidth*f.x,a=e.clientHeight*f.y,x=h*f.x,S=l*f.y;return{width:m,height:a,x,y:S}}function l2(e,n,i){let l;if(n==="viewport")l=sM(e,i);else if(n==="document")l=iM(th(e));else if(Cu(n))l=aM(n,i);else{const h=dS(e);l={x:n.x-h.x,y:n.y-h.y,width:n.width,height:n.height}}return K0(l)}function mS(e,n){const i=yf(e);return i===n||!Cu(i)||dp(i)?!1:Su(i).position==="fixed"||mS(i,n)}function lM(e,n){const i=n.get(e);if(i)return i;let l=Fm(e,[],!1).filter(a=>Cu(a)&&wp(a)!=="body"),h=null;const f=Su(e).position==="fixed";let m=f?yf(e):e;for(;Cu(m)&&!dp(m);){const a=Su(m),x=Fw(m);!x&&a.position==="fixed"&&(h=null),(f?!x&&!h:!x&&a.position==="static"&&!!h&&oM.has(h.position)||Gm(m)&&!x&&mS(e,m))?l=l.filter(I=>I!==m):h=a,m=yf(m)}return n.set(e,l),l}function cM(e){let{element:n,boundary:i,rootBoundary:l,strategy:h}=e;const m=[...i==="clippingAncestors"?Ey(n)?[]:lM(n,this._c):[].concat(i),l],a=m[0],x=m.reduce((S,I)=>{const U=l2(n,I,h);return S.top=xA(U.top,S.top),S.right=gf(U.right,S.right),S.bottom=gf(U.bottom,S.bottom),S.left=xA(U.left,S.left),S},l2(n,a,h));return{width:x.right-x.left,height:x.bottom-x.top,x:x.left,y:x.top}}function AM(e){const{width:n,height:i}=fS(e);return{width:n,height:i}}function uM(e,n,i){const l=eh(n),h=th(n),f=i==="fixed",m=td(e,!0,f,n);let a={scrollLeft:0,scrollTop:0};const x=Yu(0);function S(){x.x=Iy(h)}if(l||!l&&!f)if((wp(n)!=="body"||Gm(h))&&(a=Fy(n)),l){const P=td(n,!0,f,n);x.x=P.x+n.clientLeft,x.y=P.y+n.clientTop}else h&&S();f&&!l&&h&&S();const I=h&&!l&&!f?pS(h,a):Yu(0),U=m.left+a.scrollLeft-x.x-I.x,Q=m.top+a.scrollTop-x.y-I.y;return{x:U,y:Q,width:m.width,height:m.height}}function Jv(e){return Su(e).position==="static"}function c2(e,n){if(!eh(e)||Su(e).position==="fixed")return null;if(n)return n(e);let i=e.offsetParent;return th(e)===i&&(i=i.ownerDocument.body),i}function gS(e,n){const i=BA(e);if(Ey(e))return i;if(!eh(e)){let h=yf(e);for(;h&&!dp(h);){if(Cu(h)&&!Jv(h))return h;h=yf(h)}return i}let l=c2(e,n);for(;l&&qL(l)&&Jv(l);)l=c2(l,n);return l&&dp(l)&&Jv(l)&&!Fw(l)?i:l||YL(e)||i}const hM=async function(e){const n=this.getOffsetParent||gS,i=this.getDimensions,l=await i(e.floating);return{reference:uM(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function fM(e){return Su(e).direction==="rtl"}const dM={convertOffsetParentRelativeRectToViewportRelativeRect:rM,getDocumentElement:th,getClippingRect:cM,getOffsetParent:gS,getElementRects:hM,getClientRects:nM,getDimensions:AM,getScale:sp,isElement:Cu,isRTL:fM};function yS(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function pM(e,n){let i=null,l;const h=th(e);function f(){var a;clearTimeout(l),(a=i)==null||a.disconnect(),i=null}function m(a,x){a===void 0&&(a=!1),x===void 0&&(x=1),f();const S=e.getBoundingClientRect(),{left:I,top:U,width:Q,height:P}=S;if(a||n(),!Q||!P)return;const $=Og(U),z=Og(h.clientWidth-(I+Q)),O=Og(h.clientHeight-(U+P)),W=Og(I),ce={rootMargin:-$+"px "+-z+"px "+-O+"px "+-W+"px",threshold:xA(0,gf(1,x))||1};let de=!0;function Se(ze){const Ze=ze[0].intersectionRatio;if(Ze!==x){if(!de)return m();Ze?m(!1,Ze):l=setTimeout(()=>{m(!1,1e-7)},1e3)}Ze===1&&!yS(S,e.getBoundingClientRect())&&m(),de=!1}try{i=new IntersectionObserver(Se,{...ce,root:h.ownerDocument})}catch{i=new IntersectionObserver(Se,ce)}i.observe(e)}return m(!0),f}function mM(e,n,i,l){l===void 0&&(l={});const{ancestorScroll:h=!0,ancestorResize:f=!0,elementResize:m=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:x=!1}=l,S=Tw(e),I=h||f?[...S?Fm(S):[],...Fm(n)]:[];I.forEach(W=>{h&&W.addEventListener("scroll",i,{passive:!0}),f&&W.addEventListener("resize",i)});const U=S&&a?pM(S,i):null;let Q=-1,P=null;m&&(P=new ResizeObserver(W=>{let[ne]=W;ne&&ne.target===S&&P&&(P.unobserve(n),cancelAnimationFrame(Q),Q=requestAnimationFrame(()=>{var ce;(ce=P)==null||ce.observe(n)})),i()}),S&&!x&&P.observe(S),P.observe(n));let $,z=x?td(e):null;x&&O();function O(){const W=td(e);z&&!yS(z,W)&&i(),z=W,$=requestAnimationFrame(O)}return i(),()=>{var W;I.forEach(ne=>{h&&ne.removeEventListener("scroll",i),f&&ne.removeEventListener("resize",i)}),U?.(),(W=P)==null||W.disconnect(),P=null,x&&cancelAnimationFrame($)}}const gM=zL,yM=HL,vM=NL,_M=VL,wM=QL,A2=RL,xM=jL,bM=(e,n,i)=>{const l=new Map,h={platform:dM,...i},f={...h.platform,_c:l};return DL(e,n,{...h,platform:f})};var BM=typeof document<"u",CM=function(){},I0=BM?te.useLayoutEffect:CM;function q0(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let i,l,h;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==n.length)return!1;for(l=i;l--!==0;)if(!q0(e[l],n[l]))return!1;return!0}if(h=Object.keys(e),i=h.length,i!==Object.keys(n).length)return!1;for(l=i;l--!==0;)if(!{}.hasOwnProperty.call(n,h[l]))return!1;for(l=i;l--!==0;){const f=h[l];if(!(f==="_owner"&&e.$$typeof)&&!q0(e[f],n[f]))return!1}return!0}return e!==e&&n!==n}function vS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function u2(e,n){const i=vS(e);return Math.round(n*i)/i}function e_(e){const n=te.useRef(e);return I0(()=>{n.current=e}),n}function SM(e){e===void 0&&(e={});const{placement:n="bottom",strategy:i="absolute",middleware:l=[],platform:h,elements:{reference:f,floating:m}={},transform:a=!0,whileElementsMounted:x,open:S}=e,[I,U]=te.useState({x:0,y:0,strategy:i,placement:n,middlewareData:{},isPositioned:!1}),[Q,P]=te.useState(l);q0(Q,l)||P(l);const[$,z]=te.useState(null),[O,W]=te.useState(null),ne=te.useCallback(Ne=>{Ne!==ze.current&&(ze.current=Ne,z(Ne))},[]),ce=te.useCallback(Ne=>{Ne!==Ze.current&&(Ze.current=Ne,W(Ne))},[]),de=f||$,Se=m||O,ze=te.useRef(null),Ze=te.useRef(null),Qe=te.useRef(I),be=x!=null,Ge=e_(x),le=e_(h),ge=e_(S),Pe=te.useCallback(()=>{if(!ze.current||!Ze.current)return;const Ne={placement:n,strategy:i,middleware:Q};le.current&&(Ne.platform=le.current),bM(ze.current,Ze.current,Ne).then(Ie=>{const yt={...Ie,isPositioned:ge.current!==!1};Fe.current&&!q0(Qe.current,yt)&&(Qe.current=yt,yp.flushSync(()=>{U(yt)}))})},[Q,n,i,le,ge]);I0(()=>{S===!1&&Qe.current.isPositioned&&(Qe.current.isPositioned=!1,U(Ne=>({...Ne,isPositioned:!1})))},[S]);const Fe=te.useRef(!1);I0(()=>(Fe.current=!0,()=>{Fe.current=!1}),[]),I0(()=>{if(de&&(ze.current=de),Se&&(Ze.current=Se),de&&Se){if(Ge.current)return Ge.current(de,Se,Pe);Pe()}},[de,Se,Pe,Ge,be]);const pt=te.useMemo(()=>({reference:ze,floating:Ze,setReference:ne,setFloating:ce}),[ne,ce]),ut=te.useMemo(()=>({reference:de,floating:Se}),[de,Se]),At=te.useMemo(()=>{const Ne={position:i,left:0,top:0};if(!ut.floating)return Ne;const Ie=u2(ut.floating,I.x),yt=u2(ut.floating,I.y);return a?{...Ne,transform:"translate("+Ie+"px, "+yt+"px)",...vS(ut.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:Ie,top:yt}},[i,a,ut.floating,I.x,I.y]);return te.useMemo(()=>({...I,update:Pe,refs:pt,elements:ut,floatingStyles:At}),[I,Pe,pt,ut,At])}const EM=e=>{function n(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:l,padding:h}=typeof e=="function"?e(i):e;return l&&n(l)?l.current!=null?A2({element:l.current,padding:h}).fn(i):{}:l?A2({element:l,padding:h}).fn(i):{}}}},FM=(e,n)=>({...gM(e),options:[e,n]}),IM=(e,n)=>({...yM(e),options:[e,n]}),TM=(e,n)=>({...xM(e),options:[e,n]}),PM=(e,n)=>({...vM(e),options:[e,n]}),LM=(e,n)=>({..._M(e),options:[e,n]}),MM=(e,n)=>({...wM(e),options:[e,n]}),kM=(e,n)=>({...EM(e),options:[e,n]});var UM="Arrow",_S=te.forwardRef((e,n)=>{const{children:i,width:l=10,height:h=5,...f}=e;return oe.jsx(si.svg,{...f,ref:n,width:l,height:h,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:oe.jsx("polygon",{points:"0,0 30,0 15,10"})})});_S.displayName=UM;var DM=_S;function Pw(e){const[n,i]=te.useState(void 0);return wl(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const l=new ResizeObserver(h=>{if(!Array.isArray(h)||!h.length)return;const f=h[0];let m,a;if("borderBoxSize"in f){const x=f.borderBoxSize,S=Array.isArray(x)?x[0]:x;m=S.inlineSize,a=S.blockSize}else m=e.offsetWidth,a=e.offsetHeight;i({width:m,height:a})});return l.observe(e,{box:"border-box"}),()=>l.unobserve(e)}else i(void 0)},[e]),n}var Lw="Popper",[wS,Ty]=Nh(Lw),[RM,xS]=wS(Lw),bS=e=>{const{__scopePopper:n,children:i}=e,[l,h]=te.useState(null);return oe.jsx(RM,{scope:n,anchor:l,onAnchorChange:h,children:i})};bS.displayName=Lw;var BS="PopperAnchor",CS=te.forwardRef((e,n)=>{const{__scopePopper:i,virtualRef:l,...h}=e,f=xS(BS,i),m=te.useRef(null),a=us(n,m),x=te.useRef(null);return te.useEffect(()=>{const S=x.current;x.current=l?.current||m.current,S!==x.current&&f.onAnchorChange(x.current)}),l?null:oe.jsx(si.div,{...h,ref:a})});CS.displayName=BS;var Mw="PopperContent",[NM,QM]=wS(Mw),SS=te.forwardRef((e,n)=>{const{__scopePopper:i,side:l="bottom",sideOffset:h=0,align:f="center",alignOffset:m=0,arrowPadding:a=0,avoidCollisions:x=!0,collisionBoundary:S=[],collisionPadding:I=0,sticky:U="partial",hideWhenDetached:Q=!1,updatePositionStrategy:P="optimized",onPlaced:$,...z}=e,O=xS(Mw,i),[W,ne]=te.useState(null),ce=us(n,tt=>ne(tt)),[de,Se]=te.useState(null),ze=Pw(de),Ze=ze?.width??0,Qe=ze?.height??0,be=l+(f!=="center"?"-"+f:""),Ge=typeof I=="number"?I:{top:0,right:0,bottom:0,left:0,...I},le=Array.isArray(S)?S:[S],ge=le.length>0,Pe={padding:Ge,boundary:le.filter(zM),altBoundary:ge},{refs:Fe,floatingStyles:pt,placement:ut,isPositioned:At,middlewareData:Ne}=SM({strategy:"fixed",placement:be,whileElementsMounted:(...tt)=>mM(...tt,{animationFrame:P==="always"}),elements:{reference:O.anchor},middleware:[FM({mainAxis:h+Qe,alignmentAxis:m}),x&&IM({mainAxis:!0,crossAxis:!1,limiter:U==="partial"?TM():void 0,...Pe}),x&&PM({...Pe}),LM({...Pe,apply:({elements:tt,rects:wt,availableWidth:Et,availableHeight:Pt})=>{const{width:Wt,height:lr}=wt.reference,fr=tt.floating.style;fr.setProperty("--radix-popper-available-width",`${Et}px`),fr.setProperty("--radix-popper-available-height",`${Pt}px`),fr.setProperty("--radix-popper-anchor-width",`${Wt}px`),fr.setProperty("--radix-popper-anchor-height",`${lr}px`)}}),de&&kM({element:de,padding:a}),HM({arrowWidth:Ze,arrowHeight:Qe}),Q&&MM({strategy:"referenceHidden",...Pe})]}),[Ie,yt]=IS(ut),Ue=JA($);wl(()=>{At&&Ue?.()},[At,Ue]);const ie=Ne.arrow?.x,Ee=Ne.arrow?.y,De=Ne.arrow?.centerOffset!==0,[Ye,at]=te.useState();return wl(()=>{W&&at(window.getComputedStyle(W).zIndex)},[W]),oe.jsx("div",{ref:Fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...pt,transform:At?pt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ye,"--radix-popper-transform-origin":[Ne.transformOrigin?.x,Ne.transformOrigin?.y].join(" "),...Ne.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:oe.jsx(NM,{scope:i,placedSide:Ie,onArrowChange:Se,arrowX:ie,arrowY:Ee,shouldHideArrow:De,children:oe.jsx(si.div,{"data-side":Ie,"data-align":yt,...z,ref:ce,style:{...z.style,animation:At?void 0:"none"}})})})});SS.displayName=Mw;var ES="PopperArrow",OM={top:"bottom",right:"left",bottom:"top",left:"right"},FS=te.forwardRef(function(n,i){const{__scopePopper:l,...h}=n,f=QM(ES,l),m=OM[f.placedSide];return oe.jsx("span",{ref:f.onArrowChange,style:{position:"absolute",left:f.arrowX,top:f.arrowY,[m]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[f.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[f.placedSide],visibility:f.shouldHideArrow?"hidden":void 0},children:oe.jsx(DM,{...h,ref:i,style:{...h.style,display:"block"}})})});FS.displayName=ES;function zM(e){return e!==null}var HM=e=>({name:"transformOrigin",options:e,fn(n){const{placement:i,rects:l,middlewareData:h}=n,m=h.arrow?.centerOffset!==0,a=m?0:e.arrowWidth,x=m?0:e.arrowHeight,[S,I]=IS(i),U={start:"0%",center:"50%",end:"100%"}[I],Q=(h.arrow?.x??0)+a/2,P=(h.arrow?.y??0)+x/2;let $="",z="";return S==="bottom"?($=m?U:`${Q}px`,z=`${-x}px`):S==="top"?($=m?U:`${Q}px`,z=`${l.floating.height+x}px`):S==="right"?($=`${-x}px`,z=m?U:`${P}px`):S==="left"&&($=`${l.floating.width+x}px`,z=m?U:`${P}px`),{data:{x:$,y:z}}}});function IS(e){const[n,i="center"]=e.split("-");return[n,i]}var jM=bS,TS=CS,PS=SS,LS=FS,VM=Symbol("radix.slottable");function GM(e){const n=({children:i})=>oe.jsx(oe.Fragment,{children:i});return n.displayName=`${e}.Slottable`,n.__radixId=VM,n}var[Py]=Nh("Tooltip",[Ty]),kw=Ty(),MS="TooltipProvider",KM=700,h2="tooltip.open",[qM,kS]=Py(MS),US=e=>{const{__scopeTooltip:n,delayDuration:i=KM,skipDelayDuration:l=300,disableHoverableContent:h=!1,children:f}=e,m=te.useRef(!0),a=te.useRef(!1),x=te.useRef(0);return te.useEffect(()=>{const S=x.current;return()=>window.clearTimeout(S)},[]),oe.jsx(qM,{scope:n,isOpenDelayedRef:m,delayDuration:i,onOpen:te.useCallback(()=>{window.clearTimeout(x.current),m.current=!1},[]),onClose:te.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>m.current=!0,l)},[l]),isPointerInTransitRef:a,onPointerInTransitChange:te.useCallback(S=>{a.current=S},[]),disableHoverableContent:h,children:f})};US.displayName=MS;var DS="Tooltip",[YV,Ly]=Py(DS),d1="TooltipTrigger",$M=te.forwardRef((e,n)=>{const{__scopeTooltip:i,...l}=e,h=Ly(d1,i),f=kS(d1,i),m=kw(i),a=te.useRef(null),x=us(n,a,h.onTriggerChange),S=te.useRef(!1),I=te.useRef(!1),U=te.useCallback(()=>S.current=!1,[]);return te.useEffect(()=>()=>document.removeEventListener("pointerup",U),[U]),oe.jsx(TS,{asChild:!0,...m,children:oe.jsx(si.button,{"aria-describedby":h.open?h.contentId:void 0,"data-state":h.stateAttribute,...l,ref:x,onPointerMove:kn(e.onPointerMove,Q=>{Q.pointerType!=="touch"&&!I.current&&!f.isPointerInTransitRef.current&&(h.onTriggerEnter(),I.current=!0)}),onPointerLeave:kn(e.onPointerLeave,()=>{h.onTriggerLeave(),I.current=!1}),onPointerDown:kn(e.onPointerDown,()=>{h.open&&h.onClose(),S.current=!0,document.addEventListener("pointerup",U,{once:!0})}),onFocus:kn(e.onFocus,()=>{S.current||h.onOpen()}),onBlur:kn(e.onBlur,h.onClose),onClick:kn(e.onClick,h.onClose)})})});$M.displayName=d1;var WM="TooltipPortal",[JV,ZM]=Py(WM,{forceMount:void 0}),pp="TooltipContent",RS=te.forwardRef((e,n)=>{const i=ZM(pp,e.__scopeTooltip),{forceMount:l=i.forceMount,side:h="top",...f}=e,m=Ly(pp,e.__scopeTooltip);return oe.jsx(Hm,{present:l||m.open,children:m.disableHoverableContent?oe.jsx(NS,{side:h,...f,ref:n}):oe.jsx(XM,{side:h,...f,ref:n})})}),XM=te.forwardRef((e,n)=>{const i=Ly(pp,e.__scopeTooltip),l=kS(pp,e.__scopeTooltip),h=te.useRef(null),f=us(n,h),[m,a]=te.useState(null),{trigger:x,onClose:S}=i,I=h.current,{onPointerInTransitChange:U}=l,Q=te.useCallback(()=>{a(null),U(!1)},[U]),P=te.useCallback(($,z)=>{const O=$.currentTarget,W={x:$.clientX,y:$.clientY},ne=rk(W,O.getBoundingClientRect()),ce=nk(W,ne),de=ik(z.getBoundingClientRect()),Se=ok([...ce,...de]);a(Se),U(!0)},[U]);return te.useEffect(()=>()=>Q(),[Q]),te.useEffect(()=>{if(x&&I){const $=O=>P(O,I),z=O=>P(O,x);return x.addEventListener("pointerleave",$),I.addEventListener("pointerleave",z),()=>{x.removeEventListener("pointerleave",$),I.removeEventListener("pointerleave",z)}}},[x,I,P,Q]),te.useEffect(()=>{if(m){const $=z=>{const O=z.target,W={x:z.clientX,y:z.clientY},ne=x?.contains(O)||I?.contains(O),ce=!sk(W,m);ne?Q():ce&&(Q(),S())};return document.addEventListener("pointermove",$),()=>document.removeEventListener("pointermove",$)}},[x,I,m,S,Q]),oe.jsx(NS,{...e,ref:f})}),[YM,JM]=Py(DS,{isInside:!1}),ek=GM("TooltipContent"),NS=te.forwardRef((e,n)=>{const{__scopeTooltip:i,children:l,"aria-label":h,onEscapeKeyDown:f,onPointerDownOutside:m,...a}=e,x=Ly(pp,i),S=kw(i),{onClose:I}=x;return te.useEffect(()=>(document.addEventListener(h2,I),()=>document.removeEventListener(h2,I)),[I]),te.useEffect(()=>{if(x.trigger){const U=Q=>{Q.target?.contains(x.trigger)&&I()};return window.addEventListener("scroll",U,{capture:!0}),()=>window.removeEventListener("scroll",U,{capture:!0})}},[x.trigger,I]),oe.jsx(wy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:U=>U.preventDefault(),onDismiss:I,children:oe.jsxs(PS,{"data-state":x.stateAttribute,...S,...a,ref:n,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[oe.jsx(ek,{children:l}),oe.jsx(YM,{scope:i,isInside:!0,children:oe.jsx(P3,{id:x.contentId,role:"tooltip",children:h||l})})]})})});RS.displayName=pp;var QS="TooltipArrow",tk=te.forwardRef((e,n)=>{const{__scopeTooltip:i,...l}=e,h=kw(i);return JM(QS,i).isInside?null:oe.jsx(LS,{...h,...l,ref:n})});tk.displayName=QS;function rk(e,n){const i=Math.abs(n.top-e.y),l=Math.abs(n.bottom-e.y),h=Math.abs(n.right-e.x),f=Math.abs(n.left-e.x);switch(Math.min(i,l,h,f)){case f:return"left";case h:return"right";case i:return"top";case l:return"bottom";default:throw new Error("unreachable")}}function nk(e,n,i=5){const l=[];switch(n){case"top":l.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":l.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":l.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":l.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i});break}return l}function ik(e){const{top:n,right:i,bottom:l,left:h}=e;return[{x:h,y:n},{x:i,y:n},{x:i,y:l},{x:h,y:l}]}function sk(e,n){const{x:i,y:l}=e;let h=!1;for(let f=0,m=n.length-1;f<n.length;m=f++){const a=n[f],x=n[m],S=a.x,I=a.y,U=x.x,Q=x.y;I>l!=Q>l&&i<(U-S)*(l-I)/(Q-I)+S&&(h=!h)}return h}function ok(e){const n=e.slice();return n.sort((i,l)=>i.x<l.x?-1:i.x>l.x?1:i.y<l.y?-1:i.y>l.y?1:0),ak(n)}function ak(e){if(e.length<=1)return e.slice();const n=[];for(let l=0;l<e.length;l++){const h=e[l];for(;n.length>=2;){const f=n[n.length-1],m=n[n.length-2];if((f.x-m.x)*(h.y-m.y)>=(f.y-m.y)*(h.x-m.x))n.pop();else break}n.push(h)}n.pop();const i=[];for(let l=e.length-1;l>=0;l--){const h=e[l];for(;i.length>=2;){const f=i[i.length-1],m=i[i.length-2];if((f.x-m.x)*(h.y-m.y)>=(f.y-m.y)*(h.x-m.x))i.pop();else break}i.push(h)}return i.pop(),n.length===1&&i.length===1&&n[0].x===i[0].x&&n[0].y===i[0].y?n:n.concat(i)}var lk=US,OS=RS;const ck=lk,Ak=te.forwardRef(({className:e,sideOffset:n=4,...i},l)=>oe.jsx(OS,{ref:l,sideOffset:n,className:Pi("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i}));Ak.displayName=OS.displayName;var My=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uk={setTimeout:(e,n)=>setTimeout(e,n),clearTimeout:e=>clearTimeout(e),setInterval:(e,n)=>setInterval(e,n),clearInterval:e=>clearInterval(e)},hk=class{#e=uk;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,n){return this.#e.setTimeout(e,n)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,n){return this.#e.setInterval(e,n)}clearInterval(e){this.#e.clearInterval(e)}},p1=new hk;function fk(e){setTimeout(e,0)}var ky=typeof window>"u"||"Deno"in globalThis;function bu(){}function dk(e,n){return typeof e=="function"?e(n):e}function pk(e){return typeof e=="number"&&e>=0&&e!==1/0}function mk(e,n){return Math.max(e+(n||0)-Date.now(),0)}function m1(e,n){return typeof e=="function"?e(n):e}function gk(e,n){return typeof e=="function"?e(n):e}function f2(e,n){const{type:i="all",exact:l,fetchStatus:h,predicate:f,queryKey:m,stale:a}=e;if(m){if(l){if(n.queryHash!==Uw(m,n.options))return!1}else if(!Tm(n.queryKey,m))return!1}if(i!=="all"){const x=n.isActive();if(i==="active"&&!x||i==="inactive"&&x)return!1}return!(typeof a=="boolean"&&n.isStale()!==a||h&&h!==n.state.fetchStatus||f&&!f(n))}function d2(e,n){const{exact:i,status:l,predicate:h,mutationKey:f}=e;if(f){if(!n.options.mutationKey)return!1;if(i){if(Im(n.options.mutationKey)!==Im(f))return!1}else if(!Tm(n.options.mutationKey,f))return!1}return!(l&&n.state.status!==l||h&&!h(n))}function Uw(e,n){return(n?.queryKeyHashFn||Im)(e)}function Im(e){return JSON.stringify(e,(n,i)=>g1(i)?Object.keys(i).sort().reduce((l,h)=>(l[h]=i[h],l),{}):i)}function Tm(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(i=>Tm(e[i],n[i])):!1}var yk=Object.prototype.hasOwnProperty;function zS(e,n){if(e===n)return e;const i=p2(e)&&p2(n);if(!i&&!(g1(e)&&g1(n)))return n;const h=(i?e:Object.keys(e)).length,f=i?n:Object.keys(n),m=f.length,a=i?new Array(m):{};let x=0;for(let S=0;S<m;S++){const I=i?S:f[S],U=e[I],Q=n[I];if(U===Q){a[I]=U,(i?S<h:yk.call(e,I))&&x++;continue}if(U===null||Q===null||typeof U!="object"||typeof Q!="object"){a[I]=Q;continue}const P=zS(U,Q);a[I]=P,P===U&&x++}return h===m&&x===h?e:a}function p2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function g1(e){if(!m2(e))return!1;const n=e.constructor;if(n===void 0)return!0;const i=n.prototype;return!(!m2(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function m2(e){return Object.prototype.toString.call(e)==="[object Object]"}function vk(e){return new Promise(n=>{p1.setTimeout(n,e)})}function _k(e,n,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,n):i.structuralSharing!==!1?zS(e,n):n}function wk(e,n,i=0){const l=[...e,n];return i&&l.length>i?l.slice(1):l}function xk(e,n,i=0){const l=[n,...e];return i&&l.length>i?l.slice(0,-1):l}var Dw=Symbol();function HS(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===Dw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var bk=class extends My{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!ky&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},jS=new bk;function Bk(){let e,n;const i=new Promise((h,f)=>{e=h,n=f});i.status="pending",i.catch(()=>{});function l(h){Object.assign(i,h),delete i.resolve,delete i.reject}return i.resolve=h=>{l({status:"fulfilled",value:h}),e(h)},i.reject=h=>{l({status:"rejected",reason:h}),n(h)},i}var Ck=fk;function Sk(){let e=[],n=0,i=a=>{a()},l=a=>{a()},h=Ck;const f=a=>{n?e.push(a):h(()=>{i(a)})},m=()=>{const a=e;e=[],a.length&&h(()=>{l(()=>{a.forEach(x=>{i(x)})})})};return{batch:a=>{let x;n++;try{x=a()}finally{n--,n||m()}return x},batchCalls:a=>(...x)=>{f(()=>{a(...x)})},schedule:f,setNotifyFunction:a=>{i=a},setBatchNotifyFunction:a=>{l=a},setScheduler:a=>{h=a}}}var _c=Sk(),Ek=class extends My{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!ky&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(i=>{i(e)}))}isOnline(){return this.#e}},$0=new Ek;function Fk(e){return Math.min(1e3*2**e,3e4)}function VS(e){return(e??"online")==="online"?$0.isOnline():!0}var y1=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function GS(e){let n=!1,i=0,l;const h=Bk(),f=()=>h.status!=="pending",m=z=>{if(!f()){const O=new y1(z);Q(O),e.onCancel?.(O)}},a=()=>{n=!0},x=()=>{n=!1},S=()=>jS.isFocused()&&(e.networkMode==="always"||$0.isOnline())&&e.canRun(),I=()=>VS(e.networkMode)&&e.canRun(),U=z=>{f()||(l?.(),h.resolve(z))},Q=z=>{f()||(l?.(),h.reject(z))},P=()=>new Promise(z=>{l=O=>{(f()||S())&&z(O)},e.onPause?.()}).then(()=>{l=void 0,f()||e.onContinue?.()}),$=()=>{if(f())return;let z;const O=i===0?e.initialPromise:void 0;try{z=O??e.fn()}catch(W){z=Promise.reject(W)}Promise.resolve(z).then(U).catch(W=>{if(f())return;const ne=e.retry??(ky?0:3),ce=e.retryDelay??Fk,de=typeof ce=="function"?ce(i,W):ce,Se=ne===!0||typeof ne=="number"&&i<ne||typeof ne=="function"&&ne(i,W);if(n||!Se){Q(W);return}i++,e.onFail?.(i,W),vk(de).then(()=>S()?void 0:P()).then(()=>{n?Q(W):$()})})};return{promise:h,status:()=>h.status,cancel:m,continue:()=>(l?.(),h),cancelRetry:a,continueRetry:x,canStart:I,start:()=>(I()?$():P().then($),h)}}var KS=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pk(this.gcTime)&&(this.#e=p1.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ky?1/0:300*1e3))}clearGcTimeout(){this.#e&&(p1.clearTimeout(this.#e),this.#e=void 0)}},Ik=class extends KS{#e;#t;#r;#i;#n;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=y2(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=y2(this.options);n.data!==void 0&&(this.setState(g2(n.data,n.dataUpdatedAt)),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,n){const i=_k(this.state.data,e,this.options);return this.#s({data:i,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),i}setState(e,n){this.#s({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#n?.promise;return this.#n?.cancel(e),n?n.then(bu).catch(bu):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>gk(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>m1(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!mk(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(x=>x.options.queryFn);a&&this.setOptions(a.options)}const i=new AbortController,l=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,i.signal)})},h=()=>{const a=HS(this.options,n),S=(()=>{const I={client:this.#i,queryKey:this.queryKey,meta:this.meta};return l(I),I})();return this.#a=!1,this.options.persister?this.options.persister(a,S,this):a(S)},m=(()=>{const a={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:h};return l(a),a})();this.options.behavior?.onFetch(m,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==m.fetchOptions?.meta)&&this.#s({type:"fetch",meta:m.fetchOptions?.meta}),this.#n=GS({initialPromise:n?.initialPromise,fn:m.fetchFn,onCancel:a=>{a instanceof y1&&a.revert&&this.setState({...this.#t,fetchStatus:"idle"}),i.abort()},onFail:(a,x)=>{this.#s({type:"failed",failureCount:a,error:x})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0});try{const a=await this.#n.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof y1){if(a.silent)return this.#n.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#s({type:"error",error:a}),this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#s(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Tk(i.data,this.options),fetchMeta:e.meta??null};case"success":const l={...i,...g2(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?l:void 0,l;case"error":const h=e.error;return{...i,error:h,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),_c.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Tk(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VS(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function g2(e,n){return{data:e,dataUpdatedAt:n??Date.now(),error:null,isInvalidated:!1,status:"success"}}function y2(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,i=n!==void 0,l=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:i?l??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}function v2(e){return{onFetch:(n,i)=>{const l=n.options,h=n.fetchOptions?.meta?.fetchMore?.direction,f=n.state.data?.pages||[],m=n.state.data?.pageParams||[];let a={pages:[],pageParams:[]},x=0;const S=async()=>{let I=!1;const U=$=>{Object.defineProperty($,"signal",{enumerable:!0,get:()=>(n.signal.aborted?I=!0:n.signal.addEventListener("abort",()=>{I=!0}),n.signal)})},Q=HS(n.options,n.fetchOptions),P=async($,z,O)=>{if(I)return Promise.reject();if(z==null&&$.pages.length)return Promise.resolve($);const ne=(()=>{const ze={client:n.client,queryKey:n.queryKey,pageParam:z,direction:O?"backward":"forward",meta:n.options.meta};return U(ze),ze})(),ce=await Q(ne),{maxPages:de}=n.options,Se=O?xk:wk;return{pages:Se($.pages,ce,de),pageParams:Se($.pageParams,z,de)}};if(h&&f.length){const $=h==="backward",z=$?Pk:_2,O={pages:f,pageParams:m},W=z(l,O);a=await P(O,W,$)}else{const $=e??f.length;do{const z=x===0?m[0]??l.initialPageParam:_2(l,a);if(x>0&&z==null)break;a=await P(a,z),x++}while(x<$)}return a};n.options.persister?n.fetchFn=()=>n.options.persister?.(S,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},i):n.fetchFn=S}}}function _2(e,{pages:n,pageParams:i}){const l=n.length-1;return n.length>0?e.getNextPageParam(n[l],n,i[l],i):void 0}function Pk(e,{pages:n,pageParams:i}){return n.length>0?e.getPreviousPageParam?.(n[0],n,i[0],i):void 0}var Lk=class extends KS{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Mk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#n({type:"continue"})},i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=GS({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(f,m)=>{this.#n({type:"failed",failureCount:f,error:m})},onPause:()=>{this.#n({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const l=this.state.status==="pending",h=!this.#i.canStart();try{if(l)n();else{this.#n({type:"pending",variables:e,isPaused:h}),await this.#r.config.onMutate?.(e,this,i);const m=await this.options.onMutate?.(e,i);m!==this.state.context&&this.#n({type:"pending",context:m,variables:e,isPaused:h})}const f=await this.#i.start();return await this.#r.config.onSuccess?.(f,e,this.state.context,this,i),await this.options.onSuccess?.(f,e,this.state.context,i),await this.#r.config.onSettled?.(f,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(f,null,e,this.state.context,i),this.#n({type:"success",data:f}),f}catch(f){try{throw await this.#r.config.onError?.(f,e,this.state.context,this,i),await this.options.onError?.(f,e,this.state.context,i),await this.#r.config.onSettled?.(void 0,f,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,f,e,this.state.context,i),f}finally{this.#n({type:"error",error:f})}}finally{this.#r.runNext(this)}}#n(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),_c.batch(()=>{this.#t.forEach(i=>{i.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Mk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kk=class extends My{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,n,i){const l=new Lk({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(n),state:i});return this.add(l),l}add(e){this.#e.add(e);const n=zg(e);if(typeof n=="string"){const i=this.#t.get(n);i?i.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=zg(e);if(typeof n=="string"){const i=this.#t.get(n);if(i)if(i.length>1){const l=i.indexOf(e);l!==-1&&i.splice(l,1)}else i[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=zg(e);if(typeof n=="string"){const l=this.#t.get(n)?.find(h=>h.state.status==="pending");return!l||l===e}else return!0}runNext(e){const n=zg(e);return typeof n=="string"?this.#t.get(n)?.find(l=>l!==e&&l.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){_c.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(i=>d2(n,i))}findAll(e={}){return this.getAll().filter(n=>d2(e,n))}notify(e){_c.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return _c.batch(()=>Promise.all(e.map(n=>n.continue().catch(bu))))}};function zg(e){return e.options.scope?.id}var Uk=class extends My{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,i){const l=n.queryKey,h=n.queryHash??Uw(l,n);let f=this.get(h);return f||(f=new Ik({client:e,queryKey:l,queryHash:h,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(l)}),this.add(f)),f}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_c.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>f2(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>f2(e,i)):n}notify(e){_c.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){_c.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_c.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Dk=class{#e;#t;#r;#i;#n;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new Uk,this.#t=e.mutationCache||new kk,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=jS.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=$0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),i=this.#e.build(this,n),l=i.state.data;return l===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(m1(n.staleTime,i))&&this.prefetchQuery(n),Promise.resolve(l))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:i})=>{const l=i.data;return[n,l]})}setQueryData(e,n,i){const l=this.defaultQueryOptions({queryKey:e}),f=this.#e.get(l.queryHash)?.state.data,m=dk(n,f);if(m!==void 0)return this.#e.build(this,l).setData(m,{...i,manual:!0})}setQueriesData(e,n,i){return _c.batch(()=>this.#e.findAll(e).map(({queryKey:l})=>[l,this.setQueryData(l,n,i)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;_c.batch(()=>{n.findAll(e).forEach(i=>{n.remove(i)})})}resetQueries(e,n){const i=this.#e;return _c.batch(()=>(i.findAll(e).forEach(l=>{l.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const i={revert:!0,...n},l=_c.batch(()=>this.#e.findAll(e).map(h=>h.cancel(i)));return Promise.all(l).then(bu).catch(bu)}invalidateQueries(e,n={}){return _c.batch(()=>(this.#e.findAll(e).forEach(i=>{i.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const i={...n,cancelRefetch:n.cancelRefetch??!0},l=_c.batch(()=>this.#e.findAll(e).filter(h=>!h.isDisabled()&&!h.isStatic()).map(h=>{let f=h.fetch(void 0,i);return i.throwOnError||(f=f.catch(bu)),h.state.fetchStatus==="paused"?Promise.resolve():f}));return Promise.all(l).then(bu)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const i=this.#e.build(this,n);return i.isStaleByTime(m1(n.staleTime,i))?i.fetch(n):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(bu).catch(bu)}fetchInfiniteQuery(e){return e.behavior=v2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(bu).catch(bu)}ensureInfiniteQueryData(e){return e.behavior=v2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return $0.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,n){this.#i.set(Im(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#i.values()],i={};return n.forEach(l=>{Tm(e,l.queryKey)&&Object.assign(i,l.defaultOptions)}),i}setMutationDefaults(e,n){this.#n.set(Im(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#n.values()],i={};return n.forEach(l=>{Tm(e,l.mutationKey)&&Object.assign(i,l.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=Uw(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===Dw&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Rk=te.createContext(void 0),Nk=({client:e,children:n})=>(te.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),oe.jsx(Rk.Provider,{value:e,children:n}));function Pm(){return Pm=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Pm.apply(this,arguments)}var lf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(lf||(lf={}));const w2="popstate";function Qk(e){e===void 0&&(e={});function n(l,h){let{pathname:f,search:m,hash:a}=l.location;return v1("",{pathname:f,search:m,hash:a},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function i(l,h){return typeof h=="string"?h:W0(h)}return zk(n,i,null,e)}function sa(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Rw(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Ok(){return Math.random().toString(36).substr(2,8)}function x2(e,n){return{usr:e.state,key:e.key,idx:n}}function v1(e,n,i,l){return i===void 0&&(i=null),Pm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?xp(n):n,{state:i,key:n&&n.key||l||Ok()})}function W0(e){let{pathname:n="/",search:i="",hash:l=""}=e;return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function xp(e){let n={};if(e){let i=e.indexOf("#");i>=0&&(n.hash=e.substr(i),e=e.substr(0,i));let l=e.indexOf("?");l>=0&&(n.search=e.substr(l),e=e.substr(0,l)),e&&(n.pathname=e)}return n}function zk(e,n,i,l){l===void 0&&(l={});let{window:h=document.defaultView,v5Compat:f=!1}=l,m=h.history,a=lf.Pop,x=null,S=I();S==null&&(S=0,m.replaceState(Pm({},m.state,{idx:S}),""));function I(){return(m.state||{idx:null}).idx}function U(){a=lf.Pop;let O=I(),W=O==null?null:O-S;S=O,x&&x({action:a,location:z.location,delta:W})}function Q(O,W){a=lf.Push;let ne=v1(z.location,O,W);S=I()+1;let ce=x2(ne,S),de=z.createHref(ne);try{m.pushState(ce,"",de)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;h.location.assign(de)}f&&x&&x({action:a,location:z.location,delta:1})}function P(O,W){a=lf.Replace;let ne=v1(z.location,O,W);S=I();let ce=x2(ne,S),de=z.createHref(ne);m.replaceState(ce,"",de),f&&x&&x({action:a,location:z.location,delta:0})}function $(O){let W=h.location.origin!=="null"?h.location.origin:h.location.href,ne=typeof O=="string"?O:W0(O);return ne=ne.replace(/ $/,"%20"),sa(W,"No window.location.(origin|href) available to create URL for href: "+ne),new URL(ne,W)}let z={get action(){return a},get location(){return e(h,m)},listen(O){if(x)throw new Error("A history only accepts one active listener");return h.addEventListener(w2,U),x=O,()=>{h.removeEventListener(w2,U),x=null}},createHref(O){return n(h,O)},createURL:$,encodeLocation(O){let W=$(O);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:Q,replace:P,go(O){return m.go(O)}};return z}var b2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(b2||(b2={}));function Hk(e,n,i){return i===void 0&&(i="/"),jk(e,n,i)}function jk(e,n,i,l){let h=typeof n=="string"?xp(n):n,f=Nw(h.pathname||"/",i);if(f==null)return null;let m=qS(e);Vk(m);let a=null;for(let x=0;a==null&&x<m.length;++x){let S=rU(f);a=Jk(m[x],S)}return a}function qS(e,n,i,l){n===void 0&&(n=[]),i===void 0&&(i=[]),l===void 0&&(l="");let h=(f,m,a)=>{let x={relativePath:a===void 0?f.path||"":a,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};x.relativePath.startsWith("/")&&(sa(x.relativePath.startsWith(l),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(l.length));let S=ff([l,x.relativePath]),I=i.concat(x);f.children&&f.children.length>0&&(sa(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),qS(f.children,n,I,S)),!(f.path==null&&!f.index)&&n.push({path:S,score:Xk(S,f.index),routesMeta:I})};return e.forEach((f,m)=>{var a;if(f.path===""||!((a=f.path)!=null&&a.includes("?")))h(f,m);else for(let x of $S(f.path))h(f,m,x)}),n}function $S(e){let n=e.split("/");if(n.length===0)return[];let[i,...l]=n,h=i.endsWith("?"),f=i.replace(/\?$/,"");if(l.length===0)return h?[f,""]:[f];let m=$S(l.join("/")),a=[];return a.push(...m.map(x=>x===""?f:[f,x].join("/"))),h&&a.push(...m),a.map(x=>e.startsWith("/")&&x===""?"/":x)}function Vk(e){e.sort((n,i)=>n.score!==i.score?i.score-n.score:Yk(n.routesMeta.map(l=>l.childrenIndex),i.routesMeta.map(l=>l.childrenIndex)))}const Gk=/^:[\w-]+$/,Kk=3,qk=2,$k=1,Wk=10,Zk=-2,B2=e=>e==="*";function Xk(e,n){let i=e.split("/"),l=i.length;return i.some(B2)&&(l+=Zk),n&&(l+=qk),i.filter(h=>!B2(h)).reduce((h,f)=>h+(Gk.test(f)?Kk:f===""?$k:Wk),l)}function Yk(e,n){return e.length===n.length&&e.slice(0,-1).every((l,h)=>l===n[h])?e[e.length-1]-n[n.length-1]:0}function Jk(e,n,i){let{routesMeta:l}=e,h={},f="/",m=[];for(let a=0;a<l.length;++a){let x=l[a],S=a===l.length-1,I=f==="/"?n:n.slice(f.length)||"/",U=eU({path:x.relativePath,caseSensitive:x.caseSensitive,end:S},I),Q=x.route;if(!U)return null;Object.assign(h,U.params),m.push({params:h,pathname:ff([f,U.pathname]),pathnameBase:aU(ff([f,U.pathnameBase])),route:Q}),U.pathnameBase!=="/"&&(f=ff([f,U.pathnameBase]))}return m}function eU(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,l]=tU(e.path,e.caseSensitive,e.end),h=n.match(i);if(!h)return null;let f=h[0],m=f.replace(/(.)\/+$/,"$1"),a=h.slice(1);return{params:l.reduce((S,I,U)=>{let{paramName:Q,isOptional:P}=I;if(Q==="*"){let z=a[U]||"";m=f.slice(0,f.length-z.length).replace(/(.)\/+$/,"$1")}const $=a[U];return P&&!$?S[Q]=void 0:S[Q]=($||"").replace(/%2F/g,"/"),S},{}),pathname:f,pathnameBase:m,pattern:e}}function tU(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=!0),Rw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,a,x)=>(l.push({paramName:a,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(l.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,n?void 0:"i"),l]}function rU(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Rw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Nw(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,l=e.charAt(i);return l&&l!=="/"?null:e.slice(i)||"/"}const nU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iU=e=>nU.test(e);function sU(e,n){n===void 0&&(n="/");let{pathname:i,search:l="",hash:h=""}=typeof e=="string"?xp(e):e,f;if(i)if(iU(i))f=i;else{if(i.includes("//")){let m=i;i=i.replace(/\/\/+/g,"/"),Rw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(m+" -> "+i))}i.startsWith("/")?f=C2(i.substring(1),"/"):f=C2(i,n)}else f=n;return{pathname:f,search:lU(l),hash:cU(h)}}function C2(e,n){let i=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?i.length>1&&i.pop():h!=="."&&i.push(h)}),i.length>1?i.join("/"):"/"}function t_(e,n,i,l){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oU(e){return e.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function WS(e,n){let i=oU(e);return n?i.map((l,h)=>h===i.length-1?l.pathname:l.pathnameBase):i.map(l=>l.pathnameBase)}function ZS(e,n,i,l){l===void 0&&(l=!1);let h;typeof e=="string"?h=xp(e):(h=Pm({},e),sa(!h.pathname||!h.pathname.includes("?"),t_("?","pathname","search",h)),sa(!h.pathname||!h.pathname.includes("#"),t_("#","pathname","hash",h)),sa(!h.search||!h.search.includes("#"),t_("#","search","hash",h)));let f=e===""||h.pathname==="",m=f?"/":h.pathname,a;if(m==null)a=i;else{let U=n.length-1;if(!l&&m.startsWith("..")){let Q=m.split("/");for(;Q[0]==="..";)Q.shift(),U-=1;h.pathname=Q.join("/")}a=U>=0?n[U]:"/"}let x=sU(h,a),S=m&&m!=="/"&&m.endsWith("/"),I=(f||m===".")&&i.endsWith("/");return!x.pathname.endsWith("/")&&(S||I)&&(x.pathname+="/"),x}const ff=e=>e.join("/").replace(/\/\/+/g,"/"),aU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function AU(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const XS=["post","put","patch","delete"];new Set(XS);const uU=["get",...XS];new Set(uU);function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Lm.apply(this,arguments)}const Qw=te.createContext(null),hU=te.createContext(null),od=te.createContext(null),Uy=te.createContext(null),ad=te.createContext({outlet:null,matches:[],isDataRoute:!1}),YS=te.createContext(null);function fU(e,n){let{relative:i}=n===void 0?{}:n;Km()||sa(!1);let{basename:l,navigator:h}=te.useContext(od),{hash:f,pathname:m,search:a}=eE(e,{relative:i}),x=m;return l!=="/"&&(x=m==="/"?l:ff([l,m])),h.createHref({pathname:x,search:a,hash:f})}function Km(){return te.useContext(Uy)!=null}function qm(){return Km()||sa(!1),te.useContext(Uy).location}function JS(e){te.useContext(od).static||te.useLayoutEffect(e)}function dU(){let{isDataRoute:e}=te.useContext(ad);return e?EU():pU()}function pU(){Km()||sa(!1);let e=te.useContext(Qw),{basename:n,future:i,navigator:l}=te.useContext(od),{matches:h}=te.useContext(ad),{pathname:f}=qm(),m=JSON.stringify(WS(h,i.v7_relativeSplatPath)),a=te.useRef(!1);return JS(()=>{a.current=!0}),te.useCallback(function(S,I){if(I===void 0&&(I={}),!a.current)return;if(typeof S=="number"){l.go(S);return}let U=ZS(S,JSON.parse(m),f,I.relative==="path");e==null&&n!=="/"&&(U.pathname=U.pathname==="/"?n:ff([n,U.pathname])),(I.replace?l.replace:l.push)(U,I.state,I)},[n,l,m,f,e])}function eE(e,n){let{relative:i}=n===void 0?{}:n,{future:l}=te.useContext(od),{matches:h}=te.useContext(ad),{pathname:f}=qm(),m=JSON.stringify(WS(h,l.v7_relativeSplatPath));return te.useMemo(()=>ZS(e,JSON.parse(m),f,i==="path"),[e,m,f,i])}function mU(e,n){return gU(e,n)}function gU(e,n,i,l){Km()||sa(!1);let{navigator:h}=te.useContext(od),{matches:f}=te.useContext(ad),m=f[f.length-1],a=m?m.params:{};m&&m.pathname;let x=m?m.pathnameBase:"/";m&&m.route;let S=qm(),I;if(n){var U;let O=typeof n=="string"?xp(n):n;x==="/"||(U=O.pathname)!=null&&U.startsWith(x)||sa(!1),I=O}else I=S;let Q=I.pathname||"/",P=Q;if(x!=="/"){let O=x.replace(/^\//,"").split("/");P="/"+Q.replace(/^\//,"").split("/").slice(O.length).join("/")}let $=Hk(e,{pathname:P}),z=xU($&&$.map(O=>Object.assign({},O,{params:Object.assign({},a,O.params),pathname:ff([x,h.encodeLocation?h.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?x:ff([x,h.encodeLocation?h.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),f,i,l);return n&&z?te.createElement(Uy.Provider,{value:{location:Lm({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:lf.Pop}},z):z}function yU(){let e=SU(),n=AU(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},n),i?te.createElement("pre",{style:h},i):null,null)}const vU=te.createElement(yU,null);class _U extends te.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,i){return i.location!==n.location||i.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:i.error,location:i.location,revalidation:n.revalidation||i.revalidation}}componentDidCatch(n,i){console.error("React Router caught the following error during render",n,i)}render(){return this.state.error!==void 0?te.createElement(ad.Provider,{value:this.props.routeContext},te.createElement(YS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wU(e){let{routeContext:n,match:i,children:l}=e,h=te.useContext(Qw);return h&&h.static&&h.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=i.route.id),te.createElement(ad.Provider,{value:n},l)}function xU(e,n,i,l){var h;if(n===void 0&&(n=[]),i===void 0&&(i=null),l===void 0&&(l=null),e==null){var f;if(!i)return null;if(i.errors)e=i.matches;else if((f=l)!=null&&f.v7_partialHydration&&n.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let m=e,a=(h=i)==null?void 0:h.errors;if(a!=null){let I=m.findIndex(U=>U.route.id&&a?.[U.route.id]!==void 0);I>=0||sa(!1),m=m.slice(0,Math.min(m.length,I+1))}let x=!1,S=-1;if(i&&l&&l.v7_partialHydration)for(let I=0;I<m.length;I++){let U=m[I];if((U.route.HydrateFallback||U.route.hydrateFallbackElement)&&(S=I),U.route.id){let{loaderData:Q,errors:P}=i,$=U.route.loader&&Q[U.route.id]===void 0&&(!P||P[U.route.id]===void 0);if(U.route.lazy||$){x=!0,S>=0?m=m.slice(0,S+1):m=[m[0]];break}}}return m.reduceRight((I,U,Q)=>{let P,$=!1,z=null,O=null;i&&(P=a&&U.route.id?a[U.route.id]:void 0,z=U.route.errorElement||vU,x&&(S<0&&Q===0?(FU("route-fallback"),$=!0,O=null):S===Q&&($=!0,O=U.route.hydrateFallbackElement||null)));let W=n.concat(m.slice(0,Q+1)),ne=()=>{let ce;return P?ce=z:$?ce=O:U.route.Component?ce=te.createElement(U.route.Component,null):U.route.element?ce=U.route.element:ce=I,te.createElement(wU,{match:U,routeContext:{outlet:I,matches:W,isDataRoute:i!=null},children:ce})};return i&&(U.route.ErrorBoundary||U.route.errorElement||Q===0)?te.createElement(_U,{location:i.location,revalidation:i.revalidation,component:z,error:P,children:ne(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):ne()},null)}var tE=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(tE||{}),rE=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(rE||{});function bU(e){let n=te.useContext(Qw);return n||sa(!1),n}function BU(e){let n=te.useContext(hU);return n||sa(!1),n}function CU(e){let n=te.useContext(ad);return n||sa(!1),n}function nE(e){let n=CU(),i=n.matches[n.matches.length-1];return i.route.id||sa(!1),i.route.id}function SU(){var e;let n=te.useContext(YS),i=BU(),l=nE();return n!==void 0?n:(e=i.errors)==null?void 0:e[l]}function EU(){let{router:e}=bU(tE.UseNavigateStable),n=nE(rE.UseNavigateStable),i=te.useRef(!1);return JS(()=>{i.current=!0}),te.useCallback(function(h,f){f===void 0&&(f={}),i.current&&(typeof h=="number"?e.navigate(h):e.navigate(h,Lm({fromRouteId:n},f)))},[e,n])}const S2={};function FU(e,n,i){S2[e]||(S2[e]=!0)}function IU(e,n){e?.v7_startTransition,e?.v7_relativeSplatPath}function _1(e){sa(!1)}function TU(e){let{basename:n="/",children:i=null,location:l,navigationType:h=lf.Pop,navigator:f,static:m=!1,future:a}=e;Km()&&sa(!1);let x=n.replace(/^\/*/,"/"),S=te.useMemo(()=>({basename:x,navigator:f,static:m,future:Lm({v7_relativeSplatPath:!1},a)}),[x,a,f,m]);typeof l=="string"&&(l=xp(l));let{pathname:I="/",search:U="",hash:Q="",state:P=null,key:$="default"}=l,z=te.useMemo(()=>{let O=Nw(I,x);return O==null?null:{location:{pathname:O,search:U,hash:Q,state:P,key:$},navigationType:h}},[x,I,U,Q,P,$,h]);return z==null?null:te.createElement(od.Provider,{value:S},te.createElement(Uy.Provider,{children:i,value:z}))}function PU(e){let{children:n,location:i}=e;return mU(w1(n),i)}new Promise(()=>{});function w1(e,n){n===void 0&&(n=[]);let i=[];return te.Children.forEach(e,(l,h)=>{if(!te.isValidElement(l))return;let f=[...n,h];if(l.type===te.Fragment){i.push.apply(i,w1(l.props.children,f));return}l.type!==_1&&sa(!1),!l.props.index||!l.props.children||sa(!1);let m={id:l.props.id||f.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(m.children=w1(l.props.children,f)),i.push(m)}),i}function x1(){return x1=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},x1.apply(this,arguments)}function LU(e,n){if(e==null)return{};var i={},l=Object.keys(e),h,f;for(f=0;f<l.length;f++)h=l[f],!(n.indexOf(h)>=0)&&(i[h]=e[h]);return i}function MU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function kU(e,n){return e.button===0&&(!n||n==="_self")&&!MU(e)}const UU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DU="6";try{window.__reactRouterVersion=DU}catch{}const RU="startTransition",E2=_y[RU];function NU(e){let{basename:n,children:i,future:l,window:h}=e,f=te.useRef();f.current==null&&(f.current=Qk({window:h,v5Compat:!0}));let m=f.current,[a,x]=te.useState({action:m.action,location:m.location}),{v7_startTransition:S}=l||{},I=te.useCallback(U=>{S&&E2?E2(()=>x(U)):x(U)},[x,S]);return te.useLayoutEffect(()=>m.listen(I),[m,I]),te.useEffect(()=>IU(l),[l]),te.createElement(TU,{basename:n,children:i,location:a.location,navigationType:a.action,navigator:m,future:l})}const QU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zU=te.forwardRef(function(n,i){let{onClick:l,relative:h,reloadDocument:f,replace:m,state:a,target:x,to:S,preventScrollReset:I,viewTransition:U}=n,Q=LU(n,UU),{basename:P}=te.useContext(od),$,z=!1;if(typeof S=="string"&&OU.test(S)&&($=S,QU))try{let ce=new URL(window.location.href),de=S.startsWith("//")?new URL(ce.protocol+S):new URL(S),Se=Nw(de.pathname,P);de.origin===ce.origin&&Se!=null?S=Se+de.search+de.hash:z=!0}catch{}let O=fU(S,{relative:h}),W=HU(S,{replace:m,state:a,target:x,preventScrollReset:I,relative:h,viewTransition:U});function ne(ce){l&&l(ce),ce.defaultPrevented||W(ce)}return te.createElement("a",x1({},Q,{href:$||O,onClick:z||f?l:ne,ref:i,target:x}))});var F2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(F2||(F2={}));var I2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(I2||(I2={}));function HU(e,n){let{target:i,replace:l,state:h,preventScrollReset:f,relative:m,viewTransition:a}=n===void 0?{}:n,x=dU(),S=qm(),I=eE(e,{relative:m});return te.useCallback(U=>{if(kU(U,i)){U.preventDefault();let Q=l!==void 0?l:W0(S)===W0(I);x(e,{replace:Q,state:h,preventScrollReset:f,relative:m,viewTransition:a})}},[S,x,I,l,h,i,e,f,m,a])}function jU(e){return new Worker("/Domapus/assets/data-processor-C_iNJImL.js",{name:e?.name})}function VU(){const e=te.useRef(null),[n,i]=te.useState(!1),[l,h]=te.useState({phase:""}),f=te.useRef(new Map),m=te.useRef(!1);return console.log("[useDataWorker] Hook initialized"),te.useEffect(()=>{if(m.current)return;console.log("[useDataWorker] Creating worker instance");const x=new jU;return e.current=x,m.current=!0,x.onmessage=S=>{const{id:I,type:U,data:Q,error:P}=S.data;switch(console.log("[useDataWorker] Received message from worker:",U,{id:I}),U){case"PROGRESS":console.log("[useDataWorker] Progress update:",Q.phase),h(Q);break;case"ERROR":{console.error("[useDataWorker] Worker error:",P),i(!1);const $=f.current.get(I);$&&($.reject(new Error(P)),f.current.delete(I));break}default:{console.log(`[useDataWorker] ${U} completed for request ${I}`),i(!1);const $=f.current.get(I);$&&($.resolve(Q),f.current.delete(I));break}}},x.onerror=S=>{console.error("[useDataWorker] Unhandled worker error:",S),i(!1),f.current.forEach(I=>I.reject(S)),f.current.clear()},()=>{console.log("[useDataWorker] Terminating worker"),e.current&&(e.current.terminate(),e.current=null),m.current=!1}},[]),{processData:te.useCallback(x=>{const S=e.current;return!S||!m.current?(console.error("[useDataWorker] Worker not available"),Promise.reject(new Error("Worker is not initialized"))):new Promise((I,U)=>{const Q=`${Date.now()}-${Math.random()}`;console.log(`[useDataWorker] Sending message to worker: ${x.type}, request ID: ${Q}`),f.current.set(Q,{resolve:I,reject:U}),i(!0),S.postMessage({id:Q,...x})})},[]),isLoading:n,progress:l}}var GU=Symbol.for("react.lazy"),Z0=_y[" use ".trim().toString()];function KU(e){return typeof e=="object"&&e!==null&&"then"in e}function iE(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===GU&&"_payload"in e&&KU(e._payload)}function sE(e){const n=$U(e),i=te.forwardRef((l,h)=>{let{children:f,...m}=l;iE(f)&&typeof Z0=="function"&&(f=Z0(f._payload));const a=te.Children.toArray(f),x=a.find(ZU);if(x){const S=x.props.children,I=a.map(U=>U===x?te.Children.count(S)>1?te.Children.only(null):te.isValidElement(S)?S.props.children:null:U);return oe.jsx(n,{...m,ref:h,children:te.isValidElement(S)?te.cloneElement(S,void 0,I):null})}return oe.jsx(n,{...m,ref:h,children:f})});return i.displayName=`${e}.Slot`,i}var qU=sE("Slot");function $U(e){const n=te.forwardRef((i,l)=>{let{children:h,...f}=i;if(iE(h)&&typeof Z0=="function"&&(h=Z0(h._payload)),te.isValidElement(h)){const m=YU(h),a=XU(f,h.props);return h.type!==te.Fragment&&(a.ref=l?zm(l,m):m),te.cloneElement(h,a)}return te.Children.count(h)>1?te.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var WU=Symbol("radix.slottable");function ZU(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===WU}function XU(e,n){const i={...n};for(const l in n){const h=e[l],f=n[l];/^on[A-Z]/.test(l)?h&&f?i[l]=(...a)=>{const x=f(...a);return h(...a),x}:h&&(i[l]=h):l==="style"?i[l]={...h,...f}:l==="className"&&(i[l]=[h,f].filter(Boolean).join(" "))}return{...e,...i}}function YU(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}const JU=By("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wc=te.forwardRef(({className:e,variant:n,size:i,asChild:l=!1,...h},f)=>{const m=l?qU:"button";return oe.jsx(m,{className:Pi(JU({variant:n,size:i,className:e})),ref:f,...h})});wc.displayName="Button";var eD=te.createContext(void 0);function Ow(e){const n=te.useContext(eD);return e||n||"ltr"}var r_="rovingFocusGroup.onEntryFocus",tD={bubbles:!1,cancelable:!0},$m="RovingFocusGroup",[b1,oE,rD]=yw($m),[nD,aE]=Nh($m,[rD]),[iD,sD]=nD($m),lE=te.forwardRef((e,n)=>oe.jsx(b1.Provider,{scope:e.__scopeRovingFocusGroup,children:oe.jsx(b1.Slot,{scope:e.__scopeRovingFocusGroup,children:oe.jsx(oD,{...e,ref:n})})}));lE.displayName=$m;var oD=te.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:i,orientation:l,loop:h=!1,dir:f,currentTabStopId:m,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:x,onEntryFocus:S,preventScrollOnEntryFocus:I=!1,...U}=e,Q=te.useRef(null),P=us(n,Q),$=Ow(f),[z,O]=fp({prop:m,defaultProp:a??null,onChange:x,caller:$m}),[W,ne]=te.useState(!1),ce=JA(S),de=oE(i),Se=te.useRef(!1),[ze,Ze]=te.useState(0);return te.useEffect(()=>{const Qe=Q.current;if(Qe)return Qe.addEventListener(r_,ce),()=>Qe.removeEventListener(r_,ce)},[ce]),oe.jsx(iD,{scope:i,orientation:l,dir:$,loop:h,currentTabStopId:z,onItemFocus:te.useCallback(Qe=>O(Qe),[O]),onItemShiftTab:te.useCallback(()=>ne(!0),[]),onFocusableItemAdd:te.useCallback(()=>Ze(Qe=>Qe+1),[]),onFocusableItemRemove:te.useCallback(()=>Ze(Qe=>Qe-1),[]),children:oe.jsx(si.div,{tabIndex:W||ze===0?-1:0,"data-orientation":l,...U,ref:P,style:{outline:"none",...e.style},onMouseDown:kn(e.onMouseDown,()=>{Se.current=!0}),onFocus:kn(e.onFocus,Qe=>{const be=!Se.current;if(Qe.target===Qe.currentTarget&&be&&!W){const Ge=new CustomEvent(r_,tD);if(Qe.currentTarget.dispatchEvent(Ge),!Ge.defaultPrevented){const le=de().filter(ut=>ut.focusable),ge=le.find(ut=>ut.active),Pe=le.find(ut=>ut.id===z),pt=[ge,Pe,...le].filter(Boolean).map(ut=>ut.ref.current);uE(pt,I)}}Se.current=!1}),onBlur:kn(e.onBlur,()=>ne(!1))})})}),cE="RovingFocusGroupItem",AE=te.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:i,focusable:l=!0,active:h=!1,tabStopId:f,children:m,...a}=e,x=Cy(),S=f||x,I=sD(cE,i),U=I.currentTabStopId===S,Q=oE(i),{onFocusableItemAdd:P,onFocusableItemRemove:$,currentTabStopId:z}=I;return te.useEffect(()=>{if(l)return P(),()=>$()},[l,P,$]),oe.jsx(b1.ItemSlot,{scope:i,id:S,focusable:l,active:h,children:oe.jsx(si.span,{tabIndex:U?0:-1,"data-orientation":I.orientation,...a,ref:n,onMouseDown:kn(e.onMouseDown,O=>{l?I.onItemFocus(S):O.preventDefault()}),onFocus:kn(e.onFocus,()=>I.onItemFocus(S)),onKeyDown:kn(e.onKeyDown,O=>{if(O.key==="Tab"&&O.shiftKey){I.onItemShiftTab();return}if(O.target!==O.currentTarget)return;const W=cD(O,I.orientation,I.dir);if(W!==void 0){if(O.metaKey||O.ctrlKey||O.altKey||O.shiftKey)return;O.preventDefault();let ce=Q().filter(de=>de.focusable).map(de=>de.ref.current);if(W==="last")ce.reverse();else if(W==="prev"||W==="next"){W==="prev"&&ce.reverse();const de=ce.indexOf(O.currentTarget);ce=I.loop?AD(ce,de+1):ce.slice(de+1)}setTimeout(()=>uE(ce))}}),children:typeof m=="function"?m({isCurrentTabStop:U,hasTabStop:z!=null}):m})})});AE.displayName=cE;var aD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lD(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function cD(e,n,i){const l=lD(e.key,i);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return aD[l]}function uE(e,n=!1){const i=document.activeElement;for(const l of e)if(l===i||(l.focus({preventScroll:n}),document.activeElement!==i))return}function AD(e,n){return e.map((i,l)=>e[(n+l)%e.length])}var uD=lE,hD=AE;function zw(e){const n=te.useRef({value:e,previous:e});return te.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}var Hw="Radio",[fD,hE]=Nh(Hw),[dD,pD]=fD(Hw),fE=te.forwardRef((e,n)=>{const{__scopeRadio:i,name:l,checked:h=!1,required:f,disabled:m,value:a="on",onCheck:x,form:S,...I}=e,[U,Q]=te.useState(null),P=us(n,O=>Q(O)),$=te.useRef(!1),z=U?S||!!U.closest("form"):!0;return oe.jsxs(dD,{scope:i,checked:h,disabled:m,children:[oe.jsx(si.button,{type:"button",role:"radio","aria-checked":h,"data-state":gE(h),"data-disabled":m?"":void 0,disabled:m,value:a,...I,ref:P,onClick:kn(e.onClick,O=>{h||x?.(),z&&($.current=O.isPropagationStopped(),$.current||O.stopPropagation())})}),z&&oe.jsx(mE,{control:U,bubbles:!$.current,name:l,value:a,checked:h,required:f,disabled:m,form:S,style:{transform:"translateX(-100%)"}})]})});fE.displayName=Hw;var dE="RadioIndicator",pE=te.forwardRef((e,n)=>{const{__scopeRadio:i,forceMount:l,...h}=e,f=pD(dE,i);return oe.jsx(Hm,{present:l||f.checked,children:oe.jsx(si.span,{"data-state":gE(f.checked),"data-disabled":f.disabled?"":void 0,...h,ref:n})})});pE.displayName=dE;var mD="RadioBubbleInput",mE=te.forwardRef(({__scopeRadio:e,control:n,checked:i,bubbles:l=!0,...h},f)=>{const m=te.useRef(null),a=us(m,f),x=zw(i),S=Pw(n);return te.useEffect(()=>{const I=m.current;if(!I)return;const U=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(U,"checked").set;if(x!==i&&P){const $=new Event("click",{bubbles:l});P.call(I,i),I.dispatchEvent($)}},[x,i,l]),oe.jsx(si.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...h,tabIndex:-1,ref:a,style:{...h.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});mE.displayName=mD;function gE(e){return e?"checked":"unchecked"}var gD=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Dy="RadioGroup",[yD]=Nh(Dy,[aE,hE]),yE=aE(),vE=hE(),[vD,_D]=yD(Dy),_E=te.forwardRef((e,n)=>{const{__scopeRadioGroup:i,name:l,defaultValue:h,value:f,required:m=!1,disabled:a=!1,orientation:x,dir:S,loop:I=!0,onValueChange:U,...Q}=e,P=yE(i),$=Ow(S),[z,O]=fp({prop:f,defaultProp:h??null,onChange:U,caller:Dy});return oe.jsx(vD,{scope:i,name:l,required:m,disabled:a,value:z,onValueChange:O,children:oe.jsx(uD,{asChild:!0,...P,orientation:x,dir:$,loop:I,children:oe.jsx(si.div,{role:"radiogroup","aria-required":m,"aria-orientation":x,"data-disabled":a?"":void 0,dir:$,...Q,ref:n})})})});_E.displayName=Dy;var wE="RadioGroupItem",xE=te.forwardRef((e,n)=>{const{__scopeRadioGroup:i,disabled:l,...h}=e,f=_D(wE,i),m=f.disabled||l,a=yE(i),x=vE(i),S=te.useRef(null),I=us(n,S),U=f.value===h.value,Q=te.useRef(!1);return te.useEffect(()=>{const P=z=>{gD.includes(z.key)&&(Q.current=!0)},$=()=>Q.current=!1;return document.addEventListener("keydown",P),document.addEventListener("keyup",$),()=>{document.removeEventListener("keydown",P),document.removeEventListener("keyup",$)}},[]),oe.jsx(hD,{asChild:!0,...a,focusable:!m,active:U,children:oe.jsx(fE,{disabled:m,required:f.required,checked:U,...x,...h,name:f.name,ref:I,onCheck:()=>f.onValueChange(h.value),onKeyDown:kn(P=>{P.key==="Enter"&&P.preventDefault()}),onFocus:kn(h.onFocus,()=>{Q.current&&S.current?.click()})})})});xE.displayName=wE;var wD="RadioGroupIndicator",bE=te.forwardRef((e,n)=>{const{__scopeRadioGroup:i,...l}=e,h=vE(i);return oe.jsx(pE,{...h,...l,ref:n})});bE.displayName=wD;var BE=_E,CE=xE,xD=bE;const B1=te.forwardRef(({className:e,...n},i)=>oe.jsx(BE,{className:Pi("grid gap-2",e),...n,ref:i}));B1.displayName=BE.displayName;const Zd=te.forwardRef(({className:e,...n},i)=>oe.jsx(CE,{ref:i,className:Pi("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:oe.jsx(xD,{className:"flex items-center justify-center",children:oe.jsx(nP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Zd.displayName=CE.displayName;var bD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],BD=bD.reduce((e,n)=>{const i=sE(`Primitive.${n}`),l=te.forwardRef((h,f)=>{const{asChild:m,...a}=h,x=m?i:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),oe.jsx(x,{...a,ref:f})});return l.displayName=`Primitive.${n}`,{...e,[n]:l}},{}),CD="Label",SE=te.forwardRef((e,n)=>oe.jsx(BD.label,{...e,ref:n,onMouseDown:i=>{i.target.closest("button, input, select, textarea")||(e.onMouseDown?.(i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));SE.displayName=CD;var EE=SE;const SD=By("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rf=te.forwardRef(({className:e,...n},i)=>oe.jsx(EE,{ref:i,className:Pi(SD(),e),...n}));rf.displayName=EE.displayName;function T2(e,[n,i]){return Math.min(i,Math.max(n,e))}var n_=0;function ED(){te.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??P2()),document.body.insertAdjacentElement("beforeend",e[1]??P2()),n_++,()=>{n_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),n_--}},[])}function P2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var i_="focusScope.autoFocusOnMount",s_="focusScope.autoFocusOnUnmount",L2={bubbles:!1,cancelable:!0},FD="FocusScope",FE=te.forwardRef((e,n)=>{const{loop:i=!1,trapped:l=!1,onMountAutoFocus:h,onUnmountAutoFocus:f,...m}=e,[a,x]=te.useState(null),S=JA(h),I=JA(f),U=te.useRef(null),Q=us(n,z=>x(z)),P=te.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;te.useEffect(()=>{if(l){let z=function(ce){if(P.paused||!a)return;const de=ce.target;a.contains(de)?U.current=de:nf(U.current,{select:!0})},O=function(ce){if(P.paused||!a)return;const de=ce.relatedTarget;de!==null&&(a.contains(de)||nf(U.current,{select:!0}))},W=function(ce){if(document.activeElement===document.body)for(const Se of ce)Se.removedNodes.length>0&&nf(a)};document.addEventListener("focusin",z),document.addEventListener("focusout",O);const ne=new MutationObserver(W);return a&&ne.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",z),document.removeEventListener("focusout",O),ne.disconnect()}}},[l,a,P.paused]),te.useEffect(()=>{if(a){k2.add(P);const z=document.activeElement;if(!a.contains(z)){const W=new CustomEvent(i_,L2);a.addEventListener(i_,S),a.dispatchEvent(W),W.defaultPrevented||(ID(kD(IE(a)),{select:!0}),document.activeElement===z&&nf(a))}return()=>{a.removeEventListener(i_,S),setTimeout(()=>{const W=new CustomEvent(s_,L2);a.addEventListener(s_,I),a.dispatchEvent(W),W.defaultPrevented||nf(z??document.body,{select:!0}),a.removeEventListener(s_,I),k2.remove(P)},0)}}},[a,S,I,P]);const $=te.useCallback(z=>{if(!i&&!l||P.paused)return;const O=z.key==="Tab"&&!z.altKey&&!z.ctrlKey&&!z.metaKey,W=document.activeElement;if(O&&W){const ne=z.currentTarget,[ce,de]=TD(ne);ce&&de?!z.shiftKey&&W===de?(z.preventDefault(),i&&nf(ce,{select:!0})):z.shiftKey&&W===ce&&(z.preventDefault(),i&&nf(de,{select:!0})):W===ne&&z.preventDefault()}},[i,l,P.paused]);return oe.jsx(si.div,{tabIndex:-1,...m,ref:Q,onKeyDown:$})});FE.displayName=FD;function ID(e,{select:n=!1}={}){const i=document.activeElement;for(const l of e)if(nf(l,{select:n}),document.activeElement!==i)return}function TD(e){const n=IE(e),i=M2(n,e),l=M2(n.reverse(),e);return[i,l]}function IE(e){const n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const h=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||h?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function M2(e,n){for(const i of e)if(!PD(i,{upTo:n}))return i}function PD(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function LD(e){return e instanceof HTMLInputElement&&"select"in e}function nf(e,{select:n=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&LD(e)&&n&&e.select()}}var k2=MD();function MD(){let e=[];return{add(n){const i=e[0];n!==i&&i?.pause(),e=U2(e,n),e.unshift(n)},remove(n){e=U2(e,n),e[0]?.resume()}}}function U2(e,n){const i=[...e],l=i.indexOf(n);return l!==-1&&i.splice(l,1),i}function kD(e){return e.filter(n=>n.tagName!=="A")}function UD(e){const n=DD(e),i=te.forwardRef((l,h)=>{const{children:f,...m}=l,a=te.Children.toArray(f),x=a.find(ND);if(x){const S=x.props.children,I=a.map(U=>U===x?te.Children.count(S)>1?te.Children.only(null):te.isValidElement(S)?S.props.children:null:U);return oe.jsx(n,{...m,ref:h,children:te.isValidElement(S)?te.cloneElement(S,void 0,I):null})}return oe.jsx(n,{...m,ref:h,children:f})});return i.displayName=`${e}.Slot`,i}function DD(e){const n=te.forwardRef((i,l)=>{const{children:h,...f}=i;if(te.isValidElement(h)){const m=OD(h),a=QD(f,h.props);return h.type!==te.Fragment&&(a.ref=l?zm(l,m):m),te.cloneElement(h,a)}return te.Children.count(h)>1?te.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var RD=Symbol("radix.slottable");function ND(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===RD}function QD(e,n){const i={...n};for(const l in n){const h=e[l],f=n[l];/^on[A-Z]/.test(l)?h&&f?i[l]=(...a)=>{const x=f(...a);return h(...a),x}:h&&(i[l]=h):l==="style"?i[l]={...h,...f}:l==="className"&&(i[l]=[h,f].filter(Boolean).join(" "))}return{...e,...i}}function OD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var zD=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Nd=new WeakMap,Hg=new WeakMap,jg={},o_=0,TE=function(e){return e&&(e.host||TE(e.parentNode))},HD=function(e,n){return n.map(function(i){if(e.contains(i))return i;var l=TE(i);return l&&e.contains(l)?l:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},jD=function(e,n,i,l){var h=HD(n,Array.isArray(e)?e:[e]);jg[i]||(jg[i]=new WeakMap);var f=jg[i],m=[],a=new Set,x=new Set(h),S=function(U){!U||a.has(U)||(a.add(U),S(U.parentNode))};h.forEach(S);var I=function(U){!U||x.has(U)||Array.prototype.forEach.call(U.children,function(Q){if(a.has(Q))I(Q);else try{var P=Q.getAttribute(l),$=P!==null&&P!=="false",z=(Nd.get(Q)||0)+1,O=(f.get(Q)||0)+1;Nd.set(Q,z),f.set(Q,O),m.push(Q),z===1&&$&&Hg.set(Q,!0),O===1&&Q.setAttribute(i,"true"),$||Q.setAttribute(l,"true")}catch(W){console.error("aria-hidden: cannot operate on ",Q,W)}})};return I(n),a.clear(),o_++,function(){m.forEach(function(U){var Q=Nd.get(U)-1,P=f.get(U)-1;Nd.set(U,Q),f.set(U,P),Q||(Hg.has(U)||U.removeAttribute(l),Hg.delete(U)),P||U.removeAttribute(i)}),o_--,o_||(Nd=new WeakMap,Nd=new WeakMap,Hg=new WeakMap,jg={})}},VD=function(e,n,i){i===void 0&&(i="data-aria-hidden");var l=Array.from(Array.isArray(e)?e:[e]),h=zD(e);return h?(l.push.apply(l,Array.from(h.querySelectorAll("[aria-live], script"))),jD(l,h,i,"aria-hidden")):function(){return null}},Wu=function(){return Wu=Object.assign||function(n){for(var i,l=1,h=arguments.length;l<h;l++){i=arguments[l];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(n[f]=i[f])}return n},Wu.apply(this,arguments)};function PE(e,n){var i={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(i[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(e);h<l.length;h++)n.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(e,l[h])&&(i[l[h]]=e[l[h]]);return i}function GD(e,n,i){if(i||arguments.length===2)for(var l=0,h=n.length,f;l<h;l++)(f||!(l in n))&&(f||(f=Array.prototype.slice.call(n,0,l)),f[l]=n[l]);return e.concat(f||Array.prototype.slice.call(n))}var T0="right-scroll-bar-position",P0="width-before-scroll-bar",KD="with-scroll-bars-hidden",qD="--removed-body-scroll-bar-size";function a_(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function $D(e,n){var i=te.useState(function(){return{value:e,callback:n,facade:{get current(){return i.value},set current(l){var h=i.value;h!==l&&(i.value=l,i.callback(l,h))}}}})[0];return i.callback=n,i.facade}var WD=typeof window<"u"?te.useLayoutEffect:te.useEffect,D2=new WeakMap;function ZD(e,n){var i=$D(null,function(l){return e.forEach(function(h){return a_(h,l)})});return WD(function(){var l=D2.get(i);if(l){var h=new Set(l),f=new Set(e),m=i.current;h.forEach(function(a){f.has(a)||a_(a,null)}),f.forEach(function(a){h.has(a)||a_(a,m)})}D2.set(i,e)},[e]),i}function XD(e){return e}function YD(e,n){n===void 0&&(n=XD);var i=[],l=!1,h={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(f){var m=n(f,l);return i.push(m),function(){i=i.filter(function(a){return a!==m})}},assignSyncMedium:function(f){for(l=!0;i.length;){var m=i;i=[],m.forEach(f)}i={push:function(a){return f(a)},filter:function(){return i}}},assignMedium:function(f){l=!0;var m=[];if(i.length){var a=i;i=[],a.forEach(f),m=i}var x=function(){var I=m;m=[],I.forEach(f)},S=function(){return Promise.resolve().then(x)};S(),i={push:function(I){m.push(I),S()},filter:function(I){return m=m.filter(I),i}}}};return h}function JD(e){e===void 0&&(e={});var n=YD(null);return n.options=Wu({async:!0,ssr:!1},e),n}var LE=function(e){var n=e.sideCar,i=PE(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=n.read();if(!l)throw new Error("Sidecar medium not found");return te.createElement(l,Wu({},i))};LE.isSideCarExport=!0;function eR(e,n){return e.useMedium(n),LE}var ME=JD(),l_=function(){},Ry=te.forwardRef(function(e,n){var i=te.useRef(null),l=te.useState({onScrollCapture:l_,onWheelCapture:l_,onTouchMoveCapture:l_}),h=l[0],f=l[1],m=e.forwardProps,a=e.children,x=e.className,S=e.removeScrollBar,I=e.enabled,U=e.shards,Q=e.sideCar,P=e.noRelative,$=e.noIsolation,z=e.inert,O=e.allowPinchZoom,W=e.as,ne=W===void 0?"div":W,ce=e.gapMode,de=PE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Se=Q,ze=ZD([i,n]),Ze=Wu(Wu({},de),h);return te.createElement(te.Fragment,null,I&&te.createElement(Se,{sideCar:ME,removeScrollBar:S,shards:U,noRelative:P,noIsolation:$,inert:z,setCallbacks:f,allowPinchZoom:!!O,lockRef:i,gapMode:ce}),m?te.cloneElement(te.Children.only(a),Wu(Wu({},Ze),{ref:ze})):te.createElement(ne,Wu({},Ze,{className:x,ref:ze}),a))});Ry.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ry.classNames={fullWidth:P0,zeroRight:T0};var tR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=tR();return n&&e.setAttribute("nonce",n),e}function nR(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function iR(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var sR=function(){var e=0,n=null;return{add:function(i){e==0&&(n=rR())&&(nR(n,i),iR(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},oR=function(){var e=sR();return function(n,i){te.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&i])}},kE=function(){var e=oR(),n=function(i){var l=i.styles,h=i.dynamic;return e(l,h),null};return n},aR={left:0,top:0,right:0,gap:0},c_=function(e){return parseInt(e||"",10)||0},lR=function(e){var n=window.getComputedStyle(document.body),i=n[e==="padding"?"paddingLeft":"marginLeft"],l=n[e==="padding"?"paddingTop":"marginTop"],h=n[e==="padding"?"paddingRight":"marginRight"];return[c_(i),c_(l),c_(h)]},cR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return aR;var n=lR(e),i=document.documentElement.clientWidth,l=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,l-i+n[2]-n[0])}},AR=kE(),op="data-scroll-locked",uR=function(e,n,i,l){var h=e.left,f=e.top,m=e.right,a=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(KD,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(a,"px ").concat(l,`;
  }
  body[`).concat(op,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(l,";"),i==="margin"&&`
    padding-left: `.concat(h,`px;
    padding-top: `).concat(f,`px;
    padding-right: `).concat(m,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(l,`;
    `),i==="padding"&&"padding-right: ".concat(a,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(T0,` {
    right: `).concat(a,"px ").concat(l,`;
  }
  
  .`).concat(P0,` {
    margin-right: `).concat(a,"px ").concat(l,`;
  }
  
  .`).concat(T0," .").concat(T0,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(P0," .").concat(P0,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(op,`] {
    `).concat(qD,": ").concat(a,`px;
  }
`)},R2=function(){var e=parseInt(document.body.getAttribute(op)||"0",10);return isFinite(e)?e:0},hR=function(){te.useEffect(function(){return document.body.setAttribute(op,(R2()+1).toString()),function(){var e=R2()-1;e<=0?document.body.removeAttribute(op):document.body.setAttribute(op,e.toString())}},[])},fR=function(e){var n=e.noRelative,i=e.noImportant,l=e.gapMode,h=l===void 0?"margin":l;hR();var f=te.useMemo(function(){return cR(h)},[h]);return te.createElement(AR,{styles:uR(f,!n,h,i?"":"!important")})},C1=!1;if(typeof window<"u")try{var Vg=Object.defineProperty({},"passive",{get:function(){return C1=!0,!0}});window.addEventListener("test",Vg,Vg),window.removeEventListener("test",Vg,Vg)}catch{C1=!1}var Qd=C1?{passive:!1}:!1,dR=function(e){return e.tagName==="TEXTAREA"},UE=function(e,n){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[n]!=="hidden"&&!(i.overflowY===i.overflowX&&!dR(e)&&i[n]==="visible")},pR=function(e){return UE(e,"overflowY")},mR=function(e){return UE(e,"overflowX")},N2=function(e,n){var i=n.ownerDocument,l=n;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var h=DE(e,l);if(h){var f=RE(e,l),m=f[1],a=f[2];if(m>a)return!0}l=l.parentNode}while(l&&l!==i.body);return!1},gR=function(e){var n=e.scrollTop,i=e.scrollHeight,l=e.clientHeight;return[n,i,l]},yR=function(e){var n=e.scrollLeft,i=e.scrollWidth,l=e.clientWidth;return[n,i,l]},DE=function(e,n){return e==="v"?pR(n):mR(n)},RE=function(e,n){return e==="v"?gR(n):yR(n)},vR=function(e,n){return e==="h"&&n==="rtl"?-1:1},_R=function(e,n,i,l,h){var f=vR(e,window.getComputedStyle(n).direction),m=f*l,a=i.target,x=n.contains(a),S=!1,I=m>0,U=0,Q=0;do{if(!a)break;var P=RE(e,a),$=P[0],z=P[1],O=P[2],W=z-O-f*$;($||W)&&DE(e,a)&&(U+=W,Q+=$);var ne=a.parentNode;a=ne&&ne.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ne.host:ne}while(!x&&a!==document.body||x&&(n.contains(a)||n===a));return(I&&Math.abs(U)<1||!I&&Math.abs(Q)<1)&&(S=!0),S},Gg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Q2=function(e){return[e.deltaX,e.deltaY]},O2=function(e){return e&&"current"in e?e.current:e},wR=function(e,n){return e[0]===n[0]&&e[1]===n[1]},xR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},bR=0,Od=[];function BR(e){var n=te.useRef([]),i=te.useRef([0,0]),l=te.useRef(),h=te.useState(bR++)[0],f=te.useState(kE)[0],m=te.useRef(e);te.useEffect(function(){m.current=e},[e]),te.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(h));var z=GD([e.lockRef.current],(e.shards||[]).map(O2),!0).filter(Boolean);return z.forEach(function(O){return O.classList.add("allow-interactivity-".concat(h))}),function(){document.body.classList.remove("block-interactivity-".concat(h)),z.forEach(function(O){return O.classList.remove("allow-interactivity-".concat(h))})}}},[e.inert,e.lockRef.current,e.shards]);var a=te.useCallback(function(z,O){if("touches"in z&&z.touches.length===2||z.type==="wheel"&&z.ctrlKey)return!m.current.allowPinchZoom;var W=Gg(z),ne=i.current,ce="deltaX"in z?z.deltaX:ne[0]-W[0],de="deltaY"in z?z.deltaY:ne[1]-W[1],Se,ze=z.target,Ze=Math.abs(ce)>Math.abs(de)?"h":"v";if("touches"in z&&Ze==="h"&&ze.type==="range")return!1;var Qe=window.getSelection(),be=Qe&&Qe.anchorNode,Ge=be?be===ze||be.contains(ze):!1;if(Ge)return!1;var le=N2(Ze,ze);if(!le)return!0;if(le?Se=Ze:(Se=Ze==="v"?"h":"v",le=N2(Ze,ze)),!le)return!1;if(!l.current&&"changedTouches"in z&&(ce||de)&&(l.current=Se),!Se)return!0;var ge=l.current||Se;return _R(ge,O,z,ge==="h"?ce:de)},[]),x=te.useCallback(function(z){var O=z;if(!(!Od.length||Od[Od.length-1]!==f)){var W="deltaY"in O?Q2(O):Gg(O),ne=n.current.filter(function(Se){return Se.name===O.type&&(Se.target===O.target||O.target===Se.shadowParent)&&wR(Se.delta,W)})[0];if(ne&&ne.should){O.cancelable&&O.preventDefault();return}if(!ne){var ce=(m.current.shards||[]).map(O2).filter(Boolean).filter(function(Se){return Se.contains(O.target)}),de=ce.length>0?a(O,ce[0]):!m.current.noIsolation;de&&O.cancelable&&O.preventDefault()}}},[]),S=te.useCallback(function(z,O,W,ne){var ce={name:z,delta:O,target:W,should:ne,shadowParent:CR(W)};n.current.push(ce),setTimeout(function(){n.current=n.current.filter(function(de){return de!==ce})},1)},[]),I=te.useCallback(function(z){i.current=Gg(z),l.current=void 0},[]),U=te.useCallback(function(z){S(z.type,Q2(z),z.target,a(z,e.lockRef.current))},[]),Q=te.useCallback(function(z){S(z.type,Gg(z),z.target,a(z,e.lockRef.current))},[]);te.useEffect(function(){return Od.push(f),e.setCallbacks({onScrollCapture:U,onWheelCapture:U,onTouchMoveCapture:Q}),document.addEventListener("wheel",x,Qd),document.addEventListener("touchmove",x,Qd),document.addEventListener("touchstart",I,Qd),function(){Od=Od.filter(function(z){return z!==f}),document.removeEventListener("wheel",x,Qd),document.removeEventListener("touchmove",x,Qd),document.removeEventListener("touchstart",I,Qd)}},[]);var P=e.removeScrollBar,$=e.inert;return te.createElement(te.Fragment,null,$?te.createElement(f,{styles:xR(h)}):null,P?te.createElement(fR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function CR(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const SR=eR(ME,BR);var NE=te.forwardRef(function(e,n){return te.createElement(Ry,Wu({},e,{ref:n,sideCar:SR}))});NE.classNames=Ry.classNames;var ER=[" ","Enter","ArrowUp","ArrowDown"],FR=[" ","Enter"],rd="Select",[Ny,Qy,IR]=yw(rd),[bp]=Nh(rd,[IR,Ty]),Oy=Ty(),[TR,wf]=bp(rd),[PR,LR]=bp(rd),QE=e=>{const{__scopeSelect:n,children:i,open:l,defaultOpen:h,onOpenChange:f,value:m,defaultValue:a,onValueChange:x,dir:S,name:I,autoComplete:U,disabled:Q,required:P,form:$}=e,z=Oy(n),[O,W]=te.useState(null),[ne,ce]=te.useState(null),[de,Se]=te.useState(!1),ze=Ow(S),[Ze,Qe]=fp({prop:l,defaultProp:h??!1,onChange:f,caller:rd}),[be,Ge]=fp({prop:m,defaultProp:a,onChange:x,caller:rd}),le=te.useRef(null),ge=O?$||!!O.closest("form"):!0,[Pe,Fe]=te.useState(new Set),pt=Array.from(Pe).map(ut=>ut.props.value).join(";");return oe.jsx(jM,{...z,children:oe.jsxs(TR,{required:P,scope:n,trigger:O,onTriggerChange:W,valueNode:ne,onValueNodeChange:ce,valueNodeHasChildren:de,onValueNodeHasChildrenChange:Se,contentId:Cy(),value:be,onValueChange:Ge,open:Ze,onOpenChange:Qe,dir:ze,triggerPointerDownPosRef:le,disabled:Q,children:[oe.jsx(Ny.Provider,{scope:n,children:oe.jsx(PR,{scope:e.__scopeSelect,onNativeOptionAdd:te.useCallback(ut=>{Fe(At=>new Set(At).add(ut))},[]),onNativeOptionRemove:te.useCallback(ut=>{Fe(At=>{const Ne=new Set(At);return Ne.delete(ut),Ne})},[]),children:i})}),ge?oe.jsxs(cF,{"aria-hidden":!0,required:P,tabIndex:-1,name:I,autoComplete:U,value:be,onChange:ut=>Ge(ut.target.value),disabled:Q,form:$,children:[be===void 0?oe.jsx("option",{value:""}):null,Array.from(Pe)]},pt):null]})})};QE.displayName=rd;var OE="SelectTrigger",zE=te.forwardRef((e,n)=>{const{__scopeSelect:i,disabled:l=!1,...h}=e,f=Oy(i),m=wf(OE,i),a=m.disabled||l,x=us(n,m.onTriggerChange),S=Qy(i),I=te.useRef("touch"),[U,Q,P]=uF(z=>{const O=S().filter(ce=>!ce.disabled),W=O.find(ce=>ce.value===m.value),ne=hF(O,z,W);ne!==void 0&&m.onValueChange(ne.value)}),$=z=>{a||(m.onOpenChange(!0),P()),z&&(m.triggerPointerDownPosRef.current={x:Math.round(z.pageX),y:Math.round(z.pageY)})};return oe.jsx(TS,{asChild:!0,...f,children:oe.jsx(si.button,{type:"button",role:"combobox","aria-controls":m.contentId,"aria-expanded":m.open,"aria-required":m.required,"aria-autocomplete":"none",dir:m.dir,"data-state":m.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":AF(m.value)?"":void 0,...h,ref:x,onClick:kn(h.onClick,z=>{z.currentTarget.focus(),I.current!=="mouse"&&$(z)}),onPointerDown:kn(h.onPointerDown,z=>{I.current=z.pointerType;const O=z.target;O.hasPointerCapture(z.pointerId)&&O.releasePointerCapture(z.pointerId),z.button===0&&z.ctrlKey===!1&&z.pointerType==="mouse"&&($(z),z.preventDefault())}),onKeyDown:kn(h.onKeyDown,z=>{const O=U.current!=="";!(z.ctrlKey||z.altKey||z.metaKey)&&z.key.length===1&&Q(z.key),!(O&&z.key===" ")&&ER.includes(z.key)&&($(),z.preventDefault())})})})});zE.displayName=OE;var HE="SelectValue",jE=te.forwardRef((e,n)=>{const{__scopeSelect:i,className:l,style:h,children:f,placeholder:m="",...a}=e,x=wf(HE,i),{onValueNodeHasChildrenChange:S}=x,I=f!==void 0,U=us(n,x.onValueNodeChange);return wl(()=>{S(I)},[S,I]),oe.jsx(si.span,{...a,ref:U,style:{pointerEvents:"none"},children:AF(x.value)?oe.jsx(oe.Fragment,{children:m}):f})});jE.displayName=HE;var MR="SelectIcon",VE=te.forwardRef((e,n)=>{const{__scopeSelect:i,children:l,...h}=e;return oe.jsx(si.span,{"aria-hidden":!0,...h,ref:n,children:l||""})});VE.displayName=MR;var kR="SelectPortal",GE=e=>oe.jsx(vw,{asChild:!0,...e});GE.displayName=kR;var nd="SelectContent",KE=te.forwardRef((e,n)=>{const i=wf(nd,e.__scopeSelect),[l,h]=te.useState();if(wl(()=>{h(new DocumentFragment)},[]),!i.open){const f=l;return f?yp.createPortal(oe.jsx(qE,{scope:e.__scopeSelect,children:oe.jsx(Ny.Slot,{scope:e.__scopeSelect,children:oe.jsx("div",{children:e.children})})}),f):null}return oe.jsx($E,{...e,ref:n})});KE.displayName=nd;var xu=10,[qE,xf]=bp(nd),UR="SelectContentImpl",DR=UD("SelectContent.RemoveScroll"),$E=te.forwardRef((e,n)=>{const{__scopeSelect:i,position:l="item-aligned",onCloseAutoFocus:h,onEscapeKeyDown:f,onPointerDownOutside:m,side:a,sideOffset:x,align:S,alignOffset:I,arrowPadding:U,collisionBoundary:Q,collisionPadding:P,sticky:$,hideWhenDetached:z,avoidCollisions:O,...W}=e,ne=wf(nd,i),[ce,de]=te.useState(null),[Se,ze]=te.useState(null),Ze=us(n,tt=>de(tt)),[Qe,be]=te.useState(null),[Ge,le]=te.useState(null),ge=Qy(i),[Pe,Fe]=te.useState(!1),pt=te.useRef(!1);te.useEffect(()=>{if(ce)return VD(ce)},[ce]),ED();const ut=te.useCallback(tt=>{const[wt,...Et]=ge().map(lr=>lr.ref.current),[Pt]=Et.slice(-1),Wt=document.activeElement;for(const lr of tt)if(lr===Wt||(lr?.scrollIntoView({block:"nearest"}),lr===wt&&Se&&(Se.scrollTop=0),lr===Pt&&Se&&(Se.scrollTop=Se.scrollHeight),lr?.focus(),document.activeElement!==Wt))return},[ge,Se]),At=te.useCallback(()=>ut([Qe,ce]),[ut,Qe,ce]);te.useEffect(()=>{Pe&&At()},[Pe,At]);const{onOpenChange:Ne,triggerPointerDownPosRef:Ie}=ne;te.useEffect(()=>{if(ce){let tt={x:0,y:0};const wt=Pt=>{tt={x:Math.abs(Math.round(Pt.pageX)-(Ie.current?.x??0)),y:Math.abs(Math.round(Pt.pageY)-(Ie.current?.y??0))}},Et=Pt=>{tt.x<=10&&tt.y<=10?Pt.preventDefault():ce.contains(Pt.target)||Ne(!1),document.removeEventListener("pointermove",wt),Ie.current=null};return Ie.current!==null&&(document.addEventListener("pointermove",wt),document.addEventListener("pointerup",Et,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",wt),document.removeEventListener("pointerup",Et,{capture:!0})}}},[ce,Ne,Ie]),te.useEffect(()=>{const tt=()=>Ne(!1);return window.addEventListener("blur",tt),window.addEventListener("resize",tt),()=>{window.removeEventListener("blur",tt),window.removeEventListener("resize",tt)}},[Ne]);const[yt,Ue]=uF(tt=>{const wt=ge().filter(Wt=>!Wt.disabled),Et=wt.find(Wt=>Wt.ref.current===document.activeElement),Pt=hF(wt,tt,Et);Pt&&setTimeout(()=>Pt.ref.current.focus())}),ie=te.useCallback((tt,wt,Et)=>{const Pt=!pt.current&&!Et;(ne.value!==void 0&&ne.value===wt||Pt)&&(be(tt),Pt&&(pt.current=!0))},[ne.value]),Ee=te.useCallback(()=>ce?.focus(),[ce]),De=te.useCallback((tt,wt,Et)=>{const Pt=!pt.current&&!Et;(ne.value!==void 0&&ne.value===wt||Pt)&&le(tt)},[ne.value]),Ye=l==="popper"?S1:WE,at=Ye===S1?{side:a,sideOffset:x,align:S,alignOffset:I,arrowPadding:U,collisionBoundary:Q,collisionPadding:P,sticky:$,hideWhenDetached:z,avoidCollisions:O}:{};return oe.jsx(qE,{scope:i,content:ce,viewport:Se,onViewportChange:ze,itemRefCallback:ie,selectedItem:Qe,onItemLeave:Ee,itemTextRefCallback:De,focusSelectedItem:At,selectedItemText:Ge,position:l,isPositioned:Pe,searchRef:yt,children:oe.jsx(NE,{as:DR,allowPinchZoom:!0,children:oe.jsx(FE,{asChild:!0,trapped:ne.open,onMountAutoFocus:tt=>{tt.preventDefault()},onUnmountAutoFocus:kn(h,tt=>{ne.trigger?.focus({preventScroll:!0}),tt.preventDefault()}),children:oe.jsx(wy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:tt=>tt.preventDefault(),onDismiss:()=>ne.onOpenChange(!1),children:oe.jsx(Ye,{role:"listbox",id:ne.contentId,"data-state":ne.open?"open":"closed",dir:ne.dir,onContextMenu:tt=>tt.preventDefault(),...W,...at,onPlaced:()=>Fe(!0),ref:Ze,style:{display:"flex",flexDirection:"column",outline:"none",...W.style},onKeyDown:kn(W.onKeyDown,tt=>{const wt=tt.ctrlKey||tt.altKey||tt.metaKey;if(tt.key==="Tab"&&tt.preventDefault(),!wt&&tt.key.length===1&&Ue(tt.key),["ArrowUp","ArrowDown","Home","End"].includes(tt.key)){let Pt=ge().filter(Wt=>!Wt.disabled).map(Wt=>Wt.ref.current);if(["ArrowUp","End"].includes(tt.key)&&(Pt=Pt.slice().reverse()),["ArrowUp","ArrowDown"].includes(tt.key)){const Wt=tt.target,lr=Pt.indexOf(Wt);Pt=Pt.slice(lr+1)}setTimeout(()=>ut(Pt)),tt.preventDefault()}})})})})})})});$E.displayName=UR;var RR="SelectItemAlignedPosition",WE=te.forwardRef((e,n)=>{const{__scopeSelect:i,onPlaced:l,...h}=e,f=wf(nd,i),m=xf(nd,i),[a,x]=te.useState(null),[S,I]=te.useState(null),U=us(n,Ze=>I(Ze)),Q=Qy(i),P=te.useRef(!1),$=te.useRef(!0),{viewport:z,selectedItem:O,selectedItemText:W,focusSelectedItem:ne}=m,ce=te.useCallback(()=>{if(f.trigger&&f.valueNode&&a&&S&&z&&O&&W){const Ze=f.trigger.getBoundingClientRect(),Qe=S.getBoundingClientRect(),be=f.valueNode.getBoundingClientRect(),Ge=W.getBoundingClientRect();if(f.dir!=="rtl"){const Wt=Ge.left-Qe.left,lr=be.left-Wt,fr=Ze.left-lr,Br=Ze.width+fr,He=Math.max(Br,Qe.width),yr=window.innerWidth-xu,kr=T2(lr,[xu,Math.max(xu,yr-He)]);a.style.minWidth=Br+"px",a.style.left=kr+"px"}else{const Wt=Qe.right-Ge.right,lr=window.innerWidth-be.right-Wt,fr=window.innerWidth-Ze.right-lr,Br=Ze.width+fr,He=Math.max(Br,Qe.width),yr=window.innerWidth-xu,kr=T2(lr,[xu,Math.max(xu,yr-He)]);a.style.minWidth=Br+"px",a.style.right=kr+"px"}const le=Q(),ge=window.innerHeight-xu*2,Pe=z.scrollHeight,Fe=window.getComputedStyle(S),pt=parseInt(Fe.borderTopWidth,10),ut=parseInt(Fe.paddingTop,10),At=parseInt(Fe.borderBottomWidth,10),Ne=parseInt(Fe.paddingBottom,10),Ie=pt+ut+Pe+Ne+At,yt=Math.min(O.offsetHeight*5,Ie),Ue=window.getComputedStyle(z),ie=parseInt(Ue.paddingTop,10),Ee=parseInt(Ue.paddingBottom,10),De=Ze.top+Ze.height/2-xu,Ye=ge-De,at=O.offsetHeight/2,tt=O.offsetTop+at,wt=pt+ut+tt,Et=Ie-wt;if(wt<=De){const Wt=le.length>0&&O===le[le.length-1].ref.current;a.style.bottom="0px";const lr=S.clientHeight-z.offsetTop-z.offsetHeight,fr=Math.max(Ye,at+(Wt?Ee:0)+lr+At),Br=wt+fr;a.style.height=Br+"px"}else{const Wt=le.length>0&&O===le[0].ref.current;a.style.top="0px";const fr=Math.max(De,pt+z.offsetTop+(Wt?ie:0)+at)+Et;a.style.height=fr+"px",z.scrollTop=wt-De+z.offsetTop}a.style.margin=`${xu}px 0`,a.style.minHeight=yt+"px",a.style.maxHeight=ge+"px",l?.(),requestAnimationFrame(()=>P.current=!0)}},[Q,f.trigger,f.valueNode,a,S,z,O,W,f.dir,l]);wl(()=>ce(),[ce]);const[de,Se]=te.useState();wl(()=>{S&&Se(window.getComputedStyle(S).zIndex)},[S]);const ze=te.useCallback(Ze=>{Ze&&$.current===!0&&(ce(),ne?.(),$.current=!1)},[ce,ne]);return oe.jsx(QR,{scope:i,contentWrapper:a,shouldExpandOnScrollRef:P,onScrollButtonChange:ze,children:oe.jsx("div",{ref:x,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:de},children:oe.jsx(si.div,{...h,ref:U,style:{boxSizing:"border-box",maxHeight:"100%",...h.style}})})})});WE.displayName=RR;var NR="SelectPopperPosition",S1=te.forwardRef((e,n)=>{const{__scopeSelect:i,align:l="start",collisionPadding:h=xu,...f}=e,m=Oy(i);return oe.jsx(PS,{...m,...f,ref:n,align:l,collisionPadding:h,style:{boxSizing:"border-box",...f.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});S1.displayName=NR;var[QR,jw]=bp(nd,{}),E1="SelectViewport",ZE=te.forwardRef((e,n)=>{const{__scopeSelect:i,nonce:l,...h}=e,f=xf(E1,i),m=jw(E1,i),a=us(n,f.onViewportChange),x=te.useRef(0);return oe.jsxs(oe.Fragment,{children:[oe.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),oe.jsx(Ny.Slot,{scope:i,children:oe.jsx(si.div,{"data-radix-select-viewport":"",role:"presentation",...h,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...h.style},onScroll:kn(h.onScroll,S=>{const I=S.currentTarget,{contentWrapper:U,shouldExpandOnScrollRef:Q}=m;if(Q?.current&&U){const P=Math.abs(x.current-I.scrollTop);if(P>0){const $=window.innerHeight-xu*2,z=parseFloat(U.style.minHeight),O=parseFloat(U.style.height),W=Math.max(z,O);if(W<$){const ne=W+P,ce=Math.min($,ne),de=ne-ce;U.style.height=ce+"px",U.style.bottom==="0px"&&(I.scrollTop=de>0?de:0,U.style.justifyContent="flex-end")}}}x.current=I.scrollTop})})})]})});ZE.displayName=E1;var XE="SelectGroup",[OR,zR]=bp(XE),HR=te.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e,h=Cy();return oe.jsx(OR,{scope:i,id:h,children:oe.jsx(si.div,{role:"group","aria-labelledby":h,...l,ref:n})})});HR.displayName=XE;var YE="SelectLabel",JE=te.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e,h=zR(YE,i);return oe.jsx(si.div,{id:h.id,...l,ref:n})});JE.displayName=YE;var X0="SelectItem",[jR,eF]=bp(X0),tF=te.forwardRef((e,n)=>{const{__scopeSelect:i,value:l,disabled:h=!1,textValue:f,...m}=e,a=wf(X0,i),x=xf(X0,i),S=a.value===l,[I,U]=te.useState(f??""),[Q,P]=te.useState(!1),$=us(n,ne=>x.itemRefCallback?.(ne,l,h)),z=Cy(),O=te.useRef("touch"),W=()=>{h||(a.onValueChange(l),a.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return oe.jsx(jR,{scope:i,value:l,disabled:h,textId:z,isSelected:S,onItemTextChange:te.useCallback(ne=>{U(ce=>ce||(ne?.textContent??"").trim())},[]),children:oe.jsx(Ny.ItemSlot,{scope:i,value:l,disabled:h,textValue:I,children:oe.jsx(si.div,{role:"option","aria-labelledby":z,"data-highlighted":Q?"":void 0,"aria-selected":S&&Q,"data-state":S?"checked":"unchecked","aria-disabled":h||void 0,"data-disabled":h?"":void 0,tabIndex:h?void 0:-1,...m,ref:$,onFocus:kn(m.onFocus,()=>P(!0)),onBlur:kn(m.onBlur,()=>P(!1)),onClick:kn(m.onClick,()=>{O.current!=="mouse"&&W()}),onPointerUp:kn(m.onPointerUp,()=>{O.current==="mouse"&&W()}),onPointerDown:kn(m.onPointerDown,ne=>{O.current=ne.pointerType}),onPointerMove:kn(m.onPointerMove,ne=>{O.current=ne.pointerType,h?x.onItemLeave?.():O.current==="mouse"&&ne.currentTarget.focus({preventScroll:!0})}),onPointerLeave:kn(m.onPointerLeave,ne=>{ne.currentTarget===document.activeElement&&x.onItemLeave?.()}),onKeyDown:kn(m.onKeyDown,ne=>{x.searchRef?.current!==""&&ne.key===" "||(FR.includes(ne.key)&&W(),ne.key===" "&&ne.preventDefault())})})})})});tF.displayName=X0;var um="SelectItemText",rF=te.forwardRef((e,n)=>{const{__scopeSelect:i,className:l,style:h,...f}=e,m=wf(um,i),a=xf(um,i),x=eF(um,i),S=LR(um,i),[I,U]=te.useState(null),Q=us(n,W=>U(W),x.onItemTextChange,W=>a.itemTextRefCallback?.(W,x.value,x.disabled)),P=I?.textContent,$=te.useMemo(()=>oe.jsx("option",{value:x.value,disabled:x.disabled,children:P},x.value),[x.disabled,x.value,P]),{onNativeOptionAdd:z,onNativeOptionRemove:O}=S;return wl(()=>(z($),()=>O($)),[z,O,$]),oe.jsxs(oe.Fragment,{children:[oe.jsx(si.span,{id:x.textId,...f,ref:Q}),x.isSelected&&m.valueNode&&!m.valueNodeHasChildren?yp.createPortal(f.children,m.valueNode):null]})});rF.displayName=um;var nF="SelectItemIndicator",iF=te.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e;return eF(nF,i).isSelected?oe.jsx(si.span,{"aria-hidden":!0,...l,ref:n}):null});iF.displayName=nF;var F1="SelectScrollUpButton",sF=te.forwardRef((e,n)=>{const i=xf(F1,e.__scopeSelect),l=jw(F1,e.__scopeSelect),[h,f]=te.useState(!1),m=us(n,l.onScrollButtonChange);return wl(()=>{if(i.viewport&&i.isPositioned){let a=function(){const S=x.scrollTop>0;f(S)};const x=i.viewport;return a(),x.addEventListener("scroll",a),()=>x.removeEventListener("scroll",a)}},[i.viewport,i.isPositioned]),h?oe.jsx(aF,{...e,ref:m,onAutoScroll:()=>{const{viewport:a,selectedItem:x}=i;a&&x&&(a.scrollTop=a.scrollTop-x.offsetHeight)}}):null});sF.displayName=F1;var I1="SelectScrollDownButton",oF=te.forwardRef((e,n)=>{const i=xf(I1,e.__scopeSelect),l=jw(I1,e.__scopeSelect),[h,f]=te.useState(!1),m=us(n,l.onScrollButtonChange);return wl(()=>{if(i.viewport&&i.isPositioned){let a=function(){const S=x.scrollHeight-x.clientHeight,I=Math.ceil(x.scrollTop)<S;f(I)};const x=i.viewport;return a(),x.addEventListener("scroll",a),()=>x.removeEventListener("scroll",a)}},[i.viewport,i.isPositioned]),h?oe.jsx(aF,{...e,ref:m,onAutoScroll:()=>{const{viewport:a,selectedItem:x}=i;a&&x&&(a.scrollTop=a.scrollTop+x.offsetHeight)}}):null});oF.displayName=I1;var aF=te.forwardRef((e,n)=>{const{__scopeSelect:i,onAutoScroll:l,...h}=e,f=xf("SelectScrollButton",i),m=te.useRef(null),a=Qy(i),x=te.useCallback(()=>{m.current!==null&&(window.clearInterval(m.current),m.current=null)},[]);return te.useEffect(()=>()=>x(),[x]),wl(()=>{a().find(I=>I.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),oe.jsx(si.div,{"aria-hidden":!0,...h,ref:n,style:{flexShrink:0,...h.style},onPointerDown:kn(h.onPointerDown,()=>{m.current===null&&(m.current=window.setInterval(l,50))}),onPointerMove:kn(h.onPointerMove,()=>{f.onItemLeave?.(),m.current===null&&(m.current=window.setInterval(l,50))}),onPointerLeave:kn(h.onPointerLeave,()=>{x()})})}),VR="SelectSeparator",lF=te.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e;return oe.jsx(si.div,{"aria-hidden":!0,...l,ref:n})});lF.displayName=VR;var T1="SelectArrow",GR=te.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e,h=Oy(i),f=wf(T1,i),m=xf(T1,i);return f.open&&m.position==="popper"?oe.jsx(LS,{...h,...l,ref:n}):null});GR.displayName=T1;var KR="SelectBubbleInput",cF=te.forwardRef(({__scopeSelect:e,value:n,...i},l)=>{const h=te.useRef(null),f=us(l,h),m=zw(n);return te.useEffect(()=>{const a=h.current;if(!a)return;const x=window.HTMLSelectElement.prototype,I=Object.getOwnPropertyDescriptor(x,"value").set;if(m!==n&&I){const U=new Event("change",{bubbles:!0});I.call(a,n),a.dispatchEvent(U)}},[m,n]),oe.jsx(si.select,{...i,style:{...E5,...i.style},ref:f,defaultValue:n})});cF.displayName=KR;function AF(e){return e===""||e===void 0}function uF(e){const n=JA(e),i=te.useRef(""),l=te.useRef(0),h=te.useCallback(m=>{const a=i.current+m;n(a),(function x(S){i.current=S,window.clearTimeout(l.current),S!==""&&(l.current=window.setTimeout(()=>x(""),1e3))})(a)},[n]),f=te.useCallback(()=>{i.current="",window.clearTimeout(l.current)},[]);return te.useEffect(()=>()=>window.clearTimeout(l.current),[]),[i,h,f]}function hF(e,n,i){const h=n.length>1&&Array.from(n).every(S=>S===n[0])?n[0]:n,f=i?e.indexOf(i):-1;let m=qR(e,Math.max(f,0));h.length===1&&(m=m.filter(S=>S!==i));const x=m.find(S=>S.textValue.toLowerCase().startsWith(h.toLowerCase()));return x!==i?x:void 0}function qR(e,n){return e.map((i,l)=>e[(n+l)%e.length])}var $R=QE,fF=zE,WR=jE,ZR=VE,XR=GE,dF=KE,YR=ZE,pF=JE,mF=tF,JR=rF,eN=iF,gF=sF,yF=oF,vF=lF;const _F=$R,wF=WR,Vw=te.forwardRef(({className:e,children:n,...i},l)=>oe.jsxs(fF,{ref:l,className:Pi("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...i,children:[n,oe.jsx(ZR,{asChild:!0,children:oe.jsx(X5,{className:"h-4 w-4 opacity-50"})})]}));Vw.displayName=fF.displayName;const xF=te.forwardRef(({className:e,...n},i)=>oe.jsx(gF,{ref:i,className:Pi("flex cursor-default items-center justify-center py-1",e),...n,children:oe.jsx(rP,{className:"h-4 w-4"})}));xF.displayName=gF.displayName;const bF=te.forwardRef(({className:e,...n},i)=>oe.jsx(yF,{ref:i,className:Pi("flex cursor-default items-center justify-center py-1",e),...n,children:oe.jsx(X5,{className:"h-4 w-4"})}));bF.displayName=yF.displayName;const Gw=te.forwardRef(({className:e,children:n,position:i="popper",...l},h)=>oe.jsx(XR,{children:oe.jsxs(dF,{ref:h,className:Pi("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:i,...l,children:[oe.jsx(xF,{}),oe.jsx(YR,{className:Pi("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),oe.jsx(bF,{})]})}));Gw.displayName=dF.displayName;const tN=te.forwardRef(({className:e,...n},i)=>oe.jsx(pF,{ref:i,className:Pi("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...n}));tN.displayName=pF.displayName;const Kw=te.forwardRef(({className:e,children:n,...i},l)=>oe.jsxs(mF,{ref:l,className:Pi("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...i,children:[oe.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:oe.jsx(eN,{children:oe.jsx(Z5,{className:"h-4 w-4"})})}),oe.jsx(JR,{children:n})]}));Kw.displayName=mF.displayName;const rN=te.forwardRef(({className:e,...n},i)=>oe.jsx(vF,{ref:i,className:Pi("-mx-1 my-1 h-px bg-muted",e),...n}));rN.displayName=vF.displayName;var zy="Checkbox",[nN]=Nh(zy),[iN,qw]=nN(zy);function sN(e){const{__scopeCheckbox:n,checked:i,children:l,defaultChecked:h,disabled:f,form:m,name:a,onCheckedChange:x,required:S,value:I="on",internal_do_not_use_render:U}=e,[Q,P]=fp({prop:i,defaultProp:h??!1,onChange:x,caller:zy}),[$,z]=te.useState(null),[O,W]=te.useState(null),ne=te.useRef(!1),ce=$?!!m||!!$.closest("form"):!0,de={checked:Q,disabled:f,setChecked:P,control:$,setControl:z,name:a,form:m,value:I,hasConsumerStoppedPropagationRef:ne,required:S,defaultChecked:df(h)?!1:h,isFormControl:ce,bubbleInput:O,setBubbleInput:W};return oe.jsx(iN,{scope:n,...de,children:oN(U)?U(de):l})}var BF="CheckboxTrigger",CF=te.forwardRef(({__scopeCheckbox:e,onKeyDown:n,onClick:i,...l},h)=>{const{control:f,value:m,disabled:a,checked:x,required:S,setControl:I,setChecked:U,hasConsumerStoppedPropagationRef:Q,isFormControl:P,bubbleInput:$}=qw(BF,e),z=us(h,I),O=te.useRef(x);return te.useEffect(()=>{const W=f?.form;if(W){const ne=()=>U(O.current);return W.addEventListener("reset",ne),()=>W.removeEventListener("reset",ne)}},[f,U]),oe.jsx(si.button,{type:"button",role:"checkbox","aria-checked":df(x)?"mixed":x,"aria-required":S,"data-state":TF(x),"data-disabled":a?"":void 0,disabled:a,value:m,...l,ref:z,onKeyDown:kn(n,W=>{W.key==="Enter"&&W.preventDefault()}),onClick:kn(i,W=>{U(ne=>df(ne)?!0:!ne),$&&P&&(Q.current=W.isPropagationStopped(),Q.current||W.stopPropagation())})})});CF.displayName=BF;var $w=te.forwardRef((e,n)=>{const{__scopeCheckbox:i,name:l,checked:h,defaultChecked:f,required:m,disabled:a,value:x,onCheckedChange:S,form:I,...U}=e;return oe.jsx(sN,{__scopeCheckbox:i,checked:h,defaultChecked:f,disabled:a,required:m,onCheckedChange:S,name:l,form:I,value:x,internal_do_not_use_render:({isFormControl:Q})=>oe.jsxs(oe.Fragment,{children:[oe.jsx(CF,{...U,ref:n,__scopeCheckbox:i}),Q&&oe.jsx(IF,{__scopeCheckbox:i})]})})});$w.displayName=zy;var SF="CheckboxIndicator",EF=te.forwardRef((e,n)=>{const{__scopeCheckbox:i,forceMount:l,...h}=e,f=qw(SF,i);return oe.jsx(Hm,{present:l||df(f.checked)||f.checked===!0,children:oe.jsx(si.span,{"data-state":TF(f.checked),"data-disabled":f.disabled?"":void 0,...h,ref:n,style:{pointerEvents:"none",...e.style}})})});EF.displayName=SF;var FF="CheckboxBubbleInput",IF=te.forwardRef(({__scopeCheckbox:e,...n},i)=>{const{control:l,hasConsumerStoppedPropagationRef:h,checked:f,defaultChecked:m,required:a,disabled:x,name:S,value:I,form:U,bubbleInput:Q,setBubbleInput:P}=qw(FF,e),$=us(i,P),z=zw(f),O=Pw(l);te.useEffect(()=>{const ne=Q;if(!ne)return;const ce=window.HTMLInputElement.prototype,Se=Object.getOwnPropertyDescriptor(ce,"checked").set,ze=!h.current;if(z!==f&&Se){const Ze=new Event("click",{bubbles:ze});ne.indeterminate=df(f),Se.call(ne,df(f)?!1:f),ne.dispatchEvent(Ze)}},[Q,z,f,h]);const W=te.useRef(df(f)?!1:f);return oe.jsx(si.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??W.current,required:a,disabled:x,name:S,value:I,form:U,...n,tabIndex:-1,ref:$,style:{...n.style,...O,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});IF.displayName=FF;function oN(e){return typeof e=="function"}function df(e){return e==="indeterminate"}function TF(e){return df(e)?"indeterminate":e?"checked":"unchecked"}const P1=te.forwardRef(({className:e,...n},i)=>oe.jsx($w,{ref:i,className:Pi("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...n,children:oe.jsx(EF,{className:Pi("flex items-center justify-center text-current"),children:oe.jsx(Z5,{className:"h-4 w-4"})})}));P1.displayName=$w.displayName;const Hy=te.forwardRef(({className:e,type:n,...i},l)=>oe.jsx("input",{type:n,className:Pi("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:l,...i}));Hy.displayName="Input";var L0={exports:{}};var aN=L0.exports,z2;function lN(){return z2||(z2=1,(function(e,n){(function(i,l){e.exports=l()})(aN,(function(){var i={},l={};function h(m,a,x){if(l[m]=x,m==="index"){var S="var sharedModule = {}; ("+l.shared+")(sharedModule); ("+l.worker+")(sharedModule);",I={};return l.shared(I),l.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([S],{type:"text/javascript"}))),i}}h("shared",["exports"],(function(m){function a(o,t,s,A){return new(s||(s=Promise))((function(p,v){function _(k){try{F(A.next(k))}catch(N){v(N)}}function B(k){try{F(A.throw(k))}catch(N){v(N)}}function F(k){var N;k.done?p(k.value):(N=k.value,N instanceof s?N:new s((function(G){G(N)}))).then(_,B)}F((A=A.apply(o,t||[])).next())}))}function x(o,t){this.x=o,this.y=t}function S(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var I,U;typeof SuppressedError=="function"&&SuppressedError,x.prototype={clone(){return new x(this.x,this.y)},add(o){return this.clone()._add(o)},sub(o){return this.clone()._sub(o)},multByPoint(o){return this.clone()._multByPoint(o)},divByPoint(o){return this.clone()._divByPoint(o)},mult(o){return this.clone()._mult(o)},div(o){return this.clone()._div(o)},rotate(o){return this.clone()._rotate(o)},rotateAround(o,t){return this.clone()._rotateAround(o,t)},matMult(o){return this.clone()._matMult(o)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(o){return this.x===o.x&&this.y===o.y},dist(o){return Math.sqrt(this.distSqr(o))},distSqr(o){const t=o.x-this.x,s=o.y-this.y;return t*t+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith(o){return this.angleWithSep(o.x,o.y)},angleWithSep(o,t){return Math.atan2(this.x*t-this.y*o,this.x*o+this.y*t)},_matMult(o){const t=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=t,this},_add(o){return this.x+=o.x,this.y+=o.y,this},_sub(o){return this.x-=o.x,this.y-=o.y,this},_mult(o){return this.x*=o,this.y*=o,this},_div(o){return this.x/=o,this.y/=o,this},_multByPoint(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint(o){return this.x/=o.x,this.y/=o.y,this},_unit(){return this._div(this.mag()),this},_perp(){const o=this.y;return this.y=this.x,this.x=-o,this},_rotate(o){const t=Math.cos(o),s=Math.sin(o),A=s*this.x+t*this.y;return this.x=t*this.x-s*this.y,this.y=A,this},_rotateAround(o,t){const s=Math.cos(o),A=Math.sin(o),p=t.y+A*(this.x-t.x)+s*(this.y-t.y);return this.x=t.x+s*(this.x-t.x)-A*(this.y-t.y),this.y=p,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:x},x.convert=function(o){if(o instanceof x)return o;if(Array.isArray(o))return new x(+o[0],+o[1]);if(o.x!==void 0&&o.y!==void 0)return new x(+o.x,+o.y);throw new Error("Expected [x, y] or {x, y} point format")};var Q=(function(){if(U)return I;function o(t,s,A,p){this.cx=3*t,this.bx=3*(A-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=s,this.p2x=A,this.p2y=p}return U=1,I=o,o.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,s){if(s===void 0&&(s=1e-6),t<0)return 0;if(t>1)return 1;for(var A=t,p=0;p<8;p++){var v=this.sampleCurveX(A)-t;if(Math.abs(v)<s)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=v/_}var B=0,F=1;for(A=t,p=0;p<20&&(v=this.sampleCurveX(A),!(Math.abs(v-t)<s));p++)t>v?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))}},I})(),P=S(Q);let $,z;function O(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function W(){if(z==null&&(z=!1,O())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let A=0;A<25;A++){const p=4*A;t.fillStyle=`rgb(${p},${p+1},${p+2})`,t.fillRect(A%5,Math.floor(A/5),1,1)}const s=t.getImageData(0,0,5,5).data;for(let A=0;A<100;A++)if(A%4!=3&&s[A]!==A){z=!0;break}}}return z||!1}var ne=1e-6,ce=typeof Float32Array<"u"?Float32Array:Array;function de(){var o=new ce(9);return ce!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function Se(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function ze(){var o=new ce(3);return ce!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function Ze(o){var t=o[0],s=o[1],A=o[2];return Math.sqrt(t*t+s*s+A*A)}function Qe(o,t,s){var A=new ce(3);return A[0]=o,A[1]=t,A[2]=s,A}function be(o,t,s){return o[0]=t[0]+s[0],o[1]=t[1]+s[1],o[2]=t[2]+s[2],o}function Ge(o,t,s){return o[0]=t[0]*s,o[1]=t[1]*s,o[2]=t[2]*s,o}function le(o,t,s){var A=t[0],p=t[1],v=t[2],_=s[0],B=s[1],F=s[2];return o[0]=p*F-v*B,o[1]=v*_-A*F,o[2]=A*B-p*_,o}var ge,Pe=Ze;function Fe(o,t,s){var A=t[0],p=t[1],v=t[2],_=t[3];return o[0]=s[0]*A+s[4]*p+s[8]*v+s[12]*_,o[1]=s[1]*A+s[5]*p+s[9]*v+s[13]*_,o[2]=s[2]*A+s[6]*p+s[10]*v+s[14]*_,o[3]=s[3]*A+s[7]*p+s[11]*v+s[15]*_,o}function pt(){var o=new ce(4);return ce!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function ut(o,t,s,A){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",v=Math.PI/360;t*=v,A*=v,s*=v;var _=Math.sin(t),B=Math.cos(t),F=Math.sin(s),k=Math.cos(s),N=Math.sin(A),G=Math.cos(A);switch(p){case"xyz":o[0]=_*k*G+B*F*N,o[1]=B*F*G-_*k*N,o[2]=B*k*N+_*F*G,o[3]=B*k*G-_*F*N;break;case"xzy":o[0]=_*k*G-B*F*N,o[1]=B*F*G-_*k*N,o[2]=B*k*N+_*F*G,o[3]=B*k*G+_*F*N;break;case"yxz":o[0]=_*k*G+B*F*N,o[1]=B*F*G-_*k*N,o[2]=B*k*N-_*F*G,o[3]=B*k*G+_*F*N;break;case"yzx":o[0]=_*k*G+B*F*N,o[1]=B*F*G+_*k*N,o[2]=B*k*N-_*F*G,o[3]=B*k*G-_*F*N;break;case"zxy":o[0]=_*k*G-B*F*N,o[1]=B*F*G+_*k*N,o[2]=B*k*N+_*F*G,o[3]=B*k*G-_*F*N;break;case"zyx":o[0]=_*k*G-B*F*N,o[1]=B*F*G+_*k*N,o[2]=B*k*N-_*F*G,o[3]=B*k*G+_*F*N;break;default:throw new Error("Unknown angle order "+p)}return o}function At(){var o=new ce(2);return ce!=Float32Array&&(o[0]=0,o[1]=0),o}function Ne(o,t){var s=new ce(2);return s[0]=o,s[1]=t,s}ze(),ge=new ce(4),ce!=Float32Array&&(ge[0]=0,ge[1]=0,ge[2]=0,ge[3]=0),ze(),Qe(1,0,0),Qe(0,1,0),pt(),pt(),de(),At();const Ie=8192;function yt(o,t,s){return t*(Ie/(o.tileSize*Math.pow(2,s-o.tileID.overscaledZ)))}function Ue(o,t){return(o%t+t)%t}function ie(o,t,s){return o*(1-s)+t*s}function Ee(o){if(o<=0)return 0;if(o>=1)return 1;const t=o*o,s=t*o;return 4*(o<.5?s:3*(o-t)+s-.75)}function De(o,t,s,A){const p=new P(o,t,s,A);return v=>p.solve(v)}const Ye=De(.25,.1,.25,1);function at(o,t,s){return Math.min(s,Math.max(t,o))}function tt(o,t,s){const A=s-t,p=((o-t)%A+A)%A+t;return p===t?s:p}function wt(o,...t){for(const s of t)for(const A in s)o[A]=s[A];return o}let Et=1;function Pt(o,t,s){const A={};for(const p in o)A[p]=t.call(this,o[p],p,o);return A}function Wt(o,t,s){const A={};for(const p in o)t.call(this,o[p],p,o)&&(A[p]=o[p]);return A}function lr(o){return Array.isArray(o)?o.map(lr):typeof o=="object"&&o?Pt(o,lr):o}const fr={};function Br(o){fr[o]||(typeof console<"u"&&console.warn(o),fr[o]=!0)}function He(o,t,s){return(s.y-o.y)*(t.x-o.x)>(t.y-o.y)*(s.x-o.x)}function yr(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let kr=null;function qr(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const or="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $r(o,t,s,A,p){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const _=v?.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const B=_.startsWith("BGR"),F=new Uint8ClampedArray(A*p*4);if(yield v.copyTo(F,(function(k,N,G,Z,Y){const se=4*Math.max(-N,0),ae=(Math.max(0,G)-G)*Z*4+se,ue=4*Z,xe=Math.max(0,N),et=Math.max(0,G);return{rect:{x:xe,y:et,width:Math.min(k.width,N+Z)-xe,height:Math.min(k.height,G+Y)-et},layout:[{offset:ae,stride:ue}]}})(o,t,s,A,p)),B)for(let k=0;k<F.length;k+=4){const N=F[k];F[k]=F[k+2],F[k+2]=N}return F}finally{v.close()}}))}let Sr,Qr;function Dr(o,t,s,A){return o.addEventListener(t,s,A),{unsubscribe:()=>{o.removeEventListener(t,s,A)}}}function Qn(o){return o*Math.PI/180}function un(o){return o/Math.PI*180}const ft={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},he={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},fe="AbortError";class ye extends Error{constructor(t=fe){super(t instanceof Error?t.message:t),this.name=fe,t instanceof Error&&t.stack&&(this.stack=t.stack)}}function Ke(o){return o.name===fe}const $e={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Bt(o){return $e.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const gt="global-dispatcher";class st extends Error{constructor(t,s,A,p){super(`AJAXError: ${s} (${t}): ${A}`),this.status=t,this.statusText=s,this.url=A,this.body=p}}const xt=()=>yr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,zt=function(o,t){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const A=Bt(o.url);if(A)return A(o,t);if(yr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:gt},t)}if(!(/^file:/.test(s=o.url)||/^file:/.test(xt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(A,p){return a(this,void 0,void 0,(function*(){const v=new Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,cache:A.cache,referrer:xt(),signal:p.signal});let _,B;A.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{_=yield fetch(v)}catch(k){throw Ke(k)?k:new st(0,k.message,A.url,new Blob)}if(!_.ok){const k=yield _.blob();throw new st(_.status,_.statusText,A.url,k)}B=A.type==="arrayBuffer"||A.type==="image"?_.arrayBuffer():A.type==="json"?_.json():_.text();const F=yield B;return p.signal.throwIfAborted(),{data:F,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}}))})(o,t);if(yr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:gt},t)}var s;return(function(A,p){return new Promise(((v,_)=>{var B;const F=new XMLHttpRequest;F.open(A.method||"GET",A.url,!0),A.type!=="arrayBuffer"&&A.type!=="image"||(F.responseType="arraybuffer");for(const k in A.headers)F.setRequestHeader(k,A.headers[k]);A.type==="json"&&(F.responseType="text",!((B=A.headers)===null||B===void 0)&&B.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=A.credentials==="include",F.onerror=()=>{_(new Error(F.statusText))},F.onload=()=>{if(!p.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let k=F.response;if(A.type==="json")try{k=JSON.parse(F.response)}catch(N){return void _(N)}v({data:k,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const k=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});_(new st(F.status,F.statusText,A.url,k))}},p.signal.addEventListener("abort",(()=>{F.abort(),_(new ye(p.signal.reason))})),F.send(A.body)}))})(o,t)};function St(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const t=new URL(o),s=window.location;return t.protocol===s.protocol&&t.host===s.host}function ar(o,t,s){s[o]&&s[o].indexOf(t)!==-1||(s[o]=s[o]||[],s[o].push(t))}function Yt(o,t,s){if(s&&s[o]){const A=s[o].indexOf(t);A!==-1&&s[o].splice(A,1)}}class hr{constructor(t,s={}){wt(this,s),this.type=t}}class tn extends hr{constructor(t,s={}){super("error",wt({error:t},s))}}class Ir{on(t,s){return this._listeners=this._listeners||{},ar(t,s,this._listeners),{unsubscribe:()=>{this.off(t,s)}}}off(t,s){return Yt(t,s,this._listeners),Yt(t,s,this._oneTimeListeners),this}once(t,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},ar(t,s,this._oneTimeListeners),this):new Promise((A=>this.once(t,A)))}fire(t,s){typeof t=="string"&&(t=new hr(t,s||{}));const A=t.type;if(this.listens(A)){t.target=this;const p=this._listeners&&this._listeners[A]?this._listeners[A].slice():[];for(const B of p)B.call(this,t);const v=this._oneTimeListeners&&this._oneTimeListeners[A]?this._oneTimeListeners[A].slice():[];for(const B of v)Yt(A,B,this._oneTimeListeners),B.call(this,t);const _=this._eventedParent;_&&(wt(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof tn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,s){return this._eventedParent=t,this._eventedParentData=s,this}}var dt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const en=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Rr(o,t){const s={};for(const A in o)A!=="ref"&&(s[A]=o[A]);return en.forEach((A=>{A in t&&(s[A]=t[A])})),s}function pr(o,t){if(Array.isArray(o)){if(!Array.isArray(t)||o.length!==t.length)return!1;for(let s=0;s<o.length;s++)if(!pr(o[s],t[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&t!==null){if(typeof t!="object"||Object.keys(o).length!==Object.keys(t).length)return!1;for(const s in o)if(!pr(o[s],t[s]))return!1;return!0}return o===t}function Gr(o,t){o.push(t)}function Un(o,t,s){Gr(s,{command:"addSource",args:[o,t[o]]})}function _r(o,t,s){Gr(t,{command:"removeSource",args:[o]}),s[o]=!0}function In(o,t,s,A){_r(o,s,A),Un(o,t,s)}function bn(o,t,s){let A;for(A in o[s])if(Object.prototype.hasOwnProperty.call(o[s],A)&&A!=="data"&&!pr(o[s][A],t[s][A]))return!1;for(A in t[s])if(Object.prototype.hasOwnProperty.call(t[s],A)&&A!=="data"&&!pr(o[s][A],t[s][A]))return!1;return!0}function wn(o,t,s,A,p,v){o=o||{},t=t||{};for(const _ in o)Object.prototype.hasOwnProperty.call(o,_)&&(pr(o[_],t[_])||s.push({command:v,args:[A,_,t[_],p]}));for(const _ in t)Object.prototype.hasOwnProperty.call(t,_)&&!Object.prototype.hasOwnProperty.call(o,_)&&(pr(o[_],t[_])||s.push({command:v,args:[A,_,t[_],p]}))}function Ui(o){return o.id}function oi(o,t){return o[t.id]=t,o}class Xt{constructor(t,s,A,p){this.message=(t?`${t}: `:"")+A,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function Wn(o,...t){for(const s of t)for(const A in s)o[A]=s[A];return o}class qi extends Error{constructor(t,s){super(s),this.message=s,this.key=t}}class rl{constructor(t,s=[]){this.parent=t,this.bindings={};for(const[A,p]of s)this.bindings[A]=p}concat(t){return new rl(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const rs={kind:"null"},dr={kind:"number"},rn={kind:"string"},An={kind:"boolean"},Di={kind:"color"},xl={kind:"projectionDefinition"},Ls={kind:"object"},hn={kind:"value"},nl={kind:"collator"},il={kind:"formatted"},Zl={kind:"padding"},xc={kind:"colorArray"},fi={kind:"numberArray"},Xl={kind:"resolvedImage"},bl={kind:"variableAnchorOffsetCollection"};function Bi(o,t){return{kind:"array",itemType:o,N:t}}function Hn(o){if(o.kind==="array"){const t=Hn(o.itemType);return typeof o.N=="number"?`array<${t}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${t}>`}return o.kind}const Jc=[rs,dr,rn,An,Di,xl,il,Ls,Bi(hn),Zl,fi,xc,Xl,bl];function sl(o,t){if(t.kind==="error")return null;if(o.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!sl(o.itemType,t.itemType))&&(typeof o.N!="number"||o.N===t.N))return null}else{if(o.kind===t.kind)return null;if(o.kind==="value"){for(const s of Jc)if(!sl(s,t))return null}}return`Expected ${Hn(o)} but found ${Hn(t)} instead.`}function ol(o,t){return t.some((s=>s.kind===o.kind))}function Ms(o,t){return t.some((s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o))}function Uo(o,t){return o.kind==="array"&&t.kind==="array"?o.itemType.kind===t.itemType.kind&&typeof o.N=="number":o.kind===t.kind}const hs=.96422,xa=.82521,CA=4/29,Ln=6/29,bc=3*Ln*Ln,Do=Ln*Ln*Ln,Ro=Math.PI/180,Bc=180/Math.PI;function oa(o){return(o%=360)<0&&(o+=360),o}function ms([o,t,s,A]){let p,v;const _=eA((.2225045*(o=No(o))+.7168786*(t=No(t))+.0606169*(s=No(s)))/1);o===t&&t===s?p=v=_:(p=eA((.4360747*o+.3850649*t+.1430804*s)/hs),v=eA((.0139322*o+.0971045*t+.7141733*s)/xa));const B=116*_-16;return[B<0?0:B,500*(p-_),200*(_-v),A]}function No(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function eA(o){return o>Do?Math.pow(o,1/3):o/bc+CA}function tA([o,t,s,A]){let p=(o+16)/116,v=isNaN(t)?p:p+t/500,_=isNaN(s)?p:p-s/200;return p=1*ba(p),v=hs*ba(v),_=xa*ba(_),[Yl(3.1338561*v-1.6168667*p-.4906146*_),Yl(-.9787684*v+1.9161415*p+.033454*_),Yl(.0719453*v-.2289914*p+1.4052427*_),A]}function Yl(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function ba(o){return o>Ln?o*o*o:bc*(o-CA)}const SA=Object.hasOwn||function(o,t){return Object.prototype.hasOwnProperty.call(o,t)};function Gn(o,t){return SA(o,t)?o[t]:void 0}function Bl(o){return parseInt(o.padEnd(2,o),16)/255}function Jl(o,t){return Cl(t?o/100:o,0,1)}function Cl(o,t,s){return Math.min(Math.max(t,o),s)}function EA(o){return!o.some(Number.isNaN)}const Cc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function aa(o,t,s){return o+s*(t-o)}function al(o,t,s){return o.map(((A,p)=>aa(A,t[p],s)))}class on{constructor(t,s,A,p=1,v=!0){this.r=t,this.g=s,this.b=A,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[t,s,A,p]))}static parse(t){if(t instanceof on)return t;if(typeof t!="string")return;const s=(function(A){if((A=A.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=Gn(Cc,A);if(p){const[_,B,F]=p;return[_/255,B/255,F/255,1]}if(A.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(A)){const _=A.length<6?1:2;let B=1;return[Bl(A.slice(B,B+=_)),Bl(A.slice(B,B+=_)),Bl(A.slice(B,B+=_)),Bl(A.slice(B,B+_)||"ff")]}if(A.startsWith("rgb")){const _=A.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[B,F,k,N,G,Z,Y,se,ae,ue,xe,et]=_,Ce=[N||" ",Y||" ",ue].join("");if(Ce==="  "||Ce==="  /"||Ce===",,"||Ce===",,,"){const Le=[k,Z,ae].join(""),nt=Le==="%%%"?100:Le===""?255:0;if(nt){const ct=[Cl(+F/nt,0,1),Cl(+G/nt,0,1),Cl(+se/nt,0,1),xe?Jl(+xe,et):1];if(EA(ct))return ct}}return}}const v=A.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,B,F,k,N,G,Z,Y,se]=v,ae=[F||" ",N||" ",Z].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){const ue=[+B,Cl(+k,0,100),Cl(+G,0,100),Y?Jl(+Y,se):1];if(EA(ue))return(function([xe,et,Ce,Le]){function nt(ct){const Lt=(ct+xe/30)%12,Zt=et*Math.min(Ce,1-Ce);return Ce-Zt*Math.max(-1,Math.min(Lt-3,9-Lt,1))}return xe=oa(xe),et/=100,Ce/=100,[nt(0),nt(8),nt(4),Le]})(ue)}}})(t);return s?new on(...s,!1):void 0}get rgb(){const{r:t,g:s,b:A,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[t/v,s/v,A/v,p])}get hcl(){return this.overwriteGetter("hcl",(function(t){const[s,A,p,v]=ms(t),_=Math.sqrt(A*A+p*p);return[Math.round(1e4*_)?oa(Math.atan2(p,A)*Bc):NaN,_,s,v]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ms(this.rgb))}overwriteGetter(t,s){return Object.defineProperty(this,t,{value:s}),s}toString(){const[t,s,A,p]=this.rgb;return`rgba(${[t,s,A].map((v=>Math.round(255*v))).join(",")},${p})`}static interpolate(t,s,A,p="rgb"){switch(p){case"rgb":{const[v,_,B,F]=al(t.rgb,s.rgb,A);return new on(v,_,B,F,!1)}case"hcl":{const[v,_,B,F]=t.hcl,[k,N,G,Z]=s.hcl;let Y,se;if(isNaN(v)||isNaN(k))isNaN(v)?isNaN(k)?Y=NaN:(Y=k,B!==1&&B!==0||(se=N)):(Y=v,G!==1&&G!==0||(se=_));else{let Ce=k-v;k>v&&Ce>180?Ce-=360:k<v&&v-k>180&&(Ce+=360),Y=v+A*Ce}const[ae,ue,xe,et]=(function([Ce,Le,nt,ct]){return Ce=isNaN(Ce)?0:Ce*Ro,tA([nt,Math.cos(Ce)*Le,Math.sin(Ce)*Le,ct])})([Y,se??aa(_,N,A),aa(B,G,A),aa(F,Z,A)]);return new on(ae,ue,xe,et,!1)}case"lab":{const[v,_,B,F]=tA(al(t.lab,s.lab,A));return new on(v,_,B,F,!1)}}}}on.black=new on(0,0,0,1),on.white=new on(1,1,1,1),on.transparent=new on(0,0,0,0),on.red=new on(1,0,0,1);class Ba{constructor(t,s,A){this.sensitivity=t?s?"variant":"case":s?"accent":"base",this.locale=A,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,s){return this.collator.compare(t,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Qo=["bottom","center","top"];class Oo{constructor(t,s,A,p,v,_){this.text=t,this.image=s,this.scale=A,this.fontStack=p,this.textColor=v,this.verticalAlign=_}}class gs{constructor(t){this.sections=t}static fromString(t){return new gs([new Oo(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((t=>t.text.length!==0||t.image&&t.image.name.length!==0))}static factory(t){return t instanceof gs?t:gs.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map((t=>t.text)).join("")}}class Kr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Kr)return t;if(typeof t=="number")return new Kr([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const s of t)if(typeof s!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Kr(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){return new Kr(al(t.values,s.values,A))}}class Yn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Yn)return t;if(typeof t=="number")return new Yn([t]);if(Array.isArray(t)){for(const s of t)if(typeof s!="number")return;return new Yn(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){return new Yn(al(t.values,s.values,A))}}class ln{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ln)return t;if(typeof t=="string"){const A=on.parse(t);return A?new ln([A]):void 0}if(!Array.isArray(t))return;const s=[];for(const A of t){if(typeof A!="string")return;const p=on.parse(A);if(!p)return;s.push(p)}return new ln(s)}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A,p="rgb"){const v=[];if(t.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let _=0;_<t.values.length;_++)v.push(on.interpolate(t.values[_],s.values[_],A,p));return new ln(v)}}class ni extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const ys=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $i{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof $i)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let s=0;s<t.length;s+=2){const A=t[s],p=t[s+1];if(typeof A!="string"||!ys.has(A)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new $i(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){const p=t.values,v=s.values;if(p.length!==v.length)throw new ni(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${s.toString()}`);const _=[];for(let B=0;B<p.length;B+=2){if(p[B]!==v[B])throw new ni(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${p[B]}, to[${B}]: ${v[B]}`);_.push(p[B]);const[F,k]=p[B+1],[N,G]=v[B+1];_.push([aa(F,N,A),aa(k,G,A)])}return new $i(_)}}class co{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new co({name:t,available:!1}):null}}class vs{constructor(t,s,A){this.from=t,this.to=s,this.transition=A}static interpolate(t,s,A){return new vs(t,s,A)}static parse(t){return t instanceof vs?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new vs(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new vs(t.from,t.to,t.transition):typeof t=="string"?new vs(t,t,1):void 0}}function Ca(o,t,s,A){return typeof o=="number"&&o>=0&&o<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof s=="number"&&s>=0&&s<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:`Invalid rgba value [${[o,t,s,A].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof A=="number"?[o,t,s,A]:[o,t,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Sa(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof vs||o instanceof on||o instanceof Ba||o instanceof gs||o instanceof Kr||o instanceof Yn||o instanceof ln||o instanceof $i||o instanceof co)return!0;if(Array.isArray(o)){for(const t of o)if(!Sa(t))return!1;return!0}if(typeof o=="object"){for(const t in o)if(!Sa(o[t]))return!1;return!0}return!1}function ei(o){if(o===null)return rs;if(typeof o=="string")return rn;if(typeof o=="boolean")return An;if(typeof o=="number")return dr;if(o instanceof on)return Di;if(o instanceof vs)return xl;if(o instanceof Ba)return nl;if(o instanceof gs)return il;if(o instanceof Kr)return Zl;if(o instanceof Yn)return fi;if(o instanceof ln)return xc;if(o instanceof $i)return bl;if(o instanceof co)return Xl;if(Array.isArray(o)){const t=o.length;let s;for(const A of o){const p=ei(A);if(s){if(s===p)continue;s=hn;break}s=p}return Bi(s||hn,t)}return Ls}function la(o){const t=typeof o;return o===null?"":t==="string"||t==="number"||t==="boolean"?String(o):o instanceof on||o instanceof vs||o instanceof gs||o instanceof Kr||o instanceof Yn||o instanceof ln||o instanceof $i||o instanceof co?o.toString():JSON.stringify(o)}class Wi{constructor(t,s){this.type=t,this.value=s}static parse(t,s){if(t.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Sa(t[1]))return s.error("invalid value");const A=t[1];let p=ei(A);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new Wi(p,A)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ec={string:rn,number:dr,boolean:An,object:Ls};class Gs{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let A,p=1;const v=t[0];if(v==="array"){let B,F;if(t.length>2){const k=t[1];if(typeof k!="string"||!(k in ec)||k==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);B=ec[k],p++}else B=hn;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return s.error('The length argument to "array" must be a positive integer literal',2);F=t[2],p++}A=Bi(B,F)}else{if(!ec[v])throw new Error(`Types doesn't contain name = ${v}`);A=ec[v]}const _=[];for(;p<t.length;p++){const B=s.parse(t[p],p,hn);if(!B)return null;_.push(B)}return new Gs(A,_)}evaluate(t){for(let s=0;s<this.args.length;s++){const A=this.args[s].evaluate(t);if(!sl(this.type,ei(A)))return A;if(s===this.args.length-1)throw new ni(`Expected value to be of type ${Hn(this.type)}, but found ${Hn(ei(A))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ll={"to-boolean":An,"to-color":Di,"to-number":dr,"to-string":rn};class zo{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const A=t[0];if(!ll[A])throw new Error(`Can't parse ${A} as it is not part of the known types`);if((A==="to-boolean"||A==="to-string")&&t.length!==2)return s.error("Expected one argument.");const p=ll[A],v=[];for(let _=1;_<t.length;_++){const B=s.parse(t[_],_,hn);if(!B)return null;v.push(B)}return new zo(p,v)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let s,A;for(const p of this.args){if(s=p.evaluate(t),A=null,s instanceof on)return s;if(typeof s=="string"){const v=t.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(A=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ca(s[0],s[1],s[2],s[3]),!A))return new on(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ni(A||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const A of this.args){s=A.evaluate(t);const p=Kr.parse(s);if(p)return p}throw new ni(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const A of this.args){s=A.evaluate(t);const p=Yn.parse(s);if(p)return p}throw new ni(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const A of this.args){s=A.evaluate(t);const p=ln.parse(s);if(p)return p}throw new ni(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const A of this.args){s=A.evaluate(t);const p=$i.parse(s);if(p)return p}throw new ni(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const A of this.args){if(s=A.evaluate(t),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new ni(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return gs.fromString(la(this.args[0].evaluate(t)));case"resolvedImage":return co.fromString(la(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return la(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ca=["Unknown","Point","LineString","Polygon"];class tc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ca[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let s=this._parseColorCache.get(t);return s||(s=on.parse(t),this._parseColorCache.set(t,s)),s}}class Aa{constructor(t,s,A=[],p,v=new rl,_=[]){this.registry=t,this.path=A,this.key=A.map((B=>`[${B}]`)).join(""),this.scope=v,this.errors=_,this.expectedType=p,this._isConstant=s}parse(t,s,A,p,v={}){return s?this.concat(s,A,p)._parse(t,v):this._parse(t,v)}_parse(t,s){function A(p,v,_){return _==="assert"?new Gs(v,[p]):_==="coerce"?new zo(v,[p]):p}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=t[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let _=v.parse(t,this);if(!_)return null;if(this.expectedType){const B=this.expectedType,F=_.type;if(B.kind!=="string"&&B.kind!=="number"&&B.kind!=="boolean"&&B.kind!=="object"&&B.kind!=="array"||F.kind!=="value"){if(B.kind==="projectionDefinition"&&["string","array"].includes(F.kind)||["color","formatted","resolvedImage"].includes(B.kind)&&["value","string"].includes(F.kind)||["padding","numberArray"].includes(B.kind)&&["value","number","array"].includes(F.kind)||B.kind==="colorArray"&&["value","string","array"].includes(F.kind)||B.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(F.kind))_=A(_,B,s.typeAnnotation||"coerce");else if(this.checkSubtype(B,F))return null}else _=A(_,B,s.typeAnnotation||"assert")}if(!(_ instanceof Wi)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const B=new tc;try{_=new Wi(_.type,_.evaluate(B))}catch(F){return this.error(F.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,s,A){const p=typeof t=="number"?this.path.concat(t):this.path,v=A?this.scope.concat(A):this.scope;return new Aa(this.registry,this._isConstant,p,s||null,v,this.errors)}error(t,...s){const A=`${this.key}${s.map((p=>`[${p}]`)).join("")}`;this.errors.push(new qi(A,t))}checkSubtype(t,s){const A=sl(t,s);return A&&this.error(A),A}}class Rn{constructor(t,s){this.type=s.type,this.bindings=[].concat(t),this.result=s}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const s of this.bindings)t(s[1]);t(this.result)}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const A=[];for(let v=1;v<t.length-1;v+=2){const _=t[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const B=s.parse(t[v+1],v+1);if(!B)return null;A.push([_,B])}const p=s.parse(t[t.length-1],t.length-1,s.expectedType,A);return p?new Rn(A,p):null}outputDefined(){return this.result.outputDefined()}}class Ho{constructor(t,s){this.type=s.type,this.name=t,this.boundExpression=s}static parse(t,s){if(t.length!==2||typeof t[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const A=t[1];return s.scope.has(A)?new Ho(A,s.scope.get(A)):s.error(`Unknown variable "${A}". Make sure "${A}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class Cn{constructor(t,s,A){this.type=t,this.index=s,this.input=A}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,dr),p=s.parse(t[2],2,Bi(s.expectedType||hn));return A&&p?new Cn(p.type.itemType,A,p):null}evaluate(t){const s=this.index.evaluate(t),A=this.input.evaluate(t);if(s<0)throw new ni(`Array index out of bounds: ${s} < 0.`);if(s>=A.length)throw new ni(`Array index out of bounds: ${s} > ${A.length-1}.`);if(s!==Math.floor(s))throw new ni(`Array index must be an integer, but found ${s} instead.`);return A[s]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class pn{constructor(t,s){this.type=An,this.needle=t,this.haystack=s}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,hn),p=s.parse(t[2],2,hn);return A&&p?ol(A.type,[An,rn,dr,rs,hn])?new pn(A,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hn(A.type)} instead`):null}evaluate(t){const s=this.needle.evaluate(t),A=this.haystack.evaluate(t);if(!A)return!1;if(!Ms(s,["boolean","string","number","null"]))throw new ni(`Expected first argument to be of type boolean, string, number or null, but found ${Hn(ei(s))} instead.`);if(!Ms(A,["string","array"]))throw new ni(`Expected second argument to be of type array or string, but found ${Hn(ei(A))} instead.`);return A.indexOf(s)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ea{constructor(t,s,A){this.type=dr,this.needle=t,this.haystack=s,this.fromIndex=A}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,hn),p=s.parse(t[2],2,hn);if(!A||!p)return null;if(!ol(A.type,[An,rn,dr,rs,hn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hn(A.type)} instead`);if(t.length===4){const v=s.parse(t[3],3,dr);return v?new Ea(A,p,v):null}return new Ea(A,p)}evaluate(t){const s=this.needle.evaluate(t),A=this.haystack.evaluate(t);if(!Ms(s,["boolean","string","number","null"]))throw new ni(`Expected first argument to be of type boolean, string, number or null, but found ${Hn(ei(s))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(t)),Ms(A,["string"])){const v=A.indexOf(s,p);return v===-1?-1:[...A.slice(0,v)].length}if(Ms(A,["array"]))return A.indexOf(s,p);throw new ni(`Expected second argument to be of type array or string, but found ${Hn(ei(A))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class xn{constructor(t,s,A,p,v,_){this.inputType=t,this.type=s,this.input=A,this.cases=p,this.outputs=v,this.otherwise=_}static parse(t,s){if(t.length<5)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return s.error("Expected an even number of arguments.");let A,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},_=[];for(let k=2;k<t.length-1;k+=2){let N=t[k];const G=t[k+1];Array.isArray(N)||(N=[N]);const Z=s.concat(k);if(N.length===0)return Z.error("Expected at least one branch label.");for(const se of N){if(typeof se!="number"&&typeof se!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof se=="number"&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof se=="number"&&Math.floor(se)!==se)return Z.error("Numeric branch labels must be integer values.");if(A){if(Z.checkSubtype(A,ei(se)))return null}else A=ei(se);if(v[String(se)]!==void 0)return Z.error("Branch labels must be unique.");v[String(se)]=_.length}const Y=s.parse(G,k,p);if(!Y)return null;p=p||Y.type,_.push(Y)}const B=s.parse(t[1],1,hn);if(!B)return null;const F=s.parse(t[t.length-1],t.length-1,p);return F?B.type.kind!=="value"&&s.concat(1).checkSubtype(A,B.type)?null:new xn(A,p,B,v,_,F):null}evaluate(t){const s=this.input.evaluate(t);return(ei(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class jo{constructor(t,s,A){this.type=t,this.branches=s,this.otherwise=A}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return s.error("Expected an odd number of arguments.");let A;s.expectedType&&s.expectedType.kind!=="value"&&(A=s.expectedType);const p=[];for(let _=1;_<t.length-1;_+=2){const B=s.parse(t[_],_,An);if(!B)return null;const F=s.parse(t[_+1],_+1,A);if(!F)return null;p.push([B,F]),A=A||F.type}const v=s.parse(t[t.length-1],t.length-1,A);if(!v)return null;if(!A)throw new Error("Can't infer output type");return new jo(A,p,v)}evaluate(t){for(const[s,A]of this.branches)if(s.evaluate(t))return A.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[s,A]of this.branches)t(s),t(A);t(this.otherwise)}outputDefined(){return this.branches.every((([t,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class Ci{constructor(t,s,A,p){this.type=t,this.input=s,this.beginIndex=A,this.endIndex=p}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,hn),p=s.parse(t[2],2,dr);if(!A||!p)return null;if(!ol(A.type,[Bi(hn),rn,hn]))return s.error(`Expected first argument to be of type array or string, but found ${Hn(A.type)} instead`);if(t.length===4){const v=s.parse(t[3],3,dr);return v?new Ci(A.type,A,p,v):null}return new Ci(A.type,A,p)}evaluate(t){const s=this.input.evaluate(t),A=this.beginIndex.evaluate(t);let p;if(this.endIndex&&(p=this.endIndex.evaluate(t)),Ms(s,["string"]))return[...s].slice(A,p).join("");if(Ms(s,["array"]))return s.slice(A,p);throw new ni(`Expected first argument to be of type array or string, but found ${Hn(ei(s))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function so(o,t){const s=o.length-1;let A,p,v=0,_=s,B=0;for(;v<=_;)if(B=Math.floor((v+_)/2),A=o[B],p=o[B+1],A<=t){if(B===s||t<p)return B;v=B+1}else{if(!(A>t))throw new ni("Input is not a number.");_=B-1}return 0}class ua{constructor(t,s,A){this.type=t,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of A)this.labels.push(p),this.outputs.push(v)}static parse(t,s){if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");const A=s.parse(t[1],1,dr);if(!A)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<t.length;_+=2){const B=_===1?-1/0:t[_],F=t[_+1],k=_,N=_+1;if(typeof B!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(p.length&&p[p.length-1][0]>=B)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const G=s.parse(F,N,v);if(!G)return null;v=v||G.type,p.push([B,G])}return new ua(v,A,p)}evaluate(t){const s=this.labels,A=this.outputs;if(s.length===1)return A[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return A[0].evaluate(t);const v=s.length;return p>=s[v-1]?A[v-1].evaluate(t):A[so(s,p)].evaluate(t)}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function j(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var me,Je,mt=(function(){if(Je)return me;function o(t,s,A,p){this.cx=3*t,this.bx=3*(A-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=s,this.p2x=A,this.p2y=p}return Je=1,me=o,o.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,s){if(s===void 0&&(s=1e-6),t<0)return 0;if(t>1)return 1;for(var A=t,p=0;p<8;p++){var v=this.sampleCurveX(A)-t;if(Math.abs(v)<s)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=v/_}var B=0,F=1;for(A=t,p=0;p<20&&(v=this.sampleCurveX(A),!(Math.abs(v-t)<s));p++)t>v?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))}},me})(),Ft=j(mt);class Vt{constructor(t,s,A,p,v){this.type=t,this.operator=s,this.interpolation=A,this.input=p,this.labels=[],this.outputs=[];for(const[_,B]of v)this.labels.push(_),this.outputs.push(B)}static interpolationFactor(t,s,A,p){let v=0;if(t.name==="exponential")v=ir(s,t.base,A,p);else if(t.name==="linear")v=ir(s,1,A,p);else if(t.name==="cubic-bezier"){const _=t.controlPoints;v=new Ft(_[0],_[1],_[2],_[3]).solve(ir(s,1,A,p))}return v}static parse(t,s){let[A,p,v,..._]=t;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const k=p[1];if(typeof k!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:k}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const k=p.slice(1);if(k.length!==4||k.some((N=>typeof N!="number"||N<0||N>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:k}}}if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,dr),!v)return null;const B=[];let F=null;A!=="interpolate-hcl"&&A!=="interpolate-lab"||s.expectedType==xc?s.expectedType&&s.expectedType.kind!=="value"&&(F=s.expectedType):F=Di;for(let k=0;k<_.length;k+=2){const N=_[k],G=_[k+1],Z=k+3,Y=k+4;if(typeof N!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(B.length&&B[B.length-1][0]>=N)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const se=s.parse(G,Y,F);if(!se)return null;F=F||se.type,B.push([N,se])}return Uo(F,dr)||Uo(F,xl)||Uo(F,Di)||Uo(F,Zl)||Uo(F,fi)||Uo(F,xc)||Uo(F,bl)||Uo(F,Bi(dr))?new Vt(F,A,p,v,B):s.error(`Type ${Hn(F)} is not interpolatable.`)}evaluate(t){const s=this.labels,A=this.outputs;if(s.length===1)return A[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return A[0].evaluate(t);const v=s.length;if(p>=s[v-1])return A[v-1].evaluate(t);const _=so(s,p),B=Vt.interpolationFactor(this.interpolation,p,s[_],s[_+1]),F=A[_].evaluate(t),k=A[_+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return aa(F,k,B);case"color":return on.interpolate(F,k,B);case"padding":return Kr.interpolate(F,k,B);case"colorArray":return ln.interpolate(F,k,B);case"numberArray":return Yn.interpolate(F,k,B);case"variableAnchorOffsetCollection":return $i.interpolate(F,k,B);case"array":return al(F,k,B);case"projectionDefinition":return vs.interpolate(F,k,B)}case"interpolate-hcl":switch(this.type.kind){case"color":return on.interpolate(F,k,B,"hcl");case"colorArray":return ln.interpolate(F,k,B,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return on.interpolate(F,k,B,"lab");case"colorArray":return ln.interpolate(F,k,B,"lab")}}}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function ir(o,t,s,A){const p=A-s,v=o-s;return p===0?0:t===1?v/p:(Math.pow(t,v)-1)/(Math.pow(t,p)-1)}const xr={color:on.interpolate,number:aa,padding:Kr.interpolate,numberArray:Yn.interpolate,colorArray:ln.interpolate,variableAnchorOffsetCollection:$i.interpolate,array:al};class jr{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let A=null;const p=s.expectedType;p&&p.kind!=="value"&&(A=p);const v=[];for(const B of t.slice(1)){const F=s.parse(B,1+v.length,A,void 0,{typeAnnotation:"omit"});if(!F)return null;A=A||F.type,v.push(F)}if(!A)throw new Error("No output type");const _=p&&v.some((B=>sl(p,B.type)));return new jr(_?hn:A,v)}evaluate(t){let s,A=null,p=0;for(const v of this.args)if(p++,A=v.evaluate(t),A&&A instanceof co&&!A.available&&(s||(s=A.name),A=null,p===this.args.length&&(A=s)),A!==null)break;return A}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function mn(o,t){return o==="=="||o==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function gn(o,t,s,A){return A.compare(t,s)===0}function cn(o,t,s){const A=o!=="=="&&o!=="!=";return class PF{constructor(v,_,B){this.type=An,this.lhs=v,this.rhs=_,this.collator=B,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const B=v[0];let F=_.parse(v[1],1,hn);if(!F)return null;if(!mn(B,F.type))return _.concat(1).error(`"${B}" comparisons are not supported for type '${Hn(F.type)}'.`);let k=_.parse(v[2],2,hn);if(!k)return null;if(!mn(B,k.type))return _.concat(2).error(`"${B}" comparisons are not supported for type '${Hn(k.type)}'.`);if(F.type.kind!==k.type.kind&&F.type.kind!=="value"&&k.type.kind!=="value")return _.error(`Cannot compare types '${Hn(F.type)}' and '${Hn(k.type)}'.`);A&&(F.type.kind==="value"&&k.type.kind!=="value"?F=new Gs(k.type,[F]):F.type.kind!=="value"&&k.type.kind==="value"&&(k=new Gs(F.type,[k])));let N=null;if(v.length===4){if(F.type.kind!=="string"&&k.type.kind!=="string"&&F.type.kind!=="value"&&k.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(N=_.parse(v[3],3,nl),!N)return null}return new PF(F,k,N)}evaluate(v){const _=this.lhs.evaluate(v),B=this.rhs.evaluate(v);if(A&&this.hasUntypedArgument){const F=ei(_),k=ei(B);if(F.kind!==k.kind||F.kind!=="string"&&F.kind!=="number")throw new ni(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${F.kind}, ${k.kind}) instead.`)}if(this.collator&&!A&&this.hasUntypedArgument){const F=ei(_),k=ei(B);if(F.kind!=="string"||k.kind!=="string")return t(v,_,B)}return this.collator?s(v,_,B,this.collator.evaluate(v)):t(v,_,B)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Hi=cn("==",(function(o,t,s){return t===s}),gn),ns=cn("!=",(function(o,t,s){return t!==s}),(function(o,t,s,A){return!gn(0,t,s,A)})),Si=cn("<",(function(o,t,s){return t<s}),(function(o,t,s,A){return A.compare(t,s)<0})),ks=cn(">",(function(o,t,s){return t>s}),(function(o,t,s,A){return A.compare(t,s)>0})),Li=cn("<=",(function(o,t,s){return t<=s}),(function(o,t,s,A){return A.compare(t,s)<=0})),_s=cn(">=",(function(o,t,s){return t>=s}),(function(o,t,s,A){return A.compare(t,s)>=0}));class Vo{constructor(t,s,A){this.type=nl,this.locale=A,this.caseSensitive=t,this.diacriticSensitive=s}static parse(t,s){if(t.length!==2)return s.error("Expected one argument.");const A=t[1];if(typeof A!="object"||Array.isArray(A))return s.error("Collator options argument must be an object.");const p=s.parse(A["case-sensitive"]!==void 0&&A["case-sensitive"],1,An);if(!p)return null;const v=s.parse(A["diacritic-sensitive"]!==void 0&&A["diacritic-sensitive"],1,An);if(!v)return null;let _=null;return A.locale&&(_=s.parse(A.locale,1,rn),!_)?null:new Vo(p,v,_)}evaluate(t){return new Ba(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class ha{constructor(t,s,A,p,v){this.type=rn,this.number=t,this.locale=s,this.currency=A,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(t,s){if(t.length!==3)return s.error("Expected two arguments.");const A=s.parse(t[1],1,dr);if(!A)return null;const p=t[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,rn),!v))return null;let _=null;if(p.currency&&(_=s.parse(p.currency,1,rn),!_))return null;let B=null;if(p["min-fraction-digits"]&&(B=s.parse(p["min-fraction-digits"],1,dr),!B))return null;let F=null;return p["max-fraction-digits"]&&(F=s.parse(p["max-fraction-digits"],1,dr),!F)?null:new ha(A,v,_,B,F)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class fa{constructor(t){this.type=il,this.sections=t}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const A=t[1];if(!Array.isArray(A)&&typeof A=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let _=1;_<=t.length-1;++_){const B=t[_];if(v&&typeof B=="object"&&!Array.isArray(B)){v=!1;let F=null;if(B["font-scale"]&&(F=s.parse(B["font-scale"],1,dr),!F))return null;let k=null;if(B["text-font"]&&(k=s.parse(B["text-font"],1,Bi(rn)),!k))return null;let N=null;if(B["text-color"]&&(N=s.parse(B["text-color"],1,Di),!N))return null;let G=null;if(B["vertical-align"]){if(typeof B["vertical-align"]=="string"&&!Qo.includes(B["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${B["vertical-align"]}' instead.`);if(G=s.parse(B["vertical-align"],1,rn),!G)return null}const Z=p[p.length-1];Z.scale=F,Z.font=k,Z.textColor=N,Z.verticalAlign=G}else{const F=s.parse(t[_],1,hn);if(!F)return null;const k=F.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new fa(p)}evaluate(t){return new gs(this.sections.map((s=>{const A=s.content.evaluate(t);return ei(A)===Xl?new Oo("",A,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(t):null):new Oo(la(A),null,s.scale?s.scale.evaluate(t):null,s.font?s.font.evaluate(t).join(","):null,s.textColor?s.textColor.evaluate(t):null,s.verticalAlign?s.verticalAlign.evaluate(t):null)})))}eachChild(t){for(const s of this.sections)t(s.content),s.scale&&t(s.scale),s.font&&t(s.font),s.textColor&&t(s.textColor),s.verticalAlign&&t(s.verticalAlign)}outputDefined(){return!1}}class Fa{constructor(t){this.type=Xl,this.input=t}static parse(t,s){if(t.length!==2)return s.error("Expected two arguments.");const A=s.parse(t[1],1,rn);return A?new Fa(A):s.error("No image name provided.")}evaluate(t){const s=this.input.evaluate(t),A=co.fromString(s);return A&&t.availableImages&&(A.available=t.availableImages.indexOf(s)>-1),A}eachChild(t){t(this.input)}outputDefined(){return!1}}class cl{constructor(t){this.type=dr,this.input=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const A=s.parse(t[1],1);return A?A.type.kind!=="array"&&A.type.kind!=="string"&&A.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Hn(A.type)} instead.`):new cl(A):null}evaluate(t){const s=this.input.evaluate(t);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new ni(`Expected value to be of type string or array, but found ${Hn(ei(s))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Ei=8192;function Sc(o,t){const s=(180+o[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(s*p*Ei),Math.round(A*p*Ei)]}function da(o,t){const s=Math.pow(2,t.z);return[(p=(o[0]/Ei+t.x)/s,360*p-180),(A=(o[1]/Ei+t.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90)];var A,p}function Ia(o,t){o[0]=Math.min(o[0],t[0]),o[1]=Math.min(o[1],t[1]),o[2]=Math.max(o[2],t[0]),o[3]=Math.max(o[3],t[1])}function Zi(o,t){return!(o[0]<=t[0]||o[2]>=t[2]||o[1]<=t[1]||o[3]>=t[3])}function rA(o,t,s){const A=o[0]-t[0],p=o[1]-t[1],v=o[0]-s[0],_=o[1]-s[1];return A*_-v*p==0&&A*v<=0&&p*_<=0}function Sl(o,t,s,A){return(p=[A[0]-s[0],A[1]-s[1]])[0]*(v=[t[0]-o[0],t[1]-o[1]])[1]-p[1]*v[0]!=0&&!(!FA(o,t,s,A)||!FA(s,A,o,t));var p,v}function tu(o,t,s){for(const A of s)for(let p=0;p<A.length-1;++p)if(Sl(o,t,A[p],A[p+1]))return!0;return!1}function El(o,t,s=!1){let A=!1;for(const B of t)for(let F=0;F<B.length-1;F++){if(rA(o,B[F],B[F+1]))return s;(v=B[F])[1]>(p=o)[1]!=(_=B[F+1])[1]>p[1]&&p[0]<(_[0]-v[0])*(p[1]-v[1])/(_[1]-v[1])+v[0]&&(A=!A)}var p,v,_;return A}function Ks(o,t){for(const s of t)if(El(o,s))return!0;return!1}function Ta(o,t){for(const s of o)if(!El(s,t))return!1;for(let s=0;s<o.length-1;++s)if(tu(o[s],o[s+1],t))return!1;return!0}function Al(o,t){for(const s of t)if(Ta(o,s))return!0;return!1}function FA(o,t,s,A){const p=A[0]-s[0],v=A[1]-s[1],_=(o[0]-s[0])*v-p*(o[1]-s[1]),B=(t[0]-s[0])*v-p*(t[1]-s[1]);return _>0&&B<0||_<0&&B>0}function xo(o,t,s){const A=[];for(let p=0;p<o.length;p++){const v=[];for(let _=0;_<o[p].length;_++){const B=Sc(o[p][_],s);Ia(t,B),v.push(B)}A.push(v)}return A}function Fl(o,t,s){const A=[];for(let p=0;p<o.length;p++){const v=xo(o[p],t,s);A.push(v)}return A}function nA(o,t,s,A){if(o[0]<s[0]||o[0]>s[2]){const p=.5*A;let v=o[0]-s[0]>p?-A:s[0]-o[0]>p?A:0;v===0&&(v=o[0]-s[2]>p?-A:s[2]-o[0]>p?A:0),o[0]+=v}Ia(t,o)}function iA(o,t,s,A){const p=Math.pow(2,A.z)*Ei,v=[A.x*Ei,A.y*Ei],_=[];for(const B of o)for(const F of B){const k=[F.x+v[0],F.y+v[1]];nA(k,t,s,p),_.push(k)}return _}function Il(o,t,s,A){const p=Math.pow(2,A.z)*Ei,v=[A.x*Ei,A.y*Ei],_=[];for(const F of o){const k=[];for(const N of F){const G=[N.x+v[0],N.y+v[1]];Ia(t,G),k.push(G)}_.push(k)}if(t[2]-t[0]<=p/2){(B=t)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const F of _)for(const k of F)nA(k,t,s,p)}var B;return _}class qs{constructor(t,s){this.type=An,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Sa(t[1])){const A=t[1];if(A.type==="FeatureCollection"){const p=[];for(const v of A.features){const{type:_,coordinates:B}=v.geometry;_==="Polygon"&&p.push(B),_==="MultiPolygon"&&p.push(...B)}if(p.length)return new qs(A,{type:"MultiPolygon",coordinates:p})}else if(A.type==="Feature"){const p=A.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new qs(A,A.geometry)}else if(A.type==="Polygon"||A.type==="MultiPolygon")return new qs(A,A)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(s,A){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(A.type==="Polygon"){const B=xo(A.coordinates,v,_),F=iA(s.geometry(),p,v,_);if(!Zi(p,v))return!1;for(const k of F)if(!El(k,B))return!1}if(A.type==="MultiPolygon"){const B=Fl(A.coordinates,v,_),F=iA(s.geometry(),p,v,_);if(!Zi(p,v))return!1;for(const k of F)if(!Ks(k,B))return!1}return!0})(t,this.geometries);if(t.geometryType()==="LineString")return(function(s,A){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(A.type==="Polygon"){const B=xo(A.coordinates,v,_),F=Il(s.geometry(),p,v,_);if(!Zi(p,v))return!1;for(const k of F)if(!Ta(k,B))return!1}if(A.type==="MultiPolygon"){const B=Fl(A.coordinates,v,_),F=Il(s.geometry(),p,v,_);if(!Zi(p,v))return!1;for(const k of F)if(!Al(k,B))return!1}return!0})(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Go=class{constructor(o=[],t=(s,A)=>s<A?-1:s>A?1:0){if(this.data=o,this.length=this.data.length,this.compare=t,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:t,compare:s}=this,A=t[o];for(;o>0;){const p=o-1>>1,v=t[p];if(s(A,v)>=0)break;t[o]=v,o=p}t[o]=A}_down(o){const{data:t,compare:s}=this,A=this.length>>1,p=t[o];for(;o<A;){let v=1+(o<<1);const _=v+1;if(_<this.length&&s(t[_],t[v])<0&&(v=_),s(t[v],p)>=0)break;t[o]=t[v],o=v}t[o]=p}};function bo(o,t,s=0,A=o.length-1,p=ul){for(;A>s;){if(A-s>600){const F=A-s+1,k=t-s+1,N=Math.log(F),G=.5*Math.exp(2*N/3),Z=.5*Math.sqrt(N*G*(F-G)/F)*(k-F/2<0?-1:1);bo(o,t,Math.max(s,Math.floor(t-k*G/F+Z)),Math.min(A,Math.floor(t+(F-k)*G/F+Z)),p)}const v=o[t];let _=s,B=A;for(pa(o,s,t),p(o[A],v)>0&&pa(o,s,A);_<B;){for(pa(o,_,B),_++,B--;p(o[_],v)<0;)_++;for(;p(o[B],v)>0;)B--}p(o[s],v)===0?pa(o,s,B):(B++,pa(o,B,A)),B<=t&&(s=B+1),t<=B&&(A=B-1)}}function pa(o,t,s){const A=o[t];o[t]=o[s],o[s]=A}function ul(o,t){return o<t?-1:o>t?1:0}function Pa(o,t){if(o.length<=1)return[o];const s=[];let A,p;for(const v of o){const _=Tl(v);_!==0&&(v.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(A&&s.push(A),A=[v]):A.push(v))}if(A&&s.push(A),t>1)for(let v=0;v<s.length;v++)s[v].length<=t||(bo(s[v],t,1,s[v].length-1,rc),s[v]=s[v].slice(0,t));return s}function rc(o,t){return t.area-o.area}function Tl(o){let t=0;for(let s,A,p=0,v=o.length,_=v-1;p<v;_=p++)s=o[p],A=o[_],t+=(A.x-s.x)*(s.y+A.y);return t}const is=1/298.257223563,hl=is*(2-is),fl=Math.PI/180;class ma{constructor(t){const s=6378.137*fl*1e3,A=Math.cos(t*fl),p=1/(1-hl*(1-A*A)),v=Math.sqrt(p);this.kx=s*v*A,this.ky=s*v*p*(1-hl)}distance(t,s){const A=this.wrap(t[0]-s[0])*this.kx,p=(t[1]-s[1])*this.ky;return Math.sqrt(A*A+p*p)}pointOnLine(t,s){let A,p,v,_,B=1/0;for(let F=0;F<t.length-1;F++){let k=t[F][0],N=t[F][1],G=this.wrap(t[F+1][0]-k)*this.kx,Z=(t[F+1][1]-N)*this.ky,Y=0;G===0&&Z===0||(Y=(this.wrap(s[0]-k)*this.kx*G+(s[1]-N)*this.ky*Z)/(G*G+Z*Z),Y>1?(k=t[F+1][0],N=t[F+1][1]):Y>0&&(k+=G/this.kx*Y,N+=Z/this.ky*Y)),G=this.wrap(s[0]-k)*this.kx,Z=(s[1]-N)*this.ky;const se=G*G+Z*Z;se<B&&(B=se,A=k,p=N,v=F,_=Y)}return{point:[A,p],index:v,t:Math.max(0,Math.min(1,_))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Ec(o,t){return t[0]-o[0]}function Pl(o){return o[1]-o[0]+1}function Ao(o,t){return o[1]>=o[0]&&o[1]<t}function nc(o,t){if(o[0]>o[1])return[null,null];const s=Pl(o);if(t){if(s===2)return[o,null];const p=Math.floor(s/2);return[[o[0],o[0]+p],[o[0]+p,o[1]]]}if(s===1)return[o,null];const A=Math.floor(s/2)-1;return[[o[0],o[0]+A],[o[0]+A+1,o[1]]]}function dl(o,t){if(!Ao(t,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let A=t[0];A<=t[1];++A)Ia(s,o[A]);return s}function Ll(o){const t=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const A of s)Ia(t,A);return t}function Ml(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function kl(o,t,s){if(!Ml(o)||!Ml(t))return NaN;let A=0,p=0;return o[2]<t[0]&&(A=t[0]-o[2]),o[0]>t[2]&&(A=o[0]-t[2]),o[1]>t[3]&&(p=o[1]-t[3]),o[3]<t[1]&&(p=t[1]-o[3]),s.distance([0,0],[A,p])}function Ko(o,t,s){const A=s.pointOnLine(t,o);return s.distance(o,A.point)}function ic(o,t,s,A,p){const v=Math.min(Ko(o,[s,A],p),Ko(t,[s,A],p)),_=Math.min(Ko(s,[o,t],p),Ko(A,[o,t],p));return Math.min(v,_)}function ss(o,t,s,A,p){if(!Ao(t,o.length)||!Ao(A,s.length))return 1/0;let v=1/0;for(let _=t[0];_<t[1];++_){const B=o[_],F=o[_+1];for(let k=A[0];k<A[1];++k){const N=s[k],G=s[k+1];if(Sl(B,F,N,G))return 0;v=Math.min(v,ic(B,F,N,G,p))}}return v}function Bo(o,t,s,A,p){if(!Ao(t,o.length)||!Ao(A,s.length))return NaN;let v=1/0;for(let _=t[0];_<=t[1];++_)for(let B=A[0];B<=A[1];++B)if(v=Math.min(v,p.distance(o[_],s[B])),v===0)return v;return v}function ii(o,t,s){if(El(o,t,!0))return 0;let A=1/0;for(const p of t){const v=p[0],_=p[p.length-1];if(v!==_&&(A=Math.min(A,Ko(o,[_,v],s)),A===0))return A;const B=s.pointOnLine(p,o);if(A=Math.min(A,s.distance(o,B.point)),A===0)return A}return A}function vi(o,t,s,A){if(!Ao(t,o.length))return NaN;for(let v=t[0];v<=t[1];++v)if(El(o[v],s,!0))return 0;let p=1/0;for(let v=t[0];v<t[1];++v){const _=o[v],B=o[v+1];for(const F of s)for(let k=0,N=F.length,G=N-1;k<N;G=k++){const Z=F[G],Y=F[k];if(Sl(_,B,Z,Y))return 0;p=Math.min(p,ic(_,B,Z,Y,A))}}return p}function Xi(o,t){for(const s of o)for(const A of s)if(El(A,t,!0))return!0;return!1}function ws(o,t,s,A=1/0){const p=Ll(o),v=Ll(t);if(A!==1/0&&kl(p,v,s)>=A)return A;if(Zi(p,v)){if(Xi(o,t))return 0}else if(Xi(t,o))return 0;let _=1/0;for(const B of o)for(let F=0,k=B.length,N=k-1;F<k;N=F++){const G=B[N],Z=B[F];for(const Y of t)for(let se=0,ae=Y.length,ue=ae-1;se<ae;ue=se++){const xe=Y[ue],et=Y[se];if(Sl(G,Z,xe,et))return 0;_=Math.min(_,ic(G,Z,xe,et,s))}}return _}function Tn(o,t,s,A,p,v){if(!v)return;const _=kl(dl(A,v),p,s);_<t&&o.push([_,v,[0,0]])}function Fc(o,t,s,A,p,v,_){if(!v||!_)return;const B=kl(dl(A,v),dl(p,_),s);B<t&&o.push([B,v,_])}function sc(o,t,s,A,p=1/0){let v=Math.min(A.distance(o[0],s[0][0]),p);if(v===0)return v;const _=new Go([[0,[0,o.length-1],[0,0]]],Ec),B=Ll(s);for(;_.length>0;){const F=_.pop();if(F[0]>=v)continue;const k=F[1],N=t?50:100;if(Pl(k)<=N){if(!Ao(k,o.length))return NaN;if(t){const G=vi(o,k,s,A);if(isNaN(G)||G===0)return G;v=Math.min(v,G)}else for(let G=k[0];G<=k[1];++G){const Z=ii(o[G],s,A);if(v=Math.min(v,Z),v===0)return 0}}else{const G=nc(k,t);Tn(_,v,A,o,B,G[0]),Tn(_,v,A,o,B,G[1])}}return v}function La(o,t,s,A,p,v=1/0){let _=Math.min(v,p.distance(o[0],s[0]));if(_===0)return _;const B=new Go([[0,[0,o.length-1],[0,s.length-1]]],Ec);for(;B.length>0;){const F=B.pop();if(F[0]>=_)continue;const k=F[1],N=F[2],G=t?50:100,Z=A?50:100;if(Pl(k)<=G&&Pl(N)<=Z){if(!Ao(k,o.length)&&Ao(N,s.length))return NaN;let Y;if(t&&A)Y=ss(o,k,s,N,p),_=Math.min(_,Y);else if(t&&!A){const se=o.slice(k[0],k[1]+1);for(let ae=N[0];ae<=N[1];++ae)if(Y=Ko(s[ae],se,p),_=Math.min(_,Y),_===0)return _}else if(!t&&A){const se=s.slice(N[0],N[1]+1);for(let ae=k[0];ae<=k[1];++ae)if(Y=Ko(o[ae],se,p),_=Math.min(_,Y),_===0)return _}else Y=Bo(o,k,s,N,p),_=Math.min(_,Y)}else{const Y=nc(k,t),se=nc(N,A);Fc(B,_,p,o,s,Y[0],se[0]),Fc(B,_,p,o,s,Y[0],se[1]),Fc(B,_,p,o,s,Y[1],se[0]),Fc(B,_,p,o,s,Y[1],se[1])}}return _}function IA(o){return o.type==="MultiPolygon"?o.coordinates.map((t=>({type:"Polygon",coordinates:t}))):o.type==="MultiLineString"?o.coordinates.map((t=>({type:"LineString",coordinates:t}))):o.type==="MultiPoint"?o.coordinates.map((t=>({type:"Point",coordinates:t}))):[o]}class Ma{constructor(t,s){this.type=dr,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Sa(t[1])){const A=t[1];if(A.type==="FeatureCollection")return new Ma(A,A.features.map((p=>IA(p.geometry))).flat());if(A.type==="Feature")return new Ma(A,IA(A.geometry));if("type"in A&&"coordinates"in A)return new Ma(A,IA(A))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(s,A){const p=s.geometry(),v=p.flat().map((F=>da([F.x,F.y],s.canonical)));if(p.length===0)return NaN;const _=new ma(v[0][1]);let B=1/0;for(const F of A){switch(F.type){case"Point":B=Math.min(B,La(v,!1,[F.coordinates],!1,_,B));break;case"LineString":B=Math.min(B,La(v,!1,F.coordinates,!0,_,B));break;case"Polygon":B=Math.min(B,sc(v,!1,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries);if(t.geometryType()==="LineString")return(function(s,A){const p=s.geometry(),v=p.flat().map((F=>da([F.x,F.y],s.canonical)));if(p.length===0)return NaN;const _=new ma(v[0][1]);let B=1/0;for(const F of A){switch(F.type){case"Point":B=Math.min(B,La(v,!0,[F.coordinates],!1,_,B));break;case"LineString":B=Math.min(B,La(v,!0,F.coordinates,!0,_,B));break;case"Polygon":B=Math.min(B,sc(v,!0,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries);if(t.geometryType()==="Polygon")return(function(s,A){const p=s.geometry();if(p.length===0||p[0].length===0)return NaN;const v=Pa(p,0).map((F=>F.map((k=>k.map((N=>da([N.x,N.y],s.canonical))))))),_=new ma(v[0][0][0][1]);let B=1/0;for(const F of A)for(const k of v){switch(F.type){case"Point":B=Math.min(B,sc([F.coordinates],!1,k,_,B));break;case"LineString":B=Math.min(B,sc(F.coordinates,!0,k,_,B));break;case"Polygon":B=Math.min(B,ws(k,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ic{constructor(t){this.type=hn,this.key=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const A=t[1];return A==null?s.error("Global state property must be defined."):typeof A!="string"?s.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Ic(A)}evaluate(t){var s;const A=(s=t.globals)===null||s===void 0?void 0:s.globalState;return A&&Object.keys(A).length!==0?Gn(A,this.key):null}eachChild(){}outputDefined(){return!1}}const Tc={"==":Hi,"!=":ns,">":ks,"<":Si,">=":_s,"<=":Li,array:Gs,at:Cn,boolean:Gs,case:jo,coalesce:jr,collator:Vo,format:fa,image:Fa,in:pn,"index-of":Ea,interpolate:Vt,"interpolate-hcl":Vt,"interpolate-lab":Vt,length:cl,let:Rn,literal:Wi,match:xn,number:Gs,"number-format":ha,object:Gs,slice:Ci,step:ua,string:Gs,"to-boolean":zo,"to-color":zo,"to-number":zo,"to-string":zo,var:Ho,within:qs,distance:Ma,"global-state":Ic};class uo{constructor(t,s,A,p){this.name=t,this.type=s,this._evaluate=A,this.args=p}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,s){const A=t[0],p=uo.definitions[A];if(!p)return s.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,B=_.filter((([k])=>!Array.isArray(k)||k.length===t.length-1));let F=null;for(const[k,N]of B){F=new Aa(s.registry,TA,s.path,null,s.scope);const G=[];let Z=!1;for(let Y=1;Y<t.length;Y++){const se=t[Y],ae=Array.isArray(k)?k[Y-1]:k.type,ue=F.parse(se,1+G.length,ae);if(!ue){Z=!0;break}G.push(ue)}if(!Z)if(Array.isArray(k)&&k.length!==G.length)F.error(`Expected ${k.length} arguments, but found ${G.length} instead.`);else{for(let Y=0;Y<G.length;Y++){const se=Array.isArray(k)?k[Y]:k.type,ae=G[Y];F.concat(Y+1).checkSubtype(se,ae.type)}if(F.errors.length===0)return new uo(A,v,N,G)}}if(B.length===1)s.errors.push(...F.errors);else{const k=(B.length?B:_).map((([G])=>{return Z=G,Array.isArray(Z)?`(${Z.map(Hn).join(", ")})`:`(${Hn(Z.type)}...)`;var Z})).join(" | "),N=[];for(let G=1;G<t.length;G++){const Z=s.parse(t[G],1+N.length);if(!Z)return null;N.push(Hn(Z.type))}s.error(`Expected arguments of type ${k}, but found (${N.join(", ")}) instead.`)}return null}static register(t,s){uo.definitions=s;for(const A in s)t[A]=uo}}function Pc(o,[t,s,A,p]){t=t.evaluate(o),s=s.evaluate(o),A=A.evaluate(o);const v=p?p.evaluate(o):1,_=Ca(t,s,A,v);if(_)throw new ni(_);return new on(t/255,s/255,A/255,v,!1)}function Lc(o,t){return o in t}function ru(o,t){const s=t[o];return s===void 0?null:s}function pl(o){return{type:o}}function TA(o){if(o instanceof Ho)return TA(o.boundExpression);if(o instanceof uo&&o.name==="error"||o instanceof Vo||o instanceof qs||o instanceof Ma||o instanceof Ic)return!1;const t=o instanceof zo||o instanceof Gs;let s=!0;return o.eachChild((A=>{s=t?s&&TA(A):s&&A instanceof Wi})),!!s&&PA(o)&&LA(o,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function PA(o){if(o instanceof uo&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof qs||o instanceof Ma)return!1;let t=!0;return o.eachChild((s=>{t&&!PA(s)&&(t=!1)})),t}function sA(o){if(o instanceof uo&&o.name==="feature-state")return!1;let t=!0;return o.eachChild((s=>{t&&!sA(s)&&(t=!1)})),t}function LA(o,t){if(o instanceof uo&&t.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild((A=>{s&&!LA(A,t)&&(s=!1)})),s}function Pu(o){return{result:"success",value:o}}function Mc(o){return{result:"error",value:o}}function Co(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function oA(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function oo(o){return!!o.expression&&o.expression.interpolated}function dn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function aA(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&ei(o)===Ls}function kc(o){return o}function sh(o,t){const s=o.stops&&typeof o.stops[0][0]=="object",A=s||!(s||o.property!==void 0),p=o.type||(oo(t)?"exponential":"interval"),v=(function(N){switch(N.type){case"color":return on.parse;case"padding":return Kr.parse;case"numberArray":return Yn.parse;case"colorArray":return ln.parse;default:return null}})(t);if(v&&((o=Wn({},o)).stops&&(o.stops=o.stops.map((N=>[N[0],v(N[1])]))),o.default=v(o.default?o.default:t.default)),o.colorSpace&&(_=o.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var _;const B=(function(N){switch(N){case"exponential":return iu;case"interval":return Fi;case"categorical":return nu;case"identity":return MA;default:throw new Error(`Unknown function type "${N}"`)}})(p);let F,k;if(p==="categorical"){F=Object.create(null);for(const N of o.stops)F[N[0]]=N[1];k=typeof o.stops[0][0]}if(s){const N={},G=[];for(let se=0;se<o.stops.length;se++){const ae=o.stops[se],ue=ae[0].zoom;N[ue]===void 0&&(N[ue]={zoom:ue,type:o.type,property:o.property,default:o.default,stops:[]},G.push(ue)),N[ue].stops.push([ae[0].value,ae[1]])}const Z=[];for(const se of G)Z.push([N[se].zoom,sh(N[se],t)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Vt.interpolationFactor.bind(void 0,Y),zoomStops:Z.map((se=>se[0])),evaluate:({zoom:se},ae)=>iu({stops:Z,base:o.base},t,se).evaluate(se,ae)}}if(A){const N=p==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Vt.interpolationFactor.bind(void 0,N),zoomStops:o.stops.map((G=>G[0])),evaluate:({zoom:G})=>B(o,t,G,F,k)}}return{kind:"source",evaluate(N,G){const Z=G&&G.properties?G.properties[o.property]:void 0;return Z===void 0?oc(o.default,t.default):B(o,t,Z,F,k)}}}function oc(o,t,s){return o!==void 0?o:t!==void 0?t:s!==void 0?s:void 0}function nu(o,t,s,A,p){return oc(typeof s===p?A[s]:void 0,o.default,t.default)}function Fi(o,t,s){if(dn(s)!=="number")return oc(o.default,t.default);const A=o.stops.length;if(A===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[A-1][0])return o.stops[A-1][1];const p=so(o.stops.map((v=>v[0])),s);return o.stops[p][1]}function iu(o,t,s){const A=o.base!==void 0?o.base:1;if(dn(s)!=="number")return oc(o.default,t.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=so(o.stops.map((N=>N[0])),s),_=(function(N,G,Z,Y){const se=Y-Z,ae=N-Z;return se===0?0:G===1?ae/se:(Math.pow(G,ae)-1)/(Math.pow(G,se)-1)})(s,A,o.stops[v][0],o.stops[v+1][0]),B=o.stops[v][1],F=o.stops[v+1][1],k=xr[t.type]||kc;return typeof B.evaluate=="function"?{evaluate(...N){const G=B.evaluate.apply(void 0,N),Z=F.evaluate.apply(void 0,N);if(G!==void 0&&Z!==void 0)return k(G,Z,_,o.colorSpace)}}:k(B,F,_,o.colorSpace)}function MA(o,t,s){switch(t.type){case"color":s=on.parse(s);break;case"formatted":s=gs.fromString(s.toString());break;case"resolvedImage":s=co.fromString(s.toString());break;case"padding":s=Kr.parse(s);break;case"colorArray":s=ln.parse(s);break;case"numberArray":s=Yn.parse(s);break;default:dn(s)===t.type||t.type==="enum"&&t.values[s]||(s=void 0)}return oc(s,o.default,t.default)}uo.register(Tc,{error:[{kind:"error"},[rn],(o,[t])=>{throw new ni(t.evaluate(o))}],typeof:[rn,[hn],(o,[t])=>Hn(ei(t.evaluate(o)))],"to-rgba":[Bi(dr,4),[Di],(o,[t])=>{const[s,A,p,v]=t.evaluate(o).rgb;return[255*s,255*A,255*p,v]}],rgb:[Di,[dr,dr,dr],Pc],rgba:[Di,[dr,dr,dr,dr],Pc],has:{type:An,overloads:[[[rn],(o,[t])=>Lc(t.evaluate(o),o.properties())],[[rn,Ls],(o,[t,s])=>Lc(t.evaluate(o),s.evaluate(o))]]},get:{type:hn,overloads:[[[rn],(o,[t])=>ru(t.evaluate(o),o.properties())],[[rn,Ls],(o,[t,s])=>ru(t.evaluate(o),s.evaluate(o))]]},"feature-state":[hn,[rn],(o,[t])=>ru(t.evaluate(o),o.featureState||{})],properties:[Ls,[],o=>o.properties()],"geometry-type":[rn,[],o=>o.geometryType()],id:[hn,[],o=>o.id()],zoom:[dr,[],o=>o.globals.zoom],"heatmap-density":[dr,[],o=>o.globals.heatmapDensity||0],elevation:[dr,[],o=>o.globals.elevation||0],"line-progress":[dr,[],o=>o.globals.lineProgress||0],accumulated:[hn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[dr,pl(dr),(o,t)=>{let s=0;for(const A of t)s+=A.evaluate(o);return s}],"*":[dr,pl(dr),(o,t)=>{let s=1;for(const A of t)s*=A.evaluate(o);return s}],"-":{type:dr,overloads:[[[dr,dr],(o,[t,s])=>t.evaluate(o)-s.evaluate(o)],[[dr],(o,[t])=>-t.evaluate(o)]]},"/":[dr,[dr,dr],(o,[t,s])=>t.evaluate(o)/s.evaluate(o)],"%":[dr,[dr,dr],(o,[t,s])=>t.evaluate(o)%s.evaluate(o)],ln2:[dr,[],()=>Math.LN2],pi:[dr,[],()=>Math.PI],e:[dr,[],()=>Math.E],"^":[dr,[dr,dr],(o,[t,s])=>Math.pow(t.evaluate(o),s.evaluate(o))],sqrt:[dr,[dr],(o,[t])=>Math.sqrt(t.evaluate(o))],log10:[dr,[dr],(o,[t])=>Math.log(t.evaluate(o))/Math.LN10],ln:[dr,[dr],(o,[t])=>Math.log(t.evaluate(o))],log2:[dr,[dr],(o,[t])=>Math.log(t.evaluate(o))/Math.LN2],sin:[dr,[dr],(o,[t])=>Math.sin(t.evaluate(o))],cos:[dr,[dr],(o,[t])=>Math.cos(t.evaluate(o))],tan:[dr,[dr],(o,[t])=>Math.tan(t.evaluate(o))],asin:[dr,[dr],(o,[t])=>Math.asin(t.evaluate(o))],acos:[dr,[dr],(o,[t])=>Math.acos(t.evaluate(o))],atan:[dr,[dr],(o,[t])=>Math.atan(t.evaluate(o))],min:[dr,pl(dr),(o,t)=>Math.min(...t.map((s=>s.evaluate(o))))],max:[dr,pl(dr),(o,t)=>Math.max(...t.map((s=>s.evaluate(o))))],abs:[dr,[dr],(o,[t])=>Math.abs(t.evaluate(o))],round:[dr,[dr],(o,[t])=>{const s=t.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[dr,[dr],(o,[t])=>Math.floor(t.evaluate(o))],ceil:[dr,[dr],(o,[t])=>Math.ceil(t.evaluate(o))],"filter-==":[An,[rn,hn],(o,[t,s])=>o.properties()[t.value]===s.value],"filter-id-==":[An,[hn],(o,[t])=>o.id()===t.value],"filter-type-==":[An,[rn],(o,[t])=>o.geometryType()===t.value],"filter-<":[An,[rn,hn],(o,[t,s])=>{const A=o.properties()[t.value],p=s.value;return typeof A==typeof p&&A<p}],"filter-id-<":[An,[hn],(o,[t])=>{const s=o.id(),A=t.value;return typeof s==typeof A&&s<A}],"filter->":[An,[rn,hn],(o,[t,s])=>{const A=o.properties()[t.value],p=s.value;return typeof A==typeof p&&A>p}],"filter-id->":[An,[hn],(o,[t])=>{const s=o.id(),A=t.value;return typeof s==typeof A&&s>A}],"filter-<=":[An,[rn,hn],(o,[t,s])=>{const A=o.properties()[t.value],p=s.value;return typeof A==typeof p&&A<=p}],"filter-id-<=":[An,[hn],(o,[t])=>{const s=o.id(),A=t.value;return typeof s==typeof A&&s<=A}],"filter->=":[An,[rn,hn],(o,[t,s])=>{const A=o.properties()[t.value],p=s.value;return typeof A==typeof p&&A>=p}],"filter-id->=":[An,[hn],(o,[t])=>{const s=o.id(),A=t.value;return typeof s==typeof A&&s>=A}],"filter-has":[An,[hn],(o,[t])=>t.value in o.properties()],"filter-has-id":[An,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[An,[Bi(rn)],(o,[t])=>t.value.indexOf(o.geometryType())>=0],"filter-id-in":[An,[Bi(hn)],(o,[t])=>t.value.indexOf(o.id())>=0],"filter-in-small":[An,[rn,Bi(hn)],(o,[t,s])=>s.value.indexOf(o.properties()[t.value])>=0],"filter-in-large":[An,[rn,Bi(hn)],(o,[t,s])=>(function(A,p,v,_){for(;v<=_;){const B=v+_>>1;if(p[B]===A)return!0;p[B]>A?_=B-1:v=B+1}return!1})(o.properties()[t.value],s.value,0,s.value.length-1)],all:{type:An,overloads:[[[An,An],(o,[t,s])=>t.evaluate(o)&&s.evaluate(o)],[pl(An),(o,t)=>{for(const s of t)if(!s.evaluate(o))return!1;return!0}]]},any:{type:An,overloads:[[[An,An],(o,[t,s])=>t.evaluate(o)||s.evaluate(o)],[pl(An),(o,t)=>{for(const s of t)if(s.evaluate(o))return!0;return!1}]]},"!":[An,[An],(o,[t])=>!t.evaluate(o)],"is-supported-script":[An,[rn],(o,[t])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(t.evaluate(o))}],upcase:[rn,[rn],(o,[t])=>t.evaluate(o).toUpperCase()],downcase:[rn,[rn],(o,[t])=>t.evaluate(o).toLowerCase()],concat:[rn,pl(hn),(o,t)=>t.map((s=>la(s.evaluate(o)))).join("")],"resolved-locale":[rn,[nl],(o,[t])=>t.evaluate(o).resolvedLocale()]});class ac{constructor(t,s,A){this.expression=t,this._warningHistory={},this._evaluator=new tc,this._defaultValue=s?(function(p){if(p.type==="color"&&aA(p.default))return new on(0,0,0,0);switch(p.type){case"color":return on.parse(p.default)||null;case"padding":return Kr.parse(p.default)||null;case"numberArray":return Yn.parse(p.default)||null;case"colorArray":return ln.parse(p.default)||null;case"variableAnchorOffsetCollection":return $i.parse(p.default)||null;case"projectionDefinition":return vs.parse(p.default)||null;default:return p.default===void 0?null:p.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=A}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=Rc(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=s,this._evaluator.featureState=A,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(t,s,A,p,v,_){this._globalState&&(t=Rc(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=s||null,this._evaluator.featureState=A||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new ni(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){return this._warningHistory[B.message]||(this._warningHistory[B.message]=!0,typeof console<"u"&&console.warn(B.message)),this._defaultValue}}}function Ul(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Tc}function Uc(o,t,s){const A=new Aa(Tc,TA,[],t?(function(v){const _={color:Di,string:rn,number:dr,enum:rn,boolean:An,formatted:il,padding:Zl,numberArray:fi,colorArray:xc,projectionDefinition:xl,resolvedImage:Xl,variableAnchorOffsetCollection:bl};return v.type==="array"?Bi(_[v.value]||hn,v.length):_[v.type]})(t):void 0),p=A.parse(o,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Pu(new ac(p,t,s)):Mc(A.errors)}class Dc{constructor(t,s,A){this.kind=t,this._styleExpression=s,this.isStateDependent=t!=="constant"&&!sA(s.expression),this.globalStateRefs=lA(s.expression),this._globalState=A}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=Rc(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,s,A,p,v,_)}evaluate(t,s,A,p,v,_){return this._globalState&&(t=Rc(t,this._globalState)),this._styleExpression.evaluate(t,s,A,p,v,_)}}class kA{constructor(t,s,A,p,v){this.kind=t,this.zoomStops=A,this._styleExpression=s,this.isStateDependent=t!=="camera"&&!sA(s.expression),this.globalStateRefs=lA(s.expression),this.interpolationType=p,this._globalState=v}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=Rc(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,s,A,p,v,_)}evaluate(t,s,A,p,v,_){return this._globalState&&(t=Rc(t,this._globalState)),this._styleExpression.evaluate(t,s,A,p,v,_)}interpolationFactor(t,s,A){return this.interpolationType?Vt.interpolationFactor(this.interpolationType,t,s,A):0}}function lc(o,t,s){const A=Uc(o,t,s);if(A.result==="error")return A;const p=A.value.expression,v=PA(p);if(!v&&!Co(t))return Mc([new qi("","data expressions not supported")]);const _=LA(p,["zoom"]);if(!_&&!oA(t))return Mc([new qi("","zoom expressions not supported")]);const B=Lu(p);return B||_?B instanceof qi?Mc([B]):B instanceof Vt&&!oo(t)?Mc([new qi("",'"interpolate" expressions cannot be used with this property')]):Pu(B?new kA(v?"camera":"composite",A.value,B.labels,B instanceof Vt?B.interpolation:void 0,s):new Dc(v?"constant":"source",A.value,s)):Mc([new qi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class su{constructor(t,s){this._parameters=t,this._specification=s,Wn(this,sh(this._parameters,this._specification))}static deserialize(t){return new su(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Lu(o){let t=null;if(o instanceof Rn)t=Lu(o.result);else if(o instanceof jr){for(const s of o.args)if(t=Lu(s),t)break}else(o instanceof ua||o instanceof Vt)&&o.input instanceof uo&&o.input.name==="zoom"&&(t=o);return t instanceof qi||o.eachChild((s=>{const A=Lu(s);A instanceof qi?t=A:!t&&A?t=new qi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&A&&t!==A&&(t=new qi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function lA(o,t=new Set){return o instanceof Ic&&t.add(o.key),o.eachChild((s=>{lA(s,t)})),t}function Rc(o,t){const{zoom:s,heatmapDensity:A,elevation:p,lineProgress:v,isSupportedScript:_,accumulated:B}=o??{};return{zoom:s,heatmapDensity:A,elevation:p,lineProgress:v,isSupportedScript:_,accumulated:B,globalState:t}}function UA(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const t of o.slice(1))if(!UA(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const DA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function cc(o,t){if(o==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};UA(o)||(o=AA(o));const s=Uc(o,DA,t);if(s.result==="error")throw new Error(s.value.map((A=>`${A.key}: ${A.message}`)).join(", "));return{filter:(A,p,v)=>s.value.evaluate(A,p,{},v),needGeometry:Mu(o),getGlobalStateRefs:()=>lA(s.value.expression)}}function cA(o,t){return o<t?-1:o>t?1:0}function Mu(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let t=1;t<o.length;t++)if(Mu(o[t]))return!0;return!1}function AA(o){if(!o)return!0;const t=o[0];return o.length<=1?t!=="any":t==="=="?ou(o[1],o[2],"=="):t==="!="?au(ou(o[1],o[2],"==")):t==="<"||t===">"||t==="<="||t===">="?ou(o[1],o[2],t):t==="any"?(s=o.slice(1),["any"].concat(s.map(AA))):t==="all"?["all"].concat(o.slice(1).map(AA)):t==="none"?["all"].concat(o.slice(1).map(AA).map(au)):t==="in"?oh(o[1],o.slice(2)):t==="!in"?au(oh(o[1],o.slice(2))):t==="has"?Qh(o[1]):t!=="!has"||au(Qh(o[1]));var s}function ou(o,t,s){switch(o){case"$type":return[`filter-type-${s}`,t];case"$id":return[`filter-id-${s}`,t];default:return[`filter-${s}`,o,t]}}function oh(o,t){if(t.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((s=>typeof s!=typeof t[0]))?["filter-in-large",o,["literal",t.sort(cA)]]:["filter-in-small",o,["literal",t]]}}function Qh(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function au(o){return["!",o]}function RA(o){const t=typeof o;if(t==="number"||t==="boolean"||t==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${RA(v)},`;return`${p}]`}const s=Object.keys(o).sort();let A="{";for(let p=0;p<s.length;p++)A+=`${JSON.stringify(s[p])}:${RA(o[s[p]])},`;return`${A}}`}function ho(o){let t="";for(const s of en)t+=`/${RA(o[s])}`;return t}function ga(o){const t=o.value;return t?[new Xt(o.key,t,"constants have been deprecated as of v8")]:[]}function qn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function fo(o){if(Array.isArray(o))return o.map(fo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const t={};for(const s in o)t[s]=fo(o[s]);return t}return qn(o)}function ao(o){const t=o.key,s=o.value,A=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,_=o.styleSpec,B=o.validateSpec;let F=[];const k=dn(s);if(k!=="object")return[new Xt(t,s,`object expected, ${k} found`)];for(const N in s){const G=N.split(".")[0],Z=Gn(A,G)||A["*"];let Y;if(Gn(p,G))Y=p[G];else if(Gn(A,G))Y=B;else if(p["*"])Y=p["*"];else{if(!A["*"]){F.push(new Xt(t,s[N],`unknown property "${N}"`));continue}Y=B}F=F.concat(Y({key:(t&&`${t}.`)+N,value:s[N],valueSpec:Z,style:v,styleSpec:_,object:s,objectKey:N,validateSpec:B},s))}for(const N in A)p[N]||A[N].required&&A[N].default===void 0&&s[N]===void 0&&F.push(new Xt(t,s,`missing required property "${N}"`));return F}function Us(o){const t=o.value,s=o.valueSpec,A=o.style,p=o.styleSpec,v=o.key,_=o.arrayElementValidator||o.validateSpec;if(dn(t)!=="array")return[new Xt(v,t,`array expected, ${dn(t)} found`)];if(s.length&&t.length!==s.length)return[new Xt(v,t,`array length ${s.length} expected, length ${t.length} found`)];if(s["min-length"]&&t.length<s["min-length"])return[new Xt(v,t,`array length at least ${s["min-length"]} expected, length ${t.length} found`)];let B={type:s.value,values:s.values};p.$version<7&&(B.function=s.function),dn(s.value)==="object"&&(B=s.value);let F=[];for(let k=0;k<t.length;k++)F=F.concat(_({array:t,arrayIndex:k,value:t[k],valueSpec:B,validateSpec:o.validateSpec,style:A,styleSpec:p,key:`${v}[${k}]`}));return F}function $s(o){const t=o.key,s=o.value,A=o.valueSpec;let p=dn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Xt(t,s,`number expected, ${p} found`)]:"minimum"in A&&s<A.minimum?[new Xt(t,s,`${s} is less than the minimum value ${A.minimum}`)]:"maximum"in A&&s>A.maximum?[new Xt(t,s,`${s} is greater than the maximum value ${A.maximum}`)]:[]}function ku(o){const t=o.valueSpec,s=qn(o.value.type);let A,p,v,_={};const B=s!=="categorical"&&o.value.property===void 0,F=!B,k=dn(o.value.stops)==="array"&&dn(o.value.stops[0])==="array"&&dn(o.value.stops[0][0])==="object",N=ao({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Y){if(s==="identity")return[new Xt(Y.key,Y.value,'identity function may not have a "stops" property')];let se=[];const ae=Y.value;return se=se.concat(Us({key:Y.key,value:ae,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:G})),dn(ae)==="array"&&ae.length===0&&se.push(new Xt(Y.key,ae,"array must have at least one stop")),se},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:t,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return s==="identity"&&B&&N.push(new Xt(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||N.push(new Xt(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!oo(o.valueSpec)&&N.push(new Xt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(F&&!Co(o.valueSpec)?N.push(new Xt(o.key,o.value,"property functions not supported")):B&&!oA(o.valueSpec)&&N.push(new Xt(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!k||o.value.property!==void 0||N.push(new Xt(o.key,o.value,'"property" property is required')),N;function G(Y){let se=[];const ae=Y.value,ue=Y.key;if(dn(ae)!=="array")return[new Xt(ue,ae,`array expected, ${dn(ae)} found`)];if(ae.length!==2)return[new Xt(ue,ae,`array length 2 expected, length ${ae.length} found`)];if(k){if(dn(ae[0])!=="object")return[new Xt(ue,ae,`object expected, ${dn(ae[0])} found`)];if(ae[0].zoom===void 0)return[new Xt(ue,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new Xt(ue,ae,"object stop key must have value")];if(v&&v>qn(ae[0].zoom))return[new Xt(ue,ae[0].zoom,"stop zoom values must appear in ascending order")];qn(ae[0].zoom)!==v&&(v=qn(ae[0].zoom),p=void 0,_={}),se=se.concat(ao({key:`${ue}[0]`,value:ae[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:$s,value:Z}}))}else se=se.concat(Z({key:`${ue}[0]`,value:ae[0],validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},ae));return Ul(fo(ae[1]))?se.concat([new Xt(`${ue}[1]`,ae[1],"expressions are not allowed in function stops.")]):se.concat(Y.validateSpec({key:`${ue}[1]`,value:ae[1],valueSpec:t,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function Z(Y,se){const ae=dn(Y.value),ue=qn(Y.value),xe=Y.value!==null?Y.value:se;if(A){if(ae!==A)return[new Xt(Y.key,xe,`${ae} stop domain type must match previous stop domain type ${A}`)]}else A=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new Xt(Y.key,xe,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&s!=="categorical"){let et=`number expected, ${ae} found`;return Co(t)&&s===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xt(Y.key,xe,et)]}return s!=="categorical"||ae!=="number"||isFinite(ue)&&Math.floor(ue)===ue?s!=="categorical"&&ae==="number"&&p!==void 0&&ue<p?[new Xt(Y.key,xe,"stop domain values must appear in ascending order")]:(p=ue,s==="categorical"&&ue in _?[new Xt(Y.key,xe,"stop domain values must be unique")]:(_[ue]=!0,[])):[new Xt(Y.key,xe,`integer expected, found ${ue}`)]}}function Nc(o){const t=(o.expressionContext==="property"?lc:Uc)(fo(o.value),o.valueSpec);if(t.result==="error")return t.value.map((A=>new Xt(`${o.key}${A.key}`,o.value,A.message)));const s=t.value.expression||t.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new Xt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!sA(s))return[new Xt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!sA(s))return[new Xt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!LA(s,["zoom","feature-state"]))return[new Xt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!PA(s))return[new Xt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ka(o){const t=o.key,s=o.value,A=dn(s);return A!=="string"?[new Xt(t,s,`color expected, ${A} found`)]:on.parse(String(s))?[]:[new Xt(t,s,`color expected, "${s}" found`)]}function Ua(o){const t=o.key,s=o.value,A=o.valueSpec,p=[];return Array.isArray(A.values)?A.values.indexOf(qn(s))===-1&&p.push(new Xt(t,s,`expected one of [${A.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(A.values).indexOf(qn(s))===-1&&p.push(new Xt(t,s,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Da(o){return UA(fo(o.value))?Nc(Wn({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):NA(o)}function NA(o){const t=o.value,s=o.key;if(dn(t)!=="array")return[new Xt(s,t,`array expected, ${dn(t)} found`)];const A=o.styleSpec;let p,v=[];if(t.length<1)return[new Xt(s,t,"filter array must have at least 1 element")];switch(v=v.concat(Ua({key:`${s}[0]`,value:t[0],valueSpec:A.filter_operator,style:o.style,styleSpec:o.styleSpec})),qn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&qn(t[1])==="$type"&&v.push(new Xt(s,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&v.push(new Xt(s,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(p=dn(t[1]),p!=="string"&&v.push(new Xt(`${s}[1]`,t[1],`string expected, ${p} found`)));for(let _=2;_<t.length;_++)p=dn(t[_]),qn(t[1])==="$type"?v=v.concat(Ua({key:`${s}[${_}]`,value:t[_],valueSpec:A.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new Xt(`${s}[${_}]`,t[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<t.length;_++)v=v.concat(NA({key:`${s}[${_}]`,value:t[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=dn(t[1]),t.length!==2?v.push(new Xt(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new Xt(`${s}[1]`,t[1],`string expected, ${p} found`))}return v}function Uu(o,t){const s=o.key,A=o.validateSpec,p=o.style,v=o.styleSpec,_=o.value,B=o.objectKey,F=v[`${t}_${o.layerType}`];if(!F)return[];const k=B.match(/^(.*)-transition$/);if(t==="paint"&&k&&F[k[1]]&&F[k[1]].transition)return A({key:s,value:_,valueSpec:v.transition,style:p,styleSpec:v});const N=o.valueSpec||F[B];if(!N)return[new Xt(s,_,`unknown property "${B}"`)];let G;if(dn(_)==="string"&&Co(N)&&!N.tokens&&(G=/^{([^}]+)}$/.exec(_)))return[new Xt(s,_,`"${B}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const Z=[];return o.layerType==="symbol"&&B==="text-font"&&aA(fo(_))&&qn(_.type)==="identity"&&Z.push(new Xt(s,_,'"text-font" does not support identity functions')),Z.concat(A({key:o.key,value:_,valueSpec:N,style:p,styleSpec:v,expressionContext:"property",propertyType:t,propertyKey:B}))}function Dl(o){return Uu(o,"paint")}function Ra(o){return Uu(o,"layout")}function ai(o){let t=[];const s=o.value,A=o.key,p=o.style,v=o.styleSpec;if(dn(s)!=="object")return[new Xt(A,s,`object expected, ${dn(s)} found`)];s.type||s.ref||t.push(new Xt(A,s,'either "type" or "ref" is required'));let _=qn(s.type);const B=qn(s.ref);if(s.id){const F=qn(s.id);for(let k=0;k<o.arrayIndex;k++){const N=p.layers[k];qn(N.id)===F&&t.push(new Xt(A,s.id,`duplicate layer id "${s.id}", previously used at line ${N.id.__line__}`))}}if("ref"in s){let F;["type","source","source-layer","filter","layout"].forEach((k=>{k in s&&t.push(new Xt(A,s[k],`"${k}" is prohibited for ref layers`))})),p.layers.forEach((k=>{qn(k.id)===B&&(F=k)})),F?F.ref?t.push(new Xt(A,s.ref,"ref cannot reference another ref layer")):_=qn(F.type):t.push(new Xt(A,s.ref,`ref layer "${B}" not found`))}else if(_!=="background")if(s.source){const F=p.sources&&p.sources[s.source],k=F&&qn(F.type);F?k==="vector"&&_==="raster"?t.push(new Xt(A,s.source,`layer "${s.id}" requires a raster source`)):k!=="raster-dem"&&_==="hillshade"||k!=="raster-dem"&&_==="color-relief"?t.push(new Xt(A,s.source,`layer "${s.id}" requires a raster-dem source`)):k==="raster"&&_!=="raster"?t.push(new Xt(A,s.source,`layer "${s.id}" requires a vector source`)):k!=="vector"||s["source-layer"]?k==="raster-dem"&&_!=="hillshade"&&_!=="color-relief"?t.push(new Xt(A,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||k==="geojson"&&F.lineMetrics||t.push(new Xt(A,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Xt(A,s,`layer "${s.id}" must specify a "source-layer"`)):t.push(new Xt(A,s.source,`source "${s.source}" not found`))}else t.push(new Xt(A,s,'missing required property "source"'));return t=t.concat(ao({key:A,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${A}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Da,layout:F=>ao({layer:s,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":k=>Ra(Wn({layerType:_},k))}}),paint:F=>ao({layer:s,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":k=>Dl(Wn({layerType:_},k))}})}})),t}function Zn(o){const t=o.value,s=o.key,A=dn(t);return A!=="string"?[new Xt(s,t,`string expected, ${A} found`)]:[]}const Rl={promoteId:function({key:o,value:t}){if(dn(t)==="string")return Zn({key:o,value:t});{const s=[];for(const A in t)s.push(...Zn({key:`${o}.${A}`,value:t[A]}));return s}}};function Ds(o){const t=o.value,s=o.key,A=o.styleSpec,p=o.style,v=o.validateSpec;if(!t.type)return[new Xt(s,t,'"type" is required')];const _=qn(t.type);let B;switch(_){case"vector":case"raster":return B=ao({key:s,value:t,valueSpec:A[`source_${_.replace("-","_")}`],style:o.style,styleSpec:A,objectElementValidators:Rl,validateSpec:v}),B;case"raster-dem":return B=(function(F){var k;const N=(k=F.sourceName)!==null&&k!==void 0?k:"",G=F.value,Z=F.styleSpec,Y=Z.source_raster_dem,se=F.style;let ae=[];const ue=dn(G);if(G===void 0)return ae;if(ue!=="object")return ae.push(new Xt("source_raster_dem",G,`object expected, ${ue} found`)),ae;const xe=qn(G.encoding)==="custom",et=["redFactor","greenFactor","blueFactor","baseShift"],Ce=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const Le in G)!xe&&et.includes(Le)?ae.push(new Xt(Le,G[Le],`In "${N}": "${Le}" is only valid when "encoding" is set to "custom". ${Ce} encoding found`)):Y[Le]?ae=ae.concat(F.validateSpec({key:Le,value:G[Le],valueSpec:Y[Le],validateSpec:F.validateSpec,style:se,styleSpec:Z})):ae.push(new Xt(Le,G[Le],`unknown property "${Le}"`));return ae})({sourceName:s,value:t,style:o.style,styleSpec:A,validateSpec:v}),B;case"geojson":if(B=ao({key:s,value:t,valueSpec:A.source_geojson,style:p,styleSpec:A,validateSpec:v,objectElementValidators:Rl}),t.cluster)for(const F in t.clusterProperties){const[k,N]=t.clusterProperties[F],G=typeof k=="string"?[k,["accumulated"],["get",F]]:k;B.push(...Nc({key:`${s}.${F}.map`,value:N,expressionContext:"cluster-map"})),B.push(...Nc({key:`${s}.${F}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return B;case"video":return ao({key:s,value:t,valueSpec:A.source_video,style:p,validateSpec:v,styleSpec:A});case"image":return ao({key:s,value:t,valueSpec:A.source_image,style:p,validateSpec:v,styleSpec:A});case"canvas":return[new Xt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ua({key:`${s}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ws(o){const t=o.value,s=o.styleSpec,A=s.light,p=o.style;let v=[];const _=dn(t);if(t===void 0)return v;if(_!=="object")return v=v.concat([new Xt("light",t,`object expected, ${_} found`)]),v;for(const B in t){const F=B.match(/^(.*)-transition$/);v=v.concat(F&&A[F[1]]&&A[F[1]].transition?o.validateSpec({key:B,value:t[B],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):A[B]?o.validateSpec({key:B,value:t[B],valueSpec:A[B],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new Xt(B,t[B],`unknown property "${B}"`)])}return v}function Qc(o){const t=o.value,s=o.styleSpec,A=s.sky,p=o.style,v=dn(t);if(t===void 0)return[];if(v!=="object")return[new Xt("sky",t,`object expected, ${v} found`)];let _=[];for(const B in t)_=_.concat(A[B]?o.validateSpec({key:B,value:t[B],valueSpec:A[B],style:p,styleSpec:s}):[new Xt(B,t[B],`unknown property "${B}"`)]);return _}function Oc(o){const t=o.value,s=o.styleSpec,A=s.terrain,p=o.style;let v=[];const _=dn(t);if(t===void 0)return v;if(_!=="object")return v=v.concat([new Xt("terrain",t,`object expected, ${_} found`)]),v;for(const B in t)v=v.concat(A[B]?o.validateSpec({key:B,value:t[B],valueSpec:A[B],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new Xt(B,t[B],`unknown property "${B}"`)]);return v}function po(o){let t=[];const s=o.value,A=o.key;if(Array.isArray(s)){const p=[],v=[];for(const _ in s)s[_].id&&p.includes(s[_].id)&&t.push(new Xt(A,s,`all the sprites' ids must be unique, but ${s[_].id} is duplicated`)),p.push(s[_].id),s[_].url&&v.includes(s[_].url)&&t.push(new Xt(A,s,`all the sprites' URLs must be unique, but ${s[_].url} is duplicated`)),v.push(s[_].url),t=t.concat(ao({key:`${A}[${_}]`,value:s[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return t}return Zn({key:A,value:s})}function lu(o){return t=o.value,t&&t.constructor===Object?[]:[new Xt(o.key,o.value,`object expected, ${dn(o.value)} found`)];var t}const Du={"*":()=>[],array:Us,boolean:function(o){const t=o.value,s=o.key,A=dn(t);return A!=="boolean"?[new Xt(s,t,`boolean expected, ${A} found`)]:[]},number:$s,color:ka,constants:ga,enum:Ua,filter:Da,function:ku,layer:ai,object:ao,source:Ds,light:Ws,sky:Qc,terrain:Oc,projection:function(o){const t=o.value,s=o.styleSpec,A=s.projection,p=o.style,v=dn(t);if(t===void 0)return[];if(v!=="object")return[new Xt("projection",t,`object expected, ${v} found`)];let _=[];for(const B in t)_=_.concat(A[B]?o.validateSpec({key:B,value:t[B],valueSpec:A[B],style:p,styleSpec:s}):[new Xt(B,t[B],`unknown property "${B}"`)]);return _},projectionDefinition:function(o){const t=o.key;let s=o.value;s=s instanceof String?s.valueOf():s;const A=dn(s);return A!=="array"||(function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"})(s)||(function(p){return!!["interpolate","step","literal"].includes(p[0])})(s)?["array","string"].includes(A)?[]:[new Xt(t,s,`projection expected, invalid type "${A}" found`)]:[new Xt(t,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:Zn,formatted:function(o){return Zn(o).length===0?[]:Nc(o)},resolvedImage:function(o){return Zn(o).length===0?[]:Nc(o)},padding:function(o){const t=o.key,s=o.value;if(dn(s)==="array"){if(s.length<1||s.length>4)return[new Xt(t,s,`padding requires 1 to 4 values; ${s.length} values found`)];const A={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${t}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:A}));return p}return $s({key:t,value:s,valueSpec:{}})},numberArray:function(o){const t=o.key,s=o.value;if(dn(s)==="array"){const A={type:"number"};if(s.length<1)return[new Xt(t,s,"array length at least 1 expected, length 0 found")];let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${t}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:A}));return p}return $s({key:t,value:s,valueSpec:{}})},colorArray:function(o){const t=o.key,s=o.value;if(dn(s)==="array"){if(s.length<1)return[new Xt(t,s,"array length at least 1 expected, length 0 found")];let A=[];for(let p=0;p<s.length;p++)A=A.concat(ka({key:`${t}[${p}]`,value:s[p]}));return A}return ka({key:t,value:s})},variableAnchorOffsetCollection:function(o){const t=o.key,s=o.value,A=dn(s),p=o.styleSpec;if(A!=="array"||s.length<1||s.length%2!=0)return[new Xt(t,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<s.length;_+=2)v=v.concat(Ua({key:`${t}[${_}]`,value:s[_],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Us({key:`${t}[${_+1}]`,value:s[_+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:po,state:lu};function uA(o){const t=o.value,s=o.valueSpec,A=o.styleSpec;return o.validateSpec=uA,s.expression&&aA(qn(t))?ku(o):s.expression&&Ul(fo(t))?Nc(o):s.type&&Du[s.type]?Du[s.type](o):ao(Wn({},o,{valueSpec:s.type?A[s.type]:s}))}function Na(o){const t=o.value,s=o.key,A=Zn(o);return A.length||(t.indexOf("{fontstack}")===-1&&A.push(new Xt(s,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&A.push(new Xt(s,t,'"glyphs" url must include a "{range}" token'))),A}function ya(o,t=dt){let s=[];return s=s.concat(uA({key:"",value:o,valueSpec:t.$root,styleSpec:t,style:o,validateSpec:uA,objectElementValidators:{glyphs:Na,"*":()=>[]}})),o.constants&&(s=s.concat(ga({key:"constants",value:o.constants}))),QA(s)}function Rs(o){return function(t){return o(Object.assign({},t,{validateSpec:uA}))}}function QA(o){return[].concat(o).sort(((t,s)=>t.line-s.line))}function T(o){return function(...t){return QA(o.apply(this,t))}}ya.source=T(Rs(Ds)),ya.sprite=T(Rs(po)),ya.glyphs=T(Rs(Na)),ya.light=T(Rs(Ws)),ya.sky=T(Rs(Qc)),ya.terrain=T(Rs(Oc)),ya.state=T(Rs(lu)),ya.layer=T(Rs(ai)),ya.filter=T(Rs(Da)),ya.paintProperty=T(Rs(Dl)),ya.layoutProperty=T(Rs(Ra));const D=dt,q=ya,ee=q.light,pe=q.sky,_e=q.paintProperty,Be=q.layoutProperty;function Te(o,t){let s=!1;if(t&&t.length)for(const A of t)o.fire(new tn(new Error(A.message))),s=!0;return s}class ke{constructor(t,s,A){const p=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const _=new Int32Array(this.arrayBuffer);t=_[0],this.d=(s=_[1])+2*(A=_[2]);for(let F=0;F<this.d*this.d;F++){const k=_[3+F],N=_[3+F+1];p.push(k===N?null:_.subarray(k,N))}const B=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],B),this.bboxes=_.subarray(B),this.insert=this._insertReadonly}else{this.d=s+2*A;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=t,this.padding=A,this.scale=s/t,this.uid=0;const v=A/s*t;this.min=-v,this.max=t+v}insert(t,s,A,p,v){this._forEachCell(s,A,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(s),this.bboxes.push(A),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,s,A,p,v,_){this.cells[v].push(_)}query(t,s,A,p,v){const _=this.min,B=this.max;if(t<=_&&s<=_&&B<=A&&B<=p&&!v)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(t,s,A,p,this._queryCell,F,{},v),F}}_queryCell(t,s,A,p,v,_,B,F){const k=this.cells[v];if(k!==null){const N=this.keys,G=this.bboxes;for(let Z=0;Z<k.length;Z++){const Y=k[Z];if(B[Y]===void 0){const se=4*Y;(F?F(G[se+0],G[se+1],G[se+2],G[se+3]):t<=G[se+2]&&s<=G[se+3]&&A>=G[se+0]&&p>=G[se+1])?(B[Y]=!0,_.push(N[Y])):B[Y]=!1}}}}_forEachCell(t,s,A,p,v,_,B,F){const k=this._convertToCellCoord(t),N=this._convertToCellCoord(s),G=this._convertToCellCoord(A),Z=this._convertToCellCoord(p);for(let Y=k;Y<=G;Y++)for(let se=N;se<=Z;se++){const ae=this.d*se+Y;if((!F||F(this._convertFromCellCoord(Y),this._convertFromCellCoord(se),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(se+1)))&&v.call(this,t,s,A,p,ae,_,B,F))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,s=3+this.cells.length+1+1;let A=0;for(let _=0;_<this.cells.length;_++)A+=this.cells[_].length;const p=new Int32Array(s+A+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let _=0;_<t.length;_++){const B=t[_];p[3+_]=v,p.set(B,v),v+=B.length}return p[3+t.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+t.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(t,s){const A=t.toArrayBuffer();return s&&s.push(A),{buffer:A}}static deserialize(t){return new ke(t.buffer)}}const Ve={};function qe(o,t,s={}){if(Ve[o])throw new Error(`${o} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:o,writeable:!1}),Ve[o]={klass:t,omit:s.omit||[],shallow:s.shallow||[]}}qe("Object",Object),qe("Set",Set),qe("TransferableGridIndex",ke),qe("Color",on),qe("Error",Error),qe("AJAXError",st),qe("ResolvedImage",co),qe("StylePropertyFunction",su),qe("StyleExpression",ac,{omit:["_evaluator"]}),qe("ZoomDependentExpression",kA),qe("ZoomConstantExpression",Dc),qe("CompoundExpression",uo,{omit:["_evaluate"]});for(const o in Tc)Tc[o]._classRegistryKey||qe(`Expression_${o}`,Tc[o]);function Mt(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Xe(o){return o.$name||o.constructor._classRegistryKey}function bt(o){return!(function(t){if(t===null||typeof t!="object")return!1;const s=Xe(t);return!(!s||s==="Object")})(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||Mt(o)||qr(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function It(o,t){if(bt(o))return(Mt(o)||qr(o))&&t&&t.push(o),ArrayBuffer.isView(o)&&t&&t.push(o.buffer),o instanceof ImageData&&t&&t.push(o.data.buffer),o;if(Array.isArray(o)){const v=[];for(const _ of o)v.push(It(_,t));return v}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const s=Xe(o);if(!s)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!Ve[s])throw new Error(`${s} is not registered.`);const{klass:A}=Ve[s],p=A.serialize?A.serialize(o,t):{};if(A.serialize){if(t&&p===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Ve[s].omit.indexOf(v)>=0)continue;const _=o[v];p[v]=Ve[s].shallow.indexOf(v)>=0?_:It(_,t)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(p.$name=s),p}function $t(o){if(bt(o))return o;if(Array.isArray(o))return o.map($t);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const t=Xe(o)||"Object";if(!Ve[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:s}=Ve[t];if(!s)throw new Error(`can't deserialize unregistered class ${t}`);if(s.deserialize)return s.deserialize(o);const A=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];A[p]=Ve[t].shallow.indexOf(p)>=0?v:$t(v)}return A}class kt{constructor(){this.first=!0}update(t,s){const A=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=A,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=A,!0):(this.lastFloorZoom>A?(this.lastIntegerZoom=A+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<A&&(this.lastIntegerZoom=A,this.lastIntegerZoomTime=s),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=A,!0))}}function Gt(o){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))}function qt(o){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))}function er(o){return/\s/u.test(String.fromCodePoint(o))}function Jt(o){for(const t of o)if(qt(t.codePointAt(0)))return!0;return!1}function nn(o){for(const t of o)if(!Wr(t.codePointAt(0)))return!1;return!0}function Or(o){const t=o.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(t.join("|"),"u")}const Bn=Or(["Arab","Dupl","Mong","Ougr","Syrc"]);function Wr(o){return!Bn.test(String.fromCodePoint(o))}function Nn(o){return!(qt(o)||(t=o,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(t))));var t}const Ri=Or(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sn(o){return Ri.test(String.fromCodePoint(o))}function zr(o,t){return!(!t&&Sn(o)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(o)))}function Er(o){for(const t of o)if(Sn(t.codePointAt(0)))return!0;return!1}const di=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){if(di.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(o,t){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(o.pluginStatus!=="loading")return this.setState(o),o;const s=o.pluginURL,A=new Promise((v=>{this.loadScriptResolve=v}));t(s);const p=new Promise((v=>setTimeout((()=>v()),this.TIMEOUT)));if(yield Promise.race([A,p]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:s};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Lr{constructor(t,s){this.isSupportedScript=On,this.zoom=t,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new kt,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new kt,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,s=t-Math.floor(t),A=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*A}:{fromScale:.5,toScale:1,t:1-(1-A)*s}}}function On(o){return(function(t,s){for(const A of t)if(!zr(A.codePointAt(0),s))return!1;return!0})(o,di.getRTLTextPluginStatus()==="loaded")}const pi="-transition";class os{constructor(t,s,A){this.property=t,this.value=s,this.expression=(function(p,v,_){if(aA(p))return new su(p,v);if(Ul(p)){const B=lc(p,v,_);if(B.result==="error")throw new Error(B.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return B.value}{let B=p;return v.type==="color"&&typeof p=="string"?B=on.parse(p):v.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?v.type!=="numberArray"||typeof p!="number"&&!Array.isArray(p)?v.type!=="colorArray"||typeof p!="string"&&!Array.isArray(p)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?B=$i.parse(p):v.type==="projectionDefinition"&&typeof p=="string"&&(B=vs.parse(p)):B=ln.parse(p):B=Yn.parse(p):B=Kr.parse(p),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>B}}})(s===void 0?t.specification.default:s,t.specification,A)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,s,A){return this.property.possiblyEvaluate(this,t,s,A)}}class as{constructor(t,s){this.property=t,this.value=new os(t,void 0,s)}transitioned(t,s){return new xs(this.property,this.value,s,wt({},t.transition,this.transition),t.now)}untransitioned(){return new xs(this.property,this.value,null,{},0)}}class Ni{constructor(t,s){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._globalState=s}getValue(t){return lr(this._values[t].value.value)}setValue(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new as(this._values[t].property,this._globalState)),this._values[t].value=new os(this._values[t].property,s===null?void 0:lr(s),this._globalState)}getTransition(t){return lr(this._values[t].transition)}setTransition(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new as(this._values[t].property,this._globalState)),this._values[t].transition=lr(s)||void 0}serialize(){const t={};for(const s of Object.keys(this._values)){const A=this.getValue(s);A!==void 0&&(t[s]=A);const p=this.getTransition(s);p!==void 0&&(t[`${s}${pi}`]=p)}return t}transitioned(t,s){const A=new bs(this._properties);for(const p of Object.keys(this._values))A._values[p]=this._values[p].transitioned(t,s._values[p]);return A}untransitioned(){const t=new bs(this._properties);for(const s of Object.keys(this._values))t._values[s]=this._values[s].untransitioned();return t}}class xs{constructor(t,s,A,p,v){this.property=t,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,t.specification.transition&&(p.delay||p.duration)&&(this.prior=A)}possiblyEvaluate(t,s,A){const p=t.now||0,v=this.value.possiblyEvaluate(t,s,A),_=this.prior;if(_){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return _.possiblyEvaluate(t,s,A);{const B=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(t,s,A),v,Ee(B))}}return v}}class bs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,s,A){const p=new Xn(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(t,s,A);return p}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Qi{constructor(t,s){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._globalState=s}hasValue(t){return this._values[t].value!==void 0}getValue(t){return lr(this._values[t].value)}setValue(t,s){this._values[t]=new os(this._values[t].property,s===null?void 0:lr(s),this._globalState)}serialize(){const t={};for(const s of Object.keys(this._values)){const A=this.getValue(s);A!==void 0&&(t[s]=A)}return t}possiblyEvaluate(t,s,A){const p=new Xn(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(t,s,A);return p}}class En{constructor(t,s,A){this.property=t,this.value=s,this.parameters=A}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,s,A,p){return this.property.evaluate(this.value,this.parameters,t,s,A,p)}}class Xn{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class mr{constructor(t){this.specification=t}possiblyEvaluate(t,s){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(s)}interpolate(t,s,A){const p=xr[this.specification.type];return p?p(t,s,A):t}}class wr{constructor(t,s){this.specification=t,this.overrides=s}possiblyEvaluate(t,s,A,p){return new En(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(s,null,{},A,p)}:t.expression,s)}interpolate(t,s,A){if(t.value.kind!=="constant"||s.value.kind!=="constant")return t;if(t.value.value===void 0||s.value.value===void 0)return new En(this,{kind:"constant",value:void 0},t.parameters);const p=xr[this.specification.type];if(p){const v=p(t.value.value,s.value.value,A);return new En(this,{kind:"constant",value:v},t.parameters)}return t}evaluate(t,s,A,p,v,_){return t.kind==="constant"?t.value:t.evaluate(s,A,p,v,_)}}class Ii extends wr{possiblyEvaluate(t,s,A,p){if(t.value===void 0)return new En(this,{kind:"constant",value:void 0},s);if(t.expression.kind==="constant"){const v=t.expression.evaluate(s,null,{},A,p),_=t.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,B=this._calculate(_,_,_,s);return new En(this,{kind:"constant",value:B},s)}if(t.expression.kind==="camera"){const v=this._calculate(t.expression.evaluate({zoom:s.zoom-1}),t.expression.evaluate({zoom:s.zoom}),t.expression.evaluate({zoom:s.zoom+1}),s);return new En(this,{kind:"constant",value:v},s)}return new En(this,t.expression,s)}evaluate(t,s,A,p,v,_){if(t.kind==="source"){const B=t.evaluate(s,A,p,v,_);return this._calculate(B,B,B,s)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(s.zoom)-1},A,p),t.evaluate({zoom:Math.floor(s.zoom)},A,p),t.evaluate({zoom:Math.floor(s.zoom)+1},A,p),s):t.value}_calculate(t,s,A,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:A,to:s}}interpolate(t){return t}}class ji{constructor(t){this.specification=t}possiblyEvaluate(t,s,A,p){if(t.value!==void 0){if(t.expression.kind==="constant"){const v=t.expression.evaluate(s,null,{},A,p);return this._calculate(v,v,v,s)}return this._calculate(t.expression.evaluate(new Lr(Math.floor(s.zoom-1),s)),t.expression.evaluate(new Lr(Math.floor(s.zoom),s)),t.expression.evaluate(new Lr(Math.floor(s.zoom+1),s)),s)}}_calculate(t,s,A,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:A,to:s}}interpolate(t){return t}}class Jn{constructor(t){this.specification=t}possiblyEvaluate(t,s,A,p){return!!t.expression.evaluate(s,null,{},A,p)}interpolate(){return!1}}class li{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in t){const A=t[s];A.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new os(A,void 0,void 0),v=this.defaultTransitionablePropertyValues[s]=new as(A,void 0);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}qe("DataDrivenProperty",wr),qe("DataConstantProperty",mr),qe("CrossFadedDataDrivenProperty",Ii),qe("CrossFadedProperty",ji),qe("ColorRampProperty",Jn);class Dn extends Ir{constructor(t,s,A){if(super(),this.id=t.id,this.type=t.type,this._globalState=A,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter,this._featureFilter=cc(t.filter,A)),s.layout&&(this._unevaluatedLayout=new Qi(s.layout,A)),s.paint)){this._transitionablePaint=new Ni(s.paint,A);for(const p in t.paint)this.setPaintProperty(p,t.paint[p],{validate:!1});for(const p in t.layout)this.setLayoutProperty(p,t.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xn(s.paint)}}setFilter(t){this.filter=t,this._featureFilter=cc(t,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}getLayoutAffectingGlobalStateRefs(){const t=new Set;if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const A=this._unevaluatedLayout._values[s];for(const p of A.getGlobalStateRefs())t.add(p)}for(const s of this._featureFilter.getGlobalStateRefs())t.add(s);return t}getPaintAffectingGlobalStateRefs(){var t;const s=new globalThis.Map;if(this._transitionablePaint)for(const A in this._transitionablePaint._values){const p=this._transitionablePaint._values[A].value;for(const v of p.getGlobalStateRefs()){const _=(t=s.get(v))!==null&&t!==void 0?t:[];_.push({name:A,value:p.value}),s.set(v,_)}}return s}setLayoutProperty(t,s,A={}){s!=null&&this._validate(Be,`layers.${this.id}.layout.${t}`,t,s,A)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,s):this.visibility=s)}getPaintProperty(t){return t.endsWith(pi)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,s,A={}){if(s!=null&&this._validate(_e,`layers.${this.id}.paint.${t}`,t,s,A))return!1;if(t.endsWith(pi))return this._transitionablePaint.setTransition(t.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[t],v=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),B=p.value;this._transitionablePaint.setValue(t,s),this._handleSpecialPaintPropertyUpdate(t);const F=this._transitionablePaint._values[t].value;return F.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(t,B,F)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,s,A){return!1}isHidden(t,s=!1){return!!(this.minzoom&&t<(s?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,s){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,s)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Wt(t,((s,A)=>!(s===void 0||A==="layout"&&!Object.keys(s).length||A==="paint"&&!Object.keys(s).length)))}_validate(t,s,A,p,v={}){return(!v||v.validate!==!1)&&Te(this,t.call(q,{key:s,layerType:this.type,objectKey:A,value:p,styleSpec:dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const s=this.paint.get(t);if(s instanceof En&&Co(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let _i;var Bs={get paint(){return _i=_i||new li({"raster-opacity":new mr(dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new mr(dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mr(dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mr(dt.paint_raster["raster-brightness-max"]),"raster-saturation":new mr(dt.paint_raster["raster-saturation"]),"raster-contrast":new mr(dt.paint_raster["raster-contrast"]),"raster-resampling":new mr(dt.paint_raster["raster-resampling"]),"raster-fade-duration":new mr(dt.paint_raster["raster-fade-duration"])})}};class Zs extends Dn{constructor(t,s){super(t,Bs,s)}}const So={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Mi{constructor(t,s){this._structArray=t,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Fn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,s){return t._trim(),s&&(t.isTransferred=!0,s.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const s=Object.create(this.prototype);return s.arrayBuffer=t.arrayBuffer,s.length=t.length,s.capacity=t.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function jn(o,t=1){let s=0,A=0;return{members:o.map((p=>{const v=So[p.type].BYTES_PER_ELEMENT,_=s=wi(s,Math.max(t,v)),B=p.components||1;return A=Math.max(A,v),s+=v*B,{name:p.name,type:p.type,components:B,offset:_}})),size:wi(s,Math.max(A,t)),alignment:t}}function wi(o,t){return Math.ceil(o/t)*t}class Cs extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.int16[p+0]=s,this.int16[p+1]=A,t}}Cs.prototype.bytesPerElement=4,qe("StructArrayLayout2i4",Cs);class Eo extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.int16[v+0]=s,this.int16[v+1]=A,this.int16[v+2]=p,t}}Eo.prototype.bytesPerElement=6,qe("StructArrayLayout3i6",Eo);class Xs extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p){const v=this.length;return this.resize(v+1),this.emplace(v,t,s,A,p)}emplace(t,s,A,p,v){const _=4*t;return this.int16[_+0]=s,this.int16[_+1]=A,this.int16[_+2]=p,this.int16[_+3]=v,t}}Xs.prototype.bytesPerElement=8,qe("StructArrayLayout4i8",Xs);class Ss extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=6*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.int16[F+2]=p,this.int16[F+3]=v,this.int16[F+4]=_,this.int16[F+5]=B,t}}Ss.prototype.bytesPerElement=12,qe("StructArrayLayout2i4i12",Ss);class Yi extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=4*t,k=8*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.uint8[k+4]=p,this.uint8[k+5]=v,this.uint8[k+6]=_,this.uint8[k+7]=B,t}}Yi.prototype.bytesPerElement=8,qe("StructArrayLayout2i4ub8",Yi);class Qa extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.float32[p+0]=s,this.float32[p+1]=A,t}}Qa.prototype.bytesPerElement=8,qe("StructArrayLayout2f8",Qa);class Oa extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,k,N){const G=this.length;return this.resize(G+1),this.emplace(G,t,s,A,p,v,_,B,F,k,N)}emplace(t,s,A,p,v,_,B,F,k,N,G){const Z=10*t;return this.uint16[Z+0]=s,this.uint16[Z+1]=A,this.uint16[Z+2]=p,this.uint16[Z+3]=v,this.uint16[Z+4]=_,this.uint16[Z+5]=B,this.uint16[Z+6]=F,this.uint16[Z+7]=k,this.uint16[Z+8]=N,this.uint16[Z+9]=G,t}}Oa.prototype.bytesPerElement=20,qe("StructArrayLayout10ui20",Oa);class zc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F){const k=this.length;return this.resize(k+1),this.emplace(k,t,s,A,p,v,_,B,F)}emplace(t,s,A,p,v,_,B,F,k){const N=8*t;return this.uint16[N+0]=s,this.uint16[N+1]=A,this.uint16[N+2]=p,this.uint16[N+3]=v,this.uint16[N+4]=_,this.uint16[N+5]=B,this.uint16[N+6]=F,this.uint16[N+7]=k,t}}zc.prototype.bytesPerElement=16,qe("StructArrayLayout8ui16",zc);class za extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,k,N,G,Z){const Y=this.length;return this.resize(Y+1),this.emplace(Y,t,s,A,p,v,_,B,F,k,N,G,Z)}emplace(t,s,A,p,v,_,B,F,k,N,G,Z,Y){const se=12*t;return this.int16[se+0]=s,this.int16[se+1]=A,this.int16[se+2]=p,this.int16[se+3]=v,this.uint16[se+4]=_,this.uint16[se+5]=B,this.uint16[se+6]=F,this.uint16[se+7]=k,this.int16[se+8]=N,this.int16[se+9]=G,this.int16[se+10]=Z,this.int16[se+11]=Y,t}}za.prototype.bytesPerElement=24,qe("StructArrayLayout4i4ui4i24",za);class Nl extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.float32[v+0]=s,this.float32[v+1]=A,this.float32[v+2]=p,t}}Nl.prototype.bytesPerElement=12,qe("StructArrayLayout3f12",Nl);class OA extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint32[1*t+0]=s,t}}OA.prototype.bytesPerElement=4,qe("StructArrayLayout1ul4",OA);class mi extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,k){const N=this.length;return this.resize(N+1),this.emplace(N,t,s,A,p,v,_,B,F,k)}emplace(t,s,A,p,v,_,B,F,k,N){const G=10*t,Z=5*t;return this.int16[G+0]=s,this.int16[G+1]=A,this.int16[G+2]=p,this.int16[G+3]=v,this.int16[G+4]=_,this.int16[G+5]=B,this.uint32[Z+3]=F,this.uint16[G+8]=k,this.uint16[G+9]=N,t}}mi.prototype.bytesPerElement=20,qe("StructArrayLayout6i1ul2ui20",mi);class qo extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=6*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.int16[F+2]=p,this.int16[F+3]=v,this.int16[F+4]=_,this.int16[F+5]=B,t}}qo.prototype.bytesPerElement=12,qe("StructArrayLayout2i2i2i12",qo);class hA extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v){const _=this.length;return this.resize(_+1),this.emplace(_,t,s,A,p,v)}emplace(t,s,A,p,v,_){const B=4*t,F=8*t;return this.float32[B+0]=s,this.float32[B+1]=A,this.float32[B+2]=p,this.int16[F+6]=v,this.int16[F+7]=_,t}}hA.prototype.bytesPerElement=16,qe("StructArrayLayout2f1f2i16",hA);class cu extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=16*t,k=4*t,N=8*t;return this.uint8[F+0]=s,this.uint8[F+1]=A,this.float32[k+1]=p,this.float32[k+2]=v,this.int16[N+6]=_,this.int16[N+7]=B,t}}cu.prototype.bytesPerElement=16,qe("StructArrayLayout2ub2f2i16",cu);class Ql extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.uint16[v+0]=s,this.uint16[v+1]=A,this.uint16[v+2]=p,t}}Ql.prototype.bytesPerElement=6,qe("StructArrayLayout3ui6",Ql);class Ol extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,k,N,G,Z,Y,se,ae,ue,xe){const et=this.length;return this.resize(et+1),this.emplace(et,t,s,A,p,v,_,B,F,k,N,G,Z,Y,se,ae,ue,xe)}emplace(t,s,A,p,v,_,B,F,k,N,G,Z,Y,se,ae,ue,xe,et){const Ce=24*t,Le=12*t,nt=48*t;return this.int16[Ce+0]=s,this.int16[Ce+1]=A,this.uint16[Ce+2]=p,this.uint16[Ce+3]=v,this.uint32[Le+2]=_,this.uint32[Le+3]=B,this.uint32[Le+4]=F,this.uint16[Ce+10]=k,this.uint16[Ce+11]=N,this.uint16[Ce+12]=G,this.float32[Le+7]=Z,this.float32[Le+8]=Y,this.uint8[nt+36]=se,this.uint8[nt+37]=ae,this.uint8[nt+38]=ue,this.uint32[Le+10]=xe,this.int16[Ce+22]=et,t}}Ol.prototype.bytesPerElement=48,qe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ol);class Ha extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,k,N,G,Z,Y,se,ae,ue,xe,et,Ce,Le,nt,ct,Lt,Zt,jt,nr,vr,sr){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,t,s,A,p,v,_,B,F,k,N,G,Z,Y,se,ae,ue,xe,et,Ce,Le,nt,ct,Lt,Zt,jt,nr,vr,sr)}emplace(t,s,A,p,v,_,B,F,k,N,G,Z,Y,se,ae,ue,xe,et,Ce,Le,nt,ct,Lt,Zt,jt,nr,vr,sr,Kt){const Qt=32*t,Pr=16*t;return this.int16[Qt+0]=s,this.int16[Qt+1]=A,this.int16[Qt+2]=p,this.int16[Qt+3]=v,this.int16[Qt+4]=_,this.int16[Qt+5]=B,this.int16[Qt+6]=F,this.int16[Qt+7]=k,this.uint16[Qt+8]=N,this.uint16[Qt+9]=G,this.uint16[Qt+10]=Z,this.uint16[Qt+11]=Y,this.uint16[Qt+12]=se,this.uint16[Qt+13]=ae,this.uint16[Qt+14]=ue,this.uint16[Qt+15]=xe,this.uint16[Qt+16]=et,this.uint16[Qt+17]=Ce,this.uint16[Qt+18]=Le,this.uint16[Qt+19]=nt,this.uint16[Qt+20]=ct,this.uint16[Qt+21]=Lt,this.uint16[Qt+22]=Zt,this.uint32[Pr+12]=jt,this.float32[Pr+13]=nr,this.float32[Pr+14]=vr,this.uint16[Qt+30]=sr,this.uint16[Qt+31]=Kt,t}}Ha.prototype.bytesPerElement=64,qe("StructArrayLayout8i15ui1ul2f2ui64",Ha);class xi extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.float32[1*t+0]=s,t}}xi.prototype.bytesPerElement=4,qe("StructArrayLayout1f4",xi);class ki extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.uint16[6*t+0]=s,this.float32[v+1]=A,this.float32[v+2]=p,t}}ki.prototype.bytesPerElement=12,qe("StructArrayLayout1ui2f12",ki);class Ji extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=4*t;return this.uint32[2*t+0]=s,this.uint16[v+2]=A,this.uint16[v+3]=p,t}}Ji.prototype.bytesPerElement=8,qe("StructArrayLayout1ul2ui8",Ji);class Hc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.uint16[p+0]=s,this.uint16[p+1]=A,t}}Hc.prototype.bytesPerElement=4,qe("StructArrayLayout2ui4",Hc);class ja extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint16[1*t+0]=s,t}}ja.prototype.bytesPerElement=2,qe("StructArrayLayout1ui2",ja);class jc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p){const v=this.length;return this.resize(v+1),this.emplace(v,t,s,A,p)}emplace(t,s,A,p,v){const _=4*t;return this.float32[_+0]=s,this.float32[_+1]=A,this.float32[_+2]=p,this.float32[_+3]=v,t}}jc.prototype.bytesPerElement=16,qe("StructArrayLayout4f16",jc);class w extends Mi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new x(this.anchorPointX,this.anchorPointY)}}w.prototype.size=20;class r extends mi{get(t){return new w(this,t)}}qe("CollisionBoxArray",r);class c extends Mi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}c.prototype.size=48;class d extends Ol{get(t){return new c(this,t)}}qe("PlacedSymbolArray",d);class y extends Mi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}y.prototype.size=64;class b extends Ha{get(t){return new y(this,t)}}qe("SymbolInstanceArray",b);class E extends xi{getoffsetX(t){return this.float32[1*t+0]}}qe("GlyphOffsetArray",E);class L extends Eo{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}qe("SymbolLineVertexArray",L);class R extends Mi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}R.prototype.size=12;class H extends ki{get(t){return new R(this,t)}}qe("TextAnchorOffsetArray",H);class K extends Mi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}K.prototype.size=8;class re extends Ji{get(t){return new K(this,t)}}qe("FeatureIndexArray",re);class J extends Cs{}class Ae extends Cs{}class ve extends Cs{}class Me extends Ss{}class Oe extends Yi{}class Re extends Qa{}class je extends Oa{}class it extends zc{}class We extends za{}class ot extends Nl{}class ht extends OA{}class rt extends qo{}class vt extends cu{}class Ut extends Ql{}class Tt extends Hc{}const Dt=jn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Nt}=Dt;class rr{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,s,A,p){const v=this.segments[this.segments.length-1];return t>rr.MAX_VERTEX_ARRAY_LENGTH&&Br(`Max vertices per segment is ${rr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${rr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+t>rr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p?this.createNewSegment(s,A,p):v}createNewSegment(t,s,A){const p={vertexOffset:t.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return A!==void 0&&(p.sortKey=A),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(t,s,A){return this.prepareSegment(0,t,s,A)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const s in t.vaos)t.vaos[s].destroy()}static simpleSegment(t,s,A,p){return new rr([{vertexOffset:t,primitiveOffset:s,vertexLength:A,primitiveLength:p,vaos:{},sortKey:0}])}}function cr(o,t){return 256*(o=at(Math.floor(o),0,255))+at(Math.floor(t),0,255)}rr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qe("SegmentVector",rr);const tr=jn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ur=jn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var yn,ci,Oi,Ai={exports:{}},Vi={exports:{}},Ti={exports:{}},Es=(function(){if(Oi)return Ai.exports;Oi=1;var o=(yn||(yn=1,Vi.exports=function(s,A){var p,v,_,B,F,k,N,G;for(v=s.length-(p=3&s.length),_=A,F=3432918353,k=461845907,G=0;G<v;)N=255&s.charCodeAt(G)|(255&s.charCodeAt(++G))<<8|(255&s.charCodeAt(++G))<<16|(255&s.charCodeAt(++G))<<24,++G,_=27492+(65535&(B=5*(65535&(_=(_^=N=(65535&(N=(N=(65535&N)*F+(((N>>>16)*F&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(N=0,p){case 3:N^=(255&s.charCodeAt(G+2))<<16;case 2:N^=(255&s.charCodeAt(G+1))<<8;case 1:_^=N=(65535&(N=(N=(65535&(N^=255&s.charCodeAt(G)))*F+(((N>>>16)*F&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295}return _^=s.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Vi.exports),t=(ci||(ci=1,Ti.exports=function(s,A){for(var p,v=s.length,_=A^v,B=0;v>=4;)p=1540483477*(65535&(p=255&s.charCodeAt(B)|(255&s.charCodeAt(++B))<<8|(255&s.charCodeAt(++B))<<16|(255&s.charCodeAt(++B))<<24))+((1540483477*(p>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),v-=4,++B;switch(v){case 3:_^=(255&s.charCodeAt(B+2))<<16;case 2:_^=(255&s.charCodeAt(B+1))<<8;case 1:_=1540483477*(65535&(_^=255&s.charCodeAt(B)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Ti.exports);return Ai.exports=o,Ai.exports.murmur3=o,Ai.exports.murmur2=t,Ai.exports})(),Gi=S(Es);class Ys{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,s,A,p){this.ids.push(Fs(t)),this.positions.push(s,A,p)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Fs(t);let A=0,p=this.ids.length-1;for(;A<p;){const _=A+p>>1;this.ids[_]>=s?p=_:A=_+1}const v=[];for(;this.ids[A]===s;)v.push({index:this.positions[3*A],start:this.positions[3*A+1],end:this.positions[3*A+2]}),A++;return v}static serialize(t,s){const A=new Float64Array(t.ids),p=new Uint32Array(t.positions);return ui(A,p,0,A.length-1),s&&s.push(A.buffer,p.buffer),{ids:A,positions:p}}static deserialize(t){const s=new Ys;return s.ids=t.ids,s.positions=t.positions,s.indexed=!0,s}}function Fs(o){const t=+o;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Gi(String(o))}function ui(o,t,s,A){for(;s<A;){const p=o[s+A>>1];let v=s-1,_=A+1;for(;;){do v++;while(o[v]<p);do _--;while(o[_]>p);if(v>=_)break;lo(o,v,_),lo(t,3*v,3*_),lo(t,3*v+1,3*_+1),lo(t,3*v+2,3*_+2)}_-s<A-_?(ui(o,t,s,_),s=_+1):(ui(o,t,_+1,A),A=_)}}function lo(o,t,s){const A=o[t];o[t]=o[s],o[s]=A}qe("FeaturePositionMap",Ys);class mo{constructor(t,s){this.gl=t.gl,this.location=s}}class Ac extends mo{constructor(t,s){super(t,s),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class fA extends mo{constructor(t,s){super(t,s),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class zA extends mo{constructor(t,s){super(t,s),this.current=on.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Ru=new Float32Array(16);function uc(o){return[cr(255*o.r,255*o.g),cr(255*o.b,255*o.a)]}class zl{constructor(t,s,A){this.value=t,this.uniformNames=s.map((p=>`u_${p}`)),this.type=A}setUniform(t,s,A){t.set(A.constantOr(this.value))}getBinding(t,s,A){return this.type==="color"?new zA(t,s):new Ac(t,s)}}class Js{constructor(t,s){this.uniformNames=s.map((A=>`u_${A}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=t.tlbr}setConstantDashPositions(t,s){this.dashTo=[0,t.y,t.height,t.width],this.dashFrom=[0,s.y,s.height,s.width]}setUniform(t,s,A,p){let v=null;p==="u_pattern_to"?v=this.patternTo:p==="u_pattern_from"?v=this.patternFrom:p==="u_dasharray_to"?v=this.dashTo:p==="u_dasharray_from"?v=this.dashFrom:p==="u_pixel_ratio_to"?v=this.pixelRatioTo:p==="u_pixel_ratio_from"&&(v=this.pixelRatioFrom),v!==null&&t.set(v)}getBinding(t,s,A){return A.substr(0,9)==="u_pattern"||A.substr(0,12)==="u_dasharray_"?new fA(t,s):new Ac(t,s)}}class $o{constructor(t,s,A,p){this.expression=t,this.type=A,this.maxValue=0,this.paintVertexAttributes=s.map((v=>({name:`a_${v}`,type:"Float32",components:A==="color"?2:1,offset:0}))),this.paintVertexArray=new p}populatePaintArray(t,s,A){const p=this.paintVertexArray.length,v=this.expression.evaluate(new Lr(0,A),s,{},A.canonical,[],A.formattedSection);this.paintVertexArray.resize(t),this._setPaintValue(p,t,v)}updatePaintArray(t,s,A,p,v){const _=this.expression.evaluate(new Lr(0,v),A,p);this._setPaintValue(t,s,_)}_setPaintValue(t,s,A){if(this.type==="color"){const p=uc(A);for(let v=t;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=t;p<s;p++)this.paintVertexArray.emplace(p,A);this.maxValue=Math.max(this.maxValue,Math.abs(A))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class go{constructor(t,s,A,p,v,_){this.expression=t,this.uniformNames=s.map((B=>`u_${B}_t`)),this.type=A,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map((B=>({name:`a_${B}`,type:"Float32",components:A==="color"?4:2,offset:0}))),this.paintVertexArray=new _}populatePaintArray(t,s,A){const p=this.expression.evaluate(new Lr(this.zoom,A),s,{},A.canonical,[],A.formattedSection),v=this.expression.evaluate(new Lr(this.zoom+1,A),s,{},A.canonical,[],A.formattedSection),_=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(_,t,p,v)}updatePaintArray(t,s,A,p,v){const _=this.expression.evaluate(new Lr(this.zoom,v),A,p),B=this.expression.evaluate(new Lr(this.zoom+1,v),A,p);this._setPaintValue(t,s,_,B)}_setPaintValue(t,s,A,p){if(this.type==="color"){const v=uc(A),_=uc(p);for(let B=t;B<s;B++)this.paintVertexArray.emplace(B,v[0],v[1],_[0],_[1])}else{for(let v=t;v<s;v++)this.paintVertexArray.emplace(v,A,p);this.maxValue=Math.max(this.maxValue,Math.abs(A),Math.abs(p))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,s){const A=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=at(this.expression.interpolationFactor(A,this.zoom,this.zoom+1),0,1);t.set(p)}getBinding(t,s,A){return new Ac(t,s)}}class ml{constructor(t,s,A,p,v,_){this.expression=t,this.type=s,this.useIntegerZoom=A,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(t,s,A){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(p,t,this.getPositionIds(s),A)}updatePaintArray(t,s,A,p,v){this._setPaintValues(t,s,this.getPositionIds(A),v)}_setPaintValues(t,s,A,p){const v=this.getPositions(p);if(!v||!A)return;const _=v[A.min],B=v[A.mid],F=v[A.max];if(_&&B&&F)for(let k=t;k<s;k++)this.emplace(this.zoomInPaintVertexArray,k,B,_),this.emplace(this.zoomOutPaintVertexArray,k,B,F)}upload(t){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const s=this.getVertexAttributes();this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,s,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,s,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ns extends ml{getPositions(t){return t.imagePositions}getPositionIds(t){return t.patterns&&t.patterns[this.layerId]}getVertexAttributes(){return tr.members}emplace(t,s,A,p){t.emplace(s,A.tlbr[0],A.tlbr[1],A.tlbr[2],A.tlbr[3],p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],A.pixelRatio,p.pixelRatio)}}class eo extends ml{getPositions(t){return t.dashPositions}getPositionIds(t){return t.dashes&&t.dashes[this.layerId]}getVertexAttributes(){return Ur.members}emplace(t,s,A,p){t.emplace(s,0,A.y,A.height,A.width,0,p.y,p.height,p.width)}}class Va{constructor(t,s,A){this.binders={},this._buffers=[];const p=[];for(const v in t.paint._values){if(!A(v))continue;const _=t.paint.get(v);if(!(_ instanceof En&&Co(_.property.specification)))continue;const B=Ga(v,t.type),F=_.value,k=_.property.specification.type,N=_.property.useIntegerZoom,G=_.property.specification["property-type"],Z=G==="cross-faded"||G==="cross-faded-data-driven";if(F.kind==="constant")this.binders[v]=Z?new Js(F.value,B):new zl(F.value,B,k),p.push(`/u_${v}`);else if(F.kind==="source"||Z){const Y=Wo(v,k,"source");this.binders[v]=Z?v==="line-dasharray"?new eo(F,k,N,s,Y,t.id):new Ns(F,k,N,s,Y,t.id):new $o(F,B,k,Y),p.push(`/a_${v}`)}else{const Y=Wo(v,k,"composite");this.binders[v]=new go(F,B,k,N,s,Y),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(t){const s=this.binders[t];return s instanceof $o||s instanceof go?s.maxValue:0}populatePaintArrays(t,s,A){for(const p in this.binders){const v=this.binders[p];(v instanceof $o||v instanceof go||v instanceof ml)&&v.populatePaintArray(t,s,A)}}setConstantPatternPositions(t,s){for(const A in this.binders){const p=this.binders[A];p instanceof Js&&p.setConstantPatternPositions(t,s)}}setConstantDashPositions(t,s){for(const A in this.binders){const p=this.binders[A];p instanceof Js&&p.setConstantDashPositions(t,s)}}updatePaintArrays(t,s,A,p,v){let _=!1;for(const B in t){const F=s.getPositions(B);for(const k of F){const N=A.feature(k.index);for(const G in this.binders){const Z=this.binders[G];if((Z instanceof $o||Z instanceof go||Z instanceof ml)&&Z.expression.isStateDependent===!0){const Y=p.paint.get(G);Z.expression=Y.value,Z.updatePaintArray(k.start,k.end,N,t[B],v),_=!0}}}}return _}defines(){const t=[];for(const s in this.binders){const A=this.binders[s];(A instanceof zl||A instanceof Js)&&t.push(...A.uniformNames.map((p=>`#define HAS_UNIFORM_${p}`)))}return t}getBinderAttributes(){const t=[];for(const s in this.binders){const A=this.binders[s];if(A instanceof $o||A instanceof go)for(let p=0;p<A.paintVertexAttributes.length;p++)t.push(A.paintVertexAttributes[p].name);else if(A instanceof ml){const p=A.getVertexAttributes();for(const v of p)t.push(v.name)}}return t}getBinderUniforms(){const t=[];for(const s in this.binders){const A=this.binders[s];if(A instanceof zl||A instanceof Js||A instanceof go)for(const p of A.uniformNames)t.push(p)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,s){const A=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof zl||v instanceof Js||v instanceof go){for(const _ of v.uniformNames)if(s[_]){const B=v.getBinding(t,s[_],_);A.push({name:_,property:p,binding:B})}}}return A}setUniforms(t,s,A,p){for(const{name:v,property:_,binding:B}of s)this.binders[_].setUniform(B,p,A.get(_),v)}updatePaintBuffers(t){this._buffers=[];for(const s in this.binders){const A=this.binders[s];if(t&&A instanceof ml){const p=t.fromScale===2?A.zoomInPaintVertexBuffer:A.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(A instanceof $o||A instanceof go)&&A.paintVertexBuffer&&this._buffers.push(A.paintVertexBuffer)}}upload(t){for(const s in this.binders){const A=this.binders[s];(A instanceof $o||A instanceof go||A instanceof ml)&&A.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const s=this.binders[t];(s instanceof $o||s instanceof go||s instanceof ml)&&s.destroy()}}}class ls{constructor(t,s,A=()=>!0){this.programConfigurations={};for(const p of t)this.programConfigurations[p.id]=new Va(p,s,A);this.needsUpload=!1,this._featureMap=new Ys,this._bufferOffset=0}populatePaintArrays(t,s,A,p){for(const v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(t,s,p);s.id!==void 0&&this._featureMap.add(s.id,A,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,s,A,p){for(const v of A)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(t,this._featureMap,s,v,p)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Ga(o,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${t}-`,"").replace(/-/g,"_")]}function Wo(o,t,s){const A={color:{source:Qa,composite:jc},number:{source:xi,composite:Qa}},p=(function(v){return{"line-pattern":{source:je,composite:je},"fill-pattern":{source:je,composite:je},"fill-extrusion-pattern":{source:je,composite:je},"line-dasharray":{source:it,composite:it}}[v]})(o);return p&&p[s]||A[t][s]}qe("ConstantBinder",zl),qe("CrossFadedConstantBinder",Js),qe("SourceExpressionBinder",$o),qe("CrossFadedPatternBinder",Ns),qe("CrossFadedDasharrayBinder",eo),qe("CompositeExpressionBinder",go),qe("ProgramConfiguration",Va,{omit:["_buffers"]}),qe("ProgramConfigurationSet",ls);const Oh=Math.pow(2,14)-1,bf=-Oh-1;function HA(o){const t=Ie/o.extent,s=o.loadGeometry();for(let A=0;A<s.length;A++){const p=s[A];for(let v=0;v<p.length;v++){const _=p[v],B=Math.round(_.x*t),F=Math.round(_.y*t);_.x=at(B,bf,Oh),_.y=at(F,bf,Oh),(B<_.x||B>_.x+1||F<_.y||F>_.y+1)&&Br("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function jA(o,t){return{type:o.type,id:o.id,properties:o.properties,geometry:t?HA(o):[]}}const dA=-32768;function zh(o,t,s,A,p){o.emplaceBack(dA+8*t+A,dA+8*s+p)}class ah{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new Ae,this.indexArray=new Ut,this.segments=new rr,this.programConfigurations=new ls(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){const p=this.layers[0],v=[];let _=null,B=!1,F=p.type==="heatmap";if(p.type==="circle"){const N=p;_=N.layout.get("circle-sort-key"),B=!_.isConstant(),F=F||N.paint.get("circle-pitch-alignment")==="map"}const k=F?s.subdivisionGranularity.circle:1;for(const{feature:N,id:G,index:Z,sourceLayerIndex:Y}of t){const se=this.layers[0]._featureFilter.needGeometry,ae=jA(N,se);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),ae,A))continue;const ue=B?_.evaluate(ae,{},A):void 0,xe={id:G,properties:N.properties,type:N.type,sourceLayerIndex:Y,index:Z,geometry:se?ae.geometry:HA(N),patterns:{},sortKey:ue};v.push(xe)}B&&v.sort(((N,G)=>N.sortKey-G.sortKey));for(const N of v){const{geometry:G,index:Z,sourceLayerIndex:Y}=N,se=t[Z].feature;this.addFeature(N,G,Z,A,k),s.featureIndex.insert(se,G,Z,Y,this.index)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Nt),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,s,A,p,v=1){let _;switch(v){case 1:_=[0,7];break;case 3:_=[0,2,5,7];break;case 5:_=[0,1,3,4,6,7];break;case 7:_=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const B=_.length;for(const F of s)for(const k of F){const N=k.x,G=k.y;if(N<0||N>=Ie||G<0||G>=Ie)continue;const Z=this.segments.prepareSegment(B*B,this.layoutVertexArray,this.indexArray,t.sortKey),Y=Z.vertexLength;for(let se=0;se<B;se++)for(let ae=0;ae<B;ae++)zh(this.layoutVertexArray,N,G,_[ae],_[se]);for(let se=0;se<B-1;se++)for(let ae=0;ae<B-1;ae++){const ue=Y+se*B+ae,xe=Y+(se+1)*B+ae;this.indexArray.emplaceBack(ue,xe+1,ue+1),this.indexArray.emplaceBack(ue,xe,xe+1)}Z.vertexLength+=B*B,Z.primitiveLength+=(B-1)*(B-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:{},canonical:p})}}function lh(o,t){for(let s=0;s<o.length;s++)if(Ah(t,o[s]))return!0;for(let s=0;s<t.length;s++)if(Ah(o,t[s]))return!0;return!!Bf(o,t)}function Au(o,t,s){return!!Ah(o,t)||!!Cf(t,o,s)}function Hh(o,t){if(o.length===1)return eg(t,o[0]);for(let s=0;s<t.length;s++){const A=t[s];for(let p=0;p<A.length;p++)if(Ah(o,A[p]))return!0}for(let s=0;s<o.length;s++)if(eg(t,o[s]))return!0;for(let s=0;s<t.length;s++)if(Bf(o,t[s]))return!0;return!1}function ch(o,t,s){if(o.length>1){if(Bf(o,t))return!0;for(let A=0;A<t.length;A++)if(Cf(t[A],o,s))return!0}for(let A=0;A<o.length;A++)if(Cf(o[A],t,s))return!0;return!1}function Bf(o,t){if(o.length===0||t.length===0)return!1;for(let s=0;s<o.length-1;s++){const A=o[s],p=o[s+1];for(let v=0;v<t.length-1;v++)if(Jm(A,p,t[v],t[v+1]))return!0}return!1}function Jm(o,t,s,A){return He(o,s,A)!==He(t,s,A)&&He(o,t,s)!==He(o,t,A)}function Cf(o,t,s){const A=s*s;if(t.length===1)return o.distSqr(t[0])<A;for(let p=1;p<t.length;p++)if(Sf(o,t[p-1],t[p])<A)return!0;return!1}function Sf(o,t,s){const A=t.distSqr(s);if(A===0)return o.distSqr(t);const p=((o.x-t.x)*(s.x-t.x)+(o.y-t.y)*(s.y-t.y))/A;return o.distSqr(p<0?t:p>1?s:s.sub(t)._mult(p)._add(t))}function eg(o,t){let s,A,p,v=!1;for(let _=0;_<o.length;_++){s=o[_];for(let B=0,F=s.length-1;B<s.length;F=B++)A=s[B],p=s[F],A.y>t.y!=p.y>t.y&&t.x<(p.x-A.x)*(t.y-A.y)/(p.y-A.y)+A.x&&(v=!v)}return v}function Ah(o,t){let s=!1;for(let A=0,p=o.length-1;A<o.length;p=A++){const v=o[A],_=o[p];v.y>t.y!=_.y>t.y&&t.x<(_.x-v.x)*(t.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function Sp(o,t,s){const A=s[0],p=s[2];if(o.x<A.x&&t.x<A.x||o.x>p.x&&t.x>p.x||o.y<A.y&&t.y<A.y||o.y>p.y&&t.y>p.y)return!1;const v=He(o,t,s[0]);return v!==He(o,t,s[1])||v!==He(o,t,s[2])||v!==He(o,t,s[3])}function uh(o,t,s){const A=t.paint.get(o).value;return A.kind==="constant"?A.value:s.programConfigurations.get(t.id).getMaxValue(o)}function hh(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Vc(o,t,s,A,p){if(!t[0]&&!t[1])return o;const v=x.convert(t)._mult(p);s==="viewport"&&v._rotate(-A);const _=[];for(let B=0;B<o.length;B++)_.push(o[B].sub(v));return _}function tv(o){const t=[];for(let s=0;s<o.length;s++){const A=o[s],p=t.at(-1);(s===0||p&&!A.equals(p))&&t.push(A)}return t}function tg({queryGeometry:o,size:t},s){return Au(o,s,t)}function Ep({queryGeometry:o,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){return Au(o,v,t*(s.projectTileCoordinates(v.x,v.y,A,p).signedDistanceFromCamera/s.cameraToCenterDistance))}function rg({queryGeometry:o,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){const _=s.projectTileCoordinates(v.x,v.y,A,p).signedDistanceFromCamera,B=t*(s.cameraToCenterDistance/_);return Au(o,Zo(v,s,A,p),B)}function ng({queryGeometry:o,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){return Au(o,Zo(v,s,A,p),t)}function jh({queryGeometry:o,size:t,transform:s,unwrappedTileID:A,getElevation:p,pitchAlignment:v="map",pitchScale:_="map"},B){const F=v==="map"?_==="map"?tg:Ep:_==="map"?rg:ng,k={queryGeometry:o,size:t,transform:s,unwrappedTileID:A,getElevation:p};for(const N of B)for(const G of N)if(F(k,G))return!0;return!1}function Zo(o,t,s,A){const p=t.projectTileCoordinates(o.x,o.y,s,A).point;return new x((.5*p.x+.5)*t.width,(.5*-p.y+.5)*t.height)}let ig,sg;qe("CircleBucket",ah,{omit:["layers"]});var Ad={get paint(){return sg=sg||new li({"circle-radius":new wr(dt.paint_circle["circle-radius"]),"circle-color":new wr(dt.paint_circle["circle-color"]),"circle-blur":new wr(dt.paint_circle["circle-blur"]),"circle-opacity":new wr(dt.paint_circle["circle-opacity"]),"circle-translate":new mr(dt.paint_circle["circle-translate"]),"circle-translate-anchor":new mr(dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mr(dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mr(dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wr(dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wr(dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wr(dt.paint_circle["circle-stroke-opacity"])})},get layout(){return ig=ig||new li({"circle-sort-key":new wr(dt.layout_circle["circle-sort-key"])})}};class Ka extends Dn{constructor(t,s){super(t,Ad,s)}createBucket(t){return new ah(t)}queryRadius(t){const s=t;return uh("circle-radius",this,s)+uh("circle-stroke-width",this,s)+hh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,unwrappedTileID:B,getElevation:F}){const k=Vc(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,_),N=this.paint.get("circle-radius").evaluate(s,A)+this.paint.get("circle-stroke-width").evaluate(s,A),G=this.paint.get("circle-pitch-scale"),Z=this.paint.get("circle-pitch-alignment");let Y,se;return Z==="map"?(Y=k,se=N*_):(Y=(function(ae,ue,xe,et){return ae.map((Ce=>Zo(Ce,ue,xe,et)))})(k,v,B,F),se=N),jh({queryGeometry:Y,size:se,transform:v,unwrappedTileID:B,getElevation:F,pitchAlignment:Z,pitchScale:G},p)}}class og extends ah{}let Zr;qe("HeatmapBucket",og,{omit:["layers"]});var Vh={get paint(){return Zr=Zr||new li({"heatmap-radius":new wr(dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wr(dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mr(dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jn(dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mr(dt.paint_heatmap["heatmap-opacity"])})}};function Ef(o,{width:t,height:s},A,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==t*s*A)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${t*s*A}`)}else p=new Uint8Array(t*s*A);return o.width=t,o.height=s,o.data=p,o}function Fp(o,{width:t,height:s},A){if(t===o.width&&s===o.height)return;const p=Ef({},{width:t,height:s},A);Ip(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,t),height:Math.min(o.height,s)},A),o.width=t,o.height=s,o.data=p.data}function Ip(o,t,s,A,p,v){if(p.width===0||p.height===0)return t;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||A.x>t.width-p.width||A.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,B=t.data;if(_===B)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<p.height;F++){const k=((s.y+F)*o.width+s.x)*v,N=((A.y+F)*t.width+A.x)*v;for(let G=0;G<p.width*v;G++)B[N+G]=_[k+G]}return t}class uu{constructor(t,s){Ef(this,t,1,s)}resize(t){Fp(this,t,1)}clone(){return new uu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,A,p,v){Ip(t,s,A,p,v,1)}}class Xo{constructor(t,s){Ef(this,t,4,s)}resize(t){Fp(this,t,4)}replace(t,s){s?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Xo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,A,p,v){Ip(t,s,A,p,v,4)}setPixel(t,s,A){const p=4*(t*this.width+s);this.data[p+0]=Math.round(255*A.r/A.a),this.data[p+1]=Math.round(255*A.g/A.a),this.data[p+2]=Math.round(255*A.b/A.a),this.data[p+3]=Math.round(255*A.a)}}function ud(o){const t={},s=o.resolution||256,A=o.clips?o.clips.length:1,p=o.image||new Xo({width:s,height:A});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(_,B,F)=>{t[o.evaluationKey]=F;const k=o.expression.evaluate(t);p.setPixel(_/4/s,B/4,k)};if(o.clips)for(let _=0,B=0;_<A;++_,B+=4*s)for(let F=0,k=0;F<s;F++,k+=4){const N=F/(s-1),{start:G,end:Z}=o.clips[_];v(B,k,G*(1-N)+Z*N)}else for(let _=0,B=0;_<s;_++,B+=4)v(0,B,_/(s-1));return p}qe("AlphaImage",uu),qe("RGBAImage",Xo);const hd="big-fb";class ag extends Dn{createBucket(t){return new og(t)}constructor(t,s){super(t,Vh,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ud({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(hd)&&this.heatmapFbos.delete(hd)}queryRadius(t){return uh("heatmap-radius",this,t)}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,unwrappedTileID:B,getElevation:F}){return jh({queryGeometry:t,size:this.paint.get("heatmap-radius").evaluate(s,A)*_,transform:v,unwrappedTileID:B,getElevation:F},p)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Tp;var Pp={get paint(){return Tp=Tp||new li({"hillshade-illumination-direction":new mr(dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new mr(dt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new mr(dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mr(dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mr(dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mr(dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mr(dt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new mr(dt.paint_hillshade["hillshade-method"])})}};class Lp extends Dn{constructor(t,s){super(t,Pp,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,A=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values;const v=Math.max(t.length,s.length,A.length,p.length);t=t.concat(Array(v-t.length).fill(t.at(-1))),s=s.concat(Array(v-s.length).fill(s.at(-1))),A=A.concat(Array(v-A.length).fill(A.at(-1))),p=p.concat(Array(v-p.length).fill(p.at(-1)));const _=s.map(Qn);return{directionRadians:t.map(Qn),altitudeRadians:_,shadowColor:p,highlightColor:A}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Yo;var pA={get paint(){return Yo=Yo||new li({"color-relief-opacity":new mr(dt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Jn(dt["paint_color-relief"]["color-relief-color"])})}};class VA{constructor(t,s,A,p){this.context=t,this.format=A,this.texture=t.gl.createTexture(),this.update(s,p)}update(t,s,A){const{width:p,height:v}=t,_=!(this.size&&this.size[0]===p&&this.size[1]===v||A),{context:B}=this,{gl:F}=B;if(this.useMipmap=!!(s&&s.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!s||s.premultiply!==!1)),_)this.size=[p,v],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||qr(t)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,t):F.texImage2D(F.TEXTURE_2D,0,this.format,p,v,0,this.format,F.UNSIGNED_BYTE,t.data);else{const{x:k,y:N}=A||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||qr(t)?F.texSubImage2D(F.TEXTURE_2D,0,k,N,F.RGBA,F.UNSIGNED_BYTE,t):F.texSubImage2D(F.TEXTURE_2D,0,k,N,p,v,F.RGBA,F.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D),B.pixelStoreUnpackFlipY.setDefault(),B.pixelStoreUnpack.setDefault(),B.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,s,A){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),A!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(A=v.LINEAR),t!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,t),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,A||t),this.filter=t),s!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Mp{constructor(t,s,A,p=1,v=1,_=1,B=0){if(this.uid=t,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(A&&!["mapbox","terrarium","custom"].includes(A))return void Br(`"${A}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const F=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),A){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=_,this.baseShift=B;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<F;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(F,k)]=this.data[this._idx(F-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,F)]=this.data[this._idx(k,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<F;k++)for(let N=0;N<F;N++){const G=this.get(k,N);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(t,s){const A=new Uint8Array(this.data.buffer),p=4*this._idx(t,s);return this.unpack(A[p],A[p+1],A[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,s){if(t<-1||t>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(t+1)}unpack(t,s,A){return t*this.redFactor+s*this.greenFactor+A*this.blueFactor-this.baseShift}pack(t){return kp(t,this.getUnpackVector())}getPixels(){return new Xo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,s,A){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,_=A*this.dim,B=A*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(A){case-1:_=B-1;break;case 1:B=_+1}const F=-s*this.dim,k=-A*this.dim;for(let N=_;N<B;N++)for(let G=p;G<v;G++)this.data[this._idx(G,N)]=t.data[this._idx(G+F,N+k)]}}function kp(o,t){const s=t[0],A=t[1],p=t[2],v=t[3],_=Math.min(s,A,p),B=Math.round((o+v)/_);return{r:Math.floor(B*_/s)%256,g:Math.floor(B*_/A)%256,b:Math.floor(B*_/p)%256}}qe("DEMData",Mp);class mA extends Dn{constructor(t,s){super(t,pA,s)}_createColorRamp(t){const s={elevationStops:[],colorStops:[]},A=this._transitionablePaint._values["color-relief-color"].value.expression;if(A instanceof Dc&&A._styleExpression.expression instanceof Vt){this.colorRampExpression=A;const _=A._styleExpression.expression;s.elevationStops=_.labels,s.colorStops=[];for(const B of s.elevationStops)s.colorStops.push(_.evaluate({globals:{elevation:B}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[on.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=t)return s;const p={elevationStops:[],colorStops:[]},v=(s.elevationStops.length-1)/(t-1);for(let _=0;_<s.elevationStops.length-.5;_+=v)p.elevationStops.push(s.elevationStops[Math.round(_)]),p.colorStops.push(s.colorStops[Math.round(_)]);return Br(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${t}, provided: ${s.elevationStops.length}`),p}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(t,s,A){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const p=this._createColorRamp(s),v=new Xo({width:p.colorStops.length,height:1}),_=new Xo({width:p.colorStops.length,height:1});for(let B=0;B<p.elevationStops.length;B++){const F=kp(p.elevationStops[B],A);_.setPixel(0,B,new on(F.r/255,F.g/255,F.b/255,1)),v.setPixel(0,B,p.colorStops[B])}return this.colorRampTextures={elevationTexture:new VA(t,_,t.gl.RGBA),colorTexture:new VA(t,v,t.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const lg=jn([{name:"a_pos",components:2,type:"Int16"}],4),{members:GA}=lg;function fd(o,t,s){const A=s.patternDependencies;let p=!1;for(const v of t){const _=v.paint.get(`${o}-pattern`);_.isConstant()||(p=!0);const B=_.constantOr(null);B&&(p=!0,A[B.to]=!0,A[B.from]=!0)}return p}function dd(o,t,s,A,p){const{zoom:v}=A,_=p.patternDependencies;for(const B of t){const F=B.paint.get(`${o}-pattern`).value;if(F.kind!=="constant"){let k=F.evaluate({zoom:v-1},s,{},p.availableImages),N=F.evaluate({zoom:v},s,{},p.availableImages),G=F.evaluate({zoom:v+1},s,{},p.availableImages);k=k&&k.name?k.name:k,N=N&&N.name?N.name:N,G=G&&G.name?G.name:G,_[k]=!0,_[N]=!0,_[G]=!0,s.patterns[B.id]={min:k,mid:N,max:G}}}return s}function Up(o,t,s,A,p){let v;if(p===(function(_,B,F,k){let N=0;for(let G=B,Z=F-k;G<F;G+=k)N+=(_[Z]-_[G])*(_[G+1]+_[Z+1]),Z=G;return N})(o,t,s,A)>0)for(let _=t;_<s;_+=A)v=KA(_/A|0,o[_],o[_+1],v);else for(let _=s-A;_>=t;_-=A)v=KA(_/A|0,o[_],o[_+1],v);return v&&hu(v,v.next)&&(Ou(v),v=v.next),v}function Nu(o,t){if(!o)return o;t||(t=o);let s,A=o;do if(s=!1,A.steiner||!hu(A,A.next)&&zi(A.prev,A,A.next)!==0)A=A.next;else{if(Ou(A),A=t=A.prev,A===A.next)break;s=!0}while(s||A!==t);return t}function Gh(o,t,s,A,p,v,_){if(!o)return;!_&&v&&(function(F,k,N,G){let Z=F;do Z.z===0&&(Z.z=Fo(Z.x,Z.y,k,N,G)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==F);Z.prevZ.nextZ=null,Z.prevZ=null,(function(Y){let se,ae=1;do{let ue,xe=Y;Y=null;let et=null;for(se=0;xe;){se++;let Ce=xe,Le=0;for(let ct=0;ct<ae&&(Le++,Ce=Ce.nextZ,Ce);ct++);let nt=ae;for(;Le>0||nt>0&&Ce;)Le!==0&&(nt===0||!Ce||xe.z<=Ce.z)?(ue=xe,xe=xe.nextZ,Le--):(ue=Ce,Ce=Ce.nextZ,nt--),et?et.nextZ=ue:Y=ue,ue.prevZ=et,et=ue;xe=Ce}et.nextZ=null,ae*=2}while(se>1)})(Z)})(o,A,p,v);let B=o;for(;o.prev!==o.next;){const F=o.prev,k=o.next;if(v?pd(o,A,p,v):rv(o))t.push(F.i,o.i,k.i),Ou(o),o=k.next,B=k.next;else if((o=k)===B){_?_===1?Gh(o=Dp(Nu(o),t),t,s,A,p,v,2):_===2&&Gc(o,t,s,A,p,v):Gh(Nu(o),t,s,A,p,v,1);break}}}function rv(o){const t=o.prev,s=o,A=o.next;if(zi(t,s,A)>=0)return!1;const p=t.x,v=s.x,_=A.x,B=t.y,F=s.y,k=A.y,N=Math.min(p,v,_),G=Math.min(B,F,k),Z=Math.max(p,v,_),Y=Math.max(B,F,k);let se=A.next;for(;se!==t;){if(se.x>=N&&se.x<=Z&&se.y>=G&&se.y<=Y&&Qs(p,B,v,F,_,k,se.x,se.y)&&zi(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function pd(o,t,s,A){const p=o.prev,v=o,_=o.next;if(zi(p,v,_)>=0)return!1;const B=p.x,F=v.x,k=_.x,N=p.y,G=v.y,Z=_.y,Y=Math.min(B,F,k),se=Math.min(N,G,Z),ae=Math.max(B,F,k),ue=Math.max(N,G,Z),xe=Fo(Y,se,t,s,A),et=Fo(ae,ue,t,s,A);let Ce=o.prevZ,Le=o.nextZ;for(;Ce&&Ce.z>=xe&&Le&&Le.z<=et;){if(Ce.x>=Y&&Ce.x<=ae&&Ce.y>=se&&Ce.y<=ue&&Ce!==p&&Ce!==_&&Qs(B,N,F,G,k,Z,Ce.x,Ce.y)&&zi(Ce.prev,Ce,Ce.next)>=0||(Ce=Ce.prevZ,Le.x>=Y&&Le.x<=ae&&Le.y>=se&&Le.y<=ue&&Le!==p&&Le!==_&&Qs(B,N,F,G,k,Z,Le.x,Le.y)&&zi(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Ce&&Ce.z>=xe;){if(Ce.x>=Y&&Ce.x<=ae&&Ce.y>=se&&Ce.y<=ue&&Ce!==p&&Ce!==_&&Qs(B,N,F,G,k,Z,Ce.x,Ce.y)&&zi(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.prevZ}for(;Le&&Le.z<=et;){if(Le.x>=Y&&Le.x<=ae&&Le.y>=se&&Le.y<=ue&&Le!==p&&Le!==_&&Qs(B,N,F,G,k,Z,Le.x,Le.y)&&zi(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function Dp(o,t){let s=o;do{const A=s.prev,p=s.next.next;!hu(A,p)&&md(A,s,s.next,p)&&dh(A,p)&&dh(p,A)&&(t.push(A.i,s.i,p.i),Ou(s),Ou(s.next),s=o=p),s=s.next}while(s!==o);return Nu(s)}function Gc(o,t,s,A,p,v){let _=o;do{let B=_.next.next;for(;B!==_.prev;){if(_.i!==B.i&&Ff(_,B)){let F=ph(_,B);return _=Nu(_,_.next),F=Nu(F,F.next),Gh(_,t,s,A,p,v,0),void Gh(F,t,s,A,p,v,0)}B=B.next}_=_.next}while(_!==o)}function gi(o,t){let s=o.x-t.x;return s===0&&(s=o.y-t.y,s===0)&&(s=(o.next.y-o.y)/(o.next.x-o.x)-(t.next.y-t.y)/(t.next.x-t.x)),s}function Jo(o,t){const s=(function(p,v){let _=v;const B=p.x,F=p.y;let k,N=-1/0;if(hu(p,_))return _;do{if(hu(p,_.next))return _.next;if(F<=_.y&&F>=_.next.y&&_.next.y!==_.y){const ae=_.x+(F-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(ae<=B&&ae>N&&(N=ae,k=_.x<_.next.x?_:_.next,ae===B))return k}_=_.next}while(_!==v);if(!k)return null;const G=k,Z=k.x,Y=k.y;let se=1/0;_=k;do{if(B>=_.x&&_.x>=Z&&B!==_.x&&fh(F<Y?B:N,F,Z,Y,F<Y?N:B,F,_.x,_.y)){const ae=Math.abs(F-_.y)/(B-_.x);dh(_,p)&&(ae<se||ae===se&&(_.x>k.x||_.x===k.x&&yo(k,_)))&&(k=_,se=ae)}_=_.next}while(_!==G);return k})(o,t);if(!s)return t;const A=ph(s,o);return Nu(A,A.next),Nu(s,s.next)}function yo(o,t){return zi(o.prev,o,t.prev)<0&&zi(t.next,o,o.next)<0}function Fo(o,t,s,A,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-A)*p|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function hc(o){let t=o,s=o;do(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next;while(t!==o);return s}function fh(o,t,s,A,p,v,_,B){return(p-_)*(t-B)>=(o-_)*(v-B)&&(o-_)*(A-B)>=(s-_)*(t-B)&&(s-_)*(v-B)>=(p-_)*(A-B)}function Qs(o,t,s,A,p,v,_,B){return!(o===_&&t===B)&&fh(o,t,s,A,p,v,_,B)}function Ff(o,t){return o.next.i!==t.i&&o.prev.i!==t.i&&!(function(s,A){let p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==A.i&&p.next.i!==A.i&&md(p,p.next,s,A))return!0;p=p.next}while(p!==s);return!1})(o,t)&&(dh(o,t)&&dh(t,o)&&(function(s,A){let p=s,v=!1;const _=(s.x+A.x)/2,B=(s.y+A.y)/2;do p.y>B!=p.next.y>B&&p.next.y!==p.y&&_<(p.next.x-p.x)*(B-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v})(o,t)&&(zi(o.prev,o,t.prev)||zi(o,t.prev,t))||hu(o,t)&&zi(o.prev,o,o.next)>0&&zi(t.prev,t,t.next)>0)}function zi(o,t,s){return(t.y-o.y)*(s.x-t.x)-(t.x-o.x)*(s.y-t.y)}function hu(o,t){return o.x===t.x&&o.y===t.y}function md(o,t,s,A){const p=va(zi(o,t,s)),v=va(zi(o,t,A)),_=va(zi(s,A,o)),B=va(zi(s,A,t));return p!==v&&_!==B||!(p!==0||!Qu(o,s,t))||!(v!==0||!Qu(o,A,t))||!(_!==0||!Qu(s,o,A))||!(B!==0||!Qu(s,t,A))}function Qu(o,t,s){return t.x<=Math.max(o.x,s.x)&&t.x>=Math.min(o.x,s.x)&&t.y<=Math.max(o.y,s.y)&&t.y>=Math.min(o.y,s.y)}function va(o){return o>0?1:o<0?-1:0}function dh(o,t){return zi(o.prev,o,o.next)<0?zi(o,t,o.next)>=0&&zi(o,o.prev,t)>=0:zi(o,t,o.prev)<0||zi(o,o.next,t)<0}function ph(o,t){const s=If(o.i,o.x,o.y),A=If(t.i,t.x,t.y),p=o.next,v=t.prev;return o.next=t,t.prev=o,s.next=p,p.prev=s,A.next=s,s.prev=A,v.next=A,A.prev=v,A}function KA(o,t,s,A){const p=If(o,t,s);return A?(p.next=A.next,p.prev=A,A.next.prev=p,A.next=p):(p.prev=p,p.next=p),p}function Ou(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function If(o,t,s){return{i:o,x:t,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class fc{constructor(t,s){if(s>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=s}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class mh{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}mh.noSubdivision=new mh({fill:new fc(0,0),line:new fc(0,0),tile:new fc(0,0),stencil:new fc(0,0),circle:1}),qe("SubdivisionGranularityExpression",fc),qe("SubdivisionGranularitySetting",mh);const dc=-32768,zu=32767;class Tf{constructor(t,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=Ie/t,this._canonical=s}_getKey(t,s){return(t+=32768)<<16|s+32768}_vertexToIndex(t,s){if(t<-32768||s<-32768||t>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const A=0|Math.round(t),p=0|Math.round(s),v=this._getKey(A,p);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const _=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,_),this._vertexBuffer.push(A,p),_}_subdivideTrianglesScanline(t){if(this._granularity<2)return(function(p,v){const _=[];for(let B=0;B<v.length;B+=3){const F=v[B],k=v[B+1],N=v[B+2],G=p[2*F],Z=p[2*F+1];(p[2*k]-G)*(p[2*N+1]-Z)-(p[2*k+1]-Z)*(p[2*N]-G)>0?(_.push(F),_.push(N),_.push(k)):(_.push(F),_.push(k),_.push(N))}return _})(this._vertexBuffer,t);const s=[],A=t.length;for(let p=0;p<A;p+=3){const v=[t[p+0],t[p+1],t[p+2]],_=[this._vertexBuffer[2*t[p+0]+0],this._vertexBuffer[2*t[p+0]+1],this._vertexBuffer[2*t[p+1]+0],this._vertexBuffer[2*t[p+1]+1],this._vertexBuffer[2*t[p+2]+0],this._vertexBuffer[2*t[p+2]+1]];let B=1/0,F=1/0,k=-1/0,N=-1/0;for(let ae=0;ae<3;ae++){const ue=_[2*ae],xe=_[2*ae+1];B=Math.min(B,ue),k=Math.max(k,ue),F=Math.min(F,xe),N=Math.max(N,xe)}if(B===k||F===N)continue;const G=Math.floor(B/this._granularityCellSize),Z=Math.ceil(k/this._granularityCellSize),Y=Math.floor(F/this._granularityCellSize),se=Math.ceil(N/this._granularityCellSize);if(G!==Z||Y!==se)for(let ae=Y;ae<se;ae++){const ue=this._scanlineGenerateVertexRingForCellRow(ae,_,v);yd(this._vertexBuffer,ue,s)}else s.push(...v)}return s}_scanlineGenerateVertexRingForCellRow(t,s,A){const p=t*this._granularityCellSize,v=p+this._granularityCellSize,_=[];for(let B=0;B<3;B++){const F=s[2*B],k=s[2*B+1],N=s[2*(B+1)%6],G=s[(2*(B+1)+1)%6],Z=s[2*(B+2)%6],Y=s[(2*(B+2)+1)%6],se=N-F,ae=G-k,ue=se===0,xe=ae===0,et=(p-k)/ae,Ce=(v-k)/ae,Le=Math.min(et,Ce),nt=Math.max(et,Ce);if(!xe&&(Le>=1||nt<=0)||xe&&(k<p||k>v)){G>=p&&G<=v&&_.push(A[(B+1)%3]);continue}!xe&&Le>0&&_.push(this._vertexToIndex(F+se*Le,k+ae*Le));const ct=F+se*Math.max(Le,0),Lt=F+se*Math.min(nt,1);ue||this._generateIntraEdgeVertices(_,F,k,N,G,ct,Lt),!xe&&nt<1&&_.push(this._vertexToIndex(F+se*nt,k+ae*nt)),(xe||G>=p&&G<=v)&&_.push(A[(B+1)%3]),!xe&&(G<=p||G>=v)&&this._generateInterEdgeVertices(_,F,k,N,G,Z,Y,Lt,p,v)}return _}_generateIntraEdgeVertices(t,s,A,p,v,_,B){const F=p-s,k=v-A,N=k===0,G=N?Math.min(s,p):Math.min(_,B),Z=N?Math.max(s,p):Math.max(_,B),Y=Math.floor(G/this._granularityCellSize)+1,se=Math.ceil(Z/this._granularityCellSize)-1;if(N?s<p:_<B)for(let ae=Y;ae<=se;ae++){const ue=ae*this._granularityCellSize;t.push(this._vertexToIndex(ue,A+k*(ue-s)/F))}else for(let ae=se;ae>=Y;ae--){const ue=ae*this._granularityCellSize;t.push(this._vertexToIndex(ue,A+k*(ue-s)/F))}}_generateInterEdgeVertices(t,s,A,p,v,_,B,F,k,N){const G=v-A,Z=_-p,Y=B-v,se=(k-v)/Y,ae=(N-v)/Y,ue=Math.min(se,ae),xe=Math.max(se,ae),et=p+Z*ue;let Ce=Math.floor(Math.min(et,F)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(et,F)/this._granularityCellSize)-1,nt=F<et;const ct=Y===0;if(ct&&(B===k||B===N))return;if(ct||ue>=1||xe<=0){const Zt=A-B,jt=_+(s-_)*Math.min((k-B)/Zt,(N-B)/Zt);Ce=Math.floor(Math.min(jt,F)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(jt,F)/this._granularityCellSize)-1,nt=F<jt}const Lt=G>0?N:k;if(nt)for(let Zt=Ce;Zt<=Le;Zt++)t.push(this._vertexToIndex(Zt*this._granularityCellSize,Lt));else for(let Zt=Le;Zt>=Ce;Zt--)t.push(this._vertexToIndex(Zt*this._granularityCellSize,Lt))}_generateOutline(t){const s=[];for(const A of t){const p=qA(A,this._granularity,!0),v=this._pointArrayToIndices(p),_=[];for(let B=1;B<v.length;B++)_.push(v[B-1]),_.push(v[B]);s.push(_)}return s}_handlePoles(t){let s=!1,A=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(A=!0)),(s||A)&&this._fillPoles(t,s,A)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let s=0;s<t.length;s+=2){const A=t[s+1];A===dc&&(t[s+1]=-32767),A===zu&&(t[s+1]=32766)}}_generatePoleQuad(t,s,A,p,v,_){p>v!=(_===dc)?(t.push(s),t.push(A),t.push(this._vertexToIndex(p,_)),t.push(A),t.push(this._vertexToIndex(v,_)),t.push(this._vertexToIndex(p,_))):(t.push(A),t.push(s),t.push(this._vertexToIndex(p,_)),t.push(this._vertexToIndex(v,_)),t.push(A),t.push(this._vertexToIndex(p,_)))}_fillPoles(t,s,A){const p=this._vertexBuffer,v=Ie,_=t.length;for(let B=2;B<_;B+=3){const F=t[B-2],k=t[B-1],N=t[B],G=p[2*F],Z=p[2*F+1],Y=p[2*k],se=p[2*k+1],ae=p[2*N],ue=p[2*N+1];s&&(Z===0&&se===0&&this._generatePoleQuad(t,F,k,G,Y,dc),se===0&&ue===0&&this._generatePoleQuad(t,k,N,Y,ae,dc),ue===0&&Z===0&&this._generatePoleQuad(t,N,F,ae,G,dc)),A&&(Z===v&&se===v&&this._generatePoleQuad(t,F,k,G,Y,zu),se===v&&ue===v&&this._generatePoleQuad(t,k,N,Y,ae,zu),ue===v&&Z===v&&this._generatePoleQuad(t,N,F,ae,G,zu))}}_initializeVertices(t){for(let s=0;s<t.length;s+=2)this._vertexToIndex(t[s],t[s+1])}subdividePolygonInternal(t,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:A,holeIndices:p}=(function(B){const F=[],k=[];for(const N of B)if(N.length!==0){N!==B[0]&&F.push(k.length/2);for(let G=0;G<N.length;G++)k.push(N[G].x),k.push(N[G].y)}return{flattened:k,holeIndices:F}})(t);let v;this._initializeVertices(A);try{const B=(function(k,N,G=2){const Z=N&&N.length,Y=Z?N[0]*G:k.length;let se=Up(k,0,Y,G,!0);const ae=[];if(!se||se.next===se.prev)return ae;let ue,xe,et;if(Z&&(se=(function(Ce,Le,nt,ct){const Lt=[];for(let Zt=0,jt=Le.length;Zt<jt;Zt++){const nr=Up(Ce,Le[Zt]*ct,Zt<jt-1?Le[Zt+1]*ct:Ce.length,ct,!1);nr===nr.next&&(nr.steiner=!0),Lt.push(hc(nr))}Lt.sort(gi);for(let Zt=0;Zt<Lt.length;Zt++)nt=Jo(Lt[Zt],nt);return nt})(k,N,se,G)),k.length>80*G){ue=k[0],xe=k[1];let Ce=ue,Le=xe;for(let nt=G;nt<Y;nt+=G){const ct=k[nt],Lt=k[nt+1];ct<ue&&(ue=ct),Lt<xe&&(xe=Lt),ct>Ce&&(Ce=ct),Lt>Le&&(Le=Lt)}et=Math.max(Ce-ue,Le-xe),et=et!==0?32767/et:0}return Gh(se,ae,G,ue,xe,et,0),ae})(A,p),F=this._convertIndices(A,B);v=this._subdivideTrianglesScanline(F)}catch(B){console.error(B)}let _=[];return s&&(_=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:_}}_convertIndices(t,s){const A=[];for(let p=0;p<s.length;p++)A.push(this._vertexToIndex(t[2*s[p]],t[2*s[p]+1]));return A}_pointArrayToIndices(t){const s=[];for(let A=0;A<t.length;A++){const p=t[A];s.push(this._vertexToIndex(p.x,p.y))}return s}}function gd(o,t,s,A=!0){return new Tf(s,t).subdividePolygonInternal(o,A)}function qA(o,t,s=!1){if(!o||o.length<1)return[];if(o.length<2)return[];const A=o[0],p=o[o.length-1],v=s&&(A.x!==p.x||A.y!==p.y);if(t<2)return v?[...o,o[0]]:[...o];const _=Math.floor(Ie/t),B=[];B.push(new x(o[0].x,o[0].y));const F=o.length,k=v?F:F-1;for(let N=0;N<k;N++){const G=o[N],Z=N<F-1?o[N+1]:o[0],Y=G.x,se=G.y,ae=Z.x,ue=Z.y,xe=Y!==ae,et=se!==ue;if(!xe&&!et)continue;const Ce=ae-Y,Le=ue-se,nt=Math.abs(Ce),ct=Math.abs(Le);let Lt=Y,Zt=se;for(;;){const nr=Ce>0?(Math.floor(Lt/_)+1)*_:(Math.ceil(Lt/_)-1)*_,vr=Le>0?(Math.floor(Zt/_)+1)*_:(Math.ceil(Zt/_)-1)*_,sr=Math.abs(Lt-nr),Kt=Math.abs(Zt-vr),Qt=Math.abs(Lt-ae),Pr=Math.abs(Zt-ue),Fr=xe?sr/nt:Number.POSITIVE_INFINITY,Mr=et?Kt/ct:Number.POSITIVE_INFINITY;if((Qt<=sr||!xe)&&(Pr<=Kt||!et))break;if(Fr<Mr&&xe||!et){Lt=nr,Zt+=Le*Fr;const Cr=new x(Lt,Math.round(Zt));B[B.length-1].x===Cr.x&&B[B.length-1].y===Cr.y||B.push(Cr)}else{Lt+=Ce*Mr,Zt=vr;const Cr=new x(Math.round(Lt),Zt);B[B.length-1].x===Cr.x&&B[B.length-1].y===Cr.y||B.push(Cr)}}const jt=new x(ae,ue);B[B.length-1].x===jt.x&&B[B.length-1].y===jt.y||B.push(jt)}return B}function yd(o,t,s){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let A=0,p=o[2*t[0]];for(let F=1;F<t.length;F++){const k=o[2*t[F]];k<p&&(p=k,A=F)}const v=t.length;let _=A,B=(_+1)%v;for(;;){const F=_-1>=0?_-1:v-1,k=(B+1)%v,N=o[2*t[F]],G=o[2*t[k]],Z=o[2*t[_]],Y=o[2*t[_]+1],se=o[2*t[B]+1];let ae=!1;if(N<G)ae=!0;else if(N>G)ae=!1;else{const ue=se-Y,xe=-(o[2*t[B]]-Z),et=Y<se?1:-1;((N-Z)*ue+(o[2*t[F]+1]-Y)*xe)*et>((G-Z)*ue+(o[2*t[k]+1]-Y)*xe)*et&&(ae=!0)}if(ae){const ue=t[F],xe=t[_],et=t[B];ue!==xe&&ue!==et&&xe!==et&&s.push(et,xe,ue),_--,_<0&&(_=v-1)}else{const ue=t[k],xe=t[_],et=t[B];ue!==xe&&ue!==et&&xe!==et&&s.push(et,xe,ue),B++,B>=v&&(B=0)}if(F===k)break}}function qa(o,t,s,A,p,v,_,B,F){const k=p.length/2,N=_&&B&&F;if(k<rr.MAX_VERTEX_ARRAY_LENGTH){const G=t.prepareSegment(k,s,A),Z=G.vertexLength;for(let ae=0;ae<v.length;ae+=3)A.emplaceBack(Z+v[ae],Z+v[ae+1],Z+v[ae+2]);let Y,se;G.vertexLength+=k,G.primitiveLength+=v.length/3,N&&(se=_.prepareSegment(k,s,B),Y=se.vertexLength,se.vertexLength+=k);for(let ae=0;ae<p.length;ae+=2)o(p[ae],p[ae+1]);if(N)for(let ae=0;ae<F.length;ae++){const ue=F[ae];for(let xe=1;xe<ue.length;xe+=2)B.emplaceBack(Y+ue[xe-1],Y+ue[xe]);se.primitiveLength+=ue.length/2}}else(function(G,Z,Y,se,ae,ue){const xe=[];for(let ct=0;ct<se.length/2;ct++)xe.push(-1);const et={count:0};let Ce=0,Le=G.getOrCreateLatestSegment(Z,Y),nt=Le.vertexLength;for(let ct=2;ct<ae.length;ct+=3){const Lt=ae[ct-2],Zt=ae[ct-1],jt=ae[ct];let nr=xe[Lt]<Ce,vr=xe[Zt]<Ce,sr=xe[jt]<Ce;Le.vertexLength+((nr?1:0)+(vr?1:0)+(sr?1:0))>rr.MAX_VERTEX_ARRAY_LENGTH&&(Le=G.createNewSegment(Z,Y),Ce=et.count,nr=!0,vr=!0,sr=!0,nt=0);const Kt=Kc(xe,se,ue,et,Lt,nr,Le),Qt=Kc(xe,se,ue,et,Zt,vr,Le),Pr=Kc(xe,se,ue,et,jt,sr,Le);Y.emplaceBack(nt+Kt-Ce,nt+Qt-Ce,nt+Pr-Ce),Le.primitiveLength++}})(t,s,A,p,v,o),N&&(function(G,Z,Y,se,ae,ue){const xe=[];for(let ct=0;ct<se.length/2;ct++)xe.push(-1);const et={count:0};let Ce=0,Le=G.getOrCreateLatestSegment(Z,Y),nt=Le.vertexLength;for(let ct=0;ct<ae.length;ct++){const Lt=ae[ct];for(let Zt=1;Zt<ae[ct].length;Zt+=2){const jt=Lt[Zt-1],nr=Lt[Zt];let vr=xe[jt]<Ce,sr=xe[nr]<Ce;Le.vertexLength+((vr?1:0)+(sr?1:0))>rr.MAX_VERTEX_ARRAY_LENGTH&&(Le=G.createNewSegment(Z,Y),Ce=et.count,vr=!0,sr=!0,nt=0);const Kt=Kc(xe,se,ue,et,jt,vr,Le),Qt=Kc(xe,se,ue,et,nr,sr,Le);Y.emplaceBack(nt+Kt-Ce,nt+Qt-Ce),Le.primitiveLength++}}})(_,s,B,p,F,o),t.forceNewSegmentOnNextPrepare(),_?.forceNewSegmentOnNextPrepare()}function Kc(o,t,s,A,p,v,_){if(v){const B=A.count;return s(t[2*p],t[2*p+1]),o[p]=A.count,A.count++,_.vertexLength++,B}return o[p]}class pc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ve,this.indexArray=new Ut,this.indexArray2=new Tt,this.programConfigurations=new ls(t.layers,t.zoom),this.segments=new rr,this.segments2=new rr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.hasDependencies=fd("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),_=[];for(const{feature:B,id:F,index:k,sourceLayerIndex:N}of t){const G=this.layers[0]._featureFilter.needGeometry,Z=jA(B,G);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),Z,A))continue;const Y=v?p.evaluate(Z,{},A,s.availableImages):void 0,se={id:F,properties:B.properties,type:B.type,sourceLayerIndex:N,index:k,geometry:G?Z.geometry:HA(B),patterns:{},sortKey:Y};_.push(se)}v&&_.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of _){const{geometry:F,index:k,sourceLayerIndex:N}=B;if(this.hasDependencies){const G=dd("fill",this.layers,B,{zoom:this.zoom},s);this.patternFeatures.push(G)}else this.addFeature(B,F,k,A,{},s.subdivisionGranularity);s.featureIndex.insert(t[k].feature,F,k,N,this.index)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}addFeatures(t,s,A){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,A,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,GA),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,s,A,p,v,_){for(const B of Pa(s,500)){const F=gd(B,p,_.fill.getGranularityForZoomLevel(p.z)),k=this.layoutVertexArray;qa(((N,G)=>{k.emplaceBack(N,G)}),this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,canonical:p})}}let gl,Rp;qe("FillBucket",pc,{omit:["layers","patternFeatures"]});var Np={get paint(){return Rp=Rp||new li({"fill-antialias":new mr(dt.paint_fill["fill-antialias"]),"fill-opacity":new wr(dt.paint_fill["fill-opacity"]),"fill-color":new wr(dt.paint_fill["fill-color"]),"fill-outline-color":new wr(dt.paint_fill["fill-outline-color"]),"fill-translate":new mr(dt.paint_fill["fill-translate"]),"fill-translate-anchor":new mr(dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ii(dt.paint_fill["fill-pattern"])})},get layout(){return gl=gl||new li({"fill-sort-key":new wr(dt.layout_fill["fill-sort-key"])})}};class Qp extends Dn{constructor(t,s){super(t,Np,s)}recalculate(t,s){super.recalculate(t,s);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new pc(t)}queryRadius(){return hh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:s,transform:A,pixelsToTileUnits:p}){return Hh(Vc(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-A.bearingInRadians,p),s)}isTileClipped(){return!0}}const nv=jn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Hu=jn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:cg}=nv;class gh{constructor(t,s,A,p,v){this.properties={},this.extent=A,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=p,this._values=v,t.readFields(yh,this,s)}loadGeometry(){const t=this._pbf;t.pos=this._geometry;const s=t.readVarint()+t.pos,A=[];let p,v=1,_=0,B=0,F=0;for(;t.pos<s;){if(_<=0){const k=t.readVarint();v=7&k,_=k>>3}if(_--,v===1||v===2)B+=t.readSVarint(),F+=t.readSVarint(),v===1&&(p&&A.push(p),p=[]),p&&p.push(new x(B,F));else{if(v!==7)throw new Error(`unknown command ${v}`);p&&p.push(p[0].clone())}}return p&&A.push(p),A}bbox(){const t=this._pbf;t.pos=this._geometry;const s=t.readVarint()+t.pos;let A=1,p=0,v=0,_=0,B=1/0,F=-1/0,k=1/0,N=-1/0;for(;t.pos<s;){if(p<=0){const G=t.readVarint();A=7&G,p=G>>3}if(p--,A===1||A===2)v+=t.readSVarint(),_+=t.readSVarint(),v<B&&(B=v),v>F&&(F=v),_<k&&(k=_),_>N&&(N=_);else if(A!==7)throw new Error(`unknown command ${A}`)}return[B,k,F,N]}toGeoJSON(t,s,A){const p=this.extent*Math.pow(2,A),v=this.extent*t,_=this.extent*s,B=this.loadGeometry();function F(Z){return[360*(Z.x+v)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(Z.y+_)/p)*Math.PI))-90]}function k(Z){return Z.map(F)}let N;if(this.type===1){const Z=[];for(const se of B)Z.push(se[0]);const Y=k(Z);N=Z.length===1?{type:"Point",coordinates:Y[0]}:{type:"MultiPoint",coordinates:Y}}else if(this.type===2){const Z=B.map(k);N=Z.length===1?{type:"LineString",coordinates:Z[0]}:{type:"MultiLineString",coordinates:Z}}else{if(this.type!==3)throw new Error("unknown feature type");{const Z=vd(B),Y=[];for(const se of Z)Y.push(se.map(k));N=Y.length===1?{type:"Polygon",coordinates:Y[0]}:{type:"MultiPolygon",coordinates:Y}}}const G={type:"Feature",geometry:N,properties:this.properties};return this.id!=null&&(G.id=this.id),G}}function yh(o,t,s){o===1?t.id=s.readVarint():o===2?(function(A,p){const v=A.readVarint()+A.pos;for(;A.pos<v;){const _=p._keys[A.readVarint()],B=p._values[A.readVarint()];p.properties[_]=B}})(s,t):o===3?t.type=s.readVarint():o===4&&(t._geometry=s.pos)}function vd(o){const t=o.length;if(t<=1)return[o];const s=[];let A,p;for(let v=0;v<t;v++){const _=vh(o[v]);_!==0&&(p===void 0&&(p=_<0),p===_<0?(A&&s.push(A),A=[o[v]]):A&&A.push(o[v]))}return A&&s.push(A),s}function vh(o){let t=0;for(let s,A,p=0,v=o.length,_=v-1;p<v;_=p++)s=o[p],A=o[_],t+=(A.x-s.x)*(s.y+A.y);return t}gh.types=["Unknown","Point","LineString","Polygon"];class Ag{constructor(t,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ug,this,s),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const s=this._pbf.readVarint()+this._pbf.pos;return new gh(this._pbf,s,this.extent,this._keys,this._values)}}function ug(o,t,s){o===15?t.version=s.readVarint():o===1?t.name=s.readString():o===5?t.extent=s.readVarint():o===2?t._features.push(s.pos):o===3?t._keys.push(s.readString()):o===4&&t._values.push((function(A){let p=null;const v=A.readVarint()+A.pos;for(;A.pos<v;){const _=A.readVarint()>>3;p=_===1?A.readString():_===2?A.readFloat():_===3?A.readDouble():_===4?A.readVarint64():_===5?A.readVarint():_===6?A.readSVarint():_===7?A.readBoolean():null}if(p==null)throw new Error("unknown feature value");return p})(s))}class _d{constructor(t,s){this.layers=t.readFields(wd,{},s)}}function wd(o,t,s){if(o===3){const A=new Ag(s,s.readVarint()+s.pos);A.length&&(t[A.name]=A)}}const Op=Math.pow(2,13);function Pf(o,t,s,A,p,v,_,B){o.emplaceBack(t,s,2*Math.floor(A*Op)+_,p*Op*2,v*Op*2,Math.round(B))}class xd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new Me,this.centroidVertexArray=new J,this.indexArray=new Ut,this.programConfigurations=new ls(t.layers,t.zoom),this.segments=new rr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.features=[],this.hasDependencies=fd("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:_,sourceLayerIndex:B}of t){const F=this.layers[0]._featureFilter.needGeometry,k=jA(p,F);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),k,A))continue;const N={id:v,sourceLayerIndex:B,index:_,geometry:F?k.geometry:HA(p),properties:p.properties,type:p.type,patterns:{}};this.hasDependencies?this.features.push(dd("fill-extrusion",this.layers,N,{zoom:this.zoom},s)):this.addFeature(N,N.geometry,_,A,{},s.subdivisionGranularity),s.featureIndex.insert(p,N.geometry,_,B,this.index,!0)}}addFeatures(t,s,A){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,A,t.subdivisionGranularity)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,cg),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Hu.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,s,A,p,v,_){for(const B of Pa(s,500)){const F={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(F,p,t,B,_);const N=this.layoutVertexArray.length-k,G=Math.floor(F.x/F.sampleCount),Z=Math.floor(F.y/F.sampleCount);for(let Y=0;Y<N;Y++)this.centroidVertexArray.emplaceBack(G,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,canonical:p})}processPolygon(t,s,A,p,v){if(p.length<1||fg(p[0]))return;for(const G of p)G.length!==0&&hg(t,G);const _={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},B=v.fill.getGranularityForZoomLevel(s.z),F=gh.types[A.type]==="Polygon";for(const G of p){if(G.length===0||fg(G))continue;const Z=qA(G,B,F);this._generateSideFaces(Z,_)}if(!F)return;const k=gd(p,s,B,!1),N=this.layoutVertexArray;qa(((G,Z)=>{Pf(N,G,Z,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(t,s){let A=0;for(let p=1;p<t.length;p++){const v=t[p],_=t[p-1];if(_h(v,_))continue;s.segment.vertexLength+4>rr.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const B=v.sub(_)._perp()._unit(),F=_.dist(v);A+F>32768&&(A=0),Pf(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,0,A),Pf(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,1,A),A+=F,Pf(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,0,A),Pf(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,1,A);const k=s.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function hg(o,t){for(let s=0;s<t.length;s++){const A=t[s];s===t.length-1&&t[0].x===A.x&&t[0].y===A.y||(o.x+=A.x,o.y+=A.y,o.sampleCount++)}}function _h(o,t){return o.x===t.x&&(o.x<0||o.x>Ie)||o.y===t.y&&(o.y<0||o.y>Ie)}function fg(o){return o.every((t=>t.x<0))||o.every((t=>t.x>Ie))||o.every((t=>t.y<0))||o.every((t=>t.y>Ie))}let wh;qe("FillExtrusionBucket",xd,{omit:["layers","features"]});var dg={get paint(){return wh=wh||new li({"fill-extrusion-opacity":new mr(dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wr(dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mr(dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mr(dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ii(dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wr(dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wr(dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mr(dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class to extends Dn{constructor(t,s){super(t,dg,s)}createBucket(t){return new xd(t)}queryRadius(){return hh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,pixelPosMatrix:B}){const F=Vc(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,_),k=this.paint.get("fill-extrusion-height").evaluate(s,A),N=this.paint.get("fill-extrusion-base").evaluate(s,A),G=(function(Y,se){const ae=[];for(const ue of Y){const xe=[ue.x,ue.y,0,1];Fe(xe,xe,se),ae.push(new x(xe[0]/xe[3],xe[1]/xe[3]))}return ae})(F,B),Z=(function(Y,se,ae,ue){const xe=[],et=[],Ce=ue[8]*se,Le=ue[9]*se,nt=ue[10]*se,ct=ue[11]*se,Lt=ue[8]*ae,Zt=ue[9]*ae,jt=ue[10]*ae,nr=ue[11]*ae;for(const vr of Y){const sr=[],Kt=[];for(const Qt of vr){const Pr=Qt.x,Fr=Qt.y,Mr=ue[0]*Pr+ue[4]*Fr+ue[12],Cr=ue[1]*Pr+ue[5]*Fr+ue[13],Yr=ue[2]*Pr+ue[6]*Fr+ue[14],ti=ue[3]*Pr+ue[7]*Fr+ue[15],Vn=Yr+nt,fs=ti+ct,Xa=Mr+Lt,vo=Cr+Zt,ds=Yr+jt,cs=ti+nr,bi=new x((Mr+Ce)/fs,(Cr+Le)/fs);bi.z=Vn/fs,sr.push(bi);const zs=new x(Xa/cs,vo/cs);zs.z=ds/cs,Kt.push(zs)}xe.push(sr),et.push(Kt)}return[xe,et]})(p,N,k,B);return(function(Y,se,ae){let ue=1/0;Hh(ae,se)&&(ue=zp(ae,se[0]));for(let xe=0;xe<se.length;xe++){const et=se[xe],Ce=Y[xe];for(let Le=0;Le<et.length-1;Le++){const nt=et[Le],ct=[nt,et[Le+1],Ce[Le+1],Ce[Le],nt];lh(ae,ct)&&(ue=Math.min(ue,zp(ae,ct)))}}return ue!==1/0&&ue})(Z[0],Z[1],G)}}function Lf(o,t){return o.x*t.x+o.y*t.y}function zp(o,t){if(o.length===1){let s=0;const A=t[s++];let p;for(;!p||A.equals(p);)if(p=t[s++],!p)return 1/0;for(;s<t.length;s++){const v=t[s],_=o[0],B=p.sub(A),F=v.sub(A),k=_.sub(A),N=Lf(B,B),G=Lf(B,F),Z=Lf(F,F),Y=Lf(k,B),se=Lf(k,F),ae=N*Z-G*G,ue=(Z*Y-G*se)/ae,xe=(N*se-G*Y)/ae,et=A.z*(1-ue-xe)+p.z*ue+v.z*xe;if(isFinite(et))return et}return 1/0}{let s=1/0;for(const A of t)s=Math.min(s,A.z);return s}}const iv=jn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:sv}=iv,pg=jn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:mg}=pg,ov=Math.cos(Math.PI/180*37.5),mc=Math.pow(2,14)/.5;class Mf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new Oe,this.layoutVertexArray2=new Re,this.indexArray=new Ut,this.programConfigurations=new ls(t.layers,t.zoom),this.segments=new rr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.hasDependencies=fd("line",this.layers,s)||this.hasLineDasharray(this.layers);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),_=[];for(const{feature:B,id:F,index:k,sourceLayerIndex:N}of t){const G=this.layers[0]._featureFilter.needGeometry,Z=jA(B,G);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),Z,A))continue;const Y=v?p.evaluate(Z,{},A):void 0,se={id:F,properties:B.properties,type:B.type,sourceLayerIndex:N,index:k,geometry:G?Z.geometry:HA(B),patterns:{},dashes:{},sortKey:Y};_.push(se)}v&&_.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of _){const{geometry:F,index:k,sourceLayerIndex:N}=B;this.hasDependencies?(fd("line",this.layers,s)?dd("line",this.layers,B,{zoom:this.zoom},s):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,B,this.zoom,s),this.patternFeatures.push(B)):this.addFeature(B,F,k,A,{},{},s.subdivisionGranularity),s.featureIndex.insert(t[k].feature,F,k,N,this.index)}}update(t,s,A,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A,dashPositions:p})}addFeatures(t,s,A,p){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,A,p,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,mg)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sv),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,s,A,p,v,_,B){const F=this.layers[0].layout,k=F.get("line-join").evaluate(t,{}),N=F.get("line-cap"),G=F.get("line-miter-limit"),Z=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const Y of s)this.addLine(Y,t,k,N,G,Z,p,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,dashPositions:_,canonical:p})}addLine(t,s,A,p,v,_,B,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=qA(t,B?F.line.getGranularityForZoomLevel(B.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ce=0;Ce<t.length-1;Ce++)this.totalDistance+=t[Ce].dist(t[Ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=gh.types[s.type]==="Polygon";let N=t.length;for(;N>=2&&t[N-1].equals(t[N-2]);)N--;let G=0;for(;G<N-1&&t[G].equals(t[G+1]);)G++;if(N<(k?3:2))return;A==="bevel"&&(v=1.05);const Z=this.overscaling<=16?122880/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let se,ae,ue,xe,et;this.e1=this.e2=-1,k&&(se=t[N-2],et=t[G].sub(se)._unit()._perp());for(let Ce=G;Ce<N;Ce++){if(ue=Ce===N-1?k?t[G+1]:void 0:t[Ce+1],ue&&t[Ce].equals(ue))continue;et&&(xe=et),se&&(ae=se),se=t[Ce],et=ue?ue.sub(se)._unit()._perp():xe,xe=xe||et;let Le=xe.add(et);Le.x===0&&Le.y===0||Le._unit();const nt=xe.x*et.x+xe.y*et.y,ct=Le.x*et.x+Le.y*et.y,Lt=ct!==0?1/ct:1/0,Zt=2*Math.sqrt(2-2*ct),jt=ct<ov&&ae&&ue,nr=xe.x*et.y-xe.y*et.x>0;if(jt&&Ce>G){const Kt=se.dist(ae);if(Kt>2*Z){const Qt=se.sub(se.sub(ae)._mult(Z/Kt)._round());this.updateDistance(ae,Qt),this.addCurrentVertex(Qt,xe,0,0,Y),ae=Qt}}const vr=ae&&ue;let sr=vr?A:k?"butt":p;if(vr&&sr==="round"&&(Lt<_?sr="miter":Lt<=2&&(sr="fakeround")),sr==="miter"&&Lt>v&&(sr="bevel"),sr==="bevel"&&(Lt>2&&(sr="flipbevel"),Lt<v&&(sr="miter")),ae&&this.updateDistance(ae,se),sr==="miter")Le._mult(Lt),this.addCurrentVertex(se,Le,0,0,Y);else if(sr==="flipbevel"){if(Lt>100)Le=et.mult(-1);else{const Kt=Lt*xe.add(et).mag()/xe.sub(et).mag();Le._perp()._mult(Kt*(nr?-1:1))}this.addCurrentVertex(se,Le,0,0,Y),this.addCurrentVertex(se,Le.mult(-1),0,0,Y)}else if(sr==="bevel"||sr==="fakeround"){const Kt=-Math.sqrt(Lt*Lt-1),Qt=nr?Kt:0,Pr=nr?0:Kt;if(ae&&this.addCurrentVertex(se,xe,Qt,Pr,Y),sr==="fakeround"){const Fr=Math.round(180*Zt/Math.PI/20);for(let Mr=1;Mr<Fr;Mr++){let Cr=Mr/Fr;if(Cr!==.5){const ti=Cr-.5;Cr+=Cr*ti*(Cr-1)*((1.0904+nt*(nt*(3.55645-1.43519*nt)-3.2452))*ti*ti+(.848013+nt*(.215638*nt-1.06021)))}const Yr=et.sub(xe)._mult(Cr)._add(xe)._unit()._mult(nr?-1:1);this.addHalfVertex(se,Yr.x,Yr.y,!1,nr,0,Y)}}ue&&this.addCurrentVertex(se,et,-Qt,-Pr,Y)}else if(sr==="butt")this.addCurrentVertex(se,Le,0,0,Y);else if(sr==="square"){const Kt=ae?1:-1;this.addCurrentVertex(se,Le,Kt,Kt,Y)}else sr==="round"&&(ae&&(this.addCurrentVertex(se,xe,0,0,Y),this.addCurrentVertex(se,xe,1,1,Y,!0)),ue&&(this.addCurrentVertex(se,et,-1,-1,Y,!0),this.addCurrentVertex(se,et,0,0,Y)));if(jt&&Ce<N-1){const Kt=se.dist(ue);if(Kt>2*Z){const Qt=se.add(ue.sub(se)._mult(Z/Kt)._round());this.updateDistance(se,Qt),this.addCurrentVertex(Qt,et,0,0,Y),se=Qt}}}}addCurrentVertex(t,s,A,p,v,_=!1){const B=s.y*p-s.x,F=-s.y-s.x*p;this.addHalfVertex(t,s.x+s.y*A,s.y-s.x*A,_,!1,A,v),this.addHalfVertex(t,B,F,_,!0,-p,v),this.distance>mc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,s,A,p,v,_))}addHalfVertex({x:t,y:s},A,p,v,_,B,F){const k=.5*(this.lineClips?this.scaledDistance*(mc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*A)+128,Math.round(63*p)+128,1+(B===0?0:B<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),F.primitiveLength++),_?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,s){this.distance+=t.dist(s),this.updateScaledDistance()}hasLineDasharray(t){for(const s of t){const A=s.paint.get("line-dasharray");if(A&&!A.isConstant())return!0}return!1}addLineDashDependencies(t,s,A,p){for(const v of t){const _=v.paint.get("line-dasharray");if(!_||_.value.kind==="constant")continue;const B=v.layout.get("line-cap")==="round",F={dasharray:_.value.evaluate({zoom:A-1},s,{}),round:B},k={dasharray:_.value.evaluate({zoom:A},s,{}),round:B},N={dasharray:_.value.evaluate({zoom:A+1},s,{}),round:B},G=`${F.dasharray.join(",")},${F.round}`,Z=`${k.dasharray.join(",")},${k.round}`,Y=`${N.dasharray.join(",")},${N.round}`;p.dashDependencies[G]=F,p.dashDependencies[Z]=k,p.dashDependencies[Y]=N,s.dashes[v.id]={min:G,mid:Z,max:Y}}}}let gg,fu;qe("LineBucket",Mf,{omit:["layers","patternFeatures"]});var kf={get paint(){return fu=fu||new li({"line-opacity":new wr(dt.paint_line["line-opacity"]),"line-color":new wr(dt.paint_line["line-color"]),"line-translate":new mr(dt.paint_line["line-translate"]),"line-translate-anchor":new mr(dt.paint_line["line-translate-anchor"]),"line-width":new wr(dt.paint_line["line-width"]),"line-gap-width":new wr(dt.paint_line["line-gap-width"]),"line-offset":new wr(dt.paint_line["line-offset"]),"line-blur":new wr(dt.paint_line["line-blur"]),"line-dasharray":new Ii(dt.paint_line["line-dasharray"]),"line-pattern":new Ii(dt.paint_line["line-pattern"]),"line-gradient":new Jn(dt.paint_line["line-gradient"])})},get layout(){return gg=gg||new li({"line-cap":new mr(dt.layout_line["line-cap"]),"line-join":new wr(dt.layout_line["line-join"]),"line-miter-limit":new mr(dt.layout_line["line-miter-limit"]),"line-round-limit":new mr(dt.layout_line["line-round-limit"]),"line-sort-key":new wr(dt.layout_line["line-sort-key"])})}};class xh extends wr{possiblyEvaluate(t,s){return s=new Lr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(t,s)}evaluate(t,s,A,p){return s=wt({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(t,s,A,p)}}let bh;class Hp extends Dn{constructor(t,s){super(t,kf,s),this.gradientVersion=0,bh||(bh=new xh(kf.paint.properties["line-width"].specification),bh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(A){return A._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof ua,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,s){super.recalculate(t,s),this.paint._values["line-floorwidth"]=bh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Mf(t)}queryRadius(t){const s=t,A=bd(uh("line-width",this,s),uh("line-gap-width",this,s)),p=uh("line-offset",this,s);return A/2+Math.abs(p)+hh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_}){const B=Vc(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,_),F=_/2*bd(this.paint.get("line-width").evaluate(s,A),this.paint.get("line-gap-width").evaluate(s,A)),k=this.paint.get("line-offset").evaluate(s,A);return k&&(p=(function(N,G){const Z=[];for(let Y=0;Y<N.length;Y++){const se=tv(N[Y]),ae=[];for(let ue=0;ue<se.length;ue++){const xe=se[ue],et=se[ue-1],Ce=se[ue+1],Le=ue===0?new x(0,0):xe.sub(et)._unit()._perp(),nt=ue===se.length-1?new x(0,0):Ce.sub(xe)._unit()._perp(),ct=Le._add(nt)._unit(),Lt=ct.x*nt.x+ct.y*nt.y;Lt!==0&&ct._mult(1/Lt),ae.push(ct._mult(G)._add(xe))}Z.push(ae)}return Z})(p,k*_)),(function(N,G,Z){for(let Y=0;Y<G.length;Y++){const se=G[Y];if(N.length>=3){for(let ae=0;ae<se.length;ae++)if(Ah(N,se[ae]))return!0}if(ch(N,se,Z))return!0}return!1})(B,p,F)}isTileClipped(){return!0}}function bd(o,t){return t>0?t+2*o:o}const av=jn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jp=jn([{name:"a_projected_pos",components:3,type:"Float32"}],4);jn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lv=jn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);jn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Vp=jn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),yg=jn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bd(o,t,s){return o.sections.forEach((A=>{A.text=(function(p,v,_){const B=v.layout.get("text-transform").evaluate(_,{});return B==="uppercase"?p=p.toLocaleUpperCase():B==="lowercase"&&(p=p.toLocaleLowerCase()),di.applyArabicShaping&&(p=di.applyArabicShaping(p)),p})(A.text,t,s)})),o}jn([{name:"triangle",components:3,type:"Uint16"}]),jn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),jn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),jn([{type:"Float32",name:"offsetX"}]),jn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),jn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Os=24;const Kh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Gp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},cv={40:!0};function Kp(o,t,s,A,p,v){if("fontStack"in t){const _=s[t.fontStack],B=_&&_[o];return B?B.metrics.advance*t.scale+p:0}{const _=A[t.imageName];return _?_.displaySize[0]*t.scale*Os/v+p:0}}function Cd(o,t,s,A){const p=Math.pow(o-t,2);return A?o<t?p/2:2*p:p+Math.abs(s)*s}function Sd(o,t,s){let A=0;return o===10&&(A-=1e4),s&&(A+=150),o!==40&&o!==65288||(A+=50),t!==41&&t!==65289||(A+=50),A}function Ed(o,t,s,A,p,v){let _=null,B=Cd(t,s,p,v);for(const F of A){const k=Cd(t-F.x,s,p,v)+F.badness;k<=B&&(_=F,B=k)}return{index:o,x:t,priorBreak:_,badness:B}}function Uf(o){return o?Uf(o.priorBreak).concat(o.index):[]}class Bh{constructor(t="",s=[],A=[]){this.text=t,this.sections=s,this.sectionIndex=A,this.imageSectionID=null}static fromFeature(t,s){const A=new Bh;for(let p=0;p<t.sections.length;p++){const v=t.sections[p];v.image?A.addImageSection(v):A.addTextSection(v,s)}return A}length(){return[...this.text].length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}verticalizePunctuation(){this.text=(function(t){let s="",A={premature:!0,value:void 0};const p=t[Symbol.iterator]();let v=p.next();const _=t[Symbol.iterator]();_.next();let B=_.next();for(;!v.done;)s+=!B.done&&Nn(B.value.codePointAt(0))&&!Kh[B.value]||!A.premature&&Nn(A.value.codePointAt(0))&&!Kh[A.value]||!Kh[v.value]?v.value:Kh[v.value],A={value:v.value,premature:!1},v=p.next(),B=_.next();return s})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const t=this.text.match(/^\s*/),s=t?t[0].length:0,A=this.text.match(/\S\s*$/),p=A?A[0].length-1:0;this.text=this.text.substring(s,this.text.length-p),this.sectionIndex=this.sectionIndex.slice(s,this.sectionIndex.length-p)}substring(t,s){const A=[...this.text].slice(t,s).join(""),p=this.sectionIndex.slice(t,s);return new Bh(A,this.sections,p)}toCodeUnitIndex(t){return[...this.text].slice(0,t).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,s)=>Math.max(t,this.sections[s].scale)),0)}getMaxImageSize(t){let s=0,A=0;for(let p=0;p<this.length();p++){const v=this.getSection(p);if("imageName"in v){const _=t[v.imageName];if(!_)continue;const B=_.displaySize;s=Math.max(s,B[0]),A=Math.max(A,B[1])}}return{maxImageWidth:s,maxImageHeight:A}}addTextSection(t,s){this.text+=t.text,this.sections.push({scale:t.scale||1,verticalAlign:t.verticalAlign||"bottom",fontStack:t.fontStack||s});const A=this.sections.length-1;this.sectionIndex.push(...[...t.text].map((()=>A)))}addImageSection(t){const s=t.image?t.image.name:"";if(s.length===0)return void Br("Can't add FormattedSection with an empty image.");const A=this.getNextImageSectionCharCode();A?(this.text+=String.fromCharCode(A),this.sections.push({scale:1,verticalAlign:t.verticalAlign||"bottom",imageName:s}),this.sectionIndex.push(this.sections.length-1)):Br("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(t,s,A,p,v){const _=[],B=this.determineAverageLineWidth(t,s,A,p,v),F=this.hasZeroWidthSpaces();let k=0,N=0;const G=this.text[Symbol.iterator]();let Z=G.next();const Y=this.text[Symbol.iterator]();Y.next();let se=Y.next();const ae=this.text[Symbol.iterator]();ae.next(),ae.next();let ue=ae.next();for(;!Z.done;){const xe=this.getSection(N),et=Z.value.codePointAt(0);if(er(et)||(k+=Kp(et,xe,A,p,t,v)),!se.done){const Ce=Gt(et),Le=se.value.codePointAt(0);(Gp[et]||Ce||"imageName"in xe||!ue.done&&cv[Le])&&_.push(Ed(N+1,k,B,_,Sd(et,Le,Ce&&F),!1))}N++,Z=G.next(),se=Y.next(),ue=ae.next()}return Uf(Ed(this.length(),k,B,_,0,!0))}determineAverageLineWidth(t,s,A,p,v){let _=0,B=0;for(const F of this.text){const k=this.getSection(B);_+=Kp(F.codePointAt(0),k,A,p,t,v),B++}return _/Math.max(1,Math.ceil(_/s))}}const qp=4294967296,Df=1/qp,vg=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class ju{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,s,A=this.length){for(;this.pos<A;){const p=this.readVarint(),v=p>>3,_=this.pos;this.type=7&p,t(v,s,this),this.pos===_&&this.skip(p)}return s}readMessage(t,s){return this.readFields(t,s,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*qp;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*qp;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const s=this.buf;let A,p;return p=s[this.pos++],A=127&p,p<128?A:(p=s[this.pos++],A|=(127&p)<<7,p<128?A:(p=s[this.pos++],A|=(127&p)<<14,p<128?A:(p=s[this.pos++],A|=(127&p)<<21,p<128?A:(p=s[this.pos],A|=(15&p)<<28,(function(v,_,B){const F=B.buf;let k,N;if(N=F[B.pos++],k=(112&N)>>4,N<128||(N=F[B.pos++],k|=(127&N)<<3,N<128)||(N=F[B.pos++],k|=(127&N)<<10,N<128)||(N=F[B.pos++],k|=(127&N)<<17,N<128)||(N=F[B.pos++],k|=(127&N)<<24,N<128)||(N=F[B.pos++],k|=(1&N)<<31,N<128))return qh(v,k,_);throw new Error("Expected varint not more than 10 bytes")})(A,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,s=this.pos;return this.pos=t,t-s>=12&&vg?vg.decode(this.buf.subarray(s,t)):(function(A,p,v){let _="",B=p;for(;B<v;){const F=A[B];let k,N,G,Z=null,Y=F>239?4:F>223?3:F>191?2:1;if(B+Y>v)break;Y===1?F<128&&(Z=F):Y===2?(k=A[B+1],(192&k)==128&&(Z=(31&F)<<6|63&k,Z<=127&&(Z=null))):Y===3?(k=A[B+1],N=A[B+2],(192&k)==128&&(192&N)==128&&(Z=(15&F)<<12|(63&k)<<6|63&N,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):Y===4&&(k=A[B+1],N=A[B+2],G=A[B+3],(192&k)==128&&(192&N)==128&&(192&G)==128&&(Z=(15&F)<<18|(63&k)<<12|(63&N)<<6|63&G,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,Y=1):Z>65535&&(Z-=65536,_+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),_+=String.fromCharCode(Z),B+=Y}return _})(this.buf,s,t)}readBytes(){const t=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,t);return this.pos=t,s}readPackedVarint(t=[],s){const A=this.readPackedEnd();for(;this.pos<A;)t.push(this.readVarint(s));return t}readPackedSVarint(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(t){const s=7&t;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(t,s){this.writeVarint(t<<3|s)}realloc(t){let s=this.length||16;for(;s<this.pos+t;)s*=2;if(s!==this.length){const A=new Uint8Array(s);A.set(this.buf),this.buf=A,this.dataView=new DataView(A.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Df),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Df),!0),this.pos+=8}writeVarint(t){(t=+t||0)>268435455||t<0?(function(s,A){let p,v;if(s>=0?(p=s%4294967296|0,v=s/4294967296|0):(p=~(-s%4294967296),v=~(-s/4294967296),4294967295^p?p=p+1|0:(p=0,v=v+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),(function(_,B,F){F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,F.buf[F.pos]=127&(_>>>=7)})(p,0,A),(function(_,B){const F=(7&_)<<4;B.buf[B.pos++]|=F|((_>>>=3)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_)))))})(v,A)})(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;const s=this.pos;this.pos=(function(p,v,_){for(let B,F,k=0;k<v.length;k++){if(B=v.charCodeAt(k),B>55295&&B<57344){if(!F){B>56319||k+1===v.length?(p[_++]=239,p[_++]=191,p[_++]=189):F=B;continue}if(B<56320){p[_++]=239,p[_++]=191,p[_++]=189,F=B;continue}B=F-55296<<10|B-56320|65536,F=null}else F&&(p[_++]=239,p[_++]=191,p[_++]=189,F=null);B<128?p[_++]=B:(B<2048?p[_++]=B>>6|192:(B<65536?p[_++]=B>>12|224:(p[_++]=B>>18|240,p[_++]=B>>12&63|128),p[_++]=B>>6&63|128),p[_++]=63&B|128)}return _})(this.buf,t,this.pos);const A=this.pos-s;A>=128&&Rf(s,A,this),this.pos=s-1,this.writeVarint(A),this.pos+=A}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const s=t.length;this.writeVarint(s),this.realloc(s);for(let A=0;A<s;A++)this.buf[this.pos++]=t[A]}writeRawMessage(t,s){this.pos++;const A=this.pos;t(s,this);const p=this.pos-A;p>=128&&Rf(A,p,this),this.pos=A-1,this.writeVarint(p),this.pos+=p}writeMessage(t,s,A){this.writeTag(t,2),this.writeRawMessage(s,A)}writePackedVarint(t,s){s.length&&this.writeMessage(t,u,s)}writePackedSVarint(t,s){s.length&&this.writeMessage(t,g,s)}writePackedBoolean(t,s){s.length&&this.writeMessage(t,V,s)}writePackedFloat(t,s){s.length&&this.writeMessage(t,C,s)}writePackedDouble(t,s){s.length&&this.writeMessage(t,M,s)}writePackedFixed32(t,s){s.length&&this.writeMessage(t,X,s)}writePackedSFixed32(t,s){s.length&&this.writeMessage(t,we,s)}writePackedFixed64(t,s){s.length&&this.writeMessage(t,lt,s)}writePackedSFixed64(t,s){s.length&&this.writeMessage(t,_t,s)}writeBytesField(t,s){this.writeTag(t,2),this.writeBytes(s)}writeFixed32Field(t,s){this.writeTag(t,5),this.writeFixed32(s)}writeSFixed32Field(t,s){this.writeTag(t,5),this.writeSFixed32(s)}writeFixed64Field(t,s){this.writeTag(t,1),this.writeFixed64(s)}writeSFixed64Field(t,s){this.writeTag(t,1),this.writeSFixed64(s)}writeVarintField(t,s){this.writeTag(t,0),this.writeVarint(s)}writeSVarintField(t,s){this.writeTag(t,0),this.writeSVarint(s)}writeStringField(t,s){this.writeTag(t,2),this.writeString(s)}writeFloatField(t,s){this.writeTag(t,5),this.writeFloat(s)}writeDoubleField(t,s){this.writeTag(t,1),this.writeDouble(s)}writeBooleanField(t,s){this.writeVarintField(t,+s)}}function qh(o,t,s){return s?4294967296*t+(o>>>0):4294967296*(t>>>0)+(o>>>0)}function Rf(o,t,s){const A=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));s.realloc(A);for(let p=s.pos-1;p>=o;p--)s.buf[p+A]=s.buf[p]}function u(o,t){for(let s=0;s<o.length;s++)t.writeVarint(o[s])}function g(o,t){for(let s=0;s<o.length;s++)t.writeSVarint(o[s])}function C(o,t){for(let s=0;s<o.length;s++)t.writeFloat(o[s])}function M(o,t){for(let s=0;s<o.length;s++)t.writeDouble(o[s])}function V(o,t){for(let s=0;s<o.length;s++)t.writeBoolean(o[s])}function X(o,t){for(let s=0;s<o.length;s++)t.writeFixed32(o[s])}function we(o,t){for(let s=0;s<o.length;s++)t.writeSFixed32(o[s])}function lt(o,t){for(let s=0;s<o.length;s++)t.writeFixed64(o[s])}function _t(o,t){for(let s=0;s<o.length;s++)t.writeSFixed64(o[s])}function Ht(o,t,s){o===1&&s.readMessage(ur,t)}function ur(o,t,s){if(o===3){const{id:A,bitmap:p,width:v,height:_,left:B,top:F,advance:k}=s.readMessage(gr,{});t.push({id:A,bitmap:new uu({width:v+6,height:_+6},p),metrics:{width:v,height:_,left:B,top:F,advance:k}})}}function gr(o,t,s){o===1?t.id=s.readVarint():o===2?t.bitmap=s.readBytes():o===3?t.width=s.readVarint():o===4?t.height=s.readVarint():o===5?t.left=s.readSVarint():o===6?t.top=s.readSVarint():o===7&&(t.advance=s.readVarint())}function Ar(o){let t=0,s=0;for(const _ of o)t+=_.w*_.h,s=Math.max(s,_.w);o.sort(((_,B)=>B.h-_.h));const A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),s),h:1/0}];let p=0,v=0;for(const _ of o)for(let B=A.length-1;B>=0;B--){const F=A[B];if(!(_.w>F.w||_.h>F.h)){if(_.x=F.x,_.y=F.y,v=Math.max(v,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===F.w&&_.h===F.h){const k=A.pop();k&&B<A.length&&(A[B]=k)}else _.h===F.h?(F.x+=_.w,F.w-=_.w):_.w===F.w?(F.y+=_.h,F.h-=_.h):(A.push({x:F.x+_.w,y:F.y,w:F.w-_.w,h:_.h}),F.y+=_.h,F.h-=_.h);break}}return{w:p,h:v,fill:t/(p*v)||0}}class Nr{constructor(t,{pixelRatio:s,version:A,stretchX:p,stretchY:v,content:_,textFitWidth:B,textFitHeight:F}){this.paddedRect=t,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=_,this.version=A,this.textFitWidth=B,this.textFitHeight=F}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Jr{constructor(t,s){const A={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(t,A,v),this.addImages(s,p,v);const{w:_,h:B}=Ar(v),F=new Xo({width:_||1,height:B||1});for(const k in t){const N=t[k],G=A[k].paddedRect;Xo.copy(N.data,F,{x:0,y:0},{x:G.x+1,y:G.y+1},N.data)}for(const k in s){const N=s[k],G=p[k].paddedRect,Z=G.x+1,Y=G.y+1,se=N.data.width,ae=N.data.height;Xo.copy(N.data,F,{x:0,y:0},{x:Z,y:Y},N.data),Xo.copy(N.data,F,{x:0,y:ae-1},{x:Z,y:Y-1},{width:se,height:1}),Xo.copy(N.data,F,{x:0,y:0},{x:Z,y:Y+ae},{width:se,height:1}),Xo.copy(N.data,F,{x:se-1,y:0},{x:Z-1,y:Y},{width:1,height:ae}),Xo.copy(N.data,F,{x:0,y:0},{x:Z+se,y:Y},{width:1,height:ae})}this.image=F,this.iconPositions=A,this.patternPositions=p}addImages(t,s,A){for(const p in t){const v=t[p],_={x:0,y:0,w:v.data.width+2,h:v.data.height+2};A.push(_),s[p]=new Nr(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(t,s){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const A in t.updatedImages)this.patchUpdatedImage(this.iconPositions[A],t.getImage(A),s),this.patchUpdatedImage(this.patternPositions[A],t.getImage(A),s)}patchUpdatedImage(t,s,A){if(!t||!s||t.version===s.version)return;t.version=s.version;const[p,v]=t.tl;A.update(s.data,void 0,{x:p,y:v})}}var Vr;function Is(o,t,s,A,p,v,_,B,F,k,N,G,Z,Y,se){const ae=Bh.fromFeature(o,p);let ue;G===m.aA.vertical&&ae.verticalizePunctuation();let xe=ae.determineLineBreaks(k,v,t,A,Y);const{processBidirectionalText:et,processStyledBidirectionalText:Ce}=di;if(et&&ae.sections.length===1){ue=[],xe=xe.map((Lt=>ae.toCodeUnitIndex(Lt)));const ct=et(ae.toString(),xe);for(const Lt of ct){const Zt=[...Lt].map((()=>0));ue.push(new Bh(Lt,ae.sections,Zt))}}else if(Ce){ue=[],xe=xe.map((jt=>ae.toCodeUnitIndex(jt)));let ct=0;const Lt=[];for(const jt of ae.text)Lt.push(...Array(jt.length).fill(ae.sectionIndex[ct])),ct++;const Zt=Ce(ae.text,Lt,xe);for(const jt of Zt){const nr=[];let vr="";for(const sr of jt[0])nr.push(jt[1][vr.length]),vr+=sr;ue.push(new Bh(jt[0],ae.sections,nr))}}else ue=(function(ct,Lt){const Zt=[];let jt=0;for(const nr of Lt)Zt.push(ct.substring(jt,nr)),jt=nr;return jt<ct.length()&&Zt.push(ct.substring(jt,ct.length())),Zt})(ae,xe);const Le=[],nt={positionedLines:Le,text:ae.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:G,iconsInText:!1,verticalizable:!1};return(function(ct,Lt,Zt,jt,nr,vr,sr,Kt,Qt,Pr,Fr,Mr){let Cr=0,Yr=0,ti=0,Vn=0;const fs=Kt==="right"?1:Kt==="left"?0:.5,Xa=Os/Mr;let vo=0;for(const bi of nr){bi.trim();const zs=bi.getMaxScale(),ro={positionedGlyphs:[],lineOffset:0};ct.positionedLines[vo]=ro;const es=ro.positionedGlyphs;let gc=0;if(!bi.length()){Yr+=vr,++vo;continue}const Ya=Ct(jt,bi,Xa);let yc=0;for(const ra of bi.text){const Ts=bi.getSection(yc),_o=ra.codePointAt(0),Hs=br(Qt,Fr,_o),na={glyph:_o,imageName:null,x:Cr,y:Yr+-17,vertical:Hs,scale:1,fontStack:"",sectionIndex:bi.getSectionIndex(yc),metrics:null,rect:null};let Sh;if("fontStack"in Ts){if(Sh=an(Ts,_o,Hs,Ya,Lt,Zt),!Sh)continue;na.fontStack=Ts.fontStack}else{if(ct.iconsInText=!0,Ts.scale*=Xa,Sh=vn(Ts,Hs,zs,Ya,jt),!Sh)continue;gc=Math.max(gc,Sh.imageOffset),na.imageName=Ts.imageName}const{rect:mu,metrics:tm,baselineOffset:Xh}=Sh;na.y+=Xh,na.scale=Ts.scale,na.metrics=tm,na.rect=mu,es.push(na),Hs?(ct.verticalizable=!0,Cr+=("imageName"in Ts?tm.advance:Os)*Ts.scale+Pr):Cr+=tm.advance*Ts.scale+Pr,yc++}es.length!==0&&(ti=Math.max(Cr-Pr,ti),_n(es,0,es.length-1,fs)),Cr=0,ro.lineOffset=Math.max(gc,(zs-1)*Os);const $A=vr*zs+gc;Yr+=$A,Vn=Math.max($A,Vn),++vo}const{horizontalAlign:ds,verticalAlign:cs}=Rt(sr);(function(bi,zs,ro,es,gc,Ya,yc,$A,ra){const Ts=(zs-ro)*gc;let _o=0;_o=Ya!==yc?-$A*es- -17:-es*ra*yc+.5*yc;for(const Hs of bi)for(const na of Hs.positionedGlyphs)na.x+=Ts,na.y+=_o})(ct.positionedLines,fs,ds,cs,ti,Vn,vr,Yr,nr.length),ct.top+=-cs*Yr,ct.bottom=ct.top+Yr,ct.left+=-ds*ti,ct.right=ct.left+ti})(nt,t,s,A,ue,_,B,F,G,k,Z,se),!(function(ct){for(const Lt of ct)if(Lt.positionedGlyphs.length!==0)return!1;return!0})(Le)&&nt}function Rt(o){let t=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:t,verticalAlign:s}}function Ct(o,t,s){const A=t.getMaxScale()*Os,{maxImageWidth:p,maxImageHeight:v}=t.getMaxImageSize(o),_=Math.max(A,v*s);return{verticalLineContentWidth:Math.max(A,p*s),horizontalLineContentHeight:_}}function Ot(o){switch(o){case"top":return 0;case"center":return .5;default:return 1}}function br(o,t,s){return!(o===m.aA.horizontal||!t&&!qt(s)||t&&(er(s)||(A=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(A)))));var A}function an(o,t,s,A,p,v){const _=v[o.fontStack],B=(function(k,N,G,Z){if(k&&k.rect)return k;const Y=N[G.fontStack],se=Y&&Y[Z];return se?{rect:null,metrics:se.metrics}:null})(_&&_[t],p,o,t);if(B===null)return null;let F;if(s)F=A.verticalLineContentWidth-o.scale*Os;else{const k=Ot(o.verticalAlign);F=(A.horizontalLineContentHeight-o.scale*Os)*k}return{rect:B.rect,metrics:B.metrics,baselineOffset:F}}function vn(o,t,s,A,p){const v=p[o.imageName];if(!v)return null;const _=v.paddedRect,B=v.displaySize,F={width:B[0],height:B[1],left:1,top:-3,advance:t?B[1]:B[0]};let k;if(t)k=A.verticalLineContentWidth-B[1]*o.scale;else{const N=Ot(o.verticalAlign);k=(A.horizontalLineContentHeight-B[1]*o.scale)*N}return{rect:_,metrics:F,baselineOffset:k,imageOffset:(t?B[0]:B[1])*o.scale-Os*s}}function _n(o,t,s,A){if(A===0)return;const p=o[s],v=(o[s].x+p.metrics.advance*p.scale)*A;for(let _=t;_<=s;_++)o[_].x-=v}function Pn(o,t,s){const{horizontalAlign:A,verticalAlign:p}=Rt(s),v=t[0]-o.displaySize[0]*A,_=t[1]-o.displaySize[1]*p;return{image:o,top:_,bottom:_+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Io(o){var t,s;let A=o.left,p=o.top,v=o.right-A,_=o.bottom-p;const B=(t=o.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",F=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",k=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(F==="proportional"){if(B==="stretchOnly"&&v/_<k||B==="proportional"){const N=Math.ceil(_*k);A*=N/v,v=N}}else if(B==="proportional"&&F==="stretchOnly"&&k!==0&&v/_>k){const N=Math.ceil(v/k);p*=N/_,_=N}return{x1:A,y1:p,x2:A+v,y2:p+_}}function yi(o,t,s,A,p,v){const _=o.image;let B;if(_.content){const ue=_.content,xe=_.pixelRatio||1;B=[ue[0]/xe,ue[1]/xe,_.displaySize[0]-ue[2]/xe,_.displaySize[1]-ue[3]/xe]}const F=t.left*v,k=t.right*v;let N,G,Z,Y;s==="width"||s==="both"?(Y=p[0]+F-A[3],G=p[0]+k+A[1]):(Y=p[0]+(F+k-_.displaySize[0])/2,G=Y+_.displaySize[0]);const se=t.top*v,ae=t.bottom*v;return s==="height"||s==="both"?(N=p[1]+se-A[0],Z=p[1]+ae+A[2]):(N=p[1]+(se+ae-_.displaySize[1])/2,Z=N+_.displaySize[1]),{image:_,top:N,right:G,bottom:Z,left:Y,collisionPadding:B}}qe("ImagePosition",Nr),qe("ImageAtlas",Jr),m.aA=void 0,(Vr=m.aA||(m.aA={}))[Vr.none=0]="none",Vr[Vr.horizontal=1]="horizontal",Vr[Vr.vertical=2]="vertical",Vr[Vr.horizontalOnly=3]="horizontalOnly";const $a=128,Vu=32640;function hx(o,t){const{expression:s}=t;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Lr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:A,interpolationType:p}=s;let v=0;for(;v<A.length&&A[v]<=o;)v++;v=Math.max(0,v-1);let _=v;for(;_<A.length&&A[_]<o+1;)_++;_=Math.min(A.length-1,_);const B=A[v],F=A[_];return s.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:F,interpolationType:p}:{kind:"camera",minZoom:B,maxZoom:F,minSize:s.evaluate(new Lr(B)),maxSize:s.evaluate(new Lr(F)),interpolationType:p}}}function Av(o,t,s){let A="never";const p=o.get(t);return p?A=p:o.get(s)&&(A="always"),A}const Q4=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _g(o,t,s,A,p,v,_,B,F,k,N,G,Z){const Y=B?Math.min(Vu,Math.round(B[0])):0,se=B?Math.min(Vu,Math.round(B[1])):0;o.emplaceBack(t,s,Math.round(32*A),Math.round(32*p),v,_,(Y<<1)+(F?1:0),se,16*k,16*N,256*G,256*Z)}function uv(o,t,s){o.emplaceBack(t.x,t.y,s),o.emplaceBack(t.x,t.y,s),o.emplaceBack(t.x,t.y,s),o.emplaceBack(t.x,t.y,s)}function O4(o){for(const t of o.sections)if(Er(t.text))return!0;return!1}class hv{constructor(t){this.layoutVertexArray=new We,this.indexArray=new Ut,this.programConfigurations=t,this.segments=new rr,this.dynamicLayoutVertexArray=new ot,this.opacityVertexArray=new ht,this.hasVisibleVertices=!1,this.placedSymbolArray=new d}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,s,A,p){this.isEmpty()||(A&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,av.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,jp.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Q4,!0),this.opacityVertexBuffer.itemSize=1),(A||p)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qe("SymbolBuffers",hv);class fv{constructor(t,s,A){this.layoutVertexArray=new t,this.layoutAttributes=s,this.indexArray=new A,this.segments=new rr,this.collisionVertexArray=new vt}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,lv.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}qe("CollisionBuffers",fv);class Fd{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((_=>_.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=hx(this.zoom,s["text-size"]),this.iconSizeData=hx(this.zoom,s["icon-size"]);const A=this.layers[0].layout,p=A.get("symbol-sort-key"),v=A.get("symbol-z-order");this.canOverlap=Av(A,"text-overlap","text-allow-overlap")!=="never"||Av(A,"icon-overlap","icon-allow-overlap")!=="never"||A.get("text-ignore-placement")||A.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,A.get("symbol-placement")==="point"&&(this.writingModes=A.get("text-writing-mode").map((_=>m.aA[_]))),this.stateDependentLayerIds=this.layers.filter((_=>_.isStateDependent())).map((_=>_.id)),this.sourceID=t.sourceID}createArrays(){this.text=new hv(new ls(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new hv(new ls(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new E,this.lineVertexArray=new L,this.symbolInstances=new b,this.textAnchorOffsets=new H}calculateGlyphDependencies(t,s,A,p,v){for(const _ of t)if(s[_.codePointAt(0)]=!0,(A||p)&&v){const B=Kh[_];B&&(s[B.codePointAt(0)]=!0)}}populate(t,s,A){const p=this.layers[0],v=p.layout,_=v.get("text-font"),B=v.get("text-field"),F=v.get("icon-image"),k=(B.value.kind!=="constant"||B.value.value instanceof gs&&!B.value.value.isEmpty()||B.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),N=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,G=v.get("symbol-sort-key");if(this.features=[],!k&&!N)return;const Z=s.iconDependencies,Y=s.glyphDependencies,se=s.availableImages,ae=new Lr(this.zoom);for(const{feature:ue,id:xe,index:et,sourceLayerIndex:Ce}of t){const Le=p._featureFilter.needGeometry,nt=jA(ue,Le);if(!p._featureFilter.filter(ae,nt,A))continue;let ct,Lt;if(Le||(nt.geometry=HA(ue)),k){const jt=p.getValueAndResolveTokens("text-field",nt,A,se),nr=gs.factory(jt),vr=this.hasRTLText=this.hasRTLText||O4(nr);(!vr||di.getRTLTextPluginStatus()==="unavailable"||vr&&di.isParsed())&&(ct=Bd(nr,p,nt))}if(N){const jt=p.getValueAndResolveTokens("icon-image",nt,A,se);Lt=jt instanceof co?jt:co.fromString(jt)}if(!ct&&!Lt)continue;const Zt=this.sortFeaturesByKey?G.evaluate(nt,{},A):void 0;if(this.features.push({id:xe,text:ct,icon:Lt,index:et,sourceLayerIndex:Ce,geometry:nt.geometry,properties:ue.properties,type:gh.types[ue.type],sortKey:Zt}),Lt&&(Z[Lt.name]=!0),ct){const jt=_.evaluate(nt,{},A).join(","),nr=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.aA.vertical)>=0;for(const vr of ct.sections)if(vr.image)Z[vr.image.name]=!0;else{const sr=Jt(ct.toString()),Kt=vr.fontStack||jt,Qt=Y[Kt]=Y[Kt]||{};this.calculateGlyphDependencies(vr.text,Qt,nr,this.allowVerticalPlacement,sr)}}}v.get("symbol-placement")==="line"&&(this.features=(function(ue){const xe={},et={},Ce=[];let Le=0;function nt(jt){Ce.push(ue[jt]),Le++}function ct(jt,nr,vr){const sr=et[jt];return delete et[jt],et[nr]=sr,Ce[sr].geometry[0].pop(),Ce[sr].geometry[0]=Ce[sr].geometry[0].concat(vr[0]),sr}function Lt(jt,nr,vr){const sr=xe[nr];return delete xe[nr],xe[jt]=sr,Ce[sr].geometry[0].shift(),Ce[sr].geometry[0]=vr[0].concat(Ce[sr].geometry[0]),sr}function Zt(jt,nr,vr){const sr=vr?nr[0][nr[0].length-1]:nr[0][0];return`${jt}:${sr.x}:${sr.y}`}for(let jt=0;jt<ue.length;jt++){const nr=ue[jt],vr=nr.geometry,sr=nr.text?nr.text.toString():null;if(!sr){nt(jt);continue}const Kt=Zt(sr,vr),Qt=Zt(sr,vr,!0);if(Kt in et&&Qt in xe&&et[Kt]!==xe[Qt]){const Pr=Lt(Kt,Qt,vr),Fr=ct(Kt,Qt,Ce[Pr].geometry);delete xe[Kt],delete et[Qt],et[Zt(sr,Ce[Fr].geometry,!0)]=Fr,Ce[Pr].geometry=null}else Kt in et?ct(Kt,Qt,vr):Qt in xe?Lt(Kt,Qt,vr):(nt(jt),xe[Kt]=Le-1,et[Qt]=Le-1)}return Ce.filter((jt=>jt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ue,xe)=>ue.sortKey-xe.sortKey))}update(t,s,A){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,s,this.layers,{imagePositions:A}),this.icon.programConfigurations.updatePaintArrays(t,s,this.layers,{imagePositions:A}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,s){const A=this.lineVertexArray.length;if(t.segment!==void 0){let p=t.dist(s[t.segment+1]),v=t.dist(s[t.segment]);const _={};for(let B=t.segment+1;B<s.length;B++)_[B]={x:s[B].x,y:s[B].y,tileUnitDistanceFromAnchor:p},B<s.length-1&&(p+=s[B+1].dist(s[B]));for(let B=t.segment||0;B>=0;B--)_[B]={x:s[B].x,y:s[B].y,tileUnitDistanceFromAnchor:v},B>0&&(v+=s[B-1].dist(s[B]));for(let B=0;B<s.length;B++){const F=_[B];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:A,lineLength:this.lineVertexArray.length-A}}addSymbols(t,s,A,p,v,_,B,F,k,N,G,Z){const Y=t.indexArray,se=t.layoutVertexArray,ae=t.segments.prepareSegment(4*s.length,se,Y,this.canOverlap?_.sortKey:void 0),ue=this.glyphOffsetArray.length,xe=ae.vertexLength,et=this.allowVerticalPlacement&&B===m.aA.vertical?Math.PI/2:0,Ce=_.text&&_.text.sections;for(let Le=0;Le<s.length;Le++){const{tl:nt,tr:ct,bl:Lt,br:Zt,tex:jt,pixelOffsetTL:nr,pixelOffsetBR:vr,minFontScaleX:sr,minFontScaleY:Kt,glyphOffset:Qt,isSDF:Pr,sectionIndex:Fr}=s[Le],Mr=ae.vertexLength,Cr=Qt[1];_g(se,F.x,F.y,nt.x,Cr+nt.y,jt.x,jt.y,A,Pr,nr.x,nr.y,sr,Kt),_g(se,F.x,F.y,ct.x,Cr+ct.y,jt.x+jt.w,jt.y,A,Pr,vr.x,nr.y,sr,Kt),_g(se,F.x,F.y,Lt.x,Cr+Lt.y,jt.x,jt.y+jt.h,A,Pr,nr.x,vr.y,sr,Kt),_g(se,F.x,F.y,Zt.x,Cr+Zt.y,jt.x+jt.w,jt.y+jt.h,A,Pr,vr.x,vr.y,sr,Kt),uv(t.dynamicLayoutVertexArray,F,et),Y.emplaceBack(Mr,Mr+2,Mr+1),Y.emplaceBack(Mr+1,Mr+2,Mr+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Qt[0]),Le!==s.length-1&&Fr===s[Le+1].sectionIndex||t.programConfigurations.populatePaintArrays(se.length,_,_.index,{imagePositions:{},canonical:Z,formattedSection:Ce&&Ce[Fr]})}t.placedSymbolArray.emplaceBack(F.x,F.y,ue,this.glyphOffsetArray.length-ue,xe,k,N,F.segment,A?A[0]:0,A?A[1]:0,p[0],p[1],B,0,!1,0,G)}_addCollisionDebugVertex(t,s,A,p,v,_){return s.emplaceBack(0,0),t.emplaceBack(A.x,A.y,p,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(t,s,A,p,v,_,B){const F=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),k=F.vertexLength,N=v.layoutVertexArray,G=v.collisionVertexArray,Z=B.anchorX,Y=B.anchorY;this._addCollisionDebugVertex(N,G,_,Z,Y,new x(t,s)),this._addCollisionDebugVertex(N,G,_,Z,Y,new x(A,s)),this._addCollisionDebugVertex(N,G,_,Z,Y,new x(A,p)),this._addCollisionDebugVertex(N,G,_,Z,Y,new x(t,p)),F.vertexLength+=4;const se=v.indexArray;se.emplaceBack(k,k+1),se.emplaceBack(k+1,k+2),se.emplaceBack(k+2,k+3),se.emplaceBack(k+3,k),F.primitiveLength+=4}addDebugCollisionBoxes(t,s,A,p){for(let v=t;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,A)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fv(rt,Vp.members,Tt),this.iconCollisionBox=new fv(rt,Vp.members,Tt);for(let t=0;t<this.symbolInstances.length;t++){const s=this.symbolInstances.get(t);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(t,s,A,p,v,_,B,F,k){const N={};for(let G=s;G<A;G++){const Z=t.get(G);N.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.textFeatureIndex=Z.featureIndex;break}for(let G=p;G<v;G++){const Z=t.get(G);N.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.verticalTextFeatureIndex=Z.featureIndex;break}for(let G=_;G<B;G++){const Z=t.get(G);N.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.iconFeatureIndex=Z.featureIndex;break}for(let G=F;G<k;G++){const Z=t.get(G);N.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.verticalIconFeatureIndex=Z.featureIndex;break}return N}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const A=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,A.textBoxStartIndex,A.textBoxEndIndex,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A.iconBoxStartIndex,A.iconBoxEndIndex,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,s){const A=t.placedSymbolArray.get(s),p=A.vertexStartIndex+4*A.numGlyphs;for(let v=A.vertexStartIndex;v<p;v+=4)t.indexArray.emplaceBack(v,v+2,v+1),t.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(t),A=Math.cos(t),p=[],v=[],_=[];for(let B=0;B<this.symbolInstances.length;++B){_.push(B);const F=this.symbolInstances.get(B);p.push(0|Math.round(s*F.anchorX+A*F.anchorY)),v.push(F.featureIndex)}return _.sort(((B,F)=>p[B]-p[F]||v[F]-v[B])),_}addToSortKeyRanges(t,s){const A=this.sortKeyRanges[this.sortKeyRanges.length-1];A&&A.sortKey===s?A.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const A=this.symbolInstances.get(s);this.featureSortOrder.push(A.featureIndex),[A.rightJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.leftJustifiedTextSymbolIndex].forEach(((p,v,_)=>{p>=0&&_.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)})),A.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,A.verticalPlacedTextSymbolIndex),A.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,A.placedIconSymbolIndex),A.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,A.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let fx,dx;qe("SymbolBucket",Fd,{omit:["layers","collisionBoxArray","features","compareText"]}),Fd.MAX_GLYPHS=65535,Fd.addDynamicAttributes=uv;var dv={get paint(){return dx=dx||new li({"icon-opacity":new wr(dt.paint_symbol["icon-opacity"]),"icon-color":new wr(dt.paint_symbol["icon-color"]),"icon-halo-color":new wr(dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new wr(dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wr(dt.paint_symbol["icon-halo-blur"]),"icon-translate":new mr(dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new mr(dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new wr(dt.paint_symbol["text-opacity"]),"text-color":new wr(dt.paint_symbol["text-color"],{runtimeType:Di,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new wr(dt.paint_symbol["text-halo-color"]),"text-halo-width":new wr(dt.paint_symbol["text-halo-width"]),"text-halo-blur":new wr(dt.paint_symbol["text-halo-blur"]),"text-translate":new mr(dt.paint_symbol["text-translate"]),"text-translate-anchor":new mr(dt.paint_symbol["text-translate-anchor"])})},get layout(){return fx=fx||new li({"symbol-placement":new mr(dt.layout_symbol["symbol-placement"]),"symbol-spacing":new mr(dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mr(dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wr(dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mr(dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mr(dt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new mr(dt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new mr(dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new mr(dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mr(dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new wr(dt.layout_symbol["icon-size"]),"icon-text-fit":new mr(dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mr(dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new wr(dt.layout_symbol["icon-image"]),"icon-rotate":new wr(dt.layout_symbol["icon-rotate"]),"icon-padding":new wr(dt.layout_symbol["icon-padding"]),"icon-keep-upright":new mr(dt.layout_symbol["icon-keep-upright"]),"icon-offset":new wr(dt.layout_symbol["icon-offset"]),"icon-anchor":new wr(dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mr(dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mr(dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mr(dt.layout_symbol["text-rotation-alignment"]),"text-field":new wr(dt.layout_symbol["text-field"]),"text-font":new wr(dt.layout_symbol["text-font"]),"text-size":new wr(dt.layout_symbol["text-size"]),"text-max-width":new wr(dt.layout_symbol["text-max-width"]),"text-line-height":new mr(dt.layout_symbol["text-line-height"]),"text-letter-spacing":new wr(dt.layout_symbol["text-letter-spacing"]),"text-justify":new wr(dt.layout_symbol["text-justify"]),"text-radial-offset":new wr(dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mr(dt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new wr(dt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new wr(dt.layout_symbol["text-anchor"]),"text-max-angle":new mr(dt.layout_symbol["text-max-angle"]),"text-writing-mode":new mr(dt.layout_symbol["text-writing-mode"]),"text-rotate":new wr(dt.layout_symbol["text-rotate"]),"text-padding":new mr(dt.layout_symbol["text-padding"]),"text-keep-upright":new mr(dt.layout_symbol["text-keep-upright"]),"text-transform":new wr(dt.layout_symbol["text-transform"]),"text-offset":new wr(dt.layout_symbol["text-offset"]),"text-allow-overlap":new mr(dt.layout_symbol["text-allow-overlap"]),"text-overlap":new mr(dt.layout_symbol["text-overlap"]),"text-ignore-placement":new mr(dt.layout_symbol["text-ignore-placement"]),"text-optional":new mr(dt.layout_symbol["text-optional"])})}};class px{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:rs,this.defaultValue=t}evaluate(t){if(t.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(t.formattedSection))return s.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qe("FormatSectionOverride",px,{omit:["defaultValue"]});class wg extends Dn{constructor(t,s){super(t,dv,s)}recalculate(t,s){if(super.recalculate(t,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const A=this.layout.get("text-writing-mode");if(A){const p=[];for(const v of A)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,s,A,p){const v=this.layout.get(t).evaluate(s,{},A,p),_=this._unevaluatedLayout._values[t];return _.isDataDriven()||Ul(_.value)||!v?v:(function(B,F){return F.replace(/{([^{}]+)}/g,((k,N)=>B&&N in B?String(B[N]):""))})(s.properties,v)}createBucket(t){return new Fd(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of dv.paint.overridableProperties){if(!wg.hasPaintOverride(this.layout,t))continue;const s=this.paint.get(t),A=new px(s),p=new ac(A,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Dc("source",p):new kA("composite",p,s.value.zoomStops),this.paint._values[t]=new En(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(t,s,A){return!(!this.layout||s.isDataDriven()||A.isDataDriven())&&wg.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,s){const A=t.get("text-field"),p=dv.paint.properties[s];let v=!1;const _=B=>{for(const F of B)if(p.overrides&&p.overrides.hasOverride(F))return void(v=!0)};if(A.value.kind==="constant"&&A.value.value instanceof gs)_(A.value.value.sections);else if(A.value.kind==="source"||A.value.kind==="composite"){const B=k=>{v||(k instanceof Wi&&ei(k.value)===il?_(k.value.sections):k instanceof fa?_(k.sections):k.eachChild(B))},F=A.value;F._styleExpression&&B(F._styleExpression.expression)}return v}}let mx;var z4={get paint(){return mx=mx||new li({"background-color":new mr(dt.paint_background["background-color"]),"background-pattern":new ji(dt.paint_background["background-pattern"]),"background-opacity":new mr(dt.paint_background["background-opacity"])})}};class H4 extends Dn{constructor(t,s){super(t,z4,s)}}class j4 extends Dn{constructor(t,s){super(t,{},s),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class V4{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const G4={once:!0},pv=63710088e-1;class $h{constructor(t,s){if(isNaN(t)||isNaN(s))throw new Error(`Invalid LngLat object: (${t}, ${s})`);if(this.lng=+t,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new $h(tt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const s=Math.PI/180,A=this.lat*s,p=t.lat*s,v=Math.sin(A)*Math.sin(p)+Math.cos(A)*Math.cos(p)*Math.cos((t.lng-this.lng)*s);return pv*Math.acos(Math.min(v,1))}static convert(t){if(t instanceof $h)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new $h(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new $h(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const gx=2*Math.PI*pv;function yx(o){return gx*Math.cos(o*Math.PI/180)}function vx(o){return(180+o)/360}function _x(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function wx(o,t){return o/yx(t)}function xx(o){return 360*o-180}function xg(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function bx(o,t){return o*yx(xg(t))}class $p{constructor(t,s,A=0){this.x=+t,this.y=+s,this.z=+A}static fromLngLat(t,s=0){const A=$h.convert(t);return new $p(vx(A.lng),_x(A.lat),wx(s,A.lat))}toLngLat(){return new $h(xx(this.x),xg(this.y))}toAltitude(){return bx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/gx*(t=xg(this.y),1/Math.cos(t*Math.PI/180));var t}}function Bx(o,t,s){var A=2*Math.PI*6378137/256/Math.pow(2,s);return[o*A-2*Math.PI*6378137/2,t*A-2*Math.PI*6378137/2]}class mv{constructor(t,s,A){if(!(function(p,v,_){return!(p<0||p>25||_<0||_>=Math.pow(2,p)||v<0||v>=Math.pow(2,p))})(t,s,A))throw new Error(`x=${s}, y=${A}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=s,this.y=A,this.key=Id(0,t,t,s,A)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,s,A){const p=(function(_,B,F){var k=Bx(256*_,256*(B=Math.pow(2,F)-B-1),F),N=Bx(256*(_+1),256*(B+1),F);return k[0]+","+k[1]+","+N[0]+","+N[1]})(this.x,this.y,this.z),v=(function(_,B,F){let k,N="";for(let G=_;G>0;G--)k=1<<G-1,N+=(B&k?1:0)+(F&k?2:0);return N})(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(A==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,v).replace(/{bbox-epsg-3857}/g,p)}isChildOf(t){const s=this.z-t.z;return s>0&&t.x===this.x>>s&&t.y===this.y>>s}getTilePoint(t){const s=Math.pow(2,this.z);return new x((t.x*s-this.x)*Ie,(t.y*s-this.y)*Ie)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Cx{constructor(t,s){this.wrap=t,this.canonical=s,this.key=Id(t,s.z,s.z,s.x,s.y)}}class gA{constructor(t,s,A,p,v){if(this.terrainRttPosMatrix32f=null,t<A)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${A}`);this.overscaledZ=t,this.wrap=s,this.canonical=new mv(A,+p,+v),this.key=Id(s,t,A,p,v)}clone(){return new gA(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?new gA(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gA(t,this.wrap,t,this.canonical.x>>s,this.canonical.y>>s)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(t,s){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-t;return t>this.canonical.z?Id(this.wrap*+s,t,this.canonical.z,this.canonical.x,this.canonical.y):Id(this.wrap*+s,t,t,this.canonical.x>>A,this.canonical.y>>A)}isChildOf(t){if(t.wrap!==this.wrap||this.overscaledZ-t.overscaledZ<=0)return!1;if(t.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-t.canonical.z;return!(s<0)&&t.canonical.x===this.canonical.x>>s&&t.canonical.y===this.canonical.y>>s}children(t){if(this.overscaledZ>=t)return[new gA(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,A=2*this.canonical.x,p=2*this.canonical.y;return[new gA(s,this.wrap,s,A,p),new gA(s,this.wrap,s,A+1,p),new gA(s,this.wrap,s,A,p+1),new gA(s,this.wrap,s,A+1,p+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new gA(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new gA(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Cx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new $p(t.x-this.wrap,t.y))}}function Id(o,t,s,A,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+A).toString(36)+s.toString(36)+t.toString(36)}function Wp(o,t){return t?o.properties[t]:o.id}function K4(o,t){const s={id:o.id};if(t.removeAllProperties&&(delete o.removeProperties,delete o.addOrUpdateProperties,delete t.removeProperties),t.removeProperties)for(const A of t.removeProperties){const p=o.addOrUpdateProperties.findIndex((v=>v.key===A));p>-1&&o.addOrUpdateProperties.splice(p,1)}return(o.removeAllProperties||t.removeAllProperties)&&(s.removeAllProperties=!0),(o.removeProperties||t.removeProperties)&&(s.removeProperties=[...o.removeProperties||[],...t.removeProperties||[]]),(o.addOrUpdateProperties||t.addOrUpdateProperties)&&(s.addOrUpdateProperties=[...o.addOrUpdateProperties||[],...t.addOrUpdateProperties||[]]),(o.newGeometry||t.newGeometry)&&(s.newGeometry=t.newGeometry||o.newGeometry),s}function Sx(o){var t,s;if(!o)return{};const A={};return A.removeAll=o.removeAll,A.remove=new Set(o.remove||[]),A.add=new Map((t=o.add)===null||t===void 0?void 0:t.map((p=>[p.id,p]))),A.update=new Map((s=o.update)===null||s===void 0?void 0:s.map((p=>[p.id,p]))),A}qe("CanonicalTileID",mv),qe("OverscaledTileID",gA,{omit:["terrainRttPosMatrix32f"]});class Ex{constructor(t){this._stringToNumber={},this._numberToString=[];for(let s=0;s<t.length;s++){const A=t[s];this._stringToNumber[A]=s,this._numberToString[s]=A}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Fx{constructor(t,s,A,p,v){this.type="Feature",this._vectorTileFeature=t,this._x=A,this._y=p,this._z=s,this.properties=t.properties,this.id=v}projectPoint(t,s,A,p){return[360*(t.x+s)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(t.y+A)/p)*Math.PI))-90]}projectLine(t,s,A,p){return t.map((v=>this.projectPoint(v,s,A,p)))}get geometry(){if(this._geometry)return this._geometry;const t=this._vectorTileFeature,s=t.extent*Math.pow(2,this._z),A=t.extent*this._x,p=t.extent*this._y,v=t.loadGeometry();switch(t.type){case 1:{const _=[];for(const F of v)_.push(F[0]);const B=this.projectLine(_,A,p,s);this._geometry=_.length===1?{type:"Point",coordinates:B[0]}:{type:"MultiPoint",coordinates:B};break}case 2:{const _=v.map((B=>this.projectLine(B,A,p,s)));this._geometry=_.length===1?{type:"LineString",coordinates:_[0]}:{type:"MultiLineString",coordinates:_};break}case 3:{const _=vd(v),B=[];for(const F of _)B.push(F.map((k=>this.projectLine(k,A,p,s))));this._geometry=B.length===1?{type:"Polygon",coordinates:B[0]}:{type:"MultiPolygon",coordinates:B};break}default:throw new Error(`unknown feature type: ${t.type}`)}return this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&s!=="_x"&&s!=="_y"&&s!=="_z"&&(t[s]=this[s]);return t}}class Td{_name;dataBuffer;nullabilityBuffer;_size;constructor(t,s,A){this._name=t,this.dataBuffer=s,typeof A=="number"?this._size=A:(this.nullabilityBuffer=A,this._size=A.size())}getValue(t){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(t)?null:this.getValueFromBuffer(t)}has(t){return this.nullabilityBuffer&&this.nullabilityBuffer.get(t)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class bg extends Td{}class gv extends bg{getValueFromBuffer(t){return this.dataBuffer[t]}}class yv extends bg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Ix extends Td{delta;constructor(t,s,A,p){super(t,s,p),this.delta=A}}class vv extends Ix{constructor(t,s,A,p){super(t,Int32Array.of(s),A,p)}getValueFromBuffer(t){return this.dataBuffer[0]+t*this.delta}}class _v extends Td{constructor(t,s,A){super(t,Int32Array.of(s),A)}getValueFromBuffer(t){return this.dataBuffer[0]}}class q4{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(t,s,A,p,v=4096){this._name=t,this._geometryVector=s,this._idVector=A,this._propertyVectors=p,this._extent=v}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(t){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((s=>[s.name,s])))),this.propertyVectorsMap.get(t)}*[Symbol.iterator](){const t=this.geometryVector[Symbol.iterator]();let s=0;for(;s<this.numFeatures;){let A;this.idVector&&(A=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(s)):this.idVector.getValue(s));const p=t?.next().value,v={};for(const _ of this.propertyVectors){if(!_)continue;const B=_.name,F=_.getValue(s);F!==null&&(v[B]=F)}s++,yield{id:A,geometry:p,properties:v}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const t=[],s=this.geometryVector.getGeometries();for(let A=0;A<this.numFeatures;A++){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(A)):this.idVector.getValue(A));const v={coordinates:s[A],type:this.geometryVector.geometryType(A)},_={};for(const B of this.propertyVectors){if(!B)continue;const F=B.name,k=B.getValue(A);k!==null&&(_[F]=k)}t.push({id:p,geometry:v,properties:_})}return t}containsMaxSaveIntegerValues(t){return t instanceof gv||t instanceof _v&&t instanceof vv||t instanceof yv}}class $4{value;constructor(t){this.value=t}get(){return this.value}set(t){this.value=t}increment(){return this.value++}add(t){this.value+=t}}var Kn,Ch,Wa,du,Nf,qc,ea,ta,Tx,yA;function _a(o,t,s){const A=new Int32Array(s);let p=0,v=t.get();for(let _=0;_<A.length;_++){let B=o[v++],F=127&B;B<128||(B=o[v++],F|=(127&B)<<7,B<128||(B=o[v++],F|=(127&B)<<14,B<128||(B=o[v++],F|=(127&B)<<21,B<128||(B=o[v++],F|=(15&B)<<28)))),A[p++]=F}return t.set(v),A}function Bg(o,t,s){const A=new BigInt64Array(s);for(let p=0;p<A.length;p++)A[p]=Z4(o,t);return A}function W4(o,t){let s,A;return A=o[t.get()],t.increment(),s=127&A,A<128?s:(A=o[t.get()],t.increment(),s|=(127&A)<<7,A<128?s:(A=o[t.get()],t.increment(),s|=(127&A)<<14,A<128?s:(A=o[t.get()],t.increment(),s|=(127&A)<<21,A<128?s:(A=o[t.get()],s|=(15&A)<<28,(function(p,v,_){let B,F;if(F=v[_.get()],_.increment(),B=(112&F)>>4,F<128||(F=v[_.get()],_.increment(),B|=(127&F)<<3,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<10,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<17,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<24,F<128)||(F=v[_.get()],_.increment(),B|=(1&F)<<31,F<128))return 4294967296*B+(p>>>0);throw new Error("Expected varint not more than 10 bytes")})(s,o,t)))))}function Px(o,t,s,A){throw new Error("FastPFor is not implemented yet.")}function Qf(o){return o>>>1^-(1&o)}function Pd(o){return o>>1n^-(1n&o)}function Z4(o,t){let s=0n,A=0,p=t.get();for(;p<o.length;){const v=o[p++];if(s|=BigInt(127&v)<<BigInt(A),!(128&v))break;if(A+=7,A>=64)throw new Error("Varint too long")}return t.set(p),s}function Lx(o,t,s){const A=new Int32Array(s);let p=0;for(let v=0;v<t;v++){const _=o[v];A.fill(o[v+t],p,p+_),p+=_}return A}function Mx(o,t,s){const A=new BigInt64Array(s);let p=0;for(let v=0;v<t;v++){const _=Number(o[v]);A.fill(o[v+t],p,p+_),p+=_}return A}function kx(o,t,s){const A=new Float64Array(s);let p=0;for(let v=0;v<t;v++){const _=o[v];A.fill(o[v+t],p,p+_),p+=_}return A}function wv(o){const t=o.length/4*4;let s=1;if(t>=4)for(let A=o[0];s<t-4;s+=4)A=o[s]+=A,A=o[s+1]+=A,A=o[s+2]+=A,A=o[s+3]+=A;for(;s!=o.length;)o[s]+=o[s-1],++s}function Ux(o){o[0]=o[0]>>>1^-(1&o[0]),o[1]=o[1]>>>1^-(1&o[1]);const t=o.length/4*4;let s=2;if(t>=4)for(;s<t-4;s+=4){const A=o[s],p=o[s+1],v=o[s+2],_=o[s+3];o[s]=(A>>>1^-(1&A))+o[s-2],o[s+1]=(p>>>1^-(1&p))+o[s-1],o[s+2]=(v>>>1^-(1&v))+o[s],o[s+3]=(_>>>1^-(1&_))+o[s+1]}for(;s!=o.length;s+=2)o[s]=(o[s]>>>1^-(1&o[s]))+o[s-2],o[s+1]=(o[s+1]>>>1^-(1&o[s+1]))+o[s-1]}(function(o){o.NONE="NONE",o.DELTA="DELTA",o.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",o.RLE="RLE",o.MORTON="MORTON",o.PDE="PDE"})(Kn||(Kn={})),(function(o){o.NONE="NONE",o.FAST_PFOR="FAST_PFOR",o.VARINT="VARINT",o.ALP="ALP"})(Ch||(Ch={})),(function(o){o.PRESENT="PRESENT",o.DATA="DATA",o.OFFSET="OFFSET",o.LENGTH="LENGTH"})(Wa||(Wa={}));class xv{_dictionaryType;_offsetType;_lengthType;constructor(t,s,A){this._dictionaryType=t,this._offsetType=s,this._lengthType=A}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Hl(o,t){const s=(function(A,p){const v=A[p.get()],_=Object.values(Wa)[v>>4];let B=null;switch(_){case Wa.DATA:B=new xv(Object.values(du)[15&v]);break;case Wa.OFFSET:B=new xv(null,Object.values(Nf)[15&v]);break;case Wa.LENGTH:B=new xv(null,null,Object.values(qc)[15&v])}p.increment();const F=A[p.get()],k=Object.values(Kn)[F>>5],N=Object.values(Kn)[F>>2&7],G=Object.values(Ch)[3&F];p.increment();const Z=_a(A,p,2),Y=Z[0];return{physicalStreamType:_,logicalStreamType:B,logicalLevelTechnique1:k,logicalLevelTechnique2:N,physicalLevelTechnique:G,numValues:Y,byteLength:Z[1],decompressedCount:Y}})(o,t);return s.logicalLevelTechnique1===Kn.MORTON?(function(A,p,v){const _=_a(p,v,2);return{physicalStreamType:A.physicalStreamType,logicalStreamType:A.logicalStreamType,logicalLevelTechnique1:A.logicalLevelTechnique1,logicalLevelTechnique2:A.logicalLevelTechnique2,physicalLevelTechnique:A.physicalLevelTechnique,numValues:A.numValues,byteLength:A.byteLength,decompressedCount:A.decompressedCount,numBits:_[0],coordinateShift:_[1]}})(s,o,t):Kn.RLE!==s.logicalLevelTechnique1&&Kn.RLE!==s.logicalLevelTechnique2||Ch.NONE===s.physicalLevelTechnique?s:(function(A,p,v){const _=_a(p,v,2);return{physicalStreamType:A.physicalStreamType,logicalStreamType:A.logicalStreamType,logicalLevelTechnique1:A.logicalLevelTechnique1,logicalLevelTechnique2:A.logicalLevelTechnique2,physicalLevelTechnique:A.physicalLevelTechnique,numValues:A.numValues,byteLength:A.byteLength,decompressedCount:_[1],runs:_[0],numRleValues:_[1]}})(s,o,t)}(function(o){o.NONE="NONE",o.SINGLE="SINGLE",o.SHARED="SHARED",o.VERTEX="VERTEX",o.MORTON="MORTON",o.FSST="FSST"})(du||(du={})),(function(o){o.VERTEX="VERTEX",o.INDEX="INDEX",o.STRING="STRING",o.KEY="KEY"})(Nf||(Nf={})),(function(o){o.VAR_BINARY="VAR_BINARY",o.GEOMETRIES="GEOMETRIES",o.PARTS="PARTS",o.RINGS="RINGS",o.TRIANGLES="TRIANGLES",o.SYMBOL="SYMBOL",o.DICTIONARY="DICTIONARY"})(qc||(qc={})),(function(o){o[o.FLAT=0]="FLAT",o[o.CONST=1]="CONST",o[o.SEQUENCE=2]="SEQUENCE",o[o.DICTIONARY=3]="DICTIONARY",o[o.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(ea||(ea={}));class pu{values;_size;constructor(t,s){this.values=t,this._size=s}get(t){const s=Math.floor(t/8);return(this.values[s]>>t%8&1)==1}set(t,s){const A=Math.floor(t/8);this.values[A]=this.values[A]|(s?1:0)<<t%8}getInt(t){const s=Math.floor(t/8);return this.values[s]>>t%8&1}size(){return this._size}getBuffer(){return this.values}}function jl(o,t,s,A,p){return(function(v,_,B){switch(_.logicalLevelTechnique1){case Kn.DELTA:return _.logicalLevelTechnique2===Kn.RLE?(function(F,k,N){const G=new Int32Array(N);let Z=0,Y=0;for(let se=0;se<k;se++){const ae=F[se],ue=Qf(F[se+k]);for(let xe=0;xe<ae;xe++)Y+=ue,G[Z++]=Y}return G})(v,_.runs,_.numRleValues):((function(F){F[0]=F[0]>>>1^-(1&F[0]);const k=F.length/4*4;let N=1;if(k>=4)for(;N<k-4;N+=4){const G=F[N],Z=F[N+1],Y=F[N+2],se=F[N+3];F[N]=(G>>>1^-(1&G))+F[N-1],F[N+1]=(Z>>>1^-(1&Z))+F[N],F[N+2]=(Y>>>1^-(1&Y))+F[N+1],F[N+3]=(se>>>1^-(1&se))+F[N+2]}for(;N!=F.length;++N)F[N]=(F[N]>>>1^-(1&F[N]))+F[N-1]})(v),v);case Kn.RLE:return(function(F,k,N){return N?(function(G,Z,Y){const se=new Int32Array(Y);let ae=0;for(let ue=0;ue<Z;ue++){const xe=G[ue];let et=G[ue+Z];et=et>>>1^-(1&et),se.fill(et,ae,ae+xe),ae+=xe}return se})(F,k.runs,k.numRleValues):Lx(F,k.runs,k.numRleValues)})(v,_,B);case Kn.MORTON:return wv(v),v;case Kn.COMPONENTWISE_DELTA:return Ux(v),v;case Kn.NONE:return B&&(function(F){for(let k=0;k<F.length;k++){const N=F[k];F[k]=N>>>1^-(1&N)}})(v),v;default:throw new Error(`The specified Logical level technique is not supported: ${_.logicalLevelTechnique1}`)}})(Cg(o,t,s),s,A)}function Wh(o,t,s){return(function(A,p){if(p.logicalLevelTechnique1===Kn.DELTA&&p.logicalLevelTechnique2===Kn.NONE)return(function(_){const B=new Int32Array(_.length+1);B[0]=0,B[1]=Qf(_[0]);let F=B[1],k=2;for(;k!=B.length;++k){const N=_[k-1];F+=N>>>1^-(1&N),B[k]=B[k-1]+F}return B})(A);if(p.logicalLevelTechnique1===Kn.RLE&&p.logicalLevelTechnique2===Kn.NONE)return(function(_,B,F){const k=new Int32Array(F+1);k[0]=0;let N=1,G=k[0];for(let Z=0;Z<B;Z++){const Y=_[Z],se=_[Z+B];for(let ae=N;ae<N+Y;ae++)k[ae]=se+G,G=k[ae];N+=Y}return k})(A,p.runs,p.numRleValues);if(p.logicalLevelTechnique1===Kn.NONE&&p.logicalLevelTechnique2===Kn.NONE){(function(_){let B=0;for(let F=0;F<_.length;F++)_[F]+=B,B=_[F]})(A);const v=new Int32Array(p.numValues+1);return v[0]=0,v.set(A,1),v}if(p.logicalLevelTechnique1===Kn.DELTA&&p.logicalLevelTechnique2===Kn.RLE){const v=(function(_,B,F){const k=new Int32Array(F+1);k[0]=0;let N=1,G=k[0];for(let Z=0;Z<B;Z++){const Y=_[Z];let se=_[Z+B];se=se>>>1^-(1&se);for(let ae=N;ae<N+Y;ae++)k[ae]=se+G,G=k[ae];N+=Y}return k})(A,p.runs,p.numRleValues);return wv(v),v}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Cg(o,t,s),s)}function Cg(o,t,s){const A=s.physicalLevelTechnique;if(A===Ch.FAST_PFOR)return Px();if(A===Ch.VARINT)return _a(o,t,s.numValues);if(A===Ch.NONE){const p=t.get();t.add(s.byteLength);const v=o.subarray(p,t.get());return new Int32Array(v)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function bv(o,t,s,A){const p=Cg(o,t,s);if(p.length===1){const v=p[0];return A?Qf(v):v}return A?(function(v){return Qf(v[1])})(p):(function(v){return v[1]})(p)}function Dx(o,t,s){return(function(A){if(A.length==2){const p=Qf(A[1]);return[p,p]}return[Qf(A[2]),Qf(A[3])]})(Cg(o,t,s))}function Rx(o,t,s){return(function(A){if(A.length==2){const p=Pd(A[1]);return[p,p]}return[Pd(A[2]),Pd(A[3])]})(Bg(o,t,s.numValues))}function Nx(o,t,s,A){return(function(p,v,_){switch(v.logicalLevelTechnique1){case Kn.DELTA:return v.logicalLevelTechnique2===Kn.RLE?(function(B,F,k){const N=new BigInt64Array(k);let G=0,Z=0n;for(let Y=0;Y<F;Y++){const se=Number(B[Y]),ae=Pd(B[Y+F]);for(let ue=0;ue<se;ue++)Z+=ae,N[G++]=Z}return N})(p,v.runs,v.numRleValues):((function(B){B[0]=B[0]>>1n^-(1n&B[0]);const F=B.length/4*4;let k=1;if(F>=4)for(;k<F-4;k+=4){const N=B[k],G=B[k+1],Z=B[k+2],Y=B[k+3];B[k]=(N>>1n^-(1n&N))+B[k-1],B[k+1]=(G>>1n^-(1n&G))+B[k],B[k+2]=(Z>>1n^-(1n&Z))+B[k+1],B[k+3]=(Y>>1n^-(1n&Y))+B[k+2]}for(;k!=B.length;++k)B[k]=(B[k]>>1n^-(1n&B[k]))+B[k-1]})(p),p);case Kn.RLE:return(function(B,F,k){return k?(function(N,G,Z){const Y=new BigInt64Array(Z);let se=0;for(let ae=0;ae<G;ae++){const ue=Number(N[ae]);let xe=N[ae+G];xe=xe>>1n^-(1n&xe),Y.fill(xe,se,se+ue),se+=ue}return Y})(B,F.runs,F.numRleValues):Mx(B,F.runs,F.numRleValues)})(p,v,_);case Kn.NONE:return _&&(function(B){for(let F=0;F<B.length;F++){const k=B[F];B[F]=k>>1n^-(1n&k)}})(p),p;default:throw new Error(`The specified Logical level technique is not supported: ${v.logicalLevelTechnique1}`)}})(Bg(o,t,s.numValues),s,A)}function Qx(o,t,s,A){const p=Bg(o,t,s.numValues);if(p.length===1){const v=p[0];return A?Pd(v):v}return A?(function(v){return Pd(v[1])})(p):(function(v){return v[1]})(p)}function Bv(o,t,s,A,p){return(function(v,_,B,F){switch(_.logicalLevelTechnique1){case Kn.DELTA:return _.logicalLevelTechnique2===Kn.RLE&&(v=Lx(v,_.runs,_.numRleValues)),(function(k,N){const G=new Int32Array(k.size());let Z=0;k.get(0)?(G[0]=k.get(0)?N[0]>>>1^-(1&N[0]):0,Z=1):G[0]=0;let Y=1;for(;Y!=G.length;++Y)G[Y]=k.get(Y)?G[Y-1]+(N[Z]>>>1^-(1&N[Z++])):G[Y-1];return G})(F,v);case Kn.RLE:return(function(k,N,G,Z){const Y=N;return G?(function(se,ae,ue){const xe=new Int32Array(se.size());let et=0;for(let Ce=0;Ce<ue;Ce++){const Le=ae[Ce];let nt=ae[Ce+ue];nt=nt>>>1^-(1&nt);for(let ct=et;ct<et+Le;ct++)se.get(ct)?xe[ct]=nt:(xe[ct]=0,et++);et+=Le}return xe})(Z,k,Y.runs):(function(se,ae,ue){const xe=new Int32Array(se.size());let et=0;for(let Ce=0;Ce<ue;Ce++){const Le=ae[Ce],nt=ae[Ce+ue];for(let ct=et;ct<et+Le;ct++)se.get(ct)?xe[ct]=nt:(xe[ct]=0,et++);et+=Le}return xe})(Z,k,Y.runs)})(v,_,B,F);case Kn.MORTON:return wv(v),v;case Kn.COMPONENTWISE_DELTA:return Ux(v),v;case Kn.NONE:return v=B?(function(k,N){const G=new Int32Array(k.size());let Z=0,Y=0;for(;Y!=G.length;++Y)if(k.get(Y)){const se=N[Z++];G[Y]=se>>>1^-(1&se)}else G[Y]=0;return G})(F,v):(function(k,N){const G=new Int32Array(k.size());let Z=0,Y=0;for(;Y!=G.length;++Y)G[Y]=k.get(Y)?N[Z++]:0;return G})(F,v),v;default:throw new Error("The specified Logical level technique is not supported")}})(s.physicalLevelTechnique===Ch.FAST_PFOR?Px():_a(o,t,s.numValues),s,A,p)}function Sg(o,t,s,A){const p=o.logicalLevelTechnique1;if(p===Kn.RLE)return o.runs===1?ea.CONST:ea.FLAT;const v=t instanceof pu?t.size():t;if(p===Kn.DELTA&&o.logicalLevelTechnique2===Kn.RLE){const _=o.runs,B=2;if(o.numRleValues!==v)return ea.FLAT;if(_===1)return ea.SEQUENCE;if(_===2){const F=A.get();let k;if(o.physicalLevelTechnique===Ch.VARINT)k=_a(s,A,4);else{const N=A.get();k=new Int32Array(s.buffer,s.byteOffset+N,4)}if(A.set(F),k[2]===B&&k[3]===B)return ea.SEQUENCE}}return o.numValues===1?ea.CONST:ea.FLAT}class Ox extends bg{getValueFromBuffer(t){return this.dataBuffer[t]}}class zx extends Ix{constructor(t,s,A,p){super(t,BigInt64Array.of(s),A,p)}getValueFromBuffer(t){return this.dataBuffer[0]+BigInt(t)*this.delta}}class Ld{_geometryOffsets;_partOffsets;_ringOffsets;constructor(t,s,A){this._geometryOffsets=t,this._partOffsets=s,this._ringOffsets=A}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Cv(o,t,s){return{x:Hx(o,t)-s,y:Hx(o>>1,t)-s}}function Hx(o,t){let s=0;for(let A=0;A<t;A++)s|=(o&1<<2*A)>>A;return s}(function(o){o[o.POINT=0]="POINT",o[o.LINESTRING=1]="LINESTRING",o[o.POLYGON=2]="POLYGON",o[o.MULTIPOINT=3]="MULTIPOINT",o[o.MULTILINESTRING=4]="MULTILINESTRING",o[o.MULTIPOLYGON=5]="MULTIPOLYGON"})(ta||(ta={})),(function(o){o[o.POINT=0]="POINT",o[o.LINESTRING=1]="LINESTRING",o[o.POLYGON=2]="POLYGON"})(Tx||(Tx={})),(function(o){o[o.MORTON=0]="MORTON",o[o.VEC_2=1]="VEC_2",o[o.VEC_3=2]="VEC_3"})(yA||(yA={}));class X4{createPoint(t){return[[t]]}createMultiPoint(t){return t.map((s=>[s]))}createLineString(t){return[t]}createMultiLineString(t){return t}createPolygon(t,s){return[t].concat(s)}createMultiPolygon(t){return t.flat()}}function jx(o){const t=new Array(o.numGeometries);let s=1,A=1,p=1,v=0;const _=new X4;let B=0,F=0;const k=o.mortonSettings,N=o.topologyVector,G=N.geometryOffsets,Z=N.partOffsets,Y=N.ringOffsets,se=o.vertexOffsets,ae=o.containsPolygonGeometry(),ue=o.vertexBuffer;for(let xe=0;xe<o.numGeometries;xe++){const et=o.geometryType(xe);if(et===ta.POINT){if(se&&se.length!==0)if(o.vertexBufferType===yA.VEC_2){const Ce=2*se[F++],Le=new x(ue[Ce],ue[Ce+1]);t[v++]=_.createPoint(Le)}else{const Ce=Cv(ue[se[F++]],k.numBits,k.coordinateShift),Le=new x(Ce.x,Ce.y);t[v++]=_.createPoint(Le)}else{const Ce=new x(ue[B++],ue[B++]);t[v++]=_.createPoint(Ce)}G&&p++,Z&&s++,Y&&A++}else if(et===ta.MULTIPOINT){const Ce=G[p]-G[p-1];p++;const Le=new Array(Ce);if(se&&se.length!==0){for(let nt=0;nt<Ce;nt++){const ct=2*se[F++];Le[nt]=new x(ue[ct],ue[ct+1])}t[v++]=_.createMultiPoint(Le)}else{for(let nt=0;nt<Ce;nt++){const ct=ue[B++],Lt=ue[B++];Le[nt]=new x(ct,Lt)}t[v++]=_.createMultiPoint(Le)}}else if(et===ta.LINESTRING){let Ce,Le=0;ae?(Le=Y[A]-Y[A-1],A++):Le=Z[s]-Z[s-1],s++,se&&se.length!==0?(Ce=o.vertexBufferType===yA.VEC_2?Ev(ue,se,F,Le,!1):Fv(ue,se,F,Le,!1,k),F+=Le):(Ce=Sv(ue,B,Le,!1),B+=2*Le),t[v++]=_.createLineString(Ce),G&&p++}else if(et===ta.POLYGON){const Ce=Z[s]-Z[s-1];s++;const Le=new Array(Ce-1);let nt=Y[A]-Y[A-1];if(A++,se&&se.length!==0){const ct=o.vertexBufferType===yA.VEC_2?Fg(ue,se,F,nt):Ig(ue,se,F,nt,0,k);F+=nt;for(let Lt=0;Lt<Le.length;Lt++)nt=Y[A]-Y[A-1],A++,Le[Lt]=o.vertexBufferType===yA.VEC_2?Fg(ue,se,F,nt):Ig(ue,se,F,nt,0,k),F+=nt;t[v++]=_.createPolygon(ct,Le)}else{const ct=Eg(ue,B,nt);B+=2*nt;for(let Lt=0;Lt<Le.length;Lt++)nt=Y[A]-Y[A-1],A++,Le[Lt]=Eg(ue,B,nt),B+=2*nt;t[v++]=_.createPolygon(ct,Le)}G&&p++}else if(et===ta.MULTILINESTRING){const Ce=G[p]-G[p-1];p++;const Le=new Array(Ce);if(se&&se.length!==0){for(let nt=0;nt<Ce;nt++){let ct=0;ae?(ct=Y[A]-Y[A-1],A++):ct=Z[s]-Z[s-1],s++;const Lt=o.vertexBufferType===yA.VEC_2?Ev(ue,se,F,ct,!1):Fv(ue,se,F,ct,!1,k);Le[nt]=Lt,F+=ct}t[v++]=_.createMultiLineString(Le)}else{for(let nt=0;nt<Ce;nt++){let ct=0;ae?(ct=Y[A]-Y[A-1],A++):ct=Z[s]-Z[s-1],s++,Le[nt]=Sv(ue,B,ct,!1),B+=2*ct}t[v++]=_.createMultiLineString(Le)}}else{if(et!==ta.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Ce=G[p]-G[p-1];p++;const Le=new Array(Ce);let nt=0;if(se&&se.length!==0){for(let ct=0;ct<Ce;ct++){const Lt=Z[s]-Z[s-1];s++;const Zt=new Array(Lt-1);nt=Y[A]-Y[A-1],A++;const jt=o.vertexBufferType===yA.VEC_2?Fg(ue,se,F,nt):Ig(ue,se,F,nt,0,k);F+=nt;for(let nr=0;nr<Zt.length;nr++)nt=Y[A]-Y[A-1],A++,Zt[nr]=o.vertexBufferType===yA.VEC_2?Fg(ue,se,F,nt):Ig(ue,se,F,nt,0,k),F+=nt;Le[ct]=_.createPolygon(jt,Zt)}t[v++]=_.createMultiPolygon(Le)}else{for(let ct=0;ct<Ce;ct++){const Lt=Z[s]-Z[s-1];s++;const Zt=new Array(Lt-1);nt=Y[A]-Y[A-1],A++;const jt=Eg(ue,B,nt);B+=2*nt;for(let nr=0;nr<Zt.length;nr++){const vr=Y[A]-Y[A-1];A++,Zt[nr]=Eg(ue,B,vr),B+=2*vr}Le[ct]=_.createPolygon(jt,Zt)}t[v++]=_.createMultiPolygon(Le)}}}}return t}function Eg(o,t,s){return Sv(o,t,s,!0)}function Fg(o,t,s,A){return Ev(o,t,s,A,!0)}function Ig(o,t,s,A,p,v){return Fv(o,t,s,A,!0,v)}function Sv(o,t,s,A){const p=new Array(A?s+1:s);for(let v=0;v<2*s;v+=2)p[v/2]=new x(o[t+v],o[t+v+1]);return A&&(p[p.length-1]=p[0]),p}function Ev(o,t,s,A,p){const v=new Array(p?A+1:A);for(let _=0;_<2*A;_+=2){const B=2*t[s+_/2];v[_/2]=new x(o[B],o[B+1])}return p&&(v[v.length-1]=v[0]),v}function Fv(o,t,s,A,p,v){const _=new Array(p?A+1:A);for(let B=0;B<A;B++){const F=Cv(o[t[s+B]],v.numBits,v.coordinateShift);_[B]=new x(F.x,F.y)}return p&&(_[_.length-1]=_[0]),_}class Vx{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(t,s,A,p,v){this._vertexBufferType=t,this._topologyVector=s,this._vertexOffsets=A,this._vertexBuffer=p,this._mortonSettings=v}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const t=jx(this);let s=0;for(;s<this.numGeometries;)yield{coordinates:t[s],type:this.geometryType(s)},s++}getSimpleEncodedVertex(t){const s=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getVertex(t){if(this.vertexOffsets&&this.mortonSettings){const A=Cv(this.vertexBuffer[this.vertexOffsets[t]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[A.x,A.y]}const s=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getGeometries(){return jx(this)}get mortonSettings(){return this._mortonSettings}}class Gx extends Vx{_numGeometries;_geometryType;constructor(t,s,A,p,v,_,B){super(A,p,v,_,B),this._numGeometries=t,this._geometryType=s}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===ta.POLYGON||this._geometryType===ta.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Kx extends Vx{_geometryTypes;constructor(t,s,A,p,v,_){super(t,A,p,v,_),this._geometryTypes=s}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let t=0;t<this.numGeometries;t++)if(this.geometryType(t)===ta.POLYGON||this.geometryType(t)===ta.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class qx{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(t,s,A,p){this._triangleOffsets=t,this._indexBuffer=s,this._vertexBuffer=A,this._topologyVector=p}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const t=new Array(this.numGeometries),s=this._topologyVector,A=s.partOffsets,p=s.ringOffsets,v=s.geometryOffsets;let _=0,B=1,F=1,k=1;for(let N=0;N<this.numGeometries;N++)switch(this.geometryType(N)){case ta.POLYGON:{const G=A[B]-A[B-1];B++;const Z=[];for(let Y=0;Y<G;Y++){const se=p[F]-p[F-1];F++;const ae=[];for(let ue=0;ue<se;ue++){const xe=this._vertexBuffer[_++],et=this._vertexBuffer[_++];ae.push(new x(xe,et))}ae.length>0&&ae.push(ae[0]),Z.push(ae)}t[N]=Z,v&&k++}break;case ta.MULTIPOLYGON:{const G=v[k]-v[k-1];k++;const Z=[];for(let Y=0;Y<G;Y++){const se=A[B]-A[B-1];B++;for(let ae=0;ae<se;ae++){const ue=p[F]-p[F-1];F++;const xe=[];for(let et=0;et<ue;et++){const Ce=this._vertexBuffer[_++],Le=this._vertexBuffer[_++];xe.push(new x(Ce,Le))}xe.length>0&&xe.push(xe[0]),Z.push(xe)}}t[N]=Z}}return t}[Symbol.iterator](){return null}}function $x(o,t,s,A,p,v){return new Y4(o,t,s,A,p,v)}class Y4 extends qx{_numGeometries;_geometryType;constructor(t,s,A,p,v,_){super(A,p,v,_),this._numGeometries=t,this._geometryType=s}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function Wx(o,t,s,A,p){return new J4(o,t,s,A,p)}class J4 extends qx{_geometryTypes;constructor(t,s,A,p,v){super(s,A,p,v),this._geometryTypes=t}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function eT(o,t,s,A,p){const v=Hl(o,s);let _=null,B=null,F=null,k=null,N=null,G=null,Z=null,Y=null;if(Sg(v,A,o,s)===ea.CONST){const ae=bv(o,s,v,!1);for(let ue=0;ue<t-1;ue++){const xe=Hl(o,s);switch(xe.physicalStreamType){case Wa.LENGTH:switch(xe.logicalStreamType.lengthType){case qc.GEOMETRIES:_=Wh(o,s,xe);break;case qc.PARTS:B=Wh(o,s,xe);break;case qc.RINGS:F=Wh(o,s,xe);break;case qc.TRIANGLES:Z=Wh(o,s,xe)}break;case Wa.OFFSET:switch(xe.logicalStreamType.offsetType){case Nf.VERTEX:k=jl(o,s,xe,!1);break;case Nf.INDEX:Y=jl(o,s,xe,!1)}break;case Wa.DATA:du.VERTEX===xe.logicalStreamType.dictionaryType?N=jl(o,s,xe,!0):(G={numBits:xe.numBits,coordinateShift:xe.coordinateShift},N=jl(o,s,xe,!1))}}return Y!==null?_!=null||B!=null?$x(A,ae,Z,Y,N,new Ld(_,B,F)):$x(A,ae,Z,Y,N):G===null?(function(ue,xe,et,Ce,Le){return new Gx(ue,xe,yA.VEC_2,et,Ce,Le)})(A,ae,new Ld(_,B,F),k,N):(function(ue,xe,et,Ce,Le,nt){return new Gx(ue,xe,yA.MORTON,et,Ce,Le,nt)})(A,ae,new Ld(_,B,F),k,N,G)}const se=jl(o,s,v,!1);for(let ae=0;ae<t-1;ae++){const ue=Hl(o,s);switch(ue.physicalStreamType){case Wa.LENGTH:switch(ue.logicalStreamType.lengthType){case qc.GEOMETRIES:_=jl(o,s,ue,!1);break;case qc.PARTS:B=jl(o,s,ue,!1);break;case qc.RINGS:F=jl(o,s,ue,!1);break;case qc.TRIANGLES:Z=Wh(o,s,ue)}break;case Wa.OFFSET:switch(ue.logicalStreamType.offsetType){case Nf.VERTEX:k=jl(o,s,ue,!1);break;case Nf.INDEX:Y=jl(o,s,ue,!1)}break;case Wa.DATA:du.VERTEX===ue.logicalStreamType.dictionaryType?N=jl(o,s,ue,!0):(G={numBits:ue.numBits,coordinateShift:ue.coordinateShift},N=jl(o,s,ue,!1))}}return Y!==null&&B===null?Wx(se,Z,Y,N):(_!==null?(_=Iv(se,_,2),B!==null&&F!==null?(B=Zx(se,_,B,!1),F=(function(ae,ue,xe,et){const Ce=new Int32Array(xe[xe.length-1]+1);let Le=0;Ce[0]=Le;let nt=1,ct=1,Lt=0;for(let Zt=0;Zt<ae.length;Zt++){const jt=ae[Zt],nr=ue[Zt+1]-ue[Zt];if(jt!==0&&jt!==3)for(let vr=0;vr<nr;vr++){const sr=xe[nt]-xe[nt-1];nt++;for(let Kt=0;Kt<sr;Kt++)Le=Ce[ct++]=Le+et[Lt++]}else for(let vr=0;vr<nr;vr++)Ce[ct++]=++Le,nt++}return Ce})(se,_,B,F)):B!==null&&(B=(function(ae,ue,xe){const et=new Int32Array(ue[ue.length-1]+1);let Ce=0;et[0]=Ce;let Le=1,nt=0;for(let ct=0;ct<ae.length;ct++){const Lt=ae[ct],Zt=ue[ct+1]-ue[ct];if(Lt===4||Lt===1)for(let jt=0;jt<Zt;jt++)Ce=et[Le++]=Ce+xe[nt++];else for(let jt=0;jt<Zt;jt++)et[Le++]=++Ce}return et})(se,_,B))):B!==null&&F!==null?(B=Iv(se,B,1),F=Zx(se,B,F,!0)):B!==null&&(B=Iv(se,B,0)),Y!==null?Wx(se,Z,Y,N,new Ld(_,B,F)):G===null?(function(ae,ue,xe,et){return new Kx(yA.VEC_2,ae,ue,xe,et)})(se,new Ld(_,B,F),k,N):(function(ae,ue,xe,et,Ce){return new Kx(yA.MORTON,ae,ue,xe,et,Ce)})(se,new Ld(_,B,F),k,N,G))}function Iv(o,t,s){const A=new Int32Array(o.length+1);let p=0;A[0]=p;let v=0;for(let _=0;_<o.length;_++)p=A[_+1]=p+(o[_]>s?t[v++]:1);return A}function Zx(o,t,s,A){const p=new Int32Array(t[t.length-1]+1);let v=0;p[0]=v;let _=1,B=0;for(let F=0;F<o.length;F++){const k=o[F],N=t[F+1]-t[F];if(k===5||k===2||A&&(k===4||k===1))for(let G=0;G<N;G++)v=p[_++]=v+s[B++];else for(let G=0;G<N;G++)p[_++]=++v}return p}class tT extends Td{dataVector;constructor(t,s,A){super(t,s.getBuffer(),A),this.dataVector=s}getValueFromBuffer(t){return this.dataVector.get(t)}}class rT extends bg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Xx extends Td{constructor(t,s,A){super(t,BigInt64Array.of(s),A)}getValueFromBuffer(t){return this.dataBuffer[0]}}function Zp(o,t,s){return Yx(o,Math.ceil(t/8),s)}function Yx(o,t,s){const A=new Uint8Array(t);let p=0;for(;p<t;){const v=o[s.increment()];if(v<=127){const _=v+3,B=o[s.increment()],F=p+_;A.fill(B,p,F),p=F}else{const _=256-v;for(let B=0;B<_;B++)A[p++]=o[s.increment()]}}return A}const nT=new TextDecoder;function Tv(o,t,s){return s-t>=12?nT.decode(o.subarray(t,s)):(function(A,p,v){let _="",B=p;for(;B<v;){const F=A[B];let k,N,G,Z=null,Y=F>239?4:F>223?3:F>191?2:1;if(B+Y>v)break;Y===1?F<128&&(Z=F):Y===2?(k=A[B+1],(192&k)==128&&(Z=(31&F)<<6|63&k,Z<=127&&(Z=null))):Y===3?(k=A[B+1],N=A[B+2],(192&k)==128&&(192&N)==128&&(Z=(15&F)<<12|(63&k)<<6|63&N,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):Y===4&&(k=A[B+1],N=A[B+2],G=A[B+3],(192&k)==128&&(192&N)==128&&(192&G)==128&&(Z=(15&F)<<18|(63&k)<<12|(63&N)<<6|63&G,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,Y=1):Z>65535&&(Z-=65536,_+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),_+=String.fromCharCode(Z),B+=Y}return _})(o,t,s)}class Pv extends Td{offsetBuffer;constructor(t,s,A,p){super(t,A,p),this.offsetBuffer=s}}class Jx extends Pv{textEncoder;constructor(t,s,A,p){super(t,s,A,p??s.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(t){return Tv(this.dataBuffer,this.offsetBuffer[t],this.offsetBuffer[t+1])}}class Md extends Pv{indexBuffer;textEncoder;constructor(t,s,A,p,v){super(t,A,p,v??s.length),this.indexBuffer=s,this.indexBuffer=s,this.textEncoder=new TextEncoder}getValueFromBuffer(t){const s=this.indexBuffer[t];return Tv(this.dataBuffer,this.offsetBuffer[s],this.offsetBuffer[s+1])}}class eb extends Pv{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(t,s,A,p,v,_,B){super(t,A,p,B),this.indexBuffer=s,this.symbolOffsetBuffer=v,this.symbolTableBuffer=_,this.textEncoder=new TextEncoder}getValueFromBuffer(t){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(A,p,v){const _=[],B=new Array(p.length).fill(0);for(let F=1;F<p.length;F++)B[F]=B[F-1]+p[F-1];for(let F=0;F<v.length;F++)if(v[F]===255)_.push(v[++F]);else{const k=p[v[F]],N=B[v[F]];for(let G=0;G<k;G++)_.push(A[N+G])}return new Uint8Array(_)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const s=this.indexBuffer[t];return Tv(this.decodedDictionary,this.offsetBuffer[s],this.offsetBuffer[s+1])}offsetToLengthBuffer(t){const s=new Uint32Array(t.length-1);let A=t[0];for(let p=1;p<t.length;p++){const v=t[p];s[p-1]=v-A,A=v}return s}}function iT(o,t,s,A,p,v){return s.type==="scalarType"?(function(_,B,F,k,N,G){let Z=null,Y=0;if(_===0)return null;if(G.nullable){const ae=Hl(B,F);Y=ae.numValues;const ue=F.get(),xe=Zp(B,Y,F);F.set(ue+ae.byteLength),Z=new pu(xe,ae.numValues)}const se=Z??k;switch(N.physicalType){case 4:case 3:return(function(ae,ue,xe,et,Ce){const Le=Hl(ae,ue),nt=Sg(Le,Ce,ae,ue),ct=et.physicalType===3;if(nt===ea.FLAT){const Lt=Xp(Ce)?Bv(ae,ue,Le,ct,Ce):jl(ae,ue,Le,ct);return new gv(xe.name,Lt,Ce)}if(nt===ea.SEQUENCE){const Lt=Dx(ae,ue,Le);return new vv(xe.name,Lt[0],Lt[1],Le.numRleValues)}{const Lt=bv(ae,ue,Le,ct);return new _v(xe.name,Lt,Ce)}})(B,F,G,N,se);case 9:return(function(ae,ue,xe,et,Ce){let Le=null,nt=null,ct=null,Lt=null,Zt=null,jt=null,nr=null,vr=null;for(let sr=0;sr<et;sr++){const Kt=Hl(ue,xe);if(Kt.byteLength!==0)switch(Kt.physicalStreamType){case Wa.PRESENT:{const Qt=Zp(ue,Kt.numValues,xe);jt=new pu(Qt,Kt.numValues);break}case Wa.OFFSET:nt=Ce!=null||jt!=null?Bv(ue,xe,Kt,!1,Ce??jt):jl(ue,xe,Kt,!1);break;case Wa.LENGTH:{const Qt=Wh(ue,xe,Kt);qc.DICTIONARY===Kt.logicalStreamType.lengthType?Le=Qt:qc.SYMBOL===Kt.logicalStreamType.lengthType?Lt=Qt:nr=Qt;break}case Wa.DATA:{const Qt=ue.subarray(xe.get(),xe.get()+Kt.byteLength);xe.add(Kt.byteLength);const Pr=Kt.logicalStreamType.dictionaryType;du.FSST===Pr?Zt=Qt:du.SINGLE===Pr||du.SHARED===Pr?ct=Qt:du.NONE===Pr&&(vr=Qt);break}}}return(function(sr,Kt,Qt,Pr,Fr,Mr,Cr){return Kt?new eb(sr,Qt,Pr,Fr,Mr,Kt,Cr):null})(ae,Zt,nt,Le,ct,Lt,Ce??jt)??(function(sr,Kt,Qt,Pr,Fr){return Kt?Fr?new Md(sr,Qt,Pr,Kt,Fr):new Md(sr,Qt,Pr,Kt):null})(ae,ct,nt,Le,Ce??jt)??(function(sr,Kt,Qt,Pr,Fr){if(!Kt||!Qt)return null;if(Pr)return Fr?new Md(sr,Pr,Kt,Qt,Fr):new Md(sr,Pr,Kt,Qt);if(Fr&&Fr.size()!==Kt.length-1){const Mr=new Int32Array(Fr.size());let Cr=0;for(let Yr=0;Yr<Fr.size();Yr++)Mr[Yr]=Fr.get(Yr)?Cr++:0;return new Md(sr,Mr,Kt,Qt,Fr)}return Fr?new Jx(sr,Kt,Qt,Fr):new Jx(sr,Kt,Qt)})(ae,nr,vr,nt,Ce??jt)})(G.name,B,F,G.nullable?_-1:_,Z);case 0:return(function(ae,ue,xe,et,Ce){const Le=Hl(ae,ue),nt=Le.numValues,ct=ue.get(),Lt=Xp(Ce)?(function(jt,nr,vr,sr){const Kt=Yx(jt,Math.ceil(nr/8),vr),Qt=new pu(Kt,nr),Pr=sr.size(),Fr=new pu(new Uint8Array(Pr),Pr);let Mr=0;for(let Cr=0;Cr<sr.size();Cr++){const Yr=!!sr.get(Cr)&&Qt.get(Mr++);Fr.set(Cr,Yr)}return Fr.getBuffer()})(ae,nt,ue,Ce):Zp(ae,nt,ue);ue.set(ct+Le.byteLength);const Zt=new pu(Lt,nt);return new tT(xe.name,Zt,Ce)})(B,F,G,0,se);case 6:case 5:return(function(ae,ue,xe,et,Ce){const Le=Hl(ae,ue),nt=Sg(Le,et,ae,ue),ct=Ce.physicalType===5;if(nt===ea.FLAT){const Lt=Xp(et)?(function(Zt,jt,nr,vr,sr){return(function(Kt,Qt,Pr,Fr){switch(Qt.logicalLevelTechnique1){case Kn.DELTA:return Qt.logicalLevelTechnique2===Kn.RLE&&(Kt=Mx(Kt,Qt.runs,Qt.numRleValues)),(function(Mr,Cr){const Yr=new BigInt64Array(Mr.size());let ti=0;Mr.get(0)?(Yr[0]=Mr.get(0)?Cr[0]>>1n^-(1n&Cr[0]):0n,ti=1):Yr[0]=0n;let Vn=1;for(;Vn!=Yr.length;++Vn)Yr[Vn]=Mr.get(Vn)?Yr[Vn-1]+(Cr[ti]>>1n^-(1n&Cr[ti++])):Yr[Vn-1];return Yr})(Fr,Kt);case Kn.RLE:return(function(Mr,Cr,Yr,ti){const Vn=Cr;return Yr?(function(fs,Xa,vo){const ds=new BigInt64Array(fs.size());let cs=0;for(let bi=0;bi<vo;bi++){const zs=Number(Xa[bi]);let ro=Xa[bi+vo];ro=ro>>1n^-(1n&ro);for(let es=cs;es<cs+zs;es++)fs.get(es)?ds[es]=ro:(ds[es]=0n,cs++);cs+=zs}return ds})(ti,Mr,Vn.runs):(function(fs,Xa,vo){const ds=new BigInt64Array(fs.size());let cs=0;for(let bi=0;bi<vo;bi++){const zs=Number(Xa[bi]),ro=Xa[bi+vo];for(let es=cs;es<cs+zs;es++)fs.get(es)?ds[es]=ro:(ds[es]=0n,cs++);cs+=zs}return ds})(ti,Mr,Vn.runs)})(Kt,Qt,Pr,Fr);case Kn.NONE:return Kt=Pr?(function(Mr,Cr){const Yr=new BigInt64Array(Mr.size());let ti=0,Vn=0;for(;Vn!=Yr.length;++Vn)if(Mr.get(Vn)){const fs=Cr[ti++];Yr[Vn]=fs>>1n^-(1n&fs)}else Yr[Vn]=0n;return Yr})(Fr,Kt):(function(Mr,Cr){const Yr=new BigInt64Array(Mr.size());let ti=0,Vn=0;for(;Vn!=Yr.length;++Vn)Yr[Vn]=Mr.get(Vn)?Cr[ti++]:0n;return Yr})(Fr,Kt),Kt;default:throw new Error("The specified Logical level technique is not supported")}})(Bg(Zt,jt,nr.numValues),nr,vr,sr)})(ae,ue,Le,ct,et):Nx(ae,ue,Le,ct);return new Ox(xe.name,Lt,et)}if(nt===ea.SEQUENCE){const Lt=Rx(ae,ue,Le);return new zx(xe.name,Lt[0],Lt[1],Le.numRleValues)}{const Lt=Qx(ae,ue,Le,ct);return new Xx(xe.name,Lt,et)}})(B,F,G,se,N);case 7:return(function(ae,ue,xe,et){const Ce=Hl(ae,ue),Le=Xp(et)?(function(nt,ct,Lt,Zt){const jt=ct.get(),nr=jt+Zt*Float32Array.BYTES_PER_ELEMENT,vr=new Uint8Array(nt.subarray(jt,nr)).buffer,sr=new Float32Array(vr);ct.set(nr);const Kt=Lt.size(),Qt=new Float32Array(Kt);let Pr=0;for(let Fr=0;Fr<Kt;Fr++)Qt[Fr]=Lt.get(Fr)?sr[Pr++]:0;return Qt})(ae,ue,et,Ce.numValues):(function(nt,ct,Lt){const Zt=ct.get(),jt=Zt+Lt*Float32Array.BYTES_PER_ELEMENT,nr=new Uint8Array(nt.subarray(Zt,jt)).buffer,vr=new Float32Array(nr);return ct.set(jt),vr})(ae,ue,Ce.numValues);return new rT(xe.name,Le,et)})(B,F,G,se);case 8:return(function(ae,ue,xe,et){const Ce=Hl(ae,ue),Le=Xp(et)?(function(nt,ct,Lt,Zt){const jt=ct.get(),nr=jt+Zt*Float64Array.BYTES_PER_ELEMENT,vr=new Uint8Array(nt.subarray(jt,nr)).buffer,sr=new Float64Array(vr);ct.set(nr);const Kt=Lt.size(),Qt=new Float64Array(Kt);let Pr=0;for(let Fr=0;Fr<Kt;Fr++)Qt[Fr]=Lt.get(Fr)?sr[Pr++]:0;return Qt})(ae,ue,et,Ce.numValues):(function(nt,ct,Lt){const Zt=ct.get(),jt=Zt+Lt*Float64Array.BYTES_PER_ELEMENT,nr=new Uint8Array(nt.subarray(Zt,jt)).buffer,vr=new Float64Array(nr);return ct.set(jt),vr})(ae,ue,Ce.numValues);return new yv(xe.name,Le,et)})(B,F,G,se);default:throw new Error(`The specified data type for the field is currently not supported: ${N}`)}})(A,o,t,p,s.scalarType,s):A!=1?null:(function(_,B,F,k){let N=null,G=null,Z=null,Y=null,se=!1;for(;!se;){const et=Hl(_,B);switch(et.physicalStreamType){case Wa.LENGTH:qc.DICTIONARY===et.logicalStreamType.lengthType?N=Wh(_,B,et):Z=Wh(_,B,et);break;case Wa.DATA:du.SINGLE===et.logicalStreamType.dictionaryType||du.SHARED===et.logicalStreamType.dictionaryType?(G=_.subarray(B.get(),B.get()+et.byteLength),se=!0):Y=_.subarray(B.get(),B.get()+et.byteLength),B.add(et.byteLength)}}const ae=F.complexType.children,ue=[];let xe=0;for(const et of ae){const Ce=_a(_,B,1)[0];if(Ce==0)continue;const Le=`${F.name}${et.name==="default"?"":":"+et.name}`;if(Ce!==2||et.type!=="scalarField"||et.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const nt=Hl(_,B),ct=Zp(_,nt.numValues,B),Lt=Hl(_,B),Zt=Lt.decompressedCount!==k?Bv(_,B,Lt,!1,new pu(ct,nt.numValues)):jl(_,B,Lt,!1);ue[xe++]=Y?new eb(Le,Zt,N,G,Z,Y,new pu(ct,nt.numValues)):new Md(Le,Zt,N,G,new pu(ct,nt.numValues))}return ue})(o,t,s,p)}function Xp(o){return o instanceof pu}function sT(o){if(o.name==="id")return!1;if(o.type==="scalarType"){const t=o.scalarType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(t.type==="logicalType")return!1}else if(o.type==="complexType"){const t=o.complexType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",o),!1}const oT=new TextDecoder;function tb(o,t){const s=_a(o,t,1)[0];if(s===0)return"";const A=t.get(),p=o.subarray(A,A+s);return t.add(s),oT.decode(p)}function rb(o,t){const s=_a(o,t,1)[0]>>>0,A=!!(4&s),p=!!(2&s),v=_a(o,t,1)[0]>>>0,_={};if(1&s&&(_.nullable=!0),p){const B={};if(A?(B.type="logicalType",B.logicalType=v):(B.type="physicalType",B.physicalType=v),8&s){const F=_a(o,t,1)[0]>>>0;B.children=new Array(F);for(let k=0;k<F;k++)B.children[k]=rb(o,t)}_.type="complexField",_.complexField=B}else{const B={};A?(B.type="logicalType",B.logicalType=v):(B.type="physicalType",B.physicalType=v),_.type="scalarField",_.scalarField=B}return _}function aT(o,t){const s=_a(o,t,1)[0]>>>0,A=(function(p){switch(p){case 0:case 1:case 2:case 3:{const v={};v.nullable=!!(1&p),v.columnScope=0;const _={};return _.physicalType=p>1?6:4,_.type="physicalType",v.scalarType=_,v.type="scalarType",v}case 4:{const v={nullable:!1,columnScope:0},_={type:"physicalType",physicalType:0};return v.type="complexType",v.complexType=_,v}case 30:{const v={nullable:!1,columnScope:0},_={type:"physicalType",physicalType:1};return v.type="complexType",v.complexType=_,v}default:return(function(v){let _=null;switch(v){case 10:case 11:_=0;break;case 12:case 13:_=1;break;case 14:case 15:_=2;break;case 16:case 17:_=3;break;case 18:case 19:_=4;break;case 20:case 21:_=5;break;case 22:case 23:_=6;break;case 24:case 25:_=7;break;case 26:case 27:_=8;break;case 28:case 29:_=9;break;default:return null}const B={};B.nullable=!!(1&v),B.columnScope=0;const F={type:"physicalType"};return F.physicalType=_,B.type="scalarType",B.scalarType=F,B})(p)}})(s);if(!A)throw new Error(`Unsupported column type code: ${s}`);if((function(p){return p>=10})(s)?A.name=tb(o,t):s>=0&&s<=3?A.name="id":s===4&&(A.name="geometry"),(function(p){return p===30})(s)){const p=_a(o,t,1)[0]>>>0,v=A.complexType;v.children=new Array(p);for(let _=0;_<p;_++)v.children[_]=rb(o,t)}return A}function lT(o,t){const s={featureTables:[]},A={};A.name=tb(o,t);const p=_a(o,t,1)[0]>>>0,v=_a(o,t,1)[0]>>>0;A.columns=new Array(v);for(let _=0;_<v;_++)A.columns[_]=aT(o,t);return s.featureTables.push(A),[s,p]}function cT(o,t,s,A,p,v,_=!1){const B=t.scalarType.physicalType,F=Sg(p,v,o,s);if(B===4)switch(F){case ea.FLAT:{const k=jl(o,s,p,!1);return new gv(A,k,v)}case ea.SEQUENCE:{const k=Dx(o,s,p);return new vv(A,k[0],k[1],p.numRleValues)}case ea.CONST:{const k=bv(o,s,p,!1);return new _v(A,k,v)}}else switch(F){case ea.FLAT:{if(_){const N=(function(G,Z,Y,se){const ae=(function(ue,xe,et){const Ce=new Float64Array(xe);for(let Le=0;Le<xe;Le++)Ce[Le]=W4(ue,et);return Ce})(G,Y.numValues,Z);return(function(ue,xe,et){switch(xe.logicalLevelTechnique1){case Kn.DELTA:return xe.logicalLevelTechnique2===Kn.RLE&&(ue=kx(ue,xe.runs,xe.numRleValues)),(function(Ce){Ce[0]=Ce[0]%2==1?(Ce[0]+1)/-2:Ce[0]/2;const Le=Ce.length/4*4;let nt=1;if(Le>=4)for(;nt<Le-4;nt+=4){const ct=Ce[nt],Lt=Ce[nt+1],Zt=Ce[nt+2],jt=Ce[nt+3];Ce[nt]=(ct%2==1?(ct+1)/-2:ct/2)+Ce[nt-1],Ce[nt+1]=(Lt%2==1?(Lt+1)/-2:Lt/2)+Ce[nt],Ce[nt+2]=(Zt%2==1?(Zt+1)/-2:Zt/2)+Ce[nt+1],Ce[nt+3]=(jt%2==1?(jt+1)/-2:jt/2)+Ce[nt+2]}for(;nt!=Ce.length;++nt)Ce[nt]=(Ce[nt]%2==1?(Ce[nt]+1)/-2:Ce[nt]/2)+Ce[nt-1]})(ue),ue;case Kn.RLE:return(function(Ce,Le,nt){return kx(Ce,Le.runs,Le.numRleValues)})(ue,xe);case Kn.NONE:return ue;default:throw new Error(`The specified Logical level technique is not supported: ${xe.logicalLevelTechnique1}`)}})(ae,Y)})(o,s,p);return new yv(A,N,v)}const k=Nx(o,s,p,!1);return new Ox(A,k,v)}case ea.SEQUENCE:{const k=Rx(o,s,p);return new zx(A,k[0],k[1],p.numRleValues)}case ea.CONST:{const k=Qx(o,s,p,!1);return new Xx(A,k,v)}}throw new Error("Vector type not supported for id column.")}class AT{constructor(t,s){var A;switch(this._featureData=t,this.properties=this._featureData.properties||{},(A=this._featureData.geometry)===null||A===void 0?void 0:A.type){case ta.POINT:case ta.MULTIPOINT:this.type=1;break;case ta.LINESTRING:case ta.MULTILINESTRING:this.type=2;break;case ta.POLYGON:case ta.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=s,this.id=Number(this._featureData.id)}loadGeometry(){const t=[];for(const s of this._featureData.geometry.coordinates){const A=[];for(const p of s)A.push(new x(p.x,p.y));t.push(A)}return t}}class uT{constructor(t){this.features=[],this.featureTable=t,this.name=t.name,this.extent=t.extent,this.version=2,this.features=t.getFeatures(),this.length=this.features.length}feature(t){return new AT(this.features[t],this.extent)}}class nb{constructor(t){this.layers={};const s=(function(A,p,v=!0){const _=new $4(0),B=[];for(;_.get()<A.length;){const F=_a(A,_,1)[0]>>>0,k=_.get()+F;if(k>A.length)throw new Error(`Block overruns tile: ${k} > ${A.length}`);if(_a(A,_,1)[0]>>>0!=1){_.set(k);continue}const N=lT(A,_),G=N[1],Z=N[0].featureTables[0];let Y=null,se=null;const ae=[];let ue=0;for(const et of Z.columns){const Ce=et.name;if(Ce==="id"){let Le=null;if(et.nullable){const ct=Hl(A,_),Lt=_.get(),Zt=Zp(A,ct.numValues,_);_.set(Lt+ct.byteLength),Le=new pu(Zt,ct.numValues)}const nt=Hl(A,_);ue=nt.decompressedCount,Y=cT(A,et,_,Ce,nt,Le??ue,v)}else if(Ce==="geometry"){const Le=_a(A,_,1)[0];if(ue===0){const nt=_.get();ue=Hl(A,_).decompressedCount,_.set(nt)}se=eT(A,Le,_,ue)}else{const Le=sT(et)?_a(A,_,1)[0]:1;if(Le===0&&et.type==="scalarType")continue;const nt=iT(A,_,et,Le,ue);if(nt)if(Array.isArray(nt))for(const ct of nt)ae.push(ct);else ae.push(nt)}}const xe=new q4(Z.name,se,Y,ae,G);B.push(xe),_.set(k)}return B})(new Uint8Array(t));this.layers=s.reduce(((A,p)=>Object.assign(Object.assign({},A),{[p.name]:new uT(p)})),{})}}class Of{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){const s=new Of;return s.extend(t(new x(this.minX,this.minY))),s.extend(t(new x(this.maxX,this.minY))),s.extend(t(new x(this.minX,this.maxY))),s.extend(t(new x(this.maxX,this.maxY))),s}static fromPoints(t){const s=new Of;for(const A of t)s.extend(A);return s}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return!this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return!this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}class hT{constructor(t,s){this.feature=t,this.type=t.type,this.properties=t.tags?t.tags:{},this.extent=s,"id"in t&&(typeof t.id=="string"?this.id=parseInt(t.id,10):typeof t.id!="number"||isNaN(t.id)||(this.id=t.id))}loadGeometry(){const t=[],s=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const A of s){const p=[];for(const v of A)p.push(new x(v[0],v[1]));t.push(p)}return t}}const Yp="_geojsonTileLayer";function fT(o,t){t.writeVarintField(15,o.version||1),t.writeStringField(1,o.name||""),t.writeVarintField(5,o.extent||4096);const s={keys:[],values:[],keycache:{},valuecache:{}};for(let v=0;v<o.length;v++)s.feature=o.feature(v),t.writeMessage(2,dT,s);const A=s.keys;for(const v of A)t.writeStringField(3,v);const p=s.values;for(const v of p)t.writeMessage(4,gT,v)}function dT(o,t){if(!o.feature)return;const s=o.feature;s.id!==void 0&&t.writeVarintField(1,s.id),t.writeMessage(2,pT,o),t.writeVarintField(3,s.type),t.writeMessage(4,mT,s)}function pT(o,t){for(const s in o.feature?.properties){let A=o.feature.properties[s],p=o.keycache[s];if(A===null)continue;p===void 0&&(o.keys.push(s),p=o.keys.length-1,o.keycache[s]=p),t.writeVarint(p),typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"&&(A=JSON.stringify(A));const v=typeof A+":"+A;let _=o.valuecache[v];_===void 0&&(o.values.push(A),_=o.values.length-1,o.valuecache[v]=_),t.writeVarint(_)}}function Lv(o,t){return(t<<3)+(7&o)}function ib(o){return o<<1^o>>31}function mT(o,t){const s=o.loadGeometry(),A=o.type;let p=0,v=0;for(const _ of s){let B=1;A===1&&(B=_.length),t.writeVarint(Lv(1,B));const F=A===3?_.length-1:_.length;for(let k=0;k<F;k++){k===1&&A!==1&&t.writeVarint(Lv(2,F-1));const N=_[k].x-p,G=_[k].y-v;t.writeVarint(ib(N)),t.writeVarint(ib(G)),p+=N,v+=G}o.type===3&&t.writeVarint(Lv(7,1))}}function gT(o,t){const s=typeof o;s==="string"?t.writeStringField(1,o):s==="boolean"?t.writeBooleanField(7,o):s==="number"&&(o%1!=0?t.writeDoubleField(3,o):o<0?t.writeSVarintField(6,o):t.writeVarintField(5,o))}class sb{constructor(t,s){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ke(Ie,16,0),this.grid3D=new ke(Ie,16,0),this.featureIndexArray=new re,this.promoteId=s}insert(t,s,A,p,v,_){const B=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(A,p,v);const F=_?this.grid3D:this.grid;for(let k=0;k<s.length;k++){const N=s[k],G=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<N.length;Z++){const Y=N[Z];G[0]=Math.min(G[0],Y.x),G[1]=Math.min(G[1],Y.y),G[2]=Math.max(G[2],Y.x),G[3]=Math.max(G[3],Y.y)}G[0]<Ie&&G[1]<Ie&&G[2]>=0&&G[3]>=0&&F.insert(B,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new _d(new ju(this.rawTileData)).layers:new nb(this.rawTileData).layers,this.sourceLayerCoder=new Ex(this.vtLayers?Object.keys(this.vtLayers).sort():[Yp])),this.vtLayers}query(t,s,A,p){this.loadVTLayers();const v=t.params,_=Ie/t.tileSize/t.scale,B=cc(v.filter,v.globalState),F=t.queryGeometry,k=t.queryPadding*_,N=Of.fromPoints(F),G=this.grid.query(N.minX-k,N.minY-k,N.maxX+k,N.maxY+k),Z=Of.fromPoints(t.cameraQueryGeometry).expandBy(k),Y=this.grid3D.query(Z.minX,Z.minY,Z.maxX,Z.maxY,((ue,xe,et,Ce)=>(function(Le,nt,ct,Lt,Zt){for(const nr of Le)if(nt<=nr.x&&ct<=nr.y&&Lt>=nr.x&&Zt>=nr.y)return!0;const jt=[new x(nt,ct),new x(nt,Zt),new x(Lt,Zt),new x(Lt,ct)];if(Le.length>2){for(const nr of jt)if(Ah(Le,nr))return!0}for(let nr=0;nr<Le.length-1;nr++)if(Sp(Le[nr],Le[nr+1],jt))return!0;return!1})(t.cameraQueryGeometry,ue-k,xe-k,et+k,Ce+k)));for(const ue of Y)G.push(ue);G.sort(yT);const se={};let ae;for(let ue=0;ue<G.length;ue++){const xe=G[ue];if(xe===ae)continue;ae=xe;const et=this.featureIndexArray.get(xe);let Ce=null;this.loadMatchingFeature(se,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,B,v.layers,v.availableImages,s,A,p,((Le,nt,ct)=>(Ce||(Ce=HA(Le)),nt.queryIntersectsFeature({queryGeometry:F,feature:Le,featureState:ct,geometry:Ce,zoom:this.z,transform:t.transform,pixelsToTileUnits:_,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation}))))}return se}loadMatchingFeature(t,s,A,p,v,_,B,F,k,N,G){const Z=this.bucketLayerIDs[s];if(_&&!Z.some((ue=>_.has(ue))))return;const Y=this.sourceLayerCoder.decode(A),se=this.vtLayers[Y].feature(p);if(v.needGeometry){const ue=jA(se,!0);if(!v.filter(new Lr(this.tileID.overscaledZ),ue,this.tileID.canonical))return}else if(!v.filter(new Lr(this.tileID.overscaledZ),se))return;const ae=this.getId(se,Y);for(let ue=0;ue<Z.length;ue++){const xe=Z[ue];if(_&&!_.has(xe))continue;const et=F[xe];if(!et)continue;let Ce={};ae&&N&&(Ce=N.getState(et.sourceLayer||Yp,ae));const Le=wt({},k[xe]);Le.paint=ob(Le.paint,et.paint,se,Ce,B),Le.layout=ob(Le.layout,et.layout,se,Ce,B);const nt=!G||G(se,et,Ce);if(!nt)continue;const ct=new Fx(se,this.z,this.x,this.y,ae);ct.layer=Le;let Lt=t[xe];Lt===void 0&&(Lt=t[xe]=[]),Lt.push({featureIndex:p,feature:ct,intersectionZ:nt})}}lookupSymbolFeatures(t,s,A,p,v,_,B,F){const k={};this.loadVTLayers();const N=cc(v.filterSpec,v.globalState);for(const G of t)this.loadMatchingFeature(k,A,p,G,N,_,B,F,s);return k}hasLayer(t){for(const s of this.bucketLayerIDs)for(const A of s)if(t===A)return!0;return!1}getId(t,s){var A;let p=t.id;return this.promoteId&&(p=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&(!((A=t.properties)===null||A===void 0)&&A.cluster)&&this.promoteId&&(p=Number(t.properties.cluster_id))),p}}function ob(o,t,s,A,p){return Pt(o,((v,_)=>{const B=t instanceof Xn?t.get(_):null;return B&&B.evaluate?B.evaluate(s,A,p):B}))}function yT(o,t){return t-o}function ab(o,t,s,A,p){const v=[];for(let _=0;_<o.length;_++){const B=o[_];let F;for(let k=0;k<B.length-1;k++){let N=B[k],G=B[k+1];N.x<t&&G.x<t||(N.x<t?N=new x(t,N.y+(t-N.x)/(G.x-N.x)*(G.y-N.y))._round():G.x<t&&(G=new x(t,N.y+(t-N.x)/(G.x-N.x)*(G.y-N.y))._round()),N.y<s&&G.y<s||(N.y<s?N=new x(N.x+(s-N.y)/(G.y-N.y)*(G.x-N.x),s)._round():G.y<s&&(G=new x(N.x+(s-N.y)/(G.y-N.y)*(G.x-N.x),s)._round()),N.x>=A&&G.x>=A||(N.x>=A?N=new x(A,N.y+(A-N.x)/(G.x-N.x)*(G.y-N.y))._round():G.x>=A&&(G=new x(A,N.y+(A-N.x)/(G.x-N.x)*(G.y-N.y))._round()),N.y>=p&&G.y>=p||(N.y>=p?N=new x(N.x+(p-N.y)/(G.y-N.y)*(G.x-N.x),p)._round():G.y>=p&&(G=new x(N.x+(p-N.y)/(G.y-N.y)*(G.x-N.x),p)._round()),F&&N.equals(F[F.length-1])||(F=[N],v.push(F)),F.push(G)))))}}return v}function lb(o,t,s,A,p){switch(t){case 1:return(function(v,_,B,F){const k=[];for(const N of v)for(const G of N){const Z=F===0?G.x:G.y;Z>=_&&Z<=B&&k.push([G])}return k})(o,s,A,p);case 2:return cb(o,s,A,p,!1);case 3:return cb(o,s,A,p,!0)}return[]}function vT(o,t,s,A,p){const v=A===0?_T:wT;let _=[];const B=[];for(let N=0;N<o.length-1;N++){const G=o[N],Z=o[N+1],Y=A===0?G.x:G.y,se=A===0?Z.x:Z.y;let ae=!1;Y<t?se>t&&_.push(v(G,Z,t)):Y>s?se<s&&_.push(v(G,Z,s)):_.push(G),se<t&&Y>=t&&(_.push(v(G,Z,t)),ae=!0),se>s&&Y<=s&&(_.push(v(G,Z,s)),ae=!0),!p&&ae&&(B.push(_),_=[])}const F=o.length-1,k=A===0?o[F].x:o[F].y;return k>=t&&k<=s&&_.push(o[F]),p&&_.length>0&&!_[0].equals(_[_.length-1])&&_.push(new x(_[0].x,_[0].y)),_.length>0&&B.push(_),B}function cb(o,t,s,A,p){const v=[];for(const _ of o){const B=vT(_,t,s,A,p);B.length>0&&v.push(...B)}return v}function _T(o,t,s){return new x(s,o.y+(s-o.x)/(t.x-o.x)*(t.y-o.y))}function wT(o,t,s){return new x(o.x+(s-o.y)/(t.y-o.y)*(t.x-o.x),s)}qe("FeatureIndex",sb,{omit:["rawTileData","sourceLayerCoder"]});class Zh extends x{constructor(t,s,A,p){super(t,s),this.angle=A,p!==void 0&&(this.segment=p)}clone(){return new Zh(this.x,this.y,this.angle,this.segment)}}function Ab(o,t,s,A,p){if(t.segment===void 0||s===0)return!0;let v=t,_=t.segment+1,B=0;for(;B>-s/2;){if(_--,_<0)return!1;B-=o[_].dist(v),v=o[_]}B+=o[_].dist(o[_+1]),_++;const F=[];let k=0;for(;B<s/2;){const N=o[_],G=o[_+1];if(!G)return!1;let Z=o[_-1].angleTo(N)-N.angleTo(G);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:B,angleDelta:Z}),k+=Z;B-F[0].distance>A;)k-=F.shift().angleDelta;if(k>p)return!1;_++,B+=N.dist(G)}return!0}function ub(o){let t=0;for(let s=0;s<o.length-1;s++)t+=o[s].dist(o[s+1]);return t}function hb(o,t,s){return o?.6*t*s:0}function fb(o,t){return Math.max(o?o.right-o.left:0,t?t.right-t.left:0)}function xT(o,t,s,A,p,v){const _=hb(s,p,v),B=fb(s,A)*v;let F=0;const k=ub(o)/2;for(let N=0;N<o.length-1;N++){const G=o[N],Z=o[N+1],Y=G.dist(Z);if(F+Y>k){const se=(k-F)/Y,ae=xr.number(G.x,Z.x,se),ue=xr.number(G.y,Z.y,se),xe=new Zh(ae,ue,Z.angleTo(G),N);return xe._round(),!_||Ab(o,xe,B,_,t)?xe:void 0}F+=Y}}function bT(o,t,s,A,p,v,_,B,F){const k=hb(A,v,_),N=fb(A,p),G=N*_,Z=o[0].x===0||o[0].x===F||o[0].y===0||o[0].y===F;return t-G<t/4&&(t=G+t/4),db(o,Z?t/2*B%t:(N/2+2*v)*_*B%t,t,k,s,G,Z,!1,F)}function db(o,t,s,A,p,v,_,B,F){const k=v/2,N=ub(o);let G=0,Z=t-s,Y=[];for(let se=0;se<o.length-1;se++){const ae=o[se],ue=o[se+1],xe=ae.dist(ue),et=ue.angleTo(ae);for(;Z+s<G+xe;){Z+=s;const Ce=(Z-G)/xe,Le=xr.number(ae.x,ue.x,Ce),nt=xr.number(ae.y,ue.y,Ce);if(Le>=0&&Le<F&&nt>=0&&nt<F&&Z-k>=0&&Z+k<=N){const ct=new Zh(Le,nt,et,se);ct._round(),A&&!Ab(o,ct,v,A,p)||Y.push(ct)}}G+=xe}return B||Y.length||_||(Y=db(o,G/2,s,A,p,v,_,!0,F)),Y}function pb(o,t,s,A){const p=[],v=o.image,_=v.pixelRatio,B=v.paddedRect.w-2,F=v.paddedRect.h-2;let k={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const N=v.stretchX||[[0,B]],G=v.stretchY||[[0,F]],Z=(Qt,Pr)=>Qt+Pr[1]-Pr[0],Y=N.reduce(Z,0),se=G.reduce(Z,0),ae=B-Y,ue=F-se;let xe=0,et=Y,Ce=0,Le=se,nt=0,ct=ae,Lt=0,Zt=ue;if(v.content&&A){const Qt=v.content,Pr=Qt[2]-Qt[0],Fr=Qt[3]-Qt[1];(v.textFitWidth||v.textFitHeight)&&(k=Io(o)),xe=Tg(N,0,Qt[0]),Ce=Tg(G,0,Qt[1]),et=Tg(N,Qt[0],Qt[2]),Le=Tg(G,Qt[1],Qt[3]),nt=Qt[0]-xe,Lt=Qt[1]-Ce,ct=Pr-et,Zt=Fr-Le}const jt=k.x1,nr=k.y1,vr=k.x2-jt,sr=k.y2-nr,Kt=(Qt,Pr,Fr,Mr)=>{const Cr=Pg(Qt.stretch-xe,et,vr,jt),Yr=Lg(Qt.fixed-nt,ct,Qt.stretch,Y),ti=Pg(Pr.stretch-Ce,Le,sr,nr),Vn=Lg(Pr.fixed-Lt,Zt,Pr.stretch,se),fs=Pg(Fr.stretch-xe,et,vr,jt),Xa=Lg(Fr.fixed-nt,ct,Fr.stretch,Y),vo=Pg(Mr.stretch-Ce,Le,sr,nr),ds=Lg(Mr.fixed-Lt,Zt,Mr.stretch,se),cs=new x(Cr,ti),bi=new x(fs,ti),zs=new x(fs,vo),ro=new x(Cr,vo),es=new x(Yr/_,Vn/_),gc=new x(Xa/_,ds/_),Ya=t*Math.PI/180;if(Ya){const ra=Math.sin(Ya),Ts=Math.cos(Ya),_o=[Ts,-ra,ra,Ts];cs._matMult(_o),bi._matMult(_o),ro._matMult(_o),zs._matMult(_o)}const yc=Qt.stretch+Qt.fixed,$A=Pr.stretch+Pr.fixed;return{tl:cs,tr:bi,bl:ro,br:zs,tex:{x:v.paddedRect.x+1+yc,y:v.paddedRect.y+1+$A,w:Fr.stretch+Fr.fixed-yc,h:Mr.stretch+Mr.fixed-$A},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:es,pixelOffsetBR:gc,minFontScaleX:ct/_/vr,minFontScaleY:Zt/_/sr,isSDF:s}};if(A&&(v.stretchX||v.stretchY)){const Qt=mb(N,ae,Y),Pr=mb(G,ue,se);for(let Fr=0;Fr<Qt.length-1;Fr++){const Mr=Qt[Fr],Cr=Qt[Fr+1];for(let Yr=0;Yr<Pr.length-1;Yr++)p.push(Kt(Mr,Pr[Yr],Cr,Pr[Yr+1]))}}else p.push(Kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:F+1}));return p}function Tg(o,t,s){let A=0;for(const p of o)A+=Math.max(t,Math.min(s,p[1]))-Math.max(t,Math.min(s,p[0]));return A}function mb(o,t,s){const A=[{fixed:-1,stretch:0}];for(const[p,v]of o){const _=A[A.length-1];A.push({fixed:p-_.stretch,stretch:_.stretch}),A.push({fixed:p-_.stretch,stretch:_.stretch+(v-p)})}return A.push({fixed:t+1,stretch:s}),A}function Pg(o,t,s,A){return o/t*s+A}function Lg(o,t,s,A){return o-t*s/A}qe("Anchor",Zh);class Mg{constructor(t,s,A,p,v,_,B,F,k,N){var G;if(this.boxStartIndex=t.length,k){let Z=_.top,Y=_.bottom;const se=_.collisionPadding;se&&(Z-=se[1],Y+=se[3]);let ae=Y-Z;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{const Z=!((G=_.image)===null||G===void 0)&&G.content&&(_.image.textFitWidth||_.image.textFitHeight)?Io(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};Z.y1=Z.y1*B-F[0],Z.y2=Z.y2*B+F[2],Z.x1=Z.x1*B-F[3],Z.x2=Z.x2*B+F[1];const Y=_.collisionPadding;if(Y&&(Z.x1-=Y[0]*B,Z.y1-=Y[1]*B,Z.x2+=Y[2]*B,Z.y2+=Y[3]*B),N){const se=new x(Z.x1,Z.y1),ae=new x(Z.x2,Z.y1),ue=new x(Z.x1,Z.y2),xe=new x(Z.x2,Z.y2),et=N*Math.PI/180;se._rotate(et),ae._rotate(et),ue._rotate(et),xe._rotate(et),Z.x1=Math.min(se.x,ae.x,ue.x,xe.x),Z.x2=Math.max(se.x,ae.x,ue.x,xe.x),Z.y1=Math.min(se.y,ae.y,ue.y,xe.y),Z.y2=Math.max(se.y,ae.y,ue.y,xe.y)}t.emplaceBack(s.x,s.y,Z.x1,Z.y1,Z.x2,Z.y2,A,p,v)}this.boxEndIndex=t.length}}class BT{constructor(t=[],s=(A,p)=>A<p?-1:A>p?1:0){if(this.data=t,this.length=this.data.length,this.compare=s,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:s,compare:A}=this,p=s[t];for(;t>0;){const v=t-1>>1,_=s[v];if(A(p,_)>=0)break;s[t]=_,t=v}s[t]=p}_down(t){const{data:s,compare:A}=this,p=this.length>>1,v=s[t];for(;t<p;){let _=1+(t<<1);const B=_+1;if(B<this.length&&A(s[B],s[_])<0&&(_=B),A(s[_],v)>=0)break;s[t]=s[_],t=_}s[t]=v}}function CT(o,t=1,s=!1){const A=Of.fromPoints(o[0]),p=Math.min(A.width(),A.height());let v=p/2;const _=new BT([],ST),{minX:B,minY:F,maxX:k,maxY:N}=A;if(p===0)return new x(B,F);for(let Y=B;Y<k;Y+=p)for(let se=F;se<N;se+=p)_.push(new kd(Y+v,se+v,v,o));let G=(function(Y){let se=0,ae=0,ue=0;const xe=Y[0];for(let et=0,Ce=xe.length,Le=Ce-1;et<Ce;Le=et++){const nt=xe[et],ct=xe[Le],Lt=nt.x*ct.y-ct.x*nt.y;ae+=(nt.x+ct.x)*Lt,ue+=(nt.y+ct.y)*Lt,se+=3*Lt}return new kd(ae/se,ue/se,0,Y)})(o),Z=_.length;for(;_.length;){const Y=_.pop();(Y.d>G.d||!G.d)&&(G=Y,s&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,Z)),Y.max-G.d<=t||(v=Y.h/2,_.push(new kd(Y.p.x-v,Y.p.y-v,v,o)),_.push(new kd(Y.p.x+v,Y.p.y-v,v,o)),_.push(new kd(Y.p.x-v,Y.p.y+v,v,o)),_.push(new kd(Y.p.x+v,Y.p.y+v,v,o)),Z+=4)}return s&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${G.d}`)),G.p}function ST(o,t){return t.max-o.max}function kd(o,t,s,A){this.p=new x(o,t),this.h=s,this.d=(function(p,v){let _=!1,B=1/0;for(let F=0;F<v.length;F++){const k=v[F];for(let N=0,G=k.length,Z=G-1;N<G;Z=N++){const Y=k[N],se=k[Z];Y.y>p.y!=se.y>p.y&&p.x<(se.x-Y.x)*(p.y-Y.y)/(se.y-Y.y)+Y.x&&(_=!_),B=Math.min(B,Sf(p,Y,se))}}return(_?1:-1)*Math.sqrt(B)})(this.p,A),this.max=this.d+this.h*Math.SQRT2}var Za;m.aQ=void 0,(Za=m.aQ||(m.aQ={}))[Za.center=1]="center",Za[Za.left=2]="left",Za[Za.right=3]="right",Za[Za.top=4]="top",Za[Za.bottom=5]="bottom",Za[Za["top-left"]=6]="top-left",Za[Za["top-right"]=7]="top-right",Za[Za["bottom-left"]=8]="bottom-left",Za[Za["bottom-right"]=9]="bottom-right";const Mv=Number.POSITIVE_INFINITY;function gb(o,t){return t[1]!==Mv?(function(s,A,p){let v=0,_=0;switch(A=Math.abs(A),p=Math.abs(p),s){case"top-right":case"top-left":case"top":_=p-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-p}switch(s){case"top-right":case"bottom-right":case"right":v=-A;break;case"top-left":case"bottom-left":case"left":v=A}return[v,_]})(o,t[0],t[1]):(function(s,A){let p=0,v=0;A<0&&(A=0);const _=A/Math.SQRT2;switch(s){case"top-right":case"top-left":v=_-7;break;case"bottom-right":case"bottom-left":v=7-_;break;case"bottom":v=7-A;break;case"top":v=A-7}switch(s){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=A;break;case"right":p=-A}return[p,v]})(o,t[0])}function yb(o,t,s){var A;const p=o.layout,v=(A=p.get("text-variable-anchor-offset"))===null||A===void 0?void 0:A.evaluate(t,{},s);if(v){const B=v.values,F=[];for(let k=0;k<B.length;k+=2){const N=F[k]=B[k],G=B[k+1].map((Z=>Z*Os));N.startsWith("top")?G[1]-=7:N.startsWith("bottom")&&(G[1]+=7),F[k+1]=G}return new $i(F)}const _=p.get("text-variable-anchor");if(_){let B;B=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(t,{},s)*Os,Mv]:p.get("text-offset").evaluate(t,{},s).map((k=>k*Os));const F=[];for(const k of _)F.push(k,gb(k,B));return new $i(F)}return null}function kv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ET(o,t,s,A,p,v,_,B,F,k,N,G){let Z=v.textMaxSize.evaluate(t,{});Z===void 0&&(Z=_);const Y=o.layers[0].layout,se=Y.get("icon-offset").evaluate(t,{},N),ae=_b(s.horizontal),ue=_/24,xe=o.tilePixelRatio*ue,et=o.tilePixelRatio*Z/24,Ce=o.tilePixelRatio*B,Le=o.tilePixelRatio*Y.get("symbol-spacing"),nt=Y.get("text-padding")*o.tilePixelRatio,ct=(function(Fr,Mr,Cr,Yr=1){const ti=Fr.get("icon-padding").evaluate(Mr,{},Cr),Vn=ti&&ti.values;return[Vn[0]*Yr,Vn[1]*Yr,Vn[2]*Yr,Vn[3]*Yr]})(Y,t,N,o.tilePixelRatio),Lt=Y.get("text-max-angle")/180*Math.PI,Zt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",jt=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",nr=Y.get("symbol-placement"),vr=Le/2,sr=Y.get("icon-text-fit");let Kt;A&&sr!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Kt=yi(A,s.vertical,sr,Y.get("icon-text-fit-padding"),se,ue)),ae&&(A=yi(A,ae,sr,Y.get("icon-text-fit-padding"),se,ue)));const Qt=N?G.line.getGranularityForZoomLevel(N.z):1,Pr=(Fr,Mr)=>{Mr.x<0||Mr.x>=Ie||Mr.y<0||Mr.y>=Ie||(function(Cr,Yr,ti,Vn,fs,Xa,vo,ds,cs,bi,zs,ro,es,gc,Ya,yc,$A,ra,Ts,_o,Hs,na,Sh,mu,tm){const Xh=Cr.addToLineVertexArray(Yr,ti);let zf,Ud,Dd,Rd,Bb=0,Cb=0,Sb=0,Eb=0,Hv=-1,jv=-1;const Eh={};let Fb=Gi("");if(Cr.allowVerticalPlacement&&Vn.vertical){const yl=ds.layout.get("text-rotate").evaluate(Hs,{},mu)+90;Dd=new Mg(cs,Yr,bi,zs,ro,Vn.vertical,es,gc,Ya,yl),vo&&(Rd=new Mg(cs,Yr,bi,zs,ro,vo,$A,ra,Ya,yl))}if(fs){const yl=ds.layout.get("icon-rotate").evaluate(Hs,{}),vA=ds.layout.get("icon-text-fit")!=="none",Hf=pb(fs,yl,Sh,vA),yu=vo?pb(vo,yl,Sh,vA):void 0;Ud=new Mg(cs,Yr,bi,zs,ro,fs,$A,ra,!1,yl),Bb=4*Hf.length;const jf=Cr.iconSizeData;let Gu=null;jf.kind==="source"?(Gu=[$a*ds.layout.get("icon-size").evaluate(Hs,{})],Gu[0]>Vu&&Br(`${Cr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):jf.kind==="composite"&&(Gu=[$a*na.compositeIconSizes[0].evaluate(Hs,{},mu),$a*na.compositeIconSizes[1].evaluate(Hs,{},mu)],(Gu[0]>Vu||Gu[1]>Vu)&&Br(`${Cr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Cr.addSymbols(Cr.icon,Hf,Gu,_o,Ts,Hs,m.aA.none,Yr,Xh.lineStartIndex,Xh.lineLength,-1,mu),Hv=Cr.icon.placedSymbolArray.length-1,yu&&(Cb=4*yu.length,Cr.addSymbols(Cr.icon,yu,Gu,_o,Ts,Hs,m.aA.vertical,Yr,Xh.lineStartIndex,Xh.lineLength,-1,mu),jv=Cr.icon.placedSymbolArray.length-1)}const Ib=Object.keys(Vn.horizontal);for(const yl of Ib){const vA=Vn.horizontal[yl];if(!zf){Fb=Gi(vA.text);const yu=ds.layout.get("text-rotate").evaluate(Hs,{},mu);zf=new Mg(cs,Yr,bi,zs,ro,vA,es,gc,Ya,yu)}const Hf=vA.positionedLines.length===1;if(Sb+=vb(Cr,Yr,vA,Xa,ds,Ya,Hs,yc,Xh,Vn.vertical?m.aA.horizontal:m.aA.horizontalOnly,Hf?Ib:[yl],Eh,Hv,na,mu),Hf)break}Vn.vertical&&(Eb+=vb(Cr,Yr,Vn.vertical,Xa,ds,Ya,Hs,yc,Xh,m.aA.vertical,["vertical"],Eh,jv,na,mu));const TT=zf?zf.boxStartIndex:Cr.collisionBoxArray.length,PT=zf?zf.boxEndIndex:Cr.collisionBoxArray.length,LT=Dd?Dd.boxStartIndex:Cr.collisionBoxArray.length,MT=Dd?Dd.boxEndIndex:Cr.collisionBoxArray.length,kT=Ud?Ud.boxStartIndex:Cr.collisionBoxArray.length,UT=Ud?Ud.boxEndIndex:Cr.collisionBoxArray.length,DT=Rd?Rd.boxStartIndex:Cr.collisionBoxArray.length,RT=Rd?Rd.boxEndIndex:Cr.collisionBoxArray.length;let gu=-1;const Ug=(yl,vA)=>yl&&yl.circleDiameter?Math.max(yl.circleDiameter,vA):vA;gu=Ug(zf,gu),gu=Ug(Dd,gu),gu=Ug(Ud,gu),gu=Ug(Rd,gu);const Tb=gu>-1?1:0;Tb&&(gu*=tm/Os),Cr.glyphOffsetArray.length>=Fd.MAX_GLYPHS&&Br("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Hs.sortKey!==void 0&&Cr.addToSortKeyRanges(Cr.symbolInstances.length,Hs.sortKey);const NT=yb(ds,Hs,mu),[QT,OT]=(function(yl,vA){const Hf=yl.length,yu=vA?.values;if(yu?.length>0)for(let jf=0;jf<yu.length;jf+=2){const Gu=yu[jf+1];yl.emplaceBack(m.aQ[yu[jf]],Gu[0],Gu[1])}return[Hf,yl.length]})(Cr.textAnchorOffsets,NT);Cr.symbolInstances.emplaceBack(Yr.x,Yr.y,Eh.right>=0?Eh.right:-1,Eh.center>=0?Eh.center:-1,Eh.left>=0?Eh.left:-1,Eh.vertical||-1,Hv,jv,Fb,TT,PT,LT,MT,kT,UT,DT,RT,bi,Sb,Eb,Bb,Cb,Tb,0,es,gu,QT,OT)})(o,Mr,Fr,s,A,p,Kt,o.layers[0],o.collisionBoxArray,t.index,t.sourceLayerIndex,o.index,xe,[nt,nt,nt,nt],Zt,F,Ce,ct,jt,se,t,v,k,N,_)};if(nr==="line")for(const Fr of ab(t.geometry,0,0,Ie,Ie)){const Mr=qA(Fr,Qt),Cr=bT(Mr,Le,Lt,s.vertical||ae,A,24,et,o.overscaling,Ie);for(const Yr of Cr)ae&&FT(o,ae.text,vr,Yr)||Pr(Mr,Yr)}else if(nr==="line-center"){for(const Fr of t.geometry)if(Fr.length>1){const Mr=qA(Fr,Qt),Cr=xT(Mr,Lt,s.vertical||ae,A,24,et);Cr&&Pr(Mr,Cr)}}else if(t.type==="Polygon")for(const Fr of Pa(t.geometry,0)){const Mr=CT(Fr,16);Pr(qA(Fr[0],Qt,!0),new Zh(Mr.x,Mr.y,0))}else if(t.type==="LineString")for(const Fr of t.geometry){const Mr=qA(Fr,Qt);Pr(Mr,new Zh(Mr[0].x,Mr[0].y,0))}else if(t.type==="Point")for(const Fr of t.geometry)for(const Mr of Fr)Pr([Mr],new Zh(Mr.x,Mr.y,0))}function vb(o,t,s,A,p,v,_,B,F,k,N,G,Z,Y,se){const ae=(function(et,Ce,Le,nt,ct,Lt,Zt,jt){const nr=nt.layout.get("text-rotate").evaluate(Lt,{})*Math.PI/180,vr=[];for(const sr of Ce.positionedLines)for(const Kt of sr.positionedGlyphs){if(!Kt.rect)continue;const Qt=Kt.rect||{};let Pr=4,Fr=!0,Mr=1,Cr=0;const Yr=(ct||jt)&&Kt.vertical,ti=Kt.metrics.advance*Kt.scale/2;if(jt&&Ce.verticalizable&&(Cr=sr.lineOffset/2-(Kt.imageName?-(Os-Kt.metrics.width*Kt.scale)/2:(Kt.scale-1)*Os)),Kt.imageName){const ra=Zt[Kt.imageName];Fr=ra.sdf,Mr=ra.pixelRatio,Pr=1/Mr}const Vn=ct?[Kt.x+ti,Kt.y]:[0,0];let fs=ct?[0,0]:[Kt.x+ti+Le[0],Kt.y+Le[1]-Cr],Xa=[0,0];Yr&&(Xa=fs,fs=[0,0]);const vo=Kt.metrics.isDoubleResolution?2:1,ds=(Kt.metrics.left-Pr)*Kt.scale-ti+fs[0],cs=(-Kt.metrics.top-Pr)*Kt.scale+fs[1],bi=ds+Qt.w/vo*Kt.scale/Mr,zs=cs+Qt.h/vo*Kt.scale/Mr,ro=new x(ds,cs),es=new x(bi,cs),gc=new x(ds,zs),Ya=new x(bi,zs);if(Yr){const ra=new x(-ti,ti- -17),Ts=-Math.PI/2,_o=12-ti,Hs=new x(22-_o,-(Kt.imageName?_o:0)),na=new x(...Xa);ro._rotateAround(Ts,ra)._add(Hs)._add(na),es._rotateAround(Ts,ra)._add(Hs)._add(na),gc._rotateAround(Ts,ra)._add(Hs)._add(na),Ya._rotateAround(Ts,ra)._add(Hs)._add(na)}if(nr){const ra=Math.sin(nr),Ts=Math.cos(nr),_o=[Ts,-ra,ra,Ts];ro._matMult(_o),es._matMult(_o),gc._matMult(_o),Ya._matMult(_o)}const yc=new x(0,0),$A=new x(0,0);vr.push({tl:ro,tr:es,bl:gc,br:Ya,tex:Qt,writingMode:Ce.writingMode,glyphOffset:Vn,sectionIndex:Kt.sectionIndex,isSDF:Fr,pixelOffsetTL:yc,pixelOffsetBR:$A,minFontScaleX:0,minFontScaleY:0})}return vr})(0,s,B,p,v,_,A,o.allowVerticalPlacement),ue=o.textSizeData;let xe=null;ue.kind==="source"?(xe=[$a*p.layout.get("text-size").evaluate(_,{})],xe[0]>Vu&&Br(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ue.kind==="composite"&&(xe=[$a*Y.compositeTextSizes[0].evaluate(_,{},se),$a*Y.compositeTextSizes[1].evaluate(_,{},se)],(xe[0]>Vu||xe[1]>Vu)&&Br(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,ae,xe,B,v,_,k,t,F.lineStartIndex,F.lineLength,Z,se);for(const et of N)G[et]=o.text.placedSymbolArray.length-1;return 4*ae.length}function _b(o){for(const t in o)return o[t];return null}function FT(o,t,s,A){const p=o.compareText;if(t in p){const v=p[t];for(let _=v.length-1;_>=0;_--)if(A.dist(v[_])<s)return!0}else p[t]=[];return p[t].push(A),!1}const wb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Uv{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,A]=new Uint8Array(t,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=A>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=wb[15&A];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(t,2,1),[B]=new Uint32Array(t,4,1);return new Uv(B,_,v,t)}constructor(t,s=64,A=Float64Array,p){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=A,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const v=wb.indexOf(this.ArrayType),_=2*t*this.ArrayType.BYTES_PER_ELEMENT,B=t*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-B%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${A}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+_+B+F),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=t)}add(t,s){const A=this._pos>>1;return this.ids[A]=A,this.coords[this._pos++]=t,this.coords[this._pos++]=s,A}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Dv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,s,A,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:B}=this,F=[0,v.length-1,0],k=[];for(;F.length;){const N=F.pop()||0,G=F.pop()||0,Z=F.pop()||0;if(G-Z<=B){for(let ue=Z;ue<=G;ue++){const xe=_[2*ue],et=_[2*ue+1];xe>=t&&xe<=A&&et>=s&&et<=p&&k.push(v[ue])}continue}const Y=Z+G>>1,se=_[2*Y],ae=_[2*Y+1];se>=t&&se<=A&&ae>=s&&ae<=p&&k.push(v[Y]),(N===0?t<=se:s<=ae)&&(F.push(Z),F.push(Y-1),F.push(1-N)),(N===0?A>=se:p>=ae)&&(F.push(Y+1),F.push(G),F.push(1-N))}return k}within(t,s,A){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:_}=this,B=[0,p.length-1,0],F=[],k=A*A;for(;B.length;){const N=B.pop()||0,G=B.pop()||0,Z=B.pop()||0;if(G-Z<=_){for(let ue=Z;ue<=G;ue++)bb(v[2*ue],v[2*ue+1],t,s)<=k&&F.push(p[ue]);continue}const Y=Z+G>>1,se=v[2*Y],ae=v[2*Y+1];bb(se,ae,t,s)<=k&&F.push(p[Y]),(N===0?t-A<=se:s-A<=ae)&&(B.push(Z),B.push(Y-1),B.push(1-N)),(N===0?t+A>=se:s+A>=ae)&&(B.push(Y+1),B.push(G),B.push(1-N))}return F}}function Dv(o,t,s,A,p,v){if(p-A<=s)return;const _=A+p>>1;xb(o,t,_,A,p,v),Dv(o,t,s,A,_-1,1-v),Dv(o,t,s,_+1,p,1-v)}function xb(o,t,s,A,p,v){for(;p>A;){if(p-A>600){const k=p-A+1,N=s-A+1,G=Math.log(k),Z=.5*Math.exp(2*G/3),Y=.5*Math.sqrt(G*Z*(k-Z)/k)*(N-k/2<0?-1:1);xb(o,t,s,Math.max(A,Math.floor(s-N*Z/k+Y)),Math.min(p,Math.floor(s+(k-N)*Z/k+Y)),v)}const _=t[2*s+v];let B=A,F=p;for(Jp(o,t,A,s),t[2*p+v]>_&&Jp(o,t,A,p);B<F;){for(Jp(o,t,B,F),B++,F--;t[2*B+v]<_;)B++;for(;t[2*F+v]>_;)F--}t[2*A+v]===_?Jp(o,t,A,F):(F++,Jp(o,t,F,p)),F<=s&&(A=F+1),s<=F&&(p=F-1)}}function Jp(o,t,s,A){Rv(o,s,A),Rv(t,2*s,2*A),Rv(t,2*s+1,2*A+1)}function Rv(o,t,s){const A=o[t];o[t]=o[s],o[s]=A}function bb(o,t,s,A){const p=o-s,v=t-A;return p*p+v*v}var Nv;m.cI=void 0,(Nv=m.cI||(m.cI={})).create="create",Nv.load="load",Nv.fullLoad="fullLoad";let kg=null,em=[];const Qv=1e3/60,Ov="loadTime",zv="fullLoadTime",IT={mark(o){performance.mark(o)},frame(o){const t=o;kg!=null&&em.push(t-kg),kg=t},clearMetrics(){kg=null,em=[],performance.clearMeasures(Ov),performance.clearMeasures(zv);for(const o in m.cI)performance.clearMarks(m.cI[o])},getPerformanceMetrics(){performance.measure(Ov,m.cI.create,m.cI.load),performance.measure(zv,m.cI.create,m.cI.fullLoad);const o=performance.getEntriesByName(Ov)[0].duration,t=performance.getEntriesByName(zv)[0].duration,s=em.length,A=1/(em.reduce(((v,_)=>v+_),0)/s/1e3),p=em.filter((v=>v>Qv)).reduce(((v,_)=>v+(_-Qv)/Qv),0);return{loadTime:o,fullLoadTime:t,fps:A,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};m.$=O,m.A=ce,m.B=Te,m.C=q,m.D=mr,m.E=Ir,m.F=function([o,t,s]){return t+=90,t*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(t)*Math.sin(s),y:o*Math.sin(t)*Math.sin(s),z:o*Math.cos(s)}},m.G=xr,m.H=Lr,m.I=Nr,m.J=pe,m.K=function(o){if(kr==null){const t=o.navigator?o.navigator.userAgent:null;kr=!!o.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return kr},m.L=class{constructor(o,t){this.target=o,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new V4((()=>this.process())),this.subscription=Dr(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=yr(self)?o:window}registerMessageHandler(o,t){this.messageHandlers[o]=t}unregisterMessageHandler(o){delete this.messageHandlers[o]}sendAsync(o,t){return new Promise(((s,A)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=t?Dr(t.signal,"abort",(()=>{v?.unsubscribe(),delete this.resolveRejects[p];const F={id:p,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)}),G4):null;this.resolveRejects[p]={resolve:F=>{v?.unsubscribe(),s(F)},reject:F=>{v?.unsubscribe(),A(F)}};const _=[],B=Object.assign(Object.assign({},o),{id:p,sourceMapId:this.mapId,origin:location.origin,data:It(o.data,_)});this.target.postMessage(B,{transfer:_})}))}receive(o){const t=o.data,s=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[s];const A=this.abortControllers[s];return delete this.abortControllers[s],void(A&&A.abort())}if(yr(self)||t.mustQueue)return this.tasks[s]=t,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,t)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),t=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(o,t)}processTask(o,t){return a(this,void 0,void 0,(function*(){if(t.type==="<response>"){const p=this.resolveRejects[o];return delete this.resolveRejects[o],p?void(t.error?p.reject($t(t.error)):p.resolve($t(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=$t(t.data),A=new AbortController;this.abortControllers[o]=A;try{const p=yield this.messageHandlers[t.type](t.sourceMapId,s,A);this.completeTask(o,null,p)}catch(p){this.completeTask(o,p)}}))}completeTask(o,t,s){const A=[];delete this.abortControllers[o];const p={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?It(t):null,data:It(s,A)};this.target.postMessage(p,{transfer:A})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.M=gt,m.N=function(){var o=new ce(16);return ce!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},m.O=function(o,t,s){var A,p,v,_,B,F,k,N,G,Z,Y,se,ae=s[0],ue=s[1],xe=s[2];return t===o?(o[12]=t[0]*ae+t[4]*ue+t[8]*xe+t[12],o[13]=t[1]*ae+t[5]*ue+t[9]*xe+t[13],o[14]=t[2]*ae+t[6]*ue+t[10]*xe+t[14],o[15]=t[3]*ae+t[7]*ue+t[11]*xe+t[15]):(p=t[1],v=t[2],_=t[3],B=t[4],F=t[5],k=t[6],N=t[7],G=t[8],Z=t[9],Y=t[10],se=t[11],o[0]=A=t[0],o[1]=p,o[2]=v,o[3]=_,o[4]=B,o[5]=F,o[6]=k,o[7]=N,o[8]=G,o[9]=Z,o[10]=Y,o[11]=se,o[12]=A*ae+B*ue+G*xe+t[12],o[13]=p*ae+F*ue+Z*xe+t[13],o[14]=v*ae+k*ue+Y*xe+t[14],o[15]=_*ae+N*ue+se*xe+t[15]),o},m.P=x,m.Q=function(o,t,s){var A=s[0],p=s[1],v=s[2];return o[0]=t[0]*A,o[1]=t[1]*A,o[2]=t[2]*A,o[3]=t[3]*A,o[4]=t[4]*p,o[5]=t[5]*p,o[6]=t[6]*p,o[7]=t[7]*p,o[8]=t[8]*v,o[9]=t[9]*v,o[10]=t[10]*v,o[11]=t[11]*v,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o},m.R=Xo,m.S=function(o,t,s){var A=t[0],p=t[1],v=t[2],_=t[3],B=t[4],F=t[5],k=t[6],N=t[7],G=t[8],Z=t[9],Y=t[10],se=t[11],ae=t[12],ue=t[13],xe=t[14],et=t[15],Ce=s[0],Le=s[1],nt=s[2],ct=s[3];return o[0]=Ce*A+Le*B+nt*G+ct*ae,o[1]=Ce*p+Le*F+nt*Z+ct*ue,o[2]=Ce*v+Le*k+nt*Y+ct*xe,o[3]=Ce*_+Le*N+nt*se+ct*et,o[4]=(Ce=s[4])*A+(Le=s[5])*B+(nt=s[6])*G+(ct=s[7])*ae,o[5]=Ce*p+Le*F+nt*Z+ct*ue,o[6]=Ce*v+Le*k+nt*Y+ct*xe,o[7]=Ce*_+Le*N+nt*se+ct*et,o[8]=(Ce=s[8])*A+(Le=s[9])*B+(nt=s[10])*G+(ct=s[11])*ae,o[9]=Ce*p+Le*F+nt*Z+ct*ue,o[10]=Ce*v+Le*k+nt*Y+ct*xe,o[11]=Ce*_+Le*N+nt*se+ct*et,o[12]=(Ce=s[12])*A+(Le=s[13])*B+(nt=s[14])*G+(ct=s[15])*ae,o[13]=Ce*p+Le*F+nt*Z+ct*ue,o[14]=Ce*v+Le*k+nt*Y+ct*xe,o[15]=Ce*_+Le*N+nt*se+ct*et,o},m.T=VA,m.U=function(o,t){const s={};for(let A=0;A<t.length;A++){const p=t[A];p in o&&(s[p]=o[p])}return s},m.V=$h,m.W=tt,m.X=_x,m.Y=vx,m.Z=Ke,m._=a,m.a=ye,m.a$=bx,m.a0=W,m.a1=$r,m.a2=gA,m.a3=xx,m.a4=xg,m.a5=Ie,m.a6=function(o,t,s){if(!o)return t||{};if(!t)return o||{};const A=Sx(o),p=Sx(t);(function(_,B){B.removeAll&&(_.add.clear(),_.update.clear(),_.remove.clear(),B.remove.clear());for(const F of B.remove)_.add.delete(F),_.update.delete(F);for(const[F,k]of B.update){const N=_.update.get(F);N&&(B.update.set(F,K4(N,k)),_.update.delete(F))}})(A,p);const v={};if((A.removeAll||p.removeAll)&&(v.removeAll=!0),v.remove=new Set([...A.remove,...p.remove]),v.add=new Map([...A.add,...p.add]),v.update=new Map([...A.update,...p.update]),v.remove.size&&v.add.size)for(const _ of v.add.keys())v.remove.delete(_);return(function(_){const B={};return _.removeAll&&(B.removeAll=_.removeAll),_.remove&&(B.remove=Array.from(_.remove)),_.add&&(B.add=Array.from(_.add.values())),_.update&&(B.update=Array.from(_.update.values())),B})(v)},m.a7=function(o,t){if(o==null||o.type==null)return!0;if(o.type==="Feature")return Wp(o,t)!=null;if(o.type==="FeatureCollection"){const s=new Set;for(const A of o.features){const p=Wp(A,t);if(p==null||s.has(p))return!1;s.add(p)}return!0}return!1},m.a8=function(o,t){const s=new Map;if(!(o==null||o.type==null))if(o.type==="Feature")s.set(Wp(o,t),o);else for(const A of o.features)s.set(Wp(A,t),A);return s},m.a9=function(o,t,s){var A,p;if(t.removeAll)o.clear();else if(t.remove)for(const v of t.remove)o.delete(v);if(t.add)for(const v of t.add){const _=Wp(v,s);_!=null&&o.set(_,v)}if(t.update)for(const v of t.update){let _=o.get(v.id);if(!_)continue;const B=!!v.newGeometry,F=v.removeAllProperties||((A=v.removeProperties)===null||A===void 0?void 0:A.length)>0||((p=v.addOrUpdateProperties)===null||p===void 0?void 0:p.length)>0;if((B||F)&&(_=Object.assign({},_),o.set(v.id,_),B&&(_.geometry=v.newGeometry),F)){if(_.properties=v.removeAllProperties?{}:Object.assign({},_.properties||{}),v.removeProperties)for(const k of v.removeProperties)delete _.properties[k];if(v.addOrUpdateProperties)for(const{key:k,value:N}of v.addOrUpdateProperties)_.properties[k]=N}}},m.aB=function(o,{uSize:t,uSizeT:s},{lowerSize:A,upperSize:p}){return o.kind==="source"?A/$a:o.kind==="composite"?xr.number(A/$a,p/$a,s):t},m.aC=function(o,t){var s=t[0],A=t[1],p=t[2],v=t[3],_=t[4],B=t[5],F=t[6],k=t[7],N=t[8],G=t[9],Z=t[10],Y=t[11],se=t[12],ae=t[13],ue=t[14],xe=t[15],et=s*B-A*_,Ce=s*F-p*_,Le=s*k-v*_,nt=A*F-p*B,ct=A*k-v*B,Lt=p*k-v*F,Zt=N*ae-G*se,jt=N*ue-Z*se,nr=N*xe-Y*se,vr=G*ue-Z*ae,sr=G*xe-Y*ae,Kt=Z*xe-Y*ue,Qt=et*Kt-Ce*sr+Le*vr+nt*nr-ct*jt+Lt*Zt;return Qt?(o[0]=(B*Kt-F*sr+k*vr)*(Qt=1/Qt),o[1]=(p*sr-A*Kt-v*vr)*Qt,o[2]=(ae*Lt-ue*ct+xe*nt)*Qt,o[3]=(Z*ct-G*Lt-Y*nt)*Qt,o[4]=(F*nr-_*Kt-k*jt)*Qt,o[5]=(s*Kt-p*nr+v*jt)*Qt,o[6]=(ue*Le-se*Lt-xe*Ce)*Qt,o[7]=(N*Lt-Z*Le+Y*Ce)*Qt,o[8]=(_*sr-B*nr+k*Zt)*Qt,o[9]=(A*nr-s*sr-v*Zt)*Qt,o[10]=(se*ct-ae*Le+xe*et)*Qt,o[11]=(G*Le-N*ct-Y*et)*Qt,o[12]=(B*jt-_*vr-F*Zt)*Qt,o[13]=(s*vr-A*jt+p*Zt)*Qt,o[14]=(ae*Ce-se*nt-ue*et)*Qt,o[15]=(N*nt-G*Ce+Z*et)*Qt,o):null},m.aD=At,m.aE=function(o){var t=o[0],s=o[1];return Math.sqrt(t*t+s*s)},m.aF=function(o){return o[0]=0,o[1]=0,o},m.aG=function(o,t,s){return o[0]=t[0]*s,o[1]=t[1]*s,o},m.aH=uv,m.aI=Fe,m.aJ=function(o,t,s,A){const p=t.y-o.y,v=t.x-o.x,_=A.y-s.y,B=A.x-s.x,F=_*v-B*p;if(F===0)return null;const k=(B*(o.y-s.y)-_*(o.x-s.x))/F;return new x(o.x+k*v,o.y+k*p)},m.aK=ab,m.aL=lh,m.aM=function(o){let t=1/0,s=1/0,A=-1/0,p=-1/0;for(const v of o)t=Math.min(t,v.x),s=Math.min(s,v.y),A=Math.max(A,v.x),p=Math.max(p,v.y);return[t,s,A,p]},m.aN=Os,m.aO=yt,m.aP=function(o,t,s,A,p=!1){if(!s[0]&&!s[1])return[0,0];const v=p?A==="map"?-o.bearingInRadians:0:A==="viewport"?o.bearingInRadians:0;if(v){const _=Math.sin(v),B=Math.cos(v);s=[s[0]*B-s[1]*_,s[0]*_+s[1]*B]}return[p?s[0]:yt(t,s[0],o.zoom),p?s[1]:yt(t,s[1],o.zoom)]},m.aR=Av,m.aS=kv,m.aT=Rt,m.aU=Uv,m.aV=jn,m.aW=mh,m.aX=J,m.aY=rr,m.aZ=Ut,m.a_=un,m.aa=Yp,m.ab=$p,m.ac=Of,m.ad=25,m.ae=mv,m.af=o=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((s=>{t.onloadstart=()=>{s(t)};for(const A of o){const p=window.document.createElement("source");St(A)||(t.crossOrigin="Anonymous"),p.src=A,t.appendChild(p)}}))},m.ag=Xt,m.ah=function(){return Et++},m.ai=r,m.aj=Fd,m.ak=cc,m.al=jA,m.am=Fx,m.an=function(o){const t={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,A,p,v)=>{const _=p||v;return t[A]=!_||_.toLowerCase(),""})),t["max-age"]){const s=parseInt(t["max-age"],10);isNaN(s)?delete t["max-age"]:t["max-age"]=s}return t},m.ao=at,m.ap=85.051129,m.aq=Qn,m.ar=function(o){return Math.pow(2,o)},m.as=Se,m.at=wx,m.au=function(o){return Math.log(o)/Math.LN2},m.av=function(o){var t=o[0],s=o[1];return t*t+s*s},m.aw=function(o){if(!o.length)return new Set;const t=Math.max(...o.map((F=>F.canonical.z)));let s=1/0,A=-1/0,p=1/0,v=-1/0;const _=[];for(const F of o){const{x:k,y:N,z:G}=F.canonical,Z=Math.pow(2,t-G),Y=k*Z,se=N*Z;_.push({id:F,x:Y,y:se}),Y<s&&(s=Y),Y>A&&(A=Y),se<p&&(p=se),se>v&&(v=se)}const B=new Set;for(const F of _)F.x!==s&&F.x!==A&&F.y!==p&&F.y!==v||B.add(F.id);return B},m.ax=function(o,t){const s=Math.abs(2*o.wrap)-+(o.wrap<0),A=Math.abs(2*t.wrap)-+(t.wrap<0);return o.overscaledZ-t.overscaledZ||A-s||t.canonical.y-o.canonical.y||t.canonical.x-o.canonical.x},m.ay=class{constructor(o,t){this.max=o,this.onRemove=t,this.reset()}reset(){for(const o in this.data)for(const t of this.data[o])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(o,t,s){const A=o.wrapped().key;this.data[A]===void 0&&(this.data[A]=[]);const p={value:t,timeout:void 0};if(s!==void 0&&(p.timeout=setTimeout((()=>{this.remove(o,p)}),s)),this.data[A].push(p),this.order.push(A),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const t=this.data[o].shift();return t.timeout&&clearTimeout(t.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),t.value}getByKey(o){const t=this.data[o];return t?t[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,t){if(!this.has(o))return this;const s=o.wrapped().key,A=t===void 0?0:this.data[s].indexOf(t),p=this.data[s][A];return this.data[s].splice(A,1),p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.onRemove(p.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(o){const t=[];for(const s in this.data)for(const A of this.data[s])o(A.value)||t.push(A);for(const s of t)this.remove(s.value.tileID,s)}},m.az=function(o,t){let s=0,A=0;if(o.kind==="constant")A=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:_}=o,B=p?at(Vt.interpolationFactor(p,t,v,_),0,1):0;o.kind==="camera"?A=xr.number(o.minSize,o.maxSize,B):s=B}return{uSizeT:s,uSize:A}},m.b=qr,m.b$=class extends mo{constructor(o,t){super(o,t),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},m.b0=Ge,m.b1=be,m.b2=function(o){var t=new ce(3);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t},m.b3=function(o,t,s){return o[0]=t[0]-s[0],o[1]=t[1]-s[1],o[2]=t[2]-s[2],o},m.b4=function(o,t){var s=t[0],A=t[1],p=t[2],v=s*s+A*A+p*p;return v>0&&(v=1/Math.sqrt(v)),o[0]=t[0]*v,o[1]=t[1]*v,o[2]=t[2]*v,o},m.b5=le,m.b6=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]},m.b7=function(o,t,s){return o[0]=t[0]*s[0],o[1]=t[1]*s[1],o[2]=t[2]*s[2],o[3]=t[3]*s[3],o},m.b8=Ze,m.b9=function(o,t,s){const A=t[0]*s[0]+t[1]*s[1]+t[2]*s[2];return A===0?null:(-(o[0]*s[0]+o[1]*s[1]+o[2]*s[2])-s[3])/A},m.bA=function(){return new Float64Array(3)},m.bB=function(o,t,s,A){return o[0]=t[0]+s[0]*A,o[1]=t[1]+s[1]*A,o[2]=t[2]+s[2]*A,o},m.bC=ut,m.bD=function(o,t,s){var A=s[0],p=s[1],v=s[2],_=s[3],B=t[0],F=t[1],k=t[2],N=p*k-v*F,G=v*B-A*k,Z=A*F-p*B;return o[0]=B+_*(N+=N)+p*(Z+=Z)-v*(G+=G),o[1]=F+_*G+v*N-A*Z,o[2]=k+_*Z+A*G-p*N,o},m.bE=function(o,t,s){const A=(function(F){var k=F[3],N=F[4],G=F[5],Z=F[6],Y=F[7],se=F[8];return F[0]*(se*N-G*Y)+F[1]*(-se*k+G*Z)+F[2]*(Y*k-N*Z)})([o[0],o[1],o[2],t[0],t[1],t[2],s[0],s[1],s[2]]);if(A===0)return null;const p=le([],[t[0],t[1],t[2]],[s[0],s[1],s[2]]),v=le([],[s[0],s[1],s[2]],[o[0],o[1],o[2]]),_=le([],[o[0],o[1],o[2]],[t[0],t[1],t[2]]),B=Ge([],p,-o[3]);return be(B,B,Ge([],v,-t[3])),be(B,B,Ge([],_,-s[3])),Ge(B,B,1/A),B},m.bF=pv,m.bG=function(){return new Float64Array(4)},m.bH=function(o,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[0]*Math.cos(A)-p[1]*Math.sin(A),v[1]=p[0]*Math.sin(A)+p[1]*Math.cos(A),v[2]=p[2],o[0]=v[0]+s[0],o[1]=v[1]+s[1],o[2]=v[2]+s[2],o},m.bI=function(o,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[0],v[1]=p[1]*Math.cos(A)-p[2]*Math.sin(A),v[2]=p[1]*Math.sin(A)+p[2]*Math.cos(A),o[0]=v[0]+s[0],o[1]=v[1]+s[1],o[2]=v[2]+s[2],o},m.bJ=function(o,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[2]*Math.sin(A)+p[0]*Math.cos(A),v[1]=p[1],v[2]=p[2]*Math.cos(A)-p[0]*Math.sin(A),o[0]=v[0]+s[0],o[1]=v[1]+s[1],o[2]=v[2]+s[2],o},m.bK=function(o,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[0],_=t[1],B=t[2],F=t[3],k=t[8],N=t[9],G=t[10],Z=t[11];return t!==o&&(o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=v*p-k*A,o[1]=_*p-N*A,o[2]=B*p-G*A,o[3]=F*p-Z*A,o[8]=v*A+k*p,o[9]=_*A+N*p,o[10]=B*A+G*p,o[11]=F*A+Z*p,o},m.bL=function(o,t){const s=Ue(o,360),A=Ue(t,360),p=A-s,v=A>s?p-360:p+360;return Math.abs(p)<Math.abs(v)?p:v},m.bM=function(o){return o[0]=0,o[1]=0,o[2]=0,o},m.bN=function(o,t,s,A){const p=Math.sqrt(o*o+t*t),v=Math.sqrt(s*s+A*A);o/=p,t/=p,s/=v,A/=v;const _=Math.acos(o*s+t*A);return-t*s+o*A>0?_:-_},m.bO=function(o,t){const s=Ue(o,2*Math.PI),A=Ue(t,2*Math.PI);return Math.min(Math.abs(s-A),Math.abs(s-A+2*Math.PI),Math.abs(s-A-2*Math.PI))},m.bP=function(){const o={},t=dt.$version;for(const s in dt.$root){const A=dt.$root[s];if(A.required){let p=null;p=s==="version"?t:A.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},m.bQ=xt,m.bR=kt,m.bS=function o(t,s){if(Array.isArray(t)){if(!Array.isArray(s)||t.length!==s.length)return!1;for(let A=0;A<t.length;A++)if(!o(t[A],s[A]))return!1;return!0}if(typeof t=="object"&&t!==null&&s!==null){if(typeof s!="object"||Object.keys(t).length!==Object.keys(s).length)return!1;for(const A in t)if(!o(t[A],s[A]))return!1;return!0}return t===s},m.bT=function(o){o=o.slice();const t=Object.create(null);for(let s=0;s<o.length;s++)t[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=Rr(o[s],t[o[s].ref]));return o},m.bU=function(o,t){if(o.type==="custom")return new j4(o,t);switch(o.type){case"background":return new H4(o,t);case"circle":return new Ka(o,t);case"color-relief":return new mA(o,t);case"fill":return new Qp(o,t);case"fill-extrusion":return new to(o,t);case"heatmap":return new ag(o,t);case"hillshade":return new Lp(o,t);case"line":return new Hp(o,t);case"raster":return new Zs(o,t);case"symbol":return new wg(o,t)}},m.bV=o=>o.type==="raster",m.bW=lr,m.bX=function(o,t){if(!o)return[{command:"setStyle",args:[t]}];let s=[];try{if(!pr(o.version,t.version))return[{command:"setStyle",args:[t]}];pr(o.center,t.center)||s.push({command:"setCenter",args:[t.center]}),pr(o.state,t.state)||s.push({command:"setGlobalState",args:[t.state]}),pr(o.centerAltitude,t.centerAltitude)||s.push({command:"setCenterAltitude",args:[t.centerAltitude]}),pr(o.zoom,t.zoom)||s.push({command:"setZoom",args:[t.zoom]}),pr(o.bearing,t.bearing)||s.push({command:"setBearing",args:[t.bearing]}),pr(o.pitch,t.pitch)||s.push({command:"setPitch",args:[t.pitch]}),pr(o.roll,t.roll)||s.push({command:"setRoll",args:[t.roll]}),pr(o.sprite,t.sprite)||s.push({command:"setSprite",args:[t.sprite]}),pr(o.glyphs,t.glyphs)||s.push({command:"setGlyphs",args:[t.glyphs]}),pr(o.transition,t.transition)||s.push({command:"setTransition",args:[t.transition]}),pr(o.light,t.light)||s.push({command:"setLight",args:[t.light]}),pr(o.terrain,t.terrain)||s.push({command:"setTerrain",args:[t.terrain]}),pr(o.sky,t.sky)||s.push({command:"setSky",args:[t.sky]}),pr(o.projection,t.projection)||s.push({command:"setProjection",args:[t.projection]});const A={},p=[];(function(_,B,F,k){let N;for(N in B=B||{},_=_||{})Object.prototype.hasOwnProperty.call(_,N)&&(Object.prototype.hasOwnProperty.call(B,N)||_r(N,F,k));for(N in B)Object.prototype.hasOwnProperty.call(B,N)&&(Object.prototype.hasOwnProperty.call(_,N)?pr(_[N],B[N])||(_[N].type==="geojson"&&B[N].type==="geojson"&&bn(_,B,N)?Gr(F,{command:"setGeoJSONSourceData",args:[N,B[N].data]}):In(N,B,F,k)):Un(N,B,F))})(o.sources,t.sources,p,A);const v=[];o.layers&&o.layers.forEach((_=>{"source"in _&&A[_.source]?s.push({command:"removeLayer",args:[_.id]}):v.push(_)})),s=s.concat(p),(function(_,B,F){B=B||[];const k=(_=_||[]).map(Ui),N=B.map(Ui),G=_.reduce(oi,{}),Z=B.reduce(oi,{}),Y=k.slice(),se=Object.create(null);let ae,ue,xe,et,Ce;for(let Le=0,nt=0;Le<k.length;Le++)ae=k[Le],Object.prototype.hasOwnProperty.call(Z,ae)?nt++:(Gr(F,{command:"removeLayer",args:[ae]}),Y.splice(Y.indexOf(ae,nt),1));for(let Le=0,nt=0;Le<N.length;Le++)ae=N[N.length-1-Le],Y[Y.length-1-Le]!==ae&&(Object.prototype.hasOwnProperty.call(G,ae)?(Gr(F,{command:"removeLayer",args:[ae]}),Y.splice(Y.lastIndexOf(ae,Y.length-nt),1)):nt++,et=Y[Y.length-Le],Gr(F,{command:"addLayer",args:[Z[ae],et]}),Y.splice(Y.length-Le,0,ae),se[ae]=!0);for(let Le=0;Le<N.length;Le++)if(ae=N[Le],ue=G[ae],xe=Z[ae],!se[ae]&&!pr(ue,xe))if(pr(ue.source,xe.source)&&pr(ue["source-layer"],xe["source-layer"])&&pr(ue.type,xe.type)){for(Ce in wn(ue.layout,xe.layout,F,ae,null,"setLayoutProperty"),wn(ue.paint,xe.paint,F,ae,null,"setPaintProperty"),pr(ue.filter,xe.filter)||Gr(F,{command:"setFilter",args:[ae,xe.filter]}),pr(ue.minzoom,xe.minzoom)&&pr(ue.maxzoom,xe.maxzoom)||Gr(F,{command:"setLayerZoomRange",args:[ae,xe.minzoom,xe.maxzoom]}),ue)Object.prototype.hasOwnProperty.call(ue,Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?wn(ue[Ce],xe[Ce],F,ae,Ce.slice(6),"setPaintProperty"):pr(ue[Ce],xe[Ce])||Gr(F,{command:"setLayerProperty",args:[ae,Ce,xe[Ce]]}));for(Ce in xe)Object.prototype.hasOwnProperty.call(xe,Ce)&&!Object.prototype.hasOwnProperty.call(ue,Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?wn(ue[Ce],xe[Ce],F,ae,Ce.slice(6),"setPaintProperty"):pr(ue[Ce],xe[Ce])||Gr(F,{command:"setLayerProperty",args:[ae,Ce,xe[Ce]]}))}else Gr(F,{command:"removeLayer",args:[ae]}),et=Y[Y.lastIndexOf(ae)+1],Gr(F,{command:"addLayer",args:[xe,et]})})(v,t.layers,s)}catch(A){console.warn("Unable to compute style diff:",A),s=[{command:"setStyle",args:[t]}]}return s},m.bY=function(o){const t=[],s=o.id;return s===void 0&&t.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&t.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&t.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),t},m.bZ=Pt,m.b_=Wt,m.ba=Pe,m.bb=function(o,t,s){return o[0]=t[0]*s,o[1]=t[1]*s,o[2]=t[2]*s,o[3]=t[3]*s,o},m.bc=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]},m.bd=Cx,m.be=Id,m.bf=function(o,t,s,A,p){var v=1/Math.tan(t/2);if(o[0]=v/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=v,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0){var _=1/(A-p);o[10]=(p+A)*_,o[14]=2*p*A*_}else o[10]=-1,o[14]=-2*A;return o},m.bg=function(o){var t=new ce(16);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t},m.bh=function(o,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[0],_=t[1],B=t[2],F=t[3],k=t[4],N=t[5],G=t[6],Z=t[7];return t!==o&&(o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=v*p+k*A,o[1]=_*p+N*A,o[2]=B*p+G*A,o[3]=F*p+Z*A,o[4]=k*p-v*A,o[5]=N*p-_*A,o[6]=G*p-B*A,o[7]=Z*p-F*A,o},m.bi=function(o,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[4],_=t[5],B=t[6],F=t[7],k=t[8],N=t[9],G=t[10],Z=t[11];return t!==o&&(o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[4]=v*p+k*A,o[5]=_*p+N*A,o[6]=B*p+G*A,o[7]=F*p+Z*A,o[8]=k*p-v*A,o[9]=N*p-_*A,o[10]=G*p-B*A,o[11]=Z*p-F*A,o},m.bj=function(){const o=new Float32Array(16);return Se(o),o},m.bk=function(){const o=new Float64Array(16);return Se(o),o},m.bl=function(){return new Float64Array(16)},m.bm=function(o,t,s){const A=new Float64Array(4);return ut(A,o,t-90,s),A},m.bn=function(o,t,s,A){var p,v,_,B,F,k=t[0],N=t[1],G=t[2],Z=t[3],Y=s[0],se=s[1],ae=s[2],ue=s[3];return(v=k*Y+N*se+G*ae+Z*ue)<0&&(v=-v,Y=-Y,se=-se,ae=-ae,ue=-ue),1-v>ne?(p=Math.acos(v),_=Math.sin(p),B=Math.sin((1-A)*p)/_,F=Math.sin(A*p)/_):(B=1-A,F=A),o[0]=B*k+F*Y,o[1]=B*N+F*se,o[2]=B*G+F*ae,o[3]=B*Z+F*ue,o},m.bo=function(o){const t=new Float64Array(9);(function(v,_){var B=_[0],F=_[1],k=_[2],N=_[3],G=B+B,Z=F+F,Y=k+k,se=B*G,ae=F*G,ue=F*Z,xe=k*G,et=k*Z,Ce=k*Y,Le=N*G,nt=N*Z,ct=N*Y;v[0]=1-ue-Ce,v[3]=ae-ct,v[6]=xe+nt,v[1]=ae+ct,v[4]=1-se-Ce,v[7]=et-Le,v[2]=xe-nt,v[5]=et+Le,v[8]=1-se-ue})(t,o);const s=un(-Math.asin(at(t[2],-1,1)));let A,p;return Math.hypot(t[5],t[8])<.001?(A=0,p=-un(Math.atan2(t[3],t[4]))):(A=un(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),p=un(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:A,pitch:s+90,bearing:p}},m.bp=function(o,t){return o.roll==t.roll&&o.pitch==t.pitch&&o.bearing==t.bearing},m.bq=on,m.br=Ac,m.bs=dc,m.bt=zu,m.bu=fc,m.bv=ie,m.bw=Ee,m.bx=vs,m.by=function(o,t,s,A,p){return ie(A,p,at((o-t)/(s-t),0,1))},m.bz=Ue,m.c=$e,m.c$=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},m.c0=zA,m.c1=class extends mo{constructor(o,t){super(o,t),this.current=Ru}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let t=1;t<16;t++)if(o[t]!==this.current[t]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},m.c2=fA,m.c3=class extends mo{constructor(o,t){super(o,t),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},m.c4=class extends mo{constructor(o,t){super(o,t),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},m.c5=de,m.c6=function(o,t){var s=Math.sin(t),A=Math.cos(t);return o[0]=A,o[1]=s,o[2]=0,o[3]=-s,o[4]=A,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},m.c7=function(o,t,s){var A=t[0],p=t[1],v=t[2];return o[0]=A*s[0]+p*s[3]+v*s[6],o[1]=A*s[1]+p*s[4]+v*s[7],o[2]=A*s[2]+p*s[5]+v*s[8],o},m.c8=function(o,t,s,A,p,v,_){var B=1/(t-s),F=1/(A-p),k=1/(v-_);return o[0]=-2*B,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*F,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*k,o[11]=0,o[12]=(t+s)*B,o[13]=(p+A)*F,o[14]=(_+v)*k,o[15]=1,o},m.c9=class extends mo{constructor(o,t){super(o,t),this.current=new Array}set(o){if(o!=this.current){this.current=o;const t=new Float32Array(4*o.length);for(let s=0;s<o.length;s++)t[4*s]=o[s].r,t[4*s+1]=o[s].g,t[4*s+2]=o[s].b,t[4*s+3]=o[s].a;this.gl.uniform4fv(this.location,t)}}},m.cA=function(o,t){return he[t]&&(o instanceof MouseEvent||o instanceof WheelEvent)},m.cB=function(o,t){return ft[t]&&"touches"in o},m.cC=function(o){return ft[o]||he[o]},m.cD=function(o,t,s){var A=t[0],p=t[1];return o[0]=s[0]*A+s[4]*p+s[12],o[1]=s[1]*A+s[5]*p+s[13],o},m.cE=function(o,t){const{x:s,y:A}=$p.fromLngLat(t);return!(o<0||o>25||A<0||A>=1||s<0||s>=1)},m.cF=function(o,t){return o[0]=t[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=t[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=t[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},m.cG=class extends Eo{},m.cH=IT,m.cJ=st,m.cK=function(o,t){$e.REGISTERED_PROTOCOLS[o]=t},m.cL=function(o){delete $e.REGISTERED_PROTOCOLS[o]},m.cM=function(o,t){const s={};for(let p=0;p<o.length;p++){const v=t&&t[o[p].id]||ho(o[p]);t&&(t[o[p].id]=v);let _=s[v];_||(_=s[v]=[]),_.push(o[p])}const A=[];for(const p in s)A.push(s[p]);return A},m.cN=qe,m.cO=Ex,m.cP=sb,m.cQ=Jr,m.cR=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Ie/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const t=o.bucket.layers[0],s=t.layout,A=t._unevaluatedLayout._values,p={layoutIconSize:A["icon-size"].possiblyEvaluate(new Lr(o.bucket.zoom+1),o.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Lr(o.bucket.zoom+1),o.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Lr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:N}=o.bucket.textSizeData;p.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Lr(k),o.canonical),A["text-size"].possiblyEvaluate(new Lr(N),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:N}=o.bucket.iconSizeData;p.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Lr(k),o.canonical),A["icon-size"].possiblyEvaluate(new Lr(N),o.canonical)]}const v=s.get("text-line-height")*Os,_=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",B=s.get("text-keep-upright"),F=s.get("text-size");for(const k of o.bucket.features){const N=s.get("text-font").evaluate(k,{},o.canonical).join(","),G=F.evaluate(k,{},o.canonical),Z=p.layoutTextSize.evaluate(k,{},o.canonical),Y=p.layoutIconSize.evaluate(k,{},o.canonical),se={horizontal:{},vertical:void 0},ae=k.text;let ue,xe=[0,0];if(ae){const Le=ae.toString(),nt=s.get("text-letter-spacing").evaluate(k,{},o.canonical)*Os,ct=nn(Le)?nt:0,Lt=s.get("text-anchor").evaluate(k,{},o.canonical),Zt=yb(t,k,o.canonical);if(!Zt){const sr=s.get("text-radial-offset").evaluate(k,{},o.canonical);xe=sr?gb(Lt,[sr*Os,Mv]):s.get("text-offset").evaluate(k,{},o.canonical).map((Kt=>Kt*Os))}let jt=_?"center":s.get("text-justify").evaluate(k,{},o.canonical);const nr=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(k,{},o.canonical)*Os:1/0,vr=()=>{o.bucket.allowVerticalPlacement&&Jt(Le)&&(se.vertical=Is(ae,o.glyphMap,o.glyphPositions,o.imagePositions,N,nr,v,Lt,"left",ct,xe,m.aA.vertical,!0,Z,G))};if(!_&&Zt){const sr=new Set;if(jt==="auto")for(let Qt=0;Qt<Zt.values.length;Qt+=2)sr.add(kv(Zt.values[Qt]));else sr.add(jt);let Kt=!1;for(const Qt of sr)if(!se.horizontal[Qt])if(Kt)se.horizontal[Qt]=se.horizontal[0];else{const Pr=Is(ae,o.glyphMap,o.glyphPositions,o.imagePositions,N,nr,v,"center",Qt,ct,xe,m.aA.horizontal,!1,Z,G);Pr&&(se.horizontal[Qt]=Pr,Kt=Pr.positionedLines.length===1)}vr()}else{jt==="auto"&&(jt=kv(Lt));const sr=Is(ae,o.glyphMap,o.glyphPositions,o.imagePositions,N,nr,v,Lt,jt,ct,xe,m.aA.horizontal,!1,Z,G);sr&&(se.horizontal[jt]=sr),vr(),Jt(Le)&&_&&B&&(se.vertical=Is(ae,o.glyphMap,o.glyphPositions,o.imagePositions,N,nr,v,Lt,jt,ct,xe,m.aA.vertical,!1,Z,G))}}let et=!1;if(k.icon&&k.icon.name){const Le=o.imageMap[k.icon.name];Le&&(ue=Pn(o.imagePositions[k.icon.name],s.get("icon-offset").evaluate(k,{},o.canonical),s.get("icon-anchor").evaluate(k,{},o.canonical)),et=!!Le.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=et:o.bucket.sdfIcons!==et&&Br("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ce=_b(se.horizontal)||se.vertical;o.bucket.iconsInText=!!Ce&&Ce.iconsInText,(Ce||ue)&&ET(o.bucket,k,se,ue,o.imageMap,p,Z,Y,xe,et,o.canonical,o.subdivisionGranularity)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},m.cS=pc,m.cT=xd,m.cU=Mf,m.cV=function(o){const t=new ju;return(function(s,A){for(const p in s.layers)A.writeMessage(3,fT,s.layers[p])})(o,t),t.finish()},m.cW=function(o,t,s,A,p,v){let _=lb(o,t,s,p,0);return _=lb(_,t,A,v,1),_},m.cX=class{constructor(o){this.maxEntries=o,this.map=new Map}get(o){const t=this.map.get(o);return t!==void 0&&(this.map.delete(o),this.map.set(o,t)),t}set(o,t){if(this.map.has(o))this.map.delete(o);else if(this.map.size>=this.maxEntries){const s=this.map.keys().next().value;this.map.delete(s)}this.map.set(o,t)}clear(){this.map.clear()}},m.cY=_d,m.cZ=ju,m.c_=nb,m.ca=class extends mo{constructor(o,t){super(o,t),this.current=new Array}set(o){if(o!=this.current){this.current=o;const t=new Float32Array(o);this.gl.uniform1fv(this.location,t)}}},m.cb=class extends hA{},m.cc=yg,m.cd=class extends Ql{},m.ce=hd,m.cf=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},m.cg=ud,m.ch=function(o,t,s){var A=t[0],p=t[1],v=t[2],_=s[3]*A+s[7]*p+s[11]*v+s[15];return o[0]=(s[0]*A+s[4]*p+s[8]*v+s[12])/(_=_||1),o[1]=(s[1]*A+s[5]*p+s[9]*v+s[13])/_,o[2]=(s[2]*A+s[6]*p+s[10]*v+s[14])/_,o},m.ci=class extends Xs{},m.cj=class extends ja{},m.ck=function(o,t){return o[0]===t[0]&&o[1]===t[1]&&o[2]===t[2]&&o[3]===t[3]&&o[4]===t[4]&&o[5]===t[5]&&o[6]===t[6]&&o[7]===t[7]&&o[8]===t[8]&&o[9]===t[9]&&o[10]===t[10]&&o[11]===t[11]&&o[12]===t[12]&&o[13]===t[13]&&o[14]===t[14]&&o[15]===t[15]},m.cl=function(o,t){var s=o[0],A=o[1],p=o[2],v=o[3],_=o[4],B=o[5],F=o[6],k=o[7],N=o[8],G=o[9],Z=o[10],Y=o[11],se=o[12],ae=o[13],ue=o[14],xe=o[15],et=t[0],Ce=t[1],Le=t[2],nt=t[3],ct=t[4],Lt=t[5],Zt=t[6],jt=t[7],nr=t[8],vr=t[9],sr=t[10],Kt=t[11],Qt=t[12],Pr=t[13],Fr=t[14],Mr=t[15];return Math.abs(s-et)<=ne*Math.max(1,Math.abs(s),Math.abs(et))&&Math.abs(A-Ce)<=ne*Math.max(1,Math.abs(A),Math.abs(Ce))&&Math.abs(p-Le)<=ne*Math.max(1,Math.abs(p),Math.abs(Le))&&Math.abs(v-nt)<=ne*Math.max(1,Math.abs(v),Math.abs(nt))&&Math.abs(_-ct)<=ne*Math.max(1,Math.abs(_),Math.abs(ct))&&Math.abs(B-Lt)<=ne*Math.max(1,Math.abs(B),Math.abs(Lt))&&Math.abs(F-Zt)<=ne*Math.max(1,Math.abs(F),Math.abs(Zt))&&Math.abs(k-jt)<=ne*Math.max(1,Math.abs(k),Math.abs(jt))&&Math.abs(N-nr)<=ne*Math.max(1,Math.abs(N),Math.abs(nr))&&Math.abs(G-vr)<=ne*Math.max(1,Math.abs(G),Math.abs(vr))&&Math.abs(Z-sr)<=ne*Math.max(1,Math.abs(Z),Math.abs(sr))&&Math.abs(Y-Kt)<=ne*Math.max(1,Math.abs(Y),Math.abs(Kt))&&Math.abs(se-Qt)<=ne*Math.max(1,Math.abs(se),Math.abs(Qt))&&Math.abs(ae-Pr)<=ne*Math.max(1,Math.abs(ae),Math.abs(Pr))&&Math.abs(ue-Fr)<=ne*Math.max(1,Math.abs(ue),Math.abs(Fr))&&Math.abs(xe-Mr)<=ne*Math.max(1,Math.abs(xe),Math.abs(Mr))},m.cm=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o},m.cn=o=>o.type==="symbol",m.co=o=>o.type==="circle",m.cp=o=>o.type==="heatmap",m.cq=o=>o.type==="line",m.cr=o=>o.type==="fill",m.cs=o=>o.type==="fill-extrusion",m.ct=o=>o.type==="hillshade",m.cu=o=>o.type==="color-relief",m.cv=o=>o.type==="background",m.cw=o=>o.type==="custom",m.cx=De,m.cy=function(o,t,s){const A=Ne(t.x-s.x,t.y-s.y),p=Ne(o.x-s.x,o.y-s.y),v=Math.atan2(A[0]*p[1]-A[1]*p[0],(function(_,B){return _[0]*B[0]+_[1]*B[1]})(A,p));return un(v)},m.cz=Ye,m.d=St,m.d0=function(o,t,s,A,p){return a(this,void 0,void 0,(function*(){if(W())try{return yield $r(o,t,s,A,p)}catch{}return(function(v,_,B,F,k){const N=v.width,G=v.height;Sr&&Qr||(Sr=new OffscreenCanvas(N,G),Qr=Sr.getContext("2d",{willReadFrequently:!0})),Sr.width=N,Sr.height=G,Qr.drawImage(v,0,0,N,G);const Z=Qr.getImageData(_,B,F,k);return Qr.clearRect(0,0,N,G),Z.data})(o,t,s,A,p)}))},m.d1=Mp,m.d2=S,m.d3=class{constructor(o,t){this.layers={[Yp]:this},this.name=Yp,this.version=t?t.version:1,this.extent=t?t.extent:4096,this.length=o.length,this.features=o}feature(o){return new hT(this.features[o],this.extent)}},m.d4=Uc,m.d5=di,m.e=wt,m.f=o=>a(void 0,void 0,void 0,(function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(t)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),m.g=Bt,m.h=o=>new Promise(((t,s)=>{const A=new Image;A.onload=()=>{t(A),URL.revokeObjectURL(A.src),A.onload=null,window.requestAnimationFrame((()=>{A.src=or}))},A.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(o)],{type:"image/png"});A.src=o.byteLength?URL.createObjectURL(p):or})),m.i=yr,m.j=(o,t)=>zt(wt(o,{type:"json"}),t),m.k=tn,m.l=hr,m.m=zt,m.n=(o,t)=>zt(wt(o,{type:"arrayBuffer"}),t),m.o=function(o){return new ju(o).readFields(Ht,[])},m.p=Ar,m.q=function(o){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))},m.r=uu,m.s=Dr,m.t=li,m.u=dt,m.v=D,m.w=Br,m.x=Ni,m.y=ee,m.z=pi})),h("worker",["./shared"],(function(m){class a{constructor(he,fe){this.keyCache={},he&&this.replace(he,fe)}replace(he,fe){this._layerConfigs={},this._layers={},this.update(he,[],fe)}update(he,fe,ye){for(const $e of he){this._layerConfigs[$e.id]=$e;const Bt=this._layers[$e.id]=m.bU($e,ye);Bt._featureFilter=m.ak(Bt.filter,ye),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(const $e of fe)delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e];this.familiesBySource={};const Ke=m.cM(Object.values(this._layerConfigs),this.keyCache);for(const $e of Ke){const Bt=$e.map((ar=>this._layers[ar.id])),gt=Bt[0];if(gt.visibility==="none")continue;const st=gt.source||"";let xt=this.familiesBySource[st];xt||(xt=this.familiesBySource[st]={});const zt=gt.sourceLayer||m.aa;let St=xt[zt];St||(St=xt[zt]=[]),St.push(Bt)}}}class x{constructor(he){const fe={},ye=[];for(const gt in he){const st=he[gt],xt=fe[gt]={};for(const zt in st){const St=st[+zt];if(!St||St.bitmap.width===0||St.bitmap.height===0)continue;const ar={x:0,y:0,w:St.bitmap.width+2,h:St.bitmap.height+2};ye.push(ar),xt[zt]={rect:ar,metrics:St.metrics}}}const{w:Ke,h:$e}=m.p(ye),Bt=new m.r({width:Ke||1,height:$e||1});for(const gt in he){const st=he[gt];for(const xt in st){const zt=st[+xt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const St=fe[gt][xt].rect;m.r.copy(zt.bitmap,Bt,{x:0,y:0},{x:St.x+1,y:St.y+1},zt.bitmap)}}this.image=Bt,this.positions=fe}}m.cN("GlyphAtlas",x);class S{constructor(he){this.tileID=new m.a2(he.tileID.overscaledZ,he.tileID.wrap,he.tileID.canonical.z,he.tileID.canonical.x,he.tileID.canonical.y),this.uid=he.uid,this.zoom=he.zoom,this.pixelRatio=he.pixelRatio,this.tileSize=he.tileSize,this.source=he.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=he.showCollisionBoxes,this.collectResourceTiming=!!he.collectResourceTiming,this.returnDependencies=!!he.returnDependencies,this.promoteId=he.promoteId,this.inFlightDependencies=[]}parse(he,fe,ye,Ke,$e){return m._(this,void 0,void 0,(function*(){this.status="parsing",this.data=he,this.collisionBoxArray=new m.ai;const Bt=new m.cO(Object.keys(he.layers).sort()),gt=new m.cP(this.tileID,this.promoteId);gt.bucketLayerIDs=[];const st={},xt={featureIndex:gt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ye,subdivisionGranularity:$e},zt=fe.familiesBySource[this.source];for(const bn in zt){const wn=he.layers[bn];if(!wn)continue;wn.version===1&&m.w(`Vector tile source "${this.source}" layer "${bn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ui=Bt.encode(bn),oi=[];for(let Xt=0;Xt<wn.length;Xt++){const Wn=wn.feature(Xt),qi=gt.getId(Wn,bn);oi.push({feature:Wn,id:qi,index:Xt,sourceLayerIndex:Ui})}for(const Xt of zt[bn]){const Wn=Xt[0];Wn.source!==this.source&&m.w(`layer.source = ${Wn.source} does not equal this.source = ${this.source}`),Wn.isHidden(this.zoom,!0)||(I(Xt,this.zoom,ye),(st[Wn.id]=Wn.createBucket({index:gt.bucketLayerIDs.length,layers:Xt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ui,sourceID:this.source})).populate(oi,xt,this.tileID.canonical),gt.bucketLayerIDs.push(Xt.map((qi=>qi.id))))}}const St=m.bZ(xt.glyphDependencies,(bn=>Object.keys(bn).map(Number)));this.inFlightDependencies.forEach((bn=>bn?.abort())),this.inFlightDependencies=[];let ar=Promise.resolve({});if(Object.keys(St).length){const bn=new AbortController;this.inFlightDependencies.push(bn),ar=Ke.sendAsync({type:"GG",data:{stacks:St,source:this.source,tileID:this.tileID,type:"glyphs"}},bn)}const Yt=Object.keys(xt.iconDependencies);let hr=Promise.resolve({});if(Yt.length){const bn=new AbortController;this.inFlightDependencies.push(bn),hr=Ke.sendAsync({type:"GI",data:{icons:Yt,source:this.source,tileID:this.tileID,type:"icons"}},bn)}const tn=Object.keys(xt.patternDependencies);let Ir=Promise.resolve({});if(tn.length){const bn=new AbortController;this.inFlightDependencies.push(bn),Ir=Ke.sendAsync({type:"GI",data:{icons:tn,source:this.source,tileID:this.tileID,type:"patterns"}},bn)}const dt=xt.dashDependencies;let en=Promise.resolve({});if(Object.keys(dt).length){const bn=new AbortController;this.inFlightDependencies.push(bn),en=Ke.sendAsync({type:"GDA",data:{dashes:dt}},bn)}const[Rr,pr,Gr,Un]=yield Promise.all([ar,hr,Ir,en]),_r=new x(Rr),In=new m.cQ(pr,Gr);for(const bn in st){const wn=st[bn];wn instanceof m.aj?(I(wn.layers,this.zoom,ye),m.cR({bucket:wn,glyphMap:Rr,glyphPositions:_r.positions,imageMap:pr,imagePositions:In.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:xt.subdivisionGranularity})):wn.hasDependencies&&(wn instanceof m.cS||wn instanceof m.cT||wn instanceof m.cU)&&(I(wn.layers,this.zoom,ye),wn.addFeatures(xt,this.tileID.canonical,In.patternPositions,Un))}return this.status="done",{buckets:Object.values(st).filter((bn=>!bn.isEmpty())),featureIndex:gt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:_r.image,imageAtlas:In,dashPositions:Un,glyphMap:this.returnDependencies?Rr:null,iconMap:this.returnDependencies?pr:null,glyphPositions:this.returnDependencies?_r.positions:null}}))}}function I(ft,he,fe){const ye=new m.H(he);for(const Ke of ft)Ke.recalculate(ye,fe)}class U{constructor(he,fe,ye,Ke,$e){this.type=he,this.properties=ye||{},this.extent=$e,this.pointsArray=fe,this.id=Ke}loadGeometry(){return this.pointsArray.map((he=>he.map((fe=>new m.P(fe.x,fe.y)))))}}class Q{constructor(he,fe,ye){this.version=2,this._myFeatures=he,this.name=fe,this.length=he.length,this.extent=ye}feature(he){return this._myFeatures[he]}}class P{constructor(){this.layers={}}addLayer(he){this.layers[he.name]=he}}function $(ft){let he=m.cV(ft);return he.byteOffset===0&&he.byteLength===he.buffer.byteLength||(he=new Uint8Array(he)),{vectorTile:ft,rawData:he.buffer}}function z(ft,he,fe){const{extent:ye}=ft,Ke=Math.pow(2,fe.z-he.z),$e=(fe.x-he.x*Ke)*ye,Bt=(fe.y-he.y*Ke)*ye,gt=[];for(let st=0;st<ft.length;st++){const xt=ft.feature(st);let zt=xt.loadGeometry();for(const ar of zt)for(const Yt of ar)Yt.x=Yt.x*Ke-$e,Yt.y=Yt.y*Ke-Bt;const St=128;zt=m.cW(zt,xt.type,-St,-St,ye+St,ye+St),zt.length!==0&&gt.push(new U(xt.type,zt,xt.properties,xt.id,ye))}return new Q(gt,ft.name,ye)}class O{constructor(he,fe,ye){this.actor=he,this.layerIndex=fe,this.availableImages=ye,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new m.cX(1e3)}loadVectorTile(he,fe){return m._(this,void 0,void 0,(function*(){const ye=yield m.n(he.request,fe);try{return{vectorTile:he.encoding!=="mlt"?new m.cY(new m.cZ(ye.data)):new m.c_(ye.data),rawData:ye.data,cacheControl:ye.cacheControl,expires:ye.expires}}catch(Ke){const $e=new Uint8Array(ye.data);let Bt=`Unable to parse the tile at ${he.request.url}, `;throw Bt+=$e[0]===31&&$e[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ke.message}`,new Error(Bt)}}))}loadTile(he){return m._(this,void 0,void 0,(function*(){const{uid:fe,overzoomParameters:ye}=he;ye&&(he.request=ye.overzoomRequest);const Ke=!!(he&&he.request&&he.request.collectResourceTiming)&&new m.c$(he.request),$e=new S(he);this.loading[fe]=$e;const Bt=new AbortController;$e.abort=Bt;try{const gt=yield this.loadVectorTile(he,Bt);if(delete this.loading[fe],!gt)return null;if(ye){const ar=this._getOverzoomTile(he,gt.vectorTile);gt.rawData=ar.rawData,gt.vectorTile=ar.vectorTile}const st=gt.rawData,xt={};gt.expires&&(xt.expires=gt.expires),gt.cacheControl&&(xt.cacheControl=gt.cacheControl);const zt={};if(Ke){const ar=Ke.finish();ar&&(zt.resourceTiming=JSON.parse(JSON.stringify(ar)))}$e.vectorTile=gt.vectorTile;const St=$e.parse(gt.vectorTile,this.layerIndex,this.availableImages,this.actor,he.subdivisionGranularity);this.loaded[fe]=$e,this.fetching[fe]={rawTileData:st,cacheControl:xt,resourceTiming:zt};try{const ar=yield St;return m.e({rawTileData:st.slice(0),encoding:he.encoding},ar,xt,zt)}finally{delete this.fetching[fe]}}catch(gt){throw delete this.loading[fe],$e.status="done",this.loaded[fe]=$e,gt}}))}_getOverzoomTile(he,fe){const{tileID:ye,source:Ke,overzoomParameters:$e}=he,{maxZoomTileID:Bt}=$e,gt=`${Bt.key}_${ye.key}`,st=this.overzoomedTileResultCache.get(gt);if(st)return st;const xt=new P,zt=this.layerIndex.familiesBySource[Ke];for(const ar in zt){const Yt=fe.layers[ar];if(!Yt)continue;const hr=z(Yt,Bt,ye.canonical);hr.length>0&&xt.addLayer(hr)}const St=$(xt);return this.overzoomedTileResultCache.set(gt,St),St}reloadTile(he){return m._(this,void 0,void 0,(function*(){const fe=he.uid;if(!this.loaded||!this.loaded[fe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ye=this.loaded[fe];if(ye.showCollisionBoxes=he.showCollisionBoxes,ye.status==="parsing"){const Ke=yield ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,he.subdivisionGranularity);let $e;if(this.fetching[fe]){const{rawTileData:Bt,cacheControl:gt,resourceTiming:st}=this.fetching[fe];delete this.fetching[fe],$e=m.e({rawTileData:Bt.slice(0),encoding:he.encoding},Ke,gt,st)}else $e=Ke;return $e}if(ye.status==="done"&&ye.vectorTile)return ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,he.subdivisionGranularity)}))}abortTile(he){return m._(this,void 0,void 0,(function*(){const fe=this.loading,ye=he.uid;fe&&fe[ye]&&fe[ye].abort&&(fe[ye].abort.abort(),delete fe[ye])}))}removeTile(he){return m._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[he.uid]&&delete this.loaded[he.uid]}))}}class W{constructor(){this.loaded={}}loadTile(he){return m._(this,void 0,void 0,(function*(){const{uid:fe,encoding:ye,rawImageData:Ke,redFactor:$e,greenFactor:Bt,blueFactor:gt,baseShift:st}=he,xt=Ke.width+2,zt=Ke.height+2,St=m.b(Ke)?new m.R({width:xt,height:zt},yield m.d0(Ke,-1,-1,xt,zt)):Ke,ar=new m.d1(fe,St,ye,$e,Bt,gt,st);return this.loaded=this.loaded||{},this.loaded[fe]=ar,ar}))}removeTile(he){const fe=this.loaded,ye=he.uid;fe&&fe[ye]&&delete fe[ye]}}var ne,ce,de=(function(){if(ce)return ne;function ft(fe,ye){if(fe.length!==0){he(fe[0],ye);for(var Ke=1;Ke<fe.length;Ke++)he(fe[Ke],!ye)}}function he(fe,ye){for(var Ke=0,$e=0,Bt=0,gt=fe.length,st=gt-1;Bt<gt;st=Bt++){var xt=(fe[Bt][0]-fe[st][0])*(fe[st][1]+fe[Bt][1]),zt=Ke+xt;$e+=Math.abs(Ke)>=Math.abs(xt)?Ke-zt+xt:xt-zt+Ke,Ke=zt}Ke+$e>=0!=!!ye&&fe.reverse()}return ce=1,ne=function fe(ye,Ke){var $e,Bt=ye&&ye.type;if(Bt==="FeatureCollection")for($e=0;$e<ye.features.length;$e++)fe(ye.features[$e],Ke);else if(Bt==="GeometryCollection")for($e=0;$e<ye.geometries.length;$e++)fe(ye.geometries[$e],Ke);else if(Bt==="Feature")fe(ye.geometry,Ke);else if(Bt==="Polygon")ft(ye.coordinates,Ke);else if(Bt==="MultiPolygon")for($e=0;$e<ye.coordinates.length;$e++)ft(ye.coordinates[$e],Ke);return ye}})(),Se=m.d2(de);const ze={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ft=>ft},Ze=Math.fround||(Qe=new Float32Array(1),ft=>(Qe[0]=+ft,Qe[0]));var Qe;class be{constructor(he){this.options=Object.assign(Object.create(ze),he),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(he){const{log:fe,minZoom:ye,maxZoom:Ke}=this.options;fe&&console.time("total time");const $e=`prepare ${he.length} points`;fe&&console.time($e),this.points=he;const Bt=[];for(let st=0;st<he.length;st++){const xt=he[st];if(!xt.geometry)continue;const[zt,St]=xt.geometry.coordinates,ar=Ze(ge(zt)),Yt=Ze(Pe(St));Bt.push(ar,Yt,1/0,st,-1,1),this.options.reduce&&Bt.push(0)}let gt=this.trees[Ke+1]=this._createTree(Bt);fe&&console.timeEnd($e);for(let st=Ke;st>=ye;st--){const xt=+Date.now();gt=this.trees[st]=this._createTree(this._cluster(gt,st)),fe&&console.log("z%d: %d clusters in %dms",st,gt.numItems,+Date.now()-xt)}return fe&&console.timeEnd("total time"),this}getClusters(he,fe){let ye=((he[0]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,he[1]));let $e=he[2]===180?180:((he[2]+180)%360+360)%360-180;const Bt=Math.max(-90,Math.min(90,he[3]));if(he[2]-he[0]>=360)ye=-180,$e=180;else if(ye>$e){const St=this.getClusters([ye,Ke,180,Bt],fe),ar=this.getClusters([-180,Ke,$e,Bt],fe);return St.concat(ar)}const gt=this.trees[this._limitZoom(fe)],st=gt.range(ge(ye),Pe(Bt),ge($e),Pe(Ke)),xt=gt.data,zt=[];for(const St of st){const ar=this.stride*St;zt.push(xt[ar+5]>1?Ge(xt,ar,this.clusterProps):this.points[xt[ar+3]])}return zt}getChildren(he){const fe=this._getOriginId(he),ye=this._getOriginZoom(he),Ke="No cluster with the specified id.",$e=this.trees[ye];if(!$e)throw new Error(Ke);const Bt=$e.data;if(fe*this.stride>=Bt.length)throw new Error(Ke);const gt=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),st=$e.within(Bt[fe*this.stride],Bt[fe*this.stride+1],gt),xt=[];for(const zt of st){const St=zt*this.stride;Bt[St+4]===he&&xt.push(Bt[St+5]>1?Ge(Bt,St,this.clusterProps):this.points[Bt[St+3]])}if(xt.length===0)throw new Error(Ke);return xt}getLeaves(he,fe,ye){const Ke=[];return this._appendLeaves(Ke,he,fe=fe||10,ye=ye||0,0),Ke}getTile(he,fe,ye){const Ke=this.trees[this._limitZoom(he)],$e=Math.pow(2,he),{extent:Bt,radius:gt}=this.options,st=gt/Bt,xt=(ye-st)/$e,zt=(ye+1+st)/$e,St={features:[]};return this._addTileFeatures(Ke.range((fe-st)/$e,xt,(fe+1+st)/$e,zt),Ke.data,fe,ye,$e,St),fe===0&&this._addTileFeatures(Ke.range(1-st/$e,xt,1,zt),Ke.data,$e,ye,$e,St),fe===$e-1&&this._addTileFeatures(Ke.range(0,xt,st/$e,zt),Ke.data,-1,ye,$e,St),St.features.length?St:null}getClusterExpansionZoom(he){let fe=this._getOriginZoom(he)-1;for(;fe<=this.options.maxZoom;){const ye=this.getChildren(he);if(fe++,ye.length!==1)break;he=ye[0].properties.cluster_id}return fe}_appendLeaves(he,fe,ye,Ke,$e){const Bt=this.getChildren(fe);for(const gt of Bt){const st=gt.properties;if(st&&st.cluster?$e+st.point_count<=Ke?$e+=st.point_count:$e=this._appendLeaves(he,st.cluster_id,ye,Ke,$e):$e<Ke?$e++:he.push(gt),he.length===ye)break}return $e}_createTree(he){const fe=new m.aU(he.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<he.length;ye+=this.stride)fe.add(he[ye],he[ye+1]);return fe.finish(),fe.data=he,fe}_addTileFeatures(he,fe,ye,Ke,$e,Bt){for(const gt of he){const st=gt*this.stride,xt=fe[st+5]>1;let zt,St,ar;if(xt)zt=le(fe,st,this.clusterProps),St=fe[st],ar=fe[st+1];else{const tn=this.points[fe[st+3]];zt=tn.properties;const[Ir,dt]=tn.geometry.coordinates;St=ge(Ir),ar=Pe(dt)}const Yt={type:1,geometry:[[Math.round(this.options.extent*(St*$e-ye)),Math.round(this.options.extent*(ar*$e-Ke))]],tags:zt};let hr;hr=xt||this.options.generateId?fe[st+3]:this.points[fe[st+3]].id,hr!==void 0&&(Yt.id=hr),Bt.features.push(Yt)}}_limitZoom(he){return Math.max(this.options.minZoom,Math.min(Math.floor(+he),this.options.maxZoom+1))}_cluster(he,fe){const{radius:ye,extent:Ke,reduce:$e,minPoints:Bt}=this.options,gt=ye/(Ke*Math.pow(2,fe)),st=he.data,xt=[],zt=this.stride;for(let St=0;St<st.length;St+=zt){if(st[St+2]<=fe)continue;st[St+2]=fe;const ar=st[St],Yt=st[St+1],hr=he.within(st[St],st[St+1],gt),tn=st[St+5];let Ir=tn;for(const dt of hr){const en=dt*zt;st[en+2]>fe&&(Ir+=st[en+5])}if(Ir>tn&&Ir>=Bt){let dt,en=ar*tn,Rr=Yt*tn,pr=-1;const Gr=(St/zt<<5)+(fe+1)+this.points.length;for(const Un of hr){const _r=Un*zt;if(st[_r+2]<=fe)continue;st[_r+2]=fe;const In=st[_r+5];en+=st[_r]*In,Rr+=st[_r+1]*In,st[_r+4]=Gr,$e&&(dt||(dt=this._map(st,St,!0),pr=this.clusterProps.length,this.clusterProps.push(dt)),$e(dt,this._map(st,_r)))}st[St+4]=Gr,xt.push(en/Ir,Rr/Ir,1/0,Gr,-1,Ir),$e&&xt.push(pr)}else{for(let dt=0;dt<zt;dt++)xt.push(st[St+dt]);if(Ir>1)for(const dt of hr){const en=dt*zt;if(!(st[en+2]<=fe)){st[en+2]=fe;for(let Rr=0;Rr<zt;Rr++)xt.push(st[en+Rr])}}}}return xt}_getOriginId(he){return he-this.points.length>>5}_getOriginZoom(he){return(he-this.points.length)%32}_map(he,fe,ye){if(he[fe+5]>1){const Bt=this.clusterProps[he[fe+6]];return ye?Object.assign({},Bt):Bt}const Ke=this.points[he[fe+3]].properties,$e=this.options.map(Ke);return ye&&$e===Ke?Object.assign({},$e):$e}}function Ge(ft,he,fe){return{type:"Feature",id:ft[he+3],properties:le(ft,he,fe),geometry:{type:"Point",coordinates:[(ye=ft[he],360*(ye-.5)),Fe(ft[he+1])]}};var ye}function le(ft,he,fe){const ye=ft[he+5],Ke=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,$e=ft[he+6],Bt=$e===-1?{}:Object.assign({},fe[$e]);return Object.assign(Bt,{cluster:!0,cluster_id:ft[he+3],point_count:ye,point_count_abbreviated:Ke})}function ge(ft){return ft/360+.5}function Pe(ft){const he=Math.sin(ft*Math.PI/180),fe=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return fe<0?0:fe>1?1:fe}function Fe(ft){const he=(180-360*ft)*Math.PI/180;return 360*Math.atan(Math.exp(he))/Math.PI-90}function pt(ft,he,fe,ye){let Ke=ye;const $e=he+(fe-he>>1);let Bt,gt=fe-he;const st=ft[he],xt=ft[he+1],zt=ft[fe],St=ft[fe+1];for(let ar=he+3;ar<fe;ar+=3){const Yt=ut(ft[ar],ft[ar+1],st,xt,zt,St);if(Yt>Ke)Bt=ar,Ke=Yt;else if(Yt===Ke){const hr=Math.abs(ar-$e);hr<gt&&(Bt=ar,gt=hr)}}Ke>ye&&(Bt-he>3&&pt(ft,he,Bt,ye),ft[Bt+2]=Ke,fe-Bt>3&&pt(ft,Bt,fe,ye))}function ut(ft,he,fe,ye,Ke,$e){let Bt=Ke-fe,gt=$e-ye;if(Bt!==0||gt!==0){const st=((ft-fe)*Bt+(he-ye)*gt)/(Bt*Bt+gt*gt);st>1?(fe=Ke,ye=$e):st>0&&(fe+=Bt*st,ye+=gt*st)}return Bt=ft-fe,gt=he-ye,Bt*Bt+gt*gt}function At(ft,he,fe,ye){const Ke={id:ft??null,type:he,geometry:fe,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(he==="Point"||he==="MultiPoint"||he==="LineString")Ne(Ke,fe);else if(he==="Polygon")Ne(Ke,fe[0]);else if(he==="MultiLineString")for(const $e of fe)Ne(Ke,$e);else if(he==="MultiPolygon")for(const $e of fe)Ne(Ke,$e[0]);return Ke}function Ne(ft,he){for(let fe=0;fe<he.length;fe+=3)ft.minX=Math.min(ft.minX,he[fe]),ft.minY=Math.min(ft.minY,he[fe+1]),ft.maxX=Math.max(ft.maxX,he[fe]),ft.maxY=Math.max(ft.maxY,he[fe+1])}function Ie(ft,he,fe,ye){if(!he.geometry)return;const Ke=he.geometry.coordinates;if(Ke&&Ke.length===0)return;const $e=he.geometry.type,Bt=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2);let gt=[],st=he.id;if(fe.promoteId?st=he.properties[fe.promoteId]:fe.generateId&&(st=ye||0),$e==="Point")yt(Ke,gt);else if($e==="MultiPoint")for(const xt of Ke)yt(xt,gt);else if($e==="LineString")Ue(Ke,gt,Bt,!1);else if($e==="MultiLineString"){if(fe.lineMetrics){for(const xt of Ke)gt=[],Ue(xt,gt,Bt,!1),ft.push(At(st,"LineString",gt,he.properties));return}ie(Ke,gt,Bt,!1)}else if($e==="Polygon")ie(Ke,gt,Bt,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(const xt of he.geometry.geometries)Ie(ft,{id:st,geometry:xt,properties:he.properties},fe,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const xt of Ke){const zt=[];ie(xt,zt,Bt,!0),gt.push(zt)}}ft.push(At(st,$e,gt,he.properties))}function yt(ft,he){he.push(Ee(ft[0]),De(ft[1]),0)}function Ue(ft,he,fe,ye){let Ke,$e,Bt=0;for(let st=0;st<ft.length;st++){const xt=Ee(ft[st][0]),zt=De(ft[st][1]);he.push(xt,zt,0),st>0&&(Bt+=ye?(Ke*zt-xt*$e)/2:Math.sqrt(Math.pow(xt-Ke,2)+Math.pow(zt-$e,2))),Ke=xt,$e=zt}const gt=he.length-3;he[2]=1,pt(he,0,gt,fe),he[gt+2]=1,he.size=Math.abs(Bt),he.start=0,he.end=he.size}function ie(ft,he,fe,ye){for(let Ke=0;Ke<ft.length;Ke++){const $e=[];Ue(ft[Ke],$e,fe,ye),he.push($e)}}function Ee(ft){return ft/360+.5}function De(ft){const he=Math.sin(ft*Math.PI/180),fe=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return fe<0?0:fe>1?1:fe}function Ye(ft,he,fe,ye,Ke,$e,Bt,gt){if(ye/=he,$e>=(fe/=he)&&Bt<ye)return ft;if(Bt<fe||$e>=ye)return null;const st=[];for(const xt of ft){const zt=xt.geometry;let St=xt.type;const ar=Ke===0?xt.minX:xt.minY,Yt=Ke===0?xt.maxX:xt.maxY;if(ar>=fe&&Yt<ye){st.push(xt);continue}if(Yt<fe||ar>=ye)continue;let hr=[];if(St==="Point"||St==="MultiPoint")at(zt,hr,fe,ye,Ke);else if(St==="LineString")tt(zt,hr,fe,ye,Ke,!1,gt.lineMetrics);else if(St==="MultiLineString")Et(zt,hr,fe,ye,Ke,!1);else if(St==="Polygon")Et(zt,hr,fe,ye,Ke,!0);else if(St==="MultiPolygon")for(const tn of zt){const Ir=[];Et(tn,Ir,fe,ye,Ke,!0),Ir.length&&hr.push(Ir)}if(hr.length){if(gt.lineMetrics&&St==="LineString"){for(const tn of hr)st.push(At(xt.id,St,tn,xt.tags));continue}St!=="LineString"&&St!=="MultiLineString"||(hr.length===1?(St="LineString",hr=hr[0]):St="MultiLineString"),St!=="Point"&&St!=="MultiPoint"||(St=hr.length===3?"Point":"MultiPoint"),st.push(At(xt.id,St,hr,xt.tags))}}return st.length?st:null}function at(ft,he,fe,ye,Ke){for(let $e=0;$e<ft.length;$e+=3){const Bt=ft[$e+Ke];Bt>=fe&&Bt<=ye&&Pt(he,ft[$e],ft[$e+1],ft[$e+2])}}function tt(ft,he,fe,ye,Ke,$e,Bt){let gt=wt(ft);const st=Ke===0?Wt:lr;let xt,zt,St=ft.start;for(let Ir=0;Ir<ft.length-3;Ir+=3){const dt=ft[Ir],en=ft[Ir+1],Rr=ft[Ir+2],pr=ft[Ir+3],Gr=ft[Ir+4],Un=Ke===0?dt:en,_r=Ke===0?pr:Gr;let In=!1;Bt&&(xt=Math.sqrt(Math.pow(dt-pr,2)+Math.pow(en-Gr,2))),Un<fe?_r>fe&&(zt=st(gt,dt,en,pr,Gr,fe),Bt&&(gt.start=St+xt*zt)):Un>ye?_r<ye&&(zt=st(gt,dt,en,pr,Gr,ye),Bt&&(gt.start=St+xt*zt)):Pt(gt,dt,en,Rr),_r<fe&&Un>=fe&&(zt=st(gt,dt,en,pr,Gr,fe),In=!0),_r>ye&&Un<=ye&&(zt=st(gt,dt,en,pr,Gr,ye),In=!0),!$e&&In&&(Bt&&(gt.end=St+xt*zt),he.push(gt),gt=wt(ft)),Bt&&(St+=xt)}let ar=ft.length-3;const Yt=ft[ar],hr=ft[ar+1],tn=Ke===0?Yt:hr;tn>=fe&&tn<=ye&&Pt(gt,Yt,hr,ft[ar+2]),ar=gt.length-3,$e&&ar>=3&&(gt[ar]!==gt[0]||gt[ar+1]!==gt[1])&&Pt(gt,gt[0],gt[1],gt[2]),gt.length&&he.push(gt)}function wt(ft){const he=[];return he.size=ft.size,he.start=ft.start,he.end=ft.end,he}function Et(ft,he,fe,ye,Ke,$e){for(const Bt of ft)tt(Bt,he,fe,ye,Ke,$e,!1)}function Pt(ft,he,fe,ye){ft.push(he,fe,ye)}function Wt(ft,he,fe,ye,Ke,$e){const Bt=($e-he)/(ye-he);return Pt(ft,$e,fe+(Ke-fe)*Bt,1),Bt}function lr(ft,he,fe,ye,Ke,$e){const Bt=($e-fe)/(Ke-fe);return Pt(ft,he+(ye-he)*Bt,$e,1),Bt}function fr(ft,he){const fe=[];for(let ye=0;ye<ft.length;ye++){const Ke=ft[ye],$e=Ke.type;let Bt;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")Bt=Br(Ke.geometry,he);else if($e==="MultiLineString"||$e==="Polygon"){Bt=[];for(const gt of Ke.geometry)Bt.push(Br(gt,he))}else if($e==="MultiPolygon"){Bt=[];for(const gt of Ke.geometry){const st=[];for(const xt of gt)st.push(Br(xt,he));Bt.push(st)}}fe.push(At(Ke.id,$e,Bt,Ke.tags))}return fe}function Br(ft,he){const fe=[];fe.size=ft.size,ft.start!==void 0&&(fe.start=ft.start,fe.end=ft.end);for(let ye=0;ye<ft.length;ye+=3)fe.push(ft[ye]+he,ft[ye+1],ft[ye+2]);return fe}function He(ft,he){if(ft.transformed)return ft;const fe=1<<ft.z,ye=ft.x,Ke=ft.y;for(const $e of ft.features){const Bt=$e.geometry,gt=$e.type;if($e.geometry=[],gt===1)for(let st=0;st<Bt.length;st+=2)$e.geometry.push(yr(Bt[st],Bt[st+1],he,fe,ye,Ke));else for(let st=0;st<Bt.length;st++){const xt=[];for(let zt=0;zt<Bt[st].length;zt+=2)xt.push(yr(Bt[st][zt],Bt[st][zt+1],he,fe,ye,Ke));$e.geometry.push(xt)}}return ft.transformed=!0,ft}function yr(ft,he,fe,ye,Ke,$e){return[Math.round(fe*(ft*ye-Ke)),Math.round(fe*(he*ye-$e))]}function kr(ft,he,fe,ye,Ke){const $e=he===Ke.maxZoom?0:Ke.tolerance/((1<<he)*Ke.extent),Bt={features:[],numPoints:0,numSimplified:0,numFeatures:ft.length,source:null,x:fe,y:ye,z:he,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const gt of ft)qr(Bt,gt,$e,Ke);return Bt}function qr(ft,he,fe,ye){const Ke=he.geometry,$e=he.type,Bt=[];if(ft.minX=Math.min(ft.minX,he.minX),ft.minY=Math.min(ft.minY,he.minY),ft.maxX=Math.max(ft.maxX,he.maxX),ft.maxY=Math.max(ft.maxY,he.maxY),$e==="Point"||$e==="MultiPoint")for(let gt=0;gt<Ke.length;gt+=3)Bt.push(Ke[gt],Ke[gt+1]),ft.numPoints++,ft.numSimplified++;else if($e==="LineString")or(Bt,Ke,ft,fe,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(let gt=0;gt<Ke.length;gt++)or(Bt,Ke[gt],ft,fe,$e==="Polygon",gt===0);else if($e==="MultiPolygon")for(let gt=0;gt<Ke.length;gt++){const st=Ke[gt];for(let xt=0;xt<st.length;xt++)or(Bt,st[xt],ft,fe,!0,xt===0)}if(Bt.length){let gt=he.tags||null;if($e==="LineString"&&ye.lineMetrics){gt={};for(const xt in he.tags)gt[xt]=he.tags[xt];gt.mapbox_clip_start=Ke.start/Ke.size,gt.mapbox_clip_end=Ke.end/Ke.size}const st={geometry:Bt,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:gt};he.id!==null&&(st.id=he.id),ft.features.push(st)}}function or(ft,he,fe,ye,Ke,$e){const Bt=ye*ye;if(ye>0&&he.size<(Ke?Bt:ye))return void(fe.numPoints+=he.length/3);const gt=[];for(let st=0;st<he.length;st+=3)(ye===0||he[st+2]>Bt)&&(fe.numSimplified++,gt.push(he[st],he[st+1])),fe.numPoints++;Ke&&(function(st,xt){let zt=0;for(let St=0,ar=st.length,Yt=ar-2;St<ar;Yt=St,St+=2)zt+=(st[St]-st[Yt])*(st[St+1]+st[Yt+1]);if(zt>0===xt)for(let St=0,ar=st.length;St<ar/2;St+=2){const Yt=st[St],hr=st[St+1];st[St]=st[ar-2-St],st[St+1]=st[ar-1-St],st[ar-2-St]=Yt,st[ar-1-St]=hr}})(gt,$e),ft.push(gt)}const $r={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Sr{constructor(he,fe){const ye=(fe=this.options=(function($e,Bt){for(const gt in Bt)$e[gt]=Bt[gt];return $e})(Object.create($r),fe)).debug;if(ye&&console.time("preprocess data"),fe.maxZoom<0||fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(fe.promoteId&&fe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ke=(function($e,Bt){const gt=[];if($e.type==="FeatureCollection")for(let st=0;st<$e.features.length;st++)Ie(gt,$e.features[st],Bt,st);else Ie(gt,$e.type==="Feature"?$e:{geometry:$e},Bt);return gt})(he,fe);this.tiles={},this.tileCoords=[],ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",fe.indexMaxZoom,fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ke=(function($e,Bt){const gt=Bt.buffer/Bt.extent;let st=$e;const xt=Ye($e,1,-1-gt,gt,0,-1,2,Bt),zt=Ye($e,1,1-gt,2+gt,0,-1,2,Bt);return(xt||zt)&&(st=Ye($e,1,-gt,1+gt,0,-1,2,Bt)||[],xt&&(st=fr(xt,1).concat(st)),zt&&(st=st.concat(fr(zt,-1)))),st})(Ke,fe),Ke.length&&this.splitTile(Ke,0,0,0),ye&&(Ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(he,fe,ye,Ke,$e,Bt,gt){const st=[he,fe,ye,Ke],xt=this.options,zt=xt.debug;for(;st.length;){Ke=st.pop(),ye=st.pop(),fe=st.pop(),he=st.pop();const St=1<<fe,ar=Qr(fe,ye,Ke);let Yt=this.tiles[ar];if(!Yt&&(zt>1&&console.time("creation"),Yt=this.tiles[ar]=kr(he,fe,ye,Ke,xt),this.tileCoords.push({z:fe,x:ye,y:Ke}),zt)){zt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",fe,ye,Ke,Yt.numFeatures,Yt.numPoints,Yt.numSimplified),console.timeEnd("creation"));const In=`z${fe}`;this.stats[In]=(this.stats[In]||0)+1,this.total++}if(Yt.source=he,$e==null){if(fe===xt.indexMaxZoom||Yt.numPoints<=xt.indexMaxPoints)continue}else{if(fe===xt.maxZoom||fe===$e)continue;if($e!=null){const In=$e-fe;if(ye!==Bt>>In||Ke!==gt>>In)continue}}if(Yt.source=null,he.length===0)continue;zt>1&&console.time("clipping");const hr=.5*xt.buffer/xt.extent,tn=.5-hr,Ir=.5+hr,dt=1+hr;let en=null,Rr=null,pr=null,Gr=null,Un=Ye(he,St,ye-hr,ye+Ir,0,Yt.minX,Yt.maxX,xt),_r=Ye(he,St,ye+tn,ye+dt,0,Yt.minX,Yt.maxX,xt);he=null,Un&&(en=Ye(Un,St,Ke-hr,Ke+Ir,1,Yt.minY,Yt.maxY,xt),Rr=Ye(Un,St,Ke+tn,Ke+dt,1,Yt.minY,Yt.maxY,xt),Un=null),_r&&(pr=Ye(_r,St,Ke-hr,Ke+Ir,1,Yt.minY,Yt.maxY,xt),Gr=Ye(_r,St,Ke+tn,Ke+dt,1,Yt.minY,Yt.maxY,xt),_r=null),zt>1&&console.timeEnd("clipping"),st.push(en||[],fe+1,2*ye,2*Ke),st.push(Rr||[],fe+1,2*ye,2*Ke+1),st.push(pr||[],fe+1,2*ye+1,2*Ke),st.push(Gr||[],fe+1,2*ye+1,2*Ke+1)}}getTile(he,fe,ye){he=+he,fe=+fe,ye=+ye;const Ke=this.options,{extent:$e,debug:Bt}=Ke;if(he<0||he>24)return null;const gt=1<<he,st=Qr(he,fe=fe+gt&gt-1,ye);if(this.tiles[st])return He(this.tiles[st],$e);Bt>1&&console.log("drilling down to z%d-%d-%d",he,fe,ye);let xt,zt=he,St=fe,ar=ye;for(;!xt&&zt>0;)zt--,St>>=1,ar>>=1,xt=this.tiles[Qr(zt,St,ar)];return xt&&xt.source?(Bt>1&&(console.log("found parent tile z%d-%d-%d",zt,St,ar),console.time("drilling down")),this.splitTile(xt.source,zt,St,ar,he,fe,ye),Bt>1&&console.timeEnd("drilling down"),this.tiles[st]?He(this.tiles[st],$e):null):null}}function Qr(ft,he,fe){return 32*((1<<ft)*fe+he)+ft}class Dr extends O{constructor(he,fe,ye,Ke=Qn){super(he,fe,ye),this._dataUpdateable=new Map,this._createGeoJSONIndex=Ke}loadVectorTile(he,fe){return m._(this,void 0,void 0,(function*(){const ye=he.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ke=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);return Ke?$(new m.d3(Ke.features,{version:2,extent:m.a5})):null}))}loadData(he){return m._(this,void 0,void 0,(function*(){var fe;(fe=this._pendingRequest)===null||fe===void 0||fe.abort();const ye=this._startPerformance(he);this._pendingRequest=new AbortController;try{(!this._pendingData||he.request||he.data||he.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(he,this._pendingRequest));const Ke=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Ke,he),this.loaded={};const $e={};return this._finishPerformance(ye,he,$e),$e}catch(Ke){if(delete this._pendingRequest,m.Z(Ke))return{abandoned:!0};throw Ke}}))}_startPerformance(he){var fe;if(!((fe=he?.request)===null||fe===void 0)&&fe.collectResourceTiming)return new m.c$(he.request)}_finishPerformance(he,fe,ye){if(!he)return;const Ke=he.finish();Ke&&(ye.resourceTiming={},ye.resourceTiming[fe.source]=JSON.parse(JSON.stringify(Ke)))}getData(){return m._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(he){const fe=this.loaded;return fe&&fe[he.uid]?super.reloadTile(he):this.loadTile(he)}loadAndProcessGeoJSON(he,fe){return m._(this,void 0,void 0,(function*(){let ye;if(he.request?ye=yield this.loadGeoJSONFromUrl(he.request,he.promoteId,fe):he.data?ye=this._loadGeoJSONFromObject(he.data,he.promoteId):he.dataDiff&&(ye=this._loadGeoJSONFromDiff(he.dataDiff,he.promoteId,he.source)),delete this._pendingRequest,typeof ye!="object")throw new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`);return Se(ye,!0),he.filter&&(ye=this._filterGeoJSON(ye,he.filter)),ye}))}loadGeoJSONFromUrl(he,fe,ye){return m._(this,void 0,void 0,(function*(){const Ke=yield m.j(he,ye);return this._dataUpdateable=m.a7(Ke.data,fe)?m.a8(Ke.data,fe):void 0,Ke.data}))}_loadGeoJSONFromObject(he,fe){return this._dataUpdateable=m.a7(he,fe)?m.a8(he,fe):void 0,he}_loadGeoJSONFromDiff(he,fe,ye){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ye}`);m.a9(this._dataUpdateable,he,fe);const Ke=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Ke)}_filterGeoJSON(he,fe){const ye=m.d4(fe,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(($e=>`${$e.key}: ${$e.message}`)).join(", "));const Ke=he.features.filter(($e=>ye.value.evaluate({zoom:0},$e)));return this._toFeatureCollection(Ke)}_toFeatureCollection(he){return{type:"FeatureCollection",features:he}}removeSource(he){return m._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(he){return this._geoJSONIndex.getClusterExpansionZoom(he.clusterId)}getClusterChildren(he){return this._geoJSONIndex.getChildren(he.clusterId)}getClusterLeaves(he){return this._geoJSONIndex.getLeaves(he.clusterId,he.limit,he.offset)}}function Qn(ft,he){return he.cluster?new be((function({superclusterOptions:fe,clusterProperties:ye}){if(!ye||!fe)return fe;const Ke={},$e={},Bt={accumulated:null,zoom:0},gt={properties:null},st=Object.keys(ye);for(const xt of st){const[zt,St]=ye[xt],ar=m.d4(St),Yt=m.d4(typeof zt=="string"?[zt,["accumulated"],["get",xt]]:zt);Ke[xt]=ar.value,$e[xt]=Yt.value}return fe.map=xt=>{gt.properties=xt;const zt={};for(const St of st)zt[St]=Ke[St].evaluate(Bt,gt);return zt},fe.reduce=(xt,zt)=>{gt.properties=zt;for(const St of st)Bt.accumulated=xt[St],xt[St]=$e[St].evaluate(Bt,gt)},fe})(he)).load(ft.features):(function(fe,ye){return new Sr(fe,ye)})(ft,he.geojsonVtOptions)}class un{constructor(he){this.self=he,this.actor=new m.L(he),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(fe,ye)=>{if(this.externalWorkerSourceTypes[fe])throw new Error(`Worker source with name "${fe}" already registered.`);this.externalWorkerSourceTypes[fe]=ye},this.self.addProtocol=m.cK,this.self.removeProtocol=m.cL,this.self.registerRTLTextPlugin=fe=>{m.d5.setMethods(fe)},this.actor.registerMessageHandler("LDT",((fe,ye)=>this._getDEMWorkerSource(fe,ye.source).loadTile(ye))),this.actor.registerMessageHandler("RDT",((fe,ye)=>m._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(fe,ye.source).removeTile(ye)})))),this.actor.registerMessageHandler("GCEZ",((fe,ye)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(fe,ye.type,ye.source).getClusterExpansionZoom(ye)})))),this.actor.registerMessageHandler("GCC",((fe,ye)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(fe,ye.type,ye.source).getClusterChildren(ye)})))),this.actor.registerMessageHandler("GCL",((fe,ye)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(fe,ye.type,ye.source).getClusterLeaves(ye)})))),this.actor.registerMessageHandler("LD",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).loadData(ye))),this.actor.registerMessageHandler("GD",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).getData())),this.actor.registerMessageHandler("LT",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).loadTile(ye))),this.actor.registerMessageHandler("RT",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).reloadTile(ye))),this.actor.registerMessageHandler("AT",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).abortTile(ye))),this.actor.registerMessageHandler("RMT",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).removeTile(ye))),this.actor.registerMessageHandler("RS",((fe,ye)=>m._(this,void 0,void 0,(function*(){if(!this.workerSources[fe]||!this.workerSources[fe][ye.type]||!this.workerSources[fe][ye.type][ye.source])return;const Ke=this.workerSources[fe][ye.type][ye.source];delete this.workerSources[fe][ye.type][ye.source],Ke.removeSource!==void 0&&Ke.removeSource(ye)})))),this.actor.registerMessageHandler("RM",(fe=>m._(this,void 0,void 0,(function*(){delete this.layerIndexes[fe],delete this.availableImages[fe],delete this.workerSources[fe],delete this.demWorkerSources[fe],this.globalStates.delete(fe)})))),this.actor.registerMessageHandler("SR",((fe,ye)=>m._(this,void 0,void 0,(function*(){this.referrer=ye})))),this.actor.registerMessageHandler("SRPS",((fe,ye)=>this._syncRTLPluginState(fe,ye))),this.actor.registerMessageHandler("IS",((fe,ye)=>m._(this,void 0,void 0,(function*(){this.self.importScripts(ye)})))),this.actor.registerMessageHandler("SI",((fe,ye)=>this._setImages(fe,ye))),this.actor.registerMessageHandler("UL",((fe,ye)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(fe).update(ye.layers,ye.removedIds,this._getGlobalState(fe))})))),this.actor.registerMessageHandler("UGS",((fe,ye)=>m._(this,void 0,void 0,(function*(){const Ke=this._getGlobalState(fe);for(const $e in ye)Ke[$e]=ye[$e]})))),this.actor.registerMessageHandler("SL",((fe,ye)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(fe).replace(ye,this._getGlobalState(fe))}))))}_getGlobalState(he){let fe=this.globalStates.get(he);return fe||(fe={},this.globalStates.set(he,fe)),fe}_setImages(he,fe){return m._(this,void 0,void 0,(function*(){this.availableImages[he]=fe;for(const ye in this.workerSources[he]){const Ke=this.workerSources[he][ye];for(const $e in Ke)Ke[$e].availableImages=fe}}))}_syncRTLPluginState(he,fe){return m._(this,void 0,void 0,(function*(){return yield m.d5.syncState(fe,this.self.importScripts)}))}_getAvailableImages(he){let fe=this.availableImages[he];return fe||(fe=[]),fe}_getLayerIndex(he){let fe=this.layerIndexes[he];return fe||(fe=this.layerIndexes[he]=new a),fe}_getWorkerSource(he,fe,ye){if(this.workerSources[he]||(this.workerSources[he]={}),this.workerSources[he][fe]||(this.workerSources[he][fe]={}),!this.workerSources[he][fe][ye]){const Ke={sendAsync:($e,Bt)=>($e.targetMapId=he,this.actor.sendAsync($e,Bt))};switch(fe){case"vector":this.workerSources[he][fe][ye]=new O(Ke,this._getLayerIndex(he),this._getAvailableImages(he));break;case"geojson":this.workerSources[he][fe][ye]=new Dr(Ke,this._getLayerIndex(he),this._getAvailableImages(he));break;default:this.workerSources[he][fe][ye]=new this.externalWorkerSourceTypes[fe](Ke,this._getLayerIndex(he),this._getAvailableImages(he))}}return this.workerSources[he][fe][ye]}_getDEMWorkerSource(he,fe){return this.demWorkerSources[he]||(this.demWorkerSources[he]={}),this.demWorkerSources[he][fe]||(this.demWorkerSources[he][fe]=new W),this.demWorkerSources[he][fe]}}return m.i(self)&&(self.worker=new un(self)),un})),h("index",["exports","./shared"],(function(m,a){var x="5.14.0";function S(){var w=new a.A(4);return a.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let I,U,Q;const P={frame(w,r,c){const d=requestAnimationFrame((b=>{y(),r(b)})),{unsubscribe:y}=a.s(w.signal,"abort",(()=>{y(),cancelAnimationFrame(d),c(new a.a(w.signal.reason))}),!1)},frameAsync(w){return new Promise(((r,c)=>{this.frame(w,r,c)}))},getImageData(w,r=0){return this.getImageCanvasContext(w).getImageData(-r,-r,w.width+2*r,w.height+2*r)},getImageCanvasContext(w){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=w.width,r.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(I||(I=document.createElement("a")),I.href=w,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return Q!==void 0?Q:!!matchMedia&&(U==null&&(U=matchMedia("(prefers-reduced-motion: reduce)")),U.matches)},set prefersReducedMotion(w){Q=w}},$=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function z(){return $.getCurrentTime()}class O{static testProp(r){if(!O.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in O.docStyle)return r[c];return r[0]}static create(r,c,d){const y=window.document.createElement(r);return c!==void 0&&(y.className=c),d&&d.appendChild(y),y}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(r,c){r.style[O.transformProp]=c}static addEventListener(r,c,d,y={}){r.addEventListener(c,d,"passive"in y?y:y.capture)}static removeEventListener(r,c,d,y={}){r.removeEventListener(c,d,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",O.suppressClickInternal,!0)}),0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,d){const y=c.boundingClientRect;return new a.P((d.clientX-y.left)/c.x-r.clientLeft,(d.clientY-y.top)/c.y-r.clientTop)}static mousePos(r,c){const d=O.getScale(r);return O.getPoint(r,d,c)}static touchPos(r,c){const d=[],y=O.getScale(r);for(let b=0;b<c.length;b++)d.push(O.getPoint(r,y,c[b]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),d=c.querySelectorAll("script");for(const y of d)y.remove();return O.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const d=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!d.includes("javascript:")&&!d.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const d of c)O.removeAttributes(d),O.clean(d)}static removeAttributes(r){for(const{name:c,value:d}of r.attributes)O.isPossiblyDangerous(c,d)&&r.removeAttribute(c)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const W={supported:!1,testSupport:function(w){!de&&ce&&(Se?ze(w):ne=w)}};let ne,ce,de=!1,Se=!1;function ze(w){const r=w.createTexture();w.bindTexture(w.TEXTURE_2D,r);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,ce),w.isContextLost())return;W.supported=!0}catch{}w.deleteTexture(r),de=!0}var Ze;typeof document<"u"&&(ce=document.createElement("img"),ce.onload=()=>{ne&&ze(ne),ne=null,Se=!0},ce.onerror=()=>{de=!0,ne=null},ce.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let r,c,d,y;w.resetRequestQueue=()=>{r=[],c=0,d=0,y={}},w.addThrottleControl=R=>{const H=d++;return y[H]=R,H},w.removeThrottleControl=R=>{delete y[R],E()},w.getImage=(R,H,K=!0)=>new Promise(((re,J)=>{W.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),a.e(R,{type:"image"}),r.push({abortController:H,requestParameters:R,supportImageRefresh:K,state:"queued",onError:Ae=>{J(Ae)},onSuccess:Ae=>{re(Ae)}}),E()}));const b=R=>a._(this,void 0,void 0,(function*(){R.state="running";const{requestParameters:H,supportImageRefresh:K,onError:re,onSuccess:J,abortController:Ae}=R,ve=K===!1&&!a.i(self)&&!a.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce(((Re,je)=>Re&&je==="accept"),!0));c++;const Me=ve?L(H,Ae):a.m(H,Ae);try{const Re=yield Me;delete R.abortController,R.state="completed",Re.data instanceof HTMLImageElement||a.b(Re.data)?J(Re):Re.data&&J({data:yield(Oe=Re.data,typeof createImageBitmap=="function"?a.f(Oe):a.h(Oe)),cacheControl:Re.cacheControl,expires:Re.expires})}catch(Re){delete R.abortController,re(Re)}finally{c--,E()}var Oe})),E=()=>{const R=(()=>{for(const H of Object.keys(y))if(y[H]())return!0;return!1})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=c;H<R&&r.length>0;H++){const K=r.shift();K.abortController.signal.aborted?H--:b(K)}},L=(R,H)=>new Promise(((K,re)=>{const J=new Image,Ae=R.url,ve=R.credentials;ve&&ve==="include"?J.crossOrigin="use-credentials":(ve&&ve==="same-origin"||!a.d(Ae))&&(J.crossOrigin="anonymous"),H.signal.addEventListener("abort",(()=>{J.src="",re(new a.a(H.signal.reason))})),J.fetchPriority="high",J.onload=()=>{J.onerror=J.onload=null,K({data:J})},J.onerror=()=>{J.onerror=J.onload=null,H.signal.aborted||re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},J.src=Ae}))})(Ze||(Ze={})),Ze.resetRequestQueue();class Qe{constructor(r){this._transformRequestFn=r??null}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function be(w){const r=[];if(typeof w=="string")r.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:d,url:y}of w){const b=`${d}${y}`;c.indexOf(b)===-1&&(c.push(b),r.push({id:d,url:y}))}}return r}function Ge(w,r,c){try{const d=new URL(w);return d.pathname+=`${r}${c}`,d.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function le(w){const{userImage:r}=w;return!!(r&&r.render&&r.render())&&(w.data.replace(new Uint8Array(r.data.buffer)),!0)}class ge extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const r of Object.keys(this.images))this.removeImage(r);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:d}of this.requestors)d(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const d=c.spriteData;c.data=new a.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let d=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,c){if(!r)return!0;let d=0;for(const y of r){if(y[0]<d||y[1]<y[0]||c<y[1])return!1;d=y[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const d=c.spriteData,y=d&&d.width||c.data.width,b=d&&d.height||c.data.height;return!(r[0]<0||y<r[0]||r[1]<0||b<r[1]||r[2]<0||y<r[2]||r[3]<0||b<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,d=!0){const y=this.getImage(r);if(d&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise(((c,d)=>{let y=!0;if(!this.isLoaded())for(const b of r)this.images[b]||(y=!1);this.isLoaded()||y?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})}))}_getImagesForIds(r){const c={};for(const d of r){let y=this.getImage(d);y||(this.fire(new a.l("styleimagemissing",{id:d})),y=this.getImage(d)),y?c[d]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:a.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],d=this.getImage(r);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{const y={w:d.data.width+2,h:d.data.height+2,x:0,y:0},b=new a.I(y,d);this.patterns[r]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const b in this.patterns)r.push(this.patterns[b].bin);const{w:c,h:d}=a.p(r),y=this.atlasImage;y.resize({width:c||1,height:d||1});for(const b in this.patterns){const{bin:E}=this.patterns[b],L=E.x+1,R=E.y+1,H=this.getImage(b).data,K=H.width,re=H.height;a.R.copy(H,y,{x:0,y:0},{x:L,y:R},{width:K,height:re}),a.R.copy(H,y,{x:0,y:re-1},{x:L,y:R-1},{width:K,height:1}),a.R.copy(H,y,{x:0,y:0},{x:L,y:R+re},{width:K,height:1}),a.R.copy(H,y,{x:K-1,y:0},{x:L-1,y:R},{width:1,height:re}),a.R.copy(H,y,{x:0,y:0},{x:L+K,y:R},{width:1,height:re})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const d=this.getImage(c);d||a.w(`Image with ID: "${c}" was not found`),le(d)&&this.updateImage(c,d)}}cloneImages(){const r={};for(const c in this.images){const d=this.images[c];r[c]=Object.assign(Object.assign({},d),{data:d.data?d.data.clone():null})}return r}}const Pe=1e20;function Fe(w,r,c,d,y,b,E,L,R){for(let H=r;H<r+d;H++)pt(w,c*b+H,b,y,E,L,R);for(let H=c;H<c+y;H++)pt(w,H*b+r,1,d,E,L,R)}function pt(w,r,c,d,y,b,E){b[0]=0,E[0]=-Pe,E[1]=Pe,y[0]=w[r];for(let L=1,R=0,H=0;L<d;L++){y[L]=w[r+L*c];const K=L*L;do{const re=b[R];H=(y[L]-y[re]+K-re*re)/(L-re)/2}while(H<=E[R]&&--R>-1);R++,b[R]=L,E[R]=H,E[R+1]=Pe}for(let L=0,R=0;L<d;L++){for(;E[R+1]<L;)R++;const H=b[R],K=L-H;w[r+L*c]=y[H]+K*K}}const ut=a.v.layout_symbol["text-font"].default.join(",");class At{constructor(r,c,d){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={},this.lang=d}setURL(r){this.url=r}getGlyphs(r){return a._(this,void 0,void 0,(function*(){const c=[];for(const b in r)for(const E of r[b])c.push(this._getAndCacheGlyphsPromise(b,E));const d=yield Promise.all(c),y={};for(const{stack:b,id:E,glyph:L}of d)y[b]||(y[b]={}),y[b][E]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};return y}))}_getAndCacheGlyphsPromise(r,c){return a._(this,void 0,void 0,(function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let y=d.glyphs[c];return y!==void 0?{stack:r,id:c,glyph:y}:!this.url||this._charUsesLocalIdeographFontFamily(c)?(y=d.glyphs[c]=this._drawGlyph(d,r,c),{stack:r,id:c,glyph:y}):yield this._downloadAndCacheRangePromise(r,c)}))}_downloadAndCacheRangePromise(r,c){return a._(this,void 0,void 0,(function*(){const d=this.entries[r],y=Math.floor(c/256);if(d.ranges[y])return{stack:r,id:c,glyph:null};if(!d.requests[y]){const b=At.loadGlyphRange(r,y,this.url,this.requestManager);d.requests[y]=b}try{const b=yield d.requests[y];for(const E in b)d.glyphs[+E]=b[+E];return d.ranges[y]=!0,{stack:r,id:c,glyph:b[c]||null}}catch(b){const E=d.glyphs[c]=this._drawGlyph(d,r,c);return this._warnOnMissingGlyphRange(E,y,c,b),{stack:r,id:c,glyph:E}}}))}_warnOnMissingGlyphRange(r,c,d,y){const b=256*c,E=b+255,L=d.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${c}, ${b}-${E}. Rendering codepoint U+${L} locally instead. ${y}`)}_charUsesLocalIdeographFontFamily(r){return!!this.localIdeographFontFamily&&a.q(r)}_drawGlyph(r,c,d){const y=c===ut&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(d),b=y?"ideographTinySDF":"tinySDF";r[b]||(r[b]=this._createTinySDF(y?this.localIdeographFontFamily:c));const E=r[b].draw(String.fromCodePoint(d));return{id:d,bitmap:new a.r({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(r){const c=r?r.split(","):[];c.push("sans-serif");const d=c.map((y=>/[-\w]+/.test(y)?y:`'${CSS.escape(y)}'`)).join(",");return new At.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:this._fontWeight(c[0]),fontStyle:this._fontStyle(c[0]),lang:this.lang})}_fontStyle(r){return/italic/i.test(r)?"italic":/oblique/i.test(r)?"oblique":"normal"}_fontWeight(r){const c={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let d;for(const[y,b]of Object.entries(c))new RegExp(`\\b${y}\\b`,"i").test(r)&&(d=`${b}`);return d}destroy(){for(const r in this.entries){const c=this.entries[r];c.tinySDF&&(c.tinySDF=null),c.ideographTinySDF&&(c.ideographTinySDF=null),c.glyphs={},c.requests={},c.ranges={}}this.entries={}}}At.loadGlyphRange=function(w,r,c,d){return a._(this,void 0,void 0,(function*(){const y=256*r,b=y+255,E=d.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${y}-${b}`),"Glyphs"),L=yield a.n(E,new AbortController);if(!L||!L.data)throw new Error(`Could not load glyph range. range: ${r}, ${y}-${b}`);const R={};for(const H of a.o(L.data))R[H.id]=H;return R}))},At.TinySDF=class{constructor({fontSize:w=24,buffer:r=3,radius:c=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:E="normal",lang:L=null}={}){this.buffer=r,this.cutoff=d,this.radius=c,this.lang=L;const R=this.size=w+4*r,H=this._createCanvas(R),K=this.ctx=H.getContext("2d",{willReadFrequently:!0});K.font=`${E} ${b} ${w}px ${y}`,K.textBaseline="alphabetic",K.textAlign="left",K.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(w){const r=document.createElement("canvas");return r.width=r.height=w,r}draw(w){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(w),E=Math.ceil(c),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),R=Math.min(this.size-this.buffer,E+Math.ceil(d)),H=L+2*this.buffer,K=R+2*this.buffer,re=Math.max(H*K,0),J=new Uint8ClampedArray(re),Ae={data:J,width:H,height:K,glyphWidth:L,glyphHeight:R,glyphTop:E,glyphLeft:0,glyphAdvance:r};if(L===0||R===0)return Ae;const{ctx:ve,buffer:Me,gridInner:Oe,gridOuter:Re}=this;this.lang&&(ve.lang=this.lang),ve.clearRect(Me,Me,L,R),ve.fillText(w,Me,Me+E);const je=ve.getImageData(Me,Me,L,R);Re.fill(Pe,0,re),Oe.fill(0,0,re);for(let it=0;it<R;it++)for(let We=0;We<L;We++){const ot=je.data[4*(it*L+We)+3]/255;if(ot===0)continue;const ht=(it+Me)*H+We+Me;if(ot===1)Re[ht]=0,Oe[ht]=Pe;else{const rt=.5-ot;Re[ht]=rt>0?rt*rt:0,Oe[ht]=rt<0?rt*rt:0}}Fe(Re,0,0,H,K,H,this.f,this.v,this.z),Fe(Oe,Me,Me,L,R,H,this.f,this.v,this.z);for(let it=0;it<re;it++){const We=Math.sqrt(Re[it])-Math.sqrt(Oe[it]);J[it]=Math.round(255-255*(We/this.radius+this.cutoff))}return Ae}};class Ne{constructor(){this.specification=a.u.light.position}possiblyEvaluate(r,c){return a.F(r.expression.evaluate(c))}interpolate(r,c,d){return{x:a.G.number(r.x,c.x,d),y:a.G.number(r.y,c.y,d),z:a.G.number(r.z,c.z,d)}}}let Ie;class yt extends a.E{constructor(r){super(),Ie=Ie||new a.t({anchor:new a.D(a.u.light.anchor),position:new Ne,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(Ie,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(a.y,r,c))for(const d in r){const y=r[d];d.endsWith(a.z)?this._transitionable.setTransition(d.slice(0,-a.z.length),y):this._transitionable.setValue(d,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,d){return(!d||d.validate!==!1)&&a.B(this,r.call(a.C,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}const Ue=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class ie extends a.E{constructor(r){super(),this._transitionable=new a.x(Ue,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(r,c={}){if(!this._validate(a.J,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in r){const y=r[d];d.endsWith(a.z)?this._transitionable.setTransition(d.slice(0,-a.z.length),y):this._transitionable.setValue(d,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,d={}){return d?.validate!==!1&&a.B(this,r.call(a.C,a.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Ee{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const d=r.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,c)),this.dashEntry[d]}getDashRanges(r,c,d){const y=[];let b=r.length%2==1?-r[r.length-1]*d:0,E=r[0]*d,L=!0;y.push({left:b,right:E,isDash:L,zeroLength:r[0]===0});let R=r[0];for(let H=1;H<r.length;H++){L=!L;const K=r[H];b=R*d,R+=K,E=R*d,y.push({left:b,right:E,isDash:L,zeroLength:K===0})}return y}addRoundDash(r,c,d){const y=c/2;for(let b=-d;b<=d;b++){const E=this.width*(this.nextRow+d+b);let L=0,R=r[L];for(let H=0;H<this.width;H++){H/R.right>1&&(R=r[++L]);const K=Math.abs(H-R.left),re=Math.abs(H-R.right),J=Math.min(K,re);let Ae;const ve=b/d*(y+1);if(R.isDash){const Me=y-Math.abs(ve);Ae=Math.sqrt(J*J+Me*Me)}else Ae=y-Math.sqrt(J*J+ve*ve);this.data[E+H]=Math.max(0,Math.min(255,Ae+128))}}}addRegularDash(r){for(let L=r.length-1;L>=0;--L){const R=r[L],H=r[L+1];R.zeroLength?r.splice(L,1):H&&H.isDash===R.isDash&&(H.left=R.left,r.splice(L,1))}const c=r[0],d=r[r.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const y=this.width*this.nextRow;let b=0,E=r[b];for(let L=0;L<this.width;L++){L/E.right>1&&(E=r[++b]);const R=Math.abs(L-E.left),H=Math.abs(L-E.right),K=Math.min(R,H);this.data[y+L]=Math.max(0,Math.min(255,(E.isDash?K:-K)+128))}}addDash(r,c){const d=c?7:0,y=2*d+1;if(this.nextRow+y>this.height)return a.w("LineAtlas out of space"),null;let b=0;for(let L=0;L<r.length;L++)b+=r[L];if(b!==0){const L=this.width/b,R=this.getDashRanges(r,this.width,L);c?this.addRoundDash(R,L,d):this.addRegularDash(R)}const E={y:this.nextRow+d,height:2*d,width:b};return this.nextRow+=y,this.dirty=!0,E}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const De="maplibre_preloaded_worker_pool";class Ye{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ye.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[De]}numActive(){return Object.keys(this.active).length}}const at=Math.floor(P.hardwareConcurrency/2);let tt,wt;function Et(){return tt||(tt=new Ye),tt}Ye.workerCount=a.K(globalThis)?Math.max(Math.min(at,3),1):1;class Pt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const d=this.workerPool.acquire(c);for(let y=0;y<d.length;y++){const b=new a.L(d[y],c);b.name=`Worker ${y}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const d=[];for(const y of this.actors)d.push(y.sendAsync({type:r,data:c}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const d of this.actors)d.registerMessageHandler(r,c)}unregisterMessageHandler(r){for(const c of this.actors)c.unregisterMessageHandler(r)}}function Wt(){return wt||(wt=new Pt(Et(),a.M),wt.registerMessageHandler("GR",((w,r,c)=>a.m(r,c)))),wt}function lr(w,r){const c=a.N();return a.O(c,c,[1,1,0]),a.Q(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?a.S(c,c,w.calculatePosMatrix(r.toUnwrapped())):c}function fr(w,r,c,d,y,b,E){var L;const R=(function(J,Ae,ve){if(J)for(const Me of J){const Oe=Ae[Me];if(Oe&&Oe.source===ve&&Oe.type==="fill-extrusion")return!0}else for(const Me in Ae){const Oe=Ae[Me];if(Oe.source===ve&&Oe.type==="fill-extrusion")return!0}return!1})((L=y?.layers)!==null&&L!==void 0?L:null,r,w.id),H=b.maxPitchScaleFactor(),K=w.tilesIn(d,H,R);K.sort(Br);const re=[];for(const J of K)re.push({wrappedTileID:J.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(r,c,w.getState(),J.queryGeometry,J.cameraQueryGeometry,J.scale,y,b,H,lr(b,J.tileID),E?(Ae,ve)=>E(J.tileID,Ae,ve):void 0)});return(function(J,Ae){for(const ve in J)for(const Me of J[ve])He(Me,Ae);return J})((function(J){const Ae={},ve={};for(const Me of J){const Oe=Me.queryResults,Re=Me.wrappedTileID,je=ve[Re]=ve[Re]||{};for(const it in Oe){const We=Oe[it],ot=je[it]=je[it]||{},ht=Ae[it]=Ae[it]||[];for(const rt of We)ot[rt.featureIndex]||(ot[rt.featureIndex]=!0,ht.push(rt))}}return Ae})(re),w)}function Br(w,r){const c=w.tileID,d=r.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}function He(w,r){const c=w.feature,d=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=d}function yr(w,r,c){return a._(this,void 0,void 0,(function*(){let d=w;if(w.url?d=(yield a.j(r.transformRequest(w.url,"Source"),c)).data:yield P.frameAsync(c),!d)return null;const y=a.U(a.e(d,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(y.vectorLayerIds=d.vector_layers.map((b=>b.id))),y}))}class kr{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.V?new a.V(r.lng,r.lat):a.V.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.V?new a.V(r.lng,r.lat):a.V.convert(r),this}extend(r){const c=this._sw,d=this._ne;let y,b;if(r instanceof a.V)y=r,b=r;else{if(!(r instanceof kr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(kr.convert(r)):this.extend(a.V.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.V.convert(r)):this;if(y=r._sw,b=r._ne,!y||!b)return this}return c||d?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),d.lng=Math.max(b.lng,d.lng),d.lat=Math.max(b.lat,d.lat)):(this._sw=new a.V(y.lng,y.lat),this._ne=new a.V(b.lng,b.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:d}=a.V.convert(r);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&y}intersects(r){if(!((r=kr.convert(r)).getNorth()>=this.getSouth()&&r.getSouth()<=this.getNorth()))return!1;const c=a.W(this.getWest(),-180,180),d=a.W(this.getEast(),-180,180),y=a.W(r.getWest(),-180,180),b=a.W(r.getEast(),-180,180),E=c>=d,L=y>=b;return!(!E||!L)||(E?b>=c||y<=d:L?d>=y||c<=b:y<=d&&b>=c)}static convert(r){return r instanceof kr?r:r&&new kr(r)}static fromLngLat(r,c=0){const d=360*c/40075017,y=d/Math.cos(Math.PI/180*r.lat);return new kr(new a.V(r.lng-y,r.lat-d),new a.V(r.lng+y,r.lat+d))}adjustAntiMeridian(){const r=new a.V(this._sw.lng,this._sw.lat),c=new a.V(this._ne.lng,this._ne.lat);return new kr(r,r.lng>c.lng?new a.V(c.lng+360,c.lat):c)}}class qr{constructor(r,c,d){this.bounds=kr.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),d=Math.floor(a.Y(this.bounds.getWest())*c),y=Math.floor(a.X(this.bounds.getNorth())*c),b=Math.ceil(a.Y(this.bounds.getEast())*c),E=Math.ceil(a.X(this.bounds.getSouth())*c);return r.x>=d&&r.x<b&&r.y>=y&&r.y<E}}class or extends a.E{constructor(r,c,d,y){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(c,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield yr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),r&&(a.e(this,r),r.bounds&&(this.tileBounds=new qr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,a.Z(r)||this.fire(new a.k(r))}}))}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(r){return a._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(r)};d.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise(((b,E)=>{r.reloadPromise={resolve:b,reject:E}}))}else r.actor=this.dispatcher.getActor(),y="LT";r.abortController=new AbortController;try{const b=yield r.actor.sendAsync({type:y,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,b)}catch(b){if(delete r.abortController,r.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(r,null)}}))}_getOverzoomParameters(r){if(r.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const c=r.tileID.scaledTo(this.maxzoom).canonical,d=c.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:c,overzoomRequest:this.map._requestManager.transformRequest(d,"Tile")}}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return a._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}unloadTile(r){return a._(this,void 0,void 0,(function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class $r extends a.E{constructor(r,c,d,y){super(),this.id=r,this.dispatcher=d,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},c),a.e(this,a.U(c,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(r=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield yr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(a.e(this,c),c.bounds&&(this.tileBounds=new qr(c.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,a.Z(c)||this.fire(new a.k(c))}}))}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}serialize(){return a.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return a._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield Ze.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const y=this.map.painter.context,b=y.gl,E=d.data;r.texture=this.map.painter.getTileTexture(E.width),r.texture?r.texture.update(E,{useMipmap:!0}):(r.texture=new a.T(y,E,b.RGBA,{useMipmap:!0}),r.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}}))}abortTile(r){return a._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)}))}unloadTile(r){return a._(this,void 0,void 0,(function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)}))}hasTransition(){return!1}}class Sr extends $r{constructor(r,c,d,y){super(r,c,d,y),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return a._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const y=yield Ze.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(y&&y.data){const b=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&r.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const E=a.b(b)&&a.$()?b:yield this.readImageNow(b),L={type:this.type,uid:r.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const R=yield r.actor.sendAsync({type:"LDT",data:L});r.dem=R,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(y){if(delete r.abortController,r.aborted)r.state="unloaded";else if(y)throw r.state="errored",y}}))}readImageNow(r){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.a0()){const c=r.width+2,d=r.height+2;try{return new a.R({width:c,height:d},yield a.a1(r,-1,-1,c,d))}catch{}}return P.getImageData(r,1)}))}_getNeighboringTiles(r){const c=r.canonical,d=Math.pow(2,c.z),y=(c.x-1+d)%d,b=c.x===0?r.wrap-1:r.wrap,E=(c.x+1+d)%d,L=c.x+1===d?r.wrap+1:r.wrap,R={};return R[new a.a2(r.overscaledZ,b,c.z,y,c.y).key]={backfilled:!1},R[new a.a2(r.overscaledZ,L,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(R[new a.a2(r.overscaledZ,b,c.z,y,c.y-1).key]={backfilled:!1},R[new a.a2(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},R[new a.a2(r.overscaledZ,L,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<d&&(R[new a.a2(r.overscaledZ,b,c.z,y,c.y+1).key]={backfilled:!1},R[new a.a2(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},R[new a.a2(r.overscaledZ,L,c.z,E,c.y+1).key]={backfilled:!1}),R}unloadTile(r){return a._(this,void 0,void 0,(function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))}))}}function Qr(w){return w.type==="GeometryCollection"?w.geometries.map((r=>r.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function Dr(w){const r=new kr;let c;switch(w.type){case"FeatureCollection":c=w.features.map((d=>Qr(d.geometry))).flat(1/0);break;case"Feature":c=Qr(w.geometry);break;default:c=Qr(w)}if(c.length==0)return r;for(let d=0;d<c.length-1;d+=2)r.extend([c[d],c[d+1]]);return r}class Qn extends a.E{constructor(r,c,d,y){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=d.getActor(),this.setEventedParent(y),this._data=typeof c.data=="string"?{url:c.data}:{geojson:c.data},this._options=a.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:a.a5,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.a5,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(r){return r*(a.a5/this.tileSize)}_getClusterMaxZoom(r){const c=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${c}"`),c}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(r){this.map=r,this.load()}setData(r,c){this._data=typeof r=="string"?{url:r}:{geojson:r},this._pendingWorkerUpdate={data:r};const d=this._updateWorkerData();return c?d:this}updateData(r,c){this._pendingWorkerUpdate.diff=a.a6(this._pendingWorkerUpdate.diff,r);const d=this._updateWorkerData();return c?d:this}getData(){return a._(this,void 0,void 0,(function*(){const r=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return Dr(yield this.getData())}))}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:d}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:r,diff:c}=this._pendingWorkerUpdate,d=a.e({type:this.type},this.workerOptions);r!==void 0?(typeof r=="string"?(d.request=this.map._requestManager.transformRequest(P.resolveURL(r),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=r,this._pendingWorkerUpdate.data=void 0):c&&(d.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const y=yield this.actor.sendAsync({type:"LD",data:d});if(this._isUpdatingWorker=!1,this._removed||y.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));c&&this._applyDiff(c);let b=null;y.resourceTiming&&y.resourceTiming[this.id]&&(b=y.resourceTiming[this.id].slice(0));const E={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&a.e(E,{resourceTiming:b}),this.fire(new a.l("data",Object.assign(Object.assign({},E),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},E),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(c)})))}catch(y){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(y))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(r){const c=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){if(!a.a7(this._data.geojson,c))throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:a.a8(this._data.geojson,c)}}this._data.updateable&&a.a9(this._data.updateable,r,c)}_getShouldReloadTileOptions(r){if(this._options.cluster||!r||r.removeAll)return;const{add:c=[],update:d=[],remove:y=[]}=r||{},b=new Set([...d.map((E=>E.id)),...y]);for(const E of b.values())if(typeof E!="number"&&this.promoteId==null)return void a.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs. Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...d.map((E=>E.newGeometry)),...c.map((E=>E.geometry))].filter(Boolean).map((E=>Dr(E))),prevIds:b}}shouldReloadTile(r,{nextBounds:c,prevIds:d}){if(!r.latestFeatureIndex)return r.state!=="unloaded";const y=r.latestFeatureIndex.loadVTLayers();for(let R=0;R<r.latestFeatureIndex.featureIndexArray.length;R++){const H=r.latestFeatureIndex.featureIndexArray.get(R),K=y[a.aa].feature(H.featureIndex),re=r.latestFeatureIndex.getId(K,a.aa);if(d.has(re))return!0}const{buffer:b,extent:E}=this.workerOptions.geojsonVtOptions,L=(function({x:R,y:H,z:K},re=0){const J=a.a3((R-re)/Math.pow(2,K)),Ae=a.a4((H+1+re)/Math.pow(2,K)),ve=a.a3((R+1+re)/Math.pow(2,K)),Me=a.a4((H-re)/Math.pow(2,K));return new kr([J,Ae],[ve,Me])})(r.tileID.canonical,b/E);for(const R of c)if(L.intersects(R))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(r){return a._(this,void 0,void 0,(function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const y=yield this.actor.sendAsync({type:c,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(y,this.map.painter,c==="RT")}))}abortTile(r){return a._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0}))}unloadTile(r){return a._(this,void 0,void 0,(function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class un extends a.E{constructor(r,c,d,y){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(r){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield Ze.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,a.Z(c)||this.fire(new a.k(c))}}))}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(a.ab.fromLngLat);var d;return this.tileID=(function(y){const b=a.ac.fromPoints(y),E=b.width(),L=b.height(),R=Math.max(E,L),H=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),K=Math.pow(2,H);return new a.ae(H,Math.floor((b.minX+b.maxX)/2*K),Math.floor((b.minY+b.maxY)/2*K))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((y=>this.tileID.getTilePoint(y)._round())),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new a.T(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let d=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:c,minY:d,maxX:y,maxY:b}=a.ac.fromPoints(r),E={};for(let L=0;L<=a.ad;L++){const R=Math.pow(2,L),H=Math.floor(c*R),K=Math.floor(d*R),re=Math.floor(y*R),J=Math.floor(b*R);E[L]={minTileX:H,minTileY:K,maxTileX:re,maxTileY:J}}return E}}class ft extends un{constructor(r,c,d,y){super(r,c,d,y),this.roundZoom=!0,this.type="video",this.options=c}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield a.af(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new a.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new a.k(new a.ag(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let d=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class he extends un{constructor(r,c,d,y){super(r,c,d,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((E=>typeof E!="number"))))||this.fire(new a.k(new a.ag(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.ag(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.k(new a.ag(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.ag(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.ag(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,d=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new a.T(c,this.canvas,d.RGBA,{premultiply:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const fe={},ye=w=>{switch(w){case"geojson":return Qn;case"image":return un;case"raster":return $r;case"raster-dem":return Sr;case"vector":return or;case"video":return ft;case"canvas":return he}return fe[w]},Ke="RTLPluginLoaded";class $e extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Wt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return a._(this,arguments,void 0,(function*(c,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Ke))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Bt=null;function gt(){return Bt||(Bt=new $e),Bt}var st,xt;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(st||(st={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(xt||(xt={}));class zt{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=r,this.uid=a.ah(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(r){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(r||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:r,fadingDirection:c,fadingParentID:d,fadeEndTime:y}){this.resetFadeLogic(),this.fadingRole=r,this.fadingDirection=c,this.fadingParentID=d,this.fadeEndTime=y}setSelfFadeLogic(r){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=r}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=z(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData,this.latestFeatureIndex.encoding=r.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=(function(y,b){const E={};if(!b)return E;for(const L of y){const R=L.layerIds.map((H=>b.getLayer(H))).filter(Boolean);if(R.length!==0){L.layers=R,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map((H=>R.filter((K=>K.id===H))[0])));for(const H of R)E[H.id]=L}}return E})(r.buckets,c?.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof a.aj){if(this.hasSymbolBuckets=!0,!d)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof a.aj&&b.hasRTLText){this.hasRTLText=!0,gt().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(b))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),this.dashPositions=r.dashPositions}else this.collisionBoxArray=new a.ai}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const y=this.buckets[d];y.uploadPending()&&y.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,d,y,b,E,L,R,H,K,re){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:E,tileSize:this.tileSize,pixelPosMatrix:K,transform:R,params:L,queryPadding:this.queryPadding*H,getElevation:re},r,c,d):{}}querySourceFeatures(r,c){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const y=d.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",E=y[a.aa]||y[b];if(!E)return;const L=a.ak(c?.filter,c?.globalState),{z:R,x:H,y:K}=this.tileID.canonical,re={z:R,x:H,y:K};for(let J=0;J<E.length;J++){const Ae=E.feature(J);if(L.needGeometry){const Oe=a.al(Ae,!0);if(!L.filter(new a.H(this.tileID.overscaledZ),Oe,this.tileID.canonical))continue}else if(!L.filter(new a.H(this.tileID.overscaledZ),Ae))continue;const ve=d.getId(Ae,b),Me=new a.am(Ae,R,H,K,ve);Me.tile=re,r.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const d=a.an(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let y=!1;if(this.expirationTime>d)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const b=this.expirationTime-c;b?this.expirationTime=d+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const b=this.buckets[y],E=b.layers[0].sourceLayer||a.aa,L=d[E],R=r[E];if(!L||!R||Object.keys(R).length===0)continue;b.update(R,L,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const H=c&&c.style&&c.style.getLayer(y);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(b)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<z()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(r){this.symbolFadeHoldUntil=z()+r}setDependencies(r,c){const d={};for(const y of c)d[y]=!0;this.dependencies[r]=d}hasDependency(r,c){for(const d of r){const y=this.dependencies[d];if(y){for(const b of c)if(y[b])return!0}}return!1}}class St{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,d){const y=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},a.e(this.stateChanges[r][y],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const b in this.state[r])b!==y&&(this.deletedStates[r][b]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const b in this.state[r][y])d[b]||(this.deletedStates[r][y][b]=null)}else for(const b in d)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][b]===null&&delete this.deletedStates[r][y][b]}removeFeatureState(r,c,d){if(this.deletedStates[r]===null)return;const y=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&c!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][d]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(d in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][d]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,c){const d=String(c),y=a.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const b=this.deletedStates[r][c];if(b===null)return{};for(const E in b)delete y[E]}return y}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const d={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const E in this.stateChanges[y])this.state[y][E]||(this.state[y][E]={}),a.e(this.state[y][E],this.stateChanges[y][E]),b[E]=this.state[y][E];d[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const E in this.state[y])b[E]={},this.state[y][E]={};else for(const E in this.deletedStates[y]){if(this.deletedStates[y][E]===null)this.state[y][E]={};else for(const L of Object.keys(this.deletedStates[y][E]))delete this.state[y][E][L];b[E]=this.state[y][E]}d[y]=d[y]||{},a.e(d[y],b)}this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0&&r.setFeatureState(d,c)}}const ar=89.25;function Yt(w,r){const c=a.ao(r.lat,-a.ap,a.ap);return new a.P(a.Y(r.lng)*w,a.X(c)*w)}function hr(w,r){return new a.ab(r.x/w,r.y/w).toLngLat()}function tn(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(a.aq(90-w.pitch)),Math.tan(a.aq(ar-w.pitch)))}function Ir(w,r){const c=w.canonical,d=r/a.ar(c.z),y=c.x+Math.pow(2,c.z)*w.wrap,b=a.as(new Float64Array(16));return a.O(b,b,[y*d,c.y*d,0]),a.Q(b,b,[d/a.a5,d/a.a5,1]),b}function dt(w,r,c,d,y){const b=a.ab.fromLngLat(w,r),E=y*a.at(1,w.lat),{x:L,y:R,z:H}=en(c,d);return new a.ab(b.x+E*-L,b.y+E*-R,b.z+E*-H)}function en(w,r){const c=a.aq(w),d=a.aq(r),y=Math.cos(-c),b=Math.sin(c);return{x:b*Math.sin(d),y:-b*Math.cos(d),z:y}}function Rr(w,r,c){const d=r.intersectsFrustum(w);if(!c||d===0)return d;const y=r.intersectsPlane(c);return y===0?0:d===2&&y===2?2:1}function pr(w,r,c){let d=0;const y=(c-r)/10;for(let b=0;b<10;b++)d+=y*Math.pow(Math.cos(r+(b+.5)/10*(c-r)),w);return d}function Gr(w,r){return function(c,d,y,b,E){const L=2*((w-1)/a.au(Math.cos(a.aq(ar-E))/Math.cos(a.aq(ar)))-1),R=Math.acos(y/b),H=2*pr(L-1,0,a.aq(E/2)),K=Math.min(a.aq(ar),R+a.aq(E/2)),re=pr(L-1,Math.min(K,R-a.aq(E/2)),K),J=Math.atan(d/y),Ae=Math.hypot(d,y);let ve=c;return ve+=a.au(b/Ae/Math.max(.5,Math.cos(a.aq(E/2)))),ve+=L*a.au(Math.cos(J))/2,ve-=a.au(Math.max(1,re/H/r))/2,ve}}const Un=Gr(9.314,3);function _r(w,r){const c=(r.roundZoom?Math.round:Math.floor)(w.zoom+a.au(w.tileSize/r.tileSize));return Math.max(0,c)}function In(w,r){const c=w.getCameraFrustum(),d=w.getClippingPlane(),y=w.screenPointToMercatorCoordinate(w.getCameraPoint()),b=a.ab.fromLngLat(w.center,w.elevation);y.z=b.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const E=w.getCoveringTilesDetailsProvider(),L=E.allowVariableZoom(w,r),R=_r(w,r),H=r.minzoom||0,K=r.maxzoom!==void 0?r.maxzoom:w.maxZoom,re=Math.min(Math.max(0,R),K),J=Math.pow(2,re),Ae=[J*y.x,J*y.y,0],ve=[J*b.x,J*b.y,0],Me=Math.hypot(b.x-y.x,b.y-y.y),Oe=Math.abs(b.z-y.z),Re=Math.hypot(Me,Oe),je=ot=>({zoom:0,x:0,y:0,wrap:ot,fullyVisible:!1}),it=[],We=[];if(w.renderWorldCopies&&E.allowWorldCopies())for(let ot=1;ot<=3;ot++)it.push(je(-ot)),it.push(je(ot));for(it.push(je(0));it.length>0;){const ot=it.pop(),ht=ot.x,rt=ot.y;let vt=ot.fullyVisible;const Ut={x:ht,y:rt,z:ot.zoom},Tt=E.getTileBoundingVolume(Ut,ot.wrap,w.elevation,r);if(!vt){const cr=Rr(c,Tt,d);if(cr===0)continue;vt=cr===2}const Dt=E.distanceToTile2d(y.x,y.y,Ut,Tt);let Nt=R;L&&(Nt=(r.calculateTileZoom||Un)(w.zoom+a.au(w.tileSize/r.tileSize),Dt,Oe,Re,w.fov)),Nt=(r.roundZoom?Math.round:Math.floor)(Nt),Nt=Math.max(0,Nt);const rr=Math.min(Nt,K);if(ot.wrap=E.getWrap(b,Ut,ot.wrap),ot.zoom>=rr){if(ot.zoom<H)continue;const cr=re-ot.zoom,tr=Ae[0]-.5-(ht<<cr),Ur=Ae[1]-.5-(rt<<cr),yn=r.reparseOverscaled?Math.max(ot.zoom,Nt):ot.zoom;We.push({tileID:new a.a2(ot.zoom===K?yn:ot.zoom,ot.wrap,ot.zoom,ht,rt),distanceSq:a.av([ve[0]-.5-ht,ve[1]-.5-rt]),tileDistanceToCamera:Math.sqrt(tr*tr+Ur*Ur)})}else for(let cr=0;cr<4;cr++)it.push({zoom:ot.zoom+1,x:(ht<<1)+cr%2,y:(rt<<1)+(cr>>1),wrap:ot.wrap,fullyVisible:vt})}return We.sort(((ot,ht)=>ot.distanceSq-ht.distanceSq)).map((ot=>ot.tileID))}const bn=a.ac.fromPoints([new a.P(0,0),new a.P(a.a5,a.a5)]);function wn(w){return w==="raster"||w==="image"||w==="video"}function Ui(w,r,c,d,y,b,E){if(!r.hasData())return!1;const{tileID:L,fadingRole:R,fadingDirection:H,fadingParentID:K}=r;if(R===st.Base&&H===xt.Incoming&&K)return c[K.key]=K,!0;const re=Math.max(L.overscaledZ-y,b);for(let J=L.overscaledZ-1;J>=re;J--){const Ae=L.scaledTo(J),ve=w.getLoadedTile(Ae);if(ve)return r.setCrossFadeLogic({fadingRole:st.Base,fadingDirection:xt.Incoming,fadingParentID:ve.tileID,fadeEndTime:d+E}),ve.setCrossFadeLogic({fadingRole:st.Parent,fadingDirection:xt.Departing,fadeEndTime:d+E}),c[Ae.key]=Ae,!0}return!1}function oi(w,r,c,d,y,b){if(!r.hasData())return!1;const E=r.tileID.children(y);let L=Xt(w,r,E,c,d,y,b);if(L)return!0;for(const R of E)Xt(w,r,R.children(y),c,d,y,b)&&(L=!0);return L}function Xt(w,r,c,d,y,b,E){if(c[0].overscaledZ>=b)return!1;let L=!1;for(const R of c){const H=w.getLoadedTile(R);if(!H)continue;const{fadingRole:K,fadingDirection:re,fadingParentID:J}=H;K===st.Base&&re===xt.Departing&&J||(H.setCrossFadeLogic({fadingRole:st.Base,fadingDirection:xt.Departing,fadingParentID:r.tileID,fadeEndTime:y+E}),r.setCrossFadeLogic({fadingRole:st.Parent,fadingDirection:xt.Incoming,fadeEndTime:y+E})),d[R.key]=R,L=!0}return L}function Wn(w,r,c,d){const y=w.tileID;return!!w.selfFading||!w.hasData()&&!!r.has(y)&&(w.setSelfFadeLogic(c+d),!0)}function qi(w,r){var c;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let d=r.tileID.canonical.x-w.tileID.canonical.x;const y=r.tileID.canonical.y-w.tileID.canonical.y,b=Math.pow(2,w.tileID.canonical.z),E=r.tileID.key;d===0&&y===0||Math.abs(y)>1||(Math.abs(d)>1&&(Math.abs(d+b)===1?d+=b:Math.abs(d-b)===1&&(d-=b)),r.dem&&w.dem&&(w.dem.backfillBorder(r.dem,d,y),!((c=w.neighboringTiles)===null||c===void 0)&&c[E]&&(w.neighboringTiles[E].backfilled=!0)))}class rl{constructor(){this._tiles={}}handleWrapJump(r){const c={};for(const d in this._tiles){const y=this._tiles[d];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+r),c[y.tileID.key]=y}this._tiles=c}setFeatureState(r,c){for(const d in this._tiles)this._tiles[d].setFeatureState(r,c)}getAllTiles(){return Object.values(this._tiles)}getAllIds(r=!1){return r?Object.values(this._tiles).map((c=>c.tileID)).sort(a.ax).map((c=>c.key)):Object.keys(this._tiles)}getTileById(r){return this._tiles[r]}setTile(r,c){this._tiles[r]=c}deleteTileById(r){delete this._tiles[r]}getLoadedTile(r){const c=this.getTileById(r.key);return c?.hasData()?c:null}isIdRenderable(r,c=!1){var d;return(d=this.getTileById(r))===null||d===void 0?void 0:d.isRenderable(c)}getRenderableIds(r=0,c){const d=[];for(const y of this.getAllIds())this.isIdRenderable(y,c)&&d.push(this.getTileById(y));return c?d.sort(((y,b)=>{const E=y.tileID,L=b.tileID,R=new a.P(E.canonical.x,E.canonical.y)._rotate(-r),H=new a.P(L.canonical.x,L.canonical.y)._rotate(-r);return E.overscaledZ-L.overscaledZ||H.y-R.y||H.x-R.x})).map((y=>y.tileID.key)):d.map((y=>y.tileID)).sort(a.ax).map((y=>y.key))}}class rs extends a.E{constructor(r,c,d){super(),this.id=r,this.dispatcher=d,this.on("data",(y=>this._dataHandler(y))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((y,b,E,L)=>{const R=new(ye(b.type))(y,b,E,L);if(R.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${R.id}`);return R})(r,c,d,this),this._inViewTiles=new rl,this._outOfViewCache=new a.ay(0,(y=>this._unloadTile(y))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new St,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){for(const c of this._inViewTiles.getAllTiles())c.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r),this._inViewTiles=new rl}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r of this._inViewTiles.getAllTiles())if(r.state!=="loaded"&&r.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,d){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,d)}catch(y){r.state="errored",y.status!==404?this._source.fire(new a.k(y,{tile:r})):this.update(this.transform,this.terrain)}}))}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new a.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const c of this._inViewTiles.getAllTiles())c.upload(r),c.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(r){var c;return this._inViewTiles.getRenderableIds((c=this.transform)===null||c===void 0?void 0:c.bearingInRadians,r)}hasRenderableParent(r){const c=r.overscaledZ-1;if(c>=this._source.minzoom){const d=this.getLoadedTile(r.scaledTo(c));if(d)return this._inViewTiles.isIdRenderable(d.tileID.key)}return!1}reload(r,c=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const d of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(d);c&&!this._source.shouldReloadTile(y,c)||(r?this._reloadTile(d,"expired"):y.state!=="errored"&&this._reloadTile(d,"reloading"))}}}_reloadTile(r,c){return a._(this,void 0,void 0,(function*(){const d=this._inViewTiles.getTileById(r);d&&(d.state!=="loading"&&(d.state=c),yield this._loadTile(d,r,c))}))}_tileLoaded(r,c,d){r.timeAdded=z(),r.selfFading&&(r.fadeEndTime=r.timeAdded+this._rasterFadeDuration),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&(function(y,b){var E,L;const R=b.getRenderableIds();for(const H of R){if(!y.neighboringTiles||!y.neighboringTiles[H])continue;const K=b.getTileById(H);y.neighboringTiles[H].backfilled||qi(y,K),!((L=(E=K.neighboringTiles)===null||E===void 0?void 0:E[y.tileID.key])===null||L===void 0)&&L.backfilled||qi(K,y)}})(r,this._inViewTiles),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:r,coord:r.tileID}))}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._inViewTiles.getTileById(r)}_retainLoadedChildren(r,c){const d=this._getLoadedDescendents(c),y=new Set;for(const b of c){const E=d[b.key];if(!E?.length){y.add(b);continue}const L=b.overscaledZ+rs.maxOverzooming,R=E.filter((re=>re.tileID.overscaledZ<=L));if(!R.length){y.add(b);continue}const H=Math.min(...R.map((re=>re.tileID.overscaledZ))),K=R.filter((re=>re.tileID.overscaledZ===H)).map((re=>re.tileID));for(const re of K)r[re.key]=re;this._areDescendentsComplete(K,H,b.overscaledZ)||y.add(b)}return y}_getLoadedDescendents(r){var c;const d={};for(const y of this._inViewTiles.getAllTiles().filter((b=>b.hasData())))for(const b of r)y.tileID.isChildOf(b)&&(d[c=b.key]||(d[c]=[])).push(y);return d}_areDescendentsComplete(r,c,d){return r.length===1&&r[0].isOverscaled()?r[0].overscaledZ===c:Math.pow(4,c-d)===r.length}getLoadedTile(r){return this._inViewTiles.getLoadedTile(r)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(c*d*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._outOfViewCache.setMaxSize(b)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);this._prevLng=r,c&&(this._inViewTiles.handleWrapJump(c),this._resetTileReloadTimers())}update(r,c){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map((R=>new a.a2(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y))):(d=In(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?r.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter((R=>this._source.hasTile(R))))):d=[],this.usedForTerrain&&(d=this._addTerrainIdealTiles(d));const y=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,y&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const b=_r(r,this._source),E=this._updateRetainedTiles(d,b),L=wn(this._source.type);L&&this._rasterFadeDuration>0&&!c&&(function(R,H,K,re,J,Ae,ve){const Me=z(),Oe=a.aw(H);for(const Re of H){const je=R.getTileById(Re.key);je.fadingDirection!==xt.Departing&&je.fadeOpacity!==0||je.resetFadeLogic(),Ui(R,je,K,Me,re,J,ve)||oi(R,je,K,Me,Ae,ve)||Wn(je,Oe,Me,ve)||je.resetFadeLogic()}})(this._inViewTiles,d,E,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),L?this._cleanUpRasterTiles(E):this._cleanUpVectorTiles(E)}_cleanUpRasterTiles(r){for(const c of this._inViewTiles.getAllIds())r[c]||this._removeTile(c)}_cleanUpVectorTiles(r){for(const c of this._inViewTiles.getAllIds()){const d=this._inViewTiles.getTileById(c);r[c]?d.clearSymbolFadeHold():d.hasSymbolBuckets?d.holdingForSymbolFade()?d.symbolFadeFinished()&&this._removeTile(c):d.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(c)}}_addTerrainIdealTiles(r){const c=[];for(const d of r)if(d.canonical.z>this._source.minzoom){const y=d.scaledTo(d.canonical.z-1);c.push(y);const b=d.scaledTo(Math.max(this._source.minzoom,Math.min(d.canonical.z,5)));c.push(b)}return r.concat(c)}releaseSymbolFadeTiles(){for(const r of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(r).holdingForSymbolFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var d;const y=new Set;for(const H of r)this._addTile(H).hasData()||y.add(H);const b=r.reduce(((H,K)=>(H[K.key]=K,H)),{}),E=this._retainLoadedChildren(b,y),L={},R=Math.max(c-rs.maxUnderzooming,this._source.minzoom);for(const H of E){let K=this._inViewTiles.getTileById(H.key),re=K?.wasRequested();for(let J=H.overscaledZ-1;J>=R;--J){const Ae=H.scaledTo(J);if(L[Ae.key])break;if(L[Ae.key]=!0,K=this.getTile(Ae),!K&&re&&(K=this._addTile(Ae)),K){const ve=K.hasData();if((ve||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||re)&&(b[Ae.key]=Ae),re=K.wasRequested(),ve)break}}}return b}_addTile(r){let c=this._inViewTiles.getTileById(r.key);if(c)return c;c=this._outOfViewCache.getAndRemove(r),c&&(c.resetFadeLogic(),this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null));const d=c;return c||(c=new zt(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._inViewTiles.setTile(r.key,c),d||this._source.fire(new a.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){this._clearTileReloadTimer(r);const d=c.getExpiryTimeout();d&&(this._timers[r]=setTimeout((()=>{this._reloadTile(r,"expired"),delete this._timers[r]}),d))}_clearTileReloadTimer(r){const c=this._timers[r];c&&(clearTimeout(c),delete this._timers[r])}_resetTileReloadTimers(){for(const r in this._timers)clearTimeout(this._timers[r]),delete this._timers[r];for(const r of this._inViewTiles.getAllIds()){const c=this._inViewTiles.getTileById(r);this._setTileReloadTimer(r,c)}}refreshTiles(r){for(const c of this._inViewTiles.getAllIds()){const d=this._inViewTiles.getTileById(c);(this._inViewTiles.isIdRenderable(c)||d.state=="errored")&&r.some((y=>y.equals(d.tileID.canonical)))&&this._reloadTile(c,"expired")}}_removeTile(r){const c=this._inViewTiles.getTileById(r);c&&(c.uses--,this._inViewTiles.deleteTileById(r),this._clearTileReloadTimer(r),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._outOfViewCache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){r.dataType==="source"&&(r.sourceDataType!=="metadata"?r.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(r.sourceDataChanged,r.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r of this._inViewTiles.getAllIds())this._removeTile(r);this._outOfViewCache.reset()}tilesIn(r,c,d){const y=[],b=this.transform;if(!b)return y;const E=b.getCoveringTilesDetailsProvider().allowWorldCopies(),L=d?b.getCameraQueryGeometry(r):r,R=Ae=>b.screenPointToMercatorCoordinate(Ae,this.terrain),H=this.transformBbox(r,R,!E),K=this.transformBbox(L,R,!E),re=this.getIds(),J=a.ac.fromPoints(K);for(let Ae=0;Ae<re.length;Ae++){const ve=this._inViewTiles.getTileById(re[Ae]);if(ve.holdingForSymbolFade())continue;const Me=E?[ve.tileID]:[ve.tileID.unwrapTo(-1),ve.tileID.unwrapTo(0)],Oe=Math.pow(2,b.zoom-ve.tileID.overscaledZ),Re=c*ve.queryPadding*a.a5/ve.tileSize/Oe;for(const je of Me){const it=J.map((We=>je.getTilePoint(new a.ab(We.x,We.y))));if(it.expandBy(Re),it.intersects(bn)){const We=H.map((ht=>je.getTilePoint(ht))),ot=K.map((ht=>je.getTilePoint(ht)));y.push({tile:ve,tileID:E?je:je.unwrapTo(0),queryGeometry:We,cameraQueryGeometry:ot,scale:Oe})}}}return y}transformBbox(r,c,d){let y=r.map(c);if(d){const b=a.ac.fromPoints(r);b.shrinkBy(.001*Math.min(b.width(),b.height()));const E=b.map(c);a.ac.fromPoints(y).covers(E)||(y=y.map((L=>L.x>.5?new a.ab(L.x-1,L.y,L.z):L)))}return y}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map((d=>this._inViewTiles.getTileById(d).tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){return!!this._source.hasTransition()||!(!wn(this._source.type)||!(function(r,c){if(c<=0)return!1;const d=z();for(const y of r.getAllTiles())if(y.fadeEndTime>=d)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(r){this._rasterFadeDuration=r}setFeatureState(r,c,d){this._state.updateState(r=r||a.aa,c,d)}removeFeatureState(r,c,d){this._state.removeFeatureState(r=r||a.aa,c,d)}getFeatureState(r,c){return this._state.getState(r=r||a.aa,c)}setDependencies(r,c,d){const y=this._inViewTiles.getTileById(r);y&&y.setDependencies(c,d)}reloadTilesForDependencies(r,c){for(const d of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(d).hasDependency(r,c)&&this._reloadTile(d,"reloading");this._outOfViewCache.filter((d=>!d.hasDependency(r,c)))}areTilesLoaded(){for(const r of this._inViewTiles.getAllTiles())if(r.state!=="loaded"&&r.state!=="errored")return!1;return!0}}rs.maxUnderzooming=10,rs.maxOverzooming=3;class dr{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.ao(r,0,1);let c=1,d=this._distances[c];const y=r*this.paddedLength+this.padding;for(;d<y&&c<this._distances.length;)d=this._distances[++c];const b=c-1,E=this._distances[b],L=d-E,R=L>0?(y-E)/L:0;return this.points[b].mult(1-R).add(this.points[c].mult(R))}}function rn(w,r){let c=!0;return w==="always"||w!=="never"&&r!=="never"||(c=!1),c}class An{constructor(r,c,d){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(c/d);for(let E=0;E<this.xCellCount*this.yCellCount;E++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,d,y,b){this._forEachCell(c,d,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(r,c,d,y){this._forEachCell(c-y,d-y,c+y,d+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(d),this.circles.push(y)}_insertBoxCell(r,c,d,y,b,E){this.boxCells[b].push(E)}_insertCircleCell(r,c,d,y,b,E){this.circleCells[b].push(E)}_query(r,c,d,y,b,E,L){if(d<0||r>this.width||y<0||c>this.height)return[];const R=[];if(r<=0&&c<=0&&this.width<=d&&this.height<=y){if(b)return[{key:null,x1:r,y1:c,x2:d,y2:y}];for(let H=0;H<this.boxKeys.length;H++)R.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const K=this.circles[3*H],re=this.circles[3*H+1],J=this.circles[3*H+2];R.push({key:this.circleKeys[H],x1:K-J,y1:re-J,x2:K+J,y2:re+J})}}else this._forEachCell(r,c,d,y,this._queryCell,R,{hitTest:b,overlapMode:E,seenUids:{box:{},circle:{}}},L);return R}query(r,c,d,y){return this._query(r,c,d,y,!1,null)}hitTest(r,c,d,y,b,E){return this._query(r,c,d,y,!0,b,E).length>0}hitTestCircle(r,c,d,y,b){const E=r-d,L=r+d,R=c-d,H=c+d;if(L<0||E>this.width||H<0||R>this.height)return!1;const K=[];return this._forEachCell(E,R,L,H,this._queryCellCircle,K,{hitTest:!0,overlapMode:y,circle:{x:r,y:c,radius:d},seenUids:{box:{},circle:{}}},b),K.length>0}_queryCell(r,c,d,y,b,E,L,R){const{seenUids:H,hitTest:K,overlapMode:re}=L,J=this.boxCells[b];if(J!==null){const ve=this.bboxes;for(const Me of J)if(!H.box[Me]){H.box[Me]=!0;const Oe=4*Me,Re=this.boxKeys[Me];if(r<=ve[Oe+2]&&c<=ve[Oe+3]&&d>=ve[Oe+0]&&y>=ve[Oe+1]&&(!R||R(Re))&&(!K||!rn(re,Re.overlapMode))&&(E.push({key:Re,x1:ve[Oe],y1:ve[Oe+1],x2:ve[Oe+2],y2:ve[Oe+3]}),K))return!0}}const Ae=this.circleCells[b];if(Ae!==null){const ve=this.circles;for(const Me of Ae)if(!H.circle[Me]){H.circle[Me]=!0;const Oe=3*Me,Re=this.circleKeys[Me];if(this._circleAndRectCollide(ve[Oe],ve[Oe+1],ve[Oe+2],r,c,d,y)&&(!R||R(Re))&&(!K||!rn(re,Re.overlapMode))){const je=ve[Oe],it=ve[Oe+1],We=ve[Oe+2];if(E.push({key:Re,x1:je-We,y1:it-We,x2:je+We,y2:it+We}),K)return!0}}}return!1}_queryCellCircle(r,c,d,y,b,E,L,R){const{circle:H,seenUids:K,overlapMode:re}=L,J=this.boxCells[b];if(J!==null){const ve=this.bboxes;for(const Me of J)if(!K.box[Me]){K.box[Me]=!0;const Oe=4*Me,Re=this.boxKeys[Me];if(this._circleAndRectCollide(H.x,H.y,H.radius,ve[Oe+0],ve[Oe+1],ve[Oe+2],ve[Oe+3])&&(!R||R(Re))&&!rn(re,Re.overlapMode))return E.push(!0),!0}}const Ae=this.circleCells[b];if(Ae!==null){const ve=this.circles;for(const Me of Ae)if(!K.circle[Me]){K.circle[Me]=!0;const Oe=3*Me,Re=this.circleKeys[Me];if(this._circlesCollide(ve[Oe],ve[Oe+1],ve[Oe+2],H.x,H.y,H.radius)&&(!R||R(Re))&&!rn(re,Re.overlapMode))return E.push(!0),!0}}}_forEachCell(r,c,d,y,b,E,L,R){const H=this._convertToXCellCoord(r),K=this._convertToYCellCoord(c),re=this._convertToXCellCoord(d),J=this._convertToYCellCoord(y);for(let Ae=H;Ae<=re;Ae++)for(let ve=K;ve<=J;ve++)if(b.call(this,r,c,d,y,this.xCellCount*ve+Ae,E,L,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,d,y,b,E){const L=y-r,R=b-c,H=d+E;return H*H>L*L+R*R}_circleAndRectCollide(r,c,d,y,b,E,L){const R=(E-y)/2,H=Math.abs(r-(y+R));if(H>R+d)return!1;const K=(L-b)/2,re=Math.abs(c-(b+K));if(re>K+d)return!1;if(H<=R||re<=K)return!0;const J=H-R,Ae=re-K;return J*J+Ae*Ae<=d*d}}function Di(w,r,c){const d=a.N();if(!w){const{vecSouth:re,vecEast:J}=Ls(r),Ae=S();Ae[0]=J[0],Ae[1]=J[1],Ae[2]=re[0],Ae[3]=re[1],y=Ae,(K=(E=(b=Ae)[0])*(H=b[3])-(R=b[2])*(L=b[1]))&&(y[0]=H*(K=1/K),y[1]=-L*K,y[2]=-R*K,y[3]=E*K),d[0]=Ae[0],d[1]=Ae[1],d[4]=Ae[2],d[5]=Ae[3]}var y,b,E,L,R,H,K;return a.Q(d,d,[1/c,1/c,1]),d}function xl(w,r,c,d){if(w){const y=a.N();if(!r){const{vecSouth:b,vecEast:E}=Ls(c);y[0]=E[0],y[1]=E[1],y[4]=b[0],y[5]=b[1]}return a.Q(y,y,[d,d,1]),y}return c.pixelsToClipSpaceMatrix}function Ls(w){const r=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),d=Math.cos(w.pitchInRadians),y=Math.cos(w.bearingInRadians),b=Math.sin(w.bearingInRadians),E=a.aD();E[0]=-y*d*c-b*r,E[1]=-b*d*c+y*r;const L=a.aE(E);L<1e-9?a.aF(E):a.aG(E,E,1/L);const R=a.aD();R[0]=y*d*r-b*c,R[1]=b*d*r+y*c;const H=a.aE(R);return H<1e-9?a.aF(R):a.aG(R,R,1/H),{vecEast:R,vecSouth:E}}function hn(w,r,c,d){let y;d?(y=[w,r,d(w,r),1],a.aI(y,y,c)):(y=[w,r,0,1],CA(y,y,c));const b=y[3];return{point:new a.P(y[0]/b,y[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function nl(w,r){return .5+w/r*.5}function il(w,r){return w.x>=-r[0]&&w.x<=r[0]&&w.y>=-r[1]&&w.y<=r[1]}function Zl(w,r,c,d,y,b,E,L,R,H,K,re,J){const Ae=c?w.textSizeData:w.iconSizeData,ve=a.az(Ae,r.transform.zoom),Me=[256/r.width*2+1,256/r.height*2+1],Oe=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;Oe.clear();const Re=w.lineVertexArray,je=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,it=r.transform.width/r.transform.height;let We=!1;for(let ot=0;ot<je.length;ot++){const ht=je.get(ot);if(ht.hidden||ht.writingMode===a.aA.vertical&&!We){xa(ht.numGlyphs,Oe);continue}We=!1;const rt=new a.P(ht.anchorX,ht.anchorY),vt={getElevation:J,pitchedLabelPlaneMatrix:d,lineVertexArray:Re,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:rt,unwrappedTileID:R,width:H,height:K,translation:re},Ut=sl(ht.anchorX,ht.anchorY,vt);if(!il(Ut.point,Me)){xa(ht.numGlyphs,Oe);continue}const Tt=nl(r.transform.cameraToCenterDistance,Ut.signedDistanceFromCamera),Dt=a.aB(Ae,ve,ht),Nt=b?Dt*r.transform.getPitchedTextCorrection(ht.anchorX,ht.anchorY,R)/Tt:Dt*Tt,rr=Xl({projectionContext:vt,pitchedLabelPlaneMatrixInverse:y,symbol:ht,fontSize:Nt,flip:!1,keepUpright:E,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:Oe,aspectRatio:it,rotateToLine:L});We=rr.useVertical,(rr.notEnoughRoom||We||rr.needsFlipping&&Xl({projectionContext:vt,pitchedLabelPlaneMatrixInverse:y,symbol:ht,fontSize:Nt,flip:!0,keepUpright:E,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:Oe,aspectRatio:it,rotateToLine:L}).notEnoughRoom)&&xa(ht.numGlyphs,Oe)}c?w.text.dynamicLayoutVertexBuffer.updateData(Oe):w.icon.dynamicLayoutVertexBuffer.updateData(Oe)}function xc(w,r,c,d,y,b,E,L){const R=b.glyphStartIndex+b.numGlyphs,H=b.lineStartIndex,K=b.lineStartIndex+b.lineLength,re=r.getoffsetX(b.glyphStartIndex),J=r.getoffsetX(R-1),Ae=Uo(w*re,c,d,y,b.segment,H,K,L,E);if(!Ae)return null;const ve=Uo(w*J,c,d,y,b.segment,H,K,L,E);return ve?L.projectionCache.anyProjectionOccluded?null:{first:Ae,last:ve}:null}function fi(w,r,c,d){return w===a.aA.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*d?{useVertical:!0}:(w===a.aA.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Xl(w){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:d,fontSize:y,flip:b,keepUpright:E,glyphOffsetArray:L,dynamicLayoutVertexArray:R,aspectRatio:H,rotateToLine:K}=w,re=y/24,J=d.lineOffsetX*re,Ae=d.lineOffsetY*re;let ve;if(d.numGlyphs>1){const Me=d.glyphStartIndex+d.numGlyphs,Oe=d.lineStartIndex,Re=d.lineStartIndex+d.lineLength,je=xc(re,L,J,Ae,b,d,K,r);if(!je)return{notEnoughRoom:!0};const it=Jc(je.first.point.x,je.first.point.y,r,c),We=Jc(je.last.point.x,je.last.point.y,r,c);if(E&&!b){const ot=fi(d.writingMode,it,We,H);if(ot)return ot}ve=[je.first];for(let ot=d.glyphStartIndex+1;ot<Me-1;ot++){const ht=Uo(re*L.getoffsetX(ot),J,Ae,b,d.segment,Oe,Re,r,K);if(!ht)return{notEnoughRoom:!0};ve.push(ht)}ve.push(je.last)}else{if(E&&!b){const Oe=Hn(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,Re=d.lineStartIndex+d.segment+1,je=new a.P(r.lineVertexArray.getx(Re),r.lineVertexArray.gety(Re)),it=Hn(je.x,je.y,r),We=it.signedDistanceFromCamera>0?it.point:bl(r.tileAnchorPoint,je,Oe,1,r),ot=Jc(Oe.x,Oe.y,r,c),ht=Jc(We.x,We.y,r,c),rt=fi(d.writingMode,ot,ht,H);if(rt)return rt}const Me=Uo(re*L.getoffsetX(d.glyphStartIndex),J,Ae,b,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,r,K);if(!Me||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ve=[Me]}for(const Me of ve)a.aH(R,Me.point,Me.angle);return{}}function bl(w,r,c,d,y){const b=w.add(w.sub(r)._unit()),E=Hn(b.x,b.y,y).point,L=c.sub(E);return c.add(L._mult(d/L.mag()))}function Bi(w,r,c){const d=r.projectionCache;if(d.projections[w])return d.projections[w];const y=new a.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),b=Hn(y.x,y.y,r);if(b.signedDistanceFromCamera>0)return d.projections[w]=b.point,d.anyProjectionOccluded=d.anyProjectionOccluded||b.isOccluded,b.point;const E=w-c.direction;return bl(c.distanceFromAnchor===0?r.tileAnchorPoint:new a.P(r.lineVertexArray.getx(E),r.lineVertexArray.gety(E)),y,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function Hn(w,r,c){const d=w+c.translation[0],y=r+c.translation[1];let b;return c.pitchWithMap?(b=hn(d,y,c.pitchedLabelPlaneMatrix,c.getElevation),b.isOccluded=!1):(b=c.transform.projectTileCoordinates(d,y,c.unwrappedTileID,c.getElevation),b.point.x=(.5*b.point.x+.5)*c.width,b.point.y=(.5*-b.point.y+.5)*c.height),b}function Jc(w,r,c,d){if(c.pitchWithMap){const y=[w,r,0,1];return a.aI(y,y,d),c.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:1-r/c.height*2}}function sl(w,r,c){return c.transform.projectTileCoordinates(w,r,c.unwrappedTileID,c.getElevation)}function ol(w,r,c){return w._unit()._perp()._mult(r*c)}function Ms(w,r,c,d,y,b,E,L,R){if(L.projectionCache.offsets[w])return L.projectionCache.offsets[w];const H=c.add(r);if(w+R.direction<d||w+R.direction>=y)return L.projectionCache.offsets[w]=H,H;const K=Bi(w+R.direction,L,R),re=ol(K.sub(c),E,R.direction),J=c.add(re),Ae=K.add(re);return L.projectionCache.offsets[w]=a.aJ(b,H,J,Ae)||H,L.projectionCache.offsets[w]}function Uo(w,r,c,d,y,b,E,L,R){const H=d?w-r:w+r;let K=H>0?1:-1,re=0;d&&(K*=-1,re=Math.PI),K<0&&(re+=Math.PI);let J,Ae=K>0?b+y:b+y+1;L.projectionCache.cachedAnchorPoint?J=L.projectionCache.cachedAnchorPoint:(J=Hn(L.tileAnchorPoint.x,L.tileAnchorPoint.y,L).point,L.projectionCache.cachedAnchorPoint=J);let ve,Me,Oe=J,Re=J,je=0,it=0;const We=Math.abs(H),ot=[];let ht;for(;je+it<=We;){if(Ae+=K,Ae<b||Ae>=E)return null;je+=it,Re=Oe,Me=ve;const Ut={absOffsetX:We,direction:K,distanceFromAnchor:je,previousVertex:Re};if(Oe=Bi(Ae,L,Ut),c===0)ot.push(Re),ht=Oe.sub(Re);else{let Tt;const Dt=Oe.sub(Re);Tt=Dt.mag()===0?ol(Bi(Ae+K,L,Ut).sub(Oe),c,K):ol(Dt,c,K),Me||(Me=Re.add(Tt)),ve=Ms(Ae,Tt,Oe,b,E,Me,c,L,Ut),ot.push(Me),ht=ve.sub(Me)}it=ht.mag()}const rt=ht._mult((We-je)/it)._add(Me||Re),vt=re+Math.atan2(Oe.y-Re.y,Oe.x-Re.x);return ot.push(rt),{point:rt,angle:R?vt:0,path:ot}}const hs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xa(w,r){for(let c=0;c<w;c++){const d=r.length;r.resize(d+4),r.float32.set(hs,3*d)}}function CA(w,r,c){const d=r[0],y=r[1];return w[0]=c[0]*d+c[4]*y+c[12],w[1]=c[1]*d+c[5]*y+c[13],w[3]=c[3]*d+c[7]*y+c[15],w}const Ln=100;class bc{constructor(r,c=new An(r.width+200,r.height+200,25),d=new An(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=d,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ln,this.screenBottomBoundary=r.height+Ln,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,d,y,b,E,L,R,H,K,re,J){const Ae=this.projectAndGetPerspectiveRatio(r.anchorPointX+R[0],r.anchorPointY+R[1],b,K,J),ve=d*Ae.perspectiveRatio;let Me;if(E||L)Me=this._projectCollisionBox(r,ve,y,b,E,L,R,Ae,K,re,J);else{const ht=Ae.x+(re?re.x*ve:0),rt=Ae.y+(re?re.y*ve:0);Me={allPointsOccluded:!1,box:[ht+r.x1*ve,rt+r.y1*ve,ht+r.x2*ve,rt+r.y2*ve]}}const[Oe,Re,je,it]=Me.box,We=E?Me.allPointsOccluded:Ae.isOccluded;let ot=We;return ot||(ot=Ae.perspectiveRatio<this.perspectiveRatioCutoff),ot||(ot=!this.isInsideGrid(Oe,Re,je,it)),ot||c!=="always"&&this.grid.hitTest(Oe,Re,je,it,c,H)?{box:[Oe,Re,je,it],placeable:!1,offscreen:!1,occluded:We}:{box:[Oe,Re,je,it],placeable:!0,offscreen:this.isOffscreen(Oe,Re,je,it),occluded:We}}placeCollisionCircles(r,c,d,y,b,E,L,R,H,K,re,J,Ae,ve){const Me=[],Oe=new a.P(c.anchorX,c.anchorY),Re=this.getPerspectiveRatio(Oe.x,Oe.y,E,ve),je=(H?b*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,E)/Re:b*Re)/a.aN,it={getElevation:ve,pitchedLabelPlaneMatrix:L,lineVertexArray:d,pitchWithMap:H,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Oe,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:Ae},We=xc(je,y,c.lineOffsetX*je,c.lineOffsetY*je,!1,c,!1,it);let ot=!1,ht=!1,rt=!0;if(We){const vt=.5*re*Re+J,Ut=new a.P(-100,-100),Tt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Dt=new dr,Nt=We.first,rr=We.last;let cr=[];for(let yn=Nt.path.length-1;yn>=1;yn--)cr.push(Nt.path[yn]);for(let yn=1;yn<rr.path.length;yn++)cr.push(rr.path[yn]);const tr=2.5*vt;if(H){const yn=this.projectPathToScreenSpace(cr,it);cr=yn.some((ci=>ci.signedDistanceFromCamera<=0))?[]:yn.map((ci=>ci.point))}let Ur=[];if(cr.length>0){const yn=cr[0].clone(),ci=cr[0].clone();for(let Oi=1;Oi<cr.length;Oi++)yn.x=Math.min(yn.x,cr[Oi].x),yn.y=Math.min(yn.y,cr[Oi].y),ci.x=Math.max(ci.x,cr[Oi].x),ci.y=Math.max(ci.y,cr[Oi].y);Ur=yn.x>=Ut.x&&ci.x<=Tt.x&&yn.y>=Ut.y&&ci.y<=Tt.y?[cr]:ci.x<Ut.x||yn.x>Tt.x||ci.y<Ut.y||yn.y>Tt.y?[]:a.aK([cr],Ut.x,Ut.y,Tt.x,Tt.y)}for(const yn of Ur){Dt.reset(yn,.25*vt);let ci=0;ci=Dt.length<=.5*vt?1:Math.ceil(Dt.paddedLength/tr)+1;for(let Oi=0;Oi<ci;Oi++){const Ai=Oi/Math.max(ci-1,1),Vi=Dt.lerp(Ai),Ti=Vi.x+Ln,Es=Vi.y+Ln;Me.push(Ti,Es,vt,0);const Gi=Ti-vt,Ys=Es-vt,Fs=Ti+vt,ui=Es+vt;if(rt=rt&&this.isOffscreen(Gi,Ys,Fs,ui),ht=ht||this.isInsideGrid(Gi,Ys,Fs,ui),r!=="always"&&this.grid.hitTestCircle(Ti,Es,vt,r,K)&&(ot=!0,!R))return{circles:[],offscreen:!1,collisionDetected:ot}}}}return{circles:!R&&ot||!ht||Re<this.perspectiveRatioCutoff?[]:Me,offscreen:rt,collisionDetected:ot}}projectPathToScreenSpace(r,c){const d=(function(y,b){const E=a.N();return a.aC(E,b.pitchedLabelPlaneMatrix),y.map((L=>{const R=hn(L.x,L.y,E,b.getElevation),H=b.transform.projectTileCoordinates(R.point.x,R.point.y,b.unwrappedTileID,b.getElevation);return H.point.x=(.5*H.point.x+.5)*b.width,H.point.y=(.5*-H.point.y+.5)*b.height,H}))})(r,c);return(function(y){let b=0,E=0,L=0,R=0;for(let H=0;H<y.length;H++)y[H].isOccluded?(L=H+1,R=0):(R++,R>E&&(E=R,b=L));return y.slice(b,b+E)})(d)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],d=new a.ac;for(const re of r){const J=new a.P(re.x+Ln,re.y+Ln);d.extend(J),c.push(J)}const{minX:y,minY:b,maxX:E,maxY:L}=d,R=this.grid.query(y,b,E,L).concat(this.ignoredGrid.query(y,b,E,L)),H={},K={};for(const re of R){const J=re.key;if(H[J.bucketInstanceId]===void 0&&(H[J.bucketInstanceId]={}),H[J.bucketInstanceId][J.featureIndex])continue;const Ae=[new a.P(re.x1,re.y1),new a.P(re.x2,re.y1),new a.P(re.x2,re.y2),new a.P(re.x1,re.y2)];a.aL(c,Ae)&&(H[J.bucketInstanceId][J.featureIndex]=!0,K[J.bucketInstanceId]===void 0&&(K[J.bucketInstanceId]=[]),K[J.bucketInstanceId].push(J.featureIndex))}return K}insertCollisionBox(r,c,d,y,b,E){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:E,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,d,y,b,E){const L=d?this.ignoredGrid:this.grid,R={bucketInstanceId:y,featureIndex:b,collisionGroupID:E,overlapMode:c};for(let H=0;H<r.length;H+=4)L.insertCircle(R,r[H],r[H+1],r[H+2])}projectAndGetPerspectiveRatio(r,c,d,y,b){if(b){let E;y?(E=[r,c,y(r,c),1],a.aI(E,E,b)):(E=[r,c,0,1],CA(E,E,b));const L=E[3];return{x:(E[0]/L+1)/2*this.transform.width+Ln,y:(-E[1]/L+1)/2*this.transform.height+Ln,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L*.5,isOccluded:!1,signedDistanceFromCamera:L}}{const E=this.transform.projectTileCoordinates(r,c,d,y);return{x:(E.point.x+1)/2*this.transform.width+Ln,y:(1-E.point.y)/2*this.transform.height+Ln,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5,isOccluded:E.isOccluded,signedDistanceFromCamera:E.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,d,y){const b=this.transform.projectTileCoordinates(r,c,d,y);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(r,c,d,y){return d<Ln||r>=this.screenRightBoundary||y<Ln||c>this.screenBottomBoundary}isInsideGrid(r,c,d,y){return d>=0&&r<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=a.as([]);return a.O(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,d,y,b,E,L,R,H,K,re){let J=1,Ae=0,ve=0,Me=1;const Oe=r.anchorPointX+L[0],Re=r.anchorPointY+L[1];if(E&&!b){const cr=this.projectAndGetPerspectiveRatio(Oe+1,Re,y,H,re),tr=cr.x-R.x,Ur=Math.atan((cr.y-R.y)/tr)+(tr<0?Math.PI:0),yn=Math.sin(Ur),ci=Math.cos(Ur);J=ci,Ae=yn,ve=-yn,Me=ci}else if(!E&&b){const cr=Ls(this.transform);J=cr.vecEast[0],Ae=cr.vecEast[1],ve=cr.vecSouth[0],Me=cr.vecSouth[1]}let je=R.x,it=R.y,We=c;b&&(je=Oe,it=Re,We=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),We*=this.transform.getPitchedTextCorrection(Oe,Re,y),K||(We*=a.ao(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),K&&(je+=J*K.x*We+ve*K.y*We,it+=Ae*K.x*We+Me*K.y*We);const ot=r.x1*We,ht=r.x2*We,rt=(ot+ht)/2,vt=r.y1*We,Ut=r.y2*We,Tt=(vt+Ut)/2,Dt=[{offsetX:ot,offsetY:vt},{offsetX:rt,offsetY:vt},{offsetX:ht,offsetY:vt},{offsetX:ht,offsetY:Tt},{offsetX:ht,offsetY:Ut},{offsetX:rt,offsetY:Ut},{offsetX:ot,offsetY:Ut},{offsetX:ot,offsetY:Tt}];let Nt=[];for(const{offsetX:cr,offsetY:tr}of Dt)Nt.push(new a.P(je+J*cr+ve*tr,it+Ae*cr+Me*tr));let rr=!1;if(b){const cr=Nt.map((tr=>this.projectAndGetPerspectiveRatio(tr.x,tr.y,y,H,re)));rr=cr.some((tr=>!tr.isOccluded)),Nt=cr.map((tr=>new a.P(tr.x,tr.y)))}else rr=!0;return{box:a.aM(Nt),allPointsOccluded:!rr}}}class Do{constructor(r,c,d,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):y&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Ro{constructor(r,c,d,y,b){this.text=new Do(r?r.text:null,c,d,b),this.icon=new Do(r?r.icon:null,c,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bc{constructor(r,c,d){this.text=r,this.icon=c,this.skipFade=d}}class oa{constructor(r,c,d,y,b){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=y,this.tileID=b}}class ms{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[r]}}function No(w,r,c,d,y){const{horizontalAlign:b,verticalAlign:E}=a.aT(w);return new a.P(-(b-.5)*r+d[0]*y,-(E-.5)*c+d[1]*y)}class eA{constructor(r,c,d,y,b){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new bc(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ms(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(d,y)=>c.getElevation(r,d,y):null}getBucketParts(r,c,d,y){const b=d.getBucket(c),E=d.latestFeatureIndex;if(!b||!E||c.id!==b.layerIds[0])return;const L=d.collisionBoxArray,R=b.layers[0].layout,H=b.layers[0].paint,K=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),re=d.tileSize/a.a5,J=d.tileID.toUnwrapped(),Ae=R.get("text-rotation-alignment")==="map",ve=a.aO(d,1,this.transform.zoom),Me=a.aP(this.collisionIndex.transform,d,H.get("text-translate"),H.get("text-translate-anchor")),Oe=a.aP(this.collisionIndex.transform,d,H.get("icon-translate"),H.get("icon-translate-anchor")),Re=Di(Ae,this.transform,ve);this.retainedQueryData[b.bucketInstanceId]=new oa(b.bucketInstanceId,E,b.sourceLayerIndex,b.index,d.tileID);const je={bucket:b,layout:R,translationText:Me,translationIcon:Oe,unwrappedTileID:J,pitchedLabelPlaneMatrix:Re,scale:K,textPixelRatio:re,holdingForFade:d.holdingForSymbolFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:a.az(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const it of b.sortKeyRanges){const{sortKey:We,symbolInstanceStart:ot,symbolInstanceEnd:ht}=it;r.push({sortKey:We,symbolInstanceStart:ot,symbolInstanceEnd:ht,parameters:je})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:je})}attemptAnchorPlacement(r,c,d,y,b,E,L,R,H,K,re,J,Ae,ve,Me,Oe,Re,je,it,We){const ot=a.aQ[r.textAnchor],ht=[r.textOffset0,r.textOffset1],rt=No(ot,d,y,ht,b),vt=this.collisionIndex.placeCollisionBox(c,J,R,H,K,L,E,Oe,re.predicate,it,rt,We);if((!je||this.collisionIndex.placeCollisionBox(je,J,R,H,K,L,E,Re,re.predicate,it,rt,We).placeable)&&vt.placeable){let Ut;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID].text&&(Ut=this.prevPlacement.variableOffsets[Ae.crossTileID].anchor),Ae.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ae.crossTileID]={textOffset:ht,width:d,height:y,anchor:ot,textBoxScale:b,prevAnchor:Ut},this.markUsedJustification(ve,ot,Ae,Me),ve.allowVerticalPlacement&&(this.markUsedOrientation(ve,Me,Ae),this.placedOrientations[Ae.crossTileID]=Me),{shift:rt,placedGlyphBoxes:vt}}}placeLayerBucketPart(r,c,d){const{bucket:y,layout:b,translationText:E,translationIcon:L,unwrappedTileID:R,pitchedLabelPlaneMatrix:H,textPixelRatio:K,holdingForFade:re,collisionBoxArray:J,partiallyEvaluatedTextSize:Ae,collisionGroup:ve}=r.parameters,Me=b.get("text-optional"),Oe=b.get("icon-optional"),Re=a.aR(b,"text-overlap","text-allow-overlap"),je=Re==="always",it=a.aR(b,"icon-overlap","icon-allow-overlap"),We=it==="always",ot=b.get("text-rotation-alignment")==="map",ht=b.get("text-pitch-alignment")==="map",rt=b.get("icon-text-fit")!=="none",vt=b.get("symbol-z-order")==="viewport-y",Ut=je&&(We||!y.hasIconData()||Oe),Tt=We&&(je||!y.hasTextData()||Me);!y.collisionArrays&&J&&y.deserializeCollisionBoxes(J);const Dt=this.retainedQueryData[y.bucketInstanceId].tileID,Nt=this._getTerrainElevationFunc(Dt),rr=this.transform.getFastPathSimpleProjectionMatrix(Dt),cr=(tr,Ur,yn)=>{var ci,Oi;if(c[tr.crossTileID])return;if(re)return void(this.placements[tr.crossTileID]=new Bc(!1,!1,!1));let Ai=!1,Vi=!1,Ti=!0,Es=null,Gi={box:null,placeable:!1,offscreen:null,occluded:!1},Ys={placeable:!1},Fs=null,ui=null,lo=null,mo=0,Ac=0,fA=0;Ur.textFeatureIndex?mo=Ur.textFeatureIndex:tr.useRuntimeCollisionCircles&&(mo=tr.featureIndex),Ur.verticalTextFeatureIndex&&(Ac=Ur.verticalTextFeatureIndex);const zA=Ur.textBox;if(zA){const Js=Ns=>{let eo=a.aA.horizontal;if(y.allowVerticalPlacement&&!Ns&&this.prevPlacement){const Va=this.prevPlacement.placedOrientations[tr.crossTileID];Va&&(this.placedOrientations[tr.crossTileID]=Va,eo=Va,this.markUsedOrientation(y,eo,tr))}return eo},$o=(Ns,eo)=>{if(y.allowVerticalPlacement&&tr.numVerticalGlyphVertices>0&&Ur.verticalTextBox){for(const Va of y.writingModes)if(Va===a.aA.vertical?(Gi=eo(),Ys=Gi):Gi=Ns(),Gi&&Gi.placeable)break}else Gi=Ns()},go=tr.textAnchorOffsetStartIndex,ml=tr.textAnchorOffsetEndIndex;if(ml===go){const Ns=(eo,Va)=>{const ls=this.collisionIndex.placeCollisionBox(eo,Re,K,Dt,R,ht,ot,E,ve.predicate,Nt,void 0,rr);return ls&&ls.placeable&&(this.markUsedOrientation(y,Va,tr),this.placedOrientations[tr.crossTileID]=Va),ls};$o((()=>Ns(zA,a.aA.horizontal)),(()=>{const eo=Ur.verticalTextBox;return y.allowVerticalPlacement&&tr.numVerticalGlyphVertices>0&&eo?Ns(eo,a.aA.vertical):{box:null,offscreen:null}})),Js(Gi&&Gi.placeable)}else{let Ns=a.aQ[(Oi=(ci=this.prevPlacement)===null||ci===void 0?void 0:ci.variableOffsets[tr.crossTileID])===null||Oi===void 0?void 0:Oi.anchor];const eo=(ls,Ga,Wo)=>{const Oh=ls.x2-ls.x1,bf=ls.y2-ls.y1,HA=tr.textBoxScale,jA=rt&&it==="never"?Ga:null;let dA=null,zh=Re==="never"?1:2,ah="never";Ns&&zh++;for(let lh=0;lh<zh;lh++){for(let Au=go;Au<ml;Au++){const Hh=y.textAnchorOffsets.get(Au);if(Ns&&Hh.textAnchor!==Ns)continue;const ch=this.attemptAnchorPlacement(Hh,ls,Oh,bf,HA,ot,ht,K,Dt,R,ve,ah,tr,y,Wo,E,L,jA,Nt);if(ch&&(dA=ch.placedGlyphBoxes,dA&&dA.placeable))return Ai=!0,Es=ch.shift,dA}Ns?Ns=null:ah=Re}return d&&!dA&&(dA={box:this.collisionIndex.placeCollisionBox(zA,"always",K,Dt,R,ht,ot,E,ve.predicate,Nt,void 0,rr).box,offscreen:!1,placeable:!1,occluded:!1}),dA};$o((()=>eo(zA,Ur.iconBox,a.aA.horizontal)),(()=>{const ls=Ur.verticalTextBox;return y.allowVerticalPlacement&&(!Gi||!Gi.placeable)&&tr.numVerticalGlyphVertices>0&&ls?eo(ls,Ur.verticalIconBox,a.aA.vertical):{box:null,occluded:!0,offscreen:null}})),Gi&&(Ai=Gi.placeable,Ti=Gi.offscreen);const Va=Js(Gi&&Gi.placeable);if(!Ai&&this.prevPlacement){const ls=this.prevPlacement.variableOffsets[tr.crossTileID];ls&&(this.variableOffsets[tr.crossTileID]=ls,this.markUsedJustification(y,ls.anchor,tr,Va))}}}if(Fs=Gi,Ai=Fs&&Fs.placeable,Ti=Fs&&Fs.offscreen,tr.useRuntimeCollisionCircles&&tr.centerJustifiedTextSymbolIndex>=0){const Js=y.text.placedSymbolArray.get(tr.centerJustifiedTextSymbolIndex),$o=a.aB(y.textSizeData,Ae,Js),go=b.get("text-padding");ui=this.collisionIndex.placeCollisionCircles(Re,Js,y.lineVertexArray,y.glyphOffsetArray,$o,R,H,d,ht,ve.predicate,tr.collisionCircleDiameter,go,E,Nt),ui.circles.length&&ui.collisionDetected&&!d&&a.w("Collisions detected, but collision boxes are not shown"),Ai=je||ui.circles.length>0&&!ui.collisionDetected,Ti=Ti&&ui.offscreen}if(Ur.iconFeatureIndex&&(fA=Ur.iconFeatureIndex),Ur.iconBox){const Js=$o=>this.collisionIndex.placeCollisionBox($o,it,K,Dt,R,ht,ot,L,ve.predicate,Nt,rt&&Es?Es:void 0,rr);Ys&&Ys.placeable&&Ur.verticalIconBox?(lo=Js(Ur.verticalIconBox),Vi=lo.placeable):(lo=Js(Ur.iconBox),Vi=lo.placeable),Ti=Ti&&lo.offscreen}const Ru=Me||tr.numHorizontalGlyphVertices===0&&tr.numVerticalGlyphVertices===0,uc=Oe||tr.numIconVertices===0;Ru||uc?uc?Ru||(Vi=Vi&&Ai):Ai=Vi&&Ai:Vi=Ai=Vi&&Ai;const zl=Vi&&lo.placeable;if(Ai&&Fs.placeable&&this.collisionIndex.insertCollisionBox(Fs.box,Re,b.get("text-ignore-placement"),y.bucketInstanceId,Ys&&Ys.placeable&&Ac?Ac:mo,ve.ID),zl&&this.collisionIndex.insertCollisionBox(lo.box,it,b.get("icon-ignore-placement"),y.bucketInstanceId,fA,ve.ID),ui&&Ai&&this.collisionIndex.insertCollisionCircles(ui.circles,Re,b.get("text-ignore-placement"),y.bucketInstanceId,mo,ve.ID),d&&this.storeCollisionData(y.bucketInstanceId,yn,Ur,Fs,lo,ui),tr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[tr.crossTileID]=new Bc((Ai||Ut)&&!Fs?.occluded,(Vi||Tt)&&!lo?.occluded,Ti||y.justReloaded),c[tr.crossTileID]=!0};if(vt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const tr=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Ur=tr.length-1;Ur>=0;--Ur){const yn=tr[Ur];cr(y.symbolInstances.get(yn),y.collisionArrays[yn],yn)}}else for(let tr=r.symbolInstanceStart;tr<r.symbolInstanceEnd;tr++)cr(y.symbolInstances.get(tr),y.collisionArrays[tr],tr);y.justReloaded=!1}storeCollisionData(r,c,d,y,b,E){if(d.textBox||d.iconBox){let L,R;this.collisionBoxArrays.has(r)?L=this.collisionBoxArrays.get(r):(L=new Map,this.collisionBoxArrays.set(r,L)),L.has(c)?R=L.get(c):(R={text:null,icon:null},L.set(c,R)),d.textBox&&(R.text=y.box),d.iconBox&&(R.icon=b.box)}if(E){let L=this.collisionCircleArrays[r];L===void 0&&(L=this.collisionCircleArrays[r]=[]);for(let R=0;R<E.circles.length;R+=4)L.push(E.circles[R+0]-Ln),L.push(E.circles[R+1]-Ln),L.push(E.circles[R+2]),L.push(E.collisionDetected?1:0)}}markUsedJustification(r,c,d,y){let b;b=y===a.aA.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.aS(c)];const E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const L of E)L>=0&&(r.text.placedSymbolArray.get(L).crossTileID=b>=0&&L!==b?0:d.crossTileID)}markUsedOrientation(r,c,d){const y=c===a.aA.horizontal||c===a.aA.horizontalOnly?c:0,b=c===a.aA.vertical?c:0,E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const L of E)r.text.placedSymbolArray.get(L).placedOrientation=y;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(r):1,b=c?c.opacities:{},E=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const R in this.placements){const H=this.placements[R],K=b[R];K?(this.opacities[R]=new Ro(K,y,H.text,H.icon),d=d||H.text!==K.text.placed||H.icon!==K.icon.placed):(this.opacities[R]=new Ro(null,y,H.text,H.icon,H.skipFade),d=d||H.text||H.icon)}for(const R in b){const H=b[R];if(!this.opacities[R]){const K=new Ro(H,y,!1,!1);K.isHidden()||(this.opacities[R]=K,d=d||H.text.placed||H.icon.placed)}}for(const R in E)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=E[R]);for(const R in L)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=L[R]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const d={};for(const y of c){const b=y.getBucket(r);b&&y.latestFeatureIndex&&r.id===b.layerIds[0]&&this.updateBucketOpacities(b,y.tileID,d,y.collisionBoxArray)}}updateBucketOpacities(r,c,d,y){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const b=r.layers[0],E=b.layout,L=new Ro(null,0,!1,!1,!0),R=E.get("text-allow-overlap"),H=E.get("icon-allow-overlap"),K=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),re=E.get("text-rotation-alignment")==="map",J=E.get("text-pitch-alignment")==="map",Ae=E.get("icon-text-fit")!=="none",ve=new Ro(null,0,R&&(H||!r.hasIconData()||E.get("icon-optional")),H&&(R||!r.hasTextData()||E.get("text-optional")),!0);!r.collisionArrays&&y&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(y);const Me=(Re,je,it)=>{for(let We=0;We<je/4;We++)Re.opacityVertexArray.emplaceBack(it);Re.hasVisibleVertices=Re.hasVisibleVertices||it!==Cc},Oe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Re=0;Re<r.symbolInstances.length;Re++){const je=r.symbolInstances.get(Re),{numHorizontalGlyphVertices:it,numVerticalGlyphVertices:We,crossTileID:ot}=je;let ht=this.opacities[ot];d[ot]?ht=L:ht||(ht=ve,this.opacities[ot]=ht),d[ot]=!0;const rt=je.numIconVertices>0,vt=this.placedOrientations[je.crossTileID],Ut=vt===a.aA.vertical,Tt=vt===a.aA.horizontal||vt===a.aA.horizontalOnly;if(it>0||We>0){const Nt=EA(ht.text);Me(r.text,it,Ut?Cc:Nt),Me(r.text,We,Tt?Cc:Nt);const rr=ht.text.isHidden();[je.rightJustifiedTextSymbolIndex,je.centerJustifiedTextSymbolIndex,je.leftJustifiedTextSymbolIndex].forEach((Ur=>{Ur>=0&&(r.text.placedSymbolArray.get(Ur).hidden=rr||Ut?1:0)})),je.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(je.verticalPlacedTextSymbolIndex).hidden=rr||Tt?1:0);const cr=this.variableOffsets[je.crossTileID];cr&&this.markUsedJustification(r,cr.anchor,je,vt);const tr=this.placedOrientations[je.crossTileID];tr&&(this.markUsedJustification(r,"left",je,tr),this.markUsedOrientation(r,tr,je))}if(rt){const Nt=EA(ht.icon),rr=!(Ae&&je.verticalPlacedIconSymbolIndex&&Ut);je.placedIconSymbolIndex>=0&&(Me(r.icon,je.numIconVertices,rr?Nt:Cc),r.icon.placedSymbolArray.get(je.placedIconSymbolIndex).hidden=ht.icon.isHidden()),je.verticalPlacedIconSymbolIndex>=0&&(Me(r.icon,je.numVerticalIconVertices,rr?Cc:Nt),r.icon.placedSymbolArray.get(je.verticalPlacedIconSymbolIndex).hidden=ht.icon.isHidden())}const Dt=Oe&&Oe.has(Re)?Oe.get(Re):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Nt=r.collisionArrays[Re];if(Nt){let rr=new a.P(0,0);if(Nt.textBox||Nt.verticalTextBox){let cr=!0;if(K){const tr=this.variableOffsets[ot];tr?(rr=No(tr.anchor,tr.width,tr.height,tr.textOffset,tr.textBoxScale),re&&rr._rotate(J?-this.transform.bearingInRadians:this.transform.bearingInRadians)):cr=!1}if(Nt.textBox||Nt.verticalTextBox){let tr;Nt.textBox&&(tr=Ut),Nt.verticalTextBox&&(tr=Tt),tA(r.textCollisionBox.collisionVertexArray,ht.text.placed,!cr||tr,Dt.text,rr.x,rr.y)}}if(Nt.iconBox||Nt.verticalIconBox){const cr=!!(!Tt&&Nt.verticalIconBox);let tr;Nt.iconBox&&(tr=cr),Nt.verticalIconBox&&(tr=!cr),tA(r.iconCollisionBox.collisionVertexArray,ht.icon.placed,tr,Dt.icon,Ae?rr.x:0,Ae?rr.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function tA(w,r,c,d,y,b){d&&d.length!==0||(d=[0,0,0,0]);const E=d[0]-Ln,L=d[1]-Ln,R=d[2]-Ln,H=d[3]-Ln;w.emplaceBack(r?1:0,c?1:0,y||0,b||0,E,L),w.emplaceBack(r?1:0,c?1:0,y||0,b||0,R,L),w.emplaceBack(r?1:0,c?1:0,y||0,b||0,R,H),w.emplaceBack(r?1:0,c?1:0,y||0,b||0,E,H)}const Yl=Math.pow(2,25),ba=Math.pow(2,24),SA=Math.pow(2,17),Gn=Math.pow(2,16),Bl=Math.pow(2,9),Jl=Math.pow(2,8),Cl=Math.pow(2,1);function EA(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const r=w.placed?1:0,c=Math.floor(127*w.opacity);return c*Yl+r*ba+c*SA+r*Gn+c*Bl+r*Jl+c*Cl+r}const Cc=0;class aa{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,d,y,b){const E=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(E,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(((L,R)=>L.sortKey-R.sortKey)));this._currentPartIndex<E.length;)if(c.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,b())return!0;return!1}}class al{constructor(r,c,d,y,b,E,L,R){this.placement=new eA(r,c,E,L,R),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(r,c,d){const y=z(),b=()=>!this._forceFullPlacement&&z()-y>2;for(;this._currentPlacementIndex>=0;){const E=c[r[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=L)&&(!E.maxzoom||E.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new aa(E)),this._inProgressLayer.continuePlacement(d[E.source],this.placement,this._showCollisionBoxes,E,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const on=512/a.a5/2;class Ba{constructor(r,c,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const y=new Map;for(let b=0;b<c.length;b++){const E=c.get(b),L=E.key,R=y.get(L);R?R.push(E):y.set(L,[E])}for(const[b,E]of y){const L={positions:E.map((R=>({x:Math.floor(R.anchorX*on),y:Math.floor(R.anchorY*on)}))),crossTileIDs:E.map((R=>R.crossTileID))};if(L.positions.length>128){const R=new a.aU(L.positions.length,16,Uint16Array);for(const{x:H,y:K}of L.positions)R.add(H,K);R.finish(),delete L.positions,L.index=R}this._symbolsByKey[b]=L}}getScaledCoordinates(r,c){const{x:d,y,z:b}=this.tileID.canonical,{x:E,y:L,z:R}=c.canonical,H=on/Math.pow(2,R-b),K=(L*a.a5+r.anchorY)*H,re=y*a.a5*on;return{x:Math.floor((E*a.a5+r.anchorX)*H-d*a.a5*on),y:Math.floor(K-re)}}findMatches(r,c,d){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<r.length;b++){const E=r.get(b);if(E.crossTileID)continue;const L=this._symbolsByKey[E.key];if(!L)continue;const R=this.getScaledCoordinates(E,c);if(L.index){const H=L.index.range(R.x-y,R.y-y,R.x+y,R.y+y).sort();for(const K of H){const re=L.crossTileIDs[K];if(!d[re]){d[re]=!0,E.crossTileID=re;break}}}else if(L.positions)for(let H=0;H<L.positions.length;H++){const K=L.positions[H],re=L.crossTileIDs[H];if(Math.abs(K.x-R.x)<=y&&Math.abs(K.y-R.y)<=y&&!d[re]){d[re]=!0,E.crossTileID=re;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:r})=>r))}}class Qo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Oo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const d in this.indexes){const y=this.indexes[d],b={};for(const E in y){const L=y[E];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),b[L.tileID.key]=L}this.indexes[d]=b}this.lng=r}addBucket(r,c,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const b in this.indexes){const E=this.indexes[b];if(Number(b)>r.overscaledZ)for(const L in E){const R=E[L];R.tileID.isChildOf(r)&&R.findMatches(c.symbolInstances,r,y)}else{const L=E[r.scaledTo(Number(b)).key];L&&L.findMatches(c.symbolInstances,r,y)}}for(let b=0;b<c.symbolInstances.length;b++){const E=c.symbolInstances.get(b);E.crossTileID||(E.crossTileID=d.generate(),y[E.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ba(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const d of c.getCrossTileIDsLists())for(const y of d)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let c=!1;for(const d in this.indexes){const y=this.indexes[d];for(const b in y)r[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,y[b]),delete y[b],c=!0)}return c}}class gs{constructor(){this.layerIndexes={},this.crossTileIDs=new Qo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,d){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new Oo);let b=!1;const E={};y.handleWrapJump(d);for(const L of c){const R=L.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(L.tileID,R,this.crossTileIDs)&&(b=!0),E[R.bucketInstanceId]=!0)}return y.removeStaleBuckets(E)&&(b=!0),b}pruneUnusedLayers(r){const c={};r.forEach((d=>{c[d]=!0}));for(const d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}var Kr="void main() {fragColor=vec4(1.0);}";const Yn={prelude:ln(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ln("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ln("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ln(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ln(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ln(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ln(Kr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ln(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ln(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ln("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ln("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:ln("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ln(Kr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ln(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ln(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ln(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ln(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ln(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ln(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ln(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ln(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ln(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ln(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:ln(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ln(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ln(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ln(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ln("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ln("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ln("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ln("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ln(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ln("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ln(w,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/in ([\w]+) ([\w]+)/g),y=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=b?b.concat(y):y,L={};return{fragmentSource:w=w.replace(c,((R,H,K,re,J)=>(L[J]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${J}
in ${K} ${re} ${J};
#else
uniform ${K} ${re} u_${J};
#endif
`:`
#ifdef HAS_UNIFORM_u_${J}
    ${K} ${re} ${J} = u_${J};
#endif
`))),vertexSource:r=r.replace(c,((R,H,K,re,J)=>{const Ae=re==="float"?"vec2":"vec4",ve=J.match(/color/)?"color":Ae;return L[J]?H==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
in ${K} ${Ae} a_${J};
out ${K} ${re} ${J};
#else
uniform ${K} ${re} u_${J};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = a_${J};
#else
    ${K} ${re} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = unpack_mix_${ve}(a_${J}, u_${J}_t);
#else
    ${K} ${re} ${J} = u_${J};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
in ${K} ${Ae} a_${J};
#else
uniform ${K} ${re} u_${J};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${K} ${re} ${J} = a_${J};
#else
    ${K} ${re} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${K} ${re} ${J} = unpack_mix_${ve}(a_${J}, u_${J}_t);
#else
    ${K} ${re} ${J} = u_${J};
#endif
`})),staticAttributes:d,staticUniforms:E}}class ni{constructor(r,c,d){this.vertexBuffer=r,this.indexBuffer=c,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ys=a.aV([{name:"a_pos",type:"Int16",components:2}]);const $i="#define PROJECTION_MERCATOR",co="mercator";class vs{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return co}get shaderDefine(){return $i}get shaderPreludeCode(){return Yn.projectionMercator}get vertexShaderPreludeCode(){return Yn.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aW.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,d,y,b){if(this._cachedMesh)return this._cachedMesh;const E=new a.aX;E.emplaceBack(0,0),E.emplaceBack(a.a5,0),E.emplaceBack(0,a.a5),E.emplaceBack(a.a5,a.a5);const L=r.createVertexBuffer(E,ys.members),R=a.aY.simpleSegment(0,0,4,2),H=new a.aZ;H.emplaceBack(1,0,2),H.emplaceBack(1,2,3);const K=r.createIndexBuffer(H);return this._cachedMesh=new ni(L,K,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Ca{constructor(r=0,c=0,d=0,y=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=d,this.right=y}interpolate(r,c,d){return c.top!=null&&r.top!=null&&(this.top=a.G.number(r.top,c.top,d)),c.bottom!=null&&r.bottom!=null&&(this.bottom=a.G.number(r.bottom,c.bottom,d)),c.left!=null&&r.left!=null&&(this.left=a.G.number(r.left,c.left,d)),c.right!=null&&r.right!=null&&(this.right=a.G.number(r.right,c.right,d)),this}getCenter(r,c){const d=a.ao((this.left+r-this.right)/2,0,r),y=a.ao((this.top+c-this.bottom)/2,0,c);return new a.P(d,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Ca(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Sa(w,r){if(!w.renderWorldCopies||w.lngRange)return;const c=r.lng-w.center.lng;r.lng+=c>180?-360:c<-180?360:0}function ei(w){return Math.max(0,Math.floor(w))}class la{constructor(r,c){var d;this.applyConstrain=(y,b)=>this._constrainOverride!==null?this._constrainOverride(y,b):this._callbacks.defaultConstrain(y,b),this._callbacks=r,this._tileSize=512,this._renderWorldCopies=c?.renderWorldCopies===void 0||!!c?.renderWorldCopies,this._minZoom=c?.minZoom||0,this._maxZoom=c?.maxZoom||22,this._minPitch=c?.minPitch==null?0:c?.minPitch,this._maxPitch=c?.maxPitch==null?60:c?.maxPitch,this._constrainOverride=(d=c?.constrainOverride)!==null&&d!==void 0?d:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ei(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ca,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,d){this._constrainOverride=r.constrainOverride,this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=ei(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Ca(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!d&&r.autoCalculateNearFarZ,c&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get constrainOverride(){return this._constrainOverride}setConstrainOverride(r){r===void 0&&(r=null),this._constrainOverride!==r&&(this._constrainOverride=r,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=a.W(r,-180,180)*Math.PI/180;var d,y,b,E,L,R,H,K,re;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=S(),d=this._rotationMatrix,b=-this._bearingInRadians,E=(y=this._rotationMatrix)[0],L=y[1],R=y[2],H=y[3],K=Math.sin(b),re=Math.cos(b),d[0]=E*re+R*K,d[1]=L*re+H*K,d[2]=E*-K+R*re,d[3]=L*-K+H*re)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=a.ao(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.a_(this._fovInRadians)}setFov(r){r=a.ao(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=a.aq(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.applyConstrain(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=a.ar(c),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,d){this._unmodified=!1,this._edgeInsets.interpolate(r,c,d),this.constrainInternal(),this._calcMatrices()}resize(r,c,d=!0){this._width=r,this._height=c,d&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new kr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ap,a.ap])}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{const{minX:d,minY:y,maxX:b,maxY:E}=a.ac.fromPoints(c).extend(r);return[new a.P(d,y),new a.P(b,y),new a.P(b,E),new a.P(d,E),new a.P(d,y)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:d}=this.applyConstrain(this.center,this.zoom);this.setCenter(c),this.setZoom(d),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=a.as(new Float64Array(16));a.Q(r,r,[this._width/2,-this._height/2,1]),a.O(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=a.as(new Float64Array(16)),a.Q(r,r,[1,-1,1]),a.O(r,r,[-1,-1,0]),a.Q(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,d,y){const b=d!==void 0?d:this.bearing,E=y=y!==void 0?y:this.pitch,{distanceToCenter:L,clampedElevation:R}=this._distanceToCenterFromAltElevationPitch(c,this.elevation,E),{x:H,y:K}=en(E,b),re=a.ab.fromLngLat(r,c);let J,Ae,ve=a.a$(1,re.y),Me=0;do{if(Me+=1,Me>10)break;Ae=L/ve,J=new a.ab(re.x+H*Ae,re.y+K*Ae),ve=1/J.meterInMercatorCoordinateUnits()}while(Math.abs(L-Ae*ve)>1e-12);return{center:J.toLngLat(),elevation:R,zoom:a.au(this.height/2/Math.tan(this.fovInRadians/2)/Ae/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=1/this.worldSize,d=a.at(1,this.center.lat)*this.worldSize,y=a.ab.fromLngLat(this.center,this.elevation),b=y.x/c,E=y.y/c,L=y.z/c,R=this.pitch,H=this.bearing,{x:K,y:re,z:J}=en(R,H),Ae=this.cameraToCenterDistance,ve=b+Ae*-K,Me=E+Ae*-re,Oe=L+Ae*J,{distanceToCenter:Re,clampedElevation:je}=this._distanceToCenterFromAltElevationPitch(Oe/d,r,R),it=Re*d,We=new a.ab((ve+K*it)*c,(Me+re*it)*c,0).toLngLat(),ot=a.at(1,We.lat),ht=a.au(this.height/2/Math.tan(this.fovInRadians/2)/Re/ot/this.tileSize);this._elevation=je,this._center=We,this.setZoom(ht)}_distanceToCenterFromAltElevationPitch(r,c,d){const y=-Math.cos(a.aq(d)),b=r-c;let E,L=c;return y*b>=0||Math.abs(y)<.1?(E=1e4,L=r+E*y):E=-b/y,{distanceToCenter:E,clampedElevation:L}}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=a.at(1,this.center.lat)*this.worldSize;return dt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/a.a5,1/c/a.a5]}}class Wi{constructor(r,c){this.min=r,this.max=c,this.center=a.b0([],a.b1([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],d=a.b2(this.min),y=a.b2(this.max);for(let b=0;b<c.length;b++)d[b]=c[b]?this.min[b]:this.center[b],y[b]=c[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new Wi(d,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let d=0;d<r.planes.length;d++){const y=this.intersectsPlane(r.planes[d]);if(y===0)return 0;y===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],d=r[3];for(let y=0;y<3;y++)r[y]>0?(c+=r[y]*this.min[y],d+=r[y]*this.max[y]):(d+=r[y]*this.min[y],c+=r[y]*this.max[y]);return c>=0?2:d<0?0:1}}class ec{distanceToTile2d(r,c,d,y){const b=y.distanceX([r,c]),E=y.distanceY([r,c]);return Math.hypot(b,E)}getWrap(r,c,d){return d}getTileBoundingVolume(r,c,d,y){var b,E;let L=0,R=0;if(y?.terrain){const K=new a.a2(r.z,c,r.z,r.x,r.y),re=y.terrain.getMinMaxElevation(K);L=(b=re.minElevation)!==null&&b!==void 0?b:Math.min(0,d),R=(E=re.maxElevation)!==null&&E!==void 0?E:Math.max(0,d)}const H=1<<r.z;return new Wi([c+r.x/H,r.y/H,L],[c+(r.x+1)/H,(r.y+1)/H,R])}allowVariableZoom(r,c){const d=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,y=a.ao(78.5-d/2,0,60);return!!c.terrain||r.pitch>y}allowWorldCopies(){return!0}prepareNextFrame(){}}class Gs{constructor(r,c,d){this.points=r,this.planes=c,this.aabb=d}static fromInvProjectionMatrix(r,c=1,d=0,y,b){const E=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],L=Math.pow(2,d),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((J=>(function(Ae,ve,Me,Oe){const Re=a.aI([],Ae,ve),je=1/Re[3]/Me*Oe;return a.b7(Re,Re,[je,je,1/Re[3],je])})(J,r,c,L)));y&&(function(J,Ae,ve,Me){const Oe=Me?4:0,Re=Me?0:4;let je=0;const it=[],We=[];for(let rt=0;rt<4;rt++){const vt=a.b3([],J[rt+Re],J[rt+Oe]),Ut=a.b8(vt);a.b0(vt,vt,1/Ut),it.push(Ut),We.push(vt)}for(let rt=0;rt<4;rt++){const vt=a.b9(J[rt+Oe],We[rt],ve);je=vt!==null&&vt>=0?Math.max(je,vt):Math.max(je,it[rt])}const ot=(function(rt,vt){const Ut=a.b3([],rt[vt[0]],rt[vt[1]]),Tt=a.b3([],rt[vt[2]],rt[vt[1]]),Dt=[0,0,0,0];return a.b4(Dt,a.b5([],Ut,Tt)),Dt[3]=-a.b6(Dt,rt[vt[0]]),Dt})(J,Ae),ht=(function(rt,vt){const Ut=a.ba(rt),Tt=a.bb([],rt,1/Ut),Dt=a.b3([],vt,a.b0([],Tt,a.b6(vt,Tt))),Nt=a.ba(Dt);if(Nt>0){const rr=Math.sqrt(1-Tt[3]*Tt[3]),cr=a.b0([],Tt,-Tt[3]),tr=a.b1([],cr,a.b0([],Dt,rr/Nt));return a.bc(vt,tr)}return null})(ve,ot);if(ht!==null){const rt=ht/a.b6(We[0],ot);je=Math.min(je,rt)}for(let rt=0;rt<4;rt++){const vt=Math.min(je,it[rt]);J[rt+Re]=[J[rt+Oe][0]+We[rt][0]*vt,J[rt+Oe][1]+We[rt][1]*vt,J[rt+Oe][2]+We[rt][2]*vt,1]}})(R,E[0],y,b);const H=E.map((J=>{const Ae=a.b3([],R[J[0]],R[J[1]]),ve=a.b3([],R[J[2]],R[J[1]]),Me=a.b4([],a.b5([],Ae,ve)),Oe=-a.b6(Me,R[J[1]]);return Me.concat(Oe)})),K=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],re=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const J of R)for(let Ae=0;Ae<3;Ae++)K[Ae]=Math.min(K[Ae],J[Ae]),re[Ae]=Math.max(re[Ae],J[Ae]);return new Gs(R,H,new Wi(K,re))}}class ll{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,d){return this._helper.interpolatePadding(r,c,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,d=!0){this._helper.resize(r,c,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(c,d)=>{d=a.ao(+d,this.minZoom,this.maxZoom);const y={center:new a.V(c.lng,c.lat),zoom:d};let b=this._helper._lngRange;if(!this._helper._renderWorldCopies&&b===null){const We=179.9999999999;b=[-We,We]}const E=this.tileSize*a.ar(y.zoom);let L=0,R=E,H=0,K=E,re=0,J=0;const{x:Ae,y:ve}=this.size;if(this._helper._latRange){const We=this._helper._latRange;L=a.X(We[1])*E,R=a.X(We[0])*E,R-L<ve&&(re=ve/(R-L))}b&&(H=a.W(a.Y(b[0])*E,0,E),K=a.W(a.Y(b[1])*E,0,E),K<H&&(K+=E),K-H<Ae&&(J=Ae/(K-H)));const{x:Me,y:Oe}=Yt(E,c);let Re,je;const it=Math.max(J||0,re||0);if(it){const We=new a.P(J?(K+H)/2:Me,re?(R+L)/2:Oe);return y.center=hr(E,We).wrap(),y.zoom+=a.au(it),y}if(this._helper._latRange){const We=ve/2;Oe-We<L&&(je=L+We),Oe+We>R&&(je=R-We)}if(b){const We=(H+K)/2;let ot=Me;this._helper._renderWorldCopies&&(ot=a.W(Me,We-E/2,We+E/2));const ht=Ae/2;ot-ht<H&&(Re=H+ht),ot+ht>K&&(Re=K-ht)}if(Re!==void 0||je!==void 0){const We=new a.P(Re??Me,je??Oe);y.center=hr(E,We).wrap()}return y},this.applyConstrain=(c,d)=>this._helper.applyConstrain(c,d),this._helper=new la({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,d)=>this.defaultConstrain(c,d)},r),this._coveringTilesDetailsProvider=new ec}clone(){const r=new ll;return r.apply(this),r}apply(r,c,d){this._helper.apply(r,c,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new a.bd(0,r)];if(this._helper._renderWorldCopies){const d=this.screenPointToMercatorCoordinate(new a.P(0,0)),y=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),E=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),L=Math.floor(Math.min(d.x,y.x,b.x,E.x)),R=Math.floor(Math.max(d.x,y.x,b.x,E.x)),H=1;for(let K=L-H;K<=R+H;K++)K!==0&&c.push(new a.bd(K,r))}return c}getCameraFrustum(){return Gs.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),d=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(r,c){const d=a.at(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(c,d),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),E=a.ab.fromLngLat(r),L=new a.ab(E.x-(y.x-b.x),E.y-(y.y-b.y));this.setCenter(L?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(a.ab.fromLngLat(r),c.getElevationForLngLat(r),this._pixelMatrix3D):this.coordinatePoint(a.ab.fromLngLat(r))}screenPointToLocation(r,c){var d;return(d=this.screenPointToMercatorCoordinate(r,c))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const d=c.pointCoordinate(r);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const d=c||0,y=[r.x,r.y,0,1],b=[r.x,r.y,1,1];a.aI(y,y,this._pixelMatrixInverse),a.aI(b,b,this._pixelMatrixInverse);const E=y[3],L=b[3],R=y[1]/E,H=b[1]/L,K=y[2]/E,re=b[2]/L,J=K===re?0:(d-K)/(re-K);return new a.ab(a.G.number(y[0]/E,b[0]/L,J)/this.worldSize,a.G.number(R,H,J)/this.worldSize,d)}coordinatePoint(r,c=0,d=this._pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,c,1];return a.aI(y,y,d),new a.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this._helper._height/2-tn(this));return new kr().extend(this.screenPointToLocation(new a.P(0,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-tn(this)}calculatePosMatrix(r,c=!1,d){var y;const b=(y=r.key)!==null&&y!==void 0?y:a.be(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),E=c?this._alignedPosMatrixCache:this._posMatrixCache;if(E.has(b)){const H=E.get(b);return d?H.f32:H.f64}const L=Ir(r,this.worldSize);a.S(L,c?this._alignedProjMatrix:this._viewProjMatrix,L);const R={f64:L,f32:new Float32Array(L)};return E.set(b,R),d?R.f32:R.f64}calculateFogMatrix(r){const c=r.key,d=this._fogMatrixCacheF32;if(d.has(c))return d.get(c);const y=Ir(r,this.worldSize);return a.S(y,this._fogMatrix,y),d.set(c,new Float32Array(y)),d.get(c)}calculateCenterFromCameraLngLatAlt(r,c,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,d,y)}_calculateNearFarZIfNeeded(r,c,d){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=r-y*this._helper._pixelPerMeter/Math.cos(c),E=y<0?b:r,L=Math.PI/2+this.pitchInRadians,R=a.aq(this.fov)*(Math.abs(Math.cos(a.aq(this.roll)))*this.height+Math.abs(Math.sin(a.aq(this.roll)))*this.width)/this.height*(.5+d.y/this.height),H=Math.sin(R)*E/Math.sin(a.ao(Math.PI-L-R,.01,Math.PI-.01)),K=tn(this),re=Math.atan(K/this._helper.cameraToCenterDistance),J=a.aq(.75),Ae=re>J?2*re*(.5+d.y/(2*K)):J,ve=Math.sin(Ae)*E/Math.sin(a.ao(Math.PI-L-Ae,.01,Math.PI-.01)),Me=Math.min(H,ve);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*Me+E),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=Yt(this.worldSize,this.center),d=c.x,y=c.y;this._helper._pixelPerMeter=a.at(1,this.center.lat)*this.worldSize;const b=a.aq(Math.min(this.pitch,ar)),E=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let L;this._calculateNearFarZIfNeeded(E,b,r),L=new Float64Array(16),a.bf(L,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aC(this._invProjMatrix,L),L[8]=2*-r.x/this._helper._width,L[9]=2*r.y/this._helper._height,this._projectionMatrix=a.bg(L),a.Q(L,L,[1,-1,1]),a.O(L,L,[0,0,-this._helper.cameraToCenterDistance]),a.bh(L,L,-this.rollInRadians),a.bi(L,L,this.pitchInRadians),a.bh(L,L,-this.bearingInRadians),a.O(L,L,[-d,-y,0]),this._mercatorMatrix=a.Q([],L,[this.worldSize,this.worldSize,this.worldSize]),a.Q(L,L,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,L),a.O(L,L,[0,0,-this.elevation]),this._viewProjMatrix=L,this._invViewProjMatrix=a.aC([],L);const R=[0,0,-1,1];a.aI(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),a.bf(this._fogMatrix,this.fovInRadians,this.width/this.height,E,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bh(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bi(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bh(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-d,-y,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,L);const H=this._helper._width%2/2,K=this._helper._height%2/2,re=Math.cos(this.bearingInRadians),J=Math.sin(-this.bearingInRadians),Ae=d-Math.round(d)+re*H+J*K,ve=y-Math.round(y)+re*K+J*H,Me=new Float64Array(L);if(a.O(Me,Me,[Ae>.5?Ae-1:Ae,ve>.5?ve-1:ve,0]),this._alignedProjMatrix=Me,L=a.aC(new Float64Array(16),this._pixelMatrix),!L)throw new Error("failed to invert matrix");this._pixelMatrixInverse=L,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new a.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.aI(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=a.at(1,this.center.lat)*this.worldSize;return dt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const d=a.ab.fromLngLat(r),y=[d.x*this.worldSize,d.y*this.worldSize,c,1];return a.aI(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(r){const{overscaledTileID:c,aligned:d,applyTerrainMatrix:y}=r,b=this._helper.getMercatorTileCoordinates(c),E=c?this.calculatePosMatrix(c,d,!0):null;let L;return L=c&&c.terrainRttPosMatrix32f&&y?c.terrainRttPosMatrix32f:E||a.bj(),{mainMatrix:L,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:L}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,d){return 1}transformLightDirection(r){return a.b2(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,d,y){const b=this.calculatePosMatrix(d);let E;y?(E=[r,c,y(r,c),1],a.aI(E,E,b)):(E=[r,c,0,1],CA(E,E,b));const L=E[3];return{point:new a.P(E[0]/L,E[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const d=a.ab.fromLngLat(r,c),y=d.meterInMercatorCoordinateUnits(),b=a.bk();return a.O(b,b,[d.x,d.y,d.z]),a.bh(b,b,Math.PI),a.bi(b,b,Math.PI/2),a.Q(b,b,[-y,y,y]),b}getProjectionDataForCustomLayer(r=!0){const c=new a.a2(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),y=Ir(c,this.worldSize);a.S(y,this._viewProjMatrix,y),d.tileMercatorCoords=[0,0,1,1];const b=[a.a5,a.a5,this.worldSize/this._helper.pixelsPerMeter],E=a.bl();return a.Q(E,y,b),d.fallbackMatrix=E,d.mainMatrix=E,d}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function zo(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ca(w){if(w.useSlerp)if(w.k<1){const r=a.bm(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=a.bm(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),d=new Float64Array(4);a.bn(d,r,c,w.k);const y=a.bo(d);w.tr.setRoll(y.roll),w.tr.setPitch(y.pitch),w.tr.setBearing(y.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(a.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(a.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(a.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function tc(w,r,c,d,y){const b=y.padding,E=Yt(y.worldSize,c.getNorthWest()),L=Yt(y.worldSize,c.getNorthEast()),R=Yt(y.worldSize,c.getSouthEast()),H=Yt(y.worldSize,c.getSouthWest()),K=a.aq(-d),re=E.rotate(K),J=L.rotate(K),Ae=R.rotate(K),ve=H.rotate(K),Me=new a.P(Math.max(re.x,J.x,ve.x,Ae.x),Math.max(re.y,J.y,ve.y,Ae.y)),Oe=new a.P(Math.min(re.x,J.x,ve.x,Ae.x),Math.min(re.y,J.y,ve.y,Ae.y)),Re=Me.sub(Oe),je=(y.width-(b.left+b.right+r.left+r.right))/Re.x,it=(y.height-(b.top+b.bottom+r.top+r.bottom))/Re.y;if(it<0||je<0)return void zo();const We=Math.min(a.au(y.scale*Math.min(je,it)),w.maxZoom),ot=a.P.convert(w.offset),ht=new a.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(a.aq(d)),rt=ot.add(ht).mult(y.scale/a.ar(We));return{center:hr(y.worldSize,E.add(R).div(2).sub(rt)),zoom:We,bearing:d}}class Aa{get useGlobeControls(){return!1}handlePanInertia(r,c){const d=r.mag(),y=Math.abs(tn(c));return{easingOffset:r.mult(Math.min(.75*y/d,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,d){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(d,r.around)}cameraForBoxAndBearing(r,c,d,y,b){return tc(r,c,d,y,b)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(a.V.convert(c.center))}handleEaseTo(r,c){const d=r.zoom,y=r.padding,b={roll:r.roll,pitch:r.pitch,bearing:r.bearing},E={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},L=c.zoom!==void 0,R=!r.isPaddingEqual(c.padding);let H=!1;const K=L?+c.zoom:r.zoom;let re=r.centerPoint.add(c.offsetAsPoint);const J=r.screenPointToLocation(re),{center:Ae,zoom:ve}=r.applyConstrain(a.V.convert(c.center||J),K??d);Sa(r,Ae);const Me=Yt(r.worldSize,J),Oe=Yt(r.worldSize,Ae).sub(Me),Re=a.ar(ve-d);return H=ve!==d,{easeFunc:je=>{if(H&&r.setZoom(a.G.number(d,ve,je)),a.bp(b,E)||ca({startEulerAngles:b,endEulerAngles:E,tr:r,k:je,useSlerp:b.roll!=E.roll}),R&&(r.interpolatePadding(y,c.padding,je),re=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const it=a.ar(r.zoom-d),We=ve>d?Math.min(2,Re):Math.max(.5,Re),ot=Math.pow(We,1-je),ht=hr(r.worldSize,Me.add(Oe.mult(je*ot)).mult(it));r.setLocationAtPoint(r.renderWorldCopies?ht.wrap():ht,re)}},isZooming:H,elevationCenter:Ae}}handleFlyTo(r,c){const d=c.zoom!==void 0,y=r.zoom,b=r.applyConstrain(a.V.convert(c.center||c.locationAtOffset),d?+c.zoom:y),E=b.center,L=b.zoom;Sa(r,E);const R=Yt(r.worldSize,c.locationAtOffset),H=Yt(r.worldSize,E).sub(R),K=H.mag(),re=a.ar(L-y);let J;if(c.minZoom!==void 0){const Ae=Math.min(+c.minZoom,y,L),ve=r.applyConstrain(E,Ae).zoom;J=a.ar(ve-y)}return{easeFunc:(Ae,ve,Me,Oe)=>{r.setZoom(Ae===1?L:y+a.au(ve));const Re=Ae===1?E:hr(r.worldSize,R.add(H.mult(Me)).mult(ve));r.setLocationAtPoint(r.renderWorldCopies?Re.wrap():Re,Oe)},scaleOfZoom:re,targetCenter:E,scaleOfMinZoom:J,pixelPathLength:K}}}class Rn{constructor(r,c,d){this.blendFunction=r,this.blendColor=c,this.mask=d}}Rn.Replace=[1,0],Rn.disabled=new Rn(Rn.Replace,a.bq.transparent,[!1,!1,!1,!1]),Rn.unblended=new Rn(Rn.Replace,a.bq.transparent,[!0,!0,!0,!0]),Rn.alphaBlended=new Rn([1,771],a.bq.transparent,[!0,!0,!0,!0]);const Ho=2305;class Cn{constructor(r,c,d){this.enable=r,this.mode=c,this.frontFace=d}}Cn.disabled=new Cn(!1,1029,Ho),Cn.backCCW=new Cn(!0,1029,Ho),Cn.frontCCW=new Cn(!0,1028,Ho);class pn{constructor(r,c,d){this.func=r,this.mask=c,this.range=d}}pn.ReadOnly=!1,pn.ReadWrite=!0,pn.disabled=new pn(519,pn.ReadOnly,[0,1]);const Ea=7680;class xn{constructor(r,c,d,y,b,E){this.test=r,this.ref=c,this.mask=d,this.fail=y,this.depthFail=b,this.pass=E}}xn.disabled=new xn({func:519,mask:0},0,0,Ea,Ea,Ea);const jo=new WeakMap;function Ci(w){var r;if(jo.has(w))return jo.get(w);{const c=(r=w.getParameter(w.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return jo.set(w,c),c}}class so{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,d=c.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;const y=new a.aX;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const b=new a.aZ;b.emplaceBack(0,1,2),this._fullscreenTriangle=new ni(c.createVertexBuffer(y,ys.members),c.createIndexBuffer(b),a.aY.simpleSegment(0,0,y.length,b.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(d.TEXTURE1);const E=d.createTexture();d.bindTexture(d.TEXTURE_2D,E),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(E),Ci(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const d=this._cachedRenderContext.context,y=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:a.bq.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,y.TRIANGLES,pn.disabled,xn.disabled,Rn.unblended,Cn.disabled,((b,E)=>({u_input:b,u_output_expected:E}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ci(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const b=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ci(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=so._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const ua=a.a5/128;function j(w,r){const c=w.granularity!==void 0?Math.max(w.granularity,1):1,d=c+(w.generateBorders?2:0),y=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),b=d+1,E=y+1,L=w.generateBorders?-1:0,R=w.generateBorders||w.extendToNorthPole?-1:0,H=c+(w.generateBorders?1:0),K=c+(w.generateBorders||w.extendToSouthPole?1:0),re=b*E,J=d*y*6,Ae=b*E>65536;if(Ae&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ve=Ae||r==="32bit",Me=new Int16Array(2*re);let Oe=0;for(let it=R;it<=K;it++)for(let We=L;We<=H;We++){let ot=We/c*a.a5;We===-1&&(ot=-ua),We===c+1&&(ot=a.a5+ua);let ht=it/c*a.a5;it===-1&&(ht=w.extendToNorthPole?a.bs:-ua),it===c+1&&(ht=w.extendToSouthPole?a.bt:a.a5+ua),Me[Oe++]=ot,Me[Oe++]=ht}const Re=ve?new Uint32Array(J):new Uint16Array(J);let je=0;for(let it=0;it<y;it++)for(let We=0;We<d;We++){const ot=We+1+it*b,ht=We+(it+1)*b,rt=We+1+(it+1)*b;Re[je++]=We+it*b,Re[je++]=ht,Re[je++]=ot,Re[je++]=ot,Re[je++]=ht,Re[je++]=rt}return{vertices:Me.buffer.slice(0),indices:Re.buffer.slice(0),uses32bitIndices:ve}}const me=new a.aW({fill:new a.bu(128,2),line:new a.bu(512,0),tile:new a.bu(128,32),stencil:new a.bu(128,1),circle:3});class Je{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Yn.projectionGlobe}get vertexShaderPreludeCode(){return Yn.projectionMercator.vertexSource}get subdivisionGranularity(){return me}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new so(r));const c=a.X(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(c,d),b=z();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=b);const E=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bv(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bw(E))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,d,y,b){const E=(b==="stencil"?me.stencil:me.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:E,generateBorders:d,extendToNorthPole:c.y===0&&y,extendToSouthPole:c.y===(1<<c.z)-1&&y})}_getMesh(r,c){const d=this._getMeshKey(c);if(d in this._tileMeshCache)return this._tileMeshCache[d];const y=(function(b,E){const L=j(E,"16bit"),R=a.aX.deserialize({arrayBuffer:L.vertices,length:L.vertices.byteLength/2/2}),H=a.aZ.deserialize({arrayBuffer:L.indices,length:L.indices.byteLength/2/3});return new ni(b.createVertexBuffer(R,ys.members),b.createIndexBuffer(H),a.aY.simpleSegment(0,0,R.length,H.length))})(r,c);return this._tileMeshCache[d]=y,y}recalculate(r){}hasTransition(){const r=z();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const mt=new a.t({type:new a.D(a.u.projection.type)});class Ft extends a.E{constructor(r){super(),this._transitionable=new a.x(mt,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new vs,this._verticalPerspectiveProjection=new Je}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof a.bx){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,d,y,b){return this.currentProjection.getMeshFromTileID(r,c,d,y,b)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Vt(w){const r=jr(w.worldSize,w.center.lat);return 2*Math.PI*r}function ir(w,r,c,d,y){const b=1/(1<<y),E=r/a.a5*b+d*b,L=a.bz((w/a.a5*b+c*b)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI,H=Math.cos(R),K=new Float64Array(3);return K[0]=Math.sin(L)*H,K[1]=Math.sin(R),K[2]=Math.cos(L)*H,K}function xr(w){return(function(r,c){const d=Math.cos(c),y=new Float64Array(3);return y[0]=Math.sin(r)*d,y[1]=Math.sin(c),y[2]=Math.cos(r)*d,y})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function jr(w,r){return w/(2*Math.PI)/Math.cos(r*Math.PI/180)}function mn(w){const r=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){const d=w[0]/c,y=Math.acos(w[2]/c),b=(d>0?y:-y)/Math.PI*180;return new a.V(a.W(b,-180,180),r)}return new a.V(0,r)}function gn(w){return Math.cos(w*Math.PI/180)}function cn(w,r){const c=gn(w),d=gn(r);return a.au(d/c)}function Hi(w,r){const c=w.rotate(r.bearingInRadians),d=r.zoom+cn(r.center.lat,0),y=a.bv(1/gn(r.center.lat),1/gn(Math.min(Math.abs(r.center.lat),60)),a.by(d,7,3,0,1)),b=360/Vt({worldSize:r.worldSize,center:{lat:r.center.lat}});return new a.V(r.center.lng-c.x*b*y,a.ao(r.center.lat+c.y*b,-a.ap,a.ap))}function ns(w){const r=.5*w,c=Math.sin(r),d=Math.cos(r);return Math.log(c+d)-Math.log(d-c)}function Si(w,r,c,d){const y=w.lat+c*d;if(Math.abs(c)>1){const b=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,E=Math.abs(w.lat+c)*Math.PI/180,L=ns(b+d*(E-b)),R=ns(b),H=ns(E);return new a.V(w.lng+r*((L-R)/(H-R)),y)}return new a.V(w.lng+r*d,y)}class ks{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,c,d,y){const b=`${r.z}_${r.x}_${r.y}_${y?.terrain?"t":""}`,E=this._cache.get(b);if(E)return E;const L=this._cachePrevious.get(b);if(L)return this._cache.set(b,L),L;const R=this._boundingVolumeFactory(r,c,d,y);return this._cache.set(b,R),this._hadAnyChanges=!0,R}}class Li{constructor(r,c,d,y){this.min=d,this.max=y,this.points=r,this.planes=c}static fromAabb(r,c){const d=[];for(let y=0;y<8;y++)d.push([1&~y?r[0]:c[0],(y>>1&1)==1?c[1]:r[1],(y>>2&1)==1?c[2]:r[2]]);return new Li(d,[[-1,0,0,c[0]],[1,0,0,-r[0]],[0,-1,0,c[1]],[0,1,0,-r[1]],[0,0,-1,c[2]],[0,0,1,-r[2]]],r,c)}static fromCenterSizeAngles(r,c,d){const y=a.bC([],d[0],d[1],d[2]),b=a.bD([],[c[0],0,0],y),E=a.bD([],[0,c[1],0],y),L=a.bD([],[0,0,c[2]],y),R=[...r],H=[...r];for(let re=0;re<8;re++)for(let J=0;J<3;J++){const Ae=r[J]+b[J]*(1&~re?-1:1)+E[J]*((re>>1&1)==1?1:-1)+L[J]*((re>>2&1)==1?1:-1);R[J]=Math.min(R[J],Ae),H[J]=Math.max(H[J],Ae)}const K=[];for(let re=0;re<8;re++){const J=[...r];a.b1(J,J,a.b0([],b,1&~re?-1:1)),a.b1(J,J,a.b0([],E,(re>>1&1)==1?1:-1)),a.b1(J,J,a.b0([],L,(re>>2&1)==1?1:-1)),K.push(J)}return new Li(K,[[...b,-a.b6(b,K[0])],[...E,-a.b6(E,K[0])],[...L,-a.b6(L,K[0])],[-b[0],-b[1],-b[2],-a.b6(b,K[7])],[-E[0],-E[1],-E[2],-a.b6(E,K[7])],[-L[0],-L[1],-L[2],-a.b6(L,K[7])]],R,H)}intersectsFrustum(r){let c=!0;const d=this.points.length,y=this.planes.length,b=r.planes.length,E=r.points.length;for(let L=0;L<b;L++){const R=r.planes[L];let H=0;for(let K=0;K<d;K++){const re=this.points[K];R[0]*re[0]+R[1]*re[1]+R[2]*re[2]+R[3]>=0&&H++}if(H===0)return 0;H<d&&(c=!1)}if(c)return 2;for(let L=0;L<y;L++){const R=this.planes[L];let H=0;for(let K=0;K<E;K++){const re=r.points[K];R[0]*re[0]+R[1]*re[1]+R[2]*re[2]+R[3]>=0&&H++}if(H===0)return 0}return 1}intersectsPlane(r){const c=this.points.length;let d=0;for(let y=0;y<c;y++){const b=this.points[y];r[0]*b[0]+r[1]*b[1]+r[2]*b[2]+r[3]>=0&&d++}return d===c?2:d===0?0:1}}function _s(w,r,c){const d=w-r;return d<0?-d:Math.max(0,d-c)}function Vo(w,r,c,d,y){const b=w-c;let E;return E=b<0?Math.min(-b,1+b-y):b>1?Math.min(Math.max(b-y,0),1-b):0,Math.max(E,_s(r,d,y))}class ha{constructor(){this._boundingVolumeCache=new ks(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,c,d,y){const b=1<<d.z,E=1/b,L=d.x/b,R=d.y/b;let H=2;return H=Math.min(H,Vo(r,c,L,R,E)),H=Math.min(H,Vo(r,c,L+.5,-R-E,E)),H=Math.min(H,Vo(r,c,L+.5,2-R-E,E)),H}getWrap(r,c,d){const y=1<<c.z,b=1/y,E=c.x/y,L=_s(r.x,E,b),R=_s(r.x,E-1,b),H=_s(r.x,E+1,b),K=Math.min(L,R,H);return K===H?1:K===R?-1:0}allowVariableZoom(r,c){return _r(r,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,c,d,y){return this._boundingVolumeCache.getTileBoundingVolume(r,c,d,y)}_computeTileBoundingVolume(r,c,d,y){var b,E;let L=0,R=0;if(y?.terrain){const H=new a.a2(r.z,c,r.z,r.x,r.y),K=y.terrain.getMinMaxElevation(H);L=(b=K.minElevation)!==null&&b!==void 0?b:Math.min(0,d),R=(E=K.maxElevation)!==null&&E!==void 0?E:Math.max(0,d)}if(L/=a.bF,R/=a.bF,L+=1,R+=1,r.z<=0)return Li.fromAabb([-R,-R,-R],[R,R,R]);if(r.z===1)return Li.fromAabb([r.x===0?-R:0,r.y===0?0:-R,-R],[r.x===0?0:R,r.y===0?R:0,R]);{const H=[ir(0,0,r.x,r.y,r.z),ir(a.a5,0,r.x,r.y,r.z),ir(a.a5,a.a5,r.x,r.y,r.z),ir(0,a.a5,r.x,r.y,r.z)],K=[];for(const Dt of H)K.push(a.b0([],Dt,R));if(R!==L)for(const Dt of H)K.push(a.b0([],Dt,L));r.y===0&&K.push([0,1,0]),r.y===(1<<r.z)-1&&K.push([0,-1,0]);const re=[1,1,1],J=[-1,-1,-1];for(const Dt of K)for(let Nt=0;Nt<3;Nt++)re[Nt]=Math.min(re[Nt],Dt[Nt]),J[Nt]=Math.max(J[Nt],Dt[Nt]);const Ae=ir(a.a5/2,a.a5/2,r.x,r.y,r.z),ve=a.b5([],[0,1,0],Ae);a.b4(ve,ve);const Me=a.b5([],Ae,ve);a.b4(Me,Me);const Oe=a.b5([],H[2],H[1]);a.b4(Oe,Oe);const Re=a.b5([],H[0],H[3]);a.b4(Re,Re),K.push(a.b0([],Ae,R)),r.y>=(1<<r.z)/2&&K.push(a.b0([],ir(a.a5/2,0,r.x,r.y,r.z),R)),r.y<(1<<r.z)/2&&K.push(a.b0([],ir(a.a5/2,a.a5,r.x,r.y,r.z),R));const je=fa(Ae,K),it=fa(Me,K),We=[-Ae[0],-Ae[1],-Ae[2],je.max],ot=[Ae[0],Ae[1],Ae[2],-je.min],ht=[-Me[0],-Me[1],-Me[2],it.max],rt=[Me[0],Me[1],Me[2],-it.min],vt=[...Oe,0],Ut=[...Re,0],Tt=[];return r.y===0?Tt.push(a.bE(Ut,vt,We),a.bE(Ut,vt,ot)):Tt.push(a.bE(ht,vt,We),a.bE(ht,vt,ot),a.bE(ht,Ut,We),a.bE(ht,Ut,ot)),r.y===(1<<r.z)-1?Tt.push(a.bE(Ut,vt,We),a.bE(Ut,vt,ot)):Tt.push(a.bE(rt,vt,We),a.bE(rt,vt,ot),a.bE(rt,Ut,We),a.bE(rt,Ut,ot)),new Li(Tt,[We,ot,ht,rt,vt,Ut],re,J)}}}function fa(w,r){let c=1/0,d=-1/0;for(const y of r){const b=a.b6(w,y);c=Math.min(c,b),d=Math.max(d,b)}return{min:c,max:d}}class Fa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,d){return this._helper.interpolatePadding(r,c,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(r){this._cachedClippingPlane=a.bG(),this._projectionMatrix=a.bk(),this._globeViewProjMatrix32f=a.bj(),this._globeViewProjMatrixNoCorrection=a.bk(),this._globeViewProjMatrixNoCorrectionInverted=a.bk(),this._globeProjMatrixInverted=a.bk(),this._cameraPosition=a.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(c,d)=>{const y=a.ao(c.lat,-a.ap,a.ap),b=a.ao(+d,this.minZoom+cn(0,y),this.maxZoom);return{center:new a.V(c.lng,y),zoom:b}},this.applyConstrain=(c,d)=>this._helper.applyConstrain(c,d),this._helper=new la({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,d)=>this.defaultConstrain(c,d)},r),this._coveringTilesDetailsProvider=new ha}clone(){const r=new Fa;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=a.bA();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:d}=r,y=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,d=this.cameraToCenterDistance/r,y=Math.sin(c)*d,b=Math.cos(c)*d+1,E=1/Math.sqrt(y*y+b*b)*1;let L=-y,R=b;const H=Math.sqrt(L*L+R*R);L/=H,R/=H;const K=[0,L,R];a.bH(K,K,[0,0,0],-this.bearingInRadians),a.bI(K,K,[0,0,0],-1*this.center.lat*Math.PI/180),a.bJ(K,K,[0,0,0],this.center.lng*Math.PI/180);const re=1/a.b8(K);return a.b0(K,K,re),[...K,-E*re]}isLocationOccluded(r){return!this.isSurfacePointVisible(xr(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,y=Math.cos(d),b=[Math.sin(c)*y,Math.sin(d),Math.cos(c)*y],E=[b[2],0,-b[0]],L=[0,0,0];a.b5(L,E,b),a.b4(E,E),a.b4(L,L);const R=[0,0,0];return a.b4(R,[E[0]*r[0]+L[0]*r[1]+b[0]*r[2],E[1]*r[0]+L[1]*r[1]+b[1]*r[2],E[2]*r[0]+L[2]*r[1]+b[2]*r[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,d){const y=(function(L,R,H){const K=1/(1<<H.z);return new a.ab(L/a.a5*K+H.x*K,R/a.a5*K+H.y*K)})(r,c,d.canonical),b=(E=y.y,[a.bz(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI]);var E;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(r,c,d,y){const b=d.canonical,E=ir(r,c,b.x,b.y,b.z),L=1+(y?y(r,c):0)/a.bF,R=[E[0]*L,E[1]*L,E[2]*L,1];a.aI(R,R,this._globeViewProjMatrixNoCorrection);const H=this._cachedClippingPlane,K=H[0]*E[0]+H[1]*E[1]+H[2]*E[2]+H[3]<0;return{point:new a.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:K}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=jr(this.worldSize,this.center.lat),c=a.bl(),d=a.bl();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),a.bf(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;c[8]=2*-y.x/this._helper._width,c[9]=2*y.y/this._helper._height,this._projectionMatrix=a.bg(c),this._globeProjMatrixInverted=a.bl(),a.aC(this._globeProjMatrixInverted,c),a.O(c,c,[0,0,-this.cameraToCenterDistance]),a.bh(c,c,this.rollInRadians),a.bi(c,c,-this.pitchInRadians),a.bh(c,c,this.bearingInRadians),a.O(c,c,[0,0,-r]);const b=a.bA();b[0]=r,b[1]=r,b[2]=r,a.bi(d,c,this.center.lat*Math.PI/180),a.bK(d,d,-this.center.lng*Math.PI/180),a.Q(d,d,b),this._globeViewProjMatrixNoCorrection=d,a.bi(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bK(c,c,-this.center.lng*Math.PI/180),a.Q(c,c,b),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=a.bl(),a.aC(this._globeViewProjMatrixNoCorrectionInverted,d);const E=a.bA();this._cameraPosition=a.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/r,a.bH(this._cameraPosition,this._cameraPosition,E,-this.rollInRadians),a.bI(this._cameraPosition,this._cameraPosition,E,this.pitchInRadians),a.bH(this._cameraPosition,this._cameraPosition,E,-this.bearingInRadians),a.b1(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bI(this._cameraPosition,this._cameraPosition,E,-this.center.lat*Math.PI/180),a.bJ(this._cameraPosition,this._cameraPosition,E,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const L=a.bg(this._globeViewProjMatrixNoCorrectionInverted);a.Q(L,L,[1,1,-1]),this._cachedFrustum=Gs.fromInvProjectionMatrix(L,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){a.w("calculateFogMatrix is not supported on globe projection.");const c=a.bl();return a.as(c),c}getVisibleUnwrappedCoordinates(r){return[new a.bd(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const d=xr(r);a.b0(d,d,1+c/a.bF);const y=a.bG();return a.aI(y,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,d=[new a.P(0,0),new a.P(r,0),new a.P(this.width,0),new a.P(this.width,c),new a.P(this.width,this.height),new a.P(r,this.height),new a.P(0,this.height),new a.P(0,c)],y=[];for(const re of d)y.push(this.unprojectScreenPoint(re));let b=0,E=0,L=0,R=0;const H=this.center;for(const re of y){const J=a.bL(H.lng,re.lng),Ae=a.bL(H.lat,re.lat);J<E&&(E=J),J>b&&(b=J),Ae<R&&(R=Ae),Ae>L&&(L=Ae)}const K=[H.lng+E,H.lat+R,H.lng+b,H.lat+L];return this.isSurfacePointOnScreen([0,1,0])&&(K[3]=90,K[0]=-180,K[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(K[1]=-90,K[0]=-180,K[2]=180),new kr(K)}calculateCenterFromCameraLngLatAlt(r,c,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,d,y)}setLocationAtPoint(r,c){const d=xr(this.unprojectScreenPoint(c)),y=xr(r),b=a.bA();a.bM(b);const E=a.bA();a.bJ(E,d,b,-this.center.lng*Math.PI/180),a.bI(E,E,b,this.center.lat*Math.PI/180);const L=y[0]*y[0]+y[2]*y[2],R=E[0]*E[0];if(L<R)return;const H=Math.sqrt(L-R),K=-H,re=a.bN(y[0],y[2],E[0],H),J=a.bN(y[0],y[2],E[0],K),Ae=a.bA();a.bJ(Ae,y,b,-re);const ve=a.bN(Ae[1],Ae[2],E[1],E[2]),Me=a.bA();a.bJ(Me,y,b,-J);const Oe=a.bN(Me[1],Me[2],E[1],E[2]),Re=.5*Math.PI,je=ve>=-Re&&ve<=Re,it=Oe>=-Re&&Oe<=Re;let We,ot;if(je&&it){const Ut=this.center.lng*Math.PI/180,Tt=this.center.lat*Math.PI/180;a.bO(re,Ut)+a.bO(ve,Tt)<a.bO(J,Ut)+a.bO(Oe,Tt)?(We=re,ot=ve):(We=J,ot=Oe)}else if(je)We=re,ot=ve;else{if(!it)return;We=J,ot=Oe}const ht=We/Math.PI*180,rt=ot/Math.PI*180,vt=this.center.lat;this.setCenter(new a.V(ht,a.ao(rt,-90,90))),this.setZoom(this.zoom+cn(vt,this.center.lat))}locationToScreenPoint(r,c){const d=xr(r);if(c){const y=c.getElevationForLngLatZoom(r,this._helper._tileZoom);a.b0(d,d,1+y/a.bF)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(r){const c=a.bG();return a.aI(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new a.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const d=c.pointCoordinate(r);if(d)return d}return a.ab.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var d;return(d=this.screenPointToMercatorCoordinate(r,c))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(r,c){const d=this._cameraPosition,y=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(d,y)}getRayDirectionFromPixel(r){const c=a.bG();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,a.aI(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const d=a.bA();d[0]=c[0]-this._cameraPosition[0],d[1]=c[1]-this._cameraPosition[1],d[2]=c[2]-this._cameraPosition[2];const y=a.bA();return a.b4(y,d),y}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=a.bG();return a.aI(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const d=a.b6(r,c),y=a.bA(),b=a.bA();a.b0(b,c,d),a.b3(y,r,b);const E=1-a.b6(y,y);if(E<0)return null;const L=a.b6(r,r)-1,R=-d+(d<0?1:-1)*Math.sqrt(E),H=L/R,K=R;return{tMin:Math.min(H,K),tMax:Math.max(H,K)}}unprojectScreenPoint(r){const c=this._cameraPosition,d=this.getRayDirectionFromPixel(r),y=this.rayPlanetIntersection(c,d);if(y){const K=a.bA();a.b1(K,c,[d[0]*y.tMin,d[1]*y.tMin,d[2]*y.tMin]);const re=a.bA();return a.b4(re,K),mn(re)}const b=this._cachedClippingPlane,E=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],L=-a.bc(b,c)/E,R=a.bA();if(L>0)a.b1(R,c,[d[0]*L,d[1]*L,d[2]*L]);else{const K=a.bA();a.b1(K,c,[2*d[0],2*d[1],2*d[2]]);const re=a.bc(this._cachedClippingPlane,K);a.b3(R,K,[this._cachedClippingPlane[0]*re,this._cachedClippingPlane[1]*re,this._cachedClippingPlane[2]*re])}const H=(function(K){const re=a.bA();return re[0]=K[0]*-K[3],re[1]=K[1]*-K[3],re[2]=K[2]*-K[3],{center:re,radius:Math.sqrt(1-K[3]*K[3])}})(b);return mn((function(K,re,J){const Ae=a.bA();a.b3(Ae,J,K);const ve=a.bA();return a.bB(ve,K,Ae,re/a.ba(Ae)),ve})(H.center,H.radius,R))}getMatrixForModel(r,c){const d=a.V.convert(r),y=1/a.bF,b=a.bk();return a.bK(b,b,d.lng/180*Math.PI),a.bi(b,b,-d.lat/180*Math.PI),a.O(b,b,[0,0,1+c/a.bF]),a.bi(b,b,.5*Math.PI),a.Q(b,b,[y,y,y]),b}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new a.a2(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class cl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,d){return this._helper.interpolatePadding(r,c,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,d=!0){this._helper.resize(r,c,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(r){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(c,d)=>this.currentTransform.defaultConstrain(c,d),this.applyConstrain=(c,d)=>this._helper.applyConstrain(c,d),this._helper=new la({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,d)=>this.defaultConstrain(c,d)},r),this._globeness=1,this._mercatorTransform=new ll,this._verticalPerspectiveTransform=new Fa}clone(){const r=new cl;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),d=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:c.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return a.bv(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bv(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,d){const y=this._mercatorTransform.getPitchedTextCorrection(r,c,d),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,d);return a.bv(y,b,this._globeness)}projectTileCoordinates(r,c,d,y){return this.currentTransform.projectTileCoordinates(r,c,d,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(r,c,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,d,y)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return d.fallbackMatrix=c.mainMatrix,d}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Ei{get useGlobeControls(){return!0}handlePanInertia(r,c){const d=Hi(r,c);return Math.abs(d.lng-c.center.lng)>180&&(d.lng=c.center.lng+179.5*Math.sign(d.lng-c.center.lng)),{easingCenter:d,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const d=r.around,y=c.screenPointToLocation(d);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const b=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const E=c.zoom-b;if(E===0)return;const L=a.bL(c.center.lng,y.lng),R=L/(Math.abs(L/180)+1),H=a.bL(c.center.lat,y.lat),K=c.getRayDirectionFromPixel(d),re=c.cameraPosition,J=-1*a.b6(re,K),Ae=a.bA();a.b1(Ae,re,[K[0]*J,K[1]*J,K[2]*J]);const ve=a.b8(Ae)-1,Me=Math.exp(.5*-Math.max(ve-.3,0)),Oe=jr(c.worldSize,c.center.lat)/Math.min(c.width,c.height),Re=a.by(Oe,.9,.5,1,.25),je=(1-a.ar(-E))*Math.min(Me,Re),it=c.center.lat,We=c.zoom,ot=new a.V(c.center.lng+R*je,a.ao(c.center.lat+H*je,-a.ap,a.ap));c.setLocationAtPoint(y,d);const ht=c.center,rt=a.by(Math.abs(L),45,85,0,1),vt=a.by(Oe,.75,.35,0,1),Ut=Math.pow(Math.max(rt,vt),.25),Tt=a.bL(ht.lng,ot.lng),Dt=a.bL(ht.lat,ot.lat);c.setCenter(new a.V(ht.lng+Tt*Ut,ht.lat+Dt*Ut).wrap()),c.setZoom(We+cn(it,c.center.lat))}handleMapControlsPan(r,c,d){if(!r.panDelta)return;const y=c.center.lat,b=c.zoom;c.setCenter(Hi(r.panDelta,c).wrap()),c.setZoom(b+cn(y,c.center.lat))}cameraForBoxAndBearing(r,c,d,y,b){const E=tc(r,c,d,y,b),L=c.left/b.width*2-1,R=(b.width-c.right)/b.width*2-1,H=c.top/b.height*-2+1,K=(b.height-c.bottom)/b.height*-2+1,re=a.bL(d.getWest(),d.getEast())<0,J=re?d.getEast():d.getWest(),Ae=re?d.getWest():d.getEast(),ve=Math.max(d.getNorth(),d.getSouth()),Me=Math.min(d.getNorth(),d.getSouth()),Oe=J+.5*a.bL(J,Ae),Re=ve+.5*a.bL(ve,Me),je=b.clone();je.setCenter(E.center),je.setBearing(E.bearing),je.setPitch(0),je.setRoll(0),je.setZoom(E.zoom);const it=je.modelViewProjectionMatrix,We=[xr(d.getNorthWest()),xr(d.getNorthEast()),xr(d.getSouthWest()),xr(d.getSouthEast()),xr(new a.V(Ae,Re)),xr(new a.V(J,Re)),xr(new a.V(Oe,ve)),xr(new a.V(Oe,Me))],ot=xr(E.center);let ht=Number.POSITIVE_INFINITY;for(const rt of We)L<0&&(ht=Ei.getLesserNonNegativeNonNull(ht,Ei.solveVectorScale(rt,ot,it,"x",L))),R>0&&(ht=Ei.getLesserNonNegativeNonNull(ht,Ei.solveVectorScale(rt,ot,it,"x",R))),H>0&&(ht=Ei.getLesserNonNegativeNonNull(ht,Ei.solveVectorScale(rt,ot,it,"y",H))),K<0&&(ht=Ei.getLesserNonNegativeNonNull(ht,Ei.solveVectorScale(rt,ot,it,"y",K)));if(Number.isFinite(ht)&&ht!==0)return E.zoom=je.zoom+a.au(ht),E;zo()}handleJumpToCenterZoom(r,c){const d=r.center.lat,y=r.applyConstrain(c.center?a.V.convert(c.center):r.center,r.zoom).center;r.setCenter(y.wrap());const b=c.zoom!==void 0?+c.zoom:r.zoom+cn(d,y.lat);r.zoom!==b&&r.setZoom(b)}handleEaseTo(r,c){const d=r.zoom,y=r.center,b=r.padding,E={roll:r.roll,pitch:r.pitch,bearing:r.bearing},L={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},R=c.zoom!==void 0,H=!r.isPaddingEqual(c.padding);let K=!1;const re=c.center?a.V.convert(c.center):y,J=r.applyConstrain(re,d).center;Sa(r,J);const Ae=r.clone();Ae.setCenter(J),Ae.setZoom(R?+c.zoom:d+cn(y.lat,re.lat)),Ae.setBearing(c.bearing);const ve=new a.P(a.ao(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),a.ao(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));Ae.setLocationAtPoint(J,ve);const Me=(c.offset&&c.offsetAsPoint.mag())>0?Ae.center:J,Oe=R?+c.zoom:d+cn(y.lat,Me.lat),Re=d+cn(y.lat,0),je=Oe+cn(Me.lat,0),it=a.bL(y.lng,Me.lng),We=a.bL(y.lat,Me.lat),ot=a.ar(je-Re);return K=Oe!==d,{easeFunc:ht=>{if(a.bp(E,L)||ca({startEulerAngles:E,endEulerAngles:L,tr:r,k:ht,useSlerp:E.roll!=L.roll}),H&&r.interpolatePadding(b,c.padding,ht),c.around)a.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const rt=je>Re?Math.min(2,ot):Math.max(.5,ot),vt=Math.pow(rt,1-ht),Ut=Si(y,it,We,ht*vt);r.setCenter(Ut.wrap())}if(K){const rt=a.G.number(Re,je,ht)+cn(0,r.center.lat);r.setZoom(rt)}},isZooming:K,elevationCenter:Me}}handleFlyTo(r,c){const d=c.zoom!==void 0,y=r.center,b=r.zoom,E=r.padding,L=!r.isPaddingEqual(c.padding),R=r.applyConstrain(a.V.convert(c.center||c.locationAtOffset),b).center,H=d?+c.zoom:r.zoom+cn(r.center.lat,R.lat),K=r.clone();K.setCenter(R),K.setZoom(H),K.setBearing(c.bearing);const re=new a.P(a.ao(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),a.ao(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));K.setLocationAtPoint(R,re);const J=K.center;Sa(r,J);const Ae=(function(We,ot,ht){const rt=xr(ot),vt=xr(ht),Ut=a.b6(rt,vt),Tt=Math.acos(Ut),Dt=Vt(We);return Tt/(2*Math.PI)*Dt})(r,y,J),ve=b+cn(y.lat,0),Me=H+cn(J.lat,0),Oe=a.ar(Me-ve);let Re;if(typeof c.minZoom=="number"){const We=+c.minZoom+cn(J.lat,0),ot=Math.min(We,ve,Me)+cn(0,J.lat),ht=r.applyConstrain(J,ot).zoom+cn(J.lat,0);Re=a.ar(ht-ve)}const je=a.bL(y.lng,J.lng),it=a.bL(y.lat,J.lat);return{easeFunc:(We,ot,ht,rt)=>{const vt=Si(y,je,it,ht);L&&r.interpolatePadding(E,c.padding,We);const Ut=We===1?J:vt;r.setCenter(Ut.wrap());const Tt=ve+a.au(ot);r.setZoom(We===1?H:Tt+cn(0,Ut.lat))},scaleOfZoom:Oe,targetCenter:J,scaleOfMinZoom:Re,pixelPathLength:Ae}}static solveVectorScale(r,c,d,y,b){const E=y==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],L=[d[3],d[7],d[11],d[15]],R=r[0]*E[0]+r[1]*E[1]+r[2]*E[2],H=r[0]*L[0]+r[1]*L[1]+r[2]*L[2],K=c[0]*E[0]+c[1]*E[1]+c[2]*E[2],re=c[0]*L[0]+c[1]*L[1]+c[2]*L[2];return K+b*H===R+b*re||L[3]*(R-K)+E[3]*(re-H)+R*re==K*H?null:(K+E[3]-b*re-b*L[3])/(K-R-b*re+b*H)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class Sc{constructor(r){this._globe=r,this._mercatorCameraHelper=new Aa,this._verticalPerspectiveCameraHelper=new Ei}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,d){this.currentHelper.handleMapControlsPan(r,c,d)}cameraForBoxAndBearing(r,c,d,y,b){return this.currentHelper.cameraForBoxAndBearing(r,c,d,y,b)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const da=(w,r)=>a.B(w,r&&r.filter((c=>c.identifier!=="source.canvas"))),Ia=a.bP();class Zi extends a.E{constructor(r,c={}){var d,y;super(),this._rtlPluginLoaded=()=>{for(const E in this.tileManagers){const L=this.tileManagers[E].getSource().type;L!=="vector"&&L!=="geojson"||this.tileManagers[E].reload()}},this.map=r,this.dispatcher=new Pt(Et(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",((E,L)=>this.getGlyphs(E,L))),this.dispatcher.registerMessageHandler("GI",((E,L)=>this.getImages(E,L))),this.dispatcher.registerMessageHandler("GDA",((E,L)=>this.getDashes(E,L))),this.imageManager=new ge,this.imageManager.setEventedParent(this);const b=((d=r._container)===null||d===void 0?void 0:d.lang)||typeof document<"u"&&((y=document.documentElement)===null||y===void 0?void 0:y.lang)||void 0;this.glyphManager=new At(r._requestManager,c.localIdeographFontFamily,b),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new gs,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bQ()),gt().on(Ke,this._rtlPluginLoaded),this.on("data",(E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const L=this.tileManagers[E.sourceId];if(!L)return;const R=L.getSource();if(R&&R.vectorLayerIds)for(const H in this._layers){const K=this._layers[H];K.source===R.id&&this._validateLayer(K)}}))}_setInitialValues(){var r;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bR,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((r=this.crossTileSymbolIndex)===null||r===void 0?void 0:r.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(r,c){var d,y,b;this._checkLoaded();const E=c===null?(b=(y=(d=this.stylesheet.state)===null||d===void 0?void 0:d[r])===null||y===void 0?void 0:y.default)!==null&&b!==void 0?b:null:c;if(a.bS(E,this._globalState[r]))return this;this._globalState[r]=E,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const c=[];for(const d in r)!a.bS(this._globalState[d],r[d].default)&&(c.push(d),this._globalState[d]=r[d].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(r){if(r.length===0)return;const c=new Set,d={};for(const y of r){d[y]=this._globalState[y];for(const b in this._layers){const E=this._layers[b],L=E.getLayoutAffectingGlobalStateRefs(),R=E.getPaintAffectingGlobalStateRefs();if(L.has(y)&&c.add(E.source),R.has(y))for(const{name:H,value:K}of R.get(y))this._updatePaintProperty(E,H,K)}}this.dispatcher.broadcast("UGS",d);for(const y in this.tileManagers)c.has(y)&&(this._reloadSource(y),this._changed=!0)}loadURL(r,c={},d){this.fire(new a.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;a.j(y,this._loadStyleRequest).then((E=>{this._loadStyleRequest=null,this._load(E.data,c,d)})).catch((E=>{this._loadStyleRequest=null,E&&!b.signal.aborted&&this.fire(new a.k(E))}))}loadJSON(r,c={},d){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,d)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Ia,{validate:!1})}_load(r,c,d){var y,b;let E=c.transformStyle?c.transformStyle(d,r):r;if(!c.validate||!da(this,a.C(E))){E=Object.assign({},E),this._loaded=!0,this.stylesheet=E;for(const L in E.sources)this.addSource(L,E.sources[L],{validate:!1});E.sprite?this._loadSprite(E.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(E.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new ie(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var r,c,d;const y=a.bT(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",y),this._order=y.map((b=>b.id)),this._layers={},this._serializedLayers=null;for(const b of y){const E=a.bU(b,this._globalState);if(E.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=E,a.bV(E)&&this.tileManagers[E.source]){const L=(d=(c=b.paint)===null||c===void 0?void 0:c["raster-fade-duration"])!==null&&d!==void 0?d:E.paint.get("raster-fade-duration");this.tileManagers[E.source].setRasterFadeDuration(L)}}}_loadSprite(r,c=!1,d=void 0){this.imageManager.setLoaded(!1);const y=new AbortController;let b;this._spriteRequest=y,(function(E,L,R,H){return a._(this,void 0,void 0,(function*(){const K=be(E),re=R>1?"@2x":"",J={},Ae={};for(const{id:ve,url:Me}of K){const Oe=L.transformRequest(Ge(Me,re,".json"),"SpriteJSON");J[ve]=a.j(Oe,H);const Re=L.transformRequest(Ge(Me,re,".png"),"SpriteImage");Ae[ve]=Ze.getImage(Re,H)}return yield Promise.all([...Object.values(J),...Object.values(Ae)]),(function(ve,Me){return a._(this,void 0,void 0,(function*(){const Oe={};for(const Re in ve){Oe[Re]={};const je=P.getImageCanvasContext((yield Me[Re]).data),it=(yield ve[Re]).data;for(const We in it){const{width:ot,height:ht,x:rt,y:vt,sdf:Ut,pixelRatio:Tt,stretchX:Dt,stretchY:Nt,content:rr,textFitWidth:cr,textFitHeight:tr}=it[We];Oe[Re][We]={data:null,pixelRatio:Tt,sdf:Ut,stretchX:Dt,stretchY:Nt,content:rr,textFitWidth:cr,textFitHeight:tr,spriteData:{width:ot,height:ht,x:rt,y:vt,context:je}}}}return Oe}))})(J,Ae)}))})(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((E=>{if(this._spriteRequest=null,E)for(const L in E){this._spritesImagesIds[L]=[];const R=this._spritesImagesIds[L]?this._spritesImagesIds[L].filter((H=>!(H in E))):[];for(const H of R)this.imageManager.removeImage(H),this._changedImages[H]=!0;for(const H in E[L]){const K=L==="default"?H:`${L}:${H}`;this._spritesImagesIds[L].push(K),K in this.imageManager.images?this.imageManager.updateImage(K,E[L][H],!1):this.imageManager.addImage(K,E[L][H]),c&&(this._changedImages[K]=!0)}}})).catch((E=>{this._spriteRequest=null,b=E,y.signal.aborted||this.fire(new a.k(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),d&&d(b)}))}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.tileManagers[r.source];if(!c)return;const d=r.sourceLayer;if(!d)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.k(new Error(`Source layer "${d}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.tileManagers)if(!this.tileManagers[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?a.bW(d):d);const y=[];for(const b of r)if(d[b]){const E=c?a.bW(d[b]):d[b];y.push(E)}return y}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const d of c){const y=this._layers[d];y.type!=="custom"&&(r[d]=y.serialize())}return r}hasTransitions(){var r,c,d;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(const y in this.tileManagers)if(this.tileManagers[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const E in this._updatedSources){const L=this._updatedSources[E];if(L==="reload")this._reloadSource(E);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const d={};for(const y in this.tileManagers){const b=this.tileManagers[y];d[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(r,this._availableImages),!b.isHidden(r.zoom)&&b.source&&(this.tileManagers[b.source].used=!0)}for(const y in d){const b=this.tileManagers[y];!!d[y]!=!!b.used&&b.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.tileManagers)this.tileManagers[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var d;this._checkLoaded();const y=this.serialize();if(r=c.transformStyle?c.transformStyle(y,r):r,((d=c.validate)===null||d===void 0||d)&&da(this,a.C(r)))return!1;(r=a.bW(r)).layers=a.bT(r.layers);const b=a.bX(y,r),E=this._getOperationsToPerform(b);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(E.operations.length===0)return!1;for(const L of E.operations)L();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],d=[];for(const y of r)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,y.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,y.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,y.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,y.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,y.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,y.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,y.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,y.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,y.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,y.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,y.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,y.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,y.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,y.args)));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,y.args)));break;case"setTransition":c.push((()=>{}));break;default:d.push(y.command)}return{operations:c,unimplemented:d}}addImage(r,c){if(this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,d={}){if(this._checkLoaded(),this.tileManagers[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.C.source,`sources.${r}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.tileManagers[r]=new rs(r,c,this.dispatcher);y.style=this,y.setEventedParent(this,(()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r}))),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.tileManagers[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new a.k(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const c=this.tileManagers[r];delete this.tileManagers[r],delete this._updatedSources[r],c.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.tileManagers[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.tileManagers[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(c),this._changed=!0}getSource(r){return this.tileManagers[r]&&this.tileManagers[r].getSource()}addLayer(r,c,d={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new a.k(new Error(`Layer "${y}" already exists on this map.`)));let b;if(r.type==="custom"){if(da(this,a.bY(r)))return;b=a.bU(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=a.bW(r),r=a.e(r,{source:y})),this._validate(a.C.layer,`layers.${y}`,r,{arrayIndex:-1},d))return;b=a.bU(r,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)this.fire(new a.k(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(E,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const L=this._removedLayers[y];delete this._removedLayers[y],L.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.tileManagers[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const d=this._order.indexOf(r);this._order.splice(d,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new a.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,d){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===c&&y.maxzoom===d||(c!=null&&(y.minzoom=c),d!=null&&(y.maxzoom=d),this._updateLayer(y)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,d={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!a.bS(y.filter,c))return c==null?(y.setFilter(void 0),void this._updateLayer(y)):void(this._validate(a.C.filter,`layers.${y.id}.filter`,c,null,d)||(y.setFilter(a.bW(c)),this._updateLayer(y)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.bW(this.getLayer(r).filter)}setLayoutProperty(r,c,d,y={}){this._checkLoaded();const b=this.getLayer(r);b?a.bS(b.getLayoutProperty(c),d)||(b.setLayoutProperty(c,d,y),this._updateLayer(b)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const d=this.getLayer(r);if(d)return d.getLayoutProperty(c);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,d,y={}){this._checkLoaded();const b=this.getLayer(r);b?a.bS(b.getPaintProperty(c),d)||this._updatePaintProperty(b,c,d,y):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,c,d,y={}){r.setPaintProperty(c,d,y)&&this._updateLayer(r),a.bV(r)&&c==="raster-fade-duration"&&this.tileManagers[r.source].setRasterFadeDuration(d),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const d=r.source,y=r.sourceLayer,b=this.tileManagers[d];if(b===void 0)return void this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)));const E=b.getSource().type;E==="geojson"&&y?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||y?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,r.id,c)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const d=r.source,y=this.tileManagers[d];if(y===void 0)return void this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)));const b=y.getSource().type,E=b==="vector"?r.sourceLayer:void 0;b!=="vector"||E?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(E,r.id,c):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,d=r.sourceLayer,y=this.tileManagers[c];if(y!==void 0)return y.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(d,r.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=a.bZ(this.tileManagers,(b=>b.serialize())),c=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,y=this.stylesheet;return a.b_({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:r,layers:c,terrain:d},(b=>b!==void 0))}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.tileManagers[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.tileManagers[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=E=>this._layers[E].type==="fill-extrusion",d={},y=[];for(let E=this._order.length-1;E>=0;E--){const L=this._order[E];if(c(L)){d[L]=E;for(const R of r){const H=R[L];if(H)for(const K of H)y.push(K)}}}y.sort(((E,L)=>L.intersectionZ-E.intersectionZ));const b=[];for(let E=this._order.length-1;E>=0;E--){const L=this._order[E];if(c(L))for(let R=y.length-1;R>=0;R--){const H=y[R].feature;if(d[H.layer.id]<E)break;b.push(H),y.pop()}else for(const R of r){const H=R[L];if(H)for(const K of H)b.push(K.feature)}}return b}queryRenderedFeatures(r,c,d){c&&c.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const H of c.layers){const K=this._layers[H];if(!K)return this.fire(new a.k(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];y[K.source]=!0}}const b=[];c.availableImages=this._availableImages;const E=this._serializedAllLayers(),L=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,R=Object.assign(Object.assign({},c),{layers:L,globalState:this._globalState});for(const H in this.tileManagers)c.layers&&!y[H]||b.push(fr(this.tileManagers[H],this._layers,E,r,R,d,this.map.terrain?(K,re,J)=>this.map.terrain.getElevation(K,re,J):void 0));return this.placement&&b.push((function(H,K,re,J,Ae,ve,Me){const Oe={},Re=ve.queryRenderedSymbols(J),je=[];for(const it of Object.keys(Re).map(Number))je.push(Me[it]);je.sort(Br);for(const it of je){const We=it.featureIndex.lookupSymbolFeatures(Re[it.bucketInstanceId],K,it.bucketIndex,it.sourceLayerIndex,{filterSpec:Ae.filter,globalState:Ae.globalState},Ae.layers,Ae.availableImages,H);for(const ot in We){const ht=Oe[ot]=Oe[ot]||[],rt=We[ot];rt.sort(((vt,Ut)=>{const Tt=it.featureSortOrder;if(Tt){const Dt=Tt.indexOf(vt.featureIndex);return Tt.indexOf(Ut.featureIndex)-Dt}return Ut.featureIndex-vt.featureIndex}));for(const vt of rt)ht.push(vt)}}return(function(it,We,ot){for(const ht in it)for(const rt of it[ht])He(rt,ot[We[ht].source]);return it})(Oe,H,re)})(this._layers,E,this.tileManagers,r,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(r,c){c?.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",c.filter,null,c);const d=this.tileManagers[r];return d?(function(y,b){const E=y.getRenderableIds().map((H=>y.getTileByID(H))),L=[],R={};for(let H=0;H<E.length;H++){const K=E[H],re=K.tileID.canonical.key;R[re]||(R[re]=!0,K.querySourceFeatures(L,b))}return L})(d,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const d=this.light.getLight();let y=!1;for(const E in r)if(!a.bS(r[E],d[E])){y=!0;break}if(!y)return;const b={now:z(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(b)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const d=this.getSky();let y=!1;if(!r&&!d)return;if(r&&!d)y=!0;else if(!r&&d)y=!0;else for(const E in r)if(!a.bS(r[E],d[E])){y=!0;break}if(!y)return;const b={now:z(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(b)}_setProjectionInternal(r){const c=(function(d,y){const b={constrainOverride:y};if(Array.isArray(d)){const E=new Ft({type:d});return{projection:E,transform:new cl(b),cameraHelper:new Sc(E)}}switch(d){case"mercator":return{projection:new vs,transform:new ll(b),cameraHelper:new Aa};case"globe":{const E=new Ft({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:E,transform:new cl(b),cameraHelper:new Sc(E)}}case"vertical-perspective":return{projection:new Je,transform:new Fa(b),cameraHelper:new Ei};default:return a.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new vs,transform:new ll(b),cameraHelper:new Aa}}})(r,this.map.transformConstrain);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const d in this.tileManagers)this.tileManagers[d].reload()}_validate(r,c,d,y,b={}){return(!b||b.validate!==!1)&&da(this,r.call(a.C,a.e({key:c,style:this.serialize(),value:d,styleSpec:a.u},y)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),gt().off(Ke,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.tileManagers){const d=this.tileManagers[c];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.tileManagers[r].clearTiles()}_reloadSource(r){this.tileManagers[r].resume(),this.tileManagers[r].reload()}_updateSources(r){for(const c in this.tileManagers)this.tileManagers[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.tileManagers)this._reloadSource(r)}_updatePlacement(r,c,d,y,b=!1){let E=!1,L=!1;const R={};for(const H of this._order){const K=this._layers[H];if(K.type!=="symbol")continue;if(!R[K.source]){const J=this.tileManagers[K.source];R[K.source]=J.getRenderableIds(!0).map((Ae=>J.getTileByID(Ae))).sort(((Ae,ve)=>ve.tileID.overscaledZ-Ae.tileID.overscaledZ||(Ae.tileID.isLessThan(ve.tileID)?-1:1)))}const re=this.crossTileSymbolIndex.addLayer(K,R[K.source],r.center.lng);E=E||re}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(z(),r.zoom))&&(this.pauseablePlacement=new al(r,this.map.terrain,this._order,b,c,d,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(z()),L=!0),E&&this.pauseablePlacement.placement.setStale()),L||E)for(const H of this._order){const K=this._layers[H];K.type==="symbol"&&this.placement.updateLayerOpacities(K,R[K.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(z())}_releaseSymbolFadeTiles(){for(const r in this.tileManagers)this.tileManagers[r].releaseSymbolFadeTiles()}getImages(r,c){return a._(this,void 0,void 0,(function*(){const d=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const y=this.tileManagers[c.source];return y&&y.setDependencies(c.tileID.key,c.type,c.icons),d}))}getGlyphs(r,c){return a._(this,void 0,void 0,(function*(){const d=yield this.glyphManager.getGlyphs(c.stacks),y=this.tileManagers[c.source];return y&&y.setDependencies(c.tileID.key,c.type,[""]),d}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(a.C.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}getDashes(r,c){return a._(this,void 0,void 0,(function*(){const d={};for(const[y,b]of Object.entries(c.dashes))d[y]=this.lineAtlas.getDash(b.dasharray,b.round);return d}))}addSprite(r,c,d={},y){this._checkLoaded();const b=[{id:r,url:c}],E=[...be(this.stylesheet.sprite),...b];this._validate(a.C.sprite,"sprite",E,null,d)||(this.stylesheet.sprite=E,this._loadSprite(b,!0,y))}removeSprite(r){this._checkLoaded();const c=be(this.stylesheet.sprite);if(c.find((d=>d.id===r))){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;c.splice(c.findIndex((d=>d.id===r)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return be(this.stylesheet.sprite)}setSprite(r,c={},d){this._checkLoaded(),r&&this._validate(a.C.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const r in this.tileManagers){const c=this.tileManagers[r];c.setEventedParent(null),c.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const r in this._layers){const c=this._layers[r];c.setEventedParent(null),c.onRemove&&c.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var rA=a.aV([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Sl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,d,y,b,E,L,R,H){this.context=r;let K=this.boundPaintVertexBuffers.length!==y.length;for(let re=0;!K&&re<y.length;re++)this.boundPaintVertexBuffers[re]!==y[re]&&(K=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==d||K||this.boundIndexBuffer!==b||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==H?this.freshBind(c,d,y,b,E,L,R,H):(r.bindVertexArray.set(this.vao),L&&L.bind(),b&&b.dynamicDraw&&b.bind(),R&&R.bind(),H&&H.bind())}freshBind(r,c,d,y,b,E,L,R){const H=r.numAttributes,K=this.context,re=K.gl;this.vao&&this.destroy(),this.vao=K.createVertexArray(),K.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=R,c.enableAttributes(re,r);for(const J of d)J.enableAttributes(re,r);E&&E.enableAttributes(re,r),L&&L.enableAttributes(re,r),R&&R.enableAttributes(re,r),c.bind(),c.setVertexAttribPointers(re,r,b);for(const J of d)J.bind(),J.setVertexAttribPointers(re,r,b);E&&(E.bind(),E.setVertexAttribPointers(re,r,b)),y&&y.bind(),L&&(L.bind(),L.setVertexAttribPointers(re,r,b)),R&&(R.bind(),R.setVertexAttribPointers(re,r,b)),K.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const tu=(w,r,c,d,y)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):a.bq.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:c?c.calculateFogBlendOpacity(d):0,u_horizon_color:c?c.properties.get("horizon-color"):a.bq.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),El={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ks(w){const r=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const d=w[c].split(" ");r.push(d.pop())}return r}class Ta{constructor(r,c,d,y,b,E,L,R,H=[]){const K=r.gl;this.program=K.createProgram();const re=Ks(c.staticAttributes),J=d?d.getBinderAttributes():[],Ae=re.concat(J),ve=Yn.prelude.staticUniforms?Ks(Yn.prelude.staticUniforms):[],Me=L.staticUniforms?Ks(L.staticUniforms):[],Oe=c.staticUniforms?Ks(c.staticUniforms):[],Re=d?d.getBinderUniforms():[],je=ve.concat(Me).concat(Oe).concat(Re),it=[];for(const Tt of je)it.indexOf(Tt)<0&&it.push(Tt);const We=d?d.defines():[];Ci(K)&&We.unshift("#version 300 es"),b&&We.push("#define OVERDRAW_INSPECTOR;"),E&&We.push("#define TERRAIN3D;"),R&&We.push(R),H&&We.push(...H);let ot=We.concat(Yn.prelude.fragmentSource,L.fragmentSource,c.fragmentSource).join(`
`),ht=We.concat(Yn.prelude.vertexSource,L.vertexSource,c.vertexSource).join(`
`);Ci(K)||(ot=(function(Tt){return Tt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ot),ht=(function(Tt){return Tt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ht));const rt=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())return void(this.failedToCreate=!0);if(K.shaderSource(rt,ot),K.compileShader(rt),!K.getShaderParameter(rt,K.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${K.getShaderInfoLog(rt)}`);K.attachShader(this.program,rt);const vt=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())return void(this.failedToCreate=!0);if(K.shaderSource(vt,ht),K.compileShader(vt),!K.getShaderParameter(vt,K.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${K.getShaderInfoLog(vt)}`);K.attachShader(this.program,vt),this.attributes={};const Ut={};this.numAttributes=Ae.length;for(let Tt=0;Tt<this.numAttributes;Tt++)Ae[Tt]&&(K.bindAttribLocation(this.program,Tt,Ae[Tt]),this.attributes[Ae[Tt]]=Tt);if(K.linkProgram(this.program),!K.getProgramParameter(this.program,K.LINK_STATUS))throw new Error(`Program failed to link: ${K.getProgramInfoLog(this.program)}`);K.deleteShader(vt),K.deleteShader(rt);for(let Tt=0;Tt<it.length;Tt++){const Dt=it[Tt];if(Dt&&!Ut[Dt]){const Nt=K.getUniformLocation(this.program,Dt);Nt&&(Ut[Dt]=Nt)}}this.fixedUniforms=y(r,Ut),this.terrainUniforms=((Tt,Dt)=>({u_depth:new a.b$(Tt,Dt.u_depth),u_terrain:new a.b$(Tt,Dt.u_terrain),u_terrain_dim:new a.br(Tt,Dt.u_terrain_dim),u_terrain_matrix:new a.c1(Tt,Dt.u_terrain_matrix),u_terrain_unpack:new a.c2(Tt,Dt.u_terrain_unpack),u_terrain_exaggeration:new a.br(Tt,Dt.u_terrain_exaggeration)}))(r,Ut),this.projectionUniforms=((Tt,Dt)=>({u_projection_matrix:new a.c1(Tt,Dt.u_projection_matrix),u_projection_tile_mercator_coords:new a.c2(Tt,Dt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c2(Tt,Dt.u_projection_clipping_plane),u_projection_transition:new a.br(Tt,Dt.u_projection_transition),u_projection_fallback_matrix:new a.c1(Tt,Dt.u_projection_fallback_matrix)}))(r,Ut),this.binderUniforms=d?d.getUniforms(r,Ut):[]}draw(r,c,d,y,b,E,L,R,H,K,re,J,Ae,ve,Me,Oe,Re,je,it){const We=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(y),r.setColorMode(b),r.setCullFace(E),R){r.activeTexture.set(We.TEXTURE2),We.bindTexture(We.TEXTURE_2D,R.depthTexture),r.activeTexture.set(We.TEXTURE3),We.bindTexture(We.TEXTURE_2D,R.texture);for(const ht in this.terrainUniforms)this.terrainUniforms[ht].set(R[ht])}if(H)for(const ht in H)this.projectionUniforms[El[ht]].set(H[ht]);if(L)for(const ht in this.fixedUniforms)this.fixedUniforms[ht].set(L[ht]);Oe&&Oe.setUniforms(r,this.binderUniforms,ve,{zoom:Me});let ot=0;switch(c){case We.LINES:ot=2;break;case We.TRIANGLES:ot=3;break;case We.LINE_STRIP:ot=1}for(const ht of Ae.get()){const rt=ht.vaos||(ht.vaos={});(rt[K]||(rt[K]=new Sl)).bind(r,this,re,Oe?Oe.getPaintVertexBuffers():[],J,ht.vertexOffset,Re,je,it),We.drawElements(c,ht.primitiveLength*ot,We.UNSIGNED_SHORT,ht.primitiveOffset*ot*2)}}}function Al(w,r,c){const d=1/a.aO(c,1,r.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,r.transform.tileZoom)/y,E=b*(c.tileID.canonical.x+c.tileID.wrap*y),L=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[E>>16,L>>16],u_pixel_coord_lower:[65535&E,65535&L]}}const FA=(w,r,c,d)=>{const y=w.style.light,b=y.properties.get("position"),E=[b.x,b.y,b.z],L=a.c5();y.properties.get("anchor")==="viewport"&&a.c6(L,w.transform.bearingInRadians),a.c7(E,E,L);const R=w.transform.transformLightDirection(E),H=y.properties.get("color");return{u_lightpos:E,u_lightpos_globe:R,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[H.r,H.g,H.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:d}},xo=(w,r,c,d,y,b,E)=>a.e(FA(w,r,c,d),Al(b,w,E),{u_height_factor:-Math.pow(2,y.overscaledZ)/E.tileSize/8}),Fl=(w,r,c,d)=>a.e(Al(r,w,c),{u_fill_translate:d}),nA=(w,r)=>({u_world:w,u_fill_translate:r}),iA=(w,r,c,d,y)=>a.e(Fl(w,r,c,y),{u_world:d}),Il=(w,r,c,d,y)=>{const b=w.transform;let E,L,R=0;if(c.paint.get("circle-pitch-alignment")==="map"){const H=a.aO(r,1,b.zoom);E=!0,L=[H,H],R=H/(a.a5*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*y}else E=!1,L=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+E,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:L,u_globe_extrude_scale:R,u_translate:d}},qs=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Go=w=>({u_viewport_size:[w.width,w.height]}),bo=(w,r=1)=>({u_color:w,u_overlay:0,u_overlay_scale:r}),pa=(w,r,c,d)=>{const y=a.aO(w,1,r)/(a.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:a.aO(w,1,r),u_intensity:c,u_globe_extrude_scale:y}},ul=(w,r,c,d)=>{const y=a.N();a.c8(y,0,w.width,w.height,0,0,1);const b=w.context.gl;return{u_matrix:y,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:c,u_color_ramp:d,u_opacity:r.paint.get("heatmap-opacity")}},Pa=(w,r,c)=>{const d=c.paint.get("hillshade-accent-color");let y;switch(c.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}const b=c.getIlluminationProperties();for(let E=0;E<b.directionRadians.length;E++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[E]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:Tl(0,r.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:d,u_method:y,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},rc=(w,r)=>{const c=r.stride,d=a.N();return a.c8(d,0,a.a5,-a.a5,0,0,1),a.O(d,d,[0,-a.a5,0]),{u_matrix:d,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:r.getUnpackVector()}};function Tl(w,r){const c=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new a.ab(0,d/c).toLngLat().lat,new a.ab(0,(d+1)/c).toLngLat().lat]}const is=(w,r,c=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:w.paint.get("color-relief-opacity")}),hl=(w,r,c,d)=>{const y=w.transform;return{u_translation:nc(w,r,c),u_ratio:d/a.aO(r,1,y.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},fl=(w,r,c,d,y)=>a.e(hl(w,r,c,d),{u_image:0,u_image_height:y}),ma=(w,r,c,d,y)=>{const b=w.transform,E=Ao(r,b);return{u_translation:nc(w,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:d/a.aO(r,1,b.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[E,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Ec=(w,r,c,d,y)=>{const b=Ao(r,w.transform);return a.e(hl(w,r,c,d),{u_tileratio:b,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image:0,u_mix:y.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},Pl=(w,r,c,d,y,b)=>{const E=Ao(r,w.transform);return a.e(hl(w,r,c,d),{u_image:0,u_image_height:b,u_tileratio:E,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image_dash:1,u_mix:y.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function Ao(w,r){return 1/a.aO(w,1,r.tileZoom)}function nc(w,r,c){return a.aP(w.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const dl=(w,r,c,d,y)=>{return{u_tl_parent:w,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(E=d.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(b=d.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Ll(d.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var b,E};function Ll(w){w*=Math.PI/180;const r=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Ml=(w,r,c,d,y,b,E,L,R,H,K,re,J)=>{const Ae=E.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_pitch:Ae.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_label_plane_matrix:L,u_coord_matrix:R,u_is_text:+K,u_pitch_with_map:+d,u_is_along_line:y,u_is_variable_anchor:b,u_texsize:re,u_texture:0,u_translation:H,u_pitched_scale:J}},kl=(w,r,c,d,y,b,E,L,R,H,K,re,J,Ae)=>{const ve=E.transform;return a.e(Ml(w,r,c,d,y,b,E,L,R,H,K,re,Ae),{u_gamma_scale:d?Math.cos(ve.pitch*Math.PI/180)*ve.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:1})},Ko=(w,r,c,d,y,b,E,L,R,H,K,re,J)=>a.e(kl(w,r,c,d,y,b,E,L,R,H,!0,K,0,J),{u_texsize_icon:re,u_texture_icon:1}),ic=(w,r)=>({u_opacity:w,u_color:r}),ss=(w,r,c,d,y)=>a.e((function(b,E,L,R){const H=L.imageManager.getPattern(b.from.toString()),K=L.imageManager.getPattern(b.to.toString()),{width:re,height:J}=L.imageManager.getPixelSize(),Ae=Math.pow(2,R.tileID.overscaledZ),ve=R.tileSize*Math.pow(2,L.transform.tileZoom)/Ae,Me=ve*(R.tileID.canonical.x+R.tileID.wrap*Ae),Oe=ve*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[re,J],u_mix:E.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/a.aO(R,1,L.transform.tileZoom),u_pixel_coord_upper:[Me>>16,Oe>>16],u_pixel_coord_lower:[65535&Me,65535&Oe]}})(c,y,r,d),{u_opacity:w}),Bo=(w,r)=>{},ii={fillExtrusion:(w,r)=>({u_lightpos:new a.c3(w,r.u_lightpos),u_lightpos_globe:new a.c3(w,r.u_lightpos_globe),u_lightintensity:new a.br(w,r.u_lightintensity),u_lightcolor:new a.c3(w,r.u_lightcolor),u_vertical_gradient:new a.br(w,r.u_vertical_gradient),u_opacity:new a.br(w,r.u_opacity),u_fill_translate:new a.c4(w,r.u_fill_translate)}),fillExtrusionPattern:(w,r)=>({u_lightpos:new a.c3(w,r.u_lightpos),u_lightpos_globe:new a.c3(w,r.u_lightpos_globe),u_lightintensity:new a.br(w,r.u_lightintensity),u_lightcolor:new a.c3(w,r.u_lightcolor),u_vertical_gradient:new a.br(w,r.u_vertical_gradient),u_height_factor:new a.br(w,r.u_height_factor),u_opacity:new a.br(w,r.u_opacity),u_fill_translate:new a.c4(w,r.u_fill_translate),u_image:new a.b$(w,r.u_image),u_texsize:new a.c4(w,r.u_texsize),u_pixel_coord_upper:new a.c4(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(w,r.u_pixel_coord_lower),u_scale:new a.c3(w,r.u_scale),u_fade:new a.br(w,r.u_fade)}),fill:(w,r)=>({u_fill_translate:new a.c4(w,r.u_fill_translate)}),fillPattern:(w,r)=>({u_image:new a.b$(w,r.u_image),u_texsize:new a.c4(w,r.u_texsize),u_pixel_coord_upper:new a.c4(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(w,r.u_pixel_coord_lower),u_scale:new a.c3(w,r.u_scale),u_fade:new a.br(w,r.u_fade),u_fill_translate:new a.c4(w,r.u_fill_translate)}),fillOutline:(w,r)=>({u_world:new a.c4(w,r.u_world),u_fill_translate:new a.c4(w,r.u_fill_translate)}),fillOutlinePattern:(w,r)=>({u_world:new a.c4(w,r.u_world),u_image:new a.b$(w,r.u_image),u_texsize:new a.c4(w,r.u_texsize),u_pixel_coord_upper:new a.c4(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(w,r.u_pixel_coord_lower),u_scale:new a.c3(w,r.u_scale),u_fade:new a.br(w,r.u_fade),u_fill_translate:new a.c4(w,r.u_fill_translate)}),circle:(w,r)=>({u_camera_to_center_distance:new a.br(w,r.u_camera_to_center_distance),u_scale_with_map:new a.b$(w,r.u_scale_with_map),u_pitch_with_map:new a.b$(w,r.u_pitch_with_map),u_extrude_scale:new a.c4(w,r.u_extrude_scale),u_device_pixel_ratio:new a.br(w,r.u_device_pixel_ratio),u_globe_extrude_scale:new a.br(w,r.u_globe_extrude_scale),u_translate:new a.c4(w,r.u_translate)}),collisionBox:(w,r)=>({u_pixel_extrude_scale:new a.c4(w,r.u_pixel_extrude_scale)}),collisionCircle:(w,r)=>({u_viewport_size:new a.c4(w,r.u_viewport_size)}),debug:(w,r)=>({u_color:new a.c0(w,r.u_color),u_overlay:new a.b$(w,r.u_overlay),u_overlay_scale:new a.br(w,r.u_overlay_scale)}),depth:Bo,clippingMask:Bo,heatmap:(w,r)=>({u_extrude_scale:new a.br(w,r.u_extrude_scale),u_intensity:new a.br(w,r.u_intensity),u_globe_extrude_scale:new a.br(w,r.u_globe_extrude_scale)}),heatmapTexture:(w,r)=>({u_matrix:new a.c1(w,r.u_matrix),u_world:new a.c4(w,r.u_world),u_image:new a.b$(w,r.u_image),u_color_ramp:new a.b$(w,r.u_color_ramp),u_opacity:new a.br(w,r.u_opacity)}),hillshade:(w,r)=>({u_image:new a.b$(w,r.u_image),u_latrange:new a.c4(w,r.u_latrange),u_exaggeration:new a.br(w,r.u_exaggeration),u_altitudes:new a.ca(w,r.u_altitudes),u_azimuths:new a.ca(w,r.u_azimuths),u_accent:new a.c0(w,r.u_accent),u_method:new a.b$(w,r.u_method),u_shadows:new a.c9(w,r.u_shadows),u_highlights:new a.c9(w,r.u_highlights)}),hillshadePrepare:(w,r)=>({u_matrix:new a.c1(w,r.u_matrix),u_image:new a.b$(w,r.u_image),u_dimension:new a.c4(w,r.u_dimension),u_zoom:new a.br(w,r.u_zoom),u_unpack:new a.c2(w,r.u_unpack)}),colorRelief:(w,r)=>({u_image:new a.b$(w,r.u_image),u_unpack:new a.c2(w,r.u_unpack),u_dimension:new a.c4(w,r.u_dimension),u_elevation_stops:new a.b$(w,r.u_elevation_stops),u_color_stops:new a.b$(w,r.u_color_stops),u_color_ramp_size:new a.b$(w,r.u_color_ramp_size),u_opacity:new a.br(w,r.u_opacity)}),line:(w,r)=>({u_translation:new a.c4(w,r.u_translation),u_ratio:new a.br(w,r.u_ratio),u_device_pixel_ratio:new a.br(w,r.u_device_pixel_ratio),u_units_to_pixels:new a.c4(w,r.u_units_to_pixels)}),lineGradient:(w,r)=>({u_translation:new a.c4(w,r.u_translation),u_ratio:new a.br(w,r.u_ratio),u_device_pixel_ratio:new a.br(w,r.u_device_pixel_ratio),u_units_to_pixels:new a.c4(w,r.u_units_to_pixels),u_image:new a.b$(w,r.u_image),u_image_height:new a.br(w,r.u_image_height)}),linePattern:(w,r)=>({u_translation:new a.c4(w,r.u_translation),u_texsize:new a.c4(w,r.u_texsize),u_ratio:new a.br(w,r.u_ratio),u_device_pixel_ratio:new a.br(w,r.u_device_pixel_ratio),u_image:new a.b$(w,r.u_image),u_units_to_pixels:new a.c4(w,r.u_units_to_pixels),u_scale:new a.c3(w,r.u_scale),u_fade:new a.br(w,r.u_fade)}),lineSDF:(w,r)=>({u_translation:new a.c4(w,r.u_translation),u_ratio:new a.br(w,r.u_ratio),u_device_pixel_ratio:new a.br(w,r.u_device_pixel_ratio),u_units_to_pixels:new a.c4(w,r.u_units_to_pixels),u_image:new a.b$(w,r.u_image),u_mix:new a.br(w,r.u_mix),u_tileratio:new a.br(w,r.u_tileratio),u_crossfade_from:new a.br(w,r.u_crossfade_from),u_crossfade_to:new a.br(w,r.u_crossfade_to),u_lineatlas_width:new a.br(w,r.u_lineatlas_width),u_lineatlas_height:new a.br(w,r.u_lineatlas_height)}),lineGradientSDF:(w,r)=>({u_translation:new a.c4(w,r.u_translation),u_ratio:new a.br(w,r.u_ratio),u_device_pixel_ratio:new a.br(w,r.u_device_pixel_ratio),u_units_to_pixels:new a.c4(w,r.u_units_to_pixels),u_image:new a.b$(w,r.u_image),u_image_height:new a.br(w,r.u_image_height),u_tileratio:new a.br(w,r.u_tileratio),u_crossfade_from:new a.br(w,r.u_crossfade_from),u_crossfade_to:new a.br(w,r.u_crossfade_to),u_image_dash:new a.b$(w,r.u_image_dash),u_mix:new a.br(w,r.u_mix),u_lineatlas_width:new a.br(w,r.u_lineatlas_width),u_lineatlas_height:new a.br(w,r.u_lineatlas_height)}),raster:(w,r)=>({u_tl_parent:new a.c4(w,r.u_tl_parent),u_scale_parent:new a.br(w,r.u_scale_parent),u_buffer_scale:new a.br(w,r.u_buffer_scale),u_fade_t:new a.br(w,r.u_fade_t),u_opacity:new a.br(w,r.u_opacity),u_image0:new a.b$(w,r.u_image0),u_image1:new a.b$(w,r.u_image1),u_brightness_low:new a.br(w,r.u_brightness_low),u_brightness_high:new a.br(w,r.u_brightness_high),u_saturation_factor:new a.br(w,r.u_saturation_factor),u_contrast_factor:new a.br(w,r.u_contrast_factor),u_spin_weights:new a.c3(w,r.u_spin_weights),u_coords_top:new a.c2(w,r.u_coords_top),u_coords_bottom:new a.c2(w,r.u_coords_bottom)}),symbolIcon:(w,r)=>({u_is_size_zoom_constant:new a.b$(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(w,r.u_is_size_feature_constant),u_size_t:new a.br(w,r.u_size_t),u_size:new a.br(w,r.u_size),u_camera_to_center_distance:new a.br(w,r.u_camera_to_center_distance),u_pitch:new a.br(w,r.u_pitch),u_rotate_symbol:new a.b$(w,r.u_rotate_symbol),u_aspect_ratio:new a.br(w,r.u_aspect_ratio),u_fade_change:new a.br(w,r.u_fade_change),u_label_plane_matrix:new a.c1(w,r.u_label_plane_matrix),u_coord_matrix:new a.c1(w,r.u_coord_matrix),u_is_text:new a.b$(w,r.u_is_text),u_pitch_with_map:new a.b$(w,r.u_pitch_with_map),u_is_along_line:new a.b$(w,r.u_is_along_line),u_is_variable_anchor:new a.b$(w,r.u_is_variable_anchor),u_texsize:new a.c4(w,r.u_texsize),u_texture:new a.b$(w,r.u_texture),u_translation:new a.c4(w,r.u_translation),u_pitched_scale:new a.br(w,r.u_pitched_scale)}),symbolSDF:(w,r)=>({u_is_size_zoom_constant:new a.b$(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(w,r.u_is_size_feature_constant),u_size_t:new a.br(w,r.u_size_t),u_size:new a.br(w,r.u_size),u_camera_to_center_distance:new a.br(w,r.u_camera_to_center_distance),u_pitch:new a.br(w,r.u_pitch),u_rotate_symbol:new a.b$(w,r.u_rotate_symbol),u_aspect_ratio:new a.br(w,r.u_aspect_ratio),u_fade_change:new a.br(w,r.u_fade_change),u_label_plane_matrix:new a.c1(w,r.u_label_plane_matrix),u_coord_matrix:new a.c1(w,r.u_coord_matrix),u_is_text:new a.b$(w,r.u_is_text),u_pitch_with_map:new a.b$(w,r.u_pitch_with_map),u_is_along_line:new a.b$(w,r.u_is_along_line),u_is_variable_anchor:new a.b$(w,r.u_is_variable_anchor),u_texsize:new a.c4(w,r.u_texsize),u_texture:new a.b$(w,r.u_texture),u_gamma_scale:new a.br(w,r.u_gamma_scale),u_device_pixel_ratio:new a.br(w,r.u_device_pixel_ratio),u_is_halo:new a.b$(w,r.u_is_halo),u_translation:new a.c4(w,r.u_translation),u_pitched_scale:new a.br(w,r.u_pitched_scale)}),symbolTextAndIcon:(w,r)=>({u_is_size_zoom_constant:new a.b$(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(w,r.u_is_size_feature_constant),u_size_t:new a.br(w,r.u_size_t),u_size:new a.br(w,r.u_size),u_camera_to_center_distance:new a.br(w,r.u_camera_to_center_distance),u_pitch:new a.br(w,r.u_pitch),u_rotate_symbol:new a.b$(w,r.u_rotate_symbol),u_aspect_ratio:new a.br(w,r.u_aspect_ratio),u_fade_change:new a.br(w,r.u_fade_change),u_label_plane_matrix:new a.c1(w,r.u_label_plane_matrix),u_coord_matrix:new a.c1(w,r.u_coord_matrix),u_is_text:new a.b$(w,r.u_is_text),u_pitch_with_map:new a.b$(w,r.u_pitch_with_map),u_is_along_line:new a.b$(w,r.u_is_along_line),u_is_variable_anchor:new a.b$(w,r.u_is_variable_anchor),u_texsize:new a.c4(w,r.u_texsize),u_texsize_icon:new a.c4(w,r.u_texsize_icon),u_texture:new a.b$(w,r.u_texture),u_texture_icon:new a.b$(w,r.u_texture_icon),u_gamma_scale:new a.br(w,r.u_gamma_scale),u_device_pixel_ratio:new a.br(w,r.u_device_pixel_ratio),u_is_halo:new a.b$(w,r.u_is_halo),u_translation:new a.c4(w,r.u_translation),u_pitched_scale:new a.br(w,r.u_pitched_scale)}),background:(w,r)=>({u_opacity:new a.br(w,r.u_opacity),u_color:new a.c0(w,r.u_color)}),backgroundPattern:(w,r)=>({u_opacity:new a.br(w,r.u_opacity),u_image:new a.b$(w,r.u_image),u_pattern_tl_a:new a.c4(w,r.u_pattern_tl_a),u_pattern_br_a:new a.c4(w,r.u_pattern_br_a),u_pattern_tl_b:new a.c4(w,r.u_pattern_tl_b),u_pattern_br_b:new a.c4(w,r.u_pattern_br_b),u_texsize:new a.c4(w,r.u_texsize),u_mix:new a.br(w,r.u_mix),u_pattern_size_a:new a.c4(w,r.u_pattern_size_a),u_pattern_size_b:new a.c4(w,r.u_pattern_size_b),u_scale_a:new a.br(w,r.u_scale_a),u_scale_b:new a.br(w,r.u_scale_b),u_pixel_coord_upper:new a.c4(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(w,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.br(w,r.u_tile_units_to_pixels)}),terrain:(w,r)=>({u_texture:new a.b$(w,r.u_texture),u_ele_delta:new a.br(w,r.u_ele_delta),u_fog_matrix:new a.c1(w,r.u_fog_matrix),u_fog_color:new a.c0(w,r.u_fog_color),u_fog_ground_blend:new a.br(w,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.br(w,r.u_fog_ground_blend_opacity),u_horizon_color:new a.c0(w,r.u_horizon_color),u_horizon_fog_blend:new a.br(w,r.u_horizon_fog_blend),u_is_globe_mode:new a.br(w,r.u_is_globe_mode)}),terrainDepth:(w,r)=>({u_ele_delta:new a.br(w,r.u_ele_delta)}),terrainCoords:(w,r)=>({u_texture:new a.b$(w,r.u_texture),u_terrain_coords_id:new a.br(w,r.u_terrain_coords_id),u_ele_delta:new a.br(w,r.u_ele_delta)}),projectionErrorMeasurement:(w,r)=>({u_input:new a.br(w,r.u_input),u_output_expected:new a.br(w,r.u_output_expected)}),atmosphere:(w,r)=>({u_sun_pos:new a.c3(w,r.u_sun_pos),u_atmosphere_blend:new a.br(w,r.u_atmosphere_blend),u_globe_position:new a.c3(w,r.u_globe_position),u_globe_radius:new a.br(w,r.u_globe_radius),u_inv_proj_matrix:new a.c1(w,r.u_inv_proj_matrix)}),sky:(w,r)=>({u_sky_color:new a.c0(w,r.u_sky_color),u_horizon_color:new a.c0(w,r.u_horizon_color),u_horizon:new a.c4(w,r.u_horizon),u_horizon_normal:new a.c4(w,r.u_horizon_normal),u_sky_horizon_blend:new a.br(w,r.u_sky_horizon_blend),u_sky_blend:new a.br(w,r.u_sky_blend)})};class vi{constructor(r,c,d){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ws{constructor(r,c,d,y){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=r;const b=r.gl;this.buffer=b.createBuffer(),r.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let d=0;d<this.attributes.length;d++){const y=c.attributes[this.attributes[d].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,c,d){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],E=c.attributes[b.name];E!==void 0&&r.vertexAttribPointer(E,b.components,r[Xi[b.type]],!1,this.itemSize,b.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Tn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Fc extends Tn{getDefault(){return a.bq.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class sc extends Tn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class La extends Tn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class IA extends Tn{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ma extends Tn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Ic extends Tn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Tc extends Tn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class uo extends Tn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Pc extends Tn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class Lc extends Tn{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class ru extends Tn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class pl extends Tn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class TA extends Tn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class PA extends Tn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class sA extends Tn{getDefault(){return a.bq.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class LA extends Tn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Pu extends Tn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Mc extends Tn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Co extends Tn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class oA extends Tn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class oo extends Tn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class dn extends Tn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class aA extends Tn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class kc extends Tn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class sh extends Tn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class oc extends Tn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class nu extends Tn{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Fi extends Tn{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const d=this.gl;Ci(d)?d.bindVertexArray(r):(c=d.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class iu extends Tn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class MA extends Tn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class ac extends Tn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ul extends Tn{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Uc extends Ul{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Dc extends Ul{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class kA extends Ul{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const lc="Framebuffer is not complete";class su{constructor(r,c,d,y,b){this.context=r,this.width=c,this.height=d;const E=r.gl,L=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new Uc(r,L),y)this.depthAttachment=b?new kA(r,L):new Dc(r,L);else if(b)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error(lc)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Lu{constructor(r){var c,d;if(this.gl=r,this.clearColor=new Fc(this),this.clearDepth=new sc(this),this.clearStencil=new La(this),this.colorMask=new IA(this),this.depthMask=new Ma(this),this.stencilMask=new Ic(this),this.stencilFunc=new Tc(this),this.stencilOp=new uo(this),this.stencilTest=new Pc(this),this.depthRange=new Lc(this),this.depthTest=new ru(this),this.depthFunc=new pl(this),this.blend=new TA(this),this.blendFunc=new PA(this),this.blendColor=new sA(this),this.blendEquation=new LA(this),this.cullFace=new Pu(this),this.cullFaceSide=new Mc(this),this.frontFace=new Co(this),this.program=new oA(this),this.activeTexture=new oo(this),this.viewport=new dn(this),this.bindFramebuffer=new aA(this),this.bindRenderbuffer=new kc(this),this.bindTexture=new sh(this),this.bindVertexBuffer=new oc(this),this.bindElementBuffer=new nu(this),this.bindVertexArray=new Fi(this),this.pixelStoreUnpack=new iu(this),this.pixelStoreUnpackPremultiplyAlpha=new MA(this),this.pixelStoreUnpackFlipY=new ac(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Ci(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:y?.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:y?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new vi(this,r,c)}createVertexBuffer(r,c,d){return new ws(this,r,c,d)}createRenderbuffer(r,c,d){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,r,c,d),this.bindRenderbuffer.set(null),b}createFramebuffer(r,c,d,y){return new su(this,r,c,d,y)}clear({color:r,depth:c,stencil:d}){const y=this.gl;let b=0;r&&(b|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d!==void 0&&(b|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),y.clear(b)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.bS(r.blendFunction,Rn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Ci(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Ci(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let lA;function Rc(w,r,c,d,y){const b=w.context,E=w.transform,L=b.gl,R=w.useProgram("collisionBox"),H=[];let K=0,re=0;for(let Re=0;Re<d.length;Re++){const je=d[Re],it=r.getTile(je).getBucket(c);if(!it)continue;const We=y?it.textCollisionBox:it.iconCollisionBox,ot=it.collisionCircleArray;ot.length>0&&(H.push({circleArray:ot,circleOffset:re,coord:je}),K+=ot.length/4,re=K),We&&R.draw(b,L.LINES,pn.disabled,xn.disabled,w.colorModeForRenderPass(),Cn.disabled,qs(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(je),E.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,null,w.transform.zoom,null,null,We.collisionVertexBuffer)}if(!y||!H.length)return;const J=w.useProgram("collisionCircle"),Ae=new a.cb;Ae.resize(4*K),Ae._trim();let ve=0;for(const Re of H)for(let je=0;je<Re.circleArray.length/4;je++){const it=4*je,We=Re.circleArray[it+0],ot=Re.circleArray[it+1],ht=Re.circleArray[it+2],rt=Re.circleArray[it+3];Ae.emplace(ve++,We,ot,ht,rt,0),Ae.emplace(ve++,We,ot,ht,rt,1),Ae.emplace(ve++,We,ot,ht,rt,2),Ae.emplace(ve++,We,ot,ht,rt,3)}(!lA||lA.length<2*K)&&(lA=(function(Re){const je=2*Re,it=new a.cd;it.resize(je),it._trim();for(let We=0;We<je;We++){const ot=6*We;it.uint16[ot+0]=4*We+0,it.uint16[ot+1]=4*We+1,it.uint16[ot+2]=4*We+2,it.uint16[ot+3]=4*We+2,it.uint16[ot+4]=4*We+3,it.uint16[ot+5]=4*We+0}return it})(K));const Me=b.createIndexBuffer(lA,!0),Oe=b.createVertexBuffer(Ae,a.cc.members,!0);for(const Re of H){const je=Go(w.transform);J.draw(b,L.TRIANGLES,pn.disabled,xn.disabled,w.colorModeForRenderPass(),Cn.disabled,je,w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re.coord),null,c.id,Oe,Me,a.aY.simpleSegment(0,2*Re.circleOffset,Re.circleArray.length,Re.circleArray.length/2),null,w.transform.zoom,null,null,null)}Oe.destroy(),Me.destroy()}const UA=a.as(new Float32Array(16));function DA(w,r,c,d,y,b){const{horizontalAlign:E,verticalAlign:L}=a.aT(w);return new a.P((-(E-.5)*r/y+d[0])*b,(-(L-.5)*c/y+d[1])*b)}function cc(w,r,c,d,y,b){const E=r.tileAnchorPoint.add(new a.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let L=d.mult(b);c||(L=L.rotate(-y));const R=E.add(L);return hn(R.x,R.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const L=Hn(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(w),R=Math.atan(L.y/L.x)+(L.x<0?Math.PI:0);return w.add(d.rotate(R))}return w.add(d)}function cA(w,r,c,d,y,b,E,L,R,H,K,re){const J=w.text.placedSymbolArray,Ae=w.text.dynamicLayoutVertexArray,ve=w.icon.dynamicLayoutVertexArray,Me={};Ae.clear();for(let Oe=0;Oe<J.length;Oe++){const Re=J.get(Oe),je=Re.hidden||!Re.crossTileID||w.allowVerticalPlacement&&!Re.placedOrientation?null:d[Re.crossTileID];if(je){const it=new a.P(Re.anchorX,Re.anchorY),We={getElevation:re,width:y.width,height:y.height,pitchedLabelPlaneMatrix:b,pitchWithMap:c,transform:y,tileAnchorPoint:it,translation:H,unwrappedTileID:K},ot=c?sl(it.x,it.y,We):Hn(it.x,it.y,We),ht=nl(y.cameraToCenterDistance,ot.signedDistanceFromCamera);let rt=a.aB(w.textSizeData,L,Re)*ht/a.aN;c&&(rt*=w.tilePixelRatio/E);const{width:vt,height:Ut,anchor:Tt,textOffset:Dt,textBoxScale:Nt}=je,rr=DA(Tt,vt,Ut,Dt,Nt,rt),cr=y.getPitchedTextCorrection(it.x+H[0],it.y+H[1],K),tr=cc(ot.point,We,r,rr,-y.bearingInRadians,cr),Ur=w.allowVerticalPlacement&&Re.placedOrientation===a.aA.vertical?Math.PI/2:0;for(let yn=0;yn<Re.numGlyphs;yn++)a.aH(Ae,tr,Ur);R&&Re.associatedIconIndex>=0&&(Me[Re.associatedIconIndex]={shiftedAnchor:tr,angle:Ur})}else xa(Re.numGlyphs,Ae)}if(R){ve.clear();const Oe=w.icon.placedSymbolArray;for(let Re=0;Re<Oe.length;Re++){const je=Oe.get(Re);if(je.hidden)xa(je.numGlyphs,ve);else{const it=Me[Re];if(it)for(let We=0;We<je.numGlyphs;We++)a.aH(ve,it.shiftedAnchor,it.angle);else xa(je.numGlyphs,ve)}}w.icon.dynamicLayoutVertexBuffer.updateData(ve)}w.text.dynamicLayoutVertexBuffer.updateData(Ae)}function Mu(w,r,c){return c.iconsInText&&r?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function AA(w,r,c,d,y,b,E,L,R,H,K,re,J){const Ae=w.context,ve=Ae.gl,Me=w.transform,Oe=L==="map",Re=R==="map",je=L!=="viewport"&&c.layout.get("symbol-placement")!=="point",it=Oe&&!Re&&!je,We=!c.layout.get("symbol-sort-key").isConstant();let ot=!1;const ht=w.getDepthModeForSublayer(0,pn.ReadOnly),rt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),vt=[],Ut=Me.getCircleRadiusCorrection();for(const Tt of d){const Dt=r.getTile(Tt),Nt=Dt.getBucket(c);if(!Nt)continue;const rr=y?Nt.text:Nt.icon;if(!rr||!rr.segments.get().length||!rr.hasVisibleVertices)continue;const cr=rr.programConfigurations.get(c.id),tr=y||Nt.sdfIcons,Ur=y?Nt.textSizeData:Nt.iconSizeData,yn=Re||Me.pitch!==0,ci=w.useProgram(Mu(tr,y,Nt),cr),Oi=a.az(Ur,Me.zoom),Ai=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Tt);let Vi,Ti,Es,Gi,Ys=[0,0],Fs=null;if(y)Ti=Dt.glyphAtlasTexture,Es=ve.LINEAR,Vi=Dt.glyphAtlasTexture.size,Nt.iconsInText&&(Ys=Dt.imageAtlasTexture.size,Fs=Dt.imageAtlasTexture,Gi=yn||w.options.rotating||w.options.zooming||Ur.kind==="composite"||Ur.kind==="camera"?ve.LINEAR:ve.NEAREST);else{const Ns=c.layout.get("icon-size").constantOr(0)!==1||Nt.iconsNeedLinear;Ti=Dt.imageAtlasTexture,Es=tr||w.options.rotating||w.options.zooming||Ns||yn?ve.LINEAR:ve.NEAREST,Vi=Dt.imageAtlasTexture.size}const ui=a.aO(Dt,1,w.transform.zoom),lo=Di(Oe,w.transform,ui),mo=a.N();a.aC(mo,lo);const Ac=xl(Re,Oe,w.transform,ui),fA=a.aP(Me,Dt,b,E),zA=Me.getProjectionData({overscaledTileID:Tt,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),Ru=rt&&Nt.hasTextData(),uc=c.layout.get("icon-text-fit")!=="none"&&Ru&&Nt.hasIconData();if(je){const Ns=w.style.map.terrain?(Va,ls)=>w.style.map.terrain.getElevation(Tt,Va,ls):null,eo=c.layout.get("text-rotation-alignment")==="map";Zl(Nt,w,y,lo,mo,Re,H,eo,Tt.toUnwrapped(),Me.width,Me.height,fA,Ns)}const zl=y&&rt||uc,Js=je||zl?UA:Re?lo:w.transform.clipSpaceToPixelsMatrix,$o=tr&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let go;go=tr?Nt.iconsInText?Ko(Ur.kind,Oi,it,Re,je,zl,w,Js,Ac,fA,Vi,Ys,Ut):kl(Ur.kind,Oi,it,Re,je,zl,w,Js,Ac,fA,y,Vi,0,Ut):Ml(Ur.kind,Oi,it,Re,je,zl,w,Js,Ac,fA,y,Vi,Ut);const ml={program:ci,buffers:rr,uniformValues:go,projectionData:zA,atlasTexture:Ti,atlasTextureIcon:Fs,atlasInterpolation:Es,atlasInterpolationIcon:Gi,isSDF:tr,hasHalo:$o};if(We&&Nt.canOverlap){ot=!0;const Ns=rr.segments.get();for(const eo of Ns)vt.push({segments:new a.aY([eo]),sortKey:eo.sortKey,state:ml,terrainData:Ai})}else vt.push({segments:rr.segments,sortKey:0,state:ml,terrainData:Ai})}ot&&vt.sort(((Tt,Dt)=>Tt.sortKey-Dt.sortKey));for(const Tt of vt){const Dt=Tt.state;if(Ae.activeTexture.set(ve.TEXTURE0),Dt.atlasTexture.bind(Dt.atlasInterpolation,ve.CLAMP_TO_EDGE),Dt.atlasTextureIcon&&(Ae.activeTexture.set(ve.TEXTURE1),Dt.atlasTextureIcon&&Dt.atlasTextureIcon.bind(Dt.atlasInterpolationIcon,ve.CLAMP_TO_EDGE)),Dt.isSDF){const Nt=Dt.uniformValues;Dt.hasHalo&&(Nt.u_is_halo=1,ou(Dt.buffers,Tt.segments,c,w,Dt.program,ht,K,re,Nt,Dt.projectionData,Tt.terrainData)),Nt.u_is_halo=0}ou(Dt.buffers,Tt.segments,c,w,Dt.program,ht,K,re,Dt.uniformValues,Dt.projectionData,Tt.terrainData)}}function ou(w,r,c,d,y,b,E,L,R,H,K){const re=d.context;y.draw(re,re.gl.TRIANGLES,b,E,L,Cn.backCCW,R,K,H,c.id,w.layoutVertexBuffer,w.indexBuffer,r,c.paint,d.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function oh(w,r,c,d,y){const b=w.context,E=b.gl,L=xn.disabled,R=new Rn([E.ONE,E.ONE],a.bq.transparent,[!0,!0,!0,!0]),H=r.getBucket(c);if(!H)return;const K=d.key;let re=c.heatmapFbos.get(K);re||(re=au(b,r.tileSize,r.tileSize),c.heatmapFbos.set(K,re)),b.bindFramebuffer.set(re.framebuffer),b.viewport.set([0,0,r.tileSize,r.tileSize]),b.clear({color:a.bq.transparent});const J=H.programConfigurations.get(c.id),Ae=w.useProgram("heatmap",J,!y),ve=w.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Me=w.style.map.terrain.getTerrainData(d);Ae.draw(b,E.TRIANGLES,pn.disabled,L,R,Cn.disabled,pa(r,w.transform.zoom,c.paint.get("heatmap-intensity"),1),Me,ve,c.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,c.paint,w.transform.zoom,J)}function Qh(w,r,c,d,y){const b=w.context,E=b.gl,L=w.transform;b.setColorMode(w.colorModeForRenderPass());const R=RA(b,r),H=c.key,K=r.heatmapFbos.get(H);if(!K)return;b.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,K.colorAttachment.get()),b.activeTexture.set(E.TEXTURE1),R.bind(E.LINEAR,E.CLAMP_TO_EDGE);const re=L.getProjectionData({overscaledTileID:c,applyTerrainMatrix:y,applyGlobeMatrix:!d});w.useProgram("heatmapTexture").draw(b,E.TRIANGLES,pn.disabled,xn.disabled,w.colorModeForRenderPass(),Cn.disabled,ul(w,r,0,1),null,re,r.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,r.paint,L.zoom),K.destroy(),r.heatmapFbos.delete(H)}function au(w,r,c){var d,y;const b=w.gl,E=b.createTexture();b.bindTexture(b.TEXTURE_2D,E),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const L=(d=w.HALF_FLOAT)!==null&&d!==void 0?d:b.UNSIGNED_BYTE,R=(y=w.RGBA16F)!==null&&y!==void 0?y:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,R,r,c,0,b.RGBA,L,null);const H=w.createFramebuffer(r,c,!1,!1);return H.colorAttachment.set(E),H}function RA(w,r){return r.colorRampTexture||(r.colorRampTexture=new a.T(w,r.colorRamp,w.gl.RGBA)),r.colorRampTexture}function ho(w,r,c,d,y,b,E,L){let R=256;if(y.stepInterpolant){const H=r.getSource().maxzoom,K=E.canonical.z===H?Math.ceil(1<<w.transform.maxZoom-E.canonical.z):1;R=a.ao(a.cf(b.maxLineLength/a.a5*1024*K),256,c.maxTextureSize)}return L.gradient=a.cg({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:L.gradient||void 0,clips:b.lineClipsArray}),L.texture?L.texture.update(L.gradient):L.texture=new a.T(c,L.gradient,d.RGBA),L.version=y.gradientVersion,L.texture}function ga(w,r,c,d,y){w.activeTexture.set(r.TEXTURE0),c.imageAtlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),d.updatePaintBuffers(y)}function qn(w,r,c,d,y,b){(y||w.lineAtlas.dirty)&&(r.activeTexture.set(c.TEXTURE0),w.lineAtlas.bind(r)),d.updatePaintBuffers(b)}function fo(w,r,c,d,y,b,E){const L=b.gradients[y.id];let R=L.texture;y.gradientVersion!==L.version&&(R=ho(w,r,c,d,y,b,E,L)),c.activeTexture.set(d.TEXTURE0),R.bind(y.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE)}function ao(w,r,c,d,y,b,E,L,R){const H=b.gradients[y.id];let K=H.texture;y.gradientVersion!==H.version&&(K=ho(w,r,c,d,y,b,E,H)),c.activeTexture.set(d.TEXTURE0),K.bind(y.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE),c.activeTexture.set(d.TEXTURE1),w.lineAtlas.bind(c),L.updatePaintBuffers(R)}function Us(w,r,c,d,y){if(!c||!d||!d.imageAtlas)return;const b=d.imageAtlas.patternPositions;let E=b[c.to.toString()],L=b[c.from.toString()];if(!E&&L&&(E=L),!L&&E&&(L=E),!E||!L){const R=y.getPaintProperty(r);E=b[R],L=b[R]}E&&L&&w.setConstantPatternPositions(E,L)}function $s(w,r,c,d,y,b,E,L){const R=w.context.gl,H="fill-pattern",K=c.paint.get(H),re=K&&K.constantOr(1),J=c.getCrossfadeParameters();let Ae,ve,Me,Oe,Re;const je=w.transform,it=c.paint.get("fill-translate"),We=c.paint.get("fill-translate-anchor");E?(ve=re&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=R.LINES):(ve=re?"fillPattern":"fill",Ae=R.TRIANGLES);const ot=K.constantOr(null);for(const ht of d){const rt=r.getTile(ht);if(re&&!rt.patternsLoaded())continue;const vt=rt.getBucket(c);if(!vt)continue;const Ut=vt.programConfigurations.get(c.id),Tt=w.useProgram(ve,Ut),Dt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ht);re&&(w.context.activeTexture.set(R.TEXTURE0),rt.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Ut.updatePaintBuffers(J)),Us(Ut,H,ot,rt,c);const Nt=je.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),rr=a.aP(je,rt,it,We);if(E){Oe=vt.indexBuffer2,Re=vt.segments2;const tr=[R.drawingBufferWidth,R.drawingBufferHeight];Me=ve==="fillOutlinePattern"&&re?iA(w,J,rt,tr,rr):nA(tr,rr)}else Oe=vt.indexBuffer,Re=vt.segments,Me=re?Fl(w,J,rt,rr):{u_fill_translate:rr};const cr=w.stencilModeForClipping(ht);Tt.draw(w.context,Ae,y,cr,b,Cn.backCCW,Me,Dt,Nt,c.id,vt.layoutVertexBuffer,Oe,Re,c.paint,w.transform.zoom,Ut)}}function ku(w,r,c,d,y,b,E,L){const R=w.context,H=R.gl,K="fill-extrusion-pattern",re=c.paint.get(K),J=re.constantOr(1),Ae=c.getCrossfadeParameters(),ve=c.paint.get("fill-extrusion-opacity"),Me=re.constantOr(null),Oe=w.transform;for(const Re of d){const je=r.getTile(Re),it=je.getBucket(c);if(!it)continue;const We=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re),ot=it.programConfigurations.get(c.id),ht=w.useProgram(J?"fillExtrusionPattern":"fillExtrusion",ot);J&&(w.context.activeTexture.set(H.TEXTURE0),je.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),ot.updatePaintBuffers(Ae));const rt=Oe.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!L,applyTerrainMatrix:!0});Us(ot,K,Me,je,c);const vt=a.aP(Oe,je,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ut=c.paint.get("fill-extrusion-vertical-gradient"),Tt=J?xo(w,Ut,ve,vt,Re,Ae,je):FA(w,Ut,ve,vt);ht.draw(R,R.gl.TRIANGLES,y,b,E,Cn.backCCW,Tt,We,rt,c.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,c.paint,w.transform.zoom,ot,w.style.map.terrain&&it.centroidVertexBuffer)}}function Nc(w,r,c,d,y,b,E,L,R){var H;const K=w.style.projection,re=w.context,J=w.transform,Ae=re.gl,ve=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],Me=w.useProgram("hillshade",null,!1,ve),Oe=!w.options.moving;for(const Re of d){const je=r.getTile(Re),it=je.fbo;if(!it)continue;const We=K.getMeshFromTileID(re,Re.canonical,L,!0,"raster"),ot=(H=w.style.map.terrain)===null||H===void 0?void 0:H.getTerrainData(Re);re.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,it.colorAttachment.get());const ht=J.getProjectionData({overscaledTileID:Re,aligned:Oe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});Me.draw(re,Ae.TRIANGLES,b,y[Re.overscaledZ],E,Cn.backCCW,Pa(w,je,c),ot,ht,c.id,We.vertexBuffer,We.indexBuffer,We.segments)}}function ka(w,r,c,d,y,b,E,L,R){var H;const K=w.style.projection,re=w.context,J=w.transform,Ae=re.gl,ve=w.useProgram("colorRelief"),Me=!w.options.moving;let Oe=!0,Re=0;for(const je of d){const it=r.getTile(je),We=it.dem;if(Oe){const Tt=Ae.getParameter(Ae.MAX_TEXTURE_SIZE),{elevationTexture:Dt,colorTexture:Nt}=c.getColorRampTextures(re,Tt,We.getUnpackVector());re.activeTexture.set(Ae.TEXTURE1),Dt.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE),re.activeTexture.set(Ae.TEXTURE4),Nt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),Oe=!1,Re=Dt.size[0]}if(!We||!We.data)continue;const ot=We.stride,ht=We.getPixels();if(re.activeTexture.set(Ae.TEXTURE0),re.pixelStoreUnpackPremultiplyAlpha.set(!1),it.demTexture=it.demTexture||w.getTileTexture(ot),it.demTexture){const Tt=it.demTexture;Tt.update(ht,{premultiply:!1}),Tt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE)}else it.demTexture=new a.T(re,ht,Ae.RGBA,{premultiply:!1}),it.demTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE);const rt=K.getMeshFromTileID(re,je.canonical,L,!0,"raster"),vt=(H=w.style.map.terrain)===null||H===void 0?void 0:H.getTerrainData(je),Ut=J.getProjectionData({overscaledTileID:je,aligned:Me,applyGlobeMatrix:!R,applyTerrainMatrix:!0});ve.draw(re,Ae.TRIANGLES,b,y[je.overscaledZ],E,Cn.backCCW,is(c,it.dem,Re),vt,Ut,c.id,rt.vertexBuffer,rt.indexBuffer,rt.segments)}}const Ua=[new a.P(0,0),new a.P(a.a5,0),new a.P(a.a5,a.a5),new a.P(0,a.a5)];function Da(w,r,c,d,y,b,E,L,R=!1,H=!1){const K=d[d.length-1].overscaledZ,re=w.context,J=re.gl,Ae=w.useProgram("raster"),ve=w.transform,Me=w.style.projection,Oe=w.colorModeForRenderPass(),Re=!w.options.moving,je=c.paint.get("raster-opacity"),it=c.paint.get("raster-resampling"),We=c.paint.get("raster-fade-duration"),ot=!!w.style.map.terrain;for(const ht of d){const rt=w.getDepthModeForSublayer(ht.overscaledZ-K,je===1?pn.ReadWrite:pn.ReadOnly,J.LESS),vt=r.getTile(ht),Ut=it==="nearest"?J.NEAREST:J.LINEAR;re.activeTexture.set(J.TEXTURE0),vt.texture.bind(Ut,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),re.activeTexture.set(J.TEXTURE1);const{parentTile:Tt,parentScaleBy:Dt,parentTopLeft:Nt,fadeValues:rr}=NA(vt,r,We,ot);vt.fadeOpacity=rr.tileOpacity,Tt?(Tt.fadeOpacity=rr.parentTileOpacity,Tt.texture.bind(Ut,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST)):vt.texture.bind(Ut,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),vt.texture.useMipmap&&re.extTextureFilterAnisotropic&&w.transform.pitch>20&&J.texParameterf(J.TEXTURE_2D,re.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,re.extTextureFilterAnisotropicMax);const cr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ht),tr=ve.getProjectionData({overscaledTileID:ht,aligned:Re,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Ur=dl(Nt,Dt,rr.fadeMix,c,L),yn=Me.getMeshFromTileID(re,ht.canonical,b,E,"raster");Ae.draw(re,J.TRIANGLES,rt,y?y[ht.overscaledZ]:xn.disabled,Oe,R?Cn.frontCCW:Cn.backCCW,Ur,cr,tr,c.id,yn.vertexBuffer,yn.indexBuffer,yn.segments)}}function NA(w,r,c,d){const y={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(c===0||d)return y;if(w.fadingParentID){const b=r.getLoadedTile(w.fadingParentID);if(!b)return y;const E=Math.pow(2,b.tileID.overscaledZ-w.tileID.overscaledZ),L=[w.tileID.canonical.x*E%1,w.tileID.canonical.y*E%1],R=(function(H,K,re){const J=z(),Ae=(J-K.timeAdded)/re,ve=H.fadingDirection===xt.Incoming,Me=a.ao((J-H.timeAdded)/re,0,1),Oe=a.ao(1-Ae,0,1),Re=ve?Me:Oe;return{tileOpacity:Re,parentTileOpacity:ve?Oe:Me,fadeMix:{opacity:1,mix:1-Re}}})(w,b,c);return{parentTile:b,parentScaleBy:E,parentTopLeft:L,fadeValues:R}}if(w.selfFading){const b=(function(E,L){const R=(z()-E.timeAdded)/L,H=a.ao(R,0,1);return{tileOpacity:H,fadeMix:{opacity:H,mix:0}}})(w,c);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:b}}return y}const Uu=new a.bq(1,0,0,1),Dl=new a.bq(0,1,0,1),Ra=new a.bq(0,0,1,1),ai=new a.bq(1,0,1,1),Zn=new a.bq(0,1,1,1);function Rl(w,r,c,d){Ws(w,0,r+c/2,w.transform.width,c,d)}function Ds(w,r,c,d){Ws(w,r-c/2,0,c,w.transform.height,d)}function Ws(w,r,c,d,y,b){const E=w.context,L=E.gl;L.enable(L.SCISSOR_TEST),L.scissor(r*w.pixelRatio,c*w.pixelRatio,d*w.pixelRatio,y*w.pixelRatio),E.clear({color:b}),L.disable(L.SCISSOR_TEST)}function Qc(w,r,c){const d=w.context,y=d.gl,b=w.useProgram("debug"),E=pn.disabled,L=xn.disabled,R=w.colorModeForRenderPass(),H="$debug",K=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);d.activeTexture.set(y.TEXTURE0);const re=r.getTileByID(c.key).latestRawTileData,J=Math.floor((re&&re.byteLength||0)/1024),Ae=r.getTile(c).tileSize,ve=512/Math.min(Ae,512)*(c.overscaledZ/w.transform.zoom)*.5;let Me=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Me+=` => ${c.overscaledZ}`),(function(Re,je){Re.initDebugOverlayCanvas();const it=Re.debugOverlayCanvas,We=Re.context.gl,ot=Re.debugOverlayCanvas.getContext("2d");ot.clearRect(0,0,it.width,it.height),ot.shadowColor="white",ot.shadowBlur=2,ot.lineWidth=1.5,ot.strokeStyle="white",ot.textBaseline="top",ot.font="bold 36px Open Sans, sans-serif",ot.fillText(je,5,5),ot.strokeText(je,5,5),Re.debugOverlayTexture.update(it),Re.debugOverlayTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE)})(w,`${Me} ${J}kB`);const Oe=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(d,y.TRIANGLES,E,L,Rn.alphaBlended,Cn.disabled,bo(a.bq.transparent,ve),null,Oe,H,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),b.draw(d,y.LINE_STRIP,E,L,R,Cn.disabled,bo(a.bq.red),K,Oe,H,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Oc(w,r,c,d){const{isRenderingGlobe:y}=d,b=w.context,E=b.gl,L=w.transform,R=w.colorModeForRenderPass(),H=w.getDepthModeFor3D(),K=w.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,w.width,w.height]);for(const re of c){const J=r.getTerrainMesh(re.tileID),Ae=w.renderToTexture.getTexture(re),ve=r.getTerrainData(re.tileID);b.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,Ae.texture);const Me=r.getMeshFrameDelta(L.zoom),Oe=L.calculateFogMatrix(re.tileID.toUnwrapped()),Re=tu(Me,Oe,w.style.sky,L.pitch,y),je=L.getProjectionData({overscaledTileID:re.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});K.draw(b,E.TRIANGLES,H,xn.disabled,R,Cn.backCCW,Re,ve,je,"terrain",J.vertexBuffer,J.indexBuffer,J.segments)}}function po(w,r){if(!r.mesh){const c=new a.aX;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const d=new a.aZ;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),r.mesh=new ni(w.createVertexBuffer(c,ys.members),w.createIndexBuffer(d),a.aY.simpleSegment(0,0,c.length,d.length))}return r.mesh}class lu{constructor(r,c){this.context=new Lu(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=rs.maxOverzooming+rs.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gs}resize(r,c,d){if(this.width=Math.floor(r*d),this.height=Math.floor(c*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,c=new a.aX;c.emplaceBack(0,0),c.emplaceBack(a.a5,0),c.emplaceBack(0,a.a5),c.emplaceBack(a.a5,a.a5),this.tileExtentBuffer=r.createVertexBuffer(c,ys.members),this.tileExtentSegments=a.aY.simpleSegment(0,0,4,2);const d=new a.aX;d.emplaceBack(0,0),d.emplaceBack(a.a5,0),d.emplaceBack(0,a.a5),d.emplaceBack(a.a5,a.a5),this.debugBuffer=r.createVertexBuffer(d,ys.members),this.debugSegments=a.aY.simpleSegment(0,0,4,5);const y=new a.ci;y.emplaceBack(0,0,0,0),y.emplaceBack(a.a5,0,a.a5,0),y.emplaceBack(0,a.a5,0,a.a5),y.emplaceBack(a.a5,a.a5,a.a5,a.a5),this.rasterBoundsBuffer=r.createVertexBuffer(y,rA.members),this.rasterBoundsSegments=a.aY.simpleSegment(0,0,4,2);const b=new a.aX;b.emplaceBack(0,0),b.emplaceBack(a.a5,0),b.emplaceBack(0,a.a5),b.emplaceBack(a.a5,a.a5),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(b,ys.members),this.rasterBoundsSegmentsPosOnly=a.aY.simpleSegment(0,0,4,5);const E=new a.aX;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(E,ys.members),this.viewportSegments=a.aY.simpleSegment(0,0,4,2);const L=new a.cj;L.emplaceBack(0),L.emplaceBack(1),L.emplaceBack(3),L.emplaceBack(2),L.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(L);const R=new a.aZ;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(R);const H=this.context.gl;this.stencilClearMode=new xn({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO),this.tileExtentMesh=new ni(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=a.N();a.c8(d,0,this.width,this.height,0,0,1),a.Q(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const y={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,pn.disabled,this.stencilClearMode,Rn.disabled,Cn.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,d){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const y=this.context;y.setColorMode(Rn.disabled),y.setDepthMode(pn.disabled);const b={};for(const E of c)b[E.key]=this.nextStencilID++;this._renderTileMasks(b,c,d,!0),this._renderTileMasks(b,c,d,!1),this._tileClippingMaskIDs=b}_renderTileMasks(r,c,d,y){const b=this.context,E=b.gl,L=this.style.projection,R=this.transform,H=this.useProgram("clippingMask");for(const K of c){const re=r[K.key],J=this.style.map.terrain&&this.style.map.terrain.getTerrainData(K),Ae=L.getMeshFromTileID(this.context,K.canonical,y,!0,"stencil"),ve=R.getProjectionData({overscaledTileID:K,applyGlobeMatrix:!d,applyTerrainMatrix:!0});H.draw(b,E.TRIANGLES,pn.disabled,new xn({func:E.ALWAYS,mask:0},re,255,E.KEEP,E.KEEP,E.REPLACE),Rn.disabled,d?Cn.disabled:Cn.backCCW,null,J,ve,"$clipping",Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,d=this.style.projection,y=this.transform,b=this.useProgram("depth"),E=this.getDepthModeFor3D(),L=In(y,{tileSize:y.tileSize});for(const R of L){const H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),K=d.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),re=y.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(r,c.TRIANGLES,E,xn.disabled,Rn.disabled,Cn.backCCW,null,H,re,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new xn({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new xn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,d=r.sort(((E,L)=>L.overscaledZ-E.overscaledZ)),y=d[d.length-1].overscaledZ,b=d[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const E={};for(let L=0;L<b;L++)E[L+y]=new xn({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[E,d]}return[{[y]:xn.disabled},d]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,d=r.sort(((E,L)=>L.overscaledZ-E.overscaledZ)),y=d[d.length-1].overscaledZ,b=d[0].overscaledZ-y+1;if(this.clearStencil(),b>1){const E={},L={};for(let R=0;R<b;R++)E[R+y]=new xn({func:c.GREATER,mask:255},b+1+R,255,c.KEEP,c.KEEP,c.REPLACE),L[R+y]=new xn({func:c.GREATER,mask:255},1+R,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*b+1,[E,L,d]}return this.nextStencilID=3,[{[y]:new xn({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[y]:new xn({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Rn([r.CONSTANT_COLOR,r.ONE],new a.bq(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Rn.unblended:Rn.alphaBlended}getDepthModeForSublayer(r,c,d){if(!this.opaquePassEnabledForLayer())return pn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new pn(d||this.context.gl.LEQUAL,c,[y,y])}getDepthModeFor3D(){return new pn(this.context.gl.LEQUAL,pn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var d,y;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(z()),this.imageManager.beginFrame();const b=this.style._order,E=this.style.tileManagers,L={},R={},H={},K={isRenderingToTexture:!1,isRenderingGlobe:((d=r.projection)===null||d===void 0?void 0:d.transitionState)>0};for(const J in E){const Ae=E[J];Ae.used&&Ae.prepare(this.context),L[J]=Ae.getVisibleCoordinates(!1),R[J]=L[J].slice().reverse(),H[J]=Ae.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let J=0;J<b.length;J++)if(this.style._layers[b[J]].is3D()){this.opaquePassCutoff=J;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const J of b){const Ae=this.style._layers[J];if(!Ae.hasOffscreenPass()||Ae.isHidden(this.transform.zoom))continue;const ve=R[Ae.source];(Ae.type==="custom"||ve.length)&&this.renderLayer(this,E[Ae.source],Ae,ve,K)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:J=>this.useProgram(J)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?a.bq.black:a.bq.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(J,Ae){const ve=J.context,Me=ve.gl,Oe=((ht,rt,vt)=>{const Ut=Math.cos(rt.rollInRadians),Tt=Math.sin(rt.rollInRadians),Dt=tn(rt),Nt=rt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ht.properties.get("sky-color"),u_horizon_color:ht.properties.get("horizon-color"),u_horizon:[(rt.width/2-Dt*Tt)*vt,(rt.height/2+Dt*Ut)*vt],u_horizon_normal:[-Tt,Ut],u_sky_horizon_blend:ht.properties.get("sky-horizon-blend")*rt.height/2*vt,u_sky_blend:Nt}})(Ae,J.style.map.transform,J.pixelRatio),Re=new pn(Me.LEQUAL,pn.ReadWrite,[0,1]),je=xn.disabled,it=J.colorModeForRenderPass(),We=J.useProgram("sky"),ot=po(ve,Ae);We.draw(ve,Me.TRIANGLES,Re,je,it,Cn.disabled,Oe,null,void 0,"sky",ot.vertexBuffer,ot.indexBuffer,ot.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const J=this.style._layers[b[this.currentLayer]],Ae=E[J.source],ve=L[J.source];this._renderTileClippingMasks(J,ve,!1),this.renderLayer(this,Ae,J,ve,K)}this.renderPass="translucent";let re=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const J=this.style._layers[b[this.currentLayer]],Ae=E[J.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(J,K))continue;this.opaquePassEnabledForLayer()||re||(re=!0,K.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ve=(J.type==="symbol"?H:R)[J.source];this._renderTileClippingMasks(J,L[J.source],!!this.renderToTexture),this.renderLayer(this,Ae,J,ve,K)}if(K.isRenderingGlobe&&(function(J,Ae,ve){const Me=J.context,Oe=Me.gl,Re=J.useProgram("atmosphere"),je=new pn(Oe.LEQUAL,pn.ReadOnly,[0,1]),it=J.transform,We=(function(Nt,rr){const cr=Nt.properties.get("position"),tr=[-cr.x,-cr.y,-cr.z],Ur=a.as(new Float64Array(16));return Nt.properties.get("anchor")==="map"&&(a.bh(Ur,Ur,rr.rollInRadians),a.bi(Ur,Ur,-rr.pitchInRadians),a.bh(Ur,Ur,rr.bearingInRadians),a.bi(Ur,Ur,rr.center.lat*Math.PI/180),a.bK(Ur,Ur,-rr.center.lng*Math.PI/180)),a.ch(tr,tr,Ur),tr})(ve,J.transform),ot=it.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ht=Ae.properties.get("atmosphere-blend")*ot.projectionTransition;if(ht===0)return;const rt=jr(it.worldSize,it.center.lat),vt=it.inverseProjectionMatrix,Ut=new Float64Array(4);Ut[3]=1,a.aI(Ut,Ut,it.modelViewProjectionMatrix),Ut[0]/=Ut[3],Ut[1]/=Ut[3],Ut[2]/=Ut[3],Ut[3]=1,a.aI(Ut,Ut,vt),Ut[0]/=Ut[3],Ut[1]/=Ut[3],Ut[2]/=Ut[3],Ut[3]=1;const Tt=((Nt,rr,cr,tr,Ur)=>({u_sun_pos:Nt,u_atmosphere_blend:rr,u_globe_position:cr,u_globe_radius:tr,u_inv_proj_matrix:Ur}))(We,ht,[Ut[0],Ut[1],Ut[2]],rt,vt),Dt=po(Me,Ae);Re.draw(Me,Oe.TRIANGLES,je,xn.disabled,Rn.alphaBlended,Cn.disabled,Tt,null,null,"atmosphere",Dt.vertexBuffer,Dt.indexBuffer,Dt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const J=(function(Ae,ve){let Me=null;const Oe=Object.values(Ae._layers).flatMap((We=>We.source&&!We.isHidden(ve)?[Ae.tileManagers[We.source]]:[])),Re=Oe.filter((We=>We.getSource().type==="vector")),je=Oe.filter((We=>We.getSource().type!=="vector")),it=We=>{(!Me||Me.getSource().maxzoom<We.getSource().maxzoom)&&(Me=We)};return Re.forEach((We=>it(We))),Me||je.forEach((We=>it(We))),Me})(this.style,this.transform.zoom);J&&(function(Ae,ve,Me){for(let Oe=0;Oe<Me.length;Oe++)Qc(Ae,ve,Me[Oe])})(this,J,J.getVisibleCoordinates())}this.options.showPadding&&(function(J){const Ae=J.transform.padding;Rl(J,J.transform.height-(Ae.top||0),3,Uu),Rl(J,Ae.bottom||0,3,Dl),Ds(J,Ae.left||0,3,Ra),Ds(J,J.transform.width-(Ae.right||0),3,ai);const ve=J.transform.centerPoint;(function(Me,Oe,Re,je){Ws(Me,Oe-1,Re-10,2,20,je),Ws(Me,Oe-10,Re-1,20,2,je)})(J,ve.x,J.transform.height-ve.y,Zn)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=r?!a.ck(c,d):!a.cl(c,d)),y||(y=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(a.cm(c,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,E){const L=b.context,R=L.gl,H=b.transform,K=Rn.unblended,re=new pn(R.LEQUAL,pn.ReadWrite,[0,1]),J=E.tileManager.getRenderableTiles(),Ae=b.useProgram("terrainDepth");L.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),L.clear({color:a.bq.transparent,depth:1});for(const ve of J){const Me=E.getTerrainMesh(ve.tileID),Oe=E.getTerrainData(ve.tileID),Re=H.getProjectionData({overscaledTileID:ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),je={u_ele_delta:E.getMeshFrameDelta(H.zoom)};Ae.draw(L,R.TRIANGLES,re,xn.disabled,K,Cn.backCCW,je,Oe,Re,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,E){const L=b.context,R=L.gl,H=b.transform,K=Rn.unblended,re=new pn(R.LEQUAL,pn.ReadWrite,[0,1]),J=E.getCoordsTexture(),Ae=E.tileManager.getRenderableTiles(),ve=b.useProgram("terrainCoords");L.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),L.clear({color:a.bq.transparent,depth:1}),E.coordsIndex=[];for(const Me of Ae){const Oe=E.getTerrainMesh(Me.tileID),Re=E.getTerrainData(Me.tileID);L.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,J.texture);const je={u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(H.zoom)},it=H.getProjectionData({overscaledTileID:Me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ve.draw(L,R.TRIANGLES,re,xn.disabled,K,Cn.backCCW,je,Re,it,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments),E.coordsIndex.push(Me.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(r,c,d,y,b){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(y||[]).length)&&(this.id=d.id,a.cn(d)?(function(E,L,R,H,K,re){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:J}=re,Ae=xn.disabled,ve=E.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Me,Oe,Re,je,it,We,ot,ht,rt){const vt=Oe.transform,Ut=Oe.style.map.terrain,Tt=it==="map",Dt=We==="map";for(const Nt of Me){const rr=je.getTile(Nt),cr=rr.getBucket(Re);if(!cr||!cr.text||!cr.text.segments.get().length)continue;const tr=a.az(cr.textSizeData,vt.zoom),Ur=a.aO(rr,1,Oe.transform.zoom),yn=Di(Tt,Oe.transform,Ur),ci=Re.layout.get("icon-text-fit")!=="none"&&cr.hasIconData();if(tr){const Oi=Math.pow(2,vt.zoom-rr.tileID.overscaledZ),Ai=Ut?(Vi,Ti)=>Ut.getElevation(Nt,Vi,Ti):null;cA(cr,Tt,Dt,rt,vt,yn,Oi,tr,ci,a.aP(vt,rr,ot,ht),Nt.toUnwrapped(),Ai)}}})(H,E,R,L,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),K),R.paint.get("icon-opacity").constantOr(1)!==0&&AA(E,L,R,H,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),Ae,ve,J),R.paint.get("text-opacity").constantOr(1)!==0&&AA(E,L,R,H,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),Ae,ve,J),L.map.showCollisionBoxes&&(Rc(E,L,R,H,!0),Rc(E,L,R,H,!1))})(r,c,d,y,this.style.placement.variableOffsets,b):a.co(d)?(function(E,L,R,H,K){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:re}=K,J=R.paint.get("circle-opacity"),Ae=R.paint.get("circle-stroke-width"),ve=R.paint.get("circle-stroke-opacity"),Me=!R.layout.get("circle-sort-key").isConstant();if(J.constantOr(1)===0&&(Ae.constantOr(1)===0||ve.constantOr(1)===0))return;const Oe=E.context,Re=Oe.gl,je=E.transform,it=E.getDepthModeForSublayer(0,pn.ReadOnly),We=xn.disabled,ot=E.colorModeForRenderPass(),ht=[],rt=je.getCircleRadiusCorrection();for(let vt=0;vt<H.length;vt++){const Ut=H[vt],Tt=L.getTile(Ut),Dt=Tt.getBucket(R);if(!Dt)continue;const Nt=R.paint.get("circle-translate"),rr=R.paint.get("circle-translate-anchor"),cr=a.aP(je,Tt,Nt,rr),tr=Dt.programConfigurations.get(R.id),Ur=E.useProgram("circle",tr),yn=Dt.layoutVertexBuffer,ci=Dt.indexBuffer,Oi=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ut),Ai={programConfiguration:tr,program:Ur,layoutVertexBuffer:yn,indexBuffer:ci,uniformValues:Il(E,Tt,R,cr,rt),terrainData:Oi,projectionData:je.getProjectionData({overscaledTileID:Ut,applyGlobeMatrix:!re,applyTerrainMatrix:!0})};if(Me){const Vi=Dt.segments.get();for(const Ti of Vi)ht.push({segments:new a.aY([Ti]),sortKey:Ti.sortKey,state:Ai})}else ht.push({segments:Dt.segments,sortKey:0,state:Ai})}Me&&ht.sort(((vt,Ut)=>vt.sortKey-Ut.sortKey));for(const vt of ht){const{programConfiguration:Ut,program:Tt,layoutVertexBuffer:Dt,indexBuffer:Nt,uniformValues:rr,terrainData:cr,projectionData:tr}=vt.state;Tt.draw(Oe,Re.TRIANGLES,it,We,ot,Cn.backCCW,rr,cr,tr,R.id,Dt,Nt,vt.segments,R.paint,E.transform.zoom,Ut)}})(r,c,d,y,b):a.cp(d)?(function(E,L,R,H,K){if(R.paint.get("heatmap-opacity")===0)return;const re=E.context,{isRenderingToTexture:J,isRenderingGlobe:Ae}=K;if(E.style.map.terrain){for(const ve of H){const Me=L.getTile(ve);L.hasRenderableParent(ve)||(E.renderPass==="offscreen"?oh(E,Me,R,ve,Ae):E.renderPass==="translucent"&&Qh(E,R,ve,J,Ae))}re.viewport.set([0,0,E.width,E.height])}else E.renderPass==="offscreen"?(function(ve,Me,Oe,Re){const je=ve.context,it=je.gl,We=ve.transform,ot=xn.disabled,ht=new Rn([it.ONE,it.ONE],a.bq.transparent,[!0,!0,!0,!0]);(function(rt,vt,Ut){const Tt=rt.gl;rt.activeTexture.set(Tt.TEXTURE1),rt.viewport.set([0,0,vt.width/4,vt.height/4]);let Dt=Ut.heatmapFbos.get(a.ce);Dt?(Tt.bindTexture(Tt.TEXTURE_2D,Dt.colorAttachment.get()),rt.bindFramebuffer.set(Dt.framebuffer)):(Dt=au(rt,vt.width/4,vt.height/4),Ut.heatmapFbos.set(a.ce,Dt))})(je,ve,Oe),je.clear({color:a.bq.transparent});for(let rt=0;rt<Re.length;rt++){const vt=Re[rt];if(Me.hasRenderableParent(vt))continue;const Ut=Me.getTile(vt),Tt=Ut.getBucket(Oe);if(!Tt)continue;const Dt=Tt.programConfigurations.get(Oe.id),Nt=ve.useProgram("heatmap",Dt),rr=We.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),cr=We.getCircleRadiusCorrection();Nt.draw(je,it.TRIANGLES,pn.disabled,ot,ht,Cn.backCCW,pa(Ut,We.zoom,Oe.paint.get("heatmap-intensity"),cr),null,rr,Oe.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,Oe.paint,We.zoom,Dt)}je.viewport.set([0,0,ve.width,ve.height])})(E,L,R,H):E.renderPass==="translucent"&&(function(ve,Me){const Oe=ve.context,Re=Oe.gl;Oe.setColorMode(ve.colorModeForRenderPass());const je=Me.heatmapFbos.get(a.ce);je&&(Oe.activeTexture.set(Re.TEXTURE0),Re.bindTexture(Re.TEXTURE_2D,je.colorAttachment.get()),Oe.activeTexture.set(Re.TEXTURE1),RA(Oe,Me).bind(Re.LINEAR,Re.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(Oe,Re.TRIANGLES,pn.disabled,xn.disabled,ve.colorModeForRenderPass(),Cn.disabled,ul(ve,Me,0,1),null,null,Me.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,Me.paint,ve.transform.zoom))})(E,R)})(r,c,d,y,b):a.cq(d)?(function(E,L,R,H,K){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:re}=K,J=R.paint.get("line-opacity"),Ae=R.paint.get("line-width");if(J.constantOr(1)===0||Ae.constantOr(1)===0)return;const ve=E.getDepthModeForSublayer(0,pn.ReadOnly),Me=E.colorModeForRenderPass(),Oe=R.paint.get("line-dasharray"),Re=Oe.constantOr(1),je=R.paint.get("line-pattern"),it=je.constantOr(1),We=R.paint.get("line-gradient"),ot=R.getCrossfadeParameters();let ht;ht=it?"linePattern":Re&&We?"lineGradientSDF":Re?"lineSDF":We?"lineGradient":"line";const rt=E.context,vt=rt.gl,Ut=E.transform;let Tt=!0;for(const Dt of H){const Nt=L.getTile(Dt);if(it&&!Nt.patternsLoaded())continue;const rr=Nt.getBucket(R);if(!rr)continue;const cr=rr.programConfigurations.get(R.id),tr=E.context.program.get(),Ur=E.useProgram(ht,cr),yn=Tt||Ur.program!==tr,ci=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Dt),Oi=je.constantOr(null),Ai=Oe&&Oe.constantOr(null);if(Oi&&Nt.imageAtlas){const Ys=Nt.imageAtlas,Fs=Ys.patternPositions[Oi.to.toString()],ui=Ys.patternPositions[Oi.from.toString()];Fs&&ui&&cr.setConstantPatternPositions(Fs,ui)}else if(Ai){const Ys=R.layout.get("line-cap")==="round",Fs=E.lineAtlas.getDash(Ai.to,Ys),ui=E.lineAtlas.getDash(Ai.from,Ys);cr.setConstantDashPositions(Fs,ui)}const Vi=Ut.getProjectionData({overscaledTileID:Dt,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),Ti=Ut.getPixelScale();let Es;it?(Es=ma(E,Nt,R,Ti,ot),ga(rt,vt,Nt,cr,ot)):Re&&We?(Es=Pl(E,Nt,R,Ti,ot,rr.lineClipsArray.length),ao(E,L,rt,vt,R,rr,Dt,cr,ot)):Re?(Es=Ec(E,Nt,R,Ti,ot),qn(E,rt,vt,cr,yn,ot)):We?(Es=fl(E,Nt,R,Ti,rr.lineClipsArray.length),fo(E,L,rt,vt,R,rr,Dt)):Es=hl(E,Nt,R,Ti);const Gi=E.stencilModeForClipping(Dt);Ur.draw(rt,vt.TRIANGLES,ve,Gi,Me,Cn.disabled,Es,ci,Vi,R.id,rr.layoutVertexBuffer,rr.indexBuffer,rr.segments,R.paint,E.transform.zoom,cr,rr.layoutVertexBuffer2),Tt=!1}})(r,c,d,y,b):a.cr(d)?(function(E,L,R,H,K){const re=R.paint.get("fill-color"),J=R.paint.get("fill-opacity");if(J.constantOr(1)===0)return;const{isRenderingToTexture:Ae}=K,ve=E.colorModeForRenderPass(),Me=R.paint.get("fill-pattern"),Oe=E.opaquePassEnabledForLayer()&&!Me.constantOr(1)&&re.constantOr(a.bq.transparent).a===1&&J.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===Oe){const Re=E.getDepthModeForSublayer(1,E.renderPass==="opaque"?pn.ReadWrite:pn.ReadOnly);$s(E,L,R,H,Re,ve,!1,Ae)}if(E.renderPass==="translucent"&&R.paint.get("fill-antialias")){const Re=E.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,pn.ReadOnly);$s(E,L,R,H,Re,ve,!0,Ae)}})(r,c,d,y,b):a.cs(d)?(function(E,L,R,H,K){const re=R.paint.get("fill-extrusion-opacity");if(re===0)return;const{isRenderingToTexture:J}=K;if(E.renderPass==="translucent"){const Ae=new pn(E.context.gl.LEQUAL,pn.ReadWrite,E.depthRangeFor3D);if(re!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))ku(E,L,R,H,Ae,xn.disabled,Rn.disabled,J),ku(E,L,R,H,Ae,E.stencilModeFor3D(),E.colorModeForRenderPass(),J);else{const ve=E.colorModeForRenderPass();ku(E,L,R,H,Ae,xn.disabled,ve,J)}}})(r,c,d,y,b):a.ct(d)?(function(E,L,R,H,K){if(E.renderPass!=="offscreen"&&E.renderPass!=="translucent")return;const{isRenderingToTexture:re}=K,J=E.context,Ae=E.style.projection.useSubdivision,ve=E.getDepthModeForSublayer(0,pn.ReadOnly),Me=E.colorModeForRenderPass();if(E.renderPass==="offscreen")(function(Oe,Re,je,it,We,ot,ht){const rt=Oe.context,vt=rt.gl;for(const Ut of je){const Tt=Re.getTile(Ut),Dt=Tt.dem;if(!Dt||!Dt.data||!Tt.needsHillshadePrepare)continue;const Nt=Dt.dim,rr=Dt.stride,cr=Dt.getPixels();if(rt.activeTexture.set(vt.TEXTURE1),rt.pixelStoreUnpackPremultiplyAlpha.set(!1),Tt.demTexture=Tt.demTexture||Oe.getTileTexture(rr),Tt.demTexture){const Ur=Tt.demTexture;Ur.update(cr,{premultiply:!1}),Ur.bind(vt.NEAREST,vt.CLAMP_TO_EDGE)}else Tt.demTexture=new a.T(rt,cr,vt.RGBA,{premultiply:!1}),Tt.demTexture.bind(vt.NEAREST,vt.CLAMP_TO_EDGE);rt.activeTexture.set(vt.TEXTURE0);let tr=Tt.fbo;if(!tr){const Ur=new a.T(rt,{width:Nt,height:Nt,data:null},vt.RGBA);Ur.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),tr=Tt.fbo=rt.createFramebuffer(Nt,Nt,!0,!1),tr.colorAttachment.set(Ur.texture)}rt.bindFramebuffer.set(tr.framebuffer),rt.viewport.set([0,0,Nt,Nt]),Oe.useProgram("hillshadePrepare").draw(rt,vt.TRIANGLES,We,ot,ht,Cn.disabled,rc(Tt.tileID,Dt),null,null,it.id,Oe.rasterBoundsBuffer,Oe.quadTriangleIndexBuffer,Oe.rasterBoundsSegments),Tt.needsHillshadePrepare=!1}})(E,L,H,R,ve,xn.disabled,Me),J.viewport.set([0,0,E.width,E.height]);else if(E.renderPass==="translucent")if(Ae){const[Oe,Re,je]=E.stencilConfigForOverlapTwoPass(H);Nc(E,L,R,je,Oe,ve,Me,!1,re),Nc(E,L,R,je,Re,ve,Me,!0,re)}else{const[Oe,Re]=E.getStencilConfigForOverlapAndUpdateStencilID(H);Nc(E,L,R,Re,Oe,ve,Me,!1,re)}})(r,c,d,y,b):a.cu(d)?(function(E,L,R,H,K){if(E.renderPass!=="translucent"||!H.length)return;const{isRenderingToTexture:re}=K,J=E.style.projection.useSubdivision,Ae=E.getDepthModeForSublayer(0,pn.ReadOnly),ve=E.colorModeForRenderPass();if(J){const[Me,Oe,Re]=E.stencilConfigForOverlapTwoPass(H);ka(E,L,R,Re,Me,Ae,ve,!1,re),ka(E,L,R,Re,Oe,Ae,ve,!0,re)}else{const[Me,Oe]=E.getStencilConfigForOverlapAndUpdateStencilID(H);ka(E,L,R,Oe,Me,Ae,ve,!1,re)}})(r,c,d,y,b):a.bV(d)?(function(E,L,R,H,K){if(E.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!H.length)return;const{isRenderingToTexture:re}=K,J=L.getSource(),Ae=E.style.projection.useSubdivision;if(J instanceof un)Da(E,L,R,H,null,!1,!1,J.tileCoords,J.flippedWindingOrder,re);else if(Ae){const[ve,Me,Oe]=E.stencilConfigForOverlapTwoPass(H);Da(E,L,R,Oe,ve,!1,!0,Ua,!1,re),Da(E,L,R,Oe,Me,!0,!0,Ua,!1,re)}else{const[ve,Me]=E.getStencilConfigForOverlapAndUpdateStencilID(H);Da(E,L,R,Me,ve,!1,!0,Ua,!1,re)}})(r,c,d,y,b):a.cv(d)?(function(E,L,R,H,K){const re=R.paint.get("background-color"),J=R.paint.get("background-opacity");if(J===0)return;const{isRenderingToTexture:Ae}=K,ve=E.context,Me=ve.gl,Oe=E.style.projection,Re=E.transform,je=Re.tileSize,it=R.paint.get("background-pattern");if(E.isPatternMissing(it))return;const We=!it&&re.a===1&&J===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==We)return;const ot=xn.disabled,ht=E.getDepthModeForSublayer(0,We==="opaque"?pn.ReadWrite:pn.ReadOnly),rt=E.colorModeForRenderPass(),vt=E.useProgram(it?"backgroundPattern":"background"),Ut=H||In(Re,{tileSize:je,terrain:E.style.map.terrain});it&&(ve.activeTexture.set(Me.TEXTURE0),E.imageManager.bind(E.context));const Tt=R.getCrossfadeParameters();for(const Dt of Ut){const Nt=Re.getProjectionData({overscaledTileID:Dt,applyGlobeMatrix:!Ae,applyTerrainMatrix:!0}),rr=it?ss(J,E,it,{tileID:Dt,tileSize:je},Tt):ic(J,re),cr=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Dt),tr=Oe.getMeshFromTileID(ve,Dt.canonical,!1,!0,"raster");vt.draw(ve,Me.TRIANGLES,ht,ot,rt,Cn.backCCW,rr,cr,Nt,R.id,tr.vertexBuffer,tr.indexBuffer,tr.segments)}})(r,0,d,y,b):a.cw(d)&&(function(E,L,R,H){const{isRenderingGlobe:K}=H,re=E.context,J=R.implementation,Ae=E.style.projection,ve=E.transform,Me=ve.getProjectionDataForCustomLayer(K),Oe={farZ:ve.farZ,nearZ:ve.nearZ,fov:ve.fov*Math.PI/180,modelViewProjectionMatrix:ve.modelViewProjectionMatrix,projectionMatrix:ve.projectionMatrix,shaderData:{variantName:Ae.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ae.shaderPreludeCode.vertexSource}`,define:Ae.shaderDefine},defaultProjectionData:Me},Re=J.renderingMode?J.renderingMode:"2d";if(E.renderPass==="offscreen"){const je=J.prerender;je&&(E.setCustomLayerDefaults(),re.setColorMode(E.colorModeForRenderPass()),je.call(J,re.gl,Oe),re.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),re.setColorMode(E.colorModeForRenderPass()),re.setStencilMode(xn.disabled);const je=Re==="3d"?E.getDepthModeFor3D():E.getDepthModeForSublayer(0,pn.ReadOnly);re.setDepthMode(je),J.render(re.gl,Oe),re.setDirty(),E.setBaseState(),re.bindFramebuffer.set(null)}})(r,0,d,b))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!c||!d}useProgram(r,c,d=!1,y=[]){this.cache=this.cache||{};const b=!!this.style.map.terrain,E=this.style.projection,L=d?Yn.projectionMercator:E.shaderPreludeCode,R=d?$i:E.shaderDefine,H=r+(c?c.cacheKey:"")+`/${d?co:E.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[H]||(this.cache[H]=new Ta(this.context,Yn[r],c,ii[r],this._showOverdrawInspector,b,L,R,y)),this.cache[H]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var r,c;if(this._tileTextures){for(const d in this._tileTextures){const y=this._tileTextures[d];if(y)for(const b of y)b.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((r=this.tileExtentMesh.vertexBuffer)===null||r===void 0||r.destroy()),this.tileExtentMesh&&((c=this.tileExtentMesh.indexBuffer)===null||c===void 0||c.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const d in this.cache){const y=this.cache[d];y&&y.program&&this.context.gl.deleteProgram(y.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function Du(w,r){let c,d=!1,y=null,b=null;const E=()=>{y=null,d&&(w.apply(b,c),y=setTimeout(E,r),d=!1)};return(...L)=>(d=!0,b=this,c=L,y||E(),y)}class uA{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let d;return c.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(d=y)})),(d&&d[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:d,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const d=c.join("/");let y=d;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${d}`);let b=window.location.hash.replace(y,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let E=window.location.href.replace(/(#.+)?$/,b);E=E.replace("&&","&"),window.history.replaceState(window.history.state,null,E)},this._updateHash=Du(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,y=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),E=Math.round(c.lng*b)/b,L=Math.round(c.lat*b)/b,R=this._map.getBearing(),H=this._map.getPitch();let K="";if(K+=r?`/${E}/${L}/${d}`:`${d}/${L}/${E}`,(R||H)&&(K+="/"+Math.round(10*R)/10),H&&(K+=`/${Math.round(H)}`),this._hashName){const re=this._hashName;let J=!1;const Ae=window.location.hash.slice(1).split("&").map((ve=>{const Me=ve.split("=")[0];return Me===re?(J=!0,`${Me}=${K}`):ve})).filter((ve=>ve));return J||Ae.push(`${re}=${K}`),`#${Ae.join("&")}`}return`#${K}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new a.V(+r[2],+r[1])}catch{return!1}const c=+r[0],d=+(r[3]||0),y=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&d>=-180&&d<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const Na={linearity:.3,easing:a.cx(0,0,.3,1)},ya=a.e({deceleration:2500,maxSpeed:1400},Na),Rs=a.e({deceleration:20,maxSpeed:1400},Na),QA=a.e({deceleration:1e3,maxSpeed:360},Na),T=a.e({deceleration:1e3,maxSpeed:90},Na),D=a.e({deceleration:1e3,maxSpeed:360},Na);class q{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:z(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=z();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,c.roll+=b.rollDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const b=pe(c.pan.mag(),d,a.e({},ya,r||{})),E=c.pan.mult(b.amount/c.pan.mag()),L=this._map.cameraHelper.handlePanInertia(E,this._map.transform);y.center=L.easingCenter,y.offset=L.easingOffset,ee(y,b)}if(c.zoom){const b=pe(c.zoom,d,Rs);y.zoom=this._map.transform.zoom+b.amount,ee(y,b)}if(c.bearing){const b=pe(c.bearing,d,QA);y.bearing=this._map.transform.bearing+a.ao(b.amount,-179,179),ee(y,b)}if(c.pitch){const b=pe(c.pitch,d,T);y.pitch=this._map.transform.pitch+b.amount,ee(y,b)}if(c.roll){const b=pe(c.roll,d,D);y.roll=this._map.transform.roll+a.ao(b.amount,-179,179),ee(y,b)}if(y.zoom||y.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),a.e(y,{noMoveStart:!0})}}function ee(w,r){(!w.duration||w.duration<r.duration)&&(w.duration=r.duration,w.easing=r.easing)}function pe(w,r,c){const{maxSpeed:d,linearity:y,deceleration:b}=c,E=a.ao(w*y/(r/1e3),-d,d),L=Math.abs(E)/(b*y);return{easing:c.easing,duration:1e3*L,amount:E*(L/2)}}class _e extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d,y={}){d=d instanceof MouseEvent?d:new MouseEvent(r,d);const b=O.mousePos(c.getCanvas(),d),E=c.unproject(b);super(r,a.e({point:b,lngLat:E,originalEvent:d},y)),this._defaultPrevented=!1,this.target=c}}class Be extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d){const y=r==="touchend"?d.changedTouches:d.touches,b=O.touchPos(c.getCanvasContainer(),y),E=b.map((R=>c.unproject(R))),L=b.reduce(((R,H,K,re)=>R.add(H.div(re.length))),new a.P(0,0));super(r,{points:b,point:L,lngLats:E,lngLat:c.unproject(L),originalEvent:d}),this._defaultPrevented=!1}}class Te extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class ke{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Te(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new _e(r.type,this._map,r))}mouseup(r){this._map.fire(new _e(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new _e(r.type,this._map,r))}dblclick(r){return this._firePreventable(new _e(r.type,this._map,r))}mouseover(r){this._map.fire(new _e(r.type,this._map,r))}mouseout(r){this._map.fire(new _e(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Be(r.type,this._map,r))}touchmove(r){this._map.fire(new Be(r.type,this._map,r))}touchend(r){this._map.fire(new Be(r.type,this._map,r))}touchcancel(r){this._map.fire(new Be(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ve{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new _e(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _e("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new _e(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qe{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(a.P.convert(r),this._map.terrain)}}class Mt{constructor(r,c){this._map=r,this._tr=new qe(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(O.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=d,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const b=Math.min(y.x,d.x),E=Math.max(y.x,d.x),L=Math.min(y.y,d.y),R=Math.max(y.y,d.y);O.setTransform(this._box,`translate(${b}px,${L}px)`),this._box.style.width=E-b+"px",this._box.style.height=R-L+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const d=this._startPos,y=c;if(this.reset(),O.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:r})),{cameraAnimation:b=>b.fitScreenCoordinates(d,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new a.l(r,{originalEvent:c}))}}function Xe(w,r){if(w.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${r.length}`);const c={};for(let d=0;d<w.length;d++)c[w[d].identifier]=r[d];return c}class bt{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=(function(y){const b=new a.P(0,0);for(const E of y)b._add(E);return b.div(y.length)})(c),this.touches=Xe(d,c)))}touchmove(r,c,d){if(this.aborted||!this.centroid)return;const y=Xe(d,c);for(const b in this.touches){const E=y[b];(!E||E.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(r,c,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class It{constructor(r){this.singleTap=new bt(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,d){this.singleTap.touchstart(r,c,d)}touchmove(r,c,d){this.singleTap.touchmove(r,c,d)}touchend(r,c,d){const y=this.singleTap.touchend(r,c,d);if(y){const b=r.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(y)<30;if(b&&E||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class $t{constructor(r){this._tr=new qe(r),this._zoomIn=new It({numTouches:1,numTaps:2}),this._zoomOut=new It({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,d){this._zoomIn.touchstart(r,c,d),this._zoomOut.touchstart(r,c,d)}touchmove(r,c,d){this._zoomIn.touchmove(r,c,d),this._zoomOut.touchmove(r,c,d)}touchend(r,c,d){const y=this._zoomIn.touchend(r,c,d),b=this._zoomOut.touchend(r,c,d),E=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(y)},{originalEvent:r})}):b?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(b)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kt{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=Array.isArray(c)?c[0]:c;return!this._moved&&y.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(d,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&O.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Gt=0,qt=2,er={[Gt]:1,[qt]:2};class Jt{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=O.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!(function(c,d){const y=er[d];return c.buttons===void 0||(c.buttons&y)!==y})(r,this._eventButton)}isValidEndEvent(r){return O.mouseButton(r)===this._eventButton}}class nn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Or{constructor(r=new Jt({checkCorrectEvent:()=>!0}),c=new nn){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,d){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?d(r):void 0}startMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Bn=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=r=>{r.preventDefault()}};class Wr{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,d){return this._calculateTransform(r,c,d)}touchmove(r,c,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,c,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,d){this._calculateTransform(r,c,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,d){d.length>0&&(this._active=!0);const y=Xe(d,c),b=new a.P(0,0),E=new a.P(0,0);let L=0;for(const H in y){const K=y[H],re=this._touches[H];re&&(b._add(K),E._add(K.sub(re)),L++,y[H]=K)}if(this._touches=y,this._shouldBePrevented(L)||!E.mag())return;const R=E.div(L);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(L),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,d){if(!this._firstTwoTouches)return;r.preventDefault();const[y,b]=this._firstTwoTouches,E=Ri(d,c,y),L=Ri(d,c,b);if(!E||!L)return;const R=this._aroundCenter?null:E.add(L).div(2);return this._move([E,L],R,r)}touchend(r,c,d){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,E=Ri(d,c,y),L=Ri(d,c,b);E&&L||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ri(w,r,c){for(let d=0;d<w.length;d++)if(w[d].identifier===c)return r[d]}function Sn(w,r){return Math.log(w/r)/Math.LN2}class zr extends Nn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Sn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sn(this._distance,d),pinchAround:c}}}function Er(w,r){return 180*w.angleWith(r)/Math.PI}class di extends Nn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,d){const y=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Er(this._vector,y),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,d=Er(r,this._startVector);return Math.abs(d)<c}}function Lr(w){return Math.abs(w.y)>Math.abs(w.x)}class On extends Nn{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,d){super.touchstart(r,c,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Lr(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),b=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,d){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,b=c.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const E=r.y>0==c.y>0;return Lr(r)&&Lr(c)&&E}}const pi={panStep:100,bearingStep:15,pitchStep:10};class os{constructor(r){this._tr=new qe(r);const c=pi;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,d=0,y=0,b=0,E=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),b=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),b=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),E=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:L=>{const R=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:as,zoom:c?Math.round(R.zoom)+c*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+d*this._bearingStep,pitch:R.pitch+y*this._pitchStep,offset:[-b*this._panStep,-E*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function as(w){return w*(2-w)}const Ni=4.000244140625,xs=1/450;class bs{constructor(r,c){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new qe(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=xs}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=z(),y=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%Ni==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=O.mousePos(this._map.getCanvas(),r),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(a.V.convert(d.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const L=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=L),typeof this._targetZoom=="number"&&(this._targetZoom+=L)}if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Ni?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&R!==0&&(R=1/R);const H=typeof this._targetZoom!="number"?r.scale:a.ar(this._targetZoom);this._targetZoom=r.applyConstrain(r.getCameraLngLat(),a.au(H*R)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,d=this._startZoom,y=this._easing;let b,E=!1;if(this._type==="wheel"&&d&&y){const L=z()-this._lastWheelEventTime,R=Math.min((L+5)/200,1),H=y(R);b=a.G.number(d,c,H),R<1?this._frameId||(this._frameId=!0):E=!0}else b=c,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!E,zoomDelta:b-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=a.cz;if(this._prevEase){const d=this._prevEase,y=(z()-d.start)/d.duration,b=d.easing(y+.01)-d.easing(y),E=.27/Math.sqrt(b*b+1e-4)*.01,L=Math.sqrt(.0729-E*E);c=a.cx(E,L,.25,1)}return this._prevEase={start:z(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Qi{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class En{constructor(r){this._tr=new qe(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xn{constructor(){this._tap=new It({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,d){if(!this._swipePoint)if(this._tapTime){const y=c[0],b=r.timeStamp-this._tapTime<500,E=this._tapPoint.dist(y)<30;b&&E?d.length>0&&(this._swipePoint=y,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,c,d)}touchmove(r,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const y=c[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(r,c,d)}touchend(r,c,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const y=this._tap.touchend(r,c,d);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mr{constructor(r,c,d){this._el=r,this._mousePan=c,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class wr{constructor(r,c,d,y){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=d,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ii{constructor(r,c,d,y){this._el=r,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ji{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=O.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=c,this._container.appendChild(y);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=d,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(O.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Jn=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class li extends a.l{}function Dn(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class _i{constructor(r,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=y.type==="renderFrame"?void 0:y,L={needsRenderFrame:!1},R={},H={};for(const{handlerName:J,handler:Ae,allowed:ve}of this._handlers){if(!Ae.isEnabled())continue;let Me;if(this._blockedByActive(H,ve,J))Ae.reset();else if(Ae[b||y.type]){if(a.cA(y,b||y.type)){const Oe=O.mousePos(this._map.getCanvas(),y);Me=Ae[b||y.type](y,Oe)}else if(a.cB(y,b||y.type)){const Oe=this._getMapTouches(y.touches),Re=O.touchPos(this._map.getCanvas(),Oe);Me=Ae[b||y.type](y,Re,Oe)}else a.cC(b||y.type)||(Me=Ae[b||y.type](y));this.mergeHandlerResult(L,R,Me,J,E),Me&&Me.needsRenderFrame&&this._triggerRenderFrame()}(Me||Ae.isActive())&&(H[J]=Ae)}const K={};for(const J in this._previousActiveHandlers)H[J]||(K[J]=E);this._previousActiveHandlers=H,(Object.keys(K).length||Dn(L))&&(this._changes.push([L,R,K]),this._triggerRenderFrame()),(Object.keys(H).length||Dn(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=L;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new q(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,E]of this._listeners)O.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[r,c,d]of this._listeners)O.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new ke(c,r));const y=c.boxZoom=new Mt(c,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const b=c.cooperativeGestures=new ji(c,r.cooperativeGestures);this._add("cooperativeGestures",b),r.cooperativeGestures&&b.enable();const E=new $t(c),L=new En(c);c.doubleClickZoom=new Qi(L,E),this._add("tapZoom",E),this._add("clickZoom",L),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const R=new Xn;this._add("tapDragZoom",R);const H=c.touchPitch=new On(c);this._add("touchPitch",H),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const K=()=>c.project(c.getCenter()),re=(function({enable:We,clickTolerance:ot,aroundCenter:ht=!0,minPixelCenterThreshold:rt=100,rotateDegreesPerPixelMoved:vt=.8},Ut){const Tt=new Jt({checkCorrectEvent:Dt=>O.mouseButton(Dt)===0&&Dt.ctrlKey||O.mouseButton(Dt)===2&&!Dt.ctrlKey});return new kt({clickTolerance:ot,move:(Dt,Nt)=>{const rr=Ut();if(ht&&Math.abs(rr.y-Dt.y)>rt)return{bearingDelta:a.cy(new a.P(Dt.x,Nt.y),Nt,rr)};let cr=(Nt.x-Dt.x)*vt;return ht&&Nt.y<rr.y&&(cr=-cr),{bearingDelta:cr}},moveStateManager:Tt,enable:We,assignEvents:Bn})})(r,K),J=(function({enable:We,clickTolerance:ot,pitchDegreesPerPixelMoved:ht=-.5}){const rt=new Jt({checkCorrectEvent:vt=>O.mouseButton(vt)===0&&vt.ctrlKey||O.mouseButton(vt)===2});return new kt({clickTolerance:ot,move:(vt,Ut)=>({pitchDelta:(Ut.y-vt.y)*ht}),moveStateManager:rt,enable:We,assignEvents:Bn})})(r),Ae=(function({enable:We,clickTolerance:ot,rollDegreesPerPixelMoved:ht=.3},rt){const vt=new Jt({checkCorrectEvent:Ut=>O.mouseButton(Ut)===2&&Ut.ctrlKey});return new kt({clickTolerance:ot,move:(Ut,Tt)=>{const Dt=rt();let Nt=(Tt.x-Ut.x)*ht;return Tt.y<Dt.y&&(Nt=-Nt),{rollDelta:Nt}},moveStateManager:vt,enable:We,assignEvents:Bn})})(r,K);c.dragRotate=new wr(r,re,J,Ae),this._add("mouseRotate",re,["mousePitch"]),this._add("mousePitch",J,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ae,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const ve=(function({enable:We,clickTolerance:ot}){const ht=new Jt({checkCorrectEvent:rt=>O.mouseButton(rt)===0&&!rt.ctrlKey});return new kt({clickTolerance:ot,move:(rt,vt)=>({around:vt,panDelta:vt.sub(rt)}),activateOnStart:!0,moveStateManager:ht,enable:We,assignEvents:Bn})})(r),Me=new Wr(r,c);c.dragPan=new mr(d,ve,Me),this._add("mousePan",ve),this._add("touchPan",Me,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const Oe=new di,Re=new zr;c.touchZoomRotate=new Ii(d,Re,Oe,R),this._add("touchRotate",Oe,["touchPan","touchZoom"]),this._add("touchZoom",Re,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate),this._add("blockableMapEvent",new Ve(c));const je=c.scrollZoom=new bs(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",je,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const it=c.keyboard=new os(c);this._add("keyboard",it),r.interactive&&r.keyboard&&c.keyboard.enable()}_add(r,c,d){this._handlers.push({handlerName:r,handler:c,allowed:d}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Jn(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,d){for(const y in r)if(y!==d&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const d of r)this._el.contains(d.target)&&c.push(d);return c}mergeHandlerResult(r,c,d,y,b){if(!d)return;a.e(r,d);const E={handlerName:y,originalEvent:d.originalEvent||b};d.zoomDelta!==void 0&&(c.zoom=E),d.panDelta!==void 0&&(c.drag=E),d.rollDelta!==void 0&&(c.roll=E),d.pitchDelta!==void 0&&(c.pitch=E),d.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const r={},c={},d={};for(const[y,b,E]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new a.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(r.rollDelta=(r.rollDelta||0)+y.rollDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),a.e(c,b),a.e(d,E);this._updateMapTransform(r,c,d),this._changes=[]}_updateMapTransform(r,c,d){const y=this._map,b=y._getTransformForUpdate(),E=y.terrain;if(!(Dn(r)||E&&this._terrainMovement))return this._fireEvents(c,d,!0);y._stop(!0);let{panDelta:L,zoomDelta:R,bearingDelta:H,pitchDelta:K,rollDelta:re,around:J,pinchAround:Ae}=r;Ae!==void 0&&(J=Ae),J=J||y.transform.centerPoint,E&&!b.isPointOnMapSurface(J)&&(J=b.centerPoint);const ve={panDelta:L,zoomDelta:R,rollDelta:re,pitchDelta:K,bearingDelta:H,around:J};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(J)&&(J=b.centerPoint);const Me=J.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(L?J.sub(L):J);this._handleMapControls({terrain:E,tr:b,deltasForHelper:ve,preZoomAroundLoc:Me,combinedEventsInProgress:c,panDelta:L}),y._applyUpdatedTransform(b),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,d,!0)}_handleMapControls({terrain:r,tr:c,deltasForHelper:d,preZoomAroundLoc:y,combinedEventsInProgress:b,panDelta:E}){const L=this._map.cameraHelper;if(L.handleMapControlsRollPitchBearingZoom(d,c),r)return L.useGlobeControls?(this._terrainMovement||!b.drag&&!b.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void L.handleMapControlsPan(d,c,y)):this._terrainMovement||!b.drag&&!b.zoom?void(b.drag&&this._terrainMovement&&E?c.setCenter(c.screenPointToLocation(c.centerPoint.sub(E))):L.handleMapControlsPan(d,c,y)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void L.handleMapControlsPan(d,c,y));L.handleMapControlsPan(d,c,y)}_fireEvents(r,c,d){const y=Jn(this._eventsInProgress),b=Jn(r),E={};for(const re in r){const{originalEvent:J}=r[re];this._eventsInProgress[re]||(E[`${re}start`]=J),this._eventsInProgress[re]=r[re]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const re in E)this._fireEvent(re,E[re]);b&&this._fireEvent("move",b.originalEvent);for(const re in r){const{originalEvent:J}=r[re];this._fireEvent(re,J)}const L={};let R;for(const re in this._eventsInProgress){const{handlerName:J,originalEvent:Ae}=this._eventsInProgress[re];this._handlersById[J].isActive()||(delete this._eventsInProgress[re],R=c[J]||Ae,L[`${re}end`]=R)}for(const re in L)this._fireEvent(re,L[re]);const H=Jn(this._eventsInProgress),K=(y||b)&&!H;if(K&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const re=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&re.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(re)}if(d&&K){this._updatingCamera=!0;const re=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),J=Ae=>Ae!==0&&-this._bearingSnap<Ae&&Ae<this._bearingSnap;!re||!re.essential&&P.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:R})),J(this._map.getBearing())&&this._map.resetNorth()):(J(re.bearing||this._map.getBearing())&&(re.bearing=0),re.freezeElevation=!0,this._map.easeTo(re,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new a.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((r=>{delete this._frameId,this.handleEvent(new li("renderFrame",{timeStamp:r})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Bs extends a.E{constructor(r,c,d){super(),this._renderFrameCallback=()=>{const y=Math.min((z()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,d){return r=a.P.convert(r).mult(-1),this.panTo(this.transform.center,a.e({offset:r},c),d)}panTo(r,c,d){return this.easeTo(a.e({center:r},c),d)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,d){return this.easeTo(a.e({zoom:r},c),d)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new a.l("movestart",c)).fire(new a.l("move",c)).fire(new a.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,d){return this.easeTo(a.e({bearing:r},c),d)}resetNorth(r,c){return this.rotateTo(0,a.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=kr.convert(r).adjustAntiMeridian();const d=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,c)}_cameraForBoxAndBearing(r,c,d,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=a.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const H=y.padding;y.padding={top:H,bottom:H,right:H,left:H}}const E=a.e(b,y.padding);y.padding=E;const L=this.transform,R=new kr(r,c);return this.cameraHelper.cameraForBoxAndBearing(y,E,R,d,L)}fitBounds(r,c,d){return this._fitInternal(this.cameraForBounds(r,c),c,d)}fitScreenCoordinates(r,c,d,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(r)),this.transform.screenPointToLocation(a.P.convert(c)),d,y),y,b)}_fitInternal(r,c,d){return r?(delete(c=a.e(r,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(r,c){this.stop();const d=this._getTransformForUpdate();let y=!1,b=!1,E=!1;const L=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,r);const R=d.zoom!==L;return"elevation"in r&&d.elevation!==+r.elevation&&d.setElevation(+r.elevation),"bearing"in r&&d.bearing!==+r.bearing&&(y=!0,d.setBearing(+r.bearing)),"pitch"in r&&d.pitch!==+r.pitch&&(b=!0,d.setPitch(+r.pitch)),"roll"in r&&d.roll!==+r.roll&&(E=!0,d.setRoll(+r.roll)),r.padding==null||d.isPaddingEqual(r.padding)||d.setPadding(r.padding),this._applyUpdatedTransform(d),this.fire(new a.l("movestart",c)).fire(new a.l("move",c)),R&&this.fire(new a.l("zoomstart",c)).fire(new a.l("zoom",c)).fire(new a.l("zoomend",c)),y&&this.fire(new a.l("rotatestart",c)).fire(new a.l("rotate",c)).fire(new a.l("rotateend",c)),b&&this.fire(new a.l("pitchstart",c)).fire(new a.l("pitch",c)).fire(new a.l("pitchend",c)),E&&this.fire(new a.l("rollstart",c)).fire(new a.l("roll",c)).fire(new a.l("rollend",c)),this.fire(new a.l("moveend",c))}calculateCameraOptionsFromTo(r,c,d,y=0){const b=a.ab.fromLngLat(r,c),E=a.ab.fromLngLat(d,y),L=E.x-b.x,R=E.y-b.y,H=E.z-b.z,K=Math.hypot(L,R,H);if(K===0)throw new Error("Can't calculate camera options with same From and To");const re=Math.hypot(L,R),J=a.au(this.transform.cameraToCenterDistance/K/this.transform.tileSize),Ae=180*Math.atan2(L,-R)/Math.PI;let ve=180*Math.acos(re/K)/Math.PI;return ve=H<0?90-ve:90+ve,{center:E.toLngLat(),elevation:y,zoom:J,pitch:ve,bearing:Ae}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,d,y,b){const E=this.transform.calculateCenterFromCameraLngLatAlt(r,c,d,y);return{center:E.center,elevation:E.elevation,zoom:E.zoom,bearing:d,pitch:y,roll:b}}easeTo(r,c){this._stop(!1,r.easeId),((r=a.e({offset:[0,0],duration:500,easing:a.cz},r)).animate===!1||!r.essential&&P.prefersReducedMotion)&&(r.duration=0);const d=this._getTransformForUpdate(),y=this.getBearing(),b=d.pitch,E=d.roll,L="bearing"in r?this._normalizeBearing(r.bearing,y):y,R="pitch"in r?+r.pitch:b,H="roll"in r?this._normalizeBearing(r.roll,E):E,K="padding"in r?r.padding:d.padding,re=a.P.convert(r.offset);let J,Ae;r.around&&(J=a.V.convert(r.around),Ae=d.locationToScreenPoint(J));const ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Me=this.cameraHelper.handleEaseTo(d,{bearing:L,pitch:R,roll:H,padding:K,around:J,aroundPoint:Ae,offsetAsPoint:re,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||y!==L,this._pitching=this._pitching||R!==b,this._rolling=this._rolling||H!==E,this._padding=!d.isPaddingEqual(K),this._zooming=this._zooming||Me.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,ve),this.terrain&&this._prepareElevation(Me.elevationCenter),this._ease((Oe=>{Me.easeFunc(Oe),this.terrain&&!r.freezeElevation&&this._updateElevation(Oe),this._applyUpdatedTransform(d),this._fireMoveEvents(c)}),(Oe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Oe)}),r),this}_prepareEase(r,c,d={}){this._moving=!0,c||d.moving||this.fire(new a.l("movestart",r)),this._zooming&&!d.zooming&&this.fire(new a.l("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new a.l("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new a.l("pitchstart",r)),this._rolling&&!d.rolling&&this.fire(new a.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(c-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),d=r.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(d<y){const b=this.calculateCameraOptionsFromTo(c,y,r.center,r.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push((y=>this._elevateCameraIfInsideTerrain(y))),this.transformCameraUpdate&&c.push((y=>this.transformCameraUpdate(y))),!c.length)return;const d=r.clone();for(const y of c){const b=d.clone(),{center:E,zoom:L,roll:R,pitch:H,bearing:K,elevation:re}=y(b);E&&b.setCenter(E),re!==void 0&&b.setElevation(re),L!==void 0&&b.setZoom(L),R!==void 0&&b.setRoll(R),H!==void 0&&b.setPitch(H),K!==void 0&&b.setBearing(K),d.apply(b)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new a.l("move",r)),this._zooming&&this.fire(new a.l("zoom",r)),this._rotating&&this.fire(new a.l("rotate",r)),this._pitching&&this.fire(new a.l("pitch",r)),this._rolling&&this.fire(new a.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const d=this._zooming,y=this._rotating,b=this._pitching,E=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new a.l("zoomend",r)),y&&this.fire(new a.l("rotateend",r)),b&&this.fire(new a.l("pitchend",r)),E&&this.fire(new a.l("rollend",r)),this.fire(new a.l("moveend",r))}flyTo(r,c){if(!r.essential&&P.prefersReducedMotion){const Nt=a.U(r,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Nt,c)}this.stop(),r=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cz},r);const d=this._getTransformForUpdate(),y=d.bearing,b=d.pitch,E=d.roll,L=d.padding,R="bearing"in r?this._normalizeBearing(r.bearing,y):y,H="pitch"in r?+r.pitch:b,K="roll"in r?this._normalizeBearing(r.roll,E):E,re="padding"in r?r.padding:d.padding,J=a.P.convert(r.offset);let Ae=d.centerPoint.add(J);const ve=d.screenPointToLocation(Ae),Me=this.cameraHelper.handleFlyTo(d,{bearing:R,pitch:H,roll:K,padding:re,locationAtOffset:ve,offsetAsPoint:J,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let Oe=r.curve;const Re=Math.max(d.width,d.height),je=Re/Me.scaleOfZoom,it=Me.pixelPathLength;typeof Me.scaleOfMinZoom=="number"&&(Oe=Math.sqrt(Re/Me.scaleOfMinZoom/it*2));const We=Oe*Oe;function ot(Nt){const rr=(je*je-Re*Re+(Nt?-1:1)*We*We*it*it)/(2*(Nt?je:Re)*We*it);return Math.log(Math.sqrt(rr*rr+1)-rr)}function ht(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function rt(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const vt=ot(!1);let Ut=function(Nt){return rt(vt)/rt(vt+Oe*Nt)},Tt=function(Nt){return Re*((rt(vt)*(ht(rr=vt+Oe*Nt)/rt(rr))-ht(vt))/We)/it;var rr},Dt=(ot(!0)-vt)/Oe;if(Math.abs(it)<2e-6||!isFinite(Dt)){if(Math.abs(Re-je)<1e-6)return this.easeTo(r,c);const Nt=je<Re?-1:1;Dt=Math.abs(Math.log(je/Re))/Oe,Tt=()=>0,Ut=rr=>Math.exp(Nt*Oe*rr)}return r.duration="duration"in r?+r.duration:1e3*Dt/("screenSpeed"in r?+r.screenSpeed/Oe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=y!==R,this._pitching=H!==b,this._rolling=K!==E,this._padding=!d.isPaddingEqual(re),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Me.targetCenter),this._ease((Nt=>{const rr=Nt*Dt,cr=1/Ut(rr),tr=Tt(rr);this._rotating&&d.setBearing(a.G.number(y,R,Nt)),this._pitching&&d.setPitch(a.G.number(b,H,Nt)),this._rolling&&d.setRoll(a.G.number(E,K,Nt)),this._padding&&(d.interpolatePadding(L,re,Nt),Ae=d.centerPoint.add(J)),Me.easeFunc(Nt,cr,tr,Ae),this.terrain&&!r.freezeElevation&&this._updateElevation(Nt),this._applyUpdatedTransform(d),this._fireMoveEvents(c)}),(()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,c,d){d.animate===!1||d.duration===0?(r(1),c()):(this._easeStart=z(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=a.W(r,-180,180);const d=Math.abs(r-c);return Math.abs(r-360-c)<d&&(r-=360),Math.abs(r+360-c)<d&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLat(a.V.convert(r)):null}}const Zs={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class So{constructor(r=Zs){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const d=this._map._getUIString(`AttributionControl.${c}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map((y=>typeof y!="string"?"":y))):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.tileManagers;for(const y in c){const b=c[y];if(b.used||b.usedForTerrain){const E=b.getSource();E.attribution&&r.indexOf(E.attribution)<0&&r.push(E.attribution)}}r=r.filter((y=>String(y).trim())),r.sort(((y,b)=>y.length-b.length)),r=r.filter(((y,b)=>{for(let E=b+1;E<r.length;E++)if(r[E].indexOf(y)>=0)return!1;return!0}));const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=O.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Mi{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const d=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const c=O.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(const y of d)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const d of c)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var jn=a.aV([{name:"a_pos3d",type:"Int16",components:3}]);class wi extends a.E{constructor(r){super(),this._lastTilesetChange=z(),this.tileManager=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(r,c){this.tileManager.update(r,c),this._renderableTilesKeys=[];const d={};for(const y of In(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.tileManager._source.calculateTileZoom}))d[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),a.c8(y.terrainRttPosMatrix32f,0,a.a5,a.a5,0,0,1),this._tiles[y.key]=new zt(y,this.tileSize),this._lastTilesetChange=z());for(const y in this._tiles)d[y]||delete this._tiles[y]}freeRtt(r){for(const c in this._tiles){const d=this._tiles[c];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((r=>this.getTileByID(r)))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const d of this._renderableTilesKeys){const y=this._tiles[d].tileID,b=r.clone(),E=a.bl();if(y.canonical.equals(r.canonical))a.c8(E,0,a.a5,a.a5,0,0,1);else if(y.canonical.isChildOf(r.canonical)){const L=y.canonical.z-r.canonical.z,R=y.canonical.x-(y.canonical.x>>L<<L),H=y.canonical.y-(y.canonical.y>>L<<L),K=a.a5>>L;a.c8(E,0,K,K,0,0,1),a.O(E,E,[-R*K,-H*K,0])}else{if(!r.canonical.isChildOf(y.canonical))continue;{const L=r.canonical.z-y.canonical.z,R=r.canonical.x-(r.canonical.x>>L<<L),H=r.canonical.y-(r.canonical.y>>L<<L),K=a.a5>>L;a.c8(E,0,a.a5,a.a5,0,0,1),a.O(E,E,[R*K,H*K,0]),a.Q(E,E,[1/2**L,1/2**L,0])}}b.terrainRttPosMatrix32f=new Float32Array(E),c[d]=b}return c}_getTerrainCoordsForTileRanges(r,c){const d={};for(const y of this._renderableTilesKeys){const b=this._tiles[y].tileID;if(!this._isWithinTileRanges(b,c))continue;const E=r.clone(),L=a.bl();if(b.canonical.z===r.canonical.z){const R=r.canonical.x-b.canonical.x,H=r.canonical.y-b.canonical.y;a.c8(L,0,a.a5,a.a5,0,0,1),a.O(L,L,[R*a.a5,H*a.a5,0])}else if(b.canonical.z>r.canonical.z){const R=b.canonical.z-r.canonical.z,H=b.canonical.x-(b.canonical.x>>R<<R),K=b.canonical.y-(b.canonical.y>>R<<R),re=r.canonical.x-(b.canonical.x>>R),J=r.canonical.y-(b.canonical.y>>R),Ae=a.a5>>R;a.c8(L,0,Ae,Ae,0,0,1),a.O(L,L,[-H*Ae+re*a.a5,-K*Ae+J*a.a5,0])}else{const R=r.canonical.z-b.canonical.z,H=r.canonical.x-(r.canonical.x>>R<<R),K=r.canonical.y-(r.canonical.y>>R<<R),re=(r.canonical.x>>R)-b.canonical.x,J=(r.canonical.y>>R)-b.canonical.y,Ae=a.a5<<R;a.c8(L,0,Ae,Ae,0,0,1),a.O(L,L,[H*a.a5+re*Ae,K*a.a5+J*Ae,0])}E.terrainRttPosMatrix32f=new Float32Array(L),d[y]=E}return d}getSourceTile(r,c){const d=this.tileManager._source;let y=r.overscaledZ-this.deltaZoom;if(y>d.maxzoom&&(y=d.maxzoom),y<d.minzoom)return;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let b=this.findTileInCaches(this._sourceTileCache[r.key]);if(!b?.dem&&c)for(;y>=d.minzoom&&!b?.dem;)b=this.findTileInCaches(r.scaledTo(y--).key);return b}findTileInCaches(r){let c=this.tileManager.getTileByID(r);return c||(c=this.tileManager._outOfViewCache.getByKey(r),c)}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class Cs{constructor(r,c,d){this._meshCache={},this.painter=r,this.tileManager=new wi(c),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,d,y=a.a5){var b;if(!(c>=0&&c<y&&d>=0&&d<y))return 0;const E=this.getTerrainData(r),L=(b=E.tile)===null||b===void 0?void 0:b.dem;if(!L)return 0;const R=a.cD([],[c/y*a.a5,d/y*a.a5],E.u_terrain_matrix),H=[R[0]*L.dim,R[1]*L.dim],K=Math.floor(H[0]),re=Math.floor(H[1]),J=H[0]-K,Ae=H[1]-re;return L.get(K,re)*(1-J)*(1-Ae)+L.get(K+1,re)*J*(1-Ae)+L.get(K,re+1)*(1-J)*Ae+L.get(K+1,re+1)*J*Ae}getElevationForLngLatZoom(r,c){if(!a.cE(c,r.wrap()))return 0;const{tileID:d,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(d,y%a.a5,b%a.a5,a.a5)}getElevationForLngLat(r){return this.getElevationForLngLatZoom(r,this.tileManager.maxzoom)}getElevation(r,c,d,y=a.a5){return this.getDEMElevation(r,c,d,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,b=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(y,new a.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.as([])}const c=this.tileManager.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new a.T(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const d=c&&c+c.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const y=this.tileManager.getSource().maxzoom;let b=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?b=r.canonical.z-y:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=r.canonical.x-(r.canonical.x>>b<<b),L=r.canonical.y-(r.canonical.y>>b<<b),R=a.cF(new Float64Array(16),[1/(a.a5<<b),1/(a.a5<<b),0]);a.O(R,R,[E*a.a5,L*a.a5,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,d=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(c.context,{width:d,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(c.context,{width:d,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(d,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,d,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,E=0;b<this._coordsTextureSize;b++)for(let L=0;L<this._coordsTextureSize;L++,E+=4)c[E+0]=255&L,c[E+1]=255&b,c[E+2]=L>>8<<4|b>>8,c[E+3]=0;const d=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new a.T(r,d,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),d=this.painter.context,y=d.gl,b=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),E=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),L=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(b,L-E-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null);const R=c[0]+(c[2]>>4<<8),H=c[1]+((15&c[2])<<8),K=this.coordsIndex[255-c[3]],re=K&&this.tileManager.getTileByID(K);if(!re)return null;const J=this._coordsTextureSize,Ae=(1<<re.tileID.canonical.z)*J;return new a.ab((re.tileID.canonical.x*J+R)/Ae+re.tileID.wrap,(re.tileID.canonical.y*J+H)/Ae,this.getElevation(re.tileID,R,H,J))}depthAtPoint(r){const c=new Uint8Array(4),d=this.painter.context,y=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const d=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,y=d&&r.canonical.y===0,b=d&&r.canonical.y===(1<<r.canonical.z)-1,E=`m_${y?"n":""}_${b?"s":""}`;if(this._meshCache[E])return this._meshCache[E];const L=this.painter.context,R=new a.cG,H=new a.aZ,K=this.meshSize,re=a.a5/K,J=K*K;for(let rt=0;rt<=K;rt++)for(let vt=0;vt<=K;vt++)R.emplaceBack(vt*re,rt*re,0);for(let rt=0;rt<J;rt+=K+1)for(let vt=0;vt<K;vt++)H.emplaceBack(vt+rt,K+vt+rt+1,K+vt+rt+2),H.emplaceBack(vt+rt,K+vt+rt+2,vt+rt+1);const Ae=R.length,ve=Ae+(K+1),Me=(K+1)*K,Oe=y?a.bs:0,Re=y?0:1,je=b?a.bt:a.a5,it=b?0:1;for(let rt=0;rt<=K;rt++)R.emplaceBack(rt*re,Oe,Re);for(let rt=0;rt<=K;rt++)R.emplaceBack(rt*re,je,it);for(let rt=0;rt<K;rt++)H.emplaceBack(Me+rt,ve+rt,ve+rt+1),H.emplaceBack(Me+rt,ve+rt+1,Me+rt+1),H.emplaceBack(0+rt,Ae+rt+1,Ae+rt),H.emplaceBack(0+rt,0+rt+1,Ae+rt+1);const We=R.length,ot=We+2*(K+1);for(const rt of[0,1])for(let vt=0;vt<=K;vt++)for(const Ut of[0,1])R.emplaceBack(rt*a.a5,vt*re,Ut);for(let rt=0;rt<2*K;rt+=2)H.emplaceBack(We+rt,We+rt+1,We+rt+3),H.emplaceBack(We+rt,We+rt+3,We+rt+2),H.emplaceBack(ot+rt,ot+rt+3,ot+rt+1),H.emplaceBack(ot+rt,ot+rt+2,ot+rt+3);const ht=new ni(L.createVertexBuffer(R,jn.members),L.createIndexBuffer(H),a.aY.simpleSegment(0,0,R.length,H.length));return this._meshCache[E]=ht,ht}getMeshFrameDelta(r){return 2*Math.PI*a.bF/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var d;if(!a.cE(c,r.wrap()))return 0;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(d=this.getMinMaxElevation(y).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return c&&c.dem&&(d.minElevation=c.dem.min*this.exaggeration,d.maxElevation=c.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,c){const d=a.ab.fromLngLat(r.wrap()),y=(1<<c)*a.a5,b=d.x*y,E=d.y*y,L=Math.floor(b/a.a5),R=Math.floor(E/a.a5);return{tileID:new a.a2(c,0,c,L,R),mercatorX:b,mercatorY:E}}}class Eo{constructor(r,c,d){this._context=r,this._size=c,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(d.texture),{id:r,fbo:c,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>r.id!==c)),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((r=>!r.inUse))===!1}}const Xs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ss{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Eo(r.context,30,c.tileManager.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=r._order.filter((d=>!r._layers[d].isHidden(c))),this._coordsAscending={};for(const d in r.tileManagers){this._coordsAscending[d]={};const y=r.tileManagers[d].getVisibleCoordinates(),b=r.tileManagers[d].getSource(),E=b instanceof un?b.terrainTileRanges:null;for(const L of y){const R=this.terrain.tileManager.getTerrainCoords(L,E);for(const H in R)this._coordsAscending[d][H]||(this._coordsAscending[d][H]=[]),this._coordsAscending[d][H].push(R[H])}}this._coordsAscendingStr={};for(const d of r._order){const y=r._layers[d],b=y.source;if(Xs[y.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const E in this._coordsAscending[b])this._coordsAscendingStr[b][E]=this._coordsAscending[b][E].map((L=>L.key)).sort().join()}}for(const d of this._renderableTiles)for(const y in this._coordsAscendingStr){const b=this._coordsAscendingStr[y][d.tileID.key];b&&b!==d.rttCoords[y]&&(d.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const d=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),y=r.type,b=this.painter,E=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Xs[y]&&(this._prevType&&Xs[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(r.id),!E))return!0;if(Xs[this._prevType]||Xs[y]&&E){this._prevType=y;const L=this._stacks.length-1,R=this._stacks[L]||[];for(const H of this._renderableTiles){if(this.pool.isFull()&&(Oc(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(H),H.rtt[L]){const re=this.pool.getObjectForId(H.rtt[L].id);if(re.stamp===H.rtt[L].stamp){this.pool.useObject(re);continue}}const K=this.pool.getOrCreateFreeObject();this.pool.useObject(K),this.pool.stampObject(K),H.rtt[L]={id:K.id,stamp:K.stamp},b.context.bindFramebuffer.set(K.fbo.framebuffer),b.context.clear({color:a.bq.transparent,stencil:0}),b.currentStencilSource=void 0;for(let re=0;re<R.length;re++){const J=b.style._layers[R[re]],Ae=J.source?this._coordsAscending[J.source][H.tileID.key]:[H.tileID];b.context.viewport.set([0,0,K.fbo.width,K.fbo.height]),b._renderTileClippingMasks(J,Ae,!0),b.renderLayer(b,b.style.tileManagers[J.source],J,Ae,d),J.source&&(H.rttCoords[J.source]=this._coordsAscendingStr[J.source][H.tileID.key])}}return Oc(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),Xs[y]}return!1}}const Yi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Qa=x,Oa={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zs,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},zc={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class za{constructor(r,c,d=!1){this.mousedown=b=>{this.startMove(b,O.mousePos(this.element,b)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,O.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const y=new Or;this._rotatePitchHandler=new kt({clickTolerance:3,move:(b,E)=>{const L=c.getBoundingClientRect(),R=new a.P((L.bottom-L.top)/2,(L.right-L.left)/2);return{bearingDelta:a.cy(new a.P(b.x,E.y),E,R),pitchDelta:d?-.5*(E.y-b.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=r,O.addEventListener(c,"mousedown",this.mousedown),O.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHandler.dragStart(r,c),O.disableDrag()}move(r,c){const d=this.map,{bearingDelta:y,pitchDelta:b}=this._rotatePitchHandler.dragMove(r,c)||{};y&&d.setBearing(d.getBearing()+y),b&&d.setPitch(d.getPitch()+b)}off(){const r=this.element;O.removeEventListener(r,"mousedown",this.mousedown),O.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Nl;function OA(w,r,c,d=!1){if(d||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const y=new a.V(w.lng,w.lat);if(w=new a.V(w.lng,w.lat),r){const b=new a.V(w.lng-360,w.lat),E=new a.V(w.lng+360,w.lat),L=c.locationToScreenPoint(w).distSqr(r);c.locationToScreenPoint(b).distSqr(r)<L?w=b:c.locationToScreenPoint(E).distSqr(r)<L&&(w=E)}for(;Math.abs(w.lng-c.center.lng)>180;){const b=c.locationToScreenPoint(w);if(b.x>=0&&b.y>=0&&b.x<=c.width&&b.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==y.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:y}const mi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qo(w,r,c){const d=w.classList;for(const y in mi)d.remove(`maplibregl-${c}-anchor-${y}`);d.add(`maplibregl-${c}-anchor-${r}`)}class hA extends a.E{constructor(r){if(super(),this._onKeyPress=c=>{const d=c.code,y=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{const d=c.originalEvent.target,y=this._element;this._popup&&(d===y||y.contains(d))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=OA(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${mi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${y}`),P.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=a.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div");const c=O.createNS("http://www.w3.org/2000/svg","svg"),d=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${d}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${d}`);const b=O.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const E=O.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const L=O.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Re of R){const je=O.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",Re.rx),je.setAttributeNS(null,"ry",Re.ry),L.appendChild(je)}const H=O.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const K=O.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(K);const re=O.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"fill","#000000");const J=O.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),re.appendChild(J);const Ae=O.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");const ve=O.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Me=O.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#000000"),Me.setAttributeNS(null,"opacity","0.25"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962");const Oe=O.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#FFFFFF"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962"),ve.appendChild(Me),ve.appendChild(Oe),E.appendChild(L),E.appendChild(H),E.appendChild(re),E.appendChild(Ae),E.appendChild(ve),c.appendChild(E),c.setAttributeNS(null,"height",d*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=a.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),qo(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.V.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,d;const y=(c=this._map)===null||c===void 0?void 0:c.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!y||b){const Ae=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ae&&(this._element.style.opacity=Ae))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const E=this._map,L=E.terrain.depthAtPoint(this._pos),R=E.terrain.getElevationForLngLat(this._lngLat);if(E.transform.lngLatToCameraDepth(this._lngLat,R)-L<.006)return void(this._element.style.opacity=this._opacity);const H=-this._offset.y/E.transform.pixelsPerMeter,K=Math.sin(E.getPitch()*Math.PI/180)*H,re=E.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),J=E.transform.lngLatToCameraDepth(this._lngLat,R+K)-re>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&J&&this._popup.remove(),this._element.style.opacity=J?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=a.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const cu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ql=0,Ol=!1;const Ha={maxWidth:100,unit:"metric"};function xi(w,r,c){const d=c&&c.maxWidth||100,y=w._container.clientHeight/2,b=w._container.clientWidth/2,E=w.unproject([b-d/2,y]),L=w.unproject([b+d/2,y]),R=Math.round(w.project(L).x-w.project(E).x),H=Math.min(d,R,w._container.clientWidth),K=E.distanceTo(L);if(c&&c.unit==="imperial"){const re=3.2808*K;re>5280?ki(r,H,re/5280,w._getUIString("ScaleControl.Miles")):ki(r,H,re,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?ki(r,H,K/1852,w._getUIString("ScaleControl.NauticalMiles")):K>=1e3?ki(r,H,K/1e3,w._getUIString("ScaleControl.Kilometers")):ki(r,H,K,w._getUIString("ScaleControl.Meters"))}function ki(w,r,c,d){const y=(function(b){const E=Math.pow(10,`${Math.floor(b)}`.length-1);let L=b/E;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:(function(R){const H=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*H)/H})(L),E*L})(c);w.style.width=r*(y/c)+"px",w.innerHTML=`${y}&nbsp;${d}`}const Ji={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Hc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ja(w){if(w){if(typeof w=="number"){const r=Math.round(Math.abs(w)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,w),"top-left":new a.P(r,r),"top-right":new a.P(-r,r),bottom:new a.P(0,-w),"bottom-left":new a.P(r,-r),"bottom-right":new a.P(-r,-r),left:new a.P(w,0),right:new a.P(-w,0)}}if(w instanceof a.P||Array.isArray(w)){const r=a.P.convert(w);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.P.convert(w.center||[0,0]),top:a.P.convert(w.top||[0,0]),"top-left":a.P.convert(w["top-left"]||[0,0]),"top-right":a.P.convert(w["top-right"]||[0,0]),bottom:a.P.convert(w.bottom||[0,0]),"bottom-left":a.P.convert(w["bottom-left"]||[0,0]),"bottom-right":a.P.convert(w["bottom-right"]||[0,0]),left:a.P.convert(w.left||[0,0]),right:a.P.convert(w.right||[0,0])}}return ja(new a.P(0,0))}const jc=x;m.AJAXError=a.cJ,m.Event=a.l,m.Evented=a.E,m.LngLat=a.V,m.MercatorCoordinate=a.ab,m.Point=a.P,m.addProtocol=a.cK,m.config=a.c,m.removeProtocol=a.cL,m.AttributionControl=So,m.BoxZoomHandler=Mt,m.CanvasSource=he,m.CooperativeGesturesHandler=ji,m.DoubleClickZoomHandler=Qi,m.DragPanHandler=mr,m.DragRotateHandler=wr,m.EdgeInsets=Ca,m.FullscreenControl=class extends a.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=Qn,m.GeolocateControl=class extends a.E{constructor(w){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new a.V(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,y=this._map.getBearing(),b=a.e({bearing:y},this.options.fitBoundsOptions),E=kr.fromLngLat(c,d);this._map.fitBounds(E,b,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new a.V(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ol)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new hA({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new hA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const d=c?.[0]instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},cu,w)}onAdd(w){return this._map=w,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(r=!1){if(Nl!==void 0&&!r)return Nl;if(window.navigator.permissions===void 0)return Nl=!!window.navigator.geolocation,Nl;try{Nl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Nl=!!window.navigator.geolocation}return Nl}))})().then((r=>this._finishSetupUI(r))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Ql=0,Ol=!1}_isOutOfMapMaxBounds(w){const r=this._map.getMaxBounds(),c=w.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const r=this._map.project(w),c=this._map.unproject([r.x+100,r.y]),d=w.distanceTo(c)/100,y=2*this._accuracy/d;this._circleElement.style.width=`${y.toFixed(2)}px`,this._circleElement.style.height=`${y.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ql--,Ol=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ql++,Ql>1?(w={maximumAge:6e5,timeout:0},Ol=!0):(w=this.options.positionOptions,Ol=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const r=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=O.create("button","maplibregl-ctrl-globe",this._container),O.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=uA,m.ImageSource=un,m.KeyboardHandler=os,m.LngLatBounds=kr,m.LogoControl=Mi,m.Map=class extends Bs{constructor(w){var r,c;a.cH.mark(a.cI.create);const d=Object.assign(Object.assign(Object.assign({},Oa),w),{canvasContextAttributes:Object.assign(Object.assign({},Oa.canvasContextAttributes),w.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new ll,b=new Aa;if(d.minZoom!==void 0&&y.setMinZoom(d.minZoom),d.maxZoom!==void 0&&y.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&y.setMinPitch(d.minPitch),d.maxPitch!==void 0&&y.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&y.setRenderWorldCopies(d.renderWorldCopies),d.transformConstrain!==null&&y.setConstrainOverride(d.transformConstrain),super(y,b,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Fn,this._controls=[],this._mapId=a.ah(),this._lostContextStyle={style:null,images:null},this._contextLost=L=>{L.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const R of Object.values(this.style._layers))if(R.type==="custom"&&console.warn(`Custom layer with id '${R.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),R._listeners)for(const[H]of Object.entries(R._listeners))console.warn(`Custom layer with id '${R.id}' had event listeners for event '${H}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:L}))},this._contextRestored=L=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:L}))},this._onMapScroll=L=>{if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Yi),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this._zoomLevelsToOverscale=d.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=d.transformCameraUpdate,this.transformConstrain=d.transformConstrain,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,d.reduceMotion!==void 0&&(P.prefersReducedMotion=d.reduceMotion),this._imageQueueHandle=Ze.addThrottleControl((()=>this.isMoving())),this._requestManager=new Qe(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let L=!1;const R=Du((H=>{this._trackResize&&!this._removed&&(this.resize(H),this.redraw())}),50);this._resizeObserver=new ResizeObserver((H=>{L?R(H):L=!0})),this._resizeObserver.observe(this._container)}this.handlers=new _i(this,d),this._hash=d.hash&&new uA(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.e({},d.fitBoundsOptions,{duration:0}))));const E=typeof d.style=="string"||((c=(r=d.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,E),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new So(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new Mi,d.logoPosition),this.on("style.load",(()=>{if(E||this._resizeTransform(),this.transform.unmodified){const L=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(L)}})),this.on("data",(L=>{this._update(L.dataType==="style"),this.fire(new a.l(`${L.dataType}data`,L))})),this.on("dataloading",(L=>{this.fire(new a.l(`${L.dataType}dataloading`,L))})),this.on("dataabort",(L=>{this.fire(new a.l("sourcedataabort",L))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,r){return this.style.setGlobalStateProperty(w,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,r){if(r===void 0&&(r=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(w);return r>-1&&this._controls.splice(r,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return In(this.transform,w)}calculateCameraOptionsFromTo(w,r,c,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLat(c)),super.calculateCameraOptionsFromTo(w,r,c,d)}resize(w,r=!0){const[c,d]=this._containerDimensions(),y=this._getClampedPixelRatio(c,d);if(this._resizeCanvas(c,d,y),this.painter.resize(c,d,y),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const L=this._getClampedPixelRatio(c,d);this._resizeCanvas(c,d,L),this.painter.resize(c,d,L)}this._resizeTransform(r);const b=!this._moving;return b&&(this.stop(),this.fire(new a.l("movestart",w)).fire(new a.l("move",w))),this.fire(new a.l("resize",w)),b&&this.fire(new a.l("moveend",w)),this}_resizeTransform(w=!0){var r;const[c,d]=this._containerDimensions();this.transform.resize(c,d,w),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,d,w)}_getClampedPixelRatio(w,r){const{0:c,1:d}=this._maxCanvasSize,y=this.getPixelRatio(),b=w*y,E=r*y;return Math.min(b>c?c/b:1,E>d?d/E:1)*y}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(kr.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(a.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(a.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,r,c){if(w==="mouseenter"||w==="mouseover"){let d=!1;return{layers:r,listener:c,delegates:{mousemove:b=>{const E=r.filter((R=>this.getLayer(R))),L=E.length!==0?this.queryRenderedFeatures(b.point,{layers:E}):[];L.length?d||(d=!0,c.call(this,new _e(w,this,b.originalEvent,{features:L}))):d=!1},mouseout:()=>{d=!1}}}}if(w==="mouseleave"||w==="mouseout"){let d=!1;return{layers:r,listener:c,delegates:{mousemove:E=>{const L=r.filter((R=>this.getLayer(R)));(L.length!==0?this.queryRenderedFeatures(E.point,{layers:L}):[]).length?d=!0:d&&(d=!1,c.call(this,new _e(w,this,E.originalEvent)))},mouseout:E=>{d&&(d=!1,c.call(this,new _e(w,this,E.originalEvent)))}}}}{const d=y=>{const b=r.filter((L=>this.getLayer(L))),E=b.length!==0?this.queryRenderedFeatures(y.point,{layers:b}):[];E.length&&(y.features=E,c.call(this,y),delete y.features)};return{layers:r,listener:c,delegates:{[w]:d}}}}_saveDelegatedListener(w,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(r)}_removeDelegatedListener(w,r,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const d=this._delegatedListeners[w];for(let y=0;y<d.length;y++){const b=d[y];if(b.listener===c&&b.layers.length===r.length&&b.layers.every((E=>r.includes(E)))){for(const E in b.delegates)this.off(E,b.delegates[E]);return void d.splice(y,1)}}}on(w,r,c){if(c===void 0)return super.on(w,r);const d=typeof r=="string"?[r]:r,y=this._createDelegatedListener(w,d,c);this._saveDelegatedListener(w,y);for(const b in y.delegates)this.on(b,y.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(w,d,c)}}}once(w,r,c){if(c===void 0)return super.once(w,r);const d=typeof r=="string"?[r]:r,y=this._createDelegatedListener(w,d,c);for(const b in y.delegates){const E=y.delegates[b];y.delegates[b]=(...L)=>{this._removeDelegatedListener(w,d,c),E(...L)}}this._saveDelegatedListener(w,y);for(const b in y.delegates)this.once(b,y.delegates[b]);return this}off(w,r,c){return c===void 0?super.off(w,r):(this._removeDelegatedListener(w,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(w,r){if(!this.style)return[];let c;const d=w instanceof a.P||Array.isArray(w),y=d?w:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:w)||{},y instanceof a.P||typeof y[0]=="number")c=[a.P.convert(y)];else{const b=a.P.convert(y[0]),E=a.P.convert(y[1]);c=[b,new a.P(E.x,b.y),E,new a.P(b.x,E.y),b]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(w,r){return this.style.querySourceFeatures(w,r)}setStyle(w,r){return(r=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(w,r))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const r=this._locale[w];if(r==null)throw new Error(`Missing UI string '${w}'`);return r}_updateStyle(w,r){var c,d;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,r)));const y=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Zi(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,r,y):this.style.loadJSON(w,r,y),this):((d=(c=this.style)===null||c===void 0?void 0:c.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Zi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,r){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");a.j(c,new AbortController).then((d=>{this._updateDiff(d.data,r)})).catch((d=>{d&&this.fire(new a.k(d))}))}else typeof w=="object"&&this._updateDiff(w,r)}_updateDiff(w,r){try{this.style.setState(w,r)&&this._update(!0)}catch(c){a.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,r)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(w,r){return this._lazyInitEmptyStyle(),this.style.addSource(w,r),this._update(!0)}isSourceLoaded(w){const r=this.style&&this.style.tileManagers[w];if(r!==void 0)return r.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const r=this.style.tileManagers[w.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const d=this.style._layers[c];d.type==="hillshade"&&d.source===w.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),d.type==="color-relief"&&d.source===w.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Cs(this.painter,r,w),this.painter.renderToTexture=new Ss(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var d;c.dataType==="style"?this.terrain.tileManager.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=c.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:w})),this}getTerrain(){var w,r;return(r=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const r of Object.values(w))if(!r.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,r,c){if(c){const d=this.getSource(c);if(!d)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);d.calculateTileZoom=Gr(Math.max(1,w),Math.max(1,r))}else for(const d in this.style.tileManagers)this.style.tileManagers[d].getSource().calculateTileZoom=Gr(Math.max(1,w),Math.max(1,r));return this._update(!0),this}refreshTiles(w,r){const c=this.style.tileManagers[w];if(!c)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);r===void 0?c.reload(!0):c.refreshTiles(r.map((d=>new a.ae(d.z,d.x,d.y))))}addImage(w,r,c={}){const{pixelRatio:d=1,sdf:y=!1,stretchX:b,stretchY:E,content:L,textFitWidth:R,textFitHeight:H}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||a.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:K,height:re,data:J}=r,Ae=r;return this.style.addImage(w,{data:new a.R({width:K,height:re},new Uint8Array(J)),pixelRatio:d,stretchX:b,stretchY:E,content:L,textFitWidth:R,textFitHeight:H,sdf:y,version:0,userImage:Ae}),Ae.onAdd&&Ae.onAdd(this,w),this}}{const{width:K,height:re,data:J}=P.getImageData(r);this.style.addImage(w,{data:new a.R({width:K,height:re},J),pixelRatio:d,stretchX:b,stretchY:E,content:L,textFitWidth:R,textFitHeight:H,sdf:y,version:0})}}updateImage(w,r){const c=this.style.getImage(w);if(!c)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||a.b(r)?P.getImageData(r):r,{width:y,height:b,data:E}=d;if(y===void 0||b===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||b!==c.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(r instanceof HTMLImageElement||a.b(r));return c.data.replace(E,L),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return Ze.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,r){return this._lazyInitEmptyStyle(),this.style.addLayer(w,r),this._update(!0)}moveLayer(w,r){return this.style.moveLayer(w,r),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,r,c){return this.style.setLayerZoomRange(w,r,c),this._update(!0)}setFilter(w,r,c={}){return this.style.setFilter(w,r,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,r,c,d={}){return this.style.setPaintProperty(w,r,c,d),this._update(!0)}getPaintProperty(w,r){return this.style.getPaintProperty(w,r)}setLayoutProperty(w,r,c,d={}){return this.style.setLayoutProperty(w,r,c,d),this._update(!0)}getLayoutProperty(w,r){return this.style.getLayoutProperty(w,r)}setGlyphs(w,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,r,c,(d=>{d||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,r,(c=>{c||this._update(!0)})),this}setLight(w,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,r){return this.style.setFeatureState(w,r),this._update()}removeFeatureState(w,r){return this.style.removeFeatureState(w,r),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,r=0;return this._container&&(w=this._container.clientWidth||400,r=this._container.clientHeight||300),[w,r]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const r=this._canvasContainer=O.create("div","maplibregl-canvas-container",w);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),d=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],d);const y=this._controlContainer=O.create("div","maplibregl-control-container",w),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((E=>{b[E]=O.create("div",`maplibregl-ctrl-${E} `,y)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,r,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",(d=>{r={requestedAttributes:w},d&&(r.statusMessage=d.statusMessage,r.type=d.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new lu(c,this.transform),W.testSupport(c)}migrateProjection(w,r){super.migrateProjection(w,r),this.painter.transform=w,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var r,c,d,y,b;const E=this._idleTriggered?this._fadeDuration:0,L=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const re=this.transform.zoom,J=z();this.style.zoomHistory.update(re,J);const Ae=new a.H(re,{now:J,fadeDuration:E,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ve=Ae.crossFadingFactor();ve===1&&ve===this._crossFadingFactor||(R=!0,this._crossFadingFactor=ve),this.style.update(Ae)}const H=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==L;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||H)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,E,this._crossSourceCollisions,H),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cH.mark(a.cI.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const K=this._sourcesDirty||this._styleDirty||this._placementDirty;return K||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||K||(this._fullyLoaded=!0,a.cH.mark(a.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ze.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cH.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,(w=>{a.cH.frame(w),this._frameRequest=null;try{this._render(w)}catch(r){if(!a.Z(r)&&!(function(c){return c.message===lc})(r))throw r}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Qa}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},m.MapMouseEvent=_e,m.MapTouchEvent=Be,m.MapWheelEvent=Te,m.Marker=hA,m.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const d=this._map._getUIString(`NavigationControl.${c}`);r.title=d,r.setAttribute("aria-label",d)},this.options=a.e({},zc,w),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(r=>this._map.zoomIn({},{originalEvent:r}))),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(r=>this._map.zoomOut({},{originalEvent:r}))),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})})),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new za(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,r){const c=O.create("button",w,this._container);return c.type="button",c.addEventListener("click",r),c}},m.Popup=class extends a.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=OA(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor;const y=ja(this.options.offset);if(!d){const E=this._container.offsetWidth,L=this._container.offsetHeight;let R;R=c.y+y.bottom.y<L?["top"]:c.y>this._map.transform.height-L?["bottom"]:[],c.x<E/2?R.push("left"):c.x>this._map.transform.width-E/2&&R.push("right"),d=R.length===0?"bottom":R.join("-")}let b=c.add(y[d]);this.options.subpixelPositioning||(b=b.round()),O.setTransform(this._container,`${mi[d]} translate(${b.x}px,${b.y}px)`),qo(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Ji),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=a.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const r=document.createDocumentFragment(),c=document.createElement("body");let d;for(c.innerHTML=w;d=c.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Hc);w&&w.focus()}},m.RasterDEMTileSource=Sr,m.RasterTileSource=$r,m.ScaleControl=class{constructor(w){this._onMove=()=>{xi(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,xi(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ha),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=bs,m.Style=Zi,m.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=On,m.TwoFingersTouchRotateHandler=di,m.TwoFingersTouchZoomHandler=zr,m.TwoFingersTouchZoomRotateHandler=Ii,m.VectorTileSource=or,m.VideoSource=ft,m.addSourceType=(w,r)=>a._(void 0,void 0,void 0,(function*(){if(ye(w))throw new Error(`A source type called "${w}" already exists.`);((c,d)=>{fe[c]=d})(w,r)})),m.clearPrewarmedResources=function(){const w=tt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(De),tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=j,m.getMaxParallelImageRequests=function(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return gt().getRTLTextPluginStatus()},m.getVersion=function(){return jc},m.getWorkerCount=function(){return Ye.workerCount},m.getWorkerUrl=function(){return a.c.WORKER_URL},m.importScriptInWorkers=function(w){return Wt().broadcast("IS",w)},m.isTimeFrozen=function(){return $.isFrozen()},m.now=z,m.prewarm=function(){Et().acquire(De)},m.restoreNow=function(){$.restoreNow()},m.setMaxParallelImageRequests=function(w){a.c.MAX_PARALLEL_IMAGE_REQUESTS=w},m.setNow=function(w){$.setNow(w)},m.setRTLTextPlugin=function(w,r){return gt().setRTLTextPlugin(w,r)},m.setWorkerCount=function(w){Ye.workerCount=w},m.setWorkerUrl=function(w){a.c.WORKER_URL=w}}));var f=i;return f}))})(L0)),L0.exports}var cN=lN();const $f=mw(cN);function M0(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function AN(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function LF(e){let n,i,l;e.length!==2?(n=M0,i=(a,x)=>M0(e(a),x),l=(a,x)=>e(a)-x):(n=e===M0||e===AN?e:uN,i=e,l=e);function h(a,x,S=0,I=a.length){if(S<I){if(n(x,x)!==0)return I;do{const U=S+I>>>1;i(a[U],x)<0?S=U+1:I=U}while(S<I)}return S}function f(a,x,S=0,I=a.length){if(S<I){if(n(x,x)!==0)return I;do{const U=S+I>>>1;i(a[U],x)<=0?S=U+1:I=U}while(S<I)}return S}function m(a,x,S=0,I=a.length){const U=h(a,x,S,I-1);return U>S&&l(a[U-1],x)>-l(a[U],x)?U-1:U}return{left:h,center:m,right:f}}function uN(){return 0}function hN(e){return e===null?NaN:+e}const fN=LF(M0),dN=fN.right;LF(hN).center;const pN=Math.sqrt(50),mN=Math.sqrt(10),gN=Math.sqrt(2);function Y0(e,n,i){const l=(n-e)/Math.max(0,i),h=Math.floor(Math.log10(l)),f=l/Math.pow(10,h),m=f>=pN?10:f>=mN?5:f>=gN?2:1;let a,x,S;return h<0?(S=Math.pow(10,-h)/m,a=Math.round(e*S),x=Math.round(n*S),a/S<e&&++a,x/S>n&&--x,S=-S):(S=Math.pow(10,h)*m,a=Math.round(e/S),x=Math.round(n/S),a*S<e&&++a,x*S>n&&--x),x<a&&.5<=i&&i<2?Y0(e,n,i*2):[a,x,S]}function yN(e,n,i){if(n=+n,e=+e,i=+i,!(i>0))return[];if(e===n)return[e];const l=n<e,[h,f,m]=l?Y0(n,e,i):Y0(e,n,i);if(!(f>=h))return[];const a=f-h+1,x=new Array(a);if(l)if(m<0)for(let S=0;S<a;++S)x[S]=(f-S)/-m;else for(let S=0;S<a;++S)x[S]=(f-S)*m;else if(m<0)for(let S=0;S<a;++S)x[S]=(h+S)/-m;else for(let S=0;S<a;++S)x[S]=(h+S)*m;return x}function L1(e,n,i){return n=+n,e=+e,i=+i,Y0(e,n,i)[2]}function vN(e,n,i){n=+n,e=+e,i=+i;const l=n<e,h=l?L1(n,e,i):L1(e,n,i);return(l?-1:1)*(h<0?1/-h:h)}function _N(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function Ww(e,n,i){e.prototype=n.prototype=i,i.constructor=e}function MF(e,n){var i=Object.create(e.prototype);for(var l in n)i[l]=n[l];return i}function Wm(){}var Mm=.7,J0=1/Mm,ap="\\s*([+-]?\\d+)\\s*",km="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ju="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wN=/^#([0-9a-f]{3,8})$/,xN=new RegExp(`^rgb\\(${ap},${ap},${ap}\\)$`),bN=new RegExp(`^rgb\\(${Ju},${Ju},${Ju}\\)$`),BN=new RegExp(`^rgba\\(${ap},${ap},${ap},${km}\\)$`),CN=new RegExp(`^rgba\\(${Ju},${Ju},${Ju},${km}\\)$`),SN=new RegExp(`^hsl\\(${km},${Ju},${Ju}\\)$`),EN=new RegExp(`^hsla\\(${km},${Ju},${Ju},${km}\\)$`),H2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ww(Wm,Um,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:j2,formatHex:j2,formatHex8:FN,formatHsl:IN,formatRgb:V2,toString:V2});function j2(){return this.rgb().formatHex()}function FN(){return this.rgb().formatHex8()}function IN(){return kF(this).formatHsl()}function V2(){return this.rgb().formatRgb()}function Um(e){var n,i;return e=(e+"").trim().toLowerCase(),(n=wN.exec(e))?(i=n[1].length,n=parseInt(n[1],16),i===6?G2(n):i===3?new Xc(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):i===8?Kg(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):i===4?Kg(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=xN.exec(e))?new Xc(n[1],n[2],n[3],1):(n=bN.exec(e))?new Xc(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=BN.exec(e))?Kg(n[1],n[2],n[3],n[4]):(n=CN.exec(e))?Kg(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=SN.exec(e))?$2(n[1],n[2]/100,n[3]/100,1):(n=EN.exec(e))?$2(n[1],n[2]/100,n[3]/100,n[4]):H2.hasOwnProperty(e)?G2(H2[e]):e==="transparent"?new Xc(NaN,NaN,NaN,0):null}function G2(e){return new Xc(e>>16&255,e>>8&255,e&255,1)}function Kg(e,n,i,l){return l<=0&&(e=n=i=NaN),new Xc(e,n,i,l)}function TN(e){return e instanceof Wm||(e=Um(e)),e?(e=e.rgb(),new Xc(e.r,e.g,e.b,e.opacity)):new Xc}function M1(e,n,i,l){return arguments.length===1?TN(e):new Xc(e,n,i,l??1)}function Xc(e,n,i,l){this.r=+e,this.g=+n,this.b=+i,this.opacity=+l}Ww(Xc,M1,MF(Wm,{brighter(e){return e=e==null?J0:Math.pow(J0,e),new Xc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mm:Math.pow(Mm,e),new Xc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xc(Xf(this.r),Xf(this.g),Xf(this.b),ey(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K2,formatHex:K2,formatHex8:PN,formatRgb:q2,toString:q2}));function K2(){return`#${Wf(this.r)}${Wf(this.g)}${Wf(this.b)}`}function PN(){return`#${Wf(this.r)}${Wf(this.g)}${Wf(this.b)}${Wf((isNaN(this.opacity)?1:this.opacity)*255)}`}function q2(){const e=ey(this.opacity);return`${e===1?"rgb(":"rgba("}${Xf(this.r)}, ${Xf(this.g)}, ${Xf(this.b)}${e===1?")":`, ${e})`}`}function ey(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wf(e){return e=Xf(e),(e<16?"0":"")+e.toString(16)}function $2(e,n,i,l){return l<=0?e=n=i=NaN:i<=0||i>=1?e=n=NaN:n<=0&&(e=NaN),new Bu(e,n,i,l)}function kF(e){if(e instanceof Bu)return new Bu(e.h,e.s,e.l,e.opacity);if(e instanceof Wm||(e=Um(e)),!e)return new Bu;if(e instanceof Bu)return e;e=e.rgb();var n=e.r/255,i=e.g/255,l=e.b/255,h=Math.min(n,i,l),f=Math.max(n,i,l),m=NaN,a=f-h,x=(f+h)/2;return a?(n===f?m=(i-l)/a+(i<l)*6:i===f?m=(l-n)/a+2:m=(n-i)/a+4,a/=x<.5?f+h:2-f-h,m*=60):a=x>0&&x<1?0:m,new Bu(m,a,x,e.opacity)}function LN(e,n,i,l){return arguments.length===1?kF(e):new Bu(e,n,i,l??1)}function Bu(e,n,i,l){this.h=+e,this.s=+n,this.l=+i,this.opacity=+l}Ww(Bu,LN,MF(Wm,{brighter(e){return e=e==null?J0:Math.pow(J0,e),new Bu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mm:Math.pow(Mm,e),new Bu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,l=i+(i<.5?i:1-i)*n,h=2*i-l;return new Xc(A_(e>=240?e-240:e+120,h,l),A_(e,h,l),A_(e<120?e+240:e-120,h,l),this.opacity)},clamp(){return new Bu(W2(this.h),qg(this.s),qg(this.l),ey(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ey(this.opacity);return`${e===1?"hsl(":"hsla("}${W2(this.h)}, ${qg(this.s)*100}%, ${qg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W2(e){return e=(e||0)%360,e<0?e+360:e}function qg(e){return Math.max(0,Math.min(1,e||0))}function A_(e,n,i){return(e<60?n+(i-n)*e/60:e<180?i:e<240?n+(i-n)*(240-e)/60:n)*255}const Zw=e=>()=>e;function MN(e,n){return function(i){return e+i*n}}function kN(e,n,i){return e=Math.pow(e,i),n=Math.pow(n,i)-e,i=1/i,function(l){return Math.pow(e+l*n,i)}}function UN(e){return(e=+e)==1?UF:function(n,i){return i-n?kN(n,i,e):Zw(isNaN(n)?i:n)}}function UF(e,n){var i=n-e;return i?MN(e,i):Zw(isNaN(e)?n:e)}const Z2=(function e(n){var i=UN(n);function l(h,f){var m=i((h=M1(h)).r,(f=M1(f)).r),a=i(h.g,f.g),x=i(h.b,f.b),S=UF(h.opacity,f.opacity);return function(I){return h.r=m(I),h.g=a(I),h.b=x(I),h.opacity=S(I),h+""}}return l.gamma=e,l})(1);function DN(e,n){n||(n=[]);var i=e?Math.min(n.length,e.length):0,l=n.slice(),h;return function(f){for(h=0;h<i;++h)l[h]=e[h]*(1-f)+n[h]*f;return l}}function RN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function NN(e,n){var i=n?n.length:0,l=e?Math.min(i,e.length):0,h=new Array(l),f=new Array(i),m;for(m=0;m<l;++m)h[m]=Xw(e[m],n[m]);for(;m<i;++m)f[m]=n[m];return function(a){for(m=0;m<l;++m)f[m]=h[m](a);return f}}function QN(e,n){var i=new Date;return e=+e,n=+n,function(l){return i.setTime(e*(1-l)+n*l),i}}function ty(e,n){return e=+e,n=+n,function(i){return e*(1-i)+n*i}}function ON(e,n){var i={},l={},h;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(h in n)h in e?i[h]=Xw(e[h],n[h]):l[h]=n[h];return function(f){for(h in i)l[h]=i[h](f);return l}}var k1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,u_=new RegExp(k1.source,"g");function zN(e){return function(){return e}}function HN(e){return function(n){return e(n)+""}}function jN(e,n){var i=k1.lastIndex=u_.lastIndex=0,l,h,f,m=-1,a=[],x=[];for(e=e+"",n=n+"";(l=k1.exec(e))&&(h=u_.exec(n));)(f=h.index)>i&&(f=n.slice(i,f),a[m]?a[m]+=f:a[++m]=f),(l=l[0])===(h=h[0])?a[m]?a[m]+=h:a[++m]=h:(a[++m]=null,x.push({i:m,x:ty(l,h)})),i=u_.lastIndex;return i<n.length&&(f=n.slice(i),a[m]?a[m]+=f:a[++m]=f),a.length<2?x[0]?HN(x[0].x):zN(n):(n=x.length,function(S){for(var I=0,U;I<n;++I)a[(U=x[I]).i]=U.x(S);return a.join("")})}function Xw(e,n){var i=typeof n,l;return n==null||i==="boolean"?Zw(n):(i==="number"?ty:i==="string"?(l=Um(n))?(n=l,Z2):jN:n instanceof Um?Z2:n instanceof Date?QN:RN(n)?DN:Array.isArray(n)?NN:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?ON:ty)(e,n)}function VN(e,n){return e=+e,n=+n,function(i){return Math.round(e*(1-i)+n*i)}}function GN(e){return function(){return e}}function KN(e){return+e}var X2=[0,1];function tp(e){return e}function U1(e,n){return(n-=e=+e)?function(i){return(i-e)/n}:GN(isNaN(n)?NaN:.5)}function qN(e,n){var i;return e>n&&(i=e,e=n,n=i),function(l){return Math.max(e,Math.min(n,l))}}function $N(e,n,i){var l=e[0],h=e[1],f=n[0],m=n[1];return h<l?(l=U1(h,l),f=i(m,f)):(l=U1(l,h),f=i(f,m)),function(a){return f(l(a))}}function WN(e,n,i){var l=Math.min(e.length,n.length)-1,h=new Array(l),f=new Array(l),m=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++m<l;)h[m]=U1(e[m],e[m+1]),f[m]=i(n[m],n[m+1]);return function(a){var x=dN(e,a,1,l)-1;return f[x](h[x](a))}}function ZN(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function XN(){var e=X2,n=X2,i=Xw,l,h,f,m=tp,a,x,S;function I(){var Q=Math.min(e.length,n.length);return m!==tp&&(m=qN(e[0],e[Q-1])),a=Q>2?WN:$N,x=S=null,U}function U(Q){return Q==null||isNaN(Q=+Q)?f:(x||(x=a(e.map(l),n,i)))(l(m(Q)))}return U.invert=function(Q){return m(h((S||(S=a(n,e.map(l),ty)))(Q)))},U.domain=function(Q){return arguments.length?(e=Array.from(Q,KN),I()):e.slice()},U.range=function(Q){return arguments.length?(n=Array.from(Q),I()):n.slice()},U.rangeRound=function(Q){return n=Array.from(Q),i=VN,I()},U.clamp=function(Q){return arguments.length?(m=Q?!0:tp,I()):m!==tp},U.interpolate=function(Q){return arguments.length?(i=Q,I()):i},U.unknown=function(Q){return arguments.length?(f=Q,U):f},function(Q,P){return l=Q,h=P,I()}}function YN(){return XN()(tp,tp)}function JN(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ry(e,n){if((i=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var i,l=e.slice(0,i);return[l.length>1?l[0]+l.slice(2):l,+e.slice(i+1)]}function mp(e){return e=ry(Math.abs(e)),e?e[1]:NaN}function e6(e,n){return function(i,l){for(var h=i.length,f=[],m=0,a=e[0],x=0;h>0&&a>0&&(x+a+1>l&&(a=Math.max(1,l-x)),f.push(i.substring(h-=a,h+a)),!((x+=a+1)>l));)a=e[m=(m+1)%e.length];return f.reverse().join(n)}}function t6(e){return function(n){return n.replace(/[0-9]/g,function(i){return e[+i]})}}var r6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ny(e){if(!(n=r6.exec(e)))throw new Error("invalid format: "+e);var n;return new Yw({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}ny.prototype=Yw.prototype;function Yw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function n6(e){e:for(var n=e.length,i=1,l=-1,h;i<n;++i)switch(e[i]){case".":l=h=i;break;case"0":l===0&&(l=i),h=i;break;default:if(!+e[i])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(h+1):e}var DF;function i6(e,n){var i=ry(e,n);if(!i)return e+"";var l=i[0],h=i[1],f=h-(DF=Math.max(-8,Math.min(8,Math.floor(h/3)))*3)+1,m=l.length;return f===m?l:f>m?l+new Array(f-m+1).join("0"):f>0?l.slice(0,f)+"."+l.slice(f):"0."+new Array(1-f).join("0")+ry(e,Math.max(0,n+f-1))[0]}function Y2(e,n){var i=ry(e,n);if(!i)return e+"";var l=i[0],h=i[1];return h<0?"0."+new Array(-h).join("0")+l:l.length>h+1?l.slice(0,h+1)+"."+l.slice(h+1):l+new Array(h-l.length+2).join("0")}const J2={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:JN,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>Y2(e*100,n),r:Y2,s:i6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function eB(e){return e}var tB=Array.prototype.map,rB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function s6(e){var n=e.grouping===void 0||e.thousands===void 0?eB:e6(tB.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",h=e.decimal===void 0?".":e.decimal+"",f=e.numerals===void 0?eB:t6(tB.call(e.numerals,String)),m=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",x=e.nan===void 0?"NaN":e.nan+"";function S(U){U=ny(U);var Q=U.fill,P=U.align,$=U.sign,z=U.symbol,O=U.zero,W=U.width,ne=U.comma,ce=U.precision,de=U.trim,Se=U.type;Se==="n"?(ne=!0,Se="g"):J2[Se]||(ce===void 0&&(ce=12),de=!0,Se="g"),(O||Q==="0"&&P==="=")&&(O=!0,Q="0",P="=");var ze=z==="$"?i:z==="#"&&/[boxX]/.test(Se)?"0"+Se.toLowerCase():"",Ze=z==="$"?l:/[%p]/.test(Se)?m:"",Qe=J2[Se],be=/[defgprs%]/.test(Se);ce=ce===void 0?6:/[gprs]/.test(Se)?Math.max(1,Math.min(21,ce)):Math.max(0,Math.min(20,ce));function Ge(le){var ge=ze,Pe=Ze,Fe,pt,ut;if(Se==="c")Pe=Qe(le)+Pe,le="";else{le=+le;var At=le<0||1/le<0;if(le=isNaN(le)?x:Qe(Math.abs(le),ce),de&&(le=n6(le)),At&&+le==0&&$!=="+"&&(At=!1),ge=(At?$==="("?$:a:$==="-"||$==="("?"":$)+ge,Pe=(Se==="s"?rB[8+DF/3]:"")+Pe+(At&&$==="("?")":""),be){for(Fe=-1,pt=le.length;++Fe<pt;)if(ut=le.charCodeAt(Fe),48>ut||ut>57){Pe=(ut===46?h+le.slice(Fe+1):le.slice(Fe))+Pe,le=le.slice(0,Fe);break}}}ne&&!O&&(le=n(le,1/0));var Ne=ge.length+le.length+Pe.length,Ie=Ne<W?new Array(W-Ne+1).join(Q):"";switch(ne&&O&&(le=n(Ie+le,Ie.length?W-Pe.length:1/0),Ie=""),P){case"<":le=ge+le+Pe+Ie;break;case"=":le=ge+Ie+le+Pe;break;case"^":le=Ie.slice(0,Ne=Ie.length>>1)+ge+le+Pe+Ie.slice(Ne);break;default:le=Ie+ge+le+Pe;break}return f(le)}return Ge.toString=function(){return U+""},Ge}function I(U,Q){var P=S((U=ny(U),U.type="f",U)),$=Math.max(-8,Math.min(8,Math.floor(mp(Q)/3)))*3,z=Math.pow(10,-$),O=rB[8+$/3];return function(W){return P(z*W)+O}}return{format:S,formatPrefix:I}}var $g,RF,NF;o6({thousands:",",grouping:[3],currency:["$",""]});function o6(e){return $g=s6(e),RF=$g.format,NF=$g.formatPrefix,$g}function a6(e){return Math.max(0,-mp(Math.abs(e)))}function l6(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mp(n)/3)))*3-mp(Math.abs(e)))}function c6(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,mp(n)-mp(e))+1}function A6(e,n,i,l){var h=vN(e,n,i),f;switch(l=ny(l??",f"),l.type){case"s":{var m=Math.max(Math.abs(e),Math.abs(n));return l.precision==null&&!isNaN(f=l6(h,m))&&(l.precision=f),NF(l,m)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(f=c6(h,Math.max(Math.abs(e),Math.abs(n))))&&(l.precision=f-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(f=a6(h))&&(l.precision=f-(l.type==="%")*2);break}}return RF(l)}function u6(e){var n=e.domain;return e.ticks=function(i){var l=n();return yN(l[0],l[l.length-1],i??10)},e.tickFormat=function(i,l){var h=n();return A6(h[0],h[h.length-1],i??10,l)},e.nice=function(i){i==null&&(i=10);var l=n(),h=0,f=l.length-1,m=l[h],a=l[f],x,S,I=10;for(a<m&&(S=m,m=a,a=S,S=h,h=f,f=S);I-- >0;){if(S=L1(m,a,i),S===x)return l[h]=m,l[f]=a,n(l);if(S>0)m=Math.floor(m/S)*S,a=Math.ceil(a/S)*S;else if(S<0)m=Math.ceil(m*S)/S,a=Math.floor(a*S)/S;else break;x=S}return e},e}function QF(){var e=YN();return e.copy=function(){return ZN(e,QF())},_N.apply(e,arguments),u6(e)}function OF({filteredData:e,geoJSON:n,selectedMetric:i,regionScope:l,onRenderComplete:h}){const f=te.useRef(null),m=te.useRef(null),a=te.useRef(null),x=te.useRef({}).current,S=te.useMemo(()=>{const P=e.map($=>$[i]).filter($=>typeof $=="number"&&$>0).sort(($,z)=>$-z);return P.length<2?null:QF().domain([P[0],P[P.length-1]]).range(["#FFF9B0","#E84C61","#2E0B59"])},[e,i]),{continental:I,alaska:U,hawaii:Q}=te.useMemo(()=>{if(l!=="national"||!n)return{continental:n,alaska:null,hawaii:null};const P=[],$=[],z=[],O=new Set(e.filter(ne=>ne.state==="Alaska").map(ne=>ne.zipCode)),W=new Set(e.filter(ne=>ne.state==="Hawaii").map(ne=>ne.zipCode));return n.features.forEach(ne=>{const ce=ne.properties.zipCode;O.has(ce)?$.push(ne):W.has(ce)?z.push(ne):P.push(ne)}),{continental:{type:"FeatureCollection",features:P},alaska:{type:"FeatureCollection",features:$},hawaii:{type:"FeatureCollection",features:z}}},[n,l,e]);return te.useEffect(()=>{Object.keys(x).forEach(W=>{x[W]&&(x[W].remove(),x[W]=null)});const P=[{key:"main",ref:f,center:[-98.5,39.8],zoom:3.5,data:I},...l==="national"?[{key:"alaska",ref:m,center:[-152,64],zoom:2.5,data:U},{key:"hawaii",ref:a,center:[-157,21],zoom:5,data:Q}]:[]],$=P.filter(W=>W.data).length;let z=0;const O=()=>{z++,z===$&&h&&h()};return P.forEach(({key:W,ref:ne,center:ce,zoom:de,data:Se})=>{if(!ne.current)return;const ze=new $f.Map({container:ne.current,style:{version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"#ffffff"}}]},center:ce,zoom:de,interactive:!1,attributionControl:!1,canvasContextAttributes:{preserveDrawingBuffer:!0}});x[W]=ze,ze.on("load",()=>{if(!Se||!S||Se.features.length===0){ze.once("idle",O);return}const Ze={...Se,features:Se.features.map(Qe=>{const be=e.find(le=>le.zipCode===Qe.properties.zipCode),Ge=be?be[i]:0;return{...Qe,properties:{...Qe.properties,metricValue:Ge}}})};if(ze.addSource(W,{type:"geojson",data:Ze}),ze.addLayer({id:`${W}-fill`,type:"fill",source:W,paint:{"fill-color":["case",["!",["has","metricValue"]],"#ccc",["interpolate",["linear"],["get","metricValue"],...S.domain().flatMap(Qe=>[Qe,S(Qe)])]],"fill-opacity":.8}}),W==="main"&&(l==="state"||l==="metro")){const Qe=new $f.LngLatBounds;Se.features.forEach(be=>{be.geometry?.type==="Polygon"&&be.geometry.coordinates[0].forEach(Ge=>Qe.extend(Ge)),be.geometry?.type==="MultiPolygon"&&be.geometry.coordinates.forEach(Ge=>Ge[0].forEach(le=>Qe.extend(le)))}),Qe.isEmpty()||ze.fitBounds(Qe,{padding:40,duration:0})}ze.once("idle",O)})}),()=>{Object.keys(x).forEach(W=>{x[W]&&(x[W].remove(),x[W]=null)})}},[I,U,Q,S,h,l,i,e]),oe.jsxs("div",{className:"relative w-full h-full bg-white",children:[oe.jsx("div",{ref:f,className:"w-full h-full"}),l==="national"&&oe.jsxs("div",{className:"absolute bottom-6 left-6 flex gap-3",children:[oe.jsx("div",{className:"w-44 h-36 border-2 border-gray-400 rounded shadow-lg bg-white overflow-hidden",children:oe.jsx("div",{ref:m,className:"w-full h-full"})}),oe.jsx("div",{className:"w-36 h-28 border-2 border-gray-400 rounded shadow-lg bg-white overflow-hidden",children:oe.jsx("div",{ref:a,className:"w-full h-full"})})]})]})}function h_(e,n){const i=n.toLowerCase();return i.includes("price")?`$${(e/1e3).toFixed(0)}k`:i.includes("ratio")||i.includes("above")?`${(e*100).toFixed(0)}%`:i.includes("dom")?`${Math.round(e)}`:e.toLocaleString()}function h6(e,n){if(!e||e.length===0)return n.map(()=>0);const i=[...e].sort((l,h)=>l-h);return n.map(l=>{const h=(i.length-1)*l,f=Math.floor(h),m=Math.ceil(h),a=h-f;return i[f]*(1-a)+i[m]*a})}function Jw({selectedMetric:e,metricValues:n,isExport:i=!1}){const l=te.useMemo(()=>{if(!n||n.length===0)return{min:"N/A",mid:"N/A",max:"N/A"};const[f,m,a]=h6(n,[.05,.5,.95]);return{min:h_(f,e),mid:h_(m,e),max:h_(a,e)}},[n,e]),h=f=>{const m=f.replace(/-/g,"_");return{median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",sale_to_list_ratio:"Sale-to-List Ratio",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"}[m]||m.split("_").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ")};return oe.jsxs("div",{className:`
      border border-gray-300 rounded-lg p-4 w-full max-w-xs
      ${i?"bg-white shadow-none":"bg-white/95 backdrop-blur-sm shadow-xl"}
    `,children:[oe.jsx("h3",{className:"text-sm font-bold mb-3 text-gray-900",children:h(e)}),oe.jsxs("div",{className:"space-y-2",children:[oe.jsx("div",{className:"h-4 rounded-md border border-gray-200",style:{background:"linear-gradient(to right, #FFF9B0, #FFEB84, #FFD166, #FF9A56, #E84C61, #C13584, #7B2E8D, #2E0B59)"}}),oe.jsxs("div",{className:"flex justify-between text-xs text-gray-700 font-bold",children:[oe.jsx("span",{children:l.min}),oe.jsx("span",{children:l.mid}),oe.jsx("span",{children:l.max})]})]}),!i&&oe.jsx("div",{className:"mt-1 pt-1 border-gray-200",children:oe.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Click ZIP code to view more info"})})]})}function f6({allZipData:e,fullGeoJSON:n,selectedMetric:i,isExporting:l,onExport:h,onCancel:f}){const[m,a]=te.useState("national"),[x,S]=te.useState(""),[I,U]=te.useState(""),[Q,P]=te.useState(""),[$,z]=te.useState(""),[O,W]=te.useState(!1),ne=te.useRef(null),[ce,de]=te.useState("png"),[Se,ze]=te.useState(!0),[Ze,Qe]=te.useState(!0);te.useEffect(()=>{const Ie=setTimeout(()=>{z(Q)},150);return()=>clearTimeout(Ie)},[Q]),te.useEffect(()=>{function Ie(yt){ne.current&&!ne.current.contains(yt.target)&&W(!1)}return document.addEventListener("mousedown",Ie),()=>document.removeEventListener("mousedown",Ie)},[]);const{availableStates:be,filteredMetros:Ge}=te.useMemo(()=>{if(Object.keys(e).length===0)return{availableStates:[],filteredMetros:[]};const Ie=new Set,yt=new Set;for(const Ee of Object.values(e))Ee.state&&Ie.add(Ee.state),Ee.parent_metro&&yt.add(Ee.parent_metro);const Ue=Array.from(yt).sort(),ie=$?Ue.filter(Ee=>Ee.toLowerCase().includes($.toLowerCase())):Ue;return{availableStates:Array.from(Ie).sort(),filteredMetros:ie}},[e,$]),{filteredData:le,filteredGeoJSON:ge}=te.useMemo(()=>{if(Object.keys(e).length===0||!n)return{filteredData:[],filteredGeoJSON:null};const Ie=Object.values(e).filter(ie=>m==="state"&&x?ie.state===x:m==="metro"&&I?ie.parent_metro===I:!0),yt=new Set(Ie.map(ie=>ie.zipCode)),Ue=n.features.filter(ie=>yt.has(ie.properties?.zipCode));return{filteredData:Ie,filteredGeoJSON:{type:"FeatureCollection",features:Ue}}},[e,n,m,x,I]),Pe=()=>{h({regionScope:m,selectedState:x,selectedMetro:I,fileFormat:ce,includeLegend:Se,includeTitle:Ze})},Fe=()=>!!(l||m==="state"&&!x||m==="metro"&&!I),pt=Ie=>{a(Ie),Ie!=="metro"&&W(!1)},ut=Ie=>de(Ie),At=Ie=>{U(Ie),P(Ie),W(!1)},Ne=()=>{U(""),P(""),z(""),W(!0)};return oe.jsxs("div",{className:"fixed inset-0 bg-background z-50 flex",children:[oe.jsxs("div",{className:"w-80 bg-background border-r h-full shadow-xl flex flex-col",children:[oe.jsxs("div",{className:"p-4 space-y-4 flex-1 overflow-y-auto",children:[oe.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[oe.jsx(lP,{className:"h-4 w-4 text-primary"}),oe.jsx("h2",{className:"text-base font-semibold",children:"Export Map"})]}),oe.jsxs("div",{className:"space-y-3",children:[oe.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[oe.jsx(aP,{className:"h-3.5 w-3.5"}),oe.jsx("span",{children:"Region Scope"})]}),oe.jsxs(B1,{value:m,onValueChange:pt,className:"space-y-2",children:[oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx(Zd,{value:"national",id:"r-national"}),oe.jsx(rf,{htmlFor:"r-national",className:"text-sm",children:"National"})]}),oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx(Zd,{value:"state",id:"r-state"}),oe.jsx(rf,{htmlFor:"r-state",className:"text-sm",children:"State"})]}),oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx(Zd,{value:"metro",id:"r-metro"}),oe.jsx(rf,{htmlFor:"r-metro",className:"text-sm",children:"Metro Area"})]})]}),m==="state"&&oe.jsxs(_F,{value:x,onValueChange:S,children:[oe.jsx(Vw,{className:"h-9",children:oe.jsx(wF,{placeholder:"Select a state"})}),oe.jsx(Gw,{children:be.map(Ie=>oe.jsx(Kw,{value:Ie,children:Ie},Ie))})]}),m==="metro"&&oe.jsxs("div",{className:"space-y-2 relative",ref:ne,children:[oe.jsxs("div",{className:"relative",children:[oe.jsx(bw,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),oe.jsx(Hy,{placeholder:"Type to search metros...",value:Q,onChange:Ie=>{P(Ie.target.value),W(!0),I&&Ie.target.value!==I&&U("")},onFocus:()=>W(!0),className:"pl-8 h-9 pr-8"}),Q&&oe.jsx("button",{onClick:Ne,className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:oe.jsx(Vm,{className:"h-4 w-4"})})]}),O&&oe.jsx("div",{className:"absolute z-10 w-full mt-1 bg-popover text-popover-foreground border rounded-md shadow-md max-h-[250px] overflow-y-auto",children:Ge.length>0?oe.jsx("div",{className:"p-1",children:Ge.map(Ie=>oe.jsx("div",{onClick:()=>At(Ie),className:Pi("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",I===Ie&&"bg-accent text-accent-foreground font-medium"),children:Ie},Ie))}):oe.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No metro areas found."})})]})]}),oe.jsxs("div",{className:"space-y-3 pt-2",children:[oe.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[oe.jsx(iP,{className:"h-3.5 w-3.5"}),oe.jsx("span",{children:"File Format"})]}),oe.jsxs(B1,{value:ce,onValueChange:ut,className:"space-y-2",children:[oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx(Zd,{value:"png",id:"r-png"}),oe.jsx(rf,{htmlFor:"r-png",className:"text-sm",children:"PNG (Image)"})]}),oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx(Zd,{value:"pdf",id:"r-pdf"}),oe.jsx(rf,{htmlFor:"r-pdf",className:"text-sm",children:"PDF (Document)"})]})]})]}),oe.jsxs("div",{className:"space-y-2 pt-2",children:[oe.jsx("div",{className:"text-sm font-medium",children:"Customization"}),oe.jsxs("div",{className:"space-y-2",children:[oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx(P1,{id:"c-title",checked:Ze,onCheckedChange:Ie=>Qe(Ie===!0)}),oe.jsx(rf,{htmlFor:"c-title",className:"text-sm",children:"Include Title"})]}),oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx(P1,{id:"c-legend",checked:Se,onCheckedChange:Ie=>ze(Ie===!0)}),oe.jsx(rf,{htmlFor:"c-legend",className:"text-sm",children:"Include Legend"})]})]})]})]}),oe.jsxs("div",{className:"p-4 space-y-2 border-t bg-background",children:[oe.jsxs(wc,{onClick:Pe,disabled:Fe(),className:"w-full",size:"default",children:[oe.jsx(Y5,{className:"h-4 w-4 mr-2"}),"Export ",ce.toUpperCase()]}),oe.jsx(wc,{onClick:f,variant:"outline",className:"w-full",disabled:l,children:"Cancel"})]})]}),oe.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col bg-gray-50",children:[oe.jsxs("div",{className:"mb-4",children:[oe.jsx("h3",{className:"text-lg font-semibold",children:"Preview"}),oe.jsxs("p",{className:"text-sm text-muted-foreground",children:[le.length.toLocaleString()," ZIP codes  ",m==="national"?"United States":m==="state"?x||"Select a state":I||"Select a metro area"]})]}),oe.jsxs("div",{className:"flex-1 bg-white border rounded-lg overflow-hidden shadow-sm p-8 flex flex-col",children:[Ze&&oe.jsxs("header",{className:"text-center mb-4",children:[oe.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:[i.split("_").map(Ie=>Ie.charAt(0).toUpperCase()+Ie.slice(1)).join(" ")," by ZIP Code"]}),oe.jsxs("p",{className:"text-sm text-gray-600",children:[m==="national"?"United States":m==="state"?x||"State":I||"Metro Area","  ",new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),oe.jsx("div",{className:"flex-1 border border-gray-200 rounded-lg overflow-hidden bg-gray-50 relative",children:ge&&le.length>0?oe.jsxs(oe.Fragment,{children:[oe.jsx(OF,{filteredData:le,geoJSON:ge,selectedMetric:i,regionScope:m}),Se&&oe.jsx("div",{className:"absolute bottom-4 right-4 w-64",children:oe.jsx(Jw,{selectedMetric:i,metricValues:le.map(Ie=>Ie[i]).filter(Ie=>typeof Ie=="number"&&Ie>0),isExport:!0})})]}):oe.jsxs("div",{className:"flex items-center justify-center h-full text-gray-500",children:[m==="state"&&!x&&"Select a state",m==="metro"&&!I&&"Select a metro area",le.length===0&&"No data available"]})})]})]})]})}function d6({className:e,showText:n=!0,size:i="md"}){const l={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"},h={sm:"text-sm",md:"text-base",lg:"text-xl"};return oe.jsxs("div",{className:Pi("flex items-center space-x-2",e),children:[oe.jsx("div",{className:Pi("relative",l[i]),children:oe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"60 48 922 918",className:"w-full h-full",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd",children:[oe.jsx("path",{style:{opacity:1},fill:"currentColor",d:"M599.5 969.5a47946 47946 0 0 0-438-1q-3.972-.357-5.5-4-.75-265.5-.5-531-1.76-3.006-5-4.5l-90-1q-2.844-2.712-1.5-6.5A85.4 85.4 0 0 1 70.5 411q-.342-.598-1-.5A210908 210908 0 0 0 502.5 50q9.211-5.049 18 1a60358 60358 0 0 0 320 265Q985.322 445.534 961 639.5 937.402 826.092 774.5 918q-81.922 44.606-175 51.5m273-427q-12.547-109.86-97-180.5a40179 40179 0 0 1-262-215q-2-1-4 0a29527 29527 0 0 0-271 226.5 76 76 0 0 0-6.5 8 3480 3480 0 0 0 0 118l2.5 2.5c71.999.667 143.999.5 216 .5h17a282 282 0 0 1 72 7.5Q679.637 546.536 695 690.5q8.445 111.188-67 192-2.234 6.5 4.5 7 16.65-3.08 33-7.5Q781.86 847.5 840 741.5q39.05-82.066 33.5-173-.357-13.007-1-26m-617 38q106-.25 212 .5 48.318.069 88 27 41.687 35.418 46.5 90.5 5.764 54.94-21 103-32.8 48.235-90.5 59.5a277 277 0 0 1-29 4q-103 .75-206 .5a10.5 10.5 0 0 0-2.5-3q-1-139.5 0-279a10.5 10.5 0 0 0 2.5-3"}),oe.jsx("path",{fill:"currentColor",style:{opacity:1},d:"M427.5 290h68v68h-68zm96 0h68v68h-68zm-96 96h68v68h-68zm96 0h68v68h-68z"})]})}),n&&oe.jsx("span",{className:Pi("font-bold text-gray-800",h[i]),children:"Domapus"})]})}var D1=function(e,n){return D1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(i[h]=l[h])},D1(e,n)};function Fu(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");D1(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var R1=function(){return R1=Object.assign||function(n){for(var i,l=1,h=arguments.length;l<h;l++){i=arguments[l];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(n[f]=i[f])}return n},R1.apply(this,arguments)};function vc(e,n,i,l){function h(f){return f instanceof i?f:new i(function(m){m(f)})}return new(i||(i=Promise))(function(f,m){function a(I){try{S(l.next(I))}catch(U){m(U)}}function x(I){try{S(l.throw(I))}catch(U){m(U)}}function S(I){I.done?f(I.value):h(I.value).then(a,x)}S((l=l.apply(e,[])).next())})}function $l(e,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,h,f,m;return m={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function a(S){return function(I){return x([S,I])}}function x(S){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,h&&(f=S[0]&2?h.return:S[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,S[1])).done)return f;switch(h=0,f&&(S=[S[0]&2,f.value]),S[0]){case 0:case 1:f=S;break;case 4:return i.label++,{value:S[1],done:!1};case 5:i.label++,h=S[1],S=[0];continue;case 7:S=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(S[0]===6||S[0]===2)){i=0;continue}if(S[0]===3&&(!f||S[1]>f[0]&&S[1]<f[3])){i.label=S[1];break}if(S[0]===6&&i.label<f[1]){i.label=f[1],f=S;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(S);break}f[2]&&i.ops.pop(),i.trys.pop();continue}S=n.call(e,i)}catch(I){S=[6,I],h=0}finally{l=f=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function Wg(e,n,i){if(arguments.length===2)for(var l=0,h=n.length,f;l<h;l++)(f||!(l in n))&&(f||(f=Array.prototype.slice.call(n,0,l)),f[l]=n[l]);return e.concat(f||n)}var Rh=(function(){function e(n,i,l,h){this.left=n,this.top=i,this.width=l,this.height=h}return e.prototype.add=function(n,i,l,h){return new e(this.left+n,this.top+i,this.width+l,this.height+h)},e.fromClientRect=function(n,i){return new e(i.left+n.windowBounds.left,i.top+n.windowBounds.top,i.width,i.height)},e.fromDOMRectList=function(n,i){var l=Array.from(i).find(function(h){return h.width!==0});return l?new e(l.left+n.windowBounds.left,l.top+n.windowBounds.top,l.width,l.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e})(),jy=function(e,n){return Rh.fromClientRect(e,n.getBoundingClientRect())},p6=function(e){var n=e.body,i=e.documentElement;if(!n||!i)throw new Error("Unable to get document size");var l=Math.max(Math.max(n.scrollWidth,i.scrollWidth),Math.max(n.offsetWidth,i.offsetWidth),Math.max(n.clientWidth,i.clientWidth)),h=Math.max(Math.max(n.scrollHeight,i.scrollHeight),Math.max(n.offsetHeight,i.offsetHeight),Math.max(n.clientHeight,i.clientHeight));return new Rh(0,0,l,h)},Vy=function(e){for(var n=[],i=0,l=e.length;i<l;){var h=e.charCodeAt(i++);if(h>=55296&&h<=56319&&i<l){var f=e.charCodeAt(i++);(f&64512)===56320?n.push(((h&1023)<<10)+(f&1023)+65536):(n.push(h),i--)}else n.push(h)}return n},Po=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var l=[],h=-1,f="";++h<i;){var m=e[h];m<=65535?l.push(m):(m-=65536,l.push((m>>10)+55296,m%1024+56320)),(h+1===i||l.length>16384)&&(f+=String.fromCharCode.apply(String,l),l.length=0)}return f},nB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zg=0;Zg<nB.length;Zg++)m6[nB.charCodeAt(Zg)]=Zg;var iB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xg=0;Xg<iB.length;Xg++)hm[iB.charCodeAt(Xg)]=Xg;var g6=function(e){var n=e.length*.75,i=e.length,l,h=0,f,m,a,x;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var S=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),I=Array.isArray(S)?S:new Uint8Array(S);for(l=0;l<i;l+=4)f=hm[e.charCodeAt(l)],m=hm[e.charCodeAt(l+1)],a=hm[e.charCodeAt(l+2)],x=hm[e.charCodeAt(l+3)],I[h++]=f<<2|m>>4,I[h++]=(m&15)<<4|a>>2,I[h++]=(a&3)<<6|x&63;return S},y6=function(e){for(var n=e.length,i=[],l=0;l<n;l+=2)i.push(e[l+1]<<8|e[l]);return i},v6=function(e){for(var n=e.length,i=[],l=0;l<n;l+=4)i.push(e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l]);return i},Yf=5,ex=11,f_=2,_6=ex-Yf,zF=65536>>Yf,w6=1<<Yf,d_=w6-1,x6=1024>>Yf,b6=zF+x6,B6=b6,C6=32,S6=B6+C6,E6=65536>>ex,F6=1<<_6,I6=F6-1,sB=function(e,n,i){return e.slice?e.slice(n,i):new Uint16Array(Array.prototype.slice.call(e,n,i))},T6=function(e,n,i){return e.slice?e.slice(n,i):new Uint32Array(Array.prototype.slice.call(e,n,i))},P6=function(e,n){var i=g6(e),l=Array.isArray(i)?v6(i):new Uint32Array(i),h=Array.isArray(i)?y6(i):new Uint16Array(i),f=24,m=sB(h,f/2,l[4]/2),a=l[5]===2?sB(h,(f+l[4])/2):T6(l,Math.ceil((f+l[4])/4));return new L6(l[0],l[1],l[2],l[3],m,a)},L6=(function(){function e(n,i,l,h,f,m){this.initialValue=n,this.errorValue=i,this.highStart=l,this.highValueIndex=h,this.index=f,this.data=m}return e.prototype.get=function(n){var i;if(n>=0){if(n<55296||n>56319&&n<=65535)return i=this.index[n>>Yf],i=(i<<f_)+(n&d_),this.data[i];if(n<=65535)return i=this.index[zF+(n-55296>>Yf)],i=(i<<f_)+(n&d_),this.data[i];if(n<this.highStart)return i=S6-E6+(n>>ex),i=this.index[i],i+=n>>Yf&I6,i=this.index[i],i=(i<<f_)+(n&d_),this.data[i];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),oB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yg=0;Yg<oB.length;Yg++)M6[oB.charCodeAt(Yg)]=Yg;var k6="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",aB=50,U6=1,HF=2,jF=3,D6=4,R6=5,lB=7,VF=8,cB=9,cf=10,N1=11,AB=12,Q1=13,N6=14,fm=15,O1=16,Jg=17,sm=18,Q6=19,uB=20,z1=21,om=22,p_=23,zd=24,wA=25,dm=26,pm=27,Hd=28,O6=29,Kf=30,z6=31,e0=32,t0=33,H1=34,j1=35,V1=36,Dm=37,G1=38,k0=39,U0=40,m_=41,GF=42,H6=43,j6=[9001,65288],KF="!",hi="",r0="",K1=P6(k6),Ih=[Kf,V1],q1=[U6,HF,jF,R6],qF=[cf,VF],hB=[pm,dm],V6=q1.concat(qF),fB=[G1,k0,U0,H1,j1],G6=[fm,Q1],K6=function(e,n){n===void 0&&(n="strict");var i=[],l=[],h=[];return e.forEach(function(f,m){var a=K1.get(f);if(a>aB?(h.push(!0),a-=aB):h.push(!1),["normal","auto","loose"].indexOf(n)!==-1&&[8208,8211,12316,12448].indexOf(f)!==-1)return l.push(m),i.push(O1);if(a===D6||a===N1){if(m===0)return l.push(m),i.push(Kf);var x=i[m-1];return V6.indexOf(x)===-1?(l.push(l[m-1]),i.push(x)):(l.push(m),i.push(Kf))}if(l.push(m),a===z6)return i.push(n==="strict"?z1:Dm);if(a===GF||a===O6)return i.push(Kf);if(a===H6)return f>=131072&&f<=196605||f>=196608&&f<=262141?i.push(Dm):i.push(Kf);i.push(a)}),[l,i,h]},g_=function(e,n,i,l){var h=l[i];if(Array.isArray(e)?e.indexOf(h)!==-1:e===h)for(var f=i;f<=l.length;){f++;var m=l[f];if(m===n)return!0;if(m!==cf)break}if(h===cf)for(var f=i;f>0;){f--;var a=l[f];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var x=i;x<=l.length;){x++;var m=l[x];if(m===n)return!0;if(m!==cf)break}if(a!==cf)break}return!1},dB=function(e,n){for(var i=e;i>=0;){var l=n[i];if(l===cf)i--;else return l}return 0},q6=function(e,n,i,l,h){if(i[l]===0)return hi;var f=l-1;if(Array.isArray(h)&&h[f]===!0)return hi;var m=f-1,a=f+1,x=n[f],S=m>=0?n[m]:0,I=n[a];if(x===HF&&I===jF)return hi;if(q1.indexOf(x)!==-1)return KF;if(q1.indexOf(I)!==-1||qF.indexOf(I)!==-1)return hi;if(dB(f,n)===VF)return r0;if(K1.get(e[f])===N1||(x===e0||x===t0)&&K1.get(e[a])===N1||x===lB||I===lB||x===cB||[cf,Q1,fm].indexOf(x)===-1&&I===cB||[Jg,sm,Q6,zd,Hd].indexOf(I)!==-1||dB(f,n)===om||g_(p_,om,f,n)||g_([Jg,sm],z1,f,n)||g_(AB,AB,f,n))return hi;if(x===cf)return r0;if(x===p_||I===p_)return hi;if(I===O1||x===O1)return r0;if([Q1,fm,z1].indexOf(I)!==-1||x===N6||S===V1&&G6.indexOf(x)!==-1||x===Hd&&I===V1||I===uB||Ih.indexOf(I)!==-1&&x===wA||Ih.indexOf(x)!==-1&&I===wA||x===pm&&[Dm,e0,t0].indexOf(I)!==-1||[Dm,e0,t0].indexOf(x)!==-1&&I===dm||Ih.indexOf(x)!==-1&&hB.indexOf(I)!==-1||hB.indexOf(x)!==-1&&Ih.indexOf(I)!==-1||[pm,dm].indexOf(x)!==-1&&(I===wA||[om,fm].indexOf(I)!==-1&&n[a+1]===wA)||[om,fm].indexOf(x)!==-1&&I===wA||x===wA&&[wA,Hd,zd].indexOf(I)!==-1)return hi;if([wA,Hd,zd,Jg,sm].indexOf(I)!==-1)for(var U=f;U>=0;){var Q=n[U];if(Q===wA)return hi;if([Hd,zd].indexOf(Q)!==-1)U--;else break}if([pm,dm].indexOf(I)!==-1)for(var U=[Jg,sm].indexOf(x)!==-1?m:f;U>=0;){var Q=n[U];if(Q===wA)return hi;if([Hd,zd].indexOf(Q)!==-1)U--;else break}if(G1===x&&[G1,k0,H1,j1].indexOf(I)!==-1||[k0,H1].indexOf(x)!==-1&&[k0,U0].indexOf(I)!==-1||[U0,j1].indexOf(x)!==-1&&I===U0||fB.indexOf(x)!==-1&&[uB,dm].indexOf(I)!==-1||fB.indexOf(I)!==-1&&x===pm||Ih.indexOf(x)!==-1&&Ih.indexOf(I)!==-1||x===zd&&Ih.indexOf(I)!==-1||Ih.concat(wA).indexOf(x)!==-1&&I===om&&j6.indexOf(e[a])===-1||Ih.concat(wA).indexOf(I)!==-1&&x===sm)return hi;if(x===m_&&I===m_){for(var P=i[f],$=1;P>0&&(P--,n[P]===m_);)$++;if($%2!==0)return hi}return x===e0&&I===t0?hi:r0},$6=function(e,n){n||(n={lineBreak:"normal",wordBreak:"normal"});var i=K6(e,n.lineBreak),l=i[0],h=i[1],f=i[2];(n.wordBreak==="break-all"||n.wordBreak==="break-word")&&(h=h.map(function(a){return[wA,Kf,GF].indexOf(a)!==-1?Dm:a}));var m=n.wordBreak==="keep-all"?f.map(function(a,x){return a&&e[x]>=19968&&e[x]<=40959}):void 0;return[l,h,m]},W6=(function(){function e(n,i,l,h){this.codePoints=n,this.required=i===KF,this.start=l,this.end=h}return e.prototype.slice=function(){return Po.apply(void 0,this.codePoints.slice(this.start,this.end))},e})(),Z6=function(e,n){var i=Vy(e),l=$6(i,n),h=l[0],f=l[1],m=l[2],a=i.length,x=0,S=0;return{next:function(){if(S>=a)return{done:!0,value:null};for(var I=hi;S<a&&(I=q6(i,f,h,++S,m))===hi;);if(I!==hi||S===a){var U=new W6(i,I,x,S);return x=S,{value:U,done:!1}}return{done:!0,value:null}}}},X6=1,Y6=2,Zm=4,pB=8,iy=10,mB=47,_m=92,J6=9,eQ=32,n0=34,am=61,tQ=35,rQ=36,nQ=37,i0=39,s0=40,lm=41,iQ=95,Zc=45,sQ=33,oQ=60,aQ=62,lQ=64,cQ=91,AQ=93,uQ=61,hQ=123,o0=63,fQ=125,gB=124,dQ=126,pQ=128,yB=65533,y_=42,Zf=43,mQ=44,gQ=58,yQ=59,Rm=46,vQ=0,_Q=8,wQ=11,xQ=14,bQ=31,BQ=127,Ku=-1,$F=48,WF=97,ZF=101,CQ=102,SQ=117,EQ=122,XF=65,YF=69,JF=70,FQ=85,IQ=90,Wl=function(e){return e>=$F&&e<=57},TQ=function(e){return e>=55296&&e<=57343},jd=function(e){return Wl(e)||e>=XF&&e<=JF||e>=WF&&e<=CQ},PQ=function(e){return e>=WF&&e<=EQ},LQ=function(e){return e>=XF&&e<=IQ},MQ=function(e){return PQ(e)||LQ(e)},kQ=function(e){return e>=pQ},a0=function(e){return e===iy||e===J6||e===eQ},sy=function(e){return MQ(e)||kQ(e)||e===iQ},vB=function(e){return sy(e)||Wl(e)||e===Zc},UQ=function(e){return e>=vQ&&e<=_Q||e===wQ||e>=xQ&&e<=bQ||e===BQ},af=function(e,n){return e!==_m?!1:n!==iy},l0=function(e,n,i){return e===Zc?sy(n)||af(n,i):sy(e)?!0:!!(e===_m&&af(e,n))},v_=function(e,n,i){return e===Zf||e===Zc?Wl(n)?!0:n===Rm&&Wl(i):Wl(e===Rm?n:e)},DQ=function(e){var n=0,i=1;(e[n]===Zf||e[n]===Zc)&&(e[n]===Zc&&(i=-1),n++);for(var l=[];Wl(e[n]);)l.push(e[n++]);var h=l.length?parseInt(Po.apply(void 0,l),10):0;e[n]===Rm&&n++;for(var f=[];Wl(e[n]);)f.push(e[n++]);var m=f.length,a=m?parseInt(Po.apply(void 0,f),10):0;(e[n]===YF||e[n]===ZF)&&n++;var x=1;(e[n]===Zf||e[n]===Zc)&&(e[n]===Zc&&(x=-1),n++);for(var S=[];Wl(e[n]);)S.push(e[n++]);var I=S.length?parseInt(Po.apply(void 0,S),10):0;return i*(h+a*Math.pow(10,-m))*Math.pow(10,x*I)},RQ={type:2},NQ={type:3},QQ={type:4},OQ={type:13},zQ={type:8},HQ={type:21},jQ={type:9},VQ={type:10},GQ={type:11},KQ={type:12},qQ={type:14},c0={type:23},$Q={type:1},WQ={type:25},ZQ={type:24},XQ={type:26},YQ={type:27},JQ={type:28},e8={type:29},t8={type:31},$1={type:32},eI=(function(){function e(){this._value=[]}return e.prototype.write=function(n){this._value=this._value.concat(Vy(n))},e.prototype.read=function(){for(var n=[],i=this.consumeToken();i!==$1;)n.push(i),i=this.consumeToken();return n},e.prototype.consumeToken=function(){var n=this.consumeCodePoint();switch(n){case n0:return this.consumeStringToken(n0);case tQ:var i=this.peekCodePoint(0),l=this.peekCodePoint(1),h=this.peekCodePoint(2);if(vB(i)||af(l,h)){var f=l0(i,l,h)?Y6:X6,m=this.consumeName();return{type:5,value:m,flags:f}}break;case rQ:if(this.peekCodePoint(0)===am)return this.consumeCodePoint(),OQ;break;case i0:return this.consumeStringToken(i0);case s0:return RQ;case lm:return NQ;case y_:if(this.peekCodePoint(0)===am)return this.consumeCodePoint(),qQ;break;case Zf:if(v_(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case mQ:return QQ;case Zc:var a=n,x=this.peekCodePoint(0),S=this.peekCodePoint(1);if(v_(a,x,S))return this.reconsumeCodePoint(n),this.consumeNumericToken();if(l0(a,x,S))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();if(x===Zc&&S===aQ)return this.consumeCodePoint(),this.consumeCodePoint(),ZQ;break;case Rm:if(v_(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case mB:if(this.peekCodePoint(0)===y_)for(this.consumeCodePoint();;){var I=this.consumeCodePoint();if(I===y_&&(I=this.consumeCodePoint(),I===mB))return this.consumeToken();if(I===Ku)return this.consumeToken()}break;case gQ:return XQ;case yQ:return YQ;case oQ:if(this.peekCodePoint(0)===sQ&&this.peekCodePoint(1)===Zc&&this.peekCodePoint(2)===Zc)return this.consumeCodePoint(),this.consumeCodePoint(),WQ;break;case lQ:var U=this.peekCodePoint(0),Q=this.peekCodePoint(1),P=this.peekCodePoint(2);if(l0(U,Q,P)){var m=this.consumeName();return{type:7,value:m}}break;case cQ:return JQ;case _m:if(af(n,this.peekCodePoint(0)))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();break;case AQ:return e8;case uQ:if(this.peekCodePoint(0)===am)return this.consumeCodePoint(),zQ;break;case hQ:return GQ;case fQ:return KQ;case SQ:case FQ:var $=this.peekCodePoint(0),z=this.peekCodePoint(1);return $===Zf&&(jd(z)||z===o0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(n),this.consumeIdentLikeToken();case gB:if(this.peekCodePoint(0)===am)return this.consumeCodePoint(),jQ;if(this.peekCodePoint(0)===gB)return this.consumeCodePoint(),HQ;break;case dQ:if(this.peekCodePoint(0)===am)return this.consumeCodePoint(),VQ;break;case Ku:return $1}return a0(n)?(this.consumeWhiteSpace(),t8):Wl(n)?(this.reconsumeCodePoint(n),this.consumeNumericToken()):sy(n)?(this.reconsumeCodePoint(n),this.consumeIdentLikeToken()):{type:6,value:Po(n)}},e.prototype.consumeCodePoint=function(){var n=this._value.shift();return typeof n>"u"?-1:n},e.prototype.reconsumeCodePoint=function(n){this._value.unshift(n)},e.prototype.peekCodePoint=function(n){return n>=this._value.length?-1:this._value[n]},e.prototype.consumeUnicodeRangeToken=function(){for(var n=[],i=this.consumeCodePoint();jd(i)&&n.length<6;)n.push(i),i=this.consumeCodePoint();for(var l=!1;i===o0&&n.length<6;)n.push(i),i=this.consumeCodePoint(),l=!0;if(l){var h=parseInt(Po.apply(void 0,n.map(function(x){return x===o0?$F:x})),16),f=parseInt(Po.apply(void 0,n.map(function(x){return x===o0?JF:x})),16);return{type:30,start:h,end:f}}var m=parseInt(Po.apply(void 0,n),16);if(this.peekCodePoint(0)===Zc&&jd(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var a=[];jd(i)&&a.length<6;)a.push(i),i=this.consumeCodePoint();var f=parseInt(Po.apply(void 0,a),16);return{type:30,start:m,end:f}}else return{type:30,start:m,end:m}},e.prototype.consumeIdentLikeToken=function(){var n=this.consumeName();return n.toLowerCase()==="url"&&this.peekCodePoint(0)===s0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===s0?(this.consumeCodePoint(),{type:19,value:n}):{type:20,value:n}},e.prototype.consumeUrlToken=function(){var n=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ku)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===i0||i===n0){var l=this.consumeStringToken(this.consumeCodePoint());return l.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ku||this.peekCodePoint(0)===lm)?(this.consumeCodePoint(),{type:22,value:l.value}):(this.consumeBadUrlRemnants(),c0)}for(;;){var h=this.consumeCodePoint();if(h===Ku||h===lm)return{type:22,value:Po.apply(void 0,n)};if(a0(h))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ku||this.peekCodePoint(0)===lm?(this.consumeCodePoint(),{type:22,value:Po.apply(void 0,n)}):(this.consumeBadUrlRemnants(),c0);if(h===n0||h===i0||h===s0||UQ(h))return this.consumeBadUrlRemnants(),c0;if(h===_m)if(af(h,this.peekCodePoint(0)))n.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),c0;else n.push(h)}},e.prototype.consumeWhiteSpace=function(){for(;a0(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var n=this.consumeCodePoint();if(n===lm||n===Ku)return;af(n,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(n){for(var i=5e4,l="";n>0;){var h=Math.min(i,n);l+=Po.apply(void 0,this._value.splice(0,h)),n-=h}return this._value.shift(),l},e.prototype.consumeStringToken=function(n){var i="",l=0;do{var h=this._value[l];if(h===Ku||h===void 0||h===n)return i+=this.consumeStringSlice(l),{type:0,value:i};if(h===iy)return this._value.splice(0,l),$Q;if(h===_m){var f=this._value[l+1];f!==Ku&&f!==void 0&&(f===iy?(i+=this.consumeStringSlice(l),l=-1,this._value.shift()):af(h,f)&&(i+=this.consumeStringSlice(l),i+=Po(this.consumeEscapedCodePoint()),l=-1))}l++}while(!0)},e.prototype.consumeNumber=function(){var n=[],i=Zm,l=this.peekCodePoint(0);for((l===Zf||l===Zc)&&n.push(this.consumeCodePoint());Wl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());l=this.peekCodePoint(0);var h=this.peekCodePoint(1);if(l===Rm&&Wl(h))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),i=pB;Wl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());l=this.peekCodePoint(0),h=this.peekCodePoint(1);var f=this.peekCodePoint(2);if((l===YF||l===ZF)&&((h===Zf||h===Zc)&&Wl(f)||Wl(h)))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),i=pB;Wl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());return[DQ(n),i]},e.prototype.consumeNumericToken=function(){var n=this.consumeNumber(),i=n[0],l=n[1],h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(l0(h,f,m)){var a=this.consumeName();return{type:15,number:i,flags:l,unit:a}}return h===nQ?(this.consumeCodePoint(),{type:16,number:i,flags:l}):{type:17,number:i,flags:l}},e.prototype.consumeEscapedCodePoint=function(){var n=this.consumeCodePoint();if(jd(n)){for(var i=Po(n);jd(this.peekCodePoint(0))&&i.length<6;)i+=Po(this.consumeCodePoint());a0(this.peekCodePoint(0))&&this.consumeCodePoint();var l=parseInt(i,16);return l===0||TQ(l)||l>1114111?yB:l}return n===Ku?yB:n},e.prototype.consumeName=function(){for(var n="";;){var i=this.consumeCodePoint();if(vB(i))n+=Po(i);else if(af(i,this.peekCodePoint(0)))n+=Po(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),n}},e})(),tI=(function(){function e(n){this._tokens=n}return e.create=function(n){var i=new eI;return i.write(n),new e(i.read())},e.parseValue=function(n){return e.create(n).parseComponentValue()},e.parseValues=function(n){return e.create(n).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var n=this.consumeToken();n.type===31;)n=this.consumeToken();if(n.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(n);var i=this.consumeComponentValue();do n=this.consumeToken();while(n.type===31);if(n.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var n=[];;){var i=this.consumeComponentValue();if(i.type===32)return n;n.push(i),n.push()}},e.prototype.consumeComponentValue=function(){var n=this.consumeToken();switch(n.type){case 11:case 28:case 2:return this.consumeSimpleBlock(n.type);case 19:return this.consumeFunction(n)}return n},e.prototype.consumeSimpleBlock=function(n){for(var i={type:n,values:[]},l=this.consumeToken();;){if(l.type===32||n8(l,n))return i;this.reconsumeToken(l),i.values.push(this.consumeComponentValue()),l=this.consumeToken()}},e.prototype.consumeFunction=function(n){for(var i={name:n.value,values:[],type:18};;){var l=this.consumeToken();if(l.type===32||l.type===3)return i;this.reconsumeToken(l),i.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var n=this._tokens.shift();return typeof n>"u"?$1:n},e.prototype.reconsumeToken=function(n){this._tokens.unshift(n)},e})(),Xm=function(e){return e.type===15},Bp=function(e){return e.type===17},As=function(e){return e.type===20},r8=function(e){return e.type===0},W1=function(e,n){return As(e)&&e.value===n},rI=function(e){return e.type!==31},gp=function(e){return e.type!==31&&e.type!==4},rh=function(e){var n=[],i=[];return e.forEach(function(l){if(l.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");n.push(i),i=[];return}l.type!==31&&i.push(l)}),i.length&&n.push(i),n},n8=function(e,n){return n===11&&e.type===12||n===28&&e.type===29?!0:n===2&&e.type===3},vf=function(e){return e.type===17||e.type===15},ia=function(e){return e.type===16||vf(e)},nI=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},_l={type:17,number:0,flags:Zm},tx={type:16,number:50,flags:Zm},Af={type:16,number:100,flags:Zm},mm=function(e,n,i){var l=e[0],h=e[1];return[Ps(l,n),Ps(typeof h<"u"?h:l,i)]},Ps=function(e,n){if(e.type===16)return e.number/100*n;if(Xm(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},iI="deg",sI="grad",oI="rad",aI="turn",Gy={name:"angle",parse:function(e,n){if(n.type===15)switch(n.unit){case iI:return Math.PI*n.number/180;case sI:return Math.PI/200*n.number;case oI:return n.number;case aI:return Math.PI*2*n.number}throw new Error("Unsupported angle type")}},lI=function(e){return e.type===15&&(e.unit===iI||e.unit===sI||e.unit===oI||e.unit===aI)},cI=function(e){var n=e.filter(As).map(function(i){return i.value}).join(" ");switch(n){case"to bottom right":case"to right bottom":case"left top":case"top left":return[_l,_l];case"to top":case"bottom":return XA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[_l,Af];case"to right":case"left":return XA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Af,Af];case"to bottom":case"top":return XA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Af,_l];case"to left":case"right":return XA(270)}return 0},XA=function(e){return Math.PI*e/180},pf={name:"color",parse:function(e,n){if(n.type===18){var i=i8[n.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+n.name+'"');return i(e,n.values)}if(n.type===5){if(n.value.length===3){var l=n.value.substring(0,1),h=n.value.substring(1,2),f=n.value.substring(2,3);return uf(parseInt(l+l,16),parseInt(h+h,16),parseInt(f+f,16),1)}if(n.value.length===4){var l=n.value.substring(0,1),h=n.value.substring(1,2),f=n.value.substring(2,3),m=n.value.substring(3,4);return uf(parseInt(l+l,16),parseInt(h+h,16),parseInt(f+f,16),parseInt(m+m,16)/255)}if(n.value.length===6){var l=n.value.substring(0,2),h=n.value.substring(2,4),f=n.value.substring(4,6);return uf(parseInt(l,16),parseInt(h,16),parseInt(f,16),1)}if(n.value.length===8){var l=n.value.substring(0,2),h=n.value.substring(2,4),f=n.value.substring(4,6),m=n.value.substring(6,8);return uf(parseInt(l,16),parseInt(h,16),parseInt(f,16),parseInt(m,16)/255)}}if(n.type===20){var a=kh[n.value.toUpperCase()];if(typeof a<"u")return a}return kh.TRANSPARENT}},mf=function(e){return(255&e)===0},Ja=function(e){var n=255&e,i=255&e>>8,l=255&e>>16,h=255&e>>24;return n<255?"rgba("+h+","+l+","+i+","+n/255+")":"rgb("+h+","+l+","+i+")"},uf=function(e,n,i,l){return(e<<24|n<<16|i<<8|Math.round(l*255)<<0)>>>0},_B=function(e,n){if(e.type===17)return e.number;if(e.type===16){var i=n===3?1:255;return n===3?e.number/100*i:Math.round(e.number/100*i)}return 0},wB=function(e,n){var i=n.filter(gp);if(i.length===3){var l=i.map(_B),h=l[0],f=l[1],m=l[2];return uf(h,f,m,1)}if(i.length===4){var a=i.map(_B),h=a[0],f=a[1],m=a[2],x=a[3];return uf(h,f,m,x)}return 0};function __(e,n,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(n-e)*i*6+e:i<1/2?n:i<2/3?(n-e)*6*(2/3-i)+e:e}var xB=function(e,n){var i=n.filter(gp),l=i[0],h=i[1],f=i[2],m=i[3],a=(l.type===17?XA(l.number):Gy.parse(e,l))/(Math.PI*2),x=ia(h)?h.number/100:0,S=ia(f)?f.number/100:0,I=typeof m<"u"&&ia(m)?Ps(m,1):1;if(x===0)return uf(S*255,S*255,S*255,1);var U=S<=.5?S*(x+1):S+x-S*x,Q=S*2-U,P=__(Q,U,a+1/3),$=__(Q,U,a),z=__(Q,U,a-1/3);return uf(P*255,$*255,z*255,I)},i8={hsl:xB,hsla:xB,rgb:wB,rgba:wB},wm=function(e,n){return pf.parse(e,tI.create(n).parseComponentValue())},kh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},s8={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(i){if(As(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},o8={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ky=function(e,n){var i=pf.parse(e,n[0]),l=n[1];return l&&ia(l)?{color:i,stop:l}:{color:i,stop:null}},bB=function(e,n){var i=e[0],l=e[e.length-1];i.stop===null&&(i.stop=_l),l.stop===null&&(l.stop=Af);for(var h=[],f=0,m=0;m<e.length;m++){var a=e[m].stop;if(a!==null){var x=Ps(a,n);x>f?h.push(x):h.push(f),f=x}else h.push(null)}for(var S=null,m=0;m<h.length;m++){var I=h[m];if(I===null)S===null&&(S=m);else if(S!==null){for(var U=m-S,Q=h[S-1],P=(I-Q)/(U+1),$=1;$<=U;$++)h[S+$-1]=P*$;S=null}}return e.map(function(z,O){var W=z.color;return{color:W,stop:Math.max(Math.min(1,h[O]/n),0)}})},a8=function(e,n,i){var l=n/2,h=i/2,f=Ps(e[0],n)-l,m=h-Ps(e[1],i);return(Math.atan2(m,f)+Math.PI*2)%(Math.PI*2)},l8=function(e,n,i){var l=typeof e=="number"?e:a8(e,n,i),h=Math.abs(n*Math.sin(l))+Math.abs(i*Math.cos(l)),f=n/2,m=i/2,a=h/2,x=Math.sin(l-Math.PI/2)*a,S=Math.cos(l-Math.PI/2)*a;return[h,f-S,f+S,m-x,m+x]},wu=function(e,n){return Math.sqrt(e*e+n*n)},BB=function(e,n,i,l,h){var f=[[0,0],[0,n],[e,0],[e,n]];return f.reduce(function(m,a){var x=a[0],S=a[1],I=wu(i-x,l-S);return(h?I<m.optimumDistance:I>m.optimumDistance)?{optimumCorner:a,optimumDistance:I}:m},{optimumDistance:h?1/0:-1/0,optimumCorner:null}).optimumCorner},c8=function(e,n,i,l,h){var f=0,m=0;switch(e.size){case 0:e.shape===0?f=m=Math.min(Math.abs(n),Math.abs(n-l),Math.abs(i),Math.abs(i-h)):e.shape===1&&(f=Math.min(Math.abs(n),Math.abs(n-l)),m=Math.min(Math.abs(i),Math.abs(i-h)));break;case 2:if(e.shape===0)f=m=Math.min(wu(n,i),wu(n,i-h),wu(n-l,i),wu(n-l,i-h));else if(e.shape===1){var a=Math.min(Math.abs(i),Math.abs(i-h))/Math.min(Math.abs(n),Math.abs(n-l)),x=BB(l,h,n,i,!0),S=x[0],I=x[1];f=wu(S-n,(I-i)/a),m=a*f}break;case 1:e.shape===0?f=m=Math.max(Math.abs(n),Math.abs(n-l),Math.abs(i),Math.abs(i-h)):e.shape===1&&(f=Math.max(Math.abs(n),Math.abs(n-l)),m=Math.max(Math.abs(i),Math.abs(i-h)));break;case 3:if(e.shape===0)f=m=Math.max(wu(n,i),wu(n,i-h),wu(n-l,i),wu(n-l,i-h));else if(e.shape===1){var a=Math.max(Math.abs(i),Math.abs(i-h))/Math.max(Math.abs(n),Math.abs(n-l)),U=BB(l,h,n,i,!1),S=U[0],I=U[1];f=wu(S-n,(I-i)/a),m=a*f}break}return Array.isArray(e.size)&&(f=Ps(e.size[0],l),m=e.size.length===2?Ps(e.size[1],h):f),[f,m]},A8=function(e,n){var i=XA(180),l=[];return rh(n).forEach(function(h,f){if(f===0){var m=h[0];if(m.type===20&&m.value==="to"){i=cI(h);return}else if(lI(m)){i=Gy.parse(e,m);return}}var a=Ky(e,h);l.push(a)}),{angle:i,stops:l,type:1}},A0=function(e,n){var i=XA(180),l=[];return rh(n).forEach(function(h,f){if(f===0){var m=h[0];if(m.type===20&&["top","left","right","bottom"].indexOf(m.value)!==-1){i=cI(h);return}else if(lI(m)){i=(Gy.parse(e,m)+XA(270))%XA(360);return}}var a=Ky(e,h);l.push(a)}),{angle:i,stops:l,type:1}},u8=function(e,n){var i=XA(180),l=[],h=1,f=0,m=3,a=[];return rh(n).forEach(function(x,S){var I=x[0];if(S===0){if(As(I)&&I.value==="linear"){h=1;return}else if(As(I)&&I.value==="radial"){h=2;return}}if(I.type===18){if(I.name==="from"){var U=pf.parse(e,I.values[0]);l.push({stop:_l,color:U})}else if(I.name==="to"){var U=pf.parse(e,I.values[0]);l.push({stop:Af,color:U})}else if(I.name==="color-stop"){var Q=I.values.filter(gp);if(Q.length===2){var U=pf.parse(e,Q[1]),P=Q[0];Bp(P)&&l.push({stop:{type:16,number:P.number*100,flags:P.flags},color:U})}}}}),h===1?{angle:(i+XA(180))%XA(360),stops:l,type:h}:{size:m,shape:f,stops:l,position:a,type:h}},AI="closest-side",uI="farthest-side",hI="closest-corner",fI="farthest-corner",dI="circle",pI="ellipse",mI="cover",gI="contain",h8=function(e,n){var i=0,l=3,h=[],f=[];return rh(n).forEach(function(m,a){var x=!0;if(a===0){var S=!1;x=m.reduce(function(U,Q){if(S)if(As(Q))switch(Q.value){case"center":return f.push(tx),U;case"top":case"left":return f.push(_l),U;case"right":case"bottom":return f.push(Af),U}else(ia(Q)||vf(Q))&&f.push(Q);else if(As(Q))switch(Q.value){case dI:return i=0,!1;case pI:return i=1,!1;case"at":return S=!0,!1;case AI:return l=0,!1;case mI:case uI:return l=1,!1;case gI:case hI:return l=2,!1;case fI:return l=3,!1}else if(vf(Q)||ia(Q))return Array.isArray(l)||(l=[]),l.push(Q),!1;return U},x)}if(x){var I=Ky(e,m);h.push(I)}}),{size:l,shape:i,stops:h,position:f,type:2}},u0=function(e,n){var i=0,l=3,h=[],f=[];return rh(n).forEach(function(m,a){var x=!0;if(a===0?x=m.reduce(function(I,U){if(As(U))switch(U.value){case"center":return f.push(tx),!1;case"top":case"left":return f.push(_l),!1;case"right":case"bottom":return f.push(Af),!1}else if(ia(U)||vf(U))return f.push(U),!1;return I},x):a===1&&(x=m.reduce(function(I,U){if(As(U))switch(U.value){case dI:return i=0,!1;case pI:return i=1,!1;case gI:case AI:return l=0,!1;case uI:return l=1,!1;case hI:return l=2,!1;case mI:case fI:return l=3,!1}else if(vf(U)||ia(U))return Array.isArray(l)||(l=[]),l.push(U),!1;return I},x)),x){var S=Ky(e,m);h.push(S)}}),{size:l,shape:i,stops:h,position:f,type:2}},f8=function(e){return e.type===1},d8=function(e){return e.type===2},rx={name:"image",parse:function(e,n){if(n.type===22){var i={url:n.value,type:0};return e.cache.addImage(n.value),i}if(n.type===18){var l=yI[n.name];if(typeof l>"u")throw new Error('Attempting to parse an unsupported image function "'+n.name+'"');return l(e,n.values)}throw new Error("Unsupported image type "+n.type)}};function p8(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!yI[e.name])}var yI={"linear-gradient":A8,"-moz-linear-gradient":A0,"-ms-linear-gradient":A0,"-o-linear-gradient":A0,"-webkit-linear-gradient":A0,"radial-gradient":h8,"-moz-radial-gradient":u0,"-ms-radial-gradient":u0,"-o-radial-gradient":u0,"-webkit-radial-gradient":u0,"-webkit-gradient":u8},m8={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var i=n[0];return i.type===20&&i.value==="none"?[]:n.filter(function(l){return gp(l)&&p8(l)}).map(function(l){return rx.parse(e,l)})}},g8={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(i){if(As(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},y8={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,n){return rh(n).map(function(i){return i.filter(ia)}).map(nI)}},v8={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,n){return rh(n).map(function(i){return i.filter(As).map(function(l){return l.value}).join(" ")}).map(_8)}},_8=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},lp;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(lp||(lp={}));var w8={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,n){return rh(n).map(function(i){return i.filter(x8)})}},x8=function(e){return As(e)||ia(e)},qy=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},b8=qy("top"),B8=qy("right"),C8=qy("bottom"),S8=qy("left"),$y=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(n,i){return nI(i.filter(ia))}}},E8=$y("top-left"),F8=$y("top-right"),I8=$y("bottom-right"),T8=$y("bottom-left"),Wy=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(n,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},P8=Wy("top"),L8=Wy("right"),M8=Wy("bottom"),k8=Wy("left"),Zy=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(n,i){return Xm(i)?i.number:0}}},U8=Zy("top"),D8=Zy("right"),R8=Zy("bottom"),N8=Zy("left"),Q8={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},O8={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,n){switch(n){case"rtl":return 1;case"ltr":default:return 0}}},z8={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,n){return n.filter(As).reduce(function(i,l){return i|H8(l.value)},0)}},H8=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},j8={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},V8={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,n){return n.type===20&&n.value==="normal"?0:n.type===17||n.type===15?n.number:0}},oy;(function(e){e.NORMAL="normal",e.STRICT="strict"})(oy||(oy={}));var G8={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"strict":return oy.STRICT;case"normal":default:return oy.NORMAL}}},K8={name:"line-height",initialValue:"normal",prefix:!1,type:4},CB=function(e,n){return As(e)&&e.value==="normal"?1.2*n:e.type===17?n*e.number:ia(e)?Ps(e,n):n},q8={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,n){return n.type===20&&n.value==="none"?null:rx.parse(e,n)}},$8={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,n){switch(n){case"inside":return 0;case"outside":default:return 1}}},Z1={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Xy=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},W8=Xy("top"),Z8=Xy("right"),X8=Xy("bottom"),Y8=Xy("left"),J8={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,n){return n.filter(As).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},eO={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-word":return"break-word";case"normal":default:return"normal"}}},Yy=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},tO=Yy("top"),rO=Yy("right"),nO=Yy("bottom"),iO=Yy("left"),sO={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,n){switch(n){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},oO={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,n){switch(n){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},aO={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&W1(n[0],"none")?[]:rh(n).map(function(i){for(var l={color:kh.TRANSPARENT,offsetX:_l,offsetY:_l,blur:_l},h=0,f=0;f<i.length;f++){var m=i[f];vf(m)?(h===0?l.offsetX=m:h===1?l.offsetY=m:l.blur=m,h++):l.color=pf.parse(e,m)}return l})}},lO={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},cO={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,n){if(n.type===20&&n.value==="none")return null;if(n.type===18){var i=hO[n.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+n.name+'"');return i(n.values)}return null}},AO=function(e){var n=e.filter(function(i){return i.type===17}).map(function(i){return i.number});return n.length===6?n:null},uO=function(e){var n=e.filter(function(x){return x.type===17}).map(function(x){return x.number}),i=n[0],l=n[1];n[2],n[3];var h=n[4],f=n[5];n[6],n[7],n[8],n[9],n[10],n[11];var m=n[12],a=n[13];return n[14],n[15],n.length===16?[i,l,h,f,m,a]:null},hO={matrix:AO,matrix3d:uO},SB={type:16,number:50,flags:Zm},fO=[SB,SB],dO={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,n){var i=n.filter(ia);return i.length!==2?fO:[i[0],i[1]]}},pO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},xm;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(xm||(xm={}));var mO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-all":return xm.BREAK_ALL;case"keep-all":return xm.KEEP_ALL;case"normal":default:return xm.NORMAL}}},gO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,n){if(n.type===20)return{auto:!0,order:0};if(Bp(n))return{auto:!1,order:n.number};throw new Error("Invalid z-index number parsed")}},vI={name:"time",parse:function(e,n){if(n.type===15)switch(n.unit.toLowerCase()){case"s":return 1e3*n.number;case"ms":return n.number}throw new Error("Unsupported time type")}},yO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,n){return Bp(n)?n.number:1}},vO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_O={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,n){return n.filter(As).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},wO={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,n){var i=[],l=[];return n.forEach(function(h){switch(h.type){case 20:case 0:i.push(h.value);break;case 17:i.push(h.number.toString());break;case 4:l.push(i.join(" ")),i.length=0;break}}),i.length&&l.push(i.join(" ")),l.map(function(h){return h.indexOf(" ")===-1?h:"'"+h+"'"})}},xO={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},bO={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,n){if(Bp(n))return n.number;if(As(n))switch(n.value){case"bold":return 700;case"normal":default:return 400}return 400}},BO={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.filter(As).map(function(i){return i.value})}},CO={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},wa=function(e,n){return(e&n)!==0},SO={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var i=n[0];return i.type===20&&i.value==="none"?[]:n}},EO={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var i=n[0];if(i.type===20&&i.value==="none")return null;for(var l=[],h=n.filter(rI),f=0;f<h.length;f++){var m=h[f],a=h[f+1];if(m.type===20){var x=a&&Bp(a)?a.number:1;l.push({counter:m.value,increment:x})}}return l}},FO={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return[];for(var i=[],l=n.filter(rI),h=0;h<l.length;h++){var f=l[h],m=l[h+1];if(As(f)&&f.value!=="none"){var a=m&&Bp(m)?m.number:0;i.push({counter:f.value,reset:a})}}return i}},IO={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,n){return n.filter(Xm).map(function(i){return vI.parse(e,i)})}},TO={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var i=n[0];if(i.type===20&&i.value==="none")return null;var l=[],h=n.filter(r8);if(h.length%2!==0)return null;for(var f=0;f<h.length;f+=2){var m=h[f].value,a=h[f+1].value;l.push({open:m,close:a})}return l}},EB=function(e,n,i){if(!e)return"";var l=e[Math.min(n,e.length-1)];return l?i?l.open:l.close:""},PO={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&W1(n[0],"none")?[]:rh(n).map(function(i){for(var l={color:255,offsetX:_l,offsetY:_l,blur:_l,spread:_l,inset:!1},h=0,f=0;f<i.length;f++){var m=i[f];W1(m,"inset")?l.inset=!0:vf(m)?(h===0?l.offsetX=m:h===1?l.offsetY=m:h===2?l.blur=m:l.spread=m,h++):l.color=pf.parse(e,m)}return l})}},LO={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,n){var i=[0,1,2],l=[];return n.filter(As).forEach(function(h){switch(h.value){case"stroke":l.push(1);break;case"fill":l.push(0);break;case"markers":l.push(2);break}}),i.forEach(function(h){l.indexOf(h)===-1&&l.push(h)}),l}},MO={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},kO={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Xm(n)?n.number:0}},UO=(function(){function e(n,i){var l,h;this.animationDuration=Xr(n,IO,i.animationDuration),this.backgroundClip=Xr(n,s8,i.backgroundClip),this.backgroundColor=Xr(n,o8,i.backgroundColor),this.backgroundImage=Xr(n,m8,i.backgroundImage),this.backgroundOrigin=Xr(n,g8,i.backgroundOrigin),this.backgroundPosition=Xr(n,y8,i.backgroundPosition),this.backgroundRepeat=Xr(n,v8,i.backgroundRepeat),this.backgroundSize=Xr(n,w8,i.backgroundSize),this.borderTopColor=Xr(n,b8,i.borderTopColor),this.borderRightColor=Xr(n,B8,i.borderRightColor),this.borderBottomColor=Xr(n,C8,i.borderBottomColor),this.borderLeftColor=Xr(n,S8,i.borderLeftColor),this.borderTopLeftRadius=Xr(n,E8,i.borderTopLeftRadius),this.borderTopRightRadius=Xr(n,F8,i.borderTopRightRadius),this.borderBottomRightRadius=Xr(n,I8,i.borderBottomRightRadius),this.borderBottomLeftRadius=Xr(n,T8,i.borderBottomLeftRadius),this.borderTopStyle=Xr(n,P8,i.borderTopStyle),this.borderRightStyle=Xr(n,L8,i.borderRightStyle),this.borderBottomStyle=Xr(n,M8,i.borderBottomStyle),this.borderLeftStyle=Xr(n,k8,i.borderLeftStyle),this.borderTopWidth=Xr(n,U8,i.borderTopWidth),this.borderRightWidth=Xr(n,D8,i.borderRightWidth),this.borderBottomWidth=Xr(n,R8,i.borderBottomWidth),this.borderLeftWidth=Xr(n,N8,i.borderLeftWidth),this.boxShadow=Xr(n,PO,i.boxShadow),this.color=Xr(n,Q8,i.color),this.direction=Xr(n,O8,i.direction),this.display=Xr(n,z8,i.display),this.float=Xr(n,j8,i.cssFloat),this.fontFamily=Xr(n,wO,i.fontFamily),this.fontSize=Xr(n,xO,i.fontSize),this.fontStyle=Xr(n,CO,i.fontStyle),this.fontVariant=Xr(n,BO,i.fontVariant),this.fontWeight=Xr(n,bO,i.fontWeight),this.letterSpacing=Xr(n,V8,i.letterSpacing),this.lineBreak=Xr(n,G8,i.lineBreak),this.lineHeight=Xr(n,K8,i.lineHeight),this.listStyleImage=Xr(n,q8,i.listStyleImage),this.listStylePosition=Xr(n,$8,i.listStylePosition),this.listStyleType=Xr(n,Z1,i.listStyleType),this.marginTop=Xr(n,W8,i.marginTop),this.marginRight=Xr(n,Z8,i.marginRight),this.marginBottom=Xr(n,X8,i.marginBottom),this.marginLeft=Xr(n,Y8,i.marginLeft),this.opacity=Xr(n,yO,i.opacity);var f=Xr(n,J8,i.overflow);this.overflowX=f[0],this.overflowY=f[f.length>1?1:0],this.overflowWrap=Xr(n,eO,i.overflowWrap),this.paddingTop=Xr(n,tO,i.paddingTop),this.paddingRight=Xr(n,rO,i.paddingRight),this.paddingBottom=Xr(n,nO,i.paddingBottom),this.paddingLeft=Xr(n,iO,i.paddingLeft),this.paintOrder=Xr(n,LO,i.paintOrder),this.position=Xr(n,oO,i.position),this.textAlign=Xr(n,sO,i.textAlign),this.textDecorationColor=Xr(n,vO,(l=i.textDecorationColor)!==null&&l!==void 0?l:i.color),this.textDecorationLine=Xr(n,_O,(h=i.textDecorationLine)!==null&&h!==void 0?h:i.textDecoration),this.textShadow=Xr(n,aO,i.textShadow),this.textTransform=Xr(n,lO,i.textTransform),this.transform=Xr(n,cO,i.transform),this.transformOrigin=Xr(n,dO,i.transformOrigin),this.visibility=Xr(n,pO,i.visibility),this.webkitTextStrokeColor=Xr(n,MO,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xr(n,kO,i.webkitTextStrokeWidth),this.wordBreak=Xr(n,mO,i.wordBreak),this.zIndex=Xr(n,gO,i.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return mf(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return wa(this.display,4)||wa(this.display,33554432)||wa(this.display,268435456)||wa(this.display,536870912)||wa(this.display,67108864)||wa(this.display,134217728)},e})(),DO=(function(){function e(n,i){this.content=Xr(n,SO,i.content),this.quotes=Xr(n,TO,i.quotes)}return e})(),FB=(function(){function e(n,i){this.counterIncrement=Xr(n,EO,i.counterIncrement),this.counterReset=Xr(n,FO,i.counterReset)}return e})(),Xr=function(e,n,i){var l=new eI,h=i!==null&&typeof i<"u"?i.toString():n.initialValue;l.write(h);var f=new tI(l.read());switch(n.type){case 2:var m=f.parseComponentValue();return n.parse(e,As(m)?m.value:n.initialValue);case 0:return n.parse(e,f.parseComponentValue());case 1:return n.parse(e,f.parseComponentValues());case 4:return f.parseComponentValue();case 3:switch(n.format){case"angle":return Gy.parse(e,f.parseComponentValue());case"color":return pf.parse(e,f.parseComponentValue());case"image":return rx.parse(e,f.parseComponentValue());case"length":var a=f.parseComponentValue();return vf(a)?a:_l;case"length-percentage":var x=f.parseComponentValue();return ia(x)?x:_l;case"time":return vI.parse(e,f.parseComponentValue())}break}},RO="data-html2canvas-debug",NO=function(e){var n=e.getAttribute(RO);switch(n){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},X1=function(e,n){var i=NO(e);return i===1||n===i},nh=(function(){function e(n,i){if(this.context=n,this.textNodes=[],this.elements=[],this.flags=0,X1(i,3))debugger;this.styles=new UO(n,window.getComputedStyle(i,null)),ew(i)&&(this.styles.animationDuration.some(function(l){return l>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=jy(this.context,i),X1(i,4)&&(this.flags|=16)}return e})(),QO="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",IB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var h0=0;h0<IB.length;h0++)gm[IB.charCodeAt(h0)]=h0;var OO=function(e){var n=e.length*.75,i=e.length,l,h=0,f,m,a,x;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var S=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),I=Array.isArray(S)?S:new Uint8Array(S);for(l=0;l<i;l+=4)f=gm[e.charCodeAt(l)],m=gm[e.charCodeAt(l+1)],a=gm[e.charCodeAt(l+2)],x=gm[e.charCodeAt(l+3)],I[h++]=f<<2|m>>4,I[h++]=(m&15)<<4|a>>2,I[h++]=(a&3)<<6|x&63;return S},zO=function(e){for(var n=e.length,i=[],l=0;l<n;l+=2)i.push(e[l+1]<<8|e[l]);return i},HO=function(e){for(var n=e.length,i=[],l=0;l<n;l+=4)i.push(e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l]);return i},Jf=5,nx=11,w_=2,jO=nx-Jf,_I=65536>>Jf,VO=1<<Jf,x_=VO-1,GO=1024>>Jf,KO=_I+GO,qO=KO,$O=32,WO=qO+$O,ZO=65536>>nx,XO=1<<jO,YO=XO-1,TB=function(e,n,i){return e.slice?e.slice(n,i):new Uint16Array(Array.prototype.slice.call(e,n,i))},JO=function(e,n,i){return e.slice?e.slice(n,i):new Uint32Array(Array.prototype.slice.call(e,n,i))},ez=function(e,n){var i=OO(e),l=Array.isArray(i)?HO(i):new Uint32Array(i),h=Array.isArray(i)?zO(i):new Uint16Array(i),f=24,m=TB(h,f/2,l[4]/2),a=l[5]===2?TB(h,(f+l[4])/2):JO(l,Math.ceil((f+l[4])/4));return new tz(l[0],l[1],l[2],l[3],m,a)},tz=(function(){function e(n,i,l,h,f,m){this.initialValue=n,this.errorValue=i,this.highStart=l,this.highValueIndex=h,this.index=f,this.data=m}return e.prototype.get=function(n){var i;if(n>=0){if(n<55296||n>56319&&n<=65535)return i=this.index[n>>Jf],i=(i<<w_)+(n&x_),this.data[i];if(n<=65535)return i=this.index[_I+(n-55296>>Jf)],i=(i<<w_)+(n&x_),this.data[i];if(n<this.highStart)return i=WO-ZO+(n>>nx),i=this.index[i],i+=n>>Jf&YO,i=this.index[i],i=(i<<w_)+(n&x_),this.data[i];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),PB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rz=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var f0=0;f0<PB.length;f0++)rz[PB.charCodeAt(f0)]=f0;var nz=1,b_=2,B_=3,LB=4,MB=5,iz=7,kB=8,C_=9,S_=10,UB=11,DB=12,RB=13,NB=14,E_=15,sz=function(e){for(var n=[],i=0,l=e.length;i<l;){var h=e.charCodeAt(i++);if(h>=55296&&h<=56319&&i<l){var f=e.charCodeAt(i++);(f&64512)===56320?n.push(((h&1023)<<10)+(f&1023)+65536):(n.push(h),i--)}else n.push(h)}return n},oz=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var l=[],h=-1,f="";++h<i;){var m=e[h];m<=65535?l.push(m):(m-=65536,l.push((m>>10)+55296,m%1024+56320)),(h+1===i||l.length>16384)&&(f+=String.fromCharCode.apply(String,l),l.length=0)}return f},az=ez(QO),WA="",F_="",lz=function(e){return az.get(e)},cz=function(e,n,i){var l=i-2,h=n[l],f=n[i-1],m=n[i];if(f===b_&&m===B_)return WA;if(f===b_||f===B_||f===LB||m===b_||m===B_||m===LB)return F_;if(f===kB&&[kB,C_,UB,DB].indexOf(m)!==-1||(f===UB||f===C_)&&(m===C_||m===S_)||(f===DB||f===S_)&&m===S_||m===RB||m===MB||m===iz||f===nz)return WA;if(f===RB&&m===NB){for(;h===MB;)h=n[--l];if(h===NB)return WA}if(f===E_&&m===E_){for(var a=0;h===E_;)a++,h=n[--l];if(a%2===0)return WA}return F_},Az=function(e){var n=sz(e),i=n.length,l=0,h=0,f=n.map(lz);return{next:function(){if(l>=i)return{done:!0,value:null};for(var m=WA;l<i&&(m=cz(n,f,++l))===WA;);if(m!==WA||l===i){var a=oz.apply(null,n.slice(h,l));return h=l,{value:a,done:!1}}return{done:!0,value:null}}}},uz=function(e){for(var n=Az(e),i=[],l;!(l=n.next()).done;)l.value&&i.push(l.value.slice());return i},hz=function(e){var n=123;if(e.createRange){var i=e.createRange();if(i.getBoundingClientRect){var l=e.createElement("boundtest");l.style.height=n+"px",l.style.display="block",e.body.appendChild(l),i.selectNode(l);var h=i.getBoundingClientRect(),f=Math.round(h.height);if(e.body.removeChild(l),f===n)return!0}}return!1},fz=function(e){var n=e.createElement("boundtest");n.style.width="50px",n.style.display="block",n.style.fontSize="12px",n.style.letterSpacing="0px",n.style.wordSpacing="0px",e.body.appendChild(n);var i=e.createRange();n.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var l=n.firstChild,h=Vy(l.data).map(function(x){return Po(x)}),f=0,m={},a=h.every(function(x,S){i.setStart(l,f),i.setEnd(l,f+x.length);var I=i.getBoundingClientRect();f+=x.length;var U=I.x>m.x||I.y>m.y;return m=I,S===0?!0:U});return e.body.removeChild(n),a},dz=function(){return typeof new Image().crossOrigin<"u"},pz=function(){return typeof new XMLHttpRequest().responseType=="string"},mz=function(e){var n=new Image,i=e.createElement("canvas"),l=i.getContext("2d");if(!l)return!1;n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{l.drawImage(n,0,0),i.toDataURL()}catch{return!1}return!0},QB=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},gz=function(e){var n=e.createElement("canvas"),i=100;n.width=i,n.height=i;var l=n.getContext("2d");if(!l)return Promise.reject(!1);l.fillStyle="rgb(0, 255, 0)",l.fillRect(0,0,i,i);var h=new Image,f=n.toDataURL();h.src=f;var m=Y1(i,i,0,0,h);return l.fillStyle="red",l.fillRect(0,0,i,i),OB(m).then(function(a){l.drawImage(a,0,0);var x=l.getImageData(0,0,i,i).data;l.fillStyle="red",l.fillRect(0,0,i,i);var S=e.createElement("div");return S.style.backgroundImage="url("+f+")",S.style.height=i+"px",QB(x)?OB(Y1(i,i,0,0,S)):Promise.reject(!1)}).then(function(a){return l.drawImage(a,0,0),QB(l.getImageData(0,0,i,i).data)}).catch(function(){return!1})},Y1=function(e,n,i,l,h){var f="http://www.w3.org/2000/svg",m=document.createElementNS(f,"svg"),a=document.createElementNS(f,"foreignObject");return m.setAttributeNS(null,"width",e.toString()),m.setAttributeNS(null,"height",n.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",i.toString()),a.setAttributeNS(null,"y",l.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),m.appendChild(a),a.appendChild(h),m},OB=function(e){return new Promise(function(n,i){var l=new Image;l.onload=function(){return n(l)},l.onerror=i,l.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},vl={get SUPPORT_RANGE_BOUNDS(){var e=hz(document);return Object.defineProperty(vl,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=vl.SUPPORT_RANGE_BOUNDS&&fz(document);return Object.defineProperty(vl,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=mz(document);return Object.defineProperty(vl,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?gz(document):Promise.resolve(!1);return Object.defineProperty(vl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=dz();return Object.defineProperty(vl,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=pz();return Object.defineProperty(vl,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(vl,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(vl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},bm=(function(){function e(n,i){this.text=n,this.bounds=i}return e})(),yz=function(e,n,i,l){var h=wz(n,i),f=[],m=0;return h.forEach(function(a){if(i.textDecorationLine.length||a.trim().length>0)if(vl.SUPPORT_RANGE_BOUNDS){var x=zB(l,m,a.length).getClientRects();if(x.length>1){var S=ix(a),I=0;S.forEach(function(Q){f.push(new bm(Q,Rh.fromDOMRectList(e,zB(l,I+m,Q.length).getClientRects()))),I+=Q.length})}else f.push(new bm(a,Rh.fromDOMRectList(e,x)))}else{var U=l.splitText(a.length);f.push(new bm(a,vz(e,l))),l=U}else vl.SUPPORT_RANGE_BOUNDS||(l=l.splitText(a.length));m+=a.length}),f},vz=function(e,n){var i=n.ownerDocument;if(i){var l=i.createElement("html2canvaswrapper");l.appendChild(n.cloneNode(!0));var h=n.parentNode;if(h){h.replaceChild(l,n);var f=jy(e,l);return l.firstChild&&h.replaceChild(l.firstChild,l),f}}return Rh.EMPTY},zB=function(e,n,i){var l=e.ownerDocument;if(!l)throw new Error("Node has no owner document");var h=l.createRange();return h.setStart(e,n),h.setEnd(e,n+i),h},ix=function(e){if(vl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(n.segment(e)).map(function(i){return i.segment})}return uz(e)},_z=function(e,n){if(vl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(e)).map(function(l){return l.segment})}return bz(e,n)},wz=function(e,n){return n.letterSpacing!==0?ix(e):_z(e,n)},xz=[32,160,4961,65792,65793,4153,4241],bz=function(e,n){for(var i=Z6(e,{lineBreak:n.lineBreak,wordBreak:n.overflowWrap==="break-word"?"break-word":n.wordBreak}),l=[],h,f=function(){if(h.value){var m=h.value.slice(),a=Vy(m),x="";a.forEach(function(S){xz.indexOf(S)===-1?x+=Po(S):(x.length&&l.push(x),l.push(Po(S)),x="")}),x.length&&l.push(x)}};!(h=i.next()).done;)f();return l},Bz=(function(){function e(n,i,l){this.text=Cz(i.data,l.textTransform),this.textBounds=yz(n,this.text,l,i)}return e})(),Cz=function(e,n){switch(n){case 1:return e.toLowerCase();case 3:return e.replace(Sz,Ez);case 2:return e.toUpperCase();default:return e}},Sz=/(^|\s|:|-|\(|\))([a-z])/g,Ez=function(e,n,i){return e.length>0?n+i.toUpperCase():e},wI=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.src=l.currentSrc||l.src,h.intrinsicWidth=l.naturalWidth,h.intrinsicHeight=l.naturalHeight,h.context.cache.addImage(h.src),h}return n})(nh),xI=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.canvas=l,h.intrinsicWidth=l.width,h.intrinsicHeight=l.height,h}return n})(nh),bI=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this,f=new XMLSerializer,m=jy(i,l);return l.setAttribute("width",m.width+"px"),l.setAttribute("height",m.height+"px"),h.svg="data:image/svg+xml,"+encodeURIComponent(f.serializeToString(l)),h.intrinsicWidth=l.width.baseVal.value,h.intrinsicHeight=l.height.baseVal.value,h.context.cache.addImage(h.svg),h}return n})(nh),BI=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.value=l.value,h}return n})(nh),J1=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.start=l.start,h.reversed=typeof l.reversed=="boolean"&&l.reversed===!0,h}return n})(nh),Fz=[{type:15,flags:0,unit:"px",number:3}],Iz=[{type:16,flags:0,number:50}],Tz=function(e){return e.width>e.height?new Rh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Rh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Pz=function(e){var n=e.type===Lz?new Array(e.value.length+1).join(""):e.value;return n.length===0?e.placeholder||"":n},ay="checkbox",ly="radio",Lz="password",HB=707406591,sx=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;switch(h.type=l.type.toLowerCase(),h.checked=l.checked,h.value=Pz(l),(h.type===ay||h.type===ly)&&(h.styles.backgroundColor=3739148031,h.styles.borderTopColor=h.styles.borderRightColor=h.styles.borderBottomColor=h.styles.borderLeftColor=2779096575,h.styles.borderTopWidth=h.styles.borderRightWidth=h.styles.borderBottomWidth=h.styles.borderLeftWidth=1,h.styles.borderTopStyle=h.styles.borderRightStyle=h.styles.borderBottomStyle=h.styles.borderLeftStyle=1,h.styles.backgroundClip=[0],h.styles.backgroundOrigin=[0],h.bounds=Tz(h.bounds)),h.type){case ay:h.styles.borderTopRightRadius=h.styles.borderTopLeftRadius=h.styles.borderBottomRightRadius=h.styles.borderBottomLeftRadius=Fz;break;case ly:h.styles.borderTopRightRadius=h.styles.borderTopLeftRadius=h.styles.borderBottomRightRadius=h.styles.borderBottomLeftRadius=Iz;break}return h}return n})(nh),CI=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this,f=l.options[l.selectedIndex||0];return h.value=f&&f.text||"",h}return n})(nh),SI=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.value=l.value,h}return n})(nh),EI=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;h.src=l.src,h.width=parseInt(l.width,10)||0,h.height=parseInt(l.height,10)||0,h.backgroundColor=h.styles.backgroundColor;try{if(l.contentWindow&&l.contentWindow.document&&l.contentWindow.document.documentElement){h.tree=II(i,l.contentWindow.document.documentElement);var f=l.contentWindow.document.documentElement?wm(i,getComputedStyle(l.contentWindow.document.documentElement).backgroundColor):kh.TRANSPARENT,m=l.contentWindow.document.body?wm(i,getComputedStyle(l.contentWindow.document.body).backgroundColor):kh.TRANSPARENT;h.backgroundColor=mf(f)?mf(m)?h.styles.backgroundColor:m:f}}catch{}return h}return n})(nh),Mz=["OL","UL","MENU"],D0=function(e,n,i,l){for(var h=n.firstChild,f=void 0;h;h=f)if(f=h.nextSibling,TI(h)&&h.data.trim().length>0)i.textNodes.push(new Bz(e,h,i.styles));else if(rp(h))if(kI(h)&&h.assignedNodes)h.assignedNodes().forEach(function(a){return D0(e,a,i,l)});else{var m=FI(e,h);m.styles.isVisible()&&(kz(h,m,l)?m.flags|=4:Uz(m.styles)&&(m.flags|=2),Mz.indexOf(h.tagName)!==-1&&(m.flags|=8),i.elements.push(m),h.slot,h.shadowRoot?D0(e,h.shadowRoot,m,l):!cy(h)&&!PI(h)&&!Ay(h)&&D0(e,h,m,l))}},FI=function(e,n){return tw(n)?new wI(e,n):LI(n)?new xI(e,n):PI(n)?new bI(e,n):Dz(n)?new BI(e,n):Rz(n)?new J1(e,n):Nz(n)?new sx(e,n):Ay(n)?new CI(e,n):cy(n)?new SI(e,n):MI(n)?new EI(e,n):new nh(e,n)},II=function(e,n){var i=FI(e,n);return i.flags|=4,D0(e,n,i,i),i},kz=function(e,n,i){return n.styles.isPositionedWithZIndex()||n.styles.opacity<1||n.styles.isTransformed()||ox(e)&&i.styles.isTransparent()},Uz=function(e){return e.isPositioned()||e.isFloating()},TI=function(e){return e.nodeType===Node.TEXT_NODE},rp=function(e){return e.nodeType===Node.ELEMENT_NODE},ew=function(e){return rp(e)&&typeof e.style<"u"&&!R0(e)},R0=function(e){return typeof e.className=="object"},Dz=function(e){return e.tagName==="LI"},Rz=function(e){return e.tagName==="OL"},Nz=function(e){return e.tagName==="INPUT"},Qz=function(e){return e.tagName==="HTML"},PI=function(e){return e.tagName==="svg"},ox=function(e){return e.tagName==="BODY"},LI=function(e){return e.tagName==="CANVAS"},jB=function(e){return e.tagName==="VIDEO"},tw=function(e){return e.tagName==="IMG"},MI=function(e){return e.tagName==="IFRAME"},VB=function(e){return e.tagName==="STYLE"},Oz=function(e){return e.tagName==="SCRIPT"},cy=function(e){return e.tagName==="TEXTAREA"},Ay=function(e){return e.tagName==="SELECT"},kI=function(e){return e.tagName==="SLOT"},GB=function(e){return e.tagName.indexOf("-")>0},zz=(function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(n){var i=this.counters[n];return i&&i.length?i[i.length-1]:1},e.prototype.getCounterValues=function(n){var i=this.counters[n];return i||[]},e.prototype.pop=function(n){var i=this;n.forEach(function(l){return i.counters[l].pop()})},e.prototype.parse=function(n){var i=this,l=n.counterIncrement,h=n.counterReset,f=!0;l!==null&&l.forEach(function(a){var x=i.counters[a.counter];x&&a.increment!==0&&(f=!1,x.length||x.push(1),x[Math.max(0,x.length-1)]+=a.increment)});var m=[];return f&&h.forEach(function(a){var x=i.counters[a.counter];m.push(a.counter),x||(x=i.counters[a.counter]=[]),x.push(a.reset)}),m},e})(),KB={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},qB={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},jz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Vd=function(e,n,i,l,h,f){return e<n||e>i?Nm(e,h,f.length>0):l.integers.reduce(function(m,a,x){for(;e>=a;)e-=a,m+=l.values[x];return m},"")+f},UI=function(e,n,i,l){var h="";do i||e--,h=l(e)+h,e/=n;while(e*n>=n);return h},To=function(e,n,i,l,h){var f=i-n+1;return(e<0?"-":"")+(UI(Math.abs(e),f,l,function(m){return Po(Math.floor(m%f)+n)})+h)},Vf=function(e,n,i){i===void 0&&(i=". ");var l=n.length;return UI(Math.abs(e),l,!1,function(h){return n[Math.floor(h%l)]})+i},Xd=1,sf=2,of=4,ym=8,Th=function(e,n,i,l,h,f){if(e<-9999||e>9999)return Nm(e,4,h.length>0);var m=Math.abs(e),a=h;if(m===0)return n[0]+a;for(var x=0;m>0&&x<=4;x++){var S=m%10;S===0&&wa(f,Xd)&&a!==""?a=n[S]+a:S>1||S===1&&x===0||S===1&&x===1&&wa(f,sf)||S===1&&x===1&&wa(f,of)&&e>100||S===1&&x>1&&wa(f,ym)?a=n[S]+(x>0?i[x-1]:"")+a:S===1&&x>0&&(a=i[x-1]+a),m=Math.floor(m/10)}return(e<0?l:"")+a},$B="",WB="",ZB="",I_="",Nm=function(e,n,i){var l=i?". ":"",h=i?"":"",f=i?", ":"",m=i?" ":"";switch(n){case 0:return""+m;case 1:return""+m;case 2:return""+m;case 5:var a=To(e,48,57,!0,l);return a.length<4?"0"+a:a;case 4:return Vf(e,"",h);case 6:return Vd(e,1,3999,KB,3,l).toLowerCase();case 7:return Vd(e,1,3999,KB,3,l);case 8:return To(e,945,969,!1,l);case 9:return To(e,97,122,!1,l);case 10:return To(e,65,90,!1,l);case 11:return To(e,1632,1641,!0,l);case 12:case 49:return Vd(e,1,9999,qB,3,l);case 35:return Vd(e,1,9999,qB,3,l).toLowerCase();case 13:return To(e,2534,2543,!0,l);case 14:case 30:return To(e,6112,6121,!0,l);case 15:return Vf(e,"",h);case 16:return Vf(e,"",h);case 17:case 48:return Th(e,"",$B,"",h,sf|of|ym);case 47:return Th(e,"",WB,"",h,Xd|sf|of|ym);case 42:return Th(e,"",$B,"",h,sf|of|ym);case 41:return Th(e,"",WB,"",h,Xd|sf|of|ym);case 26:return Th(e,"","",ZB,h,0);case 25:return Th(e,"","",ZB,h,Xd|sf|of);case 31:return Th(e,"","",I_,f,Xd|sf|of);case 33:return Th(e,"","",I_,f,0);case 32:return Th(e,"","",I_,f,Xd|sf|of);case 18:return To(e,2406,2415,!0,l);case 20:return Vd(e,1,19999,jz,3,l);case 21:return To(e,2790,2799,!0,l);case 22:return To(e,2662,2671,!0,l);case 22:return Vd(e,1,10999,Hz,3,l);case 23:return Vf(e,"");case 24:return Vf(e,"");case 27:return To(e,3302,3311,!0,l);case 28:return Vf(e,"",h);case 29:return Vf(e,"",h);case 34:return To(e,3792,3801,!0,l);case 37:return To(e,6160,6169,!0,l);case 38:return To(e,4160,4169,!0,l);case 39:return To(e,2918,2927,!0,l);case 40:return To(e,1776,1785,!0,l);case 43:return To(e,3046,3055,!0,l);case 44:return To(e,3174,3183,!0,l);case 45:return To(e,3664,3673,!0,l);case 46:return To(e,3872,3881,!0,l);case 3:default:return To(e,48,57,!0,l)}},DI="data-html2canvas-ignore",XB=(function(){function e(n,i,l){if(this.context=n,this.options=l,this.scrolledElements=[],this.referenceElement=i,this.counters=new zz,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(n,i){var l=this,h=Vz(n,i);if(!h.contentWindow)return Promise.reject("Unable to find iframe window");var f=n.defaultView.pageXOffset,m=n.defaultView.pageYOffset,a=h.contentWindow,x=a.document,S=qz(h).then(function(){return vc(l,void 0,void 0,function(){var I,U;return $l(this,function(Q){switch(Q.label){case 0:return this.scrolledElements.forEach(Xz),a&&(a.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==i.top||a.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-i.left,a.scrollY-i.top,0,0))),I=this.options.onclone,U=this.clonedReferenceElement,typeof U>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:x.fonts&&x.fonts.ready?[4,x.fonts.ready]:[3,2];case 1:Q.sent(),Q.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Kz(x)]:[3,4];case 3:Q.sent(),Q.label=4;case 4:return typeof I=="function"?[2,Promise.resolve().then(function(){return I(x,U)}).then(function(){return h})]:[2,h]}})})});return x.open(),x.write(Wz(document.doctype)+"<html></html>"),Zz(this.referenceElement.ownerDocument,f,m),x.replaceChild(x.adoptNode(this.documentElement),x.documentElement),x.close(),S},e.prototype.createElementClone=function(n){if(X1(n,2))debugger;if(LI(n))return this.createCanvasClone(n);if(jB(n))return this.createVideoClone(n);if(VB(n))return this.createStyleClone(n);var i=n.cloneNode(!1);return tw(i)&&(tw(n)&&n.currentSrc&&n.currentSrc!==n.src&&(i.src=n.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),GB(i)?this.createCustomElementClone(i):i},e.prototype.createCustomElementClone=function(n){var i=document.createElement("html2canvascustomelement");return T_(n.style,i),i},e.prototype.createStyleClone=function(n){try{var i=n.sheet;if(i&&i.cssRules){var l=[].slice.call(i.cssRules,0).reduce(function(f,m){return m&&typeof m.cssText=="string"?f+m.cssText:f},""),h=n.cloneNode(!1);return h.textContent=l,h}}catch(f){if(this.context.logger.error("Unable to access cssRules property",f),f.name!=="SecurityError")throw f}return n.cloneNode(!1)},e.prototype.createCanvasClone=function(n){var i;if(this.options.inlineImages&&n.ownerDocument){var l=n.ownerDocument.createElement("img");try{return l.src=n.toDataURL(),l}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",n)}}var h=n.cloneNode(!1);try{h.width=n.width,h.height=n.height;var f=n.getContext("2d"),m=h.getContext("2d");if(m)if(!this.options.allowTaint&&f)m.putImageData(f.getImageData(0,0,n.width,n.height),0,0);else{var a=(i=n.getContext("webgl2"))!==null&&i!==void 0?i:n.getContext("webgl");if(a){var x=a.getContextAttributes();x?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",n)}m.drawImage(n,0,0)}return h}catch{this.context.logger.info("Unable to clone canvas as it is tainted",n)}return h},e.prototype.createVideoClone=function(n){var i=n.ownerDocument.createElement("canvas");i.width=n.offsetWidth,i.height=n.offsetHeight;var l=i.getContext("2d");try{return l&&(l.drawImage(n,0,0,i.width,i.height),this.options.allowTaint||l.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",n)}var h=n.ownerDocument.createElement("canvas");return h.width=n.offsetWidth,h.height=n.offsetHeight,h},e.prototype.appendChildNode=function(n,i,l){(!rp(i)||!Oz(i)&&!i.hasAttribute(DI)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!rp(i)||!VB(i))&&n.appendChild(this.cloneNode(i,l))},e.prototype.cloneChildNodes=function(n,i,l){for(var h=this,f=n.shadowRoot?n.shadowRoot.firstChild:n.firstChild;f;f=f.nextSibling)if(rp(f)&&kI(f)&&typeof f.assignedNodes=="function"){var m=f.assignedNodes();m.length&&m.forEach(function(a){return h.appendChildNode(i,a,l)})}else this.appendChildNode(i,f,l)},e.prototype.cloneNode=function(n,i){if(TI(n))return document.createTextNode(n.data);if(!n.ownerDocument)return n.cloneNode(!1);var l=n.ownerDocument.defaultView;if(l&&rp(n)&&(ew(n)||R0(n))){var h=this.createElementClone(n);h.style.transitionProperty="none";var f=l.getComputedStyle(n),m=l.getComputedStyle(n,":before"),a=l.getComputedStyle(n,":after");this.referenceElement===n&&ew(h)&&(this.clonedReferenceElement=h),ox(h)&&e7(h);var x=this.counters.parse(new FB(this.context,f)),S=this.resolvePseudoContent(n,h,m,Bm.BEFORE);GB(n)&&(i=!0),jB(n)||this.cloneChildNodes(n,h,i),S&&h.insertBefore(S,h.firstChild);var I=this.resolvePseudoContent(n,h,a,Bm.AFTER);return I&&h.appendChild(I),this.counters.pop(x),(f&&(this.options.copyStyles||R0(n))&&!MI(n)||i)&&T_(f,h),(n.scrollTop!==0||n.scrollLeft!==0)&&this.scrolledElements.push([h,n.scrollLeft,n.scrollTop]),(cy(n)||Ay(n))&&(cy(h)||Ay(h))&&(h.value=n.value),h}return n.cloneNode(!1)},e.prototype.resolvePseudoContent=function(n,i,l,h){var f=this;if(l){var m=l.content,a=i.ownerDocument;if(!(!a||!m||m==="none"||m==="-moz-alt-content"||l.display==="none")){this.counters.parse(new FB(this.context,l));var x=new DO(this.context,l),S=a.createElement("html2canvaspseudoelement");T_(l,S),x.content.forEach(function(U){if(U.type===0)S.appendChild(a.createTextNode(U.value));else if(U.type===22){var Q=a.createElement("img");Q.src=U.value,Q.style.opacity="1",S.appendChild(Q)}else if(U.type===18){if(U.name==="attr"){var P=U.values.filter(As);P.length&&S.appendChild(a.createTextNode(n.getAttribute(P[0].value)||""))}else if(U.name==="counter"){var $=U.values.filter(gp),z=$[0],O=$[1];if(z&&As(z)){var W=f.counters.getCounterValue(z.value),ne=O&&As(O)?Z1.parse(f.context,O.value):3;S.appendChild(a.createTextNode(Nm(W,ne,!1)))}}else if(U.name==="counters"){var ce=U.values.filter(gp),z=ce[0],de=ce[1],O=ce[2];if(z&&As(z)){var Se=f.counters.getCounterValues(z.value),ze=O&&As(O)?Z1.parse(f.context,O.value):3,Ze=de&&de.type===0?de.value:"",Qe=Se.map(function(le){return Nm(le,ze,!1)}).join(Ze);S.appendChild(a.createTextNode(Qe))}}}else if(U.type===20)switch(U.value){case"open-quote":S.appendChild(a.createTextNode(EB(x.quotes,f.quoteDepth++,!0)));break;case"close-quote":S.appendChild(a.createTextNode(EB(x.quotes,--f.quoteDepth,!1)));break;default:S.appendChild(a.createTextNode(U.value))}}),S.className=rw+" "+nw;var I=h===Bm.BEFORE?" "+rw:" "+nw;return R0(i)?i.className.baseValue+=I:i.className+=I,S}}},e.destroy=function(n){return n.parentNode?(n.parentNode.removeChild(n),!0):!1},e})(),Bm;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Bm||(Bm={}));var Vz=function(e,n){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=n.width.toString(),i.height=n.height.toString(),i.scrolling="no",i.setAttribute(DI,"true"),e.body.appendChild(i),i},Gz=function(e){return new Promise(function(n){if(e.complete){n();return}if(!e.src){n();return}e.onload=n,e.onerror=n})},Kz=function(e){return Promise.all([].slice.call(e.images,0).map(Gz))},qz=function(e){return new Promise(function(n,i){var l=e.contentWindow;if(!l)return i("No window assigned for iframe");var h=l.document;l.onload=e.onload=function(){l.onload=e.onload=null;var f=setInterval(function(){h.body.childNodes.length>0&&h.readyState==="complete"&&(clearInterval(f),n(e))},50)}})},$z=["all","d","content"],T_=function(e,n){for(var i=e.length-1;i>=0;i--){var l=e.item(i);$z.indexOf(l)===-1&&n.style.setProperty(l,e.getPropertyValue(l))}return n},Wz=function(e){var n="";return e&&(n+="<!DOCTYPE ",e.name&&(n+=e.name),e.internalSubset&&(n+=e.internalSubset),e.publicId&&(n+='"'+e.publicId+'"'),e.systemId&&(n+='"'+e.systemId+'"'),n+=">"),n},Zz=function(e,n,i){e&&e.defaultView&&(n!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(n,i)},Xz=function(e){var n=e[0],i=e[1],l=e[2];n.scrollLeft=i,n.scrollTop=l},Yz=":before",Jz=":after",rw="___html2canvas___pseudoelement_before",nw="___html2canvas___pseudoelement_after",YB=`{
    content: "" !important;
    display: none !important;
}`,e7=function(e){t7(e,"."+rw+Yz+YB+`
         .`+nw+Jz+YB)},t7=function(e,n){var i=e.ownerDocument;if(i){var l=i.createElement("style");l.textContent=n,e.appendChild(l)}},RI=(function(){function e(){}return e.getOrigin=function(n){var i=e._link;return i?(i.href=n,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},e.isSameOrigin=function(n){return e.getOrigin(n)===e._origin},e.setContext=function(n){e._link=n.document.createElement("a"),e._origin=e.getOrigin(n.location.href)},e._origin="about:blank",e})(),r7=(function(){function e(n,i){this.context=n,this._options=i,this._cache={}}return e.prototype.addImage=function(n){var i=Promise.resolve();return this.has(n)||(L_(n)||o7(n))&&(this._cache[n]=this.loadImage(n)).catch(function(){}),i},e.prototype.match=function(n){return this._cache[n]},e.prototype.loadImage=function(n){return vc(this,void 0,void 0,function(){var i,l,h,f,m=this;return $l(this,function(a){switch(a.label){case 0:return i=RI.isSameOrigin(n),l=!P_(n)&&this._options.useCORS===!0&&vl.SUPPORT_CORS_IMAGES&&!i,h=!P_(n)&&!i&&!L_(n)&&typeof this._options.proxy=="string"&&vl.SUPPORT_CORS_XHR&&!l,!i&&this._options.allowTaint===!1&&!P_(n)&&!L_(n)&&!h&&!l?[2]:(f=n,h?[4,this.proxy(f)]:[3,2]);case 1:f=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+n.substring(0,256)),[4,new Promise(function(x,S){var I=new Image;I.onload=function(){return x(I)},I.onerror=S,(a7(f)||l)&&(I.crossOrigin="anonymous"),I.src=f,I.complete===!0&&setTimeout(function(){return x(I)},500),m._options.imageTimeout>0&&setTimeout(function(){return S("Timed out ("+m._options.imageTimeout+"ms) loading image")},m._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},e.prototype.has=function(n){return typeof this._cache[n]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(n){var i=this,l=this._options.proxy;if(!l)throw new Error("No proxy defined");var h=n.substring(0,256);return new Promise(function(f,m){var a=vl.SUPPORT_RESPONSE_TYPE?"blob":"text",x=new XMLHttpRequest;x.onload=function(){if(x.status===200)if(a==="text")f(x.response);else{var U=new FileReader;U.addEventListener("load",function(){return f(U.result)},!1),U.addEventListener("error",function(Q){return m(Q)},!1),U.readAsDataURL(x.response)}else m("Failed to proxy resource "+h+" with status code "+x.status)},x.onerror=m;var S=l.indexOf("?")>-1?"&":"?";if(x.open("GET",""+l+S+"url="+encodeURIComponent(n)+"&responseType="+a),a!=="text"&&x instanceof XMLHttpRequest&&(x.responseType=a),i._options.imageTimeout){var I=i._options.imageTimeout;x.timeout=I,x.ontimeout=function(){return m("Timed out ("+I+"ms) proxying "+h)}}x.send()})},e})(),n7=/^data:image\/svg\+xml/i,i7=/^data:image\/.*;base64,/i,s7=/^data:image\/.*/i,o7=function(e){return vl.SUPPORT_SVG_DRAWING||!l7(e)},P_=function(e){return s7.test(e)},a7=function(e){return i7.test(e)},L_=function(e){return e.substr(0,4)==="blob"},l7=function(e){return e.substr(-3).toLowerCase()==="svg"||n7.test(e)},Hr=(function(){function e(n,i){this.type=0,this.x=n,this.y=i}return e.prototype.add=function(n,i){return new e(this.x+n,this.y+i)},e})(),Gd=function(e,n,i){return new Hr(e.x+(n.x-e.x)*i,e.y+(n.y-e.y)*i)},d0=(function(){function e(n,i,l,h){this.type=1,this.start=n,this.startControl=i,this.endControl=l,this.end=h}return e.prototype.subdivide=function(n,i){var l=Gd(this.start,this.startControl,n),h=Gd(this.startControl,this.endControl,n),f=Gd(this.endControl,this.end,n),m=Gd(l,h,n),a=Gd(h,f,n),x=Gd(m,a,n);return i?new e(this.start,l,m,x):new e(x,a,f,this.end)},e.prototype.add=function(n,i){return new e(this.start.add(n,i),this.startControl.add(n,i),this.endControl.add(n,i),this.end.add(n,i))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e})(),ZA=function(e){return e.type===1},c7=(function(){function e(n){var i=n.styles,l=n.bounds,h=mm(i.borderTopLeftRadius,l.width,l.height),f=h[0],m=h[1],a=mm(i.borderTopRightRadius,l.width,l.height),x=a[0],S=a[1],I=mm(i.borderBottomRightRadius,l.width,l.height),U=I[0],Q=I[1],P=mm(i.borderBottomLeftRadius,l.width,l.height),$=P[0],z=P[1],O=[];O.push((f+x)/l.width),O.push(($+U)/l.width),O.push((m+z)/l.height),O.push((S+Q)/l.height);var W=Math.max.apply(Math,O);W>1&&(f/=W,m/=W,x/=W,S/=W,U/=W,Q/=W,$/=W,z/=W);var ne=l.width-x,ce=l.height-Q,de=l.width-U,Se=l.height-z,ze=i.borderTopWidth,Ze=i.borderRightWidth,Qe=i.borderBottomWidth,be=i.borderLeftWidth,Ge=Ps(i.paddingTop,n.bounds.width),le=Ps(i.paddingRight,n.bounds.width),ge=Ps(i.paddingBottom,n.bounds.width),Pe=Ps(i.paddingLeft,n.bounds.width);this.topLeftBorderDoubleOuterBox=f>0||m>0?no(l.left+be/3,l.top+ze/3,f-be/3,m-ze/3,Ki.TOP_LEFT):new Hr(l.left+be/3,l.top+ze/3),this.topRightBorderDoubleOuterBox=f>0||m>0?no(l.left+ne,l.top+ze/3,x-Ze/3,S-ze/3,Ki.TOP_RIGHT):new Hr(l.left+l.width-Ze/3,l.top+ze/3),this.bottomRightBorderDoubleOuterBox=U>0||Q>0?no(l.left+de,l.top+ce,U-Ze/3,Q-Qe/3,Ki.BOTTOM_RIGHT):new Hr(l.left+l.width-Ze/3,l.top+l.height-Qe/3),this.bottomLeftBorderDoubleOuterBox=$>0||z>0?no(l.left+be/3,l.top+Se,$-be/3,z-Qe/3,Ki.BOTTOM_LEFT):new Hr(l.left+be/3,l.top+l.height-Qe/3),this.topLeftBorderDoubleInnerBox=f>0||m>0?no(l.left+be*2/3,l.top+ze*2/3,f-be*2/3,m-ze*2/3,Ki.TOP_LEFT):new Hr(l.left+be*2/3,l.top+ze*2/3),this.topRightBorderDoubleInnerBox=f>0||m>0?no(l.left+ne,l.top+ze*2/3,x-Ze*2/3,S-ze*2/3,Ki.TOP_RIGHT):new Hr(l.left+l.width-Ze*2/3,l.top+ze*2/3),this.bottomRightBorderDoubleInnerBox=U>0||Q>0?no(l.left+de,l.top+ce,U-Ze*2/3,Q-Qe*2/3,Ki.BOTTOM_RIGHT):new Hr(l.left+l.width-Ze*2/3,l.top+l.height-Qe*2/3),this.bottomLeftBorderDoubleInnerBox=$>0||z>0?no(l.left+be*2/3,l.top+Se,$-be*2/3,z-Qe*2/3,Ki.BOTTOM_LEFT):new Hr(l.left+be*2/3,l.top+l.height-Qe*2/3),this.topLeftBorderStroke=f>0||m>0?no(l.left+be/2,l.top+ze/2,f-be/2,m-ze/2,Ki.TOP_LEFT):new Hr(l.left+be/2,l.top+ze/2),this.topRightBorderStroke=f>0||m>0?no(l.left+ne,l.top+ze/2,x-Ze/2,S-ze/2,Ki.TOP_RIGHT):new Hr(l.left+l.width-Ze/2,l.top+ze/2),this.bottomRightBorderStroke=U>0||Q>0?no(l.left+de,l.top+ce,U-Ze/2,Q-Qe/2,Ki.BOTTOM_RIGHT):new Hr(l.left+l.width-Ze/2,l.top+l.height-Qe/2),this.bottomLeftBorderStroke=$>0||z>0?no(l.left+be/2,l.top+Se,$-be/2,z-Qe/2,Ki.BOTTOM_LEFT):new Hr(l.left+be/2,l.top+l.height-Qe/2),this.topLeftBorderBox=f>0||m>0?no(l.left,l.top,f,m,Ki.TOP_LEFT):new Hr(l.left,l.top),this.topRightBorderBox=x>0||S>0?no(l.left+ne,l.top,x,S,Ki.TOP_RIGHT):new Hr(l.left+l.width,l.top),this.bottomRightBorderBox=U>0||Q>0?no(l.left+de,l.top+ce,U,Q,Ki.BOTTOM_RIGHT):new Hr(l.left+l.width,l.top+l.height),this.bottomLeftBorderBox=$>0||z>0?no(l.left,l.top+Se,$,z,Ki.BOTTOM_LEFT):new Hr(l.left,l.top+l.height),this.topLeftPaddingBox=f>0||m>0?no(l.left+be,l.top+ze,Math.max(0,f-be),Math.max(0,m-ze),Ki.TOP_LEFT):new Hr(l.left+be,l.top+ze),this.topRightPaddingBox=x>0||S>0?no(l.left+Math.min(ne,l.width-Ze),l.top+ze,ne>l.width+Ze?0:Math.max(0,x-Ze),Math.max(0,S-ze),Ki.TOP_RIGHT):new Hr(l.left+l.width-Ze,l.top+ze),this.bottomRightPaddingBox=U>0||Q>0?no(l.left+Math.min(de,l.width-be),l.top+Math.min(ce,l.height-Qe),Math.max(0,U-Ze),Math.max(0,Q-Qe),Ki.BOTTOM_RIGHT):new Hr(l.left+l.width-Ze,l.top+l.height-Qe),this.bottomLeftPaddingBox=$>0||z>0?no(l.left+be,l.top+Math.min(Se,l.height-Qe),Math.max(0,$-be),Math.max(0,z-Qe),Ki.BOTTOM_LEFT):new Hr(l.left+be,l.top+l.height-Qe),this.topLeftContentBox=f>0||m>0?no(l.left+be+Pe,l.top+ze+Ge,Math.max(0,f-(be+Pe)),Math.max(0,m-(ze+Ge)),Ki.TOP_LEFT):new Hr(l.left+be+Pe,l.top+ze+Ge),this.topRightContentBox=x>0||S>0?no(l.left+Math.min(ne,l.width+be+Pe),l.top+ze+Ge,ne>l.width+be+Pe?0:x-be+Pe,S-(ze+Ge),Ki.TOP_RIGHT):new Hr(l.left+l.width-(Ze+le),l.top+ze+Ge),this.bottomRightContentBox=U>0||Q>0?no(l.left+Math.min(de,l.width-(be+Pe)),l.top+Math.min(ce,l.height+ze+Ge),Math.max(0,U-(Ze+le)),Q-(Qe+ge),Ki.BOTTOM_RIGHT):new Hr(l.left+l.width-(Ze+le),l.top+l.height-(Qe+ge)),this.bottomLeftContentBox=$>0||z>0?no(l.left+be+Pe,l.top+Se,Math.max(0,$-(be+Pe)),z-(Qe+ge),Ki.BOTTOM_LEFT):new Hr(l.left+be+Pe,l.top+l.height-(Qe+ge))}return e})(),Ki;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ki||(Ki={}));var no=function(e,n,i,l,h){var f=4*((Math.sqrt(2)-1)/3),m=i*f,a=l*f,x=e+i,S=n+l;switch(h){case Ki.TOP_LEFT:return new d0(new Hr(e,S),new Hr(e,S-a),new Hr(x-m,n),new Hr(x,n));case Ki.TOP_RIGHT:return new d0(new Hr(e,n),new Hr(e+m,n),new Hr(x,S-a),new Hr(x,S));case Ki.BOTTOM_RIGHT:return new d0(new Hr(x,n),new Hr(x,n+a),new Hr(e+m,S),new Hr(e,S));case Ki.BOTTOM_LEFT:default:return new d0(new Hr(x,S),new Hr(x-m,S),new Hr(e,n+a),new Hr(e,n))}},uy=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},A7=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},hy=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},u7=(function(){function e(n,i,l){this.offsetX=n,this.offsetY=i,this.matrix=l,this.type=0,this.target=6}return e})(),p0=(function(){function e(n,i){this.path=n,this.target=i,this.type=1}return e})(),h7=(function(){function e(n){this.opacity=n,this.type=2,this.target=6}return e})(),f7=function(e){return e.type===0},NI=function(e){return e.type===1},d7=function(e){return e.type===2},JB=function(e,n){return e.length===n.length?e.some(function(i,l){return i===n[l]}):!1},p7=function(e,n,i,l,h){return e.map(function(f,m){switch(m){case 0:return f.add(n,i);case 1:return f.add(n+l,i);case 2:return f.add(n+l,i+h);case 3:return f.add(n,i+h)}return f})},QI=(function(){function e(n){this.element=n,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e})(),OI=(function(){function e(n,i){if(this.container=n,this.parent=i,this.effects=[],this.curves=new c7(this.container),this.container.styles.opacity<1&&this.effects.push(new h7(this.container.styles.opacity)),this.container.styles.transform!==null){var l=this.container.bounds.left+this.container.styles.transformOrigin[0].number,h=this.container.bounds.top+this.container.styles.transformOrigin[1].number,f=this.container.styles.transform;this.effects.push(new u7(l,h,f))}if(this.container.styles.overflowX!==0){var m=uy(this.curves),a=hy(this.curves);JB(m,a)?this.effects.push(new p0(m,6)):(this.effects.push(new p0(m,2)),this.effects.push(new p0(a,4)))}}return e.prototype.getEffects=function(n){for(var i=[2,3].indexOf(this.container.styles.position)===-1,l=this.parent,h=this.effects.slice(0);l;){var f=l.effects.filter(function(x){return!NI(x)});if(i||l.container.styles.position!==0||!l.parent){if(h.unshift.apply(h,f),i=[2,3].indexOf(l.container.styles.position)===-1,l.container.styles.overflowX!==0){var m=uy(l.curves),a=hy(l.curves);JB(m,a)||h.unshift(new p0(a,6))}}else h.unshift.apply(h,f);l=l.parent}return h.filter(function(x){return wa(x.target,n)})},e})(),iw=function(e,n,i,l){e.container.elements.forEach(function(h){var f=wa(h.flags,4),m=wa(h.flags,2),a=new OI(h,e);wa(h.styles.display,2048)&&l.push(a);var x=wa(h.flags,8)?[]:l;if(f||m){var S=f||h.styles.isPositioned()?i:n,I=new QI(a);if(h.styles.isPositioned()||h.styles.opacity<1||h.styles.isTransformed()){var U=h.styles.zIndex.order;if(U<0){var Q=0;S.negativeZIndex.some(function($,z){return U>$.element.container.styles.zIndex.order?(Q=z,!1):Q>0}),S.negativeZIndex.splice(Q,0,I)}else if(U>0){var P=0;S.positiveZIndex.some(function($,z){return U>=$.element.container.styles.zIndex.order?(P=z+1,!1):P>0}),S.positiveZIndex.splice(P,0,I)}else S.zeroOrAutoZIndexOrTransformedOrOpacity.push(I)}else h.styles.isFloating()?S.nonPositionedFloats.push(I):S.nonPositionedInlineLevel.push(I);iw(a,I,f?I:i,x)}else h.styles.isInlineLevel()?n.inlineLevel.push(a):n.nonInlineLevel.push(a),iw(a,n,i,x);wa(h.flags,8)&&zI(h,x)})},zI=function(e,n){for(var i=e instanceof J1?e.start:1,l=e instanceof J1?e.reversed:!1,h=0;h<n.length;h++){var f=n[h];f.container instanceof BI&&typeof f.container.value=="number"&&f.container.value!==0&&(i=f.container.value),f.listValue=Nm(i,f.container.styles.listStyleType,!0),i+=l?-1:1}},m7=function(e){var n=new OI(e,null),i=new QI(n),l=[];return iw(n,i,i,l),zI(n.container,l),i},eC=function(e,n){switch(n){case 0:return YA(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return YA(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return YA(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return YA(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},g7=function(e,n){switch(n){case 0:return YA(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return YA(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return YA(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return YA(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},y7=function(e,n){switch(n){case 0:return YA(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return YA(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return YA(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return YA(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},v7=function(e,n){switch(n){case 0:return m0(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return m0(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return m0(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return m0(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},m0=function(e,n){var i=[];return ZA(e)?i.push(e.subdivide(.5,!1)):i.push(e),ZA(n)?i.push(n.subdivide(.5,!0)):i.push(n),i},YA=function(e,n,i,l){var h=[];return ZA(e)?h.push(e.subdivide(.5,!1)):h.push(e),ZA(i)?h.push(i.subdivide(.5,!0)):h.push(i),ZA(l)?h.push(l.subdivide(.5,!0).reverse()):h.push(l),ZA(n)?h.push(n.subdivide(.5,!1).reverse()):h.push(n),h},HI=function(e){var n=e.bounds,i=e.styles;return n.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},fy=function(e){var n=e.styles,i=e.bounds,l=Ps(n.paddingLeft,i.width),h=Ps(n.paddingRight,i.width),f=Ps(n.paddingTop,i.width),m=Ps(n.paddingBottom,i.width);return i.add(l+n.borderLeftWidth,f+n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth+l+h),-(n.borderTopWidth+n.borderBottomWidth+f+m))},_7=function(e,n){return e===0?n.bounds:e===2?fy(n):HI(n)},w7=function(e,n){return e===0?n.bounds:e===2?fy(n):HI(n)},M_=function(e,n,i){var l=_7(Yd(e.styles.backgroundOrigin,n),e),h=w7(Yd(e.styles.backgroundClip,n),e),f=x7(Yd(e.styles.backgroundSize,n),i,l),m=f[0],a=f[1],x=mm(Yd(e.styles.backgroundPosition,n),l.width-m,l.height-a),S=b7(Yd(e.styles.backgroundRepeat,n),x,f,l,h),I=Math.round(l.left+x[0]),U=Math.round(l.top+x[1]);return[S,I,U,m,a]},Kd=function(e){return As(e)&&e.value===lp.AUTO},g0=function(e){return typeof e=="number"},x7=function(e,n,i){var l=n[0],h=n[1],f=n[2],m=e[0],a=e[1];if(!m)return[0,0];if(ia(m)&&a&&ia(a))return[Ps(m,i.width),Ps(a,i.height)];var x=g0(f);if(As(m)&&(m.value===lp.CONTAIN||m.value===lp.COVER)){if(g0(f)){var S=i.width/i.height;return S<f!=(m.value===lp.COVER)?[i.width,i.width/f]:[i.height*f,i.height]}return[i.width,i.height]}var I=g0(l),U=g0(h),Q=I||U;if(Kd(m)&&(!a||Kd(a))){if(I&&U)return[l,h];if(!x&&!Q)return[i.width,i.height];if(Q&&x){var P=I?l:h*f,$=U?h:l/f;return[P,$]}var z=I?l:i.width,O=U?h:i.height;return[z,O]}if(x){var W=0,ne=0;return ia(m)?W=Ps(m,i.width):ia(a)&&(ne=Ps(a,i.height)),Kd(m)?W=ne*f:(!a||Kd(a))&&(ne=W/f),[W,ne]}var ce=null,de=null;if(ia(m)?ce=Ps(m,i.width):a&&ia(a)&&(de=Ps(a,i.height)),ce!==null&&(!a||Kd(a))&&(de=I&&U?ce/l*h:i.height),de!==null&&Kd(m)&&(ce=I&&U?de/h*l:i.width),ce!==null&&de!==null)return[ce,de];throw new Error("Unable to calculate background-size for element")},Yd=function(e,n){var i=e[n];return typeof i>"u"?e[0]:i},b7=function(e,n,i,l,h){var f=n[0],m=n[1],a=i[0],x=i[1];switch(e){case 2:return[new Hr(Math.round(l.left),Math.round(l.top+m)),new Hr(Math.round(l.left+l.width),Math.round(l.top+m)),new Hr(Math.round(l.left+l.width),Math.round(x+l.top+m)),new Hr(Math.round(l.left),Math.round(x+l.top+m))];case 3:return[new Hr(Math.round(l.left+f),Math.round(l.top)),new Hr(Math.round(l.left+f+a),Math.round(l.top)),new Hr(Math.round(l.left+f+a),Math.round(l.height+l.top)),new Hr(Math.round(l.left+f),Math.round(l.height+l.top))];case 1:return[new Hr(Math.round(l.left+f),Math.round(l.top+m)),new Hr(Math.round(l.left+f+a),Math.round(l.top+m)),new Hr(Math.round(l.left+f+a),Math.round(l.top+m+x)),new Hr(Math.round(l.left+f),Math.round(l.top+m+x))];default:return[new Hr(Math.round(h.left),Math.round(h.top)),new Hr(Math.round(h.left+h.width),Math.round(h.top)),new Hr(Math.round(h.left+h.width),Math.round(h.height+h.top)),new Hr(Math.round(h.left),Math.round(h.height+h.top))]}},B7="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",tC="Hidden Text",C7=(function(){function e(n){this._data={},this._document=n}return e.prototype.parseMetrics=function(n,i){var l=this._document.createElement("div"),h=this._document.createElement("img"),f=this._document.createElement("span"),m=this._document.body;l.style.visibility="hidden",l.style.fontFamily=n,l.style.fontSize=i,l.style.margin="0",l.style.padding="0",l.style.whiteSpace="nowrap",m.appendChild(l),h.src=B7,h.width=1,h.height=1,h.style.margin="0",h.style.padding="0",h.style.verticalAlign="baseline",f.style.fontFamily=n,f.style.fontSize=i,f.style.margin="0",f.style.padding="0",f.appendChild(this._document.createTextNode(tC)),l.appendChild(f),l.appendChild(h);var a=h.offsetTop-f.offsetTop+2;l.removeChild(f),l.appendChild(this._document.createTextNode(tC)),l.style.lineHeight="normal",h.style.verticalAlign="super";var x=h.offsetTop-l.offsetTop+2;return m.removeChild(l),{baseline:a,middle:x}},e.prototype.getMetrics=function(n,i){var l=n+" "+i;return typeof this._data[l]>"u"&&(this._data[l]=this.parseMetrics(n,i)),this._data[l]},e})(),jI=(function(){function e(n,i){this.context=n,this.options=i}return e})(),S7=1e4,E7=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h._activeEffects=[],h.canvas=l.canvas?l.canvas:document.createElement("canvas"),h.ctx=h.canvas.getContext("2d"),l.canvas||(h.canvas.width=Math.floor(l.width*l.scale),h.canvas.height=Math.floor(l.height*l.scale),h.canvas.style.width=l.width+"px",h.canvas.style.height=l.height+"px"),h.fontMetrics=new C7(document),h.ctx.scale(h.options.scale,h.options.scale),h.ctx.translate(-l.x,-l.y),h.ctx.textBaseline="bottom",h._activeEffects=[],h.context.logger.debug("Canvas renderer initialized ("+l.width+"x"+l.height+") with scale "+l.scale),h}return n.prototype.applyEffects=function(i){for(var l=this;this._activeEffects.length;)this.popEffect();i.forEach(function(h){return l.applyEffect(h)})},n.prototype.applyEffect=function(i){this.ctx.save(),d7(i)&&(this.ctx.globalAlpha=i.opacity),f7(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),NI(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(i){return vc(this,void 0,void 0,function(){var l;return $l(this,function(h){switch(h.label){case 0:return l=i.element.container.styles,l.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:h.sent(),h.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(i){return vc(this,void 0,void 0,function(){return $l(this,function(l){switch(l.label){case 0:if(wa(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return l.sent(),[4,this.renderNodeContent(i)];case 2:l.sent(),l.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(i,l,h){var f=this;if(l===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+h);else{var m=ix(i.text);m.reduce(function(a,x){return f.ctx.fillText(x,a,i.bounds.top+h),a+f.ctx.measureText(x).width},i.bounds.left)}},n.prototype.createFontStyle=function(i){var l=i.fontVariant.filter(function(m){return m==="normal"||m==="small-caps"}).join(""),h=L7(i.fontFamily).join(", "),f=Xm(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,l,i.fontWeight,f,h].join(" "),h,f]},n.prototype.renderTextNode=function(i,l){return vc(this,void 0,void 0,function(){var h,f,m,a,x,S,I,U,Q=this;return $l(this,function(P){return h=this.createFontStyle(l),f=h[0],m=h[1],a=h[2],this.ctx.font=f,this.ctx.direction=l.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",x=this.fontMetrics.getMetrics(m,a),S=x.baseline,I=x.middle,U=l.paintOrder,i.textBounds.forEach(function($){U.forEach(function(z){switch(z){case 0:Q.ctx.fillStyle=Ja(l.color),Q.renderTextWithLetterSpacing($,l.letterSpacing,S);var O=l.textShadow;O.length&&$.text.trim().length&&(O.slice(0).reverse().forEach(function(W){Q.ctx.shadowColor=Ja(W.color),Q.ctx.shadowOffsetX=W.offsetX.number*Q.options.scale,Q.ctx.shadowOffsetY=W.offsetY.number*Q.options.scale,Q.ctx.shadowBlur=W.blur.number,Q.renderTextWithLetterSpacing($,l.letterSpacing,S)}),Q.ctx.shadowColor="",Q.ctx.shadowOffsetX=0,Q.ctx.shadowOffsetY=0,Q.ctx.shadowBlur=0),l.textDecorationLine.length&&(Q.ctx.fillStyle=Ja(l.textDecorationColor||l.color),l.textDecorationLine.forEach(function(W){switch(W){case 1:Q.ctx.fillRect($.bounds.left,Math.round($.bounds.top+S),$.bounds.width,1);break;case 2:Q.ctx.fillRect($.bounds.left,Math.round($.bounds.top),$.bounds.width,1);break;case 3:Q.ctx.fillRect($.bounds.left,Math.ceil($.bounds.top+I),$.bounds.width,1);break}}));break;case 1:l.webkitTextStrokeWidth&&$.text.trim().length&&(Q.ctx.strokeStyle=Ja(l.webkitTextStrokeColor),Q.ctx.lineWidth=l.webkitTextStrokeWidth,Q.ctx.lineJoin=window.chrome?"miter":"round",Q.ctx.strokeText($.text,$.bounds.left,$.bounds.top+S)),Q.ctx.strokeStyle="",Q.ctx.lineWidth=0,Q.ctx.lineJoin="miter";break}})}),[2]})})},n.prototype.renderReplacedElement=function(i,l,h){if(h&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var f=fy(i),m=hy(l);this.path(m),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(h,0,0,i.intrinsicWidth,i.intrinsicHeight,f.left,f.top,f.width,f.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(i){return vc(this,void 0,void 0,function(){var l,h,f,m,a,x,ne,ne,S,I,U,Q,de,P,$,Se,z,O,W,ne,ce,de,Se;return $l(this,function(ze){switch(ze.label){case 0:this.applyEffects(i.getEffects(4)),l=i.container,h=i.curves,f=l.styles,m=0,a=l.textNodes,ze.label=1;case 1:return m<a.length?(x=a[m],[4,this.renderTextNode(x,f)]):[3,4];case 2:ze.sent(),ze.label=3;case 3:return m++,[3,1];case 4:if(!(l instanceof wI))return[3,8];ze.label=5;case 5:return ze.trys.push([5,7,,8]),[4,this.context.cache.match(l.src)];case 6:return ne=ze.sent(),this.renderReplacedElement(l,h,ne),[3,8];case 7:return ze.sent(),this.context.logger.error("Error loading image "+l.src),[3,8];case 8:if(l instanceof xI&&this.renderReplacedElement(l,h,l.canvas),!(l instanceof bI))return[3,12];ze.label=9;case 9:return ze.trys.push([9,11,,12]),[4,this.context.cache.match(l.svg)];case 10:return ne=ze.sent(),this.renderReplacedElement(l,h,ne),[3,12];case 11:return ze.sent(),this.context.logger.error("Error loading svg "+l.svg.substring(0,255)),[3,12];case 12:return l instanceof EI&&l.tree?(S=new n(this.context,{scale:this.options.scale,backgroundColor:l.backgroundColor,x:0,y:0,width:l.width,height:l.height}),[4,S.render(l.tree)]):[3,14];case 13:I=ze.sent(),l.width&&l.height&&this.ctx.drawImage(I,0,0,l.width,l.height,l.bounds.left,l.bounds.top,l.bounds.width,l.bounds.height),ze.label=14;case 14:if(l instanceof sx&&(U=Math.min(l.bounds.width,l.bounds.height),l.type===ay?l.checked&&(this.ctx.save(),this.path([new Hr(l.bounds.left+U*.39363,l.bounds.top+U*.79),new Hr(l.bounds.left+U*.16,l.bounds.top+U*.5549),new Hr(l.bounds.left+U*.27347,l.bounds.top+U*.44071),new Hr(l.bounds.left+U*.39694,l.bounds.top+U*.5649),new Hr(l.bounds.left+U*.72983,l.bounds.top+U*.23),new Hr(l.bounds.left+U*.84,l.bounds.top+U*.34085),new Hr(l.bounds.left+U*.39363,l.bounds.top+U*.79)]),this.ctx.fillStyle=Ja(HB),this.ctx.fill(),this.ctx.restore()):l.type===ly&&l.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(l.bounds.left+U/2,l.bounds.top+U/2,U/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ja(HB),this.ctx.fill(),this.ctx.restore())),F7(l)&&l.value.length){switch(Q=this.createFontStyle(f),de=Q[0],P=Q[1],$=this.fontMetrics.getMetrics(de,P).baseline,this.ctx.font=de,this.ctx.fillStyle=Ja(f.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=T7(l.styles.textAlign),Se=fy(l),z=0,l.styles.textAlign){case 1:z+=Se.width/2;break;case 2:z+=Se.width;break}O=Se.add(z,0,0,-Se.height/2+1),this.ctx.save(),this.path([new Hr(Se.left,Se.top),new Hr(Se.left+Se.width,Se.top),new Hr(Se.left+Se.width,Se.top+Se.height),new Hr(Se.left,Se.top+Se.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new bm(l.value,O),f.letterSpacing,$),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!wa(l.styles.display,2048))return[3,20];if(l.styles.listStyleImage===null)return[3,19];if(W=l.styles.listStyleImage,W.type!==0)return[3,18];ne=void 0,ce=W.url,ze.label=15;case 15:return ze.trys.push([15,17,,18]),[4,this.context.cache.match(ce)];case 16:return ne=ze.sent(),this.ctx.drawImage(ne,l.bounds.left-(ne.width+10),l.bounds.top),[3,18];case 17:return ze.sent(),this.context.logger.error("Error loading list-style-image "+ce),[3,18];case 18:return[3,20];case 19:i.listValue&&l.styles.listStyleType!==-1&&(de=this.createFontStyle(f)[0],this.ctx.font=de,this.ctx.fillStyle=Ja(f.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Se=new Rh(l.bounds.left,l.bounds.top+Ps(l.styles.paddingTop,l.bounds.width),l.bounds.width,CB(f.lineHeight,f.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new bm(i.listValue,Se),f.letterSpacing,CB(f.lineHeight,f.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ze.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(i){return vc(this,void 0,void 0,function(){var l,h,W,f,m,W,a,x,W,S,I,W,U,Q,W,P,$,W,z,O,W;return $l(this,function(ne){switch(ne.label){case 0:if(wa(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:ne.sent(),l=0,h=i.negativeZIndex,ne.label=2;case 2:return l<h.length?(W=h[l],[4,this.renderStack(W)]):[3,5];case 3:ne.sent(),ne.label=4;case 4:return l++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:ne.sent(),f=0,m=i.nonInlineLevel,ne.label=7;case 7:return f<m.length?(W=m[f],[4,this.renderNode(W)]):[3,10];case 8:ne.sent(),ne.label=9;case 9:return f++,[3,7];case 10:a=0,x=i.nonPositionedFloats,ne.label=11;case 11:return a<x.length?(W=x[a],[4,this.renderStack(W)]):[3,14];case 12:ne.sent(),ne.label=13;case 13:return a++,[3,11];case 14:S=0,I=i.nonPositionedInlineLevel,ne.label=15;case 15:return S<I.length?(W=I[S],[4,this.renderStack(W)]):[3,18];case 16:ne.sent(),ne.label=17;case 17:return S++,[3,15];case 18:U=0,Q=i.inlineLevel,ne.label=19;case 19:return U<Q.length?(W=Q[U],[4,this.renderNode(W)]):[3,22];case 20:ne.sent(),ne.label=21;case 21:return U++,[3,19];case 22:P=0,$=i.zeroOrAutoZIndexOrTransformedOrOpacity,ne.label=23;case 23:return P<$.length?(W=$[P],[4,this.renderStack(W)]):[3,26];case 24:ne.sent(),ne.label=25;case 25:return P++,[3,23];case 26:z=0,O=i.positiveZIndex,ne.label=27;case 27:return z<O.length?(W=O[z],[4,this.renderStack(W)]):[3,30];case 28:ne.sent(),ne.label=29;case 29:return z++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},n.prototype.formatPath=function(i){var l=this;i.forEach(function(h,f){var m=ZA(h)?h.start:h;f===0?l.ctx.moveTo(m.x,m.y):l.ctx.lineTo(m.x,m.y),ZA(h)&&l.ctx.bezierCurveTo(h.startControl.x,h.startControl.y,h.endControl.x,h.endControl.y,h.end.x,h.end.y)})},n.prototype.renderRepeat=function(i,l,h,f){this.path(i),this.ctx.fillStyle=l,this.ctx.translate(h,f),this.ctx.fill(),this.ctx.translate(-h,-f)},n.prototype.resizeImage=function(i,l,h){var f;if(i.width===l&&i.height===h)return i;var m=(f=this.canvas.ownerDocument)!==null&&f!==void 0?f:document,a=m.createElement("canvas");a.width=Math.max(1,l),a.height=Math.max(1,h);var x=a.getContext("2d");return x.drawImage(i,0,0,i.width,i.height,0,0,l,h),a},n.prototype.renderBackgroundImage=function(i){return vc(this,void 0,void 0,function(){var l,h,f,m,a,x;return $l(this,function(S){switch(S.label){case 0:l=i.styles.backgroundImage.length-1,h=function(I){var U,Q,P,Ge,ut,At,Pe,Fe,Qe,$,Ge,ut,At,Pe,Fe,z,O,W,ne,ce,de,Se,ze,Ze,Qe,be,Ge,le,ge,Pe,Fe,pt,ut,At,Ne,Ie,yt,Ue,ie,Ee,De,Ye;return $l(this,function(at){switch(at.label){case 0:if(I.type!==0)return[3,5];U=void 0,Q=I.url,at.label=1;case 1:return at.trys.push([1,3,,4]),[4,f.context.cache.match(Q)];case 2:return U=at.sent(),[3,4];case 3:return at.sent(),f.context.logger.error("Error loading background-image "+Q),[3,4];case 4:return U&&(P=M_(i,l,[U.width,U.height,U.width/U.height]),Ge=P[0],ut=P[1],At=P[2],Pe=P[3],Fe=P[4],Qe=f.ctx.createPattern(f.resizeImage(U,Pe,Fe),"repeat"),f.renderRepeat(Ge,Qe,ut,At)),[3,6];case 5:f8(I)?($=M_(i,l,[null,null,null]),Ge=$[0],ut=$[1],At=$[2],Pe=$[3],Fe=$[4],z=l8(I.angle,Pe,Fe),O=z[0],W=z[1],ne=z[2],ce=z[3],de=z[4],Se=document.createElement("canvas"),Se.width=Pe,Se.height=Fe,ze=Se.getContext("2d"),Ze=ze.createLinearGradient(W,ce,ne,de),bB(I.stops,O).forEach(function(tt){return Ze.addColorStop(tt.stop,Ja(tt.color))}),ze.fillStyle=Ze,ze.fillRect(0,0,Pe,Fe),Pe>0&&Fe>0&&(Qe=f.ctx.createPattern(Se,"repeat"),f.renderRepeat(Ge,Qe,ut,At))):d8(I)&&(be=M_(i,l,[null,null,null]),Ge=be[0],le=be[1],ge=be[2],Pe=be[3],Fe=be[4],pt=I.position.length===0?[tx]:I.position,ut=Ps(pt[0],Pe),At=Ps(pt[pt.length-1],Fe),Ne=c8(I,ut,At,Pe,Fe),Ie=Ne[0],yt=Ne[1],Ie>0&&yt>0&&(Ue=f.ctx.createRadialGradient(le+ut,ge+At,0,le+ut,ge+At,Ie),bB(I.stops,Ie*2).forEach(function(tt){return Ue.addColorStop(tt.stop,Ja(tt.color))}),f.path(Ge),f.ctx.fillStyle=Ue,Ie!==yt?(ie=i.bounds.left+.5*i.bounds.width,Ee=i.bounds.top+.5*i.bounds.height,De=yt/Ie,Ye=1/De,f.ctx.save(),f.ctx.translate(ie,Ee),f.ctx.transform(1,0,0,De,0,0),f.ctx.translate(-ie,-Ee),f.ctx.fillRect(le,Ye*(ge-Ee)+Ee,Pe,Fe*Ye),f.ctx.restore()):f.ctx.fill())),at.label=6;case 6:return l--,[2]}})},f=this,m=0,a=i.styles.backgroundImage.slice(0).reverse(),S.label=1;case 1:return m<a.length?(x=a[m],[5,h(x)]):[3,4];case 2:S.sent(),S.label=3;case 3:return m++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(i,l,h){return vc(this,void 0,void 0,function(){return $l(this,function(f){return this.path(eC(h,l)),this.ctx.fillStyle=Ja(i),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(i,l,h,f){return vc(this,void 0,void 0,function(){var m,a;return $l(this,function(x){switch(x.label){case 0:return l<3?[4,this.renderSolidBorder(i,h,f)]:[3,2];case 1:return x.sent(),[2];case 2:return m=g7(f,h),this.path(m),this.ctx.fillStyle=Ja(i),this.ctx.fill(),a=y7(f,h),this.path(a),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(i){return vc(this,void 0,void 0,function(){var l,h,f,m,a,x,S,I,U=this;return $l(this,function(Q){switch(Q.label){case 0:return this.applyEffects(i.getEffects(2)),l=i.container.styles,h=!mf(l.backgroundColor)||l.backgroundImage.length,f=[{style:l.borderTopStyle,color:l.borderTopColor,width:l.borderTopWidth},{style:l.borderRightStyle,color:l.borderRightColor,width:l.borderRightWidth},{style:l.borderBottomStyle,color:l.borderBottomColor,width:l.borderBottomWidth},{style:l.borderLeftStyle,color:l.borderLeftColor,width:l.borderLeftWidth}],m=I7(Yd(l.backgroundClip,0),i.curves),h||l.boxShadow.length?(this.ctx.save(),this.path(m),this.ctx.clip(),mf(l.backgroundColor)||(this.ctx.fillStyle=Ja(l.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:Q.sent(),this.ctx.restore(),l.boxShadow.slice(0).reverse().forEach(function(P){U.ctx.save();var $=uy(i.curves),z=P.inset?0:S7,O=p7($,-z+(P.inset?1:-1)*P.spread.number,(P.inset?1:-1)*P.spread.number,P.spread.number*(P.inset?-2:2),P.spread.number*(P.inset?-2:2));P.inset?(U.path($),U.ctx.clip(),U.mask(O)):(U.mask($),U.ctx.clip(),U.path(O)),U.ctx.shadowOffsetX=P.offsetX.number+z,U.ctx.shadowOffsetY=P.offsetY.number,U.ctx.shadowColor=Ja(P.color),U.ctx.shadowBlur=P.blur.number,U.ctx.fillStyle=P.inset?Ja(P.color):"rgba(0,0,0,1)",U.ctx.fill(),U.ctx.restore()}),Q.label=2;case 2:a=0,x=0,S=f,Q.label=3;case 3:return x<S.length?(I=S[x],I.style!==0&&!mf(I.color)&&I.width>0?I.style!==2?[3,5]:[4,this.renderDashedDottedBorder(I.color,I.width,a,i.curves,2)]:[3,11]):[3,13];case 4:return Q.sent(),[3,11];case 5:return I.style!==3?[3,7]:[4,this.renderDashedDottedBorder(I.color,I.width,a,i.curves,3)];case 6:return Q.sent(),[3,11];case 7:return I.style!==4?[3,9]:[4,this.renderDoubleBorder(I.color,I.width,a,i.curves)];case 8:return Q.sent(),[3,11];case 9:return[4,this.renderSolidBorder(I.color,a,i.curves)];case 10:Q.sent(),Q.label=11;case 11:a++,Q.label=12;case 12:return x++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(i,l,h,f,m){return vc(this,void 0,void 0,function(){var a,x,S,I,U,Q,P,$,z,O,W,ne,ce,de,Se,ze,Se,ze;return $l(this,function(Ze){return this.ctx.save(),a=v7(f,h),x=eC(f,h),m===2&&(this.path(x),this.ctx.clip()),ZA(x[0])?(S=x[0].start.x,I=x[0].start.y):(S=x[0].x,I=x[0].y),ZA(x[1])?(U=x[1].end.x,Q=x[1].end.y):(U=x[1].x,Q=x[1].y),h===0||h===2?P=Math.abs(S-U):P=Math.abs(I-Q),this.ctx.beginPath(),m===3?this.formatPath(a):this.formatPath(x.slice(0,2)),$=l<3?l*3:l*2,z=l<3?l*2:l,m===3&&($=l,z=l),O=!0,P<=$*2?O=!1:P<=$*2+z?(W=P/(2*$+z),$*=W,z*=W):(ne=Math.floor((P+z)/($+z)),ce=(P-ne*$)/(ne-1),de=(P-(ne+1)*$)/ne,z=de<=0||Math.abs(z-ce)<Math.abs(z-de)?ce:de),O&&(m===3?this.ctx.setLineDash([0,$+z]):this.ctx.setLineDash([$,z])),m===3?(this.ctx.lineCap="round",this.ctx.lineWidth=l):this.ctx.lineWidth=l*2+1.1,this.ctx.strokeStyle=Ja(i),this.ctx.stroke(),this.ctx.setLineDash([]),m===2&&(ZA(x[0])&&(Se=x[3],ze=x[0],this.ctx.beginPath(),this.formatPath([new Hr(Se.end.x,Se.end.y),new Hr(ze.start.x,ze.start.y)]),this.ctx.stroke()),ZA(x[1])&&(Se=x[1],ze=x[2],this.ctx.beginPath(),this.formatPath([new Hr(Se.end.x,Se.end.y),new Hr(ze.start.x,ze.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(i){return vc(this,void 0,void 0,function(){var l;return $l(this,function(h){switch(h.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ja(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),l=m7(i),[4,this.renderStack(l)];case 1:return h.sent(),this.applyEffects([]),[2,this.canvas]}})})},n})(jI),F7=function(e){return e instanceof SI||e instanceof CI?!0:e instanceof sx&&e.type!==ly&&e.type!==ay},I7=function(e,n){switch(e){case 0:return uy(n);case 2:return A7(n);case 1:default:return hy(n)}},T7=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},P7=["-apple-system","system-ui"],L7=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(n){return P7.indexOf(n)===-1}):e},M7=(function(e){Fu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.canvas=l.canvas?l.canvas:document.createElement("canvas"),h.ctx=h.canvas.getContext("2d"),h.options=l,h.canvas.width=Math.floor(l.width*l.scale),h.canvas.height=Math.floor(l.height*l.scale),h.canvas.style.width=l.width+"px",h.canvas.style.height=l.height+"px",h.ctx.scale(h.options.scale,h.options.scale),h.ctx.translate(-l.x,-l.y),h.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+l.width+"x"+l.height+" at "+l.x+","+l.y+") with scale "+l.scale),h}return n.prototype.render=function(i){return vc(this,void 0,void 0,function(){var l,h;return $l(this,function(f){switch(f.label){case 0:return l=Y1(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,k7(l)];case 1:return h=f.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ja(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(h,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n})(jI),k7=function(e){return new Promise(function(n,i){var l=new Image;l.onload=function(){n(l)},l.onerror=i,l.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},U7=(function(){function e(n){var i=n.id,l=n.enabled;this.id=i,this.enabled=l,this.start=Date.now()}return e.prototype.debug=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Wg([this.id,this.getTime()+"ms"],n))},e.prototype.warn=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.error=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.instances={},e})(),D7=(function(){function e(n,i){var l;this.windowBounds=i,this.instanceName="#"+e.instanceCount++,this.logger=new U7({id:this.instanceName,enabled:n.logging}),this.cache=(l=n.cache)!==null&&l!==void 0?l:new r7(this,n)}return e.instanceCount=1,e})(),VI=function(e,n){return n===void 0&&(n={}),R7(e,n)};typeof window<"u"&&RI.setContext(window);var R7=function(e,n){return vc(void 0,void 0,void 0,function(){var i,l,h,f,m,a,x,S,I,U,Q,P,$,z,O,W,ne,ce,de,Se,Ze,ze,Ze,Qe,be,Ge,le,ge,Pe,Fe,pt,ut,At,Ne,Ie,yt,Ue,ie,Ee,De;return $l(this,function(Ye){switch(Ye.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=e.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(l=i.defaultView,!l)throw new Error("Document is not attached to a Window");return h={allowTaint:(Qe=n.allowTaint)!==null&&Qe!==void 0?Qe:!1,imageTimeout:(be=n.imageTimeout)!==null&&be!==void 0?be:15e3,proxy:n.proxy,useCORS:(Ge=n.useCORS)!==null&&Ge!==void 0?Ge:!1},f=R1({logging:(le=n.logging)!==null&&le!==void 0?le:!0,cache:n.cache},h),m={windowWidth:(ge=n.windowWidth)!==null&&ge!==void 0?ge:l.innerWidth,windowHeight:(Pe=n.windowHeight)!==null&&Pe!==void 0?Pe:l.innerHeight,scrollX:(Fe=n.scrollX)!==null&&Fe!==void 0?Fe:l.pageXOffset,scrollY:(pt=n.scrollY)!==null&&pt!==void 0?pt:l.pageYOffset},a=new Rh(m.scrollX,m.scrollY,m.windowWidth,m.windowHeight),x=new D7(f,a),S=(ut=n.foreignObjectRendering)!==null&&ut!==void 0?ut:!1,I={allowTaint:(At=n.allowTaint)!==null&&At!==void 0?At:!1,onclone:n.onclone,ignoreElements:n.ignoreElements,inlineImages:S,copyStyles:S},x.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),U=new XB(x,e,I),Q=U.clonedReferenceElement,Q?[4,U.toIFrame(i,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return P=Ye.sent(),$=ox(Q)||Qz(Q)?p6(Q.ownerDocument):jy(x,Q),z=$.width,O=$.height,W=$.left,ne=$.top,ce=N7(x,Q,n.backgroundColor),de={canvas:n.canvas,backgroundColor:ce,scale:(Ie=(Ne=n.scale)!==null&&Ne!==void 0?Ne:l.devicePixelRatio)!==null&&Ie!==void 0?Ie:1,x:((yt=n.x)!==null&&yt!==void 0?yt:0)+W,y:((Ue=n.y)!==null&&Ue!==void 0?Ue:0)+ne,width:(ie=n.width)!==null&&ie!==void 0?ie:Math.ceil(z),height:(Ee=n.height)!==null&&Ee!==void 0?Ee:Math.ceil(O)},S?(x.logger.debug("Document cloned, using foreign object rendering"),Ze=new M7(x,de),[4,Ze.render(Q)]):[3,3];case 2:return Se=Ye.sent(),[3,5];case 3:return x.logger.debug("Document cloned, element located at "+W+","+ne+" with size "+z+"x"+O+" using computed rendering"),x.logger.debug("Starting DOM parsing"),ze=II(x,Q),ce===ze.styles.backgroundColor&&(ze.styles.backgroundColor=kh.TRANSPARENT),x.logger.debug("Starting renderer for element at "+de.x+","+de.y+" with size "+de.width+"x"+de.height),Ze=new E7(x,de),[4,Ze.render(ze)];case 4:Se=Ye.sent(),Ye.label=5;case 5:return(!((De=n.removeContainer)!==null&&De!==void 0)||De)&&(XB.destroy(P)||x.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),x.logger.debug("Finished rendering"),[2,Se]}})})},N7=function(e,n,i){var l=n.ownerDocument,h=l.documentElement?wm(e,getComputedStyle(l.documentElement).backgroundColor):kh.TRANSPARENT,f=l.body?wm(e,getComputedStyle(l.body).backgroundColor):kh.TRANSPARENT,m=typeof i=="string"?wm(e,i):i===null?kh.TRANSPARENT:4294967295;return n===l.documentElement?mf(h)?mf(f)?m:f:h:m};const Q7=Object.freeze(Object.defineProperty({__proto__:null,default:VI},Symbol.toStringTag,{value:"Module"})),O7="modulepreload",z7=function(e){return"/Domapus/"+e},rC={},k_=function(n,i,l){let h=Promise.resolve();if(i&&i.length>0){let x=function(S){return Promise.all(S.map(I=>Promise.resolve(I).then(U=>({status:"fulfilled",value:U}),U=>({status:"rejected",reason:U}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),a=m?.nonce||m?.getAttribute("nonce");h=x(i.map(S=>{if(S=z7(S),S in rC)return;rC[S]=!0;const I=S.endsWith(".css"),U=I?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${U}`))return;const Q=document.createElement("link");if(Q.rel=I?"stylesheet":O7,I||(Q.as="script"),Q.crossOrigin="",Q.href=S,a&&Q.setAttribute("nonce",a),document.head.appendChild(Q),I)return new Promise((P,$)=>{Q.addEventListener("load",P),Q.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${S}`)))})}))}function f(m){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=m,window.dispatchEvent(a),!a.defaultPrevented)throw m}return h.then(m=>{for(const a of m||[])a.status==="rejected"&&f(a.reason);return n().catch(f)})};function ts(e){"@babel/helpers - typeof";return ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ts(e)}var Eu=Uint8Array,bA=Uint16Array,ax=Int32Array,lx=new Eu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cx=new Eu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nC=new Eu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GI=function(e,n){for(var i=new bA(31),l=0;l<31;++l)i[l]=n+=1<<e[l-1];for(var h=new ax(i[30]),l=1;l<30;++l)for(var f=i[l];f<i[l+1];++f)h[f]=f-i[l]<<5|l;return{b:i,r:h}},KI=GI(lx,2),H7=KI.b,sw=KI.r;H7[28]=258,sw[258]=28;var j7=GI(cx,0),iC=j7.r,ow=new bA(32768);for(var Vs=0;Vs<32768;++Vs){var ef=(Vs&43690)>>1|(Vs&21845)<<1;ef=(ef&52428)>>2|(ef&13107)<<2,ef=(ef&61680)>>4|(ef&3855)<<4,ow[Vs]=((ef&65280)>>8|(ef&255)<<8)>>1}var Cm=(function(e,n,i){for(var l=e.length,h=0,f=new bA(n);h<l;++h)e[h]&&++f[e[h]-1];var m=new bA(n);for(h=1;h<n;++h)m[h]=m[h-1]+f[h-1]<<1;var a;if(i){a=new bA(1<<n);var x=15-n;for(h=0;h<l;++h)if(e[h])for(var S=h<<4|e[h],I=n-e[h],U=m[e[h]-1]++<<I,Q=U|(1<<I)-1;U<=Q;++U)a[ow[U]>>x]=S}else for(a=new bA(l),h=0;h<l;++h)e[h]&&(a[h]=ow[m[e[h]-1]++]>>15-e[h]);return a}),id=new Eu(288);for(var Vs=0;Vs<144;++Vs)id[Vs]=8;for(var Vs=144;Vs<256;++Vs)id[Vs]=9;for(var Vs=256;Vs<280;++Vs)id[Vs]=7;for(var Vs=280;Vs<288;++Vs)id[Vs]=8;var dy=new Eu(32);for(var Vs=0;Vs<32;++Vs)dy[Vs]=5;var V7=Cm(id,9,0),G7=Cm(dy,5,0),qI=function(e){return(e+7)/8|0},K7=function(e,n,i){return(i==null||i>e.length)&&(i=e.length),new Eu(e.subarray(n,i))},Ph=function(e,n,i){i<<=n&7;var l=n/8|0;e[l]|=i,e[l+1]|=i>>8},cm=function(e,n,i){i<<=n&7;var l=n/8|0;e[l]|=i,e[l+1]|=i>>8,e[l+2]|=i>>16},U_=function(e,n){for(var i=[],l=0;l<e.length;++l)e[l]&&i.push({s:l,f:e[l]});var h=i.length,f=i.slice();if(!h)return{t:WI,l:0};if(h==1){var m=new Eu(i[0].s+1);return m[i[0].s]=1,{t:m,l:1}}i.sort(function(Se,ze){return Se.f-ze.f}),i.push({s:-1,f:25001});var a=i[0],x=i[1],S=0,I=1,U=2;for(i[0]={s:-1,f:a.f+x.f,l:a,r:x};I!=h-1;)a=i[i[S].f<i[U].f?S++:U++],x=i[S!=I&&i[S].f<i[U].f?S++:U++],i[I++]={s:-1,f:a.f+x.f,l:a,r:x};for(var Q=f[0].s,l=1;l<h;++l)f[l].s>Q&&(Q=f[l].s);var P=new bA(Q+1),$=aw(i[I-1],P,0);if($>n){var l=0,z=0,O=$-n,W=1<<O;for(f.sort(function(ze,Ze){return P[Ze.s]-P[ze.s]||ze.f-Ze.f});l<h;++l){var ne=f[l].s;if(P[ne]>n)z+=W-(1<<$-P[ne]),P[ne]=n;else break}for(z>>=O;z>0;){var ce=f[l].s;P[ce]<n?z-=1<<n-P[ce]++-1:++l}for(;l>=0&&z;--l){var de=f[l].s;P[de]==n&&(--P[de],++z)}$=n}return{t:new Eu(P),l:$}},aw=function(e,n,i){return e.s==-1?Math.max(aw(e.l,n,i+1),aw(e.r,n,i+1)):n[e.s]=i},sC=function(e){for(var n=e.length;n&&!e[--n];);for(var i=new bA(++n),l=0,h=e[0],f=1,m=function(x){i[l++]=x},a=1;a<=n;++a)if(e[a]==h&&a!=n)++f;else{if(!h&&f>2){for(;f>138;f-=138)m(32754);f>2&&(m(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(m(h),--f;f>6;f-=6)m(8304);f>2&&(m(f-3<<5|8208),f=0)}for(;f--;)m(h);f=1,h=e[a]}return{c:i.subarray(0,l),n}},Am=function(e,n){for(var i=0,l=0;l<n.length;++l)i+=e[l]*n[l];return i},$I=function(e,n,i){var l=i.length,h=qI(n+2);e[h]=l&255,e[h+1]=l>>8,e[h+2]=e[h]^255,e[h+3]=e[h+1]^255;for(var f=0;f<l;++f)e[h+f+4]=i[f];return(h+4+l)*8},oC=function(e,n,i,l,h,f,m,a,x,S,I){Ph(n,I++,i),++h[256];for(var U=U_(h,15),Q=U.t,P=U.l,$=U_(f,15),z=$.t,O=$.l,W=sC(Q),ne=W.c,ce=W.n,de=sC(z),Se=de.c,ze=de.n,Ze=new bA(19),Qe=0;Qe<ne.length;++Qe)++Ze[ne[Qe]&31];for(var Qe=0;Qe<Se.length;++Qe)++Ze[Se[Qe]&31];for(var be=U_(Ze,7),Ge=be.t,le=be.l,ge=19;ge>4&&!Ge[nC[ge-1]];--ge);var Pe=S+5<<3,Fe=Am(h,id)+Am(f,dy)+m,pt=Am(h,Q)+Am(f,z)+m+14+3*ge+Am(Ze,Ge)+2*Ze[16]+3*Ze[17]+7*Ze[18];if(x>=0&&Pe<=Fe&&Pe<=pt)return $I(n,I,e.subarray(x,x+S));var ut,At,Ne,Ie;if(Ph(n,I,1+(pt<Fe)),I+=2,pt<Fe){ut=Cm(Q,P,0),At=Q,Ne=Cm(z,O,0),Ie=z;var yt=Cm(Ge,le,0);Ph(n,I,ce-257),Ph(n,I+5,ze-1),Ph(n,I+10,ge-4),I+=14;for(var Qe=0;Qe<ge;++Qe)Ph(n,I+3*Qe,Ge[nC[Qe]]);I+=3*ge;for(var Ue=[ne,Se],ie=0;ie<2;++ie)for(var Ee=Ue[ie],Qe=0;Qe<Ee.length;++Qe){var De=Ee[Qe]&31;Ph(n,I,yt[De]),I+=Ge[De],De>15&&(Ph(n,I,Ee[Qe]>>5&127),I+=Ee[Qe]>>12)}}else ut=V7,At=id,Ne=G7,Ie=dy;for(var Qe=0;Qe<a;++Qe){var Ye=l[Qe];if(Ye>255){var De=Ye>>18&31;cm(n,I,ut[De+257]),I+=At[De+257],De>7&&(Ph(n,I,Ye>>23&31),I+=lx[De]);var at=Ye&31;cm(n,I,Ne[at]),I+=Ie[at],at>3&&(cm(n,I,Ye>>5&8191),I+=cx[at])}else cm(n,I,ut[Ye]),I+=At[Ye]}return cm(n,I,ut[256]),I+At[256]},q7=new ax([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),WI=new Eu(0),$7=function(e,n,i,l,h,f){var m=f.z||e.length,a=new Eu(l+m+5*(1+Math.ceil(m/7e3))+h),x=a.subarray(l,a.length-h),S=f.l,I=(f.r||0)&7;if(n){I&&(x[0]=f.r>>3);for(var U=q7[n-1],Q=U>>13,P=U&8191,$=(1<<i)-1,z=f.p||new bA(32768),O=f.h||new bA($+1),W=Math.ceil(i/3),ne=2*W,ce=function(Br){return(e[Br]^e[Br+1]<<W^e[Br+2]<<ne)&$},de=new ax(25e3),Se=new bA(288),ze=new bA(32),Ze=0,Qe=0,be=f.i||0,Ge=0,le=f.w||0,ge=0;be+2<m;++be){var Pe=ce(be),Fe=be&32767,pt=O[Pe];if(z[Fe]=pt,O[Pe]=Fe,le<=be){var ut=m-be;if((Ze>7e3||Ge>24576)&&(ut>423||!S)){I=oC(e,x,0,de,Se,ze,Qe,Ge,ge,be-ge,I),Ge=Ze=Qe=0,ge=be;for(var At=0;At<286;++At)Se[At]=0;for(var At=0;At<30;++At)ze[At]=0}var Ne=2,Ie=0,yt=P,Ue=Fe-pt&32767;if(ut>2&&Pe==ce(be-Ue))for(var ie=Math.min(Q,ut)-1,Ee=Math.min(32767,be),De=Math.min(258,ut);Ue<=Ee&&--yt&&Fe!=pt;){if(e[be+Ne]==e[be+Ne-Ue]){for(var Ye=0;Ye<De&&e[be+Ye]==e[be+Ye-Ue];++Ye);if(Ye>Ne){if(Ne=Ye,Ie=Ue,Ye>ie)break;for(var at=Math.min(Ue,Ye-2),tt=0,At=0;At<at;++At){var wt=be-Ue+At&32767,Et=z[wt],Pt=wt-Et&32767;Pt>tt&&(tt=Pt,pt=wt)}}}Fe=pt,pt=z[Fe],Ue+=Fe-pt&32767}if(Ie){de[Ge++]=268435456|sw[Ne]<<18|iC[Ie];var Wt=sw[Ne]&31,lr=iC[Ie]&31;Qe+=lx[Wt]+cx[lr],++Se[257+Wt],++ze[lr],le=be+Ne,++Ze}else de[Ge++]=e[be],++Se[e[be]]}}for(be=Math.max(be,le);be<m;++be)de[Ge++]=e[be],++Se[e[be]];I=oC(e,x,S,de,Se,ze,Qe,Ge,ge,be-ge,I),S||(f.r=I&7|x[I/8|0]<<3,I-=7,f.h=O,f.p=z,f.i=be,f.w=le)}else{for(var be=f.w||0;be<m+S;be+=65535){var fr=be+65535;fr>=m&&(x[I/8|0]=S,fr=m),I=$I(x,I+1,e.subarray(be,fr))}f.i=m}return K7(a,0,l+qI(I)+h)},ZI=function(){var e=1,n=0;return{p:function(i){for(var l=e,h=n,f=i.length|0,m=0;m!=f;){for(var a=Math.min(m+2655,f);m<a;++m)h+=l+=i[m];l=(l&65535)+15*(l>>16),h=(h&65535)+15*(h>>16)}e=l,n=h},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},W7=function(e,n,i,l,h){if(!h&&(h={l:1},n.dictionary)){var f=n.dictionary.subarray(-32768),m=new Eu(f.length+e.length);m.set(f),m.set(e,f.length),e=m,h.w=f.length}return $7(e,n.level==null?6:n.level,n.mem==null?h.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,i,l,h)},XI=function(e,n,i){for(;i;++n)e[n]=i,i>>>=8},Z7=function(e,n){var i=n.level,l=i==0?0:i<6?1:i==9?3:2;if(e[0]=120,e[1]=l<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var h=ZI();h.p(n.dictionary),XI(e,2,h.d())}};function lw(e,n){n||(n={});var i=ZI();i.p(e);var l=W7(e,n,n.dictionary?6:2,4);return Z7(l,n),XI(l,l.length-4,i.d()),l}var X7=typeof TextDecoder<"u"&&new TextDecoder,Y7=0;try{X7.decode(WI,{stream:!0}),Y7=1}catch{}function J7(e){if(Array.isArray(e))return e}function eH(e,n){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var l,h,f,m,a=[],x=!0,S=!1;try{if(f=(i=i.call(e)).next,n!==0)for(;!(x=(l=f.call(i)).done)&&(a.push(l.value),a.length!==n);x=!0);}catch(I){S=!0,h=I}finally{try{if(!x&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(S)throw h}}return a}}function aC(e,n){(n==null||n>e.length)&&(n=e.length);for(var i=0,l=Array(n);i<n;i++)l[i]=e[i];return l}function tH(e,n){if(e){if(typeof e=="string")return aC(e,n);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?aC(e,n):void 0}}function rH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lC(e,n){return J7(e)||eH(e,n)||tH(e,n)||rH()}function cC(e,n="utf8"){return new TextDecoder(n).decode(e)}const nH=new TextEncoder;function iH(e){return nH.encode(e)}const sH=1024*8,oH=(()=>{const e=new Uint8Array(4),n=new Uint32Array(e.buffer);return!((n[0]=1)&e[0])})(),D_={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Ax{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=sH,i={}){let l=!1;typeof n=="number"?n=new ArrayBuffer(n):(l=!0,this.lastWrittenByte=n.byteLength);const h=i.offset?i.offset>>>0:0,f=n.byteLength-h;let m=h;(ArrayBuffer.isView(n)||n instanceof Ax)&&(n.byteLength!==n.buffer.byteLength&&(m=n.byteOffset+h),n=n.buffer),l?this.lastWrittenByte=f:this.lastWrittenByte=0,this.buffer=n,this.length=f,this.byteLength=f,this.byteOffset=m,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,m,f),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const l=(this.offset+n)*2,h=new Uint8Array(l);h.set(new Uint8Array(this.buffer)),this.buffer=h.buffer,this.length=l,this.byteLength=l,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,i){const l=D_[i].BYTES_PER_ELEMENT*n,h=this.byteOffset+this.offset,f=this.buffer.slice(h,h+l);if(this.littleEndian===oH&&i!=="uint8"&&i!=="int8"){const a=new Uint8Array(this.buffer.slice(h,h+l));a.reverse();const x=new D_[i](a.buffer);return this.offset+=l,x.reverse(),x}const m=new D_[i](f);return this.offset+=l,m}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let i="";for(let l=0;l<n;l++)i+=this.readChar();return i}readUtf8(n=1){return cC(this.readBytes(n))}decodeText(n=1,i="utf8"){return cC(this.readBytes(n),i)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let i=0;i<n.length;i++)this._data.setUint8(this.offset++,n[i]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let i=0;i<n.length;i++)this.writeUint8(n.charCodeAt(i));return this}writeUtf8(n){return this.writeBytes(iH(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Cp(e){let n=e.length;for(;--n>=0;)e[n]=0}const aH=3,lH=258,YI=29,cH=256,AH=cH+1+YI,JI=30,uH=512,hH=new Array((AH+2)*2);Cp(hH);const fH=new Array(JI*2);Cp(fH);const dH=new Array(uH);Cp(dH);const pH=new Array(lH-aH+1);Cp(pH);const mH=new Array(YI);Cp(mH);const gH=new Array(JI);Cp(gH);const yH=(e,n,i,l)=>{let h=e&65535|0,f=e>>>16&65535|0,m=0;for(;i!==0;){m=i>2e3?2e3:i,i-=m;do h=h+n[l++]|0,f=f+h|0;while(--m);h%=65521,f%=65521}return h|f<<16|0};var cw=yH;const vH=()=>{let e,n=[];for(var i=0;i<256;i++){e=i;for(var l=0;l<8;l++)e=e&1?3988292384^e>>>1:e>>>1;n[i]=e}return n},_H=new Uint32Array(vH()),wH=(e,n,i,l)=>{const h=_H,f=l+i;e^=-1;for(let m=l;m<f;m++)e=e>>>8^h[(e^n[m])&255];return e^-1};var qu=wH,Aw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},e4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const xH=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var bH=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const i=n.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const l in i)xH(i,l)&&(e[l]=i[l])}}return e},BH=e=>{let n=0;for(let l=0,h=e.length;l<h;l++)n+=e[l].length;const i=new Uint8Array(n);for(let l=0,h=0,f=e.length;l<f;l++){let m=e[l];i.set(m,h),h+=m.length}return i},t4={assign:bH,flattenChunks:BH};let r4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r4=!1}const Qm=new Uint8Array(256);for(let e=0;e<256;e++)Qm[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Qm[254]=Qm[254]=1;var CH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,i,l,h,f,m=e.length,a=0;for(h=0;h<m;h++)i=e.charCodeAt(h),(i&64512)===55296&&h+1<m&&(l=e.charCodeAt(h+1),(l&64512)===56320&&(i=65536+(i-55296<<10)+(l-56320),h++)),a+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(a),f=0,h=0;f<a;h++)i=e.charCodeAt(h),(i&64512)===55296&&h+1<m&&(l=e.charCodeAt(h+1),(l&64512)===56320&&(i=65536+(i-55296<<10)+(l-56320),h++)),i<128?n[f++]=i:i<2048?(n[f++]=192|i>>>6,n[f++]=128|i&63):i<65536?(n[f++]=224|i>>>12,n[f++]=128|i>>>6&63,n[f++]=128|i&63):(n[f++]=240|i>>>18,n[f++]=128|i>>>12&63,n[f++]=128|i>>>6&63,n[f++]=128|i&63);return n};const SH=(e,n)=>{if(n<65534&&e.subarray&&r4)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let i="";for(let l=0;l<n;l++)i+=String.fromCharCode(e[l]);return i};var EH=(e,n)=>{const i=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let l,h;const f=new Array(i*2);for(h=0,l=0;l<i;){let m=e[l++];if(m<128){f[h++]=m;continue}let a=Qm[m];if(a>4){f[h++]=65533,l+=a-1;continue}for(m&=a===2?31:a===3?15:7;a>1&&l<i;)m=m<<6|e[l++]&63,a--;if(a>1){f[h++]=65533;continue}m<65536?f[h++]=m:(m-=65536,f[h++]=55296|m>>10&1023,f[h++]=56320|m&1023)}return SH(f,h)},FH=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let i=n-1;for(;i>=0&&(e[i]&192)===128;)i--;return i<0||i===0?n:i+Qm[e[i]]>n?i:n},uw={string2buf:CH,buf2string:EH,utf8border:FH};function IH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var TH=IH;const y0=16209,PH=16191;var LH=function(n,i){let l,h,f,m,a,x,S,I,U,Q,P,$,z,O,W,ne,ce,de,Se,ze,Ze,Qe,be,Ge;const le=n.state;l=n.next_in,be=n.input,h=l+(n.avail_in-5),f=n.next_out,Ge=n.output,m=f-(i-n.avail_out),a=f+(n.avail_out-257),x=le.dmax,S=le.wsize,I=le.whave,U=le.wnext,Q=le.window,P=le.hold,$=le.bits,z=le.lencode,O=le.distcode,W=(1<<le.lenbits)-1,ne=(1<<le.distbits)-1;e:do{$<15&&(P+=be[l++]<<$,$+=8,P+=be[l++]<<$,$+=8),ce=z[P&W];t:for(;;){if(de=ce>>>24,P>>>=de,$-=de,de=ce>>>16&255,de===0)Ge[f++]=ce&65535;else if(de&16){Se=ce&65535,de&=15,de&&($<de&&(P+=be[l++]<<$,$+=8),Se+=P&(1<<de)-1,P>>>=de,$-=de),$<15&&(P+=be[l++]<<$,$+=8,P+=be[l++]<<$,$+=8),ce=O[P&ne];r:for(;;){if(de=ce>>>24,P>>>=de,$-=de,de=ce>>>16&255,de&16){if(ze=ce&65535,de&=15,$<de&&(P+=be[l++]<<$,$+=8,$<de&&(P+=be[l++]<<$,$+=8)),ze+=P&(1<<de)-1,ze>x){n.msg="invalid distance too far back",le.mode=y0;break e}if(P>>>=de,$-=de,de=f-m,ze>de){if(de=ze-de,de>I&&le.sane){n.msg="invalid distance too far back",le.mode=y0;break e}if(Ze=0,Qe=Q,U===0){if(Ze+=S-de,de<Se){Se-=de;do Ge[f++]=Q[Ze++];while(--de);Ze=f-ze,Qe=Ge}}else if(U<de){if(Ze+=S+U-de,de-=U,de<Se){Se-=de;do Ge[f++]=Q[Ze++];while(--de);if(Ze=0,U<Se){de=U,Se-=de;do Ge[f++]=Q[Ze++];while(--de);Ze=f-ze,Qe=Ge}}}else if(Ze+=U-de,de<Se){Se-=de;do Ge[f++]=Q[Ze++];while(--de);Ze=f-ze,Qe=Ge}for(;Se>2;)Ge[f++]=Qe[Ze++],Ge[f++]=Qe[Ze++],Ge[f++]=Qe[Ze++],Se-=3;Se&&(Ge[f++]=Qe[Ze++],Se>1&&(Ge[f++]=Qe[Ze++]))}else{Ze=f-ze;do Ge[f++]=Ge[Ze++],Ge[f++]=Ge[Ze++],Ge[f++]=Ge[Ze++],Se-=3;while(Se>2);Se&&(Ge[f++]=Ge[Ze++],Se>1&&(Ge[f++]=Ge[Ze++]))}}else if((de&64)===0){ce=O[(ce&65535)+(P&(1<<de)-1)];continue r}else{n.msg="invalid distance code",le.mode=y0;break e}break}}else if((de&64)===0){ce=z[(ce&65535)+(P&(1<<de)-1)];continue t}else if(de&32){le.mode=PH;break e}else{n.msg="invalid literal/length code",le.mode=y0;break e}break}}while(l<h&&f<a);Se=$>>3,l-=Se,$-=Se<<3,P&=(1<<$)-1,n.next_in=l,n.next_out=f,n.avail_in=l<h?5+(h-l):5-(l-h),n.avail_out=f<a?257+(a-f):257-(f-a),le.hold=P,le.bits=$};const qd=15,AC=852,uC=592,hC=0,R_=1,fC=2,MH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),kH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),UH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),DH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),RH=(e,n,i,l,h,f,m,a)=>{const x=a.bits;let S=0,I=0,U=0,Q=0,P=0,$=0,z=0,O=0,W=0,ne=0,ce,de,Se,ze,Ze,Qe=null,be;const Ge=new Uint16Array(qd+1),le=new Uint16Array(qd+1);let ge=null,Pe,Fe,pt;for(S=0;S<=qd;S++)Ge[S]=0;for(I=0;I<l;I++)Ge[n[i+I]]++;for(P=x,Q=qd;Q>=1&&Ge[Q]===0;Q--);if(P>Q&&(P=Q),Q===0)return h[f++]=1<<24|64<<16|0,h[f++]=1<<24|64<<16|0,a.bits=1,0;for(U=1;U<Q&&Ge[U]===0;U++);for(P<U&&(P=U),O=1,S=1;S<=qd;S++)if(O<<=1,O-=Ge[S],O<0)return-1;if(O>0&&(e===hC||Q!==1))return-1;for(le[1]=0,S=1;S<qd;S++)le[S+1]=le[S]+Ge[S];for(I=0;I<l;I++)n[i+I]!==0&&(m[le[n[i+I]]++]=I);if(e===hC?(Qe=ge=m,be=20):e===R_?(Qe=MH,ge=kH,be=257):(Qe=UH,ge=DH,be=0),ne=0,I=0,S=U,Ze=f,$=P,z=0,Se=-1,W=1<<P,ze=W-1,e===R_&&W>AC||e===fC&&W>uC)return 1;for(;;){Pe=S-z,m[I]+1<be?(Fe=0,pt=m[I]):m[I]>=be?(Fe=ge[m[I]-be],pt=Qe[m[I]-be]):(Fe=96,pt=0),ce=1<<S-z,de=1<<$,U=de;do de-=ce,h[Ze+(ne>>z)+de]=Pe<<24|Fe<<16|pt|0;while(de!==0);for(ce=1<<S-1;ne&ce;)ce>>=1;if(ce!==0?(ne&=ce-1,ne+=ce):ne=0,I++,--Ge[S]===0){if(S===Q)break;S=n[i+m[I]]}if(S>P&&(ne&ze)!==Se){for(z===0&&(z=P),Ze+=U,$=S-z,O=1<<$;$+z<Q&&(O-=Ge[$+z],!(O<=0));)$++,O<<=1;if(W+=1<<$,e===R_&&W>AC||e===fC&&W>uC)return 1;Se=ne&ze,h[Se]=P<<24|$<<16|Ze-f|0}}return ne!==0&&(h[Ze+ne]=S-z<<24|64<<16|0),a.bits=P,0};var Sm=RH;const NH=0,n4=1,i4=2,{Z_FINISH:dC,Z_BLOCK:QH,Z_TREES:v0,Z_OK:sd,Z_STREAM_END:OH,Z_NEED_DICT:zH,Z_STREAM_ERROR:eu,Z_DATA_ERROR:s4,Z_MEM_ERROR:o4,Z_BUF_ERROR:HH,Z_DEFLATED:pC}=e4,Jy=16180,mC=16181,gC=16182,yC=16183,vC=16184,_C=16185,wC=16186,xC=16187,bC=16188,BC=16189,py=16190,Lh=16191,N_=16192,CC=16193,Q_=16194,SC=16195,EC=16196,FC=16197,IC=16198,_0=16199,w0=16200,TC=16201,PC=16202,LC=16203,MC=16204,kC=16205,O_=16206,UC=16207,DC=16208,io=16209,a4=16210,l4=16211,jH=852,VH=592,GH=15,KH=GH,RC=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function qH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ld=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<Jy||n.mode>l4?1:0},c4=e=>{if(ld(e))return eu;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=Jy,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(jH),n.distcode=n.distdyn=new Int32Array(VH),n.sane=1,n.back=-1,sd},A4=e=>{if(ld(e))return eu;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,c4(e)},u4=(e,n)=>{let i;if(ld(e))return eu;const l=e.state;return n<0?(i=0,n=-n):(i=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?eu:(l.window!==null&&l.wbits!==n&&(l.window=null),l.wrap=i,l.wbits=n,A4(e))},h4=(e,n)=>{if(!e)return eu;const i=new qH;e.state=i,i.strm=e,i.window=null,i.mode=Jy;const l=u4(e,n);return l!==sd&&(e.state=null),l},$H=e=>h4(e,KH);let NC=!0,z_,H_;const WH=e=>{if(NC){z_=new Int32Array(512),H_=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(Sm(n4,e.lens,0,288,z_,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;Sm(i4,e.lens,0,32,H_,0,e.work,{bits:5}),NC=!1}e.lencode=z_,e.lenbits=9,e.distcode=H_,e.distbits=5},f4=(e,n,i,l)=>{let h;const f=e.state;return f.window===null&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new Uint8Array(f.wsize)),l>=f.wsize?(f.window.set(n.subarray(i-f.wsize,i),0),f.wnext=0,f.whave=f.wsize):(h=f.wsize-f.wnext,h>l&&(h=l),f.window.set(n.subarray(i-l,i-l+h),f.wnext),l-=h,l?(f.window.set(n.subarray(i-l,i),0),f.wnext=l,f.whave=f.wsize):(f.wnext+=h,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=h))),0},ZH=(e,n)=>{let i,l,h,f,m,a,x,S,I,U,Q,P,$,z,O=0,W,ne,ce,de,Se,ze,Ze,Qe;const be=new Uint8Array(4);let Ge,le;const ge=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ld(e)||!e.output||!e.input&&e.avail_in!==0)return eu;i=e.state,i.mode===Lh&&(i.mode=N_),m=e.next_out,h=e.output,x=e.avail_out,f=e.next_in,l=e.input,a=e.avail_in,S=i.hold,I=i.bits,U=a,Q=x,Qe=sd;e:for(;;)switch(i.mode){case Jy:if(i.wrap===0){i.mode=N_;break}for(;I<16;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if(i.wrap&2&&S===35615){i.wbits===0&&(i.wbits=15),i.check=0,be[0]=S&255,be[1]=S>>>8&255,i.check=qu(i.check,be,2,0),S=0,I=0,i.mode=mC;break}if(i.head&&(i.head.done=!1),!(i.wrap&1)||(((S&255)<<8)+(S>>8))%31){e.msg="incorrect header check",i.mode=io;break}if((S&15)!==pC){e.msg="unknown compression method",i.mode=io;break}if(S>>>=4,I-=4,Ze=(S&15)+8,i.wbits===0&&(i.wbits=Ze),Ze>15||Ze>i.wbits){e.msg="invalid window size",i.mode=io;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=S&512?BC:Lh,S=0,I=0;break;case mC:for(;I<16;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if(i.flags=S,(i.flags&255)!==pC){e.msg="unknown compression method",i.mode=io;break}if(i.flags&57344){e.msg="unknown header flags set",i.mode=io;break}i.head&&(i.head.text=S>>8&1),i.flags&512&&i.wrap&4&&(be[0]=S&255,be[1]=S>>>8&255,i.check=qu(i.check,be,2,0)),S=0,I=0,i.mode=gC;case gC:for(;I<32;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}i.head&&(i.head.time=S),i.flags&512&&i.wrap&4&&(be[0]=S&255,be[1]=S>>>8&255,be[2]=S>>>16&255,be[3]=S>>>24&255,i.check=qu(i.check,be,4,0)),S=0,I=0,i.mode=yC;case yC:for(;I<16;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}i.head&&(i.head.xflags=S&255,i.head.os=S>>8),i.flags&512&&i.wrap&4&&(be[0]=S&255,be[1]=S>>>8&255,i.check=qu(i.check,be,2,0)),S=0,I=0,i.mode=vC;case vC:if(i.flags&1024){for(;I<16;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}i.length=S,i.head&&(i.head.extra_len=S),i.flags&512&&i.wrap&4&&(be[0]=S&255,be[1]=S>>>8&255,i.check=qu(i.check,be,2,0)),S=0,I=0}else i.head&&(i.head.extra=null);i.mode=_C;case _C:if(i.flags&1024&&(P=i.length,P>a&&(P=a),P&&(i.head&&(Ze=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(l.subarray(f,f+P),Ze)),i.flags&512&&i.wrap&4&&(i.check=qu(i.check,l,P,f)),a-=P,f+=P,i.length-=P),i.length))break e;i.length=0,i.mode=wC;case wC:if(i.flags&2048){if(a===0)break e;P=0;do Ze=l[f+P++],i.head&&Ze&&i.length<65536&&(i.head.name+=String.fromCharCode(Ze));while(Ze&&P<a);if(i.flags&512&&i.wrap&4&&(i.check=qu(i.check,l,P,f)),a-=P,f+=P,Ze)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=xC;case xC:if(i.flags&4096){if(a===0)break e;P=0;do Ze=l[f+P++],i.head&&Ze&&i.length<65536&&(i.head.comment+=String.fromCharCode(Ze));while(Ze&&P<a);if(i.flags&512&&i.wrap&4&&(i.check=qu(i.check,l,P,f)),a-=P,f+=P,Ze)break e}else i.head&&(i.head.comment=null);i.mode=bC;case bC:if(i.flags&512){for(;I<16;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if(i.wrap&4&&S!==(i.check&65535)){e.msg="header crc mismatch",i.mode=io;break}S=0,I=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Lh;break;case BC:for(;I<32;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}e.adler=i.check=RC(S),S=0,I=0,i.mode=py;case py:if(i.havedict===0)return e.next_out=m,e.avail_out=x,e.next_in=f,e.avail_in=a,i.hold=S,i.bits=I,zH;e.adler=i.check=1,i.mode=Lh;case Lh:if(n===QH||n===v0)break e;case N_:if(i.last){S>>>=I&7,I-=I&7,i.mode=O_;break}for(;I<3;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}switch(i.last=S&1,S>>>=1,I-=1,S&3){case 0:i.mode=CC;break;case 1:if(WH(i),i.mode=_0,n===v0){S>>>=2,I-=2;break e}break;case 2:i.mode=EC;break;case 3:e.msg="invalid block type",i.mode=io}S>>>=2,I-=2;break;case CC:for(S>>>=I&7,I-=I&7;I<32;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if((S&65535)!==(S>>>16^65535)){e.msg="invalid stored block lengths",i.mode=io;break}if(i.length=S&65535,S=0,I=0,i.mode=Q_,n===v0)break e;case Q_:i.mode=SC;case SC:if(P=i.length,P){if(P>a&&(P=a),P>x&&(P=x),P===0)break e;h.set(l.subarray(f,f+P),m),a-=P,f+=P,x-=P,m+=P,i.length-=P;break}i.mode=Lh;break;case EC:for(;I<14;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if(i.nlen=(S&31)+257,S>>>=5,I-=5,i.ndist=(S&31)+1,S>>>=5,I-=5,i.ncode=(S&15)+4,S>>>=4,I-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=io;break}i.have=0,i.mode=FC;case FC:for(;i.have<i.ncode;){for(;I<3;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}i.lens[ge[i.have++]]=S&7,S>>>=3,I-=3}for(;i.have<19;)i.lens[ge[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Ge={bits:i.lenbits},Qe=Sm(NH,i.lens,0,19,i.lencode,0,i.work,Ge),i.lenbits=Ge.bits,Qe){e.msg="invalid code lengths set",i.mode=io;break}i.have=0,i.mode=IC;case IC:for(;i.have<i.nlen+i.ndist;){for(;O=i.lencode[S&(1<<i.lenbits)-1],W=O>>>24,ne=O>>>16&255,ce=O&65535,!(W<=I);){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if(ce<16)S>>>=W,I-=W,i.lens[i.have++]=ce;else{if(ce===16){for(le=W+2;I<le;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if(S>>>=W,I-=W,i.have===0){e.msg="invalid bit length repeat",i.mode=io;break}Ze=i.lens[i.have-1],P=3+(S&3),S>>>=2,I-=2}else if(ce===17){for(le=W+3;I<le;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}S>>>=W,I-=W,Ze=0,P=3+(S&7),S>>>=3,I-=3}else{for(le=W+7;I<le;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}S>>>=W,I-=W,Ze=0,P=11+(S&127),S>>>=7,I-=7}if(i.have+P>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=io;break}for(;P--;)i.lens[i.have++]=Ze}}if(i.mode===io)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=io;break}if(i.lenbits=9,Ge={bits:i.lenbits},Qe=Sm(n4,i.lens,0,i.nlen,i.lencode,0,i.work,Ge),i.lenbits=Ge.bits,Qe){e.msg="invalid literal/lengths set",i.mode=io;break}if(i.distbits=6,i.distcode=i.distdyn,Ge={bits:i.distbits},Qe=Sm(i4,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Ge),i.distbits=Ge.bits,Qe){e.msg="invalid distances set",i.mode=io;break}if(i.mode=_0,n===v0)break e;case _0:i.mode=w0;case w0:if(a>=6&&x>=258){e.next_out=m,e.avail_out=x,e.next_in=f,e.avail_in=a,i.hold=S,i.bits=I,LH(e,Q),m=e.next_out,h=e.output,x=e.avail_out,f=e.next_in,l=e.input,a=e.avail_in,S=i.hold,I=i.bits,i.mode===Lh&&(i.back=-1);break}for(i.back=0;O=i.lencode[S&(1<<i.lenbits)-1],W=O>>>24,ne=O>>>16&255,ce=O&65535,!(W<=I);){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if(ne&&(ne&240)===0){for(de=W,Se=ne,ze=ce;O=i.lencode[ze+((S&(1<<de+Se)-1)>>de)],W=O>>>24,ne=O>>>16&255,ce=O&65535,!(de+W<=I);){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}S>>>=de,I-=de,i.back+=de}if(S>>>=W,I-=W,i.back+=W,i.length=ce,ne===0){i.mode=kC;break}if(ne&32){i.back=-1,i.mode=Lh;break}if(ne&64){e.msg="invalid literal/length code",i.mode=io;break}i.extra=ne&15,i.mode=TC;case TC:if(i.extra){for(le=i.extra;I<le;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}i.length+=S&(1<<i.extra)-1,S>>>=i.extra,I-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=PC;case PC:for(;O=i.distcode[S&(1<<i.distbits)-1],W=O>>>24,ne=O>>>16&255,ce=O&65535,!(W<=I);){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if((ne&240)===0){for(de=W,Se=ne,ze=ce;O=i.distcode[ze+((S&(1<<de+Se)-1)>>de)],W=O>>>24,ne=O>>>16&255,ce=O&65535,!(de+W<=I);){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}S>>>=de,I-=de,i.back+=de}if(S>>>=W,I-=W,i.back+=W,ne&64){e.msg="invalid distance code",i.mode=io;break}i.offset=ce,i.extra=ne&15,i.mode=LC;case LC:if(i.extra){for(le=i.extra;I<le;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}i.offset+=S&(1<<i.extra)-1,S>>>=i.extra,I-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=io;break}i.mode=MC;case MC:if(x===0)break e;if(P=Q-x,i.offset>P){if(P=i.offset-P,P>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=io;break}P>i.wnext?(P-=i.wnext,$=i.wsize-P):$=i.wnext-P,P>i.length&&(P=i.length),z=i.window}else z=h,$=m-i.offset,P=i.length;P>x&&(P=x),x-=P,i.length-=P;do h[m++]=z[$++];while(--P);i.length===0&&(i.mode=w0);break;case kC:if(x===0)break e;h[m++]=i.length,x--,i.mode=w0;break;case O_:if(i.wrap){for(;I<32;){if(a===0)break e;a--,S|=l[f++]<<I,I+=8}if(Q-=x,e.total_out+=Q,i.total+=Q,i.wrap&4&&Q&&(e.adler=i.check=i.flags?qu(i.check,h,Q,m-Q):cw(i.check,h,Q,m-Q)),Q=x,i.wrap&4&&(i.flags?S:RC(S))!==i.check){e.msg="incorrect data check",i.mode=io;break}S=0,I=0}i.mode=UC;case UC:if(i.wrap&&i.flags){for(;I<32;){if(a===0)break e;a--,S+=l[f++]<<I,I+=8}if(i.wrap&4&&S!==(i.total&4294967295)){e.msg="incorrect length check",i.mode=io;break}S=0,I=0}i.mode=DC;case DC:Qe=OH;break e;case io:Qe=s4;break e;case a4:return o4;case l4:default:return eu}return e.next_out=m,e.avail_out=x,e.next_in=f,e.avail_in=a,i.hold=S,i.bits=I,(i.wsize||Q!==e.avail_out&&i.mode<io&&(i.mode<O_||n!==dC))&&f4(e,e.output,e.next_out,Q-e.avail_out),U-=e.avail_in,Q-=e.avail_out,e.total_in+=U,e.total_out+=Q,i.total+=Q,i.wrap&4&&Q&&(e.adler=i.check=i.flags?qu(i.check,h,Q,e.next_out-Q):cw(i.check,h,Q,e.next_out-Q)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Lh?128:0)+(i.mode===_0||i.mode===Q_?256:0),(U===0&&Q===0||n===dC)&&Qe===sd&&(Qe=HH),Qe},XH=e=>{if(ld(e))return eu;let n=e.state;return n.window&&(n.window=null),e.state=null,sd},YH=(e,n)=>{if(ld(e))return eu;const i=e.state;return(i.wrap&2)===0?eu:(i.head=n,n.done=!1,sd)},JH=(e,n)=>{const i=n.length;let l,h,f;return ld(e)||(l=e.state,l.wrap!==0&&l.mode!==py)?eu:l.mode===py&&(h=1,h=cw(h,n,i,0),h!==l.check)?s4:(f=f4(e,n,i,i),f?(l.mode=a4,o4):(l.havedict=1,sd))};var ej=A4,tj=u4,rj=c4,nj=$H,ij=h4,sj=ZH,oj=XH,aj=YH,lj=JH,cj="pako inflate (from Nodeca project)",Mh={inflateReset:ej,inflateReset2:tj,inflateResetKeep:rj,inflateInit:nj,inflateInit2:ij,inflate:sj,inflateEnd:oj,inflateGetHeader:aj,inflateSetDictionary:lj,inflateInfo:cj};function Aj(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var uj=Aj;const d4=Object.prototype.toString,{Z_NO_FLUSH:hj,Z_FINISH:fj,Z_OK:Om,Z_STREAM_END:j_,Z_NEED_DICT:V_,Z_STREAM_ERROR:dj,Z_DATA_ERROR:QC,Z_MEM_ERROR:pj}=e4;function Ym(e){this.options=t4.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new TH,this.strm.avail_out=0;let i=Mh.inflateInit2(this.strm,n.windowBits);if(i!==Om)throw new Error(Aw[i]);if(this.header=new uj,Mh.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=uw.string2buf(n.dictionary):d4.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(i=Mh.inflateSetDictionary(this.strm,n.dictionary),i!==Om)))throw new Error(Aw[i])}Ym.prototype.push=function(e,n){const i=this.strm,l=this.options.chunkSize,h=this.options.dictionary;let f,m,a;if(this.ended)return!1;for(n===~~n?m=n:m=n===!0?fj:hj,d4.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(l),i.next_out=0,i.avail_out=l),f=Mh.inflate(i,m),f===V_&&h&&(f=Mh.inflateSetDictionary(i,h),f===Om?f=Mh.inflate(i,m):f===QC&&(f=V_));i.avail_in>0&&f===j_&&i.state.wrap>0&&e[i.next_in]!==0;)Mh.inflateReset(i),f=Mh.inflate(i,m);switch(f){case dj:case QC:case V_:case pj:return this.onEnd(f),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(i.avail_out===0||f===j_))if(this.options.to==="string"){let x=uw.utf8border(i.output,i.next_out),S=i.next_out-x,I=uw.buf2string(i.output,x);i.next_out=S,i.avail_out=l-S,S&&i.output.set(i.output.subarray(x,x+S),0),this.onData(I)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(!(f===Om&&a===0)){if(f===j_)return f=Mh.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,!0;if(i.avail_in===0)break}}return!0};Ym.prototype.onData=function(e){this.chunks.push(e)};Ym.prototype.onEnd=function(e){e===Om&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t4.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function mj(e,n){const i=new Ym(n);if(i.push(e),i.err)throw i.msg||Aw[i.err];return i.result}var gj=Ym,yj=mj,vj={Inflate:gj,inflate:yj};const{Inflate:_j,inflate:wj}=vj;var OC=_j,xj=wj;const p4=[];for(let e=0;e<256;e++){let n=e;for(let i=0;i<8;i++)n&1?n=3988292384^n>>>1:n=n>>>1;p4[e]=n}const zC=4294967295;function bj(e,n,i){let l=e;for(let h=0;h<i;h++)l=p4[(l^n[h])&255]^l>>>8;return l}function Bj(e,n){return(bj(zC,e,n)^zC)>>>0}function HC(e,n,i){const l=e.readUint32(),h=Bj(new Uint8Array(e.buffer,e.byteOffset+e.offset-n-4,n),n);if(h!==l)throw new Error(`CRC mismatch for chunk ${i}. Expected ${l}, found ${h}`)}function m4(e,n,i){for(let l=0;l<i;l++)n[l]=e[l]}function g4(e,n,i,l){let h=0;for(;h<l;h++)n[h]=e[h];for(;h<i;h++)n[h]=e[h]+n[h-l]&255}function y4(e,n,i,l){let h=0;if(i.length===0)for(;h<l;h++)n[h]=e[h];else for(;h<l;h++)n[h]=e[h]+i[h]&255}function v4(e,n,i,l,h){let f=0;if(i.length===0){for(;f<h;f++)n[f]=e[f];for(;f<l;f++)n[f]=e[f]+(n[f-h]>>1)&255}else{for(;f<h;f++)n[f]=e[f]+(i[f]>>1)&255;for(;f<l;f++)n[f]=e[f]+(n[f-h]+i[f]>>1)&255}}function _4(e,n,i,l,h){let f=0;if(i.length===0){for(;f<h;f++)n[f]=e[f];for(;f<l;f++)n[f]=e[f]+n[f-h]&255}else{for(;f<h;f++)n[f]=e[f]+i[f]&255;for(;f<l;f++)n[f]=e[f]+Cj(n[f-h],i[f],i[f-h])&255}}function Cj(e,n,i){const l=e+n-i,h=Math.abs(l-e),f=Math.abs(l-n),m=Math.abs(l-i);return h<=f&&h<=m?e:f<=m?n:i}function Sj(e,n,i,l,h,f){switch(e){case 0:m4(n,i,h);break;case 1:g4(n,i,h,f);break;case 2:y4(n,i,l,h);break;case 3:v4(n,i,l,h,f);break;case 4:_4(n,i,l,h,f);break;default:throw new Error(`Unsupported filter: ${e}`)}}const Ej=new Uint16Array([255]),Fj=new Uint8Array(Ej.buffer),Ij=Fj[0]===255;function Tj(e){const{data:n,width:i,height:l,channels:h,depth:f}=e,m=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(f/8)*h,x=new Uint8Array(l*i*a);let S=0;for(let I=0;I<7;I++){const U=m[I],Q=Math.ceil((i-U.x)/U.xStep),P=Math.ceil((l-U.y)/U.yStep);if(Q<=0||P<=0)continue;const $=Q*a,z=new Uint8Array($);for(let O=0;O<P;O++){const W=n[S++],ne=n.subarray(S,S+$);S+=$;const ce=new Uint8Array($);Sj(W,ne,ce,z,$,a),z.set(ce);for(let de=0;de<Q;de++){const Se=U.x+de*U.xStep,ze=U.y+O*U.yStep;if(!(Se>=i||ze>=l))for(let Ze=0;Ze<a;Ze++)x[(ze*i+Se)*a+Ze]=ce[de*a+Ze]}}}if(f===16){const I=new Uint16Array(x.buffer);if(Ij)for(let U=0;U<I.length;U++)I[U]=Pj(I[U]);return I}else return x}function Pj(e){return(e&255)<<8|e>>8&255}const Lj=new Uint16Array([255]),Mj=new Uint8Array(Lj.buffer),kj=Mj[0]===255,Uj=new Uint8Array(0);function jC(e){const{data:n,width:i,height:l,channels:h,depth:f}=e,m=Math.ceil(f/8)*h,a=Math.ceil(f/8*h*i),x=new Uint8Array(l*a);let S=Uj,I=0,U,Q;for(let P=0;P<l;P++){switch(U=n.subarray(I+1,I+1+a),Q=x.subarray(P*a,(P+1)*a),n[I]){case 0:m4(U,Q,a);break;case 1:g4(U,Q,a,m);break;case 2:y4(U,Q,S,a);break;case 3:v4(U,Q,S,a,m);break;case 4:_4(U,Q,S,a,m);break;default:throw new Error(`Unsupported filter: ${n[I]}`)}S=Q,I+=a+1}if(f===16){const P=new Uint16Array(x.buffer);if(kj)for(let $=0;$<P.length;$++)P[$]=Dj(P[$]);return P}else return x}function Dj(e){return(e&255)<<8|e>>8&255}const N0=Uint8Array.of(137,80,78,71,13,10,26,10);function VC(e){if(!Rj(e.readBytes(N0.length)))throw new Error("wrong PNG signature")}function Rj(e){if(e.length<N0.length)return!1;for(let n=0;n<N0.length;n++)if(e[n]!==N0[n])return!1;return!0}const Nj="tEXt",Qj=0,w4=new TextDecoder("latin1");function Oj(e){if(Hj(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const zj=/^[\u0000-\u00FF]*$/;function Hj(e){if(!zj.test(e))throw new Error("invalid latin1 text")}function jj(e,n,i){const l=x4(n);e[l]=Vj(n,i-l.length-1)}function x4(e){for(e.mark();e.readByte()!==Qj;);const n=e.offset;e.reset();const i=w4.decode(e.readBytes(n-e.offset-1));return e.skip(1),Oj(i),i}function Vj(e,n){return w4.decode(e.readBytes(n))}const _A={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},G_={UNKNOWN:-1,DEFLATE:0},GC={UNKNOWN:-1,ADAPTIVE:0},K_={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},x0={NONE:0,BACKGROUND:1,PREVIOUS:2},q_={SOURCE:0,OVER:1};class Gj extends Ax{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(n,i={}){super(n);const{checkCrc:l=!1}=i;this._checkCrc=l,this._inflator=new OC,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=G_.UNKNOWN,this._filterMethod=GC.UNKNOWN,this._interlaceMethod=K_.UNKNOWN,this._colorType=_A.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(VC(this);!this._end;){const n=this.readUint32(),i=this.readChars(4);this.decodeChunk(n,i)}return this.decodeImage(),this._png}decodeApng(){for(VC(this);!this._end;){const n=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(n,i)}return this.decodeApngImage(),this._apng}decodeChunk(n,i){const l=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case Nj:jj(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-l!==n)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?HC(this,n+4,i):this.skip(4)}decodeApngChunk(n,i){const l=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,i),this.offset=l+n;break}if(this.offset-l!==n)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?HC(this,n+4,i):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=Kj(this.readUint8());const i=this.readUint8();this._colorType=i;let l;switch(i){case _A.GREYSCALE:l=1;break;case _A.TRUECOLOUR:l=3;break;case _A.INDEXED_COLOUR:l=1;break;case _A.GREYSCALE_ALPHA:l=2;break;case _A.TRUECOLOUR_ALPHA:l=4;break;case _A.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=l,this._compressionMethod=this.readUint8(),this._compressionMethod!==G_.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const i=n/3;this._hasPalette=!0;const l=[];this._palette=l;for(let h=0;h<i;h++)l.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const i=n,l=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,l,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let i=n,l=this.offset+this.byteOffset;if(l+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,l,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case _A.GREYSCALE:case _A.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let i=0;i<n/2;i++)this._transparency[i]=this.readUint16();break}case _A.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let i=0;for(;i<n;i++){const l=this.readByte();this._palette[i].push(l)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case _A.UNKNOWN:case _A.GREYSCALE_ALPHA:case _A.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const i=x4(this),l=this.readUint8();if(l!==G_.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${l}`);const h=this.readBytes(n-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:xj(h)}}decodepHYs(){const n=this.readUint32(),i=this.readUint32(),l=this.readByte();this._png.resolution={x:n,y:i,unit:l}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const i={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},l=this._frames.at(n);if(l){if(l.data=jC({data:l.data,width:l.width,height:l.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||l.xOffset===0&&l.yOffset===0&&l.width===this._png.width&&l.height===this._png.height)i.data=l.data;else{const h=this._apng.frames.at(n-1);this.disposeFrame(l,h,i),this.addFrameDataToCanvas(i,l)}this._apng.frames.push(i)}}return this._apng}disposeFrame(n,i,l){switch(n.disposeOp){case x0.NONE:break;case x0.BACKGROUND:for(let h=0;h<this._png.height;h++)for(let f=0;f<this._png.width;f++){const m=(h*n.width+f)*this._png.channels;for(let a=0;a<this._png.channels;a++)l.data[m+a]=0}break;case x0.PREVIOUS:l.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,i){const l=1<<this._png.depth,h=(f,m)=>{const a=((f+i.yOffset)*this._png.width+i.xOffset+m)*this._png.channels,x=(f*i.width+m)*this._png.channels;return{index:a,frameIndex:x}};switch(i.blendOp){case q_.SOURCE:for(let f=0;f<i.height;f++)for(let m=0;m<i.width;m++){const{index:a,frameIndex:x}=h(f,m);for(let S=0;S<this._png.channels;S++)n.data[a+S]=i.data[x+S]}break;case q_.OVER:for(let f=0;f<i.height;f++)for(let m=0;m<i.width;m++){const{index:a,frameIndex:x}=h(f,m);for(let S=0;S<this._png.channels;S++){const I=i.data[x+this._png.channels-1]/l,U=S%(this._png.channels-1)===0?1:i.data[x+S],Q=Math.floor(I*U+(1-I)*n.data[a+S]);n.data[a+S]+=Q}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==GC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===K_.NO_INTERLACE)this._png.data=jC({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===K_.ADAM7)this._png.data=Tj({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,i=this._frames.at(-1);i?i.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:x0.NONE,blendOp:q_.SOURCE,data:n}),this._inflator=new OC,this._writingDataChunks=!1}}function Kj(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var KC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(KC||(KC={}));function qj(e,n){return new Gj(e,n).decode()}var Mn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function $_(){Mn.console&&typeof Mn.console.log=="function"&&Mn.console.log.apply(Mn.console,arguments)}var ps={log:$_,warn:function(e){Mn.console&&(typeof Mn.console.warn=="function"?Mn.console.warn.apply(Mn.console,arguments):$_.call(null,arguments))},error:function(e){Mn.console&&(typeof Mn.console.error=="function"?Mn.console.error.apply(Mn.console,arguments):$_(e))}};function W_(e,n,i){var l=new XMLHttpRequest;l.open("GET",e),l.responseType="blob",l.onload=function(){Gf(l.response,n,i)},l.onerror=function(){ps.error("could not download file")},l.send()}function qC(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function b0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var Gf=Mn.saveAs||((typeof window>"u"?"undefined":ts(window))!=="object"||window!==Mn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,i){var l=Mn.URL||Mn.webkitURL,h=document.createElement("a");n=n||e.name||"download",h.download=n,h.rel="noopener",typeof e=="string"?(h.href=e,h.origin!==location.origin?qC(h.href)?W_(e,n,i):b0(h,h.target="_blank"):b0(h)):(h.href=l.createObjectURL(e),setTimeout(function(){l.revokeObjectURL(h.href)},4e4),setTimeout(function(){b0(h)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download",typeof e=="string")if(qC(e))W_(e,n,i);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout(function(){b0(l)})}else navigator.msSaveOrOpenBlob((function(h,f){return f===void 0?f={autoBom:!1}:ts(f)!=="object"&&(ps.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h})(e,i),n)}:function(e,n,i,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),typeof e=="string")return W_(e,n,i);var h=e.type==="application/octet-stream",f=/constructor/i.test(Mn.HTMLElement)||Mn.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||h&&f)&&(typeof FileReader>"u"?"undefined":ts(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var I=a.result;I=m?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=I:location=I,l=null},a.readAsDataURL(e)}else{var x=Mn.URL||Mn.webkitURL,S=x.createObjectURL(e);l?l.location=S:location.href=S,l=null,setTimeout(function(){x.revokeObjectURL(S)},4e4)}});function b4(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],l=0;l<i.length;l++){var h=i[l].re,f=i[l].process,m=h.exec(e);m&&(n=f(m),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),x=this.g.toString(16),S=this.b.toString(16);return a.length==1&&(a="0"+a),x.length==1&&(x="0"+x),S.length==1&&(S="0"+S),"#"+a+x+S}}var Q0=Mn.atob.bind(Mn),$C=Mn.btoa.bind(Mn);function Z_(e,n){var i=e[0],l=e[1],h=e[2],f=e[3];i=Vl(i,l,h,f,n[0],7,-680876936),f=Vl(f,i,l,h,n[1],12,-389564586),h=Vl(h,f,i,l,n[2],17,606105819),l=Vl(l,h,f,i,n[3],22,-1044525330),i=Vl(i,l,h,f,n[4],7,-176418897),f=Vl(f,i,l,h,n[5],12,1200080426),h=Vl(h,f,i,l,n[6],17,-1473231341),l=Vl(l,h,f,i,n[7],22,-45705983),i=Vl(i,l,h,f,n[8],7,1770035416),f=Vl(f,i,l,h,n[9],12,-1958414417),h=Vl(h,f,i,l,n[10],17,-42063),l=Vl(l,h,f,i,n[11],22,-1990404162),i=Vl(i,l,h,f,n[12],7,1804603682),f=Vl(f,i,l,h,n[13],12,-40341101),h=Vl(h,f,i,l,n[14],17,-1502002290),i=Gl(i,l=Vl(l,h,f,i,n[15],22,1236535329),h,f,n[1],5,-165796510),f=Gl(f,i,l,h,n[6],9,-1069501632),h=Gl(h,f,i,l,n[11],14,643717713),l=Gl(l,h,f,i,n[0],20,-373897302),i=Gl(i,l,h,f,n[5],5,-701558691),f=Gl(f,i,l,h,n[10],9,38016083),h=Gl(h,f,i,l,n[15],14,-660478335),l=Gl(l,h,f,i,n[4],20,-405537848),i=Gl(i,l,h,f,n[9],5,568446438),f=Gl(f,i,l,h,n[14],9,-1019803690),h=Gl(h,f,i,l,n[3],14,-187363961),l=Gl(l,h,f,i,n[8],20,1163531501),i=Gl(i,l,h,f,n[13],5,-1444681467),f=Gl(f,i,l,h,n[2],9,-51403784),h=Gl(h,f,i,l,n[7],14,1735328473),i=Kl(i,l=Gl(l,h,f,i,n[12],20,-1926607734),h,f,n[5],4,-378558),f=Kl(f,i,l,h,n[8],11,-2022574463),h=Kl(h,f,i,l,n[11],16,1839030562),l=Kl(l,h,f,i,n[14],23,-35309556),i=Kl(i,l,h,f,n[1],4,-1530992060),f=Kl(f,i,l,h,n[4],11,1272893353),h=Kl(h,f,i,l,n[7],16,-155497632),l=Kl(l,h,f,i,n[10],23,-1094730640),i=Kl(i,l,h,f,n[13],4,681279174),f=Kl(f,i,l,h,n[0],11,-358537222),h=Kl(h,f,i,l,n[3],16,-722521979),l=Kl(l,h,f,i,n[6],23,76029189),i=Kl(i,l,h,f,n[9],4,-640364487),f=Kl(f,i,l,h,n[12],11,-421815835),h=Kl(h,f,i,l,n[15],16,530742520),i=ql(i,l=Kl(l,h,f,i,n[2],23,-995338651),h,f,n[0],6,-198630844),f=ql(f,i,l,h,n[7],10,1126891415),h=ql(h,f,i,l,n[14],15,-1416354905),l=ql(l,h,f,i,n[5],21,-57434055),i=ql(i,l,h,f,n[12],6,1700485571),f=ql(f,i,l,h,n[3],10,-1894986606),h=ql(h,f,i,l,n[10],15,-1051523),l=ql(l,h,f,i,n[1],21,-2054922799),i=ql(i,l,h,f,n[8],6,1873313359),f=ql(f,i,l,h,n[15],10,-30611744),h=ql(h,f,i,l,n[6],15,-1560198380),l=ql(l,h,f,i,n[13],21,1309151649),i=ql(i,l,h,f,n[4],6,-145523070),f=ql(f,i,l,h,n[11],10,-1120210379),h=ql(h,f,i,l,n[2],15,718787259),l=ql(l,h,f,i,n[9],21,-343485551),e[0]=hf(i,e[0]),e[1]=hf(l,e[1]),e[2]=hf(h,e[2]),e[3]=hf(f,e[3])}function ev(e,n,i,l,h,f){return n=hf(hf(n,e),hf(l,f)),hf(n<<h|n>>>32-h,i)}function Vl(e,n,i,l,h,f,m){return ev(n&i|~n&l,e,n,h,f,m)}function Gl(e,n,i,l,h,f,m){return ev(n&l|i&~l,e,n,h,f,m)}function Kl(e,n,i,l,h,f,m){return ev(n^i^l,e,n,h,f,m)}function ql(e,n,i,l,h,f,m){return ev(i^(n|~l),e,n,h,f,m)}function B4(e){var n,i=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)Z_(l,$j(e.substring(n-64,n)));e=e.substring(n-64);var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)h[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(h[n>>2]|=128<<(n%4<<3),n>55)for(Z_(l,h),n=0;n<16;n++)h[n]=0;return h[14]=8*i,Z_(l,h),l}function $j(e){var n,i=[];for(n=0;n<64;n+=4)i[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return i}var WC="0123456789abcdef".split("");function Wj(e){for(var n="",i=0;i<4;i++)n+=WC[e>>8*i+4&15]+WC[e>>8*i&15];return n}function Zj(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function hw(e){return B4(e).map(Zj).join("")}var Xj=(function(e){for(var n=0;n<e.length;n++)e[n]=Wj(e[n]);return e.join("")})(B4("hello"))!="5d41402abc4b2a76b9719d911017c592";function hf(e,n){if(Xj){var i=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(i>>16)<<16|65535&i}return e+n&4294967295}function fw(e,n){var i,l,h,f;if(e!==i){for(var m=(h=e,f=1+(256/e.length|0),new Array(f+1).join(h)),a=[],x=0;x<256;x++)a[x]=x;var S=0;for(x=0;x<256;x++){var I=a[x];S=(S+I+m.charCodeAt(x))%256,a[x]=a[S],a[S]=I}i=e,l=a}else a=l;var U=n.length,Q=0,P=0,$="";for(x=0;x<U;x++)P=(P+(I=a[Q=(Q+1)%256]))%256,a[Q]=a[P],a[P]=I,m=a[(a[Q]+a[P])%256],$+=String.fromCharCode(n.charCodeAt(x)^m);return $}var ZC={print:4,modify:8,copy:16,"annot-forms":32};function Jd(e,n,i,l){this.v=1,this.r=2;var h=192;e.forEach(function(a){if(ZC.perm!==void 0)throw new Error("Invalid permission: "+a);h+=ZC[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var f=(n+this.padding).substr(0,32),m=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(f,m),this.P=-(1+(255^h)),this.encryptionKey=hw(f+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(l)).substr(0,5),this.U=fw(this.encryptionKey,this.padding)}function ep(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",i=e.length,l=0;l<i;l++){var h=e.charCodeAt(l);n+=h<33||h===35||h===37||h===40||h===41||h===47||h===60||h===62||h===91||h===93||h===123||h===125||h>126?"#"+("0"+h.toString(16)).slice(-2):e[l]}return n}function XC(e){if(ts(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(i,l,h){if(h=h||!1,typeof i!="string"||typeof l!="function"||typeof h!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(i)||(n[i]={});var f=Math.random().toString(35);return n[i][f]=[l,!!h],f},this.unsubscribe=function(i){for(var l in n)if(n[l][i])return delete n[l][i],Object.keys(n[l]).length===0&&delete n[l],!0;return!1},this.publish=function(i){if(n.hasOwnProperty(i)){var l=Array.prototype.slice.call(arguments,1),h=[];for(var f in n[i]){var m=n[i][f];try{m[0].apply(e,l)}catch(a){Mn.console&&ps.error("jsPDF PubSub Error",a.message,a)}m[1]&&h.push(f)}h.length&&h.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function my(e){if(!(this instanceof my))return new my(e);var n="opacity,stroke-opacity".split(",");for(var i in e)e.hasOwnProperty(i)&&n.indexOf(i)>=0&&(this[i]=e[i]);this.id="",this.objectNumber=-1}function C4(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function qf(e,n,i,l,h){if(!(this instanceof qf))return new qf(e,n,i,l,h);this.type=e==="axial"?2:3,this.coords=n,this.colors=i,C4.call(this,l,h)}function np(e,n,i,l,h){if(!(this instanceof np))return new np(e,n,i,l,h);this.boundingBox=e,this.xStep=n,this.yStep=i,this.stream="",this.cloneIndex=0,C4.call(this,l,h)}function fn(e){var n,i=typeof arguments[0]=="string"?arguments[0]:"p",l=arguments[1],h=arguments[2],f=arguments[3],m=[],a=1,x=16,S="S",I=null;ts(e=e||{})==="object"&&(i=e.orientation,l=e.unit||l,h=e.format||h,f=e.compress||e.compressPdf||f,(I=e.encryption||null)!==null&&(I.userPassword=I.userPassword||"",I.ownerPassword=I.ownerPassword||"",I.userPermissions=I.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(x=e.floatPrecision),S=e.defaultPathOperation||"S"),m=e.filters||(f===!0?["FlateEncode"]:m),l=l||"mm",i=(""+(i||"P")).toLowerCase();var U=e.putOnlyUsedFonts||!1,Q={},P={internal:{},__private__:{}};P.__private__.PubSub=XC;var $="1.3",z=P.__private__.getPdfVersion=function(){return $};P.__private__.setPdfVersion=function(j){$=j};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};P.__private__.getPageFormats=function(){return O};var W=P.__private__.getPageFormat=function(j){return O[j]};h=h||"a4";var ne="compat",ce="advanced",de=ne;function Se(){this.saveGraphicsState(),He(new _r(Ke,0,0,-Ke,0,so()*Ke).toString()+" cm"),this.setFontSize(this.getFontSize()/Ke),S="n",de=ce}function ze(){this.restoreGraphicsState(),S="S",de=ne}var Ze=P.__private__.combineFontStyleAndFontWeight=function(j,me){if(j=="bold"&&me=="normal"||j=="bold"&&me==400||j=="normal"&&me=="italic"||j=="bold"&&me=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return me&&(j=me==400||me==="normal"?j==="italic"?"italic":"normal":me!=700&&me!=="bold"||j!=="normal"?(me==700?"bold":me)+""+j:"bold"),j};P.advancedAPI=function(j){var me=de===ne;return me&&Se.call(this),typeof j!="function"||(j(this),me&&ze.call(this)),this},P.compatAPI=function(j){var me=de===ce;return me&&ze.call(this),typeof j!="function"||(j(this),me&&Se.call(this)),this},P.isAdvancedAPI=function(){return de===ce};var Qe,be=function(j){if(de!==ce)throw new Error(j+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ge=P.roundToPrecision=P.__private__.roundToPrecision=function(j,me){var Je=n||me;if(isNaN(j)||isNaN(Je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return j.toFixed(Je).replace(/0+$/,"")};Qe=P.hpf=P.__private__.hpf=typeof x=="number"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return Ge(j,x)}:x==="smart"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return Ge(j,j>-1&&j<1?16:5)}:function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return Ge(j,16)};var le=P.f2=P.__private__.f2=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f2");return Ge(j,2)},ge=P.__private__.f3=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f3");return Ge(j,3)},Pe=P.scale=P.__private__.scale=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.scale");return de===ne?j*Ke:de===ce?j:void 0},Fe=function(j){return Pe((function(me){return de===ne?so()-me:de===ce?me:void 0})(j))};P.__private__.setPrecision=P.setPrecision=function(j){typeof parseInt(j,10)=="number"&&(n=parseInt(j,10))};var pt,ut="00000000000000000000000000000000",At=P.__private__.getFileId=function(){return ut},Ne=P.__private__.setFileId=function(j){return ut=j!==void 0&&/^[a-fA-F0-9]{32}$/.test(j)?j.toUpperCase():ut.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),I!==null&&(ms=new Jd(I.userPermissions,I.userPassword,I.ownerPassword,ut)),ut};P.setFileId=function(j){return Ne(j),this},P.getFileId=function(){return At()};var Ie=P.__private__.convertDateToPDFDate=function(j){var me=j.getTimezoneOffset(),Je=me<0?"+":"-",mt=Math.floor(Math.abs(me/60)),Ft=Math.abs(me%60),Vt=[Je,De(mt),"'",De(Ft),"'"].join("");return["D:",j.getFullYear(),De(j.getMonth()+1),De(j.getDate()),De(j.getHours()),De(j.getMinutes()),De(j.getSeconds()),Vt].join("")},yt=P.__private__.convertPDFDateToDate=function(j){var me=parseInt(j.substr(2,4),10),Je=parseInt(j.substr(6,2),10)-1,mt=parseInt(j.substr(8,2),10),Ft=parseInt(j.substr(10,2),10),Vt=parseInt(j.substr(12,2),10),ir=parseInt(j.substr(14,2),10);return new Date(me,Je,mt,Ft,Vt,ir,0)},Ue=P.__private__.setCreationDate=function(j){var me;if(j===void 0&&(j=new Date),j instanceof Date)me=Ie(j);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(j))throw new Error("Invalid argument passed to jsPDF.setCreationDate");me=j}return pt=me},ie=P.__private__.getCreationDate=function(j){var me=pt;return j==="jsDate"&&(me=yt(pt)),me};P.setCreationDate=function(j){return Ue(j),this},P.getCreationDate=function(j){return ie(j)};var Ee,De=P.__private__.padd2=function(j){return("0"+parseInt(j)).slice(-2)},Ye=P.__private__.padd2Hex=function(j){return("00"+(j=j.toString())).substr(j.length)},at=0,tt=[],wt=[],Et=0,Pt=[],Wt=[],lr=!1,fr=wt;P.__private__.setCustomOutputDestination=function(j){lr=!0,fr=j};var Br=function(j){lr||(fr=j)};P.__private__.resetCustomOutputDestination=function(){lr=!1,fr=wt};var He=P.__private__.out=function(j){return j=j.toString(),Et+=j.length+1,fr.push(j),fr},yr=P.__private__.write=function(j){return He(arguments.length===1?j.toString():Array.prototype.join.call(arguments," "))},kr=P.__private__.getArrayBuffer=function(j){for(var me=j.length,Je=new ArrayBuffer(me),mt=new Uint8Array(Je);me--;)mt[me]=j.charCodeAt(me);return Je},qr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];P.__private__.getStandardFonts=function(){return qr};var or=e.fontSize||16;P.__private__.setFontSize=P.setFontSize=function(j){return or=de===ce?j/Ke:j,this};var $r,Sr=P.__private__.getFontSize=P.getFontSize=function(){return de===ne?or:or*Ke},Qr=e.R2L||!1;P.__private__.setR2L=P.setR2L=function(j){return Qr=j,this},P.__private__.getR2L=P.getR2L=function(){return Qr};var Dr,Qn=P.__private__.setZoomMode=function(j){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(j))$r=j;else if(isNaN(j)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(j)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+j+'" is not recognized.');$r=j}else $r=parseInt(j,10)};P.__private__.getZoomMode=function(){return $r};var un,ft=P.__private__.setPageMode=function(j){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(j)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+j+'" is not recognized.');Dr=j};P.__private__.getPageMode=function(){return Dr};var he=P.__private__.setLayoutMode=function(j){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(j)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+j+'" is not recognized.');un=j};P.__private__.getLayoutMode=function(){return un},P.__private__.setDisplayMode=P.setDisplayMode=function(j,me,Je){return Qn(j),he(me),ft(Je),this};var fe={title:"",subject:"",author:"",keywords:"",creator:""};P.__private__.getDocumentProperty=function(j){if(Object.keys(fe).indexOf(j)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return fe[j]},P.__private__.getDocumentProperties=function(){return fe},P.__private__.setDocumentProperties=P.setProperties=P.setDocumentProperties=function(j){for(var me in fe)fe.hasOwnProperty(me)&&j[me]&&(fe[me]=j[me]);return this},P.__private__.setDocumentProperty=function(j,me){if(Object.keys(fe).indexOf(j)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return fe[j]=me};var ye,Ke,$e,Bt,gt,st={},xt={},zt=[],St={},ar={},Yt={},hr={},tn=null,Ir=0,dt=[],en=new XC(P),Rr=e.hotfixes||[],pr={},Gr={},Un=[],_r=function j(me,Je,mt,Ft,Vt,ir){if(!(this instanceof j))return new j(me,Je,mt,Ft,Vt,ir);isNaN(me)&&(me=1),isNaN(Je)&&(Je=0),isNaN(mt)&&(mt=0),isNaN(Ft)&&(Ft=1),isNaN(Vt)&&(Vt=0),isNaN(ir)&&(ir=0),this._matrix=[me,Je,mt,Ft,Vt,ir]};Object.defineProperty(_r.prototype,"sx",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(_r.prototype,"shy",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(_r.prototype,"shx",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(_r.prototype,"sy",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(_r.prototype,"tx",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(_r.prototype,"ty",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(_r.prototype,"a",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(_r.prototype,"b",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(_r.prototype,"c",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(_r.prototype,"d",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(_r.prototype,"e",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(_r.prototype,"f",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(_r.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_r.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_r.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_r.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_r.prototype.join=function(j){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Qe).join(j)},_r.prototype.multiply=function(j){var me=j.sx*this.sx+j.shy*this.shx,Je=j.sx*this.shy+j.shy*this.sy,mt=j.shx*this.sx+j.sy*this.shx,Ft=j.shx*this.shy+j.sy*this.sy,Vt=j.tx*this.sx+j.ty*this.shx+this.tx,ir=j.tx*this.shy+j.ty*this.sy+this.ty;return new _r(me,Je,mt,Ft,Vt,ir)},_r.prototype.decompose=function(){var j=this.sx,me=this.shy,Je=this.shx,mt=this.sy,Ft=this.tx,Vt=this.ty,ir=Math.sqrt(j*j+me*me),xr=(j/=ir)*Je+(me/=ir)*mt;Je-=j*xr,mt-=me*xr;var jr=Math.sqrt(Je*Je+mt*mt);return xr/=jr,j*(mt/=jr)<me*(Je/=jr)&&(j=-j,me=-me,xr=-xr,ir=-ir),{scale:new _r(ir,0,0,jr,0,0),translate:new _r(1,0,0,1,Ft,Vt),rotate:new _r(j,me,-me,j,0,0),skew:new _r(1,0,xr,1,0,0)}},_r.prototype.toString=function(j){return this.join(" ")},_r.prototype.inversed=function(){var j=this.sx,me=this.shy,Je=this.shx,mt=this.sy,Ft=this.tx,Vt=this.ty,ir=1/(j*mt-me*Je),xr=mt*ir,jr=-me*ir,mn=-Je*ir,gn=j*ir;return new _r(xr,jr,mn,gn,-xr*Ft-mn*Vt,-jr*Ft-gn*Vt)},_r.prototype.applyToPoint=function(j){var me=j.x*this.sx+j.y*this.shx+this.tx,Je=j.x*this.shy+j.y*this.sy+this.ty;return new ca(me,Je)},_r.prototype.applyToRectangle=function(j){var me=this.applyToPoint(j),Je=this.applyToPoint(new ca(j.x+j.w,j.y+j.h));return new tc(me.x,me.y,Je.x-me.x,Je.y-me.y)},_r.prototype.clone=function(){var j=this.sx,me=this.shy,Je=this.shx,mt=this.sy,Ft=this.tx,Vt=this.ty;return new _r(j,me,Je,mt,Ft,Vt)},P.Matrix=_r;var In=P.matrixMult=function(j,me){return me.multiply(j)},bn=new _r(1,0,0,1,0,0);P.unitMatrix=P.identityMatrix=bn;var wn=function(j,me){if(!ar[j]){var Je=(me instanceof qf?"Sh":"P")+(Object.keys(St).length+1).toString(10);me.id=Je,ar[j]=Je,St[Je]=me,en.publish("addPattern",me)}};P.ShadingPattern=qf,P.TilingPattern=np,P.addShadingPattern=function(j,me){return be("addShadingPattern()"),wn(j,me),this},P.beginTilingPattern=function(j){be("beginTilingPattern()"),Rn(j.boundingBox[0],j.boundingBox[1],j.boundingBox[2]-j.boundingBox[0],j.boundingBox[3]-j.boundingBox[1],j.matrix)},P.endTilingPattern=function(j,me){be("endTilingPattern()"),me.stream=Wt[Ee].join(`
`),wn(j,me),en.publish("endTilingPattern",me),Un.pop().restore()};var Ui,oi=P.__private__.newObject=function(){var j=Xt();return Wn(j,!0),j},Xt=P.__private__.newObjectDeferred=function(){return at++,tt[at]=function(){return Et},at},Wn=function(j,me){return me=typeof me=="boolean"&&me,tt[j]=Et,me&&He(j+" 0 obj"),j},qi=P.__private__.newAdditionalObject=function(){var j={objId:Xt(),content:""};return Pt.push(j),j},rl=Xt(),rs=Xt(),dr=P.__private__.decodeColorString=function(j){var me=j.split(" ");if(me.length!==2||me[1]!=="g"&&me[1]!=="G")me.length!==5||me[4]!=="k"&&me[4]!=="K"||(me=[(1-me[0])*(1-me[3]),(1-me[1])*(1-me[3]),(1-me[2])*(1-me[3]),"r"]);else{var Je=parseFloat(me[0]);me=[Je,Je,Je,"r"]}for(var mt="#",Ft=0;Ft<3;Ft++)mt+=("0"+Math.floor(255*parseFloat(me[Ft])).toString(16)).slice(-2);return mt},rn=P.__private__.encodeColorString=function(j){var me;typeof j=="string"&&(j={ch1:j});var Je=j.ch1,mt=j.ch2,Ft=j.ch3,Vt=j.ch4,ir=j.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Je=="string"&&Je.charAt(0)!=="#"){var xr=new b4(Je);if(xr.ok)Je=xr.toHex();else if(!/^\d*\.?\d*$/.test(Je))throw new Error('Invalid color "'+Je+'" passed to jsPDF.encodeColorString.')}if(typeof Je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Je)&&(Je="#"+Je[1]+Je[1]+Je[2]+Je[2]+Je[3]+Je[3]),typeof Je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Je)){var jr=parseInt(Je.substr(1),16);Je=jr>>16&255,mt=jr>>8&255,Ft=255&jr}if(mt===void 0||Vt===void 0&&Je===mt&&mt===Ft)me=typeof Je=="string"?Je+" "+ir[0]:j.precision===2?le(Je/255)+" "+ir[0]:ge(Je/255)+" "+ir[0];else if(Vt===void 0||ts(Vt)==="object"){if(Vt&&!isNaN(Vt.a)&&Vt.a===0)return["1.","1.","1.",ir[1]].join(" ");me=typeof Je=="string"?[Je,mt,Ft,ir[1]].join(" "):j.precision===2?[le(Je/255),le(mt/255),le(Ft/255),ir[1]].join(" "):[ge(Je/255),ge(mt/255),ge(Ft/255),ir[1]].join(" ")}else me=typeof Je=="string"?[Je,mt,Ft,Vt,ir[2]].join(" "):j.precision===2?[le(Je),le(mt),le(Ft),le(Vt),ir[2]].join(" "):[ge(Je),ge(mt),ge(Ft),ge(Vt),ir[2]].join(" ");return me},An=P.__private__.getFilters=function(){return m},Di=P.__private__.putStream=function(j){var me=(j=j||{}).data||"",Je=j.filters||An(),mt=j.alreadyAppliedFilters||[],Ft=j.addLength1||!1,Vt=me.length,ir=j.objectId,xr=function(ks){return ks};if(I!==null&&ir===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");I!==null&&(xr=ms.encryptor(ir,0));var jr={};Je===!0&&(Je=["FlateEncode"]);var mn=j.additionalKeyValues||[],gn=(jr=fn.API.processDataByFilters!==void 0?fn.API.processDataByFilters(me,Je):{data:me,reverseChain:[]}).reverseChain+(Array.isArray(mt)?mt.join(" "):mt.toString());if(jr.data.length!==0&&(mn.push({key:"Length",value:jr.data.length}),Ft===!0&&mn.push({key:"Length1",value:Vt})),gn.length!=0)if(gn.split("/").length-1==1)mn.push({key:"Filter",value:gn});else{mn.push({key:"Filter",value:"["+gn+"]"});for(var cn=0;cn<mn.length;cn+=1)if(mn[cn].key==="DecodeParms"){for(var Hi=[],ns=0;ns<jr.reverseChain.split("/").length-1;ns+=1)Hi.push("null");Hi.push(mn[cn].value),mn[cn].value="["+Hi.join(" ")+"]"}}He("<<");for(var Si=0;Si<mn.length;Si++)He("/"+mn[Si].key+" "+mn[Si].value);He(">>"),jr.data.length!==0&&(He("stream"),He(xr(jr.data)),He("endstream"))},xl=P.__private__.putPage=function(j){var me=j.number,Je=j.data,mt=j.objId,Ft=j.contentsObjId;Wn(mt,!0),He("<</Type /Page"),He("/Parent "+j.rootDictionaryObjId+" 0 R"),He("/Resources "+j.resourceDictionaryObjId+" 0 R"),He("/MediaBox ["+parseFloat(Qe(j.mediaBox.bottomLeftX))+" "+parseFloat(Qe(j.mediaBox.bottomLeftY))+" "+Qe(j.mediaBox.topRightX)+" "+Qe(j.mediaBox.topRightY)+"]"),j.cropBox!==null&&He("/CropBox ["+Qe(j.cropBox.bottomLeftX)+" "+Qe(j.cropBox.bottomLeftY)+" "+Qe(j.cropBox.topRightX)+" "+Qe(j.cropBox.topRightY)+"]"),j.bleedBox!==null&&He("/BleedBox ["+Qe(j.bleedBox.bottomLeftX)+" "+Qe(j.bleedBox.bottomLeftY)+" "+Qe(j.bleedBox.topRightX)+" "+Qe(j.bleedBox.topRightY)+"]"),j.trimBox!==null&&He("/TrimBox ["+Qe(j.trimBox.bottomLeftX)+" "+Qe(j.trimBox.bottomLeftY)+" "+Qe(j.trimBox.topRightX)+" "+Qe(j.trimBox.topRightY)+"]"),j.artBox!==null&&He("/ArtBox ["+Qe(j.artBox.bottomLeftX)+" "+Qe(j.artBox.bottomLeftY)+" "+Qe(j.artBox.topRightX)+" "+Qe(j.artBox.topRightY)+"]"),typeof j.userUnit=="number"&&j.userUnit!==1&&He("/UserUnit "+j.userUnit),en.publish("putPage",{objId:mt,pageContext:dt[me],pageNumber:me,page:Je}),He("/Contents "+Ft+" 0 R"),He(">>"),He("endobj");var Vt=Je.join(`
`);return de===ce&&(Vt+=`
Q`),Wn(Ft,!0),Di({data:Vt,filters:An(),objectId:Ft}),He("endobj"),mt},Ls=P.__private__.putPages=function(){var j,me,Je=[];for(j=1;j<=Ir;j++)dt[j].objId=Xt(),dt[j].contentsObjId=Xt();for(j=1;j<=Ir;j++)Je.push(xl({number:j,data:Wt[j],objId:dt[j].objId,contentsObjId:dt[j].contentsObjId,mediaBox:dt[j].mediaBox,cropBox:dt[j].cropBox,bleedBox:dt[j].bleedBox,trimBox:dt[j].trimBox,artBox:dt[j].artBox,userUnit:dt[j].userUnit,rootDictionaryObjId:rl,resourceDictionaryObjId:rs}));Wn(rl,!0),He("<</Type /Pages");var mt="/Kids [";for(me=0;me<Ir;me++)mt+=Je[me]+" 0 R ";He(mt+"]"),He("/Count "+Ir),He(">>"),He("endobj"),en.publish("postPutPages")},hn=function(j){en.publish("putFont",{font:j,out:He,newObject:oi,putStream:Di}),j.isAlreadyPutted!==!0&&(j.objectNumber=oi(),He("<<"),He("/Type /Font"),He("/BaseFont /"+ep(j.postScriptName)),He("/Subtype /Type1"),typeof j.encoding=="string"&&He("/Encoding /"+j.encoding),He("/FirstChar 32"),He("/LastChar 255"),He(">>"),He("endobj"))},nl=function(j){j.objectNumber=oi();var me=[];me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Form"}),me.push({key:"BBox",value:"["+[Qe(j.x),Qe(j.y),Qe(j.x+j.width),Qe(j.y+j.height)].join(" ")+"]"}),me.push({key:"Matrix",value:"["+j.matrix.toString()+"]"});var Je=j.pages[1].join(`
`);Di({data:Je,additionalKeyValues:me,objectId:j.objectNumber}),He("endobj")},il=function(j,me){me||(me=21);var Je=oi(),mt=(function(ir,xr){var jr,mn=[],gn=1/(xr-1);for(jr=0;jr<1;jr+=gn)mn.push(jr);if(mn.push(1),ir[0].offset!=0){var cn={offset:0,color:ir[0].color};ir.unshift(cn)}if(ir[ir.length-1].offset!=1){var Hi={offset:1,color:ir[ir.length-1].color};ir.push(Hi)}for(var ns="",Si=0,ks=0;ks<mn.length;ks++){for(jr=mn[ks];jr>ir[Si+1].offset;)Si++;var Li=ir[Si].offset,_s=(jr-Li)/(ir[Si+1].offset-Li),Vo=ir[Si].color,ha=ir[Si+1].color;ns+=Ye(Math.round((1-_s)*Vo[0]+_s*ha[0]).toString(16))+Ye(Math.round((1-_s)*Vo[1]+_s*ha[1]).toString(16))+Ye(Math.round((1-_s)*Vo[2]+_s*ha[2]).toString(16))}return ns.trim()})(j.colors,me),Ft=[];Ft.push({key:"FunctionType",value:"0"}),Ft.push({key:"Domain",value:"[0.0 1.0]"}),Ft.push({key:"Size",value:"["+me+"]"}),Ft.push({key:"BitsPerSample",value:"8"}),Ft.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ft.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Di({data:mt,additionalKeyValues:Ft,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Je}),He("endobj"),j.objectNumber=oi(),He("<< /ShadingType "+j.type),He("/ColorSpace /DeviceRGB");var Vt="/Coords ["+Qe(parseFloat(j.coords[0]))+" "+Qe(parseFloat(j.coords[1]))+" ";j.type===2?Vt+=Qe(parseFloat(j.coords[2]))+" "+Qe(parseFloat(j.coords[3])):Vt+=Qe(parseFloat(j.coords[2]))+" "+Qe(parseFloat(j.coords[3]))+" "+Qe(parseFloat(j.coords[4]))+" "+Qe(parseFloat(j.coords[5])),He(Vt+="]"),j.matrix&&He("/Matrix ["+j.matrix.toString()+"]"),He("/Function "+Je+" 0 R"),He("/Extend [true true]"),He(">>"),He("endobj")},Zl=function(j,me){var Je=Xt(),mt=oi();me.push({resourcesOid:Je,objectOid:mt}),j.objectNumber=mt;var Ft=[];Ft.push({key:"Type",value:"/Pattern"}),Ft.push({key:"PatternType",value:"1"}),Ft.push({key:"PaintType",value:"1"}),Ft.push({key:"TilingType",value:"1"}),Ft.push({key:"BBox",value:"["+j.boundingBox.map(Qe).join(" ")+"]"}),Ft.push({key:"XStep",value:Qe(j.xStep)}),Ft.push({key:"YStep",value:Qe(j.yStep)}),Ft.push({key:"Resources",value:Je+" 0 R"}),j.matrix&&Ft.push({key:"Matrix",value:"["+j.matrix.toString()+"]"}),Di({data:j.stream,additionalKeyValues:Ft,objectId:j.objectNumber}),He("endobj")},xc=function(j){for(var me in j.objectNumber=oi(),He("<<"),j)switch(me){case"opacity":He("/ca "+le(j[me]));break;case"stroke-opacity":He("/CA "+le(j[me]))}He(">>"),He("endobj")},fi=function(j){Wn(j.resourcesOid,!0),He("<<"),He("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var me in He("/Font <<"),st)st.hasOwnProperty(me)&&(U===!1||U===!0&&Q.hasOwnProperty(me))&&He("/"+me+" "+st[me].objectNumber+" 0 R");He(">>")})(),(function(){if(Object.keys(St).length>0){for(var me in He("/Shading <<"),St)St.hasOwnProperty(me)&&St[me]instanceof qf&&St[me].objectNumber>=0&&He("/"+me+" "+St[me].objectNumber+" 0 R");en.publish("putShadingPatternDict"),He(">>")}})(),(function(me){if(Object.keys(St).length>0){for(var Je in He("/Pattern <<"),St)St.hasOwnProperty(Je)&&St[Je]instanceof P.TilingPattern&&St[Je].objectNumber>=0&&St[Je].objectNumber<me&&He("/"+Je+" "+St[Je].objectNumber+" 0 R");en.publish("putTilingPatternDict"),He(">>")}})(j.objectOid),(function(){if(Object.keys(Yt).length>0){var me;for(me in He("/ExtGState <<"),Yt)Yt.hasOwnProperty(me)&&Yt[me].objectNumber>=0&&He("/"+me+" "+Yt[me].objectNumber+" 0 R");en.publish("putGStateDict"),He(">>")}})(),(function(){for(var me in He("/XObject <<"),pr)pr.hasOwnProperty(me)&&pr[me].objectNumber>=0&&He("/"+me+" "+pr[me].objectNumber+" 0 R");en.publish("putXobjectDict"),He(">>")})(),He(">>"),He("endobj")},Xl=function(j){xt[j.fontName]=xt[j.fontName]||{},xt[j.fontName][j.fontStyle]=j.id},bl=function(j,me,Je,mt,Ft){var Vt={id:"F"+(Object.keys(st).length+1).toString(10),postScriptName:j,fontName:me,fontStyle:Je,encoding:mt,isStandardFont:Ft||!1,metadata:{}};return en.publish("addFont",{font:Vt,instance:this}),st[Vt.id]=Vt,Xl(Vt),Vt.id},Bi=P.__private__.pdfEscape=P.pdfEscape=function(j,me){return(function(Je,mt){var Ft,Vt,ir,xr,jr,mn,gn,cn,Hi;if(ir=(mt=mt||{}).sourceEncoding||"Unicode",jr=mt.outputEncoding,(mt.autoencode||jr)&&st[ye].metadata&&st[ye].metadata[ir]&&st[ye].metadata[ir].encoding&&(xr=st[ye].metadata[ir].encoding,!jr&&st[ye].encoding&&(jr=st[ye].encoding),!jr&&xr.codePages&&(jr=xr.codePages[0]),typeof jr=="string"&&(jr=xr[jr]),jr)){for(gn=!1,mn=[],Ft=0,Vt=Je.length;Ft<Vt;Ft++)(cn=jr[Je.charCodeAt(Ft)])?mn.push(String.fromCharCode(cn)):mn.push(Je[Ft]),mn[Ft].charCodeAt(0)>>8&&(gn=!0);Je=mn.join("")}for(Ft=Je.length;gn===void 0&&Ft!==0;)Je.charCodeAt(Ft-1)>>8&&(gn=!0),Ft--;if(!gn)return Je;for(mn=mt.noBOM?[]:[254,255],Ft=0,Vt=Je.length;Ft<Vt;Ft++){if((Hi=(cn=Je.charCodeAt(Ft))>>8)>>8)throw new Error("Character at position "+Ft+" of string '"+Je+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");mn.push(Hi),mn.push(cn-(Hi<<8))}return String.fromCharCode.apply(void 0,mn)})(j,me).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hn=P.__private__.beginPage=function(j){Wt[++Ir]=[],dt[Ir]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(j[0]),topRightY:Number(j[1])}},ol(Ir),Br(Wt[Ee])},Jc=function(j,me){var Je,mt,Ft;switch(i=me||i,typeof j=="string"&&(Je=W(j.toLowerCase()),Array.isArray(Je)&&(mt=Je[0],Ft=Je[1])),Array.isArray(j)&&(mt=j[0]*Ke,Ft=j[1]*Ke),isNaN(mt)&&(mt=h[0],Ft=h[1]),(mt>14400||Ft>14400)&&(ps.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),mt=Math.min(14400,mt),Ft=Math.min(14400,Ft)),h=[mt,Ft],i.substr(0,1)){case"l":Ft>mt&&(h=[Ft,mt]);break;case"p":mt>Ft&&(h=[Ft,mt])}Hn(h),Kr(Oo),He(Ca),Gs!==0&&He(Gs+" J"),ll!==0&&He(ll+" j"),en.publish("addPage",{pageNumber:Ir})},sl=function(j){j>0&&j<=Ir&&(Wt.splice(j,1),dt.splice(j,1),Ir--,Ee>Ir&&(Ee=Ir),this.setPage(Ee))},ol=function(j){j>0&&j<=Ir&&(Ee=j)},Ms=P.__private__.getNumberOfPages=P.getNumberOfPages=function(){return Wt.length-1},Uo=function(j,me,Je){var mt,Ft=void 0;return Je=Je||{},j=j!==void 0?j:st[ye].fontName,me=me!==void 0?me:st[ye].fontStyle,mt=j.toLowerCase(),xt[mt]!==void 0&&xt[mt][me]!==void 0?Ft=xt[mt][me]:xt[j]!==void 0&&xt[j][me]!==void 0?Ft=xt[j][me]:Je.disableWarning===!1&&ps.warn("Unable to look up font label for font '"+j+"', '"+me+"'. Refer to getFontList() for available fonts."),Ft||Je.noFallback||(Ft=xt.times[me])==null&&(Ft=xt.times.normal),Ft},hs=P.__private__.putInfo=function(){var j=oi(),me=function(mt){return mt};for(var Je in I!==null&&(me=ms.encryptor(j,0)),He("<<"),He("/Producer ("+Bi(me("jsPDF "+fn.version))+")"),fe)fe.hasOwnProperty(Je)&&fe[Je]&&He("/"+Je.substr(0,1).toUpperCase()+Je.substr(1)+" ("+Bi(me(fe[Je]))+")");He("/CreationDate ("+Bi(me(pt))+")"),He(">>"),He("endobj")},xa=P.__private__.putCatalog=function(j){var me=(j=j||{}).rootDictionaryObjId||rl;switch(oi(),He("<<"),He("/Type /Catalog"),He("/Pages "+me+" 0 R"),$r||($r="fullwidth"),$r){case"fullwidth":He("/OpenAction [3 0 R /FitH null]");break;case"fullheight":He("/OpenAction [3 0 R /FitV null]");break;case"fullpage":He("/OpenAction [3 0 R /Fit]");break;case"original":He("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Je=""+$r;Je.substr(Je.length-1)==="%"&&($r=parseInt($r)/100),typeof $r=="number"&&He("/OpenAction [3 0 R /XYZ null null "+le($r)+"]")}switch(un||(un="continuous"),un){case"continuous":He("/PageLayout /OneColumn");break;case"single":He("/PageLayout /SinglePage");break;case"two":case"twoleft":He("/PageLayout /TwoColumnLeft");break;case"tworight":He("/PageLayout /TwoColumnRight")}Dr&&He("/PageMode /"+Dr),en.publish("putCatalog"),He(">>"),He("endobj")},CA=P.__private__.putTrailer=function(){He("trailer"),He("<<"),He("/Size "+(at+1)),He("/Root "+at+" 0 R"),He("/Info "+(at-1)+" 0 R"),I!==null&&He("/Encrypt "+ms.oid+" 0 R"),He("/ID [ <"+ut+"> <"+ut+"> ]"),He(">>")},Ln=P.__private__.putHeader=function(){He("%PDF-"+$),He("%")},bc=P.__private__.putXRef=function(){var j="0000000000";He("xref"),He("0 "+(at+1)),He("0000000000 65535 f ");for(var me=1;me<=at;me++)typeof tt[me]=="function"?He((j+tt[me]()).slice(-10)+" 00000 n "):tt[me]!==void 0?He((j+tt[me]).slice(-10)+" 00000 n "):He("0000000000 00000 n ")},Do=P.__private__.buildDocument=function(){var j;at=0,Et=0,wt=[],tt=[],Pt=[],rl=Xt(),rs=Xt(),Br(wt),en.publish("buildDocument"),Ln(),Ls(),(function(){en.publish("putAdditionalObjects");for(var Je=0;Je<Pt.length;Je++){var mt=Pt[Je];Wn(mt.objId,!0),He(mt.content),He("endobj")}en.publish("postPutAdditionalObjects")})(),j=[],(function(){for(var Je in st)st.hasOwnProperty(Je)&&(U===!1||U===!0&&Q.hasOwnProperty(Je))&&hn(st[Je])})(),(function(){var Je;for(Je in Yt)Yt.hasOwnProperty(Je)&&xc(Yt[Je])})(),(function(){for(var Je in pr)pr.hasOwnProperty(Je)&&nl(pr[Je])})(),(function(Je){var mt;for(mt in St)St.hasOwnProperty(mt)&&(St[mt]instanceof qf?il(St[mt]):St[mt]instanceof np&&Zl(St[mt],Je))})(j),en.publish("putResources"),j.forEach(fi),fi({resourcesOid:rs,objectOid:Number.MAX_SAFE_INTEGER}),en.publish("postPutResources"),I!==null&&(ms.oid=oi(),He("<<"),He("/Filter /Standard"),He("/V "+ms.v),He("/R "+ms.r),He("/U <"+ms.toHexString(ms.U)+">"),He("/O <"+ms.toHexString(ms.O)+">"),He("/P "+ms.P),He(">>"),He("endobj")),hs(),xa();var me=Et;return bc(),CA(),He("startxref"),He(""+me),He("%%EOF"),Br(Wt[Ee]),wt.join(`
`)},Ro=P.__private__.getBlob=function(j){return new Blob([kr(j)],{type:"application/pdf"})},Bc=P.output=P.__private__.output=(Ui=function(j,me){switch(typeof(me=me||{})=="string"?me={filename:me}:me.filename=me.filename||"generated.pdf",j){case void 0:return Do();case"save":P.save(me.filename);break;case"arraybuffer":return kr(Do());case"blob":return Ro(Do());case"bloburi":case"bloburl":if(Mn.URL!==void 0&&typeof Mn.URL.createObjectURL=="function")return Mn.URL&&Mn.URL.createObjectURL(Ro(Do()))||void 0;ps.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Je="",mt=Do();try{Je=$C(mt)}catch{Je=$C(unescape(encodeURIComponent(mt)))}return"data:application/pdf;filename="+me.filename+";base64,"+Je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mn)==="[object Window]"){var Ft="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';me.pdfObjectUrl&&(Ft=me.pdfObjectUrl,Vt="");var ir='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ft+'"'+Vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(me)+");<\/script></body></html>",xr=Mn.open();return xr!==null&&xr.document.write(ir),xr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mn)==="[object Window]"){var jr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(me.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+me.filename+'" width="500px" height="400px" /></body></html>',mn=Mn.open();if(mn!==null){mn.document.write(jr);var gn=this;mn.document.documentElement.querySelector("#pdfViewer").onload=function(){mn.document.title=me.filename,mn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(gn.output("bloburl"))}}return mn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",me)+'"></iframe></body></html>',Hi=Mn.open();if(Hi!==null&&(Hi.document.write(cn),Hi.document.title=me.filename),Hi||typeof safari>"u")return Hi;break;case"datauri":case"dataurl":return Mn.document.location.href=this.output("datauristring",me);default:return null}},Ui.foo=function(){try{return Ui.apply(this,arguments)}catch(Je){var j=Je.stack||"";~j.indexOf(" at ")&&(j=j.split(" at ")[1]);var me="Error in function "+j.split(`
`)[0].split("<")[0]+": "+Je.message;if(!Mn.console)throw new Error(me);Mn.console.error(me,Je),Mn.alert&&alert(me)}},Ui.foo.bar=Ui,Ui.foo),oa=function(j){return Array.isArray(Rr)===!0&&Rr.indexOf(j)>-1};switch(l){case"pt":Ke=1;break;case"mm":Ke=72/25.4;break;case"cm":Ke=72/2.54;break;case"in":Ke=72;break;case"px":Ke=oa("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ke=12;break;case"ex":Ke=6;break;default:if(typeof l!="number")throw new Error("Invalid unit: "+l);Ke=l}var ms=null;Ue(),Ne();var No=P.__private__.getPageInfo=P.getPageInfo=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[j].objId,pageNumber:j,pageContext:dt[j]}},eA=P.__private__.getPageInfoByObjId=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var me in dt)if(dt[me].objId===j)break;return No(me)},tA=P.__private__.getCurrentPageInfo=P.getCurrentPageInfo=function(){return{objId:dt[Ee].objId,pageNumber:Ee,pageContext:dt[Ee]}};P.addPage=function(){return Jc.apply(this,arguments),this},P.setPage=function(){return ol.apply(this,arguments),Br.call(this,Wt[Ee]),this},P.insertPage=function(j){return this.addPage(),this.movePage(Ee,j),this},P.movePage=function(j,me){var Je,mt;if(j>me){Je=Wt[j],mt=dt[j];for(var Ft=j;Ft>me;Ft--)Wt[Ft]=Wt[Ft-1],dt[Ft]=dt[Ft-1];Wt[me]=Je,dt[me]=mt,this.setPage(me)}else if(j<me){Je=Wt[j],mt=dt[j];for(var Vt=j;Vt<me;Vt++)Wt[Vt]=Wt[Vt+1],dt[Vt]=dt[Vt+1];Wt[me]=Je,dt[me]=mt,this.setPage(me)}return this},P.deletePage=function(){return sl.apply(this,arguments),this},P.__private__.text=P.text=function(j,me,Je,mt,Ft){var Vt,ir,xr,jr,mn,gn,cn,Hi,ns,Si=(mt=mt||{}).scope||this;if(typeof j=="number"&&typeof me=="number"&&(typeof Je=="string"||Array.isArray(Je))){var ks=Je;Je=me,me=j,j=ks}if(arguments[3]instanceof _r==0?(xr=arguments[4],jr=arguments[5],ts(cn=arguments[3])==="object"&&cn!==null||(typeof xr=="string"&&(jr=xr,xr=null),typeof cn=="string"&&(jr=cn,cn=null),typeof cn=="number"&&(xr=cn,cn=null),mt={flags:cn,angle:xr,align:jr})):(be("The transform parameter of text() with a Matrix value"),ns=Ft),isNaN(me)||isNaN(Je)||j==null)throw new Error("Invalid arguments passed to jsPDF.text");if(j.length===0)return Si;var Li,_s="",Vo=typeof mt.lineHeightFactor=="number"?mt.lineHeightFactor:Qo,ha=Si.internal.scaleFactor;function fa(ii){return ii=ii.split("	").join(Array(mt.TabLen||9).join(" ")),Bi(ii,cn)}function Fa(ii){for(var vi,Xi=ii.concat(),ws=[],Tn=Xi.length;Tn--;)typeof(vi=Xi.shift())=="string"?ws.push(vi):Array.isArray(ii)&&(vi.length===1||vi[1]===void 0&&vi[2]===void 0)?ws.push(vi[0]):ws.push([vi[0],vi[1],vi[2]]);return ws}function cl(ii,vi){var Xi;if(typeof ii=="string")Xi=vi(ii)[0];else if(Array.isArray(ii)){for(var ws,Tn,Fc=ii.concat(),sc=[],La=Fc.length;La--;)typeof(ws=Fc.shift())=="string"?sc.push(vi(ws)[0]):Array.isArray(ws)&&typeof ws[0]=="string"&&(Tn=vi(ws[0],ws[1],ws[2]),sc.push([Tn[0],Tn[1],Tn[2]]));Xi=sc}return Xi}var Ei=!1,Sc=!0;if(typeof j=="string")Ei=!0;else if(Array.isArray(j)){var da=j.concat();ir=[];for(var Ia,Zi=da.length;Zi--;)(typeof(Ia=da.shift())!="string"||Array.isArray(Ia)&&typeof Ia[0]!="string")&&(Sc=!1);Ei=Sc}if(Ei===!1)throw new Error('Type of text must be string or Array. "'+j+'" is not recognized.');typeof j=="string"&&(j=j.match(/[\r?\n]/)?j.split(/\r\n|\r|\n/g):[j]);var rA=or/Si.internal.scaleFactor,Sl=rA*(Vo-1);switch(mt.baseline){case"bottom":Je-=Sl;break;case"top":Je+=rA-Sl;break;case"hanging":Je+=rA-2*Sl;break;case"middle":Je+=rA/2-Sl}if((gn=mt.maxWidth||0)>0&&(typeof j=="string"?j=Si.splitTextToSize(j,gn):Object.prototype.toString.call(j)==="[object Array]"&&(j=j.reduce(function(ii,vi){return ii.concat(Si.splitTextToSize(vi,gn))},[]))),Vt={text:j,x:me,y:Je,options:mt,mutex:{pdfEscape:Bi,activeFontKey:ye,fonts:st,activeFontSize:or}},en.publish("preProcessText",Vt),j=Vt.text,xr=(mt=Vt.options).angle,ns instanceof _r==0&&xr&&typeof xr=="number"){xr*=Math.PI/180,mt.rotationDirection===0&&(xr=-xr),de===ce&&(xr=-xr);var tu=Math.cos(xr),El=Math.sin(xr);ns=new _r(tu,El,-El,tu,0,0)}else xr&&xr instanceof _r&&(ns=xr);de!==ce||ns||(ns=bn),(mn=mt.charSpace||Wi)!==void 0&&(_s+=Qe(Pe(mn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hi=mt.horizontalScale)!==void 0&&(_s+=Qe(100*Hi)+` Tz
`),mt.lang;var Ks=-1,Ta=mt.renderingMode!==void 0?mt.renderingMode:mt.stroke,Al=Si.internal.getCurrentPageInfo().pageContext;switch(Ta){case 0:case!1:case"fill":Ks=0;break;case 1:case!0:case"stroke":Ks=1;break;case 2:case"fillThenStroke":Ks=2;break;case 3:case"invisible":Ks=3;break;case 4:case"fillAndAddForClipping":Ks=4;break;case 5:case"strokeAndAddPathForClipping":Ks=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ks=6;break;case 7:case"addToPathForClipping":Ks=7}var FA=Al.usedRenderingMode!==void 0?Al.usedRenderingMode:-1;Ks!==-1?_s+=Ks+` Tr
`:FA!==-1&&(_s+=`0 Tr
`),Ks!==-1&&(Al.usedRenderingMode=Ks),jr=mt.align||"left";var xo,Fl=or*Vo,nA=Si.internal.pageSize.getWidth(),iA=st[ye];mn=mt.charSpace||Wi,gn=mt.maxWidth||0,cn=Object.assign({autoencode:!0,noBOM:!0},mt.flags);var Il=[],qs=function(ii){return Si.getStringUnitWidth(ii,{font:iA,charSpace:mn,fontSize:or,doKerning:!1})*or/ha};if(Object.prototype.toString.call(j)==="[object Array]"){var Go;ir=Fa(j),jr!=="left"&&(xo=ir.map(qs));var bo,pa=0;if(jr==="right"){me-=xo[0],j=[],Zi=ir.length;for(var ul=0;ul<Zi;ul++)ul===0?(bo=ys(me),Go=$i(Je)):(bo=Pe(pa-xo[ul]),Go=-Fl),j.push([ir[ul],bo,Go]),pa=xo[ul]}else if(jr==="center"){me-=xo[0]/2,j=[],Zi=ir.length;for(var Pa=0;Pa<Zi;Pa++)Pa===0?(bo=ys(me),Go=$i(Je)):(bo=Pe((pa-xo[Pa])/2),Go=-Fl),j.push([ir[Pa],bo,Go]),pa=xo[Pa]}else if(jr==="left"){j=[],Zi=ir.length;for(var rc=0;rc<Zi;rc++)j.push(ir[rc])}else if(jr==="justify"&&iA.encoding==="Identity-H"){j=[],Zi=ir.length,gn=gn!==0?gn:nA;for(var Tl=0,is=0;is<Zi;is++)if(Go=is===0?$i(Je):-Fl,bo=is===0?ys(me):Tl,is<Zi-1){var hl=Pe((gn-xo[is])/(ir[is].split(" ").length-1)),fl=ir[is].split(" ");j.push([fl[0]+" ",bo,Go]),Tl=0;for(var ma=1;ma<fl.length;ma++){var Ec=(qs(fl[ma-1]+" "+fl[ma])-qs(fl[ma]))*ha+hl;ma==fl.length-1?j.push([fl[ma],Ec,0]):j.push([fl[ma]+" ",Ec,0]),Tl-=Ec}}else j.push([ir[is],bo,Go]);j.push(["",Tl,0])}else{if(jr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(j=[],Zi=ir.length,gn=gn!==0?gn:nA,is=0;is<Zi;is++){Go=is===0?$i(Je):-Fl,bo=is===0?ys(me):0;var Pl=ir[is].split(" ").length-1,Ao=Pl>0?(gn-xo[is])/Pl:0;is<Zi-1?Il.push(Qe(Pe(Ao))):Il.push(0),j.push([ir[is],bo,Go])}}}(typeof mt.R2L=="boolean"?mt.R2L:Qr)===!0&&(j=cl(j,function(ii,vi,Xi){return[ii.split("").reverse().join(""),vi,Xi]})),Vt={text:j,x:me,y:Je,options:mt,mutex:{pdfEscape:Bi,activeFontKey:ye,fonts:st,activeFontSize:or}},en.publish("postProcessText",Vt),j=Vt.text,Li=Vt.mutex.isHex||!1;var nc=st[ye].encoding;nc!=="WinAnsiEncoding"&&nc!=="StandardEncoding"||(j=cl(j,function(ii,vi,Xi){return[fa(ii),vi,Xi]})),ir=Fa(j),j=[];for(var dl,Ll,Ml,kl=Array.isArray(ir[0])?1:0,Ko="",ic=function(ii,vi,Xi){var ws="";return Xi instanceof _r?(Xi=typeof mt.angle=="number"?In(Xi,new _r(1,0,0,1,ii,vi)):In(new _r(1,0,0,1,ii,vi),Xi),de===ce&&(Xi=In(new _r(1,0,0,-1,0,0),Xi)),ws=Xi.join(" ")+` Tm
`):ws=Qe(ii)+" "+Qe(vi)+` Td
`,ws},ss=0;ss<ir.length;ss++){switch(Ko="",kl){case 1:Ml=(Li?"<":"(")+ir[ss][0]+(Li?">":")"),dl=parseFloat(ir[ss][1]),Ll=parseFloat(ir[ss][2]);break;case 0:Ml=(Li?"<":"(")+ir[ss]+(Li?">":")"),dl=ys(me),Ll=$i(Je)}Il!==void 0&&Il[ss]!==void 0&&(Ko=Il[ss]+` Tw
`),ss===0?j.push(Ko+ic(dl,Ll,ns)+Ml):kl===0?j.push(Ko+Ml):kl===1&&j.push(Ko+ic(dl,Ll,ns)+Ml)}j=kl===0?j.join(` Tj
T* `):j.join(` Tj
`),j+=` Tj
`;var Bo=`BT
/`;return Bo+=ye+" "+or+` Tf
`,Bo+=Qe(or*Vo)+` TL
`,Bo+=ei+`
`,Bo+=_s,Bo+=j,He(Bo+="ET"),Q[ye]=!0,Si};var Yl=P.__private__.clip=P.clip=function(j){return He(j==="evenodd"?"W*":"W"),this};P.clipEvenOdd=function(){return Yl("evenodd")},P.__private__.discardPath=P.discardPath=function(){return He("n"),this};var ba=P.__private__.isValidStyle=function(j){var me=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(j)!==-1&&(me=!0),me};P.__private__.setDefaultPathOperation=P.setDefaultPathOperation=function(j){return ba(j)&&(S=j),this};var SA=P.__private__.getStyle=P.getStyle=function(j){var me=S;switch(j){case"D":case"S":me="S";break;case"F":me="f";break;case"FD":case"DF":me="B";break;case"f":case"f*":case"B":case"B*":me=j}return me},Gn=P.close=function(){return He("h"),this};P.stroke=function(){return He("S"),this},P.fill=function(j){return Bl("f",j),this},P.fillEvenOdd=function(j){return Bl("f*",j),this},P.fillStroke=function(j){return Bl("B",j),this},P.fillStrokeEvenOdd=function(j){return Bl("B*",j),this};var Bl=function(j,me){ts(me)==="object"?EA(me,j):He(j)},Jl=function(j){j===null||de===ce&&j===void 0||(j=SA(j),He(j))};function Cl(j,me,Je,mt,Ft){var Vt=new np(me||this.boundingBox,Je||this.xStep,mt||this.yStep,this.gState,Ft||this.matrix);Vt.stream=this.stream;var ir=j+"$$"+this.cloneIndex+++"$$";return wn(ir,Vt),Vt}var EA=function(j,me){var Je=ar[j.key],mt=St[Je];if(mt instanceof qf)He("q"),He(Cc(me)),mt.gState&&P.setGState(mt.gState),He(j.matrix.toString()+" cm"),He("/"+Je+" sh"),He("Q");else if(mt instanceof np){var Ft=new _r(1,0,0,-1,0,so());j.matrix&&(Ft=Ft.multiply(j.matrix||bn),Je=Cl.call(mt,j.key,j.boundingBox,j.xStep,j.yStep,Ft).id),He("q"),He("/Pattern cs"),He("/"+Je+" scn"),mt.gState&&P.setGState(mt.gState),He(me),He("Q")}},Cc=function(j){switch(j){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},aa=P.moveTo=function(j,me){return He(Qe(Pe(j))+" "+Qe(Fe(me))+" m"),this},al=P.lineTo=function(j,me){return He(Qe(Pe(j))+" "+Qe(Fe(me))+" l"),this},on=P.curveTo=function(j,me,Je,mt,Ft,Vt){return He([Qe(Pe(j)),Qe(Fe(me)),Qe(Pe(Je)),Qe(Fe(mt)),Qe(Pe(Ft)),Qe(Fe(Vt)),"c"].join(" ")),this};P.__private__.line=P.line=function(j,me,Je,mt,Ft){if(isNaN(j)||isNaN(me)||isNaN(Je)||isNaN(mt)||!ba(Ft))throw new Error("Invalid arguments passed to jsPDF.line");return de===ne?this.lines([[Je-j,mt-me]],j,me,[1,1],Ft||"S"):this.lines([[Je-j,mt-me]],j,me,[1,1]).stroke()},P.__private__.lines=P.lines=function(j,me,Je,mt,Ft,Vt){var ir,xr,jr,mn,gn,cn,Hi,ns,Si,ks,Li,_s;if(typeof j=="number"&&(_s=Je,Je=me,me=j,j=_s),mt=mt||[1,1],Vt=Vt||!1,isNaN(me)||isNaN(Je)||!Array.isArray(j)||!Array.isArray(mt)||!ba(Ft)||typeof Vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(aa(me,Je),ir=mt[0],xr=mt[1],mn=j.length,ks=me,Li=Je,jr=0;jr<mn;jr++)(gn=j[jr]).length===2?(ks=gn[0]*ir+ks,Li=gn[1]*xr+Li,al(ks,Li)):(cn=gn[0]*ir+ks,Hi=gn[1]*xr+Li,ns=gn[2]*ir+ks,Si=gn[3]*xr+Li,ks=gn[4]*ir+ks,Li=gn[5]*xr+Li,on(cn,Hi,ns,Si,ks,Li));return Vt&&Gn(),Jl(Ft),this},P.path=function(j){for(var me=0;me<j.length;me++){var Je=j[me],mt=Je.c;switch(Je.op){case"m":aa(mt[0],mt[1]);break;case"l":al(mt[0],mt[1]);break;case"c":on.apply(this,mt);break;case"h":Gn()}}return this},P.__private__.rect=P.rect=function(j,me,Je,mt,Ft){if(isNaN(j)||isNaN(me)||isNaN(Je)||isNaN(mt)||!ba(Ft))throw new Error("Invalid arguments passed to jsPDF.rect");return de===ne&&(mt=-mt),He([Qe(Pe(j)),Qe(Fe(me)),Qe(Pe(Je)),Qe(Pe(mt)),"re"].join(" ")),Jl(Ft),this},P.__private__.triangle=P.triangle=function(j,me,Je,mt,Ft,Vt,ir){if(isNaN(j)||isNaN(me)||isNaN(Je)||isNaN(mt)||isNaN(Ft)||isNaN(Vt)||!ba(ir))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Je-j,mt-me],[Ft-Je,Vt-mt],[j-Ft,me-Vt]],j,me,[1,1],ir,!0),this},P.__private__.roundedRect=P.roundedRect=function(j,me,Je,mt,Ft,Vt,ir){if(isNaN(j)||isNaN(me)||isNaN(Je)||isNaN(mt)||isNaN(Ft)||isNaN(Vt)||!ba(ir))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xr=4/3*(Math.SQRT2-1);return Ft=Math.min(Ft,.5*Je),Vt=Math.min(Vt,.5*mt),this.lines([[Je-2*Ft,0],[Ft*xr,0,Ft,Vt-Vt*xr,Ft,Vt],[0,mt-2*Vt],[0,Vt*xr,-Ft*xr,Vt,-Ft,Vt],[2*Ft-Je,0],[-Ft*xr,0,-Ft,-Vt*xr,-Ft,-Vt],[0,2*Vt-mt],[0,-Vt*xr,Ft*xr,-Vt,Ft,-Vt]],j+Ft,me,[1,1],ir,!0),this},P.__private__.ellipse=P.ellipse=function(j,me,Je,mt,Ft){if(isNaN(j)||isNaN(me)||isNaN(Je)||isNaN(mt)||!ba(Ft))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Vt=4/3*(Math.SQRT2-1)*Je,ir=4/3*(Math.SQRT2-1)*mt;return aa(j+Je,me),on(j+Je,me-ir,j+Vt,me-mt,j,me-mt),on(j-Vt,me-mt,j-Je,me-ir,j-Je,me),on(j-Je,me+ir,j-Vt,me+mt,j,me+mt),on(j+Vt,me+mt,j+Je,me+ir,j+Je,me),Jl(Ft),this},P.__private__.circle=P.circle=function(j,me,Je,mt){if(isNaN(j)||isNaN(me)||isNaN(Je)||!ba(mt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(j,me,Je,Je,mt)},P.setFont=function(j,me,Je){return Je&&(me=Ze(me,Je)),ye=Uo(j,me,{disableWarning:!1}),this};var Ba=P.__private__.getFont=P.getFont=function(){return st[Uo.apply(P,arguments)]};P.__private__.getFontList=P.getFontList=function(){var j,me,Je={};for(j in xt)if(xt.hasOwnProperty(j))for(me in Je[j]=[],xt[j])xt[j].hasOwnProperty(me)&&Je[j].push(me);return Je},P.addFont=function(j,me,Je,mt,Ft){var Vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Vt.indexOf(arguments[3])!==-1?Ft=arguments[3]:arguments[3]&&Vt.indexOf(arguments[3])==-1&&(Je=Ze(Je,mt)),bl.call(this,j,me,Je,Ft=Ft||"Identity-H")};var Qo,Oo=e.lineWidth||.200025,gs=P.__private__.getLineWidth=P.getLineWidth=function(){return Oo},Kr=P.__private__.setLineWidth=P.setLineWidth=function(j){return Oo=j,He(Qe(Pe(j))+" w"),this};P.__private__.setLineDash=fn.API.setLineDash=fn.API.setLineDashPattern=function(j,me){if(j=j||[],me=me||0,isNaN(me)||!Array.isArray(j))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return j=j.map(function(Je){return Qe(Pe(Je))}).join(" "),me=Qe(Pe(me)),He("["+j+"] "+me+" d"),this};var Yn=P.__private__.getLineHeight=P.getLineHeight=function(){return or*Qo};P.__private__.getLineHeight=P.getLineHeight=function(){return or*Qo};var ln=P.__private__.setLineHeightFactor=P.setLineHeightFactor=function(j){return typeof(j=j||1.15)=="number"&&(Qo=j),this},ni=P.__private__.getLineHeightFactor=P.getLineHeightFactor=function(){return Qo};ln(e.lineHeight);var ys=P.__private__.getHorizontalCoordinate=function(j){return Pe(j)},$i=P.__private__.getVerticalCoordinate=function(j){return de===ce?j:dt[Ee].mediaBox.topRightY-dt[Ee].mediaBox.bottomLeftY-Pe(j)},co=P.__private__.getHorizontalCoordinateString=P.getHorizontalCoordinateString=function(j){return Qe(ys(j))},vs=P.__private__.getVerticalCoordinateString=P.getVerticalCoordinateString=function(j){return Qe($i(j))},Ca=e.strokeColor||"0 G";P.__private__.getStrokeColor=P.getDrawColor=function(){return dr(Ca)},P.__private__.setStrokeColor=P.setDrawColor=function(j,me,Je,mt){return Ca=rn({ch1:j,ch2:me,ch3:Je,ch4:mt,pdfColorType:"draw",precision:2}),He(Ca),this};var Sa=e.fillColor||"0 g";P.__private__.getFillColor=P.getFillColor=function(){return dr(Sa)},P.__private__.setFillColor=P.setFillColor=function(j,me,Je,mt){return Sa=rn({ch1:j,ch2:me,ch3:Je,ch4:mt,pdfColorType:"fill",precision:2}),He(Sa),this};var ei=e.textColor||"0 g",la=P.__private__.getTextColor=P.getTextColor=function(){return dr(ei)};P.__private__.setTextColor=P.setTextColor=function(j,me,Je,mt){return ei=rn({ch1:j,ch2:me,ch3:Je,ch4:mt,pdfColorType:"text",precision:3}),this};var Wi=e.charSpace,ec=P.__private__.getCharSpace=P.getCharSpace=function(){return parseFloat(Wi||0)};P.__private__.setCharSpace=P.setCharSpace=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Wi=j,this};var Gs=0;P.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},P.__private__.setLineCap=P.setLineCap=function(j){var me=P.CapJoinStyles[j];if(me===void 0)throw new Error("Line cap style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gs=me,He(me+" J"),this};var ll=0;P.__private__.setLineJoin=P.setLineJoin=function(j){var me=P.CapJoinStyles[j];if(me===void 0)throw new Error("Line join style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ll=me,He(me+" j"),this},P.__private__.setLineMiterLimit=P.__private__.setMiterLimit=P.setLineMiterLimit=P.setMiterLimit=function(j){if(j=j||0,isNaN(j))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return He(Qe(Pe(j))+" M"),this},P.GState=my,P.setGState=function(j){(j=typeof j=="string"?Yt[hr[j]]:zo(null,j)).equals(tn)||(He("/"+j.id+" gs"),tn=j)};var zo=function(j,me){if(!j||!hr[j]){var Je=!1;for(var mt in Yt)if(Yt.hasOwnProperty(mt)&&Yt[mt].equals(me)){Je=!0;break}if(Je)me=Yt[mt];else{var Ft="GS"+(Object.keys(Yt).length+1).toString(10);Yt[Ft]=me,me.id=Ft}return j&&(hr[j]=me.id),en.publish("addGState",me),me}};P.addGState=function(j,me){return zo(j,me),this},P.saveGraphicsState=function(){return He("q"),zt.push({key:ye,size:or,color:ei}),this},P.restoreGraphicsState=function(){He("Q");var j=zt.pop();return ye=j.key,or=j.size,ei=j.color,tn=null,this},P.setCurrentTransformationMatrix=function(j){return He(j.toString()+" cm"),this},P.comment=function(j){return He("#"+j),this};var ca=function(j,me){var Je=j||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Je},set:function(Vt){isNaN(Vt)||(Je=parseFloat(Vt))}});var mt=me||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return mt},set:function(Vt){isNaN(Vt)||(mt=parseFloat(Vt))}});var Ft="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ft},set:function(Vt){Ft=Vt.toString()}}),this},tc=function(j,me,Je,mt){ca.call(this,j,me),this.type="rect";var Ft=Je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ft},set:function(ir){isNaN(ir)||(Ft=parseFloat(ir))}});var Vt=mt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Vt},set:function(ir){isNaN(ir)||(Vt=parseFloat(ir))}}),this},Aa=function(){this.page=Ir,this.currentPage=Ee,this.pages=Wt.slice(0),this.pagesContext=dt.slice(0),this.x=$e,this.y=Bt,this.matrix=gt,this.width=Cn(Ee),this.height=Ea(Ee),this.outputDestination=fr,this.id="",this.objectNumber=-1};Aa.prototype.restore=function(){Ir=this.page,Ee=this.currentPage,dt=this.pagesContext,Wt=this.pages,$e=this.x,Bt=this.y,gt=this.matrix,pn(Ee,this.width),xn(Ee,this.height),fr=this.outputDestination};var Rn=function(j,me,Je,mt,Ft){Un.push(new Aa),Ir=Ee=0,Wt=[],$e=j,Bt=me,gt=Ft,Hn([Je,mt])};for(var Ho in P.beginFormObject=function(j,me,Je,mt,Ft){return Rn(j,me,Je,mt,Ft),this},P.endFormObject=function(j){return(function(me){if(Gr[me])Un.pop().restore();else{var Je=new Aa,mt="Xo"+(Object.keys(pr).length+1).toString(10);Je.id=mt,Gr[me]=mt,pr[mt]=Je,en.publish("addFormObject",Je),Un.pop().restore()}})(j),this},P.doFormObject=function(j,me){var Je=pr[Gr[j]];return He("q"),He(me.toString()+" cm"),He("/"+Je.id+" Do"),He("Q"),this},P.getFormObject=function(j){var me=pr[Gr[j]];return{x:me.x,y:me.y,width:me.width,height:me.height,matrix:me.matrix}},P.save=function(j,me){return j=j||"generated.pdf",(me=me||{}).returnPromise=me.returnPromise||!1,me.returnPromise===!1?(Gf(Ro(Do()),j),typeof Gf.unload=="function"&&Mn.setTimeout&&setTimeout(Gf.unload,911),this):new Promise(function(Je,mt){try{var Ft=Gf(Ro(Do()),j);typeof Gf.unload=="function"&&Mn.setTimeout&&setTimeout(Gf.unload,911),Je(Ft)}catch(Vt){mt(Vt.message)}})},fn.API)fn.API.hasOwnProperty(Ho)&&(Ho==="events"&&fn.API.events.length?(function(j,me){var Je,mt,Ft;for(Ft=me.length-1;Ft!==-1;Ft--)Je=me[Ft][0],mt=me[Ft][1],j.subscribe.apply(j,[Je].concat(typeof mt=="function"?[mt]:mt))})(en,fn.API.events):P[Ho]=fn.API[Ho]);function Cn(j){return dt[j].mediaBox.topRightX-dt[j].mediaBox.bottomLeftX}function pn(j,me){dt[j].mediaBox.topRightX=me+dt[j].mediaBox.bottomLeftX}function Ea(j){return dt[j].mediaBox.topRightY-dt[j].mediaBox.bottomLeftY}function xn(j,me){dt[j].mediaBox.topRightY=me+dt[j].mediaBox.bottomLeftY}var jo=P.getPageWidth=function(j){return Cn(j=j||Ee)/Ke},Ci=P.setPageWidth=function(j,me){pn(j,me*Ke)},so=P.getPageHeight=function(j){return Ea(j=j||Ee)/Ke},ua=P.setPageHeight=function(j,me){xn(j,me*Ke)};return P.internal={pdfEscape:Bi,getStyle:SA,getFont:Ba,getFontSize:Sr,getCharSpace:ec,getTextColor:la,getLineHeight:Yn,getLineHeightFactor:ni,getLineWidth:gs,write:yr,getHorizontalCoordinate:ys,getVerticalCoordinate:$i,getCoordinateString:co,getVerticalCoordinateString:vs,collections:{},newObject:oi,newAdditionalObject:qi,newObjectDeferred:Xt,newObjectDeferredBegin:Wn,getFilters:An,putStream:Di,events:en,scaleFactor:Ke,pageSize:{getWidth:function(){return jo(Ee)},setWidth:function(j){Ci(Ee,j)},getHeight:function(){return so(Ee)},setHeight:function(j){ua(Ee,j)}},encryptionOptions:I,encryption:ms,getEncryptor:function(j){return I!==null?ms.encryptor(j,0):function(me){return me}},output:Bc,getNumberOfPages:Ms,get pages(){return Wt},out:He,f2:le,f3:ge,getPageInfo:No,getPageInfoByObjId:eA,getCurrentPageInfo:tA,getPDFVersion:z,Point:ca,Rectangle:tc,Matrix:_r,hasHotfix:oa},Object.defineProperty(P.internal.pageSize,"width",{get:function(){return jo(Ee)},set:function(j){Ci(Ee,j)},enumerable:!0,configurable:!0}),Object.defineProperty(P.internal.pageSize,"height",{get:function(){return so(Ee)},set:function(j){ua(Ee,j)},enumerable:!0,configurable:!0}),(function(j){for(var me=0,Je=qr.length;me<Je;me++){var mt=bl.call(this,j[me][0],j[me][1],j[me][2],qr[me][3],!0);U===!1&&(Q[mt]=!0);var Ft=j[me][0].split("-");Xl({id:mt,fontName:Ft[0],fontStyle:Ft[1]||""})}en.publish("addFonts",{fonts:st,dictionary:xt})}).call(P,qr),ye="F1",Jc(h,i),en.publish("initialized"),P}Jd.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Jd.prototype.toHexString=function(e){return e.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jd.prototype.hexToBytes=function(e){for(var n=[],i=0;i<e.length;i+=2)n.push(String.fromCharCode(parseInt(e.substr(i,2),16)));return n.join("")},Jd.prototype.processOwnerPassword=function(e,n){return fw(hw(n).substr(0,5),e)},Jd.prototype.encryptor=function(e,n){var i=hw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(l){return fw(i,l)}},my.prototype.equals=function(e){var n,i="id,objectNumber,equals";if(!e||ts(e)!==ts(this))return!1;var l=0;for(n in this)if(!(i.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;l++}for(n in e)e.hasOwnProperty(n)&&i.indexOf(n)<0&&l--;return l===0},fn.API={events:[]},fn.version="3.0.4";var wo=fn.API,ux=1,cd=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$d=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zn=function(e){return e.toFixed(2)},tf=function(e){return e.toFixed(5)};wo.__acroform__={};var Yc=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},YC=function(e){return e*ux},$u=function(e){var n=new E4,i=sn.internal.getHeight(e)||0,l=sn.internal.getWidth(e)||0;return n.BBox=[0,0,Number(zn(l)),Number(zn(i))],n},Yj=wo.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<n},Jj=wo.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<n)},eV=wo.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<n?1:0},Lo=wo.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return eV(e,n-1)},Mo=wo.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Yj(e,n-1)},ko=wo.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Jj(e,n-1)},tV=wo.__acroform__.calculateCoordinates=function(e,n){var i=n.internal.getHorizontalCoordinate,l=n.internal.getVerticalCoordinate,h=e[0],f=e[1],m=e[2],a=e[3],x={};return x.lowerLeft_X=i(h)||0,x.lowerLeft_Y=l(f+a)||0,x.upperRight_X=i(h+m)||0,x.upperRight_Y=l(f)||0,[Number(zn(x.lowerLeft_X)),Number(zn(x.lowerLeft_Y)),Number(zn(x.upperRight_X)),Number(zn(x.upperRight_Y))]},rV=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],i=e._V||e.DV,l=dw(e,i),h=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+h+" "+zn(l.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC");var f=$u(e);return f.scope=e.scope,f.stream=n.join(`
`),f}},dw=function(e,n){var i=e.fontSize===0?e.maxFontSize:e.fontSize,l={text:"",fontSize:""},h=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");h=e.multiline?h.map(function(le){return le.split(`
`)}):h.map(function(le){return[le]});var f=i,m=sn.internal.getHeight(e)||0;m=m<0?-m:m;var a=sn.internal.getWidth(e)||0;a=a<0?-a:a;var x=function(le,ge,Pe){if(le+1<h.length){var Fe=ge+" "+h[le+1][0];return B0(Fe,e,Pe).width<=a-4}return!1};f++;e:for(;f>0;){n="",f--;var S,I,U=B0("3",e,f).height,Q=e.multiline?m-f:(m-U)/2,P=Q+=2,$=0,z=0,O=0;if(f<=0){n=`(...) Tj
`,n+="% Width of Text: "+B0(n,e,f=12).width+", FieldWidth:"+a+`
`;break}for(var W="",ne=0,ce=0;ce<h.length;ce++)if(h.hasOwnProperty(ce)){var de=!1;if(h[ce].length!==1&&O!==h[ce].length-1){if((U+2)*(ne+2)+2>m)continue e;W+=h[ce][O],de=!0,z=ce,ce--}else{W=(W+=h[ce][O]+" ").substr(W.length-1)==" "?W.substr(0,W.length-1):W;var Se=parseInt(ce),ze=x(Se,W,f),Ze=ce>=h.length-1;if(ze&&!Ze){W+=" ",O=0;continue}if(ze||Ze){if(Ze)z=Se;else if(e.multiline&&(U+2)*(ne+2)+2>m)continue e}else{if(!e.multiline||(U+2)*(ne+2)+2>m)continue e;z=Se}}for(var Qe="",be=$;be<=z;be++){var Ge=h[be];if(e.multiline){if(be===z){Qe+=Ge[O]+" ",O=(O+1)%Ge.length;continue}if(be===$){Qe+=Ge[Ge.length-1]+" ";continue}}Qe+=Ge[0]+" "}switch(Qe=Qe.substr(Qe.length-1)==" "?Qe.substr(0,Qe.length-1):Qe,I=B0(Qe,e,f).width,e.textAlign){case"right":S=a-I-2;break;case"center":S=(a-I)/2;break;default:S=2}n+=zn(S)+" "+zn(P)+` Td
`,n+="("+cd(Qe)+`) Tj
`,n+=-zn(S)+` 0 Td
`,P=-(f+2),I=0,$=de?z:z+1,ne++,W=""}break}return l.text=n,l.fontSize=f,l},B0=function(e,n,i){var l=n.scope.internal.getFont(n.fontName,n.fontStyle),h=n.scope.getStringUnitWidth(e,{font:l,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:n.scope.getStringUnitWidth("3",{font:l,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:h}},nV={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},iV=function(e,n){var i={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find(function(l){return l.type===i.type&&l.object===i.object})===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(i)},sV=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Iu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(nV)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ux=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new F4,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var l=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var h in l)if(l.hasOwnProperty(h)){var f=l[h];f.objId=void 0,f.hasAnnotation&&iV(f,i)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(i){(function(l,h){var f=!l;for(var m in l||(h.internal.newObjectDeferredBegin(h.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),h.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),l=l||h.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(l.hasOwnProperty(m)){var a=l[m],x=[],S=a.Rect;if(a.Rect&&(a.Rect=tV(a.Rect,h)),h.internal.newObjectDeferredBegin(a.objId,!0),a.DA=sn.createDefaultAppearanceStream(a),ts(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(x=a.getKeyValueListForStream()),a.Rect=S,a.hasAppearanceStream&&!a.appearanceStreamContent){var I=rV(a);x.push({key:"AP",value:"<</N "+I+">>"}),h.internal.acroformPlugin.xForms.push(I)}if(a.appearanceStreamContent){var U="";for(var Q in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(Q)){var P=a.appearanceStreamContent[Q];if(U+="/"+Q+" ",U+="<<",Object.keys(P).length>=1||Array.isArray(P)){for(var m in P)if(P.hasOwnProperty(m)){var $=P[m];typeof $=="function"&&($=$.call(h,a)),U+="/"+m+" "+$+" ",h.internal.acroformPlugin.xForms.indexOf($)>=0||h.internal.acroformPlugin.xForms.push($)}}else typeof($=P)=="function"&&($=$.call(h,a)),U+="/"+m+" "+$,h.internal.acroformPlugin.xForms.indexOf($)>=0||h.internal.acroformPlugin.xForms.push($);U+=">>"}x.push({key:"AP",value:`<<
`+U+">>"})}h.internal.putStream({additionalKeyValues:x,objectId:a.objId}),h.internal.out("endobj")}f&&(function(z,O){for(var W in z)if(z.hasOwnProperty(W)){var ne=W,ce=z[W];O.internal.newObjectDeferredBegin(ce.objId,!0),ts(ce)==="object"&&typeof ce.putStream=="function"&&ce.putStream(),delete z[ne]}})(h.internal.acroformPlugin.xForms,h)})(i,e)}),e.internal.acroformPlugin.isInitialized=!0}},S4=wo.__acroform__.arrayToPdfArray=function(e,n,i){var l=function(m){return m};if(Array.isArray(e)){for(var h="[",f=0;f<e.length;f++)switch(f!==0&&(h+=" "),ts(e[f])){case"boolean":case"number":case"object":h+=e[f].toString();break;case"string":e[f].substr(0,1)!=="/"?(n!==void 0&&i&&(l=i.internal.getEncryptor(n)),h+="("+cd(l(e[f].toString()))+")"):h+=e[f].toString()}return h+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},X_=function(e,n,i){var l=function(h){return h};return n!==void 0&&i&&(l=i.internal.getEncryptor(n)),(e=e||"").toString(),"("+cd(l(e))+")"},Xu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xu.prototype.toString=function(){return this.objId+" 0 R"},Xu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Xu.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter(function(f){return f!="content"&&f!="appearanceStreamContent"&&f!="scope"&&f!="objId"&&f.substring(0,1)!="_"});for(var i in n)if(Object.getOwnPropertyDescriptor(this,n[i]).configurable===!1){var l=n[i],h=this[l];h&&(Array.isArray(h)?e.push({key:l,value:S4(h,this.objId,this.scope)}):h instanceof Xu?(h.scope=this.scope,e.push({key:l,value:h.objId+" 0 R"})):typeof h!="function"&&e.push({key:l,value:h}))}return e};var E4=function(){Xu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){e=i.trim()},get:function(){return e||null}})};Yc(E4,Xu);var F4=function(){Xu.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var i=function(l){return l};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+cd(i(e))+")"}},set:function(i){e=i}})};Yc(F4,Xu);var Iu=function e(){Xu.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(W){if(isNaN(W))throw new Error('Invalid value "'+W+'" for attribute F supplied.');n=W}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Lo(n,3)},set:function(W){W?this.F=Mo(n,3):this.F=ko(n,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(W){if(isNaN(W))throw new Error('Invalid value "'+W+'" for attribute Ff supplied.');i=W}});var l=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(l.length!==0)return l},set:function(W){l=W!==void 0?W:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[0])?0:l[0]},set:function(W){l[0]=W}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[1])?0:l[1]},set:function(W){l[1]=W}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[2])?0:l[2]},set:function(W){l[2]=W}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[3])?0:l[3]},set:function(W){l[3]=W}});var h="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return h},set:function(W){switch(W){case"/Btn":case"/Tx":case"/Ch":case"/Sig":h=W;break;default:throw new Error('Invalid value "'+W+'" for attribute FT supplied.')}}});var f=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!f||f.length<1){if(this instanceof gy)return;f="FieldObject"+e.FieldNum++}var W=function(ne){return ne};return this.scope&&(W=this.scope.internal.getEncryptor(this.objId)),"("+cd(W(f))+")"},set:function(W){f=W.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return f},set:function(W){f=W}});var m="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return m},set:function(W){m=W}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(W){a=W}});var x=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return x},set:function(W){x=W}});var S=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return S===void 0?50/ux:S},set:function(W){S=W}});var I="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return I},set:function(W){I=W}});var U="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!U||this instanceof gy||this instanceof ed))return X_(U,this.objId,this.scope)},set:function(W){W=W.toString(),U=W}});var Q=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Q)return this instanceof el==0?X_(Q,this.objId,this.scope):Q},set:function(W){W=W.toString(),Q=this instanceof el==0?W.substr(0,1)==="("?$d(W.substr(1,W.length-2)):$d(W):W}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof el==1?$d(Q.substr(1,Q.length-1)):Q},set:function(W){W=W.toString(),Q=this instanceof el==1?"/"+W:W}});var P=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(P)return P},set:function(W){this.V=W}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof el==0?X_(P,this.objId,this.scope):P},set:function(W){W=W.toString(),P=this instanceof el==0?W.substr(0,1)==="("?$d(W.substr(1,W.length-2)):$d(W):W}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof el==1?$d(P.substr(1,P.length-1)):P},set:function(W){W=W.toString(),P=this instanceof el==1?"/"+W:W}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var $,z=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return z},set:function(W){W=!!W,z=W}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if($)return $},set:function(W){$=W}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,1)},set:function(W){W?this.Ff=Mo(this.Ff,1):this.Ff=ko(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,2)},set:function(W){W?this.Ff=Mo(this.Ff,2):this.Ff=ko(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,3)},set:function(W){W?this.Ff=Mo(this.Ff,3):this.Ff=ko(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(W){if([0,1,2].indexOf(W)===-1)throw new Error('Invalid value "'+W+'" for attribute Q supplied.');O=W}}),Object.defineProperty(this,"textAlign",{get:function(){var W;switch(O){case 0:default:W="left";break;case 1:W="center";break;case 2:W="right"}return W},configurable:!0,enumerable:!0,set:function(W){switch(W){case"right":case 2:O=2;break;case"center":case 1:O=1;break;default:O=0}}})};Yc(Iu,Xu);var cp=function(){Iu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(i){e=i}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return S4(n,this.objId,this.scope)},set:function(i){var l,h;h=[],typeof(l=i)=="string"&&(h=(function(f,m,a){a||(a=1);for(var x,S=[];x=m.exec(f);)S.push(x[a]);return S})(l,/\((.*?)\)/g)),n=h}}),this.getOptions=function(){return n},this.setOptions=function(i){n=i,this.sort&&n.sort()},this.addOption=function(i){i=(i=i||"").toString(),n.push(i),this.sort&&n.sort()},this.removeOption=function(i,l){for(l=l||!1,i=(i=i||"").toString();n.indexOf(i)!==-1&&(n.splice(n.indexOf(i),1),l!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,18)},set:function(i){i?this.Ff=Mo(this.Ff,18):this.Ff=ko(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=Mo(this.Ff,19):this.Ff=ko(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,20)},set:function(i){i?(this.Ff=Mo(this.Ff,20),n.sort()):this.Ff=ko(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,22)},set:function(i){i?this.Ff=Mo(this.Ff,22):this.Ff=ko(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,23)},set:function(i){i?this.Ff=Mo(this.Ff,23):this.Ff=ko(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,27)},set:function(i){i?this.Ff=Mo(this.Ff,27):this.Ff=ko(this.Ff,27)}}),this.hasAppearanceStream=!1};Yc(cp,Iu);var Ap=function(){cp.call(this),this.fontName="helvetica",this.combo=!1};Yc(Ap,cp);var up=function(){Ap.call(this),this.combo=!0};Yc(up,Ap);var O0=function(){up.call(this),this.edit=!0};Yc(O0,up);var el=function(){Iu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,15)},set:function(i){i?this.Ff=Mo(this.Ff,15):this.Ff=ko(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,16)},set:function(i){i?this.Ff=Mo(this.Ff,16):this.Ff=ko(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,17)},set:function(i){i?this.Ff=Mo(this.Ff,17):this.Ff=ko(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,26)},set:function(i){i?this.Ff=Mo(this.Ff,26):this.Ff=ko(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(f){return f};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var l,h=[];for(l in h.push("<<"),n)h.push("/"+l+" ("+cd(i(n[l]))+")");return h.push(">>"),h.join(`
`)}},set:function(i){ts(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}})};Yc(el,Iu);var z0=function(){el.call(this),this.pushButton=!0};Yc(z0,el);var hp=function(){el.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};Yc(hp,el);var gy=function(){var e,n;Iu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(h){e=h}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(h){n=h}});var i,l={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var h=function(a){return a};this.scope&&(h=this.scope.internal.getEncryptor(this.objId));var f,m=[];for(f in m.push("<<"),l)m.push("/"+f+" ("+cd(h(l[f]))+")");return m.push(">>"),m.join(`
`)},set:function(h){ts(h)==="object"&&(l=h)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return l.CA||""},set:function(h){typeof h=="string"&&(l.CA=h)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(h){i=h}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(h){i="/"+h}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=sn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yc(gy,Iu),hp.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var i=this.Kids[n];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},hp.prototype.createOption=function(e){var n=new gy;return n.Parent=this,n.optionName=e,this.Kids.push(n),oV.call(this.scope,n),n};var H0=function(){el.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=sn.CheckBox.createAppearanceStream()};Yc(H0,el);var ed=function(){Iu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,13)},set:function(n){n?this.Ff=Mo(this.Ff,13):this.Ff=ko(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,21)},set:function(n){n?this.Ff=Mo(this.Ff,21):this.Ff=ko(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,23)},set:function(n){n?this.Ff=Mo(this.Ff,23):this.Ff=ko(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,24)},set:function(n){n?this.Ff=Mo(this.Ff,24):this.Ff=ko(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,25)},set:function(n){n?this.Ff=Mo(this.Ff,25):this.Ff=ko(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,26)},set:function(n){n?this.Ff=Mo(this.Ff,26):this.Ff=ko(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yc(ed,Iu);var j0=function(){ed.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,14)},set:function(e){e?this.Ff=Mo(this.Ff,14):this.Ff=ko(this.Ff,14)}}),this.password=!0};Yc(j0,ed);var sn={CheckBox:{createAppearanceStream:function(){return{N:{On:sn.CheckBox.YesNormal},D:{On:sn.CheckBox.YesPushDown,Off:sn.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=$u(e);n.scope=e.scope;var i=[],l=e.scope.internal.getFont(e.fontName,e.fontStyle).id,h=e.scope.__private__.encodeColorString(e.color),f=dw(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+zn(sn.internal.getWidth(e))+" "+zn(sn.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+l+" "+zn(f.fontSize)+" Tf "+h),i.push("BT"),i.push(f.text),i.push("ET"),i.push("Q"),i.push("EMC"),n.stream=i.join(`
`),n},YesNormal:function(e){var n=$u(e);n.scope=e.scope;var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,l=e.scope.__private__.encodeColorString(e.color),h=[],f=sn.internal.getHeight(e),m=sn.internal.getWidth(e),a=dw(e,e.caption);return h.push("1 g"),h.push("0 0 "+zn(m)+" "+zn(f)+" re"),h.push("f"),h.push("q"),h.push("0 0 1 rg"),h.push("0 0 "+zn(m-1)+" "+zn(f-1)+" re"),h.push("W"),h.push("n"),h.push("0 g"),h.push("BT"),h.push("/"+i+" "+zn(a.fontSize)+" Tf "+l),h.push(a.text),h.push("ET"),h.push("Q"),n.stream=h.join(`
`),n},OffPushDown:function(e){var n=$u(e);n.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+zn(sn.internal.getWidth(e))+" "+zn(sn.internal.getHeight(e))+" re"),i.push("f"),n.stream=i.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:sn.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=sn.RadioButton.Circle.YesNormal,n.D[e]=sn.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=$u(e);n.scope=e.scope;var i=[],l=sn.internal.getWidth(e)<=sn.internal.getHeight(e)?sn.internal.getWidth(e)/4:sn.internal.getHeight(e)/4;l=Number((.9*l).toFixed(5));var h=sn.internal.Bezier_C,f=Number((l*h).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+tf(sn.internal.getWidth(e)/2)+" "+tf(sn.internal.getHeight(e)/2)+" cm"),i.push(l+" 0 m"),i.push(l+" "+f+" "+f+" "+l+" 0 "+l+" c"),i.push("-"+f+" "+l+" -"+l+" "+f+" -"+l+" 0 c"),i.push("-"+l+" -"+f+" -"+f+" -"+l+" 0 -"+l+" c"),i.push(f+" -"+l+" "+l+" -"+f+" "+l+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n},YesPushDown:function(e){var n=$u(e);n.scope=e.scope;var i=[],l=sn.internal.getWidth(e)<=sn.internal.getHeight(e)?sn.internal.getWidth(e)/4:sn.internal.getHeight(e)/4;l=Number((.9*l).toFixed(5));var h=Number((2*l).toFixed(5)),f=Number((h*sn.internal.Bezier_C).toFixed(5)),m=Number((l*sn.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+tf(sn.internal.getWidth(e)/2)+" "+tf(sn.internal.getHeight(e)/2)+" cm"),i.push(h+" 0 m"),i.push(h+" "+f+" "+f+" "+h+" 0 "+h+" c"),i.push("-"+f+" "+h+" -"+h+" "+f+" -"+h+" 0 c"),i.push("-"+h+" -"+f+" -"+f+" -"+h+" 0 -"+h+" c"),i.push(f+" -"+h+" "+h+" -"+f+" "+h+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+tf(sn.internal.getWidth(e)/2)+" "+tf(sn.internal.getHeight(e)/2)+" cm"),i.push(l+" 0 m"),i.push(l+" "+m+" "+m+" "+l+" 0 "+l+" c"),i.push("-"+m+" "+l+" -"+l+" "+m+" -"+l+" 0 c"),i.push("-"+l+" -"+m+" -"+m+" -"+l+" 0 -"+l+" c"),i.push(m+" -"+l+" "+l+" -"+m+" "+l+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(e){var n=$u(e);n.scope=e.scope;var i=[],l=sn.internal.getWidth(e)<=sn.internal.getHeight(e)?sn.internal.getWidth(e)/4:sn.internal.getHeight(e)/4;l=Number((.9*l).toFixed(5));var h=Number((2*l).toFixed(5)),f=Number((h*sn.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+tf(sn.internal.getWidth(e)/2)+" "+tf(sn.internal.getHeight(e)/2)+" cm"),i.push(h+" 0 m"),i.push(h+" "+f+" "+f+" "+h+" 0 "+h+" c"),i.push("-"+f+" "+h+" -"+h+" "+f+" -"+h+" 0 c"),i.push("-"+h+" -"+f+" -"+f+" -"+h+" 0 -"+h+" c"),i.push(f+" -"+h+" "+h+" -"+f+" "+h+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:sn.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=sn.RadioButton.Cross.YesNormal,n.D[e]=sn.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=$u(e);n.scope=e.scope;var i=[],l=sn.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+zn(sn.internal.getWidth(e)-2)+" "+zn(sn.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(zn(l.x1.x)+" "+zn(l.x1.y)+" m"),i.push(zn(l.x2.x)+" "+zn(l.x2.y)+" l"),i.push(zn(l.x4.x)+" "+zn(l.x4.y)+" m"),i.push(zn(l.x3.x)+" "+zn(l.x3.y)+" l"),i.push("s"),i.push("Q"),n.stream=i.join(`
`),n},YesPushDown:function(e){var n=$u(e);n.scope=e.scope;var i=sn.internal.calculateCross(e),l=[];return l.push("0.749023 g"),l.push("0 0 "+zn(sn.internal.getWidth(e))+" "+zn(sn.internal.getHeight(e))+" re"),l.push("f"),l.push("q"),l.push("1 1 "+zn(sn.internal.getWidth(e)-2)+" "+zn(sn.internal.getHeight(e)-2)+" re"),l.push("W"),l.push("n"),l.push(zn(i.x1.x)+" "+zn(i.x1.y)+" m"),l.push(zn(i.x2.x)+" "+zn(i.x2.y)+" l"),l.push(zn(i.x4.x)+" "+zn(i.x4.y)+" m"),l.push(zn(i.x3.x)+" "+zn(i.x3.y)+" l"),l.push("s"),l.push("Q"),n.stream=l.join(`
`),n},OffPushDown:function(e){var n=$u(e);n.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+zn(sn.internal.getWidth(e))+" "+zn(sn.internal.getHeight(e))+" re"),i.push("f"),n.stream=i.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+i}};sn.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=sn.internal.getWidth(e),i=sn.internal.getHeight(e),l=Math.min(n,i);return{x1:{x:(n-l)/2,y:(i-l)/2+l},x2:{x:(n-l)/2+l,y:(i-l)/2},x3:{x:(n-l)/2,y:(i-l)/2},x4:{x:(n-l)/2+l,y:(i-l)/2+l}}}},sn.internal.getWidth=function(e){var n=0;return ts(e)==="object"&&(n=YC(e.Rect[2])),n},sn.internal.getHeight=function(e){var n=0;return ts(e)==="object"&&(n=YC(e.Rect[3])),n};var oV=wo.addField=function(e){if(sV(this,e),!(e instanceof Iu))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};wo.AcroFormChoiceField=cp,wo.AcroFormListBox=Ap,wo.AcroFormComboBox=up,wo.AcroFormEditBox=O0,wo.AcroFormButton=el,wo.AcroFormPushButton=z0,wo.AcroFormRadioButton=hp,wo.AcroFormCheckBox=H0,wo.AcroFormTextField=ed,wo.AcroFormPasswordField=j0,wo.AcroFormAppearance=sn,wo.AcroForm={ChoiceField:cp,ListBox:Ap,ComboBox:up,EditBox:O0,Button:el,PushButton:z0,RadioButton:hp,CheckBox:H0,TextField:ed,PasswordField:j0,Appearance:sn},fn.AcroForm={ChoiceField:cp,ListBox:Ap,ComboBox:up,EditBox:O0,Button:el,PushButton:z0,RadioButton:hp,CheckBox:H0,TextField:ed,PasswordField:j0,Appearance:sn};fn.AcroForm;function I4(e){return e.reduce(function(n,i,l){return n[i]=l,n},{})}(function(e){var n="addImage_";e.__addimage__={};var i="UNKNOWN",l={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},h=e.__addimage__.getImageFileTypeByImageData=function(le,ge){var Pe,Fe,pt,ut,At,Ne=i;if((ge=ge||i)==="RGBA"||le.data!==void 0&&le.data instanceof Uint8ClampedArray&&"height"in le&&"width"in le)return"RGBA";if(ze(le))for(At in l)for(pt=l[At],Pe=0;Pe<pt.length;Pe+=1){for(ut=!0,Fe=0;Fe<pt[Pe].length;Fe+=1)if(pt[Pe][Fe]!==void 0&&pt[Pe][Fe]!==le[Fe]){ut=!1;break}if(ut===!0){Ne=At;break}}else for(At in l)for(pt=l[At],Pe=0;Pe<pt.length;Pe+=1){for(ut=!0,Fe=0;Fe<pt[Pe].length;Fe+=1)if(pt[Pe][Fe]!==void 0&&pt[Pe][Fe]!==le.charCodeAt(Fe)){ut=!1;break}if(ut===!0){Ne=At;break}}return Ne===i&&ge!==i&&(Ne=ge),Ne},f=function le(ge){for(var Pe=this.internal.write,Fe=this.internal.putStream,pt=(0,this.internal.getFilters)();pt.indexOf("FlateEncode")!==-1;)pt.splice(pt.indexOf("FlateEncode"),1);ge.objectId=this.internal.newObject();var ut=[];if(ut.push({key:"Type",value:"/XObject"}),ut.push({key:"Subtype",value:"/Image"}),ut.push({key:"Width",value:ge.width}),ut.push({key:"Height",value:ge.height}),ge.colorSpace===W.INDEXED?ut.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ge.palette.length/3-1)+" "+("sMask"in ge&&ge.sMask!==void 0?ge.objectId+2:ge.objectId+1)+" 0 R]"}):(ut.push({key:"ColorSpace",value:"/"+ge.colorSpace}),ge.colorSpace===W.DEVICE_CMYK&&ut.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ut.push({key:"BitsPerComponent",value:ge.bitsPerComponent}),"decodeParameters"in ge&&ge.decodeParameters!==void 0&&ut.push({key:"DecodeParms",value:"<<"+ge.decodeParameters+">>"}),"transparency"in ge&&Array.isArray(ge.transparency)&&ge.transparency.length>0){for(var At="",Ne=0,Ie=ge.transparency.length;Ne<Ie;Ne++)At+=ge.transparency[Ne]+" "+ge.transparency[Ne]+" ";ut.push({key:"Mask",value:"["+At+"]"})}ge.sMask!==void 0&&ut.push({key:"SMask",value:ge.objectId+1+" 0 R"});var yt=ge.filter!==void 0?["/"+ge.filter]:void 0;if(Fe({data:ge.data,additionalKeyValues:ut,alreadyAppliedFilters:yt,objectId:ge.objectId}),Pe("endobj"),"sMask"in ge&&ge.sMask!==void 0){var Ue,ie=(Ue=ge.sMaskBitsPerComponent)!==null&&Ue!==void 0?Ue:ge.bitsPerComponent,Ee={width:ge.width,height:ge.height,colorSpace:"DeviceGray",bitsPerComponent:ie,data:ge.sMask};"filter"in ge&&(Ee.decodeParameters="/Predictor ".concat(ge.predictor," /Colors 1 /BitsPerComponent ").concat(ie," /Columns ").concat(ge.width),Ee.filter=ge.filter),le.call(this,Ee)}if(ge.colorSpace===W.INDEXED){var De=this.internal.newObject();Fe({data:Qe(new Uint8Array(ge.palette)),objectId:De}),Pe("endobj")}},m=function(){var le=this.internal.collections[n+"images"];for(var ge in le)f.call(this,le[ge])},a=function(){var le,ge=this.internal.collections[n+"images"],Pe=this.internal.write;for(var Fe in ge)Pe("/I"+(le=ge[Fe]).index,le.objectId,"0","R")},x=function(){this.internal.collections[n+"images"]||(this.internal.collections[n+"images"]={},this.internal.events.subscribe("putResources",m),this.internal.events.subscribe("putXobjectDict",a))},S=function(){var le=this.internal.collections[n+"images"];return x.call(this),le},I=function(){return Object.keys(this.internal.collections[n+"images"]).length},U=function(le){return typeof e["process"+le.toUpperCase()]=="function"},Q=function(le){return ts(le)==="object"&&le.nodeType===1},P=function(le,ge){if(le.nodeName==="IMG"&&le.hasAttribute("src")){var Pe=""+le.getAttribute("src");if(Pe.indexOf("data:image/")===0)return Q0(unescape(Pe).split("base64,").pop());var Fe=e.loadFile(Pe,!0);if(Fe!==void 0)return Fe}if(le.nodeName==="CANVAS"){if(le.width===0||le.height===0)throw new Error("Given canvas must have data. Canvas width: "+le.width+", height: "+le.height);var pt;switch(ge){case"PNG":pt="image/png";break;case"WEBP":pt="image/webp";break;default:pt="image/jpeg"}return Q0(le.toDataURL(pt,1).split("base64,").pop())}},$=function(le){var ge=this.internal.collections[n+"images"];if(ge){for(var Pe in ge)if(le===ge[Pe].alias)return ge[Pe]}},z=function(le,ge,Pe){return le||ge||(le=-96,ge=-96),le<0&&(le=-1*Pe.width*72/le/this.internal.scaleFactor),ge<0&&(ge=-1*Pe.height*72/ge/this.internal.scaleFactor),le===0&&(le=ge*Pe.width/Pe.height),ge===0&&(ge=le*Pe.height/Pe.width),[le,ge]},O=function(le,ge,Pe,Fe,pt,ut){var At=z.call(this,Pe,Fe,pt),Ne=this.internal.getCoordinateString,Ie=this.internal.getVerticalCoordinateString,yt=S.call(this);if(Pe=At[0],Fe=At[1],yt[pt.index]=pt,ut){ut*=Math.PI/180;var Ue=Math.cos(ut),ie=Math.sin(ut),Ee=function(Ye){return Ye.toFixed(4)},De=[Ee(Ue),Ee(ie),Ee(-1*ie),Ee(Ue),0,0,"cm"]}this.internal.write("q"),ut?(this.internal.write([1,"0","0",1,Ne(le),Ie(ge+Fe),"cm"].join(" ")),this.internal.write(De.join(" ")),this.internal.write([Ne(Pe),"0","0",Ne(Fe),"0","0","cm"].join(" "))):this.internal.write([Ne(Pe),"0","0",Ne(Fe),Ne(le),Ie(ge+Fe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pt.index+" Do"),this.internal.write("Q")},W=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ne=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ce=e.__addimage__.sHashCode=function(le){var ge,Pe,Fe=0;if(typeof le=="string")for(Pe=le.length,ge=0;ge<Pe;ge++)Fe=(Fe<<5)-Fe+le.charCodeAt(ge),Fe|=0;else if(ze(le))for(Pe=le.byteLength/2,ge=0;ge<Pe;ge++)Fe=(Fe<<5)-Fe+le[ge],Fe|=0;return Fe},de=e.__addimage__.validateStringAsBase64=function(le){(le=le||"").toString().trim();var ge=!0;return le.length===0&&(ge=!1),le.length%4!=0&&(ge=!1),/^[A-Za-z0-9+/]+$/.test(le.substr(0,le.length-2))===!1&&(ge=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(le.substr(-2))===!1&&(ge=!1),ge},Se=e.__addimage__.extractImageFromDataUrl=function(le){if(le==null||!(le=le.trim()).startsWith("data:"))return null;var ge=le.indexOf(",");return ge<0?null:le.substring(0,ge).trim().endsWith("base64")?le.substring(ge+1):null};e.__addimage__.isArrayBuffer=function(le){return le instanceof ArrayBuffer};var ze=e.__addimage__.isArrayBufferView=function(le){return le instanceof Int8Array||le instanceof Uint8Array||le instanceof Uint8ClampedArray||le instanceof Int16Array||le instanceof Uint16Array||le instanceof Int32Array||le instanceof Uint32Array||le instanceof Float32Array||le instanceof Float64Array},Ze=e.__addimage__.binaryStringToUint8Array=function(le){for(var ge=le.length,Pe=new Uint8Array(ge),Fe=0;Fe<ge;Fe++)Pe[Fe]=le.charCodeAt(Fe);return Pe},Qe=e.__addimage__.arrayBufferToBinaryString=function(le){for(var ge="",Pe=ze(le)?le:new Uint8Array(le),Fe=0;Fe<Pe.length;Fe+=8192)ge+=String.fromCharCode.apply(null,Pe.subarray(Fe,Fe+8192));return ge};e.addImage=function(){var le,ge,Pe,Fe,pt,ut,At,Ne,Ie;if(typeof arguments[1]=="number"?(ge=i,Pe=arguments[1],Fe=arguments[2],pt=arguments[3],ut=arguments[4],At=arguments[5],Ne=arguments[6],Ie=arguments[7]):(ge=arguments[1],Pe=arguments[2],Fe=arguments[3],pt=arguments[4],ut=arguments[5],At=arguments[6],Ne=arguments[7],Ie=arguments[8]),ts(le=arguments[0])==="object"&&!Q(le)&&"imageData"in le){var yt=le;le=yt.imageData,ge=yt.format||ge||i,Pe=yt.x||Pe||0,Fe=yt.y||Fe||0,pt=yt.w||yt.width||pt,ut=yt.h||yt.height||ut,At=yt.alias||At,Ne=yt.compression||Ne,Ie=yt.rotation||yt.angle||Ie}var Ue=this.internal.getFilters();if(Ne===void 0&&Ue.indexOf("FlateEncode")!==-1&&(Ne="SLOW"),isNaN(Pe)||isNaN(Fe))throw new Error("Invalid coordinates passed to jsPDF.addImage");x.call(this);var ie=be.call(this,le,ge,At,Ne);return O.call(this,Pe,Fe,pt,ut,ie,Ie),this};var be=function(le,ge,Pe,Fe){var pt,ut,At;if(typeof le=="string"&&h(le)===i){le=unescape(le);var Ne=Ge(le,!1);(Ne!==""||(Ne=e.loadFile(le,!0))!==void 0)&&(le=Ne)}if(Q(le)&&(le=P(le,ge)),ge=h(le,ge),!U(ge))throw new Error("addImage does not support files of type '"+ge+"', please ensure that a plugin for '"+ge+"' support is added.");if(((At=Pe)==null||At.length===0)&&(Pe=(function(Ie){return typeof Ie=="string"||ze(Ie)?ce(Ie):ze(Ie.data)?ce(Ie.data):null})(le)),(pt=$.call(this,Pe))||(le instanceof Uint8Array||ge==="RGBA"||(ut=le,le=Ze(le)),pt=this["process"+ge.toUpperCase()](le,I.call(this),Pe,(function(Ie){return Ie&&typeof Ie=="string"&&(Ie=Ie.toUpperCase()),Ie in e.image_compression?Ie:ne.NONE})(Fe),ut)),!pt)throw new Error("An unknown error occurred whilst processing the image.");return pt},Ge=e.__addimage__.convertBase64ToBinaryString=function(le,ge){ge=typeof ge!="boolean"||ge;var Pe,Fe="";if(typeof le=="string"){var pt;Pe=(pt=Se(le))!==null&&pt!==void 0?pt:le;try{Fe=Q0(Pe)}catch(ut){if(ge)throw de(Pe)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ut.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Fe};e.getImageProperties=function(le){var ge,Pe,Fe="";if(Q(le)&&(le=P(le)),typeof le=="string"&&h(le)===i&&((Fe=Ge(le,!1))===""&&(Fe=e.loadFile(le)||""),le=Fe),Pe=h(le),!U(Pe))throw new Error("addImage does not support files of type '"+Pe+"', please ensure that a plugin for '"+Pe+"' support is added.");if(le instanceof Uint8Array||(le=Ze(le)),!(ge=this["process"+Pe.toUpperCase()](le)))throw new Error("An unknown error occurred whilst processing the image");return ge.fileType=Pe,ge}})(fn.API),(function(e){var n=function(i){if(i!==void 0&&i!="")return!0};fn.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(i){for(var l,h,f,m=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,x=this.internal.getPageInfoByObjId(i.objId),S=i.pageContext.annotations,I=!1,U=0;U<S.length&&!I;U++)switch((l=S[U]).type){case"link":(n(l.options.url)||n(l.options.pageNumber))&&(I=!0);break;case"reference":case"text":case"freetext":I=!0}if(I!=0){this.internal.write("/Annots [");for(var Q=0;Q<S.length;Q++){l=S[Q];var P=this.internal.pdfEscape,$=this.internal.getEncryptor(i.objId);switch(l.type){case"reference":this.internal.write(" "+l.object.objId+" 0 R ");break;case"text":var z=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),W=this.internal.getEncryptor(z.objId),ne=l.title||"Note";f="<</Type /Annot /Subtype /Text "+(h="/Rect ["+m(l.bounds.x)+" "+a(l.bounds.y+l.bounds.h)+" "+m(l.bounds.x+l.bounds.w)+" "+a(l.bounds.y)+"] ")+"/Contents ("+P(W(l.contents))+")",f+=" /Popup "+O.objId+" 0 R",f+=" /P "+x.objId+" 0 R",f+=" /T ("+P(W(ne))+") >>",z.content=f;var ce=z.objId+" 0 R";f="<</Type /Annot /Subtype /Popup "+(h="/Rect ["+m(l.bounds.x+30)+" "+a(l.bounds.y+l.bounds.h)+" "+m(l.bounds.x+l.bounds.w+30)+" "+a(l.bounds.y)+"] ")+" /Parent "+ce,l.open&&(f+=" /Open true"),f+=" >>",O.content=f,this.internal.write(z.objId,"0 R",O.objId,"0 R");break;case"freetext":h="/Rect ["+m(l.bounds.x)+" "+a(l.bounds.y)+" "+m(l.bounds.x+l.bounds.w)+" "+a(l.bounds.y+l.bounds.h)+"] ";var de=l.color||"#000000";f="<</Type /Annot /Subtype /FreeText "+h+"/Contents ("+P($(l.contents))+")",f+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+de+")",f+=" /Border [0 0 0]",f+=" >>",this.internal.write(f);break;case"link":if(l.options.name){var Se=this.annotations._nameMap[l.options.name];l.options.pageNumber=Se.page,l.options.top=Se.y}else l.options.top||(l.options.top=0);if(h="/Rect ["+l.finalBounds.x+" "+l.finalBounds.y+" "+l.finalBounds.w+" "+l.finalBounds.h+"] ",f="",l.options.url)f="<</Type /Annot /Subtype /Link "+h+"/Border [0 0 0] /A <</S /URI /URI ("+P($(l.options.url))+") >>";else if(l.options.pageNumber)switch(f="<</Type /Annot /Subtype /Link "+h+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(l.options.pageNumber).objId+" 0 R",l.options.magFactor=l.options.magFactor||"XYZ",l.options.magFactor){case"Fit":f+=" /Fit]";break;case"FitH":f+=" /FitH "+l.options.top+"]";break;case"FitV":l.options.left=l.options.left||0,f+=" /FitV "+l.options.left+"]";break;default:var ze=a(l.options.top);l.options.left=l.options.left||0,l.options.zoom===void 0&&(l.options.zoom=0),f+=" /XYZ "+l.options.left+" "+ze+" "+l.options.zoom+"]"}f!=""&&(f+=" >>",this.internal.write(f))}}this.internal.write("]")}}]),e.createAnnotation=function(i){var l=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":l.pageContext.annotations.push(i)}},e.link=function(i,l,h,f,m){var a=this.internal.getCurrentPageInfo(),x=this.internal.getCoordinateString,S=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:x(i),y:S(l),w:x(i+h),h:S(l+f)},options:m,type:"link"})},e.textWithLink=function(i,l,h,f){var m,a,x=this.getTextWidth(i),S=this.internal.getLineHeight()/this.internal.scaleFactor;if(f.maxWidth!==void 0){a=f.maxWidth;var I=this.splitTextToSize(i,a).length;m=Math.ceil(S*I)}else a=x,m=S;return this.text(i,l,h,f),h+=.2*S,f.align==="center"&&(l-=x/2),f.align==="right"&&(l-=x),this.link(l,h-S,a,m,f),x},e.getTextWidth=function(i){var l=this.internal.getFontSize();return this.getStringUnitWidth(i)*l/this.internal.scaleFactor}})(fn.API),(function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},l={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},h=[1570,1571,1573,1575];e.__arabicParser__={};var f=e.__arabicParser__.isInArabicSubstitutionA=function(z){return n[z.charCodeAt(0)]!==void 0},m=e.__arabicParser__.isArabicLetter=function(z){return typeof z=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(z)},a=e.__arabicParser__.isArabicEndLetter=function(z){return m(z)&&f(z)&&n[z.charCodeAt(0)].length<=2},x=e.__arabicParser__.isArabicAlfLetter=function(z){return m(z)&&h.indexOf(z.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(z){return m(z)&&f(z)&&n[z.charCodeAt(0)].length>=1};var S=e.__arabicParser__.arabicLetterHasFinalForm=function(z){return m(z)&&f(z)&&n[z.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(z){return m(z)&&f(z)&&n[z.charCodeAt(0)].length>=3};var I=e.__arabicParser__.arabicLetterHasMedialForm=function(z){return m(z)&&f(z)&&n[z.charCodeAt(0)].length==4},U=e.__arabicParser__.resolveLigatures=function(z){var O=0,W=i,ne="",ce=0;for(O=0;O<z.length;O+=1)W[z.charCodeAt(O)]!==void 0?(ce++,typeof(W=W[z.charCodeAt(O)])=="number"&&(ne+=String.fromCharCode(W),W=i,ce=0),O===z.length-1&&(W=i,ne+=z.charAt(O-(ce-1)),O-=ce-1,ce=0)):(W=i,ne+=z.charAt(O-ce),O-=ce,ce=0);return ne};e.__arabicParser__.isArabicDiacritic=function(z){return z!==void 0&&l[z.charCodeAt(0)]!==void 0};var Q=e.__arabicParser__.getCorrectForm=function(z,O,W){return m(z)?f(z)===!1?-1:!S(z)||!m(O)&&!m(W)||!m(W)&&a(O)||a(z)&&!m(O)||a(z)&&x(O)||a(z)&&a(O)?0:I(z)&&m(O)&&!a(O)&&m(W)&&S(W)?3:a(z)||!m(W)?1:2:-1},P=function(z){var O=0,W=0,ne=0,ce="",de="",Se="",ze=(z=z||"").split("\\s+"),Ze=[];for(O=0;O<ze.length;O+=1){for(Ze.push(""),W=0;W<ze[O].length;W+=1)ce=ze[O][W],de=ze[O][W-1],Se=ze[O][W+1],m(ce)?(ne=Q(ce,de,Se),Ze[O]+=ne!==-1?String.fromCharCode(n[ce.charCodeAt(0)][ne]):ce):Ze[O]+=ce;Ze[O]=U(Ze[O])}return Ze.join(" ")},$=e.__arabicParser__.processArabic=e.processArabic=function(){var z,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,W=[];if(Array.isArray(O)){var ne=0;for(W=[],ne=0;ne<O.length;ne+=1)Array.isArray(O[ne])?W.push([P(O[ne][0]),O[ne][1],O[ne][2]]):W.push([P(O[ne])]);z=W}else z=P(O);return typeof arguments[0]=="string"?z:(arguments[0].text=z,arguments[0])};e.events.push(["preProcessText",$])})(fn.API),fn.API.autoPrint=function(e){var n;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})),this},(function(e){var n=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(a){i=a}});var l=150;Object.defineProperty(this,"width",{get:function(){return l},set:function(a){l=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=l+1)}});var h=300;Object.defineProperty(this,"height",{get:function(){return h},set:function(a){h=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=h+1)}});var f=[];Object.defineProperty(this,"childNodes",{get:function(){return f},set:function(a){f=a}});var m={};Object.defineProperty(this,"style",{get:function(){return m},set:function(a){m=a}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(i,l){var h;if((i=i||"2d")!=="2d")return null;for(h in l)this.pdf.context2d.hasOwnProperty(h)&&(this.pdf.context2d[h]=l[h]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])})(fn.API),(function(e){var n={left:0,top:0,bottom:0,right:0},i=!1,l=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),h.call(this))},h=function(){this.internal.__cell__.lastCell=new f,this.internal.__cell__.pages=1},f=function(){var x=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return x},set:function(z){x=z}});var S=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return S},set:function(z){S=z}});var I=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return I},set:function(z){I=z}});var U=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return U},set:function(z){U=z}});var Q=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Q},set:function(z){Q=z}});var P=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return P},set:function(z){P=z}});var $=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return $},set:function(z){$=z}}),this};f.prototype.clone=function(){return new f(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},f.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(x){return l.call(this),this.internal.__cell__.headerFunction=typeof x=="function"?x:void 0,this},e.getTextDimensions=function(x,S){l.call(this);var I=(S=S||{}).fontSize||this.getFontSize(),U=S.font||this.getFont(),Q=S.scaleFactor||this.internal.scaleFactor,P=0,$=0,z=0,O=this;if(!Array.isArray(x)&&typeof x!="string"){if(typeof x!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");x=String(x)}var W=S.maxWidth;W>0?typeof x=="string"?x=this.splitTextToSize(x,W):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(ce,de){return ce.concat(O.splitTextToSize(de,W))},[])):x=Array.isArray(x)?x:[x];for(var ne=0;ne<x.length;ne++)P<(z=this.getStringUnitWidth(x[ne],{font:U})*I)&&(P=z);return P!==0&&($=x.length),{w:P/=Q,h:Math.max(($*I*this.getLineHeightFactor()-I*(this.getLineHeightFactor()-1))/Q,0)}},e.cellAddPage=function(){l.call(this),this.addPage();var x=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new f(x.left,x.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var m=e.cell=function(){var x;x=arguments[0]instanceof f?arguments[0]:new f(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),l.call(this);var S=this.internal.__cell__.lastCell,I=this.internal.__cell__.padding,U=this.internal.__cell__.margins||n,Q=this.internal.__cell__.tableHeaderRow,P=this.internal.__cell__.printHeaders;return S.lineNumber!==void 0&&(S.lineNumber===x.lineNumber?(x.x=(S.x||0)+(S.width||0),x.y=S.y||0):S.y+S.height+x.height+U.bottom>this.getPageHeight()?(this.cellAddPage(),x.y=U.top,P&&Q&&(this.printHeaderRow(x.lineNumber,!0),x.y+=Q[0].height)):x.y=S.y+S.height||x.y),x.text[0]!==void 0&&(this.rect(x.x,x.y,x.width,x.height,i===!0?"FD":void 0),x.align==="right"?this.text(x.text,x.x+x.width-I,x.y+I,{align:"right",baseline:"top"}):x.align==="center"?this.text(x.text,x.x+x.width/2,x.y+I,{align:"center",baseline:"top",maxWidth:x.width-I-I}):this.text(x.text,x.x+I,x.y+I,{align:"left",baseline:"top",maxWidth:x.width-I-I})),this.internal.__cell__.lastCell=x,this};e.table=function(x,S,I,U,Q){if(l.call(this),!I)throw new Error("No data for PDF table.");var P,$,z,O,W=[],ne=[],ce=[],de={},Se={},ze=[],Ze=[],Qe=(Q=Q||{}).autoSize||!1,be=Q.printHeaders!==!1,Ge=Q.css&&Q.css["font-size"]!==void 0?16*Q.css["font-size"]:Q.fontSize||12,le=Q.margins||Object.assign({width:this.getPageWidth()},n),ge=typeof Q.padding=="number"?Q.padding:3,Pe=Q.headerBackgroundColor||"#c8c8c8",Fe=Q.headerTextColor||"#000";if(h.call(this),this.internal.__cell__.printHeaders=be,this.internal.__cell__.margins=le,this.internal.__cell__.table_font_size=Ge,this.internal.__cell__.padding=ge,this.internal.__cell__.headerBackgroundColor=Pe,this.internal.__cell__.headerTextColor=Fe,this.setFontSize(Ge),U==null)ne=W=Object.keys(I[0]),ce=W.map(function(){return"left"});else if(Array.isArray(U)&&ts(U[0])==="object")for(W=U.map(function(yt){return yt.name}),ne=U.map(function(yt){return yt.prompt||yt.name||""}),ce=U.map(function(yt){return yt.align||"left"}),P=0;P<U.length;P+=1)Se[U[P].name]=.7499990551181103*U[P].width;else Array.isArray(U)&&typeof U[0]=="string"&&(ne=W=U,ce=W.map(function(){return"left"}));if(Qe||Array.isArray(U)&&typeof U[0]=="string")for(P=0;P<W.length;P+=1){for(de[O=W[P]]=I.map(function(yt){return yt[O]}),this.setFont(void 0,"bold"),ze.push(this.getTextDimensions(ne[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),$=de[O],this.setFont(void 0,"normal"),z=0;z<$.length;z+=1)ze.push(this.getTextDimensions($[z],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Se[O]=Math.max.apply(null,ze)+ge+ge,ze=[]}if(be){var pt={};for(P=0;P<W.length;P+=1)pt[W[P]]={},pt[W[P]].text=ne[P],pt[W[P]].align=ce[P];var ut=a.call(this,pt,Se);Ze=W.map(function(yt){return new f(x,S,Se[yt],ut,pt[yt].text,void 0,pt[yt].align)}),this.setTableHeaderRow(Ze),this.printHeaderRow(1,!1)}var At=U.reduce(function(yt,Ue){return yt[Ue.name]=Ue.align,yt},{});for(P=0;P<I.length;P+=1){"rowStart"in Q&&Q.rowStart instanceof Function&&Q.rowStart({row:P,data:I[P]},this);var Ne=a.call(this,I[P],Se);for(z=0;z<W.length;z+=1){var Ie=I[P][W[z]];"cellStart"in Q&&Q.cellStart instanceof Function&&Q.cellStart({row:P,col:z,data:Ie},this),m.call(this,new f(x,S,Se[W[z]],Ne,Ie,P+2,At[W[z]]))}}return this.internal.__cell__.table_x=x,this.internal.__cell__.table_y=S,this};var a=function(x,S){var I=this.internal.__cell__.padding,U=this.internal.__cell__.table_font_size,Q=this.internal.scaleFactor;return Object.keys(x).map(function(P){var $=x[P];return this.splitTextToSize($.hasOwnProperty("text")?$.text:$,S[P]-I-I)},this).map(function(P){return this.getLineHeightFactor()*P.length*U/Q+I+I},this).reduce(function(P,$){return Math.max(P,$)},0)};e.setTableHeaderRow=function(x){l.call(this),this.internal.__cell__.tableHeaderRow=x},e.printHeaderRow=function(x,S){if(l.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var I;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var U=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new f(U[0],U[1],U[2],U[3],void 0,-1)}this.setFont(void 0,"bold");for(var Q=[],P=0;P<this.internal.__cell__.tableHeaderRow.length;P+=1){I=this.internal.__cell__.tableHeaderRow[P].clone(),S&&(I.y=this.internal.__cell__.margins.top||0,Q.push(I)),I.lineNumber=x;var $=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),m.call(this,I),this.setTextColor($)}Q.length>0&&this.setTableHeaderRow(Q),this.setFont(void 0,"normal"),i=!1}})(fn.API);var T4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},P4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],pw=I4(P4),L4=[100,200,300,400,500,600,700,800,900],aV=I4(L4);function Y_(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),i=(function(f){return T4[f=f||"normal"]?f:"normal"})(e.style),l=(function(f){return f?typeof f=="number"?f>=100&&f<=900&&f%100==0?f:400:/^\d00$/.test(f)?parseInt(f):f==="bold"?700:400:400})(e.weight),h=(function(f){return typeof pw[f=f||"normal"]=="number"?f:"normal"})(e.stretch);return{family:n,style:i,weight:l,stretch:h,src:e.src||[],ref:e.ref||{name:n,style:[h,i,l].join(" ")}}}function JC(e,n,i,l){var h;for(h=i;h>=0&&h<n.length;h+=l)if(e[n[h]])return e[n[h]];for(h=i;h>=0&&h<n.length;h-=l)if(e[n[h]])return e[n[h]]}var lV={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},e5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function t5(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function r5(e){return e.trimLeft()}function cV(e,n){for(var i=0;i<e.length;){if(e.charAt(i)===n)return[e.substring(0,i),e.substring(i+1)];i+=1}return null}function AV(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var C0,n5,i5,Wd,S0,s5,o5,a5,J_=["times"];function l5(e,n,i,l,h){var f=4,m=A5;switch(h){case fn.API.image_compression.FAST:f=1,m=c5;break;case fn.API.image_compression.MEDIUM:f=6,m=u5;break;case fn.API.image_compression.SLOW:f=9,m=h5}e=(function(x,S,I,U){for(var Q,P=x.length/S,$=new Uint8Array(x.length+P),z=[uV,c5,A5,u5,h5],O=0;O<P;O+=1){var W=O*S,ne=x.subarray(W,W+S);if(U)$.set(U(ne,I,Q),W+O);else{for(var ce=z.length,de=[],Se=0;Se<ce;Se+=1)de[Se]=z[Se](ne,I,Q);var ze=fV(de.concat());$.set(de[ze],W+O)}Q=ne}return $})(e,n,Math.ceil(i*l/8),m);var a=lw(e,{level:f});return fn.API.__addimage__.arrayBufferToBinaryString(a)}function uV(e){var n=Array.apply([],e);return n.unshift(0),n}function c5(e,n){var i=e.length,l=[];l[0]=1;for(var h=0;h<i;h+=1){var f=e[h-n]||0;l[h+1]=e[h]-f+256&255}return l}function A5(e,n,i){var l=e.length,h=[];h[0]=2;for(var f=0;f<l;f+=1){var m=i&&i[f]||0;h[f+1]=e[f]-m+256&255}return h}function u5(e,n,i){var l=e.length,h=[];h[0]=3;for(var f=0;f<l;f+=1){var m=e[f-n]||0,a=i&&i[f]||0;h[f+1]=e[f]+256-(m+a>>>1)&255}return h}function h5(e,n,i){var l=e.length,h=[];h[0]=4;for(var f=0;f<l;f+=1){var m=hV(e[f-n]||0,i&&i[f]||0,i&&i[f-n]||0);h[f+1]=e[f]-m+256&255}return h}function hV(e,n,i){if(e===n&&n===i)return e;var l=Math.abs(n-i),h=Math.abs(e-i),f=Math.abs(e+n-i-i);return l<=h&&l<=f?e:h<=f?n:i}function fV(e){var n=e.map(function(i){return i.reduce(function(l,h){return l+Math.abs(h)},0)});return n.indexOf(Math.min.apply(null,n))}function e1(e,n,i){var l=n*i,h=Math.floor(l/8),f=16-(l-8*h+i),m=(1<<i)-1;return M4(e,h)>>f&m}function f5(e,n,i,l){var h=i*l,f=Math.floor(h/8),m=16-(h-8*f+l),a=(1<<l)-1,x=(n&a)<<m;(function(S,I,U){if(I+1<S.byteLength)S.setUint16(I,U,!1);else{var Q=U>>8&255;S.setUint8(I,Q)}})(e,f,M4(e,f)&~(a<<m)&65535|x)}function M4(e,n){return n+1<e.byteLength?e.getUint16(n,!1):e.getUint8(n)<<8}function dV(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=e[n++]|e[n++]<<8,l=e[n++]|e[n++]<<8,h=e[n++],f=h>>7,m=1<<1+(7&h);e[n++],e[n++];var a=null,x=null;f&&(a=n,x=m,n+=3*m);var S=!0,I=[],U=0,Q=null,P=0,$=null;for(this.width=i,this.height=l;S&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,$=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((le=e[n++])>=0))throw Error("Invalid block size");if(le===0)break;n+=le}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var z=e[n++];U=e[n++]|e[n++]<<8,Q=e[n++],1&z||(Q=null),P=z>>2&7,n++;break;case 254:for(;;){if(!((le=e[n++])>=0))throw Error("Invalid block size");if(le===0)break;n+=le}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var O=e[n++]|e[n++]<<8,W=e[n++]|e[n++]<<8,ne=e[n++]|e[n++]<<8,ce=e[n++]|e[n++]<<8,de=e[n++],Se=de>>6&1,ze=1<<1+(7&de),Ze=a,Qe=x,be=!1;de>>7&&(be=!0,Ze=n,Qe=ze,n+=3*ze);var Ge=n;for(n++;;){var le;if(!((le=e[n++])>=0))throw Error("Invalid block size");if(le===0)break;n+=le}I.push({x:O,y:W,width:ne,height:ce,has_local_palette:be,palette_offset:Ze,palette_size:Qe,data_offset:Ge,data_length:n-Ge,transparent_index:Q,interlaced:!!Se,delay:U,disposal:P});break;case 59:S=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return I.length},this.loopCount=function(){return $},this.frameInfo=function(ge){if(ge<0||ge>=I.length)throw new Error("Frame index out of range.");return I[ge]},this.decodeAndBlitFrameBGRA=function(ge,Pe){var Fe=this.frameInfo(ge),pt=Fe.width*Fe.height,ut=new Uint8Array(pt);d5(e,Fe.data_offset,ut,pt);var At=Fe.palette_offset,Ne=Fe.transparent_index;Ne===null&&(Ne=256);var Ie=Fe.width,yt=i-Ie,Ue=Ie,ie=4*(Fe.y*i+Fe.x),Ee=4*((Fe.y+Fe.height)*i+Fe.x),De=ie,Ye=4*yt;Fe.interlaced===!0&&(Ye+=4*i*7);for(var at=8,tt=0,wt=ut.length;tt<wt;++tt){var Et=ut[tt];if(Ue===0&&(Ue=Ie,(De+=Ye)>=Ee&&(Ye=4*yt+4*i*(at-1),De=ie+(Ie+yt)*(at<<1),at>>=1)),Et===Ne)De+=4;else{var Pt=e[At+3*Et],Wt=e[At+3*Et+1],lr=e[At+3*Et+2];Pe[De++]=lr,Pe[De++]=Wt,Pe[De++]=Pt,Pe[De++]=255}--Ue}},this.decodeAndBlitFrameRGBA=function(ge,Pe){var Fe=this.frameInfo(ge),pt=Fe.width*Fe.height,ut=new Uint8Array(pt);d5(e,Fe.data_offset,ut,pt);var At=Fe.palette_offset,Ne=Fe.transparent_index;Ne===null&&(Ne=256);var Ie=Fe.width,yt=i-Ie,Ue=Ie,ie=4*(Fe.y*i+Fe.x),Ee=4*((Fe.y+Fe.height)*i+Fe.x),De=ie,Ye=4*yt;Fe.interlaced===!0&&(Ye+=4*i*7);for(var at=8,tt=0,wt=ut.length;tt<wt;++tt){var Et=ut[tt];if(Ue===0&&(Ue=Ie,(De+=Ye)>=Ee&&(Ye=4*yt+4*i*(at-1),De=ie+(Ie+yt)*(at<<1),at>>=1)),Et===Ne)De+=4;else{var Pt=e[At+3*Et],Wt=e[At+3*Et+1],lr=e[At+3*Et+2];Pe[De++]=Pt,Pe[De++]=Wt,Pe[De++]=lr,Pe[De++]=255}--Ue}}}function d5(e,n,i,l){for(var h=e[n++],f=1<<h,m=f+1,a=m+1,x=h+1,S=(1<<x)-1,I=0,U=0,Q=0,P=e[n++],$=new Int32Array(4096),z=null;;){for(;I<16&&P!==0;)U|=e[n++]<<I,I+=8,P===1?P=e[n++]:--P;if(I<x)break;var O=U&S;if(U>>=x,I-=x,O!==f){if(O===m)break;for(var W=O<a?O:z,ne=0,ce=W;ce>f;)ce=$[ce]>>8,++ne;var de=ce;if(Q+ne+(W!==O?1:0)>l)return void ps.log("Warning, gif stream longer than expected.");i[Q++]=de;var Se=Q+=ne;for(W!==O&&(i[Q++]=de),ce=W;ne--;)ce=$[ce],i[--Se]=255&ce,ce>>=8;z!==null&&a<4096&&($[a++]=z<<8|de,a>=S+1&&x<12&&(++x,S=S<<1|1)),z=O}else a=m+1,S=(1<<(x=h+1))-1,z=null}return Q!==l&&ps.log("Warning, gif stream shorter than expected."),i}function t1(e){var n,i,l,h,f,m=Math.floor,a=new Array(64),x=new Array(64),S=new Array(64),I=new Array(64),U=new Array(65535),Q=new Array(65535),P=new Array(64),$=new Array(64),z=[],O=0,W=7,ne=new Array(64),ce=new Array(64),de=new Array(64),Se=new Array(256),ze=new Array(2048),Ze=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Qe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],be=[0,1,2,3,4,5,6,7,8,9,10,11],Ge=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],le=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ge=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Pe=[0,1,2,3,4,5,6,7,8,9,10,11],Fe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ut(ie,Ee){for(var De=0,Ye=0,at=new Array,tt=1;tt<=16;tt++){for(var wt=1;wt<=ie[tt];wt++)at[Ee[Ye]]=[],at[Ee[Ye]][0]=De,at[Ee[Ye]][1]=tt,Ye++,De++;De*=2}return at}function At(ie){for(var Ee=ie[0],De=ie[1]-1;De>=0;)Ee&1<<De&&(O|=1<<W),De--,--W<0&&(O==255?(Ne(255),Ne(0)):Ne(O),W=7,O=0)}function Ne(ie){z.push(ie)}function Ie(ie){Ne(ie>>8&255),Ne(255&ie)}function yt(ie,Ee,De,Ye,at){for(var tt,wt=at[0],Et=at[240],Pt=(function(or,$r){var Sr,Qr,Dr,Qn,un,ft,he,fe,ye,Ke,$e=0;for(ye=0;ye<8;++ye){Sr=or[$e],Qr=or[$e+1],Dr=or[$e+2],Qn=or[$e+3],un=or[$e+4],ft=or[$e+5],he=or[$e+6];var Bt=Sr+(fe=or[$e+7]),gt=Sr-fe,st=Qr+he,xt=Qr-he,zt=Dr+ft,St=Dr-ft,ar=Qn+un,Yt=Qn-un,hr=Bt+ar,tn=Bt-ar,Ir=st+zt,dt=st-zt;or[$e]=hr+Ir,or[$e+4]=hr-Ir;var en=.707106781*(dt+tn);or[$e+2]=tn+en,or[$e+6]=tn-en;var Rr=.382683433*((hr=Yt+St)-(dt=xt+gt)),pr=.5411961*hr+Rr,Gr=1.306562965*dt+Rr,Un=.707106781*(Ir=St+xt),_r=gt+Un,In=gt-Un;or[$e+5]=In+pr,or[$e+3]=In-pr,or[$e+1]=_r+Gr,or[$e+7]=_r-Gr,$e+=8}for($e=0,ye=0;ye<8;++ye){Sr=or[$e],Qr=or[$e+8],Dr=or[$e+16],Qn=or[$e+24],un=or[$e+32],ft=or[$e+40],he=or[$e+48];var bn=Sr+(fe=or[$e+56]),wn=Sr-fe,Ui=Qr+he,oi=Qr-he,Xt=Dr+ft,Wn=Dr-ft,qi=Qn+un,rl=Qn-un,rs=bn+qi,dr=bn-qi,rn=Ui+Xt,An=Ui-Xt;or[$e]=rs+rn,or[$e+32]=rs-rn;var Di=.707106781*(An+dr);or[$e+16]=dr+Di,or[$e+48]=dr-Di;var xl=.382683433*((rs=rl+Wn)-(An=oi+wn)),Ls=.5411961*rs+xl,hn=1.306562965*An+xl,nl=.707106781*(rn=Wn+oi),il=wn+nl,Zl=wn-nl;or[$e+40]=Zl+Ls,or[$e+24]=Zl-Ls,or[$e+8]=il+hn,or[$e+56]=il-hn,$e++}for(ye=0;ye<64;++ye)Ke=or[ye]*$r[ye],P[ye]=Ke>0?Ke+.5|0:Ke-.5|0;return P})(ie,Ee),Wt=0;Wt<64;++Wt)$[Ze[Wt]]=Pt[Wt];var lr=$[0]-De;De=$[0],lr==0?At(Ye[0]):(At(Ye[Q[tt=32767+lr]]),At(U[tt]));for(var fr=63;fr>0&&$[fr]==0;)fr--;if(fr==0)return At(wt),De;for(var Br,He=1;He<=fr;){for(var yr=He;$[He]==0&&He<=fr;)++He;var kr=He-yr;if(kr>=16){Br=kr>>4;for(var qr=1;qr<=Br;++qr)At(Et);kr&=15}tt=32767+$[He],At(at[(kr<<4)+Q[tt]]),At(U[tt]),He++}return fr!=63&&At(wt),De}function Ue(ie){ie=Math.min(Math.max(ie,1),100),f!=ie&&((function(Ee){for(var De=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ye=0;Ye<64;Ye++){var at=m((De[Ye]*Ee+50)/100);at=Math.min(Math.max(at,1),255),a[Ze[Ye]]=at}for(var tt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],wt=0;wt<64;wt++){var Et=m((tt[wt]*Ee+50)/100);Et=Math.min(Math.max(Et,1),255),x[Ze[wt]]=Et}for(var Pt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Wt=0,lr=0;lr<8;lr++)for(var fr=0;fr<8;fr++)S[Wt]=1/(a[Ze[Wt]]*Pt[lr]*Pt[fr]*8),I[Wt]=1/(x[Ze[Wt]]*Pt[lr]*Pt[fr]*8),Wt++})(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),f=ie)}this.encode=function(ie,Ee){Ee&&Ue(Ee),z=new Array,O=0,W=7,Ie(65496),Ie(65504),Ie(16),Ne(74),Ne(70),Ne(73),Ne(70),Ne(0),Ne(1),Ne(1),Ne(0),Ie(1),Ie(1),Ne(0),Ne(0),(function(){Ie(65499),Ie(132),Ne(0);for(var Qr=0;Qr<64;Qr++)Ne(a[Qr]);Ne(1);for(var Dr=0;Dr<64;Dr++)Ne(x[Dr])})(),(function(Qr,Dr){Ie(65472),Ie(17),Ne(8),Ie(Dr),Ie(Qr),Ne(3),Ne(1),Ne(17),Ne(0),Ne(2),Ne(17),Ne(1),Ne(3),Ne(17),Ne(1)})(ie.width,ie.height),(function(){Ie(65476),Ie(418),Ne(0);for(var Qr=0;Qr<16;Qr++)Ne(Qe[Qr+1]);for(var Dr=0;Dr<=11;Dr++)Ne(be[Dr]);Ne(16);for(var Qn=0;Qn<16;Qn++)Ne(Ge[Qn+1]);for(var un=0;un<=161;un++)Ne(le[un]);Ne(1);for(var ft=0;ft<16;ft++)Ne(ge[ft+1]);for(var he=0;he<=11;he++)Ne(Pe[he]);Ne(17);for(var fe=0;fe<16;fe++)Ne(Fe[fe+1]);for(var ye=0;ye<=161;ye++)Ne(pt[ye])})(),Ie(65498),Ie(12),Ne(3),Ne(1),Ne(0),Ne(2),Ne(17),Ne(3),Ne(17),Ne(0),Ne(63),Ne(0);var De=0,Ye=0,at=0;O=0,W=7,this.encode.displayName="_encode_";for(var tt,wt,Et,Pt,Wt,lr,fr,Br,He,yr=ie.data,kr=ie.width,qr=ie.height,or=4*kr,$r=0;$r<qr;){for(tt=0;tt<or;){for(Wt=or*$r+tt,fr=-1,Br=0,He=0;He<64;He++)lr=Wt+(Br=He>>3)*or+(fr=4*(7&He)),$r+Br>=qr&&(lr-=or*($r+1+Br-qr)),tt+fr>=or&&(lr-=tt+fr-or+4),wt=yr[lr++],Et=yr[lr++],Pt=yr[lr++],ne[He]=(ze[wt]+ze[Et+256|0]+ze[Pt+512|0]>>16)-128,ce[He]=(ze[wt+768|0]+ze[Et+1024|0]+ze[Pt+1280|0]>>16)-128,de[He]=(ze[wt+1280|0]+ze[Et+1536|0]+ze[Pt+1792|0]>>16)-128;De=yt(ne,S,De,n,l),Ye=yt(ce,I,Ye,i,h),at=yt(de,I,at,i,h),tt+=32}$r+=8}if(W>=0){var Sr=[];Sr[1]=W+1,Sr[0]=(1<<W+1)-1,At(Sr)}return Ie(65497),new Uint8Array(z)},e=e||50,(function(){for(var ie=String.fromCharCode,Ee=0;Ee<256;Ee++)Se[Ee]=ie(Ee)})(),n=ut(Qe,be),i=ut(ge,Pe),l=ut(Ge,le),h=ut(Fe,pt),(function(){for(var ie=1,Ee=2,De=1;De<=15;De++){for(var Ye=ie;Ye<Ee;Ye++)Q[32767+Ye]=De,U[32767+Ye]=[],U[32767+Ye][1]=De,U[32767+Ye][0]=Ye;for(var at=-(Ee-1);at<=-ie;at++)Q[32767+at]=De,U[32767+at]=[],U[32767+at][1]=De,U[32767+at][0]=Ee-1+at;ie<<=1,Ee<<=1}})(),(function(){for(var ie=0;ie<256;ie++)ze[ie]=19595*ie,ze[ie+256|0]=38470*ie,ze[ie+512|0]=7471*ie+32768,ze[ie+768|0]=-11059*ie,ze[ie+1024|0]=-21709*ie,ze[ie+1280|0]=32768*ie+8421375,ze[ie+1536|0]=-27439*ie,ze[ie+1792|0]=-5329*ie})(),Ue(e)}function _u(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function p5(e){function n(be){if(!be)throw Error("assert :P")}function i(be,Ge,le){for(var ge=0;4>ge;ge++)if(be[Ge+ge]!=le.charCodeAt(ge))return!0;return!1}function l(be,Ge,le,ge,Pe){for(var Fe=0;Fe<Pe;Fe++)be[Ge+Fe]=le[ge+Fe]}function h(be,Ge,le,ge){for(var Pe=0;Pe<ge;Pe++)be[Ge+Pe]=le}function f(be){return new Int32Array(be)}function m(be,Ge){for(var le=[],ge=0;ge<be;ge++)le.push(new Ge);return le}function a(be,Ge){var le=[];return(function ge(Pe,Fe,pt){for(var ut=pt[Fe],At=0;At<ut&&(Pe.push(pt.length>Fe+1?[]:new Ge),!(pt.length<Fe+1));At++)ge(Pe[At],Fe+1,pt)})(le,0,be),le}var x=function(){var be=this;function Ge(T,D){for(var q=1<<D-1>>>0;T&q;)q>>>=1;return q?(T&q-1)+q:T}function le(T,D,q,ee,pe){n(!(ee%q));do T[D+(ee-=q)]=pe;while(0<ee)}function ge(T,D,q,ee,pe){if(n(2328>=pe),512>=pe)var _e=f(512);else if((_e=f(pe))==null)return 0;return(function(Be,Te,ke,Ve,qe,Mt){var Xe,bt,It=Te,$t=1<<ke,kt=f(16),Gt=f(16);for(n(qe!=0),n(Ve!=null),n(Be!=null),n(0<ke),bt=0;bt<qe;++bt){if(15<Ve[bt])return 0;++kt[Ve[bt]]}if(kt[0]==qe)return 0;for(Gt[1]=0,Xe=1;15>Xe;++Xe){if(kt[Xe]>1<<Xe)return 0;Gt[Xe+1]=Gt[Xe]+kt[Xe]}for(bt=0;bt<qe;++bt)Xe=Ve[bt],0<Ve[bt]&&(Mt[Gt[Xe]++]=bt);if(Gt[15]==1)return(Ve=new Pe).g=0,Ve.value=Mt[0],le(Be,It,1,$t,Ve),$t;var qt,er=-1,Jt=$t-1,nn=0,Or=1,Bn=1,Wr=1<<ke;for(bt=0,Xe=1,qe=2;Xe<=ke;++Xe,qe<<=1){if(Or+=Bn<<=1,0>(Bn-=kt[Xe]))return 0;for(;0<kt[Xe];--kt[Xe])(Ve=new Pe).g=Xe,Ve.value=Mt[bt++],le(Be,It+nn,qe,Wr,Ve),nn=Ge(nn,Xe)}for(Xe=ke+1,qe=2;15>=Xe;++Xe,qe<<=1){if(Or+=Bn<<=1,0>(Bn-=kt[Xe]))return 0;for(;0<kt[Xe];--kt[Xe]){if(Ve=new Pe,(nn&Jt)!=er){for(It+=Wr,qt=1<<(er=Xe)-ke;15>er&&!(0>=(qt-=kt[er]));)++er,qt<<=1;$t+=Wr=1<<(qt=er-ke),Be[Te+(er=nn&Jt)].g=qt+ke,Be[Te+er].value=It-Te-er}Ve.g=Xe-ke,Ve.value=Mt[bt++],le(Be,It+(nn>>ke),qe,Wr,Ve),nn=Ge(nn,Xe)}}return Or!=2*Gt[15]-1?0:$t})(T,D,q,ee,pe,_e)}function Pe(){this.value=this.g=0}function Fe(){this.value=this.g=0}function pt(){this.G=m(5,Pe),this.H=f(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=m(qs,Fe)}function ut(T,D,q,ee){n(T!=null),n(D!=null),n(2147483648>ee),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=D,T.pa=q,T.Jd=D,T.Yc=q+ee,T.Zc=4<=ee?q+ee-4+1:q,wt(T)}function At(T,D){for(var q=0;0<D--;)q|=Pt(T,128)<<D;return q}function Ne(T,D){var q=At(T,D);return Et(T)?-q:q}function Ie(T,D,q,ee){var pe,_e=0;for(n(T!=null),n(D!=null),n(4294967288>ee),T.Sb=ee,T.Ra=0,T.u=0,T.h=0,4<ee&&(ee=4),pe=0;pe<ee;++pe)_e+=D[q+pe]<<8*pe;T.Ra=_e,T.bb=ee,T.oa=D,T.pa=q}function yt(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<pa-8>>>0,++T.bb,T.u-=8;Ye(T)&&(T.h=1,T.u=0)}function Ue(T,D){if(n(0<=D),!T.h&&D<=bo){var q=De(T)&Go[D];return T.u+=D,yt(T),q}return T.h=1,T.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function De(T){return T.Ra>>>(T.u&pa-1)>>>0}function Ye(T){return n(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>pa}function at(T,D){T.u=D,T.h=Ye(T)}function tt(T){T.u>=ul&&(n(T.u>=ul),yt(T))}function wt(T){n(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(n(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function Et(T){return At(T,1)}function Pt(T,D){var q=T.Ca;0>T.b&&wt(T);var ee=T.b,pe=q*D>>>8,_e=(T.I>>>ee>pe)+0;for(_e?(q-=pe,T.I-=pe+1<<ee>>>0):q=pe+1,ee=q,pe=0;256<=ee;)pe+=8,ee>>=8;return ee=7^pe+Pa[ee],T.b-=ee,T.Ca=(q<<ee)-1,_e}function Wt(T,D,q){T[D+0]=q>>24&255,T[D+1]=q>>16&255,T[D+2]=q>>8&255,T[D+3]=255&q}function lr(T,D){return T[D+0]|T[D+1]<<8}function fr(T,D){return lr(T,D)|T[D+2]<<16}function Br(T,D){return lr(T,D)|lr(T,D+2)<<16}function He(T,D){var q=1<<D;return n(T!=null),n(0<D),T.X=f(q),T.X==null?0:(T.Mb=32-D,T.Xa=D,1)}function yr(T,D){n(T!=null),n(D!=null),n(T.Xa==D.Xa),l(D.X,0,T.X,0,1<<D.Xa)}function kr(){this.X=[],this.Xa=this.Mb=0}function qr(T,D,q,ee){n(q!=null),n(ee!=null);var pe=q[0],_e=ee[0];return pe==0&&(pe=(T*_e+D/2)/D),_e==0&&(_e=(D*pe+T/2)/T),0>=pe||0>=_e?0:(q[0]=pe,ee[0]=_e,1)}function or(T,D){return T+(1<<D)-1>>>D}function $r(T,D){return((4278255360&T)+(4278255360&D)>>>0&4278255360)+((16711935&T)+(16711935&D)>>>0&16711935)>>>0}function Sr(T,D){be[D]=function(q,ee,pe,_e,Be,Te,ke){var Ve;for(Ve=0;Ve<Be;++Ve){var qe=be[T](Te[ke+Ve-1],pe,_e+Ve);Te[ke+Ve]=$r(q[ee+Ve],qe)}}}function Qr(){this.ud=this.hd=this.jd=0}function Dr(T,D){return((4278124286&(T^D))>>>1)+(T&D)>>>0}function Qn(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function un(T,D){return Qn(T+(T-D+.5>>1))}function ft(T,D,q){return Math.abs(D-q)-Math.abs(T-q)}function he(T,D,q,ee,pe,_e,Be){for(ee=_e[Be-1],q=0;q<pe;++q)_e[Be+q]=ee=$r(T[D+q],ee)}function fe(T,D,q,ee,pe){var _e;for(_e=0;_e<q;++_e){var Be=T[D+_e],Te=Be>>8&255,ke=16711935&(ke=(ke=16711935&Be)+((Te<<16)+Te));ee[pe+_e]=(4278255360&Be)+ke>>>0}}function ye(T,D){D.jd=255&T,D.hd=T>>8&255,D.ud=T>>16&255}function Ke(T,D,q,ee,pe,_e){var Be;for(Be=0;Be<ee;++Be){var Te=D[q+Be],ke=Te>>>8,Ve=Te,qe=255&(qe=(qe=Te>>>16)+((T.jd<<24>>24)*(ke<<24>>24)>>>5));Ve=255&(Ve=(Ve+=(T.hd<<24>>24)*(ke<<24>>24)>>>5)+((T.ud<<24>>24)*(qe<<24>>24)>>>5)),pe[_e+Be]=(4278255360&Te)+(qe<<16)+Ve}}function $e(T,D,q,ee,pe){be[D]=function(_e,Be,Te,ke,Ve,qe,Mt,Xe,bt){for(ke=Mt;ke<Xe;++ke)for(Mt=0;Mt<bt;++Mt)Ve[qe++]=pe(Te[ee(_e[Be++])])},be[T]=function(_e,Be,Te,ke,Ve,qe,Mt){var Xe=8>>_e.b,bt=_e.Ea,It=_e.K[0],$t=_e.w;if(8>Xe)for(_e=(1<<_e.b)-1,$t=(1<<Xe)-1;Be<Te;++Be){var kt,Gt=0;for(kt=0;kt<bt;++kt)kt&_e||(Gt=ee(ke[Ve++])),qe[Mt++]=pe(It[Gt&$t]),Gt>>=Xe}else be["VP8LMapColor"+q](ke,Ve,It,$t,qe,Mt,Be,Te,bt)}}function Bt(T,D,q,ee,pe){for(q=D+q;D<q;){var _e=T[D++];ee[pe++]=_e>>16&255,ee[pe++]=_e>>8&255,ee[pe++]=255&_e}}function gt(T,D,q,ee,pe){for(q=D+q;D<q;){var _e=T[D++];ee[pe++]=_e>>16&255,ee[pe++]=_e>>8&255,ee[pe++]=255&_e,ee[pe++]=_e>>24&255}}function st(T,D,q,ee,pe){for(q=D+q;D<q;){var _e=(Be=T[D++])>>16&240|Be>>12&15,Be=240&Be|Be>>28&15;ee[pe++]=_e,ee[pe++]=Be}}function xt(T,D,q,ee,pe){for(q=D+q;D<q;){var _e=(Be=T[D++])>>16&248|Be>>13&7,Be=Be>>5&224|Be>>3&31;ee[pe++]=_e,ee[pe++]=Be}}function zt(T,D,q,ee,pe){for(q=D+q;D<q;){var _e=T[D++];ee[pe++]=255&_e,ee[pe++]=_e>>8&255,ee[pe++]=_e>>16&255}}function St(T,D,q,ee,pe,_e){if(_e==0)for(q=D+q;D<q;)Wt(ee,((_e=T[D++])[0]>>24|_e[1]>>8&65280|_e[2]<<8&16711680|_e[3]<<24)>>>0),pe+=32;else l(ee,pe,T,D,q)}function ar(T,D){be[D][0]=be[T+"0"],be[D][1]=be[T+"1"],be[D][2]=be[T+"2"],be[D][3]=be[T+"3"],be[D][4]=be[T+"4"],be[D][5]=be[T+"5"],be[D][6]=be[T+"6"],be[D][7]=be[T+"7"],be[D][8]=be[T+"8"],be[D][9]=be[T+"9"],be[D][10]=be[T+"10"],be[D][11]=be[T+"11"],be[D][12]=be[T+"12"],be[D][13]=be[T+"13"],be[D][14]=be[T+"0"],be[D][15]=be[T+"0"]}function Yt(T){return T==MA||T==ac||T==Ul||T==Uc}function hr(){this.eb=[],this.size=this.A=this.fb=0}function tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ir(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new hr,this.f.kb=new tn,this.sd=null}function dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function en(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Rr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function pr(T,D){var q=T.T,ee=D.ba.f.RGBA,pe=ee.eb,_e=ee.fb+T.ka*ee.A,Be=$s[D.ba.S],Te=T.y,ke=T.O,Ve=T.f,qe=T.N,Mt=T.ea,Xe=T.W,bt=D.cc,It=D.dc,$t=D.Mc,kt=D.Nc,Gt=T.ka,qt=T.ka+T.T,er=T.U,Jt=er+1>>1;for(Gt==0?Be(Te,ke,null,null,Ve,qe,Mt,Xe,Ve,qe,Mt,Xe,pe,_e,null,null,er):(Be(D.ec,D.fc,Te,ke,bt,It,$t,kt,Ve,qe,Mt,Xe,pe,_e-ee.A,pe,_e,er),++q);Gt+2<qt;Gt+=2)bt=Ve,It=qe,$t=Mt,kt=Xe,qe+=T.Rc,Xe+=T.Rc,_e+=2*ee.A,Be(Te,(ke+=2*T.fa)-T.fa,Te,ke,bt,It,$t,kt,Ve,qe,Mt,Xe,pe,_e-ee.A,pe,_e,er);return ke+=T.fa,T.j+qt<T.o?(l(D.ec,D.fc,Te,ke,er),l(D.cc,D.dc,Ve,qe,Jt),l(D.Mc,D.Nc,Mt,Xe,Jt),q--):1&qt||Be(Te,ke,null,null,Ve,qe,Mt,Xe,Ve,qe,Mt,Xe,pe,_e+ee.A,null,null,er),q}function Gr(T,D,q){var ee=T.F,pe=[T.J];if(ee!=null){var _e=T.U,Be=D.ba.S,Te=Be==nu||Be==Ul;D=D.ba.f.RGBA;var ke=[0],Ve=T.ka;ke[0]=T.T,T.Kb&&(Ve==0?--ke[0]:(--Ve,pe[0]-=T.width),T.j+T.ka+T.T==T.o&&(ke[0]=T.o-T.j-Ve));var qe=D.eb;Ve=D.fb+Ve*D.A,T=pl(ee,pe[0],T.width,_e,ke,qe,Ve+(Te?0:3),D.A),n(q==ke),T&&Yt(Be)&&Lc(qe,Ve,Te,_e,ke,D.A)}return 0}function Un(T){var D=T.ma,q=D.ba.S,ee=11>q,pe=q==kc||q==oc||q==nu||q==Fi||q==12||Yt(q);if(D.memory=null,D.Ib=null,D.Jb=null,D.Nd=null,!nA(D.Oa,T,pe?11:12))return 0;if(pe&&Yt(q)&&Fa(),T.da)alert("todo:use_scaling");else{if(ee){if(D.Ib=Rr,T.Kb){if(q=T.U+1>>1,D.memory=f(T.U+2*q),D.memory==null)return 0;D.ec=D.memory,D.fc=0,D.cc=D.ec,D.dc=D.fc+T.U,D.Mc=D.cc,D.Nc=D.dc+q,D.Ib=pr,Fa()}}else alert("todo:EmitYUV");pe&&(D.Jb=Gr,ee&&ha())}if(ee&&!Ds){for(T=0;256>T;++T)Ws[T]=89858*(T-128)+Ra>>Dl,po[T]=-22014*(T-128)+Ra,Oc[T]=-45773*(T-128),Qc[T]=113618*(T-128)+Ra>>Dl;for(T=ai;T<Zn;++T)D=76283*(T-16)+Ra>>Dl,lu[T-ai]=hs(D,255),Du[T-ai]=hs(D+8>>4,15);Ds=1}return 1}function _r(T){var D=T.ma,q=T.U,ee=T.T;return n(!(1&T.ka)),0>=q||0>=ee?0:(q=D.Ib(T,D),D.Jb!=null&&D.Jb(T,D,q),D.Dc+=q,1)}function In(T){T.ma.memory=null}function bn(T,D,q,ee){return Ue(T,8)!=47?0:(D[0]=Ue(T,14)+1,q[0]=Ue(T,14)+1,ee[0]=Ue(T,1),Ue(T,3)!=0?0:!T.h)}function wn(T,D){if(4>T)return T+1;var q=T-2>>1;return(2+(1&T)<<q)+Ue(D,q)+1}function Ui(T,D){return 120<D?D-120:1<=(q=((q=lA[D-1])>>4)*T+(8-(15&q)))?q:1;var q}function oi(T,D,q){var ee=De(q),pe=T[D+=255&ee].g-8;return 0<pe&&(at(q,q.u+8),ee=De(q),D+=T[D].value,D+=ee&(1<<pe)-1),at(q,q.u+T[D].g),T[D].value}function Xt(T,D,q){return q.g+=T.g,q.value+=T.value<<D>>>0,n(8>=q.g),T.g}function Wn(T,D,q){var ee=T.xc;return n((D=ee==0?0:T.vc[T.md*(q>>ee)+(D>>ee)])<T.Wb),T.Ya[D]}function qi(T,D,q,ee){var pe=T.ab,_e=T.c*D,Be=T.C;D=Be+D;var Te=q,ke=ee;for(ee=T.Ta,q=T.Ua;0<pe--;){var Ve=T.gc[pe],qe=Be,Mt=D,Xe=Te,bt=ke,It=(ke=ee,Te=q,Ve.Ea);switch(n(qe<Mt),n(Mt<=Ve.nc),Ve.hc){case 2:is(Xe,bt,(Mt-qe)*It,ke,Te);break;case 0:var $t=qe,kt=Mt,Gt=ke,qt=Te,er=(Wr=Ve).Ea;$t==0&&(rc(Xe,bt,null,null,1,Gt,qt),he(Xe,bt+1,0,0,er-1,Gt,qt+1),bt+=er,qt+=er,++$t);for(var Jt=1<<Wr.b,nn=Jt-1,Or=or(er,Wr.b),Bn=Wr.K,Wr=Wr.w+($t>>Wr.b)*Or;$t<kt;){var Nn=Bn,Ri=Wr,Sn=1;for(Tl(Xe,bt,Gt,qt-er,1,Gt,qt);Sn<er;){var zr=(Sn&~nn)+Jt;zr>er&&(zr=er),(0,Pl[Nn[Ri++]>>8&15])(Xe,bt+ +Sn,Gt,qt+Sn-er,zr-Sn,Gt,qt+Sn),Sn=zr}bt+=er,qt+=er,++$t&nn||(Wr+=Or)}Mt!=Ve.nc&&l(ke,Te-It,ke,Te+(Mt-qe-1)*It,It);break;case 1:for(It=Xe,kt=bt,er=(Xe=Ve.Ea)-(qt=Xe&~(Gt=(bt=1<<Ve.b)-1)),$t=or(Xe,Ve.b),Jt=Ve.K,Ve=Ve.w+(qe>>Ve.b)*$t;qe<Mt;){for(nn=Jt,Or=Ve,Bn=new Qr,Wr=kt+qt,Nn=kt+Xe;kt<Wr;)ye(nn[Or++],Bn),Ao(Bn,It,kt,bt,ke,Te),kt+=bt,Te+=bt;kt<Nn&&(ye(nn[Or++],Bn),Ao(Bn,It,kt,er,ke,Te),kt+=er,Te+=er),++qe&Gt||(Ve+=$t)}break;case 3:if(Xe==ke&&bt==Te&&0<Ve.b){for(kt=ke,Xe=It=Te+(Mt-qe)*It-(qt=(Mt-qe)*or(Ve.Ea,Ve.b)),bt=ke,Gt=Te,$t=[],qt=(er=qt)-1;0<=qt;--qt)$t[qt]=bt[Gt+qt];for(qt=er-1;0<=qt;--qt)kt[Xe+qt]=$t[qt];hl(Ve,qe,Mt,ke,It,ke,Te)}else hl(Ve,qe,Mt,Xe,bt,ke,Te)}Te=ee,ke=q}ke!=q&&l(ee,q,Te,ke,_e)}function rl(T,D){var q=T.V,ee=T.Ba+T.c*T.C,pe=D-T.C;if(n(D<=T.l.o),n(16>=pe),0<pe){var _e=T.l,Be=T.Ta,Te=T.Ua,ke=_e.width;if(qi(T,pe,q,ee),pe=Te=[Te],n((q=T.C)<(ee=D)),n(_e.v<_e.va),ee>_e.o&&(ee=_e.o),q<_e.j){var Ve=_e.j-q;q=_e.j,pe[0]+=Ve*ke}if(q>=ee?q=0:(pe[0]+=4*_e.v,_e.ka=q-_e.j,_e.U=_e.va-_e.v,_e.T=ee-q,q=1),q){if(Te=Te[0],11>(q=T.ca).S){var qe=q.f.RGBA,Mt=(ee=q.S,pe=_e.U,_e=_e.T,Ve=qe.eb,qe.A),Xe=_e;for(qe=qe.fb+T.Ma*qe.A;0<Xe--;){var bt=Be,It=Te,$t=pe,kt=Ve,Gt=qe;switch(ee){case aA:nc(bt,It,$t,kt,Gt);break;case kc:dl(bt,It,$t,kt,Gt);break;case MA:dl(bt,It,$t,kt,Gt),Lc(kt,Gt,0,$t,1,0);break;case sh:kl(bt,It,$t,kt,Gt);break;case oc:St(bt,It,$t,kt,Gt,1);break;case ac:St(bt,It,$t,kt,Gt,1),Lc(kt,Gt,0,$t,1,0);break;case nu:St(bt,It,$t,kt,Gt,0);break;case Ul:St(bt,It,$t,kt,Gt,0),Lc(kt,Gt,1,$t,1,0);break;case Fi:Ll(bt,It,$t,kt,Gt);break;case Uc:Ll(bt,It,$t,kt,Gt),ru(kt,Gt,$t,1,0);break;case iu:Ml(bt,It,$t,kt,Gt);break;default:n(0)}Te+=ke,qe+=Mt}T.Ma+=_e}else alert("todo:EmitRescaledRowsYUVA");n(T.Ma<=q.height)}}T.C=D,n(T.C<=T.i)}function rs(T){var D;if(0<T.ua)return 0;for(D=0;D<T.Wb;++D){var q=T.Ya[D].G,ee=T.Ya[D].H;if(0<q[1][ee[1]+0].g||0<q[2][ee[2]+0].g||0<q[3][ee[3]+0].g)return 0}return 1}function dr(T,D,q,ee,pe,_e){if(T.Z!=0){var Be=T.qd,Te=T.rd;for(n(Us[T.Z]!=null);D<q;++D)Us[T.Z](Be,Te,ee,pe,ee,pe,_e),Be=ee,Te=pe,pe+=_e;T.qd=Be,T.rd=Te}}function rn(T,D){var q=T.l.ma,ee=q.Z==0||q.Z==1?T.l.j:T.C;if(ee=T.C<ee?ee:T.C,n(D<=T.l.o),D>ee){var pe=T.l.width,_e=q.ca,Be=q.tb+pe*ee,Te=T.V,ke=T.Ba+T.c*ee,Ve=T.gc;n(T.ab==1),n(Ve[0].hc==3),ma(Ve[0],ee,D,Te,ke,_e,Be),dr(q,ee,D,_e,Be,pe)}T.C=T.Ma=D}function An(T,D,q,ee,pe,_e,Be){var Te=T.$/ee,ke=T.$%ee,Ve=T.m,qe=T.s,Mt=q+T.$,Xe=Mt;pe=q+ee*pe;var bt=q+ee*_e,It=280+qe.ua,$t=T.Pb?Te:16777216,kt=0<qe.ua?qe.Wa:null,Gt=qe.wc,qt=Mt<bt?Wn(qe,ke,Te):null;n(T.C<_e),n(bt<=pe);var er=!1;e:for(;;){for(;er||Mt<bt;){var Jt=0;if(Te>=$t){var nn=Mt-q;n(($t=T).Pb),$t.wd=$t.m,$t.xd=nn,0<$t.s.ua&&yr($t.s.Wa,$t.s.vb),$t=Te+UA}if(ke&Gt||(qt=Wn(qe,ke,Te)),n(qt!=null),qt.Qb&&(D[Mt]=qt.qb,er=!0),!er)if(tt(Ve),qt.jc){Jt=Ve,nn=D;var Or=Mt,Bn=qt.pd[De(Jt)&qs-1];n(qt.jc),256>Bn.g?(at(Jt,Jt.u+Bn.g),nn[Or]=Bn.value,Jt=0):(at(Jt,Jt.u+Bn.g-256),n(256<=Bn.value),Jt=Bn.value),Jt==0&&(er=!0)}else Jt=oi(qt.G[0],qt.H[0],Ve);if(Ve.h)break;if(er||256>Jt){if(!er)if(qt.nd)D[Mt]=(qt.qb|Jt<<8)>>>0;else{if(tt(Ve),er=oi(qt.G[1],qt.H[1],Ve),tt(Ve),nn=oi(qt.G[2],qt.H[2],Ve),Or=oi(qt.G[3],qt.H[3],Ve),Ve.h)break;D[Mt]=(Or<<24|er<<16|Jt<<8|nn)>>>0}if(er=!1,++Mt,++ke>=ee&&(ke=0,++Te,Be!=null&&Te<=_e&&!(Te%16)&&Be(T,Te),kt!=null))for(;Xe<Mt;)Jt=D[Xe++],kt.X[(506832829*Jt&4294967295)>>>kt.Mb]=Jt}else if(280>Jt){if(Jt=wn(Jt-256,Ve),nn=oi(qt.G[4],qt.H[4],Ve),tt(Ve),nn=Ui(ee,nn=wn(nn,Ve)),Ve.h)break;if(Mt-q<nn||pe-Mt<Jt)break e;for(Or=0;Or<Jt;++Or)D[Mt+Or]=D[Mt+Or-nn];for(Mt+=Jt,ke+=Jt;ke>=ee;)ke-=ee,++Te,Be!=null&&Te<=_e&&!(Te%16)&&Be(T,Te);if(n(Mt<=pe),ke&Gt&&(qt=Wn(qe,ke,Te)),kt!=null)for(;Xe<Mt;)Jt=D[Xe++],kt.X[(506832829*Jt&4294967295)>>>kt.Mb]=Jt}else{if(!(Jt<It))break e;for(er=Jt-280,n(kt!=null);Xe<Mt;)Jt=D[Xe++],kt.X[(506832829*Jt&4294967295)>>>kt.Mb]=Jt;Jt=Mt,n(!(er>>>(nn=kt).Xa)),D[Jt]=nn.X[er],er=!0}er||n(Ve.h==Ye(Ve))}if(T.Pb&&Ve.h&&Mt<pe)n(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&yr(T.s.vb,T.s.Wa);else{if(Ve.h)break e;Be?.(T,Te>_e?_e:Te),T.a=0,T.$=Mt-q}return 1}return T.a=3,0}function Di(T){n(T!=null),T.vc=null,T.yc=null,T.Ya=null;var D=T.Wa;D!=null&&(D.X=null),T.vb=null,n(T!=null)}function xl(){var T=new mn;return T==null?null:(T.a=0,T.xb=ao,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),is=fe,Ao=Ke,nc=Bt,dl=gt,Ll=st,Ml=xt,kl=zt,be.VP8LMapColor32b=fl,be.VP8LMapColor8b=Ec,T)}function Ls(T,D,q,ee,pe){var _e=1,Be=[T],Te=[D],ke=ee.m,Ve=ee.s,qe=null,Mt=0;e:for(;;){if(q)for(;_e&&Ue(ke,1);){var Xe=Be,bt=Te,It=ee,$t=1,kt=It.m,Gt=It.gc[It.ab],qt=Ue(kt,2);if(It.Oc&1<<qt)_e=0;else{switch(It.Oc|=1<<qt,Gt.hc=qt,Gt.Ea=Xe[0],Gt.nc=bt[0],Gt.K=[null],++It.ab,n(4>=It.ab),qt){case 0:case 1:Gt.b=Ue(kt,3)+2,$t=Ls(or(Gt.Ea,Gt.b),or(Gt.nc,Gt.b),0,It,Gt.K),Gt.K=Gt.K[0];break;case 3:var er,Jt=Ue(kt,8)+1,nn=16<Jt?0:4<Jt?1:2<Jt?2:3;if(Xe[0]=or(Gt.Ea,nn),Gt.b=nn,er=$t=Ls(Jt,1,0,It,Gt.K)){var Or,Bn=Jt,Wr=Gt,Nn=1<<(8>>Wr.b),Ri=f(Nn);if(Ri==null)er=0;else{var Sn=Wr.K[0],zr=Wr.w;for(Ri[0]=Wr.K[0][0],Or=1;Or<1*Bn;++Or)Ri[Or]=$r(Sn[zr+Or],Ri[Or-1]);for(;Or<4*Nn;++Or)Ri[Or]=0;Wr.K[0]=null,Wr.K[0]=Ri,er=1}}$t=er;break;case 2:break;default:n(0)}_e=$t}}if(Be=Be[0],Te=Te[0],_e&&Ue(ke,1)&&!(_e=1<=(Mt=Ue(ke,4))&&11>=Mt)){ee.a=3;break e}var Er;if(Er=_e)t:{var di,Lr,On,pi=ee,os=Be,as=Te,Ni=Mt,xs=q,bs=pi.m,Qi=pi.s,En=[null],Xn=1,mr=0,wr=Rc[Ni];r:for(;;){if(xs&&Ue(bs,1)){var Ii=Ue(bs,3)+2,ji=or(os,Ii),Jn=or(as,Ii),li=ji*Jn;if(!Ls(ji,Jn,0,pi,En))break r;for(En=En[0],Qi.xc=Ii,di=0;di<li;++di){var Dn=En[di]>>8&65535;En[di]=Dn,Dn>=Xn&&(Xn=Dn+1)}}if(bs.h)break r;for(Lr=0;5>Lr;++Lr){var _i=lc[Lr];!Lr&&0<Ni&&(_i+=1<<Ni),mr<_i&&(mr=_i)}var Bs=m(Xn*wr,Pe),Zs=Xn,So=m(Zs,pt);if(So==null)var Mi=null;else n(65536>=Zs),Mi=So;var Fn=f(mr);if(Mi==null||Fn==null||Bs==null){pi.a=1;break r}var jn=Bs;for(di=On=0;di<Xn;++di){var wi=Mi[di],Cs=wi.G,Eo=wi.H,Xs=0,Ss=1,Yi=0;for(Lr=0;5>Lr;++Lr){_i=lc[Lr],Cs[Lr]=jn,Eo[Lr]=On,!Lr&&0<Ni&&(_i+=1<<Ni);i:{var Qa,Oa=_i,zc=pi,za=Fn,Nl=jn,OA=On,mi=0,qo=zc.m,hA=Ue(qo,1);if(h(za,0,0,Oa),hA){var cu=Ue(qo,1)+1,Ql=Ue(qo,1),Ol=Ue(qo,Ql==0?1:8);za[Ol]=1,cu==2&&(za[Ol=Ue(qo,8)]=1);var Ha=1}else{var xi=f(19),ki=Ue(qo,4)+4;if(19<ki){zc.a=3;var Ji=0;break i}for(Qa=0;Qa<ki;++Qa)xi[Lu[Qa]]=Ue(qo,3);var Hc=void 0,ja=void 0,jc=zc,w=xi,r=Oa,c=za,d=0,y=jc.m,b=8,E=m(128,Pe);n:for(;ge(E,0,7,w,19);){if(Ue(y,1)){var L=2+2*Ue(y,3);if((Hc=2+Ue(y,L))>r)break n}else Hc=r;for(ja=0;ja<r&&Hc--;){tt(y);var R=E[0+(127&De(y))];at(y,y.u+R.g);var H=R.value;if(16>H)c[ja++]=H,H!=0&&(b=H);else{var K=H==16,re=H-16,J=kA[re],Ae=Ue(y,Dc[re])+J;if(ja+Ae>r)break n;for(var ve=K?b:0;0<Ae--;)c[ja++]=ve}}d=1;break n}d||(jc.a=3),Ha=d}(Ha=Ha&&!qo.h)&&(mi=ge(Nl,OA,8,za,Oa)),Ha&&mi!=0?Ji=mi:(zc.a=3,Ji=0)}if(Ji==0)break r;if(Ss&&su[Lr]==1&&(Ss=jn[On].g==0),Xs+=jn[On].g,On+=Ji,3>=Lr){var Me,Oe=Fn[0];for(Me=1;Me<_i;++Me)Fn[Me]>Oe&&(Oe=Fn[Me]);Yi+=Oe}}if(wi.nd=Ss,wi.Qb=0,Ss&&(wi.qb=(Cs[3][Eo[3]+0].value<<24|Cs[1][Eo[1]+0].value<<16|Cs[2][Eo[2]+0].value)>>>0,Xs==0&&256>Cs[0][Eo[0]+0].value&&(wi.Qb=1,wi.qb+=Cs[0][Eo[0]+0].value<<8)),wi.jc=!wi.Qb&&6>Yi,wi.jc){var Re,je=wi;for(Re=0;Re<qs;++Re){var it=Re,We=je.pd[it],ot=je.G[0][je.H[0]+it];256<=ot.value?(We.g=ot.g+256,We.value=ot.value):(We.g=0,We.value=0,it>>=Xt(ot,8,We),it>>=Xt(je.G[1][je.H[1]+it],16,We),it>>=Xt(je.G[2][je.H[2]+it],0,We),Xt(je.G[3][je.H[3]+it],24,We))}}}Qi.vc=En,Qi.Wb=Xn,Qi.Ya=Mi,Qi.yc=Bs,Er=1;break t}Er=0}if(!(_e=Er)){ee.a=3;break e}if(0<Mt){if(Ve.ua=1<<Mt,!He(Ve.Wa,Mt)){ee.a=1,_e=0;break e}}else Ve.ua=0;var ht=ee,rt=Be,vt=Te,Ut=ht.s,Tt=Ut.xc;if(ht.c=rt,ht.i=vt,Ut.md=or(rt,Tt),Ut.wc=Tt==0?-1:(1<<Tt)-1,q){ee.xb=fo;break e}if((qe=f(Be*Te))==null){ee.a=1,_e=0;break e}_e=(_e=An(ee,qe,0,Be,Te,Te,null))&&!ke.h;break e}return _e?(pe!=null?pe[0]=qe:(n(qe==null),n(q)),ee.$=0,q||Di(Ve)):Di(Ve),_e}function hn(T,D){var q=T.c*T.i,ee=q+D+16*D;return n(T.c<=D),T.V=f(ee),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+q+D,1)}function nl(T,D){var q=T.C,ee=D-q,pe=T.V,_e=T.Ba+T.c*q;for(n(D<=T.l.o);0<ee;){var Be=16<ee?16:ee,Te=T.l.ma,ke=T.l.width,Ve=ke*Be,qe=Te.ca,Mt=Te.tb+ke*q,Xe=T.Ta,bt=T.Ua;qi(T,Be,pe,_e),TA(Xe,bt,qe,Mt,Ve),dr(Te,q,q+Be,qe,Mt,ke),ee-=Be,pe+=Be*T.c,q+=Be}n(q==D),T.C=T.Ma=D}function il(){this.ub=this.yd=this.td=this.Rb=0}function Zl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xc(){this.Fb=this.Bb=this.Cb=0,this.Zb=f(4),this.Lb=f(4)}function fi(){this.Yb=(function(){var T=[];return(function D(q,ee,pe){for(var _e=pe[ee],Be=0;Be<_e&&(q.push(pe.length>ee+1?[]:0),!(pe.length<ee+1));Be++)D(q[Be],ee+1,pe)})(T,0,[3,11]),T})()}function Xl(){this.jb=f(3),this.Wc=a([4,8],fi),this.Xc=a([4,17],fi)}function bl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new f(4),this.od=new f(4)}function Bi(){this.ld=this.La=this.dd=this.tc=0}function Hn(){this.Na=this.la=0}function Jc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function sl(){this.ad=f(384),this.Za=0,this.Ob=f(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ol(){this.uc=this.M=this.Nb=0,this.wa=Array(new Bi),this.Y=0,this.ya=Array(new sl),this.aa=0,this.l=new xa}function Ms(){this.y=f(16),this.f=f(8),this.ea=f(8)}function Uo(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new il,this.Kc=new Zl,this.ed=new bl,this.Qa=new xc,this.Ic=this.$c=this.Aa=0,this.D=new ol,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=m(8,ie),this.ia=0,this.pb=m(4,Jc),this.Pa=new Xl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ms),this.Hd=0,this.rb=Array(new Hn),this.sb=0,this.wa=Array(new Bi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new sl),this.L=this.aa=0,this.gd=a([4,2],Bi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function hs(T,D){return 0>T?0:T>D?D:T}function xa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function CA(){var T=new Uo;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,cA||(cA=Ro)),T}function Ln(T,D,q){return T.a==0&&(T.a=D,T.sc=q,T.cb=0),0}function bc(T,D,q){return 3<=q&&T[D+0]==157&&T[D+1]==1&&T[D+2]==42}function Do(T,D){if(T==null)return 0;if(T.a=0,T.sc="OK",D==null)return Ln(T,2,"null VP8Io passed to VP8GetHeaders()");var q=D.data,ee=D.w,pe=D.ha;if(4>pe)return Ln(T,7,"Truncated header.");var _e=q[ee+0]|q[ee+1]<<8|q[ee+2]<<16,Be=T.Od;if(Be.Rb=!(1&_e),Be.td=_e>>1&7,Be.yd=_e>>4&1,Be.ub=_e>>5,3<Be.td)return Ln(T,3,"Incorrect keyframe parameters.");if(!Be.yd)return Ln(T,4,"Frame not displayable.");ee+=3,pe-=3;var Te=T.Kc;if(Be.Rb){if(7>pe)return Ln(T,7,"cannot parse picture header");if(!bc(q,ee,pe))return Ln(T,3,"Bad code word");Te.c=16383&(q[ee+4]<<8|q[ee+3]),Te.Td=q[ee+4]>>6,Te.i=16383&(q[ee+6]<<8|q[ee+5]),Te.Ud=q[ee+6]>>6,ee+=7,pe-=7,T.za=Te.c+15>>4,T.Ub=Te.i+15>>4,D.width=Te.c,D.height=Te.i,D.Da=0,D.j=0,D.v=0,D.va=D.width,D.o=D.height,D.da=0,D.ib=D.width,D.hb=D.height,D.U=D.width,D.T=D.height,h((_e=T.Pa).jb,0,255,_e.jb.length),n((_e=T.Qa)!=null),_e.Cb=0,_e.Bb=0,_e.Fb=1,h(_e.Zb,0,0,_e.Zb.length),h(_e.Lb,0,0,_e.Lb)}if(Be.ub>pe)return Ln(T,7,"bad partition length");ut(_e=T.m,q,ee,Be.ub),ee+=Be.ub,pe-=Be.ub,Be.Rb&&(Te.Ld=Et(_e),Te.Kd=Et(_e)),Te=T.Qa;var ke,Ve=T.Pa;if(n(_e!=null),n(Te!=null),Te.Cb=Et(_e),Te.Cb){if(Te.Bb=Et(_e),Et(_e)){for(Te.Fb=Et(_e),ke=0;4>ke;++ke)Te.Zb[ke]=Et(_e)?Ne(_e,7):0;for(ke=0;4>ke;++ke)Te.Lb[ke]=Et(_e)?Ne(_e,6):0}if(Te.Bb)for(ke=0;3>ke;++ke)Ve.jb[ke]=Et(_e)?At(_e,8):255}else Te.Bb=0;if(_e.Ka)return Ln(T,3,"cannot parse segment header");if((Te=T.ed).zd=Et(_e),Te.Tb=At(_e,6),Te.wb=At(_e,3),Te.Pc=Et(_e),Te.Pc&&Et(_e)){for(Ve=0;4>Ve;++Ve)Et(_e)&&(Te.vd[Ve]=Ne(_e,6));for(Ve=0;4>Ve;++Ve)Et(_e)&&(Te.od[Ve]=Ne(_e,6))}if(T.L=Te.Tb==0?0:Te.zd?1:2,_e.Ka)return Ln(T,3,"cannot parse filter header");var qe=pe;if(pe=ke=ee,ee=ke+qe,Te=qe,T.Xb=(1<<At(T.m,2))-1,qe<3*(Ve=T.Xb))q=7;else{for(ke+=3*Ve,Te-=3*Ve,qe=0;qe<Ve;++qe){var Mt=q[pe+0]|q[pe+1]<<8|q[pe+2]<<16;Mt>Te&&(Mt=Te),ut(T.Jc[+qe],q,ke,Mt),ke+=Mt,Te-=Mt,pe+=3}ut(T.Jc[+Ve],q,ke,Te),q=ke<ee?0:5}if(q!=0)return Ln(T,q,"cannot parse partitions");for(q=At(ke=T.m,7),pe=Et(ke)?Ne(ke,4):0,ee=Et(ke)?Ne(ke,4):0,Te=Et(ke)?Ne(ke,4):0,Ve=Et(ke)?Ne(ke,4):0,ke=Et(ke)?Ne(ke,4):0,qe=T.Qa,Mt=0;4>Mt;++Mt){if(qe.Cb){var Xe=qe.Zb[Mt];qe.Fb||(Xe+=q)}else{if(0<Mt){T.pb[Mt]=T.pb[0];continue}Xe=q}var bt=T.pb[Mt];bt.Sc[0]=DA[hs(Xe+pe,127)],bt.Sc[1]=cc[hs(Xe+0,127)],bt.Eb[0]=2*DA[hs(Xe+ee,127)],bt.Eb[1]=101581*cc[hs(Xe+Te,127)]>>16,8>bt.Eb[1]&&(bt.Eb[1]=8),bt.Qc[0]=DA[hs(Xe+Ve,117)],bt.Qc[1]=cc[hs(Xe+ke,127)],bt.lc=Xe+ke}if(!Be.Rb)return Ln(T,4,"Not a key frame.");for(Et(_e),Be=T.Pa,q=0;4>q;++q){for(pe=0;8>pe;++pe)for(ee=0;3>ee;++ee)for(Te=0;11>Te;++Te)Ve=Pt(_e,au[q][pe][ee][Te])?At(_e,8):oh[q][pe][ee][Te],Be.Wc[q][pe].Yb[ee][Te]=Ve;for(pe=0;17>pe;++pe)Be.Xc[q][pe]=Be.Wc[q][RA[pe]]}return T.kc=Et(_e),T.kc&&(T.Bd=At(_e,8)),T.cb=1}function Ro(T,D,q,ee,pe,_e,Be){var Te=D[pe].Yb[q];for(q=0;16>pe;++pe){if(!Pt(T,Te[q+0]))return pe;for(;!Pt(T,Te[q+1]);)if(Te=D[++pe].Yb[0],q=0,pe==16)return 16;var ke=D[pe+1].Yb;if(Pt(T,Te[q+2])){var Ve=T,qe=0;if(Pt(Ve,(Xe=Te)[(Mt=q)+3]))if(Pt(Ve,Xe[Mt+6])){for(Te=0,Mt=2*(qe=Pt(Ve,Xe[Mt+8]))+(Xe=Pt(Ve,Xe[Mt+9+qe])),qe=0,Xe=Mu[Mt];Xe[Te];++Te)qe+=qe+Pt(Ve,Xe[Te]);qe+=3+(8<<Mt)}else Pt(Ve,Xe[Mt+7])?(qe=7+2*Pt(Ve,165),qe+=Pt(Ve,145)):qe=5+Pt(Ve,159);else qe=Pt(Ve,Xe[Mt+4])?3+Pt(Ve,Xe[Mt+5]):2;Te=ke[2]}else qe=1,Te=ke[1];ke=Be+AA[pe],0>(Ve=T).b&&wt(Ve);var Mt,Xe=Ve.b,bt=(Mt=Ve.Ca>>1)-(Ve.I>>Xe)>>31;--Ve.b,Ve.Ca+=bt,Ve.Ca|=1,Ve.I-=(Mt+1&bt)<<Xe,_e[ke]=((qe^bt)-bt)*ee[(0<pe)+0]}return 16}function Bc(T){var D=T.rb[T.sb-1];D.la=0,D.Na=0,h(T.zc,0,0,T.zc.length),T.ja=0}function oa(T,D,q,ee,pe){pe=T[D+q+32*ee]+(pe>>3),T[D+q+32*ee]=-256&pe?0>pe?0:255:pe}function ms(T,D,q,ee,pe,_e){oa(T,D,0,q,ee+pe),oa(T,D,1,q,ee+_e),oa(T,D,2,q,ee-_e),oa(T,D,3,q,ee-pe)}function No(T){return(20091*T>>16)+T}function eA(T,D,q,ee){var pe,_e=0,Be=f(16);for(pe=0;4>pe;++pe){var Te=T[D+0]+T[D+8],ke=T[D+0]-T[D+8],Ve=(35468*T[D+4]>>16)-No(T[D+12]),qe=No(T[D+4])+(35468*T[D+12]>>16);Be[_e+0]=Te+qe,Be[_e+1]=ke+Ve,Be[_e+2]=ke-Ve,Be[_e+3]=Te-qe,_e+=4,D++}for(pe=_e=0;4>pe;++pe)Te=(T=Be[_e+0]+4)+Be[_e+8],ke=T-Be[_e+8],Ve=(35468*Be[_e+4]>>16)-No(Be[_e+12]),oa(q,ee,0,0,Te+(qe=No(Be[_e+4])+(35468*Be[_e+12]>>16))),oa(q,ee,1,0,ke+Ve),oa(q,ee,2,0,ke-Ve),oa(q,ee,3,0,Te-qe),_e++,ee+=32}function tA(T,D,q,ee){var pe=T[D+0]+4,_e=35468*T[D+4]>>16,Be=No(T[D+4]),Te=35468*T[D+1]>>16;ms(q,ee,0,pe+Be,T=No(T[D+1]),Te),ms(q,ee,1,pe+_e,T,Te),ms(q,ee,2,pe-_e,T,Te),ms(q,ee,3,pe-Be,T,Te)}function Yl(T,D,q,ee,pe){eA(T,D,q,ee),pe&&eA(T,D+16,q,ee+4)}function ba(T,D,q,ee){ic(T,D+0,q,ee,1),ic(T,D+32,q,ee+128,1)}function SA(T,D,q,ee){var pe;for(T=T[D+0]+4,pe=0;4>pe;++pe)for(D=0;4>D;++D)oa(q,ee,D,pe,T)}function Gn(T,D,q,ee){T[D+0]&&ii(T,D+0,q,ee),T[D+16]&&ii(T,D+16,q,ee+4),T[D+32]&&ii(T,D+32,q,ee+128),T[D+48]&&ii(T,D+48,q,ee+128+4)}function Bl(T,D,q,ee){var pe,_e=f(16);for(pe=0;4>pe;++pe){var Be=T[D+0+pe]+T[D+12+pe],Te=T[D+4+pe]+T[D+8+pe],ke=T[D+4+pe]-T[D+8+pe],Ve=T[D+0+pe]-T[D+12+pe];_e[0+pe]=Be+Te,_e[8+pe]=Be-Te,_e[4+pe]=Ve+ke,_e[12+pe]=Ve-ke}for(pe=0;4>pe;++pe)Be=(T=_e[0+4*pe]+3)+_e[3+4*pe],Te=_e[1+4*pe]+_e[2+4*pe],ke=_e[1+4*pe]-_e[2+4*pe],Ve=T-_e[3+4*pe],q[ee+0]=Be+Te>>3,q[ee+16]=Ve+ke>>3,q[ee+32]=Be-Te>>3,q[ee+48]=Ve-ke>>3,ee+=64}function Jl(T,D,q){var ee,pe=D-32,_e=oo,Be=255-T[pe-1];for(ee=0;ee<q;++ee){var Te,ke=_e,Ve=Be+T[D-1];for(Te=0;Te<q;++Te)T[D+Te]=ke[Ve+T[pe+Te]];D+=32}}function Cl(T,D){Jl(T,D,4)}function EA(T,D){Jl(T,D,8)}function Cc(T,D){Jl(T,D,16)}function aa(T,D){var q;for(q=0;16>q;++q)l(T,D+32*q,T,D-32,16)}function al(T,D){var q;for(q=16;0<q;--q)h(T,D,T[D-1],16),D+=32}function on(T,D,q){var ee;for(ee=0;16>ee;++ee)h(D,q+32*ee,T,16)}function Ba(T,D){var q,ee=16;for(q=0;16>q;++q)ee+=T[D-1+32*q]+T[D+q-32];on(ee>>5,T,D)}function Qo(T,D){var q,ee=8;for(q=0;16>q;++q)ee+=T[D-1+32*q];on(ee>>4,T,D)}function Oo(T,D){var q,ee=8;for(q=0;16>q;++q)ee+=T[D+q-32];on(ee>>4,T,D)}function gs(T,D){on(128,T,D)}function Kr(T,D,q){return T+2*D+q+2>>2}function Yn(T,D){var q,ee=D-32;for(ee=new Uint8Array([Kr(T[ee-1],T[ee+0],T[ee+1]),Kr(T[ee+0],T[ee+1],T[ee+2]),Kr(T[ee+1],T[ee+2],T[ee+3]),Kr(T[ee+2],T[ee+3],T[ee+4])]),q=0;4>q;++q)l(T,D+32*q,ee,0,ee.length)}function ln(T,D){var q=T[D-1],ee=T[D-1+32],pe=T[D-1+64],_e=T[D-1+96];Wt(T,D+0,16843009*Kr(T[D-1-32],q,ee)),Wt(T,D+32,16843009*Kr(q,ee,pe)),Wt(T,D+64,16843009*Kr(ee,pe,_e)),Wt(T,D+96,16843009*Kr(pe,_e,_e))}function ni(T,D){var q,ee=4;for(q=0;4>q;++q)ee+=T[D+q-32]+T[D-1+32*q];for(ee>>=3,q=0;4>q;++q)h(T,D+32*q,ee,4)}function ys(T,D){var q=T[D-1+0],ee=T[D-1+32],pe=T[D-1+64],_e=T[D-1-32],Be=T[D+0-32],Te=T[D+1-32],ke=T[D+2-32],Ve=T[D+3-32];T[D+0+96]=Kr(ee,pe,T[D-1+96]),T[D+1+96]=T[D+0+64]=Kr(q,ee,pe),T[D+2+96]=T[D+1+64]=T[D+0+32]=Kr(_e,q,ee),T[D+3+96]=T[D+2+64]=T[D+1+32]=T[D+0+0]=Kr(Be,_e,q),T[D+3+64]=T[D+2+32]=T[D+1+0]=Kr(Te,Be,_e),T[D+3+32]=T[D+2+0]=Kr(ke,Te,Be),T[D+3+0]=Kr(Ve,ke,Te)}function $i(T,D){var q=T[D+1-32],ee=T[D+2-32],pe=T[D+3-32],_e=T[D+4-32],Be=T[D+5-32],Te=T[D+6-32],ke=T[D+7-32];T[D+0+0]=Kr(T[D+0-32],q,ee),T[D+1+0]=T[D+0+32]=Kr(q,ee,pe),T[D+2+0]=T[D+1+32]=T[D+0+64]=Kr(ee,pe,_e),T[D+3+0]=T[D+2+32]=T[D+1+64]=T[D+0+96]=Kr(pe,_e,Be),T[D+3+32]=T[D+2+64]=T[D+1+96]=Kr(_e,Be,Te),T[D+3+64]=T[D+2+96]=Kr(Be,Te,ke),T[D+3+96]=Kr(Te,ke,ke)}function co(T,D){var q=T[D-1+0],ee=T[D-1+32],pe=T[D-1+64],_e=T[D-1-32],Be=T[D+0-32],Te=T[D+1-32],ke=T[D+2-32],Ve=T[D+3-32];T[D+0+0]=T[D+1+64]=_e+Be+1>>1,T[D+1+0]=T[D+2+64]=Be+Te+1>>1,T[D+2+0]=T[D+3+64]=Te+ke+1>>1,T[D+3+0]=ke+Ve+1>>1,T[D+0+96]=Kr(pe,ee,q),T[D+0+64]=Kr(ee,q,_e),T[D+0+32]=T[D+1+96]=Kr(q,_e,Be),T[D+1+32]=T[D+2+96]=Kr(_e,Be,Te),T[D+2+32]=T[D+3+96]=Kr(Be,Te,ke),T[D+3+32]=Kr(Te,ke,Ve)}function vs(T,D){var q=T[D+0-32],ee=T[D+1-32],pe=T[D+2-32],_e=T[D+3-32],Be=T[D+4-32],Te=T[D+5-32],ke=T[D+6-32],Ve=T[D+7-32];T[D+0+0]=q+ee+1>>1,T[D+1+0]=T[D+0+64]=ee+pe+1>>1,T[D+2+0]=T[D+1+64]=pe+_e+1>>1,T[D+3+0]=T[D+2+64]=_e+Be+1>>1,T[D+0+32]=Kr(q,ee,pe),T[D+1+32]=T[D+0+96]=Kr(ee,pe,_e),T[D+2+32]=T[D+1+96]=Kr(pe,_e,Be),T[D+3+32]=T[D+2+96]=Kr(_e,Be,Te),T[D+3+64]=Kr(Be,Te,ke),T[D+3+96]=Kr(Te,ke,Ve)}function Ca(T,D){var q=T[D-1+0],ee=T[D-1+32],pe=T[D-1+64],_e=T[D-1+96];T[D+0+0]=q+ee+1>>1,T[D+2+0]=T[D+0+32]=ee+pe+1>>1,T[D+2+32]=T[D+0+64]=pe+_e+1>>1,T[D+1+0]=Kr(q,ee,pe),T[D+3+0]=T[D+1+32]=Kr(ee,pe,_e),T[D+3+32]=T[D+1+64]=Kr(pe,_e,_e),T[D+3+64]=T[D+2+64]=T[D+0+96]=T[D+1+96]=T[D+2+96]=T[D+3+96]=_e}function Sa(T,D){var q=T[D-1+0],ee=T[D-1+32],pe=T[D-1+64],_e=T[D-1+96],Be=T[D-1-32],Te=T[D+0-32],ke=T[D+1-32],Ve=T[D+2-32];T[D+0+0]=T[D+2+32]=q+Be+1>>1,T[D+0+32]=T[D+2+64]=ee+q+1>>1,T[D+0+64]=T[D+2+96]=pe+ee+1>>1,T[D+0+96]=_e+pe+1>>1,T[D+3+0]=Kr(Te,ke,Ve),T[D+2+0]=Kr(Be,Te,ke),T[D+1+0]=T[D+3+32]=Kr(q,Be,Te),T[D+1+32]=T[D+3+64]=Kr(ee,q,Be),T[D+1+64]=T[D+3+96]=Kr(pe,ee,q),T[D+1+96]=Kr(_e,pe,ee)}function ei(T,D){var q;for(q=0;8>q;++q)l(T,D+32*q,T,D-32,8)}function la(T,D){var q;for(q=0;8>q;++q)h(T,D,T[D-1],8),D+=32}function Wi(T,D,q){var ee;for(ee=0;8>ee;++ee)h(D,q+32*ee,T,8)}function ec(T,D){var q,ee=8;for(q=0;8>q;++q)ee+=T[D+q-32]+T[D-1+32*q];Wi(ee>>4,T,D)}function Gs(T,D){var q,ee=4;for(q=0;8>q;++q)ee+=T[D+q-32];Wi(ee>>3,T,D)}function ll(T,D){var q,ee=4;for(q=0;8>q;++q)ee+=T[D-1+32*q];Wi(ee>>3,T,D)}function zo(T,D){Wi(128,T,D)}function ca(T,D,q){var ee=T[D-q],pe=T[D+0],_e=3*(pe-ee)+Co[1020+T[D-2*q]-T[D+q]],Be=oA[112+(_e+4>>3)];T[D-q]=oo[255+ee+oA[112+(_e+3>>3)]],T[D+0]=oo[255+pe-Be]}function tc(T,D,q,ee){var pe=T[D+0],_e=T[D+q];return dn[255+T[D-2*q]-T[D-q]]>ee||dn[255+_e-pe]>ee}function Aa(T,D,q,ee){return 4*dn[255+T[D-q]-T[D+0]]+dn[255+T[D-2*q]-T[D+q]]<=ee}function Rn(T,D,q,ee,pe){var _e=T[D-3*q],Be=T[D-2*q],Te=T[D-q],ke=T[D+0],Ve=T[D+q],qe=T[D+2*q],Mt=T[D+3*q];return 4*dn[255+Te-ke]+dn[255+Be-Ve]>ee?0:dn[255+T[D-4*q]-_e]<=pe&&dn[255+_e-Be]<=pe&&dn[255+Be-Te]<=pe&&dn[255+Mt-qe]<=pe&&dn[255+qe-Ve]<=pe&&dn[255+Ve-ke]<=pe}function Ho(T,D,q,ee){var pe=2*ee+1;for(ee=0;16>ee;++ee)Aa(T,D+ee,q,pe)&&ca(T,D+ee,q)}function Cn(T,D,q,ee){var pe=2*ee+1;for(ee=0;16>ee;++ee)Aa(T,D+ee*q,1,pe)&&ca(T,D+ee*q,1)}function pn(T,D,q,ee){var pe;for(pe=3;0<pe;--pe)Ho(T,D+=4*q,q,ee)}function Ea(T,D,q,ee){var pe;for(pe=3;0<pe;--pe)Cn(T,D+=4,q,ee)}function xn(T,D,q,ee,pe,_e,Be,Te){for(_e=2*_e+1;0<pe--;){if(Rn(T,D,q,_e,Be))if(tc(T,D,q,Te))ca(T,D,q);else{var ke=T,Ve=D,qe=q,Mt=ke[Ve-2*qe],Xe=ke[Ve-qe],bt=ke[Ve+0],It=ke[Ve+qe],$t=ke[Ve+2*qe],kt=27*(qt=Co[1020+3*(bt-Xe)+Co[1020+Mt-It]])+63>>7,Gt=18*qt+63>>7,qt=9*qt+63>>7;ke[Ve-3*qe]=oo[255+ke[Ve-3*qe]+qt],ke[Ve-2*qe]=oo[255+Mt+Gt],ke[Ve-qe]=oo[255+Xe+kt],ke[Ve+0]=oo[255+bt-kt],ke[Ve+qe]=oo[255+It-Gt],ke[Ve+2*qe]=oo[255+$t-qt]}D+=ee}}function jo(T,D,q,ee,pe,_e,Be,Te){for(_e=2*_e+1;0<pe--;){if(Rn(T,D,q,_e,Be))if(tc(T,D,q,Te))ca(T,D,q);else{var ke=T,Ve=D,qe=q,Mt=ke[Ve-qe],Xe=ke[Ve+0],bt=ke[Ve+qe],It=oA[112+(4+($t=3*(Xe-Mt))>>3)],$t=oA[112+($t+3>>3)],kt=It+1>>1;ke[Ve-2*qe]=oo[255+ke[Ve-2*qe]+kt],ke[Ve-qe]=oo[255+Mt+$t],ke[Ve+0]=oo[255+Xe-It],ke[Ve+qe]=oo[255+bt-kt]}D+=ee}}function Ci(T,D,q,ee,pe,_e){xn(T,D,q,1,16,ee,pe,_e)}function so(T,D,q,ee,pe,_e){xn(T,D,1,q,16,ee,pe,_e)}function ua(T,D,q,ee,pe,_e){var Be;for(Be=3;0<Be;--Be)jo(T,D+=4*q,q,1,16,ee,pe,_e)}function j(T,D,q,ee,pe,_e){var Be;for(Be=3;0<Be;--Be)jo(T,D+=4,1,q,16,ee,pe,_e)}function me(T,D,q,ee,pe,_e,Be,Te){xn(T,D,pe,1,8,_e,Be,Te),xn(q,ee,pe,1,8,_e,Be,Te)}function Je(T,D,q,ee,pe,_e,Be,Te){xn(T,D,1,pe,8,_e,Be,Te),xn(q,ee,1,pe,8,_e,Be,Te)}function mt(T,D,q,ee,pe,_e,Be,Te){jo(T,D+4*pe,pe,1,8,_e,Be,Te),jo(q,ee+4*pe,pe,1,8,_e,Be,Te)}function Ft(T,D,q,ee,pe,_e,Be,Te){jo(T,D+4,1,pe,8,_e,Be,Te),jo(q,ee+4,1,pe,8,_e,Be,Te)}function Vt(){this.ba=new Ir,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new en,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ir(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function xr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jr(){this.ua=0,this.Wa=new kr,this.vb=new kr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new pt,this.yc=new Pe}function mn(){this.xb=this.a=0,this.l=new xa,this.ca=new Ir,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ee,this.Pb=0,this.wd=new Ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jr,this.ab=0,this.gc=m(4,xr),this.Oc=0}function gn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(T,D,q,ee,pe,_e,Be){for(T=T==null?0:T[D+0],D=0;D<Be;++D)pe[_e+D]=T+q[ee+D]&255,T=pe[_e+D]}function Hi(T,D,q,ee,pe,_e,Be){var Te;if(T==null)cn(null,null,q,ee,pe,_e,Be);else for(Te=0;Te<Be;++Te)pe[_e+Te]=T[D+Te]+q[ee+Te]&255}function ns(T,D,q,ee,pe,_e,Be){if(T==null)cn(null,null,q,ee,pe,_e,Be);else{var Te,ke=T[D+0],Ve=ke,qe=ke;for(Te=0;Te<Be;++Te)Ve=qe+(ke=T[D+Te])-Ve,qe=q[ee+Te]+(-256&Ve?0>Ve?0:255:Ve)&255,Ve=ke,pe[_e+Te]=qe}}function Si(T,D,q,ee){var pe=D.width,_e=D.o;if(n(T!=null&&D!=null),0>q||0>=ee||q+ee>_e)return null;if(!T.Cc){if(T.ga==null){var Be;if(T.ga=new gn,(Be=T.ga==null)||(Be=D.width*D.o,n(T.Gb.length==0),T.Gb=f(Be),T.Uc=0,T.Gb==null?Be=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,Be=1),Be=!Be),!Be){Be=T.ga;var Te=T.Fa,ke=T.P,Ve=T.qc,qe=T.mb,Mt=T.nb,Xe=ke+1,bt=Ve-1,It=Be.l;if(n(Te!=null&&qe!=null&&D!=null),Us[0]=null,Us[1]=cn,Us[2]=Hi,Us[3]=ns,Be.ca=qe,Be.tb=Mt,Be.c=D.width,Be.i=D.height,n(0<Be.c&&0<Be.i),1>=Ve)D=0;else if(Be.$a=3&Te[ke+0],Be.Z=Te[ke+0]>>2&3,Be.Lc=Te[ke+0]>>4&3,ke=Te[ke+0]>>6&3,0>Be.$a||1<Be.$a||4<=Be.Z||1<Be.Lc||ke)D=0;else if(It.put=_r,It.ac=Un,It.bc=In,It.ma=Be,It.width=D.width,It.height=D.height,It.Da=D.Da,It.v=D.v,It.va=D.va,It.j=D.j,It.o=D.o,Be.$a)e:{n(Be.$a==1),D=xl();t:for(;;){if(D==null){D=0;break e}if(n(Be!=null),Be.mc=D,D.c=Be.c,D.i=Be.i,D.l=Be.l,D.l.ma=Be,D.l.width=Be.c,D.l.height=Be.i,D.a=0,Ie(D.m,Te,Xe,bt),!Ls(Be.c,Be.i,1,D,null)||(D.ab==1&&D.gc[0].hc==3&&rs(D.s)?(Be.ic=1,Te=D.c*D.i,D.Ta=null,D.Ua=0,D.V=f(Te),D.Ba=0,D.V==null?(D.a=1,D=0):D=1):(Be.ic=0,D=hn(D,Be.c)),!D))break t;D=1;break e}Be.mc=null,D=0}else D=bt>=Be.c*Be.i;Be=!D}if(Be)return null;T.ga.Lc!=1?T.Ga=0:ee=_e-q}n(T.ga!=null),n(q+ee<=_e);e:{if(D=(Te=T.ga).c,_e=Te.l.o,Te.$a==0){if(Xe=T.rc,bt=T.Vc,It=T.Fa,ke=T.P+1+q*D,Ve=T.mb,qe=T.nb+q*D,n(ke<=T.P+T.qc),Te.Z!=0)for(n(Us[Te.Z]!=null),Be=0;Be<ee;++Be)Us[Te.Z](Xe,bt,It,ke,Ve,qe,D),Xe=Ve,bt=qe,qe+=D,ke+=D;else for(Be=0;Be<ee;++Be)l(Ve,qe,It,ke,D),Xe=Ve,bt=qe,qe+=D,ke+=D;T.rc=Xe,T.Vc=bt}else{if(n(Te.mc!=null),D=q+ee,n((Be=Te.mc)!=null),n(D<=Be.i),Be.C>=D)D=1;else if(Te.ic||ha(),Te.ic){Te=Be.V,Xe=Be.Ba,bt=Be.c;var $t=Be.i,kt=(It=1,ke=Be.$/bt,Ve=Be.$%bt,qe=Be.m,Mt=Be.s,Be.$),Gt=bt*$t,qt=bt*D,er=Mt.wc,Jt=kt<qt?Wn(Mt,Ve,ke):null;n(kt<=Gt),n(D<=$t),n(rs(Mt));t:for(;;){for(;!qe.h&&kt<qt;){if(Ve&er||(Jt=Wn(Mt,Ve,ke)),n(Jt!=null),tt(qe),256>($t=oi(Jt.G[0],Jt.H[0],qe)))Te[Xe+kt]=$t,++kt,++Ve>=bt&&(Ve=0,++ke<=D&&!(ke%16)&&rn(Be,ke));else{if(!(280>$t)){It=0;break t}$t=wn($t-256,qe);var nn,Or=oi(Jt.G[4],Jt.H[4],qe);if(tt(qe),!(kt>=(Or=Ui(bt,Or=wn(Or,qe)))&&Gt-kt>=$t)){It=0;break t}for(nn=0;nn<$t;++nn)Te[Xe+kt+nn]=Te[Xe+kt+nn-Or];for(kt+=$t,Ve+=$t;Ve>=bt;)Ve-=bt,++ke<=D&&!(ke%16)&&rn(Be,ke);kt<qt&&Ve&er&&(Jt=Wn(Mt,Ve,ke))}n(qe.h==Ye(qe))}rn(Be,ke>D?D:ke);break t}!It||qe.h&&kt<Gt?(It=0,Be.a=qe.h?5:3):Be.$=kt,D=It}else D=An(Be,Be.V,Be.Ba,Be.c,Be.i,D,nl);if(!D){ee=0;break e}}q+ee>=_e&&(T.Cc=1),ee=1}if(!ee)return null;if(T.Cc&&((ee=T.ga)!=null&&(ee.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+q*pe}function ks(T,D,q,ee,pe,_e){for(;0<pe--;){var Be,Te=T,ke=D+(q?1:0),Ve=T,qe=D+(q?0:3);for(Be=0;Be<ee;++Be){var Mt=Ve[qe+4*Be];Mt!=255&&(Mt*=32897,Te[ke+4*Be+0]=Te[ke+4*Be+0]*Mt>>23,Te[ke+4*Be+1]=Te[ke+4*Be+1]*Mt>>23,Te[ke+4*Be+2]=Te[ke+4*Be+2]*Mt>>23)}D+=_e}}function Li(T,D,q,ee,pe){for(;0<ee--;){var _e;for(_e=0;_e<q;++_e){var Be=T[D+2*_e+0],Te=15&(Ve=T[D+2*_e+1]),ke=4369*Te,Ve=(240&Ve|Ve>>4)*ke>>16;T[D+2*_e+0]=(240&Be|Be>>4)*ke>>16&240|(15&Be|Be<<4)*ke>>16>>4&15,T[D+2*_e+1]=240&Ve|Te}D+=pe}}function _s(T,D,q,ee,pe,_e,Be,Te){var ke,Ve,qe=255;for(Ve=0;Ve<pe;++Ve){for(ke=0;ke<ee;++ke){var Mt=T[D+ke];_e[Be+4*ke]=Mt,qe&=Mt}D+=q,Be+=Te}return qe!=255}function Vo(T,D,q,ee,pe){var _e;for(_e=0;_e<pe;++_e)q[ee+_e]=T[D+_e]>>8}function ha(){Lc=ks,ru=Li,pl=_s,TA=Vo}function fa(T,D,q){be[T]=function(ee,pe,_e,Be,Te,ke,Ve,qe,Mt,Xe,bt,It,$t,kt,Gt,qt,er){var Jt,nn=er-1>>1,Or=Te[ke+0]|Ve[qe+0]<<16,Bn=Mt[Xe+0]|bt[It+0]<<16;n(ee!=null);var Wr=3*Or+Bn+131074>>2;for(D(ee[pe+0],255&Wr,Wr>>16,$t,kt),_e!=null&&(Wr=3*Bn+Or+131074>>2,D(_e[Be+0],255&Wr,Wr>>16,Gt,qt)),Jt=1;Jt<=nn;++Jt){var Nn=Te[ke+Jt]|Ve[qe+Jt]<<16,Ri=Mt[Xe+Jt]|bt[It+Jt]<<16,Sn=Or+Nn+Bn+Ri+524296,zr=Sn+2*(Nn+Bn)>>3;Wr=zr+Or>>1,Or=(Sn=Sn+2*(Or+Ri)>>3)+Nn>>1,D(ee[pe+2*Jt-1],255&Wr,Wr>>16,$t,kt+(2*Jt-1)*q),D(ee[pe+2*Jt-0],255&Or,Or>>16,$t,kt+(2*Jt-0)*q),_e!=null&&(Wr=Sn+Bn>>1,Or=zr+Ri>>1,D(_e[Be+2*Jt-1],255&Wr,Wr>>16,Gt,qt+(2*Jt-1)*q),D(_e[Be+2*Jt+0],255&Or,Or>>16,Gt,qt+(2*Jt+0)*q)),Or=Nn,Bn=Ri}1&er||(Wr=3*Or+Bn+131074>>2,D(ee[pe+er-1],255&Wr,Wr>>16,$t,kt+(er-1)*q),_e!=null&&(Wr=3*Bn+Or+131074>>2,D(_e[Be+er-1],255&Wr,Wr>>16,Gt,qt+(er-1)*q)))}}function Fa(){$s[aA]=ku,$s[kc]=ka,$s[sh]=Nc,$s[oc]=Ua,$s[nu]=Da,$s[Fi]=NA,$s[iu]=Uu,$s[MA]=ka,$s[ac]=Ua,$s[Ul]=Da,$s[Uc]=NA}function cl(T){return T&-16384?0>T?0:255:T>>Rl}function Ei(T,D){return cl((19077*T>>8)+(26149*D>>8)-14234)}function Sc(T,D,q){return cl((19077*T>>8)-(6419*D>>8)-(13320*q>>8)+8708)}function da(T,D){return cl((19077*T>>8)+(33050*D>>8)-17685)}function Ia(T,D,q,ee,pe){ee[pe+0]=Ei(T,q),ee[pe+1]=Sc(T,D,q),ee[pe+2]=da(T,D)}function Zi(T,D,q,ee,pe){ee[pe+0]=da(T,D),ee[pe+1]=Sc(T,D,q),ee[pe+2]=Ei(T,q)}function rA(T,D,q,ee,pe){var _e=Sc(T,D,q);D=_e<<3&224|da(T,D)>>3,ee[pe+0]=248&Ei(T,q)|_e>>5,ee[pe+1]=D}function Sl(T,D,q,ee,pe){var _e=240&da(T,D)|15;ee[pe+0]=240&Ei(T,q)|Sc(T,D,q)>>4,ee[pe+1]=_e}function tu(T,D,q,ee,pe){ee[pe+0]=255,Ia(T,D,q,ee,pe+1)}function El(T,D,q,ee,pe){Zi(T,D,q,ee,pe),ee[pe+3]=255}function Ks(T,D,q,ee,pe){Ia(T,D,q,ee,pe),ee[pe+3]=255}function Ta(T,D,q){be[T]=function(ee,pe,_e,Be,Te,ke,Ve,qe,Mt){for(var Xe=qe+(-2&Mt)*q;qe!=Xe;)D(ee[pe+0],_e[Be+0],Te[ke+0],Ve,qe),D(ee[pe+1],_e[Be+0],Te[ke+0],Ve,qe+q),pe+=2,++Be,++ke,qe+=2*q;1&Mt&&D(ee[pe+0],_e[Be+0],Te[ke+0],Ve,qe)}}function Al(T,D,q){return q==0?T==0?D==0?6:5:D==0?4:0:q}function FA(T,D,q,ee,pe){switch(T>>>30){case 3:ic(D,q,ee,pe,0);break;case 2:ss(D,q,ee,pe);break;case 1:ii(D,q,ee,pe)}}function xo(T,D){var q,ee,pe=D.M,_e=D.Nb,Be=T.oc,Te=T.pc+40,ke=T.oc,Ve=T.pc+584,qe=T.oc,Mt=T.pc+600;for(q=0;16>q;++q)Be[Te+32*q-1]=129;for(q=0;8>q;++q)ke[Ve+32*q-1]=129,qe[Mt+32*q-1]=129;for(0<pe?Be[Te-1-32]=ke[Ve-1-32]=qe[Mt-1-32]=129:(h(Be,Te-32-1,127,21),h(ke,Ve-32-1,127,9),h(qe,Mt-32-1,127,9)),ee=0;ee<T.za;++ee){var Xe=D.ya[D.aa+ee];if(0<ee){for(q=-1;16>q;++q)l(Be,Te+32*q-4,Be,Te+32*q+12,4);for(q=-1;8>q;++q)l(ke,Ve+32*q-4,ke,Ve+32*q+4,4),l(qe,Mt+32*q-4,qe,Mt+32*q+4,4)}var bt=T.Gd,It=T.Hd+ee,$t=Xe.ad,kt=Xe.Hc;if(0<pe&&(l(Be,Te-32,bt[It].y,0,16),l(ke,Ve-32,bt[It].f,0,8),l(qe,Mt-32,bt[It].ea,0,8)),Xe.Za){var Gt=Be,qt=Te-32+16;for(0<pe&&(ee>=T.za-1?h(Gt,qt,bt[It].y[15],4):l(Gt,qt,bt[It+1].y,0,4)),q=0;4>q;q++)Gt[qt+128+q]=Gt[qt+256+q]=Gt[qt+384+q]=Gt[qt+0+q];for(q=0;16>q;++q,kt<<=2)Gt=Be,qt=Te+uA[q],ga[Xe.Ob[q]](Gt,qt),FA(kt,$t,16*+q,Gt,qt)}else if(Gt=Al(ee,pe,Xe.Ob[0]),ho[Gt](Be,Te),kt!=0)for(q=0;16>q;++q,kt<<=2)FA(kt,$t,16*+q,Be,Te+uA[q]);for(q=Xe.Gc,Gt=Al(ee,pe,Xe.Dd),qn[Gt](ke,Ve),qn[Gt](qe,Mt),kt=$t,Gt=ke,qt=Ve,255&(Xe=0|q)&&(170&Xe?Bo(kt,256,Gt,qt):vi(kt,256,Gt,qt)),Xe=qe,kt=Mt,255&(q>>=8)&&(170&q?Bo($t,320,Xe,kt):vi($t,320,Xe,kt)),pe<T.Ub-1&&(l(bt[It].y,0,Be,Te+480,16),l(bt[It].f,0,ke,Ve+224,8),l(bt[It].ea,0,qe,Mt+224,8)),q=8*_e*T.B,bt=T.sa,It=T.ta+16*ee+16*_e*T.R,$t=T.qa,Xe=T.ra+8*ee+q,kt=T.Ha,Gt=T.Ia+8*ee+q,q=0;16>q;++q)l(bt,It+q*T.R,Be,Te+32*q,16);for(q=0;8>q;++q)l($t,Xe+q*T.B,ke,Ve+32*q,8),l(kt,Gt+q*T.B,qe,Mt+32*q,8)}}function Fl(T,D,q,ee,pe,_e,Be,Te,ke){var Ve=[0],qe=[0],Mt=0,Xe=ke!=null?ke.kd:0,bt=ke??new ir;if(T==null||12>q)return 7;bt.data=T,bt.w=D,bt.ha=q,D=[D],q=[q],bt.gb=[bt.gb];e:{var It=D,$t=q,kt=bt.gb;if(n(T!=null),n($t!=null),n(kt!=null),kt[0]=0,12<=$t[0]&&!i(T,It[0],"RIFF")){if(i(T,It[0]+8,"WEBP")){kt=3;break e}var Gt=Br(T,It[0]+4);if(12>Gt||4294967286<Gt){kt=3;break e}if(Xe&&Gt>$t[0]-8){kt=7;break e}kt[0]=Gt,It[0]+=12,$t[0]-=12}kt=0}if(kt!=0)return kt;for(Gt=0<bt.gb[0],q=q[0];;){e:{var qt=T;$t=D,kt=q;var er=Ve,Jt=qe,nn=It=[0];if((Wr=Mt=[Mt])[0]=0,8>kt[0])kt=7;else{if(!i(qt,$t[0],"VP8X")){if(Br(qt,$t[0]+4)!=10){kt=3;break e}if(18>kt[0]){kt=7;break e}var Or=Br(qt,$t[0]+8),Bn=1+fr(qt,$t[0]+12);if(2147483648<=Bn*(qt=1+fr(qt,$t[0]+15))){kt=3;break e}nn!=null&&(nn[0]=Or),er!=null&&(er[0]=Bn),Jt!=null&&(Jt[0]=qt),$t[0]+=18,kt[0]-=18,Wr[0]=1}kt=0}}if(Mt=Mt[0],It=It[0],kt!=0)return kt;if($t=!!(2&It),!Gt&&Mt)return 3;if(_e!=null&&(_e[0]=!!(16&It)),Be!=null&&(Be[0]=$t),Te!=null&&(Te[0]=0),Be=Ve[0],It=qe[0],Mt&&$t&&ke==null){kt=0;break}if(4>q){kt=7;break}if(Gt&&Mt||!Gt&&!Mt&&!i(T,D[0],"ALPH")){q=[q],bt.na=[bt.na],bt.P=[bt.P],bt.Sa=[bt.Sa];e:{Or=T,kt=D,Gt=q;var Wr=bt.gb;er=bt.na,Jt=bt.P,nn=bt.Sa,Bn=22,n(Or!=null),n(Gt!=null),qt=kt[0];var Nn=Gt[0];for(n(er!=null),n(nn!=null),er[0]=null,Jt[0]=null,nn[0]=0;;){if(kt[0]=qt,Gt[0]=Nn,8>Nn){kt=7;break e}var Ri=Br(Or,qt+4);if(4294967286<Ri){kt=3;break e}var Sn=8+Ri+1&-2;if(Bn+=Sn,0<Wr&&Bn>Wr){kt=3;break e}if(!i(Or,qt,"VP8 ")||!i(Or,qt,"VP8L")){kt=0;break e}if(Nn[0]<Sn){kt=7;break e}i(Or,qt,"ALPH")||(er[0]=Or,Jt[0]=qt+8,nn[0]=Ri),qt+=Sn,Nn-=Sn}}if(q=q[0],bt.na=bt.na[0],bt.P=bt.P[0],bt.Sa=bt.Sa[0],kt!=0)break}q=[q],bt.Ja=[bt.Ja],bt.xa=[bt.xa];e:if(Wr=T,kt=D,Gt=q,er=bt.gb[0],Jt=bt.Ja,nn=bt.xa,Or=kt[0],qt=!i(Wr,Or,"VP8 "),Bn=!i(Wr,Or,"VP8L"),n(Wr!=null),n(Gt!=null),n(Jt!=null),n(nn!=null),8>Gt[0])kt=7;else{if(qt||Bn){if(Wr=Br(Wr,Or+4),12<=er&&Wr>er-12){kt=3;break e}if(Xe&&Wr>Gt[0]-8){kt=7;break e}Jt[0]=Wr,kt[0]+=8,Gt[0]-=8,nn[0]=Bn}else nn[0]=5<=Gt[0]&&Wr[Or+0]==47&&!(Wr[Or+4]>>5),Jt[0]=Gt[0];kt=0}if(q=q[0],bt.Ja=bt.Ja[0],bt.xa=bt.xa[0],D=D[0],kt!=0)break;if(4294967286<bt.Ja)return 3;if(Te==null||$t||(Te[0]=bt.xa?2:1),Be=[Be],It=[It],bt.xa){if(5>q){kt=7;break}Te=Be,Xe=It,$t=_e,T==null||5>q?T=0:5<=q&&T[D+0]==47&&!(T[D+4]>>5)?(Gt=[0],Wr=[0],er=[0],Ie(Jt=new Ee,T,D,q),bn(Jt,Gt,Wr,er)?(Te!=null&&(Te[0]=Gt[0]),Xe!=null&&(Xe[0]=Wr[0]),$t!=null&&($t[0]=er[0]),T=1):T=0):T=0}else{if(10>q){kt=7;break}Te=It,T==null||10>q||!bc(T,D+3,q-3)?T=0:(Xe=T[D+0]|T[D+1]<<8|T[D+2]<<16,$t=16383&(T[D+7]<<8|T[D+6]),T=16383&(T[D+9]<<8|T[D+8]),1&Xe||3<(Xe>>1&7)||!(Xe>>4&1)||Xe>>5>=bt.Ja||!$t||!T?T=0:(Be&&(Be[0]=$t),Te&&(Te[0]=T),T=1))}if(!T||(Be=Be[0],It=It[0],Mt&&(Ve[0]!=Be||qe[0]!=It)))return 3;ke!=null&&(ke[0]=bt,ke.offset=D-ke.w,n(4294967286>D-ke.w),n(ke.offset==ke.ha-q));break}return kt==0||kt==7&&Mt&&ke==null?(_e!=null&&(_e[0]|=bt.na!=null&&0<bt.na.length),ee!=null&&(ee[0]=Be),pe!=null&&(pe[0]=It),0):kt}function nA(T,D,q){var ee=D.width,pe=D.height,_e=0,Be=0,Te=ee,ke=pe;if(D.Da=T!=null&&0<T.Da,D.Da&&(Te=T.cd,ke=T.bd,_e=T.v,Be=T.j,11>q||(_e&=-2,Be&=-2),0>_e||0>Be||0>=Te||0>=ke||_e+Te>ee||Be+ke>pe))return 0;if(D.v=_e,D.j=Be,D.va=_e+Te,D.o=Be+ke,D.U=Te,D.T=ke,D.da=T!=null&&0<T.da,D.da){if(!qr(Te,ke,q=[T.ib],_e=[T.hb]))return 0;D.ib=q[0],D.hb=_e[0]}return D.ob=T!=null&&T.ob,D.Kb=T==null||!T.Sd,D.da&&(D.ob=D.ib<3*ee/4&&D.hb<3*pe/4,D.Kb=0),1}function iA(T){if(T==null)return 2;if(11>T.S){var D=T.f.RGBA;D.fb+=(T.height-1)*D.A,D.A=-D.A}else D=T.f.kb,T=T.height,D.O+=(T-1)*D.fa,D.fa=-D.fa,D.N+=(T-1>>1)*D.Ab,D.Ab=-D.Ab,D.W+=(T-1>>1)*D.Db,D.Db=-D.Db,D.F!=null&&(D.J+=(T-1)*D.lb,D.lb=-D.lb);return 0}function Il(T,D,q,ee){if(ee==null||0>=T||0>=D)return 2;if(q!=null){if(q.Da){var pe=q.cd,_e=q.bd,Be=-2&q.v,Te=-2&q.j;if(0>Be||0>Te||0>=pe||0>=_e||Be+pe>T||Te+_e>D)return 2;T=pe,D=_e}if(q.da){if(!qr(T,D,pe=[q.ib],_e=[q.hb]))return 2;T=pe[0],D=_e[0]}}ee.width=T,ee.height=D;e:{var ke=ee.width,Ve=ee.height;if(T=ee.S,0>=ke||0>=Ve||!(T>=aA&&13>T))T=2;else{if(0>=ee.Rd&&ee.sd==null){Be=_e=pe=D=0;var qe=(Te=ke*QA[T])*Ve;if(11>T||(_e=(Ve+1)/2*(D=(ke+1)/2),T==12&&(Be=(pe=ke)*Ve)),(Ve=f(qe+2*_e+Be))==null){T=1;break e}ee.sd=Ve,11>T?((ke=ee.f.RGBA).eb=Ve,ke.fb=0,ke.A=Te,ke.size=qe):((ke=ee.f.kb).y=Ve,ke.O=0,ke.fa=Te,ke.Fd=qe,ke.f=Ve,ke.N=0+qe,ke.Ab=D,ke.Cd=_e,ke.ea=Ve,ke.W=0+qe+_e,ke.Db=D,ke.Ed=_e,T==12&&(ke.F=Ve,ke.J=0+qe+2*_e),ke.Tc=Be,ke.lb=pe)}if(D=1,pe=ee.S,_e=ee.width,Be=ee.height,pe>=aA&&13>pe)if(11>pe)T=ee.f.RGBA,D&=(Te=Math.abs(T.A))*(Be-1)+_e<=T.size,D&=Te>=_e*QA[pe],D&=T.eb!=null;else{T=ee.f.kb,Te=(_e+1)/2,qe=(Be+1)/2,ke=Math.abs(T.fa),Ve=Math.abs(T.Ab);var Mt=Math.abs(T.Db),Xe=Math.abs(T.lb),bt=Xe*(Be-1)+_e;D&=ke*(Be-1)+_e<=T.Fd,D&=Ve*(qe-1)+Te<=T.Cd,D=(D&=Mt*(qe-1)+Te<=T.Ed)&ke>=_e&Ve>=Te&Mt>=Te,D&=T.y!=null,D&=T.f!=null,D&=T.ea!=null,pe==12&&(D&=Xe>=_e,D&=bt<=T.Tc,D&=T.F!=null)}else D=0;T=D?0:2}}return T!=0||q!=null&&q.fd&&(T=iA(ee)),T}var qs=64,Go=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bo=24,pa=32,ul=8,Pa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Sr("Predictor0","PredictorAdd0"),be.Predictor0=function(){return 4278190080},be.Predictor1=function(T){return T},be.Predictor2=function(T,D,q){return D[q+0]},be.Predictor3=function(T,D,q){return D[q+1]},be.Predictor4=function(T,D,q){return D[q-1]},be.Predictor5=function(T,D,q){return Dr(Dr(T,D[q+1]),D[q+0])},be.Predictor6=function(T,D,q){return Dr(T,D[q-1])},be.Predictor7=function(T,D,q){return Dr(T,D[q+0])},be.Predictor8=function(T,D,q){return Dr(D[q-1],D[q+0])},be.Predictor9=function(T,D,q){return Dr(D[q+0],D[q+1])},be.Predictor10=function(T,D,q){return Dr(Dr(T,D[q-1]),Dr(D[q+0],D[q+1]))},be.Predictor11=function(T,D,q){var ee=D[q+0];return 0>=ft(ee>>24&255,T>>24&255,(D=D[q-1])>>24&255)+ft(ee>>16&255,T>>16&255,D>>16&255)+ft(ee>>8&255,T>>8&255,D>>8&255)+ft(255&ee,255&T,255&D)?ee:T},be.Predictor12=function(T,D,q){var ee=D[q+0];return(Qn((T>>24&255)+(ee>>24&255)-((D=D[q-1])>>24&255))<<24|Qn((T>>16&255)+(ee>>16&255)-(D>>16&255))<<16|Qn((T>>8&255)+(ee>>8&255)-(D>>8&255))<<8|Qn((255&T)+(255&ee)-(255&D)))>>>0},be.Predictor13=function(T,D,q){var ee=D[q-1];return(un((T=Dr(T,D[q+0]))>>24&255,ee>>24&255)<<24|un(T>>16&255,ee>>16&255)<<16|un(T>>8&255,ee>>8&255)<<8|un(255&T,255&ee))>>>0};var rc=be.PredictorAdd0;be.PredictorAdd1=he,Sr("Predictor2","PredictorAdd2"),Sr("Predictor3","PredictorAdd3"),Sr("Predictor4","PredictorAdd4"),Sr("Predictor5","PredictorAdd5"),Sr("Predictor6","PredictorAdd6"),Sr("Predictor7","PredictorAdd7"),Sr("Predictor8","PredictorAdd8"),Sr("Predictor9","PredictorAdd9"),Sr("Predictor10","PredictorAdd10"),Sr("Predictor11","PredictorAdd11"),Sr("Predictor12","PredictorAdd12"),Sr("Predictor13","PredictorAdd13");var Tl=be.PredictorAdd2;$e("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),$e("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var is,hl=be.ColorIndexInverseTransform,fl=be.MapARGB,ma=be.VP8LColorIndexInverseTransformAlpha,Ec=be.MapAlpha,Pl=be.VP8LPredictorsAdd=[];Pl.length=16,(be.VP8LPredictors=[]).length=16,(be.VP8LPredictorsAdd_C=[]).length=16,(be.VP8LPredictors_C=[]).length=16;var Ao,nc,dl,Ll,Ml,kl,Ko,ic,ss,Bo,ii,vi,Xi,ws,Tn,Fc,sc,La,IA,Ma,Ic,Tc,uo,Pc,Lc,ru,pl,TA,PA=f(511),sA=f(2041),LA=f(225),Pu=f(767),Mc=0,Co=sA,oA=LA,oo=Pu,dn=PA,aA=0,kc=1,sh=2,oc=3,nu=4,Fi=5,iu=6,MA=7,ac=8,Ul=9,Uc=10,Dc=[2,3,7],kA=[3,3,11],lc=[280,256,256,256,40],su=[0,1,1,1,0],Lu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Rc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],UA=8,DA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],cc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],cA=null,Mu=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],AA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ou=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],au=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],RA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ho=[],ga=[],qn=[],fo=1,ao=2,Us=[],$s=[];fa("UpsampleRgbLinePair",Ia,3),fa("UpsampleBgrLinePair",Zi,3),fa("UpsampleRgbaLinePair",Ks,4),fa("UpsampleBgraLinePair",El,4),fa("UpsampleArgbLinePair",tu,4),fa("UpsampleRgba4444LinePair",Sl,2),fa("UpsampleRgb565LinePair",rA,2);var ku=be.UpsampleRgbLinePair,Nc=be.UpsampleBgrLinePair,ka=be.UpsampleRgbaLinePair,Ua=be.UpsampleBgraLinePair,Da=be.UpsampleArgbLinePair,NA=be.UpsampleRgba4444LinePair,Uu=be.UpsampleRgb565LinePair,Dl=16,Ra=1<<Dl-1,ai=-227,Zn=482,Rl=6,Ds=0,Ws=f(256),Qc=f(256),Oc=f(256),po=f(256),lu=f(Zn-ai),Du=f(Zn-ai);Ta("YuvToRgbRow",Ia,3),Ta("YuvToBgrRow",Zi,3),Ta("YuvToRgbaRow",Ks,4),Ta("YuvToBgraRow",El,4),Ta("YuvToArgbRow",tu,4),Ta("YuvToRgba4444Row",Sl,2),Ta("YuvToRgb565Row",rA,2);var uA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Na=[0,2,8],ya=[8,7,6,4,4,2,2,2,1,1,1,1],Rs=1;this.WebPDecodeRGBA=function(T,D,q,ee,pe){var _e=kc,Be=new Vt,Te=new Ir;Be.ba=Te,Te.S=_e,Te.width=[Te.width],Te.height=[Te.height];var ke=Te.width,Ve=Te.height,qe=new dt;if(qe==null||T==null)var Mt=2;else n(qe!=null),Mt=Fl(T,D,q,qe.width,qe.height,qe.Pd,qe.Qd,qe.format,null);if(Mt!=0?ke=0:(ke!=null&&(ke[0]=qe.width[0]),Ve!=null&&(Ve[0]=qe.height[0]),ke=1),ke){Te.width=Te.width[0],Te.height=Te.height[0],ee!=null&&(ee[0]=Te.width),pe!=null&&(pe[0]=Te.height);e:{if(ee=new xa,(pe=new ir).data=T,pe.w=D,pe.ha=q,pe.kd=1,D=[0],n(pe!=null),((T=Fl(pe.data,pe.w,pe.ha,null,null,null,D,null,pe))==0||T==7)&&D[0]&&(T=4),(D=T)==0){if(n(Be!=null),ee.data=pe.data,ee.w=pe.w+pe.offset,ee.ha=pe.ha-pe.offset,ee.put=_r,ee.ac=Un,ee.bc=In,ee.ma=Be,pe.xa){if((T=xl())==null){Be=1;break e}if((function(Xe,bt){var It=[0],$t=[0],kt=[0];t:for(;;){if(Xe==null)return 0;if(bt==null)return Xe.a=2,0;if(Xe.l=bt,Xe.a=0,Ie(Xe.m,bt.data,bt.w,bt.ha),!bn(Xe.m,It,$t,kt)){Xe.a=3;break t}if(Xe.xb=ao,bt.width=It[0],bt.height=$t[0],!Ls(It[0],$t[0],1,Xe,null))break t;return 1}return n(Xe.a!=0),0})(T,ee)){if(ee=(D=Il(ee.width,ee.height,Be.Oa,Be.ba))==0){t:{ee=T;r:for(;;){if(ee==null){ee=0;break t}if(n(ee.s.yc!=null),n(ee.s.Ya!=null),n(0<ee.s.Wb),n((q=ee.l)!=null),n((pe=q.ma)!=null),ee.xb!=0){if(ee.ca=pe.ba,ee.tb=pe.tb,n(ee.ca!=null),!nA(pe.Oa,q,oc)){ee.a=2;break r}if(!hn(ee,q.width)||q.da)break r;if((q.da||Yt(ee.ca.S))&&ha(),11>ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ee.ca.f.kb.F!=null&&ha()),ee.Pb&&0<ee.s.ua&&ee.s.vb.X==null&&!He(ee.s.vb,ee.s.Wa.Xa)){ee.a=1;break r}ee.xb=0}if(!An(ee,ee.V,ee.Ba,ee.c,ee.i,q.o,rl))break r;pe.Dc=ee.Ma,ee=1;break t}n(ee.a!=0),ee=0}ee=!ee}ee&&(D=T.a)}else D=T.a}else{if((T=new CA)==null){Be=1;break e}if(T.Fa=pe.na,T.P=pe.P,T.qc=pe.Sa,Do(T,ee)){if((D=Il(ee.width,ee.height,Be.Oa,Be.ba))==0){if(T.Aa=0,q=Be.Oa,n((pe=T)!=null),q!=null){if(0<(ke=0>(ke=q.Md)?0:100<ke?255:255*ke/100)){for(Ve=qe=0;4>Ve;++Ve)12>(Mt=pe.pb[Ve]).lc&&(Mt.ia=ke*ya[0>Mt.lc?0:Mt.lc]>>3),qe|=Mt.ia;qe&&(alert("todo:VP8InitRandom"),pe.ia=1)}pe.Ga=q.Id,100<pe.Ga?pe.Ga=100:0>pe.Ga&&(pe.Ga=0)}(function(Xe,bt){if(Xe==null)return 0;if(bt==null)return Ln(Xe,2,"NULL VP8Io parameter in VP8Decode().");if(!Xe.cb&&!Do(Xe,bt))return 0;if(n(Xe.cb),bt.ac==null||bt.ac(bt)){bt.ob&&(Xe.L=0);var It=Na[Xe.L];if(Xe.L==2?(Xe.yb=0,Xe.zb=0):(Xe.yb=bt.v-It>>4,Xe.zb=bt.j-It>>4,0>Xe.yb&&(Xe.yb=0),0>Xe.zb&&(Xe.zb=0)),Xe.Va=bt.o+15+It>>4,Xe.Hb=bt.va+15+It>>4,Xe.Hb>Xe.za&&(Xe.Hb=Xe.za),Xe.Va>Xe.Ub&&(Xe.Va=Xe.Ub),0<Xe.L){var $t=Xe.ed;for(It=0;4>It;++It){var kt;if(Xe.Qa.Cb){var Gt=Xe.Qa.Lb[It];Xe.Qa.Fb||(Gt+=$t.Tb)}else Gt=$t.Tb;for(kt=0;1>=kt;++kt){var qt=Xe.gd[It][kt],er=Gt;if($t.Pc&&(er+=$t.vd[0],kt&&(er+=$t.od[0])),0<(er=0>er?0:63<er?63:er)){var Jt=er;0<$t.wb&&(Jt=4<$t.wb?Jt>>2:Jt>>1)>9-$t.wb&&(Jt=9-$t.wb),1>Jt&&(Jt=1),qt.dd=Jt,qt.tc=2*er+Jt,qt.ld=40<=er?2:15<=er?1:0}else qt.tc=0;qt.La=kt}}}It=0}else Ln(Xe,6,"Frame setup failed"),It=Xe.a;if(It=It==0){if(It){Xe.$c=0,0<Xe.Aa||(Xe.Ic=Rs);t:{It=Xe.Ic,$t=4*(Jt=Xe.za);var nn=32*Jt,Or=Jt+1,Bn=0<Xe.L?Jt*(0<Xe.Aa?2:1):0,Wr=(Xe.Aa==2?2:1)*Jt;if((qt=$t+832+(kt=3*(16*It+Na[Xe.L])/2*nn)+(Gt=Xe.Fa!=null&&0<Xe.Fa.length?Xe.Kc.c*Xe.Kc.i:0))!=qt)It=0;else{if(qt>Xe.Vb){if(Xe.Vb=0,Xe.Ec=f(qt),Xe.Fc=0,Xe.Ec==null){It=Ln(Xe,1,"no memory during frame initialization.");break t}Xe.Vb=qt}qt=Xe.Ec,er=Xe.Fc,Xe.Ac=qt,Xe.Bc=er,er+=$t,Xe.Gd=m(nn,Ms),Xe.Hd=0,Xe.rb=m(Or+1,Hn),Xe.sb=1,Xe.wa=Bn?m(Bn,Bi):null,Xe.Y=0,Xe.D.Nb=0,Xe.D.wa=Xe.wa,Xe.D.Y=Xe.Y,0<Xe.Aa&&(Xe.D.Y+=Jt),n(!0),Xe.oc=qt,Xe.pc=er,er+=832,Xe.ya=m(Wr,sl),Xe.aa=0,Xe.D.ya=Xe.ya,Xe.D.aa=Xe.aa,Xe.Aa==2&&(Xe.D.aa+=Jt),Xe.R=16*Jt,Xe.B=8*Jt,Jt=(nn=Na[Xe.L])*Xe.R,nn=nn/2*Xe.B,Xe.sa=qt,Xe.ta=er+Jt,Xe.qa=Xe.sa,Xe.ra=Xe.ta+16*It*Xe.R+nn,Xe.Ha=Xe.qa,Xe.Ia=Xe.ra+8*It*Xe.B+nn,Xe.$c=0,er+=kt,Xe.mb=Gt?qt:null,Xe.nb=Gt?er:null,n(er+Gt<=Xe.Fc+Xe.Vb),Bc(Xe),h(Xe.Ac,Xe.Bc,0,$t),It=1}}if(It){if(bt.ka=0,bt.y=Xe.sa,bt.O=Xe.ta,bt.f=Xe.qa,bt.N=Xe.ra,bt.ea=Xe.Ha,bt.Vd=Xe.Ia,bt.fa=Xe.R,bt.Rc=Xe.B,bt.F=null,bt.J=0,!Mc){for(It=-255;255>=It;++It)PA[255+It]=0>It?-It:It;for(It=-1020;1020>=It;++It)sA[1020+It]=-128>It?-128:127<It?127:It;for(It=-112;112>=It;++It)LA[112+It]=-16>It?-16:15<It?15:It;for(It=-255;510>=It;++It)Pu[255+It]=0>It?0:255<It?255:It;Mc=1}Ko=Bl,ic=Yl,Bo=ba,ii=SA,vi=Gn,ss=tA,Xi=Ci,ws=so,Tn=me,Fc=Je,sc=ua,La=j,IA=mt,Ma=Ft,Ic=Ho,Tc=Cn,uo=pn,Pc=Ea,ga[0]=ni,ga[1]=Cl,ga[2]=Yn,ga[3]=ln,ga[4]=ys,ga[5]=co,ga[6]=$i,ga[7]=vs,ga[8]=Sa,ga[9]=Ca,ho[0]=Ba,ho[1]=Cc,ho[2]=aa,ho[3]=al,ho[4]=Qo,ho[5]=Oo,ho[6]=gs,qn[0]=ec,qn[1]=EA,qn[2]=ei,qn[3]=la,qn[4]=ll,qn[5]=Gs,qn[6]=zo,It=1}else It=0}It&&(It=(function(Nn,Ri){for(Nn.M=0;Nn.M<Nn.Va;++Nn.M){var Sn,zr=Nn.Jc[Nn.M&Nn.Xb],Er=Nn.m,di=Nn;for(Sn=0;Sn<di.za;++Sn){var Lr=Er,On=di,pi=On.Ac,os=On.Bc+4*Sn,as=On.zc,Ni=On.ya[On.aa+Sn];if(On.Qa.Bb?Ni.$b=Pt(Lr,On.Pa.jb[0])?2+Pt(Lr,On.Pa.jb[2]):Pt(Lr,On.Pa.jb[1]):Ni.$b=0,On.kc&&(Ni.Ad=Pt(Lr,On.Bd)),Ni.Za=!Pt(Lr,145)+0,Ni.Za){var xs=Ni.Ob,bs=0;for(On=0;4>On;++On){var Qi,En=as[0+On];for(Qi=0;4>Qi;++Qi){En=Qh[pi[os+Qi]][En];for(var Xn=ou[Pt(Lr,En[0])];0<Xn;)Xn=ou[2*Xn+Pt(Lr,En[Xn])];En=-Xn,pi[os+Qi]=En}l(xs,bs,pi,os,4),bs+=4,as[0+On]=En}}else En=Pt(Lr,156)?Pt(Lr,128)?1:3:Pt(Lr,163)?2:0,Ni.Ob[0]=En,h(pi,os,En,4),h(as,0,En,4);Ni.Dd=Pt(Lr,142)?Pt(Lr,114)?Pt(Lr,183)?1:3:2:0}if(di.m.Ka)return Ln(Nn,7,"Premature end-of-partition0 encountered.");for(;Nn.ja<Nn.za;++Nn.ja){if(di=zr,Lr=(Er=Nn).rb[Er.sb-1],pi=Er.rb[Er.sb+Er.ja],Sn=Er.ya[Er.aa+Er.ja],os=Er.kc?Sn.Ad:0)Lr.la=pi.la=0,Sn.Za||(Lr.Na=pi.Na=0),Sn.Hc=0,Sn.Gc=0,Sn.ia=0;else{var mr,wr;if(Lr=pi,pi=di,os=Er.Pa.Xc,as=Er.ya[Er.aa+Er.ja],Ni=Er.pb[as.$b],On=as.ad,xs=0,bs=Er.rb[Er.sb-1],En=Qi=0,h(On,xs,0,384),as.Za)var Ii=0,ji=os[3];else{Xn=f(16);var Jn=Lr.Na+bs.Na;if(Jn=cA(pi,os[1],Jn,Ni.Eb,0,Xn,0),Lr.Na=bs.Na=(0<Jn)+0,1<Jn)Ko(Xn,0,On,xs);else{var li=Xn[0]+3>>3;for(Xn=0;256>Xn;Xn+=16)On[xs+Xn]=li}Ii=1,ji=os[0]}var Dn=15&Lr.la,_i=15&bs.la;for(Xn=0;4>Xn;++Xn){var Bs=1&_i;for(li=wr=0;4>li;++li)Dn=Dn>>1|(Bs=(Jn=cA(pi,ji,Jn=Bs+(1&Dn),Ni.Sc,Ii,On,xs))>Ii)<<7,wr=wr<<2|(3<Jn?3:1<Jn?2:On[xs+0]!=0),xs+=16;Dn>>=4,_i=_i>>1|Bs<<7,Qi=(Qi<<8|wr)>>>0}for(ji=Dn,Ii=_i>>4,mr=0;4>mr;mr+=2){for(wr=0,Dn=Lr.la>>4+mr,_i=bs.la>>4+mr,Xn=0;2>Xn;++Xn){for(Bs=1&_i,li=0;2>li;++li)Jn=Bs+(1&Dn),Dn=Dn>>1|(Bs=0<(Jn=cA(pi,os[2],Jn,Ni.Qc,0,On,xs)))<<3,wr=wr<<2|(3<Jn?3:1<Jn?2:On[xs+0]!=0),xs+=16;Dn>>=2,_i=_i>>1|Bs<<5}En|=wr<<4*mr,ji|=Dn<<4<<mr,Ii|=(240&_i)<<mr}Lr.la=ji,bs.la=Ii,as.Hc=Qi,as.Gc=En,as.ia=43690&En?0:Ni.ia,os=!(Qi|En)}if(0<Er.L&&(Er.wa[Er.Y+Er.ja]=Er.gd[Sn.$b][Sn.Za],Er.wa[Er.Y+Er.ja].La|=!os),di.Ka)return Ln(Nn,7,"Premature end-of-file encountered.")}if(Bc(Nn),Er=Ri,di=1,Sn=(zr=Nn).D,Lr=0<zr.L&&zr.M>=zr.zb&&zr.M<=zr.Va,zr.Aa==0)t:{if(Sn.M=zr.M,Sn.uc=Lr,xo(zr,Sn),di=1,Sn=(wr=zr.D).Nb,Lr=(En=Na[zr.L])*zr.R,pi=En/2*zr.B,Xn=16*Sn*zr.R,li=8*Sn*zr.B,os=zr.sa,as=zr.ta-Lr+Xn,Ni=zr.qa,On=zr.ra-pi+li,xs=zr.Ha,bs=zr.Ia-pi+li,_i=(Dn=wr.M)==0,Qi=Dn>=zr.Va-1,zr.Aa==2&&xo(zr,wr),wr.uc)for(Bs=(Jn=zr).D.M,n(Jn.D.uc),wr=Jn.yb;wr<Jn.Hb;++wr){Ii=wr,ji=Bs;var Zs=(So=(Yi=Jn).D).Nb;mr=Yi.R;var So=So.wa[So.Y+Ii],Mi=Yi.sa,Fn=Yi.ta+16*Zs*mr+16*Ii,jn=So.dd,wi=So.tc;if(wi!=0)if(n(3<=wi),Yi.L==1)0<Ii&&Tc(Mi,Fn,mr,wi+4),So.La&&Pc(Mi,Fn,mr,wi),0<ji&&Ic(Mi,Fn,mr,wi+4),So.La&&uo(Mi,Fn,mr,wi);else{var Cs=Yi.B,Eo=Yi.qa,Xs=Yi.ra+8*Zs*Cs+8*Ii,Ss=Yi.Ha,Yi=Yi.Ia+8*Zs*Cs+8*Ii;Zs=So.ld,0<Ii&&(ws(Mi,Fn,mr,wi+4,jn,Zs),Fc(Eo,Xs,Ss,Yi,Cs,wi+4,jn,Zs)),So.La&&(La(Mi,Fn,mr,wi,jn,Zs),Ma(Eo,Xs,Ss,Yi,Cs,wi,jn,Zs)),0<ji&&(Xi(Mi,Fn,mr,wi+4,jn,Zs),Tn(Eo,Xs,Ss,Yi,Cs,wi+4,jn,Zs)),So.La&&(sc(Mi,Fn,mr,wi,jn,Zs),IA(Eo,Xs,Ss,Yi,Cs,wi,jn,Zs))}}if(zr.ia&&alert("todo:DitherRow"),Er.put!=null){if(wr=16*Dn,Dn=16*(Dn+1),_i?(Er.y=zr.sa,Er.O=zr.ta+Xn,Er.f=zr.qa,Er.N=zr.ra+li,Er.ea=zr.Ha,Er.W=zr.Ia+li):(wr-=En,Er.y=os,Er.O=as,Er.f=Ni,Er.N=On,Er.ea=xs,Er.W=bs),Qi||(Dn-=En),Dn>Er.o&&(Dn=Er.o),Er.F=null,Er.J=null,zr.Fa!=null&&0<zr.Fa.length&&wr<Dn&&(Er.J=Si(zr,Er,wr,Dn-wr),Er.F=zr.mb,Er.F==null&&Er.F.length==0)){di=Ln(zr,3,"Could not decode alpha data.");break t}wr<Er.j&&(En=Er.j-wr,wr=Er.j,n(!(1&En)),Er.O+=zr.R*En,Er.N+=zr.B*(En>>1),Er.W+=zr.B*(En>>1),Er.F!=null&&(Er.J+=Er.width*En)),wr<Dn&&(Er.O+=Er.v,Er.N+=Er.v>>1,Er.W+=Er.v>>1,Er.F!=null&&(Er.J+=Er.v),Er.ka=wr-Er.j,Er.U=Er.va-Er.v,Er.T=Dn-wr,di=Er.put(Er))}Sn+1!=zr.Ic||Qi||(l(zr.sa,zr.ta-Lr,os,as+16*zr.R,Lr),l(zr.qa,zr.ra-pi,Ni,On+8*zr.B,pi),l(zr.Ha,zr.Ia-pi,xs,bs+8*zr.B,pi))}if(!di)return Ln(Nn,6,"Output aborted.")}return 1})(Xe,bt)),bt.bc!=null&&bt.bc(bt),It&=1}return It?(Xe.cb=0,It):0})(T,ee)||(D=T.a)}}else D=T.a}D==0&&Be.Oa!=null&&Be.Oa.fd&&(D=iA(Be.ba))}Be=D}_e=Be!=0?null:11>_e?Te.f.RGBA.eb:Te.f.kb.y}else _e=null;return _e};var QA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function S(be,Ge){for(var le="",ge=0;ge<4;ge++)le+=String.fromCharCode(be[Ge++]);return le}function I(be,Ge){return be[Ge+0]|be[Ge+1]<<8}function U(be,Ge){return(be[Ge+0]|be[Ge+1]<<8|be[Ge+2]<<16)>>>0}function Q(be,Ge){return(be[Ge+0]|be[Ge+1]<<8|be[Ge+2]<<16|be[Ge+3]<<24)>>>0}new x;var P=[0],$=[0],z=[],O=new x,W=e,ne=(function(be,Ge){var le={},ge=0,Pe=!1,Fe=0,pt=0;if(le.frames=[],!(function(ie,Ee){for(var De=0;De<4;De++)if(ie[Ee+De]!="RIFF".charCodeAt(De))return!0;return!1})(be,Ge)){for(Q(be,Ge+=4),Ge+=8;Ge<be.length;){var ut=S(be,Ge),At=Q(be,Ge+=4);Ge+=4;var Ne=At+(1&At);switch(ut){case"VP8 ":case"VP8L":le.frames[ge]===void 0&&(le.frames[ge]={}),(Ue=le.frames[ge]).src_off=Pe?pt:Ge-8,Ue.src_size=Fe+At+8,ge++,Pe&&(Pe=!1,Fe=0,pt=0);break;case"VP8X":(Ue=le.header={}).feature_flags=be[Ge];var Ie=Ge+4;Ue.canvas_width=1+U(be,Ie),Ie+=3,Ue.canvas_height=1+U(be,Ie),Ie+=3;break;case"ALPH":Pe=!0,Fe=Ne+8,pt=Ge-8;break;case"ANIM":(Ue=le.header).bgcolor=Q(be,Ge),Ie=Ge+4,Ue.loop_count=I(be,Ie),Ie+=2;break;case"ANMF":var yt,Ue;(Ue=le.frames[ge]={}).offset_x=2*U(be,Ge),Ge+=3,Ue.offset_y=2*U(be,Ge),Ge+=3,Ue.width=1+U(be,Ge),Ge+=3,Ue.height=1+U(be,Ge),Ge+=3,Ue.duration=U(be,Ge),Ge+=3,yt=be[Ge++],Ue.dispose=1&yt,Ue.blend=yt>>1&1}ut!="ANMF"&&(Ge+=Ne)}return le}})(W,0);ne.response=W,ne.rgbaoutput=!0,ne.dataurl=!1;var ce=ne.header?ne.header:null,de=ne.frames?ne.frames:null;if(ce){ce.loop_counter=ce.loop_count,P=[ce.canvas_height],$=[ce.canvas_width];for(var Se=0;Se<de.length&&de[Se].blend!=0;Se++);}var ze=de[0],Ze=O.WebPDecodeRGBA(W,ze.src_off,ze.src_size,$,P);ze.rgba=Ze,ze.imgwidth=$[0],ze.imgheight=P[0];for(var Qe=0;Qe<$[0]*P[0]*4;Qe++)z[Qe]=Ze[Qe];return this.width=$,this.height=P,this.data=z,this}(function(e){var n,i,l,h,f,m,a,x,S,I=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new x,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new m,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new m,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new U(this),n=this.internal.f2,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,h=this.internal.getHorizontalCoordinate,f=this.internal.getVerticalCoordinate,m=this.internal.Point,a=this.internal.Rectangle,x=this.internal.Matrix,S=new I}]);var U=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ee=ie;Object.defineProperty(this,"pdf",{get:function(){return Ee}});var De=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return De},set:function(He){De=!!He}});var Ye=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ye},set:function(He){Ye=!!He}});var at=0;Object.defineProperty(this,"posX",{get:function(){return at},set:function(He){isNaN(He)||(at=He)}});var tt=0;Object.defineProperty(this,"posY",{get:function(){return tt},set:function(He){isNaN(He)||(tt=He)}}),Object.defineProperty(this,"margin",{get:function(){return S.margin},set:function(He){var yr;typeof He=="number"?yr=[He,He,He,He]:((yr=new Array(4))[0]=He[0],yr[1]=He.length>=2?He[1]:yr[0],yr[2]=He.length>=3?He[2]:yr[0],yr[3]=He.length>=4?He[3]:yr[1]),S.margin=yr}});var wt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return wt},set:function(He){wt=He}});var Et=0;Object.defineProperty(this,"lastBreak",{get:function(){return Et},set:function(He){Et=He}});var Pt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pt},set:function(He){Pt=He}}),Object.defineProperty(this,"ctx",{get:function(){return S},set:function(He){He instanceof I&&(S=He)}}),Object.defineProperty(this,"path",{get:function(){return S.path},set:function(He){S.path=He}});var Wt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Wt},set:function(He){Wt=He}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(He){var yr;yr=Q(He),this.ctx.fillStyle=yr.style,this.ctx.isFillTransparent=yr.a===0,this.ctx.fillOpacity=yr.a,this.pdf.setFillColor(yr.r,yr.g,yr.b,{a:yr.a}),this.pdf.setTextColor(yr.r,yr.g,yr.b,{a:yr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(He){var yr=Q(He);this.ctx.strokeStyle=yr.style,this.ctx.isStrokeTransparent=yr.a===0,this.ctx.strokeOpacity=yr.a,yr.a===0?this.pdf.setDrawColor(255,255,255):(yr.a,this.pdf.setDrawColor(yr.r,yr.g,yr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(He){["butt","round","square"].indexOf(He)!==-1&&(this.ctx.lineCap=He,this.pdf.setLineCap(He))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(He){isNaN(He)||(this.ctx.lineWidth=He,this.pdf.setLineWidth(He))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(He){["bevel","round","miter"].indexOf(He)!==-1&&(this.ctx.lineJoin=He,this.pdf.setLineJoin(He))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(He){isNaN(He)||(this.ctx.miterLimit=He,this.pdf.setMiterLimit(He))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(He){this.ctx.textBaseline=He}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(He){["right","end","center","left","start"].indexOf(He)!==-1&&(this.ctx.textAlign=He)}});var lr=null,fr=null,Br=null;Object.defineProperty(this,"fontFaces",{get:function(){return Br},set:function(He){lr=null,fr=null,Br=He}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(He){var yr;if(this.ctx.font=He,(yr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(He))!==null){var kr=yr[1];yr[2];var qr=yr[3],or=yr[4];yr[5];var $r=yr[6],Sr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(or)[2];or=Math.floor(Sr==="px"?parseFloat(or)*this.pdf.internal.scaleFactor:Sr==="em"?parseFloat(or)*this.pdf.getFontSize():parseFloat(or)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(or);var Qr=(function($e){var Bt,gt,st=[],xt=$e.trim();if(xt==="")return J_;if(xt in e5)return[e5[xt]];for(;xt!=="";){switch(gt=null,Bt=(xt=r5(xt)).charAt(0)){case'"':case"'":gt=cV(xt.substring(1),Bt);break;default:gt=AV(xt)}if(gt===null||(st.push(gt[0]),(xt=r5(gt[1]))!==""&&xt.charAt(0)!==","))return J_;xt=xt.replace(/^,/,"")}return st})($r);if(this.fontFaces){var Dr=(function($e,Bt){var gt=$e.getFontList(),st=JSON.stringify(gt);if(lr===null||fr!==st){var xt=(function(zt){var St=[];return Object.keys(zt).forEach(function(ar){zt[ar].forEach(function(Yt){var hr=null;switch(Yt){case"bold":hr={family:ar,weight:"bold"};break;case"italic":hr={family:ar,style:"italic"};break;case"bolditalic":hr={family:ar,weight:"bold",style:"italic"};break;case"":case"normal":hr={family:ar}}hr!==null&&(hr.ref={name:ar,style:Yt},St.push(hr))})}),St})(gt);lr=(function(zt){for(var St={},ar=0;ar<zt.length;++ar){var Yt=Y_(zt[ar]),hr=Yt.family,tn=Yt.stretch,Ir=Yt.style,dt=Yt.weight;St[hr]=St[hr]||{},St[hr][tn]=St[hr][tn]||{},St[hr][tn][Ir]=St[hr][tn][Ir]||{},St[hr][tn][Ir][dt]=Yt}return St})(xt.concat(Bt)),fr=st}return lr})(this.pdf,this.fontFaces),Qn=Qr.map(function($e){return{family:$e,stretch:"normal",weight:qr,style:kr}}),un=(function($e,Bt,gt){for(var st=(gt=gt||{}).defaultFontFamily||"times",xt=Object.assign({},lV,gt.genericFontFamilies||{}),zt=null,St=null,ar=0;ar<Bt.length;++ar)if(xt[(zt=Y_(Bt[ar])).family]&&(zt.family=xt[zt.family]),$e.hasOwnProperty(zt.family)){St=$e[zt.family];break}if(!(St=St||$e[st]))throw new Error("Could not find a font-family for the rule '"+t5(zt)+"' and default family '"+st+"'.");if(St=(function(Yt,hr){if(hr[Yt])return hr[Yt];var tn=pw[Yt],Ir=tn<=pw.normal?-1:1,dt=JC(hr,P4,tn,Ir);if(!dt)throw new Error("Could not find a matching font-stretch value for "+Yt);return dt})(zt.stretch,St),St=(function(Yt,hr){if(hr[Yt])return hr[Yt];for(var tn=T4[Yt],Ir=0;Ir<tn.length;++Ir)if(hr[tn[Ir]])return hr[tn[Ir]];throw new Error("Could not find a matching font-style for "+Yt)})(zt.style,St),!(St=(function(Yt,hr){if(hr[Yt])return hr[Yt];if(Yt===400&&hr[500])return hr[500];if(Yt===500&&hr[400])return hr[400];var tn=aV[Yt],Ir=JC(hr,L4,tn,Yt<400?-1:1);if(!Ir)throw new Error("Could not find a matching font-weight for value "+Yt);return Ir})(zt.weight,St)))throw new Error("Failed to resolve a font for the rule '"+t5(zt)+"'.");return St})(Dr,Qn);this.pdf.setFont(un.ref.name,un.ref.style)}else{var ft="";(qr==="bold"||parseInt(qr,10)>=700||kr==="bold")&&(ft="bold"),kr==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var he="",fe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ye=0;ye<Qr.length;ye++){if(this.pdf.internal.getFont(Qr[ye],ft,{noFallback:!0,disableWarning:!0})!==void 0){he=Qr[ye];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(Qr[ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)he=Qr[ye],ft="bold";else if(this.pdf.internal.getFont(Qr[ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){he=Qr[ye],ft="normal";break}}if(he===""){for(var Ke=0;Ke<Qr.length;Ke++)if(fe[Qr[Ke]]){he=fe[Qr[Ke]];break}}he=he===""?"Times":he,this.pdf.setFont(he,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(He){this.ctx.globalCompositeOperation=He}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(He){this.ctx.globalAlpha=He}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(He){this.ctx.lineDashOffset=He,Ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(He){this.ctx.lineDash=He,Ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(He){this.ctx.ignoreClearRect=!!He}})};U.prototype.setLineDash=function(ie){this.lineDash=ie},U.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},U.prototype.fill=function(){de.call(this,"fill",!1)},U.prototype.stroke=function(){de.call(this,"stroke",!1)},U.prototype.beginPath=function(){this.path=[{type:"begin"}]},U.prototype.moveTo=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw ps.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var De=this.ctx.transform.applyToPoint(new m(ie,Ee));this.path.push({type:"mt",x:De.x,y:De.y}),this.ctx.lastPoint=new m(ie,Ee)},U.prototype.closePath=function(){var ie=new m(0,0),Ee=0;for(Ee=this.path.length-1;Ee!==-1;Ee--)if(this.path[Ee].type==="begin"&&ts(this.path[Ee+1])==="object"&&typeof this.path[Ee+1].x=="number"){ie=new m(this.path[Ee+1].x,this.path[Ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new m(ie.x,ie.y)},U.prototype.lineTo=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw ps.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var De=this.ctx.transform.applyToPoint(new m(ie,Ee));this.path.push({type:"lt",x:De.x,y:De.y}),this.ctx.lastPoint=new m(De.x,De.y)},U.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),de.call(this,null,!0)},U.prototype.quadraticCurveTo=function(ie,Ee,De,Ye){if(isNaN(De)||isNaN(Ye)||isNaN(ie)||isNaN(Ee))throw ps.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var at=this.ctx.transform.applyToPoint(new m(De,Ye)),tt=this.ctx.transform.applyToPoint(new m(ie,Ee));this.path.push({type:"qct",x1:tt.x,y1:tt.y,x:at.x,y:at.y}),this.ctx.lastPoint=new m(at.x,at.y)},U.prototype.bezierCurveTo=function(ie,Ee,De,Ye,at,tt){if(isNaN(at)||isNaN(tt)||isNaN(ie)||isNaN(Ee)||isNaN(De)||isNaN(Ye))throw ps.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var wt=this.ctx.transform.applyToPoint(new m(at,tt)),Et=this.ctx.transform.applyToPoint(new m(ie,Ee)),Pt=this.ctx.transform.applyToPoint(new m(De,Ye));this.path.push({type:"bct",x1:Et.x,y1:Et.y,x2:Pt.x,y2:Pt.y,x:wt.x,y:wt.y}),this.ctx.lastPoint=new m(wt.x,wt.y)},U.prototype.arc=function(ie,Ee,De,Ye,at,tt){if(isNaN(ie)||isNaN(Ee)||isNaN(De)||isNaN(Ye)||isNaN(at))throw ps.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(tt=!!tt,!this.ctx.transform.isIdentity){var wt=this.ctx.transform.applyToPoint(new m(ie,Ee));ie=wt.x,Ee=wt.y;var Et=this.ctx.transform.applyToPoint(new m(0,De)),Pt=this.ctx.transform.applyToPoint(new m(0,0));De=Math.sqrt(Math.pow(Et.x-Pt.x,2)+Math.pow(Et.y-Pt.y,2))}Math.abs(at-Ye)>=2*Math.PI&&(Ye=0,at=2*Math.PI),this.path.push({type:"arc",x:ie,y:Ee,radius:De,startAngle:Ye,endAngle:at,counterclockwise:tt})},U.prototype.arcTo=function(ie,Ee,De,Ye,at){throw new Error("arcTo not implemented.")},U.prototype.rect=function(ie,Ee,De,Ye){if(isNaN(ie)||isNaN(Ee)||isNaN(De)||isNaN(Ye))throw ps.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,Ee),this.lineTo(ie+De,Ee),this.lineTo(ie+De,Ee+Ye),this.lineTo(ie,Ee+Ye),this.lineTo(ie,Ee),this.lineTo(ie+De,Ee),this.lineTo(ie,Ee)},U.prototype.fillRect=function(ie,Ee,De,Ye){if(isNaN(ie)||isNaN(Ee)||isNaN(De)||isNaN(Ye))throw ps.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!P.call(this)){var at={};this.lineCap!=="butt"&&(at.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(at.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,Ee,De,Ye),this.fill(),at.hasOwnProperty("lineCap")&&(this.lineCap=at.lineCap),at.hasOwnProperty("lineJoin")&&(this.lineJoin=at.lineJoin)}},U.prototype.strokeRect=function(ie,Ee,De,Ye){if(isNaN(ie)||isNaN(Ee)||isNaN(De)||isNaN(Ye))throw ps.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");$.call(this)||(this.beginPath(),this.rect(ie,Ee,De,Ye),this.stroke())},U.prototype.clearRect=function(ie,Ee,De,Ye){if(isNaN(ie)||isNaN(Ee)||isNaN(De)||isNaN(Ye))throw ps.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,Ee,De,Ye))},U.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,De=0;De<this.pdf.internal.getNumberOfPages();De++)this.pdf.setPage(De+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ee),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ye=new I(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ye}},U.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,De=0;De<this.pdf.internal.getNumberOfPages();De++)this.pdf.setPage(De+1),this.pdf.internal.out("Q");this.pdf.setPage(Ee),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},U.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Q=function(ie){var Ee,De,Ye,at;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))Ee=0,De=0,Ye=0,at=0;else{var tt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(tt!==null)Ee=parseInt(tt[1]),De=parseInt(tt[2]),Ye=parseInt(tt[3]),at=1;else if((tt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)Ee=parseInt(tt[1]),De=parseInt(tt[2]),Ye=parseInt(tt[3]),at=parseFloat(tt[4]);else{if(at=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var wt=new b4(ie);ie=wt.ok?wt.toHex():"#000000"}ie.length===4?(Ee=ie.substring(1,2),Ee+=Ee,De=ie.substring(2,3),De+=De,Ye=ie.substring(3,4),Ye+=Ye):(Ee=ie.substring(1,3),De=ie.substring(3,5),Ye=ie.substring(5,7)),Ee=parseInt(Ee,16),De=parseInt(De,16),Ye=parseInt(Ye,16)}}return{r:Ee,g:De,b:Ye,a:at,style:ie}},P=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},$=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};U.prototype.fillText=function(ie,Ee,De,Ye){if(isNaN(Ee)||isNaN(De)||typeof ie!="string")throw ps.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ye=isNaN(Ye)?void 0:Ye,!P.call(this)){var at=Ne(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;ge.call(this,{text:ie,x:Ee,y:De,scale:tt,angle:at,align:this.textAlign,maxWidth:Ye})}},U.prototype.strokeText=function(ie,Ee,De,Ye){if(isNaN(Ee)||isNaN(De)||typeof ie!="string")throw ps.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!$.call(this)){Ye=isNaN(Ye)?void 0:Ye;var at=Ne(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;ge.call(this,{text:ie,x:Ee,y:De,scale:tt,renderingMode:"stroke",angle:at,align:this.textAlign,maxWidth:Ye})}},U.prototype.measureText=function(ie){if(typeof ie!="string")throw ps.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ee=this.pdf,De=this.pdf.internal.scaleFactor,Ye=Ee.internal.getFontSize(),at=Ee.getStringUnitWidth(ie)*Ye/Ee.internal.scaleFactor;return new function(tt){var wt=(tt=tt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return wt}}),this}({width:at*=Math.round(96*De/72*1e4)/1e4})},U.prototype.scale=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw ps.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var De=new x(ie,0,0,Ee,0,0);this.ctx.transform=this.ctx.transform.multiply(De)},U.prototype.rotate=function(ie){if(isNaN(ie))throw ps.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ee=new x(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(Ee)},U.prototype.translate=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw ps.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var De=new x(1,0,0,1,ie,Ee);this.ctx.transform=this.ctx.transform.multiply(De)},U.prototype.transform=function(ie,Ee,De,Ye,at,tt){if(isNaN(ie)||isNaN(Ee)||isNaN(De)||isNaN(Ye)||isNaN(at)||isNaN(tt))throw ps.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var wt=new x(ie,Ee,De,Ye,at,tt);this.ctx.transform=this.ctx.transform.multiply(wt)},U.prototype.setTransform=function(ie,Ee,De,Ye,at,tt){ie=isNaN(ie)?1:ie,Ee=isNaN(Ee)?0:Ee,De=isNaN(De)?0:De,Ye=isNaN(Ye)?1:Ye,at=isNaN(at)?0:at,tt=isNaN(tt)?0:tt,this.ctx.transform=new x(ie,Ee,De,Ye,at,tt)};var z=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};U.prototype.drawImage=function(ie,Ee,De,Ye,at,tt,wt,Et,Pt){var Wt=this.pdf.getImageProperties(ie),lr=1,fr=1,Br=1,He=1;Ye!==void 0&&Et!==void 0&&(Br=Et/Ye,He=Pt/at,lr=Wt.width/Ye*Et/Ye,fr=Wt.height/at*Pt/at),tt===void 0&&(tt=Ee,wt=De,Ee=0,De=0),Ye!==void 0&&Et===void 0&&(Et=Ye,Pt=at),Ye===void 0&&Et===void 0&&(Et=Wt.width,Pt=Wt.height);var yr=this.ctx.transform.decompose(),kr=Ne(yr.rotate.shx),qr=new x,or=(qr=(qr=(qr=qr.multiply(yr.translate)).multiply(yr.skew)).multiply(yr.scale)).applyToRectangle(new a(tt-Ee*Br,wt-De*He,Ye*lr,at*fr));if(this.autoPaging){for(var $r,Sr=O.call(this,or),Qr=[],Dr=0;Dr<Sr.length;Dr+=1)Qr.indexOf(Sr[Dr])===-1&&Qr.push(Sr[Dr]);ce(Qr);for(var Qn=Qr[0],un=Qr[Qr.length-1],ft=Qn;ft<un+1;ft++){this.pdf.setPage(ft);var he=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],fe=ft===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=ft===1?0:ye+(ft-2)*Ke;if(this.ctx.clip_path.length!==0){var Bt=this.path;$r=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne($r,this.posX+this.margin[3],-$e+fe+this.ctx.prevPageLastElemOffset),Se.call(this,"fill",!0),this.path=Bt}var gt=JSON.parse(JSON.stringify(or));gt=ne([gt],this.posX+this.margin[3],-$e+fe+this.ctx.prevPageLastElemOffset)[0];var st=(ft>Qn||ft<un)&&z.call(this);st&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],he,Ke,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",gt.x,gt.y,gt.w,gt.h,null,null,kr),st&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(ie,"JPEG",or.x,or.y,or.w,or.h,null,null,kr)};var O=function(ie,Ee,De){var Ye=[];Ee=Ee||this.pdf.internal.pageSize.width,De=De||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var at=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":Ye.push(Math.floor((ie.y+at)/De)+1);break;case"arc":Ye.push(Math.floor((ie.y+at-ie.radius)/De)+1),Ye.push(Math.floor((ie.y+at+ie.radius)/De)+1);break;case"qct":var tt=Ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);Ye.push(Math.floor((tt.y+at)/De)+1),Ye.push(Math.floor((tt.y+tt.h+at)/De)+1);break;case"bct":var wt=yt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);Ye.push(Math.floor((wt.y+at)/De)+1),Ye.push(Math.floor((wt.y+wt.h+at)/De)+1);break;case"rect":Ye.push(Math.floor((ie.y+at)/De)+1),Ye.push(Math.floor((ie.y+ie.h+at)/De)+1)}for(var Et=0;Et<Ye.length;Et+=1)for(;this.pdf.internal.getNumberOfPages()<Ye[Et];)W.call(this);return Ye},W=function(){var ie=this.fillStyle,Ee=this.strokeStyle,De=this.font,Ye=this.lineCap,at=this.lineWidth,tt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=Ee,this.font=De,this.lineCap=Ye,this.lineWidth=at,this.lineJoin=tt},ne=function(ie,Ee,De){for(var Ye=0;Ye<ie.length;Ye++)switch(ie[Ye].type){case"bct":ie[Ye].x2+=Ee,ie[Ye].y2+=De;case"qct":ie[Ye].x1+=Ee,ie[Ye].y1+=De;default:ie[Ye].x+=Ee,ie[Ye].y+=De}return ie},ce=function(ie){return ie.sort(function(Ee,De){return Ee-De})},de=function(ie,Ee){var De=this.fillStyle,Ye=this.strokeStyle,at=this.lineCap,tt=this.lineWidth,wt=Math.abs(tt*this.ctx.transform.scaleX),Et=this.lineJoin;if(this.autoPaging){for(var Pt,Wt,lr=JSON.parse(JSON.stringify(this.path)),fr=JSON.parse(JSON.stringify(this.path)),Br=[],He=0;He<fr.length;He++)if(fr[He].x!==void 0)for(var yr=O.call(this,fr[He]),kr=0;kr<yr.length;kr+=1)Br.indexOf(yr[kr])===-1&&Br.push(yr[kr]);for(var qr=0;qr<Br.length;qr++)for(;this.pdf.internal.getNumberOfPages()<Br[qr];)W.call(this);ce(Br);for(var or=Br[0],$r=Br[Br.length-1],Sr=or;Sr<$r+1;Sr++){this.pdf.setPage(Sr),this.fillStyle=De,this.strokeStyle=Ye,this.lineCap=at,this.lineWidth=wt,this.lineJoin=Et;var Qr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dr=Sr===1?this.posY+this.margin[0]:this.margin[0],Qn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],un=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Sr===1?0:Qn+(Sr-2)*un;if(this.ctx.clip_path.length!==0){var he=this.path;Pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(Pt,this.posX+this.margin[3],-ft+Dr+this.ctx.prevPageLastElemOffset),Se.call(this,ie,!0),this.path=he}if(Wt=JSON.parse(JSON.stringify(lr)),this.path=ne(Wt,this.posX+this.margin[3],-ft+Dr+this.ctx.prevPageLastElemOffset),Ee===!1||Sr===0){var fe=(Sr>or||Sr<$r)&&z.call(this);fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qr,un,null).clip().discardPath()),Se.call(this,ie,Ee),fe&&this.pdf.restoreGraphicsState()}this.lineWidth=tt}this.path=lr}else this.lineWidth=wt,Se.call(this,ie,Ee),this.lineWidth=tt},Se=function(ie,Ee){if((ie!=="stroke"||Ee||!$.call(this))&&(ie==="stroke"||Ee||!P.call(this))){for(var De,Ye,at=[],tt=this.path,wt=0;wt<tt.length;wt++){var Et=tt[wt];switch(Et.type){case"begin":at.push({begin:!0});break;case"close":at.push({close:!0});break;case"mt":at.push({start:Et,deltas:[],abs:[]});break;case"lt":var Pt=at.length;if(tt[wt-1]&&!isNaN(tt[wt-1].x)&&(De=[Et.x-tt[wt-1].x,Et.y-tt[wt-1].y],Pt>0)){for(;Pt>=0;Pt--)if(at[Pt-1].close!==!0&&at[Pt-1].begin!==!0){at[Pt-1].deltas.push(De),at[Pt-1].abs.push(Et);break}}break;case"bct":De=[Et.x1-tt[wt-1].x,Et.y1-tt[wt-1].y,Et.x2-tt[wt-1].x,Et.y2-tt[wt-1].y,Et.x-tt[wt-1].x,Et.y-tt[wt-1].y],at[at.length-1].deltas.push(De);break;case"qct":var Wt=tt[wt-1].x+2/3*(Et.x1-tt[wt-1].x),lr=tt[wt-1].y+2/3*(Et.y1-tt[wt-1].y),fr=Et.x+2/3*(Et.x1-Et.x),Br=Et.y+2/3*(Et.y1-Et.y),He=Et.x,yr=Et.y;De=[Wt-tt[wt-1].x,lr-tt[wt-1].y,fr-tt[wt-1].x,Br-tt[wt-1].y,He-tt[wt-1].x,yr-tt[wt-1].y],at[at.length-1].deltas.push(De);break;case"arc":at.push({deltas:[],abs:[],arc:!0}),Array.isArray(at[at.length-1].abs)&&at[at.length-1].abs.push(Et)}}Ye=Ee?null:ie==="stroke"?"stroke":"fill";for(var kr=!1,qr=0;qr<at.length;qr++)if(at[qr].arc)for(var or=at[qr].abs,$r=0;$r<or.length;$r++){var Sr=or[$r];Sr.type==="arc"?Qe.call(this,Sr.x,Sr.y,Sr.radius,Sr.startAngle,Sr.endAngle,Sr.counterclockwise,void 0,Ee,!kr):Pe.call(this,Sr.x,Sr.y),kr=!0}else if(at[qr].close===!0)this.pdf.internal.out("h"),kr=!1;else if(at[qr].begin!==!0){var Qr=at[qr].start.x,Dr=at[qr].start.y;Fe.call(this,at[qr].deltas,Qr,Dr),kr=!0}Ye&&be.call(this,Ye),Ee&&Ge.call(this)}},ze=function(ie){var Ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,De=Ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-De;case"top":return ie+Ee-De;case"hanging":return ie+Ee-2*De;case"middle":return ie+Ee/2-De;default:return ie}},Ze=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};U.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(Ee,De){this.colorStops.push([Ee,De])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},U.prototype.createPattern=function(){return this.createLinearGradient()},U.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Qe=function(ie,Ee,De,Ye,at,tt,wt,Et,Pt){for(var Wt=ut.call(this,De,Ye,at,tt),lr=0;lr<Wt.length;lr++){var fr=Wt[lr];lr===0&&(Pt?le.call(this,fr.x1+ie,fr.y1+Ee):Pe.call(this,fr.x1+ie,fr.y1+Ee)),pt.call(this,ie,Ee,fr.x2,fr.y2,fr.x3,fr.y3,fr.x4,fr.y4)}Et?Ge.call(this):be.call(this,wt)},be=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ge=function(){this.pdf.clip(),this.pdf.discardPath()},le=function(ie,Ee){this.pdf.internal.out(i(ie)+" "+l(Ee)+" m")},ge=function(ie){var Ee;switch(ie.align){case"right":case"end":Ee="right";break;case"center":Ee="center";break;default:Ee="left"}var De,Ye,at,tt=this.pdf.getTextDimensions(ie.text),wt=ze.call(this,ie.y),Et=Ze.call(this,wt)-tt.h,Pt=this.ctx.transform.applyToPoint(new m(ie.x,wt));if(this.autoPaging){var Wt=this.ctx.transform.decompose(),lr=new x;lr=(lr=(lr=lr.multiply(Wt.translate)).multiply(Wt.skew)).multiply(Wt.scale);for(var fr=this.ctx.transform.applyToRectangle(new a(ie.x,wt,tt.w,tt.h)),Br=lr.applyToRectangle(new a(ie.x,Et,tt.w,tt.h)),He=O.call(this,Br),yr=[],kr=0;kr<He.length;kr+=1)yr.indexOf(He[kr])===-1&&yr.push(He[kr]);ce(yr);for(var qr=yr[0],or=yr[yr.length-1],$r=qr;$r<or+1;$r++){this.pdf.setPage($r);var Sr=$r===1?this.posY+this.margin[0]:this.margin[0],Qr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dr=this.pdf.internal.pageSize.height-this.margin[2],Qn=Dr-this.margin[0],un=this.pdf.internal.pageSize.width-this.margin[1],ft=un-this.margin[3],he=$r===1?0:Qr+($r-2)*Qn;if(this.ctx.clip_path.length!==0){var fe=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(De,this.posX+this.margin[3],-1*he+Sr),Se.call(this,"fill",!0),this.path=fe}var ye=ne([JSON.parse(JSON.stringify(Br))],this.posX+this.margin[3],-he+Sr+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(Ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ye*ie.scale),at=this.lineWidth,this.lineWidth=at*ie.scale);var Ke=this.autoPaging!=="text";if(Ke||ye.y+ye.h<=Dr){if(Ke||ye.y>=Sr&&ye.x<=un){var $e=Ke?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||un-ye.x)[0],Bt=ne([JSON.parse(JSON.stringify(fr))],this.posX+this.margin[3],-he+Sr+this.ctx.prevPageLastElemOffset)[0],gt=Ke&&($r>qr||$r<or)&&z.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Qn,null).clip().discardPath()),this.pdf.text($e,Bt.x,Bt.y,{angle:ie.angle,align:Ee,renderingMode:ie.renderingMode}),gt&&this.pdf.restoreGraphicsState()}}else ye.y<Dr&&(this.ctx.prevPageLastElemOffset+=Dr-ye.y);ie.scale>=.01&&(this.pdf.setFontSize(Ye),this.lineWidth=at)}}else ie.scale>=.01&&(Ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ye*ie.scale),at=this.lineWidth,this.lineWidth=at*ie.scale),this.pdf.text(ie.text,Pt.x+this.posX,Pt.y+this.posY,{angle:ie.angle,align:Ee,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(Ye),this.lineWidth=at)},Pe=function(ie,Ee,De,Ye){De=De||0,Ye=Ye||0,this.pdf.internal.out(i(ie+De)+" "+l(Ee+Ye)+" l")},Fe=function(ie,Ee,De){return this.pdf.lines(ie,Ee,De,null,null)},pt=function(ie,Ee,De,Ye,at,tt,wt,Et){this.pdf.internal.out([n(h(De+ie)),n(f(Ye+Ee)),n(h(at+ie)),n(f(tt+Ee)),n(h(wt+ie)),n(f(Et+Ee)),"c"].join(" "))},ut=function(ie,Ee,De,Ye){for(var at=2*Math.PI,tt=Math.PI/2;Ee>De;)Ee-=at;var wt=Math.abs(De-Ee);wt<at&&Ye&&(wt=at-wt);for(var Et=[],Pt=Ye?-1:1,Wt=Ee;wt>1e-5;){var lr=Wt+Pt*Math.min(wt,tt);Et.push(At.call(this,ie,Wt,lr)),wt-=Math.abs(lr-Wt),Wt=lr}return Et},At=function(ie,Ee,De){var Ye=(De-Ee)/2,at=ie*Math.cos(Ye),tt=ie*Math.sin(Ye),wt=at,Et=-tt,Pt=wt*wt+Et*Et,Wt=Pt+wt*at+Et*tt,lr=4/3*(Math.sqrt(2*Pt*Wt)-Wt)/(wt*tt-Et*at),fr=wt-lr*Et,Br=Et+lr*wt,He=fr,yr=-Br,kr=Ye+Ee,qr=Math.cos(kr),or=Math.sin(kr);return{x1:ie*Math.cos(Ee),y1:ie*Math.sin(Ee),x2:fr*qr-Br*or,y2:fr*or+Br*qr,x3:He*qr-yr*or,y3:He*or+yr*qr,x4:ie*Math.cos(De),y4:ie*Math.sin(De)}},Ne=function(ie){return 180*ie/Math.PI},Ie=function(ie,Ee,De,Ye,at,tt){var wt=ie+.5*(De-ie),Et=Ee+.5*(Ye-Ee),Pt=at+.5*(De-at),Wt=tt+.5*(Ye-tt),lr=Math.min(ie,at,wt,Pt),fr=Math.max(ie,at,wt,Pt),Br=Math.min(Ee,tt,Et,Wt),He=Math.max(Ee,tt,Et,Wt);return new a(lr,Br,fr-lr,He-Br)},yt=function(ie,Ee,De,Ye,at,tt,wt,Et){var Pt,Wt,lr,fr,Br,He,yr,kr,qr,or,$r,Sr,Qr,Dr,Qn=De-ie,un=Ye-Ee,ft=at-De,he=tt-Ye,fe=wt-at,ye=Et-tt;for(Wt=0;Wt<41;Wt++)qr=(yr=(lr=ie+(Pt=Wt/40)*Qn)+Pt*((Br=De+Pt*ft)-lr))+Pt*(Br+Pt*(at+Pt*fe-Br)-yr),or=(kr=(fr=Ee+Pt*un)+Pt*((He=Ye+Pt*he)-fr))+Pt*(He+Pt*(tt+Pt*ye-He)-kr),Wt==0?($r=qr,Sr=or,Qr=qr,Dr=or):($r=Math.min($r,qr),Sr=Math.min(Sr,or),Qr=Math.max(Qr,qr),Dr=Math.max(Dr,or));return new a(Math.round($r),Math.round(Sr),Math.round(Qr-$r),Math.round(Dr-Sr))},Ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,Ee,De=(ie=this.ctx.lineDash,Ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:Ee}));this.prevLineDash!==De&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=De)}}})(fn.API),(function(e){var n=function(m){var a,x,S,I,U,Q,P,$,z,O;for(x=[],S=0,I=(m+=a="\0\0\0\0".slice(m.length%4||4)).length;I>S;S+=4)(U=(m.charCodeAt(S)<<24)+(m.charCodeAt(S+1)<<16)+(m.charCodeAt(S+2)<<8)+m.charCodeAt(S+3))!==0?(Q=(U=((U=((U=((U=(U-(O=U%85))/85)-(z=U%85))/85)-($=U%85))/85)-(P=U%85))/85)%85,x.push(Q+33,P+33,$+33,z+33,O+33)):x.push(122);return(function(W,ne){for(var ce=ne;ce>0;ce--)W.pop()})(x,a.length),String.fromCharCode.apply(String,x)+"~>"},i=function(m){var a,x,S,I,U,Q=String,P="length",$=255,z="charCodeAt",O="slice",W="replace";for(m[O](-2),m=m[O](0,-2)[W](/\s/g,"")[W]("z","!!!!!"),S=[],I=0,U=(m+=a="uuuuu"[O](m[P]%5||5))[P];U>I;I+=5)x=52200625*(m[z](I)-33)+614125*(m[z](I+1)-33)+7225*(m[z](I+2)-33)+85*(m[z](I+3)-33)+(m[z](I+4)-33),S.push($&x>>24,$&x>>16,$&x>>8,$&x);return(function(ne,ce){for(var de=ce;de>0;de--)ne.pop()})(S,a[P]),Q.fromCharCode.apply(Q,S)},l=function(m){return m.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},h=function(m){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((m=m.replace(/\s/g,"")).indexOf(">")!==-1&&(m=m.substr(0,m.indexOf(">"))),m.length%2&&(m+="0"),a.test(m)===!1)return"";for(var x="",S=0;S<m.length;S+=2)x+=String.fromCharCode("0x"+(m[S]+m[S+1]));return x},f=function(m){for(var a=new Uint8Array(m.length),x=m.length;x--;)a[x]=m.charCodeAt(x);return(a=lw(a)).reduce(function(S,I){return S+String.fromCharCode(I)},"")};e.processDataByFilters=function(m,a){var x=0,S=m||"",I=[];for(typeof(a=a||[])=="string"&&(a=[a]),x=0;x<a.length;x+=1)switch(a[x]){case"ASCII85Decode":case"/ASCII85Decode":S=i(S),I.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":S=n(S),I.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":S=h(S),I.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":S=l(S),I.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":S=f(S),I.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[x]+'" is not implemented')}return{data:S,reverseChain:I.reverse().join(" ")}}})(fn.API),(function(e){e.loadFile=function(n,i,l){return(function(h,f,m){f=f!==!1,m=typeof m=="function"?m:function(){};var a=void 0;try{a=(function(x,S,I){var U=new XMLHttpRequest,Q=0,P=function($){var z=$.length,O=[],W=String.fromCharCode;for(Q=0;Q<z;Q+=1)O.push(W(255&$.charCodeAt(Q)));return O.join("")};if(U.open("GET",x,!S),U.overrideMimeType("text/plain; charset=x-user-defined"),S===!1&&(U.onload=function(){U.status===200?I(P(this.responseText)):I(void 0)}),U.send(null),S&&U.status===200)return P(U.responseText)})(h,f,m)}catch{}return a})(n,i,l)},e.loadImageFile=e.loadFile})(fn.API),(function(e){function n(){return(Mn.html2canvas?Promise.resolve(Mn.html2canvas):k_(()=>Promise.resolve().then(()=>Q7),void 0)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function i(){return(Mn.DOMPurify?Promise.resolve(Mn.DOMPurify):k_(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var l=function(a){var x=ts(a);return x==="undefined"?"undefined":x==="string"||a instanceof String?"string":x==="number"||a instanceof Number?"number":x==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":x==="object"?"object":"unknown"},h=function(a,x){var S=document.createElement(a);for(var I in x.className&&(S.className=x.className),x.innerHTML&&x.dompurify&&(S.innerHTML=x.dompurify.sanitize(x.innerHTML)),x.style)S.style[I]=x.style[I];return S},f=function a(x,S){for(var I=x.nodeType===3?document.createTextNode(x.nodeValue):x.cloneNode(!1),U=x.firstChild;U;U=U.nextSibling)S!==!0&&U.nodeType===1&&U.nodeName==="SCRIPT"||I.appendChild(a(U,S));return x.nodeType===1&&(x.nodeName==="CANVAS"?(I.width=x.width,I.height=x.height,I.getContext("2d").drawImage(x,0,0)):x.nodeName!=="TEXTAREA"&&x.nodeName!=="SELECT"||(I.value=x.value),I.addEventListener("load",function(){I.scrollTop=x.scrollTop,I.scrollLeft=x.scrollLeft},!0)),I},m=function a(x){var S=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),I=a.convert(Promise.resolve(),S);return(I=I.setProgress(1,a,1,[a])).set(x)};(m.prototype=Object.create(Promise.prototype)).constructor=m,m.convert=function(a,x){return a.__proto__=x||m.prototype,a},m.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},m.prototype.from=function(a,x){return this.then(function(){switch(x=x||(function(S){switch(l(S)){case"string":return"string";case"element":return S.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),x){case"string":return this.then(i).then(function(S){return this.set({src:h("div",{innerHTML:a,dompurify:S})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},m.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},m.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},x=f(this.prop.src,this.opt.html2canvas.javascriptEnabled);x.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=h("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=h("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(x),this.prop.container.firstChild.appendChild(h("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},m.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(n).then(function(x){var S=Object.assign({},this.opt.html2canvas);return delete S.onrendered,x(this.prop.container,S)}).then(function(x){(this.opt.html2canvas.onrendered||function(){})(x),this.prop.canvas=x,document.body.removeChild(this.prop.overlay)})},m.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(n).then(function(x){var S=this.opt.jsPDF,I=this.opt.fontFaces,U=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Q=Object.assign({async:!0,allowTaint:!0,scale:U,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Q.onrendered,S.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,S.context2d.posX=this.opt.x,S.context2d.posY=this.opt.y,S.context2d.margin=this.opt.margin,S.context2d.fontFaces=I,I)for(var P=0;P<I.length;++P){var $=I[P],z=$.src.find(function(O){return O.format==="truetype"});z&&S.addFont(z.url,$.ref.name,$.ref.style)}return Q.windowHeight=Q.windowHeight||0,Q.windowHeight=Q.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Q.windowHeight,S.context2d.save(!0),x(this.prop.container,Q)}).then(function(x){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(x),this.prop.canvas=x,document.body.removeChild(this.prop.overlay)})},m.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},m.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},m.prototype.output=function(a,x,S){return(S=S||"pdf").toLowerCase()==="img"||S.toLowerCase()==="image"?this.outputImg(a,x):this.outputPdf(a,x)},m.prototype.outputPdf=function(a,x){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,x)})},m.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},m.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},m.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},m.prototype.set=function(a){if(l(a)!=="object")return this;var x=Object.keys(a||{}).map(function(S){if(S in m.template.prop)return function(){this.prop[S]=a[S]};switch(S){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[S]=a[S]}}},this);return this.then(function(){return this.thenList(x)})},m.prototype.get=function(a,x){return this.then(function(){var S=a in m.template.prop?this.prop[a]:this.opt[a];return x?x(S):S})},m.prototype.setMargin=function(a){return this.then(function(){switch(l(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},m.prototype.setPageSize=function(a){function x(S,I){return Math.floor(S*I/72*96)}return this.then(function(){(a=a||fn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:x(a.inner.width,a.k),height:x(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},m.prototype.setProgress=function(a,x,S,I){return a!=null&&(this.progress.val=a),x!=null&&(this.progress.state=x),S!=null&&(this.progress.n=S),I!=null&&(this.progress.stack=I),this.progress.ratio=this.progress.val/this.progress.state,this},m.prototype.updateProgress=function(a,x,S,I){return this.setProgress(a?this.progress.val+a:null,x||null,S?this.progress.n+S:null,I?this.progress.stack.concat(I):null)},m.prototype.then=function(a,x){var S=this;return this.thenCore(a,x,function(I,U){return S.updateProgress(null,null,1,[I]),Promise.prototype.then.call(this,function(Q){return S.updateProgress(null,I),Q}).then(I,U).then(function(Q){return S.updateProgress(1),Q})})},m.prototype.thenCore=function(a,x,S){S=S||Promise.prototype.then;var I=this;a&&(a=a.bind(I)),x&&(x=x.bind(I));var U=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?I:m.convert(Object.assign({},I),Promise.prototype),Q=S.call(U,a,x);return m.convert(Q,I.__proto__)},m.prototype.thenExternal=function(a,x){return Promise.prototype.then.call(this,a,x)},m.prototype.thenList=function(a){var x=this;return a.forEach(function(S){x=x.thenCore(S)}),x},m.prototype.catch=function(a){a&&(a=a.bind(this));var x=Promise.prototype.catch.call(this,a);return m.convert(x,this)},m.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},m.prototype.error=function(a){return this.then(function(){throw new Error(a)})},m.prototype.using=m.prototype.set,m.prototype.saveAs=m.prototype.save,m.prototype.export=m.prototype.output,m.prototype.run=m.prototype.then,fn.getPageSize=function(a,x,S){if(ts(a)==="object"){var I=a;a=I.orientation,x=I.unit||x,S=I.format||S}x=x||"mm",S=S||"a4",a=(""+(a||"P")).toLowerCase();var U,Q=(""+S).toLowerCase(),P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(x){case"pt":U=1;break;case"mm":U=72/25.4;break;case"cm":U=72/2.54;break;case"in":U=72;break;case"px":U=.75;break;case"pc":case"em":U=12;break;case"ex":U=6;break;default:throw"Invalid unit: "+x}var $,z=0,O=0;if(P.hasOwnProperty(Q))z=P[Q][1]/U,O=P[Q][0]/U;else try{z=S[1],O=S[0]}catch{throw new Error("Invalid format: "+S)}if(a==="p"||a==="portrait")a="p",O>z&&($=O,O=z,z=$);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",z>O&&($=O,O=z,z=$)}return{width:O,height:z,unit:x,k:U,orientation:a}},e.html=function(a,x){(x=x||{}).callback=x.callback||function(){},x.html2canvas=x.html2canvas||{},x.html2canvas.canvas=x.html2canvas.canvas||this.canvas,x.jsPDF=x.jsPDF||this,x.fontFaces=x.fontFaces?x.fontFaces.map(Y_):null;var S=new m(x);return x.worker?S:S.from(a).doCallback()}})(fn.API),fn.API.addJS=function(e){return i5=e,this.internal.events.subscribe("postPutResources",function(){C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+i5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C0!==void 0&&n5!==void 0&&this.internal.out("/Names <</JavaScript "+C0+" 0 R>>")}),this},(function(e){var n;e.events.push(["postPutResources",function(){var i=this,l=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var h=i.outline.render().split(/\r\n/),f=0;f<h.length;f++){var m=h[f],a=l.exec(m);if(a!=null){var x=a[1];i.internal.newObjectDeferredBegin(x,!1)}i.internal.write(m)}if(this.outline.createNamedDestinations){var S=this.internal.pages.length,I=[];for(f=0;f<S;f++){var U=i.internal.newObject();I.push(U);var Q=i.internal.getPageInfo(f+1);i.internal.write("<< /D["+Q.objId+" 0 R /XYZ null null null]>> endobj")}var P=i.internal.newObject();for(i.internal.write("<< /Names [ "),f=0;f<I.length;f++)i.internal.write("(page_"+(f+1)+")"+I[f]+" 0 R");i.internal.write(" ] >>","endobj"),n=i.internal.newObject(),i.internal.write("<< /Dests "+P+" 0 R"),i.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var i=this;i.outline.root.children.length>0&&(i.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&i.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(l,h,f){var m={title:h,options:f,children:[]};return l==null&&(l=this.root),l.children.push(m),m},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(l){l.id=i.internal.newObjectDeferred();for(var h=0;h<l.children.length;h++)this.genIds_r(l.children[h])},i.outline.renderRoot=function(l){this.objStart(l),this.line("/Type /Outlines"),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1]))),this.line("/Count "+this.count_r({count:0},l)),this.objEnd()},i.outline.renderItems=function(l){for(var h=this.ctx.pdf.internal.getVerticalCoordinateString,f=0;f<l.children.length;f++){var m=l.children[f];this.objStart(m),this.line("/Title "+this.makeString(m.title)),this.line("/Parent "+this.makeRef(l)),f>0&&this.line("/Prev "+this.makeRef(l.children[f-1])),f<l.children.length-1&&this.line("/Next "+this.makeRef(l.children[f+1])),m.children.length>0&&(this.line("/First "+this.makeRef(m.children[0])),this.line("/Last "+this.makeRef(m.children[m.children.length-1])));var a=this.count=this.count_r({count:0},m);if(a>0&&this.line("/Count "+a),m.options&&m.options.pageNumber){var x=i.internal.getPageInfo(m.options.pageNumber);this.line("/Dest ["+x.objId+" 0 R /XYZ 0 "+h(0)+" 0]")}this.objEnd()}for(var S=0;S<l.children.length;S++)this.renderItems(l.children[S])},i.outline.line=function(l){this.ctx.val+=l+`\r
`},i.outline.makeRef=function(l){return l.id+" 0 R"},i.outline.makeString=function(l){return"("+i.internal.pdfEscape(l)+")"},i.outline.objStart=function(l){this.ctx.val+=`\r
`+l.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(l,h){for(var f=0;f<h.children.length;f++)l.count++,this.count_r(l,h.children[f]);return l.count}}])})(fn.API),(function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(i,l,h,f,m,a){var x,S=this.decode.DCT_DECODE,I=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=m||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,x=(function(U){for(var Q,P=256*U.charCodeAt(4)+U.charCodeAt(5),$=U.length,z={width:0,height:0,numcomponents:1},O=4;O<$;O+=2){if(O+=P,n.indexOf(U.charCodeAt(O+1))!==-1){Q=256*U.charCodeAt(O+5)+U.charCodeAt(O+6),z={width:256*U.charCodeAt(O+7)+U.charCodeAt(O+8),height:Q,numcomponents:U.charCodeAt(O+9)};break}P=256*U.charCodeAt(O+2)+U.charCodeAt(O+3)}return z})(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i),x.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}I={data:i,width:x.width,height:x.height,colorSpace:a,bitsPerComponent:8,filter:S,index:l,alias:h}}return I}})(fn.API),fn.API.processPNG=function(e,n,i,l){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var h,f=qj(e,{checkCrc:!0}),m=f.width,a=f.height,x=f.channels,S=f.palette,I=f.depth;h=S&&x===1?(function(Qe){for(var be=Qe.width,Ge=Qe.height,le=Qe.data,ge=Qe.palette,Pe=Qe.depth,Fe=!1,pt=[],ut=[],At=void 0,Ne=!1,Ie=0,yt=0;yt<ge.length;yt++){var Ue=lC(ge[yt],4),ie=Ue[0],Ee=Ue[1],De=Ue[2],Ye=Ue[3];pt.push(ie,Ee,De),Ye!=null&&(Ye===0?(Ie++,ut.length<1&&ut.push(yt)):Ye<255&&(Ne=!0))}if(Ne||Ie>1){Fe=!0,ut=void 0;var at=be*Ge;At=new Uint8Array(at);for(var tt=new DataView(le.buffer),wt=0;wt<at;wt++){var Et=e1(tt,wt,Pe),Pt=lC(ge[Et],4)[3];At[wt]=Pt}}else Ie===0&&(ut=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Fe?8:void 0,colorBytes:le,alphaBytes:At,needSMask:Fe,palette:pt,mask:ut}})(f):x===2||x===4?(function(Qe){for(var be=Qe.data,Ge=Qe.width,le=Qe.height,ge=Qe.channels,Pe=Qe.depth,Fe=ge===2?"DeviceGray":"DeviceRGB",pt=ge-1,ut=Ge*le,At=pt,Ne=ut*At,Ie=1*ut,yt=Math.ceil(Ne*Pe/8),Ue=Math.ceil(Ie*Pe/8),ie=new Uint8Array(yt),Ee=new Uint8Array(Ue),De=new DataView(be.buffer),Ye=new DataView(ie.buffer),at=new DataView(Ee.buffer),tt=!1,wt=0;wt<ut;wt++){for(var Et=wt*ge,Pt=0;Pt<At;Pt++)f5(Ye,e1(De,Et+Pt,Pe),wt*At+Pt,Pe);var Wt=e1(De,Et+At,Pe);Wt<(1<<Pe)-1&&(tt=!0),f5(at,Wt,1*wt,Pe)}return{colorSpace:Fe,colorsPerPixel:pt,sMaskBitsPerComponent:tt?Pe:void 0,colorBytes:ie,alphaBytes:Ee,needSMask:tt}})(f):(function(Qe){var be=Qe.data,Ge=Qe.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Ge,colorsPerPixel:Ge==="DeviceGray"?1:3,colorBytes:be instanceof Uint16Array?(function(le){for(var ge=le.length,Pe=new Uint8Array(2*ge),Fe=new DataView(Pe.buffer,Pe.byteOffset,Pe.byteLength),pt=0;pt<ge;pt++)Fe.setUint16(2*pt,le[pt],!1);return Pe})(be):be,needSMask:!1}})(f);var U,Q,P,$=h,z=$.colorSpace,O=$.colorsPerPixel,W=$.sMaskBitsPerComponent,ne=$.colorBytes,ce=$.alphaBytes,de=$.needSMask,Se=$.palette,ze=$.mask,Ze=null;return l!==fn.API.image_compression.NONE&&typeof lw=="function"?(Ze=(function(Qe){var be;switch(Qe){case fn.API.image_compression.FAST:be=11;break;case fn.API.image_compression.MEDIUM:be=13;break;case fn.API.image_compression.SLOW:be=14;break;default:be=12}return be})(l),U=this.decode.FLATE_DECODE,Q="/Predictor ".concat(Ze," /Colors ").concat(O," /BitsPerComponent ").concat(I," /Columns ").concat(m),e=l5(ne,Math.ceil(m*O*I/8),O,I,l),de&&(P=l5(ce,Math.ceil(m*W/8),1,W,l))):(U=void 0,Q=void 0,e=ne,de&&(P=ce)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:i,data:e,index:n,filter:U,decodeParameters:Q,transparency:ze,palette:Se,sMask:P,predictor:Ze,width:m,height:a,bitsPerComponent:I,sMaskBitsPerComponent:W,colorSpace:z}}},(function(e){e.processGIF89A=function(n,i,l,h){var f=new dV(n),m=f.width,a=f.height,x=[];f.decodeAndBlitFrameRGBA(0,x);var S={data:x,width:m,height:a},I=new t1(100).encode(S,100);return e.processJPEG.call(this,I,i,l,h)},e.processGIF87A=e.processGIF89A})(fn.API),_u.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:h,green:l,blue:i,quad:f}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_u.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(i){ps.log("bit decode error:"+i)}},_u.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),i=n%4;for(e=this.height-1;e>=0;e--){for(var l=this.bottom_up?e:this.height-1-e,h=0;h<n;h++)for(var f=this.datav.getUint8(this.pos++,!0),m=l*this.width*4+8*h*4,a=0;a<8&&8*h+a<this.width;a++){var x=this.palette[f>>7-a&1];this.data[m+4*a]=x.blue,this.data[m+4*a+1]=x.green,this.data[m+4*a+2]=x.red,this.data[m+4*a+3]=255}i!==0&&(this.pos+=4-i)}},_u.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,i=this.height-1;i>=0;i--){for(var l=this.bottom_up?i:this.height-1-i,h=0;h<e;h++){var f=this.datav.getUint8(this.pos++,!0),m=l*this.width*4+2*h*4,a=f>>4,x=15&f,S=this.palette[a];if(this.data[m]=S.blue,this.data[m+1]=S.green,this.data[m+2]=S.red,this.data[m+3]=255,2*h+1>=this.width)break;S=this.palette[x],this.data[m+4]=S.blue,this.data[m+4+1]=S.green,this.data[m+4+2]=S.red,this.data[m+4+3]=255}n!==0&&(this.pos+=4-n)}},_u.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,l=0;l<this.width;l++){var h=this.datav.getUint8(this.pos++,!0),f=i*this.width*4+4*l;if(h<this.palette.length){var m=this.palette[h];this.data[f]=m.red,this.data[f+1]=m.green,this.data[f+2]=m.blue,this.data[f+3]=255}else this.data[f]=255,this.data[f+1]=255,this.data[f+2]=255,this.data[f+3]=255}e!==0&&(this.pos+=4-e)}},_u.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var l=this.bottom_up?i:this.height-1-i,h=0;h<this.width;h++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(f&n)/n*255|0,a=(f>>5&n)/n*255|0,x=(f>>10&n)/n*255|0,S=f>>15?255:0,I=l*this.width*4+4*h;this.data[I]=x,this.data[I+1]=a,this.data[I+2]=m,this.data[I+3]=S}this.pos+=e}},_u.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),i=parseInt("111111",2),l=this.height-1;l>=0;l--){for(var h=this.bottom_up?l:this.height-1-l,f=0;f<this.width;f++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(m&n)/n*255|0,x=(m>>5&i)/i*255|0,S=(m>>11)/n*255|0,I=h*this.width*4+4*f;this.data[I]=S,this.data[I+1]=x,this.data[I+2]=a,this.data[I+3]=255}this.pos+=e}},_u.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),m=n*this.width*4+4*i;this.data[m]=f,this.data[m+1]=h,this.data[m+2]=l,this.data[m+3]=255}this.pos+=this.width%4}},_u.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*i;this.data[a]=f,this.data[a+1]=h,this.data[a+2]=l,this.data[a+3]=m}},_u.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(n,i,l,h){var f=new _u(n,!1),m=f.width,a=f.height,x={data:f.getData(),width:m,height:a},S=new t1(100).encode(x,100);return e.processJPEG.call(this,S,i,l,h)}})(fn.API),p5.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(n,i,l,h){var f=new p5(n),m=f.width,a=f.height,x={data:f.getData(),width:m,height:a},S=new t1(100).encode(x,100);return e.processJPEG.call(this,S,i,l,h)}})(fn.API),fn.API.processRGBA=function(e,n,i){for(var l=e.data,h=l.length,f=new Uint8Array(h/4*3),m=new Uint8Array(h/4),a=0,x=0,S=0;S<h;S+=4){var I=l[S],U=l[S+1],Q=l[S+2],P=l[S+3];f[a++]=I,f[a++]=U,f[a++]=Q,m[x++]=P}var $=this.__addimage__.arrayBufferToBinaryString(f);return{alpha:this.__addimage__.arrayBufferToBinaryString(m),data:$,index:n,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},fn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Wd=fn.API,S0=Wd.getCharWidthsArray=function(e,n){var i,l,h=(n=n||{}).font||this.internal.getFont(),f=n.fontSize||this.internal.getFontSize(),m=n.charSpace||this.internal.getCharSpace(),a=n.widths?n.widths:h.metadata.Unicode.widths,x=a.fof?a.fof:1,S=n.kerning?n.kerning:h.metadata.Unicode.kerning,I=S.fof?S.fof:1,U=n.doKerning!==!1,Q=0,P=e.length,$=0,z=a[0]||x,O=[];for(i=0;i<P;i++)l=e.charCodeAt(i),typeof h.metadata.widthOfString=="function"?O.push((h.metadata.widthOfGlyph(h.metadata.characterToGlyph(l))+m*(1e3/f)||0)/1e3):(Q=U&&ts(S[l])==="object"&&!isNaN(parseInt(S[l][$],10))?S[l][$]/I:0,O.push((a[l]||z)/x+Q)),$=l;return O},s5=Wd.getStringUnitWidth=function(e,n){var i=(n=n||{}).fontSize||this.internal.getFontSize(),l=n.font||this.internal.getFont(),h=n.charSpace||this.internal.getCharSpace();return Wd.processArabic&&(e=Wd.processArabic(e)),typeof l.metadata.widthOfString=="function"?l.metadata.widthOfString(e,i,h)/i:S0.apply(this,arguments).reduce(function(f,m){return f+m},0)},o5=function(e,n,i,l){for(var h=[],f=0,m=e.length,a=0;f!==m&&a+n[f]<i;)a+=n[f],f++;h.push(e.slice(0,f));var x=f;for(a=0;f!==m;)a+n[f]>l&&(h.push(e.slice(x,f)),a=0,x=f),a+=n[f],f++;return x!==f&&h.push(e.slice(x,f)),h},a5=function(e,n,i){i||(i={});var l,h,f,m,a,x,S,I=[],U=[I],Q=i.textIndent||0,P=0,$=0,z=e.split(" "),O=S0.apply(this,[" ",i])[0];if(x=i.lineIndent===-1?z[0].length+2:i.lineIndent||0){var W=Array(x).join(" "),ne=[];z.map(function(de){(de=de.split(/\s*\n/)).length>1?ne=ne.concat(de.map(function(Se,ze){return(ze&&Se.length?`
`:"")+Se})):ne.push(de[0])}),z=ne,x=s5.apply(this,[W,i])}for(f=0,m=z.length;f<m;f++){var ce=0;if(l=z[f],x&&l[0]==`
`&&(l=l.substr(1),ce=1),Q+P+($=(h=S0.apply(this,[l,i])).reduce(function(de,Se){return de+Se},0))>n||ce){if($>n){for(a=o5.apply(this,[l,h,n-(Q+P),n]),I.push(a.shift()),I=[a.pop()];a.length;)U.push([a.shift()]);$=h.slice(l.length-(I[0]?I[0].length:0)).reduce(function(de,Se){return de+Se},0)}else I=[l];U.push(I),Q=$+x,P=O}else I.push(l),Q+=P+$,P=O}return S=x?function(de,Se){return(Se?W:"")+de.join(" ")}:function(de){return de.join(" ")},U.map(S)},Wd.splitTextToSize=function(e,n,i){var l,h=(i=i||{}).fontSize||this.internal.getFontSize(),f=(function(I){if(I.widths&&I.kerning)return{widths:I.widths,kerning:I.kerning};var U=this.internal.getFont(I.fontName,I.fontStyle),Q="Unicode";return U.metadata[Q]?{widths:U.metadata[Q].widths||{0:1},kerning:U.metadata[Q].kerning||{}}:{font:U.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);l=Array.isArray(e)?e:String(e).split(/\r?\n/);var m=1*this.internal.scaleFactor*n/h;f.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/h:0,f.lineIndent=i.lineIndent;var a,x,S=[];for(a=0,x=l.length;a<x;a++)S=S.concat(a5.apply(this,[l[a],m,f]));return S},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="0123456789abcdef",i="klmnopqrstuvwxyz",l={},h={},f=0;f<16;f++)l[i[f]]=n[f],h[n[f]]=i[f];var m=function(Q){return"0x"+parseInt(Q,10).toString(16)},a=e.__fontmetrics__.compress=function(Q){var P,$,z,O,W=["{"];for(var ne in Q){if(P=Q[ne],isNaN(parseInt(ne,10))?$="'"+ne+"'":(ne=parseInt(ne,10),$=($=m(ne).slice(2)).slice(0,-1)+h[$.slice(-1)]),typeof P=="number")P<0?(z=m(P).slice(3),O="-"):(z=m(P).slice(2),O=""),z=O+z.slice(0,-1)+h[z.slice(-1)];else{if(ts(P)!=="object")throw new Error("Don't know what to do with value type "+ts(P)+".");z=a(P)}W.push($+z)}return W.push("}"),W.join("")},x=e.__fontmetrics__.uncompress=function(Q){if(typeof Q!="string")throw new Error("Invalid argument passed to uncompress.");for(var P,$,z,O,W={},ne=1,ce=W,de=[],Se="",ze="",Ze=Q.length-1,Qe=1;Qe<Ze;Qe+=1)(O=Q[Qe])=="'"?P?(z=P.join(""),P=void 0):P=[]:P?P.push(O):O=="{"?(de.push([ce,z]),ce={},z=void 0):O=="}"?(($=de.pop())[0][$[1]]=ce,z=void 0,ce=$[0]):O=="-"?ne=-1:z===void 0?l.hasOwnProperty(O)?(Se+=l[O],z=parseInt(Se,16)*ne,ne=1,Se=""):Se+=O:l.hasOwnProperty(O)?(ze+=l[O],ce[z]=parseInt(ze,16)*ne,ne=1,z=void 0,ze=""):ze+=O;return W},S={codePages:["WinAnsiEncoding"],WinAnsiEncoding:x("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},I={Unicode:{Courier:S,"Courier-Bold":S,"Courier-BoldOblique":S,"Courier-Oblique":S,Helvetica:S,"Helvetica-Bold":S,"Helvetica-BoldOblique":S,"Helvetica-Oblique":S,"Times-Roman":S,"Times-Bold":S,"Times-BoldItalic":S,"Times-Italic":S}},U={Unicode:{"Courier-Oblique":x("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":x("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":x("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:x("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":x("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":x("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:x("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:x("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":x("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:x("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":x("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":x("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":x("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":x("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(Q){var P=Q.font,$=U.Unicode[P.postScriptName];$&&(P.metadata.Unicode={},P.metadata.Unicode.widths=$.widths,P.metadata.Unicode.kerning=$.kerning);var z=I.Unicode[P.postScriptName];z&&(P.metadata.Unicode.encoding=z,P.encoding=z.codePages[0])}])})(fn.API),(function(e){var n=function(i){for(var l=i.length,h=new Uint8Array(l),f=0;f<l;f++)h[f]=i.charCodeAt(f);return h};e.API.events.push(["addFont",function(i){var l=void 0,h=i.font,f=i.instance;if(!h.isStandardFont){if(f===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+h.postScriptName+"').");if(typeof(l=f.existsFileInVFS(h.postScriptName)===!1?f.loadFile(h.postScriptName):f.getFileFromVFS(h.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+h.postScriptName+"').");(function(m,a){a=/^\x00\x01\x00\x00/.test(a)?n(a):n(Q0(a)),m.metadata=e.API.TTFFont.open(a),m.metadata.Unicode=m.metadata.Unicode||{encoding:{},kerning:{},widths:[]},m.metadata.glyIdsUsed=[0]})(h,l)}}])})(fn),fn.API.addSvgAsImage=function(e,n,i,l,h,f,m,a){if(isNaN(n)||isNaN(i))throw ps.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(h))throw ps.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=l,x.height=h;var S=x.getContext("2d");S.fillStyle="#fff",S.fillRect(0,0,x.width,x.height);var I={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},U=this;return(Mn.canvg?Promise.resolve(Mn.canvg):k_(()=>import("./index.es-BC_EDQ94.js"),[])).catch(function(Q){return Promise.reject(new Error("Could not load canvg: "+Q))}).then(function(Q){return Q.default?Q.default:Q}).then(function(Q){return Q.fromString(S,e,I)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Q){return Q.render(I)}).then(function(){U.addImage(x.toDataURL("image/jpeg",1),n,i,l,h,m,a)})},fn.API.putTotalPages=function(e){var n,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),i=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var l=1;l<=this.internal.getNumberOfPages();l++)for(var h=0;h<this.internal.pages[l].length;h++)this.internal.pages[l][h]=this.internal.pages[l][h].replace(n,i);return this},fn.API.viewerPreferences=function(e,n){var i;e=e||{},n=n||!1;var l,h,f,m={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(m),x=[],S=0,I=0,U=0;function Q($,z){var O,W=!1;for(O=0;O<$.length;O+=1)$[O]===z&&(W=!0);return W}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(m)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var P=a.length;for(U=0;U<P;U+=1)i[a[U]].value=i[a[U]].defaultValue,i[a[U]].explicitSet=!1}if(ts(e)==="object"){for(h in e)if(f=e[h],Q(a,h)&&f!==void 0){if(i[h].type==="boolean"&&typeof f=="boolean")i[h].value=f;else if(i[h].type==="name"&&Q(i[h].valueSet,f))i[h].value=f;else if(i[h].type==="integer"&&Number.isInteger(f))i[h].value=f;else if(i[h].type==="array"){for(S=0;S<f.length;S+=1)if(l=!0,f[S].length===1&&typeof f[S][0]=="number")x.push(String(f[S]-1));else if(f[S].length>1){for(I=0;I<f[S].length;I+=1)typeof f[S][I]!="number"&&(l=!1);l===!0&&x.push([f[S][0]-1,f[S][1]-1].join(" "))}i[h].value="["+x.join(" ")+"]"}else i[h].value=i[h].defaultValue;i[h].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var $,z=[];for($ in i)i[$].explicitSet===!0&&(i[$].type==="name"?z.push("/"+$+" /"+i[$].value):z.push("/"+$+" "+i[$].value));z.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+z.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},(function(e){var n=function(){var l='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',h=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),f=unescape(encodeURIComponent(l)),m=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),x=unescape(encodeURIComponent("</x:xmpmeta>")),S=f.length+m.length+a.length+h.length+x.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+S+" >>"),this.internal.write("stream"),this.internal.write(h+f+m+a+x),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(l,h){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:l,namespaceuri:h||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",n)),this}})(fn.API),(function(e){var n=e.API,i=n.pdfEscape16=function(f,m){for(var a,x=m.metadata.Unicode.widths,S=["","0","00","000","0000"],I=[""],U=0,Q=f.length;U<Q;++U){if(a=m.metadata.characterToGlyph(f.charCodeAt(U)),m.metadata.glyIdsUsed.push(a),m.metadata.toUnicode[a]=f.charCodeAt(U),x.indexOf(a)==-1&&(x.push(a),x.push([parseInt(m.metadata.widthOfGlyph(a),10)])),a=="0")return I.join("");a=a.toString(16),I.push(S[4-a.length],a)}return I.join("")},l=function(f){var m,a,x,S,I,U,Q;for(I=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,x=[],U=0,Q=(a=Object.keys(f).sort(function(P,$){return P-$})).length;U<Q;U++)m=a[U],x.length>=100&&(I+=`
`+x.length+` beginbfchar
`+x.join(`
`)+`
endbfchar`,x=[]),f[m]!==void 0&&f[m]!==null&&typeof f[m].toString=="function"&&(S=("0000"+f[m].toString(16)).slice(-4),m=("0000"+(+m).toString(16)).slice(-4),x.push("<"+m+"><"+S+">"));return x.length&&(I+=`
`+x.length+` beginbfchar
`+x.join(`
`)+`
endbfchar
`),I+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(f){(function(m){var a=m.font,x=m.out,S=m.newObject,I=m.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var U=a.metadata.Unicode.widths,Q=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),P="",$=0;$<Q.length;$++)P+=String.fromCharCode(Q[$]);var z=S();I({data:P,addLength1:!0,objectId:z}),x("endobj");var O=S();I({data:l(a.metadata.toUnicode),addLength1:!0,objectId:O}),x("endobj");var W=S();x("<<"),x("/Type /FontDescriptor"),x("/FontName /"+ep(a.fontName)),x("/FontFile2 "+z+" 0 R"),x("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),x("/Flags "+a.metadata.flags),x("/StemV "+a.metadata.stemV),x("/ItalicAngle "+a.metadata.italicAngle),x("/Ascent "+a.metadata.ascender),x("/Descent "+a.metadata.decender),x("/CapHeight "+a.metadata.capHeight),x(">>"),x("endobj");var ne=S();x("<<"),x("/Type /Font"),x("/BaseFont /"+ep(a.fontName)),x("/FontDescriptor "+W+" 0 R"),x("/W "+e.API.PDFObject.convert(U)),x("/CIDToGIDMap /Identity"),x("/DW 1000"),x("/Subtype /CIDFontType2"),x("/CIDSystemInfo"),x("<<"),x("/Supplement 0"),x("/Registry (Adobe)"),x("/Ordering ("+a.encoding+")"),x(">>"),x(">>"),x("endobj"),a.objectNumber=S(),x("<<"),x("/Type /Font"),x("/Subtype /Type0"),x("/ToUnicode "+O+" 0 R"),x("/BaseFont /"+ep(a.fontName)),x("/Encoding /"+a.encoding),x("/DescendantFonts ["+ne+" 0 R]"),x(">>"),x("endobj"),a.isAlreadyPutted=!0}})(f)}]),n.events.push(["putFont",function(f){(function(m){var a=m.font,x=m.out,S=m.newObject,I=m.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var U=a.metadata.rawData,Q="",P=0;P<U.length;P++)Q+=String.fromCharCode(U[P]);var $=S();I({data:Q,addLength1:!0,objectId:$}),x("endobj");var z=S();I({data:l(a.metadata.toUnicode),addLength1:!0,objectId:z}),x("endobj");var O=S();x("<<"),x("/Descent "+a.metadata.decender),x("/CapHeight "+a.metadata.capHeight),x("/StemV "+a.metadata.stemV),x("/Type /FontDescriptor"),x("/FontFile2 "+$+" 0 R"),x("/Flags 96"),x("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),x("/FontName /"+ep(a.fontName)),x("/ItalicAngle "+a.metadata.italicAngle),x("/Ascent "+a.metadata.ascender),x(">>"),x("endobj"),a.objectNumber=S();for(var W=0;W<a.metadata.hmtx.widths.length;W++)a.metadata.hmtx.widths[W]=parseInt(a.metadata.hmtx.widths[W]*(1e3/a.metadata.head.unitsPerEm));x("<</Subtype/TrueType/Type/Font/ToUnicode "+z+" 0 R/BaseFont/"+ep(a.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),x("endobj"),a.isAlreadyPutted=!0}})(f)}]);var h=function(f){var m,a=f.text||"",x=f.x,S=f.y,I=f.options||{},U=f.mutex||{},Q=U.pdfEscape,P=U.activeFontKey,$=U.fonts,z=P,O="",W=0,ne="",ce=$[z].encoding;if($[z].encoding!=="Identity-H")return{text:a,x,y:S,options:I,mutex:U};for(ne=a,z=P,Array.isArray(a)&&(ne=a[0]),W=0;W<ne.length;W+=1)$[z].metadata.hasOwnProperty("cmap")&&(m=$[z].metadata.cmap.unicode.codeMap[ne[W].charCodeAt(0)]),m||ne[W].charCodeAt(0)<256&&$[z].metadata.hasOwnProperty("Unicode")?O+=ne[W]:O+="";var de="";return parseInt(z.slice(1))<14||ce==="WinAnsiEncoding"?de=Q(O,z).split("").map(function(Se){return Se.charCodeAt(0).toString(16)}).join(""):ce==="Identity-H"&&(de=i(O,$[z])),U.isHex=!0,{text:de,x,y:S,options:I,mutex:U}};n.events.push(["postProcessText",function(f){var m=f.text||"",a=[],x={text:m,x:f.x,y:f.y,options:f.options,mutex:f.mutex};if(Array.isArray(m)){var S=0;for(S=0;S<m.length;S+=1)Array.isArray(m[S])&&m[S].length===3?a.push([h(Object.assign({},x,{text:m[S][0]})).text,m[S][1],m[S][2]]):a.push(h(Object.assign({},x,{text:m[S]})).text);f.text=a}else f.text=h(Object.assign({},x,{text:m})).text}])})(fn),(function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(i){return n.call(this),this.internal.vFS[i]!==void 0},e.addFileToVFS=function(i,l){return n.call(this),this.internal.vFS[i]=l,this},e.getFileFromVFS=function(i){return n.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}})(fn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(l){var h,f,m,a,x,S,I,U=n,Q=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],P=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],$={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},z={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],W=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ne=!1,ce=0;this.__bidiEngine__={};var de=function(le){var ge=le.charCodeAt(),Pe=ge>>8,Fe=z[Pe];return Fe!==void 0?U[256*Fe+(255&ge)]:Pe===252||Pe===253?"AL":W.test(Pe)?"L":Pe===8?"R":"N"},Se=function(le){for(var ge,Pe=0;Pe<le.length;Pe++){if((ge=de(le.charAt(Pe)))==="L")return!1;if(ge==="R")return!0}return!1},ze=function(le,ge,Pe,Fe){var pt,ut,At,Ne,Ie=ge[Fe];switch(Ie){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ne=!1;break;case"N":case"AN":break;case"EN":ne&&(Ie="AN");break;case"AL":ne=!0,Ie="R";break;case"WS":case"BN":Ie="N";break;case"CS":Fe<1||Fe+1>=ge.length||(pt=Pe[Fe-1])!=="EN"&&pt!=="AN"||(ut=ge[Fe+1])!=="EN"&&ut!=="AN"?Ie="N":ne&&(ut="AN"),Ie=ut===pt?ut:"N";break;case"ES":Ie=(pt=Fe>0?Pe[Fe-1]:"B")==="EN"&&Fe+1<ge.length&&ge[Fe+1]==="EN"?"EN":"N";break;case"ET":if(Fe>0&&Pe[Fe-1]==="EN"){Ie="EN";break}if(ne){Ie="N";break}for(At=Fe+1,Ne=ge.length;At<Ne&&ge[At]==="ET";)At++;Ie=At<Ne&&ge[At]==="EN"?"EN":"N";break;case"NSM":if(m&&!a){for(Ne=ge.length,At=Fe+1;At<Ne&&ge[At]==="NSM";)At++;if(At<Ne){var yt=le[Fe],Ue=yt>=1425&&yt<=2303||yt===64286;if(pt=ge[At],Ue&&(pt==="R"||pt==="AL")){Ie="R";break}}}Ie=Fe<1||(pt=ge[Fe-1])==="B"?"N":Pe[Fe-1];break;case"B":ne=!1,h=!0,Ie=ce;break;case"S":f=!0,Ie="N"}return Ie},Ze=function(le,ge,Pe){var Fe=le.split("");return Pe&&Qe(Fe,Pe,{hiLevel:ce}),Fe.reverse(),ge&&ge.reverse(),Fe.join("")},Qe=function(le,ge,Pe){var Fe,pt,ut,At,Ne,Ie=-1,yt=le.length,Ue=0,ie=[],Ee=ce?P:Q,De=[];for(ne=!1,h=!1,f=!1,pt=0;pt<yt;pt++)De[pt]=de(le[pt]);for(ut=0;ut<yt;ut++){if(Ne=Ue,ie[ut]=ze(le,De,ie,ut),Fe=240&(Ue=Ee[Ne][$[ie[ut]]]),Ue&=15,ge[ut]=At=Ee[Ue][5],Fe>0)if(Fe===16){for(pt=Ie;pt<ut;pt++)ge[pt]=1;Ie=-1}else Ie=-1;if(Ee[Ue][6])Ie===-1&&(Ie=ut);else if(Ie>-1){for(pt=Ie;pt<ut;pt++)ge[pt]=At;Ie=-1}De[ut]==="B"&&(ge[ut]=0),Pe.hiLevel|=At}f&&(function(Ye,at,tt){for(var wt=0;wt<tt;wt++)if(Ye[wt]==="S"){at[wt]=ce;for(var Et=wt-1;Et>=0&&Ye[Et]==="WS";Et--)at[Et]=ce}})(De,ge,yt)},be=function(le,ge,Pe,Fe,pt){if(!(pt.hiLevel<le)){if(le===1&&ce===1&&!h)return ge.reverse(),void(Pe&&Pe.reverse());for(var ut,At,Ne,Ie,yt=ge.length,Ue=0;Ue<yt;){if(Fe[Ue]>=le){for(Ne=Ue+1;Ne<yt&&Fe[Ne]>=le;)Ne++;for(Ie=Ue,At=Ne-1;Ie<At;Ie++,At--)ut=ge[Ie],ge[Ie]=ge[At],ge[At]=ut,Pe&&(ut=Pe[Ie],Pe[Ie]=Pe[At],Pe[At]=ut);Ue=Ne}Ue++}}},Ge=function(le,ge,Pe){var Fe=le.split(""),pt={hiLevel:ce};return Pe||(Pe=[]),Qe(Fe,Pe,pt),(function(ut,At,Ne){if(Ne.hiLevel!==0&&I)for(var Ie,yt=0;yt<ut.length;yt++)At[yt]===1&&(Ie=O.indexOf(ut[yt]))>=0&&(ut[yt]=O[Ie+1])})(Fe,Pe,pt),be(2,Fe,ge,Pe,pt),be(1,Fe,ge,Pe,pt),Fe.join("")};return this.__bidiEngine__.doBidiReorder=function(le,ge,Pe){if((function(pt,ut){if(ut)for(var At=0;At<pt.length;At++)ut[At]=At;a===void 0&&(a=Se(pt)),S===void 0&&(S=Se(pt))})(le,ge),m||!x||S)if(m&&x&&a^S)ce=a?1:0,le=Ze(le,ge,Pe);else if(!m&&x&&S)ce=a?1:0,le=Ge(le,ge,Pe),le=Ze(le,ge);else if(!m||a||x||S){if(m&&!x&&a^S)le=Ze(le,ge),a?(ce=0,le=Ge(le,ge,Pe)):(ce=1,le=Ge(le,ge,Pe),le=Ze(le,ge));else if(m&&a&&!x&&S)ce=1,le=Ge(le,ge,Pe),le=Ze(le,ge);else if(!m&&!x&&a^S){var Fe=I;a?(ce=1,le=Ge(le,ge,Pe),ce=0,I=!1,le=Ge(le,ge,Pe),I=Fe):(ce=0,le=Ge(le,ge,Pe),le=Ze(le,ge),ce=1,I=!1,le=Ge(le,ge,Pe),I=Fe,le=Ze(le,ge))}}else ce=0,le=Ge(le,ge,Pe);else ce=a?1:0,le=Ge(le,ge,Pe);return le},this.__bidiEngine__.setOptions=function(le){le&&(m=le.isInputVisual,x=le.isOutputVisual,a=le.isInputRtl,S=le.isOutputRtl,I=le.isSymmetricSwapping)},this.__bidiEngine__.setOptions(l),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(l){var h=l.text;l.x,l.y;var f=l.options||{};l.mutex,f.lang;var m=[];if(f.isInputVisual=typeof f.isInputVisual!="boolean"||f.isInputVisual,i.setOptions(f),Object.prototype.toString.call(h)==="[object Array]"){var a=0;for(m=[],a=0;a<h.length;a+=1)Object.prototype.toString.call(h[a])==="[object Array]"?m.push([i.doBidiReorder(h[a][0]),h[a][1],h[a][2]]):m.push([i.doBidiReorder(h[a])]);l.text=m}else l.text=i.doBidiReorder(h);i.setOptions({isInputVisual:!0})}])})(fn),fn.API.TTFFont=(function(){function e(n){var i;if(this.rawData=n,i=this.contents=new _f(n),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new IV(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new pV(this.contents),this.head=new gV(this),this.name=new xV(this),this.cmap=new k4(this),this.toUnicode={},this.hhea=new yV(this),this.maxp=new bV(this),this.hmtx=new BV(this),this.post=new _V(this),this.os2=new vV(this),this.loca=new FV(this),this.glyf=new CV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,i,l,h,f;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var m,a,x,S;for(S=[],m=0,a=(x=this.bbox).length;m<a;m++)n=x[m],S.push(Math.round(n*this.scaleFactor));return S}).call(this),this.stemV=0,this.post.exists?(l=255&(h=this.post.italic_angle),32768&(i=h>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+l)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(f=this.familyClass)===1||f===2||f===3||f===4||f===5||f===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var i;return((i=this.cmap.unicode)!=null?i.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*i},e.prototype.widthOfString=function(n,i,l){var h,f,m,a;for(m=0,f=0,a=(n=""+n).length;0<=a?f<a:f>a;f=0<=a?++f:--f)h=n.charCodeAt(f),m+=this.widthOfGlyph(this.characterToGlyph(h))+l*(1e3/i)||0;return m*(i/1e3)},e.prototype.lineHeight=function(n,i){var l;return i==null&&(i=!1),l=i?this.lineGap:0,(this.ascender+l-this.decender)/1e3*n},e})();var Tu,_f=(function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var i,l;for(l=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)l[i]=String.fromCharCode(this.readByte());return l.join("")},e.prototype.writeString=function(n){var i,l,h;for(h=[],i=0,l=n.length;0<=l?i<l:i>l;i=0<=l?++i:--i)h.push(this.writeByte(n.charCodeAt(i)));return h},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,i,l,h,f,m,a,x;return n=this.readByte(),i=this.readByte(),l=this.readByte(),h=this.readByte(),f=this.readByte(),m=this.readByte(),a=this.readByte(),x=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^i)+1099511627776*(255^l)+4294967296*(255^h)+16777216*(255^f)+65536*(255^m)+256*(255^a)+(255^x)+1):72057594037927940*n+281474976710656*i+1099511627776*l+4294967296*h+16777216*f+65536*m+256*a+x},e.prototype.writeLongLong=function(n){var i,l;return i=Math.floor(n/4294967296),l=4294967295&n,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(l>>24&255),this.writeByte(l>>16&255),this.writeByte(l>>8&255),this.writeByte(255&l)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var i,l;for(i=[],l=0;0<=n?l<n:l>n;l=0<=n?++l:--l)i.push(this.readByte());return i},e.prototype.write=function(n){var i,l,h,f;for(f=[],l=0,h=n.length;l<h;l++)i=n[l],f.push(this.writeByte(i));return f},e})(),pV=(function(){var e;function n(i){var l,h,f;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},h=0,f=this.tableCount;0<=f?h<f:h>f;h=0<=f?++h:--h)l={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[l.tag]=l}return n.prototype.encode=function(i){var l,h,f,m,a,x,S,I,U,Q,P,$,z;for(z in P=Object.keys(i).length,x=Math.log(2),U=16*Math.floor(Math.log(P)/x),m=Math.floor(U/x),I=16*P-U,(h=new _f).writeInt(this.scalarType),h.writeShort(P),h.writeShort(U),h.writeShort(m),h.writeShort(I),f=16*P,S=h.pos+f,a=null,$=[],i)for(Q=i[z],h.writeString(z),h.writeInt(e(Q)),h.writeInt(S),h.writeInt(Q.length),$=$.concat(Q),z==="head"&&(a=S),S+=Q.length;S%4;)$.push(0),S++;return h.write($),l=2981146554-e(h.data),h.pos=a+8,h.writeUInt32(l),h.data},e=function(i){var l,h,f,m;for(i=U4.call(i);i.length%4;)i.push(0);for(f=new _f(i),h=0,l=0,m=i.length;l<m;l=l+=4)h+=f.readUInt32();return 4294967295&h},n})(),mV={}.hasOwnProperty,ih=function(e,n){for(var i in n)mV.call(n,i)&&(e[i]=n[i]);function l(){this.constructor=e}return l.prototype=n.prototype,e.prototype=new l,e.__super__=n.prototype,e};Tu=(function(){function e(n){var i;this.file=n,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var gV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new _f).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e})(),m5=(function(){function e(n,i){var l,h,f,m,a,x,S,I,U,Q,P,$,z,O,W,ne,ce;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=i+n.readInt(),U=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(x=0;x<256;++x)this.codeMap[x]=n.readByte();break;case 4:for(P=n.readUInt16(),Q=P/2,n.pos+=6,f=(function(){var de,Se;for(Se=[],x=de=0;0<=Q?de<Q:de>Q;x=0<=Q?++de:--de)Se.push(n.readUInt16());return Se})(),n.pos+=2,z=(function(){var de,Se;for(Se=[],x=de=0;0<=Q?de<Q:de>Q;x=0<=Q?++de:--de)Se.push(n.readUInt16());return Se})(),S=(function(){var de,Se;for(Se=[],x=de=0;0<=Q?de<Q:de>Q;x=0<=Q?++de:--de)Se.push(n.readUInt16());return Se})(),I=(function(){var de,Se;for(Se=[],x=de=0;0<=Q?de<Q:de>Q;x=0<=Q?++de:--de)Se.push(n.readUInt16());return Se})(),h=(this.length-n.pos+this.offset)/2,a=(function(){var de,Se;for(Se=[],x=de=0;0<=h?de<h:de>h;x=0<=h?++de:--de)Se.push(n.readUInt16());return Se})(),x=W=0,ce=f.length;W<ce;x=++W)for(O=f[x],l=ne=$=z[x];$<=O?ne<=O:ne>=O;l=$<=O?++ne:--ne)I[x]===0?m=l+S[x]:(m=a[I[x]/2+(l-$)-(Q-x)]||0)!==0&&(m+=S[x]),this.codeMap[l]=65535&m}n.pos=U}return e.encode=function(n,i){var l,h,f,m,a,x,S,I,U,Q,P,$,z,O,W,ne,ce,de,Se,ze,Ze,Qe,be,Ge,le,ge,Pe,Fe,pt,ut,At,Ne,Ie,yt,Ue,ie,Ee,De,Ye,at,tt,wt,Et,Pt,Wt,lr;switch(Fe=new _f,m=Object.keys(n).sort(function(fr,Br){return fr-Br}),i){case"macroman":for(z=0,O=(function(){var fr=[];for($=0;$<256;++$)fr.push(0);return fr})(),ne={0:0},f={},pt=0,Ie=m.length;pt<Ie;pt++)ne[Et=n[h=m[pt]]]==null&&(ne[Et]=++z),f[h]={old:n[h],new:ne[n[h]]},O[h]=ne[n[h]];return Fe.writeUInt16(1),Fe.writeUInt16(0),Fe.writeUInt32(12),Fe.writeUInt16(0),Fe.writeUInt16(262),Fe.writeUInt16(0),Fe.write(O),{charMap:f,subtable:Fe.data,maxGlyphID:z+1};case"unicode":for(ge=[],U=[],ce=0,ne={},l={},W=S=null,ut=0,yt=m.length;ut<yt;ut++)ne[Se=n[h=m[ut]]]==null&&(ne[Se]=++ce),l[h]={old:Se,new:ne[Se]},a=ne[Se]-h,W!=null&&a===S||(W&&U.push(W),ge.push(h),S=a),W=h;for(W&&U.push(W),U.push(65535),ge.push(65535),Ge=2*(be=ge.length),Qe=2*Math.pow(Math.log(be)/Math.LN2,2),Q=Math.log(Qe/2)/Math.LN2,Ze=2*be-Qe,x=[],ze=[],P=[],$=At=0,Ue=ge.length;At<Ue;$=++At){if(le=ge[$],I=U[$],le===65535){x.push(0),ze.push(0);break}if(le-(Pe=l[le].new)>=32768)for(x.push(0),ze.push(2*(P.length+be-$)),h=Ne=le;le<=I?Ne<=I:Ne>=I;h=le<=I?++Ne:--Ne)P.push(l[h].new);else x.push(Pe-le),ze.push(0)}for(Fe.writeUInt16(3),Fe.writeUInt16(1),Fe.writeUInt32(12),Fe.writeUInt16(4),Fe.writeUInt16(16+8*be+2*P.length),Fe.writeUInt16(0),Fe.writeUInt16(Ge),Fe.writeUInt16(Qe),Fe.writeUInt16(Q),Fe.writeUInt16(Ze),tt=0,ie=U.length;tt<ie;tt++)h=U[tt],Fe.writeUInt16(h);for(Fe.writeUInt16(0),wt=0,Ee=ge.length;wt<Ee;wt++)h=ge[wt],Fe.writeUInt16(h);for(Pt=0,De=x.length;Pt<De;Pt++)a=x[Pt],Fe.writeUInt16(a);for(Wt=0,Ye=ze.length;Wt<Ye;Wt++)de=ze[Wt],Fe.writeUInt16(de);for(lr=0,at=P.length;lr<at;lr++)z=P[lr],Fe.writeUInt16(z);return{charMap:l,subtable:Fe.data,maxGlyphID:ce+1}}},e})(),k4=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,l,h;for(n.pos=this.offset,this.version=n.readUInt16(),h=n.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=h?l<h:l>h;l=0<=h?++l:--l)i=new m5(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var l,h;return i==null&&(i="macroman"),l=m5.encode(n,i),(h=new _f).writeUInt16(0),h.writeUInt16(1),l.table=h.data.concat(l.subtable),l},e})(),yV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),vV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var i,l;for(l=[],i=0;i<10;++i)l.push(n.readByte());return l})(),this.charRange=(function(){var i,l;for(l=[],i=0;i<4;++i)l.push(n.readInt());return l})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var i,l;for(l=[],i=0;i<2;i=++i)l.push(n.readInt());return l})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),_V=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="post",e.prototype.parse=function(n){var i,l,h;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:case 196608:break;case 131072:var f;for(l=n.readUInt16(),this.glyphNameIndex=[],f=0;0<=l?f<l:f>l;f=0<=l?++f:--f)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],h=[];n.pos<this.offset+this.length;)i=n.readByte(),h.push(this.names.push(n.readString(i)));return h;case 151552:return l=n.readUInt16(),this.offsets=n.read(l);case 262144:return this.map=(function(){var m,a,x;for(x=[],f=m=0,a=this.file.maxp.numGlyphs;0<=a?m<a:m>a;f=0<=a?++m:--m)x.push(n.readUInt32());return x}).call(this)}},e})(),wV=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},xV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="name",e.prototype.parse=function(n){var i,l,h,f,m,a,x,S,I,U,Q;for(n.pos=this.offset,n.readShort(),i=n.readShort(),a=n.readShort(),l=[],f=0;0<=i?f<i:f>i;f=0<=i?++f:--f)l.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+a+n.readShort()});for(x={},f=I=0,U=l.length;I<U;f=++I)h=l[f],n.pos=h.offset,S=n.readString(h.length),m=new wV(S,h),x[Q=h.nameID]==null&&(x[Q]=[]),x[h.nameID].push(m);this.strings=x,this.copyright=x[0],this.fontFamily=x[1],this.fontSubfamily=x[2],this.uniqueSubfamily=x[3],this.fontName=x[4],this.version=x[5];try{this.postscriptName=x[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=x[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=x[7],this.manufacturer=x[8],this.designer=x[9],this.description=x[10],this.vendorUrl=x[11],this.designerUrl=x[12],this.license=x[13],this.licenseUrl=x[14],this.preferredFamily=x[15],this.preferredSubfamily=x[17],this.compatibleFull=x[18],this.sampleText=x[19]},e})(),bV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),BV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,l,h,f,m,a,x;for(n.pos=this.offset,this.metrics=[],i=0,a=this.file.hhea.numberOfMetrics;0<=a?i<a:i>a;i=0<=a?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(h=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var S,I;for(I=[],i=S=0;0<=h?S<h:S>h;i=0<=h?++S:--S)I.push(n.readInt16());return I})(),this.widths=(function(){var S,I,U,Q;for(Q=[],S=0,I=(U=this.metrics).length;S<I;S++)f=U[S],Q.push(f.advance);return Q}).call(this),l=this.widths[this.widths.length-1],x=[],i=m=0;0<=h?m<h:m>h;i=0<=h?++m:--m)x.push(this.widths.push(l));return x},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),U4=[].slice,CV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,l,h,f,m,a,x,S,I,U;return n in this.cache?this.cache[n]:(f=this.file.loca,i=this.file.contents,l=f.indexOf(n),(h=f.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+l,m=(a=new _f(i.read(h))).readShort(),S=a.readShort(),U=a.readShort(),x=a.readShort(),I=a.readShort(),this.cache[n]=m===-1?new EV(a,S,U,x,I):new SV(a,m,S,U,x,I),this.cache[n]))},e.prototype.encode=function(n,i,l){var h,f,m,a,x;for(m=[],f=[],a=0,x=i.length;a<x;a++)h=n[i[a]],f.push(m.length),h&&(m=m.concat(h.encode(l)));return f.push(m.length),{table:m,offsets:f}},e})(),SV=(function(){function e(n,i,l,h,f,m){this.raw=n,this.numberOfContours=i,this.xMin=l,this.yMin=h,this.xMax=f,this.yMax=m,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),EV=(function(){function e(n,i,l,h,f){var m,a;for(this.raw=n,this.xMin=i,this.yMin=l,this.xMax=h,this.yMax=f,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],m=this.raw;a=m.readShort(),this.glyphOffsets.push(m.pos),this.glyphIDs.push(m.readUInt16()),32&a;)m.pos+=1&a?4:2,128&a?m.pos+=8:64&a?m.pos+=4:8&a&&(m.pos+=2)}return e.prototype.encode=function(){var n,i,l;for(i=new _f(U4.call(this.raw.data)),n=0,l=this.glyphIDs.length;n<l;++n)i.pos=this.glyphOffsets[n];return i.data},e})(),FV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ih(e,Tu),e.prototype.tag="loca",e.prototype.parse=function(n){var i,l;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var h,f;for(f=[],l=0,h=this.length;l<h;l+=2)f.push(2*n.readUInt16());return f}).call(this):(function(){var h,f;for(f=[],l=0,h=this.length;l<h;l+=4)f.push(n.readUInt32());return f}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var l=new Uint32Array(this.offsets.length),h=0,f=0,m=0;m<l.length;++m)if(l[m]=h,f<i.length&&i[f]==m){++f,l[m]=h;var a=this.offsets[m],x=this.offsets[m+1]-a;x>0&&(h+=x)}for(var S=new Array(4*l.length),I=0;I<l.length;++I)S[4*I+3]=255&l[I],S[4*I+2]=(65280&l[I])>>8,S[4*I+1]=(16711680&l[I])>>16,S[4*I]=(4278190080&l[I])>>24;return S},e})(),IV=(function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,i,l,h,f;for(i in h=this.font.cmap.tables[0].codeMap,n={},f=this.subset)l=f[i],n[i]=h[l];return n},e.prototype.glyphsFor=function(n){var i,l,h,f,m,a,x;for(h={},m=0,a=n.length;m<a;m++)h[f=n[m]]=this.font.glyf.glyphFor(f);for(f in i=[],h)(l=h[f])!=null&&l.compound&&i.push.apply(i,l.glyphIDs);if(i.length>0)for(f in x=this.glyphsFor(i))l=x[f],h[f]=l;return h},e.prototype.encode=function(n,i){var l,h,f,m,a,x,S,I,U,Q,P,$,z,O,W;for(h in l=k4.encode(this.generateCmap(),"unicode"),m=this.glyphsFor(n),P={0:0},W=l.charMap)P[(x=W[h]).old]=x.new;for($ in Q=l.maxGlyphID,m)$ in P||(P[$]=Q++);return I=(function(ne){var ce,de;for(ce in de={},ne)de[ne[ce]]=ce;return de})(P),U=Object.keys(I).sort(function(ne,ce){return ne-ce}),z=(function(){var ne,ce,de;for(de=[],ne=0,ce=U.length;ne<ce;ne++)a=U[ne],de.push(I[a]);return de})(),f=this.font.glyf.encode(m,z,P),S=this.font.loca.encode(f.offsets,z),O={cmap:this.font.cmap.raw(),glyf:f.table,loca:S,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},e})();fn.API.PDFObject=(function(){var e;function n(){}return e=function(i,l){return(Array(l+1).join("0")+i).slice(-l)},n.convert=function(i){var l,h,f,m;if(Array.isArray(i))return"["+(function(){var a,x,S;for(S=[],a=0,x=i.length;a<x;a++)l=i[a],S.push(n.convert(l));return S})().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i?.isString)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(h in f=["<<"],i)m=i[h],f.push("/"+h+" "+n.convert(m));return f.push(">>"),f.join(`
`)}return""+i},n})();function TV({filteredData:e,filteredGeoJSON:n,selectedMetric:i,exportOptions:l,onExportComplete:h}){const f=te.useRef(null),m=te.useCallback(async()=>{if(!f.current){console.error("[ExportRenderer] Export failed: Render container not found."),h();return}console.log("[ExportRenderer] Starting export render process");try{console.log("[ExportRenderer] Capturing canvas with html2canvas at 4x scale");const Q=await VI(f.current,{scale:4,useCORS:!0,backgroundColor:"#ffffff",logging:!1});if(console.log(`[ExportRenderer] Canvas captured: ${Q.width}x${Q.height}`),l.fileFormat==="png"){console.log("[ExportRenderer] Exporting as PNG");const P=document.createElement("a");P.download=`domapus-map-${i}.png`,P.href=Q.toDataURL("image/png",1),P.click()}else{console.log("[ExportRenderer] Exporting as high-DPI PDF");const P=Q.toDataURL("image/png",1),$=Q.width/4*.75,z=Q.height/4*.75,O=new fn({orientation:$>z?"landscape":"portrait",unit:"pt",format:[$,z]});O.addImage(P,"PNG",0,0,$,z,void 0,"FAST"),O.save(`domapus-map-${i}.pdf`)}}catch(U){console.error("[ExportRenderer] Export failed during screenshot process:",U)}finally{h()}},[l,i,h]),a=U=>({median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"})[U]||U.split("_").map(P=>P.charAt(0).toUpperCase()+P.slice(1)).join(" "),x=()=>l.regionScope==="state"?l.selectedState||"State":l.regionScope==="metro"?l.selectedMetro||"Metro Area":"United States",S=()=>new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),I=te.useMemo(()=>{const U=i.replace(/-/g,"_");return e.map(Q=>Q[U]).filter(Q=>typeof Q=="number"&&Q>0)},[e,i]);return oe.jsxs("div",{ref:f,className:"fixed top-0 left-0 w-[1200px] h-[900px] bg-white p-8 flex flex-col font-sans",style:{transform:"translateX(-9999px)"},children:[l.includeTitle&&oe.jsxs("header",{className:"text-center mb-6",children:[oe.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:[a(i)," by ZIP Code"]}),oe.jsxs("p",{className:"text-xl text-gray-600 font-medium",children:[x(),"  ",S()]})]}),oe.jsx("main",{className:"flex-grow border border-gray-200 rounded-xl overflow-hidden bg-gray-50 relative shadow-sm",children:n&&e.length>0?oe.jsxs(oe.Fragment,{children:[oe.jsx(OF,{filteredData:e,geoJSON:n,selectedMetric:i,regionScope:l.regionScope,onRenderComplete:m}),l.includeLegend&&oe.jsx("div",{className:"absolute bottom-6 right-6 w-72",children:oe.jsx(Jw,{selectedMetric:i,metricValues:I,isExport:!0})})]}):oe.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-xl font-medium",children:"Preparing map data..."})}),oe.jsx("footer",{className:"pt-6 flex justify-end items-end",children:oe.jsxs("div",{className:"text-right",children:[oe.jsx(d6,{size:"lg",className:"mb-2 justify-end"}),oe.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Market Analytics by Domapus"}),oe.jsx("p",{className:"text-xs text-gray-400",children:"Data sourced from Redfin"})]})})]})}const r1=768;function D4(){const[e,n]=te.useState(void 0);return te.useEffect(()=>{const i=window.matchMedia(`(max-width: ${r1-1}px)`),l=()=>{n(window.innerWidth<r1)};return i.addEventListener("change",l),n(window.innerWidth<r1),()=>i.removeEventListener("change",l)},[]),!!e}function PV({allZipData:e,fullGeoJSON:n,selectedMetric:i,onExportModeChange:l}){const[h,f]=te.useState(!1),[m,a]=te.useState(null),[x,S]=te.useState(!1),[I,U]=te.useState(null),Q=D4(),{filteredData:P,filteredGeoJSON:$}=te.useMemo(()=>{if(!m||Object.keys(e).length===0||!n)return{filteredData:[],filteredGeoJSON:null};const ne=Object.values(e).filter(Se=>m.regionScope==="state"&&m.selectedState?Se.state===m.selectedState:m.regionScope==="metro"&&m.selectedMetro?Se.parent_metro===m.selectedMetro:!0),ce=new Set(ne.map(Se=>Se.zipCode)),de=n.features.filter(Se=>ce.has(Se.properties?.zipCode));return{filteredData:ne,filteredGeoJSON:{type:"FeatureCollection",features:de}}},[e,n,m]);te.useEffect(()=>()=>{I&&clearTimeout(I)},[I]);const z=ne=>{a(ne),S(!0);const ce=setTimeout(()=>{x&&(S(!1),n1({title:"Export Timeout",description:"Export took too long and was cancelled. Please try again.",variant:"destructive"}))},6e4);U(ce)},O=()=>{I&&clearTimeout(I),S(!1),a(null),n1({title:"Export Complete",description:"Your map has been downloaded successfully."})},W=()=>{I&&clearTimeout(I),S(!1),a(null),f(!1),l(!1)};return te.useEffect(()=>{l(h)},[h,l]),h?oe.jsxs(oe.Fragment,{children:[oe.jsx(f6,{allZipData:e,fullGeoJSON:n,selectedMetric:i,isExporting:x,onExport:z,onCancel:W}),x&&oe.jsxs(oe.Fragment,{children:[oe.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center",children:oe.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border text-center space-y-4",children:[oe.jsx("div",{role:"progressbar","aria-label":"Generating export",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),oe.jsxs("div",{children:[oe.jsx("h3",{className:"font-semibold text-lg",children:"Generating Your Export"}),oe.jsx("p",{className:"text-sm text-gray-600",children:"Please wait while we process your map..."})]})]})}),oe.jsx(TV,{filteredData:P,filteredGeoJSON:$,selectedMetric:i,exportOptions:m,onExportComplete:O})]})]}):oe.jsxs(wc,{variant:"outline",size:"sm",onClick:()=>f(!0),children:[oe.jsx(Y5,{className:"h-4 w-4 mr-2"}),!Q&&oe.jsx("span",{children:"Export"})]})}const LV={median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"};function g5({selectedMetric:e,onMetricChange:n}){return oe.jsxs("div",{className:"flex items-center gap-2",children:[oe.jsx("label",{className:"text-xs font-medium text-dashboard-text-secondary whitespace-nowrap hidden lg:block",children:"Metric:"}),oe.jsxs(_F,{value:e,onValueChange:n,children:[oe.jsx(Vw,{className:"w-48 h-8 text-sm","aria-label":"Select visualization metric",children:oe.jsx(wF,{placeholder:"Select a metric"})}),oe.jsx(Gw,{className:"z-[9999]",children:Object.entries(LV).map(([i,l])=>oe.jsx(Kw,{value:i,children:l},i))})]})]})}function y5({onSearch:e}){const[n,i]=te.useState(""),l=f=>{const m=f.target.value.replace(/\D/g,"");i(m)},h=f=>{f.preventDefault(),n.trim()&&e(n.trim())};return oe.jsxs("form",{onSubmit:h,className:"flex items-center space-x-2",children:[oe.jsxs("div",{className:"relative flex-1",children:[oe.jsx(bw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-dashboard-text-secondary"}),oe.jsx(Hy,{type:"text",pattern:"[0-9]*",inputMode:"numeric",placeholder:"Enter ZIP code...",value:n,onChange:l,className:"pl-10 w-48",maxLength:5,"aria-label":"Search for ZIP code"})]}),oe.jsx(wc,{type:"submit",variant:"outline",size:"sm","aria-label":"Search",children:"Search"})]})}const MV="/Domapus/";function kV({selectedMetric:e,onMetricChange:n,onSearch:i,children:l}){const h=D4(),[f,m]=te.useState(null);te.useEffect(()=>{const x=`${MV}data/last_updated.json`;(async()=>{try{const I=await fetch(x);if(!I.ok)throw new Error("Failed to fetch last_updated.json");const U=await I.json();m(U.last_updated_utc)}catch(I){console.error("Error fetching last_updated.json:",I)}})()},[]);const a=x=>{if(!x)return"N/A";try{return new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}};return oe.jsxs(oe.Fragment,{children:[oe.jsxs("header",{className:"flex items-center justify-between px-4 sm:px-6 py-2 bg-dashboard-panel border-b border-dashboard-border h-14 sm:h-16",children:[oe.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 flex-1 min-w-0",children:[oe.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity flex-shrink-0",onClick:()=>window.location.reload(),title:"Click to reload page",children:[oe.jsx("img",{src:"/Domapus/Logo.svg",alt:"Domapus Logo",width:"40",height:"40",className:"w-9 h-9 sm:w-10 sm:h-10"}),oe.jsxs("div",{className:"flex flex-col font-logo",children:[oe.jsx("h1",{className:"text-base sm:text-lg font-bold text-dashboard-text-primary leading-tight",children:"Domapus"}),oe.jsx("p",{className:"text-xs sm:text-sm text-dashboard-text-secondary leading-tight hidden sm:block",children:"Housing Market Analysis"})]})]}),!h&&oe.jsx(g5,{selectedMetric:e,onMetricChange:n})]}),oe.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[!h&&oe.jsx(y5,{onSearch:i}),oe.jsxs("div",{className:"flex items-center gap-2 ml-1",children:[oe.jsxs("div",{className:"flex items-center text-dashboard-text-secondary gap-2 mr-2",children:[oe.jsx(eP,{className:"h-4 w-4 opacity-80"}),oe.jsxs("div",{className:"flex flex-col",children:[oe.jsx("span",{className:"text-xs font-medium",children:"Data Updated:"}),oe.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:a(f)})]})]}),l,oe.jsx(wc,{variant:"outline",size:"sm",asChild:!0,children:oe.jsxs("a",{href:"https://github.com/Jasperc2024/Domapus",target:"_blank",rel:"noopener noreferrer",title:"GitHub",children:[oe.jsx(sP,{className:"h-4 w-4 mr-2"}),!h&&oe.jsx("span",{children:"GitHub"})," "]})}),oe.jsx(wc,{variant:"outline",size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:oe.jsxs("a",{href:"https://buymeacoffee.com/JasperC",target:"_blank",rel:"noopener noreferrer",title:"Sponsor",children:[oe.jsx(l1,{className:"h-4 w-4 mr-2"}),!h&&oe.jsx("span",{children:"Sponsor"})," "]})})]})]})]}),h&&oe.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[1001] bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-lg",children:oe.jsxs("div",{className:"space-y-2.5",children:[oe.jsx(g5,{selectedMetric:e,onMetricChange:n}),oe.jsx(y5,{onSearch:i})]})})]})}function UV(e,n){if(!e||!e.zipCode)return'<div class="p-2">No data available</div>';const l={median_sale_price:{key:"median_sale_price",label:"Median Sale Price",format:"currency"},median_list_price:{key:"median_list_price",label:"Median List Price",format:"currency"},median_ppsf:{key:"median_ppsf",label:"Median Price Per Square Foot",format:"currency"},homes_sold:{key:"homes_sold",label:"Homes Sold",format:"number"},pending_sales:{key:"pending_sales",label:"Pending Sales",format:"number"},new_listings:{key:"new_listings",label:"New Listings",format:"number"},inventory:{key:"inventory",label:"Inventory",format:"number"},months_of_supply:{key:"months_of_supply",label:"Months of Supply",format:"number"},median_dom:{key:"median_dom",label:"Median Days on Market",format:"number"},avg_sale_to_list_ratio:{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",format:"ratio"},sold_above_list:{key:"sold_above_list",label:"% Sold Above List",format:"percent"},price_drops:{key:"price_drops",label:"% Price Drops",format:"percent"},off_market_in_two_weeks:{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",format:"percent"}}[n],h=l?e[l.key]:null;let f="N/A";if(typeof h=="number"&&isFinite(h))switch(l.format){case"currency":f=`$${h.toLocaleString()}`;break;case"percent":f=`${h.toFixed(1)}%`;break;case"ratio":f=`${(h*100).toFixed(1)}%`;break;case"number":f=h.toLocaleString();break}return`
      <div class="font-bold text-base">${e.zipCode}</div>
      <div class="text-sm text-gray-600">${e.city||"Unknown City"}, ${e.state}</div>
      <div class="text-sm mt-2">
        <span class="font-semibold">${l?.label||n}:</span>
        <span class="font-normal"> ${f}</span>
      </div>
  `}const DV="/Domapus/";window.maplibregl=$f;function RV({selectedMetric:e,onZipSelect:n,searchZip:i,zipData:l,isLoading:h,processData:f}){console.log("[MapLibreMap] Component render");const m=te.useRef(null),a=te.useRef(null),[x,S]=te.useState(!1),[I,U]=te.useState(null),Q=te.useRef(!1),[P,$]=te.useState(null),z=te.useRef(!1),O=te.useRef(null),W=te.useRef(null),ne=te.useRef(null),ce=te.useRef(null),de=te.useRef(null),Se=te.useRef(""),ze=te.useRef(""),Ze=te.useRef({zipData:l,selectedMetric:e,onZipSelect:n});te.useEffect(()=>{Ze.current={zipData:l,selectedMetric:e,onZipSelect:n}},[l,e,n]);const Qe=te.useCallback(Ge=>{const le=new $f.Map({container:Ge,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[-98.57,39.82],zoom:3.5,minZoom:3,maxZoom:12,attributionControl:!1});return le.addControl(new $f.AttributionControl({compact:!0}),"bottom-left"),le.addControl(new $f.NavigationControl,"top-right"),le.on("error",ge=>{console.error("[Map] Internal error:",ge?.error??ge),U("Map internal error. Try refreshing.")}),le.once("load",()=>{console.log("[Map] style/load fired  map is ready"),S(!0)}),le},[]);te.useEffect(()=>{if(!m.current||a.current)return;const Ge=m.current;let le=!1;const ge=()=>{if(!le&&!(Ge.clientWidth===0||Ge.clientHeight===0))try{const Fe=Qe(Ge);a.current=Fe}catch(Fe){console.error("Map init failed",Fe)}},Pe=new ResizeObserver(()=>{ge(),a.current?.resize()});return W.current=Pe,Pe.observe(Ge),ge(),()=>{if(le=!0,Pe.disconnect(),W.current=null,ne.current&&(cancelAnimationFrame(ne.current),ne.current=null),de.current&&(de.current.remove(),de.current=null),a.current){try{console.log("[MapLibreMap] Removing map instance"),a.current.remove()}catch(Fe){console.warn("[MapLibreMap] error removing map",Fe)}a.current=null}S(!1),Q.current=!1}},[Qe]),te.useEffect(()=>{if(!x||P)return;const Ge=new AbortController;return(async()=>{try{const le=new URL(`${DV}data/us-zip-codes.geojson`,window.location.origin).href;console.log("Fetching GeoJSON...",le);const ge=await fetch(le,{signal:Ge.signal});if(!ge.ok)throw new Error("Fetch failed");const Pe=await ge.json();$(Pe)}catch(le){le.name!=="AbortError"&&console.error("GeoJSON load failed",le)}})(),()=>Ge.abort()},[x,P]);const be=te.useCallback(()=>{const Ge=a.current;if(!Ge||Q.current)return;const le="zips-fill";console.log(`[MapLibreMap] Setting up interactions for layer: ${le}`);const ge=pt=>{ce.current=pt,!ne.current&&(ne.current=requestAnimationFrame(()=>{const ut=ce.current;ne.current=null;try{const At=Ge.queryRenderedFeatures(ut.point,{layers:[le]}),Ne=At.length>0;if(Ge.getCanvas().style.cursor=Ne?"pointer":"",!Ne){de.current?.remove();return}const Ie=At[0].properties??{},yt=Ie.zipCode??Ie.ZCTA5CE20??Ie.id,{zipData:Ue,selectedMetric:ie}=Ze.current;if(!yt||!Ue[yt])return;de.current||(de.current=new $f.Popup({closeButton:!1,offset:[0,-10],maxWidth:"320px"})),de.current.setLngLat(ut.lngLat).setHTML(UV(Ue[yt],ie)).addTo(Ge)}catch(At){console.error("mousemove error",At)}}))},Pe=pt=>{const ut=Ge.queryRenderedFeatures(pt.point,{layers:[le]});if(!ut.length)return;const At=ut[0].properties??{},Ne=At.zipCode??At.zip??At.ZCTA5CE10??At.ZCTA5CE20??At.id,{zipData:Ie,onZipSelect:yt}=Ze.current;console.log(`[MapLibreMap] Clicked ZIP: ${Ne}`),Ne&&Ie[Ne]?yt(Ie[Ne]):console.warn(`[MapLibreMap] ZIP ${Ne} found on map but missing in zipData`)},Fe=()=>{Ge.getCanvas().style.cursor="",de.current?.remove()};Ge.on("mousemove",ge),Ge.on("click",Pe),Ge.on("mouseout",Fe),Q.current=!0},[]);return te.useEffect(()=>{if(!x||!P||!a.current)return;const Ge=a.current;if(!Ge.getSource("zips"))try{Ge.getStyle().layers.forEach(pt=>{(pt["source-layer"]==="transportation"||pt["source-layer"]==="transportation_name")&&Ge.setLayoutProperty(pt.id,"visibility","none")}),console.log("[MapLibreMap] Adding source and layer..."),Ge.addSource("zips",{type:"geojson",data:P});const ge=Ge.getStyle().layers;let Pe;const Fe=ge.find(pt=>pt.id==="watername_ocean");Fe&&(Pe=Fe.id),Ge.addLayer({id:"zips-fill",type:"fill",source:"zips",paint:{"fill-color":["case",["has","metricColor"],["get","metricColor"],"transparent"],"fill-opacity":.75,"fill-outline-color":"rgba(0,0,0,0.08)"}},Pe),be()}catch(le){console.error("Add layer failed",le)}},[x,P,be]),te.useEffect(()=>{if(!x||!a.current||!P||Object.keys(l).length===0)return;const Ge=Object.keys(l).sort().join(",");z.current||Se.current===e&&ze.current===Ge||(Se.current=e,ze.current=Ge,z.current=!0,O.current&&O.current.abort(),O.current=new AbortController,(async()=>{try{console.log("[MapLibreMap] Processing data...");const le=await f({type:"PROCESS_GEOJSON",data:{geojson:P,zipData:l,selectedMetric:e}});if(O.current?.signal.aborted)return;const ge=a.current;ge&&ge.getSource("zips")&&(ge.getSource("zips").setData({type:"FeatureCollection",features:le.features??[]}),le.bucketExpression&&ge.setPaintProperty("zips-fill","fill-color",le.bucketExpression),console.log("[MapLibreMap] Data updated on map"))}catch(le){console.error("Data process failed",le)}finally{z.current=!1}})())},[x,P,l,e,f]),te.useEffect(()=>{if(!x||!a.current||!i||!l[i])return;const{longitude:Ge,latitude:le}=l[i];Ge&&le&&a.current.flyTo({center:[Ge,le],zoom:10})},[x,i,l]),oe.jsxs("div",{className:"absolute inset-0 w-full h-full min-h-[400px]",children:[oe.jsx("div",{ref:m,className:"w-full h-full",style:{minHeight:"400px"}}),(h||!x||I)&&oe.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-10",children:I?oe.jsx("div",{className:"text-red-500 font-bold",children:I}):oe.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})]})}function NV({onClose:e}){return te.useEffect(()=>{const n=setTimeout(e,2e4);return()=>clearTimeout(n)},[e]),oe.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:oe.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg shadow-lg p-4",children:[oe.jsxs("div",{className:"flex items-start justify-between",children:[oe.jsxs("div",{className:"flex items-start space-x-3",children:[oe.jsx(l1,{className:"h-5 w-5 text-pink-600 mt-0.5 flex-shrink-0"}),oe.jsxs("div",{className:"text-sm text-dashboard-text-primary",children:[oe.jsx("p",{className:"font-semibold mb-1",children:"This site is proudly ad-free and built to serve the public."}),oe.jsx("p",{className:"text-dashboard-text-secondary",children:"If you find it useful, please consider sponsoring or supporting us to keep the data flowing and the site improving."})]})]}),oe.jsx(wc,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0 flex-shrink-0",children:oe.jsx(Vm,{className:"h-4 w-4"})})]}),oe.jsxs("div",{className:"mt-3 flex space-x-2",children:[oe.jsx(wc,{size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:oe.jsxs("a",{href:"https://buymeacoffee.com/jasperc",target:"_blank",rel:"noopener noreferrer",children:[oe.jsx(l1,{className:"h-4 w-4 mr-2"}),"Sponsor"]})}),oe.jsx(wc,{variant:"outline",size:"sm",onClick:e,children:"Maybe later"})]})]})})}const yy=te.forwardRef(({className:e,...n},i)=>oe.jsx("div",{ref:i,className:Pi("rounded-lg border bg-card text-card-foreground shadow-sm",e),...n}));yy.displayName="Card";const R4=te.forwardRef(({className:e,...n},i)=>oe.jsx("div",{ref:i,className:Pi("flex flex-col space-y-1.5 p-6",e),...n}));R4.displayName="CardHeader";const N4=te.forwardRef(({className:e,...n},i)=>oe.jsx("h3",{ref:i,className:Pi("text-2xl font-semibold leading-none tracking-tight",e),...n}));N4.displayName="CardTitle";const QV=te.forwardRef(({className:e,...n},i)=>oe.jsx("p",{ref:i,className:Pi("text-sm text-muted-foreground",e),...n}));QV.displayName="CardDescription";const vy=te.forwardRef(({className:e,...n},i)=>oe.jsx("div",{ref:i,className:Pi("p-6 pt-0",e),...n}));vy.displayName="CardContent";const OV=te.forwardRef(({className:e,...n},i)=>oe.jsx("div",{ref:i,className:Pi("flex items-center p-6 pt-0",e),...n}));OV.displayName="CardFooter";const zV=By("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function v5({className:e,variant:n,...i}){return oe.jsx("div",{className:Pi(zV({variant:n}),e),...i})}function HV({currentZip:e,allZipData:n,onClose:i}){const[l,h]=te.useState(""),[f,m]=te.useState(null),[a,x]=te.useState(""),S=()=>{if(!l.trim())return;x("");const P=n[l.trim()];P?m(P):(x("ZIP code not found in our database."),m(null))},I=(P,$)=>{if(P==null)return"N/A";const z=Number(P);if(isNaN(z))return"N/A";switch($){case"price":return`$${z.toLocaleString()}`;case"days":return`${z} days`;case"percentage":return`${z.toFixed(1)}%`;case"ratio":return`${(z*100).toFixed(1)}%`;default:return z.toLocaleString()}},U=(P,$)=>{const z=Number(P),O=Number($);if(isNaN(z)||isNaN(O))return"same";const W=z-O;return Math.abs(W)<.01?"same":W>0?"higher":"lower"},Q=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"pending_sales",label:"Pending Sales",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"inventory",label:"Inventory",type:"number"},{key:"months_of_supply",label:"Months of Supply",type:"number"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage"},{key:"price_drops",label:"% Price Drops",type:"percentage"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage"}];return oe.jsxs("div",{className:"space-y-4",children:[oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),oe.jsx(wc,{variant:"ghost",size:"sm",onClick:i,"aria-label":"Close comparison",children:oe.jsx(Vm,{className:"h-4 w-4"})})]}),oe.jsxs("div",{className:"flex space-x-2",children:[oe.jsx(Hy,{type:"text",pattern:"[0-9]*",inputMode:"numeric",maxLength:5,placeholder:"Enter ZIP code...",value:l,onChange:P=>h(P.target.value.replace(/\D/g,"")),onKeyDown:P=>{P.key==="Enter"&&S()},"aria-label":"ZIP code to compare"}),oe.jsx(wc,{onClick:S,size:"sm","aria-label":"Search",children:oe.jsx(bw,{className:"h-4 w-4"})})]}),a&&oe.jsx("div",{className:"text-sm text-red-500 p-2 rounded bg-red-50",children:a}),f&&oe.jsxs("div",{className:"space-y-3 pt-2",children:[oe.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[oe.jsxs("div",{children:[oe.jsx(v5,{variant:"secondary",children:e.zipCode}),oe.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.city})]}),oe.jsx("div",{className:"text-xs text-muted-foreground self-center",children:"vs"}),oe.jsxs("div",{children:[oe.jsx(v5,{variant:"secondary",children:f.zipCode}),oe.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:f.city})]})]}),oe.jsx("div",{className:"space-y-2",children:Q.map(P=>{const $=e[P.key],z=f[P.key],O=U($,z),W=!P.key.includes("dom");return oe.jsx(yy,{children:oe.jsxs(vy,{className:"p-3",children:[oe.jsx("div",{className:"text-center mb-2 text-xs font-medium text-muted-foreground",children:P.label}),oe.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[oe.jsx("div",{className:`text-center font-bold text-sm ${O==="higher"?W?"text-green-600":"text-red-600":O==="lower"?W?"text-red-600":"text-green-600":""}`,children:I($,P.type)}),oe.jsx("div",{className:`text-center font-bold text-sm ${O==="lower"?W?"text-green-600":"text-red-600":O==="higher"?W?"text-red-600":"text-green-600":""}`,children:I(z,P.type)})]})]})},P.key)})})]})]})}function jV({isOpen:e,isCollapsed:n,zipData:i,allZipData:l,onClose:h}){const[f,m]=te.useState(!1);if(!e||!i)return null;const a=(I,U)=>{if(I==null)return"N/A";const Q=Number(I);if(isNaN(Q))return"N/A";switch(U){case"price":return`$${Q.toLocaleString()}`;case"days":return`${Q} days`;case"percentage":return`${Q.toFixed(1)}%`;case"ratio":return`${(Q*100).toFixed(1)}%`;case"coordinate":return Q.toFixed(4);default:return Q.toLocaleString()}},x=I=>{if(I==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const U=Number(I);if(isNaN(U))return{formatted:"N/A",isPositive:!1,isZero:!0};const Q=U>0,P=U===0;return{formatted:`${Q?"+":""}${U.toFixed(1)}%`,isPositive:Q,isZero:P}},S=[{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom_pct",yoyKey:"median_sale_price_yoy_pct"},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom_pct",yoyKey:"median_list_price_yoy_pct"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:"median_ppsf_mom_pct",yoyKey:"median_ppsf_yoy_pct"},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom_pct",yoyKey:"homes_sold_yoy_pct"},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:"pending_sales_mom_pct",yoyKey:"pending_sales_yoy_pct"},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom_pct",yoyKey:"new_listings_yoy_pct"},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom_pct",yoyKey:"inventory_yoy_pct"},{key:"months_of_supply",label:"Months of Supply",type:"number",momKey:"months_of_supply_mom_pct",yoyKey:"months_of_supply_yoy_pct"},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom_pct",yoyKey:"median_dom_yoy_pct"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:"avg_sale_to_list_ratio_mom_pct",yoyKey:"avg_sale_to_list_ratio_yoy_pct"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:"sold_above_list_mom_pct",yoyKey:"sold_above_list_yoy_pct"},{key:"price_drops",label:"% Price Drops",type:"percentage",momKey:"price_drops_mom_pct",yoyKey:"price_drops_yoy_pct"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:"off_market_in_two_weeks_mom_pct",yoyKey:"off_market_in_two_weeks_yoy_pct"}].map(I=>({...I,value:i[I.key]})).filter(I=>I.value!==null&&I.value!==void 0);return oe.jsxs("div",{className:`absolute left-0 top-14 bottom-0 bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 ${n?"w-16":"w-96"}`,children:[oe.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-dashboard-border",role:"banner",children:[!n&&oe.jsxs("div",{className:"flex flex-col justify-center",children:[oe.jsx("h2",{className:"text-lg font-semibold leading-tight",children:i.zipCode}),oe.jsx("p",{className:"text-sm text-muted-foreground leading-none",children:i.city})]}),oe.jsx("div",{className:"flex items-center",children:!n&&oe.jsx(wc,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:h,"aria-label":"Close sidebar",children:oe.jsx(Vm,{className:"h-4 w-4"})})})]}),!n&&oe.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[f?oe.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:oe.jsx(HV,{currentZip:i,allZipData:l,onClose:()=>m(!1)})}):oe.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[oe.jsxs(yy,{children:[oe.jsx(R4,{children:oe.jsxs(N4,{className:"text-sm flex items-center",children:[oe.jsx(oP,{className:"h-4 w-4 mr-2"}),"Location Information"]})}),oe.jsxs(vy,{className:"space-y-2 text-sm",children:[oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{children:"City:"}),oe.jsx("span",{className:"font-medium",children:i.city})]}),oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{children:"County:"}),oe.jsx("span",{className:"font-medium",children:i.county})]}),oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{children:"Metro Area:"}),oe.jsx("span",{className:"font-medium",children:i.parent_metro})]})]})]}),oe.jsxs("h3",{className:"text-sm font-medium pt-2 flex items-center",children:[oe.jsx(J3,{className:"h-4 w-4 mr-2"}),"Market Data"]}),oe.jsx("div",{className:"space-y-3",children:S.map((I,U)=>{const Q=I.momKey?x(i[I.momKey]):null,P=I.yoyKey?x(i[I.yoyKey]):null;return oe.jsx(yy,{children:oe.jsx(vy,{className:"p-4",children:oe.jsxs("div",{className:"space-y-2",children:[oe.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:I.label}),oe.jsx("p",{className:"text-xl font-bold",children:a(I.value,I.type)}),oe.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[Q&&!Q.isZero&&oe.jsxs("span",{className:`flex items-center ${Q.isPositive?"text-green-600":"text-red-600"}`,children:[Q.isPositive?oe.jsx(Wb,{className:"h-3 w-3 mr-1"}):oe.jsx($b,{className:"h-3 w-3 mr-1"}),Q.formatted," vs last month"]}),P&&!P.isZero&&oe.jsxs("span",{className:`flex items-center ${P.isPositive?"text-green-600":"text-red-600"}`,children:[P.isPositive?oe.jsx(Wb,{className:"h-3 w-3 mr-1"}):oe.jsx($b,{className:"h-3 w-3 mr-1"}),P.formatted," vs last year"]})]})]})})},U)})})]}),oe.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-t border-dashboard-border bg-dashboard-panel",children:oe.jsxs(wc,{variant:"outline",className:"w-full",onClick:()=>m(!f),children:[oe.jsx(tP,{className:"h-4 w-4 mr-2"}),f?"Back to Details":"Compare ZIP Codes"]})})]})]})}const _5="/Domapus/";function VV(){const[e,n]=te.useState("median_sale_price"),[i,l]=te.useState(null),[h,f]=te.useState(""),[m,a]=te.useState({}),[x,S]=te.useState(null),[I,U]=te.useState(null),[Q,P]=te.useState(!1),[$]=te.useState(!1),[z,O]=te.useState(!1),{processData:W,isLoading:ne}=VU();te.useEffect(()=>{let ze=!0,Ze=!1;(async()=>{if(Ze)return;Ze=!0,console.log("[HousingDashboard] Starting initial data load");const Ge=new URL(`${_5}data/zip-data.json`,window.location.origin).href,le=new URL(`${_5}data/us-zip-codes.geojson`,window.location.origin).href;console.log("[HousingDashboard] Data URLs:",{dataUrl:Ge,geoJsonUrl:le});try{console.log("[HousingDashboard] Calling processData for ZIP data");const ge=await W({type:"LOAD_AND_PROCESS_DATA",data:{url:Ge,selectedMetric:"median_sale_price"}});if(!ze){console.log("[HousingDashboard] Component unmounted, aborting");return}ge&&(console.log(`[HousingDashboard] ZIP data loaded: ${Object.keys(ge.zip_codes).length} ZIPs`),a(ge.zip_codes),S(ge.bounds)),console.log("[HousingDashboard] Fetching GeoJSON");const Pe=await fetch(le);if(!Pe.ok)throw new Error(`Failed to fetch GeoJSON: ${Pe.status}`);if(!ze){console.log("[HousingDashboard] Component unmounted after GeoJSON fetch, aborting");return}const Fe=await Pe.json();if(console.log(`[HousingDashboard] GeoJSON loaded: ${Fe.features?.length||0} features`),!ze)return;U(Fe),console.log("[HousingDashboard] Initial data load complete")}catch(ge){console.error("[HousingDashboard] Failed to load initial data:",ge)}})();const be=setTimeout(()=>O(!0),3e4);return()=>{ze=!1,clearTimeout(be)}},[]);const ce=ze=>{console.log("[HousingDashboard] ZIP selected:",ze.zipCode),l(ze),P(!0)},[de,Se]=te.useState(!1);return oe.jsxs("div",{className:"w-full h-screen bg-dashboard-bg overflow-hidden flex flex-col",children:[z&&oe.jsx(NV,{onClose:()=>O(!1)}),oe.jsx(kV,{selectedMetric:e,onMetricChange:n,onSearch:f,children:oe.jsx(PV,{allZipData:m,fullGeoJSON:I,selectedMetric:e,onExportModeChange:Se})}),oe.jsxs("div",{className:"flex flex-1 relative min-h-[400px]",children:[Q&&oe.jsx(jV,{isOpen:Q,isCollapsed:$,zipData:i,allZipData:m,onClose:()=>P(!1)}),oe.jsxs("div",{className:"flex-1 relative",children:[oe.jsx("div",{className:"absolute inset-0 min-h-[400px]",children:oe.jsx(RV,{selectedMetric:e,onZipSelect:ce,searchZip:h,zipData:m,colorScaleDomain:x?[x.min,x.max]:null,isLoading:ne||!I,processData:W})}),!de&&oe.jsx("div",{className:"absolute bottom-4 right-4 w-64 z-[1000] pointer-events-auto",children:oe.jsx(Jw,{selectedMetric:e,metricValues:Object.values(m).map(ze=>ze[e]??0).filter(ze=>ze>0)})})]})]})]})}const GV=()=>oe.jsx(VV,{}),KV=()=>{const e=qm();return te.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),oe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:oe.jsxs("div",{className:"text-center",children:[oe.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),oe.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),oe.jsx("p",{className:"text-gray-600 mb-6",children:"Are you looking for [Domapus](https://github.com/Jasperc2024/Domapus)?"}),oe.jsx(zU,{to:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},qV=new Dk,$V=()=>oe.jsx(Nk,{client:qV,children:oe.jsxs(ck,{children:[oe.jsx(VP,{}),oe.jsx(xL,{}),oe.jsx(NU,{basename:"/Domapus",children:oe.jsxs(PU,{children:[oe.jsx(_1,{path:"/",element:oe.jsx(GV,{})}),oe.jsx(_1,{path:"*",element:oe.jsx(KV,{})})]})})]})});class WV extends Tr.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(n,i){console.error("Error Boundary Caught:",n,i)}handleTryAgain=()=>{this.setState({hasError:!1})};render(){return this.state.hasError?oe.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center p-4",children:[oe.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Something went wrong."}),oe.jsx("p",{className:"text-gray-700 mb-6",children:"We've logged the issue and will look into it. Please try again."}),oe.jsx(wc,{onClick:this.handleTryAgain,children:"Try Again"})]}):this.props.children}}WT.createRoot(document.getElementById("root")).render(oe.jsx(WV,{children:oe.jsx($V,{})}));export{ts as _,ZV as c,mw as g};
