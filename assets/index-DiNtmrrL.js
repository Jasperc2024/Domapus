var eN=Object.defineProperty;var G5=e=>{throw TypeError(e)};var tN=(e,t,r)=>t in e?eN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ei=(e,t,r)=>tN(e,typeof t!="symbol"?t+"":t,r),U_=(e,t,r)=>t.has(e)||G5("Cannot "+r);var Kt=(e,t,r)=>(U_(e,t,"read from private field"),r?r.call(e):t.get(e)),Xn=(e,t,r)=>t.has(e)?G5("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),gn=(e,t,r,i)=>(U_(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),jo=(e,t,r)=>(U_(e,t,"access private method"),r);var u0=(e,t,r,i)=>({set _(a){gn(e,t,a,r)},get _(){return Kt(e,t,i)}});function rN(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(e,a,u.get?u:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=r(a);fetch(a.href,u)}})();var nN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var OF={exports:{}},qv={},zF={exports:{}},Pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg=Symbol.for("react.element"),iN=Symbol.for("react.portal"),sN=Symbol.for("react.fragment"),oN=Symbol.for("react.strict_mode"),aN=Symbol.for("react.profiler"),lN=Symbol.for("react.provider"),AN=Symbol.for("react.context"),cN=Symbol.for("react.forward_ref"),uN=Symbol.for("react.suspense"),hN=Symbol.for("react.memo"),dN=Symbol.for("react.lazy"),$5=Symbol.iterator;function fN(e){return e===null||typeof e!="object"?null:(e=$5&&e[$5]||e["@@iterator"],typeof e=="function"?e:null)}var HF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jF=Object.assign,VF={};function Lp(e,t,r){this.props=e,this.context=t,this.refs=VF,this.updater=r||HF}Lp.prototype.isReactComponent={};Lp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function KF(){}KF.prototype=Lp.prototype;function w2(e,t,r){this.props=e,this.context=t,this.refs=VF,this.updater=r||HF}var x2=w2.prototype=new KF;x2.constructor=w2;jF(x2,Lp.prototype);x2.isPureReactComponent=!0;var q5=Array.isArray,GF=Object.prototype.hasOwnProperty,b2={current:null},$F={key:!0,ref:!0,__self:!0,__source:!0};function qF(e,t,r){var i,a={},u=null,h=null;if(t!=null)for(i in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(u=""+t.key),t)GF.call(t,i)&&!$F.hasOwnProperty(i)&&(a[i]=t[i]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var g=Array(o),w=0;w<o;w++)g[w]=arguments[w+2];a.children=g}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)a[i]===void 0&&(a[i]=o[i]);return{$$typeof:kg,type:e,key:u,ref:h,props:a,_owner:b2.current}}function pN(e,t){return{$$typeof:kg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function B2(e){return typeof e=="object"&&e!==null&&e.$$typeof===kg}function mN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var W5=/\/+/g;function R_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mN(""+e.key):t.toString(36)}function vy(e,t,r,i,a){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case kg:case iN:h=!0}}if(h)return h=e,a=a(h),e=i===""?"."+R_(h,0):i,q5(a)?(r="",e!=null&&(r=e.replace(W5,"$&/")+"/"),vy(a,t,r,"",function(w){return w})):a!=null&&(B2(a)&&(a=pN(a,r+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(W5,"$&/")+"/")+e)),t.push(a)),1;if(h=0,i=i===""?".":i+":",q5(e))for(var o=0;o<e.length;o++){u=e[o];var g=i+R_(u,o);h+=vy(u,t,r,g,a)}else if(g=fN(e),typeof g=="function")for(e=g.call(e),o=0;!(u=e.next()).done;)u=u.value,g=i+R_(u,o++),h+=vy(u,t,r,g,a);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function h0(e,t,r){if(e==null)return e;var i=[],a=0;return vy(e,i,"","",function(u){return t.call(r,u,a++)}),i}function gN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _a={current:null},_y={transition:null},yN={ReactCurrentDispatcher:_a,ReactCurrentBatchConfig:_y,ReactCurrentOwner:b2};function WF(){throw Error("act(...) is not supported in production builds of React.")}Pn.Children={map:h0,forEach:function(e,t,r){h0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return h0(e,function(){t++}),t},toArray:function(e){return h0(e,function(t){return t})||[]},only:function(e){if(!B2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pn.Component=Lp;Pn.Fragment=sN;Pn.Profiler=aN;Pn.PureComponent=w2;Pn.StrictMode=oN;Pn.Suspense=uN;Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yN;Pn.act=WF;Pn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=jF({},e.props),a=e.key,u=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,h=b2.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(g in t)GF.call(t,g)&&!$F.hasOwnProperty(g)&&(i[g]=t[g]===void 0&&o!==void 0?o[g]:t[g])}var g=arguments.length-2;if(g===1)i.children=r;else if(1<g){o=Array(g);for(var w=0;w<g;w++)o[w]=arguments[w+2];i.children=o}return{$$typeof:kg,type:e.type,key:a,ref:u,props:i,_owner:h}};Pn.createContext=function(e){return e={$$typeof:AN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lN,_context:e},e.Consumer=e};Pn.createElement=qF;Pn.createFactory=function(e){var t=qF.bind(null,e);return t.type=e,t};Pn.createRef=function(){return{current:null}};Pn.forwardRef=function(e){return{$$typeof:cN,render:e}};Pn.isValidElement=B2;Pn.lazy=function(e){return{$$typeof:dN,_payload:{_status:-1,_result:e},_init:gN}};Pn.memo=function(e,t){return{$$typeof:hN,type:e,compare:t===void 0?null:t}};Pn.startTransition=function(e){var t=_y.transition;_y.transition={};try{e()}finally{_y.transition=t}};Pn.unstable_act=WF;Pn.useCallback=function(e,t){return _a.current.useCallback(e,t)};Pn.useContext=function(e){return _a.current.useContext(e)};Pn.useDebugValue=function(){};Pn.useDeferredValue=function(e){return _a.current.useDeferredValue(e)};Pn.useEffect=function(e,t){return _a.current.useEffect(e,t)};Pn.useId=function(){return _a.current.useId()};Pn.useImperativeHandle=function(e,t,r){return _a.current.useImperativeHandle(e,t,r)};Pn.useInsertionEffect=function(e,t){return _a.current.useInsertionEffect(e,t)};Pn.useLayoutEffect=function(e,t){return _a.current.useLayoutEffect(e,t)};Pn.useMemo=function(e,t){return _a.current.useMemo(e,t)};Pn.useReducer=function(e,t,r){return _a.current.useReducer(e,t,r)};Pn.useRef=function(e){return _a.current.useRef(e)};Pn.useState=function(e){return _a.current.useState(e)};Pn.useSyncExternalStore=function(e,t,r){return _a.current.useSyncExternalStore(e,t,r)};Pn.useTransition=function(){return _a.current.useTransition()};Pn.version="18.3.1";zF.exports=Pn;var ee=zF.exports;const cr=_2(ee),C2=rN({__proto__:null,default:cr},[ee]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vN=ee,_N=Symbol.for("react.element"),wN=Symbol.for("react.fragment"),xN=Object.prototype.hasOwnProperty,bN=vN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BN={key:!0,ref:!0,__self:!0,__source:!0};function ZF(e,t,r){var i,a={},u=null,h=null;r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(h=t.ref);for(i in t)xN.call(t,i)&&!BN.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:_N,type:e,key:u,ref:h,props:a,_owner:bN.current}}qv.Fragment=wN;qv.jsx=ZF;qv.jsxs=ZF;OF.exports=qv;var X=OF.exports,XF={exports:{}},gl={},YF={exports:{}},JF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Pe,Ve){var mt=Pe.length;Pe.push(Ve);e:for(;0<mt;){var gt=mt-1>>>1,ie=Pe[gt];if(0<a(ie,Ve))Pe[gt]=Ve,Pe[mt]=ie,mt=gt;else break e}}function r(Pe){return Pe.length===0?null:Pe[0]}function i(Pe){if(Pe.length===0)return null;var Ve=Pe[0],mt=Pe.pop();if(mt!==Ve){Pe[0]=mt;e:for(var gt=0,ie=Pe.length,Ee=ie>>>1;gt<Ee;){var Me=2*(gt+1)-1,Ye=Pe[Me],at=Me+1,Ze=Pe[at];if(0>a(Ye,mt))at<ie&&0>a(Ze,Ye)?(Pe[gt]=Ze,Pe[at]=mt,gt=at):(Pe[gt]=Ye,Pe[Me]=mt,gt=Me);else if(at<ie&&0>a(Ze,mt))Pe[gt]=Ze,Pe[at]=mt,gt=at;else break e}}return Ve}function a(Pe,Ve){var mt=Pe.sortIndex-Ve.sortIndex;return mt!==0?mt:Pe.id-Ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var h=Date,o=h.now();e.unstable_now=function(){return h.now()-o}}var g=[],w=[],B=1,I=null,P=3,b=!1,N=!1,k=!1,H=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Pe){for(var Ve=r(w);Ve!==null;){if(Ve.callback===null)i(w);else if(Ve.startTime<=Pe)i(w),Ve.sortIndex=Ve.expirationTime,t(g,Ve);else break;Ve=r(w)}}function Z(Pe){if(k=!1,K(Pe),!N)if(r(g)!==null)N=!0,rt(Ae);else{var Ve=r(w);Ve!==null&&ct(Z,Ve.startTime-Pe)}}function Ae(Pe,Ve){N=!1,k&&(k=!1,U(me),me=-1),b=!0;var mt=P;try{for(K(Ve),I=r(g);I!==null&&(!(I.expirationTime>Ve)||Pe&&!re());){var gt=I.callback;if(typeof gt=="function"){I.callback=null,P=I.priorityLevel;var ie=gt(I.expirationTime<=Ve);Ve=e.unstable_now(),typeof ie=="function"?I.callback=ie:I===r(g)&&i(g),K(Ve)}else i(g);I=r(g)}if(I!==null)var Ee=!0;else{var Me=r(w);Me!==null&&ct(Z,Me.startTime-Ve),Ee=!1}return Ee}finally{I=null,P=mt,b=!1}}var fe=!1,ge=null,me=-1,ae=5,Le=-1;function re(){return!(e.unstable_now()-Le<ae)}function he(){if(ge!==null){var Pe=e.unstable_now();Le=Pe;var Ve=!0;try{Ve=ge(!0,Pe)}finally{Ve?Ie():(fe=!1,ge=null)}}else fe=!1}var Ie;if(typeof Q=="function")Ie=function(){Q(he)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,nt=we.port2;we.port1.onmessage=he,Ie=function(){nt.postMessage(null)}}else Ie=function(){H(he,0)};function rt(Pe){ge=Pe,fe||(fe=!0,Ie())}function ct(Pe,Ve){me=H(function(){Pe(e.unstable_now())},Ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pe){Pe.callback=null},e.unstable_continueExecution=function(){N||b||(N=!0,rt(Ae))},e.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<Pe?Math.floor(1e3/Pe):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return r(g)},e.unstable_next=function(Pe){switch(P){case 1:case 2:case 3:var Ve=3;break;default:Ve=P}var mt=P;P=Ve;try{return Pe()}finally{P=mt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Pe,Ve){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var mt=P;P=Pe;try{return Ve()}finally{P=mt}},e.unstable_scheduleCallback=function(Pe,Ve,mt){var gt=e.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?gt+mt:gt):mt=gt,Pe){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=mt+ie,Pe={id:B++,callback:Ve,priorityLevel:Pe,startTime:mt,expirationTime:ie,sortIndex:-1},mt>gt?(Pe.sortIndex=mt,t(w,Pe),r(g)===null&&Pe===r(w)&&(k?(U(me),me=-1):k=!0,ct(Z,mt-gt))):(Pe.sortIndex=ie,t(g,Pe),N||b||(N=!0,rt(Ae))),Pe},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(Pe){var Ve=P;return function(){var mt=P;P=Ve;try{return Pe.apply(this,arguments)}finally{P=mt}}}})(JF);YF.exports=JF;var CN=YF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SN=ee,ml=CN;function sr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eT=new Set,rg={};function Od(e,t){_p(e,t),_p(e+"Capture",t)}function _p(e,t){for(rg[e]=t,e=0;e<t.length;e++)eT.add(t[e])}var mu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),px=Object.prototype.hasOwnProperty,EN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z5={},X5={};function IN(e){return px.call(X5,e)?!0:px.call(Z5,e)?!1:EN.test(e)?X5[e]=!0:(Z5[e]=!0,!1)}function FN(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TN(e,t,r,i){if(t===null||typeof t>"u"||FN(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wa(e,t,r,i,a,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var Io={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Io[e]=new wa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Io[t]=new wa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Io[e]=new wa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Io[e]=new wa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Io[e]=new wa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Io[e]=new wa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Io[e]=new wa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Io[e]=new wa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Io[e]=new wa(e,5,!1,e.toLowerCase(),null,!1,!1)});var S2=/[\-:]([a-z])/g;function E2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(S2,E2);Io[t]=new wa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(S2,E2);Io[t]=new wa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(S2,E2);Io[t]=new wa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Io[e]=new wa(e,1,!1,e.toLowerCase(),null,!1,!1)});Io.xlinkHref=new wa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Io[e]=new wa(e,1,!1,e.toLowerCase(),null,!0,!0)});function I2(e,t,r,i){var a=Io.hasOwnProperty(t)?Io[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TN(t,r,a,i)&&(r=null),i||a===null?IN(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,i=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var bu=SN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d0=Symbol.for("react.element"),kf=Symbol.for("react.portal"),Uf=Symbol.for("react.fragment"),F2=Symbol.for("react.strict_mode"),mx=Symbol.for("react.profiler"),tT=Symbol.for("react.provider"),rT=Symbol.for("react.context"),T2=Symbol.for("react.forward_ref"),gx=Symbol.for("react.suspense"),yx=Symbol.for("react.suspense_list"),P2=Symbol.for("react.memo"),Ju=Symbol.for("react.lazy"),nT=Symbol.for("react.offscreen"),Y5=Symbol.iterator;function lm(e){return e===null||typeof e!="object"?null:(e=Y5&&e[Y5]||e["@@iterator"],typeof e=="function"?e:null)}var As=Object.assign,N_;function Bm(e){if(N_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);N_=t&&t[1]||""}return`
`+N_+e}var D_=!1;function Q_(e,t){if(!e||D_)return"";D_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var i=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){i=w}e.call(t.prototype)}else{try{throw Error()}catch(w){i=w}e()}}catch(w){if(w&&i&&typeof w.stack=="string"){for(var a=w.stack.split(`
`),u=i.stack.split(`
`),h=a.length-1,o=u.length-1;1<=h&&0<=o&&a[h]!==u[o];)o--;for(;1<=h&&0<=o;h--,o--)if(a[h]!==u[o]){if(h!==1||o!==1)do if(h--,o--,0>o||a[h]!==u[o]){var g=`
`+a[h].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=h&&0<=o);break}}}finally{D_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Bm(e):""}function PN(e){switch(e.tag){case 5:return Bm(e.type);case 16:return Bm("Lazy");case 13:return Bm("Suspense");case 19:return Bm("SuspenseList");case 0:case 2:case 15:return e=Q_(e.type,!1),e;case 11:return e=Q_(e.type.render,!1),e;case 1:return e=Q_(e.type,!0),e;default:return""}}function vx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uf:return"Fragment";case kf:return"Portal";case mx:return"Profiler";case F2:return"StrictMode";case gx:return"Suspense";case yx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rT:return(e.displayName||"Context")+".Consumer";case tT:return(e._context.displayName||"Context")+".Provider";case T2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P2:return t=e.displayName||null,t!==null?t:vx(e.type)||"Memo";case Ju:t=e._payload,e=e._init;try{return vx(e(t))}catch{}}return null}function LN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vx(t);case 8:return t===F2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MN(e){var t=iT(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(h){i=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(h){i=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function f0(e){e._valueTracker||(e._valueTracker=MN(e))}function sT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=iT(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function $y(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _x(e,t){var r=t.checked;return As({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function J5(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Fh(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oT(e,t){t=t.checked,t!=null&&I2(e,"checked",t,!1)}function wx(e,t){oT(e,t);var r=Fh(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xx(e,t.type,r):t.hasOwnProperty("defaultValue")&&xx(e,t.type,Fh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xx(e,t,r){(t!=="number"||$y(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Cm=Array.isArray;function Wf(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Fh(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function bx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(sr(91));return As({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(sr(92));if(Cm(r)){if(1<r.length)throw Error(sr(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fh(r)}}function aT(e,t){var r=Fh(t.value),i=Fh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function rS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var p0,AT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(p0=p0||document.createElement("div"),p0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=p0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ng(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Rm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kN=["Webkit","ms","Moz","O"];Object.keys(Rm).forEach(function(e){kN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rm[t]=Rm[e]})});function cT(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Rm.hasOwnProperty(e)&&Rm[e]?(""+t).trim():t+"px"}function uT(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=cT(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,a):e[r]=a}}var UN=As({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cx(e,t){if(t){if(UN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(sr(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(sr(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(sr(61))}if(t.style!=null&&typeof t.style!="object")throw Error(sr(62))}}function Sx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ex=null;function L2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ix=null,Zf=null,Xf=null;function nS(e){if(e=Ng(e)){if(typeof Ix!="function")throw Error(sr(280));var t=e.stateNode;t&&(t=Jv(t),Ix(e.stateNode,e.type,t))}}function hT(e){Zf?Xf?Xf.push(e):Xf=[e]:Zf=e}function dT(){if(Zf){var e=Zf,t=Xf;if(Xf=Zf=null,nS(e),t)for(e=0;e<t.length;e++)nS(t[e])}}function fT(e,t){return e(t)}function pT(){}var O_=!1;function mT(e,t,r){if(O_)return e(t,r);O_=!0;try{return fT(e,t,r)}finally{O_=!1,(Zf!==null||Xf!==null)&&(pT(),dT())}}function ig(e,t){var r=e.stateNode;if(r===null)return null;var i=Jv(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(sr(231,t,typeof r));return r}var Fx=!1;if(mu)try{var Am={};Object.defineProperty(Am,"passive",{get:function(){Fx=!0}}),window.addEventListener("test",Am,Am),window.removeEventListener("test",Am,Am)}catch{Fx=!1}function RN(e,t,r,i,a,u,h,o,g){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(B){this.onError(B)}}var Nm=!1,qy=null,Wy=!1,Tx=null,NN={onError:function(e){Nm=!0,qy=e}};function DN(e,t,r,i,a,u,h,o,g){Nm=!1,qy=null,RN.apply(NN,arguments)}function QN(e,t,r,i,a,u,h,o,g){if(DN.apply(this,arguments),Nm){if(Nm){var w=qy;Nm=!1,qy=null}else throw Error(sr(198));Wy||(Wy=!0,Tx=w)}}function zd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function iS(e){if(zd(e)!==e)throw Error(sr(188))}function ON(e){var t=e.alternate;if(!t){if(t=zd(e),t===null)throw Error(sr(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(a===null)break;var u=a.alternate;if(u===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===r)return iS(a),e;if(u===i)return iS(a),t;u=u.sibling}throw Error(sr(188))}if(r.return!==i.return)r=a,i=u;else{for(var h=!1,o=a.child;o;){if(o===r){h=!0,r=a,i=u;break}if(o===i){h=!0,i=a,r=u;break}o=o.sibling}if(!h){for(o=u.child;o;){if(o===r){h=!0,r=u,i=a;break}if(o===i){h=!0,i=u,r=a;break}o=o.sibling}if(!h)throw Error(sr(189))}}if(r.alternate!==i)throw Error(sr(190))}if(r.tag!==3)throw Error(sr(188));return r.stateNode.current===r?e:t}function yT(e){return e=ON(e),e!==null?vT(e):null}function vT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vT(e);if(t!==null)return t;e=e.sibling}return null}var _T=ml.unstable_scheduleCallback,sS=ml.unstable_cancelCallback,zN=ml.unstable_shouldYield,HN=ml.unstable_requestPaint,Is=ml.unstable_now,jN=ml.unstable_getCurrentPriorityLevel,M2=ml.unstable_ImmediatePriority,wT=ml.unstable_UserBlockingPriority,Zy=ml.unstable_NormalPriority,VN=ml.unstable_LowPriority,xT=ml.unstable_IdlePriority,Wv=null,wc=null;function KN(e){if(wc&&typeof wc.onCommitFiberRoot=="function")try{wc.onCommitFiberRoot(Wv,e,void 0,(e.current.flags&128)===128)}catch{}}var PA=Math.clz32?Math.clz32:qN,GN=Math.log,$N=Math.LN2;function qN(e){return e>>>=0,e===0?32:31-(GN(e)/$N|0)|0}var m0=64,g0=4194304;function Sm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xy(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,u=e.pingedLanes,h=r&268435455;if(h!==0){var o=h&~a;o!==0?i=Sm(o):(u&=h,u!==0&&(i=Sm(u)))}else h=r&~a,h!==0?i=Sm(h):u!==0&&(i=Sm(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,u=t&-t,a>=u||a===16&&(u&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-PA(t),a=1<<r,i|=e[r],t&=~a;return i}function WN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZN(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-PA(u),o=1<<h,g=a[h];g===-1?(!(o&r)||o&i)&&(a[h]=WN(o,t)):g<=t&&(e.expiredLanes|=o),u&=~o}}function Px(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bT(){var e=m0;return m0<<=1,!(m0&4194240)&&(m0=64),e}function z_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ug(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-PA(t),e[t]=r}function XN(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-PA(r),u=1<<a;t[a]=0,i[a]=-1,e[a]=-1,r&=~u}}function k2(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-PA(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}var ai=0;function BT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CT,U2,ST,ET,IT,Lx=!1,y0=[],mh=null,gh=null,yh=null,sg=new Map,og=new Map,rh=[],YN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oS(e,t){switch(e){case"focusin":case"focusout":mh=null;break;case"dragenter":case"dragleave":gh=null;break;case"mouseover":case"mouseout":yh=null;break;case"pointerover":case"pointerout":sg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":og.delete(t.pointerId)}}function cm(e,t,r,i,a,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:u,targetContainers:[a]},t!==null&&(t=Ng(t),t!==null&&U2(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function JN(e,t,r,i,a){switch(t){case"focusin":return mh=cm(mh,e,t,r,i,a),!0;case"dragenter":return gh=cm(gh,e,t,r,i,a),!0;case"mouseover":return yh=cm(yh,e,t,r,i,a),!0;case"pointerover":var u=a.pointerId;return sg.set(u,cm(sg.get(u)||null,e,t,r,i,a)),!0;case"gotpointercapture":return u=a.pointerId,og.set(u,cm(og.get(u)||null,e,t,r,i,a)),!0}return!1}function FT(e){var t=dd(e.target);if(t!==null){var r=zd(t);if(r!==null){if(t=r.tag,t===13){if(t=gT(r),t!==null){e.blockedOn=t,IT(e.priority,function(){ST(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Mx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Ex=i,r.target.dispatchEvent(i),Ex=null}else return t=Ng(r),t!==null&&U2(t),e.blockedOn=r,!1;t.shift()}return!0}function aS(e,t,r){wy(e)&&r.delete(t)}function eD(){Lx=!1,mh!==null&&wy(mh)&&(mh=null),gh!==null&&wy(gh)&&(gh=null),yh!==null&&wy(yh)&&(yh=null),sg.forEach(aS),og.forEach(aS)}function um(e,t){e.blockedOn===t&&(e.blockedOn=null,Lx||(Lx=!0,ml.unstable_scheduleCallback(ml.unstable_NormalPriority,eD)))}function ag(e){function t(a){return um(a,e)}if(0<y0.length){um(y0[0],e);for(var r=1;r<y0.length;r++){var i=y0[r];i.blockedOn===e&&(i.blockedOn=null)}}for(mh!==null&&um(mh,e),gh!==null&&um(gh,e),yh!==null&&um(yh,e),sg.forEach(t),og.forEach(t),r=0;r<rh.length;r++)i=rh[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<rh.length&&(r=rh[0],r.blockedOn===null);)FT(r),r.blockedOn===null&&rh.shift()}var Yf=bu.ReactCurrentBatchConfig,Yy=!0;function tD(e,t,r,i){var a=ai,u=Yf.transition;Yf.transition=null;try{ai=1,R2(e,t,r,i)}finally{ai=a,Yf.transition=u}}function rD(e,t,r,i){var a=ai,u=Yf.transition;Yf.transition=null;try{ai=4,R2(e,t,r,i)}finally{ai=a,Yf.transition=u}}function R2(e,t,r,i){if(Yy){var a=Mx(e,t,r,i);if(a===null)X_(e,t,i,Jy,r),oS(e,i);else if(JN(a,e,t,r,i))i.stopPropagation();else if(oS(e,i),t&4&&-1<YN.indexOf(e)){for(;a!==null;){var u=Ng(a);if(u!==null&&CT(u),u=Mx(e,t,r,i),u===null&&X_(e,t,i,Jy,r),u===a)break;a=u}a!==null&&i.stopPropagation()}else X_(e,t,i,null,r)}}var Jy=null;function Mx(e,t,r,i){if(Jy=null,e=L2(i),e=dd(e),e!==null)if(t=zd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gT(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jy=e,null}function TT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jN()){case M2:return 1;case wT:return 4;case Zy:case VN:return 16;case xT:return 536870912;default:return 16}default:return 16}}var Ah=null,N2=null,xy=null;function PT(){if(xy)return xy;var e,t=N2,r=t.length,i,a="value"in Ah?Ah.value:Ah.textContent,u=a.length;for(e=0;e<r&&t[e]===a[e];e++);var h=r-e;for(i=1;i<=h&&t[r-i]===a[u-i];i++);return xy=a.slice(e,1<i?1-i:void 0)}function by(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function v0(){return!0}function lS(){return!1}function yl(e){function t(r,i,a,u,h){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?v0:lS,this.isPropagationStopped=lS,this}return As(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=v0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=v0)},persist:function(){},isPersistent:v0}),t}var Mp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D2=yl(Mp),Rg=As({},Mp,{view:0,detail:0}),nD=yl(Rg),H_,j_,hm,Zv=As({},Rg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Q2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hm&&(hm&&e.type==="mousemove"?(H_=e.screenX-hm.screenX,j_=e.screenY-hm.screenY):j_=H_=0,hm=e),H_)},movementY:function(e){return"movementY"in e?e.movementY:j_}}),AS=yl(Zv),iD=As({},Zv,{dataTransfer:0}),sD=yl(iD),oD=As({},Rg,{relatedTarget:0}),V_=yl(oD),aD=As({},Mp,{animationName:0,elapsedTime:0,pseudoElement:0}),lD=yl(aD),AD=As({},Mp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cD=yl(AD),uD=As({},Mp,{data:0}),cS=yl(uD),hD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fD[e])?!!t[e]:!1}function Q2(){return pD}var mD=As({},Rg,{key:function(e){if(e.key){var t=hD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=by(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Q2,charCode:function(e){return e.type==="keypress"?by(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?by(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gD=yl(mD),yD=As({},Zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uS=yl(yD),vD=As({},Rg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Q2}),_D=yl(vD),wD=As({},Mp,{propertyName:0,elapsedTime:0,pseudoElement:0}),xD=yl(wD),bD=As({},Zv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),BD=yl(bD),CD=[9,13,27,32],O2=mu&&"CompositionEvent"in window,Dm=null;mu&&"documentMode"in document&&(Dm=document.documentMode);var SD=mu&&"TextEvent"in window&&!Dm,LT=mu&&(!O2||Dm&&8<Dm&&11>=Dm),hS=" ",dS=!1;function MT(e,t){switch(e){case"keyup":return CD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rf=!1;function ED(e,t){switch(e){case"compositionend":return kT(t);case"keypress":return t.which!==32?null:(dS=!0,hS);case"textInput":return e=t.data,e===hS&&dS?null:e;default:return null}}function ID(e,t){if(Rf)return e==="compositionend"||!O2&&MT(e,t)?(e=PT(),xy=N2=Ah=null,Rf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LT&&t.locale!=="ko"?null:t.data;default:return null}}var FD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FD[e.type]:t==="textarea"}function UT(e,t,r,i){hT(i),t=ev(t,"onChange"),0<t.length&&(r=new D2("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Qm=null,lg=null;function TD(e){GT(e,0)}function Xv(e){var t=Qf(e);if(sT(t))return e}function PD(e,t){if(e==="change")return t}var RT=!1;if(mu){var K_;if(mu){var G_="oninput"in document;if(!G_){var pS=document.createElement("div");pS.setAttribute("oninput","return;"),G_=typeof pS.oninput=="function"}K_=G_}else K_=!1;RT=K_&&(!document.documentMode||9<document.documentMode)}function mS(){Qm&&(Qm.detachEvent("onpropertychange",NT),lg=Qm=null)}function NT(e){if(e.propertyName==="value"&&Xv(lg)){var t=[];UT(t,lg,e,L2(e)),mT(TD,t)}}function LD(e,t,r){e==="focusin"?(mS(),Qm=t,lg=r,Qm.attachEvent("onpropertychange",NT)):e==="focusout"&&mS()}function MD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xv(lg)}function kD(e,t){if(e==="click")return Xv(t)}function UD(e,t){if(e==="input"||e==="change")return Xv(t)}function RD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var MA=typeof Object.is=="function"?Object.is:RD;function Ag(e,t){if(MA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!px.call(t,a)||!MA(e[a],t[a]))return!1}return!0}function gS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yS(e,t){var r=gS(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gS(r)}}function DT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?DT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QT(){for(var e=window,t=$y();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$y(e.document)}return t}function z2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ND(e){var t=QT(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&DT(r.ownerDocument.documentElement,r)){if(i!==null&&z2(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,u=Math.min(i.start,a);i=i.end===void 0?u:Math.min(i.end,a),!e.extend&&u>i&&(a=i,i=u,u=a),a=yS(r,u);var h=yS(r,i);a&&h&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var DD=mu&&"documentMode"in document&&11>=document.documentMode,Nf=null,kx=null,Om=null,Ux=!1;function vS(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ux||Nf==null||Nf!==$y(i)||(i=Nf,"selectionStart"in i&&z2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Om&&Ag(Om,i)||(Om=i,i=ev(kx,"onSelect"),0<i.length&&(t=new D2("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Nf)))}function _0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Df={animationend:_0("Animation","AnimationEnd"),animationiteration:_0("Animation","AnimationIteration"),animationstart:_0("Animation","AnimationStart"),transitionend:_0("Transition","TransitionEnd")},$_={},OT={};mu&&(OT=document.createElement("div").style,"AnimationEvent"in window||(delete Df.animationend.animation,delete Df.animationiteration.animation,delete Df.animationstart.animation),"TransitionEvent"in window||delete Df.transitionend.transition);function Yv(e){if($_[e])return $_[e];if(!Df[e])return e;var t=Df[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in OT)return $_[e]=t[r];return e}var zT=Yv("animationend"),HT=Yv("animationiteration"),jT=Yv("animationstart"),VT=Yv("transitionend"),KT=new Map,_S="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uh(e,t){KT.set(e,t),Od(t,[e])}for(var q_=0;q_<_S.length;q_++){var W_=_S[q_],QD=W_.toLowerCase(),OD=W_[0].toUpperCase()+W_.slice(1);Uh(QD,"on"+OD)}Uh(zT,"onAnimationEnd");Uh(HT,"onAnimationIteration");Uh(jT,"onAnimationStart");Uh("dblclick","onDoubleClick");Uh("focusin","onFocus");Uh("focusout","onBlur");Uh(VT,"onTransitionEnd");_p("onMouseEnter",["mouseout","mouseover"]);_p("onMouseLeave",["mouseout","mouseover"]);_p("onPointerEnter",["pointerout","pointerover"]);_p("onPointerLeave",["pointerout","pointerover"]);Od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Od("onBeforeInput",["compositionend","keypress","textInput","paste"]);Od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Em="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Em));function wS(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,QN(i,t,void 0,e),e.currentTarget=null}function GT(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var h=i.length-1;0<=h;h--){var o=i[h],g=o.instance,w=o.currentTarget;if(o=o.listener,g!==u&&a.isPropagationStopped())break e;wS(a,o,w),u=g}else for(h=0;h<i.length;h++){if(o=i[h],g=o.instance,w=o.currentTarget,o=o.listener,g!==u&&a.isPropagationStopped())break e;wS(a,o,w),u=g}}}if(Wy)throw e=Tx,Wy=!1,Tx=null,e}function Ni(e,t){var r=t[Ox];r===void 0&&(r=t[Ox]=new Set);var i=e+"__bubble";r.has(i)||($T(t,e,2,!1),r.add(i))}function Z_(e,t,r){var i=0;t&&(i|=4),$T(r,e,i,t)}var w0="_reactListening"+Math.random().toString(36).slice(2);function cg(e){if(!e[w0]){e[w0]=!0,eT.forEach(function(r){r!=="selectionchange"&&(zD.has(r)||Z_(r,!1,e),Z_(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[w0]||(t[w0]=!0,Z_("selectionchange",!1,t))}}function $T(e,t,r,i){switch(TT(t)){case 1:var a=tD;break;case 4:a=rD;break;default:a=R2}r=a.bind(null,t,r,e),a=void 0,!Fx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function X_(e,t,r,i,a){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var h=i.tag;if(h===3||h===4){var o=i.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(h===4)for(h=i.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;h=h.return}for(;o!==null;){if(h=dd(o),h===null)return;if(g=h.tag,g===5||g===6){i=u=h;continue e}o=o.parentNode}}i=i.return}mT(function(){var w=u,B=L2(r),I=[];e:{var P=KT.get(e);if(P!==void 0){var b=D2,N=e;switch(e){case"keypress":if(by(r)===0)break e;case"keydown":case"keyup":b=gD;break;case"focusin":N="focus",b=V_;break;case"focusout":N="blur",b=V_;break;case"beforeblur":case"afterblur":b=V_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=AS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=sD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=_D;break;case zT:case HT:case jT:b=lD;break;case VT:b=xD;break;case"scroll":b=nD;break;case"wheel":b=BD;break;case"copy":case"cut":case"paste":b=cD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=uS}var k=(t&4)!==0,H=!k&&e==="scroll",U=k?P!==null?P+"Capture":null:P;k=[];for(var Q=w,K;Q!==null;){K=Q;var Z=K.stateNode;if(K.tag===5&&Z!==null&&(K=Z,U!==null&&(Z=ig(Q,U),Z!=null&&k.push(ug(Q,Z,K)))),H)break;Q=Q.return}0<k.length&&(P=new b(P,N,null,r,B),I.push({event:P,listeners:k}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",P&&r!==Ex&&(N=r.relatedTarget||r.fromElement)&&(dd(N)||N[gu]))break e;if((b||P)&&(P=B.window===B?B:(P=B.ownerDocument)?P.defaultView||P.parentWindow:window,b?(N=r.relatedTarget||r.toElement,b=w,N=N?dd(N):null,N!==null&&(H=zd(N),N!==H||N.tag!==5&&N.tag!==6)&&(N=null)):(b=null,N=w),b!==N)){if(k=AS,Z="onMouseLeave",U="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(k=uS,Z="onPointerLeave",U="onPointerEnter",Q="pointer"),H=b==null?P:Qf(b),K=N==null?P:Qf(N),P=new k(Z,Q+"leave",b,r,B),P.target=H,P.relatedTarget=K,Z=null,dd(B)===w&&(k=new k(U,Q+"enter",N,r,B),k.target=K,k.relatedTarget=H,Z=k),H=Z,b&&N)t:{for(k=b,U=N,Q=0,K=k;K;K=mf(K))Q++;for(K=0,Z=U;Z;Z=mf(Z))K++;for(;0<Q-K;)k=mf(k),Q--;for(;0<K-Q;)U=mf(U),K--;for(;Q--;){if(k===U||U!==null&&k===U.alternate)break t;k=mf(k),U=mf(U)}k=null}else k=null;b!==null&&xS(I,P,b,k,!1),N!==null&&H!==null&&xS(I,H,N,k,!0)}}e:{if(P=w?Qf(w):window,b=P.nodeName&&P.nodeName.toLowerCase(),b==="select"||b==="input"&&P.type==="file")var Ae=PD;else if(fS(P))if(RT)Ae=UD;else{Ae=MD;var fe=LD}else(b=P.nodeName)&&b.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(Ae=kD);if(Ae&&(Ae=Ae(e,w))){UT(I,Ae,r,B);break e}fe&&fe(e,P,w),e==="focusout"&&(fe=P._wrapperState)&&fe.controlled&&P.type==="number"&&xx(P,"number",P.value)}switch(fe=w?Qf(w):window,e){case"focusin":(fS(fe)||fe.contentEditable==="true")&&(Nf=fe,kx=w,Om=null);break;case"focusout":Om=kx=Nf=null;break;case"mousedown":Ux=!0;break;case"contextmenu":case"mouseup":case"dragend":Ux=!1,vS(I,r,B);break;case"selectionchange":if(DD)break;case"keydown":case"keyup":vS(I,r,B)}var ge;if(O2)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Rf?MT(e,r)&&(me="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(me="onCompositionStart");me&&(LT&&r.locale!=="ko"&&(Rf||me!=="onCompositionStart"?me==="onCompositionEnd"&&Rf&&(ge=PT()):(Ah=B,N2="value"in Ah?Ah.value:Ah.textContent,Rf=!0)),fe=ev(w,me),0<fe.length&&(me=new cS(me,e,null,r,B),I.push({event:me,listeners:fe}),ge?me.data=ge:(ge=kT(r),ge!==null&&(me.data=ge)))),(ge=SD?ED(e,r):ID(e,r))&&(w=ev(w,"onBeforeInput"),0<w.length&&(B=new cS("onBeforeInput","beforeinput",null,r,B),I.push({event:B,listeners:w}),B.data=ge))}GT(I,t)})}function ug(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ev(e,t){for(var r=t+"Capture",i=[];e!==null;){var a=e,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=ig(e,r),u!=null&&i.unshift(ug(e,u,a)),u=ig(e,t),u!=null&&i.push(ug(e,u,a))),e=e.return}return i}function mf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xS(e,t,r,i,a){for(var u=t._reactName,h=[];r!==null&&r!==i;){var o=r,g=o.alternate,w=o.stateNode;if(g!==null&&g===i)break;o.tag===5&&w!==null&&(o=w,a?(g=ig(r,u),g!=null&&h.unshift(ug(r,g,o))):a||(g=ig(r,u),g!=null&&h.push(ug(r,g,o)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}var HD=/\r\n?/g,jD=/\u0000|\uFFFD/g;function bS(e){return(typeof e=="string"?e:""+e).replace(HD,`
`).replace(jD,"")}function x0(e,t,r){if(t=bS(t),bS(e)!==t&&r)throw Error(sr(425))}function tv(){}var Rx=null,Nx=null;function Dx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qx=typeof setTimeout=="function"?setTimeout:void 0,VD=typeof clearTimeout=="function"?clearTimeout:void 0,BS=typeof Promise=="function"?Promise:void 0,KD=typeof queueMicrotask=="function"?queueMicrotask:typeof BS<"u"?function(e){return BS.resolve(null).then(e).catch(GD)}:Qx;function GD(e){setTimeout(function(){throw e})}function Y_(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){e.removeChild(a),ag(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);ag(t)}function vh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function CS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var kp=Math.random().toString(36).slice(2),gc="__reactFiber$"+kp,hg="__reactProps$"+kp,gu="__reactContainer$"+kp,Ox="__reactEvents$"+kp,$D="__reactListeners$"+kp,qD="__reactHandles$"+kp;function dd(e){var t=e[gc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[gu]||r[gc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=CS(e);e!==null;){if(r=e[gc])return r;e=CS(e)}return t}e=r,r=e.parentNode}return null}function Ng(e){return e=e[gc]||e[gu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(sr(33))}function Jv(e){return e[hg]||null}var zx=[],Of=-1;function Rh(e){return{current:e}}function Qi(e){0>Of||(e.current=zx[Of],zx[Of]=null,Of--)}function Ii(e,t){Of++,zx[Of]=e.current,e.current=t}var Th={},ta=Rh(Th),Ra=Rh(!1),Td=Th;function wp(e,t){var r=e.type.contextTypes;if(!r)return Th;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in r)a[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Na(e){return e=e.childContextTypes,e!=null}function rv(){Qi(Ra),Qi(ta)}function SS(e,t,r){if(ta.current!==Th)throw Error(sr(168));Ii(ta,t),Ii(Ra,r)}function qT(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(sr(108,LN(e)||"Unknown",a));return As({},r,i)}function nv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Th,Td=ta.current,Ii(ta,e),Ii(Ra,Ra.current),!0}function ES(e,t,r){var i=e.stateNode;if(!i)throw Error(sr(169));r?(e=qT(e,t,Td),i.__reactInternalMemoizedMergedChildContext=e,Qi(Ra),Qi(ta),Ii(ta,e)):Qi(Ra),Ii(Ra,r)}var Au=null,e1=!1,J_=!1;function WT(e){Au===null?Au=[e]:Au.push(e)}function WD(e){e1=!0,WT(e)}function Nh(){if(!J_&&Au!==null){J_=!0;var e=0,t=ai;try{var r=Au;for(ai=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Au=null,e1=!1}catch(a){throw Au!==null&&(Au=Au.slice(e+1)),_T(M2,Nh),a}finally{ai=t,J_=!1}}return null}var zf=[],Hf=0,iv=null,sv=0,Ol=[],zl=0,Pd=null,hu=1,du="";function ld(e,t){zf[Hf++]=sv,zf[Hf++]=iv,iv=e,sv=t}function ZT(e,t,r){Ol[zl++]=hu,Ol[zl++]=du,Ol[zl++]=Pd,Pd=e;var i=hu;e=du;var a=32-PA(i)-1;i&=~(1<<a),r+=1;var u=32-PA(t)+a;if(30<u){var h=a-a%5;u=(i&(1<<h)-1).toString(32),i>>=h,a-=h,hu=1<<32-PA(t)+a|r<<a|i,du=u+e}else hu=1<<u|r<<a|i,du=e}function H2(e){e.return!==null&&(ld(e,1),ZT(e,1,0))}function j2(e){for(;e===iv;)iv=zf[--Hf],zf[Hf]=null,sv=zf[--Hf],zf[Hf]=null;for(;e===Pd;)Pd=Ol[--zl],Ol[zl]=null,du=Ol[--zl],Ol[zl]=null,hu=Ol[--zl],Ol[zl]=null}var fl=null,hl=null,Wi=!1,FA=null;function XT(e,t){var r=jl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function IS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fl=e,hl=vh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fl=e,hl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pd!==null?{id:hu,overflow:du}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=jl(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,fl=e,hl=null,!0):!1;default:return!1}}function Hx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jx(e){if(Wi){var t=hl;if(t){var r=t;if(!IS(e,t)){if(Hx(e))throw Error(sr(418));t=vh(r.nextSibling);var i=fl;t&&IS(e,t)?XT(i,r):(e.flags=e.flags&-4097|2,Wi=!1,fl=e)}}else{if(Hx(e))throw Error(sr(418));e.flags=e.flags&-4097|2,Wi=!1,fl=e}}}function FS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fl=e}function b0(e){if(e!==fl)return!1;if(!Wi)return FS(e),Wi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Dx(e.type,e.memoizedProps)),t&&(t=hl)){if(Hx(e))throw YT(),Error(sr(418));for(;t;)XT(e,t),t=vh(t.nextSibling)}if(FS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(sr(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){hl=vh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}hl=null}}else hl=fl?vh(e.stateNode.nextSibling):null;return!0}function YT(){for(var e=hl;e;)e=vh(e.nextSibling)}function xp(){hl=fl=null,Wi=!1}function V2(e){FA===null?FA=[e]:FA.push(e)}var ZD=bu.ReactCurrentBatchConfig;function dm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(sr(309));var i=r.stateNode}if(!i)throw Error(sr(147,e));var a=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var o=a.refs;h===null?delete o[u]:o[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(sr(284));if(!r._owner)throw Error(sr(290,e))}return e}function B0(e,t){throw e=Object.prototype.toString.call(t),Error(sr(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function TS(e){var t=e._init;return t(e._payload)}function JT(e){function t(U,Q){if(e){var K=U.deletions;K===null?(U.deletions=[Q],U.flags|=16):K.push(Q)}}function r(U,Q){if(!e)return null;for(;Q!==null;)t(U,Q),Q=Q.sibling;return null}function i(U,Q){for(U=new Map;Q!==null;)Q.key!==null?U.set(Q.key,Q):U.set(Q.index,Q),Q=Q.sibling;return U}function a(U,Q){return U=bh(U,Q),U.index=0,U.sibling=null,U}function u(U,Q,K){return U.index=K,e?(K=U.alternate,K!==null?(K=K.index,K<Q?(U.flags|=2,Q):K):(U.flags|=2,Q)):(U.flags|=1048576,Q)}function h(U){return e&&U.alternate===null&&(U.flags|=2),U}function o(U,Q,K,Z){return Q===null||Q.tag!==6?(Q=ow(K,U.mode,Z),Q.return=U,Q):(Q=a(Q,K),Q.return=U,Q)}function g(U,Q,K,Z){var Ae=K.type;return Ae===Uf?B(U,Q,K.props.children,Z,K.key):Q!==null&&(Q.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===Ju&&TS(Ae)===Q.type)?(Z=a(Q,K.props),Z.ref=dm(U,Q,K),Z.return=U,Z):(Z=Ty(K.type,K.key,K.props,null,U.mode,Z),Z.ref=dm(U,Q,K),Z.return=U,Z)}function w(U,Q,K,Z){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==K.containerInfo||Q.stateNode.implementation!==K.implementation?(Q=aw(K,U.mode,Z),Q.return=U,Q):(Q=a(Q,K.children||[]),Q.return=U,Q)}function B(U,Q,K,Z,Ae){return Q===null||Q.tag!==7?(Q=Cd(K,U.mode,Z,Ae),Q.return=U,Q):(Q=a(Q,K),Q.return=U,Q)}function I(U,Q,K){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=ow(""+Q,U.mode,K),Q.return=U,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case d0:return K=Ty(Q.type,Q.key,Q.props,null,U.mode,K),K.ref=dm(U,null,Q),K.return=U,K;case kf:return Q=aw(Q,U.mode,K),Q.return=U,Q;case Ju:var Z=Q._init;return I(U,Z(Q._payload),K)}if(Cm(Q)||lm(Q))return Q=Cd(Q,U.mode,K,null),Q.return=U,Q;B0(U,Q)}return null}function P(U,Q,K,Z){var Ae=Q!==null?Q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Ae!==null?null:o(U,Q,""+K,Z);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case d0:return K.key===Ae?g(U,Q,K,Z):null;case kf:return K.key===Ae?w(U,Q,K,Z):null;case Ju:return Ae=K._init,P(U,Q,Ae(K._payload),Z)}if(Cm(K)||lm(K))return Ae!==null?null:B(U,Q,K,Z,null);B0(U,K)}return null}function b(U,Q,K,Z,Ae){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return U=U.get(K)||null,o(Q,U,""+Z,Ae);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case d0:return U=U.get(Z.key===null?K:Z.key)||null,g(Q,U,Z,Ae);case kf:return U=U.get(Z.key===null?K:Z.key)||null,w(Q,U,Z,Ae);case Ju:var fe=Z._init;return b(U,Q,K,fe(Z._payload),Ae)}if(Cm(Z)||lm(Z))return U=U.get(K)||null,B(Q,U,Z,Ae,null);B0(Q,Z)}return null}function N(U,Q,K,Z){for(var Ae=null,fe=null,ge=Q,me=Q=0,ae=null;ge!==null&&me<K.length;me++){ge.index>me?(ae=ge,ge=null):ae=ge.sibling;var Le=P(U,ge,K[me],Z);if(Le===null){ge===null&&(ge=ae);break}e&&ge&&Le.alternate===null&&t(U,ge),Q=u(Le,Q,me),fe===null?Ae=Le:fe.sibling=Le,fe=Le,ge=ae}if(me===K.length)return r(U,ge),Wi&&ld(U,me),Ae;if(ge===null){for(;me<K.length;me++)ge=I(U,K[me],Z),ge!==null&&(Q=u(ge,Q,me),fe===null?Ae=ge:fe.sibling=ge,fe=ge);return Wi&&ld(U,me),Ae}for(ge=i(U,ge);me<K.length;me++)ae=b(ge,U,me,K[me],Z),ae!==null&&(e&&ae.alternate!==null&&ge.delete(ae.key===null?me:ae.key),Q=u(ae,Q,me),fe===null?Ae=ae:fe.sibling=ae,fe=ae);return e&&ge.forEach(function(re){return t(U,re)}),Wi&&ld(U,me),Ae}function k(U,Q,K,Z){var Ae=lm(K);if(typeof Ae!="function")throw Error(sr(150));if(K=Ae.call(K),K==null)throw Error(sr(151));for(var fe=Ae=null,ge=Q,me=Q=0,ae=null,Le=K.next();ge!==null&&!Le.done;me++,Le=K.next()){ge.index>me?(ae=ge,ge=null):ae=ge.sibling;var re=P(U,ge,Le.value,Z);if(re===null){ge===null&&(ge=ae);break}e&&ge&&re.alternate===null&&t(U,ge),Q=u(re,Q,me),fe===null?Ae=re:fe.sibling=re,fe=re,ge=ae}if(Le.done)return r(U,ge),Wi&&ld(U,me),Ae;if(ge===null){for(;!Le.done;me++,Le=K.next())Le=I(U,Le.value,Z),Le!==null&&(Q=u(Le,Q,me),fe===null?Ae=Le:fe.sibling=Le,fe=Le);return Wi&&ld(U,me),Ae}for(ge=i(U,ge);!Le.done;me++,Le=K.next())Le=b(ge,U,me,Le.value,Z),Le!==null&&(e&&Le.alternate!==null&&ge.delete(Le.key===null?me:Le.key),Q=u(Le,Q,me),fe===null?Ae=Le:fe.sibling=Le,fe=Le);return e&&ge.forEach(function(he){return t(U,he)}),Wi&&ld(U,me),Ae}function H(U,Q,K,Z){if(typeof K=="object"&&K!==null&&K.type===Uf&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case d0:e:{for(var Ae=K.key,fe=Q;fe!==null;){if(fe.key===Ae){if(Ae=K.type,Ae===Uf){if(fe.tag===7){r(U,fe.sibling),Q=a(fe,K.props.children),Q.return=U,U=Q;break e}}else if(fe.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===Ju&&TS(Ae)===fe.type){r(U,fe.sibling),Q=a(fe,K.props),Q.ref=dm(U,fe,K),Q.return=U,U=Q;break e}r(U,fe);break}else t(U,fe);fe=fe.sibling}K.type===Uf?(Q=Cd(K.props.children,U.mode,Z,K.key),Q.return=U,U=Q):(Z=Ty(K.type,K.key,K.props,null,U.mode,Z),Z.ref=dm(U,Q,K),Z.return=U,U=Z)}return h(U);case kf:e:{for(fe=K.key;Q!==null;){if(Q.key===fe)if(Q.tag===4&&Q.stateNode.containerInfo===K.containerInfo&&Q.stateNode.implementation===K.implementation){r(U,Q.sibling),Q=a(Q,K.children||[]),Q.return=U,U=Q;break e}else{r(U,Q);break}else t(U,Q);Q=Q.sibling}Q=aw(K,U.mode,Z),Q.return=U,U=Q}return h(U);case Ju:return fe=K._init,H(U,Q,fe(K._payload),Z)}if(Cm(K))return N(U,Q,K,Z);if(lm(K))return k(U,Q,K,Z);B0(U,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,Q!==null&&Q.tag===6?(r(U,Q.sibling),Q=a(Q,K),Q.return=U,U=Q):(r(U,Q),Q=ow(K,U.mode,Z),Q.return=U,U=Q),h(U)):r(U,Q)}return H}var bp=JT(!0),e3=JT(!1),ov=Rh(null),av=null,jf=null,K2=null;function G2(){K2=jf=av=null}function $2(e){var t=ov.current;Qi(ov),e._currentValue=t}function Vx(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Jf(e,t){av=e,K2=jf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ka=!0),e.firstContext=null)}function $l(e){var t=e._currentValue;if(K2!==e)if(e={context:e,memoizedValue:t,next:null},jf===null){if(av===null)throw Error(sr(308));jf=e,av.dependencies={lanes:0,firstContext:e}}else jf=jf.next=e;return t}var fd=null;function q2(e){fd===null?fd=[e]:fd.push(e)}function t3(e,t,r,i){var a=t.interleaved;return a===null?(r.next=r,q2(t)):(r.next=a.next,a.next=r),t.interleaved=r,yu(e,i)}function yu(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var eh=!1;function W2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _h(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Hn&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,yu(e,r)}return a=i.interleaved,a===null?(t.next=t,q2(i)):(t.next=a.next,a.next=t),i.interleaved=t,yu(e,r)}function By(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,k2(e,r)}}function PS(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?a=u=h:u=u.next=h,r=r.next}while(r!==null);u===null?a=u=t:u=u.next=t}else a=u=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function lv(e,t,r,i){var a=e.updateQueue;eh=!1;var u=a.firstBaseUpdate,h=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var g=o,w=g.next;g.next=null,h===null?u=w:h.next=w,h=g;var B=e.alternate;B!==null&&(B=B.updateQueue,o=B.lastBaseUpdate,o!==h&&(o===null?B.firstBaseUpdate=w:o.next=w,B.lastBaseUpdate=g))}if(u!==null){var I=a.baseState;h=0,B=w=g=null,o=u;do{var P=o.lane,b=o.eventTime;if((i&P)===P){B!==null&&(B=B.next={eventTime:b,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=e,k=o;switch(P=t,b=r,k.tag){case 1:if(N=k.payload,typeof N=="function"){I=N.call(b,I,P);break e}I=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=k.payload,P=typeof N=="function"?N.call(b,I,P):N,P==null)break e;I=As({},I,P);break e;case 2:eh=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,P=a.effects,P===null?a.effects=[o]:P.push(o))}else b={eventTime:b,lane:P,tag:o.tag,payload:o.payload,callback:o.callback,next:null},B===null?(w=B=b,g=I):B=B.next=b,h|=P;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;P=o,o=P.next,P.next=null,a.lastBaseUpdate=P,a.shared.pending=null}}while(!0);if(B===null&&(g=I),a.baseState=g,a.firstBaseUpdate=w,a.lastBaseUpdate=B,t=a.shared.interleaved,t!==null){a=t;do h|=a.lane,a=a.next;while(a!==t)}else u===null&&(a.shared.lanes=0);Md|=h,e.lanes=h,e.memoizedState=I}}function LS(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(sr(191,a));a.call(i)}}}var Dg={},xc=Rh(Dg),dg=Rh(Dg),fg=Rh(Dg);function pd(e){if(e===Dg)throw Error(sr(174));return e}function Z2(e,t){switch(Ii(fg,t),Ii(dg,e),Ii(xc,Dg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bx(t,e)}Qi(xc),Ii(xc,t)}function Bp(){Qi(xc),Qi(dg),Qi(fg)}function n3(e){pd(fg.current);var t=pd(xc.current),r=Bx(t,e.type);t!==r&&(Ii(dg,e),Ii(xc,r))}function X2(e){dg.current===e&&(Qi(xc),Qi(dg))}var as=Rh(0);function Av(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ew=[];function Y2(){for(var e=0;e<ew.length;e++)ew[e]._workInProgressVersionPrimary=null;ew.length=0}var Cy=bu.ReactCurrentDispatcher,tw=bu.ReactCurrentBatchConfig,Ld=0,ls=null,io=null,yo=null,cv=!1,zm=!1,pg=0,XD=0;function Vo(){throw Error(sr(321))}function J2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!MA(e[r],t[r]))return!1;return!0}function eB(e,t,r,i,a,u){if(Ld=u,ls=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cy.current=e===null||e.memoizedState===null?tQ:rQ,e=r(i,a),zm){u=0;do{if(zm=!1,pg=0,25<=u)throw Error(sr(301));u+=1,yo=io=null,t.updateQueue=null,Cy.current=nQ,e=r(i,a)}while(zm)}if(Cy.current=uv,t=io!==null&&io.next!==null,Ld=0,yo=io=ls=null,cv=!1,t)throw Error(sr(300));return e}function tB(){var e=pg!==0;return pg=0,e}function dc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yo===null?ls.memoizedState=yo=e:yo=yo.next=e,yo}function ql(){if(io===null){var e=ls.alternate;e=e!==null?e.memoizedState:null}else e=io.next;var t=yo===null?ls.memoizedState:yo.next;if(t!==null)yo=t,io=e;else{if(e===null)throw Error(sr(310));io=e,e={memoizedState:io.memoizedState,baseState:io.baseState,baseQueue:io.baseQueue,queue:io.queue,next:null},yo===null?ls.memoizedState=yo=e:yo=yo.next=e}return yo}function mg(e,t){return typeof t=="function"?t(e):t}function rw(e){var t=ql(),r=t.queue;if(r===null)throw Error(sr(311));r.lastRenderedReducer=e;var i=io,a=i.baseQueue,u=r.pending;if(u!==null){if(a!==null){var h=a.next;a.next=u.next,u.next=h}i.baseQueue=a=u,r.pending=null}if(a!==null){u=a.next,i=i.baseState;var o=h=null,g=null,w=u;do{var B=w.lane;if((Ld&B)===B)g!==null&&(g=g.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),i=w.hasEagerState?w.eagerState:e(i,w.action);else{var I={lane:B,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};g===null?(o=g=I,h=i):g=g.next=I,ls.lanes|=B,Md|=B}w=w.next}while(w!==null&&w!==u);g===null?h=i:g.next=o,MA(i,t.memoizedState)||(ka=!0),t.memoizedState=i,t.baseState=h,t.baseQueue=g,r.lastRenderedState=i}if(e=r.interleaved,e!==null){a=e;do u=a.lane,ls.lanes|=u,Md|=u,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nw(e){var t=ql(),r=t.queue;if(r===null)throw Error(sr(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,u=t.memoizedState;if(a!==null){r.pending=null;var h=a=a.next;do u=e(u,h.action),h=h.next;while(h!==a);MA(u,t.memoizedState)||(ka=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,i]}function i3(){}function s3(e,t){var r=ls,i=ql(),a=t(),u=!MA(i.memoizedState,a);if(u&&(i.memoizedState=a,ka=!0),i=i.queue,rB(l3.bind(null,r,i,e),[e]),i.getSnapshot!==t||u||yo!==null&&yo.memoizedState.tag&1){if(r.flags|=2048,gg(9,a3.bind(null,r,i,a,t),void 0,null),_o===null)throw Error(sr(349));Ld&30||o3(r,t,a)}return a}function o3(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ls.updateQueue,t===null?(t={lastEffect:null,stores:null},ls.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function a3(e,t,r,i){t.value=r,t.getSnapshot=i,A3(t)&&c3(e)}function l3(e,t,r){return r(function(){A3(t)&&c3(e)})}function A3(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!MA(e,r)}catch{return!0}}function c3(e){var t=yu(e,1);t!==null&&LA(t,e,1,-1)}function MS(e){var t=dc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mg,lastRenderedState:e},t.queue=e,e=e.dispatch=eQ.bind(null,ls,e),[t.memoizedState,e]}function gg(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=ls.updateQueue,t===null?(t={lastEffect:null,stores:null},ls.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function u3(){return ql().memoizedState}function Sy(e,t,r,i){var a=dc();ls.flags|=e,a.memoizedState=gg(1|t,r,void 0,i===void 0?null:i)}function t1(e,t,r,i){var a=ql();i=i===void 0?null:i;var u=void 0;if(io!==null){var h=io.memoizedState;if(u=h.destroy,i!==null&&J2(i,h.deps)){a.memoizedState=gg(t,r,u,i);return}}ls.flags|=e,a.memoizedState=gg(1|t,r,u,i)}function kS(e,t){return Sy(8390656,8,e,t)}function rB(e,t){return t1(2048,8,e,t)}function h3(e,t){return t1(4,2,e,t)}function d3(e,t){return t1(4,4,e,t)}function f3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function p3(e,t,r){return r=r!=null?r.concat([e]):null,t1(4,4,f3.bind(null,t,e),r)}function nB(){}function m3(e,t){var r=ql();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&J2(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function g3(e,t){var r=ql();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&J2(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function y3(e,t,r){return Ld&21?(MA(r,t)||(r=bT(),ls.lanes|=r,Md|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ka=!0),e.memoizedState=r)}function YD(e,t){var r=ai;ai=r!==0&&4>r?r:4,e(!0);var i=tw.transition;tw.transition={};try{e(!1),t()}finally{ai=r,tw.transition=i}}function v3(){return ql().memoizedState}function JD(e,t,r){var i=xh(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},_3(e))w3(t,r);else if(r=t3(e,t,r,i),r!==null){var a=va();LA(r,e,i,a),x3(r,t,i)}}function eQ(e,t,r){var i=xh(e),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(_3(e))w3(t,a);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,o=u(h,r);if(a.hasEagerState=!0,a.eagerState=o,MA(o,h)){var g=t.interleaved;g===null?(a.next=a,q2(t)):(a.next=g.next,g.next=a),t.interleaved=a;return}}catch{}finally{}r=t3(e,t,a,i),r!==null&&(a=va(),LA(r,e,i,a),x3(r,t,i))}}function _3(e){var t=e.alternate;return e===ls||t!==null&&t===ls}function w3(e,t){zm=cv=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function x3(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,k2(e,r)}}var uv={readContext:$l,useCallback:Vo,useContext:Vo,useEffect:Vo,useImperativeHandle:Vo,useInsertionEffect:Vo,useLayoutEffect:Vo,useMemo:Vo,useReducer:Vo,useRef:Vo,useState:Vo,useDebugValue:Vo,useDeferredValue:Vo,useTransition:Vo,useMutableSource:Vo,useSyncExternalStore:Vo,useId:Vo,unstable_isNewReconciler:!1},tQ={readContext:$l,useCallback:function(e,t){return dc().memoizedState=[e,t===void 0?null:t],e},useContext:$l,useEffect:kS,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Sy(4194308,4,f3.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Sy(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sy(4,2,e,t)},useMemo:function(e,t){var r=dc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=dc();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=JD.bind(null,ls,e),[i.memoizedState,e]},useRef:function(e){var t=dc();return e={current:e},t.memoizedState=e},useState:MS,useDebugValue:nB,useDeferredValue:function(e){return dc().memoizedState=e},useTransition:function(){var e=MS(!1),t=e[0];return e=YD.bind(null,e[1]),dc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=ls,a=dc();if(Wi){if(r===void 0)throw Error(sr(407));r=r()}else{if(r=t(),_o===null)throw Error(sr(349));Ld&30||o3(i,t,r)}a.memoizedState=r;var u={value:r,getSnapshot:t};return a.queue=u,kS(l3.bind(null,i,u,e),[e]),i.flags|=2048,gg(9,a3.bind(null,i,u,r,t),void 0,null),r},useId:function(){var e=dc(),t=_o.identifierPrefix;if(Wi){var r=du,i=hu;r=(i&~(1<<32-PA(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=pg++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=XD++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rQ={readContext:$l,useCallback:m3,useContext:$l,useEffect:rB,useImperativeHandle:p3,useInsertionEffect:h3,useLayoutEffect:d3,useMemo:g3,useReducer:rw,useRef:u3,useState:function(){return rw(mg)},useDebugValue:nB,useDeferredValue:function(e){var t=ql();return y3(t,io.memoizedState,e)},useTransition:function(){var e=rw(mg)[0],t=ql().memoizedState;return[e,t]},useMutableSource:i3,useSyncExternalStore:s3,useId:v3,unstable_isNewReconciler:!1},nQ={readContext:$l,useCallback:m3,useContext:$l,useEffect:rB,useImperativeHandle:p3,useInsertionEffect:h3,useLayoutEffect:d3,useMemo:g3,useReducer:nw,useRef:u3,useState:function(){return nw(mg)},useDebugValue:nB,useDeferredValue:function(e){var t=ql();return io===null?t.memoizedState=e:y3(t,io.memoizedState,e)},useTransition:function(){var e=nw(mg)[0],t=ql().memoizedState;return[e,t]},useMutableSource:i3,useSyncExternalStore:s3,useId:v3,unstable_isNewReconciler:!1};function BA(e,t){if(e&&e.defaultProps){t=As({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Kx(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:As({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var r1={isMounted:function(e){return(e=e._reactInternals)?zd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=va(),a=xh(e),u=fu(i,a);u.payload=t,r!=null&&(u.callback=r),t=_h(e,u,a),t!==null&&(LA(t,e,a,i),By(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=va(),a=xh(e),u=fu(i,a);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=_h(e,u,a),t!==null&&(LA(t,e,a,i),By(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=va(),i=xh(e),a=fu(r,i);a.tag=2,t!=null&&(a.callback=t),t=_h(e,a,i),t!==null&&(LA(t,e,i,r),By(t,e,i))}};function US(e,t,r,i,a,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,h):t.prototype&&t.prototype.isPureReactComponent?!Ag(r,i)||!Ag(a,u):!0}function b3(e,t,r){var i=!1,a=Th,u=t.contextType;return typeof u=="object"&&u!==null?u=$l(u):(a=Na(t)?Td:ta.current,i=t.contextTypes,u=(i=i!=null)?wp(e,a):Th),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=r1,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=u),t}function RS(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&r1.enqueueReplaceState(t,t.state,null)}function Gx(e,t,r,i){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},W2(e);var u=t.contextType;typeof u=="object"&&u!==null?a.context=$l(u):(u=Na(t)?Td:ta.current,a.context=wp(e,u)),a.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(Kx(e,t,u,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&r1.enqueueReplaceState(a,a.state,null),lv(e,r,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Cp(e,t){try{var r="",i=t;do r+=PN(i),i=i.return;while(i);var a=r}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:a,digest:null}}function iw(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function $x(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iQ=typeof WeakMap=="function"?WeakMap:Map;function B3(e,t,r){r=fu(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){dv||(dv=!0,nb=i),$x(e,t)},r}function C3(e,t,r){r=fu(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;r.payload=function(){return i(a)},r.callback=function(){$x(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){$x(e,t),typeof i!="function"&&(wh===null?wh=new Set([this]):wh.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function NS(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new iQ;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(r)||(a.add(r),e=yQ.bind(null,e,t,r),t.then(e,e))}function DS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function QS(e,t,r,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=fu(-1,1),t.tag=2,_h(r,t,1))),r.lanes|=1),e)}var sQ=bu.ReactCurrentOwner,ka=!1;function ga(e,t,r,i){t.child=e===null?e3(t,null,r,i):bp(t,e.child,r,i)}function OS(e,t,r,i,a){r=r.render;var u=t.ref;return Jf(t,a),i=eB(e,t,r,i,u,a),r=tB(),e!==null&&!ka?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,vu(e,t,a)):(Wi&&r&&H2(t),t.flags|=1,ga(e,t,i,a),t.child)}function zS(e,t,r,i,a){if(e===null){var u=r.type;return typeof u=="function"&&!uB(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,S3(e,t,u,i,a)):(e=Ty(r.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&a)){var h=u.memoizedProps;if(r=r.compare,r=r!==null?r:Ag,r(h,i)&&e.ref===t.ref)return vu(e,t,a)}return t.flags|=1,e=bh(u,i),e.ref=t.ref,e.return=t,t.child=e}function S3(e,t,r,i,a){if(e!==null){var u=e.memoizedProps;if(Ag(u,i)&&e.ref===t.ref)if(ka=!1,t.pendingProps=i=u,(e.lanes&a)!==0)e.flags&131072&&(ka=!0);else return t.lanes=e.lanes,vu(e,t,a)}return qx(e,t,r,i,a)}function E3(e,t,r){var i=t.pendingProps,a=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Kf,cl),cl|=r;else{if(!(r&1073741824))return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Kf,cl),cl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:r,Ii(Kf,cl),cl|=i}else u!==null?(i=u.baseLanes|r,t.memoizedState=null):i=r,Ii(Kf,cl),cl|=i;return ga(e,t,a,r),t.child}function I3(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function qx(e,t,r,i,a){var u=Na(r)?Td:ta.current;return u=wp(t,u),Jf(t,a),r=eB(e,t,r,i,u,a),i=tB(),e!==null&&!ka?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,vu(e,t,a)):(Wi&&i&&H2(t),t.flags|=1,ga(e,t,r,a),t.child)}function HS(e,t,r,i,a){if(Na(r)){var u=!0;nv(t)}else u=!1;if(Jf(t,a),t.stateNode===null)Ey(e,t),b3(t,r,i),Gx(t,r,i,a),i=!0;else if(e===null){var h=t.stateNode,o=t.memoizedProps;h.props=o;var g=h.context,w=r.contextType;typeof w=="object"&&w!==null?w=$l(w):(w=Na(r)?Td:ta.current,w=wp(t,w));var B=r.getDerivedStateFromProps,I=typeof B=="function"||typeof h.getSnapshotBeforeUpdate=="function";I||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==i||g!==w)&&RS(t,h,i,w),eh=!1;var P=t.memoizedState;h.state=P,lv(t,i,h,a),g=t.memoizedState,o!==i||P!==g||Ra.current||eh?(typeof B=="function"&&(Kx(t,r,B,i),g=t.memoizedState),(o=eh||US(t,r,o,i,P,g,w))?(I||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),h.props=i,h.state=g,h.context=w,i=o):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,r3(e,t),o=t.memoizedProps,w=t.type===t.elementType?o:BA(t.type,o),h.props=w,I=t.pendingProps,P=h.context,g=r.contextType,typeof g=="object"&&g!==null?g=$l(g):(g=Na(r)?Td:ta.current,g=wp(t,g));var b=r.getDerivedStateFromProps;(B=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==I||P!==g)&&RS(t,h,i,g),eh=!1,P=t.memoizedState,h.state=P,lv(t,i,h,a);var N=t.memoizedState;o!==I||P!==N||Ra.current||eh?(typeof b=="function"&&(Kx(t,r,b,i),N=t.memoizedState),(w=eh||US(t,r,w,i,P,N,g)||!1)?(B||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,N,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,N,g)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=N),h.props=i,h.state=N,h.context=g,i=w):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),i=!1)}return Wx(e,t,r,i,u,a)}function Wx(e,t,r,i,a,u){I3(e,t);var h=(t.flags&128)!==0;if(!i&&!h)return a&&ES(t,r,!1),vu(e,t,u);i=t.stateNode,sQ.current=t;var o=h&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&h?(t.child=bp(t,e.child,null,u),t.child=bp(t,null,o,u)):ga(e,t,o,u),t.memoizedState=i.state,a&&ES(t,r,!0),t.child}function F3(e){var t=e.stateNode;t.pendingContext?SS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&SS(e,t.context,!1),Z2(e,t.containerInfo)}function jS(e,t,r,i,a){return xp(),V2(a),t.flags|=256,ga(e,t,r,i),t.child}var Zx={dehydrated:null,treeContext:null,retryLane:0};function Xx(e){return{baseLanes:e,cachePool:null,transitions:null}}function T3(e,t,r){var i=t.pendingProps,a=as.current,u=!1,h=(t.flags&128)!==0,o;if((o=h)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ii(as,a&1),e===null)return jx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=i.children,e=i.fallback,u?(i=t.mode,u=t.child,h={mode:"hidden",children:h},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=s1(h,i,0,null),e=Cd(e,i,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Xx(r),t.memoizedState=Zx,e):iB(t,h));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return oQ(e,t,h,i,o,a,r);if(u){u=i.fallback,h=t.mode,a=e.child,o=a.sibling;var g={mode:"hidden",children:i.children};return!(h&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=g,t.deletions=null):(i=bh(a,g),i.subtreeFlags=a.subtreeFlags&14680064),o!==null?u=bh(o,u):(u=Cd(u,h,r,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,h=e.child.memoizedState,h=h===null?Xx(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~r,t.memoizedState=Zx,i}return u=e.child,e=u.sibling,i=bh(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function iB(e,t){return t=s1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function C0(e,t,r,i){return i!==null&&V2(i),bp(t,e.child,null,r),e=iB(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oQ(e,t,r,i,a,u,h){if(r)return t.flags&256?(t.flags&=-257,i=iw(Error(sr(422))),C0(e,t,h,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,a=t.mode,i=s1({mode:"visible",children:i.children},a,0,null),u=Cd(u,a,h,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&bp(t,e.child,null,h),t.child.memoizedState=Xx(h),t.memoizedState=Zx,u);if(!(t.mode&1))return C0(e,t,h,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var o=i.dgst;return i=o,u=Error(sr(419)),i=iw(u,i,void 0),C0(e,t,h,i)}if(o=(h&e.childLanes)!==0,ka||o){if(i=_o,i!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|h)?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,yu(e,a),LA(i,e,a,-1))}return cB(),i=iw(Error(sr(421))),C0(e,t,h,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=vQ.bind(null,e),a._reactRetry=t,null):(e=u.treeContext,hl=vh(a.nextSibling),fl=t,Wi=!0,FA=null,e!==null&&(Ol[zl++]=hu,Ol[zl++]=du,Ol[zl++]=Pd,hu=e.id,du=e.overflow,Pd=t),t=iB(t,i.children),t.flags|=4096,t)}function VS(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Vx(e.return,t,r)}function sw(e,t,r,i,a){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=r,u.tailMode=a)}function P3(e,t,r){var i=t.pendingProps,a=i.revealOrder,u=i.tail;if(ga(e,t,i.children,r),i=as.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&VS(e,r,t);else if(e.tag===19)VS(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ii(as,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Av(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),sw(t,!1,a,r,u);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Av(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}sw(t,!0,r,null,u);break;case"together":sw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ey(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vu(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Md|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(sr(153));if(t.child!==null){for(e=t.child,r=bh(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=bh(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function aQ(e,t,r){switch(t.tag){case 3:F3(t),xp();break;case 5:n3(t);break;case 1:Na(t.type)&&nv(t);break;case 4:Z2(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;Ii(ov,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ii(as,as.current&1),t.flags|=128,null):r&t.child.childLanes?T3(e,t,r):(Ii(as,as.current&1),e=vu(e,t,r),e!==null?e.sibling:null);Ii(as,as.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return P3(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ii(as,as.current),i)break;return null;case 22:case 23:return t.lanes=0,E3(e,t,r)}return vu(e,t,r)}var L3,Yx,M3,k3;L3=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yx=function(){};M3=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,pd(xc.current);var u=null;switch(r){case"input":a=_x(e,a),i=_x(e,i),u=[];break;case"select":a=As({},a,{value:void 0}),i=As({},i,{value:void 0}),u=[];break;case"textarea":a=bx(e,a),i=bx(e,i),u=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=tv)}Cx(r,i);var h;r=null;for(w in a)if(!i.hasOwnProperty(w)&&a.hasOwnProperty(w)&&a[w]!=null)if(w==="style"){var o=a[w];for(h in o)o.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(rg.hasOwnProperty(w)?u||(u=[]):(u=u||[]).push(w,null));for(w in i){var g=i[w];if(o=a!=null?a[w]:void 0,i.hasOwnProperty(w)&&g!==o&&(g!=null||o!=null))if(w==="style")if(o){for(h in o)!o.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in g)g.hasOwnProperty(h)&&o[h]!==g[h]&&(r||(r={}),r[h]=g[h])}else r||(u||(u=[]),u.push(w,r)),r=g;else w==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,o=o?o.__html:void 0,g!=null&&o!==g&&(u=u||[]).push(w,g)):w==="children"?typeof g!="string"&&typeof g!="number"||(u=u||[]).push(w,""+g):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(rg.hasOwnProperty(w)?(g!=null&&w==="onScroll"&&Ni("scroll",e),u||o===g||(u=[])):(u=u||[]).push(w,g))}r&&(u=u||[]).push("style",r);var w=u;(t.updateQueue=w)&&(t.flags|=4)}};k3=function(e,t,r,i){r!==i&&(t.flags|=4)};function fm(e,t){if(!Wi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ko(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function lQ(e,t,r){var i=t.pendingProps;switch(j2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:return Na(t.type)&&rv(),Ko(t),null;case 3:return i=t.stateNode,Bp(),Qi(Ra),Qi(ta),Y2(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(b0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,FA!==null&&(ob(FA),FA=null))),Yx(e,t),Ko(t),null;case 5:X2(t);var a=pd(fg.current);if(r=t.type,e!==null&&t.stateNode!=null)M3(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(sr(166));return Ko(t),null}if(e=pd(xc.current),b0(t)){i=t.stateNode,r=t.type;var u=t.memoizedProps;switch(i[gc]=t,i[hg]=u,e=(t.mode&1)!==0,r){case"dialog":Ni("cancel",i),Ni("close",i);break;case"iframe":case"object":case"embed":Ni("load",i);break;case"video":case"audio":for(a=0;a<Em.length;a++)Ni(Em[a],i);break;case"source":Ni("error",i);break;case"img":case"image":case"link":Ni("error",i),Ni("load",i);break;case"details":Ni("toggle",i);break;case"input":J5(i,u),Ni("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Ni("invalid",i);break;case"textarea":tS(i,u),Ni("invalid",i)}Cx(r,u),a=null;for(var h in u)if(u.hasOwnProperty(h)){var o=u[h];h==="children"?typeof o=="string"?i.textContent!==o&&(u.suppressHydrationWarning!==!0&&x0(i.textContent,o,e),a=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(u.suppressHydrationWarning!==!0&&x0(i.textContent,o,e),a=["children",""+o]):rg.hasOwnProperty(h)&&o!=null&&h==="onScroll"&&Ni("scroll",i)}switch(r){case"input":f0(i),eS(i,u,!0);break;case"textarea":f0(i),rS(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=tv)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lT(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=h.createElement(r,{is:i.is}):(e=h.createElement(r),r==="select"&&(h=e,i.multiple?h.multiple=!0:i.size&&(h.size=i.size))):e=h.createElementNS(e,r),e[gc]=t,e[hg]=i,L3(e,t,!1,!1),t.stateNode=e;e:{switch(h=Sx(r,i),r){case"dialog":Ni("cancel",e),Ni("close",e),a=i;break;case"iframe":case"object":case"embed":Ni("load",e),a=i;break;case"video":case"audio":for(a=0;a<Em.length;a++)Ni(Em[a],e);a=i;break;case"source":Ni("error",e),a=i;break;case"img":case"image":case"link":Ni("error",e),Ni("load",e),a=i;break;case"details":Ni("toggle",e),a=i;break;case"input":J5(e,i),a=_x(e,i),Ni("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=As({},i,{value:void 0}),Ni("invalid",e);break;case"textarea":tS(e,i),a=bx(e,i),Ni("invalid",e);break;default:a=i}Cx(r,a),o=a;for(u in o)if(o.hasOwnProperty(u)){var g=o[u];u==="style"?uT(e,g):u==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&AT(e,g)):u==="children"?typeof g=="string"?(r!=="textarea"||g!=="")&&ng(e,g):typeof g=="number"&&ng(e,""+g):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rg.hasOwnProperty(u)?g!=null&&u==="onScroll"&&Ni("scroll",e):g!=null&&I2(e,u,g,h))}switch(r){case"input":f0(e),eS(e,i,!1);break;case"textarea":f0(e),rS(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Fh(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?Wf(e,!!i.multiple,u,!1):i.defaultValue!=null&&Wf(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=tv)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&t.stateNode!=null)k3(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(sr(166));if(r=pd(fg.current),pd(xc.current),b0(t)){if(i=t.stateNode,r=t.memoizedProps,i[gc]=t,(u=i.nodeValue!==r)&&(e=fl,e!==null))switch(e.tag){case 3:x0(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&x0(i.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[gc]=t,t.stateNode=i}return Ko(t),null;case 13:if(Qi(as),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Wi&&hl!==null&&t.mode&1&&!(t.flags&128))YT(),xp(),t.flags|=98560,u=!1;else if(u=b0(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(sr(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(sr(317));u[gc]=t}else xp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ko(t),u=!1}else FA!==null&&(ob(FA),FA=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||as.current&1?oo===0&&(oo=3):cB())),t.updateQueue!==null&&(t.flags|=4),Ko(t),null);case 4:return Bp(),Yx(e,t),e===null&&cg(t.stateNode.containerInfo),Ko(t),null;case 10:return $2(t.type._context),Ko(t),null;case 17:return Na(t.type)&&rv(),Ko(t),null;case 19:if(Qi(as),u=t.memoizedState,u===null)return Ko(t),null;if(i=(t.flags&128)!==0,h=u.rendering,h===null)if(i)fm(u,!1);else{if(oo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=Av(e),h!==null){for(t.flags|=128,fm(u,!1),i=h.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)u=r,e=i,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ii(as,as.current&1|2),t.child}e=e.sibling}u.tail!==null&&Is()>Sp&&(t.flags|=128,i=!0,fm(u,!1),t.lanes=4194304)}else{if(!i)if(e=Av(h),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),fm(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Wi)return Ko(t),null}else 2*Is()-u.renderingStartTime>Sp&&r!==1073741824&&(t.flags|=128,i=!0,fm(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(r=u.last,r!==null?r.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Is(),t.sibling=null,r=as.current,Ii(as,i?r&1|2:r&1),t):(Ko(t),null);case 22:case 23:return AB(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?cl&1073741824&&(Ko(t),t.subtreeFlags&6&&(t.flags|=8192)):Ko(t),null;case 24:return null;case 25:return null}throw Error(sr(156,t.tag))}function AQ(e,t){switch(j2(t),t.tag){case 1:return Na(t.type)&&rv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bp(),Qi(Ra),Qi(ta),Y2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return X2(t),null;case 13:if(Qi(as),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(sr(340));xp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qi(as),null;case 4:return Bp(),null;case 10:return $2(t.type._context),null;case 22:case 23:return AB(),null;case 24:return null;default:return null}}var S0=!1,Jo=!1,cQ=typeof WeakSet=="function"?WeakSet:Set,Fr=null;function Vf(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){ys(e,t,i)}else r.current=null}function Jx(e,t,r){try{r()}catch(i){ys(e,t,i)}}var KS=!1;function uQ(e,t){if(Rx=Yy,e=QT(),z2(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var h=0,o=-1,g=-1,w=0,B=0,I=e,P=null;t:for(;;){for(var b;I!==r||a!==0&&I.nodeType!==3||(o=h+a),I!==u||i!==0&&I.nodeType!==3||(g=h+i),I.nodeType===3&&(h+=I.nodeValue.length),(b=I.firstChild)!==null;)P=I,I=b;for(;;){if(I===e)break t;if(P===r&&++w===a&&(o=h),P===u&&++B===i&&(g=h),(b=I.nextSibling)!==null)break;I=P,P=I.parentNode}I=b}r=o===-1||g===-1?null:{start:o,end:g}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nx={focusedElem:e,selectionRange:r},Yy=!1,Fr=t;Fr!==null;)if(t=Fr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Fr=e;else for(;Fr!==null;){t=Fr;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var k=N.memoizedProps,H=N.memoizedState,U=t.stateNode,Q=U.getSnapshotBeforeUpdate(t.elementType===t.type?k:BA(t.type,k),H);U.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var K=t.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(sr(163))}}catch(Z){ys(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,Fr=e;break}Fr=t.return}return N=KS,KS=!1,N}function Hm(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var u=a.destroy;a.destroy=void 0,u!==void 0&&Jx(t,r,u)}a=a.next}while(a!==i)}}function n1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function eb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function U3(e){var t=e.alternate;t!==null&&(e.alternate=null,U3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gc],delete t[hg],delete t[Ox],delete t[$D],delete t[qD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function R3(e){return e.tag===5||e.tag===3||e.tag===4}function GS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||R3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tb(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=tv));else if(i!==4&&(e=e.child,e!==null))for(tb(e,t,r),e=e.sibling;e!==null;)tb(e,t,r),e=e.sibling}function rb(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(rb(e,t,r),e=e.sibling;e!==null;)rb(e,t,r),e=e.sibling}var Bo=null,IA=!1;function ju(e,t,r){for(r=r.child;r!==null;)N3(e,t,r),r=r.sibling}function N3(e,t,r){if(wc&&typeof wc.onCommitFiberUnmount=="function")try{wc.onCommitFiberUnmount(Wv,r)}catch{}switch(r.tag){case 5:Jo||Vf(r,t);case 6:var i=Bo,a=IA;Bo=null,ju(e,t,r),Bo=i,IA=a,Bo!==null&&(IA?(e=Bo,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Bo.removeChild(r.stateNode));break;case 18:Bo!==null&&(IA?(e=Bo,r=r.stateNode,e.nodeType===8?Y_(e.parentNode,r):e.nodeType===1&&Y_(e,r),ag(e)):Y_(Bo,r.stateNode));break;case 4:i=Bo,a=IA,Bo=r.stateNode.containerInfo,IA=!0,ju(e,t,r),Bo=i,IA=a;break;case 0:case 11:case 14:case 15:if(!Jo&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var u=a,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&Jx(r,t,h),a=a.next}while(a!==i)}ju(e,t,r);break;case 1:if(!Jo&&(Vf(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(o){ys(r,t,o)}ju(e,t,r);break;case 21:ju(e,t,r);break;case 22:r.mode&1?(Jo=(i=Jo)||r.memoizedState!==null,ju(e,t,r),Jo=i):ju(e,t,r);break;default:ju(e,t,r)}}function $S(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new cQ),t.forEach(function(i){var a=_Q.bind(null,e,i);r.has(i)||(r.add(i),i.then(a,a))})}}function vA(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var u=e,h=t,o=h;e:for(;o!==null;){switch(o.tag){case 5:Bo=o.stateNode,IA=!1;break e;case 3:Bo=o.stateNode.containerInfo,IA=!0;break e;case 4:Bo=o.stateNode.containerInfo,IA=!0;break e}o=o.return}if(Bo===null)throw Error(sr(160));N3(u,h,a),Bo=null,IA=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(w){ys(a,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)D3(t,e),t=t.sibling}function D3(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vA(t,e),Ac(e),i&4){try{Hm(3,e,e.return),n1(3,e)}catch(k){ys(e,e.return,k)}try{Hm(5,e,e.return)}catch(k){ys(e,e.return,k)}}break;case 1:vA(t,e),Ac(e),i&512&&r!==null&&Vf(r,r.return);break;case 5:if(vA(t,e),Ac(e),i&512&&r!==null&&Vf(r,r.return),e.flags&32){var a=e.stateNode;try{ng(a,"")}catch(k){ys(e,e.return,k)}}if(i&4&&(a=e.stateNode,a!=null)){var u=e.memoizedProps,h=r!==null?r.memoizedProps:u,o=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{o==="input"&&u.type==="radio"&&u.name!=null&&oT(a,u),Sx(o,h);var w=Sx(o,u);for(h=0;h<g.length;h+=2){var B=g[h],I=g[h+1];B==="style"?uT(a,I):B==="dangerouslySetInnerHTML"?AT(a,I):B==="children"?ng(a,I):I2(a,B,I,w)}switch(o){case"input":wx(a,u);break;case"textarea":aT(a,u);break;case"select":var P=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var b=u.value;b!=null?Wf(a,!!u.multiple,b,!1):P!==!!u.multiple&&(u.defaultValue!=null?Wf(a,!!u.multiple,u.defaultValue,!0):Wf(a,!!u.multiple,u.multiple?[]:"",!1))}a[hg]=u}catch(k){ys(e,e.return,k)}}break;case 6:if(vA(t,e),Ac(e),i&4){if(e.stateNode===null)throw Error(sr(162));a=e.stateNode,u=e.memoizedProps;try{a.nodeValue=u}catch(k){ys(e,e.return,k)}}break;case 3:if(vA(t,e),Ac(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{ag(t.containerInfo)}catch(k){ys(e,e.return,k)}break;case 4:vA(t,e),Ac(e);break;case 13:vA(t,e),Ac(e),a=e.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(aB=Is())),i&4&&$S(e);break;case 22:if(B=r!==null&&r.memoizedState!==null,e.mode&1?(Jo=(w=Jo)||B,vA(t,e),Jo=w):vA(t,e),Ac(e),i&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!B&&e.mode&1)for(Fr=e,B=e.child;B!==null;){for(I=Fr=B;Fr!==null;){switch(P=Fr,b=P.child,P.tag){case 0:case 11:case 14:case 15:Hm(4,P,P.return);break;case 1:Vf(P,P.return);var N=P.stateNode;if(typeof N.componentWillUnmount=="function"){i=P,r=P.return;try{t=i,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(k){ys(i,r,k)}}break;case 5:Vf(P,P.return);break;case 22:if(P.memoizedState!==null){WS(I);continue}}b!==null?(b.return=P,Fr=b):WS(I)}B=B.sibling}e:for(B=null,I=e;;){if(I.tag===5){if(B===null){B=I;try{a=I.stateNode,w?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(o=I.stateNode,g=I.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null,o.style.display=cT("display",h))}catch(k){ys(e,e.return,k)}}}else if(I.tag===6){if(B===null)try{I.stateNode.nodeValue=w?"":I.memoizedProps}catch(k){ys(e,e.return,k)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;B===I&&(B=null),I=I.return}B===I&&(B=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:vA(t,e),Ac(e),i&4&&$S(e);break;case 21:break;default:vA(t,e),Ac(e)}}function Ac(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(R3(r)){var i=r;break e}r=r.return}throw Error(sr(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(ng(a,""),i.flags&=-33);var u=GS(e);rb(e,u,a);break;case 3:case 4:var h=i.stateNode.containerInfo,o=GS(e);tb(e,o,h);break;default:throw Error(sr(161))}}catch(g){ys(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hQ(e,t,r){Fr=e,Q3(e)}function Q3(e,t,r){for(var i=(e.mode&1)!==0;Fr!==null;){var a=Fr,u=a.child;if(a.tag===22&&i){var h=a.memoizedState!==null||S0;if(!h){var o=a.alternate,g=o!==null&&o.memoizedState!==null||Jo;o=S0;var w=Jo;if(S0=h,(Jo=g)&&!w)for(Fr=a;Fr!==null;)h=Fr,g=h.child,h.tag===22&&h.memoizedState!==null?ZS(a):g!==null?(g.return=h,Fr=g):ZS(a);for(;u!==null;)Fr=u,Q3(u),u=u.sibling;Fr=a,S0=o,Jo=w}qS(e)}else a.subtreeFlags&8772&&u!==null?(u.return=a,Fr=u):qS(e)}}function qS(e){for(;Fr!==null;){var t=Fr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jo||n1(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Jo)if(r===null)i.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:BA(t.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&LS(t,u,i);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}LS(t,h,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&r.focus();break;case"img":g.src&&(r.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var B=w.memoizedState;if(B!==null){var I=B.dehydrated;I!==null&&ag(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(sr(163))}Jo||t.flags&512&&eb(t)}catch(P){ys(t,t.return,P)}}if(t===e){Fr=null;break}if(r=t.sibling,r!==null){r.return=t.return,Fr=r;break}Fr=t.return}}function WS(e){for(;Fr!==null;){var t=Fr;if(t===e){Fr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Fr=r;break}Fr=t.return}}function ZS(e){for(;Fr!==null;){var t=Fr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{n1(4,t)}catch(g){ys(t,r,g)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(g){ys(t,a,g)}}var u=t.return;try{eb(t)}catch(g){ys(t,u,g)}break;case 5:var h=t.return;try{eb(t)}catch(g){ys(t,h,g)}}}catch(g){ys(t,t.return,g)}if(t===e){Fr=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Fr=o;break}Fr=t.return}}var dQ=Math.ceil,hv=bu.ReactCurrentDispatcher,sB=bu.ReactCurrentOwner,Gl=bu.ReactCurrentBatchConfig,Hn=0,_o=null,Vs=null,Eo=0,cl=0,Kf=Rh(0),oo=0,yg=null,Md=0,i1=0,oB=0,jm=null,Ma=null,aB=0,Sp=1/0,lu=null,dv=!1,nb=null,wh=null,E0=!1,ch=null,fv=0,Vm=0,ib=null,Iy=-1,Fy=0;function va(){return Hn&6?Is():Iy!==-1?Iy:Iy=Is()}function xh(e){return e.mode&1?Hn&2&&Eo!==0?Eo&-Eo:ZD.transition!==null?(Fy===0&&(Fy=bT()),Fy):(e=ai,e!==0||(e=window.event,e=e===void 0?16:TT(e.type)),e):1}function LA(e,t,r,i){if(50<Vm)throw Vm=0,ib=null,Error(sr(185));Ug(e,r,i),(!(Hn&2)||e!==_o)&&(e===_o&&(!(Hn&2)&&(i1|=r),oo===4&&nh(e,Eo)),Da(e,i),r===1&&Hn===0&&!(t.mode&1)&&(Sp=Is()+500,e1&&Nh()))}function Da(e,t){var r=e.callbackNode;ZN(e,t);var i=Xy(e,e===_o?Eo:0);if(i===0)r!==null&&sS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&sS(r),t===1)e.tag===0?WD(XS.bind(null,e)):WT(XS.bind(null,e)),KD(function(){!(Hn&6)&&Nh()}),r=null;else{switch(BT(i)){case 1:r=M2;break;case 4:r=wT;break;case 16:r=Zy;break;case 536870912:r=xT;break;default:r=Zy}r=$3(r,O3.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function O3(e,t){if(Iy=-1,Fy=0,Hn&6)throw Error(sr(327));var r=e.callbackNode;if(ep()&&e.callbackNode!==r)return null;var i=Xy(e,e===_o?Eo:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=pv(e,i);else{t=i;var a=Hn;Hn|=2;var u=H3();(_o!==e||Eo!==t)&&(lu=null,Sp=Is()+500,Bd(e,t));do try{mQ();break}catch(o){z3(e,o)}while(!0);G2(),hv.current=u,Hn=a,Vs!==null?t=0:(_o=null,Eo=0,t=oo)}if(t!==0){if(t===2&&(a=Px(e),a!==0&&(i=a,t=sb(e,a))),t===1)throw r=yg,Bd(e,0),nh(e,i),Da(e,Is()),r;if(t===6)nh(e,i);else{if(a=e.current.alternate,!(i&30)&&!fQ(a)&&(t=pv(e,i),t===2&&(u=Px(e),u!==0&&(i=u,t=sb(e,u))),t===1))throw r=yg,Bd(e,0),nh(e,i),Da(e,Is()),r;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(sr(345));case 2:Ad(e,Ma,lu);break;case 3:if(nh(e,i),(i&130023424)===i&&(t=aB+500-Is(),10<t)){if(Xy(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){va(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qx(Ad.bind(null,e,Ma,lu),t);break}Ad(e,Ma,lu);break;case 4:if(nh(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var h=31-PA(i);u=1<<h,h=t[h],h>a&&(a=h),i&=~u}if(i=a,i=Is()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*dQ(i/1960))-i,10<i){e.timeoutHandle=Qx(Ad.bind(null,e,Ma,lu),i);break}Ad(e,Ma,lu);break;case 5:Ad(e,Ma,lu);break;default:throw Error(sr(329))}}}return Da(e,Is()),e.callbackNode===r?O3.bind(null,e):null}function sb(e,t){var r=jm;return e.current.memoizedState.isDehydrated&&(Bd(e,t).flags|=256),e=pv(e,t),e!==2&&(t=Ma,Ma=r,t!==null&&ob(t)),e}function ob(e){Ma===null?Ma=e:Ma.push.apply(Ma,e)}function fQ(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],u=a.getSnapshot;a=a.value;try{if(!MA(u(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nh(e,t){for(t&=~oB,t&=~i1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-PA(t),i=1<<r;e[r]=-1,t&=~i}}function XS(e){if(Hn&6)throw Error(sr(327));ep();var t=Xy(e,0);if(!(t&1))return Da(e,Is()),null;var r=pv(e,t);if(e.tag!==0&&r===2){var i=Px(e);i!==0&&(t=i,r=sb(e,i))}if(r===1)throw r=yg,Bd(e,0),nh(e,t),Da(e,Is()),r;if(r===6)throw Error(sr(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ad(e,Ma,lu),Da(e,Is()),null}function lB(e,t){var r=Hn;Hn|=1;try{return e(t)}finally{Hn=r,Hn===0&&(Sp=Is()+500,e1&&Nh())}}function kd(e){ch!==null&&ch.tag===0&&!(Hn&6)&&ep();var t=Hn;Hn|=1;var r=Gl.transition,i=ai;try{if(Gl.transition=null,ai=1,e)return e()}finally{ai=i,Gl.transition=r,Hn=t,!(Hn&6)&&Nh()}}function AB(){cl=Kf.current,Qi(Kf)}function Bd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,VD(r)),Vs!==null)for(r=Vs.return;r!==null;){var i=r;switch(j2(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&rv();break;case 3:Bp(),Qi(Ra),Qi(ta),Y2();break;case 5:X2(i);break;case 4:Bp();break;case 13:Qi(as);break;case 19:Qi(as);break;case 10:$2(i.type._context);break;case 22:case 23:AB()}r=r.return}if(_o=e,Vs=e=bh(e.current,null),Eo=cl=t,oo=0,yg=null,oB=i1=Md=0,Ma=jm=null,fd!==null){for(t=0;t<fd.length;t++)if(r=fd[t],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,u=r.pending;if(u!==null){var h=u.next;u.next=a,i.next=h}r.pending=i}fd=null}return e}function z3(e,t){do{var r=Vs;try{if(G2(),Cy.current=uv,cv){for(var i=ls.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}cv=!1}if(Ld=0,yo=io=ls=null,zm=!1,pg=0,sB.current=null,r===null||r.return===null){oo=1,yg=t,Vs=null;break}e:{var u=e,h=r.return,o=r,g=t;if(t=Eo,o.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var w=g,B=o,I=B.tag;if(!(B.mode&1)&&(I===0||I===11||I===15)){var P=B.alternate;P?(B.updateQueue=P.updateQueue,B.memoizedState=P.memoizedState,B.lanes=P.lanes):(B.updateQueue=null,B.memoizedState=null)}var b=DS(h);if(b!==null){b.flags&=-257,QS(b,h,o,u,t),b.mode&1&&NS(u,w,t),t=b,g=w;var N=t.updateQueue;if(N===null){var k=new Set;k.add(g),t.updateQueue=k}else N.add(g);break e}else{if(!(t&1)){NS(u,w,t),cB();break e}g=Error(sr(426))}}else if(Wi&&o.mode&1){var H=DS(h);if(H!==null){!(H.flags&65536)&&(H.flags|=256),QS(H,h,o,u,t),V2(Cp(g,o));break e}}u=g=Cp(g,o),oo!==4&&(oo=2),jm===null?jm=[u]:jm.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var U=B3(u,g,t);PS(u,U);break e;case 1:o=g;var Q=u.type,K=u.stateNode;if(!(u.flags&128)&&(typeof Q.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(wh===null||!wh.has(K)))){u.flags|=65536,t&=-t,u.lanes|=t;var Z=C3(u,o,t);PS(u,Z);break e}}u=u.return}while(u!==null)}V3(r)}catch(Ae){t=Ae,Vs===r&&r!==null&&(Vs=r=r.return);continue}break}while(!0)}function H3(){var e=hv.current;return hv.current=uv,e===null?uv:e}function cB(){(oo===0||oo===3||oo===2)&&(oo=4),_o===null||!(Md&268435455)&&!(i1&268435455)||nh(_o,Eo)}function pv(e,t){var r=Hn;Hn|=2;var i=H3();(_o!==e||Eo!==t)&&(lu=null,Bd(e,t));do try{pQ();break}catch(a){z3(e,a)}while(!0);if(G2(),Hn=r,hv.current=i,Vs!==null)throw Error(sr(261));return _o=null,Eo=0,oo}function pQ(){for(;Vs!==null;)j3(Vs)}function mQ(){for(;Vs!==null&&!zN();)j3(Vs)}function j3(e){var t=G3(e.alternate,e,cl);e.memoizedProps=e.pendingProps,t===null?V3(e):Vs=t,sB.current=null}function V3(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=AQ(r,t),r!==null){r.flags&=32767,Vs=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oo=6,Vs=null;return}}else if(r=lQ(r,t,cl),r!==null){Vs=r;return}if(t=t.sibling,t!==null){Vs=t;return}Vs=t=e}while(t!==null);oo===0&&(oo=5)}function Ad(e,t,r){var i=ai,a=Gl.transition;try{Gl.transition=null,ai=1,gQ(e,t,r,i)}finally{Gl.transition=a,ai=i}return null}function gQ(e,t,r,i){do ep();while(ch!==null);if(Hn&6)throw Error(sr(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(sr(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(XN(e,u),e===_o&&(Vs=_o=null,Eo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||E0||(E0=!0,$3(Zy,function(){return ep(),null})),u=(r.flags&15990)!==0,r.subtreeFlags&15990||u){u=Gl.transition,Gl.transition=null;var h=ai;ai=1;var o=Hn;Hn|=4,sB.current=null,uQ(e,r),D3(r,e),ND(Nx),Yy=!!Rx,Nx=Rx=null,e.current=r,hQ(r),HN(),Hn=o,ai=h,Gl.transition=u}else e.current=r;if(E0&&(E0=!1,ch=e,fv=a),u=e.pendingLanes,u===0&&(wh=null),KN(r.stateNode),Da(e,Is()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(dv)throw dv=!1,e=nb,nb=null,e;return fv&1&&e.tag!==0&&ep(),u=e.pendingLanes,u&1?e===ib?Vm++:(Vm=0,ib=e):Vm=0,Nh(),null}function ep(){if(ch!==null){var e=BT(fv),t=Gl.transition,r=ai;try{if(Gl.transition=null,ai=16>e?16:e,ch===null)var i=!1;else{if(e=ch,ch=null,fv=0,Hn&6)throw Error(sr(331));var a=Hn;for(Hn|=4,Fr=e.current;Fr!==null;){var u=Fr,h=u.child;if(Fr.flags&16){var o=u.deletions;if(o!==null){for(var g=0;g<o.length;g++){var w=o[g];for(Fr=w;Fr!==null;){var B=Fr;switch(B.tag){case 0:case 11:case 15:Hm(8,B,u)}var I=B.child;if(I!==null)I.return=B,Fr=I;else for(;Fr!==null;){B=Fr;var P=B.sibling,b=B.return;if(U3(B),B===w){Fr=null;break}if(P!==null){P.return=b,Fr=P;break}Fr=b}}}var N=u.alternate;if(N!==null){var k=N.child;if(k!==null){N.child=null;do{var H=k.sibling;k.sibling=null,k=H}while(k!==null)}}Fr=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,Fr=h;else e:for(;Fr!==null;){if(u=Fr,u.flags&2048)switch(u.tag){case 0:case 11:case 15:Hm(9,u,u.return)}var U=u.sibling;if(U!==null){U.return=u.return,Fr=U;break e}Fr=u.return}}var Q=e.current;for(Fr=Q;Fr!==null;){h=Fr;var K=h.child;if(h.subtreeFlags&2064&&K!==null)K.return=h,Fr=K;else e:for(h=Q;Fr!==null;){if(o=Fr,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:n1(9,o)}}catch(Ae){ys(o,o.return,Ae)}if(o===h){Fr=null;break e}var Z=o.sibling;if(Z!==null){Z.return=o.return,Fr=Z;break e}Fr=o.return}}if(Hn=a,Nh(),wc&&typeof wc.onPostCommitFiberRoot=="function")try{wc.onPostCommitFiberRoot(Wv,e)}catch{}i=!0}return i}finally{ai=r,Gl.transition=t}}return!1}function YS(e,t,r){t=Cp(r,t),t=B3(e,t,1),e=_h(e,t,1),t=va(),e!==null&&(Ug(e,1,t),Da(e,t))}function ys(e,t,r){if(e.tag===3)YS(e,e,r);else for(;t!==null;){if(t.tag===3){YS(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wh===null||!wh.has(i))){e=Cp(r,e),e=C3(t,e,1),t=_h(t,e,1),e=va(),t!==null&&(Ug(t,1,e),Da(t,e));break}}t=t.return}}function yQ(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=va(),e.pingedLanes|=e.suspendedLanes&r,_o===e&&(Eo&r)===r&&(oo===4||oo===3&&(Eo&130023424)===Eo&&500>Is()-aB?Bd(e,0):oB|=r),Da(e,t)}function K3(e,t){t===0&&(e.mode&1?(t=g0,g0<<=1,!(g0&130023424)&&(g0=4194304)):t=1);var r=va();e=yu(e,t),e!==null&&(Ug(e,t,r),Da(e,r))}function vQ(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),K3(e,r)}function _Q(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(sr(314))}i!==null&&i.delete(t),K3(e,r)}var G3;G3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ra.current)ka=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ka=!1,aQ(e,t,r);ka=!!(e.flags&131072)}else ka=!1,Wi&&t.flags&1048576&&ZT(t,sv,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ey(e,t),e=t.pendingProps;var a=wp(t,ta.current);Jf(t,r),a=eB(null,t,i,e,a,r);var u=tB();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Na(i)?(u=!0,nv(t)):u=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,W2(t),a.updater=r1,t.stateNode=a,a._reactInternals=t,Gx(t,i,e,r),t=Wx(null,t,i,!0,u,r)):(t.tag=0,Wi&&u&&H2(t),ga(null,t,a,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Ey(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=xQ(i),e=BA(i,e),a){case 0:t=qx(null,t,i,e,r);break e;case 1:t=HS(null,t,i,e,r);break e;case 11:t=OS(null,t,i,e,r);break e;case 14:t=zS(null,t,i,BA(i.type,e),r);break e}throw Error(sr(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:BA(i,a),qx(e,t,i,a,r);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:BA(i,a),HS(e,t,i,a,r);case 3:e:{if(F3(t),e===null)throw Error(sr(387));i=t.pendingProps,u=t.memoizedState,a=u.element,r3(e,t),lv(t,i,null,r);var h=t.memoizedState;if(i=h.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){a=Cp(Error(sr(423)),t),t=jS(e,t,i,r,a);break e}else if(i!==a){a=Cp(Error(sr(424)),t),t=jS(e,t,i,r,a);break e}else for(hl=vh(t.stateNode.containerInfo.firstChild),fl=t,Wi=!0,FA=null,r=e3(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xp(),i===a){t=vu(e,t,r);break e}ga(e,t,i,r)}t=t.child}return t;case 5:return n3(t),e===null&&jx(t),i=t.type,a=t.pendingProps,u=e!==null?e.memoizedProps:null,h=a.children,Dx(i,a)?h=null:u!==null&&Dx(i,u)&&(t.flags|=32),I3(e,t),ga(e,t,h,r),t.child;case 6:return e===null&&jx(t),null;case 13:return T3(e,t,r);case 4:return Z2(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=bp(t,null,i,r):ga(e,t,i,r),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:BA(i,a),OS(e,t,i,a,r);case 7:return ga(e,t,t.pendingProps,r),t.child;case 8:return ga(e,t,t.pendingProps.children,r),t.child;case 12:return ga(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,u=t.memoizedProps,h=a.value,Ii(ov,i._currentValue),i._currentValue=h,u!==null)if(MA(u.value,h)){if(u.children===a.children&&!Ra.current){t=vu(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var o=u.dependencies;if(o!==null){h=u.child;for(var g=o.firstContext;g!==null;){if(g.context===i){if(u.tag===1){g=fu(-1,r&-r),g.tag=2;var w=u.updateQueue;if(w!==null){w=w.shared;var B=w.pending;B===null?g.next=g:(g.next=B.next,B.next=g),w.pending=g}}u.lanes|=r,g=u.alternate,g!==null&&(g.lanes|=r),Vx(u.return,r,t),o.lanes|=r;break}g=g.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(sr(341));h.lanes|=r,o=h.alternate,o!==null&&(o.lanes|=r),Vx(h,r,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}ga(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Jf(t,r),a=$l(a),i=i(a),t.flags|=1,ga(e,t,i,r),t.child;case 14:return i=t.type,a=BA(i,t.pendingProps),a=BA(i.type,a),zS(e,t,i,a,r);case 15:return S3(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:BA(i,a),Ey(e,t),t.tag=1,Na(i)?(e=!0,nv(t)):e=!1,Jf(t,r),b3(t,i,a),Gx(t,i,a,r),Wx(null,t,i,!0,e,r);case 19:return P3(e,t,r);case 22:return E3(e,t,r)}throw Error(sr(156,t.tag))};function $3(e,t){return _T(e,t)}function wQ(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(e,t,r,i){return new wQ(e,t,r,i)}function uB(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xQ(e){if(typeof e=="function")return uB(e)?1:0;if(e!=null){if(e=e.$$typeof,e===T2)return 11;if(e===P2)return 14}return 2}function bh(e,t){var r=e.alternate;return r===null?(r=jl(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ty(e,t,r,i,a,u){var h=2;if(i=e,typeof e=="function")uB(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case Uf:return Cd(r.children,a,u,t);case F2:h=8,a|=8;break;case mx:return e=jl(12,r,t,a|2),e.elementType=mx,e.lanes=u,e;case gx:return e=jl(13,r,t,a),e.elementType=gx,e.lanes=u,e;case yx:return e=jl(19,r,t,a),e.elementType=yx,e.lanes=u,e;case nT:return s1(r,a,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tT:h=10;break e;case rT:h=9;break e;case T2:h=11;break e;case P2:h=14;break e;case Ju:h=16,i=null;break e}throw Error(sr(130,e==null?e:typeof e,""))}return t=jl(h,r,t,a),t.elementType=e,t.type=i,t.lanes=u,t}function Cd(e,t,r,i){return e=jl(7,e,i,t),e.lanes=r,e}function s1(e,t,r,i){return e=jl(22,e,i,t),e.elementType=nT,e.lanes=r,e.stateNode={isHidden:!1},e}function ow(e,t,r){return e=jl(6,e,null,t),e.lanes=r,e}function aw(e,t,r){return t=jl(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bQ(e,t,r,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z_(0),this.expirationTimes=z_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z_(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function hB(e,t,r,i,a,u,h,o,g){return e=new bQ(e,t,r,o,g),t===1?(t=1,u===!0&&(t|=8)):t=0,u=jl(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},W2(u),e}function BQ(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kf,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function q3(e){if(!e)return Th;e=e._reactInternals;e:{if(zd(e)!==e||e.tag!==1)throw Error(sr(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Na(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(sr(171))}if(e.tag===1){var r=e.type;if(Na(r))return qT(e,r,t)}return t}function W3(e,t,r,i,a,u,h,o,g){return e=hB(r,i,!0,e,a,u,h,o,g),e.context=q3(null),r=e.current,i=va(),a=xh(r),u=fu(i,a),u.callback=t??null,_h(r,u,a),e.current.lanes=a,Ug(e,a,i),Da(e,i),e}function o1(e,t,r,i){var a=t.current,u=va(),h=xh(a);return r=q3(r),t.context===null?t.context=r:t.pendingContext=r,t=fu(u,h),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=_h(a,t,h),e!==null&&(LA(e,a,h,u),By(e,a,h)),h}function mv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function JS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function dB(e,t){JS(e,t),(e=e.alternate)&&JS(e,t)}function CQ(){return null}var Z3=typeof reportError=="function"?reportError:function(e){console.error(e)};function fB(e){this._internalRoot=e}a1.prototype.render=fB.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(sr(409));o1(e,t,null,null)};a1.prototype.unmount=fB.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kd(function(){o1(null,e,null,null)}),t[gu]=null}};function a1(e){this._internalRoot=e}a1.prototype.unstable_scheduleHydration=function(e){if(e){var t=ET();e={blockedOn:null,target:e,priority:t};for(var r=0;r<rh.length&&t!==0&&t<rh[r].priority;r++);rh.splice(r,0,e),r===0&&FT(e)}};function pB(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eE(){}function SQ(e,t,r,i,a){if(a){if(typeof i=="function"){var u=i;i=function(){var w=mv(h);u.call(w)}}var h=W3(t,i,e,0,null,!1,!1,"",eE);return e._reactRootContainer=h,e[gu]=h.current,cg(e.nodeType===8?e.parentNode:e),kd(),h}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var o=i;i=function(){var w=mv(g);o.call(w)}}var g=hB(e,0,!1,null,null,!1,!1,"",eE);return e._reactRootContainer=g,e[gu]=g.current,cg(e.nodeType===8?e.parentNode:e),kd(function(){o1(t,g,r,i)}),g}function A1(e,t,r,i,a){var u=r._reactRootContainer;if(u){var h=u;if(typeof a=="function"){var o=a;a=function(){var g=mv(h);o.call(g)}}o1(t,h,e,a)}else h=SQ(r,t,e,a,i);return mv(h)}CT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Sm(t.pendingLanes);r!==0&&(k2(t,r|1),Da(t,Is()),!(Hn&6)&&(Sp=Is()+500,Nh()))}break;case 13:kd(function(){var i=yu(e,1);if(i!==null){var a=va();LA(i,e,1,a)}}),dB(e,1)}};U2=function(e){if(e.tag===13){var t=yu(e,134217728);if(t!==null){var r=va();LA(t,e,134217728,r)}dB(e,134217728)}};ST=function(e){if(e.tag===13){var t=xh(e),r=yu(e,t);if(r!==null){var i=va();LA(r,e,t,i)}dB(e,t)}};ET=function(){return ai};IT=function(e,t){var r=ai;try{return ai=e,t()}finally{ai=r}};Ix=function(e,t,r){switch(t){case"input":if(wx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=Jv(i);if(!a)throw Error(sr(90));sT(i),wx(i,a)}}}break;case"textarea":aT(e,r);break;case"select":t=r.value,t!=null&&Wf(e,!!r.multiple,t,!1)}};fT=lB;pT=kd;var EQ={usingClientEntryPoint:!1,Events:[Ng,Qf,Jv,hT,dT,lB]},pm={findFiberByHostInstance:dd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IQ={bundleType:pm.bundleType,version:pm.version,rendererPackageName:pm.rendererPackageName,rendererConfig:pm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yT(e),e===null?null:e.stateNode},findFiberByHostInstance:pm.findFiberByHostInstance||CQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var I0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!I0.isDisabled&&I0.supportsFiber)try{Wv=I0.inject(IQ),wc=I0}catch{}}gl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EQ;gl.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pB(t))throw Error(sr(200));return BQ(e,t,null,r)};gl.createRoot=function(e,t){if(!pB(e))throw Error(sr(299));var r=!1,i="",a=Z3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=hB(e,1,!1,null,null,r,!1,i,a),e[gu]=t.current,cg(e.nodeType===8?e.parentNode:e),new fB(t)};gl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(sr(188)):(e=Object.keys(e).join(","),Error(sr(268,e)));return e=yT(t),e=e===null?null:e.stateNode,e};gl.flushSync=function(e){return kd(e)};gl.hydrate=function(e,t,r){if(!l1(t))throw Error(sr(200));return A1(null,e,t,!0,r)};gl.hydrateRoot=function(e,t,r){if(!pB(e))throw Error(sr(405));var i=r!=null&&r.hydratedSources||null,a=!1,u="",h=Z3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=W3(t,null,e,1,r??null,a,!1,u,h),e[gu]=t.current,cg(e),i)for(e=0;e<i.length;e++)r=i[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new a1(t)};gl.render=function(e,t,r){if(!l1(t))throw Error(sr(200));return A1(null,e,t,!1,r)};gl.unmountComponentAtNode=function(e){if(!l1(e))throw Error(sr(40));return e._reactRootContainer?(kd(function(){A1(null,null,e,!1,function(){e._reactRootContainer=null,e[gu]=null})}),!0):!1};gl.unstable_batchedUpdates=lB;gl.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!l1(r))throw Error(sr(200));if(e==null||e._reactInternals===void 0)throw Error(sr(38));return A1(e,t,r,!1,i)};gl.version="18.3.1-next-f1338f8080-20240426";function X3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X3)}catch(e){console.error(e)}}X3(),XF.exports=gl;var Hd=XF.exports;const Y3=_2(Hd);var J3,tE=Hd;J3=tE.createRoot,tE.hydrateRoot;const FQ=1,TQ=1e6;let lw=0;function PQ(){return lw=(lw+1)%Number.MAX_SAFE_INTEGER,lw.toString()}const Aw=new Map,rE=e=>{if(Aw.has(e))return;const t=setTimeout(()=>{Aw.delete(e),Km({type:"REMOVE_TOAST",toastId:e})},TQ);Aw.set(e,t)},LQ=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,FQ)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?rE(r):e.toasts.forEach(i=>{rE(i.id)}),{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Py=[];let Ly={toasts:[]};function Km(e){Ly=LQ(Ly,e),Py.forEach(t=>{t(Ly)})}function MQ({...e}){const t=PQ(),r=a=>Km({type:"UPDATE_TOAST",toast:{...a,id:t}}),i=()=>Km({type:"DISMISS_TOAST",toastId:t});return Km({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||i()}}}),{id:t,dismiss:i,update:r}}function kQ(){const[e,t]=ee.useState(Ly);return ee.useEffect(()=>(Py.push(t),()=>{const r=Py.indexOf(t);r>-1&&Py.splice(r,1)}),[e]),{...e,toast:MQ,dismiss:r=>Km({type:"DISMISS_TOAST",toastId:r})}}function cn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function nE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function eP(...e){return t=>{let r=!1;const i=e.map(a=>{const u=nE(a,t);return!r&&typeof u=="function"&&(r=!0),u});if(r)return()=>{for(let a=0;a<i.length;a++){const u=i[a];typeof u=="function"?u():nE(e[a],null)}}}}function fi(...e){return ee.useCallback(eP(...e),e)}function Bu(e,t=[]){let r=[];function i(u,h){const o=ee.createContext(h),g=r.length;r=[...r,h];const w=I=>{var U;const{scope:P,children:b,...N}=I,k=((U=P==null?void 0:P[e])==null?void 0:U[g])||o,H=ee.useMemo(()=>N,Object.values(N));return X.jsx(k.Provider,{value:H,children:b})};w.displayName=u+"Provider";function B(I,P){var k;const b=((k=P==null?void 0:P[e])==null?void 0:k[g])||o,N=ee.useContext(b);if(N)return N;if(h!==void 0)return h;throw new Error(`\`${I}\` must be used within \`${u}\``)}return[w,B]}const a=()=>{const u=r.map(h=>ee.createContext(h));return function(o){const g=(o==null?void 0:o[e])||u;return ee.useMemo(()=>({[`__scope${e}`]:{...o,[e]:g}}),[o,g])}};return a.scopeName=e,[i,UQ(a,...t)]}function UQ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const i=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(u){const h=i.reduce((o,{useScope:g,scopeName:w})=>{const I=g(u)[`__scope${w}`];return{...o,...I}},{});return ee.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function vg(e){const t=NQ(e),r=ee.forwardRef((i,a)=>{const{children:u,...h}=i,o=ee.Children.toArray(u),g=o.find(QQ);if(g){const w=g.props.children,B=o.map(I=>I===g?ee.Children.count(w)>1?ee.Children.only(null):ee.isValidElement(w)?w.props.children:null:I);return X.jsx(t,{...h,ref:a,children:ee.isValidElement(w)?ee.cloneElement(w,void 0,B):null})}return X.jsx(t,{...h,ref:a,children:u})});return r.displayName=`${e}.Slot`,r}var RQ=vg("Slot");function NQ(e){const t=ee.forwardRef((r,i)=>{const{children:a,...u}=r;if(ee.isValidElement(a)){const h=zQ(a),o=OQ(u,a.props);return a.type!==ee.Fragment&&(o.ref=i?eP(i,h):h),ee.cloneElement(a,o)}return ee.Children.count(a)>1?ee.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var tP=Symbol("radix.slottable");function DQ(e){const t=({children:r})=>X.jsx(X.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=tP,t}function QQ(e){return ee.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===tP}function OQ(e,t){const r={...t};for(const i in t){const a=e[i],u=t[i];/^on[A-Z]/.test(i)?a&&u?r[i]=(...o)=>{const g=u(...o);return a(...o),g}:a&&(r[i]=a):i==="style"?r[i]={...a,...u}:i==="className"&&(r[i]=[a,u].filter(Boolean).join(" "))}return{...e,...r}}function zQ(e){var i,a;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function mB(e){const t=e+"CollectionProvider",[r,i]=Bu(t),[a,u]=r(t,{collectionRef:{current:null},itemMap:new Map}),h=k=>{const{scope:H,children:U}=k,Q=cr.useRef(null),K=cr.useRef(new Map).current;return X.jsx(a,{scope:H,itemMap:K,collectionRef:Q,children:U})};h.displayName=t;const o=e+"CollectionSlot",g=vg(o),w=cr.forwardRef((k,H)=>{const{scope:U,children:Q}=k,K=u(o,U),Z=fi(H,K.collectionRef);return X.jsx(g,{ref:Z,children:Q})});w.displayName=o;const B=e+"CollectionItemSlot",I="data-radix-collection-item",P=vg(B),b=cr.forwardRef((k,H)=>{const{scope:U,children:Q,...K}=k,Z=cr.useRef(null),Ae=fi(H,Z),fe=u(B,U);return cr.useEffect(()=>(fe.itemMap.set(Z,{ref:Z,...K}),()=>void fe.itemMap.delete(Z))),X.jsx(P,{[I]:"",ref:Ae,children:Q})});b.displayName=B;function N(k){const H=u(e+"CollectionConsumer",k);return cr.useCallback(()=>{const Q=H.collectionRef.current;if(!Q)return[];const K=Array.from(Q.querySelectorAll(`[${I}]`));return Array.from(H.itemMap.values()).sort((fe,ge)=>K.indexOf(fe.ref.current)-K.indexOf(ge.ref.current))},[H.collectionRef,H.itemMap])}return[{Provider:h,Slot:w,ItemSlot:b},N,i]}var HQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],In=HQ.reduce((e,t)=>{const r=vg(`Primitive.${t}`),i=ee.forwardRef((a,u)=>{const{asChild:h,...o}=a,g=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),X.jsx(g,{...o,ref:u})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function rP(e,t){e&&Hd.flushSync(()=>e.dispatchEvent(t))}function Wl(e){const t=ee.useRef(e);return ee.useEffect(()=>{t.current=e}),ee.useMemo(()=>(...r)=>{var i;return(i=t.current)==null?void 0:i.call(t,...r)},[])}function jQ(e,t=globalThis==null?void 0:globalThis.document){const r=Wl(e);ee.useEffect(()=>{const i=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[r,t])}var VQ="DismissableLayer",ab="dismissableLayer.update",KQ="dismissableLayer.pointerDownOutside",GQ="dismissableLayer.focusOutside",iE,nP=ee.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),c1=ee.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:u,onInteractOutside:h,onDismiss:o,...g}=e,w=ee.useContext(nP),[B,I]=ee.useState(null),P=(B==null?void 0:B.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=ee.useState({}),N=fi(t,ge=>I(ge)),k=Array.from(w.layers),[H]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),U=k.indexOf(H),Q=B?k.indexOf(B):-1,K=w.layersWithOutsidePointerEventsDisabled.size>0,Z=Q>=U,Ae=qQ(ge=>{const me=ge.target,ae=[...w.branches].some(Le=>Le.contains(me));!Z||ae||(a==null||a(ge),h==null||h(ge),ge.defaultPrevented||o==null||o())},P),fe=WQ(ge=>{const me=ge.target;[...w.branches].some(Le=>Le.contains(me))||(u==null||u(ge),h==null||h(ge),ge.defaultPrevented||o==null||o())},P);return jQ(ge=>{Q===w.layers.size-1&&(i==null||i(ge),!ge.defaultPrevented&&o&&(ge.preventDefault(),o()))},P),ee.useEffect(()=>{if(B)return r&&(w.layersWithOutsidePointerEventsDisabled.size===0&&(iE=P.body.style.pointerEvents,P.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(B)),w.layers.add(B),sE(),()=>{r&&w.layersWithOutsidePointerEventsDisabled.size===1&&(P.body.style.pointerEvents=iE)}},[B,P,r,w]),ee.useEffect(()=>()=>{B&&(w.layers.delete(B),w.layersWithOutsidePointerEventsDisabled.delete(B),sE())},[B,w]),ee.useEffect(()=>{const ge=()=>b({});return document.addEventListener(ab,ge),()=>document.removeEventListener(ab,ge)},[]),X.jsx(In.div,{...g,ref:N,style:{pointerEvents:K?Z?"auto":"none":void 0,...e.style},onFocusCapture:cn(e.onFocusCapture,fe.onFocusCapture),onBlurCapture:cn(e.onBlurCapture,fe.onBlurCapture),onPointerDownCapture:cn(e.onPointerDownCapture,Ae.onPointerDownCapture)})});c1.displayName=VQ;var $Q="DismissableLayerBranch",iP=ee.forwardRef((e,t)=>{const r=ee.useContext(nP),i=ee.useRef(null),a=fi(t,i);return ee.useEffect(()=>{const u=i.current;if(u)return r.branches.add(u),()=>{r.branches.delete(u)}},[r.branches]),X.jsx(In.div,{...e,ref:a})});iP.displayName=$Q;function qQ(e,t=globalThis==null?void 0:globalThis.document){const r=Wl(e),i=ee.useRef(!1),a=ee.useRef(()=>{});return ee.useEffect(()=>{const u=o=>{if(o.target&&!i.current){let g=function(){sP(KQ,r,w,{discrete:!0})};const w={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=g,t.addEventListener("click",a.current,{once:!0})):g()}else t.removeEventListener("click",a.current);i.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",u),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}function WQ(e,t=globalThis==null?void 0:globalThis.document){const r=Wl(e),i=ee.useRef(!1);return ee.useEffect(()=>{const a=u=>{u.target&&!i.current&&sP(GQ,r,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function sE(){const e=new CustomEvent(ab);document.dispatchEvent(e)}function sP(e,t,r,{discrete:i}){const a=r.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),i?rP(a,u):a.dispatchEvent(u)}var ZQ=c1,XQ=iP,Fo=globalThis!=null&&globalThis.document?ee.useLayoutEffect:()=>{},YQ="Portal",gB=ee.forwardRef((e,t)=>{var o;const{container:r,...i}=e,[a,u]=ee.useState(!1);Fo(()=>u(!0),[]);const h=r||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return h?Y3.createPortal(X.jsx(In.div,{...i,ref:t}),h):null});gB.displayName=YQ;function JQ(e,t){return ee.useReducer((r,i)=>t[r][i]??r,e)}var Qg=e=>{const{present:t,children:r}=e,i=e8(t),a=typeof r=="function"?r({present:i.isPresent}):ee.Children.only(r),u=fi(i.ref,t8(a));return typeof r=="function"||i.isPresent?ee.cloneElement(a,{ref:u}):null};Qg.displayName="Presence";function e8(e){const[t,r]=ee.useState(),i=ee.useRef(null),a=ee.useRef(e),u=ee.useRef("none"),h=e?"mounted":"unmounted",[o,g]=JQ(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ee.useEffect(()=>{const w=F0(i.current);u.current=o==="mounted"?w:"none"},[o]),Fo(()=>{const w=i.current,B=a.current;if(B!==e){const P=u.current,b=F0(w);e?g("MOUNT"):b==="none"||(w==null?void 0:w.display)==="none"?g("UNMOUNT"):g(B&&P!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,g]),Fo(()=>{if(t){let w;const B=t.ownerDocument.defaultView??window,I=b=>{const k=F0(i.current).includes(b.animationName);if(b.target===t&&k&&(g("ANIMATION_END"),!a.current)){const H=t.style.animationFillMode;t.style.animationFillMode="forwards",w=B.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=H)})}},P=b=>{b.target===t&&(u.current=F0(i.current))};return t.addEventListener("animationstart",P),t.addEventListener("animationcancel",I),t.addEventListener("animationend",I),()=>{B.clearTimeout(w),t.removeEventListener("animationstart",P),t.removeEventListener("animationcancel",I),t.removeEventListener("animationend",I)}}else g("ANIMATION_END")},[t,g]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:ee.useCallback(w=>{i.current=w?getComputedStyle(w):null,r(w)},[])}}function F0(e){return(e==null?void 0:e.animationName)||"none"}function t8(e){var i,a;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var r8=C2[" useInsertionEffect ".trim().toString()]||Fo;function Ep({prop:e,defaultProp:t,onChange:r=()=>{},caller:i}){const[a,u,h]=n8({defaultProp:t,onChange:r}),o=e!==void 0,g=o?e:a;{const B=ee.useRef(e!==void 0);ee.useEffect(()=>{const I=B.current;I!==o&&console.warn(`${i} is changing from ${I?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),B.current=o},[o,i])}const w=ee.useCallback(B=>{var I;if(o){const P=i8(B)?B(e):B;P!==e&&((I=h.current)==null||I.call(h,P))}else u(B)},[o,e,u,h]);return[g,w]}function n8({defaultProp:e,onChange:t}){const[r,i]=ee.useState(e),a=ee.useRef(r),u=ee.useRef(t);return r8(()=>{u.current=t},[t]),ee.useEffect(()=>{var h;a.current!==r&&((h=u.current)==null||h.call(u,r),a.current=r)},[r,a]),[r,i,u]}function i8(e){return typeof e=="function"}var oP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),s8="VisuallyHidden",u1=ee.forwardRef((e,t)=>X.jsx(In.span,{...e,ref:t,style:{...oP,...e.style}}));u1.displayName=s8;var o8=u1,yB="ToastProvider",[vB,a8,l8]=mB("Toast"),[aP,qJ]=Bu("Toast",[l8]),[A8,h1]=aP(yB),lP=e=>{const{__scopeToast:t,label:r="Notification",duration:i=5e3,swipeDirection:a="right",swipeThreshold:u=50,children:h}=e,[o,g]=ee.useState(null),[w,B]=ee.useState(0),I=ee.useRef(!1),P=ee.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${yB}\`. Expected non-empty \`string\`.`),X.jsx(vB.Provider,{scope:t,children:X.jsx(A8,{scope:t,label:r,duration:i,swipeDirection:a,swipeThreshold:u,toastCount:w,viewport:o,onViewportChange:g,onToastAdd:ee.useCallback(()=>B(b=>b+1),[]),onToastRemove:ee.useCallback(()=>B(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:I,isClosePausedRef:P,children:h})})};lP.displayName=yB;var AP="ToastViewport",c8=["F8"],lb="toast.viewportPause",Ab="toast.viewportResume",cP=ee.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:i=c8,label:a="Notifications ({hotkey})",...u}=e,h=h1(AP,r),o=a8(r),g=ee.useRef(null),w=ee.useRef(null),B=ee.useRef(null),I=ee.useRef(null),P=fi(t,I,h.onViewportChange),b=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=h.toastCount>0;ee.useEffect(()=>{const H=U=>{var K;i.length!==0&&i.every(Z=>U[Z]||U.code===Z)&&((K=I.current)==null||K.focus())};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[i]),ee.useEffect(()=>{const H=g.current,U=I.current;if(N&&H&&U){const Q=()=>{if(!h.isClosePausedRef.current){const fe=new CustomEvent(lb);U.dispatchEvent(fe),h.isClosePausedRef.current=!0}},K=()=>{if(h.isClosePausedRef.current){const fe=new CustomEvent(Ab);U.dispatchEvent(fe),h.isClosePausedRef.current=!1}},Z=fe=>{!H.contains(fe.relatedTarget)&&K()},Ae=()=>{H.contains(document.activeElement)||K()};return H.addEventListener("focusin",Q),H.addEventListener("focusout",Z),H.addEventListener("pointermove",Q),H.addEventListener("pointerleave",Ae),window.addEventListener("blur",Q),window.addEventListener("focus",K),()=>{H.removeEventListener("focusin",Q),H.removeEventListener("focusout",Z),H.removeEventListener("pointermove",Q),H.removeEventListener("pointerleave",Ae),window.removeEventListener("blur",Q),window.removeEventListener("focus",K)}}},[N,h.isClosePausedRef]);const k=ee.useCallback(({tabbingDirection:H})=>{const Q=o().map(K=>{const Z=K.ref.current,Ae=[Z,...b8(Z)];return H==="forwards"?Ae:Ae.reverse()});return(H==="forwards"?Q.reverse():Q).flat()},[o]);return ee.useEffect(()=>{const H=I.current;if(H){const U=Q=>{var Ae,fe,ge;const K=Q.altKey||Q.ctrlKey||Q.metaKey;if(Q.key==="Tab"&&!K){const me=document.activeElement,ae=Q.shiftKey;if(Q.target===H&&ae){(Ae=w.current)==null||Ae.focus();return}const he=k({tabbingDirection:ae?"backwards":"forwards"}),Ie=he.findIndex(we=>we===me);cw(he.slice(Ie+1))?Q.preventDefault():ae?(fe=w.current)==null||fe.focus():(ge=B.current)==null||ge.focus()}};return H.addEventListener("keydown",U),()=>H.removeEventListener("keydown",U)}},[o,k]),X.jsxs(XQ,{ref:g,role:"region","aria-label":a.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&X.jsx(cb,{ref:w,onFocusFromOutsideViewport:()=>{const H=k({tabbingDirection:"forwards"});cw(H)}}),X.jsx(vB.Slot,{scope:r,children:X.jsx(In.ol,{tabIndex:-1,...u,ref:P})}),N&&X.jsx(cb,{ref:B,onFocusFromOutsideViewport:()=>{const H=k({tabbingDirection:"backwards"});cw(H)}})]})});cP.displayName=AP;var uP="ToastFocusProxy",cb=ee.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:i,...a}=e,u=h1(uP,r);return X.jsx(u1,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:h=>{var w;const o=h.relatedTarget;!((w=u.viewport)!=null&&w.contains(o))&&i()}})});cb.displayName=uP;var Og="Toast",u8="toast.swipeStart",h8="toast.swipeMove",d8="toast.swipeCancel",f8="toast.swipeEnd",hP=ee.forwardRef((e,t)=>{const{forceMount:r,open:i,defaultOpen:a,onOpenChange:u,...h}=e,[o,g]=Ep({prop:i,defaultProp:a??!0,onChange:u,caller:Og});return X.jsx(Qg,{present:r||o,children:X.jsx(g8,{open:o,...h,ref:t,onClose:()=>g(!1),onPause:Wl(e.onPause),onResume:Wl(e.onResume),onSwipeStart:cn(e.onSwipeStart,w=>{w.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:cn(e.onSwipeMove,w=>{const{x:B,y:I}=w.detail.delta;w.currentTarget.setAttribute("data-swipe","move"),w.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${B}px`),w.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${I}px`)}),onSwipeCancel:cn(e.onSwipeCancel,w=>{w.currentTarget.setAttribute("data-swipe","cancel"),w.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),w.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),w.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),w.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:cn(e.onSwipeEnd,w=>{const{x:B,y:I}=w.detail.delta;w.currentTarget.setAttribute("data-swipe","end"),w.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),w.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),w.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${B}px`),w.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${I}px`),g(!1)})})})});hP.displayName=Og;var[p8,m8]=aP(Og,{onClose(){}}),g8=ee.forwardRef((e,t)=>{const{__scopeToast:r,type:i="foreground",duration:a,open:u,onClose:h,onEscapeKeyDown:o,onPause:g,onResume:w,onSwipeStart:B,onSwipeMove:I,onSwipeCancel:P,onSwipeEnd:b,...N}=e,k=h1(Og,r),[H,U]=ee.useState(null),Q=fi(t,we=>U(we)),K=ee.useRef(null),Z=ee.useRef(null),Ae=a||k.duration,fe=ee.useRef(0),ge=ee.useRef(Ae),me=ee.useRef(0),{onToastAdd:ae,onToastRemove:Le}=k,re=Wl(()=>{var nt;(H==null?void 0:H.contains(document.activeElement))&&((nt=k.viewport)==null||nt.focus()),h()}),he=ee.useCallback(we=>{!we||we===1/0||(window.clearTimeout(me.current),fe.current=new Date().getTime(),me.current=window.setTimeout(re,we))},[re]);ee.useEffect(()=>{const we=k.viewport;if(we){const nt=()=>{he(ge.current),w==null||w()},rt=()=>{const ct=new Date().getTime()-fe.current;ge.current=ge.current-ct,window.clearTimeout(me.current),g==null||g()};return we.addEventListener(lb,rt),we.addEventListener(Ab,nt),()=>{we.removeEventListener(lb,rt),we.removeEventListener(Ab,nt)}}},[k.viewport,Ae,g,w,he]),ee.useEffect(()=>{u&&!k.isClosePausedRef.current&&he(Ae)},[u,Ae,k.isClosePausedRef,he]),ee.useEffect(()=>(ae(),()=>Le()),[ae,Le]);const Ie=ee.useMemo(()=>H?vP(H):null,[H]);return k.viewport?X.jsxs(X.Fragment,{children:[Ie&&X.jsx(y8,{__scopeToast:r,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:Ie}),X.jsx(p8,{scope:r,onClose:re,children:Hd.createPortal(X.jsx(vB.ItemSlot,{scope:r,children:X.jsx(ZQ,{asChild:!0,onEscapeKeyDown:cn(o,()=>{k.isFocusedToastEscapeKeyDownRef.current||re(),k.isFocusedToastEscapeKeyDownRef.current=!1}),children:X.jsx(In.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":u?"open":"closed","data-swipe-direction":k.swipeDirection,...N,ref:Q,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:cn(e.onKeyDown,we=>{we.key==="Escape"&&(o==null||o(we.nativeEvent),we.nativeEvent.defaultPrevented||(k.isFocusedToastEscapeKeyDownRef.current=!0,re()))}),onPointerDown:cn(e.onPointerDown,we=>{we.button===0&&(K.current={x:we.clientX,y:we.clientY})}),onPointerMove:cn(e.onPointerMove,we=>{if(!K.current)return;const nt=we.clientX-K.current.x,rt=we.clientY-K.current.y,ct=!!Z.current,Pe=["left","right"].includes(k.swipeDirection),Ve=["left","up"].includes(k.swipeDirection)?Math.min:Math.max,mt=Pe?Ve(0,nt):0,gt=Pe?0:Ve(0,rt),ie=we.pointerType==="touch"?10:2,Ee={x:mt,y:gt},Me={originalEvent:we,delta:Ee};ct?(Z.current=Ee,T0(h8,I,Me,{discrete:!1})):oE(Ee,k.swipeDirection,ie)?(Z.current=Ee,T0(u8,B,Me,{discrete:!1}),we.target.setPointerCapture(we.pointerId)):(Math.abs(nt)>ie||Math.abs(rt)>ie)&&(K.current=null)}),onPointerUp:cn(e.onPointerUp,we=>{const nt=Z.current,rt=we.target;if(rt.hasPointerCapture(we.pointerId)&&rt.releasePointerCapture(we.pointerId),Z.current=null,K.current=null,nt){const ct=we.currentTarget,Pe={originalEvent:we,delta:nt};oE(nt,k.swipeDirection,k.swipeThreshold)?T0(f8,b,Pe,{discrete:!0}):T0(d8,P,Pe,{discrete:!0}),ct.addEventListener("click",Ve=>Ve.preventDefault(),{once:!0})}})})})}),k.viewport)})]}):null}),y8=e=>{const{__scopeToast:t,children:r,...i}=e,a=h1(Og,t),[u,h]=ee.useState(!1),[o,g]=ee.useState(!1);return w8(()=>h(!0)),ee.useEffect(()=>{const w=window.setTimeout(()=>g(!0),1e3);return()=>window.clearTimeout(w)},[]),o?null:X.jsx(gB,{asChild:!0,children:X.jsx(u1,{...i,children:u&&X.jsxs(X.Fragment,{children:[a.label," ",r]})})})},v8="ToastTitle",dP=ee.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return X.jsx(In.div,{...i,ref:t})});dP.displayName=v8;var _8="ToastDescription",fP=ee.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return X.jsx(In.div,{...i,ref:t})});fP.displayName=_8;var pP="ToastAction",mP=ee.forwardRef((e,t)=>{const{altText:r,...i}=e;return r.trim()?X.jsx(yP,{altText:r,asChild:!0,children:X.jsx(_B,{...i,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${pP}\`. Expected non-empty \`string\`.`),null)});mP.displayName=pP;var gP="ToastClose",_B=ee.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e,a=m8(gP,r);return X.jsx(yP,{asChild:!0,children:X.jsx(In.button,{type:"button",...i,ref:t,onClick:cn(e.onClick,a.onClose)})})});_B.displayName=gP;var yP=ee.forwardRef((e,t)=>{const{__scopeToast:r,altText:i,...a}=e;return X.jsx(In.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...a,ref:t})});function vP(e){const t=[];return Array.from(e.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&t.push(i.textContent),x8(i)){const a=i.ariaHidden||i.hidden||i.style.display==="none",u=i.dataset.radixToastAnnounceExclude==="";if(!a)if(u){const h=i.dataset.radixToastAnnounceAlt;h&&t.push(h)}else t.push(...vP(i))}}),t}function T0(e,t,r,{discrete:i}){const a=r.originalEvent.currentTarget,u=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),i?rP(a,u):a.dispatchEvent(u)}var oE=(e,t,r=0)=>{const i=Math.abs(e.x),a=Math.abs(e.y),u=i>a;return t==="left"||t==="right"?u&&i>r:!u&&a>r};function w8(e=()=>{}){const t=Wl(e);Fo(()=>{let r=0,i=0;return r=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(i)}},[t])}function x8(e){return e.nodeType===e.ELEMENT_NODE}function b8(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function cw(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var B8=lP,_P=cP,wP=hP,xP=dP,bP=fP,BP=mP,CP=_B;function SP(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=SP(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function EP(){for(var e,t,r=0,i="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=SP(e))&&(i&&(i+=" "),i+=t);return i}const aE=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,lE=EP,d1=(e,t)=>r=>{var i;if((t==null?void 0:t.variants)==null)return lE(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:u}=t,h=Object.keys(a).map(w=>{const B=r==null?void 0:r[w],I=u==null?void 0:u[w];if(B===null)return null;const P=aE(B)||aE(I);return a[w][P]}),o=r&&Object.entries(r).reduce((w,B)=>{let[I,P]=B;return P===void 0||(w[I]=P),w},{}),g=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((w,B)=>{let{class:I,className:P,...b}=B;return Object.entries(b).every(N=>{let[k,H]=N;return Array.isArray(H)?H.includes({...u,...o}[k]):{...u,...o}[k]===H})?[...w,I,P]:w},[]);return lE(e,h,g,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IP=(...e)=>e.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=ee.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:a="",children:u,iconNode:h,...o},g)=>ee.createElement("svg",{ref:g,...S8,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:IP("lucide",a),...o},[...h.map(([w,B])=>ee.createElement(w,B)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=(e,t)=>{const r=ee.forwardRef(({className:i,...a},u)=>ee.createElement(E8,{ref:u,iconNode:t,className:IP(`lucide-${C8(e)}`,i),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Ks("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=Ks("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=Ks("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=Ks("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=Ks("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=Ks("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=Ks("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=Ks("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=Ks("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=Ks("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=Ks("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Ks("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=Ks("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=Ks("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=Ks("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=Ks("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=Ks("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=Ks("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=Ks("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=Ks("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wB="-",O8=e=>{const t=H8(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:h=>{const o=h.split(wB);return o[0]===""&&o.length!==1&&o.shift(),MP(o,t)||z8(h)},getConflictingClassGroupIds:(h,o)=>{const g=r[h]||[];return o&&i[h]?[...g,...i[h]]:g}}},MP=(e,t)=>{var h;if(e.length===0)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),a=i?MP(e.slice(1),i):void 0;if(a)return a;if(t.validators.length===0)return;const u=e.join(wB);return(h=t.validators.find(({validator:o})=>o(u)))==null?void 0:h.classGroupId},uE=/^\[(.+)\]$/,z8=e=>{if(uE.test(e)){const t=uE.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},H8=e=>{const{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return V8(Object.entries(e.classGroups),r).forEach(([u,h])=>{hb(h,i,u,t)}),i},hb=(e,t,r,i)=>{e.forEach(a=>{if(typeof a=="string"){const u=a===""?t:hE(t,a);u.classGroupId=r;return}if(typeof a=="function"){if(j8(a)){hb(a(i),t,r,i);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([u,h])=>{hb(h,hE(t,u),r,i)})})},hE=(e,t)=>{let r=e;return t.split(wB).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},j8=e=>e.isThemeGetter,V8=(e,t)=>t?e.map(([r,i])=>{const a=i.map(u=>typeof u=="string"?t+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(([h,o])=>[t+h,o])):u);return[r,a]}):e,K8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,i=new Map;const a=(u,h)=>{r.set(u,h),t++,t>e&&(t=0,i=r,r=new Map)};return{get(u){let h=r.get(u);if(h!==void 0)return h;if((h=i.get(u))!==void 0)return a(u,h),h},set(u,h){r.has(u)?r.set(u,h):a(u,h)}}},kP="!",G8=e=>{const{separator:t,experimentalParseClassName:r}=e,i=t.length===1,a=t[0],u=t.length,h=o=>{const g=[];let w=0,B=0,I;for(let H=0;H<o.length;H++){let U=o[H];if(w===0){if(U===a&&(i||o.slice(H,H+u)===t)){g.push(o.slice(B,H)),B=H+u;continue}if(U==="/"){I=H;continue}}U==="["?w++:U==="]"&&w--}const P=g.length===0?o:o.substring(B),b=P.startsWith(kP),N=b?P.substring(1):P,k=I&&I>B?I-B:void 0;return{modifiers:g,hasImportantModifier:b,baseClassName:N,maybePostfixModifierPosition:k}};return r?o=>r({className:o,parseClassName:h}):h},$8=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(i=>{i[0]==="["?(t.push(...r.sort(),i),r=[]):r.push(i)}),t.push(...r.sort()),t},q8=e=>({cache:K8(e.cacheSize),parseClassName:G8(e),...O8(e)}),W8=/\s+/,Z8=(e,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:a}=t,u=[],h=e.trim().split(W8);let o="";for(let g=h.length-1;g>=0;g-=1){const w=h[g],{modifiers:B,hasImportantModifier:I,baseClassName:P,maybePostfixModifierPosition:b}=r(w);let N=!!b,k=i(N?P.substring(0,b):P);if(!k){if(!N){o=w+(o.length>0?" "+o:o);continue}if(k=i(P),!k){o=w+(o.length>0?" "+o:o);continue}N=!1}const H=$8(B).join(":"),U=I?H+kP:H,Q=U+k;if(u.includes(Q))continue;u.push(Q);const K=a(k,N);for(let Z=0;Z<K.length;++Z){const Ae=K[Z];u.push(U+Ae)}o=w+(o.length>0?" "+o:o)}return o};function X8(){let e=0,t,r,i="";for(;e<arguments.length;)(t=arguments[e++])&&(r=UP(t))&&(i&&(i+=" "),i+=r);return i}const UP=e=>{if(typeof e=="string")return e;let t,r="";for(let i=0;i<e.length;i++)e[i]&&(t=UP(e[i]))&&(r&&(r+=" "),r+=t);return r};function Y8(e,...t){let r,i,a,u=h;function h(g){const w=t.reduce((B,I)=>I(B),e());return r=q8(w),i=r.cache.get,a=r.cache.set,u=o,o(g)}function o(g){const w=i(g);if(w)return w;const B=Z8(g,r);return a(g,B),B}return function(){return u(X8.apply(null,arguments))}}const Ri=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},RP=/^\[(?:([a-z-]+):)?(.+)\]$/i,J8=/^\d+\/\d+$/,eO=new Set(["px","full","screen"]),tO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ru=e=>tp(e)||eO.has(e)||J8.test(e),Vu=e=>Up(e,"length",dO),tp=e=>!!e&&!Number.isNaN(Number(e)),uw=e=>Up(e,"number",tp),mm=e=>!!e&&Number.isInteger(Number(e)),oO=e=>e.endsWith("%")&&tp(e.slice(0,-1)),Bn=e=>RP.test(e),Ku=e=>tO.test(e),aO=new Set(["length","size","percentage"]),lO=e=>Up(e,aO,NP),AO=e=>Up(e,"position",NP),cO=new Set(["image","url"]),uO=e=>Up(e,cO,pO),hO=e=>Up(e,"",fO),gm=()=>!0,Up=(e,t,r)=>{const i=RP.exec(e);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):r(i[2]):!1},dO=e=>rO.test(e)&&!nO.test(e),NP=()=>!1,fO=e=>iO.test(e),pO=e=>sO.test(e),mO=()=>{const e=Ri("colors"),t=Ri("spacing"),r=Ri("blur"),i=Ri("brightness"),a=Ri("borderColor"),u=Ri("borderRadius"),h=Ri("borderSpacing"),o=Ri("borderWidth"),g=Ri("contrast"),w=Ri("grayscale"),B=Ri("hueRotate"),I=Ri("invert"),P=Ri("gap"),b=Ri("gradientColorStops"),N=Ri("gradientColorStopPositions"),k=Ri("inset"),H=Ri("margin"),U=Ri("opacity"),Q=Ri("padding"),K=Ri("saturate"),Z=Ri("scale"),Ae=Ri("sepia"),fe=Ri("skew"),ge=Ri("space"),me=Ri("translate"),ae=()=>["auto","contain","none"],Le=()=>["auto","hidden","clip","visible","scroll"],re=()=>["auto",Bn,t],he=()=>[Bn,t],Ie=()=>["",ru,Vu],we=()=>["auto",tp,Bn],nt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],rt=()=>["solid","dashed","dotted","double","none"],ct=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>["start","end","center","between","around","evenly","stretch"],Ve=()=>["","0",Bn],mt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],gt=()=>[tp,Bn];return{cacheSize:500,separator:":",theme:{colors:[gm],spacing:[ru,Vu],blur:["none","",Ku,Bn],brightness:gt(),borderColor:[e],borderRadius:["none","","full",Ku,Bn],borderSpacing:he(),borderWidth:Ie(),contrast:gt(),grayscale:Ve(),hueRotate:gt(),invert:Ve(),gap:he(),gradientColorStops:[e],gradientColorStopPositions:[oO,Vu],inset:re(),margin:re(),opacity:gt(),padding:he(),saturate:gt(),scale:gt(),sepia:Ve(),skew:gt(),space:he(),translate:he()},classGroups:{aspect:[{aspect:["auto","square","video",Bn]}],container:["container"],columns:[{columns:[Ku]}],"break-after":[{"break-after":mt()}],"break-before":[{"break-before":mt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...nt(),Bn]}],overflow:[{overflow:Le()}],"overflow-x":[{"overflow-x":Le()}],"overflow-y":[{"overflow-y":Le()}],overscroll:[{overscroll:ae()}],"overscroll-x":[{"overscroll-x":ae()}],"overscroll-y":[{"overscroll-y":ae()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",mm,Bn]}],basis:[{basis:re()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Bn]}],grow:[{grow:Ve()}],shrink:[{shrink:Ve()}],order:[{order:["first","last","none",mm,Bn]}],"grid-cols":[{"grid-cols":[gm]}],"col-start-end":[{col:["auto",{span:["full",mm,Bn]},Bn]}],"col-start":[{"col-start":we()}],"col-end":[{"col-end":we()}],"grid-rows":[{"grid-rows":[gm]}],"row-start-end":[{row:["auto",{span:[mm,Bn]},Bn]}],"row-start":[{"row-start":we()}],"row-end":[{"row-end":we()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Bn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Bn]}],gap:[{gap:[P]}],"gap-x":[{"gap-x":[P]}],"gap-y":[{"gap-y":[P]}],"justify-content":[{justify:["normal",...Pe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Pe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Pe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[Q]}],px:[{px:[Q]}],py:[{py:[Q]}],ps:[{ps:[Q]}],pe:[{pe:[Q]}],pt:[{pt:[Q]}],pr:[{pr:[Q]}],pb:[{pb:[Q]}],pl:[{pl:[Q]}],m:[{m:[H]}],mx:[{mx:[H]}],my:[{my:[H]}],ms:[{ms:[H]}],me:[{me:[H]}],mt:[{mt:[H]}],mr:[{mr:[H]}],mb:[{mb:[H]}],ml:[{ml:[H]}],"space-x":[{"space-x":[ge]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ge]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Bn,t]}],"min-w":[{"min-w":[Bn,t,"min","max","fit"]}],"max-w":[{"max-w":[Bn,t,"none","full","min","max","fit","prose",{screen:[Ku]},Ku]}],h:[{h:[Bn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Bn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Bn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Bn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ku,Vu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",uw]}],"font-family":[{font:[gm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Bn]}],"line-clamp":[{"line-clamp":["none",tp,uw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ru,Bn]}],"list-image":[{"list-image":["none",Bn]}],"list-style-type":[{list:["none","disc","decimal",Bn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[U]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[U]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...rt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ru,Vu]}],"underline-offset":[{"underline-offset":["auto",ru,Bn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:he()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[U]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...nt(),AO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},uO]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[u]}],"rounded-s":[{"rounded-s":[u]}],"rounded-e":[{"rounded-e":[u]}],"rounded-t":[{"rounded-t":[u]}],"rounded-r":[{"rounded-r":[u]}],"rounded-b":[{"rounded-b":[u]}],"rounded-l":[{"rounded-l":[u]}],"rounded-ss":[{"rounded-ss":[u]}],"rounded-se":[{"rounded-se":[u]}],"rounded-ee":[{"rounded-ee":[u]}],"rounded-es":[{"rounded-es":[u]}],"rounded-tl":[{"rounded-tl":[u]}],"rounded-tr":[{"rounded-tr":[u]}],"rounded-br":[{"rounded-br":[u]}],"rounded-bl":[{"rounded-bl":[u]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[U]}],"border-style":[{border:[...rt(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[U]}],"divide-style":[{divide:rt()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...rt()]}],"outline-offset":[{"outline-offset":[ru,Bn]}],"outline-w":[{outline:[ru,Vu]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[U]}],"ring-offset-w":[{"ring-offset":[ru,Vu]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ku,hO]}],"shadow-color":[{shadow:[gm]}],opacity:[{opacity:[U]}],"mix-blend":[{"mix-blend":[...ct(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ct()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",Ku,Bn]}],grayscale:[{grayscale:[w]}],"hue-rotate":[{"hue-rotate":[B]}],invert:[{invert:[I]}],saturate:[{saturate:[K]}],sepia:[{sepia:[Ae]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[w]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[B]}],"backdrop-invert":[{"backdrop-invert":[I]}],"backdrop-opacity":[{"backdrop-opacity":[U]}],"backdrop-saturate":[{"backdrop-saturate":[K]}],"backdrop-sepia":[{"backdrop-sepia":[Ae]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Bn]}],duration:[{duration:gt()}],ease:[{ease:["linear","in","out","in-out",Bn]}],delay:[{delay:gt()}],animate:[{animate:["none","spin","ping","pulse","bounce",Bn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Z]}],"scale-x":[{"scale-x":[Z]}],"scale-y":[{"scale-y":[Z]}],rotate:[{rotate:[mm,Bn]}],"translate-x":[{"translate-x":[me]}],"translate-y":[{"translate-y":[me]}],"skew-x":[{"skew-x":[fe]}],"skew-y":[{"skew-y":[fe]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Bn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":he()}],"scroll-mx":[{"scroll-mx":he()}],"scroll-my":[{"scroll-my":he()}],"scroll-ms":[{"scroll-ms":he()}],"scroll-me":[{"scroll-me":he()}],"scroll-mt":[{"scroll-mt":he()}],"scroll-mr":[{"scroll-mr":he()}],"scroll-mb":[{"scroll-mb":he()}],"scroll-ml":[{"scroll-ml":he()}],"scroll-p":[{"scroll-p":he()}],"scroll-px":[{"scroll-px":he()}],"scroll-py":[{"scroll-py":he()}],"scroll-ps":[{"scroll-ps":he()}],"scroll-pe":[{"scroll-pe":he()}],"scroll-pt":[{"scroll-pt":he()}],"scroll-pr":[{"scroll-pr":he()}],"scroll-pb":[{"scroll-pb":he()}],"scroll-pl":[{"scroll-pl":he()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ru,Vu,uw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},gO=Y8(mO);function jn(...e){return gO(EP(e))}const yO=B8,DP=ee.forwardRef(({className:e,...t},r)=>X.jsx(_P,{ref:r,className:jn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));DP.displayName=_P.displayName;const vO=d1("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),QP=ee.forwardRef(({className:e,variant:t,...r},i)=>X.jsx(wP,{ref:i,className:jn(vO({variant:t}),e),...r}));QP.displayName=wP.displayName;const _O=ee.forwardRef(({className:e,...t},r)=>X.jsx(BP,{ref:r,className:jn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));_O.displayName=BP.displayName;const OP=ee.forwardRef(({className:e,...t},r)=>X.jsx(CP,{ref:r,className:jn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:X.jsx(f1,{className:"h-4 w-4"})}));OP.displayName=CP.displayName;const zP=ee.forwardRef(({className:e,...t},r)=>X.jsx(xP,{ref:r,className:jn("text-sm font-semibold",e),...t}));zP.displayName=xP.displayName;const HP=ee.forwardRef(({className:e,...t},r)=>X.jsx(bP,{ref:r,className:jn("text-sm opacity-90",e),...t}));HP.displayName=bP.displayName;function wO(){const{toasts:e}=kQ();return X.jsxs(yO,{children:[e.map(function({id:t,title:r,description:i,action:a,...u}){return X.jsxs(QP,{...u,children:[X.jsxs("div",{className:"grid gap-1",children:[r&&X.jsx(zP,{children:r}),i&&X.jsx(HP,{children:i})]}),a,X.jsx(OP,{})]},t)}),X.jsx(DP,{})]})}var dE=["light","dark"],xO="(prefers-color-scheme: dark)",bO=ee.createContext(void 0),BO={setTheme:e=>{},themes:[]},CO=()=>{var e;return(e=ee.useContext(bO))!=null?e:BO};ee.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:i,enableColorScheme:a,defaultTheme:u,value:h,attrs:o,nonce:g})=>{let w=u==="system",B=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,I=a?dE.includes(u)&&u?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${u}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",P=(N,k=!1,H=!0)=>{let U=h?h[N]:N,Q=k?N+"|| ''":`'${U}'`,K="";return a&&H&&!k&&dE.includes(N)&&(K+=`d.style.colorScheme = '${N}';`),r==="class"?k||U?K+=`c.add(${Q})`:K+="null":U&&(K+=`d[s](n,${Q})`),K},b=e?`!function(){${B}${P(e)}}()`:i?`!function(){try{${B}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${w})){var t='${xO}',m=window.matchMedia(t);if(m.media!==t||m.matches){${P("dark")}}else{${P("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${P(h?"x[e]":"e",!0)}}${w?"":"else{"+P(u,!1,!1)+"}"}${I}}catch(e){}}()`:`!function(){try{${B}var e=localStorage.getItem('${t}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${P(h?"x[e]":"e",!0)}}else{${P(u,!1,!1)};}${I}}catch(t){}}();`;return ee.createElement("script",{nonce:g,dangerouslySetInnerHTML:{__html:b}})});var SO=e=>{switch(e){case"success":return FO;case"info":return PO;case"warning":return TO;case"error":return LO;default:return null}},EO=Array(12).fill(0),IO=({visible:e,className:t})=>cr.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},cr.createElement("div",{className:"sonner-spinner"},EO.map((r,i)=>cr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),FO=cr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},cr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),TO=cr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},cr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),PO=cr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},cr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),LO=cr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},cr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),MO=cr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},cr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),cr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),kO=()=>{let[e,t]=cr.useState(document.hidden);return cr.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},db=1,UO=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:i,...a}=t,u=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:db++,h=this.toasts.find(g=>g.id===u),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),h?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...t,id:u,title:i}),{...g,...t,id:u,dismissible:o,title:i}):g):this.addToast({title:i,...a,dismissible:o,id:u}),u},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(i=>i({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let i;r.loading!==void 0&&(i=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let a=t instanceof Promise?t:t(),u=i!==void 0,h,o=a.then(async w=>{if(h=["resolve",w],cr.isValidElement(w))u=!1,this.create({id:i,type:"default",message:w});else if(NO(w)&&!w.ok){u=!1;let B=typeof r.error=="function"?await r.error(`HTTP error! status: ${w.status}`):r.error,I=typeof r.description=="function"?await r.description(`HTTP error! status: ${w.status}`):r.description;this.create({id:i,type:"error",message:B,description:I})}else if(r.success!==void 0){u=!1;let B=typeof r.success=="function"?await r.success(w):r.success,I=typeof r.description=="function"?await r.description(w):r.description;this.create({id:i,type:"success",message:B,description:I})}}).catch(async w=>{if(h=["reject",w],r.error!==void 0){u=!1;let B=typeof r.error=="function"?await r.error(w):r.error,I=typeof r.description=="function"?await r.description(w):r.description;this.create({id:i,type:"error",message:B,description:I})}}).finally(()=>{var w;u&&(this.dismiss(i),i=void 0),(w=r.finally)==null||w.call(r)}),g=()=>new Promise((w,B)=>o.then(()=>h[0]==="reject"?B(h[1]):w(h[1])).catch(B));return typeof i!="string"&&typeof i!="number"?{unwrap:g}:Object.assign(i,{unwrap:g})},this.custom=(t,r)=>{let i=(r==null?void 0:r.id)||db++;return this.create({jsx:t(i),id:i,...r}),i},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Pa=new UO,RO=(e,t)=>{let r=(t==null?void 0:t.id)||db++;return Pa.addToast({title:e,...t,id:r}),r},NO=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",DO=RO,QO=()=>Pa.toasts,OO=()=>Pa.getActiveToasts();Object.assign(DO,{success:Pa.success,info:Pa.info,warning:Pa.warning,error:Pa.error,custom:Pa.custom,message:Pa.message,promise:Pa.promise,dismiss:Pa.dismiss,loading:Pa.loading},{getHistory:QO,getToasts:OO});function zO(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}zO(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function P0(e){return e.label!==void 0}var HO=3,jO="32px",VO="16px",fE=4e3,KO=356,GO=14,$O=20,qO=200;function _A(...e){return e.filter(Boolean).join(" ")}function WO(e){let[t,r]=e.split("-"),i=[];return t&&i.push(t),r&&i.push(r),i}var ZO=e=>{var t,r,i,a,u,h,o,g,w,B,I;let{invert:P,toast:b,unstyled:N,interacting:k,setHeights:H,visibleToasts:U,heights:Q,index:K,toasts:Z,expanded:Ae,removeToast:fe,defaultRichColors:ge,closeButton:me,style:ae,cancelButtonStyle:Le,actionButtonStyle:re,className:he="",descriptionClassName:Ie="",duration:we,position:nt,gap:rt,loadingIcon:ct,expandByDefault:Pe,classNames:Ve,icons:mt,closeButtonAriaLabel:gt="Close toast",pauseWhenPageIsHidden:ie}=e,[Ee,Me]=cr.useState(null),[Ye,at]=cr.useState(null),[Ze,Ct]=cr.useState(!1),[dt,Lt]=cr.useState(!1),[kt,$t]=cr.useState(!1),[Gt,Pt]=cr.useState(!1),[Ke,Gr]=cr.useState(!1),[wr,fr]=cr.useState(0),[Vt,xr]=cr.useState(0),ar=cr.useRef(b.duration||we||fE),qr=cr.useRef(null),mr=cr.useRef(null),hn=K===0,Vr=K+1<=U,Sr=b.type,Jr=b.dismissible!==!1,jr=b.className||"",Tr=b.descriptionClassName||"",Nr=cr.useMemo(()=>Q.findIndex(ze=>ze.toastId===b.id)||0,[Q,b.id]),br=cr.useMemo(()=>{var ze;return(ze=b.closeButton)!=null?ze:me},[b.closeButton,me]),ot=cr.useMemo(()=>b.duration||we||fE,[b.duration,we]),le=cr.useRef(0),se=cr.useRef(0),ve=cr.useRef(0),Ue=cr.useRef(null),[Ge,et]=nt.split("-"),At=cr.useMemo(()=>Q.reduce((ze,Nt,or)=>or>=Nr?ze:ze+Nt.height,0),[Q,Nr]),it=kO(),St=b.invert||P,pt=Sr==="loading";se.current=cr.useMemo(()=>Nr*rt+At,[Nr,At]),cr.useEffect(()=>{ar.current=ot},[ot]),cr.useEffect(()=>{Ct(!0)},[]),cr.useEffect(()=>{let ze=mr.current;if(ze){let Nt=ze.getBoundingClientRect().height;return xr(Nt),H(or=>[{toastId:b.id,height:Nt,position:b.position},...or]),()=>H(or=>or.filter(tr=>tr.toastId!==b.id))}},[H,b.id]),cr.useLayoutEffect(()=>{if(!Ze)return;let ze=mr.current,Nt=ze.style.height;ze.style.height="auto";let or=ze.getBoundingClientRect().height;ze.style.height=Nt,xr(or),H(tr=>tr.find(Qt=>Qt.toastId===b.id)?tr.map(Qt=>Qt.toastId===b.id?{...Qt,height:or}:Qt):[{toastId:b.id,height:or,position:b.position},...tr])},[Ze,b.title,b.description,H,b.id]);let Je=cr.useCallback(()=>{Lt(!0),fr(se.current),H(ze=>ze.filter(Nt=>Nt.toastId!==b.id)),setTimeout(()=>{fe(b)},qO)},[b,fe,H,se]);cr.useEffect(()=>{if(b.promise&&Sr==="loading"||b.duration===1/0||b.type==="loading")return;let ze;return Ae||k||ie&&it?(()=>{if(ve.current<le.current){let Nt=new Date().getTime()-le.current;ar.current=ar.current-Nt}ve.current=new Date().getTime()})():ar.current!==1/0&&(le.current=new Date().getTime(),ze=setTimeout(()=>{var Nt;(Nt=b.onAutoClose)==null||Nt.call(b,b),Je()},ar.current)),()=>clearTimeout(ze)},[Ae,k,b,Sr,ie,it,Je]),cr.useEffect(()=>{b.delete&&Je()},[Je,b.delete]);function Et(){var ze,Nt,or;return mt!=null&&mt.loading?cr.createElement("div",{className:_A(Ve==null?void 0:Ve.loader,(ze=b==null?void 0:b.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":Sr==="loading"},mt.loading):ct?cr.createElement("div",{className:_A(Ve==null?void 0:Ve.loader,(Nt=b==null?void 0:b.classNames)==null?void 0:Nt.loader,"sonner-loader"),"data-visible":Sr==="loading"},ct):cr.createElement(IO,{className:_A(Ve==null?void 0:Ve.loader,(or=b==null?void 0:b.classNames)==null?void 0:or.loader),visible:Sr==="loading"})}return cr.createElement("li",{tabIndex:0,ref:mr,className:_A(he,jr,Ve==null?void 0:Ve.toast,(t=b==null?void 0:b.classNames)==null?void 0:t.toast,Ve==null?void 0:Ve.default,Ve==null?void 0:Ve[Sr],(r=b==null?void 0:b.classNames)==null?void 0:r[Sr]),"data-sonner-toast":"","data-rich-colors":(i=b.richColors)!=null?i:ge,"data-styled":!(b.jsx||b.unstyled||N),"data-mounted":Ze,"data-promise":!!b.promise,"data-swiped":Ke,"data-removed":dt,"data-visible":Vr,"data-y-position":Ge,"data-x-position":et,"data-index":K,"data-front":hn,"data-swiping":kt,"data-dismissible":Jr,"data-type":Sr,"data-invert":St,"data-swipe-out":Gt,"data-swipe-direction":Ye,"data-expanded":!!(Ae||Pe&&Ze),style:{"--index":K,"--toasts-before":K,"--z-index":Z.length-K,"--offset":`${dt?wr:se.current}px`,"--initial-height":Pe?"auto":`${Vt}px`,...ae,...b.style},onDragEnd:()=>{$t(!1),Me(null),Ue.current=null},onPointerDown:ze=>{pt||!Jr||(qr.current=new Date,fr(se.current),ze.target.setPointerCapture(ze.pointerId),ze.target.tagName!=="BUTTON"&&($t(!0),Ue.current={x:ze.clientX,y:ze.clientY}))},onPointerUp:()=>{var ze,Nt,or,tr;if(Gt||!Jr)return;Ue.current=null;let Qt=Number(((ze=mr.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),gr=Number(((Nt=mr.current)==null?void 0:Nt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),on=new Date().getTime()-((or=qr.current)==null?void 0:or.getTime()),Qr=Ee==="x"?Qt:gr,Or=Math.abs(Qr)/on;if(Math.abs(Qr)>=$O||Or>.11){fr(se.current),(tr=b.onDismiss)==null||tr.call(b,b),at(Ee==="x"?Qt>0?"right":"left":gr>0?"down":"up"),Je(),Pt(!0),Gr(!1);return}$t(!1),Me(null)},onPointerMove:ze=>{var Nt,or,tr,Qt;if(!Ue.current||!Jr||((Nt=window.getSelection())==null?void 0:Nt.toString().length)>0)return;let gr=ze.clientY-Ue.current.y,on=ze.clientX-Ue.current.x,Qr=(or=e.swipeDirections)!=null?or:WO(nt);!Ee&&(Math.abs(on)>1||Math.abs(gr)>1)&&Me(Math.abs(on)>Math.abs(gr)?"x":"y");let Or={x:0,y:0};Ee==="y"?(Qr.includes("top")||Qr.includes("bottom"))&&(Qr.includes("top")&&gr<0||Qr.includes("bottom")&&gr>0)&&(Or.y=gr):Ee==="x"&&(Qr.includes("left")||Qr.includes("right"))&&(Qr.includes("left")&&on<0||Qr.includes("right")&&on>0)&&(Or.x=on),(Math.abs(Or.x)>0||Math.abs(Or.y)>0)&&Gr(!0),(tr=mr.current)==null||tr.style.setProperty("--swipe-amount-x",`${Or.x}px`),(Qt=mr.current)==null||Qt.style.setProperty("--swipe-amount-y",`${Or.y}px`)}},br&&!b.jsx?cr.createElement("button",{"aria-label":gt,"data-disabled":pt,"data-close-button":!0,onClick:pt||!Jr?()=>{}:()=>{var ze;Je(),(ze=b.onDismiss)==null||ze.call(b,b)},className:_A(Ve==null?void 0:Ve.closeButton,(a=b==null?void 0:b.classNames)==null?void 0:a.closeButton)},(u=mt==null?void 0:mt.close)!=null?u:MO):null,b.jsx||ee.isValidElement(b.title)?b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title:cr.createElement(cr.Fragment,null,Sr||b.icon||b.promise?cr.createElement("div",{"data-icon":"",className:_A(Ve==null?void 0:Ve.icon,(h=b==null?void 0:b.classNames)==null?void 0:h.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||Et():null,b.type!=="loading"?b.icon||(mt==null?void 0:mt[Sr])||SO(Sr):null):null,cr.createElement("div",{"data-content":"",className:_A(Ve==null?void 0:Ve.content,(o=b==null?void 0:b.classNames)==null?void 0:o.content)},cr.createElement("div",{"data-title":"",className:_A(Ve==null?void 0:Ve.title,(g=b==null?void 0:b.classNames)==null?void 0:g.title)},typeof b.title=="function"?b.title():b.title),b.description?cr.createElement("div",{"data-description":"",className:_A(Ie,Tr,Ve==null?void 0:Ve.description,(w=b==null?void 0:b.classNames)==null?void 0:w.description)},typeof b.description=="function"?b.description():b.description):null),ee.isValidElement(b.cancel)?b.cancel:b.cancel&&P0(b.cancel)?cr.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||Le,onClick:ze=>{var Nt,or;P0(b.cancel)&&Jr&&((or=(Nt=b.cancel).onClick)==null||or.call(Nt,ze),Je())},className:_A(Ve==null?void 0:Ve.cancelButton,(B=b==null?void 0:b.classNames)==null?void 0:B.cancelButton)},b.cancel.label):null,ee.isValidElement(b.action)?b.action:b.action&&P0(b.action)?cr.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||re,onClick:ze=>{var Nt,or;P0(b.action)&&((or=(Nt=b.action).onClick)==null||or.call(Nt,ze),!ze.defaultPrevented&&Je())},className:_A(Ve==null?void 0:Ve.actionButton,(I=b==null?void 0:b.classNames)==null?void 0:I.actionButton)},b.action.label):null))};function pE(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function XO(e,t){let r={};return[e,t].forEach((i,a)=>{let u=a===1,h=u?"--mobile-offset":"--offset",o=u?VO:jO;function g(w){["top","right","bottom","left"].forEach(B=>{r[`${h}-${B}`]=typeof w=="number"?`${w}px`:w})}typeof i=="number"||typeof i=="string"?g(i):typeof i=="object"?["top","right","bottom","left"].forEach(w=>{i[w]===void 0?r[`${h}-${w}`]=o:r[`${h}-${w}`]=typeof i[w]=="number"?`${i[w]}px`:i[w]}):g(o)}),r}var YO=ee.forwardRef(function(e,t){let{invert:r,position:i="bottom-right",hotkey:a=["altKey","KeyT"],expand:u,closeButton:h,className:o,offset:g,mobileOffset:w,theme:B="light",richColors:I,duration:P,style:b,visibleToasts:N=HO,toastOptions:k,dir:H=pE(),gap:U=GO,loadingIcon:Q,icons:K,containerAriaLabel:Z="Notifications",pauseWhenPageIsHidden:Ae}=e,[fe,ge]=cr.useState([]),me=cr.useMemo(()=>Array.from(new Set([i].concat(fe.filter(ie=>ie.position).map(ie=>ie.position)))),[fe,i]),[ae,Le]=cr.useState([]),[re,he]=cr.useState(!1),[Ie,we]=cr.useState(!1),[nt,rt]=cr.useState(B!=="system"?B:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ct=cr.useRef(null),Pe=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ve=cr.useRef(null),mt=cr.useRef(!1),gt=cr.useCallback(ie=>{ge(Ee=>{var Me;return(Me=Ee.find(Ye=>Ye.id===ie.id))!=null&&Me.delete||Pa.dismiss(ie.id),Ee.filter(({id:Ye})=>Ye!==ie.id)})},[]);return cr.useEffect(()=>Pa.subscribe(ie=>{if(ie.dismiss){ge(Ee=>Ee.map(Me=>Me.id===ie.id?{...Me,delete:!0}:Me));return}setTimeout(()=>{Y3.flushSync(()=>{ge(Ee=>{let Me=Ee.findIndex(Ye=>Ye.id===ie.id);return Me!==-1?[...Ee.slice(0,Me),{...Ee[Me],...ie},...Ee.slice(Me+1)]:[ie,...Ee]})})})}),[]),cr.useEffect(()=>{if(B!=="system"){rt(B);return}if(B==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?rt("dark"):rt("light")),typeof window>"u")return;let ie=window.matchMedia("(prefers-color-scheme: dark)");try{ie.addEventListener("change",({matches:Ee})=>{rt(Ee?"dark":"light")})}catch{ie.addListener(({matches:Me})=>{try{rt(Me?"dark":"light")}catch(Ye){console.error(Ye)}})}},[B]),cr.useEffect(()=>{fe.length<=1&&he(!1)},[fe]),cr.useEffect(()=>{let ie=Ee=>{var Me,Ye;a.every(at=>Ee[at]||Ee.code===at)&&(he(!0),(Me=ct.current)==null||Me.focus()),Ee.code==="Escape"&&(document.activeElement===ct.current||(Ye=ct.current)!=null&&Ye.contains(document.activeElement))&&he(!1)};return document.addEventListener("keydown",ie),()=>document.removeEventListener("keydown",ie)},[a]),cr.useEffect(()=>{if(ct.current)return()=>{Ve.current&&(Ve.current.focus({preventScroll:!0}),Ve.current=null,mt.current=!1)}},[ct.current]),cr.createElement("section",{ref:t,"aria-label":`${Z} ${Pe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},me.map((ie,Ee)=>{var Me;let[Ye,at]=ie.split("-");return fe.length?cr.createElement("ol",{key:ie,dir:H==="auto"?pE():H,tabIndex:-1,ref:ct,className:o,"data-sonner-toaster":!0,"data-theme":nt,"data-y-position":Ye,"data-lifted":re&&fe.length>1&&!u,"data-x-position":at,style:{"--front-toast-height":`${((Me=ae[0])==null?void 0:Me.height)||0}px`,"--width":`${KO}px`,"--gap":`${U}px`,...b,...XO(g,w)},onBlur:Ze=>{mt.current&&!Ze.currentTarget.contains(Ze.relatedTarget)&&(mt.current=!1,Ve.current&&(Ve.current.focus({preventScroll:!0}),Ve.current=null))},onFocus:Ze=>{Ze.target instanceof HTMLElement&&Ze.target.dataset.dismissible==="false"||mt.current||(mt.current=!0,Ve.current=Ze.relatedTarget)},onMouseEnter:()=>he(!0),onMouseMove:()=>he(!0),onMouseLeave:()=>{Ie||he(!1)},onDragEnd:()=>he(!1),onPointerDown:Ze=>{Ze.target instanceof HTMLElement&&Ze.target.dataset.dismissible==="false"||we(!0)},onPointerUp:()=>we(!1)},fe.filter(Ze=>!Ze.position&&Ee===0||Ze.position===ie).map((Ze,Ct)=>{var dt,Lt;return cr.createElement(ZO,{key:Ze.id,icons:K,index:Ct,toast:Ze,defaultRichColors:I,duration:(dt=k==null?void 0:k.duration)!=null?dt:P,className:k==null?void 0:k.className,descriptionClassName:k==null?void 0:k.descriptionClassName,invert:r,visibleToasts:N,closeButton:(Lt=k==null?void 0:k.closeButton)!=null?Lt:h,interacting:Ie,position:ie,style:k==null?void 0:k.style,unstyled:k==null?void 0:k.unstyled,classNames:k==null?void 0:k.classNames,cancelButtonStyle:k==null?void 0:k.cancelButtonStyle,actionButtonStyle:k==null?void 0:k.actionButtonStyle,removeToast:gt,toasts:fe.filter(kt=>kt.position==Ze.position),heights:ae.filter(kt=>kt.position==Ze.position),setHeights:Le,expandByDefault:u,gap:U,loadingIcon:Q,expanded:re,pauseWhenPageIsHidden:Ae,swipeDirections:e.swipeDirections})})):null}))});const JO=({...e})=>{const{theme:t="system"}=CO();return X.jsx(YO,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var ez=C2[" useId ".trim().toString()]||(()=>{}),tz=0;function p1(e){const[t,r]=ee.useState(ez());return Fo(()=>{r(i=>i??String(tz++))},[e]),t?`radix-${t}`:""}const rz=["top","right","bottom","left"],Ph=Math.min,ul=Math.max,gv=Math.round,L0=Math.floor,bc=e=>({x:e,y:e}),nz={left:"right",right:"left",bottom:"top",top:"bottom"},iz={start:"end",end:"start"};function fb(e,t,r){return ul(e,Ph(t,r))}function _u(e,t){return typeof e=="function"?e(t):e}function wu(e){return e.split("-")[0]}function Rp(e){return e.split("-")[1]}function xB(e){return e==="x"?"y":"x"}function bB(e){return e==="y"?"height":"width"}const sz=new Set(["top","bottom"]);function vc(e){return sz.has(wu(e))?"y":"x"}function BB(e){return xB(vc(e))}function oz(e,t,r){r===void 0&&(r=!1);const i=Rp(e),a=BB(e),u=bB(a);let h=a==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(h=yv(h)),[h,yv(h)]}function az(e){const t=yv(e);return[pb(e),t,pb(t)]}function pb(e){return e.replace(/start|end/g,t=>iz[t])}const mE=["left","right"],gE=["right","left"],lz=["top","bottom"],Az=["bottom","top"];function cz(e,t,r){switch(e){case"top":case"bottom":return r?t?gE:mE:t?mE:gE;case"left":case"right":return t?lz:Az;default:return[]}}function uz(e,t,r,i){const a=Rp(e);let u=cz(wu(e),r==="start",i);return a&&(u=u.map(h=>h+"-"+a),t&&(u=u.concat(u.map(pb)))),u}function yv(e){return e.replace(/left|right|bottom|top/g,t=>nz[t])}function hz(e){return{top:0,right:0,bottom:0,left:0,...e}}function jP(e){return typeof e!="number"?hz(e):{top:e,right:e,bottom:e,left:e}}function vv(e){const{x:t,y:r,width:i,height:a}=e;return{width:i,height:a,top:r,left:t,right:t+i,bottom:r+a,x:t,y:r}}function yE(e,t,r){let{reference:i,floating:a}=e;const u=vc(t),h=BB(t),o=bB(h),g=wu(t),w=u==="y",B=i.x+i.width/2-a.width/2,I=i.y+i.height/2-a.height/2,P=i[o]/2-a[o]/2;let b;switch(g){case"top":b={x:B,y:i.y-a.height};break;case"bottom":b={x:B,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y:I};break;case"left":b={x:i.x-a.width,y:I};break;default:b={x:i.x,y:i.y}}switch(Rp(t)){case"start":b[h]-=P*(r&&w?-1:1);break;case"end":b[h]+=P*(r&&w?-1:1);break}return b}const dz=async(e,t,r)=>{const{placement:i="bottom",strategy:a="absolute",middleware:u=[],platform:h}=r,o=u.filter(Boolean),g=await(h.isRTL==null?void 0:h.isRTL(t));let w=await h.getElementRects({reference:e,floating:t,strategy:a}),{x:B,y:I}=yE(w,i,g),P=i,b={},N=0;for(let k=0;k<o.length;k++){const{name:H,fn:U}=o[k],{x:Q,y:K,data:Z,reset:Ae}=await U({x:B,y:I,initialPlacement:i,placement:P,strategy:a,middlewareData:b,rects:w,platform:h,elements:{reference:e,floating:t}});B=Q??B,I=K??I,b={...b,[H]:{...b[H],...Z}},Ae&&N<=50&&(N++,typeof Ae=="object"&&(Ae.placement&&(P=Ae.placement),Ae.rects&&(w=Ae.rects===!0?await h.getElementRects({reference:e,floating:t,strategy:a}):Ae.rects),{x:B,y:I}=yE(w,P,g)),k=-1)}return{x:B,y:I,placement:P,strategy:a,middlewareData:b}};async function _g(e,t){var r;t===void 0&&(t={});const{x:i,y:a,platform:u,rects:h,elements:o,strategy:g}=e,{boundary:w="clippingAncestors",rootBoundary:B="viewport",elementContext:I="floating",altBoundary:P=!1,padding:b=0}=_u(t,e),N=jP(b),H=o[P?I==="floating"?"reference":"floating":I],U=vv(await u.getClippingRect({element:(r=await(u.isElement==null?void 0:u.isElement(H)))==null||r?H:H.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(o.floating)),boundary:w,rootBoundary:B,strategy:g})),Q=I==="floating"?{x:i,y:a,width:h.floating.width,height:h.floating.height}:h.reference,K=await(u.getOffsetParent==null?void 0:u.getOffsetParent(o.floating)),Z=await(u.isElement==null?void 0:u.isElement(K))?await(u.getScale==null?void 0:u.getScale(K))||{x:1,y:1}:{x:1,y:1},Ae=vv(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:Q,offsetParent:K,strategy:g}):Q);return{top:(U.top-Ae.top+N.top)/Z.y,bottom:(Ae.bottom-U.bottom+N.bottom)/Z.y,left:(U.left-Ae.left+N.left)/Z.x,right:(Ae.right-U.right+N.right)/Z.x}}const fz=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:a,rects:u,platform:h,elements:o,middlewareData:g}=t,{element:w,padding:B=0}=_u(e,t)||{};if(w==null)return{};const I=jP(B),P={x:r,y:i},b=BB(a),N=bB(b),k=await h.getDimensions(w),H=b==="y",U=H?"top":"left",Q=H?"bottom":"right",K=H?"clientHeight":"clientWidth",Z=u.reference[N]+u.reference[b]-P[b]-u.floating[N],Ae=P[b]-u.reference[b],fe=await(h.getOffsetParent==null?void 0:h.getOffsetParent(w));let ge=fe?fe[K]:0;(!ge||!await(h.isElement==null?void 0:h.isElement(fe)))&&(ge=o.floating[K]||u.floating[N]);const me=Z/2-Ae/2,ae=ge/2-k[N]/2-1,Le=Ph(I[U],ae),re=Ph(I[Q],ae),he=Le,Ie=ge-k[N]-re,we=ge/2-k[N]/2+me,nt=fb(he,we,Ie),rt=!g.arrow&&Rp(a)!=null&&we!==nt&&u.reference[N]/2-(we<he?Le:re)-k[N]/2<0,ct=rt?we<he?we-he:we-Ie:0;return{[b]:P[b]+ct,data:{[b]:nt,centerOffset:we-nt-ct,...rt&&{alignmentOffset:ct}},reset:rt}}}),pz=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:a,middlewareData:u,rects:h,initialPlacement:o,platform:g,elements:w}=t,{mainAxis:B=!0,crossAxis:I=!0,fallbackPlacements:P,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:k=!0,...H}=_u(e,t);if((r=u.arrow)!=null&&r.alignmentOffset)return{};const U=wu(a),Q=vc(o),K=wu(o)===o,Z=await(g.isRTL==null?void 0:g.isRTL(w.floating)),Ae=P||(K||!k?[yv(o)]:az(o)),fe=N!=="none";!P&&fe&&Ae.push(...uz(o,k,N,Z));const ge=[o,...Ae],me=await _g(t,H),ae=[];let Le=((i=u.flip)==null?void 0:i.overflows)||[];if(B&&ae.push(me[U]),I){const we=oz(a,h,Z);ae.push(me[we[0]],me[we[1]])}if(Le=[...Le,{placement:a,overflows:ae}],!ae.every(we=>we<=0)){var re,he;const we=(((re=u.flip)==null?void 0:re.index)||0)+1,nt=ge[we];if(nt&&(!(I==="alignment"?Q!==vc(nt):!1)||Le.every(Pe=>Pe.overflows[0]>0&&vc(Pe.placement)===Q)))return{data:{index:we,overflows:Le},reset:{placement:nt}};let rt=(he=Le.filter(ct=>ct.overflows[0]<=0).sort((ct,Pe)=>ct.overflows[1]-Pe.overflows[1])[0])==null?void 0:he.placement;if(!rt)switch(b){case"bestFit":{var Ie;const ct=(Ie=Le.filter(Pe=>{if(fe){const Ve=vc(Pe.placement);return Ve===Q||Ve==="y"}return!0}).map(Pe=>[Pe.placement,Pe.overflows.filter(Ve=>Ve>0).reduce((Ve,mt)=>Ve+mt,0)]).sort((Pe,Ve)=>Pe[1]-Ve[1])[0])==null?void 0:Ie[0];ct&&(rt=ct);break}case"initialPlacement":rt=o;break}if(a!==rt)return{reset:{placement:rt}}}return{}}}};function vE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function _E(e){return rz.some(t=>e[t]>=0)}const mz=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...a}=_u(e,t);switch(i){case"referenceHidden":{const u=await _g(t,{...a,elementContext:"reference"}),h=vE(u,r.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:_E(h)}}}case"escaped":{const u=await _g(t,{...a,altBoundary:!0}),h=vE(u,r.floating);return{data:{escapedOffsets:h,escaped:_E(h)}}}default:return{}}}}},VP=new Set(["left","top"]);async function gz(e,t){const{placement:r,platform:i,elements:a}=e,u=await(i.isRTL==null?void 0:i.isRTL(a.floating)),h=wu(r),o=Rp(r),g=vc(r)==="y",w=VP.has(h)?-1:1,B=u&&g?-1:1,I=_u(t,e);let{mainAxis:P,crossAxis:b,alignmentAxis:N}=typeof I=="number"?{mainAxis:I,crossAxis:0,alignmentAxis:null}:{mainAxis:I.mainAxis||0,crossAxis:I.crossAxis||0,alignmentAxis:I.alignmentAxis};return o&&typeof N=="number"&&(b=o==="end"?N*-1:N),g?{x:b*B,y:P*w}:{x:P*w,y:b*B}}const yz=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:a,y:u,placement:h,middlewareData:o}=t,g=await gz(t,e);return h===((r=o.offset)==null?void 0:r.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:a+g.x,y:u+g.y,data:{...g,placement:h}}}}},vz=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:a}=t,{mainAxis:u=!0,crossAxis:h=!1,limiter:o={fn:H=>{let{x:U,y:Q}=H;return{x:U,y:Q}}},...g}=_u(e,t),w={x:r,y:i},B=await _g(t,g),I=vc(wu(a)),P=xB(I);let b=w[P],N=w[I];if(u){const H=P==="y"?"top":"left",U=P==="y"?"bottom":"right",Q=b+B[H],K=b-B[U];b=fb(Q,b,K)}if(h){const H=I==="y"?"top":"left",U=I==="y"?"bottom":"right",Q=N+B[H],K=N-B[U];N=fb(Q,N,K)}const k=o.fn({...t,[P]:b,[I]:N});return{...k,data:{x:k.x-r,y:k.y-i,enabled:{[P]:u,[I]:h}}}}}},_z=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:a,rects:u,middlewareData:h}=t,{offset:o=0,mainAxis:g=!0,crossAxis:w=!0}=_u(e,t),B={x:r,y:i},I=vc(a),P=xB(I);let b=B[P],N=B[I];const k=_u(o,t),H=typeof k=="number"?{mainAxis:k,crossAxis:0}:{mainAxis:0,crossAxis:0,...k};if(g){const K=P==="y"?"height":"width",Z=u.reference[P]-u.floating[K]+H.mainAxis,Ae=u.reference[P]+u.reference[K]-H.mainAxis;b<Z?b=Z:b>Ae&&(b=Ae)}if(w){var U,Q;const K=P==="y"?"width":"height",Z=VP.has(wu(a)),Ae=u.reference[I]-u.floating[K]+(Z&&((U=h.offset)==null?void 0:U[I])||0)+(Z?0:H.crossAxis),fe=u.reference[I]+u.reference[K]+(Z?0:((Q=h.offset)==null?void 0:Q[I])||0)-(Z?H.crossAxis:0);N<Ae?N=Ae:N>fe&&(N=fe)}return{[P]:b,[I]:N}}}},wz=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,i;const{placement:a,rects:u,platform:h,elements:o}=t,{apply:g=()=>{},...w}=_u(e,t),B=await _g(t,w),I=wu(a),P=Rp(a),b=vc(a)==="y",{width:N,height:k}=u.floating;let H,U;I==="top"||I==="bottom"?(H=I,U=P===(await(h.isRTL==null?void 0:h.isRTL(o.floating))?"start":"end")?"left":"right"):(U=I,H=P==="end"?"top":"bottom");const Q=k-B.top-B.bottom,K=N-B.left-B.right,Z=Ph(k-B[H],Q),Ae=Ph(N-B[U],K),fe=!t.middlewareData.shift;let ge=Z,me=Ae;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(me=K),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(ge=Q),fe&&!P){const Le=ul(B.left,0),re=ul(B.right,0),he=ul(B.top,0),Ie=ul(B.bottom,0);b?me=N-2*(Le!==0||re!==0?Le+re:ul(B.left,B.right)):ge=k-2*(he!==0||Ie!==0?he+Ie:ul(B.top,B.bottom))}await g({...t,availableWidth:me,availableHeight:ge});const ae=await h.getDimensions(o.floating);return N!==ae.width||k!==ae.height?{reset:{rects:!0}}:{}}}};function m1(){return typeof window<"u"}function Np(e){return KP(e)?(e.nodeName||"").toLowerCase():"#document"}function pl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Sc(e){var t;return(t=(KP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function KP(e){return m1()?e instanceof Node||e instanceof pl(e).Node:!1}function kA(e){return m1()?e instanceof Element||e instanceof pl(e).Element:!1}function Cc(e){return m1()?e instanceof HTMLElement||e instanceof pl(e).HTMLElement:!1}function wE(e){return!m1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pl(e).ShadowRoot}const xz=new Set(["inline","contents"]);function zg(e){const{overflow:t,overflowX:r,overflowY:i,display:a}=UA(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!xz.has(a)}const bz=new Set(["table","td","th"]);function Bz(e){return bz.has(Np(e))}const Cz=[":popover-open",":modal"];function g1(e){return Cz.some(t=>{try{return e.matches(t)}catch{return!1}})}const Sz=["transform","translate","scale","rotate","perspective"],Ez=["transform","translate","scale","rotate","perspective","filter"],Iz=["paint","layout","strict","content"];function CB(e){const t=SB(),r=kA(e)?UA(e):e;return Sz.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Ez.some(i=>(r.willChange||"").includes(i))||Iz.some(i=>(r.contain||"").includes(i))}function Fz(e){let t=Lh(e);for(;Cc(t)&&!Ip(t);){if(CB(t))return t;if(g1(t))return null;t=Lh(t)}return null}function SB(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Tz=new Set(["html","body","#document"]);function Ip(e){return Tz.has(Np(e))}function UA(e){return pl(e).getComputedStyle(e)}function y1(e){return kA(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Lh(e){if(Np(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wE(e)&&e.host||Sc(e);return wE(t)?t.host:t}function GP(e){const t=Lh(e);return Ip(t)?e.ownerDocument?e.ownerDocument.body:e.body:Cc(t)&&zg(t)?t:GP(t)}function wg(e,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=GP(e),u=a===((i=e.ownerDocument)==null?void 0:i.body),h=pl(a);if(u){const o=mb(h);return t.concat(h,h.visualViewport||[],zg(a)?a:[],o&&r?wg(o):[])}return t.concat(a,wg(a,[],r))}function mb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $P(e){const t=UA(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const a=Cc(e),u=a?e.offsetWidth:r,h=a?e.offsetHeight:i,o=gv(r)!==u||gv(i)!==h;return o&&(r=u,i=h),{width:r,height:i,$:o}}function EB(e){return kA(e)?e:e.contextElement}function rp(e){const t=EB(e);if(!Cc(t))return bc(1);const r=t.getBoundingClientRect(),{width:i,height:a,$:u}=$P(t);let h=(u?gv(r.width):r.width)/i,o=(u?gv(r.height):r.height)/a;return(!h||!Number.isFinite(h))&&(h=1),(!o||!Number.isFinite(o))&&(o=1),{x:h,y:o}}const Pz=bc(0);function qP(e){const t=pl(e);return!SB()||!t.visualViewport?Pz:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Lz(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==pl(e)?!1:t}function Ud(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),u=EB(e);let h=bc(1);t&&(i?kA(i)&&(h=rp(i)):h=rp(e));const o=Lz(u,r,i)?qP(u):bc(0);let g=(a.left+o.x)/h.x,w=(a.top+o.y)/h.y,B=a.width/h.x,I=a.height/h.y;if(u){const P=pl(u),b=i&&kA(i)?pl(i):i;let N=P,k=mb(N);for(;k&&i&&b!==N;){const H=rp(k),U=k.getBoundingClientRect(),Q=UA(k),K=U.left+(k.clientLeft+parseFloat(Q.paddingLeft))*H.x,Z=U.top+(k.clientTop+parseFloat(Q.paddingTop))*H.y;g*=H.x,w*=H.y,B*=H.x,I*=H.y,g+=K,w+=Z,N=pl(k),k=mb(N)}}return vv({width:B,height:I,x:g,y:w})}function IB(e,t){const r=y1(e).scrollLeft;return t?t.left+r:Ud(Sc(e)).left+r}function WP(e,t,r){r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=i.left+t.scrollLeft-(r?0:IB(e,i)),u=i.top+t.scrollTop;return{x:a,y:u}}function Mz(e){let{elements:t,rect:r,offsetParent:i,strategy:a}=e;const u=a==="fixed",h=Sc(i),o=t?g1(t.floating):!1;if(i===h||o&&u)return r;let g={scrollLeft:0,scrollTop:0},w=bc(1);const B=bc(0),I=Cc(i);if((I||!I&&!u)&&((Np(i)!=="body"||zg(h))&&(g=y1(i)),Cc(i))){const b=Ud(i);w=rp(i),B.x=b.x+i.clientLeft,B.y=b.y+i.clientTop}const P=h&&!I&&!u?WP(h,g,!0):bc(0);return{width:r.width*w.x,height:r.height*w.y,x:r.x*w.x-g.scrollLeft*w.x+B.x+P.x,y:r.y*w.y-g.scrollTop*w.y+B.y+P.y}}function kz(e){return Array.from(e.getClientRects())}function Uz(e){const t=Sc(e),r=y1(e),i=e.ownerDocument.body,a=ul(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),u=ul(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let h=-r.scrollLeft+IB(e);const o=-r.scrollTop;return UA(i).direction==="rtl"&&(h+=ul(t.clientWidth,i.clientWidth)-a),{width:a,height:u,x:h,y:o}}function Rz(e,t){const r=pl(e),i=Sc(e),a=r.visualViewport;let u=i.clientWidth,h=i.clientHeight,o=0,g=0;if(a){u=a.width,h=a.height;const w=SB();(!w||w&&t==="fixed")&&(o=a.offsetLeft,g=a.offsetTop)}return{width:u,height:h,x:o,y:g}}const Nz=new Set(["absolute","fixed"]);function Dz(e,t){const r=Ud(e,!0,t==="fixed"),i=r.top+e.clientTop,a=r.left+e.clientLeft,u=Cc(e)?rp(e):bc(1),h=e.clientWidth*u.x,o=e.clientHeight*u.y,g=a*u.x,w=i*u.y;return{width:h,height:o,x:g,y:w}}function xE(e,t,r){let i;if(t==="viewport")i=Rz(e,r);else if(t==="document")i=Uz(Sc(e));else if(kA(t))i=Dz(t,r);else{const a=qP(e);i={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return vv(i)}function ZP(e,t){const r=Lh(e);return r===t||!kA(r)||Ip(r)?!1:UA(r).position==="fixed"||ZP(r,t)}function Qz(e,t){const r=t.get(e);if(r)return r;let i=wg(e,[],!1).filter(o=>kA(o)&&Np(o)!=="body"),a=null;const u=UA(e).position==="fixed";let h=u?Lh(e):e;for(;kA(h)&&!Ip(h);){const o=UA(h),g=CB(h);!g&&o.position==="fixed"&&(a=null),(u?!g&&!a:!g&&o.position==="static"&&!!a&&Nz.has(a.position)||zg(h)&&!g&&ZP(e,h))?i=i.filter(B=>B!==h):a=o,h=Lh(h)}return t.set(e,i),i}function Oz(e){let{element:t,boundary:r,rootBoundary:i,strategy:a}=e;const h=[...r==="clippingAncestors"?g1(t)?[]:Qz(t,this._c):[].concat(r),i],o=h[0],g=h.reduce((w,B)=>{const I=xE(t,B,a);return w.top=ul(I.top,w.top),w.right=Ph(I.right,w.right),w.bottom=Ph(I.bottom,w.bottom),w.left=ul(I.left,w.left),w},xE(t,o,a));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function zz(e){const{width:t,height:r}=$P(e);return{width:t,height:r}}function Hz(e,t,r){const i=Cc(t),a=Sc(t),u=r==="fixed",h=Ud(e,!0,u,t);let o={scrollLeft:0,scrollTop:0};const g=bc(0);function w(){g.x=IB(a)}if(i||!i&&!u)if((Np(t)!=="body"||zg(a))&&(o=y1(t)),i){const b=Ud(t,!0,u,t);g.x=b.x+t.clientLeft,g.y=b.y+t.clientTop}else a&&w();u&&!i&&a&&w();const B=a&&!i&&!u?WP(a,o):bc(0),I=h.left+o.scrollLeft-g.x-B.x,P=h.top+o.scrollTop-g.y-B.y;return{x:I,y:P,width:h.width,height:h.height}}function hw(e){return UA(e).position==="static"}function bE(e,t){if(!Cc(e)||UA(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Sc(e)===r&&(r=r.ownerDocument.body),r}function XP(e,t){const r=pl(e);if(g1(e))return r;if(!Cc(e)){let a=Lh(e);for(;a&&!Ip(a);){if(kA(a)&&!hw(a))return a;a=Lh(a)}return r}let i=bE(e,t);for(;i&&Bz(i)&&hw(i);)i=bE(i,t);return i&&Ip(i)&&hw(i)&&!CB(i)?r:i||Fz(e)||r}const jz=async function(e){const t=this.getOffsetParent||XP,r=this.getDimensions,i=await r(e.floating);return{reference:Hz(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Vz(e){return UA(e).direction==="rtl"}const Kz={convertOffsetParentRelativeRectToViewportRelativeRect:Mz,getDocumentElement:Sc,getClippingRect:Oz,getOffsetParent:XP,getElementRects:jz,getClientRects:kz,getDimensions:zz,getScale:rp,isElement:kA,isRTL:Vz};function YP(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Gz(e,t){let r=null,i;const a=Sc(e);function u(){var o;clearTimeout(i),(o=r)==null||o.disconnect(),r=null}function h(o,g){o===void 0&&(o=!1),g===void 0&&(g=1),u();const w=e.getBoundingClientRect(),{left:B,top:I,width:P,height:b}=w;if(o||t(),!P||!b)return;const N=L0(I),k=L0(a.clientWidth-(B+P)),H=L0(a.clientHeight-(I+b)),U=L0(B),K={rootMargin:-N+"px "+-k+"px "+-H+"px "+-U+"px",threshold:ul(0,Ph(1,g))||1};let Z=!0;function Ae(fe){const ge=fe[0].intersectionRatio;if(ge!==g){if(!Z)return h();ge?h(!1,ge):i=setTimeout(()=>{h(!1,1e-7)},1e3)}ge===1&&!YP(w,e.getBoundingClientRect())&&h(),Z=!1}try{r=new IntersectionObserver(Ae,{...K,root:a.ownerDocument})}catch{r=new IntersectionObserver(Ae,K)}r.observe(e)}return h(!0),u}function $z(e,t,r,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:g=!1}=i,w=EB(e),B=a||u?[...w?wg(w):[],...wg(t)]:[];B.forEach(U=>{a&&U.addEventListener("scroll",r,{passive:!0}),u&&U.addEventListener("resize",r)});const I=w&&o?Gz(w,r):null;let P=-1,b=null;h&&(b=new ResizeObserver(U=>{let[Q]=U;Q&&Q.target===w&&b&&(b.unobserve(t),cancelAnimationFrame(P),P=requestAnimationFrame(()=>{var K;(K=b)==null||K.observe(t)})),r()}),w&&!g&&b.observe(w),b.observe(t));let N,k=g?Ud(e):null;g&&H();function H(){const U=Ud(e);k&&!YP(k,U)&&r(),k=U,N=requestAnimationFrame(H)}return r(),()=>{var U;B.forEach(Q=>{a&&Q.removeEventListener("scroll",r),u&&Q.removeEventListener("resize",r)}),I==null||I(),(U=b)==null||U.disconnect(),b=null,g&&cancelAnimationFrame(N)}}const qz=yz,Wz=vz,Zz=pz,Xz=wz,Yz=mz,BE=fz,Jz=_z,eH=(e,t,r)=>{const i=new Map,a={platform:Kz,...r},u={...a.platform,_c:i};return dz(e,t,{...a,platform:u})};var tH=typeof document<"u",rH=function(){},My=tH?ee.useLayoutEffect:rH;function _v(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,i,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(i=r;i--!==0;)if(!_v(e[i],t[i]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){const u=a[i];if(!(u==="_owner"&&e.$$typeof)&&!_v(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function JP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function CE(e,t){const r=JP(e);return Math.round(t*r)/r}function dw(e){const t=ee.useRef(e);return My(()=>{t.current=e}),t}function nH(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:a,elements:{reference:u,floating:h}={},transform:o=!0,whileElementsMounted:g,open:w}=e,[B,I]=ee.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[P,b]=ee.useState(i);_v(P,i)||b(i);const[N,k]=ee.useState(null),[H,U]=ee.useState(null),Q=ee.useCallback(Pe=>{Pe!==fe.current&&(fe.current=Pe,k(Pe))},[]),K=ee.useCallback(Pe=>{Pe!==ge.current&&(ge.current=Pe,U(Pe))},[]),Z=u||N,Ae=h||H,fe=ee.useRef(null),ge=ee.useRef(null),me=ee.useRef(B),ae=g!=null,Le=dw(g),re=dw(a),he=dw(w),Ie=ee.useCallback(()=>{if(!fe.current||!ge.current)return;const Pe={placement:t,strategy:r,middleware:P};re.current&&(Pe.platform=re.current),eH(fe.current,ge.current,Pe).then(Ve=>{const mt={...Ve,isPositioned:he.current!==!1};we.current&&!_v(me.current,mt)&&(me.current=mt,Hd.flushSync(()=>{I(mt)}))})},[P,t,r,re,he]);My(()=>{w===!1&&me.current.isPositioned&&(me.current.isPositioned=!1,I(Pe=>({...Pe,isPositioned:!1})))},[w]);const we=ee.useRef(!1);My(()=>(we.current=!0,()=>{we.current=!1}),[]),My(()=>{if(Z&&(fe.current=Z),Ae&&(ge.current=Ae),Z&&Ae){if(Le.current)return Le.current(Z,Ae,Ie);Ie()}},[Z,Ae,Ie,Le,ae]);const nt=ee.useMemo(()=>({reference:fe,floating:ge,setReference:Q,setFloating:K}),[Q,K]),rt=ee.useMemo(()=>({reference:Z,floating:Ae}),[Z,Ae]),ct=ee.useMemo(()=>{const Pe={position:r,left:0,top:0};if(!rt.floating)return Pe;const Ve=CE(rt.floating,B.x),mt=CE(rt.floating,B.y);return o?{...Pe,transform:"translate("+Ve+"px, "+mt+"px)",...JP(rt.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Ve,top:mt}},[r,o,rt.floating,B.x,B.y]);return ee.useMemo(()=>({...B,update:Ie,refs:nt,elements:rt,floatingStyles:ct}),[B,Ie,nt,rt,ct])}const iH=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:i,padding:a}=typeof e=="function"?e(r):e;return i&&t(i)?i.current!=null?BE({element:i.current,padding:a}).fn(r):{}:i?BE({element:i,padding:a}).fn(r):{}}}},sH=(e,t)=>({...qz(e),options:[e,t]}),oH=(e,t)=>({...Wz(e),options:[e,t]}),aH=(e,t)=>({...Jz(e),options:[e,t]}),lH=(e,t)=>({...Zz(e),options:[e,t]}),AH=(e,t)=>({...Xz(e),options:[e,t]}),cH=(e,t)=>({...Yz(e),options:[e,t]}),uH=(e,t)=>({...iH(e),options:[e,t]});var hH="Arrow",eL=ee.forwardRef((e,t)=>{const{children:r,width:i=10,height:a=5,...u}=e;return X.jsx(In.svg,{...u,ref:t,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:X.jsx("polygon",{points:"0,0 30,0 15,10"})})});eL.displayName=hH;var dH=eL;function FB(e){const[t,r]=ee.useState(void 0);return Fo(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const u=a[0];let h,o;if("borderBoxSize"in u){const g=u.borderBoxSize,w=Array.isArray(g)?g[0]:g;h=w.inlineSize,o=w.blockSize}else h=e.offsetWidth,o=e.offsetHeight;r({width:h,height:o})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else r(void 0)},[e]),t}var TB="Popper",[tL,v1]=Bu(TB),[fH,rL]=tL(TB),nL=e=>{const{__scopePopper:t,children:r}=e,[i,a]=ee.useState(null);return X.jsx(fH,{scope:t,anchor:i,onAnchorChange:a,children:r})};nL.displayName=TB;var iL="PopperAnchor",sL=ee.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:i,...a}=e,u=rL(iL,r),h=ee.useRef(null),o=fi(t,h);return ee.useEffect(()=>{u.onAnchorChange((i==null?void 0:i.current)||h.current)}),i?null:X.jsx(In.div,{...a,ref:o})});sL.displayName=iL;var PB="PopperContent",[pH,mH]=tL(PB),oL=ee.forwardRef((e,t)=>{var Ze,Ct,dt,Lt,kt,$t;const{__scopePopper:r,side:i="bottom",sideOffset:a=0,align:u="center",alignOffset:h=0,arrowPadding:o=0,avoidCollisions:g=!0,collisionBoundary:w=[],collisionPadding:B=0,sticky:I="partial",hideWhenDetached:P=!1,updatePositionStrategy:b="optimized",onPlaced:N,...k}=e,H=rL(PB,r),[U,Q]=ee.useState(null),K=fi(t,Gt=>Q(Gt)),[Z,Ae]=ee.useState(null),fe=FB(Z),ge=(fe==null?void 0:fe.width)??0,me=(fe==null?void 0:fe.height)??0,ae=i+(u!=="center"?"-"+u:""),Le=typeof B=="number"?B:{top:0,right:0,bottom:0,left:0,...B},re=Array.isArray(w)?w:[w],he=re.length>0,Ie={padding:Le,boundary:re.filter(yH),altBoundary:he},{refs:we,floatingStyles:nt,placement:rt,isPositioned:ct,middlewareData:Pe}=nH({strategy:"fixed",placement:ae,whileElementsMounted:(...Gt)=>$z(...Gt,{animationFrame:b==="always"}),elements:{reference:H.anchor},middleware:[sH({mainAxis:a+me,alignmentAxis:h}),g&&oH({mainAxis:!0,crossAxis:!1,limiter:I==="partial"?aH():void 0,...Ie}),g&&lH({...Ie}),AH({...Ie,apply:({elements:Gt,rects:Pt,availableWidth:Ke,availableHeight:Gr})=>{const{width:wr,height:fr}=Pt.reference,Vt=Gt.floating.style;Vt.setProperty("--radix-popper-available-width",`${Ke}px`),Vt.setProperty("--radix-popper-available-height",`${Gr}px`),Vt.setProperty("--radix-popper-anchor-width",`${wr}px`),Vt.setProperty("--radix-popper-anchor-height",`${fr}px`)}}),Z&&uH({element:Z,padding:o}),vH({arrowWidth:ge,arrowHeight:me}),P&&cH({strategy:"referenceHidden",...Ie})]}),[Ve,mt]=AL(rt),gt=Wl(N);Fo(()=>{ct&&(gt==null||gt())},[ct,gt]);const ie=(Ze=Pe.arrow)==null?void 0:Ze.x,Ee=(Ct=Pe.arrow)==null?void 0:Ct.y,Me=((dt=Pe.arrow)==null?void 0:dt.centerOffset)!==0,[Ye,at]=ee.useState();return Fo(()=>{U&&at(window.getComputedStyle(U).zIndex)},[U]),X.jsx("div",{ref:we.setFloating,"data-radix-popper-content-wrapper":"",style:{...nt,transform:ct?nt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ye,"--radix-popper-transform-origin":[(Lt=Pe.transformOrigin)==null?void 0:Lt.x,(kt=Pe.transformOrigin)==null?void 0:kt.y].join(" "),...(($t=Pe.hide)==null?void 0:$t.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:X.jsx(pH,{scope:r,placedSide:Ve,onArrowChange:Ae,arrowX:ie,arrowY:Ee,shouldHideArrow:Me,children:X.jsx(In.div,{"data-side":Ve,"data-align":mt,...k,ref:K,style:{...k.style,animation:ct?void 0:"none"}})})})});oL.displayName=PB;var aL="PopperArrow",gH={top:"bottom",right:"left",bottom:"top",left:"right"},lL=ee.forwardRef(function(t,r){const{__scopePopper:i,...a}=t,u=mH(aL,i),h=gH[u.placedSide];return X.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:X.jsx(dH,{...a,ref:r,style:{...a.style,display:"block"}})})});lL.displayName=aL;function yH(e){return e!==null}var vH=e=>({name:"transformOrigin",options:e,fn(t){var H,U,Q;const{placement:r,rects:i,middlewareData:a}=t,h=((H=a.arrow)==null?void 0:H.centerOffset)!==0,o=h?0:e.arrowWidth,g=h?0:e.arrowHeight,[w,B]=AL(r),I={start:"0%",center:"50%",end:"100%"}[B],P=(((U=a.arrow)==null?void 0:U.x)??0)+o/2,b=(((Q=a.arrow)==null?void 0:Q.y)??0)+g/2;let N="",k="";return w==="bottom"?(N=h?I:`${P}px`,k=`${-g}px`):w==="top"?(N=h?I:`${P}px`,k=`${i.floating.height+g}px`):w==="right"?(N=`${-g}px`,k=h?I:`${b}px`):w==="left"&&(N=`${i.floating.width+g}px`,k=h?I:`${b}px`),{data:{x:N,y:k}}}});function AL(e){const[t,r="center"]=e.split("-");return[t,r]}var _H=nL,cL=sL,uL=oL,hL=lL,[_1,ZJ]=Bu("Tooltip",[v1]),LB=v1(),dL="TooltipProvider",wH=700,SE="tooltip.open",[xH,fL]=_1(dL),pL=e=>{const{__scopeTooltip:t,delayDuration:r=wH,skipDelayDuration:i=300,disableHoverableContent:a=!1,children:u}=e,h=ee.useRef(!0),o=ee.useRef(!1),g=ee.useRef(0);return ee.useEffect(()=>{const w=g.current;return()=>window.clearTimeout(w)},[]),X.jsx(xH,{scope:t,isOpenDelayedRef:h,delayDuration:r,onOpen:ee.useCallback(()=>{window.clearTimeout(g.current),h.current=!1},[]),onClose:ee.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>h.current=!0,i)},[i]),isPointerInTransitRef:o,onPointerInTransitChange:ee.useCallback(w=>{o.current=w},[]),disableHoverableContent:a,children:u})};pL.displayName=dL;var mL="Tooltip",[XJ,w1]=_1(mL),gb="TooltipTrigger",bH=ee.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,a=w1(gb,r),u=fL(gb,r),h=LB(r),o=ee.useRef(null),g=fi(t,o,a.onTriggerChange),w=ee.useRef(!1),B=ee.useRef(!1),I=ee.useCallback(()=>w.current=!1,[]);return ee.useEffect(()=>()=>document.removeEventListener("pointerup",I),[I]),X.jsx(cL,{asChild:!0,...h,children:X.jsx(In.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...i,ref:g,onPointerMove:cn(e.onPointerMove,P=>{P.pointerType!=="touch"&&!B.current&&!u.isPointerInTransitRef.current&&(a.onTriggerEnter(),B.current=!0)}),onPointerLeave:cn(e.onPointerLeave,()=>{a.onTriggerLeave(),B.current=!1}),onPointerDown:cn(e.onPointerDown,()=>{a.open&&a.onClose(),w.current=!0,document.addEventListener("pointerup",I,{once:!0})}),onFocus:cn(e.onFocus,()=>{w.current||a.onOpen()}),onBlur:cn(e.onBlur,a.onClose),onClick:cn(e.onClick,a.onClose)})})});bH.displayName=gb;var BH="TooltipPortal",[YJ,CH]=_1(BH,{forceMount:void 0}),Fp="TooltipContent",gL=ee.forwardRef((e,t)=>{const r=CH(Fp,e.__scopeTooltip),{forceMount:i=r.forceMount,side:a="top",...u}=e,h=w1(Fp,e.__scopeTooltip);return X.jsx(Qg,{present:i||h.open,children:h.disableHoverableContent?X.jsx(yL,{side:a,...u,ref:t}):X.jsx(SH,{side:a,...u,ref:t})})}),SH=ee.forwardRef((e,t)=>{const r=w1(Fp,e.__scopeTooltip),i=fL(Fp,e.__scopeTooltip),a=ee.useRef(null),u=fi(t,a),[h,o]=ee.useState(null),{trigger:g,onClose:w}=r,B=a.current,{onPointerInTransitChange:I}=i,P=ee.useCallback(()=>{o(null),I(!1)},[I]),b=ee.useCallback((N,k)=>{const H=N.currentTarget,U={x:N.clientX,y:N.clientY},Q=PH(U,H.getBoundingClientRect()),K=LH(U,Q),Z=MH(k.getBoundingClientRect()),Ae=UH([...K,...Z]);o(Ae),I(!0)},[I]);return ee.useEffect(()=>()=>P(),[P]),ee.useEffect(()=>{if(g&&B){const N=H=>b(H,B),k=H=>b(H,g);return g.addEventListener("pointerleave",N),B.addEventListener("pointerleave",k),()=>{g.removeEventListener("pointerleave",N),B.removeEventListener("pointerleave",k)}}},[g,B,b,P]),ee.useEffect(()=>{if(h){const N=k=>{const H=k.target,U={x:k.clientX,y:k.clientY},Q=(g==null?void 0:g.contains(H))||(B==null?void 0:B.contains(H)),K=!kH(U,h);Q?P():K&&(P(),w())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[g,B,h,w,P]),X.jsx(yL,{...e,ref:u})}),[EH,IH]=_1(mL,{isInside:!1}),FH=DQ("TooltipContent"),yL=ee.forwardRef((e,t)=>{const{__scopeTooltip:r,children:i,"aria-label":a,onEscapeKeyDown:u,onPointerDownOutside:h,...o}=e,g=w1(Fp,r),w=LB(r),{onClose:B}=g;return ee.useEffect(()=>(document.addEventListener(SE,B),()=>document.removeEventListener(SE,B)),[B]),ee.useEffect(()=>{if(g.trigger){const I=P=>{const b=P.target;b!=null&&b.contains(g.trigger)&&B()};return window.addEventListener("scroll",I,{capture:!0}),()=>window.removeEventListener("scroll",I,{capture:!0})}},[g.trigger,B]),X.jsx(c1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:I=>I.preventDefault(),onDismiss:B,children:X.jsxs(uL,{"data-state":g.stateAttribute,...w,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[X.jsx(FH,{children:i}),X.jsx(EH,{scope:r,isInside:!0,children:X.jsx(o8,{id:g.contentId,role:"tooltip",children:a||i})})]})})});gL.displayName=Fp;var vL="TooltipArrow",TH=ee.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,a=LB(r);return IH(vL,r).isInside?null:X.jsx(hL,{...a,...i,ref:t})});TH.displayName=vL;function PH(e,t){const r=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),u=Math.abs(t.left-e.x);switch(Math.min(r,i,a,u)){case u:return"left";case a:return"right";case r:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function LH(e,t,r=5){const i=[];switch(t){case"top":i.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":i.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":i.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":i.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return i}function MH(e){const{top:t,right:r,bottom:i,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:i},{x:a,y:i}]}function kH(e,t){const{x:r,y:i}=e;let a=!1;for(let u=0,h=t.length-1;u<t.length;h=u++){const o=t[u],g=t[h],w=o.x,B=o.y,I=g.x,P=g.y;B>i!=P>i&&r<(I-w)*(i-B)/(P-B)+w&&(a=!a)}return a}function UH(e){const t=e.slice();return t.sort((r,i)=>r.x<i.x?-1:r.x>i.x?1:r.y<i.y?-1:r.y>i.y?1:0),RH(t)}function RH(e){if(e.length<=1)return e.slice();const t=[];for(let i=0;i<e.length;i++){const a=e[i];for(;t.length>=2;){const u=t[t.length-1],h=t[t.length-2];if((u.x-h.x)*(a.y-h.y)>=(u.y-h.y)*(a.x-h.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let i=e.length-1;i>=0;i--){const a=e[i];for(;r.length>=2;){const u=r[r.length-1],h=r[r.length-2];if((u.x-h.x)*(a.y-h.y)>=(u.y-h.y)*(a.x-h.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var NH=pL,_L=gL;const DH=NH,QH=ee.forwardRef(({className:e,sideOffset:t=4,...r},i)=>X.jsx(_L,{ref:i,sideOffset:t,className:jn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));QH.displayName=_L.displayName;var x1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},b1=typeof window>"u"||"Deno"in globalThis;function CA(){}function OH(e,t){return typeof e=="function"?e(t):e}function zH(e){return typeof e=="number"&&e>=0&&e!==1/0}function HH(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yb(e,t){return typeof e=="function"?e(t):e}function jH(e,t){return typeof e=="function"?e(t):e}function EE(e,t){const{type:r="all",exact:i,fetchStatus:a,predicate:u,queryKey:h,stale:o}=e;if(h){if(i){if(t.queryHash!==MB(h,t.options))return!1}else if(!bg(t.queryKey,h))return!1}if(r!=="all"){const g=t.isActive();if(r==="active"&&!g||r==="inactive"&&g)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||u&&!u(t))}function IE(e,t){const{exact:r,status:i,predicate:a,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(xg(t.options.mutationKey)!==xg(u))return!1}else if(!bg(t.options.mutationKey,u))return!1}return!(i&&t.state.status!==i||a&&!a(t))}function MB(e,t){return((t==null?void 0:t.queryKeyHashFn)||xg)(e)}function xg(e){return JSON.stringify(e,(t,r)=>vb(r)?Object.keys(r).sort().reduce((i,a)=>(i[a]=r[a],i),{}):r)}function bg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>bg(e[r],t[r])):!1}function wL(e,t){if(e===t)return e;const r=FE(e)&&FE(t);if(r||vb(e)&&vb(t)){const i=r?e:Object.keys(e),a=i.length,u=r?t:Object.keys(t),h=u.length,o=r?[]:{},g=new Set(i);let w=0;for(let B=0;B<h;B++){const I=r?B:u[B];(!r&&g.has(I)||r)&&e[I]===void 0&&t[I]===void 0?(o[I]=void 0,w++):(o[I]=wL(e[I],t[I]),o[I]===e[I]&&e[I]!==void 0&&w++)}return a===h&&w===a?e:o}return t}function FE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function vb(e){if(!TE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!TE(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function TE(e){return Object.prototype.toString.call(e)==="[object Object]"}function VH(e){return new Promise(t=>{setTimeout(t,e)})}function KH(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?wL(e,t):t}function GH(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function $H(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var kB=Symbol();function xL(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===kB?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var yd,ih,hp,LF,qH=(LF=class extends x1{constructor(){super();Xn(this,yd);Xn(this,ih);Xn(this,hp);gn(this,hp,t=>{if(!b1&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Kt(this,ih)||this.setEventListener(Kt(this,hp))}onUnsubscribe(){var t;this.hasListeners()||((t=Kt(this,ih))==null||t.call(this),gn(this,ih,void 0))}setEventListener(t){var r;gn(this,hp,t),(r=Kt(this,ih))==null||r.call(this),gn(this,ih,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){Kt(this,yd)!==t&&(gn(this,yd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Kt(this,yd)=="boolean"?Kt(this,yd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},yd=new WeakMap,ih=new WeakMap,hp=new WeakMap,LF),bL=new qH,dp,sh,fp,MF,WH=(MF=class extends x1{constructor(){super();Xn(this,dp,!0);Xn(this,sh);Xn(this,fp);gn(this,fp,t=>{if(!b1&&window.addEventListener){const r=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){Kt(this,sh)||this.setEventListener(Kt(this,fp))}onUnsubscribe(){var t;this.hasListeners()||((t=Kt(this,sh))==null||t.call(this),gn(this,sh,void 0))}setEventListener(t){var r;gn(this,fp,t),(r=Kt(this,sh))==null||r.call(this),gn(this,sh,t(this.setOnline.bind(this)))}setOnline(t){Kt(this,dp)!==t&&(gn(this,dp,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return Kt(this,dp)}},dp=new WeakMap,sh=new WeakMap,fp=new WeakMap,MF),wv=new WH;function ZH(){let e,t;const r=new Promise((a,u)=>{e=a,t=u});r.status="pending",r.catch(()=>{});function i(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{i({status:"fulfilled",value:a}),e(a)},r.reject=a=>{i({status:"rejected",reason:a}),t(a)},r}function XH(e){return Math.min(1e3*2**e,3e4)}function BL(e){return(e??"online")==="online"?wv.isOnline():!0}var CL=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function fw(e){return e instanceof CL}function SL(e){let t=!1,r=0,i=!1,a;const u=ZH(),h=k=>{var H;i||(P(new CL(k)),(H=e.abort)==null||H.call(e))},o=()=>{t=!0},g=()=>{t=!1},w=()=>bL.isFocused()&&(e.networkMode==="always"||wv.isOnline())&&e.canRun(),B=()=>BL(e.networkMode)&&e.canRun(),I=k=>{var H;i||(i=!0,(H=e.onSuccess)==null||H.call(e,k),a==null||a(),u.resolve(k))},P=k=>{var H;i||(i=!0,(H=e.onError)==null||H.call(e,k),a==null||a(),u.reject(k))},b=()=>new Promise(k=>{var H;a=U=>{(i||w())&&k(U)},(H=e.onPause)==null||H.call(e)}).then(()=>{var k;a=void 0,i||(k=e.onContinue)==null||k.call(e)}),N=()=>{if(i)return;let k;const H=r===0?e.initialPromise:void 0;try{k=H??e.fn()}catch(U){k=Promise.reject(U)}Promise.resolve(k).then(I).catch(U=>{var fe;if(i)return;const Q=e.retry??(b1?0:3),K=e.retryDelay??XH,Z=typeof K=="function"?K(r,U):K,Ae=Q===!0||typeof Q=="number"&&r<Q||typeof Q=="function"&&Q(r,U);if(t||!Ae){P(U);return}r++,(fe=e.onFail)==null||fe.call(e,r,U),VH(Z).then(()=>w()?void 0:b()).then(()=>{t?P(U):N()})})};return{promise:u,cancel:h,continue:()=>(a==null||a(),u),cancelRetry:o,continueRetry:g,canStart:B,start:()=>(B()?N():b().then(N),u)}}var YH=e=>setTimeout(e,0);function JH(){let e=[],t=0,r=o=>{o()},i=o=>{o()},a=YH;const u=o=>{t?e.push(o):a(()=>{r(o)})},h=()=>{const o=e;e=[],o.length&&a(()=>{i(()=>{o.forEach(g=>{r(g)})})})};return{batch:o=>{let g;t++;try{g=o()}finally{t--,t||h()}return g},batchCalls:o=>(...g)=>{u(()=>{o(...g)})},schedule:u,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{i=o},setScheduler:o=>{a=o}}}var ya=JH(),vd,kF,EL=(kF=class{constructor(){Xn(this,vd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zH(this.gcTime)&&gn(this,vd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(b1?1/0:5*60*1e3))}clearGcTimeout(){Kt(this,vd)&&(clearTimeout(Kt(this,vd)),gn(this,vd,void 0))}},vd=new WeakMap,kF),pp,_d,Ql,wd,Zo,Lg,xd,SA,au,UF,e7=(UF=class extends EL{constructor(t){super();Xn(this,SA);Xn(this,pp);Xn(this,_d);Xn(this,Ql);Xn(this,wd);Xn(this,Zo);Xn(this,Lg);Xn(this,xd);gn(this,xd,!1),gn(this,Lg,t.defaultOptions),this.setOptions(t.options),this.observers=[],gn(this,wd,t.client),gn(this,Ql,Kt(this,wd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,gn(this,pp,r7(this.options)),this.state=t.state??Kt(this,pp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Kt(this,Zo))==null?void 0:t.promise}setOptions(t){this.options={...Kt(this,Lg),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Kt(this,Ql).remove(this)}setData(t,r){const i=KH(this.state.data,t,this.options);return jo(this,SA,au).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){jo(this,SA,au).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,a;const r=(i=Kt(this,Zo))==null?void 0:i.promise;return(a=Kt(this,Zo))==null||a.cancel(t),r?r.then(CA).catch(CA):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Kt(this,pp))}isActive(){return this.observers.some(t=>jH(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kB||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yb(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!HH(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Kt(this,Zo))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Kt(this,Zo))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Kt(this,Ql).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Kt(this,Zo)&&(Kt(this,xd)?Kt(this,Zo).cancel({revert:!0}):Kt(this,Zo).cancelRetry()),this.scheduleGc()),Kt(this,Ql).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||jo(this,SA,au).call(this,{type:"invalidate"})}fetch(t,r){var w,B,I;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Kt(this,Zo))return Kt(this,Zo).continueRetry(),Kt(this,Zo).promise}if(t&&this.setOptions(t),!this.options.queryFn){const P=this.observers.find(b=>b.options.queryFn);P&&this.setOptions(P.options)}const i=new AbortController,a=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(gn(this,xd,!0),i.signal)})},u=()=>{const P=xL(this.options,r),N=(()=>{const k={client:Kt(this,wd),queryKey:this.queryKey,meta:this.meta};return a(k),k})();return gn(this,xd,!1),this.options.persister?this.options.persister(P,N,this):P(N)},o=(()=>{const P={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Kt(this,wd),state:this.state,fetchFn:u};return a(P),P})();(w=this.options.behavior)==null||w.onFetch(o,this),gn(this,_d,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((B=o.fetchOptions)==null?void 0:B.meta))&&jo(this,SA,au).call(this,{type:"fetch",meta:(I=o.fetchOptions)==null?void 0:I.meta});const g=P=>{var b,N,k,H;fw(P)&&P.silent||jo(this,SA,au).call(this,{type:"error",error:P}),fw(P)||((N=(b=Kt(this,Ql).config).onError)==null||N.call(b,P,this),(H=(k=Kt(this,Ql).config).onSettled)==null||H.call(k,this.state.data,P,this)),this.scheduleGc()};return gn(this,Zo,SL({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:i.abort.bind(i),onSuccess:P=>{var b,N,k,H;if(P===void 0){g(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(P)}catch(U){g(U);return}(N=(b=Kt(this,Ql).config).onSuccess)==null||N.call(b,P,this),(H=(k=Kt(this,Ql).config).onSettled)==null||H.call(k,P,this.state.error,this),this.scheduleGc()},onError:g,onFail:(P,b)=>{jo(this,SA,au).call(this,{type:"failed",failureCount:P,error:b})},onPause:()=>{jo(this,SA,au).call(this,{type:"pause"})},onContinue:()=>{jo(this,SA,au).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Kt(this,Zo).start()}},pp=new WeakMap,_d=new WeakMap,Ql=new WeakMap,wd=new WeakMap,Zo=new WeakMap,Lg=new WeakMap,xd=new WeakMap,SA=new WeakSet,au=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...t7(i.data,this.options),fetchMeta:t.meta??null};case"success":return gn(this,_d,void 0),{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return fw(a)&&a.revert&&Kt(this,_d)?{...Kt(this,_d),fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),ya.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Kt(this,Ql).notify({query:this,type:"updated",action:t})})},UF);function t7(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:BL(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function r7(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var fc,RF,n7=(RF=class extends x1{constructor(t={}){super();Xn(this,fc);this.config=t,gn(this,fc,new Map)}build(t,r,i){const a=r.queryKey,u=r.queryHash??MB(a,r);let h=this.get(u);return h||(h=new e7({client:t,queryKey:a,queryHash:u,options:t.defaultQueryOptions(r),state:i,defaultOptions:t.getQueryDefaults(a)}),this.add(h)),h}add(t){Kt(this,fc).has(t.queryHash)||(Kt(this,fc).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Kt(this,fc).get(t.queryHash);r&&(t.destroy(),r===t&&Kt(this,fc).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ya.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Kt(this,fc).get(t)}getAll(){return[...Kt(this,fc).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(i=>EE(r,i))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(i=>EE(t,i)):r}notify(t){ya.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ya.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ya.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},fc=new WeakMap,RF),pc,pa,bd,mc,qu,NF,i7=(NF=class extends EL{constructor(t){super();Xn(this,mc);Xn(this,pc);Xn(this,pa);Xn(this,bd);this.mutationId=t.mutationId,gn(this,pa,t.mutationCache),gn(this,pc,[]),this.state=t.state||s7(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Kt(this,pc).includes(t)||(Kt(this,pc).push(t),this.clearGcTimeout(),Kt(this,pa).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){gn(this,pc,Kt(this,pc).filter(r=>r!==t)),this.scheduleGc(),Kt(this,pa).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Kt(this,pc).length||(this.state.status==="pending"?this.scheduleGc():Kt(this,pa).remove(this))}continue(){var t;return((t=Kt(this,bd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var u,h,o,g,w,B,I,P,b,N,k,H,U,Q,K,Z,Ae,fe,ge,me;const r=()=>{jo(this,mc,qu).call(this,{type:"continue"})};gn(this,bd,SL({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(ae,Le)=>{jo(this,mc,qu).call(this,{type:"failed",failureCount:ae,error:Le})},onPause:()=>{jo(this,mc,qu).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Kt(this,pa).canRun(this)}));const i=this.state.status==="pending",a=!Kt(this,bd).canStart();try{if(i)r();else{jo(this,mc,qu).call(this,{type:"pending",variables:t,isPaused:a}),await((h=(u=Kt(this,pa).config).onMutate)==null?void 0:h.call(u,t,this));const Le=await((g=(o=this.options).onMutate)==null?void 0:g.call(o,t));Le!==this.state.context&&jo(this,mc,qu).call(this,{type:"pending",context:Le,variables:t,isPaused:a})}const ae=await Kt(this,bd).start();return await((B=(w=Kt(this,pa).config).onSuccess)==null?void 0:B.call(w,ae,t,this.state.context,this)),await((P=(I=this.options).onSuccess)==null?void 0:P.call(I,ae,t,this.state.context)),await((N=(b=Kt(this,pa).config).onSettled)==null?void 0:N.call(b,ae,null,this.state.variables,this.state.context,this)),await((H=(k=this.options).onSettled)==null?void 0:H.call(k,ae,null,t,this.state.context)),jo(this,mc,qu).call(this,{type:"success",data:ae}),ae}catch(ae){try{throw await((Q=(U=Kt(this,pa).config).onError)==null?void 0:Q.call(U,ae,t,this.state.context,this)),await((Z=(K=this.options).onError)==null?void 0:Z.call(K,ae,t,this.state.context)),await((fe=(Ae=Kt(this,pa).config).onSettled)==null?void 0:fe.call(Ae,void 0,ae,this.state.variables,this.state.context,this)),await((me=(ge=this.options).onSettled)==null?void 0:me.call(ge,void 0,ae,t,this.state.context)),ae}finally{jo(this,mc,qu).call(this,{type:"error",error:ae})}}finally{Kt(this,pa).runNext(this)}}},pc=new WeakMap,pa=new WeakMap,bd=new WeakMap,mc=new WeakSet,qu=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ya.batch(()=>{Kt(this,pc).forEach(i=>{i.onMutationUpdate(t)}),Kt(this,pa).notify({mutation:this,type:"updated",action:t})})},NF);function s7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var uu,EA,Mg,DF,o7=(DF=class extends x1{constructor(t={}){super();Xn(this,uu);Xn(this,EA);Xn(this,Mg);this.config=t,gn(this,uu,new Set),gn(this,EA,new Map),gn(this,Mg,0)}build(t,r,i){const a=new i7({mutationCache:this,mutationId:++u0(this,Mg)._,options:t.defaultMutationOptions(r),state:i});return this.add(a),a}add(t){Kt(this,uu).add(t);const r=M0(t);if(typeof r=="string"){const i=Kt(this,EA).get(r);i?i.push(t):Kt(this,EA).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Kt(this,uu).delete(t)){const r=M0(t);if(typeof r=="string"){const i=Kt(this,EA).get(r);if(i)if(i.length>1){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}else i[0]===t&&Kt(this,EA).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=M0(t);if(typeof r=="string"){const i=Kt(this,EA).get(r),a=i==null?void 0:i.find(u=>u.state.status==="pending");return!a||a===t}else return!0}runNext(t){var i;const r=M0(t);if(typeof r=="string"){const a=(i=Kt(this,EA).get(r))==null?void 0:i.find(u=>u!==t&&u.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ya.batch(()=>{Kt(this,uu).forEach(t=>{this.notify({type:"removed",mutation:t})}),Kt(this,uu).clear(),Kt(this,EA).clear()})}getAll(){return Array.from(Kt(this,uu))}find(t){const r={exact:!0,...t};return this.getAll().find(i=>IE(r,i))}findAll(t={}){return this.getAll().filter(r=>IE(t,r))}notify(t){ya.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ya.batch(()=>Promise.all(t.map(r=>r.continue().catch(CA))))}},uu=new WeakMap,EA=new WeakMap,Mg=new WeakMap,DF);function M0(e){var t;return(t=e.options.scope)==null?void 0:t.id}function PE(e){return{onFetch:(t,r)=>{var B,I,P,b,N;const i=t.options,a=(P=(I=(B=t.fetchOptions)==null?void 0:B.meta)==null?void 0:I.fetchMore)==null?void 0:P.direction,u=((b=t.state.data)==null?void 0:b.pages)||[],h=((N=t.state.data)==null?void 0:N.pageParams)||[];let o={pages:[],pageParams:[]},g=0;const w=async()=>{let k=!1;const H=K=>{Object.defineProperty(K,"signal",{enumerable:!0,get:()=>(t.signal.aborted?k=!0:t.signal.addEventListener("abort",()=>{k=!0}),t.signal)})},U=xL(t.options,t.fetchOptions),Q=async(K,Z,Ae)=>{if(k)return Promise.reject();if(Z==null&&K.pages.length)return Promise.resolve(K);const ge=(()=>{const re={client:t.client,queryKey:t.queryKey,pageParam:Z,direction:Ae?"backward":"forward",meta:t.options.meta};return H(re),re})(),me=await U(ge),{maxPages:ae}=t.options,Le=Ae?$H:GH;return{pages:Le(K.pages,me,ae),pageParams:Le(K.pageParams,Z,ae)}};if(a&&u.length){const K=a==="backward",Z=K?a7:LE,Ae={pages:u,pageParams:h},fe=Z(i,Ae);o=await Q(Ae,fe,K)}else{const K=e??u.length;do{const Z=g===0?h[0]??i.initialPageParam:LE(i,o);if(g>0&&Z==null)break;o=await Q(o,Z),g++}while(g<K)}return o};t.options.persister?t.fetchFn=()=>{var k,H;return(H=(k=t.options).persister)==null?void 0:H.call(k,w,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=w}}}function LE(e,{pages:t,pageParams:r}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,r[i],r):void 0}function a7(e,{pages:t,pageParams:r}){var i;return t.length>0?(i=e.getPreviousPageParam)==null?void 0:i.call(e,t[0],t,r[0],r):void 0}var ms,oh,ah,mp,gp,lh,yp,vp,QF,l7=(QF=class{constructor(e={}){Xn(this,ms);Xn(this,oh);Xn(this,ah);Xn(this,mp);Xn(this,gp);Xn(this,lh);Xn(this,yp);Xn(this,vp);gn(this,ms,e.queryCache||new n7),gn(this,oh,e.mutationCache||new o7),gn(this,ah,e.defaultOptions||{}),gn(this,mp,new Map),gn(this,gp,new Map),gn(this,lh,0)}mount(){u0(this,lh)._++,Kt(this,lh)===1&&(gn(this,yp,bL.subscribe(async e=>{e&&(await this.resumePausedMutations(),Kt(this,ms).onFocus())})),gn(this,vp,wv.subscribe(async e=>{e&&(await this.resumePausedMutations(),Kt(this,ms).onOnline())})))}unmount(){var e,t;u0(this,lh)._--,Kt(this,lh)===0&&((e=Kt(this,yp))==null||e.call(this),gn(this,yp,void 0),(t=Kt(this,vp))==null||t.call(this),gn(this,vp,void 0))}isFetching(e){return Kt(this,ms).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Kt(this,oh).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Kt(this,ms).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Kt(this,ms).build(this,t),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(yb(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return Kt(this,ms).findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),a=Kt(this,ms).get(i.queryHash),u=a==null?void 0:a.state.data,h=OH(t,u);if(h!==void 0)return Kt(this,ms).build(this,i).setData(h,{...r,manual:!0})}setQueriesData(e,t,r){return ya.batch(()=>Kt(this,ms).findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Kt(this,ms).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Kt(this,ms);ya.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Kt(this,ms);return ya.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},i=ya.batch(()=>Kt(this,ms).findAll(e).map(a=>a.cancel(r)));return Promise.all(i).then(CA).catch(CA)}invalidateQueries(e,t={}){return ya.batch(()=>(Kt(this,ms).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},i=ya.batch(()=>Kt(this,ms).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let u=a.fetch(void 0,r);return r.throwOnError||(u=u.catch(CA)),a.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(CA)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Kt(this,ms).build(this,t);return r.isStaleByTime(yb(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(CA).catch(CA)}fetchInfiniteQuery(e){return e.behavior=PE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(CA).catch(CA)}ensureInfiniteQueryData(e){return e.behavior=PE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return wv.isOnline()?Kt(this,oh).resumePausedMutations():Promise.resolve()}getQueryCache(){return Kt(this,ms)}getMutationCache(){return Kt(this,oh)}getDefaultOptions(){return Kt(this,ah)}setDefaultOptions(e){gn(this,ah,e)}setQueryDefaults(e,t){Kt(this,mp).set(xg(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Kt(this,mp).values()],r={};return t.forEach(i=>{bg(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,t){Kt(this,gp).set(xg(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Kt(this,gp).values()],r={};return t.forEach(i=>{bg(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Kt(this,ah).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=MB(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===kB&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Kt(this,ah).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Kt(this,ms).clear(),Kt(this,oh).clear()}},ms=new WeakMap,oh=new WeakMap,ah=new WeakMap,mp=new WeakMap,gp=new WeakMap,lh=new WeakMap,yp=new WeakMap,vp=new WeakMap,QF),A7=ee.createContext(void 0),c7=({client:e,children:t})=>(ee.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),X.jsx(A7.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xv.apply(this,arguments)}var uh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(uh||(uh={}));const ME="popstate";function u7(e){e===void 0&&(e={});function t(i,a){let{pathname:u,search:h,hash:o}=i.location;return _b("",{pathname:u,search:h,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){return typeof a=="string"?a:FL(a)}return d7(t,r,null,e)}function Qa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function IL(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function h7(){return Math.random().toString(36).substr(2,8)}function kE(e,t){return{usr:e.state,key:e.key,idx:t}}function _b(e,t,r,i){return r===void 0&&(r=null),xv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?B1(t):t,{state:r,key:t&&t.key||i||h7()})}function FL(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function B1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function d7(e,t,r,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:u=!1}=i,h=a.history,o=uh.Pop,g=null,w=B();w==null&&(w=0,h.replaceState(xv({},h.state,{idx:w}),""));function B(){return(h.state||{idx:null}).idx}function I(){o=uh.Pop;let H=B(),U=H==null?null:H-w;w=H,g&&g({action:o,location:k.location,delta:U})}function P(H,U){o=uh.Push;let Q=_b(k.location,H,U);w=B()+1;let K=kE(Q,w),Z=k.createHref(Q);try{h.pushState(K,"",Z)}catch(Ae){if(Ae instanceof DOMException&&Ae.name==="DataCloneError")throw Ae;a.location.assign(Z)}u&&g&&g({action:o,location:k.location,delta:1})}function b(H,U){o=uh.Replace;let Q=_b(k.location,H,U);w=B();let K=kE(Q,w),Z=k.createHref(Q);h.replaceState(K,"",Z),u&&g&&g({action:o,location:k.location,delta:0})}function N(H){let U=a.location.origin!=="null"?a.location.origin:a.location.href,Q=typeof H=="string"?H:FL(H);return Q=Q.replace(/ $/,"%20"),Qa(U,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,U)}let k={get action(){return o},get location(){return e(a,h)},listen(H){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(ME,I),g=H,()=>{a.removeEventListener(ME,I),g=null}},createHref(H){return t(a,H)},createURL:N,encodeLocation(H){let U=N(H);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:P,replace:b,go(H){return h.go(H)}};return k}var UE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(UE||(UE={}));function f7(e,t,r){return r===void 0&&(r="/"),p7(e,t,r)}function p7(e,t,r,i){let a=typeof t=="string"?B1(t):t,u=LL(a.pathname||"/",r);if(u==null)return null;let h=TL(e);m7(h);let o=null;for(let g=0;o==null&&g<h.length;++g){let w=I7(u);o=C7(h[g],w)}return o}function TL(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let a=(u,h,o)=>{let g={relativePath:o===void 0?u.path||"":o,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(Qa(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let w=np([i,g.relativePath]),B=r.concat(g);u.children&&u.children.length>0&&(Qa(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),TL(u.children,t,B,w)),!(u.path==null&&!u.index)&&t.push({path:w,score:b7(w,u.index),routesMeta:B})};return e.forEach((u,h)=>{var o;if(u.path===""||!((o=u.path)!=null&&o.includes("?")))a(u,h);else for(let g of PL(u.path))a(u,h,g)}),t}function PL(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,a=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return a?[u,""]:[u];let h=PL(i.join("/")),o=[];return o.push(...h.map(g=>g===""?u:[u,g].join("/"))),a&&o.push(...h),o.map(g=>e.startsWith("/")&&g===""?"/":g)}function m7(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:B7(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const g7=/^:[\w-]+$/,y7=3,v7=2,_7=1,w7=10,x7=-2,RE=e=>e==="*";function b7(e,t){let r=e.split("/"),i=r.length;return r.some(RE)&&(i+=x7),t&&(i+=v7),r.filter(a=>!RE(a)).reduce((a,u)=>a+(g7.test(u)?y7:u===""?_7:w7),i)}function B7(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function C7(e,t,r){let{routesMeta:i}=e,a={},u="/",h=[];for(let o=0;o<i.length;++o){let g=i[o],w=o===i.length-1,B=u==="/"?t:t.slice(u.length)||"/",I=S7({path:g.relativePath,caseSensitive:g.caseSensitive,end:w},B),P=g.route;if(!I)return null;Object.assign(a,I.params),h.push({params:a,pathname:np([u,I.pathname]),pathnameBase:F7(np([u,I.pathnameBase])),route:P}),I.pathnameBase!=="/"&&(u=np([u,I.pathnameBase]))}return h}function S7(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=E7(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:i.reduce((w,B,I)=>{let{paramName:P,isOptional:b}=B;if(P==="*"){let k=o[I]||"";h=u.slice(0,u.length-k.length).replace(/(.)\/+$/,"$1")}const N=o[I];return b&&!N?w[P]=void 0:w[P]=(N||"").replace(/%2F/g,"/"),w},{}),pathname:u,pathnameBase:h,pattern:e}}function E7(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),IL(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,o,g)=>(i.push({paramName:o,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function I7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return IL(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function LL(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}const np=e=>e.join("/").replace(/\/\/+/g,"/"),F7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function T7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ML=["post","put","patch","delete"];new Set(ML);const P7=["get",...ML];new Set(P7);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},bv.apply(this,arguments)}const L7=ee.createContext(null),M7=ee.createContext(null),kL=ee.createContext(null),C1=ee.createContext(null),S1=ee.createContext({outlet:null,matches:[],isDataRoute:!1}),UL=ee.createContext(null);function UB(){return ee.useContext(C1)!=null}function RL(){return UB()||Qa(!1),ee.useContext(C1).location}function k7(e,t){return U7(e,t)}function U7(e,t,r,i){UB()||Qa(!1);let{navigator:a}=ee.useContext(kL),{matches:u}=ee.useContext(S1),h=u[u.length-1],o=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let w=RL(),B;if(t){var I;let H=typeof t=="string"?B1(t):t;g==="/"||(I=H.pathname)!=null&&I.startsWith(g)||Qa(!1),B=H}else B=w;let P=B.pathname||"/",b=P;if(g!=="/"){let H=g.replace(/^\//,"").split("/");b="/"+P.replace(/^\//,"").split("/").slice(H.length).join("/")}let N=f7(e,{pathname:b}),k=O7(N&&N.map(H=>Object.assign({},H,{params:Object.assign({},o,H.params),pathname:np([g,a.encodeLocation?a.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:np([g,a.encodeLocation?a.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),u,r,i);return t&&k?ee.createElement(C1.Provider,{value:{location:bv({pathname:"/",search:"",hash:"",state:null,key:"default"},B),navigationType:uh.Pop}},k):k}function R7(){let e=V7(),t=T7(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},t),r?ee.createElement("pre",{style:a},r):null,null)}const N7=ee.createElement(R7,null);class D7 extends ee.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?ee.createElement(S1.Provider,{value:this.props.routeContext},ee.createElement(UL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q7(e){let{routeContext:t,match:r,children:i}=e,a=ee.useContext(L7);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),ee.createElement(S1.Provider,{value:t},i)}function O7(e,t,r,i){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var u;if(!r)return null;if(r.errors)e=r.matches;else if((u=i)!=null&&u.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let B=h.findIndex(I=>I.route.id&&(o==null?void 0:o[I.route.id])!==void 0);B>=0||Qa(!1),h=h.slice(0,Math.min(h.length,B+1))}let g=!1,w=-1;if(r&&i&&i.v7_partialHydration)for(let B=0;B<h.length;B++){let I=h[B];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(w=B),I.route.id){let{loaderData:P,errors:b}=r,N=I.route.loader&&P[I.route.id]===void 0&&(!b||b[I.route.id]===void 0);if(I.route.lazy||N){g=!0,w>=0?h=h.slice(0,w+1):h=[h[0]];break}}}return h.reduceRight((B,I,P)=>{let b,N=!1,k=null,H=null;r&&(b=o&&I.route.id?o[I.route.id]:void 0,k=I.route.errorElement||N7,g&&(w<0&&P===0?(K7("route-fallback"),N=!0,H=null):w===P&&(N=!0,H=I.route.hydrateFallbackElement||null)));let U=t.concat(h.slice(0,P+1)),Q=()=>{let K;return b?K=k:N?K=H:I.route.Component?K=ee.createElement(I.route.Component,null):I.route.element?K=I.route.element:K=B,ee.createElement(Q7,{match:I,routeContext:{outlet:B,matches:U,isDataRoute:r!=null},children:K})};return r&&(I.route.ErrorBoundary||I.route.errorElement||P===0)?ee.createElement(D7,{location:r.location,revalidation:r.revalidation,component:k,error:b,children:Q(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):Q()},null)}var NL=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(NL||{});function z7(e){let t=ee.useContext(M7);return t||Qa(!1),t}function H7(e){let t=ee.useContext(S1);return t||Qa(!1),t}function j7(e){let t=H7(),r=t.matches[t.matches.length-1];return r.route.id||Qa(!1),r.route.id}function V7(){var e;let t=ee.useContext(UL),r=z7(NL.UseRouteError),i=j7();return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}const NE={};function K7(e,t,r){NE[e]||(NE[e]=!0)}function G7(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function wb(e){Qa(!1)}function $7(e){let{basename:t="/",children:r=null,location:i,navigationType:a=uh.Pop,navigator:u,static:h=!1,future:o}=e;UB()&&Qa(!1);let g=t.replace(/^\/*/,"/"),w=ee.useMemo(()=>({basename:g,navigator:u,static:h,future:bv({v7_relativeSplatPath:!1},o)}),[g,o,u,h]);typeof i=="string"&&(i=B1(i));let{pathname:B="/",search:I="",hash:P="",state:b=null,key:N="default"}=i,k=ee.useMemo(()=>{let H=LL(B,g);return H==null?null:{location:{pathname:H,search:I,hash:P,state:b,key:N},navigationType:a}},[g,B,I,P,b,N,a]);return k==null?null:ee.createElement(kL.Provider,{value:w},ee.createElement(C1.Provider,{children:r,value:k}))}function q7(e){let{children:t,location:r}=e;return k7(xb(t),r)}new Promise(()=>{});function xb(e,t){t===void 0&&(t=[]);let r=[];return ee.Children.forEach(e,(i,a)=>{if(!ee.isValidElement(i))return;let u=[...t,a];if(i.type===ee.Fragment){r.push.apply(r,xb(i.props.children,u));return}i.type!==wb&&Qa(!1),!i.props.index||!i.props.children||Qa(!1);let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=xb(i.props.children,u)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const W7="6";try{window.__reactRouterVersion=W7}catch{}const Z7="startTransition",DE=C2[Z7];function X7(e){let{basename:t,children:r,future:i,window:a}=e,u=ee.useRef();u.current==null&&(u.current=u7({window:a,v5Compat:!0}));let h=u.current,[o,g]=ee.useState({action:h.action,location:h.location}),{v7_startTransition:w}=i||{},B=ee.useCallback(I=>{w&&DE?DE(()=>g(I)):g(I)},[g,w]);return ee.useLayoutEffect(()=>h.listen(B),[h,B]),ee.useEffect(()=>G7(i),[i]),ee.createElement($7,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:h,future:i})}var QE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(QE||(QE={}));var OE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(OE||(OE={}));const Y7="modulepreload",J7=function(e){return"/Domapus/"+e},zE={},ip=function(t,r,i){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),o=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=Promise.allSettled(r.map(g=>{if(g=J7(g),g in zE)return;zE[g]=!0;const w=g.endsWith(".css"),B=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${B}`))return;const I=document.createElement("link");if(I.rel=w?"stylesheet":Y7,w||(I.as="script"),I.crossOrigin="",I.href=g,o&&I.setAttribute("nonce",o),document.head.appendChild(I),w)return new Promise((P,b)=>{I.addEventListener("load",P),I.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(h){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=h,window.dispatchEvent(o),!o.defaultPrevented)throw h}return a.then(h=>{for(const o of h||[])o.status==="rejected"&&u(o.reason);return t().catch(u)})};function ej(e){return new Worker("/Domapus/assets/data-processor-DxyGoxPY.js",{name:e==null?void 0:e.name})}function tj(){const e=ee.useRef(null),[t,r]=ee.useState(!1),[i,a]=ee.useState({phase:""}),u=ee.useRef(new Map),h=ee.useRef(!1);return ee.useEffect(()=>{if(h.current)return;const g=new ej;return e.current=g,h.current=!0,g.onmessage=w=>{const{id:B,type:I,data:P,error:b}=w.data;switch(I){case"PROGRESS":a(P);break;case"ERROR":{r(!1);const N=u.current.get(B);N&&(N.reject(new Error(b)),u.current.delete(B));break}default:{r(!1);const N=u.current.get(B);N&&(N.resolve(P),u.current.delete(B));break}}},g.onerror=w=>{console.error("[useDataWorker] Unhandled worker error:",w),r(!1),u.current.forEach(B=>B.reject(w)),u.current.clear()},()=>{e.current&&(e.current.terminate(),e.current=null),h.current=!1}},[]),{processData:ee.useCallback(g=>{const w=e.current;return!w||!h.current?(console.error("[useDataWorker] Worker not available"),Promise.reject(new Error("Worker is not initialized"))):new Promise((B,I)=>{const P=`${Date.now()}-${Math.random()}`;u.current.set(P,{resolve:B,reject:I}),r(!0),w.postMessage({id:P,...g})})},[]),isLoading:t,progress:i}}const rj=d1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ea=ee.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...a},u)=>{const h=i?RQ:"button";return X.jsx(h,{className:jn(rj({variant:t,size:r,className:e})),ref:u,...a})});ea.displayName="Button";const Bh=ee.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:jn("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Bh.displayName="Card";const Gm=ee.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:jn("flex flex-col space-y-1.5 p-6",e),...t}));Gm.displayName="CardHeader";const $m=ee.forwardRef(({className:e,...t},r)=>X.jsx("h3",{ref:r,className:jn("text-2xl font-semibold leading-none tracking-tight",e),...t}));$m.displayName="CardTitle";const nj=ee.forwardRef(({className:e,...t},r)=>X.jsx("p",{ref:r,className:jn("text-sm text-muted-foreground",e),...t}));nj.displayName="CardDescription";const Ch=ee.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:jn("p-6 pt-0",e),...t}));Ch.displayName="CardContent";const ij=ee.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:jn("flex items-center p-6 pt-0",e),...t}));ij.displayName="CardFooter";var sj=ee.createContext(void 0);function RB(e){const t=ee.useContext(sj);return e||t||"ltr"}var pw="rovingFocusGroup.onEntryFocus",oj={bubbles:!1,cancelable:!0},Hg="RovingFocusGroup",[bb,DL,aj]=mB(Hg),[lj,QL]=Bu(Hg,[aj]),[Aj,cj]=lj(Hg),OL=ee.forwardRef((e,t)=>X.jsx(bb.Provider,{scope:e.__scopeRovingFocusGroup,children:X.jsx(bb.Slot,{scope:e.__scopeRovingFocusGroup,children:X.jsx(uj,{...e,ref:t})})}));OL.displayName=Hg;var uj=ee.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:a=!1,dir:u,currentTabStopId:h,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:g,onEntryFocus:w,preventScrollOnEntryFocus:B=!1,...I}=e,P=ee.useRef(null),b=fi(t,P),N=RB(u),[k,H]=Ep({prop:h,defaultProp:o??null,onChange:g,caller:Hg}),[U,Q]=ee.useState(!1),K=Wl(w),Z=DL(r),Ae=ee.useRef(!1),[fe,ge]=ee.useState(0);return ee.useEffect(()=>{const me=P.current;if(me)return me.addEventListener(pw,K),()=>me.removeEventListener(pw,K)},[K]),X.jsx(Aj,{scope:r,orientation:i,dir:N,loop:a,currentTabStopId:k,onItemFocus:ee.useCallback(me=>H(me),[H]),onItemShiftTab:ee.useCallback(()=>Q(!0),[]),onFocusableItemAdd:ee.useCallback(()=>ge(me=>me+1),[]),onFocusableItemRemove:ee.useCallback(()=>ge(me=>me-1),[]),children:X.jsx(In.div,{tabIndex:U||fe===0?-1:0,"data-orientation":i,...I,ref:b,style:{outline:"none",...e.style},onMouseDown:cn(e.onMouseDown,()=>{Ae.current=!0}),onFocus:cn(e.onFocus,me=>{const ae=!Ae.current;if(me.target===me.currentTarget&&ae&&!U){const Le=new CustomEvent(pw,oj);if(me.currentTarget.dispatchEvent(Le),!Le.defaultPrevented){const re=Z().filter(rt=>rt.focusable),he=re.find(rt=>rt.active),Ie=re.find(rt=>rt.id===k),nt=[he,Ie,...re].filter(Boolean).map(rt=>rt.ref.current);jL(nt,B)}}Ae.current=!1}),onBlur:cn(e.onBlur,()=>Q(!1))})})}),zL="RovingFocusGroupItem",HL=ee.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:a=!1,tabStopId:u,children:h,...o}=e,g=p1(),w=u||g,B=cj(zL,r),I=B.currentTabStopId===w,P=DL(r),{onFocusableItemAdd:b,onFocusableItemRemove:N,currentTabStopId:k}=B;return ee.useEffect(()=>{if(i)return b(),()=>N()},[i,b,N]),X.jsx(bb.ItemSlot,{scope:r,id:w,focusable:i,active:a,children:X.jsx(In.span,{tabIndex:I?0:-1,"data-orientation":B.orientation,...o,ref:t,onMouseDown:cn(e.onMouseDown,H=>{i?B.onItemFocus(w):H.preventDefault()}),onFocus:cn(e.onFocus,()=>B.onItemFocus(w)),onKeyDown:cn(e.onKeyDown,H=>{if(H.key==="Tab"&&H.shiftKey){B.onItemShiftTab();return}if(H.target!==H.currentTarget)return;const U=fj(H,B.orientation,B.dir);if(U!==void 0){if(H.metaKey||H.ctrlKey||H.altKey||H.shiftKey)return;H.preventDefault();let K=P().filter(Z=>Z.focusable).map(Z=>Z.ref.current);if(U==="last")K.reverse();else if(U==="prev"||U==="next"){U==="prev"&&K.reverse();const Z=K.indexOf(H.currentTarget);K=B.loop?pj(K,Z+1):K.slice(Z+1)}setTimeout(()=>jL(K))}}),children:typeof h=="function"?h({isCurrentTabStop:I,hasTabStop:k!=null}):h})})});HL.displayName=zL;var hj={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dj(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function fj(e,t,r){const i=dj(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return hj[i]}function jL(e,t=!1){const r=document.activeElement;for(const i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function pj(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var mj=OL,gj=HL;function NB(e){const t=ee.useRef({value:e,previous:e});return ee.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var DB="Radio",[yj,VL]=Bu(DB),[vj,_j]=yj(DB),KL=ee.forwardRef((e,t)=>{const{__scopeRadio:r,name:i,checked:a=!1,required:u,disabled:h,value:o="on",onCheck:g,form:w,...B}=e,[I,P]=ee.useState(null),b=fi(t,H=>P(H)),N=ee.useRef(!1),k=I?w||!!I.closest("form"):!0;return X.jsxs(vj,{scope:r,checked:a,disabled:h,children:[X.jsx(In.button,{type:"button",role:"radio","aria-checked":a,"data-state":WL(a),"data-disabled":h?"":void 0,disabled:h,value:o,...B,ref:b,onClick:cn(e.onClick,H=>{a||g==null||g(),k&&(N.current=H.isPropagationStopped(),N.current||H.stopPropagation())})}),k&&X.jsx(qL,{control:I,bubbles:!N.current,name:i,value:o,checked:a,required:u,disabled:h,form:w,style:{transform:"translateX(-100%)"}})]})});KL.displayName=DB;var GL="RadioIndicator",$L=ee.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:i,...a}=e,u=_j(GL,r);return X.jsx(Qg,{present:i||u.checked,children:X.jsx(In.span,{"data-state":WL(u.checked),"data-disabled":u.disabled?"":void 0,...a,ref:t})})});$L.displayName=GL;var wj="RadioBubbleInput",qL=ee.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:i=!0,...a},u)=>{const h=ee.useRef(null),o=fi(h,u),g=NB(r),w=FB(t);return ee.useEffect(()=>{const B=h.current;if(!B)return;const I=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(I,"checked").set;if(g!==r&&b){const N=new Event("click",{bubbles:i});b.call(B,r),B.dispatchEvent(N)}},[g,r,i]),X.jsx(In.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qL.displayName=wj;function WL(e){return e?"checked":"unchecked"}var xj=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],E1="RadioGroup",[bj,JJ]=Bu(E1,[QL,VL]),ZL=QL(),XL=VL(),[Bj,Cj]=bj(E1),YL=ee.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:i,defaultValue:a,value:u,required:h=!1,disabled:o=!1,orientation:g,dir:w,loop:B=!0,onValueChange:I,...P}=e,b=ZL(r),N=RB(w),[k,H]=Ep({prop:u,defaultProp:a??null,onChange:I,caller:E1});return X.jsx(Bj,{scope:r,name:i,required:h,disabled:o,value:k,onValueChange:H,children:X.jsx(mj,{asChild:!0,...b,orientation:g,dir:N,loop:B,children:X.jsx(In.div,{role:"radiogroup","aria-required":h,"aria-orientation":g,"data-disabled":o?"":void 0,dir:N,...P,ref:t})})})});YL.displayName=E1;var JL="RadioGroupItem",eM=ee.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:i,...a}=e,u=Cj(JL,r),h=u.disabled||i,o=ZL(r),g=XL(r),w=ee.useRef(null),B=fi(t,w),I=u.value===a.value,P=ee.useRef(!1);return ee.useEffect(()=>{const b=k=>{xj.includes(k.key)&&(P.current=!0)},N=()=>P.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",N)}},[]),X.jsx(gj,{asChild:!0,...o,focusable:!h,active:I,children:X.jsx(KL,{disabled:h,required:u.required,checked:I,...g,...a,name:u.name,ref:B,onCheck:()=>u.onValueChange(a.value),onKeyDown:cn(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:cn(a.onFocus,()=>{var b;P.current&&((b=w.current)==null||b.click())})})})});eM.displayName=JL;var Sj="RadioGroupIndicator",tM=ee.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...i}=e,a=XL(r);return X.jsx($L,{...a,...i,ref:t})});tM.displayName=Sj;var rM=YL,nM=eM,Ej=tM;const Bb=ee.forwardRef(({className:e,...t},r)=>X.jsx(rM,{className:jn("grid gap-2",e),...t,ref:r}));Bb.displayName=rM.displayName;const Ff=ee.forwardRef(({className:e,...t},r)=>X.jsx(nM,{ref:r,className:jn("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:X.jsx(Ej,{className:"flex items-center justify-center",children:X.jsx(k8,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ff.displayName=nM.displayName;var Ij="Label",iM=ee.forwardRef((e,t)=>X.jsx(In.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));iM.displayName=Ij;var sM=iM;const Fj=d1("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Wu=ee.forwardRef(({className:e,...t},r)=>X.jsx(sM,{ref:r,className:jn(Fj(),e),...t}));Wu.displayName=sM.displayName;function HE(e,[t,r]){return Math.min(r,Math.max(t,e))}var mw=0;function Tj(){ee.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??jE()),document.body.insertAdjacentElement("beforeend",e[1]??jE()),mw++,()=>{mw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),mw--}},[])}function jE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var gw="focusScope.autoFocusOnMount",yw="focusScope.autoFocusOnUnmount",VE={bubbles:!1,cancelable:!0},Pj="FocusScope",oM=ee.forwardRef((e,t)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:u,...h}=e,[o,g]=ee.useState(null),w=Wl(a),B=Wl(u),I=ee.useRef(null),P=fi(t,k=>g(k)),b=ee.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ee.useEffect(()=>{if(i){let k=function(K){if(b.paused||!o)return;const Z=K.target;o.contains(Z)?I.current=Z:Zu(I.current,{select:!0})},H=function(K){if(b.paused||!o)return;const Z=K.relatedTarget;Z!==null&&(o.contains(Z)||Zu(I.current,{select:!0}))},U=function(K){if(document.activeElement===document.body)for(const Ae of K)Ae.removedNodes.length>0&&Zu(o)};document.addEventListener("focusin",k),document.addEventListener("focusout",H);const Q=new MutationObserver(U);return o&&Q.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",H),Q.disconnect()}}},[i,o,b.paused]),ee.useEffect(()=>{if(o){GE.add(b);const k=document.activeElement;if(!o.contains(k)){const U=new CustomEvent(gw,VE);o.addEventListener(gw,w),o.dispatchEvent(U),U.defaultPrevented||(Lj(Nj(aM(o)),{select:!0}),document.activeElement===k&&Zu(o))}return()=>{o.removeEventListener(gw,w),setTimeout(()=>{const U=new CustomEvent(yw,VE);o.addEventListener(yw,B),o.dispatchEvent(U),U.defaultPrevented||Zu(k??document.body,{select:!0}),o.removeEventListener(yw,B),GE.remove(b)},0)}}},[o,w,B,b]);const N=ee.useCallback(k=>{if(!r&&!i||b.paused)return;const H=k.key==="Tab"&&!k.altKey&&!k.ctrlKey&&!k.metaKey,U=document.activeElement;if(H&&U){const Q=k.currentTarget,[K,Z]=Mj(Q);K&&Z?!k.shiftKey&&U===Z?(k.preventDefault(),r&&Zu(K,{select:!0})):k.shiftKey&&U===K&&(k.preventDefault(),r&&Zu(Z,{select:!0})):U===Q&&k.preventDefault()}},[r,i,b.paused]);return X.jsx(In.div,{tabIndex:-1,...h,ref:P,onKeyDown:N})});oM.displayName=Pj;function Lj(e,{select:t=!1}={}){const r=document.activeElement;for(const i of e)if(Zu(i,{select:t}),document.activeElement!==r)return}function Mj(e){const t=aM(e),r=KE(t,e),i=KE(t.reverse(),e);return[r,i]}function aM(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function KE(e,t){for(const r of e)if(!kj(r,{upTo:t}))return r}function kj(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Uj(e){return e instanceof HTMLInputElement&&"select"in e}function Zu(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Uj(e)&&t&&e.select()}}var GE=Rj();function Rj(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=$E(e,t),e.unshift(t)},remove(t){var r;e=$E(e,t),(r=e[0])==null||r.resume()}}}function $E(e,t){const r=[...e],i=r.indexOf(t);return i!==-1&&r.splice(i,1),r}function Nj(e){return e.filter(t=>t.tagName!=="A")}var Dj=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},gf=new WeakMap,k0=new WeakMap,U0={},vw=0,lM=function(e){return e&&(e.host||lM(e.parentNode))},Qj=function(e,t){return t.map(function(r){if(e.contains(r))return r;var i=lM(r);return i&&e.contains(i)?i:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Oj=function(e,t,r,i){var a=Qj(t,Array.isArray(e)?e:[e]);U0[r]||(U0[r]=new WeakMap);var u=U0[r],h=[],o=new Set,g=new Set(a),w=function(I){!I||o.has(I)||(o.add(I),w(I.parentNode))};a.forEach(w);var B=function(I){!I||g.has(I)||Array.prototype.forEach.call(I.children,function(P){if(o.has(P))B(P);else try{var b=P.getAttribute(i),N=b!==null&&b!=="false",k=(gf.get(P)||0)+1,H=(u.get(P)||0)+1;gf.set(P,k),u.set(P,H),h.push(P),k===1&&N&&k0.set(P,!0),H===1&&P.setAttribute(r,"true"),N||P.setAttribute(i,"true")}catch(U){console.error("aria-hidden: cannot operate on ",P,U)}})};return B(t),o.clear(),vw++,function(){h.forEach(function(I){var P=gf.get(I)-1,b=u.get(I)-1;gf.set(I,P),u.set(I,b),P||(k0.has(I)||I.removeAttribute(i),k0.delete(I)),b||I.removeAttribute(r)}),vw--,vw||(gf=new WeakMap,gf=new WeakMap,k0=new WeakMap,U0={})}},zj=function(e,t,r){r===void 0&&(r="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),a=Dj(e);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live], script"))),Oj(i,a,r,"aria-hidden")):function(){return null}},yc=function(){return yc=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},yc.apply(this,arguments)};function AM(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r}function Hj(e,t,r){if(r||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))}var ky="right-scroll-bar-position",Uy="width-before-scroll-bar",jj="with-scroll-bars-hidden",Vj="--removed-body-scroll-bar-size";function _w(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Kj(e,t){var r=ee.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(i){var a=r.value;a!==i&&(r.value=i,r.callback(i,a))}}}})[0];return r.callback=t,r.facade}var Gj=typeof window<"u"?ee.useLayoutEffect:ee.useEffect,qE=new WeakMap;function $j(e,t){var r=Kj(null,function(i){return e.forEach(function(a){return _w(a,i)})});return Gj(function(){var i=qE.get(r);if(i){var a=new Set(i),u=new Set(e),h=r.current;a.forEach(function(o){u.has(o)||_w(o,null)}),u.forEach(function(o){a.has(o)||_w(o,h)})}qE.set(r,e)},[e]),r}function qj(e){return e}function Wj(e,t){t===void 0&&(t=qj);var r=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(u){var h=t(u,i);return r.push(h),function(){r=r.filter(function(o){return o!==h})}},assignSyncMedium:function(u){for(i=!0;r.length;){var h=r;r=[],h.forEach(u)}r={push:function(o){return u(o)},filter:function(){return r}}},assignMedium:function(u){i=!0;var h=[];if(r.length){var o=r;r=[],o.forEach(u),h=r}var g=function(){var B=h;h=[],B.forEach(u)},w=function(){return Promise.resolve().then(g)};w(),r={push:function(B){h.push(B),w()},filter:function(B){return h=h.filter(B),r}}}};return a}function Zj(e){e===void 0&&(e={});var t=Wj(null);return t.options=yc({async:!0,ssr:!1},e),t}var cM=function(e){var t=e.sideCar,r=AM(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return ee.createElement(i,yc({},r))};cM.isSideCarExport=!0;function Xj(e,t){return e.useMedium(t),cM}var uM=Zj(),ww=function(){},I1=ee.forwardRef(function(e,t){var r=ee.useRef(null),i=ee.useState({onScrollCapture:ww,onWheelCapture:ww,onTouchMoveCapture:ww}),a=i[0],u=i[1],h=e.forwardProps,o=e.children,g=e.className,w=e.removeScrollBar,B=e.enabled,I=e.shards,P=e.sideCar,b=e.noRelative,N=e.noIsolation,k=e.inert,H=e.allowPinchZoom,U=e.as,Q=U===void 0?"div":U,K=e.gapMode,Z=AM(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Ae=P,fe=$j([r,t]),ge=yc(yc({},Z),a);return ee.createElement(ee.Fragment,null,B&&ee.createElement(Ae,{sideCar:uM,removeScrollBar:w,shards:I,noRelative:b,noIsolation:N,inert:k,setCallbacks:u,allowPinchZoom:!!H,lockRef:r,gapMode:K}),h?ee.cloneElement(ee.Children.only(o),yc(yc({},ge),{ref:fe})):ee.createElement(Q,yc({},ge,{className:g,ref:fe}),o))});I1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};I1.classNames={fullWidth:Uy,zeroRight:ky};var Yj=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Jj(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Yj();return t&&e.setAttribute("nonce",t),e}function e9(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function t9(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var r9=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Jj())&&(e9(t,r),t9(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},n9=function(){var e=r9();return function(t,r){ee.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},hM=function(){var e=n9(),t=function(r){var i=r.styles,a=r.dynamic;return e(i,a),null};return t},i9={left:0,top:0,right:0,gap:0},xw=function(e){return parseInt(e||"",10)||0},s9=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[xw(r),xw(i),xw(a)]},o9=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return i9;var t=s9(e),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},a9=hM(),sp="data-scroll-locked",l9=function(e,t,r,i){var a=e.left,u=e.top,h=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(jj,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(o,"px ").concat(i,`;
  }
  body[`).concat(sp,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(i,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ky,` {
    right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(Uy,` {
    margin-right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(ky," .").concat(ky,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Uy," .").concat(Uy,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(sp,`] {
    `).concat(Vj,": ").concat(o,`px;
  }
`)},WE=function(){var e=parseInt(document.body.getAttribute(sp)||"0",10);return isFinite(e)?e:0},A9=function(){ee.useEffect(function(){return document.body.setAttribute(sp,(WE()+1).toString()),function(){var e=WE()-1;e<=0?document.body.removeAttribute(sp):document.body.setAttribute(sp,e.toString())}},[])},c9=function(e){var t=e.noRelative,r=e.noImportant,i=e.gapMode,a=i===void 0?"margin":i;A9();var u=ee.useMemo(function(){return o9(a)},[a]);return ee.createElement(a9,{styles:l9(u,!t,a,r?"":"!important")})},Cb=!1;if(typeof window<"u")try{var R0=Object.defineProperty({},"passive",{get:function(){return Cb=!0,!0}});window.addEventListener("test",R0,R0),window.removeEventListener("test",R0,R0)}catch{Cb=!1}var yf=Cb?{passive:!1}:!1,u9=function(e){return e.tagName==="TEXTAREA"},dM=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!u9(e)&&r[t]==="visible")},h9=function(e){return dM(e,"overflowY")},d9=function(e){return dM(e,"overflowX")},ZE=function(e,t){var r=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=fM(e,i);if(a){var u=pM(e,i),h=u[1],o=u[2];if(h>o)return!0}i=i.parentNode}while(i&&i!==r.body);return!1},f9=function(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;return[t,r,i]},p9=function(e){var t=e.scrollLeft,r=e.scrollWidth,i=e.clientWidth;return[t,r,i]},fM=function(e,t){return e==="v"?h9(t):d9(t)},pM=function(e,t){return e==="v"?f9(t):p9(t)},m9=function(e,t){return e==="h"&&t==="rtl"?-1:1},g9=function(e,t,r,i,a){var u=m9(e,window.getComputedStyle(t).direction),h=u*i,o=r.target,g=t.contains(o),w=!1,B=h>0,I=0,P=0;do{if(!o)break;var b=pM(e,o),N=b[0],k=b[1],H=b[2],U=k-H-u*N;(N||U)&&fM(e,o)&&(I+=U,P+=N);var Q=o.parentNode;o=Q&&Q.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Q.host:Q}while(!g&&o!==document.body||g&&(t.contains(o)||t===o));return(B&&Math.abs(I)<1||!B&&Math.abs(P)<1)&&(w=!0),w},N0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},XE=function(e){return[e.deltaX,e.deltaY]},YE=function(e){return e&&"current"in e?e.current:e},y9=function(e,t){return e[0]===t[0]&&e[1]===t[1]},v9=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_9=0,vf=[];function w9(e){var t=ee.useRef([]),r=ee.useRef([0,0]),i=ee.useRef(),a=ee.useState(_9++)[0],u=ee.useState(hM)[0],h=ee.useRef(e);ee.useEffect(function(){h.current=e},[e]),ee.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var k=Hj([e.lockRef.current],(e.shards||[]).map(YE),!0).filter(Boolean);return k.forEach(function(H){return H.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),k.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=ee.useCallback(function(k,H){if("touches"in k&&k.touches.length===2||k.type==="wheel"&&k.ctrlKey)return!h.current.allowPinchZoom;var U=N0(k),Q=r.current,K="deltaX"in k?k.deltaX:Q[0]-U[0],Z="deltaY"in k?k.deltaY:Q[1]-U[1],Ae,fe=k.target,ge=Math.abs(K)>Math.abs(Z)?"h":"v";if("touches"in k&&ge==="h"&&fe.type==="range")return!1;var me=ZE(ge,fe);if(!me)return!0;if(me?Ae=ge:(Ae=ge==="v"?"h":"v",me=ZE(ge,fe)),!me)return!1;if(!i.current&&"changedTouches"in k&&(K||Z)&&(i.current=Ae),!Ae)return!0;var ae=i.current||Ae;return g9(ae,H,k,ae==="h"?K:Z)},[]),g=ee.useCallback(function(k){var H=k;if(!(!vf.length||vf[vf.length-1]!==u)){var U="deltaY"in H?XE(H):N0(H),Q=t.current.filter(function(Ae){return Ae.name===H.type&&(Ae.target===H.target||H.target===Ae.shadowParent)&&y9(Ae.delta,U)})[0];if(Q&&Q.should){H.cancelable&&H.preventDefault();return}if(!Q){var K=(h.current.shards||[]).map(YE).filter(Boolean).filter(function(Ae){return Ae.contains(H.target)}),Z=K.length>0?o(H,K[0]):!h.current.noIsolation;Z&&H.cancelable&&H.preventDefault()}}},[]),w=ee.useCallback(function(k,H,U,Q){var K={name:k,delta:H,target:U,should:Q,shadowParent:x9(U)};t.current.push(K),setTimeout(function(){t.current=t.current.filter(function(Z){return Z!==K})},1)},[]),B=ee.useCallback(function(k){r.current=N0(k),i.current=void 0},[]),I=ee.useCallback(function(k){w(k.type,XE(k),k.target,o(k,e.lockRef.current))},[]),P=ee.useCallback(function(k){w(k.type,N0(k),k.target,o(k,e.lockRef.current))},[]);ee.useEffect(function(){return vf.push(u),e.setCallbacks({onScrollCapture:I,onWheelCapture:I,onTouchMoveCapture:P}),document.addEventListener("wheel",g,yf),document.addEventListener("touchmove",g,yf),document.addEventListener("touchstart",B,yf),function(){vf=vf.filter(function(k){return k!==u}),document.removeEventListener("wheel",g,yf),document.removeEventListener("touchmove",g,yf),document.removeEventListener("touchstart",B,yf)}},[]);var b=e.removeScrollBar,N=e.inert;return ee.createElement(ee.Fragment,null,N?ee.createElement(u,{styles:v9(a)}):null,b?ee.createElement(c9,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function x9(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const b9=Xj(uM,w9);var mM=ee.forwardRef(function(e,t){return ee.createElement(I1,yc({},e,{ref:t,sideCar:b9}))});mM.classNames=I1.classNames;var B9=[" ","Enter","ArrowUp","ArrowDown"],C9=[" ","Enter"],Rd="Select",[F1,T1,S9]=mB(Rd),[Dp,eee]=Bu(Rd,[S9,v1]),P1=v1(),[E9,Dh]=Dp(Rd),[I9,F9]=Dp(Rd),gM=e=>{const{__scopeSelect:t,children:r,open:i,defaultOpen:a,onOpenChange:u,value:h,defaultValue:o,onValueChange:g,dir:w,name:B,autoComplete:I,disabled:P,required:b,form:N}=e,k=P1(t),[H,U]=ee.useState(null),[Q,K]=ee.useState(null),[Z,Ae]=ee.useState(!1),fe=RB(w),[ge,me]=Ep({prop:i,defaultProp:a??!1,onChange:u,caller:Rd}),[ae,Le]=Ep({prop:h,defaultProp:o,onChange:g,caller:Rd}),re=ee.useRef(null),he=H?N||!!H.closest("form"):!0,[Ie,we]=ee.useState(new Set),nt=Array.from(Ie).map(rt=>rt.props.value).join(";");return X.jsx(_H,{...k,children:X.jsxs(E9,{required:b,scope:t,trigger:H,onTriggerChange:U,valueNode:Q,onValueNodeChange:K,valueNodeHasChildren:Z,onValueNodeHasChildrenChange:Ae,contentId:p1(),value:ae,onValueChange:Le,open:ge,onOpenChange:me,dir:fe,triggerPointerDownPosRef:re,disabled:P,children:[X.jsx(F1.Provider,{scope:t,children:X.jsx(I9,{scope:e.__scopeSelect,onNativeOptionAdd:ee.useCallback(rt=>{we(ct=>new Set(ct).add(rt))},[]),onNativeOptionRemove:ee.useCallback(rt=>{we(ct=>{const Pe=new Set(ct);return Pe.delete(rt),Pe})},[]),children:r})}),he?X.jsxs(zM,{"aria-hidden":!0,required:b,tabIndex:-1,name:B,autoComplete:I,value:ae,onChange:rt=>Le(rt.target.value),disabled:P,form:N,children:[ae===void 0?X.jsx("option",{value:""}):null,Array.from(Ie)]},nt):null]})})};gM.displayName=Rd;var yM="SelectTrigger",vM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:i=!1,...a}=e,u=P1(r),h=Dh(yM,r),o=h.disabled||i,g=fi(t,h.onTriggerChange),w=T1(r),B=ee.useRef("touch"),[I,P,b]=jM(k=>{const H=w().filter(K=>!K.disabled),U=H.find(K=>K.value===h.value),Q=VM(H,k,U);Q!==void 0&&h.onValueChange(Q.value)}),N=k=>{o||(h.onOpenChange(!0),b()),k&&(h.triggerPointerDownPosRef.current={x:Math.round(k.pageX),y:Math.round(k.pageY)})};return X.jsx(cL,{asChild:!0,...u,children:X.jsx(In.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":HM(h.value)?"":void 0,...a,ref:g,onClick:cn(a.onClick,k=>{k.currentTarget.focus(),B.current!=="mouse"&&N(k)}),onPointerDown:cn(a.onPointerDown,k=>{B.current=k.pointerType;const H=k.target;H.hasPointerCapture(k.pointerId)&&H.releasePointerCapture(k.pointerId),k.button===0&&k.ctrlKey===!1&&k.pointerType==="mouse"&&(N(k),k.preventDefault())}),onKeyDown:cn(a.onKeyDown,k=>{const H=I.current!=="";!(k.ctrlKey||k.altKey||k.metaKey)&&k.key.length===1&&P(k.key),!(H&&k.key===" ")&&B9.includes(k.key)&&(N(),k.preventDefault())})})})});vM.displayName=yM;var _M="SelectValue",wM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:a,children:u,placeholder:h="",...o}=e,g=Dh(_M,r),{onValueNodeHasChildrenChange:w}=g,B=u!==void 0,I=fi(t,g.onValueNodeChange);return Fo(()=>{w(B)},[w,B]),X.jsx(In.span,{...o,ref:I,style:{pointerEvents:"none"},children:HM(g.value)?X.jsx(X.Fragment,{children:h}):u})});wM.displayName=_M;var T9="SelectIcon",xM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,children:i,...a}=e;return X.jsx(In.span,{"aria-hidden":!0,...a,ref:t,children:i||"▼"})});xM.displayName=T9;var P9="SelectPortal",bM=e=>X.jsx(gB,{asChild:!0,...e});bM.displayName=P9;var Nd="SelectContent",BM=ee.forwardRef((e,t)=>{const r=Dh(Nd,e.__scopeSelect),[i,a]=ee.useState();if(Fo(()=>{a(new DocumentFragment)},[]),!r.open){const u=i;return u?Hd.createPortal(X.jsx(CM,{scope:e.__scopeSelect,children:X.jsx(F1.Slot,{scope:e.__scopeSelect,children:X.jsx("div",{children:e.children})})}),u):null}return X.jsx(SM,{...e,ref:t})});BM.displayName=Nd;var bA=10,[CM,Qh]=Dp(Nd),L9="SelectContentImpl",M9=vg("SelectContent.RemoveScroll"),SM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:u,onPointerDownOutside:h,side:o,sideOffset:g,align:w,alignOffset:B,arrowPadding:I,collisionBoundary:P,collisionPadding:b,sticky:N,hideWhenDetached:k,avoidCollisions:H,...U}=e,Q=Dh(Nd,r),[K,Z]=ee.useState(null),[Ae,fe]=ee.useState(null),ge=fi(t,Ze=>Z(Ze)),[me,ae]=ee.useState(null),[Le,re]=ee.useState(null),he=T1(r),[Ie,we]=ee.useState(!1),nt=ee.useRef(!1);ee.useEffect(()=>{if(K)return zj(K)},[K]),Tj();const rt=ee.useCallback(Ze=>{const[Ct,...dt]=he().map($t=>$t.ref.current),[Lt]=dt.slice(-1),kt=document.activeElement;for(const $t of Ze)if($t===kt||($t==null||$t.scrollIntoView({block:"nearest"}),$t===Ct&&Ae&&(Ae.scrollTop=0),$t===Lt&&Ae&&(Ae.scrollTop=Ae.scrollHeight),$t==null||$t.focus(),document.activeElement!==kt))return},[he,Ae]),ct=ee.useCallback(()=>rt([me,K]),[rt,me,K]);ee.useEffect(()=>{Ie&&ct()},[Ie,ct]);const{onOpenChange:Pe,triggerPointerDownPosRef:Ve}=Q;ee.useEffect(()=>{if(K){let Ze={x:0,y:0};const Ct=Lt=>{var kt,$t;Ze={x:Math.abs(Math.round(Lt.pageX)-(((kt=Ve.current)==null?void 0:kt.x)??0)),y:Math.abs(Math.round(Lt.pageY)-((($t=Ve.current)==null?void 0:$t.y)??0))}},dt=Lt=>{Ze.x<=10&&Ze.y<=10?Lt.preventDefault():K.contains(Lt.target)||Pe(!1),document.removeEventListener("pointermove",Ct),Ve.current=null};return Ve.current!==null&&(document.addEventListener("pointermove",Ct),document.addEventListener("pointerup",dt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ct),document.removeEventListener("pointerup",dt,{capture:!0})}}},[K,Pe,Ve]),ee.useEffect(()=>{const Ze=()=>Pe(!1);return window.addEventListener("blur",Ze),window.addEventListener("resize",Ze),()=>{window.removeEventListener("blur",Ze),window.removeEventListener("resize",Ze)}},[Pe]);const[mt,gt]=jM(Ze=>{const Ct=he().filter(kt=>!kt.disabled),dt=Ct.find(kt=>kt.ref.current===document.activeElement),Lt=VM(Ct,Ze,dt);Lt&&setTimeout(()=>Lt.ref.current.focus())}),ie=ee.useCallback((Ze,Ct,dt)=>{const Lt=!nt.current&&!dt;(Q.value!==void 0&&Q.value===Ct||Lt)&&(ae(Ze),Lt&&(nt.current=!0))},[Q.value]),Ee=ee.useCallback(()=>K==null?void 0:K.focus(),[K]),Me=ee.useCallback((Ze,Ct,dt)=>{const Lt=!nt.current&&!dt;(Q.value!==void 0&&Q.value===Ct||Lt)&&re(Ze)},[Q.value]),Ye=i==="popper"?Sb:EM,at=Ye===Sb?{side:o,sideOffset:g,align:w,alignOffset:B,arrowPadding:I,collisionBoundary:P,collisionPadding:b,sticky:N,hideWhenDetached:k,avoidCollisions:H}:{};return X.jsx(CM,{scope:r,content:K,viewport:Ae,onViewportChange:fe,itemRefCallback:ie,selectedItem:me,onItemLeave:Ee,itemTextRefCallback:Me,focusSelectedItem:ct,selectedItemText:Le,position:i,isPositioned:Ie,searchRef:mt,children:X.jsx(mM,{as:M9,allowPinchZoom:!0,children:X.jsx(oM,{asChild:!0,trapped:Q.open,onMountAutoFocus:Ze=>{Ze.preventDefault()},onUnmountAutoFocus:cn(a,Ze=>{var Ct;(Ct=Q.trigger)==null||Ct.focus({preventScroll:!0}),Ze.preventDefault()}),children:X.jsx(c1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:Ze=>Ze.preventDefault(),onDismiss:()=>Q.onOpenChange(!1),children:X.jsx(Ye,{role:"listbox",id:Q.contentId,"data-state":Q.open?"open":"closed",dir:Q.dir,onContextMenu:Ze=>Ze.preventDefault(),...U,...at,onPlaced:()=>we(!0),ref:ge,style:{display:"flex",flexDirection:"column",outline:"none",...U.style},onKeyDown:cn(U.onKeyDown,Ze=>{const Ct=Ze.ctrlKey||Ze.altKey||Ze.metaKey;if(Ze.key==="Tab"&&Ze.preventDefault(),!Ct&&Ze.key.length===1&&gt(Ze.key),["ArrowUp","ArrowDown","Home","End"].includes(Ze.key)){let Lt=he().filter(kt=>!kt.disabled).map(kt=>kt.ref.current);if(["ArrowUp","End"].includes(Ze.key)&&(Lt=Lt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ze.key)){const kt=Ze.target,$t=Lt.indexOf(kt);Lt=Lt.slice($t+1)}setTimeout(()=>rt(Lt)),Ze.preventDefault()}})})})})})})});SM.displayName=L9;var k9="SelectItemAlignedPosition",EM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:i,...a}=e,u=Dh(Nd,r),h=Qh(Nd,r),[o,g]=ee.useState(null),[w,B]=ee.useState(null),I=fi(t,ge=>B(ge)),P=T1(r),b=ee.useRef(!1),N=ee.useRef(!0),{viewport:k,selectedItem:H,selectedItemText:U,focusSelectedItem:Q}=h,K=ee.useCallback(()=>{if(u.trigger&&u.valueNode&&o&&w&&k&&H&&U){const ge=u.trigger.getBoundingClientRect(),me=w.getBoundingClientRect(),ae=u.valueNode.getBoundingClientRect(),Le=U.getBoundingClientRect();if(u.dir!=="rtl"){const kt=Le.left-me.left,$t=ae.left-kt,Gt=ge.left-$t,Pt=ge.width+Gt,Ke=Math.max(Pt,me.width),Gr=window.innerWidth-bA,wr=HE($t,[bA,Math.max(bA,Gr-Ke)]);o.style.minWidth=Pt+"px",o.style.left=wr+"px"}else{const kt=me.right-Le.right,$t=window.innerWidth-ae.right-kt,Gt=window.innerWidth-ge.right-$t,Pt=ge.width+Gt,Ke=Math.max(Pt,me.width),Gr=window.innerWidth-bA,wr=HE($t,[bA,Math.max(bA,Gr-Ke)]);o.style.minWidth=Pt+"px",o.style.right=wr+"px"}const re=P(),he=window.innerHeight-bA*2,Ie=k.scrollHeight,we=window.getComputedStyle(w),nt=parseInt(we.borderTopWidth,10),rt=parseInt(we.paddingTop,10),ct=parseInt(we.borderBottomWidth,10),Pe=parseInt(we.paddingBottom,10),Ve=nt+rt+Ie+Pe+ct,mt=Math.min(H.offsetHeight*5,Ve),gt=window.getComputedStyle(k),ie=parseInt(gt.paddingTop,10),Ee=parseInt(gt.paddingBottom,10),Me=ge.top+ge.height/2-bA,Ye=he-Me,at=H.offsetHeight/2,Ze=H.offsetTop+at,Ct=nt+rt+Ze,dt=Ve-Ct;if(Ct<=Me){const kt=re.length>0&&H===re[re.length-1].ref.current;o.style.bottom="0px";const $t=w.clientHeight-k.offsetTop-k.offsetHeight,Gt=Math.max(Ye,at+(kt?Ee:0)+$t+ct),Pt=Ct+Gt;o.style.height=Pt+"px"}else{const kt=re.length>0&&H===re[0].ref.current;o.style.top="0px";const Gt=Math.max(Me,nt+k.offsetTop+(kt?ie:0)+at)+dt;o.style.height=Gt+"px",k.scrollTop=Ct-Me+k.offsetTop}o.style.margin=`${bA}px 0`,o.style.minHeight=mt+"px",o.style.maxHeight=he+"px",i==null||i(),requestAnimationFrame(()=>b.current=!0)}},[P,u.trigger,u.valueNode,o,w,k,H,U,u.dir,i]);Fo(()=>K(),[K]);const[Z,Ae]=ee.useState();Fo(()=>{w&&Ae(window.getComputedStyle(w).zIndex)},[w]);const fe=ee.useCallback(ge=>{ge&&N.current===!0&&(K(),Q==null||Q(),N.current=!1)},[K,Q]);return X.jsx(R9,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:b,onScrollButtonChange:fe,children:X.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Z},children:X.jsx(In.div,{...a,ref:I,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});EM.displayName=k9;var U9="SelectPopperPosition",Sb=ee.forwardRef((e,t)=>{const{__scopeSelect:r,align:i="start",collisionPadding:a=bA,...u}=e,h=P1(r);return X.jsx(uL,{...h,...u,ref:t,align:i,collisionPadding:a,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sb.displayName=U9;var[R9,QB]=Dp(Nd,{}),Eb="SelectViewport",IM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:i,...a}=e,u=Qh(Eb,r),h=QB(Eb,r),o=fi(t,u.onViewportChange),g=ee.useRef(0);return X.jsxs(X.Fragment,{children:[X.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),X.jsx(F1.Slot,{scope:r,children:X.jsx(In.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:cn(a.onScroll,w=>{const B=w.currentTarget,{contentWrapper:I,shouldExpandOnScrollRef:P}=h;if(P!=null&&P.current&&I){const b=Math.abs(g.current-B.scrollTop);if(b>0){const N=window.innerHeight-bA*2,k=parseFloat(I.style.minHeight),H=parseFloat(I.style.height),U=Math.max(k,H);if(U<N){const Q=U+b,K=Math.min(N,Q),Z=Q-K;I.style.height=K+"px",I.style.bottom==="0px"&&(B.scrollTop=Z>0?Z:0,I.style.justifyContent="flex-end")}}}g.current=B.scrollTop})})})]})});IM.displayName=Eb;var FM="SelectGroup",[N9,D9]=Dp(FM),Q9=ee.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=p1();return X.jsx(N9,{scope:r,id:a,children:X.jsx(In.div,{role:"group","aria-labelledby":a,...i,ref:t})})});Q9.displayName=FM;var TM="SelectLabel",PM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=D9(TM,r);return X.jsx(In.div,{id:a.id,...i,ref:t})});PM.displayName=TM;var Bv="SelectItem",[O9,LM]=Dp(Bv),MM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,value:i,disabled:a=!1,textValue:u,...h}=e,o=Dh(Bv,r),g=Qh(Bv,r),w=o.value===i,[B,I]=ee.useState(u??""),[P,b]=ee.useState(!1),N=fi(t,Q=>{var K;return(K=g.itemRefCallback)==null?void 0:K.call(g,Q,i,a)}),k=p1(),H=ee.useRef("touch"),U=()=>{a||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return X.jsx(O9,{scope:r,value:i,disabled:a,textId:k,isSelected:w,onItemTextChange:ee.useCallback(Q=>{I(K=>K||((Q==null?void 0:Q.textContent)??"").trim())},[]),children:X.jsx(F1.ItemSlot,{scope:r,value:i,disabled:a,textValue:B,children:X.jsx(In.div,{role:"option","aria-labelledby":k,"data-highlighted":P?"":void 0,"aria-selected":w&&P,"data-state":w?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...h,ref:N,onFocus:cn(h.onFocus,()=>b(!0)),onBlur:cn(h.onBlur,()=>b(!1)),onClick:cn(h.onClick,()=>{H.current!=="mouse"&&U()}),onPointerUp:cn(h.onPointerUp,()=>{H.current==="mouse"&&U()}),onPointerDown:cn(h.onPointerDown,Q=>{H.current=Q.pointerType}),onPointerMove:cn(h.onPointerMove,Q=>{var K;H.current=Q.pointerType,a?(K=g.onItemLeave)==null||K.call(g):H.current==="mouse"&&Q.currentTarget.focus({preventScroll:!0})}),onPointerLeave:cn(h.onPointerLeave,Q=>{var K;Q.currentTarget===document.activeElement&&((K=g.onItemLeave)==null||K.call(g))}),onKeyDown:cn(h.onKeyDown,Q=>{var Z;((Z=g.searchRef)==null?void 0:Z.current)!==""&&Q.key===" "||(C9.includes(Q.key)&&U(),Q.key===" "&&Q.preventDefault())})})})})});MM.displayName=Bv;var Im="SelectItemText",kM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:a,...u}=e,h=Dh(Im,r),o=Qh(Im,r),g=LM(Im,r),w=F9(Im,r),[B,I]=ee.useState(null),P=fi(t,U=>I(U),g.onItemTextChange,U=>{var Q;return(Q=o.itemTextRefCallback)==null?void 0:Q.call(o,U,g.value,g.disabled)}),b=B==null?void 0:B.textContent,N=ee.useMemo(()=>X.jsx("option",{value:g.value,disabled:g.disabled,children:b},g.value),[g.disabled,g.value,b]),{onNativeOptionAdd:k,onNativeOptionRemove:H}=w;return Fo(()=>(k(N),()=>H(N)),[k,H,N]),X.jsxs(X.Fragment,{children:[X.jsx(In.span,{id:g.textId,...u,ref:P}),g.isSelected&&h.valueNode&&!h.valueNodeHasChildren?Hd.createPortal(u.children,h.valueNode):null]})});kM.displayName=Im;var UM="SelectItemIndicator",RM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return LM(UM,r).isSelected?X.jsx(In.span,{"aria-hidden":!0,...i,ref:t}):null});RM.displayName=UM;var Ib="SelectScrollUpButton",NM=ee.forwardRef((e,t)=>{const r=Qh(Ib,e.__scopeSelect),i=QB(Ib,e.__scopeSelect),[a,u]=ee.useState(!1),h=fi(t,i.onScrollButtonChange);return Fo(()=>{if(r.viewport&&r.isPositioned){let o=function(){const w=g.scrollTop>0;u(w)};const g=r.viewport;return o(),g.addEventListener("scroll",o),()=>g.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?X.jsx(QM,{...e,ref:h,onAutoScroll:()=>{const{viewport:o,selectedItem:g}=r;o&&g&&(o.scrollTop=o.scrollTop-g.offsetHeight)}}):null});NM.displayName=Ib;var Fb="SelectScrollDownButton",DM=ee.forwardRef((e,t)=>{const r=Qh(Fb,e.__scopeSelect),i=QB(Fb,e.__scopeSelect),[a,u]=ee.useState(!1),h=fi(t,i.onScrollButtonChange);return Fo(()=>{if(r.viewport&&r.isPositioned){let o=function(){const w=g.scrollHeight-g.clientHeight,B=Math.ceil(g.scrollTop)<w;u(B)};const g=r.viewport;return o(),g.addEventListener("scroll",o),()=>g.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?X.jsx(QM,{...e,ref:h,onAutoScroll:()=>{const{viewport:o,selectedItem:g}=r;o&&g&&(o.scrollTop=o.scrollTop+g.offsetHeight)}}):null});DM.displayName=Fb;var QM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:i,...a}=e,u=Qh("SelectScrollButton",r),h=ee.useRef(null),o=T1(r),g=ee.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return ee.useEffect(()=>()=>g(),[g]),Fo(()=>{var B;const w=o().find(I=>I.ref.current===document.activeElement);(B=w==null?void 0:w.ref.current)==null||B.scrollIntoView({block:"nearest"})},[o]),X.jsx(In.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:cn(a.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(i,50))}),onPointerMove:cn(a.onPointerMove,()=>{var w;(w=u.onItemLeave)==null||w.call(u),h.current===null&&(h.current=window.setInterval(i,50))}),onPointerLeave:cn(a.onPointerLeave,()=>{g()})})}),z9="SelectSeparator",OM=ee.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return X.jsx(In.div,{"aria-hidden":!0,...i,ref:t})});OM.displayName=z9;var Tb="SelectArrow",H9=ee.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=P1(r),u=Dh(Tb,r),h=Qh(Tb,r);return u.open&&h.position==="popper"?X.jsx(hL,{...a,...i,ref:t}):null});H9.displayName=Tb;var j9="SelectBubbleInput",zM=ee.forwardRef(({__scopeSelect:e,value:t,...r},i)=>{const a=ee.useRef(null),u=fi(i,a),h=NB(t);return ee.useEffect(()=>{const o=a.current;if(!o)return;const g=window.HTMLSelectElement.prototype,B=Object.getOwnPropertyDescriptor(g,"value").set;if(h!==t&&B){const I=new Event("change",{bubbles:!0});B.call(o,t),o.dispatchEvent(I)}},[h,t]),X.jsx(In.select,{...r,style:{...oP,...r.style},ref:u,defaultValue:t})});zM.displayName=j9;function HM(e){return e===""||e===void 0}function jM(e){const t=Wl(e),r=ee.useRef(""),i=ee.useRef(0),a=ee.useCallback(h=>{const o=r.current+h;t(o),function g(w){r.current=w,window.clearTimeout(i.current),w!==""&&(i.current=window.setTimeout(()=>g(""),1e3))}(o)},[t]),u=ee.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return ee.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,a,u]}function VM(e,t,r){const a=t.length>1&&Array.from(t).every(w=>w===t[0])?t[0]:t,u=r?e.indexOf(r):-1;let h=V9(e,Math.max(u,0));a.length===1&&(h=h.filter(w=>w!==r));const g=h.find(w=>w.textValue.toLowerCase().startsWith(a.toLowerCase()));return g!==r?g:void 0}function V9(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var K9=gM,KM=vM,G9=wM,$9=xM,q9=bM,GM=BM,W9=IM,$M=PM,qM=MM,Z9=kM,X9=RM,WM=NM,ZM=DM,XM=OM;const Pb=K9,Lb=G9,Cv=ee.forwardRef(({className:e,children:t,...r},i)=>X.jsxs(KM,{ref:i,className:jn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,X.jsx($9,{asChild:!0,children:X.jsx(TP,{className:"h-4 w-4 opacity-50"})})]}));Cv.displayName=KM.displayName;const YM=ee.forwardRef(({className:e,...t},r)=>X.jsx(WM,{ref:r,className:jn("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(M8,{className:"h-4 w-4"})}));YM.displayName=WM.displayName;const JM=ee.forwardRef(({className:e,...t},r)=>X.jsx(ZM,{ref:r,className:jn("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(TP,{className:"h-4 w-4"})}));JM.displayName=ZM.displayName;const Sv=ee.forwardRef(({className:e,children:t,position:r="popper",...i},a)=>X.jsx(q9,{children:X.jsxs(GM,{ref:a,className:jn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[X.jsx(YM,{}),X.jsx(W9,{className:jn("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),X.jsx(JM,{})]})}));Sv.displayName=GM.displayName;const Y9=ee.forwardRef(({className:e,...t},r)=>X.jsx($M,{ref:r,className:jn("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Y9.displayName=$M.displayName;const Ev=ee.forwardRef(({className:e,children:t,...r},i)=>X.jsxs(qM,{ref:i,className:jn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[X.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:X.jsx(X9,{children:X.jsx(FP,{className:"h-4 w-4"})})}),X.jsx(Z9,{children:t})]}));Ev.displayName=qM.displayName;const J9=ee.forwardRef(({className:e,...t},r)=>X.jsx(XM,{ref:r,className:jn("-mx-1 my-1 h-px bg-muted",e),...t}));J9.displayName=XM.displayName;var L1="Checkbox",[eV,tee]=Bu(L1),[tV,OB]=eV(L1);function rV(e){const{__scopeCheckbox:t,checked:r,children:i,defaultChecked:a,disabled:u,form:h,name:o,onCheckedChange:g,required:w,value:B="on",internal_do_not_use_render:I}=e,[P,b]=Ep({prop:r,defaultProp:a??!1,onChange:g,caller:L1}),[N,k]=ee.useState(null),[H,U]=ee.useState(null),Q=ee.useRef(!1),K=N?!!h||!!N.closest("form"):!0,Z={checked:P,disabled:u,setChecked:b,control:N,setControl:k,name:o,form:h,value:B,hasConsumerStoppedPropagationRef:Q,required:w,defaultChecked:Sh(a)?!1:a,isFormControl:K,bubbleInput:H,setBubbleInput:U};return X.jsx(tV,{scope:t,...Z,children:nV(I)?I(Z):i})}var ek="CheckboxTrigger",tk=ee.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...i},a)=>{const{control:u,value:h,disabled:o,checked:g,required:w,setControl:B,setChecked:I,hasConsumerStoppedPropagationRef:P,isFormControl:b,bubbleInput:N}=OB(ek,e),k=fi(a,B),H=ee.useRef(g);return ee.useEffect(()=>{const U=u==null?void 0:u.form;if(U){const Q=()=>I(H.current);return U.addEventListener("reset",Q),()=>U.removeEventListener("reset",Q)}},[u,I]),X.jsx(In.button,{type:"button",role:"checkbox","aria-checked":Sh(g)?"mixed":g,"aria-required":w,"data-state":ok(g),"data-disabled":o?"":void 0,disabled:o,value:h,...i,ref:k,onKeyDown:cn(t,U=>{U.key==="Enter"&&U.preventDefault()}),onClick:cn(r,U=>{I(Q=>Sh(Q)?!0:!Q),N&&b&&(P.current=U.isPropagationStopped(),P.current||U.stopPropagation())})})});tk.displayName=ek;var zB=ee.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:i,checked:a,defaultChecked:u,required:h,disabled:o,value:g,onCheckedChange:w,form:B,...I}=e;return X.jsx(rV,{__scopeCheckbox:r,checked:a,defaultChecked:u,disabled:o,required:h,onCheckedChange:w,name:i,form:B,value:g,internal_do_not_use_render:({isFormControl:P})=>X.jsxs(X.Fragment,{children:[X.jsx(tk,{...I,ref:t,__scopeCheckbox:r}),P&&X.jsx(sk,{__scopeCheckbox:r})]})})});zB.displayName=L1;var rk="CheckboxIndicator",nk=ee.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:i,...a}=e,u=OB(rk,r);return X.jsx(Qg,{present:i||Sh(u.checked)||u.checked===!0,children:X.jsx(In.span,{"data-state":ok(u.checked),"data-disabled":u.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});nk.displayName=rk;var ik="CheckboxBubbleInput",sk=ee.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:i,hasConsumerStoppedPropagationRef:a,checked:u,defaultChecked:h,required:o,disabled:g,name:w,value:B,form:I,bubbleInput:P,setBubbleInput:b}=OB(ik,e),N=fi(r,b),k=NB(u),H=FB(i);ee.useEffect(()=>{const Q=P;if(!Q)return;const K=window.HTMLInputElement.prototype,Ae=Object.getOwnPropertyDescriptor(K,"checked").set,fe=!a.current;if(k!==u&&Ae){const ge=new Event("click",{bubbles:fe});Q.indeterminate=Sh(u),Ae.call(Q,Sh(u)?!1:u),Q.dispatchEvent(ge)}},[P,k,u,a]);const U=ee.useRef(Sh(u)?!1:u);return X.jsx(In.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??U.current,required:o,disabled:g,name:w,value:B,form:I,...t,tabIndex:-1,ref:N,style:{...t.style,...H,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});sk.displayName=ik;function nV(e){return typeof e=="function"}function Sh(e){return e==="indeterminate"}function ok(e){return Sh(e)?"indeterminate":e?"checked":"unchecked"}const Mb=ee.forwardRef(({className:e,...t},r)=>X.jsx(zB,{ref:r,className:jn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:X.jsx(nk,{className:jn("flex items-center justify-center text-current"),children:X.jsx(FP,{className:"h-4 w-4"})})}));Mb.displayName=zB.displayName;var iV="Separator",JE="horizontal",sV=["horizontal","vertical"],ak=ee.forwardRef((e,t)=>{const{decorative:r,orientation:i=JE,...a}=e,u=oV(i)?i:JE,o=r?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return X.jsx(In.div,{"data-orientation":u,...o,...a,ref:t})});ak.displayName=iV;function oV(e){return sV.includes(e)}var lk=ak;const Ak=ee.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...i},a)=>X.jsx(lk,{ref:a,decorative:r,orientation:t,className:jn("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...i}));Ak.displayName=lk.displayName;function aV({allZipData:e,isExporting:t,onExport:r,onCancel:i}){const[a,u]=ee.useState("national"),[h,o]=ee.useState(""),[g,w]=ee.useState(""),[B,I]=ee.useState("png"),[P,b]=ee.useState(!0),[N,k]=ee.useState(!0),{availableStates:H,availableMetros:U}=ee.useMemo(()=>{if(Object.keys(e).length===0)return{availableStates:[],availableMetros:[]};const fe=new Set,ge=new Set;for(const me of Object.values(e))me.state&&fe.add(me.state),me.parent_metro&&ge.add(me.parent_metro);return{availableStates:Array.from(fe).sort(),availableMetros:Array.from(ge).sort()}},[e]),Q=()=>{r({regionScope:a,selectedState:h,selectedMetro:g,fileFormat:B,includeLegend:P,includeTitle:N})},K=()=>!!(t||a==="state"&&!h||a==="metro"&&!g),Z=fe=>u(fe),Ae=fe=>I(fe);return X.jsx("div",{className:"absolute top-0 left-0 w-80 bg-background border-r h-full overflow-y-auto z-20 shadow-xl",children:X.jsxs("div",{className:"p-6 space-y-6",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:X.jsx(Q8,{className:"h-5 w-5 text-primary"})}),X.jsxs("div",{children:[X.jsx("h2",{className:"text-lg font-semibold",children:"Export Map"}),X.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure your export settings"})]})]}),X.jsxs(Bh,{children:[X.jsx(Gm,{children:X.jsxs($m,{className:"text-sm flex items-center gap-2",children:[X.jsx(D8,{className:"h-4 w-4"}),"Region Scope"]})}),X.jsxs(Ch,{className:"space-y-4",children:[X.jsxs(Bb,{value:a,onValueChange:Z,children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Ff,{value:"national",id:"r-national"}),X.jsx(Wu,{htmlFor:"r-national",children:"National"})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Ff,{value:"state",id:"r-state"}),X.jsx(Wu,{htmlFor:"r-state",children:"State"})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Ff,{value:"metro",id:"r-metro"}),X.jsx(Wu,{htmlFor:"r-metro",children:"Metro Area"})]})]}),a==="state"&&X.jsxs(Pb,{value:h,onValueChange:o,children:[X.jsx(Cv,{children:X.jsx(Lb,{placeholder:"Select a state"})}),X.jsx(Sv,{children:H.map(fe=>X.jsx(Ev,{value:fe,children:fe},fe))})]}),a==="metro"&&X.jsxs(Pb,{value:g,onValueChange:w,children:[X.jsx(Cv,{children:X.jsx(Lb,{placeholder:"Select a metro area"})}),X.jsx(Sv,{children:U.map(fe=>X.jsx(Ev,{value:fe,children:fe},fe))})]})]})]}),X.jsxs(Bh,{children:[X.jsx(Gm,{children:X.jsxs($m,{className:"text-sm flex items-center gap-2",children:[X.jsx(U8,{className:"h-4 w-4"}),"File Format"]})}),X.jsx(Ch,{children:X.jsxs(Bb,{value:B,onValueChange:Ae,children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Ff,{value:"png",id:"r-png"}),X.jsx(Wu,{htmlFor:"r-png",children:"PNG (Image)"})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Ff,{value:"pdf",id:"r-pdf"}),X.jsx(Wu,{htmlFor:"r-pdf",children:"PDF (Document)"})]})]})})]}),X.jsxs(Bh,{children:[X.jsx(Gm,{children:X.jsx($m,{className:"text-sm",children:"Customization"})}),X.jsxs(Ch,{className:"space-y-2",children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Mb,{id:"c-title",checked:N,onCheckedChange:fe=>k(fe===!0)}),X.jsx(Wu,{htmlFor:"c-title",children:"Include Title"})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Mb,{id:"c-legend",checked:P,onCheckedChange:fe=>b(fe===!0)}),X.jsx(Wu,{htmlFor:"c-legend",children:"Include Legend"})]})]})]}),X.jsx(Ak,{}),X.jsxs("div",{className:"space-y-3",children:[X.jsx(ea,{onClick:Q,disabled:K(),className:"w-full",size:"lg",children:t?"Processing...":X.jsxs(X.Fragment,{children:[X.jsx(PP,{className:"h-4 w-4 mr-2"}),"Export ",B.toUpperCase()]})}),X.jsx(ea,{onClick:i,variant:"outline",className:"w-full",disabled:t,children:"Cancel"})]})]})})}var ck={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.1/LICENSE.txt
 */(function(e,t){(function(r,i){e.exports=i()})(nN,function(){var r={},i={};function a(h,o,g){if(i[h]=g,h==="index"){var w="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",B={};return i.shared(B),i.index(r,B),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),r}}a("shared",["exports"],function(h){function o(c,s,A,d){return new(A||(A=Promise))(function(m,_){function x(R){try{L(d.next(R))}catch(z){_(z)}}function E(R){try{L(d.throw(R))}catch(z){_(z)}}function L(R){var z;R.done?m(R.value):(z=R.value,z instanceof A?z:new A(function(G){G(z)})).then(x,E)}L((d=d.apply(c,s||[])).next())})}function g(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var w,B;function I(){if(B)return w;function c(s,A){this.x=s,this.y=A}return B=1,w=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,A){return this.clone()._rotateAround(s,A)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var A=s.x-this.x,d=s.y-this.y;return A*A+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,A){return Math.atan2(this.x*A-this.y*s,this.x*s+this.y*A)},_matMult:function(s){var A=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=A,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var A=Math.cos(s),d=Math.sin(s),m=d*this.x+A*this.y;return this.x=A*this.x-d*this.y,this.y=m,this},_rotateAround:function(s,A){var d=Math.cos(s),m=Math.sin(s),_=A.y+m*(this.x-A.x)+d*(this.y-A.y);return this.x=A.x+d*(this.x-A.x)-m*(this.y-A.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(s){return s instanceof c?s:Array.isArray(s)?new c(s[0],s[1]):s},w}typeof SuppressedError=="function"&&SuppressedError;var P,b,N=g(I()),k=function(){if(b)return P;function c(s,A,d,m){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(m-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=A,this.p2x=d,this.p2y=m}return b=1,P=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,A){if(A===void 0&&(A=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,m=0;m<8;m++){var _=this.sampleCurveX(d)-s;if(Math.abs(_)<A)return d;var x=this.sampleCurveDerivativeX(d);if(Math.abs(x)<1e-6)break;d-=_/x}var E=0,L=1;for(d=s,m=0;m<20&&(_=this.sampleCurveX(d),!(Math.abs(_-s)<A));m++)s>_?E=d:L=d,d=.5*(L-E)+E;return d},solve:function(s,A){return this.sampleCurveY(this.solveCurveX(s,A))}},P}(),H=g(k);let U,Q;function K(){return U==null&&(U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),U}function Z(){if(Q==null&&(Q=!1,K())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let d=0;d<5*5;d++){const m=4*d;s.fillStyle=`rgb(${m},${m+1},${m+2})`,s.fillRect(d%5,Math.floor(d/5),1,1)}const A=s.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&A[d]!==d){Q=!0;break}}}return Q||!1}var Ae=1e-6,fe=typeof Float32Array<"u"?Float32Array:Array;function ge(){var c=new fe(9);return fe!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function me(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ae(){var c=new fe(3);return fe!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function Le(c){return Math.hypot(c[0],c[1],c[2])}function re(c,s,A){var d=new fe(3);return d[0]=c,d[1]=s,d[2]=A,d}function he(c,s,A){return c[0]=s[0]+A[0],c[1]=s[1]+A[1],c[2]=s[2]+A[2],c}function Ie(c,s,A){return c[0]=s[0]*A,c[1]=s[1]*A,c[2]=s[2]*A,c}function we(c,s,A){var d=s[0],m=s[1],_=s[2],x=A[0],E=A[1],L=A[2];return c[0]=m*L-_*E,c[1]=_*x-d*L,c[2]=d*E-m*x,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var nt,rt=Le;function ct(c,s,A){var d=s[0],m=s[1],_=s[2],x=s[3];return c[0]=A[0]*d+A[4]*m+A[8]*_+A[12]*x,c[1]=A[1]*d+A[5]*m+A[9]*_+A[13]*x,c[2]=A[2]*d+A[6]*m+A[10]*_+A[14]*x,c[3]=A[3]*d+A[7]*m+A[11]*_+A[15]*x,c}function Pe(){var c=new fe(4);return fe!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Ve(c,s,A,d){var m=.5*Math.PI/180;s*=m,A*=m,d*=m;var _=Math.sin(s),x=Math.cos(s),E=Math.sin(A),L=Math.cos(A),R=Math.sin(d),z=Math.cos(d);return c[0]=_*L*z-x*E*R,c[1]=x*E*z+_*L*R,c[2]=x*L*R-_*E*z,c[3]=x*L*z+_*E*R,c}function mt(){var c=new fe(2);return fe!=Float32Array&&(c[0]=0,c[1]=0),c}function gt(c,s){var A=new fe(2);return A[0]=c,A[1]=s,A}ae(),nt=new fe(4),fe!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0,nt[3]=0),ae(),re(1,0,0),re(0,1,0),Pe(),Pe(),ge(),mt();const ie=8192;function Ee(c,s,A){return s*(ie/(c.tileSize*Math.pow(2,A-c.tileID.overscaledZ)))}function Me(c,s){return(c%s+s)%s}function Ye(c,s,A){return c*(1-A)+s*A}function at(c){if(c<=0)return 0;if(c>=1)return 1;const s=c*c,A=s*c;return 4*(c<.5?A:3*(c-s)+A-.75)}function Ze(c,s,A,d){const m=new H(c,s,A,d);return _=>m.solve(_)}const Ct=Ze(.25,.1,.25,1);function dt(c,s,A){return Math.min(A,Math.max(s,c))}function Lt(c,s,A){const d=A-s,m=((c-s)%d+d)%d+s;return m===s?A:m}function kt(c,...s){for(const A of s)for(const d in A)c[d]=A[d];return c}let $t=1;function Gt(c,s,A){const d={};for(const m in c)d[m]=s.call(this,c[m],m,c);return d}function Pt(c,s,A){const d={};for(const m in c)s.call(this,c[m],m,c)&&(d[m]=c[m]);return d}function Ke(c){return Array.isArray(c)?c.map(Ke):typeof c=="object"&&c?Gt(c,Ke):c}const Gr={};function wr(c){Gr[c]||(typeof console<"u"&&console.warn(c),Gr[c]=!0)}function fr(c,s,A){return(A.y-c.y)*(s.x-c.x)>(s.y-c.y)*(A.x-c.x)}function Vt(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let xr=null;function ar(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const qr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function mr(c,s,A,d,m){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(c,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const E=x.startsWith("BGR"),L=new Uint8ClampedArray(d*m*4);if(yield _.copyTo(L,function(R,z,G,J,ne){const oe=4*Math.max(-z,0),pe=(Math.max(0,G)-G)*J*4+oe,Be=4*J,Re=Math.max(0,z),lt=Math.max(0,G);return{rect:{x:Re,y:lt,width:Math.min(R.width,z+J)-Re,height:Math.min(R.height,G+ne)-lt},layout:[{offset:pe,stride:Be}]}}(c,s,A,d,m)),E)for(let R=0;R<L.length;R+=4){const z=L[R];L[R]=L[R+2],L[R+2]=z}return L}finally{_.close()}})}let hn,Vr;function Sr(c,s,A,d){return c.addEventListener(s,A,d),{unsubscribe:()=>{c.removeEventListener(s,A,d)}}}function Jr(c){return c*Math.PI/180}function jr(c){return c/Math.PI*180}const Tr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Nr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},br="AbortError";function ot(){return new Error(br)}const le={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function se(c){return le.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const ve="global-dispatcher";class Ue extends Error{constructor(s,A,d,m){super(`AJAXError: ${A} (${s}): ${d}`),this.status=s,this.statusText=A,this.url=d,this.body=m}}const Ge=()=>Vt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,et=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const d=se(c.url);if(d)return d(c,s);if(Vt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:ve},s)}if(!(/^file:/.test(A=c.url)||/^file:/.test(Ge())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,m){return o(this,void 0,void 0,function*(){const _=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Ge(),signal:m.signal});let x,E;d.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{x=yield fetch(_)}catch(R){throw new Ue(0,R.message,d.url,new Blob)}if(!x.ok){const R=yield x.blob();throw new Ue(x.status,x.statusText,d.url,R)}E=d.type==="arrayBuffer"||d.type==="image"?x.arrayBuffer():d.type==="json"?x.json():x.text();const L=yield E;if(m.signal.aborted)throw ot();return{data:L,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(c,s);if(Vt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:ve},s)}var A;return function(d,m){return new Promise((_,x)=>{var E;const L=new XMLHttpRequest;L.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(L.responseType="arraybuffer");for(const R in d.headers)L.setRequestHeader(R,d.headers[R]);d.type==="json"&&(L.responseType="text",!((E=d.headers)===null||E===void 0)&&E.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=d.credentials==="include",L.onerror=()=>{x(new Error(L.statusText))},L.onload=()=>{if(!m.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let R=L.response;if(d.type==="json")try{R=JSON.parse(L.response)}catch(z){return void x(z)}_({data:R,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{const R=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});x(new Ue(L.status,L.statusText,d.url,R))}},m.signal.addEventListener("abort",()=>{L.abort(),x(ot())}),L.send(d.body)})}(c,s)};function At(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),A=window.location;return s.protocol===A.protocol&&s.host===A.host}function it(c,s,A){A[c]&&A[c].indexOf(s)!==-1||(A[c]=A[c]||[],A[c].push(s))}function St(c,s,A){if(A&&A[c]){const d=A[c].indexOf(s);d!==-1&&A[c].splice(d,1)}}class pt{constructor(s,A={}){kt(this,A),this.type=s}}class Je extends pt{constructor(s,A={}){super("error",kt({error:s},A))}}class Et{on(s,A){return this._listeners=this._listeners||{},it(s,A,this._listeners),{unsubscribe:()=>{this.off(s,A)}}}off(s,A){return St(s,A,this._listeners),St(s,A,this._oneTimeListeners),this}once(s,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},it(s,A,this._oneTimeListeners),this):new Promise(d=>this.once(s,d))}fire(s,A){typeof s=="string"&&(s=new pt(s,A||{}));const d=s.type;if(this.listens(d)){s.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const E of m)E.call(this,s);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const E of _)St(d,E,this._oneTimeListeners),E.call(this,s);const x=this._eventedParent;x&&(kt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(s))}else s instanceof Je&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,A){return this._eventedParent=s,this._eventedParentData=A,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Nt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function or(c,s){const A={};for(const d in c)d!=="ref"&&(A[d]=c[d]);return Nt.forEach(d=>{d in s&&(A[d]=s[d])}),A}function tr(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let A=0;A<c.length;A++)if(!tr(c[A],s[A]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const A in c)if(!tr(c[A],s[A]))return!1;return!0}return c===s}function Qt(c,s){c.push(s)}function gr(c,s,A){Qt(A,{command:"addSource",args:[c,s[c]]})}function on(c,s,A){Qt(s,{command:"removeSource",args:[c]}),A[c]=!0}function Qr(c,s,A,d){on(c,A,d),gr(c,s,A)}function Or(c,s,A){let d;for(d in c[A])if(Object.prototype.hasOwnProperty.call(c[A],d)&&d!=="data"&&!tr(c[A][d],s[A][d]))return!1;for(d in s[A])if(Object.prototype.hasOwnProperty.call(s[A],d)&&d!=="data"&&!tr(c[A][d],s[A][d]))return!1;return!0}function hr(c,s,A,d,m,_){c=c||{},s=s||{};for(const x in c)Object.prototype.hasOwnProperty.call(c,x)&&(tr(c[x],s[x])||A.push({command:_,args:[d,x,s[x],m]}));for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&!Object.prototype.hasOwnProperty.call(c,x)&&(tr(c[x],s[x])||A.push({command:_,args:[d,x,s[x],m]}))}function Dr(c){return c.id}function Fn(c,s){return c[s.id]=s,c}class Xt{constructor(s,A,d,m){this.message=(s?`${s}: `:"")+d,m&&(this.identifier=m),A!=null&&A.__line__&&(this.line=A.__line__)}}function li(c,...s){for(const A of s)for(const d in A)c[d]=A[d];return c}class Tn extends Error{constructor(s,A){super(A),this.message=A,this.key=s}}class vs{constructor(s,A=[]){this.parent=s,this.bindings={};for(const[d,m]of A)this.bindings[d]=m}concat(s){return new vs(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const _s={kind:"null"},Jt={kind:"number"},zr={kind:"string"},Wr={kind:"boolean"},_i={kind:"color"},xa={kind:"projectionDefinition"},Gs={kind:"object"},Xr={kind:"value"},ao={kind:"collator"},za={kind:"formatted"},ri={kind:"padding"},vl={kind:"colorArray"},_l={kind:"numberArray"},Oi={kind:"resolvedImage"},Ha={kind:"variableAnchorOffsetCollection"};function Ls(c,s){return{kind:"array",itemType:c,N:s}}function Vn(c){if(c.kind==="array"){const s=Vn(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const Tc=[_s,Jt,zr,Wr,_i,xa,za,Gs,Ls(Xr),ri,_l,vl,Oi,Ha];function wl(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!wl(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const A of Tc)if(!wl(A,s))return null}}return`Expected ${Vn(c)} but found ${Vn(s)} instead.`}function Xl(c,s){return s.some(A=>A.kind===c.kind)}function To(c,s){return s.some(A=>A==="null"?c===null:A==="array"?Array.isArray(c):A==="object"?c&&!Array.isArray(c)&&typeof c=="object":A===typeof c)}function ba(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const Fi=.96422,Pc=.82521,Lc=4/29,lo=6/29,xl=3*lo*lo,Po=lo*lo*lo,ra=Math.PI/180,Ti=180/Math.PI;function OA(c){return(c%=360)<0&&(c+=360),c}function bl([c,s,A,d]){let m,_;const x=kc((.2225045*(c=Mc(c))+.7168786*(s=Mc(s))+.0606169*(A=Mc(A)))/1);c===s&&s===A?m=_=x:(m=kc((.4360747*c+.3850649*s+.1430804*A)/Fi),_=kc((.0139322*c+.0971045*s+.7141733*A)/Pc));const E=116*x-16;return[E<0?0:E,500*(m-x),200*(x-_),d]}function Mc(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function kc(c){return c>Po?Math.pow(c,1/3):c/xl+Lc}function na([c,s,A,d]){let m=(c+16)/116,_=isNaN(s)?m:m+s/500,x=isNaN(A)?m:m-A/200;return m=1*Jl(m),_=Fi*Jl(_),x=Pc*Jl(x),[Yl(3.1338561*_-1.6168667*m-.4906146*x),Yl(-.9787684*_+1.9161415*m+.033454*x),Yl(.0719453*_-.2289914*m+1.4052427*x),d]}function Yl(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function Jl(c){return c>lo?c*c*c:xl*(c-Lc)}const ws=Object.hasOwn||function(c,s){return Object.prototype.hasOwnProperty.call(c,s)};function nn(c,s){return ws(c,s)?c[s]:void 0}function ia(c){return parseInt(c.padEnd(2,c),16)/255}function sa(c,s){return ja(s?c/100:c,0,1)}function ja(c,s,A){return Math.min(Math.max(s,c),A)}function eA(c){return!c.some(Number.isNaN)}const Va={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Zi(c,s,A){return c+A*(s-c)}function oa(c,s,A){return c.map((d,m)=>Zi(d,s[m],A))}class en{constructor(s,A,d,m=1,_=!0){this.r=s,this.g=A,this.b=d,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[s,A,d,m]))}static parse(s){if(s instanceof en)return s;if(typeof s!="string")return;const A=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=nn(Va,d);if(m){const[x,E,L]=m;return[x/255,E/255,L/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let E=1;return[ia(d.slice(E,E+=x)),ia(d.slice(E,E+=x)),ia(d.slice(E,E+=x)),ia(d.slice(E,E+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[E,L,R,z,G,J,ne,oe,pe,Be,Re,lt]=x,qe=[z||" ",ne||" ",Be].join("");if(qe==="  "||qe==="  /"||qe===",,"||qe===",,,"){const te=[R,J,pe].join(""),xe=te==="%%%"?100:te===""?255:0;if(xe){const We=[ja(+L/xe,0,1),ja(+G/xe,0,1),ja(+oe/xe,0,1),Re?sa(+Re,lt):1];if(eA(We))return We}}return}}const _=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,E,L,R,z,G,J,ne,oe]=_,pe=[L||" ",z||" ",J].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const Be=[+E,ja(+R,0,100),ja(+G,0,100),ne?sa(+ne,oe):1];if(eA(Be))return function([Re,lt,qe,te]){function xe(We){const bt=(We+Re/30)%12,Ht=lt*Math.min(qe,1-qe);return qe-Ht*Math.max(-1,Math.min(bt-3,9-bt,1))}return Re=OA(Re),lt/=100,qe/=100,[xe(0),xe(8),xe(4),te]}(Be)}}}(s);return A?new en(...A,!1):void 0}get rgb(){const{r:s,g:A,b:d,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[s/_,A/_,d/_,m])}get hcl(){return this.overwriteGetter("hcl",function(s){const[A,d,m,_]=bl(s),x=Math.sqrt(d*d+m*m);return[Math.round(1e4*x)?OA(Math.atan2(m,d)*Ti):NaN,x,A,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",bl(this.rgb))}overwriteGetter(s,A){return Object.defineProperty(this,s,{value:A}),A}toString(){const[s,A,d,m]=this.rgb;return`rgba(${[s,A,d].map(_=>Math.round(255*_)).join(",")},${m})`}static interpolate(s,A,d,m="rgb"){switch(m){case"rgb":{const[_,x,E,L]=oa(s.rgb,A.rgb,d);return new en(_,x,E,L,!1)}case"hcl":{const[_,x,E,L]=s.hcl,[R,z,G,J]=A.hcl;let ne,oe;if(isNaN(_)||isNaN(R))isNaN(_)?isNaN(R)?ne=NaN:(ne=R,E!==1&&E!==0||(oe=z)):(ne=_,G!==1&&G!==0||(oe=x));else{let qe=R-_;R>_&&qe>180?qe-=360:R<_&&_-R>180&&(qe+=360),ne=_+d*qe}const[pe,Be,Re,lt]=function([qe,te,xe,We]){return qe=isNaN(qe)?0:qe*ra,na([xe,Math.cos(qe)*te,Math.sin(qe)*te,We])}([ne,oe??Zi(x,z,d),Zi(E,G,d),Zi(L,J,d)]);return new en(pe,Be,Re,lt,!1)}case"lab":{const[_,x,E,L]=na(oa(s.lab,A.lab,d));return new en(_,x,E,L,!1)}}}}en.black=new en(0,0,0,1),en.white=new en(1,1,1,1),en.transparent=new en(0,0,0,0),en.red=new en(1,0,0,1);class Ka{constructor(s,A,d){this.sensitivity=s?A?"variant":"case":A?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,A){return this.collator.compare(s,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Yr=["bottom","center","top"];class Uc{constructor(s,A,d,m,_,x){this.text=s,this.image=A,this.scale=d,this.fontStack=m,this.textColor=_,this.verticalAlign=x}}class cs{constructor(s){this.sections=s}static fromString(s){return new cs([new Uc(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof cs?s:cs.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class wi{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof wi)return s;if(typeof s=="number")return new wi([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const A of s)if(typeof A!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new wi(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,A,d){return new wi(oa(s.values,A.values,d))}}class us{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof us)return s;if(typeof s=="number")return new us([s]);if(Array.isArray(s)){for(const A of s)if(typeof A!="number")return;return new us(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,A,d){return new us(oa(s.values,A.values,d))}}class Yn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Yn)return s;if(typeof s=="string"){const d=en.parse(s);return d?new Yn([d]):void 0}if(!Array.isArray(s))return;const A=[];for(const d of s){if(typeof d!="string")return;const m=en.parse(d);if(!m)return;A.push(m)}return new Yn(A)}toString(){return JSON.stringify(this.values)}static interpolate(s,A,d,m="rgb"){const _=[];if(s.values.length!=A.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${A.values.length}), cannot interpolate.`);for(let x=0;x<s.values.length;x++)_.push(en.interpolate(s.values[x],A.values[x],d,m));return new Yn(_)}}class Ln extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}const zA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class pn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof pn)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let A=0;A<s.length;A+=2){const d=s[A],m=s[A+1];if(typeof d!="string"||!zA.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new pn(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,A,d){const m=s.values,_=A.values;if(m.length!==_.length)throw new Ln(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${A.toString()}`);const x=[];for(let E=0;E<m.length;E+=2){if(m[E]!==_[E])throw new Ln(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${m[E]}, to[${E}]: ${_[E]}`);x.push(m[E]);const[L,R]=m[E+1],[z,G]=_[E+1];x.push([Zi(L,z,d),Zi(R,G,d)])}return new pn(x)}}class Xi{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Xi({name:s,available:!1}):null}}class Kr{constructor(s,A,d){this.from=s,this.to=A,this.transition=d}static interpolate(s,A,d){return new Kr(s,A,d)}static parse(s){return s instanceof Kr?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new Kr(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new Kr(s.from,s.to,s.transition):typeof s=="string"?new Kr(s,s,1):void 0}}function $r(c,s,A,d){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof A=="number"&&A>=0&&A<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[c,s,A,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[c,s,A,d]:[c,s,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Lo(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Kr||c instanceof en||c instanceof Ka||c instanceof cs||c instanceof wi||c instanceof us||c instanceof Yn||c instanceof pn||c instanceof Xi)return!0;if(Array.isArray(c)){for(const s of c)if(!Lo(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!Lo(c[s]))return!1;return!0}return!1}function Mr(c){if(c===null)return _s;if(typeof c=="string")return zr;if(typeof c=="boolean")return Wr;if(typeof c=="number")return Jt;if(c instanceof en)return _i;if(c instanceof Kr)return xa;if(c instanceof Ka)return ao;if(c instanceof cs)return za;if(c instanceof wi)return ri;if(c instanceof us)return _l;if(c instanceof Yn)return vl;if(c instanceof pn)return Ha;if(c instanceof Xi)return Oi;if(Array.isArray(c)){const s=c.length;let A;for(const d of c){const m=Mr(d);if(A){if(A===m)continue;A=Xr;break}A=m}return Ls(A||Xr,s)}return Gs}function Ga(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof en||c instanceof Kr||c instanceof cs||c instanceof wi||c instanceof us||c instanceof Yn||c instanceof pn||c instanceof Xi?c.toString():JSON.stringify(c)}class Yi{constructor(s,A){this.type=s,this.value=A}static parse(s,A){if(s.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Lo(s[1]))return A.error("invalid value");const d=s[1];let m=Mr(d);const _=A.expectedType;return m.kind!=="array"||m.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(m=_),new Yi(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ba={string:zr,number:Jt,boolean:Wr,object:Gs};class zi{constructor(s,A){this.type=s,this.args=A}static parse(s,A){if(s.length<2)return A.error("Expected at least one argument.");let d,m=1;const _=s[0];if(_==="array"){let E,L;if(s.length>2){const R=s[1];if(typeof R!="string"||!(R in Ba)||R==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);E=Ba[R],m++}else E=Xr;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return A.error('The length argument to "array" must be a positive integer literal',2);L=s[2],m++}d=Ls(E,L)}else{if(!Ba[_])throw new Error(`Types doesn't contain name = ${_}`);d=Ba[_]}const x=[];for(;m<s.length;m++){const E=A.parse(s[m],m,Xr);if(!E)return null;x.push(E)}return new zi(d,x)}evaluate(s){for(let A=0;A<this.args.length;A++){const d=this.args[A].evaluate(s);if(!wl(this.type,Mr(d)))return d;if(A===this.args.length-1)throw new Ln(`Expected value to be of type ${Vn(this.type)}, but found ${Vn(Mr(d))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const $a={"to-boolean":Wr,"to-color":_i,"to-number":Jt,"to-string":zr};class Ao{constructor(s,A){this.type=s,this.args=A}static parse(s,A){if(s.length<2)return A.error("Expected at least one argument.");const d=s[0];if(!$a[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&s.length!==2)return A.error("Expected one argument.");const m=$a[d],_=[];for(let x=1;x<s.length;x++){const E=A.parse(s[x],x,Xr);if(!E)return null;_.push(E)}return new Ao(m,_)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let A,d;for(const m of this.args){if(A=m.evaluate(s),d=null,A instanceof en)return A;if(typeof A=="string"){const _=s.parseColor(A);if(_)return _}else if(Array.isArray(A)&&(d=A.length<3||A.length>4?`Invalid rgba value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:$r(A[0],A[1],A[2],A[3]),!d))return new en(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new Ln(d||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const d of this.args){A=d.evaluate(s);const m=wi.parse(A);if(m)return m}throw new Ln(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"numberArray":{let A;for(const d of this.args){A=d.evaluate(s);const m=us.parse(A);if(m)return m}throw new Ln(`Could not parse numberArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"colorArray":{let A;for(const d of this.args){A=d.evaluate(s);const m=Yn.parse(A);if(m)return m}throw new Ln(`Could not parse colorArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const d of this.args){A=d.evaluate(s);const m=pn.parse(A);if(m)return m}throw new Ln(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const d of this.args){if(A=d.evaluate(s),A===null)return 0;const m=Number(A);if(!isNaN(m))return m}throw new Ln(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return cs.fromString(Ga(this.args[0].evaluate(s)));case"resolvedImage":return Xi.fromString(Ga(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return Ga(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const tA=["Unknown","Point","LineString","Polygon"];class HA{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?tA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let A=this._parseColorCache.get(s);return A||(A=en.parse(s),this._parseColorCache.set(s,A)),A}}class aa{constructor(s,A,d=[],m,_=new vs,x=[]){this.registry=s,this.path=d,this.key=d.map(E=>`[${E}]`).join(""),this.scope=_,this.errors=x,this.expectedType=m,this._isConstant=A}parse(s,A,d,m,_={}){return A?this.concat(A,d,m)._parse(s,_):this._parse(s,_)}_parse(s,A){function d(m,_,x){return x==="assert"?new zi(_,[m]):x==="coerce"?new Ao(_,[m]):m}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=s[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[m];if(_){let x=_.parse(s,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,L=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||L.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(L.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(L.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(L.kind)||E.kind==="colorArray"&&["value","string","array"].includes(L.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(L.kind))x=d(x,E,A.typeAnnotation||"coerce");else if(this.checkSubtype(E,L))return null}else x=d(x,E,A.typeAnnotation||"assert")}if(!(x instanceof Yi)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const E=new HA;try{x=new Yi(x.type,x.evaluate(E))}catch(L){return this.error(L.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,A,d){const m=typeof s=="number"?this.path.concat(s):this.path,_=d?this.scope.concat(d):this.scope;return new aa(this.registry,this._isConstant,m,A||null,_,this.errors)}error(s,...A){const d=`${this.key}${A.map(m=>`[${m}]`).join("")}`;this.errors.push(new Tn(d,s))}checkSubtype(s,A){const d=wl(s,A);return d&&this.error(d),d}}class qa{constructor(s,A){this.type=A.type,this.bindings=[].concat(s),this.result=A}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const A of this.bindings)s(A[1]);s(this.result)}static parse(s,A){if(s.length<4)return A.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const d=[];for(let _=1;_<s.length-1;_+=2){const x=s[_];if(typeof x!="string")return A.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return A.error("Variable names must contain only alphanumeric characters or '_'.",_);const E=A.parse(s[_+1],_+1);if(!E)return null;d.push([x,E])}const m=A.parse(s[s.length-1],s.length-1,A.expectedType,d);return m?new qa(d,m):null}outputDefined(){return this.result.outputDefined()}}class $s{constructor(s,A){this.type=A.type,this.name=s,this.boundExpression=A}static parse(s,A){if(s.length!==2||typeof s[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const d=s[1];return A.scope.has(d)?new $s(d,A.scope.get(d)):A.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Qn{constructor(s,A,d){this.type=s,this.index=A,this.input=d}static parse(s,A){if(s.length!==3)return A.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=A.parse(s[1],1,Jt),m=A.parse(s[2],2,Ls(A.expectedType||Xr));return d&&m?new Qn(m.type.itemType,d,m):null}evaluate(s){const A=this.index.evaluate(s),d=this.input.evaluate(s);if(A<0)throw new Ln(`Array index out of bounds: ${A} < 0.`);if(A>=d.length)throw new Ln(`Array index out of bounds: ${A} > ${d.length-1}.`);if(A!==Math.floor(A))throw new Ln(`Array index must be an integer, but found ${A} instead.`);return d[A]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class qs{constructor(s,A){this.type=Wr,this.needle=s,this.haystack=A}static parse(s,A){if(s.length!==3)return A.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=A.parse(s[1],1,Xr),m=A.parse(s[2],2,Xr);return d&&m?Xl(d.type,[Wr,zr,Jt,_s,Xr])?new qs(d,m):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vn(d.type)} instead`):null}evaluate(s){const A=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!d)return!1;if(!To(A,["boolean","string","number","null"]))throw new Ln(`Expected first argument to be of type boolean, string, number or null, but found ${Vn(Mr(A))} instead.`);if(!To(d,["string","array"]))throw new Ln(`Expected second argument to be of type array or string, but found ${Vn(Mr(d))} instead.`);return d.indexOf(A)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class D{constructor(s,A,d){this.type=Jt,this.needle=s,this.haystack=A,this.fromIndex=d}static parse(s,A){if(s.length<=2||s.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=A.parse(s[1],1,Xr),m=A.parse(s[2],2,Xr);if(!d||!m)return null;if(!Xl(d.type,[Wr,zr,Jt,_s,Xr]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vn(d.type)} instead`);if(s.length===4){const _=A.parse(s[3],3,Jt);return _?new D(d,m,_):null}return new D(d,m)}evaluate(s){const A=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!To(A,["boolean","string","number","null"]))throw new Ln(`Expected first argument to be of type boolean, string, number or null, but found ${Vn(Mr(A))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(s)),To(d,["string"])){const _=d.indexOf(A,m);return _===-1?-1:[...d.slice(0,_)].length}if(To(d,["array"]))return d.indexOf(A,m);throw new Ln(`Expected second argument to be of type array or string, but found ${Vn(Mr(d))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class ce{constructor(s,A,d,m,_,x){this.inputType=s,this.type=A,this.input=d,this.cases=m,this.outputs=_,this.otherwise=x}static parse(s,A){if(s.length<5)return A.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return A.error("Expected an even number of arguments.");let d,m;A.expectedType&&A.expectedType.kind!=="value"&&(m=A.expectedType);const _={},x=[];for(let R=2;R<s.length-1;R+=2){let z=s[R];const G=s[R+1];Array.isArray(z)||(z=[z]);const J=A.concat(R);if(z.length===0)return J.error("Expected at least one branch label.");for(const oe of z){if(typeof oe!="number"&&typeof oe!="string")return J.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return J.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return J.error("Numeric branch labels must be integer values.");if(d){if(J.checkSubtype(d,Mr(oe)))return null}else d=Mr(oe);if(_[String(oe)]!==void 0)return J.error("Branch labels must be unique.");_[String(oe)]=x.length}const ne=A.parse(G,R,m);if(!ne)return null;m=m||ne.type,x.push(ne)}const E=A.parse(s[1],1,Xr);if(!E)return null;const L=A.parse(s[s.length-1],s.length-1,m);return L?E.type.kind!=="value"&&A.concat(1).checkSubtype(d,E.type)?null:new ce(d,m,E,_,x,L):null}evaluate(s){const A=this.input.evaluate(s);return(Mr(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class ke{constructor(s,A,d){this.type=s,this.branches=A,this.otherwise=d}static parse(s,A){if(s.length<4)return A.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return A.error("Expected an odd number of arguments.");let d;A.expectedType&&A.expectedType.kind!=="value"&&(d=A.expectedType);const m=[];for(let x=1;x<s.length-1;x+=2){const E=A.parse(s[x],x,Wr);if(!E)return null;const L=A.parse(s[x+1],x+1,d);if(!L)return null;m.push([E,L]),d=d||L.type}const _=A.parse(s[s.length-1],s.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new ke(d,m,_)}evaluate(s){for(const[A,d]of this.branches)if(A.evaluate(s))return d.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[A,d]of this.branches)s(A),s(d);s(this.otherwise)}outputDefined(){return this.branches.every(([s,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class st{constructor(s,A,d,m){this.type=s,this.input=A,this.beginIndex=d,this.endIndex=m}static parse(s,A){if(s.length<=2||s.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=A.parse(s[1],1,Xr),m=A.parse(s[2],2,Jt);if(!d||!m)return null;if(!Xl(d.type,[Ls(Xr),zr,Xr]))return A.error(`Expected first argument to be of type array or string, but found ${Vn(d.type)} instead`);if(s.length===4){const _=A.parse(s[3],3,Jt);return _?new st(d.type,d,m,_):null}return new st(d.type,d,m)}evaluate(s){const A=this.input.evaluate(s),d=this.beginIndex.evaluate(s);let m;if(this.endIndex&&(m=this.endIndex.evaluate(s)),To(A,["string"]))return[...A].slice(d,m).join("");if(To(A,["array"]))return A.slice(d,m);throw new Ln(`Expected first argument to be of type array or string, but found ${Vn(Mr(A))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function ft(c,s){const A=c.length-1;let d,m,_=0,x=A,E=0;for(;_<=x;)if(E=Math.floor((_+x)/2),d=c[E],m=c[E+1],d<=s){if(E===A||s<m)return E;_=E+1}else{if(!(d>s))throw new Ln("Input is not a number.");x=E-1}return 0}class Dt{constructor(s,A,d){this.type=s,this.input=A,this.labels=[],this.outputs=[];for(const[m,_]of d)this.labels.push(m),this.outputs.push(_)}static parse(s,A){if(s.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return A.error("Expected an even number of arguments.");const d=A.parse(s[1],1,Jt);if(!d)return null;const m=[];let _=null;A.expectedType&&A.expectedType.kind!=="value"&&(_=A.expectedType);for(let x=1;x<s.length;x+=2){const E=x===1?-1/0:s[x],L=s[x+1],R=x,z=x+1;if(typeof E!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(m.length&&m[m.length-1][0]>=E)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const G=A.parse(L,z,_);if(!G)return null;_=_||G.type,m.push([E,G])}return new Dt(_,d,m)}evaluate(s){const A=this.labels,d=this.outputs;if(A.length===1)return d[0].evaluate(s);const m=this.input.evaluate(s);if(m<=A[0])return d[0].evaluate(s);const _=A.length;return m>=A[_-1]?d[_-1].evaluate(s):d[ft(A,m)].evaluate(s)}eachChild(s){s(this.input);for(const A of this.outputs)s(A)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Wt(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var pr,Ir,Zr=function(){if(Ir)return pr;function c(s,A,d,m){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(m-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=A,this.p2x=d,this.p2y=m}return Ir=1,pr=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,A){if(A===void 0&&(A=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,m=0;m<8;m++){var _=this.sampleCurveX(d)-s;if(Math.abs(_)<A)return d;var x=this.sampleCurveDerivativeX(d);if(Math.abs(x)<1e-6)break;d-=_/x}var E=0,L=1;for(d=s,m=0;m<20&&(_=this.sampleCurveX(d),!(Math.abs(_-s)<A));m++)s>_?E=d:L=d,d=.5*(L-E)+E;return d},solve:function(s,A){return this.sampleCurveY(this.solveCurveX(s,A))}},pr}(),un=Wt(Zr);class tn{constructor(s,A,d,m,_){this.type=s,this.operator=A,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[x,E]of _)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(s,A,d,m){let _=0;if(s.name==="exponential")_=Kn(A,s.base,d,m);else if(s.name==="linear")_=Kn(A,1,d,m);else if(s.name==="cubic-bezier"){const x=s.controlPoints;_=new un(x[0],x[1],x[2],x[3]).solve(Kn(A,1,d,m))}return _}static parse(s,A){let[d,m,_,...x]=s;if(!Array.isArray(m)||m.length===0)return A.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const R=m[1];if(typeof R!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:R}}else{if(m[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const R=m.slice(1);if(R.length!==4||R.some(z=>typeof z!="number"||z<0||z>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:R}}}if(s.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(_=A.parse(_,2,Jt),!_)return null;const E=[];let L=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||A.expectedType==vl?A.expectedType&&A.expectedType.kind!=="value"&&(L=A.expectedType):L=_i;for(let R=0;R<x.length;R+=2){const z=x[R],G=x[R+1],J=R+3,ne=R+4;if(typeof z!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(E.length&&E[E.length-1][0]>=z)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',J);const oe=A.parse(G,ne,L);if(!oe)return null;L=L||oe.type,E.push([z,oe])}return ba(L,Jt)||ba(L,xa)||ba(L,_i)||ba(L,ri)||ba(L,_l)||ba(L,vl)||ba(L,Ha)||ba(L,Ls(Jt))?new tn(L,d,m,_,E):A.error(`Type ${Vn(L)} is not interpolatable.`)}evaluate(s){const A=this.labels,d=this.outputs;if(A.length===1)return d[0].evaluate(s);const m=this.input.evaluate(s);if(m<=A[0])return d[0].evaluate(s);const _=A.length;if(m>=A[_-1])return d[_-1].evaluate(s);const x=ft(A,m),E=tn.interpolationFactor(this.interpolation,m,A[x],A[x+1]),L=d[x].evaluate(s),R=d[x+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Zi(L,R,E);case"color":return en.interpolate(L,R,E);case"padding":return wi.interpolate(L,R,E);case"colorArray":return Yn.interpolate(L,R,E);case"numberArray":return us.interpolate(L,R,E);case"variableAnchorOffsetCollection":return pn.interpolate(L,R,E);case"array":return oa(L,R,E);case"projectionDefinition":return Kr.interpolate(L,R,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return en.interpolate(L,R,E,"hcl");case"colorArray":return Yn.interpolate(L,R,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return en.interpolate(L,R,E,"lab");case"colorArray":return Yn.interpolate(L,R,E,"lab")}}}eachChild(s){s(this.input);for(const A of this.outputs)s(A)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Kn(c,s,A,d){const m=d-A,_=c-A;return m===0?0:s===1?_/m:(Math.pow(s,_)-1)/(Math.pow(s,m)-1)}const Mn={color:en.interpolate,number:Zi,padding:wi.interpolate,numberArray:us.interpolate,colorArray:Yn.interpolate,variableAnchorOffsetCollection:pn.interpolate,array:oa};class dn{constructor(s,A){this.type=s,this.args=A}static parse(s,A){if(s.length<2)return A.error("Expected at least one argument.");let d=null;const m=A.expectedType;m&&m.kind!=="value"&&(d=m);const _=[];for(const E of s.slice(1)){const L=A.parse(E,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!L)return null;d=d||L.type,_.push(L)}if(!d)throw new Error("No output type");const x=m&&_.some(E=>wl(m,E.type));return new dn(x?Xr:d,_)}evaluate(s){let A,d=null,m=0;for(const _ of this.args)if(m++,d=_.evaluate(s),d&&d instanceof Xi&&!d.available&&(A||(A=d.name),d=null,m===this.args.length&&(d=A)),d!==null)break;return d}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function Pi(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Ai(c,s,A,d){return d.compare(s,A)===0}function xi(c,s,A){const d=c!=="=="&&c!=="!=";return class uk{constructor(_,x,E){this.type=Wr,this.lhs=_,this.rhs=x,this.collator=E,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const E=_[0];let L=x.parse(_[1],1,Xr);if(!L)return null;if(!Pi(E,L.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${Vn(L.type)}'.`);let R=x.parse(_[2],2,Xr);if(!R)return null;if(!Pi(E,R.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${Vn(R.type)}'.`);if(L.type.kind!==R.type.kind&&L.type.kind!=="value"&&R.type.kind!=="value")return x.error(`Cannot compare types '${Vn(L.type)}' and '${Vn(R.type)}'.`);d&&(L.type.kind==="value"&&R.type.kind!=="value"?L=new zi(R.type,[L]):L.type.kind!=="value"&&R.type.kind==="value"&&(R=new zi(L.type,[R])));let z=null;if(_.length===4){if(L.type.kind!=="string"&&R.type.kind!=="string"&&L.type.kind!=="value"&&R.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(z=x.parse(_[3],3,ao),!z)return null}return new uk(L,R,z)}evaluate(_){const x=this.lhs.evaluate(_),E=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const L=Mr(x),R=Mr(E);if(L.kind!==R.kind||L.kind!=="string"&&L.kind!=="number")throw new Ln(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${L.kind}, ${R.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const L=Mr(x),R=Mr(E);if(L.kind!=="string"||R.kind!=="string")return s(_,x,E)}return this.collator?A(_,x,E,this.collator.evaluate(_)):s(_,x,E)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const la=xi("==",function(c,s,A){return s===A},Ai),Bl=xi("!=",function(c,s,A){return s!==A},function(c,s,A,d){return!Ai(0,s,A,d)}),Oh=xi("<",function(c,s,A){return s<A},function(c,s,A,d){return d.compare(s,A)<0}),Cu=xi(">",function(c,s,A){return s>A},function(c,s,A,d){return d.compare(s,A)>0}),rA=xi("<=",function(c,s,A){return s<=A},function(c,s,A,d){return d.compare(s,A)<=0}),co=xi(">=",function(c,s,A){return s>=A},function(c,s,A,d){return d.compare(s,A)>=0});class Cl{constructor(s,A,d){this.type=ao,this.locale=d,this.caseSensitive=s,this.diacriticSensitive=A}static parse(s,A){if(s.length!==2)return A.error("Expected one argument.");const d=s[1];if(typeof d!="object"||Array.isArray(d))return A.error("Collator options argument must be an object.");const m=A.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Wr);if(!m)return null;const _=A.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Wr);if(!_)return null;let x=null;return d.locale&&(x=A.parse(d.locale,1,zr),!x)?null:new Cl(m,_,x)}evaluate(s){return new Ka(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class Wa{constructor(s,A,d,m,_){this.type=zr,this.number=s,this.locale=A,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(s,A){if(s.length!==3)return A.error("Expected two arguments.");const d=A.parse(s[1],1,Jt);if(!d)return null;const m=s[2];if(typeof m!="object"||Array.isArray(m))return A.error("NumberFormat options argument must be an object.");let _=null;if(m.locale&&(_=A.parse(m.locale,1,zr),!_))return null;let x=null;if(m.currency&&(x=A.parse(m.currency,1,zr),!x))return null;let E=null;if(m["min-fraction-digits"]&&(E=A.parse(m["min-fraction-digits"],1,Jt),!E))return null;let L=null;return m["max-fraction-digits"]&&(L=A.parse(m["max-fraction-digits"],1,Jt),!L)?null:new Wa(d,_,x,E,L)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Mo{constructor(s){this.type=za,this.sections=s}static parse(s,A){if(s.length<2)return A.error("Expected at least one argument.");const d=s[1];if(!Array.isArray(d)&&typeof d=="object")return A.error("First argument must be an image or text section.");const m=[];let _=!1;for(let x=1;x<=s.length-1;++x){const E=s[x];if(_&&typeof E=="object"&&!Array.isArray(E)){_=!1;let L=null;if(E["font-scale"]&&(L=A.parse(E["font-scale"],1,Jt),!L))return null;let R=null;if(E["text-font"]&&(R=A.parse(E["text-font"],1,Ls(zr)),!R))return null;let z=null;if(E["text-color"]&&(z=A.parse(E["text-color"],1,_i),!z))return null;let G=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!Yr.includes(E["vertical-align"]))return A.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(G=A.parse(E["vertical-align"],1,zr),!G)return null}const J=m[m.length-1];J.scale=L,J.font=R,J.textColor=z,J.verticalAlign=G}else{const L=A.parse(s[x],1,Xr);if(!L)return null;const R=L.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:L,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Mo(m)}evaluate(s){return new cs(this.sections.map(A=>{const d=A.content.evaluate(s);return Mr(d)===Oi?new Uc("",d,null,null,null,A.verticalAlign?A.verticalAlign.evaluate(s):null):new Uc(Ga(d),null,A.scale?A.scale.evaluate(s):null,A.font?A.font.evaluate(s).join(","):null,A.textColor?A.textColor.evaluate(s):null,A.verticalAlign?A.verticalAlign.evaluate(s):null)}))}eachChild(s){for(const A of this.sections)s(A.content),A.scale&&s(A.scale),A.font&&s(A.font),A.textColor&&s(A.textColor),A.verticalAlign&&s(A.verticalAlign)}outputDefined(){return!1}}class Hi{constructor(s){this.type=Oi,this.input=s}static parse(s,A){if(s.length!==2)return A.error("Expected two arguments.");const d=A.parse(s[1],1,zr);return d?new Hi(d):A.error("No image name provided.")}evaluate(s){const A=this.input.evaluate(s),d=Xi.fromString(A);return d&&s.availableImages&&(d.available=s.availableImages.indexOf(A)>-1),d}eachChild(s){s(this.input)}outputDefined(){return!1}}class ko{constructor(s){this.type=Jt,this.input=s}static parse(s,A){if(s.length!==2)return A.error(`Expected 1 argument, but found ${s.length-1} instead.`);const d=A.parse(s[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${Vn(d.type)} instead.`):new ko(d):null}evaluate(s){const A=this.input.evaluate(s);if(typeof A=="string")return[...A].length;if(Array.isArray(A))return A.length;throw new Ln(`Expected value to be of type string or array, but found ${Vn(Mr(A))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const hs=8192;function jA(c,s){const A=(180+c[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,m=Math.pow(2,s.z);return[Math.round(A*m*hs),Math.round(d*m*hs)]}function nA(c,s){const A=Math.pow(2,s.z);return[(m=(c[0]/hs+s.x)/A,360*m-180),(d=(c[1]/hs+s.y)/A,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function Ji(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Sl(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function iA(c,s,A){const d=c[0]-s[0],m=c[1]-s[1],_=c[0]-A[0],x=c[1]-A[1];return d*x-_*m==0&&d*_<=0&&m*x<=0}function El(c,s,A,d){return(m=[d[0]-A[0],d[1]-A[1]])[0]*(_=[s[0]-c[0],s[1]-c[1]])[1]-m[1]*_[0]!=0&&!(!Za(c,s,A,d)||!Za(A,d,c,s));var m,_}function ji(c,s,A){for(const d of A)for(let m=0;m<d.length-1;++m)if(El(c,s,d[m],d[m+1]))return!0;return!1}function xs(c,s,A=!1){let d=!1;for(const E of s)for(let L=0;L<E.length-1;L++){if(iA(c,E[L],E[L+1]))return A;(_=E[L])[1]>(m=c)[1]!=(x=E[L+1])[1]>m[1]&&m[0]<(x[0]-_[0])*(m[1]-_[1])/(x[1]-_[1])+_[0]&&(d=!d)}var m,_,x;return d}function Rc(c,s){for(const A of s)if(xs(c,A))return!0;return!1}function VA(c,s){for(const A of c)if(!xs(A,s))return!1;for(let A=0;A<c.length-1;++A)if(ji(c[A],c[A+1],s))return!1;return!0}function Il(c,s){for(const A of s)if(VA(c,A))return!0;return!1}function Za(c,s,A,d){const m=d[0]-A[0],_=d[1]-A[1],x=(c[0]-A[0])*_-m*(c[1]-A[1]),E=(s[0]-A[0])*_-m*(s[1]-A[1]);return x>0&&E<0||x<0&&E>0}function Ms(c,s,A){const d=[];for(let m=0;m<c.length;m++){const _=[];for(let x=0;x<c[m].length;x++){const E=jA(c[m][x],A);Ji(s,E),_.push(E)}d.push(_)}return d}function Ws(c,s,A){const d=[];for(let m=0;m<c.length;m++){const _=Ms(c[m],s,A);d.push(_)}return d}function Fl(c,s,A,d){if(c[0]<A[0]||c[0]>A[2]){const m=.5*d;let _=c[0]-A[0]>m?-d:A[0]-c[0]>m?d:0;_===0&&(_=c[0]-A[2]>m?-d:A[2]-c[0]>m?d:0),c[0]+=_}Ji(s,c)}function Uo(c,s,A,d){const m=Math.pow(2,d.z)*hs,_=[d.x*hs,d.y*hs],x=[];for(const E of c)for(const L of E){const R=[L.x+_[0],L.y+_[1]];Fl(R,s,A,m),x.push(R)}return x}function Ca(c,s,A,d){const m=Math.pow(2,d.z)*hs,_=[d.x*hs,d.y*hs],x=[];for(const L of c){const R=[];for(const z of L){const G=[z.x+_[0],z.y+_[1]];Ji(s,G),R.push(G)}x.push(R)}if(s[2]-s[0]<=m/2){(E=s)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const L of x)for(const R of L)Fl(R,s,A,m)}var E;return x}class Aa{constructor(s,A){this.type=Wr,this.geojson=s,this.geometries=A}static parse(s,A){if(s.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Lo(s[1])){const d=s[1];if(d.type==="FeatureCollection"){const m=[];for(const _ of d.features){const{type:x,coordinates:E}=_.geometry;x==="Polygon"&&m.push(E),x==="MultiPolygon"&&m.push(...E)}if(m.length)return new Aa(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Aa(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Aa(d,d)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(A,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=A.canonicalID();if(d.type==="Polygon"){const E=Ms(d.coordinates,_,x),L=Uo(A.geometry(),m,_,x);if(!Sl(m,_))return!1;for(const R of L)if(!xs(R,E))return!1}if(d.type==="MultiPolygon"){const E=Ws(d.coordinates,_,x),L=Uo(A.geometry(),m,_,x);if(!Sl(m,_))return!1;for(const R of L)if(!Rc(R,E))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(A,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=A.canonicalID();if(d.type==="Polygon"){const E=Ms(d.coordinates,_,x),L=Ca(A.geometry(),m,_,x);if(!Sl(m,_))return!1;for(const R of L)if(!VA(R,E))return!1}if(d.type==="MultiPolygon"){const E=Ws(d.coordinates,_,x),L=Ca(A.geometry(),m,_,x);if(!Sl(m,_))return!1;for(const R of L)if(!Il(R,E))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Xa=class{constructor(c=[],s=(A,d)=>A<d?-1:A>d?1:0){if(this.data=c,this.length=this.data.length,this.compare=s,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:s,compare:A}=this,d=s[c];for(;c>0;){const m=c-1>>1,_=s[m];if(A(d,_)>=0)break;s[c]=_,c=m}s[c]=d}_down(c){const{data:s,compare:A}=this,d=this.length>>1,m=s[c];for(;c<d;){let _=1+(c<<1);const x=_+1;if(x<this.length&&A(s[x],s[_])<0&&(_=x),A(s[_],m)>=0)break;s[c]=s[_],c=_}s[c]=m}};function pi(c,s,A=0,d=c.length-1,m=Sa){for(;d>A;){if(d-A>600){const L=d-A+1,R=s-A+1,z=Math.log(L),G=.5*Math.exp(2*z/3),J=.5*Math.sqrt(z*G*(L-G)/L)*(R-L/2<0?-1:1);pi(c,s,Math.max(A,Math.floor(s-R*G/L+J)),Math.min(d,Math.floor(s+(L-R)*G/L+J)),m)}const _=c[s];let x=A,E=d;for(Tl(c,A,s),m(c[d],_)>0&&Tl(c,A,d);x<E;){for(Tl(c,x,E),x++,E--;m(c[x],_)<0;)x++;for(;m(c[E],_)>0;)E--}m(c[A],_)===0?Tl(c,A,E):(E++,Tl(c,E,d)),E<=s&&(A=E+1),s<=E&&(d=E-1)}}function Tl(c,s,A){const d=c[s];c[s]=c[A],c[A]=d}function Sa(c,s){return c<s?-1:c>s?1:0}function wo(c,s){if(c.length<=1)return[c];const A=[];let d,m;for(const _ of c){const x=GA(_);x!==0&&(_.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(d&&A.push(d),d=[_]):d.push(_))}if(d&&A.push(d),s>1)for(let _=0;_<A.length;_++)A[_].length<=s||(pi(A[_],s,1,A[_].length-1,KA),A[_]=A[_].slice(0,s));return A}function KA(c,s){return s.area-c.area}function GA(c){let s=0;for(let A,d,m=0,_=c.length,x=_-1;m<_;x=m++)A=c[m],d=c[x],s+=(d.x-A.x)*(A.y+d.y);return s}const sA=1/298.257223563,oA=sA*(2-sA),Pl=Math.PI/180;class Ya{constructor(s){const A=6378.137*Pl*1e3,d=Math.cos(s*Pl),m=1/(1-oA*(1-d*d)),_=Math.sqrt(m);this.kx=A*_*d,this.ky=A*_*m*(1-oA)}distance(s,A){const d=this.wrap(s[0]-A[0])*this.kx,m=(s[1]-A[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(s,A){let d,m,_,x,E=1/0;for(let L=0;L<s.length-1;L++){let R=s[L][0],z=s[L][1],G=this.wrap(s[L+1][0]-R)*this.kx,J=(s[L+1][1]-z)*this.ky,ne=0;G===0&&J===0||(ne=(this.wrap(A[0]-R)*this.kx*G+(A[1]-z)*this.ky*J)/(G*G+J*J),ne>1?(R=s[L+1][0],z=s[L+1][1]):ne>0&&(R+=G/this.kx*ne,z+=J/this.ky*ne)),G=this.wrap(A[0]-R)*this.kx,J=(A[1]-z)*this.ky;const oe=G*G+J*J;oe<E&&(E=oe,d=R,m=z,_=L,x=ne)}return{point:[d,m],index:_,t:Math.max(0,Math.min(1,x))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function fn(c,s){return s[0]-c[0]}function Ll(c){return c[1]-c[0]+1}function Li(c,s){return c[1]>=c[0]&&c[1]<s}function Ro(c,s){if(c[0]>c[1])return[null,null];const A=Ll(c);if(s){if(A===2)return[c,null];const m=Math.floor(A/2);return[[c[0],c[0]+m],[c[0]+m,c[1]]]}if(A===1)return[c,null];const d=Math.floor(A/2)-1;return[[c[0],c[0]+d],[c[0]+d+1,c[1]]]}function Gn(c,s){if(!Li(s,c.length))return[1/0,1/0,-1/0,-1/0];const A=[1/0,1/0,-1/0,-1/0];for(let d=s[0];d<=s[1];++d)Ji(A,c[d]);return A}function $n(c){const s=[1/0,1/0,-1/0,-1/0];for(const A of c)for(const d of A)Ji(s,d);return s}function bi(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function mi(c,s,A){if(!bi(c)||!bi(s))return NaN;let d=0,m=0;return c[2]<s[0]&&(d=s[0]-c[2]),c[0]>s[2]&&(d=c[0]-s[2]),c[1]>s[3]&&(m=c[1]-s[3]),c[3]<s[1]&&(m=s[1]-c[3]),A.distance([0,0],[d,m])}function Zs(c,s,A){const d=A.pointOnLine(s,c);return A.distance(c,d.point)}function Ml(c,s,A,d,m){const _=Math.min(Zs(c,[A,d],m),Zs(s,[A,d],m)),x=Math.min(Zs(A,[c,s],m),Zs(d,[c,s],m));return Math.min(_,x)}function Ea(c,s,A,d,m){if(!Li(s,c.length)||!Li(d,A.length))return 1/0;let _=1/0;for(let x=s[0];x<s[1];++x){const E=c[x],L=c[x+1];for(let R=d[0];R<d[1];++R){const z=A[R],G=A[R+1];if(El(E,L,z,G))return 0;_=Math.min(_,Ml(E,L,z,G,m))}}return _}function Nc(c,s,A,d,m){if(!Li(s,c.length)||!Li(d,A.length))return NaN;let _=1/0;for(let x=s[0];x<=s[1];++x)for(let E=d[0];E<=d[1];++E)if(_=Math.min(_,m.distance(c[x],A[E])),_===0)return _;return _}function Kd(c,s,A){if(xs(c,s,!0))return 0;let d=1/0;for(const m of s){const _=m[0],x=m[m.length-1];if(_!==x&&(d=Math.min(d,Zs(c,[x,_],A)),d===0))return d;const E=A.pointOnLine(m,c);if(d=Math.min(d,A.distance(c,E.point)),d===0)return d}return d}function Gd(c,s,A,d){if(!Li(s,c.length))return NaN;for(let _=s[0];_<=s[1];++_)if(xs(c[_],A,!0))return 0;let m=1/0;for(let _=s[0];_<s[1];++_){const x=c[_],E=c[_+1];for(const L of A)for(let R=0,z=L.length,G=z-1;R<z;G=R++){const J=L[G],ne=L[R];if(El(x,E,J,ne))return 0;m=Math.min(m,Ml(x,E,J,ne,d))}}return m}function zh(c,s){for(const A of c)for(const d of A)if(xs(d,s,!0))return!0;return!1}function $d(c,s,A,d=1/0){const m=$n(c),_=$n(s);if(d!==1/0&&mi(m,_,A)>=d)return d;if(Sl(m,_)){if(zh(c,s))return 0}else if(zh(s,c))return 0;let x=1/0;for(const E of c)for(let L=0,R=E.length,z=R-1;L<R;z=L++){const G=E[z],J=E[L];for(const ne of s)for(let oe=0,pe=ne.length,Be=pe-1;oe<pe;Be=oe++){const Re=ne[Be],lt=ne[oe];if(El(G,J,Re,lt))return 0;x=Math.min(x,Ml(G,J,Re,lt,A))}}return x}function Hh(c,s,A,d,m,_){if(!_)return;const x=mi(Gn(d,_),m,A);x<s&&c.push([x,_,[0,0]])}function Dc(c,s,A,d,m,_,x){if(!_||!x)return;const E=mi(Gn(d,_),Gn(m,x),A);E<s&&c.push([E,_,x])}function Qc(c,s,A,d,m=1/0){let _=Math.min(d.distance(c[0],A[0][0]),m);if(_===0)return _;const x=new Xa([[0,[0,c.length-1],[0,0]]],fn),E=$n(A);for(;x.length>0;){const L=x.pop();if(L[0]>=_)continue;const R=L[1],z=s?50:100;if(Ll(R)<=z){if(!Li(R,c.length))return NaN;if(s){const G=Gd(c,R,A,d);if(isNaN(G)||G===0)return G;_=Math.min(_,G)}else for(let G=R[0];G<=R[1];++G){const J=Kd(c[G],A,d);if(_=Math.min(_,J),_===0)return 0}}else{const G=Ro(R,s);Hh(x,_,d,c,E,G[0]),Hh(x,_,d,c,E,G[1])}}return _}function Oc(c,s,A,d,m,_=1/0){let x=Math.min(_,m.distance(c[0],A[0]));if(x===0)return x;const E=new Xa([[0,[0,c.length-1],[0,A.length-1]]],fn);for(;E.length>0;){const L=E.pop();if(L[0]>=x)continue;const R=L[1],z=L[2],G=s?50:100,J=d?50:100;if(Ll(R)<=G&&Ll(z)<=J){if(!Li(R,c.length)&&Li(z,A.length))return NaN;let ne;if(s&&d)ne=Ea(c,R,A,z,m),x=Math.min(x,ne);else if(s&&!d){const oe=c.slice(R[0],R[1]+1);for(let pe=z[0];pe<=z[1];++pe)if(ne=Zs(A[pe],oe,m),x=Math.min(x,ne),x===0)return x}else if(!s&&d){const oe=A.slice(z[0],z[1]+1);for(let pe=R[0];pe<=R[1];++pe)if(ne=Zs(c[pe],oe,m),x=Math.min(x,ne),x===0)return x}else ne=Nc(c,R,A,z,m),x=Math.min(x,ne)}else{const ne=Ro(R,s),oe=Ro(z,d);Dc(E,x,m,c,A,ne[0],oe[0]),Dc(E,x,m,c,A,ne[0],oe[1]),Dc(E,x,m,c,A,ne[1],oe[0]),Dc(E,x,m,c,A,ne[1],oe[1])}}return x}function Su(c){return c.type==="MultiPolygon"?c.coordinates.map(s=>({type:"Polygon",coordinates:s})):c.type==="MultiLineString"?c.coordinates.map(s=>({type:"LineString",coordinates:s})):c.type==="MultiPoint"?c.coordinates.map(s=>({type:"Point",coordinates:s})):[c]}class kl{constructor(s,A){this.type=Jt,this.geojson=s,this.geometries=A}static parse(s,A){if(s.length!==2)return A.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Lo(s[1])){const d=s[1];if(d.type==="FeatureCollection")return new kl(d,d.features.map(m=>Su(m.geometry)).flat());if(d.type==="Feature")return new kl(d,Su(d.geometry));if("type"in d&&"coordinates"in d)return new kl(d,Su(d))}return A.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(A,d){const m=A.geometry(),_=m.flat().map(L=>nA([L.x,L.y],A.canonical));if(m.length===0)return NaN;const x=new Ya(_[0][1]);let E=1/0;for(const L of d){switch(L.type){case"Point":E=Math.min(E,Oc(_,!1,[L.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,Oc(_,!1,L.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,Qc(_,!1,L.coordinates,x,E))}if(E===0)return E}return E}(s,this.geometries);if(s.geometryType()==="LineString")return function(A,d){const m=A.geometry(),_=m.flat().map(L=>nA([L.x,L.y],A.canonical));if(m.length===0)return NaN;const x=new Ya(_[0][1]);let E=1/0;for(const L of d){switch(L.type){case"Point":E=Math.min(E,Oc(_,!0,[L.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,Oc(_,!0,L.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,Qc(_,!0,L.coordinates,x,E))}if(E===0)return E}return E}(s,this.geometries);if(s.geometryType()==="Polygon")return function(A,d){const m=A.geometry();if(m.length===0||m[0].length===0)return NaN;const _=wo(m,0).map(L=>L.map(R=>R.map(z=>nA([z.x,z.y],A.canonical)))),x=new Ya(_[0][0][0][1]);let E=1/0;for(const L of d)for(const R of _){switch(L.type){case"Point":E=Math.min(E,Qc([L.coordinates],!1,R,x,E));break;case"LineString":E=Math.min(E,Qc(L.coordinates,!0,R,x,E));break;case"Polygon":E=Math.min(E,$d(R,L.coordinates,x,E))}if(E===0)return E}return E}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class $A{constructor(s){this.type=Xr,this.key=s}static parse(s,A){if(s.length!==2)return A.error(`Expected 1 argument, but found ${s.length-1} instead.`);const d=s[1];return d==null?A.error("Global state property must be defined."):typeof d!="string"?A.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new $A(d)}evaluate(s){var A;const d=(A=s.globals)===null||A===void 0?void 0:A.globalState;return d&&Object.keys(d).length!==0?nn(d,this.key):null}eachChild(){}outputDefined(){return!1}}const aA={"==":la,"!=":Bl,">":Cu,"<":Oh,">=":co,"<=":rA,array:zi,at:Qn,boolean:zi,case:ke,coalesce:dn,collator:Cl,format:Mo,image:Hi,in:qs,"index-of":D,interpolate:tn,"interpolate-hcl":tn,"interpolate-lab":tn,length:ko,let:qa,literal:Yi,match:ce,number:zi,"number-format":Wa,object:zi,slice:st,step:Dt,string:zi,"to-boolean":Ao,"to-color":Ao,"to-number":Ao,"to-string":Ao,var:$s,within:Aa,distance:kl,"global-state":$A};class ks{constructor(s,A,d,m){this.name=s,this.type=A,this._evaluate=d,this.args=m}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,A){const d=s[0],m=ks.definitions[d];if(!m)return A.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,E=x.filter(([R])=>!Array.isArray(R)||R.length===s.length-1);let L=null;for(const[R,z]of E){L=new aa(A.registry,zc,A.path,null,A.scope);const G=[];let J=!1;for(let ne=1;ne<s.length;ne++){const oe=s[ne],pe=Array.isArray(R)?R[ne-1]:R.type,Be=L.parse(oe,1+G.length,pe);if(!Be){J=!0;break}G.push(Be)}if(!J)if(Array.isArray(R)&&R.length!==G.length)L.error(`Expected ${R.length} arguments, but found ${G.length} instead.`);else{for(let ne=0;ne<G.length;ne++){const oe=Array.isArray(R)?R[ne]:R.type,pe=G[ne];L.concat(ne+1).checkSubtype(oe,pe.type)}if(L.errors.length===0)return new ks(d,_,z,G)}}if(E.length===1)A.errors.push(...L.errors);else{const R=(E.length?E:x).map(([G])=>{return J=G,Array.isArray(J)?`(${J.map(Vn).join(", ")})`:`(${Vn(J.type)}...)`;var J}).join(" | "),z=[];for(let G=1;G<s.length;G++){const J=A.parse(s[G],1+z.length);if(!J)return null;z.push(Vn(J.type))}A.error(`Expected arguments of type ${R}, but found (${z.join(", ")}) instead.`)}return null}static register(s,A){ks.definitions=A;for(const d in A)s[d]=ks}}function jh(c,[s,A,d,m]){s=s.evaluate(c),A=A.evaluate(c),d=d.evaluate(c);const _=m?m.evaluate(c):1,x=$r(s,A,d,_);if(x)throw new Ln(x);return new en(s/255,A/255,d/255,_,!1)}function Vh(c,s){return c in s}function Eu(c,s){const A=s[c];return A===void 0?null:A}function Ul(c){return{type:c}}function zc(c){if(c instanceof $s)return zc(c.boundExpression);if(c instanceof ks&&c.name==="error"||c instanceof Cl||c instanceof Aa||c instanceof kl||c instanceof $A)return!1;const s=c instanceof Ao||c instanceof zi;let A=!0;return c.eachChild(d=>{A=s?A&&zc(d):A&&d instanceof Yi}),!!A&&Hc(c)&&lA(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Hc(c){if(c instanceof ks&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Aa||c instanceof kl)return!1;let s=!0;return c.eachChild(A=>{s&&!Hc(A)&&(s=!1)}),s}function qA(c){if(c instanceof ks&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(A=>{s&&!qA(A)&&(s=!1)}),s}function lA(c,s){if(c instanceof ks&&s.indexOf(c.name)>=0)return!1;let A=!0;return c.eachChild(d=>{A&&!lA(d,s)&&(A=!1)}),A}function Iu(c){return{result:"success",value:c}}function Ja(c){return{result:"error",value:c}}function ds(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function uo(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function WA(c){return!!c.expression&&c.expression.interpolated}function an(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Rl(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&Mr(c)===Gs}function jc(c){return c}function Vc(c,s){const A=c.stops&&typeof c.stops[0][0]=="object",d=A||!(A||c.property!==void 0),m=c.type||(WA(s)?"exponential":"interval"),_=function(z){switch(z.type){case"color":return en.parse;case"padding":return wi.parse;case"numberArray":return us.parse;case"colorArray":return Yn.parse;default:return null}}(s);if(_&&((c=li({},c)).stops&&(c.stops=c.stops.map(z=>[z[0],_(z[1])])),c.default=_(c.default?c.default:s.default)),c.colorSpace&&(x=c.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var x;const E=function(z){switch(z){case"exponential":return Fu;case"interval":return Kh;case"categorical":return qd;case"identity":return Kc;default:throw new Error(`Unknown function type "${z}"`)}}(m);let L,R;if(m==="categorical"){L=Object.create(null);for(const z of c.stops)L[z[0]]=z[1];R=typeof c.stops[0][0]}if(A){const z={},G=[];for(let oe=0;oe<c.stops.length;oe++){const pe=c.stops[oe],Be=pe[0].zoom;z[Be]===void 0&&(z[Be]={zoom:Be,type:c.type,property:c.property,default:c.default,stops:[]},G.push(Be)),z[Be].stops.push([pe[0].value,pe[1]])}const J=[];for(const oe of G)J.push([z[oe].zoom,Vc(z[oe],s)]);const ne={name:"linear"};return{kind:"composite",interpolationType:ne,interpolationFactor:tn.interpolationFactor.bind(void 0,ne),zoomStops:J.map(oe=>oe[0]),evaluate:({zoom:oe},pe)=>Fu({stops:J,base:c.base},s,oe).evaluate(oe,pe)}}if(d){const z=m==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:tn.interpolationFactor.bind(void 0,z),zoomStops:c.stops.map(G=>G[0]),evaluate:({zoom:G})=>E(c,s,G,L,R)}}return{kind:"source",evaluate(z,G){const J=G&&G.properties?G.properties[c.property]:void 0;return J===void 0?AA(c.default,s.default):E(c,s,J,L,R)}}}function AA(c,s,A){return c!==void 0?c:s!==void 0?s:A!==void 0?A:void 0}function qd(c,s,A,d,m){return AA(typeof A===m?d[A]:void 0,c.default,s.default)}function Kh(c,s,A){if(an(A)!=="number")return AA(c.default,s.default);const d=c.stops.length;if(d===1||A<=c.stops[0][0])return c.stops[0][1];if(A>=c.stops[d-1][0])return c.stops[d-1][1];const m=ft(c.stops.map(_=>_[0]),A);return c.stops[m][1]}function Fu(c,s,A){const d=c.base!==void 0?c.base:1;if(an(A)!=="number")return AA(c.default,s.default);const m=c.stops.length;if(m===1||A<=c.stops[0][0])return c.stops[0][1];if(A>=c.stops[m-1][0])return c.stops[m-1][1];const _=ft(c.stops.map(z=>z[0]),A),x=function(z,G,J,ne){const oe=ne-J,pe=z-J;return oe===0?0:G===1?pe/oe:(Math.pow(G,pe)-1)/(Math.pow(G,oe)-1)}(A,d,c.stops[_][0],c.stops[_+1][0]),E=c.stops[_][1],L=c.stops[_+1][1],R=Mn[s.type]||jc;return typeof E.evaluate=="function"?{evaluate(...z){const G=E.evaluate.apply(void 0,z),J=L.evaluate.apply(void 0,z);if(G!==void 0&&J!==void 0)return R(G,J,x,c.colorSpace)}}:R(E,L,x,c.colorSpace)}function Kc(c,s,A){switch(s.type){case"color":A=en.parse(A);break;case"formatted":A=cs.fromString(A.toString());break;case"resolvedImage":A=Xi.fromString(A.toString());break;case"padding":A=wi.parse(A);break;case"colorArray":A=Yn.parse(A);break;case"numberArray":A=us.parse(A);break;default:an(A)===s.type||s.type==="enum"&&s.values[A]||(A=void 0)}return AA(A,c.default,s.default)}ks.register(aA,{error:[{kind:"error"},[zr],(c,[s])=>{throw new Ln(s.evaluate(c))}],typeof:[zr,[Xr],(c,[s])=>Vn(Mr(s.evaluate(c)))],"to-rgba":[Ls(Jt,4),[_i],(c,[s])=>{const[A,d,m,_]=s.evaluate(c).rgb;return[255*A,255*d,255*m,_]}],rgb:[_i,[Jt,Jt,Jt],jh],rgba:[_i,[Jt,Jt,Jt,Jt],jh],has:{type:Wr,overloads:[[[zr],(c,[s])=>Vh(s.evaluate(c),c.properties())],[[zr,Gs],(c,[s,A])=>Vh(s.evaluate(c),A.evaluate(c))]]},get:{type:Xr,overloads:[[[zr],(c,[s])=>Eu(s.evaluate(c),c.properties())],[[zr,Gs],(c,[s,A])=>Eu(s.evaluate(c),A.evaluate(c))]]},"feature-state":[Xr,[zr],(c,[s])=>Eu(s.evaluate(c),c.featureState||{})],properties:[Gs,[],c=>c.properties()],"geometry-type":[zr,[],c=>c.geometryType()],id:[Xr,[],c=>c.id()],zoom:[Jt,[],c=>c.globals.zoom],"heatmap-density":[Jt,[],c=>c.globals.heatmapDensity||0],elevation:[Jt,[],c=>c.globals.elevation||0],"line-progress":[Jt,[],c=>c.globals.lineProgress||0],accumulated:[Xr,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Jt,Ul(Jt),(c,s)=>{let A=0;for(const d of s)A+=d.evaluate(c);return A}],"*":[Jt,Ul(Jt),(c,s)=>{let A=1;for(const d of s)A*=d.evaluate(c);return A}],"-":{type:Jt,overloads:[[[Jt,Jt],(c,[s,A])=>s.evaluate(c)-A.evaluate(c)],[[Jt],(c,[s])=>-s.evaluate(c)]]},"/":[Jt,[Jt,Jt],(c,[s,A])=>s.evaluate(c)/A.evaluate(c)],"%":[Jt,[Jt,Jt],(c,[s,A])=>s.evaluate(c)%A.evaluate(c)],ln2:[Jt,[],()=>Math.LN2],pi:[Jt,[],()=>Math.PI],e:[Jt,[],()=>Math.E],"^":[Jt,[Jt,Jt],(c,[s,A])=>Math.pow(s.evaluate(c),A.evaluate(c))],sqrt:[Jt,[Jt],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))],log2:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[Jt,[Jt],(c,[s])=>Math.sin(s.evaluate(c))],cos:[Jt,[Jt],(c,[s])=>Math.cos(s.evaluate(c))],tan:[Jt,[Jt],(c,[s])=>Math.tan(s.evaluate(c))],asin:[Jt,[Jt],(c,[s])=>Math.asin(s.evaluate(c))],acos:[Jt,[Jt],(c,[s])=>Math.acos(s.evaluate(c))],atan:[Jt,[Jt],(c,[s])=>Math.atan(s.evaluate(c))],min:[Jt,Ul(Jt),(c,s)=>Math.min(...s.map(A=>A.evaluate(c)))],max:[Jt,Ul(Jt),(c,s)=>Math.max(...s.map(A=>A.evaluate(c)))],abs:[Jt,[Jt],(c,[s])=>Math.abs(s.evaluate(c))],round:[Jt,[Jt],(c,[s])=>{const A=s.evaluate(c);return A<0?-Math.round(-A):Math.round(A)}],floor:[Jt,[Jt],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[Jt,[Jt],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Wr,[zr,Xr],(c,[s,A])=>c.properties()[s.value]===A.value],"filter-id-==":[Wr,[Xr],(c,[s])=>c.id()===s.value],"filter-type-==":[Wr,[zr],(c,[s])=>c.geometryType()===s.value],"filter-<":[Wr,[zr,Xr],(c,[s,A])=>{const d=c.properties()[s.value],m=A.value;return typeof d==typeof m&&d<m}],"filter-id-<":[Wr,[Xr],(c,[s])=>{const A=c.id(),d=s.value;return typeof A==typeof d&&A<d}],"filter->":[Wr,[zr,Xr],(c,[s,A])=>{const d=c.properties()[s.value],m=A.value;return typeof d==typeof m&&d>m}],"filter-id->":[Wr,[Xr],(c,[s])=>{const A=c.id(),d=s.value;return typeof A==typeof d&&A>d}],"filter-<=":[Wr,[zr,Xr],(c,[s,A])=>{const d=c.properties()[s.value],m=A.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[Wr,[Xr],(c,[s])=>{const A=c.id(),d=s.value;return typeof A==typeof d&&A<=d}],"filter->=":[Wr,[zr,Xr],(c,[s,A])=>{const d=c.properties()[s.value],m=A.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[Wr,[Xr],(c,[s])=>{const A=c.id(),d=s.value;return typeof A==typeof d&&A>=d}],"filter-has":[Wr,[Xr],(c,[s])=>s.value in c.properties()],"filter-has-id":[Wr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Wr,[Ls(zr)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Wr,[Ls(Xr)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Wr,[zr,Ls(Xr)],(c,[s,A])=>A.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Wr,[zr,Ls(Xr)],(c,[s,A])=>function(d,m,_,x){for(;_<=x;){const E=_+x>>1;if(m[E]===d)return!0;m[E]>d?x=E-1:_=E+1}return!1}(c.properties()[s.value],A.value,0,A.value.length-1)],all:{type:Wr,overloads:[[[Wr,Wr],(c,[s,A])=>s.evaluate(c)&&A.evaluate(c)],[Ul(Wr),(c,s)=>{for(const A of s)if(!A.evaluate(c))return!1;return!0}]]},any:{type:Wr,overloads:[[[Wr,Wr],(c,[s,A])=>s.evaluate(c)||A.evaluate(c)],[Ul(Wr),(c,s)=>{for(const A of s)if(A.evaluate(c))return!0;return!1}]]},"!":[Wr,[Wr],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Wr,[zr],(c,[s])=>{const A=c.globals&&c.globals.isSupportedScript;return!A||A(s.evaluate(c))}],upcase:[zr,[zr],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[zr,[zr],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[zr,Ul(Xr),(c,s)=>s.map(A=>Ga(A.evaluate(c))).join("")],"resolved-locale":[zr,[ao],(c,[s])=>s.evaluate(c).resolvedLocale()]});class ZA{constructor(s,A){this.expression=s,this._warningHistory={},this._evaluator=new HA,this._defaultValue=A?function(d){if(d.type==="color"&&Rl(d.default))return new en(0,0,0,0);switch(d.type){case"color":return en.parse(d.default)||null;case"padding":return wi.parse(d.default)||null;case"numberArray":return us.parse(d.default)||null;case"colorArray":return Yn.parse(d.default)||null;case"variableAnchorOffsetCollection":return pn.parse(d.default)||null;case"projectionDefinition":return Kr.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(s,A,d,m,_,x){return this._evaluator.globals=s,this._evaluator.feature=A,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(s,A,d,m,_,x){this._evaluator.globals=s,this._evaluator.feature=A||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Ln(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function Tu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in aA}function Pu(c,s){const A=new aa(aA,zc,[],s?function(m){const _={color:_i,string:zr,number:Jt,enum:zr,boolean:Wr,formatted:za,padding:ri,numberArray:_l,colorArray:vl,projectionDefinition:xa,resolvedImage:Oi,variableAnchorOffsetCollection:Ha};return m.type==="array"?Ls(_[m.value]||Xr,m.length):_[m.type]}(s):void 0),d=A.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Iu(new ZA(d,s)):Ja(A.errors)}class XA{constructor(s,A){this.kind=s,this._styleExpression=A,this.isStateDependent=s!=="constant"&&!qA(A.expression),this.globalStateRefs=JA(A.expression)}evaluateWithoutErrorHandling(s,A,d,m,_,x){return this._styleExpression.evaluateWithoutErrorHandling(s,A,d,m,_,x)}evaluate(s,A,d,m,_,x){return this._styleExpression.evaluate(s,A,d,m,_,x)}}class Lu{constructor(s,A,d,m){this.kind=s,this.zoomStops=d,this._styleExpression=A,this.isStateDependent=s!=="camera"&&!qA(A.expression),this.globalStateRefs=JA(A.expression),this.interpolationType=m}evaluateWithoutErrorHandling(s,A,d,m,_,x){return this._styleExpression.evaluateWithoutErrorHandling(s,A,d,m,_,x)}evaluate(s,A,d,m,_,x){return this._styleExpression.evaluate(s,A,d,m,_,x)}interpolationFactor(s,A,d){return this.interpolationType?tn.interpolationFactor(this.interpolationType,s,A,d):0}}function Gh(c,s){const A=Pu(c,s);if(A.result==="error")return A;const d=A.value.expression,m=Hc(d);if(!m&&!ds(s))return Ja([new Tn("","data expressions not supported")]);const _=lA(d,["zoom"]);if(!_&&!uo(s))return Ja([new Tn("","zoom expressions not supported")]);const x=YA(d);return x||_?x instanceof Tn?Ja([x]):x instanceof tn&&!WA(s)?Ja([new Tn("",'"interpolate" expressions cannot be used with this property')]):Iu(x?new Lu(m?"camera":"composite",A.value,x.labels,x instanceof tn?x.interpolation:void 0):new XA(m?"constant":"source",A.value)):Ja([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gc{constructor(s,A){this._parameters=s,this._specification=A,li(this,Vc(this._parameters,this._specification))}static deserialize(s){return new Gc(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function YA(c){let s=null;if(c instanceof qa)s=YA(c.result);else if(c instanceof dn){for(const A of c.args)if(s=YA(A),s)break}else(c instanceof Dt||c instanceof tn)&&c.input instanceof ks&&c.input.name==="zoom"&&(s=c);return s instanceof Tn||c.eachChild(A=>{const d=YA(A);d instanceof Tn?s=d:!s&&d?s=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&d&&s!==d&&(s=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function JA(c,s=new Set){return c instanceof $A&&s.add(c.key),c.eachChild(A=>{JA(A,s)}),s}function cA(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!cA(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const $c={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function No(c){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};cA(c)||(c=qc(c));const s=Pu(c,$c);if(s.result==="error")throw new Error(s.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,d,m)=>s.value.evaluate(A,d,{},m),needGeometry:Wd(c),getGlobalStateRefs:()=>JA(s.value.expression)}}function zp(c,s){return c<s?-1:c>s?1:0}function Wd(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let s=1;s<c.length;s++)if(Wd(c[s]))return!0;return!1}function qc(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?$h(c[1],c[2],"=="):s==="!="?Wc($h(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?$h(c[1],c[2],s):s==="any"?(A=c.slice(1),["any"].concat(A.map(qc))):s==="all"?["all"].concat(c.slice(1).map(qc)):s==="none"?["all"].concat(c.slice(1).map(qc).map(Wc)):s==="in"?Zd(c[1],c.slice(2)):s==="!in"?Wc(Zd(c[1],c.slice(2))):s==="has"?Xd(c[1]):s!=="!has"||Wc(Xd(c[1]));var A}function $h(c,s,A){switch(c){case"$type":return[`filter-type-${A}`,s];case"$id":return[`filter-id-${A}`,s];default:return[`filter-${A}`,c,s]}}function Zd(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(A=>typeof A!=typeof s[0])?["filter-in-large",c,["literal",s.sort(zp)]]:["filter-in-small",c,["literal",s]]}}function Xd(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Wc(c){return["!",c]}function ca(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let m="[";for(const _ of c)m+=`${ca(_)},`;return`${m}]`}const A=Object.keys(c).sort();let d="{";for(let m=0;m<A.length;m++)d+=`${JSON.stringify(A[m])}:${ca(c[A[m]])},`;return`${d}}`}function ho(c){let s="";for(const A of Nt)s+=`/${ca(c[A])}`;return s}function Ia(c){const s=c.value;return s?[new Xt(c.key,s,"constants have been deprecated as of v8")]:[]}function gi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function el(c){if(Array.isArray(c))return c.map(el);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const A in c)s[A]=el(c[A]);return s}return gi(c)}function es(c){const s=c.key,A=c.value,d=c.valueSpec||{},m=c.objectElementValidators||{},_=c.style,x=c.styleSpec,E=c.validateSpec;let L=[];const R=an(A);if(R!=="object")return[new Xt(s,A,`object expected, ${R} found`)];for(const z in A){const G=z.split(".")[0],J=nn(d,G)||d["*"];let ne;if(nn(m,G))ne=m[G];else if(nn(d,G))ne=E;else if(m["*"])ne=m["*"];else{if(!d["*"]){L.push(new Xt(s,A[z],`unknown property "${z}"`));continue}ne=E}L=L.concat(ne({key:(s&&`${s}.`)+z,value:A[z],valueSpec:J,style:_,styleSpec:x,object:A,objectKey:z,validateSpec:E},A))}for(const z in d)m[z]||d[z].required&&d[z].default===void 0&&A[z]===void 0&&L.push(new Xt(s,A,`missing required property "${z}"`));return L}function Xs(c){const s=c.value,A=c.valueSpec,d=c.style,m=c.styleSpec,_=c.key,x=c.arrayElementValidator||c.validateSpec;if(an(s)!=="array")return[new Xt(_,s,`array expected, ${an(s)} found`)];if(A.length&&s.length!==A.length)return[new Xt(_,s,`array length ${A.length} expected, length ${s.length} found`)];if(A["min-length"]&&s.length<A["min-length"])return[new Xt(_,s,`array length at least ${A["min-length"]} expected, length ${s.length} found`)];let E={type:A.value,values:A.values};m.$version<7&&(E.function=A.function),an(A.value)==="object"&&(E=A.value);let L=[];for(let R=0;R<s.length;R++)L=L.concat(x({array:s,arrayIndex:R,value:s[R],valueSpec:E,validateSpec:c.validateSpec,style:d,styleSpec:m,key:`${_}[${R}]`}));return L}function Zc(c){const s=c.key,A=c.value,d=c.valueSpec;let m=an(A);return m==="number"&&A!=A&&(m="NaN"),m!=="number"?[new Xt(s,A,`number expected, ${m} found`)]:"minimum"in d&&A<d.minimum?[new Xt(s,A,`${A} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&A>d.maximum?[new Xt(s,A,`${A} is greater than the maximum value ${d.maximum}`)]:[]}function ec(c){const s=c.valueSpec,A=gi(c.value.type);let d,m,_,x={};const E=A!=="categorical"&&c.value.property===void 0,L=!E,R=an(c.value.stops)==="array"&&an(c.value.stops[0])==="array"&&an(c.value.stops[0][0])==="object",z=es({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(ne){if(A==="identity")return[new Xt(ne.key,ne.value,'identity function may not have a "stops" property')];let oe=[];const pe=ne.value;return oe=oe.concat(Xs({key:ne.key,value:pe,valueSpec:ne.valueSpec,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:G})),an(pe)==="array"&&pe.length===0&&oe.push(new Xt(ne.key,pe,"array must have at least one stop")),oe},default:function(ne){return ne.validateSpec({key:ne.key,value:ne.value,valueSpec:s,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec})}}});return A==="identity"&&E&&z.push(new Xt(c.key,c.value,'missing required property "property"')),A==="identity"||c.value.stops||z.push(new Xt(c.key,c.value,'missing required property "stops"')),A==="exponential"&&c.valueSpec.expression&&!WA(c.valueSpec)&&z.push(new Xt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(L&&!ds(c.valueSpec)?z.push(new Xt(c.key,c.value,"property functions not supported")):E&&!uo(c.valueSpec)&&z.push(new Xt(c.key,c.value,"zoom functions not supported"))),A!=="categorical"&&!R||c.value.property!==void 0||z.push(new Xt(c.key,c.value,'"property" property is required')),z;function G(ne){let oe=[];const pe=ne.value,Be=ne.key;if(an(pe)!=="array")return[new Xt(Be,pe,`array expected, ${an(pe)} found`)];if(pe.length!==2)return[new Xt(Be,pe,`array length 2 expected, length ${pe.length} found`)];if(R){if(an(pe[0])!=="object")return[new Xt(Be,pe,`object expected, ${an(pe[0])} found`)];if(pe[0].zoom===void 0)return[new Xt(Be,pe,"object stop key must have zoom")];if(pe[0].value===void 0)return[new Xt(Be,pe,"object stop key must have value")];if(_&&_>gi(pe[0].zoom))return[new Xt(Be,pe[0].zoom,"stop zoom values must appear in ascending order")];gi(pe[0].zoom)!==_&&(_=gi(pe[0].zoom),m=void 0,x={}),oe=oe.concat(es({key:`${Be}[0]`,value:pe[0],valueSpec:{zoom:{}},validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:Zc,value:J}}))}else oe=oe.concat(J({key:`${Be}[0]`,value:pe[0],validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec},pe));return Tu(el(pe[1]))?oe.concat([new Xt(`${Be}[1]`,pe[1],"expressions are not allowed in function stops.")]):oe.concat(ne.validateSpec({key:`${Be}[1]`,value:pe[1],valueSpec:s,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec}))}function J(ne,oe){const pe=an(ne.value),Be=gi(ne.value),Re=ne.value!==null?ne.value:oe;if(d){if(pe!==d)return[new Xt(ne.key,Re,`${pe} stop domain type must match previous stop domain type ${d}`)]}else d=pe;if(pe!=="number"&&pe!=="string"&&pe!=="boolean")return[new Xt(ne.key,Re,"stop domain value must be a number, string, or boolean")];if(pe!=="number"&&A!=="categorical"){let lt=`number expected, ${pe} found`;return ds(s)&&A===void 0&&(lt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xt(ne.key,Re,lt)]}return A!=="categorical"||pe!=="number"||isFinite(Be)&&Math.floor(Be)===Be?A!=="categorical"&&pe==="number"&&m!==void 0&&Be<m?[new Xt(ne.key,Re,"stop domain values must appear in ascending order")]:(m=Be,A==="categorical"&&Be in x?[new Xt(ne.key,Re,"stop domain values must be unique")]:(x[Be]=!0,[])):[new Xt(ne.key,Re,`integer expected, found ${Be}`)]}}function uA(c){const s=(c.expressionContext==="property"?Gh:Pu)(el(c.value),c.valueSpec);if(s.result==="error")return s.value.map(d=>new Xt(`${c.key}${d.key}`,c.value,d.message));const A=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!A.outputDefined())return[new Xt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!qA(A))return[new Xt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!qA(A))return[new Xt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!lA(A,["zoom","feature-state"]))return[new Xt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Hc(A))return[new Xt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mu(c){const s=c.key,A=c.value,d=an(A);return d!=="string"?[new Xt(s,A,`color expected, ${d} found`)]:en.parse(String(A))?[]:[new Xt(s,A,`color expected, "${A}" found`)]}function tc(c){const s=c.key,A=c.value,d=c.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(gi(A))===-1&&m.push(new Xt(s,A,`expected one of [${d.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(d.values).indexOf(gi(A))===-1&&m.push(new Xt(s,A,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(A)} found`)),m}function ku(c){return cA(el(c.value))?uA(li({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Yd(c)}function Yd(c){const s=c.value,A=c.key;if(an(s)!=="array")return[new Xt(A,s,`array expected, ${an(s)} found`)];const d=c.styleSpec;let m,_=[];if(s.length<1)return[new Xt(A,s,"filter array must have at least 1 element")];switch(_=_.concat(tc({key:`${A}[0]`,value:s[0],valueSpec:d.filter_operator,style:c.style,styleSpec:c.styleSpec})),gi(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&gi(s[1])==="$type"&&_.push(new Xt(A,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&_.push(new Xt(A,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(m=an(s[1]),m!=="string"&&_.push(new Xt(`${A}[1]`,s[1],`string expected, ${m} found`)));for(let x=2;x<s.length;x++)m=an(s[x]),gi(s[1])==="$type"?_=_.concat(tc({key:`${A}[${x}]`,value:s[x],valueSpec:d.geometry_type,style:c.style,styleSpec:c.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&_.push(new Xt(`${A}[${x}]`,s[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<s.length;x++)_=_.concat(Yd({key:`${A}[${x}]`,value:s[x],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":m=an(s[1]),s.length!==2?_.push(new Xt(A,s,`filter array for "${s[0]}" operator must have 2 elements`)):m!=="string"&&_.push(new Xt(`${A}[1]`,s[1],`string expected, ${m} found`))}return _}function Xc(c,s){const A=c.key,d=c.validateSpec,m=c.style,_=c.styleSpec,x=c.value,E=c.objectKey,L=_[`${s}_${c.layerType}`];if(!L)return[];const R=E.match(/^(.*)-transition$/);if(s==="paint"&&R&&L[R[1]]&&L[R[1]].transition)return d({key:A,value:x,valueSpec:_.transition,style:m,styleSpec:_});const z=c.valueSpec||L[E];if(!z)return[new Xt(A,x,`unknown property "${E}"`)];let G;if(an(x)==="string"&&ds(z)&&!z.tokens&&(G=/^{([^}]+)}$/.exec(x)))return[new Xt(A,x,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const J=[];return c.layerType==="symbol"&&(E==="text-field"&&m&&!m.glyphs&&J.push(new Xt(A,x,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&Rl(el(x))&&gi(x.type)==="identity"&&J.push(new Xt(A,x,'"text-font" does not support identity functions'))),J.concat(d({key:c.key,value:x,valueSpec:z,style:m,styleSpec:_,expressionContext:"property",propertyType:s,propertyKey:E}))}function tl(c){return Xc(c,"paint")}function Fa(c){return Xc(c,"layout")}function Us(c){let s=[];const A=c.value,d=c.key,m=c.style,_=c.styleSpec;if(an(A)!=="object")return[new Xt(d,A,`object expected, ${an(A)} found`)];A.type||A.ref||s.push(new Xt(d,A,'either "type" or "ref" is required'));let x=gi(A.type);const E=gi(A.ref);if(A.id){const L=gi(A.id);for(let R=0;R<c.arrayIndex;R++){const z=m.layers[R];gi(z.id)===L&&s.push(new Xt(d,A.id,`duplicate layer id "${A.id}", previously used at line ${z.id.__line__}`))}}if("ref"in A){let L;["type","source","source-layer","filter","layout"].forEach(R=>{R in A&&s.push(new Xt(d,A[R],`"${R}" is prohibited for ref layers`))}),m.layers.forEach(R=>{gi(R.id)===E&&(L=R)}),L?L.ref?s.push(new Xt(d,A.ref,"ref cannot reference another ref layer")):x=gi(L.type):s.push(new Xt(d,A.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(A.source){const L=m.sources&&m.sources[A.source],R=L&&gi(L.type);L?R==="vector"&&x==="raster"?s.push(new Xt(d,A.source,`layer "${A.id}" requires a raster source`)):R!=="raster-dem"&&x==="hillshade"||R!=="raster-dem"&&x==="color-relief"?s.push(new Xt(d,A.source,`layer "${A.id}" requires a raster-dem source`)):R==="raster"&&x!=="raster"?s.push(new Xt(d,A.source,`layer "${A.id}" requires a vector source`)):R!=="vector"||A["source-layer"]?R==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?s.push(new Xt(d,A.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!A.paint||!A.paint["line-gradient"]||R==="geojson"&&L.lineMetrics||s.push(new Xt(d,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Xt(d,A,`layer "${A.id}" must specify a "source-layer"`)):s.push(new Xt(d,A.source,`source "${A.source}" not found`))}else s.push(new Xt(d,A,'missing required property "source"'));return s=s.concat(es({key:d,value:A,valueSpec:_.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${d}.type`,value:A.type,valueSpec:_.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:A,objectKey:"type"}),filter:ku,layout:L=>es({layer:A,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":R=>Fa(li({layerType:x},R))}}),paint:L=>es({layer:A,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":R=>tl(li({layerType:x},R))}})}})),s}function ua(c){const s=c.value,A=c.key,d=an(s);return d!=="string"?[new Xt(A,s,`string expected, ${d} found`)]:[]}const Uu={promoteId:function({key:c,value:s}){if(an(s)==="string")return ua({key:c,value:s});{const A=[];for(const d in s)A.push(...ua({key:`${c}.${d}`,value:s[d]}));return A}}};function Jd(c){const s=c.value,A=c.key,d=c.styleSpec,m=c.style,_=c.validateSpec;if(!s.type)return[new Xt(A,s,'"type" is required')];const x=gi(s.type);let E;switch(x){case"vector":case"raster":return E=es({key:A,value:s,valueSpec:d[`source_${x.replace("-","_")}`],style:c.style,styleSpec:d,objectElementValidators:Uu,validateSpec:_}),E;case"raster-dem":return E=function(L){var R;const z=(R=L.sourceName)!==null&&R!==void 0?R:"",G=L.value,J=L.styleSpec,ne=J.source_raster_dem,oe=L.style;let pe=[];const Be=an(G);if(G===void 0)return pe;if(Be!=="object")return pe.push(new Xt("source_raster_dem",G,`object expected, ${Be} found`)),pe;const Re=gi(G.encoding)==="custom",lt=["redFactor","greenFactor","blueFactor","baseShift"],qe=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const te in G)!Re&&lt.includes(te)?pe.push(new Xt(te,G[te],`In "${z}": "${te}" is only valid when "encoding" is set to "custom". ${qe} encoding found`)):ne[te]?pe=pe.concat(L.validateSpec({key:te,value:G[te],valueSpec:ne[te],validateSpec:L.validateSpec,style:oe,styleSpec:J})):pe.push(new Xt(te,G[te],`unknown property "${te}"`));return pe}({sourceName:A,value:s,style:c.style,styleSpec:d,validateSpec:_}),E;case"geojson":if(E=es({key:A,value:s,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:_,objectElementValidators:Uu}),s.cluster)for(const L in s.clusterProperties){const[R,z]=s.clusterProperties[L],G=typeof R=="string"?[R,["accumulated"],["get",L]]:R;E.push(...uA({key:`${A}.${L}.map`,value:z,expressionContext:"cluster-map"})),E.push(...uA({key:`${A}.${L}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return E;case"video":return es({key:A,value:s,valueSpec:d.source_video,style:m,validateSpec:_,styleSpec:d});case"image":return es({key:A,value:s,valueSpec:d.source_image,style:m,validateSpec:_,styleSpec:d});case"canvas":return[new Xt(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tc({key:`${A}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ef(c){const s=c.value,A=c.styleSpec,d=A.light,m=c.style;let _=[];const x=an(s);if(s===void 0)return _;if(x!=="object")return _=_.concat([new Xt("light",s,`object expected, ${x} found`)]),_;for(const E in s){const L=E.match(/^(.*)-transition$/);_=_.concat(L&&d[L[1]]&&d[L[1]].transition?c.validateSpec({key:E,value:s[E],valueSpec:A.transition,validateSpec:c.validateSpec,style:m,styleSpec:A}):d[E]?c.validateSpec({key:E,value:s[E],valueSpec:d[E],validateSpec:c.validateSpec,style:m,styleSpec:A}):[new Xt(E,s[E],`unknown property "${E}"`)])}return _}function rc(c){const s=c.value,A=c.styleSpec,d=A.sky,m=c.style,_=an(s);if(s===void 0)return[];if(_!=="object")return[new Xt("sky",s,`object expected, ${_} found`)];let x=[];for(const E in s)x=x.concat(d[E]?c.validateSpec({key:E,value:s[E],valueSpec:d[E],style:m,styleSpec:A}):[new Xt(E,s[E],`unknown property "${E}"`)]);return x}function qh(c){const s=c.value,A=c.styleSpec,d=A.terrain,m=c.style;let _=[];const x=an(s);if(s===void 0)return _;if(x!=="object")return _=_.concat([new Xt("terrain",s,`object expected, ${x} found`)]),_;for(const E in s)_=_.concat(d[E]?c.validateSpec({key:E,value:s[E],valueSpec:d[E],validateSpec:c.validateSpec,style:m,styleSpec:A}):[new Xt(E,s[E],`unknown property "${E}"`)]);return _}function Ru(c){let s=[];const A=c.value,d=c.key;if(Array.isArray(A)){const m=[],_=[];for(const x in A)A[x].id&&m.includes(A[x].id)&&s.push(new Xt(d,A,`all the sprites' ids must be unique, but ${A[x].id} is duplicated`)),m.push(A[x].id),A[x].url&&_.includes(A[x].url)&&s.push(new Xt(d,A,`all the sprites' URLs must be unique, but ${A[x].url} is duplicated`)),_.push(A[x].url),s=s.concat(es({key:`${d}[${x}]`,value:A[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return ua({key:d,value:A})}function tf(c){return s=c.value,s&&s.constructor===Object?[]:[new Xt(c.key,c.value,`object expected, ${an(c.value)} found`)];var s}const Yc={"*":()=>[],array:Xs,boolean:function(c){const s=c.value,A=c.key,d=an(s);return d!=="boolean"?[new Xt(A,s,`boolean expected, ${d} found`)]:[]},number:Zc,color:Mu,constants:Ia,enum:tc,filter:ku,function:ec,layer:Us,object:es,source:Jd,light:ef,sky:rc,terrain:qh,projection:function(c){const s=c.value,A=c.styleSpec,d=A.projection,m=c.style,_=an(s);if(s===void 0)return[];if(_!=="object")return[new Xt("projection",s,`object expected, ${_} found`)];let x=[];for(const E in s)x=x.concat(d[E]?c.validateSpec({key:E,value:s[E],valueSpec:d[E],style:m,styleSpec:A}):[new Xt(E,s[E],`unknown property "${E}"`)]);return x},projectionDefinition:function(c){const s=c.key;let A=c.value;A=A instanceof String?A.valueOf():A;const d=an(A);return d!=="array"||function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"}(A)||function(m){return!!["interpolate","step","literal"].includes(m[0])}(A)?["array","string"].includes(d)?[]:[new Xt(s,A,`projection expected, invalid type "${d}" found`)]:[new Xt(s,A,`projection expected, invalid array ${JSON.stringify(A)} found`)]},string:ua,formatted:function(c){return ua(c).length===0?[]:uA(c)},resolvedImage:function(c){return ua(c).length===0?[]:uA(c)},padding:function(c){const s=c.key,A=c.value;if(an(A)==="array"){if(A.length<1||A.length>4)return[new Xt(s,A,`padding requires 1 to 4 values; ${A.length} values found`)];const d={type:"number"};let m=[];for(let _=0;_<A.length;_++)m=m.concat(c.validateSpec({key:`${s}[${_}]`,value:A[_],validateSpec:c.validateSpec,valueSpec:d}));return m}return Zc({key:s,value:A,valueSpec:{}})},numberArray:function(c){const s=c.key,A=c.value;if(an(A)==="array"){const d={type:"number"};if(A.length<1)return[new Xt(s,A,"array length at least 1 expected, length 0 found")];let m=[];for(let _=0;_<A.length;_++)m=m.concat(c.validateSpec({key:`${s}[${_}]`,value:A[_],validateSpec:c.validateSpec,valueSpec:d}));return m}return Zc({key:s,value:A,valueSpec:{}})},colorArray:function(c){const s=c.key,A=c.value;if(an(A)==="array"){if(A.length<1)return[new Xt(s,A,"array length at least 1 expected, length 0 found")];let d=[];for(let m=0;m<A.length;m++)d=d.concat(Mu({key:`${s}[${m}]`,value:A[m]}));return d}return Mu({key:s,value:A})},variableAnchorOffsetCollection:function(c){const s=c.key,A=c.value,d=an(A),m=c.styleSpec;if(d!=="array"||A.length<1||A.length%2!=0)return[new Xt(s,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<A.length;x+=2)_=_.concat(tc({key:`${s}[${x}]`,value:A[x],valueSpec:m.layout_symbol["text-anchor"]})),_=_.concat(Xs({key:`${s}[${x+1}]`,value:A[x+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:m}));return _},sprite:Ru,state:tf};function hA(c){const s=c.value,A=c.valueSpec,d=c.styleSpec;return c.validateSpec=hA,A.expression&&Rl(gi(s))?ec(c):A.expression&&Tu(el(s))?uA(c):A.type&&Yc[A.type]?Yc[A.type](c):es(li({},c,{valueSpec:A.type?d[A.type]:A}))}function nc(c){const s=c.value,A=c.key,d=ua(c);return d.length||(s.indexOf("{fontstack}")===-1&&d.push(new Xt(A,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&d.push(new Xt(A,s,'"glyphs" url must include a "{range}" token'))),d}function Do(c,s=ze){let A=[];return A=A.concat(hA({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:hA,objectElementValidators:{glyphs:nc,"*":()=>[]}})),c.constants&&(A=A.concat(Ia({key:"constants",value:c.constants}))),S(A)}function Qo(c){return function(s){return c({...s,validateSpec:hA})}}function S(c){return[].concat(c).sort((s,A)=>s.line-A.line)}function T(c){return function(...s){return S(c.apply(this,s))}}Do.source=T(Qo(Jd)),Do.sprite=T(Qo(Ru)),Do.glyphs=T(Qo(nc)),Do.light=T(Qo(ef)),Do.sky=T(Qo(rc)),Do.terrain=T(Qo(qh)),Do.state=T(Qo(tf)),Do.layer=T(Qo(Us)),Do.filter=T(Qo(ku)),Do.paintProperty=T(Qo(tl)),Do.layoutProperty=T(Qo(Fa));const j=Do,W=j.light,ue=j.sky,ye=j.paintProperty,_e=j.layoutProperty;function be(c,s){let A=!1;if(s&&s.length)for(const d of s)c.fire(new Je(new Error(d.message))),A=!0;return A}class Fe{constructor(s,A,d){const m=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const x=new Int32Array(this.arrayBuffer);s=x[0],this.d=(A=x[1])+2*(d=x[2]);for(let L=0;L<this.d*this.d;L++){const R=x[3+L],z=x[3+L+1];m.push(R===z?null:x.subarray(R,z))}const E=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=A+2*d;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=s,this.padding=d,this.scale=A/s,this.uid=0;const _=d/A*s;this.min=-_,this.max=s+_}insert(s,A,d,m,_){this._forEachCell(A,d,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(A),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,A,d,m,_,x){this.cells[_].push(x)}query(s,A,d,m,_){const x=this.min,E=this.max;if(s<=x&&A<=x&&E<=d&&E<=m&&!_)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(s,A,d,m,this._queryCell,L,{},_),L}}_queryCell(s,A,d,m,_,x,E,L){const R=this.cells[_];if(R!==null){const z=this.keys,G=this.bboxes;for(let J=0;J<R.length;J++){const ne=R[J];if(E[ne]===void 0){const oe=4*ne;(L?L(G[oe+0],G[oe+1],G[oe+2],G[oe+3]):s<=G[oe+2]&&A<=G[oe+3]&&d>=G[oe+0]&&m>=G[oe+1])?(E[ne]=!0,x.push(z[ne])):E[ne]=!1}}}}_forEachCell(s,A,d,m,_,x,E,L){const R=this._convertToCellCoord(s),z=this._convertToCellCoord(A),G=this._convertToCellCoord(d),J=this._convertToCellCoord(m);for(let ne=R;ne<=G;ne++)for(let oe=z;oe<=J;oe++){const pe=this.d*oe+ne;if((!L||L(this._convertFromCellCoord(ne),this._convertFromCellCoord(oe),this._convertFromCellCoord(ne+1),this._convertFromCellCoord(oe+1)))&&_.call(this,s,A,d,m,pe,x,E,L))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,A=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const m=new Int32Array(A+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=A;for(let x=0;x<s.length;x++){const E=s[x];m[3+x]=_,m.set(E,_),_+=E.length}return m[3+s.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+s.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(s,A){const d=s.toArrayBuffer();return A&&A.push(d),{buffer:d}}static deserialize(s){return new Fe(s.buffer)}}const Ne={};function Qe(c,s,A={}){if(Ne[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),Ne[c]={klass:s,omit:A.omit||[],shallow:A.shallow||[]}}Qe("Object",Object),Qe("Set",Set),Qe("TransferableGridIndex",Fe),Qe("Color",en),Qe("Error",Error),Qe("AJAXError",Ue),Qe("ResolvedImage",Xi),Qe("StylePropertyFunction",Gc),Qe("StyleExpression",ZA,{omit:["_evaluator"]}),Qe("ZoomDependentExpression",Lu),Qe("ZoomConstantExpression",XA),Qe("CompoundExpression",ks,{omit:["_evaluate"]});for(const c in aA)aA[c]._classRegistryKey||Qe(`Expression_${c}`,aA[c]);function It(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Oe(c){return c.$name||c.constructor._classRegistryKey}function ht(c){return!function(s){if(s===null||typeof s!="object")return!1;const A=Oe(s);return!(!A||A==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||It(c)||ar(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function yt(c,s){if(ht(c))return(It(c)||ar(c))&&s&&s.push(c),ArrayBuffer.isView(c)&&s&&s.push(c.buffer),c instanceof ImageData&&s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const _=[];for(const x of c)_.push(yt(x,s));return _}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const A=Oe(c);if(!A)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!Ne[A])throw new Error(`${A} is not registered.`);const{klass:d}=Ne[A],m=d.serialize?d.serialize(c,s):{};if(d.serialize){if(s&&m===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in c){if(!c.hasOwnProperty(_)||Ne[A].omit.indexOf(_)>=0)continue;const x=c[_];m[_]=Ne[A].shallow.indexOf(_)>=0?x:yt(x,s)}c instanceof Error&&(m.message=c.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return A!=="Object"&&(m.$name=A),m}function Rt(c){if(ht(c))return c;if(Array.isArray(c))return c.map(Rt);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const s=Oe(c)||"Object";if(!Ne[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:A}=Ne[s];if(!A)throw new Error(`can't deserialize unregistered class ${s}`);if(A.deserialize)return A.deserialize(c);const d=Object.create(A.prototype);for(const m of Object.keys(c)){if(m==="$name")continue;const _=c[m];d[m]=Ne[s].shallow.indexOf(m)>=0?_:Rt(_)}return d}class Bt{constructor(){this.first=!0}update(s,A){const d=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=A),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=d,!0))}}const wt={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Ot(c){for(const s of c)if(Er(s.charCodeAt(0)))return!0;return!1}function rr(c){for(const s of c)if(!Br(s.charCodeAt(0)))return!1;return!0}function qt(c){const s=c.map(A=>{try{return new RegExp(`\\p{sc=${A}}`,"u").source}catch{return null}}).filter(A=>A);return new RegExp(s.join("|"),"u")}const Ur=qt(["Arab","Dupl","Mong","Ougr","Syrc"]);function Br(c){return!Ur.test(String.fromCodePoint(c))}const ln=qt(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Er(c){return!(c!==746&&c!==747&&(c<4352||!(wt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||wt["CJK Compatibility"](c)||wt["CJK Strokes"](c)||!(!wt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||wt["Enclosed CJK Letters and Months"](c)||wt["Ideographic Description Characters"](c)||wt.Kanbun(c)||wt.Katakana(c)&&c!==12540||!(!wt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!wt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||wt["Vertical Forms"](c)||wt["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||ln.test(String.fromCodePoint(c)))))}function _n(c){return!(Er(c)||function(s){return!!(wt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||wt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||wt["Letterlike Symbols"](s)||wt["Number Forms"](s)||wt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||wt["Control Pictures"](s)&&s!==9251||wt["Optical Character Recognition"](s)||wt["Enclosed Alphanumerics"](s)||wt["Geometric Shapes"](s)||wt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||wt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||wt["CJK Symbols and Punctuation"](s)||wt.Katakana(s)||wt["Private Use Area"](s)||wt["CJK Compatibility Forms"](s)||wt["Small Form Variants"](s)||wt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}const Vi=qt(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function rn(c){return Vi.test(String.fromCodePoint(c))}function Pr(c,s){return!(!s&&rn(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||wt.Khmer(c))}function Ar(c){for(const s of c)if(rn(s.charCodeAt(0)))return!0;return!1}const qn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(qn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,s){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const A=c.pluginURL,d=new Promise(_=>{this.loadScriptResolve=_});s(A);const m=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([d,m]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:A};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${A}`)})}};class vr{constructor(s,A){this.zoom=s,A?(this.now=A.now||0,this.fadeDuration=A.fadeDuration||0,this.zoomHistory=A.zoomHistory||new Bt,this.transition=A.transition||{},this.globalState=A.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bt,this.transition={},this.globalState={})}isSupportedScript(s){return function(A,d){for(const m of A)if(!Pr(m.charCodeAt(0),d))return!1;return!0}(s,qn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,A=s-Math.floor(s),d=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*A}}}class yn{constructor(s,A){this.property=s,this.value=A,this.expression=function(d,m){if(Rl(d))return new Gc(d,m);if(Tu(d)){const _=Gh(d,m);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=d;return m.type==="color"&&typeof d=="string"?_=en.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?m.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?_=pn.parse(d):m.type==="projectionDefinition"&&typeof d=="string"&&(_=Kr.parse(d)):_=Yn.parse(d):_=us.parse(d):_=wi.parse(d),{globalStateRefs:new Set,kind:"constant",evaluate:()=>_}}}(A===void 0?s.specification.default:A,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(s,A,d){return this.property.possiblyEvaluate(this,s,A,d)}}class Wn{constructor(s){this.property=s,this.value=new yn(s,void 0)}transitioned(s,A){return new Rs(this.property,this.value,A,kt({},s.transition,this.transition),s.now)}untransitioned(){return new Rs(this.property,this.value,null,{},0)}}class ts{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Ke(this._values[s].value.value)}setValue(s,A){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Wn(this._values[s].property)),this._values[s].value=new yn(this._values[s].property,A===null?void 0:Ke(A))}getTransition(s){return Ke(this._values[s].transition)}setTransition(s,A){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Wn(this._values[s].property)),this._values[s].transition=Ke(A)||void 0}serialize(){const s={};for(const A of Object.keys(this._values)){const d=this.getValue(A);d!==void 0&&(s[A]=d);const m=this.getTransition(A);m!==void 0&&(s[`${A}-transition`]=m)}return s}transitioned(s,A){const d=new yi(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(s,A._values[m]);return d}untransitioned(){const s=new yi(this._properties);for(const A of Object.keys(this._values))s._values[A]=this._values[A].untransitioned();return s}}class Rs{constructor(s,A,d,m,_){this.property=s,this.value=A,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,s.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(s,A,d){const m=s.now||0,_=this.value.possiblyEvaluate(s,A,d),x=this.prior;if(x){if(m>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(m<this.begin)return x.possiblyEvaluate(s,A,d);{const E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(s,A,d),_,at(E))}}return _}}class yi{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,A,d){const m=new Bi(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(s,A,d);return m}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Ns{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return Ke(this._values[s].value)}setValue(s,A){this._values[s]=new yn(this._values[s].property,A===null?void 0:Ke(A))}serialize(){const s={};for(const A of Object.keys(this._values)){const d=this.getValue(A);d!==void 0&&(s[A]=d)}return s}possiblyEvaluate(s,A,d){const m=new Bi(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(s,A,d);return m}}class ci{constructor(s,A,d){this.property=s,this.value=A,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,A,d,m){return this.property.evaluate(this.value,this.parameters,s,A,d,m)}}class Bi{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Zt{constructor(s){this.specification=s}possiblyEvaluate(s,A){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(A)}interpolate(s,A,d){const m=Mn[this.specification.type];return m?m(s,A,d):s}}class lr{constructor(s,A){this.specification=s,this.overrides=A}possiblyEvaluate(s,A,d,m){return new ci(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(A,null,{},d,m)}:s.expression,A)}interpolate(s,A,d){if(s.value.kind!=="constant"||A.value.kind!=="constant")return s;if(s.value.value===void 0||A.value.value===void 0)return new ci(this,{kind:"constant",value:void 0},s.parameters);const m=Mn[this.specification.type];if(m){const _=m(s.value.value,A.value.value,d);return new ci(this,{kind:"constant",value:_},s.parameters)}return s}evaluate(s,A,d,m,_,x){return s.kind==="constant"?s.value:s.evaluate(A,d,m,_,x)}}class ni extends lr{possiblyEvaluate(s,A,d,m){if(s.value===void 0)return new ci(this,{kind:"constant",value:void 0},A);if(s.expression.kind==="constant"){const _=s.expression.evaluate(A,null,{},d,m),x=s.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,E=this._calculate(x,x,x,A);return new ci(this,{kind:"constant",value:E},A)}if(s.expression.kind==="camera"){const _=this._calculate(s.expression.evaluate({zoom:A.zoom-1}),s.expression.evaluate({zoom:A.zoom}),s.expression.evaluate({zoom:A.zoom+1}),A);return new ci(this,{kind:"constant",value:_},A)}return new ci(this,s.expression,A)}evaluate(s,A,d,m,_,x){if(s.kind==="source"){const E=s.evaluate(A,d,m,_,x);return this._calculate(E,E,E,A)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(A.zoom)-1},d,m),s.evaluate({zoom:Math.floor(A.zoom)},d,m),s.evaluate({zoom:Math.floor(A.zoom)+1},d,m),A):s.value}_calculate(s,A,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:A}:{from:d,to:A}}interpolate(s){return s}}class Nn{constructor(s){this.specification=s}possiblyEvaluate(s,A,d,m){if(s.value!==void 0){if(s.expression.kind==="constant"){const _=s.expression.evaluate(A,null,{},d,m);return this._calculate(_,_,_,A)}return this._calculate(s.expression.evaluate(new vr(Math.floor(A.zoom-1),A)),s.expression.evaluate(new vr(Math.floor(A.zoom),A)),s.expression.evaluate(new vr(Math.floor(A.zoom+1),A)),A)}}_calculate(s,A,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:A}:{from:d,to:A}}interpolate(s){return s}}class Mi{constructor(s){this.specification=s}possiblyEvaluate(s,A,d,m){return!!s.expression.evaluate(A,null,{},d,m)}interpolate(){return!1}}class ii{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in s){const d=s[A];d.specification.overridable&&this.overridableProperties.push(A);const m=this.defaultPropertyValues[A]=new yn(d,void 0),_=this.defaultTransitionablePropertyValues[A]=new Wn(d);this.defaultTransitioningPropertyValues[A]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=m.possiblyEvaluate({})}}}Qe("DataDrivenProperty",lr),Qe("DataConstantProperty",Zt),Qe("CrossFadedDataDrivenProperty",ni),Qe("CrossFadedProperty",Nn),Qe("ColorRampProperty",Mi);const Ci="-transition";class On extends Et{constructor(s,A){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter,this._featureFilter=No(s.filter)),A.layout&&(this._unevaluatedLayout=new Ns(A.layout)),A.paint)){this._transitionablePaint=new ts(A.paint);for(const d in s.paint)this.setPaintProperty(d,s.paint[d],{validate:!1});for(const d in s.layout)this.setLayoutProperty(d,s.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Bi(A.paint)}}setFilter(s){this.filter=s,this._featureFilter=No(s)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}getLayoutAffectingGlobalStateRefs(){const s=new Set;if(this._unevaluatedLayout)for(const A in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[A];for(const m of d.getGlobalStateRefs())s.add(m)}for(const A of this._featureFilter.getGlobalStateRefs())s.add(A);return s}setLayoutProperty(s,A,d={}){A!=null&&this._validate(_e,`layers.${this.id}.layout.${s}`,s,A,d)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,A):this.visibility=A)}getPaintProperty(s){return s.endsWith(Ci)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,A,d={}){if(A!=null&&this._validate(ye,`layers.${this.id}.paint.${s}`,s,A,d))return!1;if(s.endsWith(Ci))return this._transitionablePaint.setTransition(s.slice(0,-11),A||void 0),!1;{const m=this._transitionablePaint._values[s],_=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(s,A),this._handleSpecialPaintPropertyUpdate(s);const L=this._transitionablePaint._values[s].value;return L.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(s,E,L)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,A,d){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,A){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,A)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Pt(s,(A,d)=>!(A===void 0||d==="layout"&&!Object.keys(A).length||d==="paint"&&!Object.keys(A).length))}_validate(s,A,d,m,_={}){return(!_||_.validate!==!1)&&be(this,s.call(j,{key:A,layerType:this.type,objectKey:d,value:m,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const A=this.paint.get(s);if(A instanceof ci&&ds(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const Zn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class si{constructor(s,A){this._structArray=s,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Cn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,A){return s._trim(),A&&(s.isTransferred=!0,A.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const A=Object.create(this.prototype);return A.arrayBuffer=s.arrayBuffer,A.length=s.length,A.capacity=s.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function wn(c,s=1){let A=0,d=0;return{members:c.map(m=>{const _=Zn[m.type].BYTES_PER_ELEMENT,x=A=fo(A,Math.max(s,_)),E=m.components||1;return d=Math.max(d,_),A+=_*E,{name:m.name,type:m.type,components:E,offset:x}}),size:fo(A,Math.max(d,s)),alignment:s}}function fo(c,s){return Math.ceil(c/s)*s}class Ki extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A){const d=this.length;return this.resize(d+1),this.emplace(d,s,A)}emplace(s,A,d){const m=2*s;return this.int16[m+0]=A,this.int16[m+1]=d,s}}Ki.prototype.bytesPerElement=4,Qe("StructArrayLayout2i4",Ki);class ki extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const _=3*s;return this.int16[_+0]=A,this.int16[_+1]=d,this.int16[_+2]=m,s}}ki.prototype.bytesPerElement=6,Qe("StructArrayLayout3i6",ki);class Ys extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,A,d,m)}emplace(s,A,d,m,_){const x=4*s;return this.int16[x+0]=A,this.int16[x+1]=d,this.int16[x+2]=m,this.int16[x+3]=_,s}}Ys.prototype.bytesPerElement=8,Qe("StructArrayLayout4i8",Ys);class zn extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x){const E=this.length;return this.resize(E+1),this.emplace(E,s,A,d,m,_,x)}emplace(s,A,d,m,_,x,E){const L=6*s;return this.int16[L+0]=A,this.int16[L+1]=d,this.int16[L+2]=m,this.int16[L+3]=_,this.int16[L+4]=x,this.int16[L+5]=E,s}}zn.prototype.bytesPerElement=12,Qe("StructArrayLayout2i4i12",zn);class rs extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x){const E=this.length;return this.resize(E+1),this.emplace(E,s,A,d,m,_,x)}emplace(s,A,d,m,_,x,E){const L=4*s,R=8*s;return this.int16[L+0]=A,this.int16[L+1]=d,this.uint8[R+4]=m,this.uint8[R+5]=_,this.uint8[R+6]=x,this.uint8[R+7]=E,s}}rs.prototype.bytesPerElement=8,Qe("StructArrayLayout2i4ub8",rs);class Js extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A){const d=this.length;return this.resize(d+1),this.emplace(d,s,A)}emplace(s,A,d){const m=2*s;return this.float32[m+0]=A,this.float32[m+1]=d,s}}Js.prototype.bytesPerElement=8,Qe("StructArrayLayout2f8",Js);class rl extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x,E,L,R,z){const G=this.length;return this.resize(G+1),this.emplace(G,s,A,d,m,_,x,E,L,R,z)}emplace(s,A,d,m,_,x,E,L,R,z,G){const J=10*s;return this.uint16[J+0]=A,this.uint16[J+1]=d,this.uint16[J+2]=m,this.uint16[J+3]=_,this.uint16[J+4]=x,this.uint16[J+5]=E,this.uint16[J+6]=L,this.uint16[J+7]=R,this.uint16[J+8]=z,this.uint16[J+9]=G,s}}rl.prototype.bytesPerElement=20,Qe("StructArrayLayout10ui20",rl);class Oo extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x,E,L,R,z,G,J){const ne=this.length;return this.resize(ne+1),this.emplace(ne,s,A,d,m,_,x,E,L,R,z,G,J)}emplace(s,A,d,m,_,x,E,L,R,z,G,J,ne){const oe=12*s;return this.int16[oe+0]=A,this.int16[oe+1]=d,this.int16[oe+2]=m,this.int16[oe+3]=_,this.uint16[oe+4]=x,this.uint16[oe+5]=E,this.uint16[oe+6]=L,this.uint16[oe+7]=R,this.int16[oe+8]=z,this.int16[oe+9]=G,this.int16[oe+10]=J,this.int16[oe+11]=ne,s}}Oo.prototype.bytesPerElement=24,Qe("StructArrayLayout4i4ui4i24",Oo);class ns extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const _=3*s;return this.float32[_+0]=A,this.float32[_+1]=d,this.float32[_+2]=m,s}}ns.prototype.bytesPerElement=12,Qe("StructArrayLayout3f12",ns);class y extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const A=this.length;return this.resize(A+1),this.emplace(A,s)}emplace(s,A){return this.uint32[1*s+0]=A,s}}y.prototype.bytesPerElement=4,Qe("StructArrayLayout1ul4",y);class n extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x,E,L,R){const z=this.length;return this.resize(z+1),this.emplace(z,s,A,d,m,_,x,E,L,R)}emplace(s,A,d,m,_,x,E,L,R,z){const G=10*s,J=5*s;return this.int16[G+0]=A,this.int16[G+1]=d,this.int16[G+2]=m,this.int16[G+3]=_,this.int16[G+4]=x,this.int16[G+5]=E,this.uint32[J+3]=L,this.uint16[G+8]=R,this.uint16[G+9]=z,s}}n.prototype.bytesPerElement=20,Qe("StructArrayLayout6i1ul2ui20",n);class l extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x){const E=this.length;return this.resize(E+1),this.emplace(E,s,A,d,m,_,x)}emplace(s,A,d,m,_,x,E){const L=6*s;return this.int16[L+0]=A,this.int16[L+1]=d,this.int16[L+2]=m,this.int16[L+3]=_,this.int16[L+4]=x,this.int16[L+5]=E,s}}l.prototype.bytesPerElement=12,Qe("StructArrayLayout2i2i2i12",l);class f extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_){const x=this.length;return this.resize(x+1),this.emplace(x,s,A,d,m,_)}emplace(s,A,d,m,_,x){const E=4*s,L=8*s;return this.float32[E+0]=A,this.float32[E+1]=d,this.float32[E+2]=m,this.int16[L+6]=_,this.int16[L+7]=x,s}}f.prototype.bytesPerElement=16,Qe("StructArrayLayout2f1f2i16",f);class p extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x){const E=this.length;return this.resize(E+1),this.emplace(E,s,A,d,m,_,x)}emplace(s,A,d,m,_,x,E){const L=16*s,R=4*s,z=8*s;return this.uint8[L+0]=A,this.uint8[L+1]=d,this.float32[R+1]=m,this.float32[R+2]=_,this.int16[z+6]=x,this.int16[z+7]=E,s}}p.prototype.bytesPerElement=16,Qe("StructArrayLayout2ub2f2i16",p);class v extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const _=3*s;return this.uint16[_+0]=A,this.uint16[_+1]=d,this.uint16[_+2]=m,s}}v.prototype.bytesPerElement=6,Qe("StructArrayLayout3ui6",v);class C extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x,E,L,R,z,G,J,ne,oe,pe,Be,Re){const lt=this.length;return this.resize(lt+1),this.emplace(lt,s,A,d,m,_,x,E,L,R,z,G,J,ne,oe,pe,Be,Re)}emplace(s,A,d,m,_,x,E,L,R,z,G,J,ne,oe,pe,Be,Re,lt){const qe=24*s,te=12*s,xe=48*s;return this.int16[qe+0]=A,this.int16[qe+1]=d,this.uint16[qe+2]=m,this.uint16[qe+3]=_,this.uint32[te+2]=x,this.uint32[te+3]=E,this.uint32[te+4]=L,this.uint16[qe+10]=R,this.uint16[qe+11]=z,this.uint16[qe+12]=G,this.float32[te+7]=J,this.float32[te+8]=ne,this.uint8[xe+36]=oe,this.uint8[xe+37]=pe,this.uint8[xe+38]=Be,this.uint32[te+10]=Re,this.int16[qe+22]=lt,s}}C.prototype.bytesPerElement=48,Qe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class F extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d,m,_,x,E,L,R,z,G,J,ne,oe,pe,Be,Re,lt,qe,te,xe,We,bt,Ht,Tt,Mt,Yt,jt){const er=this.length;return this.resize(er+1),this.emplace(er,s,A,d,m,_,x,E,L,R,z,G,J,ne,oe,pe,Be,Re,lt,qe,te,xe,We,bt,Ht,Tt,Mt,Yt,jt)}emplace(s,A,d,m,_,x,E,L,R,z,G,J,ne,oe,pe,Be,Re,lt,qe,te,xe,We,bt,Ht,Tt,Mt,Yt,jt,er){const Ut=32*s,dr=16*s;return this.int16[Ut+0]=A,this.int16[Ut+1]=d,this.int16[Ut+2]=m,this.int16[Ut+3]=_,this.int16[Ut+4]=x,this.int16[Ut+5]=E,this.int16[Ut+6]=L,this.int16[Ut+7]=R,this.uint16[Ut+8]=z,this.uint16[Ut+9]=G,this.uint16[Ut+10]=J,this.uint16[Ut+11]=ne,this.uint16[Ut+12]=oe,this.uint16[Ut+13]=pe,this.uint16[Ut+14]=Be,this.uint16[Ut+15]=Re,this.uint16[Ut+16]=lt,this.uint16[Ut+17]=qe,this.uint16[Ut+18]=te,this.uint16[Ut+19]=xe,this.uint16[Ut+20]=We,this.uint16[Ut+21]=bt,this.uint16[Ut+22]=Ht,this.uint32[dr+12]=Tt,this.float32[dr+13]=Mt,this.float32[dr+14]=Yt,this.uint16[Ut+30]=jt,this.uint16[Ut+31]=er,s}}F.prototype.bytesPerElement=64,Qe("StructArrayLayout8i15ui1ul2f2ui64",F);class M extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const A=this.length;return this.resize(A+1),this.emplace(A,s)}emplace(s,A){return this.float32[1*s+0]=A,s}}M.prototype.bytesPerElement=4,Qe("StructArrayLayout1f4",M);class O extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const _=3*s;return this.uint16[6*s+0]=A,this.float32[_+1]=d,this.float32[_+2]=m,s}}O.prototype.bytesPerElement=12,Qe("StructArrayLayout1ui2f12",O);class V extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const _=4*s;return this.uint32[2*s+0]=A,this.uint16[_+2]=d,this.uint16[_+3]=m,s}}V.prototype.bytesPerElement=8,Qe("StructArrayLayout1ul2ui8",V);class q extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A){const d=this.length;return this.resize(d+1),this.emplace(d,s,A)}emplace(s,A,d){const m=2*s;return this.uint16[m+0]=A,this.uint16[m+1]=d,s}}q.prototype.bytesPerElement=4,Qe("StructArrayLayout2ui4",q);class $ extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const A=this.length;return this.resize(A+1),this.emplace(A,s)}emplace(s,A){return this.uint16[1*s+0]=A,s}}$.prototype.bytesPerElement=2,Qe("StructArrayLayout1ui2",$);class Y extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,A,d,m)}emplace(s,A,d,m,_){const x=4*s;return this.float32[x+0]=A,this.float32[x+1]=d,this.float32[x+2]=m,this.float32[x+3]=_,s}}Y.prototype.bytesPerElement=16,Qe("StructArrayLayout4f16",Y);class de extends si{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new N(this.anchorPointX,this.anchorPointY)}}de.prototype.size=20;class Se extends n{get(s){return new de(this,s)}}Qe("CollisionBoxArray",Se);class Ce extends si{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ce.prototype.size=48;class Te extends C{get(s){return new Ce(this,s)}}Qe("PlacedSymbolArray",Te);class De extends si{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}De.prototype.size=64;class $e extends F{get(s){return new De(this,s)}}Qe("SymbolInstanceArray",$e);class He extends M{getoffsetX(s){return this.float32[1*s+0]}}Qe("GlyphOffsetArray",He);class Xe extends ki{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Qe("SymbolLineVertexArray",Xe);class tt extends si{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}tt.prototype.size=12;class je extends O{get(s){return new tt(this,s)}}Qe("TextAnchorOffsetArray",je);class ut extends si{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ut.prototype.size=8;class Ft extends V{get(s){return new ut(this,s)}}Qe("FeatureIndexArray",Ft);class vt extends Ki{}class _t extends Ki{}class xt extends Ki{}class ir extends zn{}class nr extends rs{}class zt extends Js{}class ur extends rl{}class sn extends Oo{}class xn extends ns{}class Jn extends y{}class kn extends l{}class Un extends p{}class En extends v{}class Sn extends q{}const Dn=wn([{name:"a_pos",components:2,type:"Int16"}],4),{members:is}=Dn;class vn{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,A,d,m){const _=this.segments[this.segments.length-1];return s>vn.MAX_VERTEX_ARRAY_LENGTH&&wr(`Max vertices per segment is ${vn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${vn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+s>vn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m?this.createNewSegment(A,d,m):_}createNewSegment(s,A,d){const m={vertexOffset:s.length,primitiveOffset:A.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(m.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(s,A,d){return this.prepareSegment(0,s,A,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const s of this.segments)for(const A in s.vaos)s.vaos[A].destroy()}static simpleSegment(s,A,d,m){return new vn([{vertexOffset:s,primitiveOffset:A,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function fs(c,s){return 256*(c=dt(Math.floor(c),0,255))+dt(Math.floor(s),0,255)}vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qe("SegmentVector",vn);const ss=wn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ta,ic,sc,Nl={exports:{}},Wh={exports:{}},Zh={exports:{}},Nu=function(){if(sc)return Nl.exports;sc=1;var c=(Ta||(Ta=1,Wh.exports=function(A,d){var m,_,x,E,L,R,z,G;for(_=A.length-(m=3&A.length),x=d,L=3432918353,R=461845907,G=0;G<_;)z=255&A.charCodeAt(G)|(255&A.charCodeAt(++G))<<8|(255&A.charCodeAt(++G))<<16|(255&A.charCodeAt(++G))<<24,++G,x=27492+(65535&(E=5*(65535&(x=(x^=z=(65535&(z=(z=(65535&z)*L+(((z>>>16)*L&65535)<<16)&4294967295)<<15|z>>>17))*R+(((z>>>16)*R&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(z=0,m){case 3:z^=(255&A.charCodeAt(G+2))<<16;case 2:z^=(255&A.charCodeAt(G+1))<<8;case 1:x^=z=(65535&(z=(z=(65535&(z^=255&A.charCodeAt(G)))*L+(((z>>>16)*L&65535)<<16)&4294967295)<<15|z>>>17))*R+(((z>>>16)*R&65535)<<16)&4294967295}return x^=A.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Wh.exports),s=(ic||(ic=1,Zh.exports=function(A,d){for(var m,_=A.length,x=d^_,E=0;_>=4;)m=1540483477*(65535&(m=255&A.charCodeAt(E)|(255&A.charCodeAt(++E))<<8|(255&A.charCodeAt(++E))<<16|(255&A.charCodeAt(++E))<<24))+((1540483477*(m>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),_-=4,++E;switch(_){case 3:x^=(255&A.charCodeAt(E+2))<<16;case 2:x^=(255&A.charCodeAt(E+1))<<8;case 1:x=1540483477*(65535&(x^=255&A.charCodeAt(E)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),Zh.exports);return Nl.exports=c,Nl.exports.murmur3=c,Nl.exports.murmur2=s,Nl.exports}(),zo=g(Nu);class nl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,A,d,m){this.ids.push(oc(s)),this.positions.push(A,d,m)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=oc(s);let d=0,m=this.ids.length-1;for(;d<m;){const x=d+m>>1;this.ids[x]>=A?m=x:d=x+1}const _=[];for(;this.ids[d]===A;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(s,A){const d=new Float64Array(s.ids),m=new Uint32Array(s.positions);return Jc(d,m,0,d.length-1),A&&A.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(s){const A=new nl;return A.ids=s.ids,A.positions=s.positions,A.indexed=!0,A}}function oc(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:zo(String(c))}function Jc(c,s,A,d){for(;A<d;){const m=c[A+d>>1];let _=A-1,x=d+1;for(;;){do _++;while(c[_]<m);do x--;while(c[x]>m);if(_>=x)break;Gi(c,_,x),Gi(s,3*_,3*x),Gi(s,3*_+1,3*x+1),Gi(s,3*_+2,3*x+2)}x-A<d-x?(Jc(c,s,A,x),A=x+1):(Jc(c,s,x+1,d),d=x)}}function Gi(c,s,A){const d=c[s];c[s]=c[A],c[A]=d}Qe("FeaturePositionMap",nl);class ui{constructor(s,A){this.gl=s.gl,this.location=A}}class xo extends ui{constructor(s,A){super(s,A),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class bs extends ui{constructor(s,A){super(s,A),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class $g extends ui{constructor(s,A){super(s,A),this.current=en.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const K1=new Float32Array(16);function Hp(c){return[fs(255*c.r,255*c.g),fs(255*c.b,255*c.a)]}class Xh{constructor(s,A,d){this.value=s,this.uniformNames=A.map(m=>`u_${m}`),this.type=d}setUniform(s,A,d){s.set(d.constantOr(this.value))}getBinding(s,A,d){return this.type==="color"?new $g(s,A):new xo(s,A)}}class Du{constructor(s,A){this.uniformNames=A.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=s.tlbr}setUniform(s,A,d,m){const _=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&s.set(_)}getBinding(s,A,d){return d.substr(0,9)==="u_pattern"?new bs(s,A):new xo(s,A)}}class dA{constructor(s,A,d,m){this.expression=s,this.type=d,this.maxValue=0,this.paintVertexAttributes=A.map(_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(s,A,d,m,_){const x=this.paintVertexArray.length,E=this.expression.evaluate(new vr(0),A,{},m,[],_);this.paintVertexArray.resize(s),this._setPaintValue(x,s,E)}updatePaintArray(s,A,d,m){const _=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(s,A,_)}_setPaintValue(s,A,d){if(this.type==="color"){const m=Hp(d);for(let _=s;_<A;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=s;m<A;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class eo{constructor(s,A,d,m,_,x){this.expression=s,this.uniformNames=A.map(E=>`u_${E}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=A.map(E=>({name:`a_${E}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(s,A,d,m,_){const x=this.expression.evaluate(new vr(this.zoom),A,{},m,[],_),E=this.expression.evaluate(new vr(this.zoom+1),A,{},m,[],_),L=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(L,s,x,E)}updatePaintArray(s,A,d,m){const _=this.expression.evaluate({zoom:this.zoom},d,m),x=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(s,A,_,x)}_setPaintValue(s,A,d,m){if(this.type==="color"){const _=Hp(d),x=Hp(m);for(let E=s;E<A;E++)this.paintVertexArray.emplace(E,_[0],_[1],x[0],x[1])}else{for(let _=s;_<A;_++)this.paintVertexArray.emplace(_,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,A){const d=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,m=dt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);s.set(m)}getBinding(s,A,d){return new xo(s,A)}}class fA{constructor(s,A,d,m,_,x){this.expression=s,this.type=A,this.useIntegerZoom=d,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(s,A,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(m,s,A.patterns&&A.patterns[this.layerId],d)}updatePaintArray(s,A,d,m,_){this._setPaintValues(s,A,d.patterns&&d.patterns[this.layerId],_)}_setPaintValues(s,A,d,m){if(!m||!d)return;const{min:_,mid:x,max:E}=d,L=m[_],R=m[x],z=m[E];if(L&&R&&z)for(let G=s;G<A;G++)this.zoomInPaintVertexArray.emplace(G,R.tl[0],R.tl[1],R.br[0],R.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],R.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,R.tl[0],R.tl[1],R.br[0],R.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],R.pixelRatio,z.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,ss.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,ss.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class jp{constructor(s,A,d){this.binders={},this._buffers=[];const m=[];for(const _ in s.paint._values){if(!d(_))continue;const x=s.paint.get(_);if(!(x instanceof ci&&ds(x.property.specification)))continue;const E=Vp(_,s.type),L=x.value,R=x.property.specification.type,z=x.property.useIntegerZoom,G=x.property.specification["property-type"],J=G==="cross-faded"||G==="cross-faded-data-driven";if(L.kind==="constant")this.binders[_]=J?new Du(L.value,E):new Xh(L.value,E,R),m.push(`/u_${_}`);else if(L.kind==="source"||J){const ne=Kp(_,R,"source");this.binders[_]=J?new fA(L,R,z,A,ne,s.id):new dA(L,E,R,ne),m.push(`/a_${_}`)}else{const ne=Kp(_,R,"composite");this.binders[_]=new eo(L,E,R,z,A,ne),m.push(`/z_${_}`)}}this.cacheKey=m.sort().join("")}getMaxValue(s){const A=this.binders[s];return A instanceof dA||A instanceof eo?A.maxValue:0}populatePaintArrays(s,A,d,m,_){for(const x in this.binders){const E=this.binders[x];(E instanceof dA||E instanceof eo||E instanceof fA)&&E.populatePaintArray(s,A,d,m,_)}}setConstantPatternPositions(s,A){for(const d in this.binders){const m=this.binders[d];m instanceof Du&&m.setConstantPatternPositions(s,A)}}updatePaintArrays(s,A,d,m,_){let x=!1;for(const E in s){const L=A.getPositions(E);for(const R of L){const z=d.feature(R.index);for(const G in this.binders){const J=this.binders[G];if((J instanceof dA||J instanceof eo||J instanceof fA)&&J.expression.isStateDependent===!0){const ne=m.paint.get(G);J.expression=ne.value,J.updatePaintArray(R.start,R.end,z,s[E],_),x=!0}}}}return x}defines(){const s=[];for(const A in this.binders){const d=this.binders[A];(d instanceof Xh||d instanceof Du)&&s.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return s}getBinderAttributes(){const s=[];for(const A in this.binders){const d=this.binders[A];if(d instanceof dA||d instanceof eo)for(let m=0;m<d.paintVertexAttributes.length;m++)s.push(d.paintVertexAttributes[m].name);else if(d instanceof fA)for(let m=0;m<ss.members.length;m++)s.push(ss.members[m].name)}return s}getBinderUniforms(){const s=[];for(const A in this.binders){const d=this.binders[A];if(d instanceof Xh||d instanceof Du||d instanceof eo)for(const m of d.uniformNames)s.push(m)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,A){const d=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof Xh||_ instanceof Du||_ instanceof eo){for(const x of _.uniformNames)if(A[x]){const E=_.getBinding(s,A[x],x);d.push({name:x,property:m,binding:E})}}}return d}setUniforms(s,A,d,m){for(const{name:_,property:x,binding:E}of A)this.binders[x].setUniform(E,m,d.get(x),_)}updatePaintBuffers(s){this._buffers=[];for(const A in this.binders){const d=this.binders[A];if(s&&d instanceof fA){const m=s.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof dA||d instanceof eo)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(s){for(const A in this.binders){const d=this.binders[A];(d instanceof dA||d instanceof eo||d instanceof fA)&&d.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const A=this.binders[s];(A instanceof dA||A instanceof eo||A instanceof fA)&&A.destroy()}}}class ac{constructor(s,A,d=()=>!0){this.programConfigurations={};for(const m of s)this.programConfigurations[m.id]=new jp(m,A,d);this.needsUpload=!1,this._featureMap=new nl,this._bufferOffset=0}populatePaintArrays(s,A,d,m,_,x){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(s,A,m,_,x);A.id!==void 0&&this._featureMap.add(A.id,d,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,A,d,m){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(s,this._featureMap,A,_,m)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Vp(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function Kp(c,s,A){const d={color:{source:Js,composite:Y},number:{source:M,composite:Js}},m=function(_){return{"line-pattern":{source:ur,composite:ur},"fill-pattern":{source:ur,composite:ur},"fill-extrusion-pattern":{source:ur,composite:ur}}[_]}(c);return m&&m[A]||d[s][A]}Qe("ConstantBinder",Xh),Qe("CrossFadedConstantBinder",Du),Qe("SourceExpressionBinder",dA),Qe("CrossFadedCompositeBinder",fA),Qe("CompositeExpressionBinder",eo),Qe("ProgramConfiguration",jp,{omit:["_buffers"]}),Qe("ProgramConfigurationSet",ac);const Yh=Math.pow(2,14)-1,oC=-Yh-1;function Jh(c){const s=ie/c.extent,A=c.loadGeometry();for(let d=0;d<A.length;d++){const m=A[d];for(let _=0;_<m.length;_++){const x=m[_],E=Math.round(x.x*s),L=Math.round(x.y*s);x.x=dt(E,oC,Yh),x.y=dt(L,oC,Yh),(E<x.x||E>x.x+1||L<x.y||L>x.y+1)&&wr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function ed(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?Jh(c):[]}}const aC=-32768;function p6(c,s,A,d,m){c.emplaceBack(aC+8*s+d,aC+8*A+m)}class G1{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new _t,this.indexArray=new En,this.segments=new vn,this.programConfigurations=new ac(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(s,A,d){const m=this.layers[0],_=[];let x=null,E=!1,L=m.type==="heatmap";if(m.type==="circle"){const z=m;x=z.layout.get("circle-sort-key"),E=!x.isConstant(),L=L||z.paint.get("circle-pitch-alignment")==="map"}const R=L?A.subdivisionGranularity.circle:1;for(const{feature:z,id:G,index:J,sourceLayerIndex:ne}of s){const oe=this.layers[0]._featureFilter.needGeometry,pe=ed(z,oe);if(!this.layers[0]._featureFilter.filter(new vr(this.zoom,{globalState:this.globalState}),pe,d))continue;const Be=E?x.evaluate(pe,{},d):void 0,Re={id:G,properties:z.properties,type:z.type,sourceLayerIndex:ne,index:J,geometry:oe?pe.geometry:Jh(z),patterns:{},sortKey:Be};_.push(Re)}E&&_.sort((z,G)=>z.sortKey-G.sortKey);for(const z of _){const{geometry:G,index:J,sourceLayerIndex:ne}=z,oe=s[J].feature;this.addFeature(z,G,J,d,R),A.featureIndex.insert(oe,G,J,ne,this.index)}}update(s,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,A,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,is),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,A,d,m,_=1){let x;switch(_){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const E=x.length;for(const L of A)for(const R of L){const z=R.x,G=R.y;if(z<0||z>=ie||G<0||G>=ie)continue;const J=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,s.sortKey),ne=J.vertexLength;for(let oe=0;oe<E;oe++)for(let pe=0;pe<E;pe++)p6(this.layoutVertexArray,z,G,x[pe],x[oe]);for(let oe=0;oe<E-1;oe++)for(let pe=0;pe<E-1;pe++){const Be=ne+oe*E+pe,Re=ne+(oe+1)*E+pe;this.indexArray.emplaceBack(Be,Re+1,Be+1),this.indexArray.emplaceBack(Be,Re,Re+1)}J.vertexLength+=E*E,J.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,{},m)}}function lC(c,s){for(let A=0;A<c.length;A++)if(rf(s,c[A]))return!0;for(let A=0;A<s.length;A++)if(rf(c,s[A]))return!0;return!!$1(c,s)}function m6(c,s,A){return!!rf(c,s)||!!q1(s,c,A)}function AC(c,s){if(c.length===1)return uC(s,c[0]);for(let A=0;A<s.length;A++){const d=s[A];for(let m=0;m<d.length;m++)if(rf(c,d[m]))return!0}for(let A=0;A<c.length;A++)if(uC(s,c[A]))return!0;for(let A=0;A<s.length;A++)if($1(c,s[A]))return!0;return!1}function g6(c,s,A){if(c.length>1){if($1(c,s))return!0;for(let d=0;d<s.length;d++)if(q1(s[d],c,A))return!0}for(let d=0;d<c.length;d++)if(q1(c[d],s,A))return!0;return!1}function $1(c,s){if(c.length===0||s.length===0)return!1;for(let A=0;A<c.length-1;A++){const d=c[A],m=c[A+1];for(let _=0;_<s.length-1;_++)if(y6(d,m,s[_],s[_+1]))return!0}return!1}function y6(c,s,A,d){return fr(c,A,d)!==fr(s,A,d)&&fr(c,s,A)!==fr(c,s,d)}function q1(c,s,A){const d=A*A;if(s.length===1)return c.distSqr(s[0])<d;for(let m=1;m<s.length;m++)if(cC(c,s[m-1],s[m])<d)return!0;return!1}function cC(c,s,A){const d=s.distSqr(A);if(d===0)return c.distSqr(s);const m=((c.x-s.x)*(A.x-s.x)+(c.y-s.y)*(A.y-s.y))/d;return c.distSqr(m<0?s:m>1?A:A.sub(s)._mult(m)._add(s))}function uC(c,s){let A,d,m,_=!1;for(let x=0;x<c.length;x++){A=c[x];for(let E=0,L=A.length-1;E<A.length;L=E++)d=A[E],m=A[L],d.y>s.y!=m.y>s.y&&s.x<(m.x-d.x)*(s.y-d.y)/(m.y-d.y)+d.x&&(_=!_)}return _}function rf(c,s){let A=!1;for(let d=0,m=c.length-1;d<c.length;m=d++){const _=c[d],x=c[m];_.y>s.y!=x.y>s.y&&s.x<(x.x-_.x)*(s.y-_.y)/(x.y-_.y)+_.x&&(A=!A)}return A}function v6(c,s,A){const d=A[0],m=A[2];if(c.x<d.x&&s.x<d.x||c.x>m.x&&s.x>m.x||c.y<d.y&&s.y<d.y||c.y>m.y&&s.y>m.y)return!1;const _=fr(c,s,A[0]);return _!==fr(c,s,A[1])||_!==fr(c,s,A[2])||_!==fr(c,s,A[3])}function Gp(c,s,A){const d=s.paint.get(c).value;return d.kind==="constant"?d.value:A.programConfigurations.get(s.id).getMaxValue(c)}function qg(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Wg(c,s,A,d,m){if(!s[0]&&!s[1])return c;const _=N.convert(s)._mult(m);A==="viewport"&&_._rotate(-d);const x=[];for(let E=0;E<c.length;E++)x.push(c[E].sub(_));return x}let hC,dC;Qe("CircleBucket",G1,{omit:["layers"]});var _6={get paint(){return dC=dC||new ii({"circle-radius":new lr(ze.paint_circle["circle-radius"]),"circle-color":new lr(ze.paint_circle["circle-color"]),"circle-blur":new lr(ze.paint_circle["circle-blur"]),"circle-opacity":new lr(ze.paint_circle["circle-opacity"]),"circle-translate":new Zt(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new lr(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new lr(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new lr(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return hC=hC||new ii({"circle-sort-key":new lr(ze.layout_circle["circle-sort-key"])})}};class w6 extends On{constructor(s){super(s,_6)}createBucket(s){return new G1(s)}queryRadius(s){const A=s;return Gp("circle-radius",this,A)+Gp("circle-stroke-width",this,A)+qg(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:A,featureState:d,geometry:m,transform:_,pixelsToTileUnits:x,unwrappedTileID:E,getElevation:L}){const R=Wg(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,x),z=this.paint.get("circle-radius").evaluate(A,d)+this.paint.get("circle-stroke-width").evaluate(A,d),G=this.paint.get("circle-pitch-alignment")==="map",J=G?R:function(oe,pe,Be,Re){return oe.map(lt=>fC(lt,pe,Be,Re))}(R,_,E,L),ne=G?z*x:z;for(const oe of m)for(const pe of oe){const Be=G?pe:fC(pe,_,E,L);let Re=ne;const lt=_.projectTileCoordinates(pe.x,pe.y,E,L).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Re*=lt/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Re*=_.cameraToCenterDistance/lt),m6(J,Be,Re))return!0}return!1}}function fC(c,s,A,d){const m=s.projectTileCoordinates(c.x,c.y,A,d).point;return new N((.5*m.x+.5)*s.width,(.5*-m.y+.5)*s.height)}class pC extends G1{}let mC;Qe("HeatmapBucket",pC,{omit:["layers"]});var x6={get paint(){return mC=mC||new ii({"heatmap-radius":new lr(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new lr(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Mi(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(ze.paint_heatmap["heatmap-opacity"])})}};function W1(c,{width:s,height:A},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==s*A*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${s*A*d}`)}else m=new Uint8Array(s*A*d);return c.width=s,c.height=A,c.data=m,c}function gC(c,{width:s,height:A},d){if(s===c.width&&A===c.height)return;const m=W1({},{width:s,height:A},d);Z1(c,m,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,A)},d),c.width=s,c.height=A,c.data=m.data}function Z1(c,s,A,d,m,_){if(m.width===0||m.height===0)return s;if(m.width>c.width||m.height>c.height||A.x>c.width-m.width||A.y>c.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>s.width||m.height>s.height||d.x>s.width-m.width||d.y>s.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=c.data,E=s.data;if(x===E)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<m.height;L++){const R=((A.y+L)*c.width+A.x)*_,z=((d.y+L)*s.width+d.x)*_;for(let G=0;G<m.width*_;G++)E[z+G]=x[R+G]}return s}class $p{constructor(s,A){W1(this,s,1,A)}resize(s){gC(this,s,1)}clone(){return new $p({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,A,d,m,_){Z1(s,A,d,m,_,1)}}class ha{constructor(s,A){W1(this,s,4,A)}resize(s){gC(this,s,4)}replace(s,A){A?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new ha({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,A,d,m,_){Z1(s,A,d,m,_,4)}setPixel(s,A,d){const m=4*(s*this.width+A);this.data[m+0]=Math.round(255*d.r/d.a),this.data[m+1]=Math.round(255*d.g/d.a),this.data[m+2]=Math.round(255*d.b/d.a),this.data[m+3]=Math.round(255*d.a)}}function yC(c){const s={},A=c.resolution||256,d=c.clips?c.clips.length:1,m=c.image||new ha({width:A,height:d});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const _=(x,E,L)=>{s[c.evaluationKey]=L;const R=c.expression.evaluate(s);m.setPixel(x/4/A,E/4,R)};if(c.clips)for(let x=0,E=0;x<d;++x,E+=4*A)for(let L=0,R=0;L<A;L++,R+=4){const z=L/(A-1),{start:G,end:J}=c.clips[x];_(E,R,G*(1-z)+J*z)}else for(let x=0,E=0;x<A;x++,E+=4)_(0,E,x/(A-1));return m}Qe("AlphaImage",$p),Qe("RGBAImage",ha);const X1="big-fb";class b6 extends On{createBucket(s){return new pC(s)}constructor(s){super(s,x6),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yC({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(X1)&&this.heatmapFbos.delete(X1)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let vC;var B6={get paint(){return vC=vC||new ii({"hillshade-illumination-direction":new Zt(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Zt(ze.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Zt(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(ze.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Zt(ze.paint_hillshade["hillshade-method"])})}};class C6 extends On{constructor(s){super(s,B6),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,A=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const _=Math.max(s.length,A.length,d.length,m.length);s=s.concat(Array(_-s.length).fill(s.at(-1))),A=A.concat(Array(_-A.length).fill(A.at(-1))),d=d.concat(Array(_-d.length).fill(d.at(-1))),m=m.concat(Array(_-m.length).fill(m.at(-1)));const x=A.map(Jr);return{directionRadians:s.map(Jr),altitudeRadians:x,shadowColor:m,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let _C;var S6={get paint(){return _C=_C||new ii({"color-relief-opacity":new Zt(ze["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Mi(ze["paint_color-relief"]["color-relief-color"])})}};class Y1{constructor(s,A,d,m){this.context=s,this.format=d,this.texture=s.gl.createTexture(),this.update(A,m)}update(s,A,d){const{width:m,height:_}=s,x=!(this.size&&this.size[0]===m&&this.size[1]===_||d),{context:E}=this,{gl:L}=E;if(this.useMipmap=!!(A&&A.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!A||A.premultiply!==!1)),x)this.size=[m,_],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||ar(s)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,s):L.texImage2D(L.TEXTURE_2D,0,this.format,m,_,0,this.format,L.UNSIGNED_BYTE,s.data);else{const{x:R,y:z}=d||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||ar(s)?L.texSubImage2D(L.TEXTURE_2D,0,R,z,L.RGBA,L.UNSIGNED_BYTE,s):L.texSubImage2D(L.TEXTURE_2D,0,R,z,m,_,L.RGBA,L.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,A,d){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),s!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,s),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||s),this.filter=s),A!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,A),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,A),this.wrap=A)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class wC{constructor(s,A,d,m=1,_=1,x=1,E=0){if(this.uid=s,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void wr(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const L=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=_,this.blueFactor=x,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let R=0;R<L;R++)this.data[this._idx(-1,R)]=this.data[this._idx(0,R)],this.data[this._idx(L,R)]=this.data[this._idx(L-1,R)],this.data[this._idx(R,-1)]=this.data[this._idx(R,0)],this.data[this._idx(R,L)]=this.data[this._idx(R,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let R=0;R<L;R++)for(let z=0;z<L;z++){const G=this.get(R,z);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(s,A){const d=new Uint8Array(this.data.buffer),m=4*this._idx(s,A);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,A){if(s<-1||s>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(s+1)}unpack(s,A,d){return s*this.redFactor+A*this.greenFactor+d*this.blueFactor-this.baseShift}pack(s){return xC(s,this.getUnpackVector())}getPixels(){return new ha({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,A,d){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let m=A*this.dim,_=A*this.dim+this.dim,x=d*this.dim,E=d*this.dim+this.dim;switch(A){case-1:m=_-1;break;case 1:_=m+1}switch(d){case-1:x=E-1;break;case 1:E=x+1}const L=-A*this.dim,R=-d*this.dim;for(let z=x;z<E;z++)for(let G=m;G<_;G++)this.data[this._idx(G,z)]=s.data[this._idx(G+L,z+R)]}}function xC(c,s){const A=s[0],d=s[1],m=s[2],_=s[3],x=Math.min(A,d,m),E=Math.round((c+_)/x);return{r:Math.floor(E*x/A)%256,g:Math.floor(E*x/d)%256,b:Math.floor(E*x/m)%256}}Qe("DEMData",wC);class E6 extends On{constructor(s){super(s,S6)}_createColorRamp(s){const A={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof XA&&d._styleExpression.expression instanceof tn){this.colorRampExpression=d;const x=d._styleExpression.expression;A.elevationStops=x.labels,A.colorStops=[];for(const E of A.elevationStops)A.colorStops.push(x.evaluate({globals:{elevation:E}}))}if(A.elevationStops.length<1&&(A.elevationStops=[0],A.colorStops=[en.transparent]),A.elevationStops.length<2&&(A.elevationStops.push(A.elevationStops[0]+1),A.colorStops.push(A.colorStops[0])),A.elevationStops.length<=s)return A;const m={elevationStops:[],colorStops:[]},_=(A.elevationStops.length-1)/(s-1);for(let x=0;x<A.elevationStops.length-.5;x+=_)m.elevationStops.push(A.elevationStops[Math.round(x)]),m.colorStops.push(A.colorStops[Math.round(x)]);return wr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(s,A,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(A),_=new ha({width:m.colorStops.length,height:1}),x=new ha({width:m.colorStops.length,height:1});for(let E=0;E<m.elevationStops.length;E++){const L=xC(m.elevationStops[E],d);x.setPixel(0,E,new en(L.r/255,L.g/255,L.b/255,1)),_.setPixel(0,E,m.colorStops[E])}return this.colorRampTextures={elevationTexture:new Y1(s,x,s.gl.RGBA),colorTexture:new Y1(s,_,s.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const I6=wn([{name:"a_pos",components:2,type:"Int16"}],4),{members:F6}=I6;function J1(c,s,A){const d=A.patternDependencies;let m=!1;for(const _ of s){const x=_.paint.get(`${c}-pattern`);x.isConstant()||(m=!0);const E=x.constantOr(null);E&&(m=!0,d[E.to]=!0,d[E.from]=!0)}return m}function e_(c,s,A,d,m){const _=m.patternDependencies;for(const x of s){const E=x.paint.get(`${c}-pattern`).value;if(E.kind!=="constant"){let L=E.evaluate({zoom:d-1},A,{},m.availableImages),R=E.evaluate({zoom:d},A,{},m.availableImages),z=E.evaluate({zoom:d+1},A,{},m.availableImages);L=L&&L.name?L.name:L,R=R&&R.name?R.name:R,z=z&&z.name?z.name:z,_[L]=!0,_[R]=!0,_[z]=!0,A.patterns[x.id]={min:L,mid:R,max:z}}}return A}function bC(c,s,A,d,m){let _;if(m===function(x,E,L,R){let z=0;for(let G=E,J=L-R;G<L;G+=R)z+=(x[J]-x[G])*(x[G+1]+x[J+1]),J=G;return z}(c,s,A,d)>0)for(let x=s;x<A;x+=d)_=EC(x/d|0,c[x],c[x+1],_);else for(let x=A-d;x>=s;x-=d)_=EC(x/d|0,c[x],c[x+1],_);return _&&nf(_,_.next)&&(Xp(_),_=_.next),_}function td(c,s){if(!c)return c;s||(s=c);let A,d=c;do if(A=!1,d.steiner||!nf(d,d.next)&&os(d.prev,d,d.next)!==0)d=d.next;else{if(Xp(d),d=s=d.prev,d===d.next)break;A=!0}while(A||d!==s);return s}function qp(c,s,A,d,m,_,x){if(!c)return;!x&&_&&function(L,R,z,G){let J=L;do J.z===0&&(J.z=t_(J.x,J.y,R,z,G)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==L);J.prevZ.nextZ=null,J.prevZ=null,function(ne){let oe,pe=1;do{let Be,Re=ne;ne=null;let lt=null;for(oe=0;Re;){oe++;let qe=Re,te=0;for(let We=0;We<pe&&(te++,qe=qe.nextZ,qe);We++);let xe=pe;for(;te>0||xe>0&&qe;)te!==0&&(xe===0||!qe||Re.z<=qe.z)?(Be=Re,Re=Re.nextZ,te--):(Be=qe,qe=qe.nextZ,xe--),lt?lt.nextZ=Be:ne=Be,Be.prevZ=lt,lt=Be;Re=qe}lt.nextZ=null,pe*=2}while(oe>1)}(J)}(c,d,m,_);let E=c;for(;c.prev!==c.next;){const L=c.prev,R=c.next;if(_?P6(c,d,m,_):T6(c))s.push(L.i,c.i,R.i),Xp(c),c=R.next,E=R.next;else if((c=R)===E){x?x===1?qp(c=L6(td(c),s),s,A,d,m,_,2):x===2&&M6(c,s,A,d,m,_):qp(td(c),s,A,d,m,_,1);break}}}function T6(c){const s=c.prev,A=c,d=c.next;if(os(s,A,d)>=0)return!1;const m=s.x,_=A.x,x=d.x,E=s.y,L=A.y,R=d.y,z=Math.min(m,_,x),G=Math.min(E,L,R),J=Math.max(m,_,x),ne=Math.max(E,L,R);let oe=d.next;for(;oe!==s;){if(oe.x>=z&&oe.x<=J&&oe.y>=G&&oe.y<=ne&&Wp(m,E,_,L,x,R,oe.x,oe.y)&&os(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function P6(c,s,A,d){const m=c.prev,_=c,x=c.next;if(os(m,_,x)>=0)return!1;const E=m.x,L=_.x,R=x.x,z=m.y,G=_.y,J=x.y,ne=Math.min(E,L,R),oe=Math.min(z,G,J),pe=Math.max(E,L,R),Be=Math.max(z,G,J),Re=t_(ne,oe,s,A,d),lt=t_(pe,Be,s,A,d);let qe=c.prevZ,te=c.nextZ;for(;qe&&qe.z>=Re&&te&&te.z<=lt;){if(qe.x>=ne&&qe.x<=pe&&qe.y>=oe&&qe.y<=Be&&qe!==m&&qe!==x&&Wp(E,z,L,G,R,J,qe.x,qe.y)&&os(qe.prev,qe,qe.next)>=0||(qe=qe.prevZ,te.x>=ne&&te.x<=pe&&te.y>=oe&&te.y<=Be&&te!==m&&te!==x&&Wp(E,z,L,G,R,J,te.x,te.y)&&os(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;qe&&qe.z>=Re;){if(qe.x>=ne&&qe.x<=pe&&qe.y>=oe&&qe.y<=Be&&qe!==m&&qe!==x&&Wp(E,z,L,G,R,J,qe.x,qe.y)&&os(qe.prev,qe,qe.next)>=0)return!1;qe=qe.prevZ}for(;te&&te.z<=lt;){if(te.x>=ne&&te.x<=pe&&te.y>=oe&&te.y<=Be&&te!==m&&te!==x&&Wp(E,z,L,G,R,J,te.x,te.y)&&os(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function L6(c,s){let A=c;do{const d=A.prev,m=A.next.next;!nf(d,m)&&CC(d,A,A.next,m)&&Zp(d,m)&&Zp(m,d)&&(s.push(d.i,A.i,m.i),Xp(A),Xp(A.next),A=c=m),A=A.next}while(A!==c);return td(A)}function M6(c,s,A,d,m,_){let x=c;do{let E=x.next.next;for(;E!==x.prev;){if(x.i!==E.i&&D6(x,E)){let L=SC(x,E);return x=td(x,x.next),L=td(L,L.next),qp(x,s,A,d,m,_,0),void qp(L,s,A,d,m,_,0)}E=E.next}x=x.next}while(x!==c)}function k6(c,s){let A=c.x-s.x;return A===0&&(A=c.y-s.y,A===0)&&(A=(c.next.y-c.y)/(c.next.x-c.x)-(s.next.y-s.y)/(s.next.x-s.x)),A}function U6(c,s){const A=function(m,_){let x=_;const E=m.x,L=m.y;let R,z=-1/0;if(nf(m,x))return x;do{if(nf(m,x.next))return x.next;if(L<=x.y&&L>=x.next.y&&x.next.y!==x.y){const pe=x.x+(L-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(pe<=E&&pe>z&&(z=pe,R=x.x<x.next.x?x:x.next,pe===E))return R}x=x.next}while(x!==_);if(!R)return null;const G=R,J=R.x,ne=R.y;let oe=1/0;x=R;do{if(E>=x.x&&x.x>=J&&E!==x.x&&BC(L<ne?E:z,L,J,ne,L<ne?z:E,L,x.x,x.y)){const pe=Math.abs(L-x.y)/(E-x.x);Zp(x,m)&&(pe<oe||pe===oe&&(x.x>R.x||x.x===R.x&&R6(R,x)))&&(R=x,oe=pe)}x=x.next}while(x!==G);return R}(c,s);if(!A)return s;const d=SC(A,c);return td(d,d.next),td(A,A.next)}function R6(c,s){return os(c.prev,c,s.prev)<0&&os(s.next,c,c.next)<0}function t_(c,s,A,d,m){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-A)*m|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-d)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function N6(c){let s=c,A=c;do(s.x<A.x||s.x===A.x&&s.y<A.y)&&(A=s),s=s.next;while(s!==c);return A}function BC(c,s,A,d,m,_,x,E){return(m-x)*(s-E)>=(c-x)*(_-E)&&(c-x)*(d-E)>=(A-x)*(s-E)&&(A-x)*(_-E)>=(m-x)*(d-E)}function Wp(c,s,A,d,m,_,x,E){return!(c===x&&s===E)&&BC(c,s,A,d,m,_,x,E)}function D6(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(A,d){let m=A;do{if(m.i!==A.i&&m.next.i!==A.i&&m.i!==d.i&&m.next.i!==d.i&&CC(m,m.next,A,d))return!0;m=m.next}while(m!==A);return!1}(c,s)&&(Zp(c,s)&&Zp(s,c)&&function(A,d){let m=A,_=!1;const x=(A.x+d.x)/2,E=(A.y+d.y)/2;do m.y>E!=m.next.y>E&&m.next.y!==m.y&&x<(m.next.x-m.x)*(E-m.y)/(m.next.y-m.y)+m.x&&(_=!_),m=m.next;while(m!==A);return _}(c,s)&&(os(c.prev,c,s.prev)||os(c,s.prev,s))||nf(c,s)&&os(c.prev,c,c.next)>0&&os(s.prev,s,s.next)>0)}function os(c,s,A){return(s.y-c.y)*(A.x-s.x)-(s.x-c.x)*(A.y-s.y)}function nf(c,s){return c.x===s.x&&c.y===s.y}function CC(c,s,A,d){const m=Xg(os(c,s,A)),_=Xg(os(c,s,d)),x=Xg(os(A,d,c)),E=Xg(os(A,d,s));return m!==_&&x!==E||!(m!==0||!Zg(c,A,s))||!(_!==0||!Zg(c,d,s))||!(x!==0||!Zg(A,c,d))||!(E!==0||!Zg(A,s,d))}function Zg(c,s,A){return s.x<=Math.max(c.x,A.x)&&s.x>=Math.min(c.x,A.x)&&s.y<=Math.max(c.y,A.y)&&s.y>=Math.min(c.y,A.y)}function Xg(c){return c>0?1:c<0?-1:0}function Zp(c,s){return os(c.prev,c,c.next)<0?os(c,s,c.next)>=0&&os(c,c.prev,s)>=0:os(c,s,c.prev)<0||os(c,c.next,s)<0}function SC(c,s){const A=r_(c.i,c.x,c.y),d=r_(s.i,s.x,s.y),m=c.next,_=s.prev;return c.next=s,s.prev=c,A.next=m,m.prev=A,d.next=A,A.prev=d,_.next=d,d.prev=_,d}function EC(c,s,A,d){const m=r_(c,s,A);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function Xp(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function r_(c,s,A){return{i:c,x:s,y:A,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class sf{constructor(s,A){if(A>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=A}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class Yg{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}Yg.noSubdivision=new Yg({fill:new sf(0,0),line:new sf(0,0),tile:new sf(0,0),stencil:new sf(0,0),circle:1}),Qe("SubdivisionGranularityExpression",sf),Qe("SubdivisionGranularitySetting",Yg);const of=-32768,Yp=32767;class Q6{constructor(s,A){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=ie/s,this._canonical=A}_getKey(s,A){return(s+=32768)<<16|A+32768}_vertexToIndex(s,A){if(s<-32768||A<-32768||s>32767||A>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(s),m=0|Math.round(A),_=this._getKey(d,m);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,x),this._vertexBuffer.push(d,m),x}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(m,_){const x=[];for(let E=0;E<_.length;E+=3){const L=_[E],R=_[E+1],z=_[E+2],G=m[2*L],J=m[2*L+1];(m[2*R]-G)*(m[2*z+1]-J)-(m[2*R+1]-J)*(m[2*z]-G)>0?(x.push(L),x.push(z),x.push(R)):(x.push(L),x.push(R),x.push(z))}return x}(this._vertexBuffer,s);const A=[],d=s.length;for(let m=0;m<d;m+=3){const _=[s[m+0],s[m+1],s[m+2]],x=[this._vertexBuffer[2*s[m+0]+0],this._vertexBuffer[2*s[m+0]+1],this._vertexBuffer[2*s[m+1]+0],this._vertexBuffer[2*s[m+1]+1],this._vertexBuffer[2*s[m+2]+0],this._vertexBuffer[2*s[m+2]+1]];let E=1/0,L=1/0,R=-1/0,z=-1/0;for(let pe=0;pe<3;pe++){const Be=x[2*pe],Re=x[2*pe+1];E=Math.min(E,Be),R=Math.max(R,Be),L=Math.min(L,Re),z=Math.max(z,Re)}if(E===R||L===z)continue;const G=Math.floor(E/this._granularityCellSize),J=Math.ceil(R/this._granularityCellSize),ne=Math.floor(L/this._granularityCellSize),oe=Math.ceil(z/this._granularityCellSize);if(G!==J||ne!==oe)for(let pe=ne;pe<oe;pe++){const Be=this._scanlineGenerateVertexRingForCellRow(pe,x,_);O6(this._vertexBuffer,Be,A)}else A.push(..._)}return A}_scanlineGenerateVertexRingForCellRow(s,A,d){const m=s*this._granularityCellSize,_=m+this._granularityCellSize,x=[];for(let E=0;E<3;E++){const L=A[2*E],R=A[2*E+1],z=A[2*(E+1)%6],G=A[(2*(E+1)+1)%6],J=A[2*(E+2)%6],ne=A[(2*(E+2)+1)%6],oe=z-L,pe=G-R,Be=oe===0,Re=pe===0,lt=(m-R)/pe,qe=(_-R)/pe,te=Math.min(lt,qe),xe=Math.max(lt,qe);if(!Re&&(te>=1||xe<=0)||Re&&(R<m||R>_)){G>=m&&G<=_&&x.push(d[(E+1)%3]);continue}!Re&&te>0&&x.push(this._vertexToIndex(L+oe*te,R+pe*te));const We=L+oe*Math.max(te,0),bt=L+oe*Math.min(xe,1);Be||this._generateIntraEdgeVertices(x,L,R,z,G,We,bt),!Re&&xe<1&&x.push(this._vertexToIndex(L+oe*xe,R+pe*xe)),(Re||G>=m&&G<=_)&&x.push(d[(E+1)%3]),!Re&&(G<=m||G>=_)&&this._generateInterEdgeVertices(x,L,R,z,G,J,ne,bt,m,_)}return x}_generateIntraEdgeVertices(s,A,d,m,_,x,E){const L=m-A,R=_-d,z=R===0,G=z?Math.min(A,m):Math.min(x,E),J=z?Math.max(A,m):Math.max(x,E),ne=Math.floor(G/this._granularityCellSize)+1,oe=Math.ceil(J/this._granularityCellSize)-1;if(z?A<m:x<E)for(let pe=ne;pe<=oe;pe++){const Be=pe*this._granularityCellSize;s.push(this._vertexToIndex(Be,d+R*(Be-A)/L))}else for(let pe=oe;pe>=ne;pe--){const Be=pe*this._granularityCellSize;s.push(this._vertexToIndex(Be,d+R*(Be-A)/L))}}_generateInterEdgeVertices(s,A,d,m,_,x,E,L,R,z){const G=_-d,J=x-m,ne=E-_,oe=(R-_)/ne,pe=(z-_)/ne,Be=Math.min(oe,pe),Re=Math.max(oe,pe),lt=m+J*Be;let qe=Math.floor(Math.min(lt,L)/this._granularityCellSize)+1,te=Math.ceil(Math.max(lt,L)/this._granularityCellSize)-1,xe=L<lt;const We=ne===0;if(We&&(E===R||E===z))return;if(We||Be>=1||Re<=0){const Ht=d-E,Tt=x+(A-x)*Math.min((R-E)/Ht,(z-E)/Ht);qe=Math.floor(Math.min(Tt,L)/this._granularityCellSize)+1,te=Math.ceil(Math.max(Tt,L)/this._granularityCellSize)-1,xe=L<Tt}const bt=G>0?z:R;if(xe)for(let Ht=qe;Ht<=te;Ht++)s.push(this._vertexToIndex(Ht*this._granularityCellSize,bt));else for(let Ht=te;Ht>=qe;Ht--)s.push(this._vertexToIndex(Ht*this._granularityCellSize,bt))}_generateOutline(s){const A=[];for(const d of s){const m=rd(d,this._granularity,!0),_=this._pointArrayToIndices(m),x=[];for(let E=1;E<_.length;E++)x.push(_[E-1]),x.push(_[E]);A.push(x)}return A}_handlePoles(s){let A=!1,d=!1;this._canonical&&(this._canonical.y===0&&(A=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(A||d)&&this._fillPoles(s,A,d)}_ensureNoPoleVertices(){const s=this._vertexBuffer;for(let A=0;A<s.length;A+=2){const d=s[A+1];d===of&&(s[A+1]=-32767),d===Yp&&(s[A+1]=32766)}}_generatePoleQuad(s,A,d,m,_,x){m>_!=(x===of)?(s.push(A),s.push(d),s.push(this._vertexToIndex(m,x)),s.push(d),s.push(this._vertexToIndex(_,x)),s.push(this._vertexToIndex(m,x))):(s.push(d),s.push(A),s.push(this._vertexToIndex(m,x)),s.push(this._vertexToIndex(_,x)),s.push(d),s.push(this._vertexToIndex(m,x)))}_fillPoles(s,A,d){const m=this._vertexBuffer,_=ie,x=s.length;for(let E=2;E<x;E+=3){const L=s[E-2],R=s[E-1],z=s[E],G=m[2*L],J=m[2*L+1],ne=m[2*R],oe=m[2*R+1],pe=m[2*z],Be=m[2*z+1];A&&(J===0&&oe===0&&this._generatePoleQuad(s,L,R,G,ne,of),oe===0&&Be===0&&this._generatePoleQuad(s,R,z,ne,pe,of),Be===0&&J===0&&this._generatePoleQuad(s,z,L,pe,G,of)),d&&(J===_&&oe===_&&this._generatePoleQuad(s,L,R,G,ne,Yp),oe===_&&Be===_&&this._generatePoleQuad(s,R,z,ne,pe,Yp),Be===_&&J===_&&this._generatePoleQuad(s,z,L,pe,G,Yp))}}_initializeVertices(s){for(let A=0;A<s.length;A+=2)this._vertexToIndex(s[A],s[A+1])}subdividePolygonInternal(s,A){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:m}=function(E){const L=[],R=[];for(const z of E)if(z.length!==0){z!==E[0]&&L.push(R.length/2);for(let G=0;G<z.length;G++)R.push(z[G].x),R.push(z[G].y)}return{flattened:R,holeIndices:L}}(s);let _;this._initializeVertices(d);try{const E=function(R,z,G=2){const J=z&&z.length,ne=J?z[0]*G:R.length;let oe=bC(R,0,ne,G,!0);const pe=[];if(!oe||oe.next===oe.prev)return pe;let Be,Re,lt;if(J&&(oe=function(qe,te,xe,We){const bt=[];for(let Ht=0,Tt=te.length;Ht<Tt;Ht++){const Mt=bC(qe,te[Ht]*We,Ht<Tt-1?te[Ht+1]*We:qe.length,We,!1);Mt===Mt.next&&(Mt.steiner=!0),bt.push(N6(Mt))}bt.sort(k6);for(let Ht=0;Ht<bt.length;Ht++)xe=U6(bt[Ht],xe);return xe}(R,z,oe,G)),R.length>80*G){Be=1/0,Re=1/0;let qe=-1/0,te=-1/0;for(let xe=G;xe<ne;xe+=G){const We=R[xe],bt=R[xe+1];We<Be&&(Be=We),bt<Re&&(Re=bt),We>qe&&(qe=We),bt>te&&(te=bt)}lt=Math.max(qe-Be,te-Re),lt=lt!==0?32767/lt:0}return qp(oe,pe,G,Be,Re,lt,0),pe}(d,m),L=this._convertIndices(d,E);_=this._subdivideTrianglesScanline(L)}catch(E){console.error(E)}let x=[];return A&&(x=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:x}}_convertIndices(s,A){const d=[];for(let m=0;m<A.length;m++)d.push(this._vertexToIndex(s[2*A[m]],s[2*A[m]+1]));return d}_pointArrayToIndices(s){const A=[];for(let d=0;d<s.length;d++){const m=s[d];A.push(this._vertexToIndex(m.x,m.y))}return A}}function IC(c,s,A,d=!0){return new Q6(A,s).subdividePolygonInternal(c,d)}function rd(c,s,A=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const d=c[0],m=c[c.length-1],_=A&&(d.x!==m.x||d.y!==m.y);if(s<2)return _?[...c,c[0]]:[...c];const x=Math.floor(ie/s),E=[];E.push(new N(c[0].x,c[0].y));const L=c.length,R=_?L:L-1;for(let z=0;z<R;z++){const G=c[z],J=z<L-1?c[z+1]:c[0],ne=G.x,oe=G.y,pe=J.x,Be=J.y,Re=ne!==pe,lt=oe!==Be;if(!Re&&!lt)continue;const qe=pe-ne,te=Be-oe,xe=Math.abs(qe),We=Math.abs(te);let bt=ne,Ht=oe;for(;;){const Mt=qe>0?(Math.floor(bt/x)+1)*x:(Math.ceil(bt/x)-1)*x,Yt=te>0?(Math.floor(Ht/x)+1)*x:(Math.ceil(Ht/x)-1)*x,jt=Math.abs(bt-Mt),er=Math.abs(Ht-Yt),Ut=Math.abs(bt-pe),dr=Math.abs(Ht-Be),Rr=Re?jt/xe:Number.POSITIVE_INFINITY,kr=lt?er/We:Number.POSITIVE_INFINITY;if((Ut<=jt||!Re)&&(dr<=er||!lt))break;if(Rr<kr&&Re||!lt){bt=Mt,Ht+=te*Rr;const _r=new N(bt,Math.round(Ht));E[E.length-1].x===_r.x&&E[E.length-1].y===_r.y||E.push(_r)}else{bt+=qe*kr,Ht=Yt;const _r=new N(Math.round(bt),Ht);E[E.length-1].x===_r.x&&E[E.length-1].y===_r.y||E.push(_r)}}const Tt=new N(pe,Be);E[E.length-1].x===Tt.x&&E[E.length-1].y===Tt.y||E.push(Tt)}return E}function O6(c,s,A){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,m=c[2*s[0]];for(let L=1;L<s.length;L++){const R=c[2*s[L]];R<m&&(m=R,d=L)}const _=s.length;let x=d,E=(x+1)%_;for(;;){const L=x-1>=0?x-1:_-1,R=(E+1)%_,z=c[2*s[L]],G=c[2*s[R]],J=c[2*s[x]],ne=c[2*s[x]+1],oe=c[2*s[E]+1];let pe=!1;if(z<G)pe=!0;else if(z>G)pe=!1;else{const Be=oe-ne,Re=-(c[2*s[E]]-J),lt=ne<oe?1:-1;((z-J)*Be+(c[2*s[L]+1]-ne)*Re)*lt>((G-J)*Be+(c[2*s[R]+1]-ne)*Re)*lt&&(pe=!0)}if(pe){const Be=s[L],Re=s[x],lt=s[E];Be!==Re&&Be!==lt&&Re!==lt&&A.push(lt,Re,Be),x--,x<0&&(x=_-1)}else{const Be=s[R],Re=s[x],lt=s[E];Be!==Re&&Be!==lt&&Re!==lt&&A.push(lt,Re,Be),E++,E>=_&&(E=0)}if(L===R)break}}function FC(c,s,A,d,m,_,x,E,L){const R=m.length/2,z=x&&E&&L;if(R<vn.MAX_VERTEX_ARRAY_LENGTH){const G=s.prepareSegment(R,A,d),J=G.vertexLength;for(let pe=0;pe<_.length;pe+=3)d.emplaceBack(J+_[pe],J+_[pe+1],J+_[pe+2]);let ne,oe;G.vertexLength+=R,G.primitiveLength+=_.length/3,z&&(oe=x.prepareSegment(R,A,E),ne=oe.vertexLength,oe.vertexLength+=R);for(let pe=0;pe<m.length;pe+=2)c(m[pe],m[pe+1]);if(z)for(let pe=0;pe<L.length;pe++){const Be=L[pe];for(let Re=1;Re<Be.length;Re+=2)E.emplaceBack(ne+Be[Re-1],ne+Be[Re]);oe.primitiveLength+=Be.length/2}}else(function(G,J,ne,oe,pe,Be){const Re=[];for(let We=0;We<oe.length/2;We++)Re.push(-1);const lt={count:0};let qe=0,te=G.getOrCreateLatestSegment(J,ne),xe=te.vertexLength;for(let We=2;We<pe.length;We+=3){const bt=pe[We-2],Ht=pe[We-1],Tt=pe[We];let Mt=Re[bt]<qe,Yt=Re[Ht]<qe,jt=Re[Tt]<qe;te.vertexLength+((Mt?1:0)+(Yt?1:0)+(jt?1:0))>vn.MAX_VERTEX_ARRAY_LENGTH&&(te=G.createNewSegment(J,ne),qe=lt.count,Mt=!0,Yt=!0,jt=!0,xe=0);const er=Jp(Re,oe,Be,lt,bt,Mt,te),Ut=Jp(Re,oe,Be,lt,Ht,Yt,te),dr=Jp(Re,oe,Be,lt,Tt,jt,te);ne.emplaceBack(xe+er-qe,xe+Ut-qe,xe+dr-qe),te.primitiveLength++}})(s,A,d,m,_,c),z&&function(G,J,ne,oe,pe,Be){const Re=[];for(let We=0;We<oe.length/2;We++)Re.push(-1);const lt={count:0};let qe=0,te=G.getOrCreateLatestSegment(J,ne),xe=te.vertexLength;for(let We=0;We<pe.length;We++){const bt=pe[We];for(let Ht=1;Ht<pe[We].length;Ht+=2){const Tt=bt[Ht-1],Mt=bt[Ht];let Yt=Re[Tt]<qe,jt=Re[Mt]<qe;te.vertexLength+((Yt?1:0)+(jt?1:0))>vn.MAX_VERTEX_ARRAY_LENGTH&&(te=G.createNewSegment(J,ne),qe=lt.count,Yt=!0,jt=!0,xe=0);const er=Jp(Re,oe,Be,lt,Tt,Yt,te),Ut=Jp(Re,oe,Be,lt,Mt,jt,te);ne.emplaceBack(xe+er-qe,xe+Ut-qe),te.primitiveLength++}}}(x,A,E,m,L,c),s.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function Jp(c,s,A,d,m,_,x){if(_){const E=d.count;return A(s[2*m],s[2*m+1]),c[m]=d.count,d.count++,x.vertexLength++,E}return c[m]}class n_{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xt,this.indexArray=new En,this.indexArray2=new Sn,this.programConfigurations=new ac(s.layers,s.zoom),this.segments=new vn,this.segments2=new vn,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(s,A,d){this.hasPattern=J1("fill",this.layers,A);const m=this.layers[0].layout.get("fill-sort-key"),_=!m.isConstant(),x=[];for(const{feature:E,id:L,index:R,sourceLayerIndex:z}of s){const G=this.layers[0]._featureFilter.needGeometry,J=ed(E,G);if(!this.layers[0]._featureFilter.filter(new vr(this.zoom,{globalState:this.globalState}),J,d))continue;const ne=_?m.evaluate(J,{},d,A.availableImages):void 0,oe={id:L,properties:E.properties,type:E.type,sourceLayerIndex:z,index:R,geometry:G?J.geometry:Jh(E),patterns:{},sortKey:ne};x.push(oe)}_&&x.sort((E,L)=>E.sortKey-L.sortKey);for(const E of x){const{geometry:L,index:R,sourceLayerIndex:z}=E;if(this.hasPattern){const G=e_("fill",this.layers,E,this.zoom,A);this.patternFeatures.push(G)}else this.addFeature(E,L,R,d,{},A.subdivisionGranularity);A.featureIndex.insert(s[R].feature,L,R,z,this.index)}}update(s,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,A,this.stateDependentLayers,d)}addFeatures(s,A,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,A,d,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,F6),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,A,d,m,_,x){for(const E of wo(A,500)){const L=IC(E,m,x.fill.getGranularityForZoomLevel(m.z)),R=this.layoutVertexArray;FC((z,G)=>{R.emplaceBack(z,G)},this.segments,this.layoutVertexArray,this.indexArray,L.verticesFlattened,L.indicesTriangles,this.segments2,this.indexArray2,L.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,_,m)}}let TC,PC;Qe("FillBucket",n_,{omit:["layers","patternFeatures"]});var z6={get paint(){return PC=PC||new ii({"fill-antialias":new Zt(ze.paint_fill["fill-antialias"]),"fill-opacity":new lr(ze.paint_fill["fill-opacity"]),"fill-color":new lr(ze.paint_fill["fill-color"]),"fill-outline-color":new lr(ze.paint_fill["fill-outline-color"]),"fill-translate":new Zt(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new ni(ze.paint_fill["fill-pattern"])})},get layout(){return TC=TC||new ii({"fill-sort-key":new lr(ze.layout_fill["fill-sort-key"])})}};class H6 extends On{constructor(s){super(s,z6)}recalculate(s,A){super.recalculate(s,A);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new n_(s)}queryRadius(){return qg(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:A,transform:d,pixelsToTileUnits:m}){return AC(Wg(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,m),A)}isTileClipped(){return!0}}const j6=wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),V6=wn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:K6}=j6;var i_,LC,s_,MC,o_,kC,UC,Jg={};function RC(){if(LC)return i_;LC=1;var c=I();function s(m,_,x,E,L){this.properties={},this.extent=x,this.type=0,this._pbf=m,this._geometry=-1,this._keys=E,this._values=L,m.readFields(A,this,_)}function A(m,_,x){m==1?_.id=x.readVarint():m==2?function(E,L){for(var R=E.readVarint()+E.pos;E.pos<R;){var z=L._keys[E.readVarint()],G=L._values[E.readVarint()];L.properties[z]=G}}(x,_):m==3?_.type=x.readVarint():m==4&&(_._geometry=x.pos)}function d(m){for(var _,x,E=0,L=0,R=m.length,z=R-1;L<R;z=L++)E+=((x=m[z]).x-(_=m[L]).x)*(_.y+x.y);return E}return i_=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var _,x=m.readVarint()+m.pos,E=1,L=0,R=0,z=0,G=[];m.pos<x;){if(L<=0){var J=m.readVarint();E=7&J,L=J>>3}if(L--,E===1||E===2)R+=m.readSVarint(),z+=m.readSVarint(),E===1&&(_&&G.push(_),_=[]),_.push(new c(R,z));else{if(E!==7)throw new Error("unknown command "+E);_&&_.push(_[0].clone())}}return _&&G.push(_),G},s.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var _=m.readVarint()+m.pos,x=1,E=0,L=0,R=0,z=1/0,G=-1/0,J=1/0,ne=-1/0;m.pos<_;){if(E<=0){var oe=m.readVarint();x=7&oe,E=oe>>3}if(E--,x===1||x===2)(L+=m.readSVarint())<z&&(z=L),L>G&&(G=L),(R+=m.readSVarint())<J&&(J=R),R>ne&&(ne=R);else if(x!==7)throw new Error("unknown command "+x)}return[z,J,G,ne]},s.prototype.toGeoJSON=function(m,_,x){var E,L,R=this.extent*Math.pow(2,x),z=this.extent*m,G=this.extent*_,J=this.loadGeometry(),ne=s.types[this.type];function oe(Re){for(var lt=0;lt<Re.length;lt++){var qe=Re[lt];Re[lt]=[360*(qe.x+z)/R-180,360/Math.PI*Math.atan(Math.exp((180-360*(qe.y+G)/R)*Math.PI/180))-90]}}switch(this.type){case 1:var pe=[];for(E=0;E<J.length;E++)pe[E]=J[E][0];oe(J=pe);break;case 2:for(E=0;E<J.length;E++)oe(J[E]);break;case 3:for(J=function(Re){var lt=Re.length;if(lt<=1)return[Re];for(var qe,te,xe=[],We=0;We<lt;We++){var bt=d(Re[We]);bt!==0&&(te===void 0&&(te=bt<0),te===bt<0?(qe&&xe.push(qe),qe=[Re[We]]):qe.push(Re[We]))}return qe&&xe.push(qe),xe}(J),E=0;E<J.length;E++)for(L=0;L<J[E].length;L++)oe(J[E][L])}J.length===1?J=J[0]:ne="Multi"+ne;var Be={type:"Feature",geometry:{type:ne,coordinates:J},properties:this.properties};return"id"in this&&(Be.id=this.id),Be},i_}function NC(){if(MC)return s_;MC=1;var c=RC();function s(d,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(A,this,m),this.length=this._features.length}function A(d,m,_){d===15?m.version=_.readVarint():d===1?m.name=_.readString():d===5?m.extent=_.readVarint():d===2?m._features.push(_.pos):d===3?m._keys.push(_.readString()):d===4&&m._values.push(function(x){for(var E=null,L=x.readVarint()+x.pos;x.pos<L;){var R=x.readVarint()>>3;E=R===1?x.readString():R===2?x.readFloat():R===3?x.readDouble():R===4?x.readVarint64():R===5?x.readVarint():R===6?x.readSVarint():R===7?x.readBoolean():null}return E}(_))}return s_=s,s.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var m=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,m,this.extent,this._keys,this._values)},s_}function DC(){return UC||(UC=1,Jg.VectorTile=function(){if(kC)return o_;kC=1;var c=NC();function s(A,d,m){if(A===3){var _=new c(m,m.readVarint()+m.pos);_.length&&(d[_.name]=_)}}return o_=function(A,d){this.layers=A.readFields(s,{},d)},o_}(),Jg.VectorTileFeature=RC(),Jg.VectorTileLayer=NC()),Jg}var em=g(DC());const G6=em.VectorTileFeature.types,a_=Math.pow(2,13);function tm(c,s,A,d,m,_,x,E){c.emplaceBack(s,A,2*Math.floor(d*a_)+x,m*a_*2,_*a_*2,Math.round(E))}class l_{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new ir,this.centroidVertexArray=new vt,this.indexArray=new En,this.programConfigurations=new ac(s.layers,s.zoom),this.segments=new vn,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(s,A,d){this.features=[],this.hasPattern=J1("fill-extrusion",this.layers,A);for(const{feature:m,id:_,index:x,sourceLayerIndex:E}of s){const L=this.layers[0]._featureFilter.needGeometry,R=ed(m,L);if(!this.layers[0]._featureFilter.filter(new vr(this.zoom,{globalState:this.globalState}),R,d))continue;const z={id:_,sourceLayerIndex:E,index:x,geometry:L?R.geometry:Jh(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(e_("fill-extrusion",this.layers,z,this.zoom,A)):this.addFeature(z,z.geometry,x,d,{},A.subdivisionGranularity),A.featureIndex.insert(m,z.geometry,x,E,this.index,!0)}}addFeatures(s,A,d){for(const m of this.features){const{geometry:_}=m;this.addFeature(m,_,m.index,A,d,s.subdivisionGranularity)}}update(s,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,A,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,K6),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,V6.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,A,d,m,_,x){for(const E of wo(A,500)){const L={x:0,y:0,sampleCount:0},R=this.layoutVertexArray.length;this.processPolygon(L,m,s,E,x);const z=this.layoutVertexArray.length-R,G=Math.floor(L.x/L.sampleCount),J=Math.floor(L.y/L.sampleCount);for(let ne=0;ne<z;ne++)this.centroidVertexArray.emplaceBack(G,J)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,_,m)}processPolygon(s,A,d,m,_){if(m.length<1||QC(m[0]))return;for(const G of m)G.length!==0&&$6(s,G);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=_.fill.getGranularityForZoomLevel(A.z),L=G6[d.type]==="Polygon";for(const G of m){if(G.length===0||QC(G))continue;const J=rd(G,E,L);this._generateSideFaces(J,x)}if(!L)return;const R=IC(m,A,E,!1),z=this.layoutVertexArray;FC((G,J)=>{tm(z,G,J,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,R.verticesFlattened,R.indicesTriangles)}_generateSideFaces(s,A){let d=0;for(let m=1;m<s.length;m++){const _=s[m],x=s[m-1];if(q6(_,x))continue;A.segment.vertexLength+4>vn.MAX_VERTEX_ARRAY_LENGTH&&(A.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=_.sub(x)._perp()._unit(),L=x.dist(_);d+L>32768&&(d=0),tm(this.layoutVertexArray,_.x,_.y,E.x,E.y,0,0,d),tm(this.layoutVertexArray,_.x,_.y,E.x,E.y,0,1,d),d+=L,tm(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,d),tm(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,d);const R=A.segment.vertexLength;this.indexArray.emplaceBack(R,R+2,R+1),this.indexArray.emplaceBack(R+1,R+2,R+3),A.segment.vertexLength+=4,A.segment.primitiveLength+=2}}}function $6(c,s){for(let A=0;A<s.length;A++){const d=s[A];A===s.length-1&&s[0].x===d.x&&s[0].y===d.y||(c.x+=d.x,c.y+=d.y,c.sampleCount++)}}function q6(c,s){return c.x===s.x&&(c.x<0||c.x>ie)||c.y===s.y&&(c.y<0||c.y>ie)}function QC(c){return c.every(s=>s.x<0)||c.every(s=>s.x>ie)||c.every(s=>s.y<0)||c.every(s=>s.y>ie)}let OC;Qe("FillExtrusionBucket",l_,{omit:["layers","features"]});var W6={get paint(){return OC=OC||new ii({"fill-extrusion-opacity":new Zt(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new lr(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ni(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new lr(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new lr(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Z6 extends On{constructor(s){super(s,W6)}createBucket(s){return new l_(s)}queryRadius(){return qg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:A,featureState:d,geometry:m,transform:_,pixelsToTileUnits:x,pixelPosMatrix:E}){const L=Wg(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,x),R=this.paint.get("fill-extrusion-height").evaluate(A,d),z=this.paint.get("fill-extrusion-base").evaluate(A,d),G=function(ne,oe){const pe=[];for(const Be of ne){const Re=[Be.x,Be.y,0,1];ct(Re,Re,oe),pe.push(new N(Re[0]/Re[3],Re[1]/Re[3]))}return pe}(L,E),J=function(ne,oe,pe,Be){const Re=[],lt=[],qe=Be[8]*oe,te=Be[9]*oe,xe=Be[10]*oe,We=Be[11]*oe,bt=Be[8]*pe,Ht=Be[9]*pe,Tt=Be[10]*pe,Mt=Be[11]*pe;for(const Yt of ne){const jt=[],er=[];for(const Ut of Yt){const dr=Ut.x,Rr=Ut.y,kr=Be[0]*dr+Be[4]*Rr+Be[12],_r=Be[1]*dr+Be[5]*Rr+Be[13],bn=Be[2]*dr+Be[6]*Rr+Be[14],Ui=Be[3]*dr+Be[7]*Rr+Be[15],Bs=bn+xe,mo=Ui+We,sl=kr+bt,da=_r+Ht,to=bn+Tt,Si=Ui+Mt,Qs=new N((kr+qe)/mo,(_r+te)/mo);Qs.z=Bs/mo,jt.push(Qs);const ro=new N(sl/Si,da/Si);ro.z=to/Si,er.push(ro)}Re.push(jt),lt.push(er)}return[Re,lt]}(m,z,R,E);return function(ne,oe,pe){let Be=1/0;AC(pe,oe)&&(Be=zC(pe,oe[0]));for(let Re=0;Re<oe.length;Re++){const lt=oe[Re],qe=ne[Re];for(let te=0;te<lt.length-1;te++){const xe=lt[te],We=[xe,lt[te+1],qe[te+1],qe[te],xe];lC(pe,We)&&(Be=Math.min(Be,zC(pe,We)))}}return Be!==1/0&&Be}(J[0],J[1],G)}}function rm(c,s){return c.x*s.x+c.y*s.y}function zC(c,s){if(c.length===1){let A=0;const d=s[A++];let m;for(;!m||d.equals(m);)if(m=s[A++],!m)return 1/0;for(;A<s.length;A++){const _=s[A],x=c[0],E=m.sub(d),L=_.sub(d),R=x.sub(d),z=rm(E,E),G=rm(E,L),J=rm(L,L),ne=rm(R,E),oe=rm(R,L),pe=z*J-G*G,Be=(J*ne-G*oe)/pe,Re=(z*oe-G*ne)/pe,lt=d.z*(1-Be-Re)+m.z*Be+_.z*Re;if(isFinite(lt))return lt}return 1/0}{let A=1/0;for(const d of s)A=Math.min(A,d.z);return A}}const X6=wn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Y6}=X6,J6=wn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:eR}=J6,tR=em.VectorTileFeature.types,rR=Math.cos(Math.PI/180*37.5),HC=Math.pow(2,14)/.5;class A_{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new nr,this.layoutVertexArray2=new zt,this.indexArray=new En,this.programConfigurations=new ac(s.layers,s.zoom),this.segments=new vn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(s,A,d){this.hasPattern=J1("line",this.layers,A);const m=this.layers[0].layout.get("line-sort-key"),_=!m.isConstant(),x=[];for(const{feature:E,id:L,index:R,sourceLayerIndex:z}of s){const G=this.layers[0]._featureFilter.needGeometry,J=ed(E,G);if(!this.layers[0]._featureFilter.filter(new vr(this.zoom,{globalState:this.globalState}),J,d))continue;const ne=_?m.evaluate(J,{},d):void 0,oe={id:L,properties:E.properties,type:E.type,sourceLayerIndex:z,index:R,geometry:G?J.geometry:Jh(E),patterns:{},sortKey:ne};x.push(oe)}_&&x.sort((E,L)=>E.sortKey-L.sortKey);for(const E of x){const{geometry:L,index:R,sourceLayerIndex:z}=E;if(this.hasPattern){const G=e_("line",this.layers,E,this.zoom,A);this.patternFeatures.push(G)}else this.addFeature(E,L,R,d,{},A.subdivisionGranularity);A.featureIndex.insert(s[R].feature,L,R,z,this.index)}}update(s,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,A,this.stateDependentLayers,d)}addFeatures(s,A,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,A,d,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,eR)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Y6),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,A,d,m,_,x){const E=this.layers[0].layout,L=E.get("line-join").evaluate(s,{}),R=E.get("line-cap"),z=E.get("line-miter-limit"),G=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const J of A)this.addLine(J,s,L,R,z,G,m,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,_,m)}addLine(s,A,d,m,_,x,E,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=rd(s,E?L.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let qe=0;qe<s.length-1;qe++)this.totalDistance+=s[qe].dist(s[qe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=tR[A.type]==="Polygon";let z=s.length;for(;z>=2&&s[z-1].equals(s[z-2]);)z--;let G=0;for(;G<z-1&&s[G].equals(s[G+1]);)G++;if(z<(R?3:2))return;d==="bevel"&&(_=1.05);const J=this.overscaling<=16?122880/(512*this.overscaling):0,ne=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray);let oe,pe,Be,Re,lt;this.e1=this.e2=-1,R&&(oe=s[z-2],lt=s[G].sub(oe)._unit()._perp());for(let qe=G;qe<z;qe++){if(Be=qe===z-1?R?s[G+1]:void 0:s[qe+1],Be&&s[qe].equals(Be))continue;lt&&(Re=lt),oe&&(pe=oe),oe=s[qe],lt=Be?Be.sub(oe)._unit()._perp():Re,Re=Re||lt;let te=Re.add(lt);te.x===0&&te.y===0||te._unit();const xe=Re.x*lt.x+Re.y*lt.y,We=te.x*lt.x+te.y*lt.y,bt=We!==0?1/We:1/0,Ht=2*Math.sqrt(2-2*We),Tt=We<rR&&pe&&Be,Mt=Re.x*lt.y-Re.y*lt.x>0;if(Tt&&qe>G){const er=oe.dist(pe);if(er>2*J){const Ut=oe.sub(oe.sub(pe)._mult(J/er)._round());this.updateDistance(pe,Ut),this.addCurrentVertex(Ut,Re,0,0,ne),pe=Ut}}const Yt=pe&&Be;let jt=Yt?d:R?"butt":m;if(Yt&&jt==="round"&&(bt<x?jt="miter":bt<=2&&(jt="fakeround")),jt==="miter"&&bt>_&&(jt="bevel"),jt==="bevel"&&(bt>2&&(jt="flipbevel"),bt<_&&(jt="miter")),pe&&this.updateDistance(pe,oe),jt==="miter")te._mult(bt),this.addCurrentVertex(oe,te,0,0,ne);else if(jt==="flipbevel"){if(bt>100)te=lt.mult(-1);else{const er=bt*Re.add(lt).mag()/Re.sub(lt).mag();te._perp()._mult(er*(Mt?-1:1))}this.addCurrentVertex(oe,te,0,0,ne),this.addCurrentVertex(oe,te.mult(-1),0,0,ne)}else if(jt==="bevel"||jt==="fakeround"){const er=-Math.sqrt(bt*bt-1),Ut=Mt?er:0,dr=Mt?0:er;if(pe&&this.addCurrentVertex(oe,Re,Ut,dr,ne),jt==="fakeround"){const Rr=Math.round(180*Ht/Math.PI/20);for(let kr=1;kr<Rr;kr++){let _r=kr/Rr;if(_r!==.5){const Ui=_r-.5;_r+=_r*Ui*(_r-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Ui*Ui+(.848013+xe*(.215638*xe-1.06021)))}const bn=lt.sub(Re)._mult(_r)._add(Re)._unit()._mult(Mt?-1:1);this.addHalfVertex(oe,bn.x,bn.y,!1,Mt,0,ne)}}Be&&this.addCurrentVertex(oe,lt,-Ut,-dr,ne)}else if(jt==="butt")this.addCurrentVertex(oe,te,0,0,ne);else if(jt==="square"){const er=pe?1:-1;this.addCurrentVertex(oe,te,er,er,ne)}else jt==="round"&&(pe&&(this.addCurrentVertex(oe,Re,0,0,ne),this.addCurrentVertex(oe,Re,1,1,ne,!0)),Be&&(this.addCurrentVertex(oe,lt,-1,-1,ne,!0),this.addCurrentVertex(oe,lt,0,0,ne)));if(Tt&&qe<z-1){const er=oe.dist(Be);if(er>2*J){const Ut=oe.add(Be.sub(oe)._mult(J/er)._round());this.updateDistance(oe,Ut),this.addCurrentVertex(Ut,lt,0,0,ne),oe=Ut}}}}addCurrentVertex(s,A,d,m,_,x=!1){const E=A.y*m-A.x,L=-A.y-A.x*m;this.addHalfVertex(s,A.x+A.y*d,A.y-A.x*d,x,!1,d,_),this.addHalfVertex(s,E,L,x,!0,-m,_),this.distance>HC/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,A,d,m,_,x))}addHalfVertex({x:s,y:A},d,m,_,x,E,L){const R=.5*(this.lineClips?this.scaledDistance*(HC-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(_?1:0),(A<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(E===0?0:E<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,z,this.e2),L.primitiveLength++),x?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,A){this.distance+=s.dist(A),this.updateScaledDistance()}}let jC,VC;Qe("LineBucket",A_,{omit:["layers","patternFeatures"]});var KC={get paint(){return VC=VC||new ii({"line-opacity":new lr(ze.paint_line["line-opacity"]),"line-color":new lr(ze.paint_line["line-color"]),"line-translate":new Zt(ze.paint_line["line-translate"]),"line-translate-anchor":new Zt(ze.paint_line["line-translate-anchor"]),"line-width":new lr(ze.paint_line["line-width"]),"line-gap-width":new lr(ze.paint_line["line-gap-width"]),"line-offset":new lr(ze.paint_line["line-offset"]),"line-blur":new lr(ze.paint_line["line-blur"]),"line-dasharray":new Nn(ze.paint_line["line-dasharray"]),"line-pattern":new ni(ze.paint_line["line-pattern"]),"line-gradient":new Mi(ze.paint_line["line-gradient"])})},get layout(){return jC=jC||new ii({"line-cap":new Zt(ze.layout_line["line-cap"]),"line-join":new lr(ze.layout_line["line-join"]),"line-miter-limit":new Zt(ze.layout_line["line-miter-limit"]),"line-round-limit":new Zt(ze.layout_line["line-round-limit"]),"line-sort-key":new lr(ze.layout_line["line-sort-key"])})}};class nR extends lr{possiblyEvaluate(s,A){return A=new vr(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(s,A)}evaluate(s,A,d,m){return A=kt({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(s,A,d,m)}}let e0;class iR extends On{constructor(s){super(s,KC),this.gradientVersion=0,e0||(e0=new nR(KC.paint.properties["line-width"].specification),e0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(A)&&A._styleExpression.expression instanceof Dt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,A){super.recalculate(s,A),this.paint._values["line-floorwidth"]=e0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new A_(s)}queryRadius(s){const A=s,d=GC(Gp("line-width",this,A),Gp("line-gap-width",this,A)),m=Gp("line-offset",this,A);return d/2+Math.abs(m)+qg(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:A,featureState:d,geometry:m,transform:_,pixelsToTileUnits:x}){const E=Wg(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,x),L=x/2*GC(this.paint.get("line-width").evaluate(A,d),this.paint.get("line-gap-width").evaluate(A,d)),R=this.paint.get("line-offset").evaluate(A,d);return R&&(m=function(z,G){const J=[];for(let ne=0;ne<z.length;ne++){const oe=z[ne],pe=[];for(let Be=0;Be<oe.length;Be++){const Re=oe[Be-1],lt=oe[Be],qe=oe[Be+1],te=Be===0?new N(0,0):lt.sub(Re)._unit()._perp(),xe=Be===oe.length-1?new N(0,0):qe.sub(lt)._unit()._perp(),We=te._add(xe)._unit(),bt=We.x*xe.x+We.y*xe.y;bt!==0&&We._mult(1/bt),pe.push(We._mult(G)._add(lt))}J.push(pe)}return J}(m,R*x)),function(z,G,J){for(let ne=0;ne<G.length;ne++){const oe=G[ne];if(z.length>=3){for(let pe=0;pe<oe.length;pe++)if(rf(z,oe[pe]))return!0}if(g6(z,oe,J))return!0}return!1}(E,m,L)}isTileClipped(){return!0}}function GC(c,s){return s>0?s+2*c:c}const sR=wn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),oR=wn([{name:"a_projected_pos",components:3,type:"Float32"}],4);wn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const aR=wn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);wn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const $C=wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lR=wn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function AR(c,s,A){return c.sections.forEach(d=>{d.text=function(m,_,x){const E=_.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?m=m.toLocaleUpperCase():E==="lowercase"&&(m=m.toLocaleLowerCase()),qn.applyArabicShaping&&(m=qn.applyArabicShaping(m)),m}(d.text,s,A)}),c}wn([{name:"triangle",components:3,type:"Uint16"}]),wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),wn([{type:"Float32",name:"offsetX"}]),wn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),wn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const nm={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var qC,c_,WC,Ds=24,u_={};function cR(){return qC||(qC=1,u_.read=function(c,s,A,d,m){var _,x,E=8*m-d-1,L=(1<<E)-1,R=L>>1,z=-7,G=A?m-1:0,J=A?-1:1,ne=c[s+G];for(G+=J,_=ne&(1<<-z)-1,ne>>=-z,z+=E;z>0;_=256*_+c[s+G],G+=J,z-=8);for(x=_&(1<<-z)-1,_>>=-z,z+=d;z>0;x=256*x+c[s+G],G+=J,z-=8);if(_===0)_=1-R;else{if(_===L)return x?NaN:1/0*(ne?-1:1);x+=Math.pow(2,d),_-=R}return(ne?-1:1)*x*Math.pow(2,_-d)},u_.write=function(c,s,A,d,m,_){var x,E,L,R=8*_-m-1,z=(1<<R)-1,G=z>>1,J=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ne=d?0:_-1,oe=d?1:-1,pe=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(E=isNaN(s)?1:0,x=z):(x=Math.floor(Math.log(s)/Math.LN2),s*(L=Math.pow(2,-x))<1&&(x--,L*=2),(s+=x+G>=1?J/L:J*Math.pow(2,1-G))*L>=2&&(x++,L/=2),x+G>=z?(E=0,x=z):x+G>=1?(E=(s*L-1)*Math.pow(2,m),x+=G):(E=s*Math.pow(2,G-1)*Math.pow(2,m),x=0));m>=8;c[A+ne]=255&E,ne+=oe,E/=256,m-=8);for(x=x<<m|E,R+=m;R>0;c[A+ne]=255&x,ne+=oe,x/=256,R-=8);c[A+ne-oe]|=128*pe}),u_}function ZC(){if(WC)return c_;WC=1,c_=s;var c=cR();function s(te){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(te)?te:new Uint8Array(te||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var A=4294967296,d=1/A,m=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function _(te){return te.type===s.Bytes?te.readVarint()+te.pos:te.pos+1}function x(te,xe,We){return We?4294967296*xe+(te>>>0):4294967296*(xe>>>0)+(te>>>0)}function E(te,xe,We){var bt=xe<=16383?1:xe<=2097151?2:xe<=268435455?3:Math.floor(Math.log(xe)/(7*Math.LN2));We.realloc(bt);for(var Ht=We.pos-1;Ht>=te;Ht--)We.buf[Ht+bt]=We.buf[Ht]}function L(te,xe){for(var We=0;We<te.length;We++)xe.writeVarint(te[We])}function R(te,xe){for(var We=0;We<te.length;We++)xe.writeSVarint(te[We])}function z(te,xe){for(var We=0;We<te.length;We++)xe.writeFloat(te[We])}function G(te,xe){for(var We=0;We<te.length;We++)xe.writeDouble(te[We])}function J(te,xe){for(var We=0;We<te.length;We++)xe.writeBoolean(te[We])}function ne(te,xe){for(var We=0;We<te.length;We++)xe.writeFixed32(te[We])}function oe(te,xe){for(var We=0;We<te.length;We++)xe.writeSFixed32(te[We])}function pe(te,xe){for(var We=0;We<te.length;We++)xe.writeFixed64(te[We])}function Be(te,xe){for(var We=0;We<te.length;We++)xe.writeSFixed64(te[We])}function Re(te,xe){return(te[xe]|te[xe+1]<<8|te[xe+2]<<16)+16777216*te[xe+3]}function lt(te,xe,We){te[We]=xe,te[We+1]=xe>>>8,te[We+2]=xe>>>16,te[We+3]=xe>>>24}function qe(te,xe){return(te[xe]|te[xe+1]<<8|te[xe+2]<<16)+(te[xe+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(te,xe,We){for(We=We||this.length;this.pos<We;){var bt=this.readVarint(),Ht=bt>>3,Tt=this.pos;this.type=7&bt,te(Ht,xe,this),this.pos===Tt&&this.skip(bt)}return xe},readMessage:function(te,xe){return this.readFields(te,xe,this.readVarint()+this.pos)},readFixed32:function(){var te=Re(this.buf,this.pos);return this.pos+=4,te},readSFixed32:function(){var te=qe(this.buf,this.pos);return this.pos+=4,te},readFixed64:function(){var te=Re(this.buf,this.pos)+Re(this.buf,this.pos+4)*A;return this.pos+=8,te},readSFixed64:function(){var te=Re(this.buf,this.pos)+qe(this.buf,this.pos+4)*A;return this.pos+=8,te},readFloat:function(){var te=c.read(this.buf,this.pos,!0,23,4);return this.pos+=4,te},readDouble:function(){var te=c.read(this.buf,this.pos,!0,52,8);return this.pos+=8,te},readVarint:function(te){var xe,We,bt=this.buf;return xe=127&(We=bt[this.pos++]),We<128?xe:(xe|=(127&(We=bt[this.pos++]))<<7,We<128?xe:(xe|=(127&(We=bt[this.pos++]))<<14,We<128?xe:(xe|=(127&(We=bt[this.pos++]))<<21,We<128?xe:function(Ht,Tt,Mt){var Yt,jt,er=Mt.buf;if(Yt=(112&(jt=er[Mt.pos++]))>>4,jt<128||(Yt|=(127&(jt=er[Mt.pos++]))<<3,jt<128)||(Yt|=(127&(jt=er[Mt.pos++]))<<10,jt<128)||(Yt|=(127&(jt=er[Mt.pos++]))<<17,jt<128)||(Yt|=(127&(jt=er[Mt.pos++]))<<24,jt<128)||(Yt|=(1&(jt=er[Mt.pos++]))<<31,jt<128))return x(Ht,Yt,Tt);throw new Error("Expected varint not more than 10 bytes")}(xe|=(15&(We=bt[this.pos]))<<28,te,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var te=this.readVarint();return te%2==1?(te+1)/-2:te/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var te=this.readVarint()+this.pos,xe=this.pos;return this.pos=te,te-xe>=12&&m?function(We,bt,Ht){return m.decode(We.subarray(bt,Ht))}(this.buf,xe,te):function(We,bt,Ht){for(var Tt="",Mt=bt;Mt<Ht;){var Yt,jt,er,Ut=We[Mt],dr=null,Rr=Ut>239?4:Ut>223?3:Ut>191?2:1;if(Mt+Rr>Ht)break;Rr===1?Ut<128&&(dr=Ut):Rr===2?(192&(Yt=We[Mt+1]))==128&&(dr=(31&Ut)<<6|63&Yt)<=127&&(dr=null):Rr===3?(jt=We[Mt+2],(192&(Yt=We[Mt+1]))==128&&(192&jt)==128&&((dr=(15&Ut)<<12|(63&Yt)<<6|63&jt)<=2047||dr>=55296&&dr<=57343)&&(dr=null)):Rr===4&&(jt=We[Mt+2],er=We[Mt+3],(192&(Yt=We[Mt+1]))==128&&(192&jt)==128&&(192&er)==128&&((dr=(15&Ut)<<18|(63&Yt)<<12|(63&jt)<<6|63&er)<=65535||dr>=1114112)&&(dr=null)),dr===null?(dr=65533,Rr=1):dr>65535&&(dr-=65536,Tt+=String.fromCharCode(dr>>>10&1023|55296),dr=56320|1023&dr),Tt+=String.fromCharCode(dr),Mt+=Rr}return Tt}(this.buf,xe,te)},readBytes:function(){var te=this.readVarint()+this.pos,xe=this.buf.subarray(this.pos,te);return this.pos=te,xe},readPackedVarint:function(te,xe){if(this.type!==s.Bytes)return te.push(this.readVarint(xe));var We=_(this);for(te=te||[];this.pos<We;)te.push(this.readVarint(xe));return te},readPackedSVarint:function(te){if(this.type!==s.Bytes)return te.push(this.readSVarint());var xe=_(this);for(te=te||[];this.pos<xe;)te.push(this.readSVarint());return te},readPackedBoolean:function(te){if(this.type!==s.Bytes)return te.push(this.readBoolean());var xe=_(this);for(te=te||[];this.pos<xe;)te.push(this.readBoolean());return te},readPackedFloat:function(te){if(this.type!==s.Bytes)return te.push(this.readFloat());var xe=_(this);for(te=te||[];this.pos<xe;)te.push(this.readFloat());return te},readPackedDouble:function(te){if(this.type!==s.Bytes)return te.push(this.readDouble());var xe=_(this);for(te=te||[];this.pos<xe;)te.push(this.readDouble());return te},readPackedFixed32:function(te){if(this.type!==s.Bytes)return te.push(this.readFixed32());var xe=_(this);for(te=te||[];this.pos<xe;)te.push(this.readFixed32());return te},readPackedSFixed32:function(te){if(this.type!==s.Bytes)return te.push(this.readSFixed32());var xe=_(this);for(te=te||[];this.pos<xe;)te.push(this.readSFixed32());return te},readPackedFixed64:function(te){if(this.type!==s.Bytes)return te.push(this.readFixed64());var xe=_(this);for(te=te||[];this.pos<xe;)te.push(this.readFixed64());return te},readPackedSFixed64:function(te){if(this.type!==s.Bytes)return te.push(this.readSFixed64());var xe=_(this);for(te=te||[];this.pos<xe;)te.push(this.readSFixed64());return te},skip:function(te){var xe=7&te;if(xe===s.Varint)for(;this.buf[this.pos++]>127;);else if(xe===s.Bytes)this.pos=this.readVarint()+this.pos;else if(xe===s.Fixed32)this.pos+=4;else{if(xe!==s.Fixed64)throw new Error("Unimplemented type: "+xe);this.pos+=8}},writeTag:function(te,xe){this.writeVarint(te<<3|xe)},realloc:function(te){for(var xe=this.length||16;xe<this.pos+te;)xe*=2;if(xe!==this.length){var We=new Uint8Array(xe);We.set(this.buf),this.buf=We,this.length=xe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(te){this.realloc(4),lt(this.buf,te,this.pos),this.pos+=4},writeSFixed32:function(te){this.realloc(4),lt(this.buf,te,this.pos),this.pos+=4},writeFixed64:function(te){this.realloc(8),lt(this.buf,-1&te,this.pos),lt(this.buf,Math.floor(te*d),this.pos+4),this.pos+=8},writeSFixed64:function(te){this.realloc(8),lt(this.buf,-1&te,this.pos),lt(this.buf,Math.floor(te*d),this.pos+4),this.pos+=8},writeVarint:function(te){(te=+te||0)>268435455||te<0?function(xe,We){var bt,Ht;if(xe>=0?(bt=xe%4294967296|0,Ht=xe/4294967296|0):(Ht=~(-xe/4294967296),4294967295^(bt=~(-xe%4294967296))?bt=bt+1|0:(bt=0,Ht=Ht+1|0)),xe>=18446744073709552e3||xe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");We.realloc(10),function(Tt,Mt,Yt){Yt.buf[Yt.pos++]=127&Tt|128,Tt>>>=7,Yt.buf[Yt.pos++]=127&Tt|128,Tt>>>=7,Yt.buf[Yt.pos++]=127&Tt|128,Tt>>>=7,Yt.buf[Yt.pos++]=127&Tt|128,Yt.buf[Yt.pos]=127&(Tt>>>=7)}(bt,0,We),function(Tt,Mt){var Yt=(7&Tt)<<4;Mt.buf[Mt.pos++]|=Yt|((Tt>>>=3)?128:0),Tt&&(Mt.buf[Mt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Mt.buf[Mt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Mt.buf[Mt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Mt.buf[Mt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Mt.buf[Mt.pos++]=127&Tt)))))}(Ht,We)}(te,this):(this.realloc(4),this.buf[this.pos++]=127&te|(te>127?128:0),te<=127||(this.buf[this.pos++]=127&(te>>>=7)|(te>127?128:0),te<=127||(this.buf[this.pos++]=127&(te>>>=7)|(te>127?128:0),te<=127||(this.buf[this.pos++]=te>>>7&127))))},writeSVarint:function(te){this.writeVarint(te<0?2*-te-1:2*te)},writeBoolean:function(te){this.writeVarint(!!te)},writeString:function(te){te=String(te),this.realloc(4*te.length),this.pos++;var xe=this.pos;this.pos=function(bt,Ht,Tt){for(var Mt,Yt,jt=0;jt<Ht.length;jt++){if((Mt=Ht.charCodeAt(jt))>55295&&Mt<57344){if(!Yt){Mt>56319||jt+1===Ht.length?(bt[Tt++]=239,bt[Tt++]=191,bt[Tt++]=189):Yt=Mt;continue}if(Mt<56320){bt[Tt++]=239,bt[Tt++]=191,bt[Tt++]=189,Yt=Mt;continue}Mt=Yt-55296<<10|Mt-56320|65536,Yt=null}else Yt&&(bt[Tt++]=239,bt[Tt++]=191,bt[Tt++]=189,Yt=null);Mt<128?bt[Tt++]=Mt:(Mt<2048?bt[Tt++]=Mt>>6|192:(Mt<65536?bt[Tt++]=Mt>>12|224:(bt[Tt++]=Mt>>18|240,bt[Tt++]=Mt>>12&63|128),bt[Tt++]=Mt>>6&63|128),bt[Tt++]=63&Mt|128)}return Tt}(this.buf,te,this.pos);var We=this.pos-xe;We>=128&&E(xe,We,this),this.pos=xe-1,this.writeVarint(We),this.pos+=We},writeFloat:function(te){this.realloc(4),c.write(this.buf,te,this.pos,!0,23,4),this.pos+=4},writeDouble:function(te){this.realloc(8),c.write(this.buf,te,this.pos,!0,52,8),this.pos+=8},writeBytes:function(te){var xe=te.length;this.writeVarint(xe),this.realloc(xe);for(var We=0;We<xe;We++)this.buf[this.pos++]=te[We]},writeRawMessage:function(te,xe){this.pos++;var We=this.pos;te(xe,this);var bt=this.pos-We;bt>=128&&E(We,bt,this),this.pos=We-1,this.writeVarint(bt),this.pos+=bt},writeMessage:function(te,xe,We){this.writeTag(te,s.Bytes),this.writeRawMessage(xe,We)},writePackedVarint:function(te,xe){xe.length&&this.writeMessage(te,L,xe)},writePackedSVarint:function(te,xe){xe.length&&this.writeMessage(te,R,xe)},writePackedBoolean:function(te,xe){xe.length&&this.writeMessage(te,J,xe)},writePackedFloat:function(te,xe){xe.length&&this.writeMessage(te,z,xe)},writePackedDouble:function(te,xe){xe.length&&this.writeMessage(te,G,xe)},writePackedFixed32:function(te,xe){xe.length&&this.writeMessage(te,ne,xe)},writePackedSFixed32:function(te,xe){xe.length&&this.writeMessage(te,oe,xe)},writePackedFixed64:function(te,xe){xe.length&&this.writeMessage(te,pe,xe)},writePackedSFixed64:function(te,xe){xe.length&&this.writeMessage(te,Be,xe)},writeBytesField:function(te,xe){this.writeTag(te,s.Bytes),this.writeBytes(xe)},writeFixed32Field:function(te,xe){this.writeTag(te,s.Fixed32),this.writeFixed32(xe)},writeSFixed32Field:function(te,xe){this.writeTag(te,s.Fixed32),this.writeSFixed32(xe)},writeFixed64Field:function(te,xe){this.writeTag(te,s.Fixed64),this.writeFixed64(xe)},writeSFixed64Field:function(te,xe){this.writeTag(te,s.Fixed64),this.writeSFixed64(xe)},writeVarintField:function(te,xe){this.writeTag(te,s.Varint),this.writeVarint(xe)},writeSVarintField:function(te,xe){this.writeTag(te,s.Varint),this.writeSVarint(xe)},writeStringField:function(te,xe){this.writeTag(te,s.Bytes),this.writeString(xe)},writeFloatField:function(te,xe){this.writeTag(te,s.Fixed32),this.writeFloat(xe)},writeDoubleField:function(te,xe){this.writeTag(te,s.Fixed64),this.writeDouble(xe)},writeBooleanField:function(te,xe){this.writeVarintField(te,!!xe)}},c_}var Qu,h_=g(ZC());function uR(c,s,A){c===1&&A.readMessage(hR,s)}function hR(c,s,A){if(c===3){const{id:d,bitmap:m,width:_,height:x,left:E,top:L,advance:R}=A.readMessage(dR,{});s.push({id:d,bitmap:new $p({width:_+6,height:x+6},m),metrics:{width:_,height:x,left:E,top:L,advance:R}})}}function dR(c,s,A){c===1?s.id=A.readVarint():c===2?s.bitmap=A.readBytes():c===3?s.width=A.readVarint():c===4?s.height=A.readVarint():c===5?s.left=A.readSVarint():c===6?s.top=A.readSVarint():c===7&&(s.advance=A.readVarint())}function XC(c){let s=0,A=0;for(const x of c)s+=x.w*x.h,A=Math.max(A,x.w);c.sort((x,E)=>E.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),A),h:1/0}];let m=0,_=0;for(const x of c)for(let E=d.length-1;E>=0;E--){const L=d[E];if(!(x.w>L.w||x.h>L.h)){if(x.x=L.x,x.y=L.y,_=Math.max(_,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===L.w&&x.h===L.h){const R=d.pop();E<d.length&&(d[E]=R)}else x.h===L.h?(L.x+=x.w,L.w-=x.w):x.w===L.w?(L.y+=x.h,L.h-=x.h):(d.push({x:L.x+x.w,y:L.y,w:L.w-x.w,h:x.h}),L.y+=x.h,L.h-=x.h);break}}return{w:m,h:_,fill:s/(m*_)||0}}class d_{constructor(s,{pixelRatio:A,version:d,stretchX:m,stretchY:_,content:x,textFitWidth:E,textFitHeight:L}){this.paddedRect=s,this.pixelRatio=A,this.stretchX=m,this.stretchY=_,this.content=x,this.version=d,this.textFitWidth=E,this.textFitHeight=L}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class YC{constructor(s,A){const d={},m={};this.haveRenderCallbacks=[];const _=[];this.addImages(s,d,_),this.addImages(A,m,_);const{w:x,h:E}=XC(_),L=new ha({width:x||1,height:E||1});for(const R in s){const z=s[R],G=d[R].paddedRect;ha.copy(z.data,L,{x:0,y:0},{x:G.x+1,y:G.y+1},z.data)}for(const R in A){const z=A[R],G=m[R].paddedRect,J=G.x+1,ne=G.y+1,oe=z.data.width,pe=z.data.height;ha.copy(z.data,L,{x:0,y:0},{x:J,y:ne},z.data),ha.copy(z.data,L,{x:0,y:pe-1},{x:J,y:ne-1},{width:oe,height:1}),ha.copy(z.data,L,{x:0,y:0},{x:J,y:ne+pe},{width:oe,height:1}),ha.copy(z.data,L,{x:oe-1,y:0},{x:J-1,y:ne},{width:1,height:pe}),ha.copy(z.data,L,{x:0,y:0},{x:J+oe,y:ne},{width:1,height:pe})}this.image=L,this.iconPositions=d,this.patternPositions=m}addImages(s,A,d){for(const m in s){const _=s[m],x={x:0,y:0,w:_.data.width+2,h:_.data.height+2};d.push(x),A[m]=new d_(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(s,A){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in s.updatedImages)this.patchUpdatedImage(this.iconPositions[d],s.getImage(d),A),this.patchUpdatedImage(this.patternPositions[d],s.getImage(d),A)}patchUpdatedImage(s,A,d){if(!s||!A||s.version===A.version)return;s.version=A.version;const[m,_]=s.tl;d.update(A.data,void 0,{x:m,y:_})}}Qe("ImagePosition",d_),Qe("ImageAtlas",YC),h.an=void 0,(Qu=h.an||(h.an={}))[Qu.none=0]="none",Qu[Qu.horizontal=1]="horizontal",Qu[Qu.vertical=2]="vertical",Qu[Qu.horizontalOnly=3]="horizontalOnly";class im{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,A,d){const m=new im;return m.scale=s||1,m.fontStack=A,m.verticalAlign=d||"bottom",m}static forImage(s,A){const d=new im;return d.imageName=s,d.verticalAlign=A||"bottom",d}}class af{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,A){const d=new af;for(let m=0;m<s.sections.length;m++){const _=s.sections[m];_.image?d.addImageSection(_):d.addTextSection(_,A)}return d}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let A="";for(let d=0;d<s.length;d++){const m=s.charCodeAt(d+1)||null,_=s.charCodeAt(d-1)||null;A+=m&&_n(m)&&!nm[s[d+1]]||_&&_n(_)&&!nm[s[d-1]]||!nm[s[d]]?s[d]:nm[s[d]]}return A}(this.text)}trim(){let s=0;for(let d=0;d<this.text.length&&r0[this.text.charCodeAt(d)];d++)s++;let A=this.text.length;for(let d=this.text.length-1;d>=0&&d>=s&&r0[this.text.charCodeAt(d)];d--)A--;this.text=this.text.substring(s,A),this.sectionIndex=this.sectionIndex.slice(s,A)}substring(s,A){const d=new af;return d.text=this.text.substring(s,A),d.sectionIndex=this.sectionIndex.slice(s,A),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,A)=>Math.max(s,this.sections[A].scale),0)}getMaxImageSize(s){let A=0,d=0;for(let m=0;m<this.length();m++){const _=this.getSection(m);if(_.imageName){const x=s[_.imageName];if(!x)continue;const E=x.displaySize;A=Math.max(A,E[0]),d=Math.max(d,E[1])}}return{maxImageWidth:A,maxImageHeight:d}}addTextSection(s,A){this.text+=s.text,this.sections.push(im.forText(s.scale,s.fontStack||A,s.verticalAlign));const d=this.sections.length-1;for(let m=0;m<s.text.length;++m)this.sectionIndex.push(d)}addImageSection(s){const A=s.image?s.image.name:"";if(A.length===0)return void wr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(im.forImage(A,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):wr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function t0(c,s,A,d,m,_,x,E,L,R,z,G,J,ne,oe){const pe=af.fromFeature(c,m);let Be;G===h.an.vertical&&pe.verticalizePunctuation();const{processBidirectionalText:Re,processStyledBidirectionalText:lt}=qn;if(Re&&pe.sections.length===1){Be=[];const xe=Re(pe.toString(),f_(pe,R,_,s,d,ne));for(const We of xe){const bt=new af;bt.text=We,bt.sections=pe.sections;for(let Ht=0;Ht<We.length;Ht++)bt.sectionIndex.push(0);Be.push(bt)}}else if(lt){Be=[];const xe=lt(pe.text,pe.sectionIndex,f_(pe,R,_,s,d,ne));for(const We of xe){const bt=new af;bt.text=We[0],bt.sectionIndex=We[1],bt.sections=pe.sections,Be.push(bt)}}else Be=function(xe,We){const bt=[],Ht=xe.text;let Tt=0;for(const Mt of We)bt.push(xe.substring(Tt,Mt)),Tt=Mt;return Tt<Ht.length&&bt.push(xe.substring(Tt,Ht.length)),bt}(pe,f_(pe,R,_,s,d,ne));const qe=[],te={positionedLines:qe,text:pe.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function(xe,We,bt,Ht,Tt,Mt,Yt,jt,er,Ut,dr,Rr){let kr=0,_r=0,bn=0,Ui=0;const Bs=jt==="right"?1:jt==="left"?0:.5,mo=Ds/Rr;let sl=0;for(const Si of Tt){Si.trim();const Qs=Si.getMaxScale(),ro={positionedGlyphs:[],lineOffset:0};xe.positionedLines[sl]=ro;const no=ro.positionedGlyphs;let Ho=0;if(!Si.length()){_r+=Mt,++sl;continue}const ol=gR(Ht,Si,mo);for(let fa=0;fa<Si.length();fa++){const Cs=Si.getSection(fa),zs=Si.getSectionIndex(fa),Hs=Si.getCharCode(fa),ps=yR(er,dr,Hs);let hi;if(Cs.imageName){if(xe.iconsInText=!0,Cs.scale=Cs.scale*mo,hi=_R(Cs,ps,Qs,ol,Ht),!hi)continue;Ho=Math.max(Ho,hi.imageOffset)}else if(hi=vR(Cs,Hs,ps,ol,We,bt),!hi)continue;const{rect:pA,metrics:uf,baselineOffset:mA}=hi;no.push({glyph:Hs,imageName:Cs.imageName,x:kr,y:_r+mA+-17,vertical:ps,scale:Cs.scale,fontStack:Cs.fontStack,sectionIndex:zs,metrics:uf,rect:pA}),ps?(xe.verticalizable=!0,kr+=(Cs.imageName?uf.advance:Ds)*Cs.scale+Ut):kr+=uf.advance*Cs.scale+Ut}no.length!==0&&(bn=Math.max(kr-Ut,bn),wR(no,0,no.length-1,Bs)),kr=0,ro.lineOffset=Math.max(Ho,(Qs-1)*Ds);const Os=Mt*Qs+Ho;_r+=Os,Ui=Math.max(Os,Ui),++sl}const{horizontalAlign:da,verticalAlign:to}=p_(Yt);(function(Si,Qs,ro,no,Ho,ol,Os,fa,Cs){const zs=(Qs-ro)*Ho;let Hs=0;Hs=ol!==Os?-fa*no- -17:-no*Cs*Os+.5*Os;for(const ps of Si)for(const hi of ps.positionedGlyphs)hi.x+=zs,hi.y+=Hs})(xe.positionedLines,Bs,da,to,bn,Ui,Mt,_r,Tt.length),xe.top+=-to*_r,xe.bottom=xe.top+_r,xe.left+=-da*bn,xe.right=xe.left+bn}(te,s,A,d,Be,x,E,L,G,R,J,oe),!function(xe){for(const We of xe)if(We.positionedGlyphs.length!==0)return!1;return!0}(qe)&&te}const r0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fR={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},pR={40:!0};function JC(c,s,A,d,m,_){if(s.imageName){const x=d[s.imageName];return x?x.displaySize[0]*s.scale*Ds/_+m:0}{const x=A[s.fontStack],E=x&&x[c];return E?E.metrics.advance*s.scale+m:0}}function e5(c,s,A,d){const m=Math.pow(c-s,2);return d?c<s?m/2:2*m:m+Math.abs(A)*A}function mR(c,s,A){let d=0;return c===10&&(d-=1e4),A&&(d+=150),c!==40&&c!==65288||(d+=50),s!==41&&s!==65289||(d+=50),d}function t5(c,s,A,d,m,_){let x=null,E=e5(s,A,m,_);for(const L of d){const R=e5(s-L.x,A,m,_)+L.badness;R<=E&&(x=L,E=R)}return{index:c,x:s,priorBreak:x,badness:E}}function r5(c){return c?r5(c.priorBreak).concat(c.index):[]}function f_(c,s,A,d,m,_){if(!c)return[];const x=[],E=function(G,J,ne,oe,pe,Be){let Re=0;for(let lt=0;lt<G.length();lt++){const qe=G.getSection(lt);Re+=JC(G.getCharCode(lt),qe,oe,pe,J,Be)}return Re/Math.max(1,Math.ceil(Re/ne))}(c,s,A,d,m,_),L=c.text.indexOf("​")>=0;let R=0;for(let G=0;G<c.length();G++){const J=c.getSection(G),ne=c.getCharCode(G);if(r0[ne]||(R+=JC(ne,J,d,m,s,_)),G<c.length()-1){const oe=!((z=ne)<11904)&&(!!wt["CJK Compatibility Forms"](z)||!!wt["CJK Compatibility"](z)||!!wt["CJK Strokes"](z)||!!wt["CJK Symbols and Punctuation"](z)||!!wt["Enclosed CJK Letters and Months"](z)||!!wt["Halfwidth and Fullwidth Forms"](z)||!!wt["Ideographic Description Characters"](z)||!!wt["Vertical Forms"](z)||ln.test(String.fromCodePoint(z)));(fR[ne]||oe||J.imageName||G!==c.length()-2&&pR[c.getCharCode(G+1)])&&x.push(t5(G+1,R,E,x,mR(ne,c.getCharCode(G+1),oe&&L),!1))}}var z;return r5(t5(c.length(),R,E,x,0,!0))}function p_(c){let s=.5,A=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:s,verticalAlign:A}}function gR(c,s,A){const d=s.getMaxScale()*Ds,{maxImageWidth:m,maxImageHeight:_}=s.getMaxImageSize(c),x=Math.max(d,_*A);return{verticalLineContentWidth:Math.max(d,m*A),horizontalLineContentHeight:x}}function n5(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function yR(c,s,A){return!(c===h.an.horizontal||!s&&!Er(A)||s&&(r0[A]||(d=A,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function vR(c,s,A,d,m,_){const x=_[c.fontStack],E=function(R,z,G,J){if(R&&R.rect)return R;const ne=z[G.fontStack],oe=ne&&ne[J];return oe?{rect:null,metrics:oe.metrics}:null}(x&&x[s],m,c,s);if(E===null)return null;let L;if(A)L=d.verticalLineContentWidth-c.scale*Ds;else{const R=n5(c.verticalAlign);L=(d.horizontalLineContentHeight-c.scale*Ds)*R}return{rect:E.rect,metrics:E.metrics,baselineOffset:L}}function _R(c,s,A,d,m){const _=m[c.imageName];if(!_)return null;const x=_.paddedRect,E=_.displaySize,L={width:E[0],height:E[1],left:1,top:-3,advance:s?E[1]:E[0]};let R;if(s)R=d.verticalLineContentWidth-E[1]*c.scale;else{const z=n5(c.verticalAlign);R=(d.horizontalLineContentHeight-E[1]*c.scale)*z}return{rect:x,metrics:L,baselineOffset:R,imageOffset:(s?E[0]:E[1])*c.scale-Ds*A}}function wR(c,s,A,d){if(d===0)return;const m=c[A],_=(c[A].x+m.metrics.advance*m.scale)*d;for(let x=s;x<=A;x++)c[x].x-=_}function xR(c,s,A){const{horizontalAlign:d,verticalAlign:m}=p_(A),_=s[0]-c.displaySize[0]*d,x=s[1]-c.displaySize[1]*m;return{image:c,top:x,bottom:x+c.displaySize[1],left:_,right:_+c.displaySize[0]}}function i5(c){var s,A;let d=c.left,m=c.top,_=c.right-d,x=c.bottom-m;const E=(s=c.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",L=(A=c.image.textFitHeight)!==null&&A!==void 0?A:"stretchOrShrink",R=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(L==="proportional"){if(E==="stretchOnly"&&_/x<R||E==="proportional"){const z=Math.ceil(x*R);d*=z/_,_=z}}else if(E==="proportional"&&L==="stretchOnly"&&R!==0&&_/x>R){const z=Math.ceil(_/R);m*=z/x,x=z}return{x1:d,y1:m,x2:d+_,y2:m+x}}function s5(c,s,A,d,m,_){const x=c.image;let E;if(x.content){const Be=x.content,Re=x.pixelRatio||1;E=[Be[0]/Re,Be[1]/Re,x.displaySize[0]-Be[2]/Re,x.displaySize[1]-Be[3]/Re]}const L=s.left*_,R=s.right*_;let z,G,J,ne;A==="width"||A==="both"?(ne=m[0]+L-d[3],G=m[0]+R+d[1]):(ne=m[0]+(L+R-x.displaySize[0])/2,G=ne+x.displaySize[0]);const oe=s.top*_,pe=s.bottom*_;return A==="height"||A==="both"?(z=m[1]+oe-d[0],J=m[1]+pe+d[2]):(z=m[1]+(oe+pe-x.displaySize[1])/2,J=z+x.displaySize[1]),{image:x,top:z,right:G,bottom:J,left:ne,collisionPadding:E}}const eu=128,Ou=32640;function o5(c,s){const{expression:A}=s;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new vr(c+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=A;let _=0;for(;_<d.length&&d[_]<=c;)_++;_=Math.max(0,_-1);let x=_;for(;x<d.length&&d[x]<c+1;)x++;x=Math.min(d.length-1,x);const E=d[_],L=d[x];return A.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:L,interpolationType:m}:{kind:"camera",minZoom:E,maxZoom:L,minSize:A.evaluate(new vr(E)),maxSize:A.evaluate(new vr(L)),interpolationType:m}}}function m_(c,s,A){let d="never";const m=c.get(s);return m?d=m:c.get(A)&&(d="always"),d}const bR=em.VectorTileFeature.types,BR=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function n0(c,s,A,d,m,_,x,E,L,R,z,G,J){const ne=E?Math.min(Ou,Math.round(E[0])):0,oe=E?Math.min(Ou,Math.round(E[1])):0;c.emplaceBack(s,A,Math.round(32*d),Math.round(32*m),_,x,(ne<<1)+(L?1:0),oe,16*R,16*z,256*G,256*J)}function g_(c,s,A){c.emplaceBack(s.x,s.y,A),c.emplaceBack(s.x,s.y,A),c.emplaceBack(s.x,s.y,A),c.emplaceBack(s.x,s.y,A)}function CR(c){for(const s of c.sections)if(Ar(s.text))return!0;return!1}class y_{constructor(s){this.layoutVertexArray=new sn,this.indexArray=new En,this.programConfigurations=s,this.segments=new vn,this.dynamicLayoutVertexArray=new xn,this.opacityVertexArray=new Jn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Te}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,A,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,sR.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,oR.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,BR,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Qe("SymbolBuffers",y_);class v_{constructor(s,A,d){this.layoutVertexArray=new s,this.layoutAttributes=A,this.indexArray=new d,this.segments=new vn,this.collisionVertexArray=new Un}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,aR.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Qe("CollisionBuffers",v_);class lf{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(x=>x.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=o5(this.zoom,A["text-size"]),this.iconSizeData=o5(this.zoom,A["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=m_(d,"text-overlap","text-allow-overlap")!=="never"||m_(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>h.an[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=s.sourceID}createArrays(){this.text=new y_(new ac(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new y_(new ac(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new He,this.lineVertexArray=new Xe,this.symbolInstances=new $e,this.textAnchorOffsets=new je}calculateGlyphDependencies(s,A,d,m,_){for(let x=0;x<s.length;x++)if(A[s.charCodeAt(x)]=!0,(d||m)&&_){const E=nm[s.charAt(x)];E&&(A[E.charCodeAt(0)]=!0)}}populate(s,A,d){const m=this.layers[0],_=m.layout,x=_.get("text-font"),E=_.get("text-field"),L=_.get("icon-image"),R=(E.value.kind!=="constant"||E.value.value instanceof cs&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),z=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,G=_.get("symbol-sort-key");if(this.features=[],!R&&!z)return;const J=A.iconDependencies,ne=A.glyphDependencies,oe=A.availableImages,pe=new vr(this.zoom,{globalState:this.globalState});for(const{feature:Be,id:Re,index:lt,sourceLayerIndex:qe}of s){const te=m._featureFilter.needGeometry,xe=ed(Be,te);if(!m._featureFilter.filter(pe,xe,d))continue;let We,bt;if(te||(xe.geometry=Jh(Be)),R){const Tt=m.getValueAndResolveTokens("text-field",xe,d,oe),Mt=cs.factory(Tt),Yt=this.hasRTLText=this.hasRTLText||CR(Mt);(!Yt||qn.getRTLTextPluginStatus()==="unavailable"||Yt&&qn.isParsed())&&(We=AR(Mt,m,xe))}if(z){const Tt=m.getValueAndResolveTokens("icon-image",xe,d,oe);bt=Tt instanceof Xi?Tt:Xi.fromString(Tt)}if(!We&&!bt)continue;const Ht=this.sortFeaturesByKey?G.evaluate(xe,{},d):void 0;if(this.features.push({id:Re,text:We,icon:bt,index:lt,sourceLayerIndex:qe,geometry:xe.geometry,properties:Be.properties,type:bR[Be.type],sortKey:Ht}),bt&&(J[bt.name]=!0),We){const Tt=x.evaluate(xe,{},d).join(","),Mt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.an.vertical)>=0;for(const Yt of We.sections)if(Yt.image)J[Yt.image.name]=!0;else{const jt=Ot(We.toString()),er=Yt.fontStack||Tt,Ut=ne[er]=ne[er]||{};this.calculateGlyphDependencies(Yt.text,Ut,Mt,this.allowVerticalPlacement,jt)}}}_.get("symbol-placement")==="line"&&(this.features=function(Be){const Re={},lt={},qe=[];let te=0;function xe(Tt){qe.push(Be[Tt]),te++}function We(Tt,Mt,Yt){const jt=lt[Tt];return delete lt[Tt],lt[Mt]=jt,qe[jt].geometry[0].pop(),qe[jt].geometry[0]=qe[jt].geometry[0].concat(Yt[0]),jt}function bt(Tt,Mt,Yt){const jt=Re[Mt];return delete Re[Mt],Re[Tt]=jt,qe[jt].geometry[0].shift(),qe[jt].geometry[0]=Yt[0].concat(qe[jt].geometry[0]),jt}function Ht(Tt,Mt,Yt){const jt=Yt?Mt[0][Mt[0].length-1]:Mt[0][0];return`${Tt}:${jt.x}:${jt.y}`}for(let Tt=0;Tt<Be.length;Tt++){const Mt=Be[Tt],Yt=Mt.geometry,jt=Mt.text?Mt.text.toString():null;if(!jt){xe(Tt);continue}const er=Ht(jt,Yt),Ut=Ht(jt,Yt,!0);if(er in lt&&Ut in Re&&lt[er]!==Re[Ut]){const dr=bt(er,Ut,Yt),Rr=We(er,Ut,qe[dr].geometry);delete Re[er],delete lt[Ut],lt[Ht(jt,qe[Rr].geometry,!0)]=Rr,qe[dr].geometry=null}else er in lt?We(er,Ut,Yt):Ut in Re?bt(er,Ut,Yt):(xe(Tt),Re[er]=te-1,lt[Ut]=te-1)}return qe.filter(Tt=>Tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Be,Re)=>Be.sortKey-Re.sortKey)}update(s,A,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,A,this.layers,d),this.icon.programConfigurations.updatePaintArrays(s,A,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,A){const d=this.lineVertexArray.length;if(s.segment!==void 0){let m=s.dist(A[s.segment+1]),_=s.dist(A[s.segment]);const x={};for(let E=s.segment+1;E<A.length;E++)x[E]={x:A[E].x,y:A[E].y,tileUnitDistanceFromAnchor:m},E<A.length-1&&(m+=A[E+1].dist(A[E]));for(let E=s.segment||0;E>=0;E--)x[E]={x:A[E].x,y:A[E].y,tileUnitDistanceFromAnchor:_},E>0&&(_+=A[E-1].dist(A[E]));for(let E=0;E<A.length;E++){const L=x[E];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(s,A,d,m,_,x,E,L,R,z,G,J){const ne=s.indexArray,oe=s.layoutVertexArray,pe=s.segments.prepareSegment(4*A.length,oe,ne,this.canOverlap?x.sortKey:void 0),Be=this.glyphOffsetArray.length,Re=pe.vertexLength,lt=this.allowVerticalPlacement&&E===h.an.vertical?Math.PI/2:0,qe=x.text&&x.text.sections;for(let te=0;te<A.length;te++){const{tl:xe,tr:We,bl:bt,br:Ht,tex:Tt,pixelOffsetTL:Mt,pixelOffsetBR:Yt,minFontScaleX:jt,minFontScaleY:er,glyphOffset:Ut,isSDF:dr,sectionIndex:Rr}=A[te],kr=pe.vertexLength,_r=Ut[1];n0(oe,L.x,L.y,xe.x,_r+xe.y,Tt.x,Tt.y,d,dr,Mt.x,Mt.y,jt,er),n0(oe,L.x,L.y,We.x,_r+We.y,Tt.x+Tt.w,Tt.y,d,dr,Yt.x,Mt.y,jt,er),n0(oe,L.x,L.y,bt.x,_r+bt.y,Tt.x,Tt.y+Tt.h,d,dr,Mt.x,Yt.y,jt,er),n0(oe,L.x,L.y,Ht.x,_r+Ht.y,Tt.x+Tt.w,Tt.y+Tt.h,d,dr,Yt.x,Yt.y,jt,er),g_(s.dynamicLayoutVertexArray,L,lt),ne.emplaceBack(kr,kr+2,kr+1),ne.emplaceBack(kr+1,kr+2,kr+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ut[0]),te!==A.length-1&&Rr===A[te+1].sectionIndex||s.programConfigurations.populatePaintArrays(oe.length,x,x.index,{},J,qe&&qe[Rr])}s.placedSymbolArray.emplaceBack(L.x,L.y,Be,this.glyphOffsetArray.length-Be,Re,R,z,L.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],E,0,!1,0,G)}_addCollisionDebugVertex(s,A,d,m,_,x){return A.emplaceBack(0,0),s.emplaceBack(d.x,d.y,m,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(s,A,d,m,_,x,E){const L=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),R=L.vertexLength,z=_.layoutVertexArray,G=_.collisionVertexArray,J=E.anchorX,ne=E.anchorY;this._addCollisionDebugVertex(z,G,x,J,ne,new N(s,A)),this._addCollisionDebugVertex(z,G,x,J,ne,new N(d,A)),this._addCollisionDebugVertex(z,G,x,J,ne,new N(d,m)),this._addCollisionDebugVertex(z,G,x,J,ne,new N(s,m)),L.vertexLength+=4;const oe=_.indexArray;oe.emplaceBack(R,R+1),oe.emplaceBack(R+1,R+2),oe.emplaceBack(R+2,R+3),oe.emplaceBack(R+3,R),L.primitiveLength+=4}addDebugCollisionBoxes(s,A,d,m){for(let _=s;_<A;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new v_(kn,$C.members,Sn),this.iconCollisionBox=new v_(kn,$C.members,Sn);for(let s=0;s<this.symbolInstances.length;s++){const A=this.symbolInstances.get(s);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(s,A,d,m,_,x,E,L,R){const z={};for(let G=A;G<d;G++){const J=s.get(G);z.textBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},z.textFeatureIndex=J.featureIndex;break}for(let G=m;G<_;G++){const J=s.get(G);z.verticalTextBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},z.verticalTextFeatureIndex=J.featureIndex;break}for(let G=x;G<E;G++){const J=s.get(G);z.iconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},z.iconFeatureIndex=J.featureIndex;break}for(let G=L;G<R;G++){const J=s.get(G);z.verticalIconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},z.verticalIconFeatureIndex=J.featureIndex;break}return z}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const d=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,A){const d=s.placedSymbolArray.get(A),m=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<m;_+=4)s.indexArray.emplaceBack(_,_+2,_+1),s.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(s),d=Math.cos(s),m=[],_=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const L=this.symbolInstances.get(E);m.push(0|Math.round(A*L.anchorX+d*L.anchorY)),_.push(L.featureIndex)}return x.sort((E,L)=>m[E]-m[L]||_[L]-_[E]),x}addToSortKeyRanges(s,A){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===A?d.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const d=this.symbolInstances.get(A);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,_,x)=>{m>=0&&x.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let a5,l5;Qe("SymbolBucket",lf,{omit:["layers","collisionBoxArray","features","compareText"]}),lf.MAX_GLYPHS=65535,lf.addDynamicAttributes=g_;var __={get paint(){return l5=l5||new ii({"icon-opacity":new lr(ze.paint_symbol["icon-opacity"]),"icon-color":new lr(ze.paint_symbol["icon-color"]),"icon-halo-color":new lr(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new lr(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new lr(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new lr(ze.paint_symbol["text-opacity"]),"text-color":new lr(ze.paint_symbol["text-color"],{runtimeType:_i,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new lr(ze.paint_symbol["text-halo-color"]),"text-halo-width":new lr(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new lr(ze.paint_symbol["text-halo-blur"]),"text-translate":new Zt(ze.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(ze.paint_symbol["text-translate-anchor"])})},get layout(){return a5=a5||new ii({"symbol-placement":new Zt(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new lr(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zt(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zt(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zt(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new lr(ze.layout_symbol["icon-size"]),"icon-text-fit":new Zt(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new lr(ze.layout_symbol["icon-image"]),"icon-rotate":new lr(ze.layout_symbol["icon-rotate"]),"icon-padding":new lr(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new lr(ze.layout_symbol["icon-offset"]),"icon-anchor":new lr(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(ze.layout_symbol["text-rotation-alignment"]),"text-field":new lr(ze.layout_symbol["text-field"]),"text-font":new lr(ze.layout_symbol["text-font"]),"text-size":new lr(ze.layout_symbol["text-size"]),"text-max-width":new lr(ze.layout_symbol["text-max-width"]),"text-line-height":new Zt(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new lr(ze.layout_symbol["text-letter-spacing"]),"text-justify":new lr(ze.layout_symbol["text-justify"]),"text-radial-offset":new lr(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new lr(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new lr(ze.layout_symbol["text-anchor"]),"text-max-angle":new Zt(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(ze.layout_symbol["text-writing-mode"]),"text-rotate":new lr(ze.layout_symbol["text-rotate"]),"text-padding":new Zt(ze.layout_symbol["text-padding"]),"text-keep-upright":new Zt(ze.layout_symbol["text-keep-upright"]),"text-transform":new lr(ze.layout_symbol["text-transform"]),"text-offset":new lr(ze.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Zt(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Zt(ze.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(ze.layout_symbol["text-optional"])})}};class A5{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:_s,this.defaultValue=s}evaluate(s){if(s.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(s.formattedSection))return A.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qe("FormatSectionOverride",A5,{omit:["defaultValue"]});class i0 extends On{constructor(s){super(s,__)}recalculate(s,A){if(super.recalculate(s,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const _ of d)m.indexOf(_)<0&&m.push(_);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,A,d,m){const _=this.layout.get(s).evaluate(A,{},d,m),x=this._unevaluatedLayout._values[s];return x.isDataDriven()||Tu(x.value)||!_?_:function(E,L){return L.replace(/{([^{}]+)}/g,(R,z)=>E&&z in E?String(E[z]):"")}(A.properties,_)}createBucket(s){return new lf(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of __.paint.overridableProperties){if(!i0.hasPaintOverride(this.layout,s))continue;const A=this.paint.get(s),d=new A5(A),m=new ZA(d,A.property.specification);let _=null;_=A.value.kind==="constant"||A.value.kind==="source"?new XA("source",m):new Lu("composite",m,A.value.zoomStops),this.paint._values[s]=new ci(A.property,_,A.parameters)}}_handleOverridablePaintPropertyUpdate(s,A,d){return!(!this.layout||A.isDataDriven()||d.isDataDriven())&&i0.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,A){const d=s.get("text-field"),m=__.paint.properties[A];let _=!1;const x=E=>{for(const L of E)if(m.overrides&&m.overrides.hasOverride(L))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof cs)x(d.value.value.sections);else if(d.value.kind==="source"){const E=R=>{_||(R instanceof Yi&&Mr(R.value)===za?x(R.value.sections):R instanceof Mo?x(R.sections):R.eachChild(E))},L=d.value;L._styleExpression&&E(L._styleExpression.expression)}return _}}let c5;var SR={get paint(){return c5=c5||new ii({"background-color":new Zt(ze.paint_background["background-color"]),"background-pattern":new Nn(ze.paint_background["background-pattern"]),"background-opacity":new Zt(ze.paint_background["background-opacity"])})}};class ER extends On{constructor(s){super(s,SR)}}let u5;var IR={get paint(){return u5=u5||new ii({"raster-opacity":new Zt(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zt(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(ze.paint_raster["raster-saturation"]),"raster-contrast":new Zt(ze.paint_raster["raster-contrast"]),"raster-resampling":new Zt(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(ze.paint_raster["raster-fade-duration"])})}};class FR extends On{constructor(s){super(s,IR)}}class TR extends On{constructor(s){super(s,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class PR{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const LR={once:!0},w_=63710088e-1;class zu{constructor(s,A){if(isNaN(s)||isNaN(A))throw new Error(`Invalid LngLat object: (${s}, ${A})`);if(this.lng=+s,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zu(Lt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const A=Math.PI/180,d=this.lat*A,m=s.lat*A,_=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((s.lng-this.lng)*A);return w_*Math.acos(Math.min(_,1))}static convert(s){if(s instanceof zu)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new zu(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new zu(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const h5=2*Math.PI*w_;function d5(c){return h5*Math.cos(c*Math.PI/180)}function f5(c){return(180+c)/360}function p5(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function m5(c,s){return c/d5(s)}function x_(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function g5(c,s){return c*d5(x_(s))}class sm{constructor(s,A,d=0){this.x=+s,this.y=+A,this.z=+d}static fromLngLat(s,A=0){const d=zu.convert(s);return new sm(f5(d.lng),p5(d.lat),m5(A,d.lat))}toLngLat(){return new zu(360*this.x-180,x_(this.y))}toAltitude(){return g5(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/h5*(s=x_(this.y),1/Math.cos(s*Math.PI/180));var s}}function y5(c,s,A){var d=2*Math.PI*6378137/256/Math.pow(2,A);return[c*d-2*Math.PI*6378137/2,s*d-2*Math.PI*6378137/2]}class b_{constructor(s,A,d){if(!function(m,_,x){return!(m<0||m>25||x<0||x>=Math.pow(2,m)||_<0||_>=Math.pow(2,m))}(s,A,d))throw new Error(`x=${A}, y=${d}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=A,this.y=d,this.key=Af(0,s,s,A,d)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,A,d){const m=(x=this.y,E=this.z,L=y5(256*(_=this.x),256*(x=Math.pow(2,E)-x-1),E),R=y5(256*(_+1),256*(x+1),E),L[0]+","+L[1]+","+R[0]+","+R[1]);var _,x,E,L,R;const z=function(G,J,ne){let oe,pe="";for(let Be=G;Be>0;Be--)oe=1<<Be-1,pe+=(J&oe?1:0)+(ne&oe?2:0);return pe}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,m)}isChildOf(s){const A=this.z-s.z;return A>0&&s.x===this.x>>A&&s.y===this.y>>A}getTilePoint(s){const A=Math.pow(2,this.z);return new N((s.x*A-this.x)*ie,(s.y*A-this.y)*ie)}toString(){return`${this.z}/${this.x}/${this.y}`}}class v5{constructor(s,A){this.wrap=s,this.canonical=A,this.key=Af(s,A.z,A.z,A.x,A.y)}}class il{constructor(s,A,d,m,_){if(this.terrainRttPosMatrix32f=null,s<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${d}`);this.overscaledZ=s,this.wrap=A,this.canonical=new b_(d,+m,+_),this.key=Af(A,s,d,m,_)}clone(){return new il(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-s;return s>this.canonical.z?new il(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new il(s,this.wrap,s,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(s,A){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-s;return s>this.canonical.z?Af(this.wrap*+A,s,this.canonical.z,this.canonical.x,this.canonical.y):Af(this.wrap*+A,s,s,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const A=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>A&&s.canonical.y===this.canonical.y>>A}children(s){if(this.overscaledZ>=s)return[new il(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new il(A,this.wrap,A,d,m),new il(A,this.wrap,A,d+1,m),new il(A,this.wrap,A,d,m+1),new il(A,this.wrap,A,d+1,m+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new il(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new il(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new v5(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new sm(s.x-this.wrap,s.y))}}function Af(c,s,A,d,m){(c*=2)<0&&(c=-1*c-1);const _=1<<A;return(_*_*c+_*m+d).toString(36)+A.toString(36)+s.toString(36)}Qe("CanonicalTileID",b_),Qe("OverscaledTileID",il,{omit:["terrainRttPosMatrix32f"]});class nd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(s){return this.minX=Math.min(this.minX,s.x),this.minY=Math.min(this.minY,s.y),this.maxX=Math.max(this.maxX,s.x),this.maxY=Math.max(this.maxY,s.y),this}expandBy(s){return this.minX-=s,this.minY-=s,this.maxX+=s,this.maxY+=s,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(s){return this.expandBy(-s)}map(s){const A=new nd;return A.extend(s(new N(this.minX,this.minY))),A.extend(s(new N(this.maxX,this.minY))),A.extend(s(new N(this.minX,this.maxY))),A.extend(s(new N(this.maxX,this.maxY))),A}static fromPoints(s){const A=new nd;for(const d of s)A.extend(d);return A}contains(s){return s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(s){return!this.empty()&&!s.empty()&&s.minX>=this.minX&&s.maxX<=this.maxX&&s.minY>=this.minY&&s.maxY<=this.maxY}intersects(s){return!this.empty()&&!s.empty()&&s.minX<=this.maxX&&s.maxX>=this.minX&&s.minY<=this.maxY&&s.maxY>=this.minY}}class _5{constructor(s){this._stringToNumber={},this._numberToString=[];for(let A=0;A<s.length;A++){const d=s[A];this._stringToNumber[d]=A,this._numberToString[A]=d}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class w5{constructor(s,A,d,m,_){this.type="Feature",this._vectorTileFeature=s,s._z=A,s._x=d,s._y=m,this.properties=s.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(s[A]=this[A]);return s}}class x5{constructor(s,A){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Fe(ie,16,0),this.grid3D=new Fe(ie,16,0),this.featureIndexArray=new Ft,this.promoteId=A}insert(s,A,d,m,_,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,_);const L=x?this.grid3D:this.grid;for(let R=0;R<A.length;R++){const z=A[R],G=[1/0,1/0,-1/0,-1/0];for(let J=0;J<z.length;J++){const ne=z[J];G[0]=Math.min(G[0],ne.x),G[1]=Math.min(G[1],ne.y),G[2]=Math.max(G[2],ne.x),G[3]=Math.max(G[3],ne.y)}G[0]<ie&&G[1]<ie&&G[2]>=0&&G[3]>=0&&L.insert(E,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new em.VectorTile(new h_(this.rawTileData)).layers,this.sourceLayerCoder=new _5(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,A,d,m){this.loadVTLayers();const _=s.params,x=ie/s.tileSize/s.scale,E=No(_.filter),L=s.queryGeometry,R=s.queryPadding*x,z=nd.fromPoints(L),G=this.grid.query(z.minX-R,z.minY-R,z.maxX+R,z.maxY+R),J=nd.fromPoints(s.cameraQueryGeometry).expandBy(R),ne=this.grid3D.query(J.minX,J.minY,J.maxX,J.maxY,(Be,Re,lt,qe)=>function(te,xe,We,bt,Ht){for(const Mt of te)if(xe<=Mt.x&&We<=Mt.y&&bt>=Mt.x&&Ht>=Mt.y)return!0;const Tt=[new N(xe,We),new N(xe,Ht),new N(bt,Ht),new N(bt,We)];if(te.length>2){for(const Mt of Tt)if(rf(te,Mt))return!0}for(let Mt=0;Mt<te.length-1;Mt++)if(v6(te[Mt],te[Mt+1],Tt))return!0;return!1}(s.cameraQueryGeometry,Be-R,Re-R,lt+R,qe+R));for(const Be of ne)G.push(Be);G.sort(MR);const oe={};let pe;for(let Be=0;Be<G.length;Be++){const Re=G[Be];if(Re===pe)continue;pe=Re;const lt=this.featureIndexArray.get(Re);let qe=null;this.loadMatchingFeature(oe,lt.bucketIndex,lt.sourceLayerIndex,lt.featureIndex,E,_.layers,_.availableImages,A,d,m,(te,xe,We)=>(qe||(qe=Jh(te)),xe.queryIntersectsFeature({queryGeometry:L,feature:te,featureState:We,geometry:qe,zoom:this.z,transform:s.transform,pixelsToTileUnits:x,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return oe}loadMatchingFeature(s,A,d,m,_,x,E,L,R,z,G){const J=this.bucketLayerIDs[A];if(x&&!J.some(Be=>x.has(Be)))return;const ne=this.sourceLayerCoder.decode(d),oe=this.vtLayers[ne].feature(m);if(_.needGeometry){const Be=ed(oe,!0);if(!_.filter(new vr(this.tileID.overscaledZ),Be,this.tileID.canonical))return}else if(!_.filter(new vr(this.tileID.overscaledZ),oe))return;const pe=this.getId(oe,ne);for(let Be=0;Be<J.length;Be++){const Re=J[Be];if(x&&!x.has(Re))continue;const lt=L[Re];if(!lt)continue;let qe={};pe&&z&&(qe=z.getState(lt.sourceLayer||"_geojsonTileLayer",pe));const te=kt({},R[Re]);te.paint=b5(te.paint,lt.paint,oe,qe,E),te.layout=b5(te.layout,lt.layout,oe,qe,E);const xe=!G||G(oe,lt,qe);if(!xe)continue;const We=new w5(oe,this.z,this.x,this.y,pe);We.layer=te;let bt=s[Re];bt===void 0&&(bt=s[Re]=[]),bt.push({featureIndex:m,feature:We,intersectionZ:xe})}}lookupSymbolFeatures(s,A,d,m,_,x,E,L){const R={};this.loadVTLayers();const z=No(_);for(const G of s)this.loadMatchingFeature(R,d,m,G,z,x,E,L,A);return R}hasLayer(s){for(const A of this.bucketLayerIDs)for(const d of A)if(s===d)return!0;return!1}getId(s,A){var d;let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((d=s.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(m=Number(s.properties.cluster_id))),m}}function b5(c,s,A,d,m){return Gt(c,(_,x)=>{const E=s instanceof Bi?s.get(x):null;return E&&E.evaluate?E.evaluate(A,d,m):E})}function MR(c,s){return s-c}function B5(c,s,A,d,m){const _=[];for(let x=0;x<c.length;x++){const E=c[x];let L;for(let R=0;R<E.length-1;R++){let z=E[R],G=E[R+1];z.x<s&&G.x<s||(z.x<s?z=new N(s,z.y+(s-z.x)/(G.x-z.x)*(G.y-z.y))._round():G.x<s&&(G=new N(s,z.y+(s-z.x)/(G.x-z.x)*(G.y-z.y))._round()),z.y<A&&G.y<A||(z.y<A?z=new N(z.x+(A-z.y)/(G.y-z.y)*(G.x-z.x),A)._round():G.y<A&&(G=new N(z.x+(A-z.y)/(G.y-z.y)*(G.x-z.x),A)._round()),z.x>=d&&G.x>=d||(z.x>=d?z=new N(d,z.y+(d-z.x)/(G.x-z.x)*(G.y-z.y))._round():G.x>=d&&(G=new N(d,z.y+(d-z.x)/(G.x-z.x)*(G.y-z.y))._round()),z.y>=m&&G.y>=m||(z.y>=m?z=new N(z.x+(m-z.y)/(G.y-z.y)*(G.x-z.x),m)._round():G.y>=m&&(G=new N(z.x+(m-z.y)/(G.y-z.y)*(G.x-z.x),m)._round()),L&&z.equals(L[L.length-1])||(L=[z],_.push(L)),L.push(G)))))}}return _}Qe("FeatureIndex",x5,{omit:["rawTileData","sourceLayerCoder"]});class Hu extends N{constructor(s,A,d,m){super(s,A),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new Hu(this.x,this.y,this.angle,this.segment)}}function C5(c,s,A,d,m){if(s.segment===void 0||A===0)return!0;let _=s,x=s.segment+1,E=0;for(;E>-A/2;){if(x--,x<0)return!1;E-=c[x].dist(_),_=c[x]}E+=c[x].dist(c[x+1]),x++;const L=[];let R=0;for(;E<A/2;){const z=c[x],G=c[x+1];if(!G)return!1;let J=c[x-1].angleTo(z)-z.angleTo(G);for(J=Math.abs((J+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:E,angleDelta:J}),R+=J;E-L[0].distance>d;)R-=L.shift().angleDelta;if(R>m)return!1;x++,E+=z.dist(G)}return!0}function S5(c){let s=0;for(let A=0;A<c.length-1;A++)s+=c[A].dist(c[A+1]);return s}function E5(c,s,A){return c?.6*s*A:0}function I5(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function kR(c,s,A,d,m,_){const x=E5(A,m,_),E=I5(A,d)*_;let L=0;const R=S5(c)/2;for(let z=0;z<c.length-1;z++){const G=c[z],J=c[z+1],ne=G.dist(J);if(L+ne>R){const oe=(R-L)/ne,pe=Mn.number(G.x,J.x,oe),Be=Mn.number(G.y,J.y,oe),Re=new Hu(pe,Be,J.angleTo(G),z);return Re._round(),!x||C5(c,Re,E,x,s)?Re:void 0}L+=ne}}function UR(c,s,A,d,m,_,x,E,L){const R=E5(d,_,x),z=I5(d,m),G=z*x,J=c[0].x===0||c[0].x===L||c[0].y===0||c[0].y===L;return s-G<s/4&&(s=G+s/4),F5(c,J?s/2*E%s:(z/2+2*_)*x*E%s,s,R,A,G,J,!1,L)}function F5(c,s,A,d,m,_,x,E,L){const R=_/2,z=S5(c);let G=0,J=s-A,ne=[];for(let oe=0;oe<c.length-1;oe++){const pe=c[oe],Be=c[oe+1],Re=pe.dist(Be),lt=Be.angleTo(pe);for(;J+A<G+Re;){J+=A;const qe=(J-G)/Re,te=Mn.number(pe.x,Be.x,qe),xe=Mn.number(pe.y,Be.y,qe);if(te>=0&&te<L&&xe>=0&&xe<L&&J-R>=0&&J+R<=z){const We=new Hu(te,xe,lt,oe);We._round(),d&&!C5(c,We,_,d,m)||ne.push(We)}}G+=Re}return E||ne.length||x||(ne=F5(c,G/2,A,d,m,_,x,!0,L)),ne}function T5(c,s,A,d){const m=[],_=c.image,x=_.pixelRatio,E=_.paddedRect.w-2,L=_.paddedRect.h-2;let R={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const z=_.stretchX||[[0,E]],G=_.stretchY||[[0,L]],J=(Ut,dr)=>Ut+dr[1]-dr[0],ne=z.reduce(J,0),oe=G.reduce(J,0),pe=E-ne,Be=L-oe;let Re=0,lt=ne,qe=0,te=oe,xe=0,We=pe,bt=0,Ht=Be;if(_.content&&d){const Ut=_.content,dr=Ut[2]-Ut[0],Rr=Ut[3]-Ut[1];(_.textFitWidth||_.textFitHeight)&&(R=i5(c)),Re=s0(z,0,Ut[0]),qe=s0(G,0,Ut[1]),lt=s0(z,Ut[0],Ut[2]),te=s0(G,Ut[1],Ut[3]),xe=Ut[0]-Re,bt=Ut[1]-qe,We=dr-lt,Ht=Rr-te}const Tt=R.x1,Mt=R.y1,Yt=R.x2-Tt,jt=R.y2-Mt,er=(Ut,dr,Rr,kr)=>{const _r=o0(Ut.stretch-Re,lt,Yt,Tt),bn=a0(Ut.fixed-xe,We,Ut.stretch,ne),Ui=o0(dr.stretch-qe,te,jt,Mt),Bs=a0(dr.fixed-bt,Ht,dr.stretch,oe),mo=o0(Rr.stretch-Re,lt,Yt,Tt),sl=a0(Rr.fixed-xe,We,Rr.stretch,ne),da=o0(kr.stretch-qe,te,jt,Mt),to=a0(kr.fixed-bt,Ht,kr.stretch,oe),Si=new N(_r,Ui),Qs=new N(mo,Ui),ro=new N(mo,da),no=new N(_r,da),Ho=new N(bn/x,Bs/x),ol=new N(sl/x,to/x),Os=s*Math.PI/180;if(Os){const zs=Math.sin(Os),Hs=Math.cos(Os),ps=[Hs,-zs,zs,Hs];Si._matMult(ps),Qs._matMult(ps),no._matMult(ps),ro._matMult(ps)}const fa=Ut.stretch+Ut.fixed,Cs=dr.stretch+dr.fixed;return{tl:Si,tr:Qs,bl:no,br:ro,tex:{x:_.paddedRect.x+1+fa,y:_.paddedRect.y+1+Cs,w:Rr.stretch+Rr.fixed-fa,h:kr.stretch+kr.fixed-Cs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ho,pixelOffsetBR:ol,minFontScaleX:We/x/Yt,minFontScaleY:Ht/x/jt,isSDF:A}};if(d&&(_.stretchX||_.stretchY)){const Ut=P5(z,pe,ne),dr=P5(G,Be,oe);for(let Rr=0;Rr<Ut.length-1;Rr++){const kr=Ut[Rr],_r=Ut[Rr+1];for(let bn=0;bn<dr.length-1;bn++)m.push(er(kr,dr[bn],_r,dr[bn+1]))}}else m.push(er({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:L+1}));return m}function s0(c,s,A){let d=0;for(const m of c)d+=Math.max(s,Math.min(A,m[1]))-Math.max(s,Math.min(A,m[0]));return d}function P5(c,s,A){const d=[{fixed:-1,stretch:0}];for(const[m,_]of c){const x=d[d.length-1];d.push({fixed:m-x.stretch,stretch:x.stretch}),d.push({fixed:m-x.stretch,stretch:x.stretch+(_-m)})}return d.push({fixed:s+1,stretch:A}),d}function o0(c,s,A,d){return c/s*A+d}function a0(c,s,A,d){return c-s*A/d}Qe("Anchor",Hu);class l0{constructor(s,A,d,m,_,x,E,L,R,z){var G;if(this.boxStartIndex=s.length,R){let J=x.top,ne=x.bottom;const oe=x.collisionPadding;oe&&(J-=oe[1],ne+=oe[3]);let pe=ne-J;pe>0&&(pe=Math.max(10,pe),this.circleDiameter=pe)}else{const J=!((G=x.image)===null||G===void 0)&&G.content&&(x.image.textFitWidth||x.image.textFitHeight)?i5(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};J.y1=J.y1*E-L[0],J.y2=J.y2*E+L[2],J.x1=J.x1*E-L[3],J.x2=J.x2*E+L[1];const ne=x.collisionPadding;if(ne&&(J.x1-=ne[0]*E,J.y1-=ne[1]*E,J.x2+=ne[2]*E,J.y2+=ne[3]*E),z){const oe=new N(J.x1,J.y1),pe=new N(J.x2,J.y1),Be=new N(J.x1,J.y2),Re=new N(J.x2,J.y2),lt=z*Math.PI/180;oe._rotate(lt),pe._rotate(lt),Be._rotate(lt),Re._rotate(lt),J.x1=Math.min(oe.x,pe.x,Be.x,Re.x),J.x2=Math.max(oe.x,pe.x,Be.x,Re.x),J.y1=Math.min(oe.y,pe.y,Be.y,Re.y),J.y2=Math.max(oe.y,pe.y,Be.y,Re.y)}s.emplaceBack(A.x,A.y,J.x1,J.y1,J.x2,J.y2,d,m,_)}this.boxEndIndex=s.length}}class RR{constructor(s=[],A=(d,m)=>d<m?-1:d>m?1:0){if(this.data=s,this.length=this.data.length,this.compare=A,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:A,compare:d}=this,m=A[s];for(;s>0;){const _=s-1>>1,x=A[_];if(d(m,x)>=0)break;A[s]=x,s=_}A[s]=m}_down(s){const{data:A,compare:d}=this,m=this.length>>1,_=A[s];for(;s<m;){let x=1+(s<<1);const E=x+1;if(E<this.length&&d(A[E],A[x])<0&&(x=E),d(A[x],_)>=0)break;A[s]=A[x],s=x}A[s]=_}}function NR(c,s=1,A=!1){const d=nd.fromPoints(c[0]),m=Math.min(d.width(),d.height());let _=m/2;const x=new RR([],DR),{minX:E,minY:L,maxX:R,maxY:z}=d;if(m===0)return new N(E,L);for(let ne=E;ne<R;ne+=m)for(let oe=L;oe<z;oe+=m)x.push(new cf(ne+_,oe+_,_,c));let G=function(ne){let oe=0,pe=0,Be=0;const Re=ne[0];for(let lt=0,qe=Re.length,te=qe-1;lt<qe;te=lt++){const xe=Re[lt],We=Re[te],bt=xe.x*We.y-We.x*xe.y;pe+=(xe.x+We.x)*bt,Be+=(xe.y+We.y)*bt,oe+=3*bt}return new cf(pe/oe,Be/oe,0,ne)}(c),J=x.length;for(;x.length;){const ne=x.pop();(ne.d>G.d||!G.d)&&(G=ne,A&&console.log("found best %d after %d probes",Math.round(1e4*ne.d)/1e4,J)),ne.max-G.d<=s||(_=ne.h/2,x.push(new cf(ne.p.x-_,ne.p.y-_,_,c)),x.push(new cf(ne.p.x+_,ne.p.y-_,_,c)),x.push(new cf(ne.p.x-_,ne.p.y+_,_,c)),x.push(new cf(ne.p.x+_,ne.p.y+_,_,c)),J+=4)}return A&&(console.log(`num probes: ${J}`),console.log(`best distance: ${G.d}`)),G.p}function DR(c,s){return s.max-c.max}function cf(c,s,A,d){this.p=new N(c,s),this.h=A,this.d=function(m,_){let x=!1,E=1/0;for(let L=0;L<_.length;L++){const R=_[L];for(let z=0,G=R.length,J=G-1;z<G;J=z++){const ne=R[z],oe=R[J];ne.y>m.y!=oe.y>m.y&&m.x<(oe.x-ne.x)*(m.y-ne.y)/(oe.y-ne.y)+ne.x&&(x=!x),E=Math.min(E,cC(m,ne,oe))}}return(x?1:-1)*Math.sqrt(E)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var po;h.aD=void 0,(po=h.aD||(h.aD={}))[po.center=1]="center",po[po.left=2]="left",po[po.right=3]="right",po[po.top=4]="top",po[po.bottom=5]="bottom",po[po["top-left"]=6]="top-left",po[po["top-right"]=7]="top-right",po[po["bottom-left"]=8]="bottom-left",po[po["bottom-right"]=9]="bottom-right";const B_=Number.POSITIVE_INFINITY;function L5(c,s){return s[1]!==B_?function(A,d,m){let _=0,x=0;switch(d=Math.abs(d),m=Math.abs(m),A){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(A){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,x]}(c,s[0],s[1]):function(A,d){let m=0,_=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(A){case"top-right":case"top-left":_=x-7;break;case"bottom-right":case"bottom-left":_=7-x;break;case"bottom":_=7-d;break;case"top":_=d-7}switch(A){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=d;break;case"right":m=-d}return[m,_]}(c,s[0])}function M5(c,s,A){var d;const m=c.layout,_=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(s,{},A);if(_){const E=_.values,L=[];for(let R=0;R<E.length;R+=2){const z=L[R]=E[R],G=E[R+1].map(J=>J*Ds);z.startsWith("top")?G[1]-=7:z.startsWith("bottom")&&(G[1]+=7),L[R+1]=G}return new pn(L)}const x=m.get("text-variable-anchor");if(x){let E;E=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(s,{},A)*Ds,B_]:m.get("text-offset").evaluate(s,{},A).map(R=>R*Ds);const L=[];for(const R of x)L.push(R,L5(R,E));return new pn(L)}return null}function C_(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function QR(c,s,A,d,m,_,x,E,L,R,z,G){let J=_.textMaxSize.evaluate(s,{});J===void 0&&(J=x);const ne=c.layers[0].layout,oe=ne.get("icon-offset").evaluate(s,{},z),pe=U5(A.horizontal),Be=x/24,Re=c.tilePixelRatio*Be,lt=c.tilePixelRatio*J/24,qe=c.tilePixelRatio*E,te=c.tilePixelRatio*ne.get("symbol-spacing"),xe=ne.get("text-padding")*c.tilePixelRatio,We=function(Rr,kr,_r,bn=1){const Ui=Rr.get("icon-padding").evaluate(kr,{},_r),Bs=Ui&&Ui.values;return[Bs[0]*bn,Bs[1]*bn,Bs[2]*bn,Bs[3]*bn]}(ne,s,z,c.tilePixelRatio),bt=ne.get("text-max-angle")/180*Math.PI,Ht=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",Tt=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",Mt=ne.get("symbol-placement"),Yt=te/2,jt=ne.get("icon-text-fit");let er;d&&jt!=="none"&&(c.allowVerticalPlacement&&A.vertical&&(er=s5(d,A.vertical,jt,ne.get("icon-text-fit-padding"),oe,Be)),pe&&(d=s5(d,pe,jt,ne.get("icon-text-fit-padding"),oe,Be)));const Ut=z?G.line.getGranularityForZoomLevel(z.z):1,dr=(Rr,kr)=>{kr.x<0||kr.x>=ie||kr.y<0||kr.y>=ie||function(_r,bn,Ui,Bs,mo,sl,da,to,Si,Qs,ro,no,Ho,ol,Os,fa,Cs,zs,Hs,ps,hi,pA,uf,mA,HR){const hf=_r.addToLineVertexArray(bn,Ui);let id,df,ff,pf,Q5=0,O5=0,z5=0,H5=0,M_=-1,k_=-1;const tu={};let j5=zo("");if(_r.allowVerticalPlacement&&Bs.vertical){const bo=to.layout.get("text-rotate").evaluate(hi,{},mA)+90;ff=new l0(Si,bn,Qs,ro,no,Bs.vertical,Ho,ol,Os,bo),da&&(pf=new l0(Si,bn,Qs,ro,no,da,Cs,zs,Os,bo))}if(mo){const bo=to.layout.get("icon-rotate").evaluate(hi,{}),al=to.layout.get("icon-text-fit")!=="none",sd=T5(mo,bo,uf,al),yA=da?T5(da,bo,uf,al):void 0;df=new l0(Si,bn,Qs,ro,no,mo,Cs,zs,!1,bo),Q5=4*sd.length;const od=_r.iconSizeData;let lc=null;od.kind==="source"?(lc=[eu*to.layout.get("icon-size").evaluate(hi,{})],lc[0]>Ou&&wr(`${_r.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):od.kind==="composite"&&(lc=[eu*pA.compositeIconSizes[0].evaluate(hi,{},mA),eu*pA.compositeIconSizes[1].evaluate(hi,{},mA)],(lc[0]>Ou||lc[1]>Ou)&&wr(`${_r.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),_r.addSymbols(_r.icon,sd,lc,ps,Hs,hi,h.an.none,bn,hf.lineStartIndex,hf.lineLength,-1,mA),M_=_r.icon.placedSymbolArray.length-1,yA&&(O5=4*yA.length,_r.addSymbols(_r.icon,yA,lc,ps,Hs,hi,h.an.vertical,bn,hf.lineStartIndex,hf.lineLength,-1,mA),k_=_r.icon.placedSymbolArray.length-1)}const V5=Object.keys(Bs.horizontal);for(const bo of V5){const al=Bs.horizontal[bo];if(!id){j5=zo(al.text);const yA=to.layout.get("text-rotate").evaluate(hi,{},mA);id=new l0(Si,bn,Qs,ro,no,al,Ho,ol,Os,yA)}const sd=al.positionedLines.length===1;if(z5+=k5(_r,bn,al,sl,to,Os,hi,fa,hf,Bs.vertical?h.an.horizontal:h.an.horizontalOnly,sd?V5:[bo],tu,M_,pA,mA),sd)break}Bs.vertical&&(H5+=k5(_r,bn,Bs.vertical,sl,to,Os,hi,fa,hf,h.an.vertical,["vertical"],tu,k_,pA,mA));const jR=id?id.boxStartIndex:_r.collisionBoxArray.length,VR=id?id.boxEndIndex:_r.collisionBoxArray.length,KR=ff?ff.boxStartIndex:_r.collisionBoxArray.length,GR=ff?ff.boxEndIndex:_r.collisionBoxArray.length,$R=df?df.boxStartIndex:_r.collisionBoxArray.length,qR=df?df.boxEndIndex:_r.collisionBoxArray.length,WR=pf?pf.boxStartIndex:_r.collisionBoxArray.length,ZR=pf?pf.boxEndIndex:_r.collisionBoxArray.length;let gA=-1;const c0=(bo,al)=>bo&&bo.circleDiameter?Math.max(bo.circleDiameter,al):al;gA=c0(id,gA),gA=c0(ff,gA),gA=c0(df,gA),gA=c0(pf,gA);const K5=gA>-1?1:0;K5&&(gA*=HR/Ds),_r.glyphOffsetArray.length>=lf.MAX_GLYPHS&&wr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),hi.sortKey!==void 0&&_r.addToSortKeyRanges(_r.symbolInstances.length,hi.sortKey);const XR=M5(to,hi,mA),[YR,JR]=function(bo,al){const sd=bo.length,yA=al==null?void 0:al.values;if((yA==null?void 0:yA.length)>0)for(let od=0;od<yA.length;od+=2){const lc=yA[od+1];bo.emplaceBack(h.aD[yA[od]],lc[0],lc[1])}return[sd,bo.length]}(_r.textAnchorOffsets,XR);_r.symbolInstances.emplaceBack(bn.x,bn.y,tu.right>=0?tu.right:-1,tu.center>=0?tu.center:-1,tu.left>=0?tu.left:-1,tu.vertical||-1,M_,k_,j5,jR,VR,KR,GR,$R,qR,WR,ZR,Qs,z5,H5,Q5,O5,K5,0,Ho,gA,YR,JR)}(c,kr,Rr,A,d,m,er,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,Re,[xe,xe,xe,xe],Ht,L,qe,We,Tt,oe,s,_,R,z,x)};if(Mt==="line")for(const Rr of B5(s.geometry,0,0,ie,ie)){const kr=rd(Rr,Ut),_r=UR(kr,te,bt,A.vertical||pe,d,24,lt,c.overscaling,ie);for(const bn of _r)pe&&OR(c,pe.text,Yt,bn)||dr(kr,bn)}else if(Mt==="line-center"){for(const Rr of s.geometry)if(Rr.length>1){const kr=rd(Rr,Ut),_r=kR(kr,bt,A.vertical||pe,d,24,lt);_r&&dr(kr,_r)}}else if(s.type==="Polygon")for(const Rr of wo(s.geometry,0)){const kr=NR(Rr,16);dr(rd(Rr[0],Ut,!0),new Hu(kr.x,kr.y,0))}else if(s.type==="LineString")for(const Rr of s.geometry){const kr=rd(Rr,Ut);dr(kr,new Hu(kr[0].x,kr[0].y,0))}else if(s.type==="Point")for(const Rr of s.geometry)for(const kr of Rr)dr([kr],new Hu(kr.x,kr.y,0))}function k5(c,s,A,d,m,_,x,E,L,R,z,G,J,ne,oe){const pe=function(lt,qe,te,xe,We,bt,Ht,Tt){const Mt=xe.layout.get("text-rotate").evaluate(bt,{})*Math.PI/180,Yt=[];for(const jt of qe.positionedLines)for(const er of jt.positionedGlyphs){if(!er.rect)continue;const Ut=er.rect||{};let dr=4,Rr=!0,kr=1,_r=0;const bn=(We||Tt)&&er.vertical,Ui=er.metrics.advance*er.scale/2;if(Tt&&qe.verticalizable&&(_r=jt.lineOffset/2-(er.imageName?-(Ds-er.metrics.width*er.scale)/2:(er.scale-1)*Ds)),er.imageName){const zs=Ht[er.imageName];Rr=zs.sdf,kr=zs.pixelRatio,dr=1/kr}const Bs=We?[er.x+Ui,er.y]:[0,0];let mo=We?[0,0]:[er.x+Ui+te[0],er.y+te[1]-_r],sl=[0,0];bn&&(sl=mo,mo=[0,0]);const da=er.metrics.isDoubleResolution?2:1,to=(er.metrics.left-dr)*er.scale-Ui+mo[0],Si=(-er.metrics.top-dr)*er.scale+mo[1],Qs=to+Ut.w/da*er.scale/kr,ro=Si+Ut.h/da*er.scale/kr,no=new N(to,Si),Ho=new N(Qs,Si),ol=new N(to,ro),Os=new N(Qs,ro);if(bn){const zs=new N(-Ui,Ui- -17),Hs=-Math.PI/2,ps=12-Ui,hi=new N(22-ps,-(er.imageName?ps:0)),pA=new N(...sl);no._rotateAround(Hs,zs)._add(hi)._add(pA),Ho._rotateAround(Hs,zs)._add(hi)._add(pA),ol._rotateAround(Hs,zs)._add(hi)._add(pA),Os._rotateAround(Hs,zs)._add(hi)._add(pA)}if(Mt){const zs=Math.sin(Mt),Hs=Math.cos(Mt),ps=[Hs,-zs,zs,Hs];no._matMult(ps),Ho._matMult(ps),ol._matMult(ps),Os._matMult(ps)}const fa=new N(0,0),Cs=new N(0,0);Yt.push({tl:no,tr:Ho,bl:ol,br:Os,tex:Ut,writingMode:qe.writingMode,glyphOffset:Bs,sectionIndex:er.sectionIndex,isSDF:Rr,pixelOffsetTL:fa,pixelOffsetBR:Cs,minFontScaleX:0,minFontScaleY:0})}return Yt}(0,A,E,m,_,x,d,c.allowVerticalPlacement),Be=c.textSizeData;let Re=null;Be.kind==="source"?(Re=[eu*m.layout.get("text-size").evaluate(x,{})],Re[0]>Ou&&wr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Be.kind==="composite"&&(Re=[eu*ne.compositeTextSizes[0].evaluate(x,{},oe),eu*ne.compositeTextSizes[1].evaluate(x,{},oe)],(Re[0]>Ou||Re[1]>Ou)&&wr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,pe,Re,E,_,x,R,s,L.lineStartIndex,L.lineLength,J,oe);for(const lt of z)G[lt]=c.text.placedSymbolArray.length-1;return 4*pe.length}function U5(c){for(const s in c)return c[s];return null}function OR(c,s,A,d){const m=c.compareText;if(s in m){const _=m[s];for(let x=_.length-1;x>=0;x--)if(d.dist(_[x])<A)return!0}else m[s]=[];return m[s].push(d),!1}const R5=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class S_{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,d]=new Uint8Array(s,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const _=R5[15&d];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(s,2,1),[E]=new Uint32Array(s,4,1);return new S_(E,x,_,s)}constructor(s,A=64,d=Float64Array,m){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=d,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const _=R5.indexOf(this.ArrayType),x=2*s*this.ArrayType.BYTES_PER_ELEMENT,E=s*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-E%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+E+L,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+x+E+L),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+E+L,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=s)}add(s,A){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=s,this.coords[this._pos++]=A,d}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return E_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,A,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:E}=this,L=[0,_.length-1,0],R=[];for(;L.length;){const z=L.pop()||0,G=L.pop()||0,J=L.pop()||0;if(G-J<=E){for(let Be=J;Be<=G;Be++){const Re=x[2*Be],lt=x[2*Be+1];Re>=s&&Re<=d&&lt>=A&&lt<=m&&R.push(_[Be])}continue}const ne=J+G>>1,oe=x[2*ne],pe=x[2*ne+1];oe>=s&&oe<=d&&pe>=A&&pe<=m&&R.push(_[ne]),(z===0?s<=oe:A<=pe)&&(L.push(J),L.push(ne-1),L.push(1-z)),(z===0?d>=oe:m>=pe)&&(L.push(ne+1),L.push(G),L.push(1-z))}return R}within(s,A,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:x}=this,E=[0,m.length-1,0],L=[],R=d*d;for(;E.length;){const z=E.pop()||0,G=E.pop()||0,J=E.pop()||0;if(G-J<=x){for(let Be=J;Be<=G;Be++)D5(_[2*Be],_[2*Be+1],s,A)<=R&&L.push(m[Be]);continue}const ne=J+G>>1,oe=_[2*ne],pe=_[2*ne+1];D5(oe,pe,s,A)<=R&&L.push(m[ne]),(z===0?s-d<=oe:A-d<=pe)&&(E.push(J),E.push(ne-1),E.push(1-z)),(z===0?s+d>=oe:A+d>=pe)&&(E.push(ne+1),E.push(G),E.push(1-z))}return L}}function E_(c,s,A,d,m,_){if(m-d<=A)return;const x=d+m>>1;N5(c,s,x,d,m,_),E_(c,s,A,d,x-1,1-_),E_(c,s,A,x+1,m,1-_)}function N5(c,s,A,d,m,_){for(;m>d;){if(m-d>600){const R=m-d+1,z=A-d+1,G=Math.log(R),J=.5*Math.exp(2*G/3),ne=.5*Math.sqrt(G*J*(R-J)/R)*(z-R/2<0?-1:1);N5(c,s,A,Math.max(d,Math.floor(A-z*J/R+ne)),Math.min(m,Math.floor(A+(R-z)*J/R+ne)),_)}const x=s[2*A+_];let E=d,L=m;for(om(c,s,d,A),s[2*m+_]>x&&om(c,s,d,m);E<L;){for(om(c,s,E,L),E++,L--;s[2*E+_]<x;)E++;for(;s[2*L+_]>x;)L--}s[2*d+_]===x?om(c,s,d,L):(L++,om(c,s,L,m)),L<=A&&(d=L+1),A<=L&&(m=L-1)}}function om(c,s,A,d){I_(c,A,d),I_(s,2*A,2*d),I_(s,2*A+1,2*d+1)}function I_(c,s,A){const d=c[s];c[s]=c[A],c[A]=d}function D5(c,s,A,d){const m=c-A,_=s-d;return m*m+_*_}var F_;h.cw=void 0,(F_=h.cw||(h.cw={})).create="create",F_.load="load",F_.fullLoad="fullLoad";let A0=null,am=[];const T_=1e3/60,P_="loadTime",L_="fullLoadTime",zR={mark(c){performance.mark(c)},frame(c){const s=c;A0!=null&&am.push(s-A0),A0=s},clearMetrics(){A0=null,am=[],performance.clearMeasures(P_),performance.clearMeasures(L_);for(const c in h.cw)performance.clearMarks(h.cw[c])},getPerformanceMetrics(){performance.measure(P_,h.cw.create,h.cw.load),performance.measure(L_,h.cw.create,h.cw.fullLoad);const c=performance.getEntriesByName(P_)[0].duration,s=performance.getEntriesByName(L_)[0].duration,A=am.length,d=1/(am.reduce((_,x)=>_+x,0)/A/1e3),m=am.filter(_=>_>T_).reduce((_,x)=>_+(x-T_)/T_,0);return{loadTime:c,fullLoadTime:s,fps:d,percentDroppedFrames:m/(A+m)*100,totalFrames:A}}};h.$=ie,h.A=fe,h.B=function([c,s,A]){return s+=90,s*=Math.PI/180,A*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(A),y:c*Math.sin(s)*Math.sin(A),z:c*Math.cos(A)}},h.C=Mn,h.D=Zt,h.E=Et,h.F=vr,h.G=ue,h.H=function(c){if(xr==null){const s=c.navigator?c.navigator.userAgent:null;xr=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return xr},h.I=d_,h.J=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new PR(()=>this.process()),this.subscription=Sr(this.target,"message",A=>this.receive(A),!1),this.globalScope=Vt(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((A,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=s?Sr(s.signal,"abort",()=>{_==null||_.unsubscribe(),delete this.resolveRejects[m];const L={id:m,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(L)},LR):null;this.resolveRejects[m]={resolve:L=>{_==null||_.unsubscribe(),A(L)},reject:L=>{_==null||_.unsubscribe(),d(L)}};const x=[],E=Object.assign(Object.assign({},c),{id:m,sourceMapId:this.mapId,origin:location.origin,data:yt(c.data,x)});this.target.postMessage(E,{transfer:x})})}receive(c){const s=c.data,A=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[A];const d=this.abortControllers[A];return delete this.abortControllers[A],void(d&&d.abort())}if(Vt(self)||s.mustQueue)return this.tasks[A]=s,this.taskQueue.push(A),void this.invoker.trigger();this.processTask(A,s)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return o(this,void 0,void 0,function*(){if(s.type==="<response>"){const m=this.resolveRejects[c];return delete this.resolveRejects[c],m?void(s.error?m.reject(Rt(s.error)):m.resolve(Rt(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const A=Rt(s.data),d=new AbortController;this.abortControllers[c]=d;try{const m=yield this.messageHandlers[s.type](s.sourceMapId,A,d);this.completeTask(c,null,m)}catch(m){this.completeTask(c,m)}})}completeTask(c,s,A){const d=[];delete this.abortControllers[c];const m={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?yt(s):null,data:yt(A,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.K=ve,h.L=function(){var c=new fe(16);return fe!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},h.M=function(c,s,A){var d,m,_,x,E,L,R,z,G,J,ne,oe,pe=A[0],Be=A[1],Re=A[2];return s===c?(c[12]=s[0]*pe+s[4]*Be+s[8]*Re+s[12],c[13]=s[1]*pe+s[5]*Be+s[9]*Re+s[13],c[14]=s[2]*pe+s[6]*Be+s[10]*Re+s[14],c[15]=s[3]*pe+s[7]*Be+s[11]*Re+s[15]):(m=s[1],_=s[2],x=s[3],E=s[4],L=s[5],R=s[6],z=s[7],G=s[8],J=s[9],ne=s[10],oe=s[11],c[0]=d=s[0],c[1]=m,c[2]=_,c[3]=x,c[4]=E,c[5]=L,c[6]=R,c[7]=z,c[8]=G,c[9]=J,c[10]=ne,c[11]=oe,c[12]=d*pe+E*Be+G*Re+s[12],c[13]=m*pe+L*Be+J*Re+s[13],c[14]=_*pe+R*Be+ne*Re+s[14],c[15]=x*pe+z*Be+oe*Re+s[15]),c},h.N=function(c,s,A){var d=A[0],m=A[1],_=A[2];return c[0]=s[0]*d,c[1]=s[1]*d,c[2]=s[2]*d,c[3]=s[3]*d,c[4]=s[4]*m,c[5]=s[5]*m,c[6]=s[6]*m,c[7]=s[7]*m,c[8]=s[8]*_,c[9]=s[9]*_,c[10]=s[10]*_,c[11]=s[11]*_,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},h.O=function(c,s,A){var d=s[0],m=s[1],_=s[2],x=s[3],E=s[4],L=s[5],R=s[6],z=s[7],G=s[8],J=s[9],ne=s[10],oe=s[11],pe=s[12],Be=s[13],Re=s[14],lt=s[15],qe=A[0],te=A[1],xe=A[2],We=A[3];return c[0]=qe*d+te*E+xe*G+We*pe,c[1]=qe*m+te*L+xe*J+We*Be,c[2]=qe*_+te*R+xe*ne+We*Re,c[3]=qe*x+te*z+xe*oe+We*lt,c[4]=(qe=A[4])*d+(te=A[5])*E+(xe=A[6])*G+(We=A[7])*pe,c[5]=qe*m+te*L+xe*J+We*Be,c[6]=qe*_+te*R+xe*ne+We*Re,c[7]=qe*x+te*z+xe*oe+We*lt,c[8]=(qe=A[8])*d+(te=A[9])*E+(xe=A[10])*G+(We=A[11])*pe,c[9]=qe*m+te*L+xe*J+We*Be,c[10]=qe*_+te*R+xe*ne+We*Re,c[11]=qe*x+te*z+xe*oe+We*lt,c[12]=(qe=A[12])*d+(te=A[13])*E+(xe=A[14])*G+(We=A[15])*pe,c[13]=qe*m+te*L+xe*J+We*Be,c[14]=qe*_+te*R+xe*ne+We*Re,c[15]=qe*x+te*z+xe*oe+We*lt,c},h.P=N,h.Q=function(c,s){const A={};for(let d=0;d<s.length;d++){const m=s[d];m in c&&(A[m]=c[m])}return A},h.R=ha,h.S=zu,h.T=Y1,h.U=p5,h.V=f5,h.W=K,h.X=Z,h.Y=mr,h.Z=il,h._=o,h.a=le,h.a$=function(c,s,A){return c[0]=s[0]*A,c[1]=s[1]*A,c[2]=s[2]*A,c[3]=s[3]*A,c},h.a0=sm,h.a1=nd,h.a2=25,h.a3=b_,h.a4=c=>{const s=window.document.createElement("video");return s.muted=!0,new Promise(A=>{s.onloadstart=()=>{A(s)};for(const d of c){const m=window.document.createElement("source");At(d)||(s.crossOrigin="Anonymous"),m.src=d,s.appendChild(m)}})},h.a5=Xt,h.a6=function(){return $t++},h.a7=Se,h.a8=lf,h.a9=No,h.aA=Ds,h.aB=Ee,h.aC=function(c,s,A,d,m=!1){if(!A[0]&&!A[1])return[0,0];const _=m?d==="map"?-c.bearingInRadians:0:d==="viewport"?c.bearingInRadians:0;if(_){const x=Math.sin(_),E=Math.cos(_);A=[A[0]*E-A[1]*x,A[0]*x+A[1]*E]}return[m?A[0]:Ee(s,A[0],c.zoom),m?A[1]:Ee(s,A[1],c.zoom)]},h.aE=m_,h.aF=C_,h.aG=p_,h.aH=S_,h.aI=wn,h.aJ=Yg,h.aK=vt,h.aL=vn,h.aM=En,h.aN=Lt,h.aO=jr,h.aP=g5,h.aQ=Ie,h.aR=he,h.aS=function(c){var s=new fe(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},h.aT=function(c,s,A){return c[0]=s[0]-A[0],c[1]=s[1]-A[1],c[2]=s[2]-A[2],c},h.aU=function(c,s){var A=s[0],d=s[1],m=s[2],_=A*A+d*d+m*m;return _>0&&(_=1/Math.sqrt(_)),c[0]=s[0]*_,c[1]=s[1]*_,c[2]=s[2]*_,c},h.aV=we,h.aW=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},h.aX=function(c,s,A){return c[0]=s[0]*A[0],c[1]=s[1]*A[1],c[2]=s[2]*A[2],c[3]=s[3]*A[3],c},h.aY=Le,h.aZ=function(c,s,A){const d=s[0]*A[0]+s[1]*A[1]+s[2]*A[2];return d===0?null:(-(c[0]*A[0]+c[1]*A[1]+c[2]*A[2])-A[3])/d},h.a_=rt,h.aa=ed,h.ab=w5,h.ac=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,d,m,_)=>{const x=m||_;return s[d]=!x||x.toLowerCase(),""}),s["max-age"]){const A=parseInt(s["max-age"],10);isNaN(A)?delete s["max-age"]:s["max-age"]=A}return s},h.ad=Jr,h.ae=function(c){return Math.pow(2,c)},h.af=me,h.ag=dt,h.ah=85.051129,h.ai=m5,h.aj=function(c){return Math.log(c)/Math.LN2},h.ak=function(c){var s=c[0],A=c[1];return s*s+A*A},h.al=function(c,s){const A=[];for(const d in c)d in s||A.push(d);return A},h.am=function(c,s){let A=0,d=0;if(c.kind==="constant")d=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:x}=c,E=m?dt(tn.interpolationFactor(m,s,_,x),0,1):0;c.kind==="camera"?d=Mn.number(c.minSize,c.maxSize,E):A=E}return{uSizeT:A,uSize:d}},h.ao=function(c,{uSize:s,uSizeT:A},{lowerSize:d,upperSize:m}){return c.kind==="source"?d/eu:c.kind==="composite"?Mn.number(d/eu,m/eu,A):s},h.ap=function(c,s){var A=s[0],d=s[1],m=s[2],_=s[3],x=s[4],E=s[5],L=s[6],R=s[7],z=s[8],G=s[9],J=s[10],ne=s[11],oe=s[12],pe=s[13],Be=s[14],Re=s[15],lt=A*E-d*x,qe=A*L-m*x,te=A*R-_*x,xe=d*L-m*E,We=d*R-_*E,bt=m*R-_*L,Ht=z*pe-G*oe,Tt=z*Be-J*oe,Mt=z*Re-ne*oe,Yt=G*Be-J*pe,jt=G*Re-ne*pe,er=J*Re-ne*Be,Ut=lt*er-qe*jt+te*Yt+xe*Mt-We*Tt+bt*Ht;return Ut?(c[0]=(E*er-L*jt+R*Yt)*(Ut=1/Ut),c[1]=(m*jt-d*er-_*Yt)*Ut,c[2]=(pe*bt-Be*We+Re*xe)*Ut,c[3]=(J*We-G*bt-ne*xe)*Ut,c[4]=(L*Mt-x*er-R*Tt)*Ut,c[5]=(A*er-m*Mt+_*Tt)*Ut,c[6]=(Be*te-oe*bt-Re*qe)*Ut,c[7]=(z*bt-J*te+ne*qe)*Ut,c[8]=(x*jt-E*Mt+R*Ht)*Ut,c[9]=(d*Mt-A*jt-_*Ht)*Ut,c[10]=(oe*We-pe*te+Re*lt)*Ut,c[11]=(G*te-z*We-ne*lt)*Ut,c[12]=(E*Tt-x*Yt-L*Ht)*Ut,c[13]=(A*Yt-d*Tt+m*Ht)*Ut,c[14]=(pe*qe-oe*xe-Be*lt)*Ut,c[15]=(z*xe-G*qe+J*lt)*Ut,c):null},h.aq=mt,h.ar=function(c){return Math.hypot(c[0],c[1])},h.as=function(c){return c[0]=0,c[1]=0,c},h.at=function(c,s,A){return c[0]=s[0]*A,c[1]=s[1]*A,c},h.au=g_,h.av=ct,h.aw=function(c,s,A,d){const m=s.y-c.y,_=s.x-c.x,x=d.y-A.y,E=d.x-A.x,L=x*_-E*m;if(L===0)return null;const R=(E*(c.y-A.y)-x*(c.x-A.x))/L;return new N(c.x+R*_,c.y+R*m)},h.ax=B5,h.ay=lC,h.az=function(c){let s=1/0,A=1/0,d=-1/0,m=-1/0;for(const _ of c)s=Math.min(s,_.x),A=Math.min(A,_.y),d=Math.max(d,_.x),m=Math.max(m,_.y);return[s,A,d,m]},h.b=ar,h.b$=lR,h.b0=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]},h.b1=v5,h.b2=Af,h.b3=function(c,s,A,d,m){var _,x=1/Math.tan(s/2);return c[0]=x/A,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=x,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,m!=null&&m!==1/0?(c[10]=(m+d)*(_=1/(d-m)),c[14]=2*m*d*_):(c[10]=-1,c[14]=-2*d),c},h.b4=function(c){var s=new fe(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},h.b5=function(c,s,A){var d=Math.sin(A),m=Math.cos(A),_=s[0],x=s[1],E=s[2],L=s[3],R=s[4],z=s[5],G=s[6],J=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=_*m+R*d,c[1]=x*m+z*d,c[2]=E*m+G*d,c[3]=L*m+J*d,c[4]=R*m-_*d,c[5]=z*m-x*d,c[6]=G*m-E*d,c[7]=J*m-L*d,c},h.b6=function(c,s,A){var d=Math.sin(A),m=Math.cos(A),_=s[4],x=s[5],E=s[6],L=s[7],R=s[8],z=s[9],G=s[10],J=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=_*m+R*d,c[5]=x*m+z*d,c[6]=E*m+G*d,c[7]=L*m+J*d,c[8]=R*m-_*d,c[9]=z*m-x*d,c[10]=G*m-E*d,c[11]=J*m-L*d,c},h.b7=function(){const c=new Float32Array(16);return me(c),c},h.b8=function(){const c=new Float64Array(16);return me(c),c},h.b9=function(){return new Float64Array(16)},h.bA=function(c){return c[0]=0,c[1]=0,c[2]=0,c},h.bB=function(c,s,A,d){const m=Math.sqrt(c*c+s*s),_=Math.sqrt(A*A+d*d);c/=m,s/=m,A/=_,d/=_;const x=Math.acos(c*A+s*d);return-s*A+c*d>0?x:-x},h.bC=function(c,s){const A=Me(c,2*Math.PI),d=Me(s,2*Math.PI);return Math.min(Math.abs(A-d),Math.abs(A-d+2*Math.PI),Math.abs(A-d-2*Math.PI))},h.bD=function(){const c={},s=ze.$version;for(const A in ze.$root){const d=ze.$root[A];if(d.required){let m=null;m=A==="version"?s:d.type==="array"?[]:{},m!=null&&(c[A]=m)}}return c},h.bE=Bt,h.bF=Ge,h.bG=function c(s,A){if(Array.isArray(s)){if(!Array.isArray(A)||s.length!==A.length)return!1;for(let d=0;d<s.length;d++)if(!c(s[d],A[d]))return!1;return!0}if(typeof s=="object"&&s!==null&&A!==null){if(typeof A!="object"||Object.keys(s).length!==Object.keys(A).length)return!1;for(const d in s)if(!c(s[d],A[d]))return!1;return!0}return s===A},h.bH=function(c){c=c.slice();const s=Object.create(null);for(let A=0;A<c.length;A++)s[c[A].id]=c[A];for(let A=0;A<c.length;A++)"ref"in c[A]&&(c[A]=or(c[A],s[c[A].ref]));return c},h.bI=function(c){if(c.type==="custom")return new TR(c);switch(c.type){case"background":return new ER(c);case"circle":return new w6(c);case"color-relief":return new E6(c);case"fill":return new H6(c);case"fill-extrusion":return new Z6(c);case"heatmap":return new b6(c);case"hillshade":return new C6(c);case"line":return new iR(c);case"raster":return new FR(c);case"symbol":return new i0(c)}},h.bJ=Ke,h.bK=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let A=[];try{if(!tr(c.version,s.version))return[{command:"setStyle",args:[s]}];tr(c.center,s.center)||A.push({command:"setCenter",args:[s.center]}),tr(c.state,s.state)||A.push({command:"setGlobalState",args:[s.state]}),tr(c.centerAltitude,s.centerAltitude)||A.push({command:"setCenterAltitude",args:[s.centerAltitude]}),tr(c.zoom,s.zoom)||A.push({command:"setZoom",args:[s.zoom]}),tr(c.bearing,s.bearing)||A.push({command:"setBearing",args:[s.bearing]}),tr(c.pitch,s.pitch)||A.push({command:"setPitch",args:[s.pitch]}),tr(c.roll,s.roll)||A.push({command:"setRoll",args:[s.roll]}),tr(c.sprite,s.sprite)||A.push({command:"setSprite",args:[s.sprite]}),tr(c.glyphs,s.glyphs)||A.push({command:"setGlyphs",args:[s.glyphs]}),tr(c.transition,s.transition)||A.push({command:"setTransition",args:[s.transition]}),tr(c.light,s.light)||A.push({command:"setLight",args:[s.light]}),tr(c.terrain,s.terrain)||A.push({command:"setTerrain",args:[s.terrain]}),tr(c.sky,s.sky)||A.push({command:"setSky",args:[s.sky]}),tr(c.projection,s.projection)||A.push({command:"setProjection",args:[s.projection]});const d={},m=[];(function(x,E,L,R){let z;for(z in E=E||{},x=x||{})Object.prototype.hasOwnProperty.call(x,z)&&(Object.prototype.hasOwnProperty.call(E,z)||on(z,L,R));for(z in E)Object.prototype.hasOwnProperty.call(E,z)&&(Object.prototype.hasOwnProperty.call(x,z)?tr(x[z],E[z])||(x[z].type==="geojson"&&E[z].type==="geojson"&&Or(x,E,z)?Qt(L,{command:"setGeoJSONSourceData",args:[z,E[z].data]}):Qr(z,E,L,R)):gr(z,E,L))})(c.sources,s.sources,m,d);const _=[];c.layers&&c.layers.forEach(x=>{"source"in x&&d[x.source]?A.push({command:"removeLayer",args:[x.id]}):_.push(x)}),A=A.concat(m),function(x,E,L){E=E||[];const R=(x=x||[]).map(Dr),z=E.map(Dr),G=x.reduce(Fn,{}),J=E.reduce(Fn,{}),ne=R.slice(),oe=Object.create(null);let pe,Be,Re,lt,qe;for(let te=0,xe=0;te<R.length;te++)pe=R[te],Object.prototype.hasOwnProperty.call(J,pe)?xe++:(Qt(L,{command:"removeLayer",args:[pe]}),ne.splice(ne.indexOf(pe,xe),1));for(let te=0,xe=0;te<z.length;te++)pe=z[z.length-1-te],ne[ne.length-1-te]!==pe&&(Object.prototype.hasOwnProperty.call(G,pe)?(Qt(L,{command:"removeLayer",args:[pe]}),ne.splice(ne.lastIndexOf(pe,ne.length-xe),1)):xe++,lt=ne[ne.length-te],Qt(L,{command:"addLayer",args:[J[pe],lt]}),ne.splice(ne.length-te,0,pe),oe[pe]=!0);for(let te=0;te<z.length;te++)if(pe=z[te],Be=G[pe],Re=J[pe],!oe[pe]&&!tr(Be,Re))if(tr(Be.source,Re.source)&&tr(Be["source-layer"],Re["source-layer"])&&tr(Be.type,Re.type)){for(qe in hr(Be.layout,Re.layout,L,pe,null,"setLayoutProperty"),hr(Be.paint,Re.paint,L,pe,null,"setPaintProperty"),tr(Be.filter,Re.filter)||Qt(L,{command:"setFilter",args:[pe,Re.filter]}),tr(Be.minzoom,Re.minzoom)&&tr(Be.maxzoom,Re.maxzoom)||Qt(L,{command:"setLayerZoomRange",args:[pe,Re.minzoom,Re.maxzoom]}),Be)Object.prototype.hasOwnProperty.call(Be,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?hr(Be[qe],Re[qe],L,pe,qe.slice(6),"setPaintProperty"):tr(Be[qe],Re[qe])||Qt(L,{command:"setLayerProperty",args:[pe,qe,Re[qe]]}));for(qe in Re)Object.prototype.hasOwnProperty.call(Re,qe)&&!Object.prototype.hasOwnProperty.call(Be,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?hr(Be[qe],Re[qe],L,pe,qe.slice(6),"setPaintProperty"):tr(Be[qe],Re[qe])||Qt(L,{command:"setLayerProperty",args:[pe,qe,Re[qe]]}))}else Qt(L,{command:"removeLayer",args:[pe]}),lt=ne[ne.lastIndexOf(pe)+1],Qt(L,{command:"addLayer",args:[Re,lt]})}(_,s.layers,A)}catch(d){console.warn("Unable to compute style diff:",d),A=[{command:"setStyle",args:[s]}]}return A},h.bL=function(c){const s=[],A=c.id;return A===void 0&&s.push({message:`layers.${A}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${A}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),s},h.bM=Gt,h.bN=Pt,h.bO=class extends ui{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},h.bP=$g,h.bQ=class extends ui{constructor(c,s){super(c,s),this.current=K1}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},h.bR=bs,h.bS=class extends ui{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},h.bT=class extends ui{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},h.bU=ge,h.bV=function(c,s){var A=Math.sin(s),d=Math.cos(s);return c[0]=d,c[1]=A,c[2]=0,c[3]=-A,c[4]=d,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},h.bW=function(c,s,A){var d=s[0],m=s[1],_=s[2];return c[0]=d*A[0]+m*A[3]+_*A[6],c[1]=d*A[1]+m*A[4]+_*A[7],c[2]=d*A[2]+m*A[5]+_*A[8],c},h.bX=function(c,s,A,d,m,_,x){var E=1/(s-A),L=1/(d-m),R=1/(_-x);return c[0]=-2*E,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*L,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*R,c[11]=0,c[12]=(s+A)*E,c[13]=(m+d)*L,c[14]=(x+_)*R,c[15]=1,c},h.bY=class extends ui{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;const s=new Float32Array(4*c.length);for(let A=0;A<c.length;A++)s[4*A]=c[A].r,s[4*A+1]=c[A].g,s[4*A+2]=c[A].b,s[4*A+3]=c[A].a;this.gl.uniform4fv(this.location,s)}}},h.bZ=class extends ui{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;const s=new Float32Array(c);this.gl.uniform1fv(this.location,s)}}},h.b_=class extends f{},h.ba=function(c,s,A){const d=new Float64Array(4);return Ve(d,c,s-90,A),d},h.bb=function(c,s,A,d){var m,_,x,E,L,R=s[0],z=s[1],G=s[2],J=s[3],ne=A[0],oe=A[1],pe=A[2],Be=A[3];return(_=R*ne+z*oe+G*pe+J*Be)<0&&(_=-_,ne=-ne,oe=-oe,pe=-pe,Be=-Be),1-_>Ae?(m=Math.acos(_),x=Math.sin(m),E=Math.sin((1-d)*m)/x,L=Math.sin(d*m)/x):(E=1-d,L=d),c[0]=E*R+L*ne,c[1]=E*z+L*oe,c[2]=E*G+L*pe,c[3]=E*J+L*Be,c},h.bc=function(c){const s=new Float64Array(9);var A,d,m,_,x,E,L,R,z,G,J,ne,oe,pe,Be,Re,lt,qe;G=(m=(d=c)[0])*(L=m+m),J=(_=d[1])*L,oe=(x=d[2])*L,pe=x*(R=_+_),Re=(E=d[3])*L,lt=E*R,qe=E*(z=x+x),(A=s)[0]=1-(ne=_*R)-(Be=x*z),A[3]=J-qe,A[6]=oe+lt,A[1]=J+qe,A[4]=1-G-Be,A[7]=pe-Re,A[2]=oe-lt,A[5]=pe+Re,A[8]=1-G-ne;const te=jr(-Math.asin(dt(s[2],-1,1)));let xe,We;return Math.hypot(s[5],s[8])<.001?(xe=0,We=-jr(Math.atan2(s[3],s[4]))):(xe=jr(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),We=jr(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:xe,pitch:te+90,bearing:We}},h.bd=function(c,s){return c.roll==s.roll&&c.pitch==s.pitch&&c.bearing==s.bearing},h.be=en,h.bf=xo,h.bg=of,h.bh=Yp,h.bi=sf,h.bj=Ye,h.bk=at,h.bl=Kr,h.bm=function(c,s,A,d,m){return Ye(d,m,dt((c-s)/(A-s),0,1))},h.bn=Me,h.bo=function(){return new Float64Array(3)},h.bp=function(c,s,A,d){return c[0]=s[0]+A[0]*d,c[1]=s[1]+A[1]*d,c[2]=s[2]+A[2]*d,c},h.bq=Ve,h.br=function(c,s,A){var d=A[0],m=A[1],_=A[2],x=s[0],E=s[1],L=s[2],R=m*L-_*E,z=_*x-d*L,G=d*E-m*x,J=m*G-_*z,ne=_*R-d*G,oe=d*z-m*R,pe=2*A[3];return z*=pe,G*=pe,ne*=2,oe*=2,c[0]=x+(R*=pe)+(J*=2),c[1]=E+z+ne,c[2]=L+G+oe,c},h.bs=function(c,s,A){const d=(m=[c[0],c[1],c[2],s[0],s[1],s[2],A[0],A[1],A[2]])[0]*((z=m[8])*(x=m[4])-(E=m[5])*(R=m[7]))+m[1]*(-z*(_=m[3])+E*(L=m[6]))+m[2]*(R*_-x*L);var m,_,x,E,L,R,z;if(d===0)return null;const G=we([],[s[0],s[1],s[2]],[A[0],A[1],A[2]]),J=we([],[A[0],A[1],A[2]],[c[0],c[1],c[2]]),ne=we([],[c[0],c[1],c[2]],[s[0],s[1],s[2]]),oe=Ie([],G,-c[3]);return he(oe,oe,Ie([],J,-s[3])),he(oe,oe,Ie([],ne,-A[3])),Ie(oe,oe,1/d),oe},h.bt=w_,h.bu=function(){return new Float64Array(4)},h.bv=function(c,s,A,d){var m=[],_=[];return m[0]=s[0]-A[0],m[1]=s[1]-A[1],m[2]=s[2]-A[2],_[0]=m[0]*Math.cos(d)-m[1]*Math.sin(d),_[1]=m[0]*Math.sin(d)+m[1]*Math.cos(d),_[2]=m[2],c[0]=_[0]+A[0],c[1]=_[1]+A[1],c[2]=_[2]+A[2],c},h.bw=function(c,s,A,d){var m=[],_=[];return m[0]=s[0]-A[0],m[1]=s[1]-A[1],m[2]=s[2]-A[2],_[0]=m[0],_[1]=m[1]*Math.cos(d)-m[2]*Math.sin(d),_[2]=m[1]*Math.sin(d)+m[2]*Math.cos(d),c[0]=_[0]+A[0],c[1]=_[1]+A[1],c[2]=_[2]+A[2],c},h.bx=function(c,s,A,d){var m=[],_=[];return m[0]=s[0]-A[0],m[1]=s[1]-A[1],m[2]=s[2]-A[2],_[0]=m[2]*Math.sin(d)+m[0]*Math.cos(d),_[1]=m[1],_[2]=m[2]*Math.cos(d)-m[0]*Math.sin(d),c[0]=_[0]+A[0],c[1]=_[1]+A[1],c[2]=_[2]+A[2],c},h.by=function(c,s,A){var d=Math.sin(A),m=Math.cos(A),_=s[0],x=s[1],E=s[2],L=s[3],R=s[8],z=s[9],G=s[10],J=s[11];return s!==c&&(c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=_*m-R*d,c[1]=x*m-z*d,c[2]=E*m-G*d,c[3]=L*m-J*d,c[8]=_*d+R*m,c[9]=x*d+z*m,c[10]=E*d+G*m,c[11]=L*d+J*m,c},h.bz=function(c,s){const A=Me(c,360),d=Me(s,360),m=d-A,_=d>A?m-360:m+360;return Math.abs(m)<Math.abs(_)?m:_},h.c=ot,h.c0=class extends v{},h.c1=X1,h.c2=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},h.c3=yC,h.c4=function(c,s,A){var d=s[0],m=s[1],_=s[2],x=A[3]*d+A[7]*m+A[11]*_+A[15];return c[0]=(A[0]*d+A[4]*m+A[8]*_+A[12])/(x=x||1),c[1]=(A[1]*d+A[5]*m+A[9]*_+A[13])/x,c[2]=(A[2]*d+A[6]*m+A[10]*_+A[14])/x,c},h.c5=class extends Ys{},h.c6=class extends ${},h.c7=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},h.c8=function(c,s){var A=c[0],d=c[1],m=c[2],_=c[3],x=c[4],E=c[5],L=c[6],R=c[7],z=c[8],G=c[9],J=c[10],ne=c[11],oe=c[12],pe=c[13],Be=c[14],Re=c[15],lt=s[0],qe=s[1],te=s[2],xe=s[3],We=s[4],bt=s[5],Ht=s[6],Tt=s[7],Mt=s[8],Yt=s[9],jt=s[10],er=s[11],Ut=s[12],dr=s[13],Rr=s[14],kr=s[15];return Math.abs(A-lt)<=Ae*Math.max(1,Math.abs(A),Math.abs(lt))&&Math.abs(d-qe)<=Ae*Math.max(1,Math.abs(d),Math.abs(qe))&&Math.abs(m-te)<=Ae*Math.max(1,Math.abs(m),Math.abs(te))&&Math.abs(_-xe)<=Ae*Math.max(1,Math.abs(_),Math.abs(xe))&&Math.abs(x-We)<=Ae*Math.max(1,Math.abs(x),Math.abs(We))&&Math.abs(E-bt)<=Ae*Math.max(1,Math.abs(E),Math.abs(bt))&&Math.abs(L-Ht)<=Ae*Math.max(1,Math.abs(L),Math.abs(Ht))&&Math.abs(R-Tt)<=Ae*Math.max(1,Math.abs(R),Math.abs(Tt))&&Math.abs(z-Mt)<=Ae*Math.max(1,Math.abs(z),Math.abs(Mt))&&Math.abs(G-Yt)<=Ae*Math.max(1,Math.abs(G),Math.abs(Yt))&&Math.abs(J-jt)<=Ae*Math.max(1,Math.abs(J),Math.abs(jt))&&Math.abs(ne-er)<=Ae*Math.max(1,Math.abs(ne),Math.abs(er))&&Math.abs(oe-Ut)<=Ae*Math.max(1,Math.abs(oe),Math.abs(Ut))&&Math.abs(pe-dr)<=Ae*Math.max(1,Math.abs(pe),Math.abs(dr))&&Math.abs(Be-Rr)<=Ae*Math.max(1,Math.abs(Be),Math.abs(Rr))&&Math.abs(Re-kr)<=Ae*Math.max(1,Math.abs(Re),Math.abs(kr))},h.c9=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},h.cA=function(c){delete le.REGISTERED_PROTOCOLS[c]},h.cB=function(c,s){const A={};for(let m=0;m<c.length;m++){const _=s&&s[c[m].id]||ho(c[m]);s&&(s[c[m].id]=_);let x=A[_];x||(x=A[_]=[]),x.push(c[m])}const d=[];for(const m in A)d.push(A[m]);return d},h.cC=Qe,h.cD=_5,h.cE=x5,h.cF=YC,h.cG=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=ie/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],A=s.layout,d=s._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new vr(c.bucket.zoom+1),c.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new vr(c.bucket.zoom+1),c.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new vr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:z}=c.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new vr(R),c.canonical),d["text-size"].possiblyEvaluate(new vr(z),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:z}=c.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new vr(R),c.canonical),d["icon-size"].possiblyEvaluate(new vr(z),c.canonical)]}const _=A.get("text-line-height")*Ds,x=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",E=A.get("text-keep-upright"),L=A.get("text-size");for(const R of c.bucket.features){const z=A.get("text-font").evaluate(R,{},c.canonical).join(","),G=L.evaluate(R,{},c.canonical),J=m.layoutTextSize.evaluate(R,{},c.canonical),ne=m.layoutIconSize.evaluate(R,{},c.canonical),oe={horizontal:{},vertical:void 0},pe=R.text;let Be,Re=[0,0];if(pe){const te=pe.toString(),xe=A.get("text-letter-spacing").evaluate(R,{},c.canonical)*Ds,We=rr(te)?xe:0,bt=A.get("text-anchor").evaluate(R,{},c.canonical),Ht=M5(s,R,c.canonical);if(!Ht){const jt=A.get("text-radial-offset").evaluate(R,{},c.canonical);Re=jt?L5(bt,[jt*Ds,B_]):A.get("text-offset").evaluate(R,{},c.canonical).map(er=>er*Ds)}let Tt=x?"center":A.get("text-justify").evaluate(R,{},c.canonical);const Mt=A.get("symbol-placement")==="point"?A.get("text-max-width").evaluate(R,{},c.canonical)*Ds:1/0,Yt=()=>{c.bucket.allowVerticalPlacement&&Ot(te)&&(oe.vertical=t0(pe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Mt,_,bt,"left",We,Re,h.an.vertical,!0,J,G))};if(!x&&Ht){const jt=new Set;if(Tt==="auto")for(let Ut=0;Ut<Ht.values.length;Ut+=2)jt.add(C_(Ht.values[Ut]));else jt.add(Tt);let er=!1;for(const Ut of jt)if(!oe.horizontal[Ut])if(er)oe.horizontal[Ut]=oe.horizontal[0];else{const dr=t0(pe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Mt,_,"center",Ut,We,Re,h.an.horizontal,!1,J,G);dr&&(oe.horizontal[Ut]=dr,er=dr.positionedLines.length===1)}Yt()}else{Tt==="auto"&&(Tt=C_(bt));const jt=t0(pe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Mt,_,bt,Tt,We,Re,h.an.horizontal,!1,J,G);jt&&(oe.horizontal[Tt]=jt),Yt(),Ot(te)&&x&&E&&(oe.vertical=t0(pe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Mt,_,bt,Tt,We,Re,h.an.vertical,!1,J,G))}}let lt=!1;if(R.icon&&R.icon.name){const te=c.imageMap[R.icon.name];te&&(Be=xR(c.imagePositions[R.icon.name],A.get("icon-offset").evaluate(R,{},c.canonical),A.get("icon-anchor").evaluate(R,{},c.canonical)),lt=!!te.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=lt:c.bucket.sdfIcons!==lt&&wr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(te.pixelRatio!==c.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const qe=U5(oe.horizontal)||oe.vertical;c.bucket.iconsInText=!!qe&&qe.iconsInText,(qe||Be)&&QR(c.bucket,R,oe,Be,c.imageMap,m,J,ne,Re,lt,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},h.cH=A_,h.cI=n_,h.cJ=l_,h.cK=em,h.cL=h_,h.cM=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},h.cN=function(c,s,A,d,m){return o(this,void 0,void 0,function*(){if(Z())try{return yield mr(c,s,A,d,m)}catch{}return function(_,x,E,L,R){const z=_.width,G=_.height;hn&&Vr||(hn=new OffscreenCanvas(z,G),Vr=hn.getContext("2d",{willReadFrequently:!0})),hn.width=z,hn.height=G,Vr.drawImage(_,0,0,z,G);const J=Vr.getImageData(x,E,L,R);return Vr.clearRect(0,0,z,G),J.data}(c,s,A,d,m)})},h.cO=wC,h.cP=g,h.cQ=I,h.cR=DC,h.cS=ZC,h.cT=Pu,h.cU=qn,h.ca=c=>c.type==="symbol",h.cb=c=>c.type==="circle",h.cc=c=>c.type==="heatmap",h.cd=c=>c.type==="line",h.ce=c=>c.type==="fill",h.cf=c=>c.type==="fill-extrusion",h.cg=c=>c.type==="hillshade",h.ch=c=>c.type==="color-relief",h.ci=c=>c.type==="raster",h.cj=c=>c.type==="background",h.ck=c=>c.type==="custom",h.cl=Ze,h.cm=function(c,s,A){const d=gt(s.x-A.x,s.y-A.y),m=gt(c.x-A.x,c.y-A.y);var _,x;return jr(Math.atan2(d[0]*m[1]-d[1]*m[0],(_=d)[0]*(x=m)[0]+_[1]*x[1]))},h.cn=Ct,h.co=function(c,s){return Nr[s]&&(c instanceof MouseEvent||c instanceof WheelEvent)},h.cp=function(c,s){return Tr[s]&&"touches"in c},h.cq=function(c){return Tr[c]||Nr[c]},h.cr=function(c,s,A){var d=s[0],m=s[1];return c[0]=A[0]*d+A[4]*m+A[12],c[1]=A[1]*d+A[5]*m+A[13],c},h.cs=function(c,s){const{x:A,y:d}=sm.fromLngLat(s);return!(c<0||c>25||d<0||d>=1||A<0||A>=1)},h.ct=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},h.cu=class extends ki{},h.cv=zR,h.cx=function(c){return c.message===br},h.cy=Ue,h.cz=function(c,s){le.REGISTERED_PROTOCOLS[c]=s},h.d=At,h.e=kt,h.f=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(A){throw new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),h.g=se,h.h=c=>new Promise((s,A)=>{const d=new Image;d.onload=()=>{s(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=qr})},d.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(c)],{type:"image/png"});d.src=c.byteLength?URL.createObjectURL(m):qr}),h.i=Vt,h.j=(c,s)=>et(kt(c,{type:"json"}),s),h.k=Je,h.l=pt,h.m=et,h.n=(c,s)=>et(kt(c,{type:"arrayBuffer"}),s),h.o=function(c){return new h_(c).readFields(uR,[])},h.p=XC,h.q=$p,h.r=ii,h.s=Sr,h.t=ts,h.u=wt,h.v=ze,h.w=wr,h.x=W,h.y=be,h.z=j}),a("worker",["./shared"],function(h){class o{constructor(le){this.keyCache={},le&&this.replace(le)}replace(le){this._layerConfigs={},this._layers={},this.update(le,[])}update(le,se){for(const Ue of le){this._layerConfigs[Ue.id]=Ue;const Ge=this._layers[Ue.id]=h.bI(Ue);Ge._featureFilter=h.a9(Ge.filter),this.keyCache[Ue.id]&&delete this.keyCache[Ue.id]}for(const Ue of se)delete this.keyCache[Ue],delete this._layerConfigs[Ue],delete this._layers[Ue];this.familiesBySource={};const ve=h.cB(Object.values(this._layerConfigs),this.keyCache);for(const Ue of ve){const Ge=Ue.map(Je=>this._layers[Je.id]),et=Ge[0];if(et.visibility==="none")continue;const At=et.source||"";let it=this.familiesBySource[At];it||(it=this.familiesBySource[At]={});const St=et.sourceLayer||"_geojsonTileLayer";let pt=it[St];pt||(pt=it[St]=[]),pt.push(Ge)}}}class g{constructor(le){const se={},ve=[];for(const At in le){const it=le[At],St=se[At]={};for(const pt in it){const Je=it[+pt];if(!Je||Je.bitmap.width===0||Je.bitmap.height===0)continue;const Et={x:0,y:0,w:Je.bitmap.width+2,h:Je.bitmap.height+2};ve.push(Et),St[pt]={rect:Et,metrics:Je.metrics}}}const{w:Ue,h:Ge}=h.p(ve),et=new h.q({width:Ue||1,height:Ge||1});for(const At in le){const it=le[At];for(const St in it){const pt=it[+St];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const Je=se[At][St].rect;h.q.copy(pt.bitmap,et,{x:0,y:0},{x:Je.x+1,y:Je.y+1},pt.bitmap)}}this.image=et,this.positions=se}}h.cC("GlyphAtlas",g);class w{constructor(le){this.tileID=new h.Z(le.tileID.overscaledZ,le.tileID.wrap,le.tileID.canonical.z,le.tileID.canonical.x,le.tileID.canonical.y),this.uid=le.uid,this.zoom=le.zoom,this.pixelRatio=le.pixelRatio,this.tileSize=le.tileSize,this.source=le.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=le.showCollisionBoxes,this.collectResourceTiming=!!le.collectResourceTiming,this.returnDependencies=!!le.returnDependencies,this.promoteId=le.promoteId,this.inFlightDependencies=[],this.globalState=le.globalState}parse(le,se,ve,Ue,Ge){return h._(this,void 0,void 0,function*(){this.status="parsing",this.data=le,this.collisionBoxArray=new h.a7;const et=new h.cD(Object.keys(le.layers).sort()),At=new h.cE(this.tileID,this.promoteId);At.bucketLayerIDs=[];const it={},St={featureIndex:At,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ve,subdivisionGranularity:Ge},pt=se.familiesBySource[this.source];for(const hr in pt){const Dr=le.layers[hr];if(!Dr)continue;Dr.version===1&&h.w(`Vector tile source "${this.source}" layer "${hr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fn=et.encode(hr),Xt=[];for(let li=0;li<Dr.length;li++){const Tn=Dr.feature(li),vs=At.getId(Tn,hr);Xt.push({feature:Tn,id:vs,index:li,sourceLayerIndex:Fn})}for(const li of pt[hr]){const Tn=li[0];Tn.source!==this.source&&h.w(`layer.source = ${Tn.source} does not equal this.source = ${this.source}`),Tn.minzoom&&this.zoom<Math.floor(Tn.minzoom)||Tn.maxzoom&&this.zoom>=Tn.maxzoom||Tn.visibility!=="none"&&(B(li,this.zoom,ve),(it[Tn.id]=Tn.createBucket({index:At.bucketLayerIDs.length,layers:li,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fn,sourceID:this.source,globalState:this.globalState})).populate(Xt,St,this.tileID.canonical),At.bucketLayerIDs.push(li.map(vs=>vs.id)))}}const Je=h.bM(St.glyphDependencies,hr=>Object.keys(hr).map(Number));this.inFlightDependencies.forEach(hr=>hr==null?void 0:hr.abort()),this.inFlightDependencies=[];let Et=Promise.resolve({});if(Object.keys(Je).length){const hr=new AbortController;this.inFlightDependencies.push(hr),Et=Ue.sendAsync({type:"GG",data:{stacks:Je,source:this.source,tileID:this.tileID,type:"glyphs"}},hr)}const ze=Object.keys(St.iconDependencies);let Nt=Promise.resolve({});if(ze.length){const hr=new AbortController;this.inFlightDependencies.push(hr),Nt=Ue.sendAsync({type:"GI",data:{icons:ze,source:this.source,tileID:this.tileID,type:"icons"}},hr)}const or=Object.keys(St.patternDependencies);let tr=Promise.resolve({});if(or.length){const hr=new AbortController;this.inFlightDependencies.push(hr),tr=Ue.sendAsync({type:"GI",data:{icons:or,source:this.source,tileID:this.tileID,type:"patterns"}},hr)}const[Qt,gr,on]=yield Promise.all([Et,Nt,tr]),Qr=new g(Qt),Or=new h.cF(gr,on);for(const hr in it){const Dr=it[hr];Dr instanceof h.a8?(B(Dr.layers,this.zoom,ve),h.cG({bucket:Dr,glyphMap:Qt,glyphPositions:Qr.positions,imageMap:gr,imagePositions:Or.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:St.subdivisionGranularity})):Dr.hasPattern&&(Dr instanceof h.cH||Dr instanceof h.cI||Dr instanceof h.cJ)&&(B(Dr.layers,this.zoom,ve),Dr.addFeatures(St,this.tileID.canonical,Or.patternPositions))}return this.status="done",{buckets:Object.values(it).filter(hr=>!hr.isEmpty()),featureIndex:At,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qr.image,imageAtlas:Or,glyphMap:this.returnDependencies?Qt:null,iconMap:this.returnDependencies?gr:null,glyphPositions:this.returnDependencies?Qr.positions:null}})}}function B(ot,le,se){const ve=new h.F(le);for(const Ue of ot)Ue.recalculate(ve,se)}class I{constructor(le,se,ve){this.actor=le,this.layerIndex=se,this.availableImages=ve,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(le,se){return h._(this,void 0,void 0,function*(){const ve=yield h.n(le.request,se);try{return{vectorTile:new h.cK.VectorTile(new h.cL(ve.data)),rawData:ve.data,cacheControl:ve.cacheControl,expires:ve.expires}}catch(Ue){const Ge=new Uint8Array(ve.data);let et=`Unable to parse the tile at ${le.request.url}, `;throw et+=Ge[0]===31&&Ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ue.message}`,new Error(et)}})}loadTile(le){return h._(this,void 0,void 0,function*(){const se=le.uid,ve=!!(le&&le.request&&le.request.collectResourceTiming)&&new h.cM(le.request),Ue=new w(le);this.loading[se]=Ue;const Ge=new AbortController;Ue.abort=Ge;try{const et=yield this.loadVectorTile(le,Ge);if(delete this.loading[se],!et)return null;const At=et.rawData,it={};et.expires&&(it.expires=et.expires),et.cacheControl&&(it.cacheControl=et.cacheControl);const St={};if(ve){const Je=ve.finish();Je&&(St.resourceTiming=JSON.parse(JSON.stringify(Je)))}Ue.vectorTile=et.vectorTile;const pt=Ue.parse(et.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);this.loaded[se]=Ue,this.fetching[se]={rawTileData:At,cacheControl:it,resourceTiming:St};try{const Je=yield pt;return h.e({rawTileData:At.slice(0)},Je,it,St)}finally{delete this.fetching[se]}}catch(et){throw delete this.loading[se],Ue.status="done",this.loaded[se]=Ue,et}})}reloadTile(le){return h._(this,void 0,void 0,function*(){const se=le.uid;if(!this.loaded||!this.loaded[se])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ve=this.loaded[se];if(ve.showCollisionBoxes=le.showCollisionBoxes,ve.globalState=le.globalState,ve.status==="parsing"){const Ue=yield ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);let Ge;if(this.fetching[se]){const{rawTileData:et,cacheControl:At,resourceTiming:it}=this.fetching[se];delete this.fetching[se],Ge=h.e({rawTileData:et.slice(0)},Ue,At,it)}else Ge=Ue;return Ge}if(ve.status==="done"&&ve.vectorTile)return ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity)})}abortTile(le){return h._(this,void 0,void 0,function*(){const se=this.loading,ve=le.uid;se&&se[ve]&&se[ve].abort&&(se[ve].abort.abort(),delete se[ve])})}removeTile(le){return h._(this,void 0,void 0,function*(){this.loaded&&this.loaded[le.uid]&&delete this.loaded[le.uid]})}}class P{constructor(){this.loaded={}}loadTile(le){return h._(this,void 0,void 0,function*(){const{uid:se,encoding:ve,rawImageData:Ue,redFactor:Ge,greenFactor:et,blueFactor:At,baseShift:it}=le,St=Ue.width+2,pt=Ue.height+2,Je=h.b(Ue)?new h.R({width:St,height:pt},yield h.cN(Ue,-1,-1,St,pt)):Ue,Et=new h.cO(se,Je,ve,Ge,et,At,it);return this.loaded=this.loaded||{},this.loaded[se]=Et,Et})}removeTile(le){const se=this.loaded,ve=le.uid;se&&se[ve]&&delete se[ve]}}var b,N,k=function(){if(N)return b;function ot(se,ve){if(se.length!==0){le(se[0],ve);for(var Ue=1;Ue<se.length;Ue++)le(se[Ue],!ve)}}function le(se,ve){for(var Ue=0,Ge=0,et=0,At=se.length,it=At-1;et<At;it=et++){var St=(se[et][0]-se[it][0])*(se[it][1]+se[et][1]),pt=Ue+St;Ge+=Math.abs(Ue)>=Math.abs(St)?Ue-pt+St:St-pt+Ue,Ue=pt}Ue+Ge>=0!=!!ve&&se.reverse()}return N=1,b=function se(ve,Ue){var Ge,et=ve&&ve.type;if(et==="FeatureCollection")for(Ge=0;Ge<ve.features.length;Ge++)se(ve.features[Ge],Ue);else if(et==="GeometryCollection")for(Ge=0;Ge<ve.geometries.length;Ge++)se(ve.geometries[Ge],Ue);else if(et==="Feature")se(ve.geometry,Ue);else if(et==="Polygon")ot(ve.coordinates,Ue);else if(et==="MultiPolygon")for(Ge=0;Ge<ve.coordinates.length;Ge++)ot(ve.coordinates[Ge],Ue);return ve}}(),H=h.cP(k);const U=h.cK.VectorTileFeature.prototype.toGeoJSON;class Q{constructor(le){this._feature=le,this.extent=h.$,this.type=le.type,this.properties=le.tags,"id"in le&&!isNaN(le.id)&&(this.id=parseInt(le.id,10))}loadGeometry(){if(this._feature.type===1){const le=[];for(const se of this._feature.geometry)le.push([new h.P(se[0],se[1])]);return le}{const le=[];for(const se of this._feature.geometry){const ve=[];for(const Ue of se)ve.push(new h.P(Ue[0],Ue[1]));le.push(ve)}return le}}toGeoJSON(le,se,ve){return U.call(this,le,se,ve)}}class K{constructor(le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.$,this.length=le.length,this._features=le}feature(le){return new Q(this._features[le])}}var Z,Ae,fe,ge={exports:{}},me=function(){if(fe)return ge.exports;fe=1;var ot=h.cS(),le=function(){if(Ae)return Z;Ae=1;var pt=h.cQ(),Je=h.cR().VectorTileFeature;function Et(Nt,or){this.options=or||{},this.features=Nt,this.length=Nt.length}function ze(Nt,or){this.id=typeof Nt.id=="number"?Nt.id:void 0,this.type=Nt.type,this.rawGeometry=Nt.type===1?[Nt.geometry]:Nt.geometry,this.properties=Nt.tags,this.extent=or||4096}return Z=Et,Et.prototype.feature=function(Nt){return new ze(this.features[Nt],this.options.extent)},ze.prototype.loadGeometry=function(){var Nt=this.rawGeometry;this.geometry=[];for(var or=0;or<Nt.length;or++){for(var tr=Nt[or],Qt=[],gr=0;gr<tr.length;gr++)Qt.push(new pt(tr[gr][0],tr[gr][1]));this.geometry.push(Qt)}return this.geometry},ze.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Nt=this.geometry,or=1/0,tr=-1/0,Qt=1/0,gr=-1/0,on=0;on<Nt.length;on++)for(var Qr=Nt[on],Or=0;Or<Qr.length;Or++){var hr=Qr[Or];or=Math.min(or,hr.x),tr=Math.max(tr,hr.x),Qt=Math.min(Qt,hr.y),gr=Math.max(gr,hr.y)}return[or,Qt,tr,gr]},ze.prototype.toGeoJSON=Je.prototype.toGeoJSON,Z}();function se(pt){var Je=new ot;return function(Et,ze){for(var Nt in Et.layers)ze.writeMessage(3,ve,Et.layers[Nt])}(pt,Je),Je.finish()}function ve(pt,Je){var Et;Je.writeVarintField(15,pt.version||1),Je.writeStringField(1,pt.name||""),Je.writeVarintField(5,pt.extent||4096);var ze={keys:[],values:[],keycache:{},valuecache:{}};for(Et=0;Et<pt.length;Et++)ze.feature=pt.feature(Et),Je.writeMessage(2,Ue,ze);var Nt=ze.keys;for(Et=0;Et<Nt.length;Et++)Je.writeStringField(3,Nt[Et]);var or=ze.values;for(Et=0;Et<or.length;Et++)Je.writeMessage(4,St,or[Et])}function Ue(pt,Je){var Et=pt.feature;Et.id!==void 0&&Je.writeVarintField(1,Et.id),Je.writeMessage(2,Ge,pt),Je.writeVarintField(3,Et.type),Je.writeMessage(4,it,Et)}function Ge(pt,Je){var Et=pt.feature,ze=pt.keys,Nt=pt.values,or=pt.keycache,tr=pt.valuecache;for(var Qt in Et.properties){var gr=Et.properties[Qt],on=or[Qt];if(gr!==null){on===void 0&&(ze.push(Qt),or[Qt]=on=ze.length-1),Je.writeVarint(on);var Qr=typeof gr;Qr!=="string"&&Qr!=="boolean"&&Qr!=="number"&&(gr=JSON.stringify(gr));var Or=Qr+":"+gr,hr=tr[Or];hr===void 0&&(Nt.push(gr),tr[Or]=hr=Nt.length-1),Je.writeVarint(hr)}}}function et(pt,Je){return(Je<<3)+(7&pt)}function At(pt){return pt<<1^pt>>31}function it(pt,Je){for(var Et=pt.loadGeometry(),ze=pt.type,Nt=0,or=0,tr=Et.length,Qt=0;Qt<tr;Qt++){var gr=Et[Qt],on=1;ze===1&&(on=gr.length),Je.writeVarint(et(1,on));for(var Qr=ze===3?gr.length-1:gr.length,Or=0;Or<Qr;Or++){Or===1&&ze!==1&&Je.writeVarint(et(2,Qr-1));var hr=gr[Or].x-Nt,Dr=gr[Or].y-or;Je.writeVarint(At(hr)),Je.writeVarint(At(Dr)),Nt+=hr,or+=Dr}ze===3&&Je.writeVarint(et(7,1))}}function St(pt,Je){var Et=typeof pt;Et==="string"?Je.writeStringField(1,pt):Et==="boolean"?Je.writeBooleanField(7,pt):Et==="number"&&(pt%1!=0?Je.writeDoubleField(3,pt):pt<0?Je.writeSVarintField(6,pt):Je.writeVarintField(5,pt))}return ge.exports=se,ge.exports.fromVectorTileJs=se,ge.exports.fromGeojsonVt=function(pt,Je){Je=Je||{};var Et={};for(var ze in pt)Et[ze]=new le(pt[ze].features,Je),Et[ze].name=ze,Et[ze].version=Je.version,Et[ze].extent=Je.extent;return se({layers:Et})},ge.exports.GeoJSONWrapper=le,ge.exports}(),ae=h.cP(me);const Le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ot=>ot},re=Math.fround||(he=new Float32Array(1),ot=>(he[0]=+ot,he[0]));var he;class Ie{constructor(le){this.options=Object.assign(Object.create(Le),le),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(le){const{log:se,minZoom:ve,maxZoom:Ue}=this.options;se&&console.time("total time");const Ge=`prepare ${le.length} points`;se&&console.time(Ge),this.points=le;const et=[];for(let it=0;it<le.length;it++){const St=le[it];if(!St.geometry)continue;const[pt,Je]=St.geometry.coordinates,Et=re(rt(pt)),ze=re(ct(Je));et.push(Et,ze,1/0,it,-1,1),this.options.reduce&&et.push(0)}let At=this.trees[Ue+1]=this._createTree(et);se&&console.timeEnd(Ge);for(let it=Ue;it>=ve;it--){const St=+Date.now();At=this.trees[it]=this._createTree(this._cluster(At,it)),se&&console.log("z%d: %d clusters in %dms",it,At.numItems,+Date.now()-St)}return se&&console.timeEnd("total time"),this}getClusters(le,se){let ve=((le[0]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,le[1]));let Ge=le[2]===180?180:((le[2]+180)%360+360)%360-180;const et=Math.max(-90,Math.min(90,le[3]));if(le[2]-le[0]>=360)ve=-180,Ge=180;else if(ve>Ge){const Je=this.getClusters([ve,Ue,180,et],se),Et=this.getClusters([-180,Ue,Ge,et],se);return Je.concat(Et)}const At=this.trees[this._limitZoom(se)],it=At.range(rt(ve),ct(et),rt(Ge),ct(Ue)),St=At.data,pt=[];for(const Je of it){const Et=this.stride*Je;pt.push(St[Et+5]>1?we(St,Et,this.clusterProps):this.points[St[Et+3]])}return pt}getChildren(le){const se=this._getOriginId(le),ve=this._getOriginZoom(le),Ue="No cluster with the specified id.",Ge=this.trees[ve];if(!Ge)throw new Error(Ue);const et=Ge.data;if(se*this.stride>=et.length)throw new Error(Ue);const At=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),it=Ge.within(et[se*this.stride],et[se*this.stride+1],At),St=[];for(const pt of it){const Je=pt*this.stride;et[Je+4]===le&&St.push(et[Je+5]>1?we(et,Je,this.clusterProps):this.points[et[Je+3]])}if(St.length===0)throw new Error(Ue);return St}getLeaves(le,se,ve){const Ue=[];return this._appendLeaves(Ue,le,se=se||10,ve=ve||0,0),Ue}getTile(le,se,ve){const Ue=this.trees[this._limitZoom(le)],Ge=Math.pow(2,le),{extent:et,radius:At}=this.options,it=At/et,St=(ve-it)/Ge,pt=(ve+1+it)/Ge,Je={features:[]};return this._addTileFeatures(Ue.range((se-it)/Ge,St,(se+1+it)/Ge,pt),Ue.data,se,ve,Ge,Je),se===0&&this._addTileFeatures(Ue.range(1-it/Ge,St,1,pt),Ue.data,Ge,ve,Ge,Je),se===Ge-1&&this._addTileFeatures(Ue.range(0,St,it/Ge,pt),Ue.data,-1,ve,Ge,Je),Je.features.length?Je:null}getClusterExpansionZoom(le){let se=this._getOriginZoom(le)-1;for(;se<=this.options.maxZoom;){const ve=this.getChildren(le);if(se++,ve.length!==1)break;le=ve[0].properties.cluster_id}return se}_appendLeaves(le,se,ve,Ue,Ge){const et=this.getChildren(se);for(const At of et){const it=At.properties;if(it&&it.cluster?Ge+it.point_count<=Ue?Ge+=it.point_count:Ge=this._appendLeaves(le,it.cluster_id,ve,Ue,Ge):Ge<Ue?Ge++:le.push(At),le.length===ve)break}return Ge}_createTree(le){const se=new h.aH(le.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ve=0;ve<le.length;ve+=this.stride)se.add(le[ve],le[ve+1]);return se.finish(),se.data=le,se}_addTileFeatures(le,se,ve,Ue,Ge,et){for(const At of le){const it=At*this.stride,St=se[it+5]>1;let pt,Je,Et;if(St)pt=nt(se,it,this.clusterProps),Je=se[it],Et=se[it+1];else{const or=this.points[se[it+3]];pt=or.properties;const[tr,Qt]=or.geometry.coordinates;Je=rt(tr),Et=ct(Qt)}const ze={type:1,geometry:[[Math.round(this.options.extent*(Je*Ge-ve)),Math.round(this.options.extent*(Et*Ge-Ue))]],tags:pt};let Nt;Nt=St||this.options.generateId?se[it+3]:this.points[se[it+3]].id,Nt!==void 0&&(ze.id=Nt),et.features.push(ze)}}_limitZoom(le){return Math.max(this.options.minZoom,Math.min(Math.floor(+le),this.options.maxZoom+1))}_cluster(le,se){const{radius:ve,extent:Ue,reduce:Ge,minPoints:et}=this.options,At=ve/(Ue*Math.pow(2,se)),it=le.data,St=[],pt=this.stride;for(let Je=0;Je<it.length;Je+=pt){if(it[Je+2]<=se)continue;it[Je+2]=se;const Et=it[Je],ze=it[Je+1],Nt=le.within(it[Je],it[Je+1],At),or=it[Je+5];let tr=or;for(const Qt of Nt){const gr=Qt*pt;it[gr+2]>se&&(tr+=it[gr+5])}if(tr>or&&tr>=et){let Qt,gr=Et*or,on=ze*or,Qr=-1;const Or=(Je/pt<<5)+(se+1)+this.points.length;for(const hr of Nt){const Dr=hr*pt;if(it[Dr+2]<=se)continue;it[Dr+2]=se;const Fn=it[Dr+5];gr+=it[Dr]*Fn,on+=it[Dr+1]*Fn,it[Dr+4]=Or,Ge&&(Qt||(Qt=this._map(it,Je,!0),Qr=this.clusterProps.length,this.clusterProps.push(Qt)),Ge(Qt,this._map(it,Dr)))}it[Je+4]=Or,St.push(gr/tr,on/tr,1/0,Or,-1,tr),Ge&&St.push(Qr)}else{for(let Qt=0;Qt<pt;Qt++)St.push(it[Je+Qt]);if(tr>1)for(const Qt of Nt){const gr=Qt*pt;if(!(it[gr+2]<=se)){it[gr+2]=se;for(let on=0;on<pt;on++)St.push(it[gr+on])}}}}return St}_getOriginId(le){return le-this.points.length>>5}_getOriginZoom(le){return(le-this.points.length)%32}_map(le,se,ve){if(le[se+5]>1){const et=this.clusterProps[le[se+6]];return ve?Object.assign({},et):et}const Ue=this.points[le[se+3]].properties,Ge=this.options.map(Ue);return ve&&Ge===Ue?Object.assign({},Ge):Ge}}function we(ot,le,se){return{type:"Feature",id:ot[le+3],properties:nt(ot,le,se),geometry:{type:"Point",coordinates:[(ve=ot[le],360*(ve-.5)),Pe(ot[le+1])]}};var ve}function nt(ot,le,se){const ve=ot[le+5],Ue=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve,Ge=ot[le+6],et=Ge===-1?{}:Object.assign({},se[Ge]);return Object.assign(et,{cluster:!0,cluster_id:ot[le+3],point_count:ve,point_count_abbreviated:Ue})}function rt(ot){return ot/360+.5}function ct(ot){const le=Math.sin(ot*Math.PI/180),se=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return se<0?0:se>1?1:se}function Pe(ot){const le=(180-360*ot)*Math.PI/180;return 360*Math.atan(Math.exp(le))/Math.PI-90}function Ve(ot,le,se,ve){let Ue=ve;const Ge=le+(se-le>>1);let et,At=se-le;const it=ot[le],St=ot[le+1],pt=ot[se],Je=ot[se+1];for(let Et=le+3;Et<se;Et+=3){const ze=mt(ot[Et],ot[Et+1],it,St,pt,Je);if(ze>Ue)et=Et,Ue=ze;else if(ze===Ue){const Nt=Math.abs(Et-Ge);Nt<At&&(et=Et,At=Nt)}}Ue>ve&&(et-le>3&&Ve(ot,le,et,ve),ot[et+2]=Ue,se-et>3&&Ve(ot,et,se,ve))}function mt(ot,le,se,ve,Ue,Ge){let et=Ue-se,At=Ge-ve;if(et!==0||At!==0){const it=((ot-se)*et+(le-ve)*At)/(et*et+At*At);it>1?(se=Ue,ve=Ge):it>0&&(se+=et*it,ve+=At*it)}return et=ot-se,At=le-ve,et*et+At*At}function gt(ot,le,se,ve){const Ue={id:ot??null,type:le,geometry:se,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(le==="Point"||le==="MultiPoint"||le==="LineString")ie(Ue,se);else if(le==="Polygon")ie(Ue,se[0]);else if(le==="MultiLineString")for(const Ge of se)ie(Ue,Ge);else if(le==="MultiPolygon")for(const Ge of se)ie(Ue,Ge[0]);return Ue}function ie(ot,le){for(let se=0;se<le.length;se+=3)ot.minX=Math.min(ot.minX,le[se]),ot.minY=Math.min(ot.minY,le[se+1]),ot.maxX=Math.max(ot.maxX,le[se]),ot.maxY=Math.max(ot.maxY,le[se+1])}function Ee(ot,le,se,ve){if(!le.geometry)return;const Ue=le.geometry.coordinates;if(Ue&&Ue.length===0)return;const Ge=le.geometry.type,et=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2);let At=[],it=le.id;if(se.promoteId?it=le.properties[se.promoteId]:se.generateId&&(it=ve||0),Ge==="Point")Me(Ue,At);else if(Ge==="MultiPoint")for(const St of Ue)Me(St,At);else if(Ge==="LineString")Ye(Ue,At,et,!1);else if(Ge==="MultiLineString"){if(se.lineMetrics){for(const St of Ue)At=[],Ye(St,At,et,!1),ot.push(gt(it,"LineString",At,le.properties));return}at(Ue,At,et,!1)}else if(Ge==="Polygon")at(Ue,At,et,!0);else{if(Ge!=="MultiPolygon"){if(Ge==="GeometryCollection"){for(const St of le.geometry.geometries)Ee(ot,{id:it,geometry:St,properties:le.properties},se,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const St of Ue){const pt=[];at(St,pt,et,!0),At.push(pt)}}ot.push(gt(it,Ge,At,le.properties))}function Me(ot,le){le.push(Ze(ot[0]),Ct(ot[1]),0)}function Ye(ot,le,se,ve){let Ue,Ge,et=0;for(let it=0;it<ot.length;it++){const St=Ze(ot[it][0]),pt=Ct(ot[it][1]);le.push(St,pt,0),it>0&&(et+=ve?(Ue*pt-St*Ge)/2:Math.sqrt(Math.pow(St-Ue,2)+Math.pow(pt-Ge,2))),Ue=St,Ge=pt}const At=le.length-3;le[2]=1,Ve(le,0,At,se),le[At+2]=1,le.size=Math.abs(et),le.start=0,le.end=le.size}function at(ot,le,se,ve){for(let Ue=0;Ue<ot.length;Ue++){const Ge=[];Ye(ot[Ue],Ge,se,ve),le.push(Ge)}}function Ze(ot){return ot/360+.5}function Ct(ot){const le=Math.sin(ot*Math.PI/180),se=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return se<0?0:se>1?1:se}function dt(ot,le,se,ve,Ue,Ge,et,At){if(ve/=le,Ge>=(se/=le)&&et<ve)return ot;if(et<se||Ge>=ve)return null;const it=[];for(const St of ot){const pt=St.geometry;let Je=St.type;const Et=Ue===0?St.minX:St.minY,ze=Ue===0?St.maxX:St.maxY;if(Et>=se&&ze<ve){it.push(St);continue}if(ze<se||Et>=ve)continue;let Nt=[];if(Je==="Point"||Je==="MultiPoint")Lt(pt,Nt,se,ve,Ue);else if(Je==="LineString")kt(pt,Nt,se,ve,Ue,!1,At.lineMetrics);else if(Je==="MultiLineString")Gt(pt,Nt,se,ve,Ue,!1);else if(Je==="Polygon")Gt(pt,Nt,se,ve,Ue,!0);else if(Je==="MultiPolygon")for(const or of pt){const tr=[];Gt(or,tr,se,ve,Ue,!0),tr.length&&Nt.push(tr)}if(Nt.length){if(At.lineMetrics&&Je==="LineString"){for(const or of Nt)it.push(gt(St.id,Je,or,St.tags));continue}Je!=="LineString"&&Je!=="MultiLineString"||(Nt.length===1?(Je="LineString",Nt=Nt[0]):Je="MultiLineString"),Je!=="Point"&&Je!=="MultiPoint"||(Je=Nt.length===3?"Point":"MultiPoint"),it.push(gt(St.id,Je,Nt,St.tags))}}return it.length?it:null}function Lt(ot,le,se,ve,Ue){for(let Ge=0;Ge<ot.length;Ge+=3){const et=ot[Ge+Ue];et>=se&&et<=ve&&Pt(le,ot[Ge],ot[Ge+1],ot[Ge+2])}}function kt(ot,le,se,ve,Ue,Ge,et){let At=$t(ot);const it=Ue===0?Ke:Gr;let St,pt,Je=ot.start;for(let tr=0;tr<ot.length-3;tr+=3){const Qt=ot[tr],gr=ot[tr+1],on=ot[tr+2],Qr=ot[tr+3],Or=ot[tr+4],hr=Ue===0?Qt:gr,Dr=Ue===0?Qr:Or;let Fn=!1;et&&(St=Math.sqrt(Math.pow(Qt-Qr,2)+Math.pow(gr-Or,2))),hr<se?Dr>se&&(pt=it(At,Qt,gr,Qr,Or,se),et&&(At.start=Je+St*pt)):hr>ve?Dr<ve&&(pt=it(At,Qt,gr,Qr,Or,ve),et&&(At.start=Je+St*pt)):Pt(At,Qt,gr,on),Dr<se&&hr>=se&&(pt=it(At,Qt,gr,Qr,Or,se),Fn=!0),Dr>ve&&hr<=ve&&(pt=it(At,Qt,gr,Qr,Or,ve),Fn=!0),!Ge&&Fn&&(et&&(At.end=Je+St*pt),le.push(At),At=$t(ot)),et&&(Je+=St)}let Et=ot.length-3;const ze=ot[Et],Nt=ot[Et+1],or=Ue===0?ze:Nt;or>=se&&or<=ve&&Pt(At,ze,Nt,ot[Et+2]),Et=At.length-3,Ge&&Et>=3&&(At[Et]!==At[0]||At[Et+1]!==At[1])&&Pt(At,At[0],At[1],At[2]),At.length&&le.push(At)}function $t(ot){const le=[];return le.size=ot.size,le.start=ot.start,le.end=ot.end,le}function Gt(ot,le,se,ve,Ue,Ge){for(const et of ot)kt(et,le,se,ve,Ue,Ge,!1)}function Pt(ot,le,se,ve){ot.push(le,se,ve)}function Ke(ot,le,se,ve,Ue,Ge){const et=(Ge-le)/(ve-le);return Pt(ot,Ge,se+(Ue-se)*et,1),et}function Gr(ot,le,se,ve,Ue,Ge){const et=(Ge-se)/(Ue-se);return Pt(ot,le+(ve-le)*et,Ge,1),et}function wr(ot,le){const se=[];for(let ve=0;ve<ot.length;ve++){const Ue=ot[ve],Ge=Ue.type;let et;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")et=fr(Ue.geometry,le);else if(Ge==="MultiLineString"||Ge==="Polygon"){et=[];for(const At of Ue.geometry)et.push(fr(At,le))}else if(Ge==="MultiPolygon"){et=[];for(const At of Ue.geometry){const it=[];for(const St of At)it.push(fr(St,le));et.push(it)}}se.push(gt(Ue.id,Ge,et,Ue.tags))}return se}function fr(ot,le){const se=[];se.size=ot.size,ot.start!==void 0&&(se.start=ot.start,se.end=ot.end);for(let ve=0;ve<ot.length;ve+=3)se.push(ot[ve]+le,ot[ve+1],ot[ve+2]);return se}function Vt(ot,le){if(ot.transformed)return ot;const se=1<<ot.z,ve=ot.x,Ue=ot.y;for(const Ge of ot.features){const et=Ge.geometry,At=Ge.type;if(Ge.geometry=[],At===1)for(let it=0;it<et.length;it+=2)Ge.geometry.push(xr(et[it],et[it+1],le,se,ve,Ue));else for(let it=0;it<et.length;it++){const St=[];for(let pt=0;pt<et[it].length;pt+=2)St.push(xr(et[it][pt],et[it][pt+1],le,se,ve,Ue));Ge.geometry.push(St)}}return ot.transformed=!0,ot}function xr(ot,le,se,ve,Ue,Ge){return[Math.round(se*(ot*ve-Ue)),Math.round(se*(le*ve-Ge))]}function ar(ot,le,se,ve,Ue){const Ge=le===Ue.maxZoom?0:Ue.tolerance/((1<<le)*Ue.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:ot.length,source:null,x:se,y:ve,z:le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const At of ot)qr(et,At,Ge,Ue);return et}function qr(ot,le,se,ve){const Ue=le.geometry,Ge=le.type,et=[];if(ot.minX=Math.min(ot.minX,le.minX),ot.minY=Math.min(ot.minY,le.minY),ot.maxX=Math.max(ot.maxX,le.maxX),ot.maxY=Math.max(ot.maxY,le.maxY),Ge==="Point"||Ge==="MultiPoint")for(let At=0;At<Ue.length;At+=3)et.push(Ue[At],Ue[At+1]),ot.numPoints++,ot.numSimplified++;else if(Ge==="LineString")mr(et,Ue,ot,se,!1,!1);else if(Ge==="MultiLineString"||Ge==="Polygon")for(let At=0;At<Ue.length;At++)mr(et,Ue[At],ot,se,Ge==="Polygon",At===0);else if(Ge==="MultiPolygon")for(let At=0;At<Ue.length;At++){const it=Ue[At];for(let St=0;St<it.length;St++)mr(et,it[St],ot,se,!0,St===0)}if(et.length){let At=le.tags||null;if(Ge==="LineString"&&ve.lineMetrics){At={};for(const St in le.tags)At[St]=le.tags[St];At.mapbox_clip_start=Ue.start/Ue.size,At.mapbox_clip_end=Ue.end/Ue.size}const it={geometry:et,type:Ge==="Polygon"||Ge==="MultiPolygon"?3:Ge==="LineString"||Ge==="MultiLineString"?2:1,tags:At};le.id!==null&&(it.id=le.id),ot.features.push(it)}}function mr(ot,le,se,ve,Ue,Ge){const et=ve*ve;if(ve>0&&le.size<(Ue?et:ve))return void(se.numPoints+=le.length/3);const At=[];for(let it=0;it<le.length;it+=3)(ve===0||le[it+2]>et)&&(se.numSimplified++,At.push(le[it],le[it+1])),se.numPoints++;Ue&&function(it,St){let pt=0;for(let Je=0,Et=it.length,ze=Et-2;Je<Et;ze=Je,Je+=2)pt+=(it[Je]-it[ze])*(it[Je+1]+it[ze+1]);if(pt>0===St)for(let Je=0,Et=it.length;Je<Et/2;Je+=2){const ze=it[Je],Nt=it[Je+1];it[Je]=it[Et-2-Je],it[Je+1]=it[Et-1-Je],it[Et-2-Je]=ze,it[Et-1-Je]=Nt}}(At,Ge),ot.push(At)}const hn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Vr{constructor(le,se){const ve=(se=this.options=function(Ge,et){for(const At in et)Ge[At]=et[At];return Ge}(Object.create(hn),se)).debug;if(ve&&console.time("preprocess data"),se.maxZoom<0||se.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(se.promoteId&&se.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ue=function(Ge,et){const At=[];if(Ge.type==="FeatureCollection")for(let it=0;it<Ge.features.length;it++)Ee(At,Ge.features[it],et,it);else Ee(At,Ge.type==="Feature"?Ge:{geometry:Ge},et);return At}(le,se);this.tiles={},this.tileCoords=[],ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",se.indexMaxZoom,se.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ue=function(Ge,et){const At=et.buffer/et.extent;let it=Ge;const St=dt(Ge,1,-1-At,At,0,-1,2,et),pt=dt(Ge,1,1-At,2+At,0,-1,2,et);return(St||pt)&&(it=dt(Ge,1,-At,1+At,0,-1,2,et)||[],St&&(it=wr(St,1).concat(it)),pt&&(it=it.concat(wr(pt,-1)))),it}(Ue,se),Ue.length&&this.splitTile(Ue,0,0,0),ve&&(Ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(le,se,ve,Ue,Ge,et,At){const it=[le,se,ve,Ue],St=this.options,pt=St.debug;for(;it.length;){Ue=it.pop(),ve=it.pop(),se=it.pop(),le=it.pop();const Je=1<<se,Et=Sr(se,ve,Ue);let ze=this.tiles[Et];if(!ze&&(pt>1&&console.time("creation"),ze=this.tiles[Et]=ar(le,se,ve,Ue,St),this.tileCoords.push({z:se,x:ve,y:Ue}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",se,ve,Ue,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));const Fn=`z${se}`;this.stats[Fn]=(this.stats[Fn]||0)+1,this.total++}if(ze.source=le,Ge==null){if(se===St.indexMaxZoom||ze.numPoints<=St.indexMaxPoints)continue}else{if(se===St.maxZoom||se===Ge)continue;if(Ge!=null){const Fn=Ge-se;if(ve!==et>>Fn||Ue!==At>>Fn)continue}}if(ze.source=null,le.length===0)continue;pt>1&&console.time("clipping");const Nt=.5*St.buffer/St.extent,or=.5-Nt,tr=.5+Nt,Qt=1+Nt;let gr=null,on=null,Qr=null,Or=null,hr=dt(le,Je,ve-Nt,ve+tr,0,ze.minX,ze.maxX,St),Dr=dt(le,Je,ve+or,ve+Qt,0,ze.minX,ze.maxX,St);le=null,hr&&(gr=dt(hr,Je,Ue-Nt,Ue+tr,1,ze.minY,ze.maxY,St),on=dt(hr,Je,Ue+or,Ue+Qt,1,ze.minY,ze.maxY,St),hr=null),Dr&&(Qr=dt(Dr,Je,Ue-Nt,Ue+tr,1,ze.minY,ze.maxY,St),Or=dt(Dr,Je,Ue+or,Ue+Qt,1,ze.minY,ze.maxY,St),Dr=null),pt>1&&console.timeEnd("clipping"),it.push(gr||[],se+1,2*ve,2*Ue),it.push(on||[],se+1,2*ve,2*Ue+1),it.push(Qr||[],se+1,2*ve+1,2*Ue),it.push(Or||[],se+1,2*ve+1,2*Ue+1)}}getTile(le,se,ve){le=+le,se=+se,ve=+ve;const Ue=this.options,{extent:Ge,debug:et}=Ue;if(le<0||le>24)return null;const At=1<<le,it=Sr(le,se=se+At&At-1,ve);if(this.tiles[it])return Vt(this.tiles[it],Ge);et>1&&console.log("drilling down to z%d-%d-%d",le,se,ve);let St,pt=le,Je=se,Et=ve;for(;!St&&pt>0;)pt--,Je>>=1,Et>>=1,St=this.tiles[Sr(pt,Je,Et)];return St&&St.source?(et>1&&(console.log("found parent tile z%d-%d-%d",pt,Je,Et),console.time("drilling down")),this.splitTile(St.source,pt,Je,Et,le,se,ve),et>1&&console.timeEnd("drilling down"),this.tiles[it]?Vt(this.tiles[it],Ge):null):null}}function Sr(ot,le,se){return 32*((1<<ot)*se+le)+ot}function Jr(ot,le){return le?ot.properties[le]:ot.id}function jr(ot,le){if(ot==null)return!0;if(ot.type==="Feature")return Jr(ot,le)!=null;if(ot.type==="FeatureCollection"){const se=new Set;for(const ve of ot.features){const Ue=Jr(ve,le);if(Ue==null||se.has(Ue))return!1;se.add(Ue)}return!0}return!1}function Tr(ot,le){const se=new Map;if(ot!=null)if(ot.type==="Feature")se.set(Jr(ot,le),ot);else for(const ve of ot.features)se.set(Jr(ve,le),ve);return se}class Nr extends I{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(le,se){return h._(this,void 0,void 0,function*(){const ve=le.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ue=this._geoJSONIndex.getTile(ve.z,ve.x,ve.y);if(!Ue)return null;const Ge=new K(Ue.features);let et=ae(Ge);return et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),{vectorTile:Ge,rawData:et.buffer}})}loadData(le){return h._(this,void 0,void 0,function*(){var se;(se=this._pendingRequest)===null||se===void 0||se.abort();const ve=!!(le&&le.request&&le.request.collectResourceTiming)&&new h.cM(le.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(le,this._pendingRequest),this._geoJSONIndex=le.cluster?new Ie(function({superclusterOptions:et,clusterProperties:At}){if(!At||!et)return et;const it={},St={},pt={accumulated:null,zoom:0},Je={properties:null},Et=Object.keys(At);for(const ze of Et){const[Nt,or]=At[ze],tr=h.cT(or),Qt=h.cT(typeof Nt=="string"?[Nt,["accumulated"],["get",ze]]:Nt);it[ze]=tr.value,St[ze]=Qt.value}return et.map=ze=>{Je.properties=ze;const Nt={};for(const or of Et)Nt[or]=it[or].evaluate(pt,Je);return Nt},et.reduce=(ze,Nt)=>{Je.properties=Nt;for(const or of Et)pt.accumulated=ze[or],ze[or]=St[or].evaluate(pt,Je)},et}(le)).load((yield this._pendingData).features):(Ue=yield this._pendingData,new Vr(Ue,le.geojsonVtOptions)),this.loaded={};const Ge={};if(ve){const et=ve.finish();et&&(Ge.resourceTiming={},Ge.resourceTiming[le.source]=JSON.parse(JSON.stringify(et)))}return Ge}catch(Ge){if(delete this._pendingRequest,h.cx(Ge))return{abandoned:!0};throw Ge}var Ue})}getData(){return h._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(le){const se=this.loaded;return se&&se[le.uid]?super.reloadTile(le):this.loadTile(le)}loadAndProcessGeoJSON(le,se){return h._(this,void 0,void 0,function*(){let ve=yield this.loadGeoJSON(le,se);if(delete this._pendingRequest,typeof ve!="object")throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(H(ve,!0),le.filter){const Ue=h.cT(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ue.result==="error")throw new Error(Ue.value.map(et=>`${et.key}: ${et.message}`).join(", "));ve={type:"FeatureCollection",features:ve.features.filter(et=>Ue.value.evaluate({zoom:0},et))}}return ve})}loadGeoJSON(le,se){return h._(this,void 0,void 0,function*(){const{promoteId:ve}=le;if(le.request){const Ue=yield h.j(le.request,se);return this._dataUpdateable=jr(Ue.data,ve)?Tr(Ue.data,ve):void 0,Ue.data}if(typeof le.data=="string")try{const Ue=JSON.parse(le.data);return this._dataUpdateable=jr(Ue,ve)?Tr(Ue,ve):void 0,Ue}catch{throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`)}if(!le.dataDiff)throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${le.source}`);return function(Ue,Ge,et){var At,it,St,pt;if(Ge.removeAll&&Ue.clear(),Ge.remove)for(const Je of Ge.remove)Ue.delete(Je);if(Ge.add)for(const Je of Ge.add){const Et=Jr(Je,et);Et!=null&&Ue.set(Et,Je)}if(Ge.update)for(const Je of Ge.update){let Et=Ue.get(Je.id);if(Et==null)continue;const ze=!Je.removeAllProperties&&(((At=Je.removeProperties)===null||At===void 0?void 0:At.length)>0||((it=Je.addOrUpdateProperties)===null||it===void 0?void 0:it.length)>0);if((Je.newGeometry||Je.removeAllProperties||ze)&&(Et=Object.assign({},Et),Ue.set(Je.id,Et),ze&&(Et.properties=Object.assign({},Et.properties))),Je.newGeometry&&(Et.geometry=Je.newGeometry),Je.removeAllProperties)Et.properties={};else if(((St=Je.removeProperties)===null||St===void 0?void 0:St.length)>0)for(const Nt of Je.removeProperties)Object.prototype.hasOwnProperty.call(Et.properties,Nt)&&delete Et.properties[Nt];if(((pt=Je.addOrUpdateProperties)===null||pt===void 0?void 0:pt.length)>0)for(const{key:Nt,value:or}of Je.addOrUpdateProperties)Et.properties[Nt]=or}}(this._dataUpdateable,le.dataDiff,ve),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(le){return h._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(le){return this._geoJSONIndex.getClusterExpansionZoom(le.clusterId)}getClusterChildren(le){return this._geoJSONIndex.getChildren(le.clusterId)}getClusterLeaves(le){return this._geoJSONIndex.getLeaves(le.clusterId,le.limit,le.offset)}}class br{constructor(le){this.self=le,this.actor=new h.J(le),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(se,ve)=>{if(this.externalWorkerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.externalWorkerSourceTypes[se]=ve},this.self.addProtocol=h.cz,this.self.removeProtocol=h.cA,this.self.registerRTLTextPlugin=se=>{h.cU.setMethods(se)},this.actor.registerMessageHandler("LDT",(se,ve)=>this._getDEMWorkerSource(se,ve.source).loadTile(ve)),this.actor.registerMessageHandler("RDT",(se,ve)=>h._(this,void 0,void 0,function*(){this._getDEMWorkerSource(se,ve.source).removeTile(ve)})),this.actor.registerMessageHandler("GCEZ",(se,ve)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(se,ve.type,ve.source).getClusterExpansionZoom(ve)})),this.actor.registerMessageHandler("GCC",(se,ve)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(se,ve.type,ve.source).getClusterChildren(ve)})),this.actor.registerMessageHandler("GCL",(se,ve)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(se,ve.type,ve.source).getClusterLeaves(ve)})),this.actor.registerMessageHandler("LD",(se,ve)=>this._getWorkerSource(se,ve.type,ve.source).loadData(ve)),this.actor.registerMessageHandler("GD",(se,ve)=>this._getWorkerSource(se,ve.type,ve.source).getData()),this.actor.registerMessageHandler("LT",(se,ve)=>this._getWorkerSource(se,ve.type,ve.source).loadTile(ve)),this.actor.registerMessageHandler("RT",(se,ve)=>this._getWorkerSource(se,ve.type,ve.source).reloadTile(ve)),this.actor.registerMessageHandler("AT",(se,ve)=>this._getWorkerSource(se,ve.type,ve.source).abortTile(ve)),this.actor.registerMessageHandler("RMT",(se,ve)=>this._getWorkerSource(se,ve.type,ve.source).removeTile(ve)),this.actor.registerMessageHandler("RS",(se,ve)=>h._(this,void 0,void 0,function*(){if(!this.workerSources[se]||!this.workerSources[se][ve.type]||!this.workerSources[se][ve.type][ve.source])return;const Ue=this.workerSources[se][ve.type][ve.source];delete this.workerSources[se][ve.type][ve.source],Ue.removeSource!==void 0&&Ue.removeSource(ve)})),this.actor.registerMessageHandler("RM",se=>h._(this,void 0,void 0,function*(){delete this.layerIndexes[se],delete this.availableImages[se],delete this.workerSources[se],delete this.demWorkerSources[se]})),this.actor.registerMessageHandler("SR",(se,ve)=>h._(this,void 0,void 0,function*(){this.referrer=ve})),this.actor.registerMessageHandler("SRPS",(se,ve)=>this._syncRTLPluginState(se,ve)),this.actor.registerMessageHandler("IS",(se,ve)=>h._(this,void 0,void 0,function*(){this.self.importScripts(ve)})),this.actor.registerMessageHandler("SI",(se,ve)=>this._setImages(se,ve)),this.actor.registerMessageHandler("UL",(se,ve)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(se).update(ve.layers,ve.removedIds)})),this.actor.registerMessageHandler("SL",(se,ve)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(se).replace(ve)}))}_setImages(le,se){return h._(this,void 0,void 0,function*(){this.availableImages[le]=se;for(const ve in this.workerSources[le]){const Ue=this.workerSources[le][ve];for(const Ge in Ue)Ue[Ge].availableImages=se}})}_syncRTLPluginState(le,se){return h._(this,void 0,void 0,function*(){return yield h.cU.syncState(se,this.self.importScripts)})}_getAvailableImages(le){let se=this.availableImages[le];return se||(se=[]),se}_getLayerIndex(le){let se=this.layerIndexes[le];return se||(se=this.layerIndexes[le]=new o),se}_getWorkerSource(le,se,ve){if(this.workerSources[le]||(this.workerSources[le]={}),this.workerSources[le][se]||(this.workerSources[le][se]={}),!this.workerSources[le][se][ve]){const Ue={sendAsync:(Ge,et)=>(Ge.targetMapId=le,this.actor.sendAsync(Ge,et))};switch(se){case"vector":this.workerSources[le][se][ve]=new I(Ue,this._getLayerIndex(le),this._getAvailableImages(le));break;case"geojson":this.workerSources[le][se][ve]=new Nr(Ue,this._getLayerIndex(le),this._getAvailableImages(le));break;default:this.workerSources[le][se][ve]=new this.externalWorkerSourceTypes[se](Ue,this._getLayerIndex(le),this._getAvailableImages(le))}}return this.workerSources[le][se][ve]}_getDEMWorkerSource(le,se){return this.demWorkerSources[le]||(this.demWorkerSources[le]={}),this.demWorkerSources[le][se]||(this.demWorkerSources[le][se]=new P),this.demWorkerSources[le][se]}}return h.i(self)&&(self.worker=new br(self)),br}),a("index",["exports","./shared"],function(h,o){var g="5.6.1";function w(){var y=new o.A(4);return o.A!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}let B,I;const P={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y,n,l){const f=requestAnimationFrame(v=>{p(),n(v)}),{unsubscribe:p}=o.s(y.signal,"abort",()=>{p(),cancelAnimationFrame(f),l(o.c())},!1)},frameAsync(y){return new Promise((n,l)=>{this.frame(y,n,l)})},getImageData(y,n=0){return this.getImageCanvasContext(y).getImageData(-n,-n,y.width+2*n,y.height+2*n)},getImageCanvasContext(y){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=y.width,n.height=y.height,l.drawImage(y,0,0,y.width,y.height),l},resolveURL:y=>(B||(B=document.createElement("a")),B.href=y,B.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class b{static testProp(n){if(!b.docStyle)return n[0];for(let l=0;l<n.length;l++)if(n[l]in b.docStyle)return n[l];return n[0]}static create(n,l,f){const p=window.document.createElement(n);return l!==void 0&&(p.className=l),f&&f.appendChild(p),p}static createNS(n,l){return window.document.createElementNS(n,l)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(n,l){n.style[b.transformProp]=l}static addEventListener(n,l,f,p={}){n.addEventListener(l,f,"passive"in p?p:p.capture)}static removeEventListener(n,l,f,p={}){n.removeEventListener(l,f,"passive"in p?p:p.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static getScale(n){const l=n.getBoundingClientRect();return{x:l.width/n.offsetWidth||1,y:l.height/n.offsetHeight||1,boundingClientRect:l}}static getPoint(n,l,f){const p=l.boundingClientRect;return new o.P((f.clientX-p.left)/l.x-n.clientLeft,(f.clientY-p.top)/l.y-n.clientTop)}static mousePos(n,l){const f=b.getScale(n);return b.getPoint(n,f,l)}static touchPos(n,l){const f=[],p=b.getScale(n);for(let v=0;v<l.length;v++)f.push(b.getPoint(n,p,l[v]));return f}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const l=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),f=l.querySelectorAll("script");for(const p of f)p.remove();return b.clean(l),l.innerHTML}static isPossiblyDangerous(n,l){const f=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!f.includes("javascript:")&&!f.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const l=n.children;for(const f of l)b.removeAttributes(f),b.clean(f)}static removeAttributes(n){for(const{name:l,value:f}of n.attributes)b.isPossiblyDangerous(l,f)&&n.removeAttribute(l)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const N={supported:!1,testSupport:function(y){!U&&H&&(Q?K(y):k=y)}};let k,H,U=!1,Q=!1;function K(y){const n=y.createTexture();y.bindTexture(y.TEXTURE_2D,n);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,H),y.isContextLost())return;N.supported=!0}catch{}y.deleteTexture(n),U=!0}var Z;typeof document<"u"&&(H=document.createElement("img"),H.onload=()=>{k&&K(k),k=null,Q=!0},H.onerror=()=>{U=!0,k=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let n,l,f,p;y.resetRequestQueue=()=>{n=[],l=0,f=0,p={}},y.addThrottleControl=M=>{const O=f++;return p[O]=M,O},y.removeThrottleControl=M=>{delete p[M],C()},y.getImage=(M,O,V=!0)=>new Promise((q,$)=>{N.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),o.e(M,{type:"image"}),n.push({abortController:O,requestParameters:M,supportImageRefresh:V,state:"queued",onError:Y=>{$(Y)},onSuccess:Y=>{q(Y)}}),C()});const v=M=>o._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:O,supportImageRefresh:V,onError:q,onSuccess:$,abortController:Y}=M,de=V===!1&&!o.i(self)&&!o.g(O.url)&&(!O.headers||Object.keys(O.headers).reduce((Te,De)=>Te&&De==="accept",!0));l++;const Se=de?F(O,Y):o.m(O,Y);try{const Te=yield Se;delete M.abortController,M.state="completed",Te.data instanceof HTMLImageElement||o.b(Te.data)?$(Te):Te.data&&$({data:yield(Ce=Te.data,typeof createImageBitmap=="function"?o.f(Ce):o.h(Ce)),cacheControl:Te.cacheControl,expires:Te.expires})}catch(Te){delete M.abortController,q(Te)}finally{l--,C()}var Ce}),C=()=>{const M=(()=>{for(const O of Object.keys(p))if(p[O]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=l;O<M&&n.length>0;O++){const V=n.shift();V.abortController.signal.aborted?O--:v(V)}},F=(M,O)=>new Promise((V,q)=>{const $=new Image,Y=M.url,de=M.credentials;de&&de==="include"?$.crossOrigin="use-credentials":(de&&de==="same-origin"||!o.d(Y))&&($.crossOrigin="anonymous"),O.signal.addEventListener("abort",()=>{$.src="",q(o.c())}),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,V({data:$})},$.onerror=()=>{$.onerror=$.onload=null,O.signal.aborted||q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=Y})}(Z||(Z={})),Z.resetRequestQueue();class Ae{constructor(n){this._transformRequestFn=n}transformRequest(n,l){return this._transformRequestFn&&this._transformRequestFn(n,l)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function fe(y){const n=[];if(typeof y=="string")n.push({id:"default",url:y});else if(y&&y.length>0){const l=[];for(const{id:f,url:p}of y){const v=`${f}${p}`;l.indexOf(v)===-1&&(l.push(v),n.push({id:f,url:p}))}}return n}function ge(y,n,l){try{const f=new URL(y);return f.pathname+=`${n}${l}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${y}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function me(y){const{userImage:n}=y;return!!(n&&n.render&&n.render())&&(y.data.replace(new Uint8Array(n.data.buffer)),!0)}class ae extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:l,promiseResolve:f}of this.requestors)f(this._getImagesForIds(l));this.requestors=[]}}getImage(n){const l=this.images[n];if(l&&!l.data&&l.spriteData){const f=l.spriteData;l.data=new o.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),l.spriteData=null}return l}addImage(n,l){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,l)&&(this.images[n]=l)}_validate(n,l){let f=!0;const p=l.data||l.spriteData;return this._validateStretch(l.stretchX,p&&p.width)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,p&&p.height)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "content" value`))),f=!1),f}_validateStretch(n,l){if(!n)return!0;let f=0;for(const p of n){if(p[0]<f||p[1]<p[0]||l<p[1])return!1;f=p[1]}return!0}_validateContent(n,l){if(!n)return!0;if(n.length!==4)return!1;const f=l.spriteData,p=f&&f.width||l.data.width,v=f&&f.height||l.data.height;return!(n[0]<0||p<n[0]||n[1]<0||v<n[1]||n[2]<0||p<n[2]||n[3]<0||v<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,l,f=!0){const p=this.getImage(n);if(f&&(p.data.width!==l.data.width||p.data.height!==l.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=p.version+1,this.images[n]=l,this.updatedImages[n]=!0}removeImage(n){const l=this.images[n];delete this.images[n],delete this.patterns[n],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((l,f)=>{let p=!0;if(!this.isLoaded())for(const v of n)this.images[v]||(p=!1);this.isLoaded()||p?l(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:l})})}_getImagesForIds(n){const l={};for(const f of n){let p=this.getImage(f);p||(this.fire(new o.l("styleimagemissing",{id:f})),p=this.getImage(f)),p?l[f]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:o.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:n,height:l}=this.atlasImage;return{width:n,height:l}}getPattern(n){const l=this.patterns[n],f=this.getImage(n);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{const p={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new o.I(p,f);this.patterns[n]={bin:p,position:v}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const l=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(n,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const v in this.patterns)n.push(this.patterns[v].bin);const{w:l,h:f}=o.p(n),p=this.atlasImage;p.resize({width:l||1,height:f||1});for(const v in this.patterns){const{bin:C}=this.patterns[v],F=C.x+1,M=C.y+1,O=this.getImage(v).data,V=O.width,q=O.height;o.R.copy(O,p,{x:0,y:0},{x:F,y:M},{width:V,height:q}),o.R.copy(O,p,{x:0,y:q-1},{x:F,y:M-1},{width:V,height:1}),o.R.copy(O,p,{x:0,y:0},{x:F,y:M+q},{width:V,height:1}),o.R.copy(O,p,{x:V-1,y:0},{x:F-1,y:M},{width:1,height:q}),o.R.copy(O,p,{x:0,y:0},{x:F+V,y:M},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const l of n){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const f=this.getImage(l);f||o.w(`Image with ID: "${l}" was not found`),me(f)&&this.updateImage(l,f)}}}const Le=1e20;function re(y,n,l,f,p,v,C,F,M){for(let O=n;O<n+f;O++)he(y,l*v+O,v,p,C,F,M);for(let O=l;O<l+p;O++)he(y,O*v+n,1,f,C,F,M)}function he(y,n,l,f,p,v,C){v[0]=0,C[0]=-Le,C[1]=Le,p[0]=y[n];for(let F=1,M=0,O=0;F<f;F++){p[F]=y[n+F*l];const V=F*F;do{const q=v[M];O=(p[F]-p[q]+V-q*q)/(F-q)/2}while(O<=C[M]&&--M>-1);M++,v[M]=F,C[M]=O,C[M+1]=Le}for(let F=0,M=0;F<f;F++){for(;C[M+1]<F;)M++;const O=v[M],V=F-O;y[n+F*l]=p[O]+V*V}}class Ie{constructor(n,l){this.requestManager=n,this.localIdeographFontFamily=l,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return o._(this,void 0,void 0,function*(){const l=[];for(const v in n)for(const C of n[v])l.push(this._getAndCacheGlyphsPromise(v,C));const f=yield Promise.all(l),p={};for(const{stack:v,id:C,glyph:F}of f)p[v]||(p[v]={}),p[v][C]=F&&{id:F.id,bitmap:F.bitmap.clone(),metrics:F.metrics};return p})}_getAndCacheGlyphsPromise(n,l){return o._(this,void 0,void 0,function*(){let f=this.entries[n];f||(f=this.entries[n]={glyphs:{},requests:{},ranges:{}});let p=f.glyphs[l];if(p!==void 0)return{stack:n,id:l,glyph:p};if(p=this._tinySDF(f,n,l),p)return f.glyphs[l]=p,{stack:n,id:l,glyph:p};const v=Math.floor(l/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[v])return{stack:n,id:l,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[v]){const F=Ie.loadGlyphRange(n,v,this.url,this.requestManager);f.requests[v]=F}const C=yield f.requests[v];for(const F in C)this._doesCharSupportLocalGlyph(+F)||(f.glyphs[+F]=C[+F]);return f.ranges[v]=!0,{stack:n,id:l,glyph:C[l]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(n))||o.u["CJK Unified Ideographs"](n)||o.u["Hangul Syllables"](n)||o.u.Hiragana(n)||o.u.Katakana(n)||o.u["CJK Symbols and Punctuation"](n)||o.u["Halfwidth and Fullwidth Forms"](n))}_tinySDF(n,l,f){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(f))return;let v=n.tinySDF;if(!v){let F="400";/bold/i.test(l)?F="900":/medium/i.test(l)?F="500":/light/i.test(l)&&(F="200"),v=n.tinySDF=new Ie.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:F})}const C=v.draw(String.fromCharCode(f));return{id:f,bitmap:new o.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ie.loadGlyphRange=function(y,n,l,f){return o._(this,void 0,void 0,function*(){const p=256*n,v=p+255,C=f.transformRequest(l.replace("{fontstack}",y).replace("{range}",`${p}-${v}`),"Glyphs"),F=yield o.n(C,new AbortController);if(!F||!F.data)throw new Error(`Could not load glyph range. range: ${n}, ${p}-${v}`);const M={};for(const O of o.o(F.data))M[O.id]=O;return M})},Ie.TinySDF=class{constructor({fontSize:y=24,buffer:n=3,radius:l=8,cutoff:f=.25,fontFamily:p="sans-serif",fontWeight:v="normal",fontStyle:C="normal"}={}){this.buffer=n,this.cutoff=f,this.radius=l;const F=this.size=y+4*n,M=this._createCanvas(F),O=this.ctx=M.getContext("2d",{willReadFrequently:!0});O.font=`${C} ${v} ${y}px ${p}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Uint16Array(F)}_createCanvas(y){const n=document.createElement("canvas");return n.width=n.height=y,n}draw(y){const{width:n,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:p,actualBoundingBoxRight:v}=this.ctx.measureText(y),C=Math.ceil(l),F=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-p))),M=Math.min(this.size-this.buffer,C+Math.ceil(f)),O=F+2*this.buffer,V=M+2*this.buffer,q=Math.max(O*V,0),$=new Uint8ClampedArray(q),Y={data:$,width:O,height:V,glyphWidth:F,glyphHeight:M,glyphTop:C,glyphLeft:0,glyphAdvance:n};if(F===0||M===0)return Y;const{ctx:de,buffer:Se,gridInner:Ce,gridOuter:Te}=this;de.clearRect(Se,Se,F,M),de.fillText(y,Se,Se+C);const De=de.getImageData(Se,Se,F,M);Te.fill(Le,0,q),Ce.fill(0,0,q);for(let $e=0;$e<M;$e++)for(let He=0;He<F;He++){const Xe=De.data[4*($e*F+He)+3]/255;if(Xe===0)continue;const tt=($e+Se)*O+He+Se;if(Xe===1)Te[tt]=0,Ce[tt]=Le;else{const je=.5-Xe;Te[tt]=je>0?je*je:0,Ce[tt]=je<0?je*je:0}}re(Te,0,0,O,V,O,this.f,this.v,this.z),re(Ce,Se,Se,F,M,O,this.f,this.v,this.z);for(let $e=0;$e<q;$e++){const He=Math.sqrt(Te[$e])-Math.sqrt(Ce[$e]);$[$e]=Math.round(255-255*(He/this.radius+this.cutoff))}return Y}};class we{constructor(){this.specification=o.v.light.position}possiblyEvaluate(n,l){return o.B(n.expression.evaluate(l))}interpolate(n,l,f){return{x:o.C.number(n.x,l.x,f),y:o.C.number(n.y,l.y,f),z:o.C.number(n.z,l.z,f)}}}let nt;class rt extends o.E{constructor(n){super(),nt=nt||new o.r({anchor:new o.D(o.v.light.anchor),position:new we,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(nt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,l={}){if(!this._validate(o.x,n,l))for(const f in n){const p=n[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),p):this._transitionable.setValue(f,p)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,f){return(!f||f.validate!==!1)&&o.y(this,n.call(o.z,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const ct=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Pe extends o.E{constructor(n){super(),this._transitionable=new o.t(ct),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(n,l={}){if(!this._validate(o.G,n,l)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in n){const p=n[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),p):this._transitionable.setValue(f,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,f={}){return(f==null?void 0:f.validate)!==!1&&o.y(this,n.call(o.z,o.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Ve{constructor(n,l){this.width=n,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,l){const f=n.join(",")+String(l);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(n,l)),this.dashEntry[f]}getDashRanges(n,l,f){const p=[];let v=n.length%2==1?-n[n.length-1]*f:0,C=n[0]*f,F=!0;p.push({left:v,right:C,isDash:F,zeroLength:n[0]===0});let M=n[0];for(let O=1;O<n.length;O++){F=!F;const V=n[O];v=M*f,M+=V,C=M*f,p.push({left:v,right:C,isDash:F,zeroLength:V===0})}return p}addRoundDash(n,l,f){const p=l/2;for(let v=-f;v<=f;v++){const C=this.width*(this.nextRow+f+v);let F=0,M=n[F];for(let O=0;O<this.width;O++){O/M.right>1&&(M=n[++F]);const V=Math.abs(O-M.left),q=Math.abs(O-M.right),$=Math.min(V,q);let Y;const de=v/f*(p+1);if(M.isDash){const Se=p-Math.abs(de);Y=Math.sqrt($*$+Se*Se)}else Y=p-Math.sqrt($*$+de*de);this.data[C+O]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(n){for(let F=n.length-1;F>=0;--F){const M=n[F],O=n[F+1];M.zeroLength?n.splice(F,1):O&&O.isDash===M.isDash&&(O.left=M.left,n.splice(F,1))}const l=n[0],f=n[n.length-1];l.isDash===f.isDash&&(l.left=f.left-this.width,f.right=l.right+this.width);const p=this.width*this.nextRow;let v=0,C=n[v];for(let F=0;F<this.width;F++){F/C.right>1&&(C=n[++v]);const M=Math.abs(F-C.left),O=Math.abs(F-C.right),V=Math.min(M,O);this.data[p+F]=Math.max(0,Math.min(255,(C.isDash?V:-V)+128))}}addDash(n,l){const f=l?7:0,p=2*f+1;if(this.nextRow+p>this.height)return o.w("LineAtlas out of space"),null;let v=0;for(let F=0;F<n.length;F++)v+=n[F];if(v!==0){const F=this.width/v,M=this.getDashRanges(n,this.width,F);l?this.addRoundDash(M,F,f):this.addRegularDash(M)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=p,this.dirty=!0,C}bind(n){const l=n.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const mt="maplibre_preloaded_worker_pool";class gt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<gt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[mt]}numActive(){return Object.keys(this.active).length}}const ie=Math.floor(P.hardwareConcurrency/2);let Ee,Me;function Ye(){return Ee||(Ee=new gt),Ee}gt.workerCount=o.H(globalThis)?Math.max(Math.min(ie,3),1):1;class at{constructor(n,l){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=l;const f=this.workerPool.acquire(l);for(let p=0;p<f.length;p++){const v=new o.J(f[p],l);v.name=`Worker ${p}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,l){const f=[];for(const p of this.actors)f.push(p.sendAsync({type:n,data:l}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,l){for(const f of this.actors)f.registerMessageHandler(n,l)}}function Ze(){return Me||(Me=new at(Ye(),o.K),Me.registerMessageHandler("GR",(y,n,l)=>o.m(n,l))),Me}function Ct(y,n){const l=o.L();return o.M(l,l,[1,1,0]),o.N(l,l,[.5*y.width,.5*y.height,1]),y.calculatePosMatrix?o.O(l,l,y.calculatePosMatrix(n.toUnwrapped())):l}function dt(y,n,l,f,p,v,C){var F;const M=function($,Y,de){if($)for(const Se of $){const Ce=Y[Se];if(Ce&&Ce.source===de&&Ce.type==="fill-extrusion")return!0}else for(const Se in Y){const Ce=Y[Se];if(Ce.source===de&&Ce.type==="fill-extrusion")return!0}return!1}((F=p==null?void 0:p.layers)!==null&&F!==void 0?F:null,n,y.id),O=v.maxPitchScaleFactor(),V=y.tilesIn(f,O,M);V.sort(Lt);const q=[];for(const $ of V)q.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(n,l,y._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,p,v,O,Ct(y.transform,$.tileID),C?(Y,de)=>C($.tileID,Y,de):void 0)});return function($,Y){for(const de in $)for(const Se of $[de])kt(Se,Y);return $}(function($){const Y={},de={};for(const Se of $){const Ce=Se.queryResults,Te=Se.wrappedTileID,De=de[Te]=de[Te]||{};for(const $e in Ce){const He=Ce[$e],Xe=De[$e]=De[$e]||{},tt=Y[$e]=Y[$e]||[];for(const je of He)Xe[je.featureIndex]||(Xe[je.featureIndex]=!0,tt.push(je))}}return Y}(q),y)}function Lt(y,n){const l=y.tileID,f=n.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function kt(y,n){const l=y.feature,f=n.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=f}function $t(y,n,l){return o._(this,void 0,void 0,function*(){let f=y;if(y.url?f=(yield o.j(n.transformRequest(y.url,"Source"),l)).data:yield P.frameAsync(l),!f)return null;const p=o.Q(o.e(f,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(p.vectorLayerIds=f.vector_layers.map(v=>v.id)),p})}class Gt{constructor(n,l){n&&(l?this.setSouthWest(n).setNorthEast(l):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof o.S?new o.S(n.lng,n.lat):o.S.convert(n),this}setSouthWest(n){return this._sw=n instanceof o.S?new o.S(n.lng,n.lat):o.S.convert(n),this}extend(n){const l=this._sw,f=this._ne;let p,v;if(n instanceof o.S)p=n,v=n;else{if(!(n instanceof Gt))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Gt.convert(n)):this.extend(o.S.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(o.S.convert(n)):this;if(p=n._sw,v=n._ne,!p||!v)return this}return l||f?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new o.S(p.lng,p.lat),this._ne=new o.S(v.lng,v.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:l,lat:f}=o.S.convert(n);let p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&p}static convert(n){return n instanceof Gt?n:n&&new Gt(n)}static fromLngLat(n,l=0){const f=360*l/40075017,p=f/Math.cos(Math.PI/180*n.lat);return new Gt(new o.S(n.lng-p,n.lat-f),new o.S(n.lng+p,n.lat+f))}adjustAntiMeridian(){const n=new o.S(this._sw.lng,this._sw.lat),l=new o.S(this._ne.lng,this._ne.lat);return new Gt(n,n.lng>l.lng?new o.S(l.lng+360,l.lat):l)}}class Pt{constructor(n,l,f){this.bounds=Gt.convert(this.validateBounds(n)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const l=Math.pow(2,n.z),f=Math.floor(o.V(this.bounds.getWest())*l),p=Math.floor(o.U(this.bounds.getNorth())*l),v=Math.ceil(o.V(this.bounds.getEast())*l),C=Math.ceil(o.U(this.bounds.getSouth())*l);return n.x>=f&&n.x<v&&n.y>=p&&n.y<C}}class Ke extends o.E{constructor(n,l,f,p){if(super(),this.id=n,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(l,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(o.e(this,n),n.bounds&&(this.tileBounds=new Pt(n.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new o.k(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(n){return o._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(l,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};f.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((v,C)=>{n.reloadPromise={resolve:v,reject:C}})}else n.actor=this.dispatcher.getActor(),p="LT";n.abortController=new AbortController;try{const v=yield n.actor.sendAsync({type:p,data:f},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,v)}catch(v){if(delete n.abortController,n.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,l){if(l&&l.resourceTiming&&(n.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&n.setExpiryData(l),n.loadVectorData(l,this.map.painter),n.reloadPromise){const f=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(f.resolve).catch(f.reject)}}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Gr extends o.E{constructor(n,l,f,p){super(),this.id=n,this.dispatcher=f,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},l),o.e(this,o.Q(l,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(n=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(o.e(this,l),l.bounds&&(this.tileBounds=new Pt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(l){this._tileJSONRequest=null,this.fire(new o.k(l))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return o.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return o._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const f=yield Z.getImage(this.map._requestManager.transformRequest(l,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&n.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const p=this.map.painter.context,v=p.gl,C=f.data;n.texture=this.map.painter.getTileTexture(C.width),n.texture?n.texture.update(C,{useMipmap:!0}):(n.texture=new o.T(p,C,v.RGBA,{useMipmap:!0}),n.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(f){if(delete n.abortController,n.aborted)n.state="unloaded";else if(f)throw n.state="errored",f}})}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class wr extends Gr{constructor(n,l,f,p){super(n,l,f,p),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(n){return o._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(l,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const p=yield Z.getImage(f,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){const v=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const C=o.b(v)&&o.W()?v:yield this.readImageNow(v),F={type:this.type,uid:n.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const M=yield n.actor.sendAsync({type:"LDT",data:F});n.dem=M,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}})}readImageNow(n){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.X()){const l=n.width+2,f=n.height+2;try{return new o.R({width:l,height:f},yield o.Y(n,-1,-1,l,f))}catch{}}return P.getImageData(n,1)})}_getNeighboringTiles(n){const l=n.canonical,f=Math.pow(2,l.z),p=(l.x-1+f)%f,v=l.x===0?n.wrap-1:n.wrap,C=(l.x+1+f)%f,F=l.x+1===f?n.wrap+1:n.wrap,M={};return M[new o.Z(n.overscaledZ,v,l.z,p,l.y).key]={backfilled:!1},M[new o.Z(n.overscaledZ,F,l.z,C,l.y).key]={backfilled:!1},l.y>0&&(M[new o.Z(n.overscaledZ,v,l.z,p,l.y-1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,n.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,F,l.z,C,l.y-1).key]={backfilled:!1}),l.y+1<f&&(M[new o.Z(n.overscaledZ,v,l.z,p,l.y+1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,n.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,F,l.z,C,l.y+1).key]={backfilled:!1}),M}unloadTile(n){return o._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class fr extends o.E{constructor(n,l,f,p){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(p),this._data=l.data,this._options=o.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(l.clusterMaxZoom),minPoints:Math.max(2,l.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(n){return n*(o.$/this.tileSize)}_getClusterMaxZoom(n){const l=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${l}"`),l}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return o._(this,void 0,void 0,function*(){const n=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}getCoordinatesFromGeometry(n){return n.type==="GeometryCollection"?n.geometries.map(l=>l.coordinates).flat(1/0):n.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const n=new Gt,l=yield this.getData();let f;switch(l.type){case"FeatureCollection":f=l.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":f=this.getCoordinatesFromGeometry(l.geometry);break;default:f=this.getCoordinatesFromGeometry(l)}if(f.length==0)return n;for(let p=0;p<f.length-1;p+=2)n.extend([f[p],f[p+1]]);return n})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,l,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:l,offset:f}})}_updateWorkerData(n){return o._(this,void 0,void 0,function*(){const l=o.e({type:this.type},this.workerOptions);n?l.dataDiff=n:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(P.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let p=null;f.resourceTiming&&f.resourceTiming[this.id]&&(p=f.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&o.e(v,{resourceTiming:p}),this.fire(new o.l("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(f))}})}loaded(){return this._pendingLoads===0}loadTile(n){return o._(this,void 0,void 0,function*(){const l=n.actor?"RT":"LT";n.actor=this.actor;const f={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};n.abortController=new AbortController;const p=yield this.actor.sendAsync({type:l,data:f},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(p,this.map.painter,l==="RT")})}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Vt extends o.E{constructor(n,l,f,p){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=l}load(n){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield Z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,n&&(this.coordinates=n),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new o.k(l))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const l=n.map(o.a0.fromLngLat);var f;return this.tileID=function(p){const v=o.a1.fromPoints(p),C=v.width(),F=v.height(),M=Math.max(C,F),O=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),V=Math.pow(2,O);return new o.a3(O,Math.floor((v.minX+v.maxX)/2*V),Math.floor((v.minY+v.maxY)/2*V))}(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,l=n.gl;this.texture||(this.texture=new o.T(n,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const p in this.tiles){const v=this.tiles[p];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:l,minY:f,maxX:p,maxY:v}=o.a1.fromPoints(n),C={};for(let F=0;F<=o.a2;F++){const M=Math.pow(2,F),O=Math.floor(l*M),V=Math.floor(f*M),q=Math.floor(p*M),$=Math.floor(v*M);C[F]={minTileX:O,minTileY:V,maxTileX:q,maxTileY:$}}return C}}class xr extends Vt{constructor(n,l,f,p){super(n,l,f,p),this.roundZoom=!0,this.type="video",this.options=l}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const l of n.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield o.a4(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new o.k(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const l=this.video.seekable;n<l.start(0)||n>l.end(0)?this.fire(new o.k(new o.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,l=n.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(n,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const p in this.tiles){const v=this.tiles[p];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ar extends Vt{constructor(n,l,f,p){super(n,l,f,p),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(C=>typeof C!="number"))||this.fire(new o.k(new o.a5(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a5(`sources.${n}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new o.k(new o.a5(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a5(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a5(`sources.${n}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,f=l.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(l,this.canvas,f.RGBA,{premultiply:!0});let p=!1;for(const v in this.tiles){const C=this.tiles[v];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const qr={},mr=y=>{switch(y){case"geojson":return fr;case"image":return Vt;case"raster":return Gr;case"raster-dem":return wr;case"vector":return Ke;case"video":return xr;case"canvas":return ar}return qr[y]},hn="RTLPluginLoaded";class Vr extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ze()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return o._(this,arguments,void 0,function*(l,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(hn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Sr=null;function Jr(){return Sr||(Sr=new Vr),Sr}class jr{constructor(n,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=o.a6(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const l=n+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,l,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(p,v){const C={};if(!v)return C;for(const F of p){const M=F.layerIds.map(O=>v.getLayer(O)).filter(Boolean);if(M.length!==0){F.layers=M,F.stateDependentLayerIds&&(F.stateDependentLayers=F.stateDependentLayerIds.map(O=>M.filter(V=>V.id===O)[0]));for(const O of M)C[O.id]=F}}return C}(n.buckets,l==null?void 0:l.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const v=this.buckets[p];if(v instanceof o.a8){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const v=this.buckets[p];if(v instanceof o.a8&&v.hasRTLText){this.hasRTLText=!0,Jr().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const v=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(v))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new o.a7}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const f in this.buckets){const p=this.buckets[f];p.uploadPending()&&p.upload(n)}const l=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(n,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(n,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,l,f,p,v,C,F,M,O,V,q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:v,scale:C,tileSize:this.tileSize,pixelPosMatrix:V,transform:M,params:F,queryPadding:this.queryPadding*O,getElevation:q},n,l,f):{}}querySourceFeatures(n,l){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const p=f.loadVTLayers(),v=l&&l.sourceLayer?l.sourceLayer:"",C=p._geojsonTileLayer||p[v];if(!C)return;const F=o.a9(l&&l.filter),{z:M,x:O,y:V}=this.tileID.canonical,q={z:M,x:O,y:V};for(let $=0;$<C.length;$++){const Y=C.feature($);if(F.needGeometry){const Ce=o.aa(Y,!0);if(!F.filter(new o.F(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!F.filter(new o.F(this.tileID.overscaledZ),Y))continue;const de=f.getId(Y,v),Se=new o.ab(Y,M,O,V,de);Se.tile=q,n.push(Se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const l=this.expirationTime;if(n.cacheControl){const f=o.ac(n.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const f=Date.now();let p=!1;if(this.expirationTime>f)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{const v=this.expirationTime-l;v?this.expirationTime=f+Math.max(v,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!l.style.hasLayer(p))continue;const v=this.buckets[p],C=v.layers[0].sourceLayer||"_geojsonTileLayer",F=f[C],M=n[C];if(!F||!M||Object.keys(M).length===0)continue;v.update(M,F,this.imageAtlas&&this.imageAtlas.patternPositions||{});const O=l&&l.style&&l.style.getLayer(p);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=P.now()+n}setDependencies(n,l){const f={};for(const p of l)f[p]=!0;this.dependencies[n]=f}hasDependency(n,l){for(const f of n){const p=this.dependencies[f];if(p){for(const v of l)if(p[v])return!0}}return!1}}class Tr{constructor(n,l){this.max=n,this.onRemove=l,this.reset()}reset(){for(const n in this.data)for(const l of this.data[n])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(n,l,f){const p=n.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const v={value:l,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(n,v)},f)),this.data[p].push(v),this.order.push(p),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const l=this.data[n].shift();return l.timeout&&clearTimeout(l.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),l.value}getByKey(n){const l=this.data[n];return l?l[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,l){if(!this.has(n))return this;const f=n.wrapped().key,p=l===void 0?0:this.data[f].indexOf(l),v=this.data[f][p];return this.data[f].splice(p,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(n){const l=[];for(const f in this.data)for(const p of this.data[f])n(p.value)||l.push(p);for(const f of l)this.remove(f.value.tileID,f)}}class Nr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,l,f){const p=String(l);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][p]=this.stateChanges[n][p]||{},o.e(this.stateChanges[n][p],f),this.deletedStates[n]===null){this.deletedStates[n]={};for(const v in this.state[n])v!==p&&(this.deletedStates[n][v]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][p]===null){this.deletedStates[n][p]={};for(const v in this.state[n][p])f[v]||(this.deletedStates[n][p][v]=null)}else for(const v in f)this.deletedStates[n]&&this.deletedStates[n][p]&&this.deletedStates[n][p][v]===null&&delete this.deletedStates[n][p][v]}removeFeatureState(n,l,f){if(this.deletedStates[n]===null)return;const p=String(l);if(this.deletedStates[n]=this.deletedStates[n]||{},f&&l!==void 0)this.deletedStates[n][p]!==null&&(this.deletedStates[n][p]=this.deletedStates[n][p]||{},this.deletedStates[n][p][f]=null);else if(l!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][p])for(f in this.deletedStates[n][p]={},this.stateChanges[n][p])this.deletedStates[n][p][f]=null;else this.deletedStates[n][p]=null;else this.deletedStates[n]=null}getState(n,l){const f=String(l),p=o.e({},(this.state[n]||{})[f],(this.stateChanges[n]||{})[f]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const v=this.deletedStates[n][l];if(v===null)return{};for(const C in v)delete p[C]}return p}initializeTileState(n,l){n.setFeatureState(this.state,l)}coalesceChanges(n,l){const f={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const v={};for(const C in this.stateChanges[p])this.state[p][C]||(this.state[p][C]={}),o.e(this.state[p][C],this.stateChanges[p][C]),v[C]=this.state[p][C];f[p]=v}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const v={};if(this.deletedStates[p]===null)for(const C in this.state[p])v[C]={},this.state[p][C]={};else for(const C in this.deletedStates[p]){if(this.deletedStates[p][C]===null)this.state[p][C]={};else for(const F of Object.keys(this.deletedStates[p][C]))delete this.state[p][C][F];v[C]=this.state[p][C]}f[p]=f[p]||{},o.e(f[p],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const p in n)n[p].setFeatureState(f,l)}}const br=89.25;function ot(y,n){const l=o.ag(n.lat,-o.ah,o.ah);return new o.P(o.V(n.lng)*y,o.U(l)*y)}function le(y,n){return new o.a0(n.x/y,n.y/y).toLngLat()}function se(y){return y.cameraToCenterDistance*Math.min(.85*Math.tan(o.ad(90-y.pitch)),Math.tan(o.ad(br-y.pitch)))}function ve(y,n){const l=y.canonical,f=n/o.ae(l.z),p=l.x+Math.pow(2,l.z)*y.wrap,v=o.af(new Float64Array(16));return o.M(v,v,[p*f,l.y*f,0]),o.N(v,v,[f/o.$,f/o.$,1]),v}function Ue(y,n,l,f,p){const v=o.a0.fromLngLat(y,n),C=p*o.ai(1,y.lat),F=C*Math.cos(o.ad(l)),M=Math.sqrt(C*C-F*F),O=M*Math.sin(o.ad(-f)),V=M*Math.cos(o.ad(-f));return new o.a0(v.x+O,v.y+V,v.z+F)}function Ge(y,n,l){const f=n.intersectsFrustum(y);if(!l||f===0)return f;const p=n.intersectsPlane(l);return p===0?0:f===2&&p===2?2:1}function et(y,n,l){let f=0;const p=(l-n)/10;for(let v=0;v<10;v++)f+=p*Math.pow(Math.cos(n+(v+.5)/10*(l-n)),y);return f}function At(y,n){return function(l,f,p,v,C){const F=2*((y-1)/o.aj(Math.cos(o.ad(br-C))/Math.cos(o.ad(br)))-1),M=Math.acos(p/v),O=2*et(F-1,0,o.ad(C/2)),V=Math.min(o.ad(br),M+o.ad(C/2)),q=et(F-1,Math.min(V,M-o.ad(C/2)),V),$=Math.atan(f/p),Y=Math.hypot(f,p);let de=l;return de+=o.aj(v/Y/Math.max(.5,Math.cos(o.ad(C/2)))),de+=F*o.aj(Math.cos($))/2,de-=o.aj(Math.max(1,q/O/n))/2,de}}const it=At(9.314,3);function St(y,n){const l=(n.roundZoom?Math.round:Math.floor)(y.zoom+o.aj(y.tileSize/n.tileSize));return Math.max(0,l)}function pt(y,n){const l=y.getCameraFrustum(),f=y.getClippingPlane(),p=y.screenPointToMercatorCoordinate(y.getCameraPoint()),v=o.a0.fromLngLat(y.center,y.elevation);p.z=v.z+Math.cos(y.pitchInRadians)*y.cameraToCenterDistance/y.worldSize;const C=y.getCoveringTilesDetailsProvider(),F=C.allowVariableZoom(y,n),M=St(y,n),O=n.minzoom||0,V=n.maxzoom!==void 0?n.maxzoom:y.maxZoom,q=Math.min(Math.max(0,M),V),$=Math.pow(2,q),Y=[$*p.x,$*p.y,0],de=[$*v.x,$*v.y,0],Se=Math.hypot(v.x-p.x,v.y-p.y),Ce=Math.abs(v.z-p.z),Te=Math.hypot(Se,Ce),De=Xe=>({zoom:0,x:0,y:0,wrap:Xe,fullyVisible:!1}),$e=[],He=[];if(y.renderWorldCopies&&C.allowWorldCopies())for(let Xe=1;Xe<=3;Xe++)$e.push(De(-Xe)),$e.push(De(Xe));for($e.push(De(0));$e.length>0;){const Xe=$e.pop(),tt=Xe.x,je=Xe.y;let ut=Xe.fullyVisible;const Ft={x:tt,y:je,z:Xe.zoom},vt=C.getTileBoundingVolume(Ft,Xe.wrap,y.elevation,n);if(!ut){const nr=Ge(l,vt,f);if(nr===0)continue;ut=nr===2}const _t=C.distanceToTile2d(p.x,p.y,Ft,vt);let xt=M;F&&(xt=(n.calculateTileZoom||it)(y.zoom+o.aj(y.tileSize/n.tileSize),_t,Ce,Te,y.fov)),xt=(n.roundZoom?Math.round:Math.floor)(xt),xt=Math.max(0,xt);const ir=Math.min(xt,V);if(Xe.wrap=C.getWrap(v,Ft,Xe.wrap),Xe.zoom>=ir){if(Xe.zoom<O)continue;const nr=q-Xe.zoom,zt=Y[0]-.5-(tt<<nr),ur=Y[1]-.5-(je<<nr),sn=n.reparseOverscaled?Math.max(Xe.zoom,xt):Xe.zoom;He.push({tileID:new o.Z(Xe.zoom===V?sn:Xe.zoom,Xe.wrap,Xe.zoom,tt,je),distanceSq:o.ak([de[0]-.5-tt,de[1]-.5-je]),tileDistanceToCamera:Math.sqrt(zt*zt+ur*ur)})}else for(let nr=0;nr<4;nr++)$e.push({zoom:Xe.zoom+1,x:(tt<<1)+nr%2,y:(je<<1)+(nr>>1),wrap:Xe.wrap,fullyVisible:ut})}return He.sort((Xe,tt)=>Xe.distanceSq-tt.distanceSq).map(Xe=>Xe.tileID)}const Je=o.a1.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class Et extends o.E{constructor(n,l,f){super(),this.id=n,this.dispatcher=f,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,v,C,F)=>{const M=new(mr(v.type))(p,v,C,F);if(M.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${M.id}`);return M})(n,l,f,this),this._tiles={},this._cache=new Tr(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nr,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const l=this._tiles[n];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,l,f){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,l,f)}catch(p){n.state="errored",p.status!==404?this._source.fire(new o.k(p,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new o.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const f=this._tiles[l];f.upload(n),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(ze).map(n=>n.key)}getRenderableIds(n){const l=[];for(const f in this._tiles)this._isIdRenderable(f,n)&&l.push(this._tiles[f]);return n?l.sort((f,p)=>{const v=f.tileID,C=p.tileID,F=new o.P(v.canonical.x,v.canonical.y)._rotate(-this.transform.bearingInRadians),M=new o.P(C.canonical.x,C.canonical.y)._rotate(-this.transform.bearingInRadians);return v.overscaledZ-C.overscaledZ||M.y-F.y||M.x-F.x}).map(f=>f.tileID.key):l.map(f=>f.tileID).sort(ze).map(f=>f.key)}hasRenderableParent(n){const l=this.findLoadedParent(n,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(n,l){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(l||!this._tiles[n].holdingForFade())}reload(n){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)n?this._reloadTile(l,"expired"):this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(n,l){return o._(this,void 0,void 0,function*(){const f=this._tiles[n];f&&(f.state!=="loading"&&(f.state=l),yield this._loadTile(f,n,l))})}_tileLoaded(n,l,f){n.timeAdded=P.now(),f==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(l,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const l=this.getRenderableIds();for(let p=0;p<l.length;p++){const v=l[p];if(n.neighboringTiles&&n.neighboringTiles[v]){const C=this.getTileByID(v);f(n,C),f(C,n)}}function f(p,v){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let C=v.tileID.canonical.x-p.tileID.canonical.x;const F=v.tileID.canonical.y-p.tileID.canonical.y,M=Math.pow(2,p.tileID.canonical.z),O=v.tileID.key;C===0&&F===0||Math.abs(F)>1||(Math.abs(C)>1&&(Math.abs(C+M)===1?C+=M:Math.abs(C-M)===1&&(C-=M)),v.dem&&p.dem&&(p.dem.backfillBorder(v.dem,C,F),p.neighboringTiles&&p.neighboringTiles[O]&&(p.neighboringTiles[O].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,l,f,p){for(const v in this._tiles){let C=this._tiles[v];if(p[v]||!C.hasData()||C.tileID.overscaledZ<=l||C.tileID.overscaledZ>f)continue;let F=C.tileID;for(;C&&C.tileID.overscaledZ>l+1;){const O=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[O.key],C&&C.hasData()&&(F=O)}let M=F;for(;M.overscaledZ>l;)if(M=M.scaledTo(M.overscaledZ-1),n[M.key]||n[M.canonical.key]){p[F.key]=F;break}}}findLoadedParent(n,l){if(n.key in this._loadedParentTiles){const f=this._loadedParentTiles[n.key];return f&&f.tileID.overscaledZ>=l?f:null}for(let f=n.overscaledZ-1;f>=l;f--){const p=n.scaledTo(f),v=this._getLoadedTile(p);if(v)return v}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const l=this._tiles[n.key];return l&&l.hasData()?l:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const l=Math.ceil(n.width/this._source.tileSize)+1,f=Math.ceil(n.height/this._source.tileSize)+1,p=Math.floor(l*f*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(v)}handleWrapJump(n){const l=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,l){const f={};for(const p in this._tiles){const v=this._tiles[p];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),f[v.tileID.key]=v}this._tiles=f;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(n,l,f,p,v,C){const F={},M={},O=Object.keys(n),V=P.now();for(const q of O){const $=n[q],Y=this._tiles[q];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=V)continue;const de=this.findLoadedParent($,l),Se=this.findLoadedSibling($),Ce=de||Se||null;Ce&&(this._addTile(Ce.tileID),F[Ce.tileID.key]=Ce.tileID),M[q]=$}this._retainLoadedChildren(M,p,f,n);for(const q in F)n[q]||(this._coveredTiles[q]=!0,n[q]=F[q]);if(C){const q={},$={};for(const Y of v)this._tiles[Y.key].hasData()?q[Y.key]=Y:$[Y.key]=Y;for(const Y in $){const de=$[Y].children(this._source.maxzoom);this._tiles[de[0].key]&&this._tiles[de[1].key]&&this._tiles[de[2].key]&&this._tiles[de[3].key]&&(q[de[0].key]=n[de[0].key]=de[0],q[de[1].key]=n[de[1].key]=de[1],q[de[2].key]=n[de[2].key]=de[2],q[de[3].key]=n[de[3].key]=de[3],delete $[Y])}for(const Y in $){const de=$[Y],Se=this.findLoadedParent(de,this._source.minzoom),Ce=this.findLoadedSibling(de),Te=Se||Ce||null;if(Te){q[Te.tileID.key]=n[Te.tileID.key]=Te.tileID;for(const De in q)q[De].isChildOf(Te.tileID)&&delete q[De]}}for(const Y in this._tiles)q[Y]||(this._coveredTiles[Y]=!0)}}update(n,l){if(!this._sourceLoaded||this._paused)return;let f;this.transform=n,this.terrain=l,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new o.Z(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(f=pt(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter(V=>this._source.hasTile(V)))):f=[];const p=St(n,this._source),v=Math.max(p-Et.maxOverzooming,this._source.minzoom),C=Math.max(p+Et.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const V={};for(const q of f)if(q.canonical.z>this._source.minzoom){const $=q.scaledTo(q.canonical.z-1);V[$.key]=$;const Y=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));V[Y.key]=Y}f=f.concat(Object.values(V))}const F=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,F&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,p);Nt(this._source.type)&&this._updateCoveredAndRetainedTiles(M,v,C,p,f,l);for(const V in M)this._tiles[V].clearFadeHold();const O=o.al(this._tiles,M);for(const V of O){const q=this._tiles[V];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,l){var f;const p={},v={},C=Math.max(l-Et.maxOverzooming,this._source.minzoom),F=Math.max(l+Et.maxUnderzooming,this._source.minzoom),M={};for(const O of n){const V=this._addTile(O);p[O.key]=O,V.hasData()||l<this._source.maxzoom&&(M[O.key]=O)}this._retainLoadedChildren(M,l,F,p);for(const O of n){let V=this._tiles[O.key];if(V.hasData())continue;if(l+1>this._source.maxzoom){const $=O.children(this._source.maxzoom)[0],Y=this.getTile($);if(Y&&Y.hasData()){p[$.key]=$;continue}}else{const $=O.children(this._source.maxzoom);if(p[$[0].key]&&p[$[1].key]&&p[$[2].key]&&p[$[3].key])continue}let q=V.wasRequested();for(let $=O.overscaledZ-1;$>=C;--$){const Y=O.scaledTo($);if(v[Y.key])break;if(v[Y.key]=!0,V=this.getTile(Y),!V&&q&&(V=this._addTile(Y)),V){const de=V.hasData();if((de||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||q)&&(p[Y.key]=Y),q=V.wasRequested(),de)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const l=[];let f,p=this._tiles[n].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){f=this._loadedParentTiles[p.key];break}l.push(p.key);const v=p.scaledTo(p.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;p=v}for(const v of l)this._loadedParentTiles[v]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const l=this._tiles[n].tileID,f=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=f}}_addTile(n){let l=this._tiles[n.key];if(l)return l;l=this._cache.getAndRemove(n),l&&(this._setTileReloadTimer(n.key,l),l.tileID=n,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,l)));const f=l;return l||(l=new jr(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(l,n.key,l.state)),l.uses++,this._tiles[n.key]=l,f||this._source.fire(new o.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(n,l){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const f=l.getExpiryTimeout();f&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},f))}refreshTiles(n){for(const l in this._tiles)(this._isIdRenderable(l)||this._tiles[l].state=="errored")&&n.some(f=>f.equals(this._tiles[l].tileID.canonical))&&this._reloadTile(l,"expired")}_removeTile(n){const l=this._tiles[n];l&&(l.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(n){const l=n.sourceDataType;n.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&l==="content"&&(this.reload(n.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,l,f){const p=[],v=this.transform;if(!v)return p;const C=v.getCoveringTilesDetailsProvider().allowWorldCopies(),F=f?v.getCameraQueryGeometry(n):n,M=Y=>v.screenPointToMercatorCoordinate(Y,this.terrain),O=this.transformBbox(n,M,!C),V=this.transformBbox(F,M,!C),q=this.getIds(),$=o.a1.fromPoints(V);for(let Y=0;Y<q.length;Y++){const de=this._tiles[q[Y]];if(de.holdingForFade())continue;const Se=C?[de.tileID]:[de.tileID.unwrapTo(-1),de.tileID.unwrapTo(0)],Ce=Math.pow(2,v.zoom-de.tileID.overscaledZ),Te=l*de.queryPadding*o.$/de.tileSize/Ce;for(const De of Se){const $e=$.map(He=>De.getTilePoint(new o.a0(He.x,He.y)));if($e.expandBy(Te),$e.intersects(Je)){const He=O.map(tt=>De.getTilePoint(tt)),Xe=V.map(tt=>De.getTilePoint(tt));p.push({tile:de,tileID:C?De:De.unwrapTo(0),queryGeometry:He,cameraQueryGeometry:Xe,scale:Ce})}}}return p}transformBbox(n,l,f){let p=n.map(l);if(f){const v=o.a1.fromPoints(n);v.shrinkBy(.001*Math.min(v.width(),v.height()));const C=v.map(l);o.a1.fromPoints(p).covers(C)||(p=p.map(F=>F.x>.5?new o.a0(F.x-1,F.y,F.z):F))}return p}getVisibleCoordinates(n){const l=this.getRenderableIds(n).map(f=>this._tiles[f].tileID);return this.transform&&this.transform.populateCache(l),l}hasTransition(){if(this._source.hasTransition())return!0;if(Nt(this._source.type)){const n=P.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=n)return!0}return!1}setFeatureState(n,l,f){this._state.updateState(n=n||"_geojsonTileLayer",l,f)}removeFeatureState(n,l,f){this._state.removeFeatureState(n=n||"_geojsonTileLayer",l,f)}getFeatureState(n,l){return this._state.getState(n=n||"_geojsonTileLayer",l)}setDependencies(n,l,f){const p=this._tiles[n];p&&p.setDependencies(l,f)}reloadTilesForDependencies(n,l){for(const f in this._tiles)this._tiles[f].hasDependency(n,l)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(n,l))}}function ze(y,n){const l=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*n.wrap)-+(n.wrap<0);return y.overscaledZ-n.overscaledZ||f-l||n.canonical.y-y.canonical.y||n.canonical.x-y.canonical.x}function Nt(y){return y==="raster"||y==="image"||y==="video"}Et.maxOverzooming=10,Et.maxUnderzooming=3;class or{constructor(n,l){this.reset(n,l)}reset(n,l){this.points=n||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=o.ag(n,0,1);let l=1,f=this._distances[l];const p=n*this.paddedLength+this.padding;for(;f<p&&l<this._distances.length;)f=this._distances[++l];const v=l-1,C=this._distances[v],F=f-C,M=F>0?(p-C)/F:0;return this.points[v].mult(1-M).add(this.points[l].mult(M))}}function tr(y,n){let l=!0;return y==="always"||y!=="never"&&n!=="never"||(l=!1),l}class Qt{constructor(n,l,f){const p=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(n/f),this.yCellCount=Math.ceil(l/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)p.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=l,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,l,f,p,v){this._forEachCell(l,f,p,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(p),this.bboxes.push(v)}insertCircle(n,l,f,p){this._forEachCell(l-p,f-p,l+p,f+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(l),this.circles.push(f),this.circles.push(p)}_insertBoxCell(n,l,f,p,v,C){this.boxCells[v].push(C)}_insertCircleCell(n,l,f,p,v,C){this.circleCells[v].push(C)}_query(n,l,f,p,v,C,F){if(f<0||n>this.width||p<0||l>this.height)return[];const M=[];if(n<=0&&l<=0&&this.width<=f&&this.height<=p){if(v)return[{key:null,x1:n,y1:l,x2:f,y2:p}];for(let O=0;O<this.boxKeys.length;O++)M.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const V=this.circles[3*O],q=this.circles[3*O+1],$=this.circles[3*O+2];M.push({key:this.circleKeys[O],x1:V-$,y1:q-$,x2:V+$,y2:q+$})}}else this._forEachCell(n,l,f,p,this._queryCell,M,{hitTest:v,overlapMode:C,seenUids:{box:{},circle:{}}},F);return M}query(n,l,f,p){return this._query(n,l,f,p,!1,null)}hitTest(n,l,f,p,v,C){return this._query(n,l,f,p,!0,v,C).length>0}hitTestCircle(n,l,f,p,v){const C=n-f,F=n+f,M=l-f,O=l+f;if(F<0||C>this.width||O<0||M>this.height)return!1;const V=[];return this._forEachCell(C,M,F,O,this._queryCellCircle,V,{hitTest:!0,overlapMode:p,circle:{x:n,y:l,radius:f},seenUids:{box:{},circle:{}}},v),V.length>0}_queryCell(n,l,f,p,v,C,F,M){const{seenUids:O,hitTest:V,overlapMode:q}=F,$=this.boxCells[v];if($!==null){const de=this.bboxes;for(const Se of $)if(!O.box[Se]){O.box[Se]=!0;const Ce=4*Se,Te=this.boxKeys[Se];if(n<=de[Ce+2]&&l<=de[Ce+3]&&f>=de[Ce+0]&&p>=de[Ce+1]&&(!M||M(Te))&&(!V||!tr(q,Te.overlapMode))&&(C.push({key:Te,x1:de[Ce],y1:de[Ce+1],x2:de[Ce+2],y2:de[Ce+3]}),V))return!0}}const Y=this.circleCells[v];if(Y!==null){const de=this.circles;for(const Se of Y)if(!O.circle[Se]){O.circle[Se]=!0;const Ce=3*Se,Te=this.circleKeys[Se];if(this._circleAndRectCollide(de[Ce],de[Ce+1],de[Ce+2],n,l,f,p)&&(!M||M(Te))&&(!V||!tr(q,Te.overlapMode))){const De=de[Ce],$e=de[Ce+1],He=de[Ce+2];if(C.push({key:Te,x1:De-He,y1:$e-He,x2:De+He,y2:$e+He}),V)return!0}}}return!1}_queryCellCircle(n,l,f,p,v,C,F,M){const{circle:O,seenUids:V,overlapMode:q}=F,$=this.boxCells[v];if($!==null){const de=this.bboxes;for(const Se of $)if(!V.box[Se]){V.box[Se]=!0;const Ce=4*Se,Te=this.boxKeys[Se];if(this._circleAndRectCollide(O.x,O.y,O.radius,de[Ce+0],de[Ce+1],de[Ce+2],de[Ce+3])&&(!M||M(Te))&&!tr(q,Te.overlapMode))return C.push(!0),!0}}const Y=this.circleCells[v];if(Y!==null){const de=this.circles;for(const Se of Y)if(!V.circle[Se]){V.circle[Se]=!0;const Ce=3*Se,Te=this.circleKeys[Se];if(this._circlesCollide(de[Ce],de[Ce+1],de[Ce+2],O.x,O.y,O.radius)&&(!M||M(Te))&&!tr(q,Te.overlapMode))return C.push(!0),!0}}}_forEachCell(n,l,f,p,v,C,F,M){const O=this._convertToXCellCoord(n),V=this._convertToYCellCoord(l),q=this._convertToXCellCoord(f),$=this._convertToYCellCoord(p);for(let Y=O;Y<=q;Y++)for(let de=V;de<=$;de++)if(v.call(this,n,l,f,p,this.xCellCount*de+Y,C,F,M))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,l,f,p,v,C){const F=p-n,M=v-l,O=f+C;return O*O>F*F+M*M}_circleAndRectCollide(n,l,f,p,v,C,F){const M=(C-p)/2,O=Math.abs(n-(p+M));if(O>M+f)return!1;const V=(F-v)/2,q=Math.abs(l-(v+V));if(q>V+f)return!1;if(O<=M||q<=V)return!0;const $=O-M,Y=q-V;return $*$+Y*Y<=f*f}}function gr(y,n,l){const f=o.L();if(!y){const{vecSouth:q,vecEast:$}=Qr(n),Y=w();Y[0]=$[0],Y[1]=$[1],Y[2]=q[0],Y[3]=q[1],p=Y,(V=(C=(v=Y)[0])*(O=v[3])-(M=v[2])*(F=v[1]))&&(p[0]=O*(V=1/V),p[1]=-F*V,p[2]=-M*V,p[3]=C*V),f[0]=Y[0],f[1]=Y[1],f[4]=Y[2],f[5]=Y[3]}var p,v,C,F,M,O,V;return o.N(f,f,[1/l,1/l,1]),f}function on(y,n,l,f){if(y){const p=o.L();if(!n){const{vecSouth:v,vecEast:C}=Qr(l);p[0]=C[0],p[1]=C[1],p[4]=v[0],p[5]=v[1]}return o.N(p,p,[f,f,1]),p}return l.pixelsToClipSpaceMatrix}function Qr(y){const n=Math.cos(y.rollInRadians),l=Math.sin(y.rollInRadians),f=Math.cos(y.pitchInRadians),p=Math.cos(y.bearingInRadians),v=Math.sin(y.bearingInRadians),C=o.aq();C[0]=-p*f*l-v*n,C[1]=-v*f*l+p*n;const F=o.ar(C);F<1e-9?o.as(C):o.at(C,C,1/F);const M=o.aq();M[0]=p*f*n-v*l,M[1]=v*f*n+p*l;const O=o.ar(M);return O<1e-9?o.as(M):o.at(M,M,1/O),{vecEast:M,vecSouth:C}}function Or(y,n,l,f){let p;f?(p=[y,n,f(y,n),1],o.av(p,p,l)):(p=[y,n,0,1],za(p,p,l));const v=p[3];return{point:new o.P(p[0]/v,p[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function hr(y,n){return .5+y/n*.5}function Dr(y,n){return y.x>=-n[0]&&y.x<=n[0]&&y.y>=-n[1]&&y.y<=n[1]}function Fn(y,n,l,f,p,v,C,F,M,O,V,q,$){const Y=l?y.textSizeData:y.iconSizeData,de=o.am(Y,n.transform.zoom),Se=[256/n.width*2+1,256/n.height*2+1],Ce=l?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ce.clear();const Te=y.lineVertexArray,De=l?y.text.placedSymbolArray:y.icon.placedSymbolArray,$e=n.transform.width/n.transform.height;let He=!1;for(let Xe=0;Xe<De.length;Xe++){const tt=De.get(Xe);if(tt.hidden||tt.writingMode===o.an.vertical&&!He){ao(tt.numGlyphs,Ce);continue}He=!1;const je=new o.P(tt.anchorX,tt.anchorY),ut={getElevation:$,pitchedLabelPlaneMatrix:f,lineVertexArray:Te,pitchWithMap:v,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:je,unwrappedTileID:M,width:O,height:V,translation:q},Ft=Wr(tt.anchorX,tt.anchorY,ut);if(!Dr(Ft.point,Se)){ao(tt.numGlyphs,Ce);continue}const vt=hr(n.transform.cameraToCenterDistance,Ft.signedDistanceFromCamera),_t=o.ao(Y,de,tt),xt=v?_t*n.transform.getPitchedTextCorrection(tt.anchorX,tt.anchorY,M)/vt:_t*vt,ir=Tn({projectionContext:ut,pitchedLabelPlaneMatrixInverse:p,symbol:tt,fontSize:xt,flip:!1,keepUpright:C,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:Ce,aspectRatio:$e,rotateToLine:F});He=ir.useVertical,(ir.notEnoughRoom||He||ir.needsFlipping&&Tn({projectionContext:ut,pitchedLabelPlaneMatrixInverse:p,symbol:tt,fontSize:xt,flip:!0,keepUpright:C,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:Ce,aspectRatio:$e,rotateToLine:F}).notEnoughRoom)&&ao(tt.numGlyphs,Ce)}l?y.text.dynamicLayoutVertexBuffer.updateData(Ce):y.icon.dynamicLayoutVertexBuffer.updateData(Ce)}function Xt(y,n,l,f,p,v,C,F){const M=v.glyphStartIndex+v.numGlyphs,O=v.lineStartIndex,V=v.lineStartIndex+v.lineLength,q=n.getoffsetX(v.glyphStartIndex),$=n.getoffsetX(M-1),Y=Gs(y*q,l,f,p,v.segment,O,V,F,C);if(!Y)return null;const de=Gs(y*$,l,f,p,v.segment,O,V,F,C);return de?F.projectionCache.anyProjectionOccluded?null:{first:Y,last:de}:null}function li(y,n,l,f){return y===o.an.horizontal&&Math.abs(l.y-n.y)>Math.abs(l.x-n.x)*f?{useVertical:!0}:(y===o.an.vertical?n.y<l.y:n.x>l.x)?{needsFlipping:!0}:null}function Tn(y){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:l,symbol:f,fontSize:p,flip:v,keepUpright:C,glyphOffsetArray:F,dynamicLayoutVertexArray:M,aspectRatio:O,rotateToLine:V}=y,q=p/24,$=f.lineOffsetX*q,Y=f.lineOffsetY*q;let de;if(f.numGlyphs>1){const Se=f.glyphStartIndex+f.numGlyphs,Ce=f.lineStartIndex,Te=f.lineStartIndex+f.lineLength,De=Xt(q,F,$,Y,v,f,V,n);if(!De)return{notEnoughRoom:!0};const $e=zr(De.first.point.x,De.first.point.y,n,l),He=zr(De.last.point.x,De.last.point.y,n,l);if(C&&!v){const Xe=li(f.writingMode,$e,He,O);if(Xe)return Xe}de=[De.first];for(let Xe=f.glyphStartIndex+1;Xe<Se-1;Xe++){const tt=Gs(q*F.getoffsetX(Xe),$,Y,v,f.segment,Ce,Te,n,V);if(!tt)return{notEnoughRoom:!0};de.push(tt)}de.push(De.last)}else{if(C&&!v){const Ce=Jt(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,Te=f.lineStartIndex+f.segment+1,De=new o.P(n.lineVertexArray.getx(Te),n.lineVertexArray.gety(Te)),$e=Jt(De.x,De.y,n),He=$e.signedDistanceFromCamera>0?$e.point:vs(n.tileAnchorPoint,De,Ce,1,n),Xe=zr(Ce.x,Ce.y,n,l),tt=zr(He.x,He.y,n,l),je=li(f.writingMode,Xe,tt,O);if(je)return je}const Se=Gs(q*F.getoffsetX(f.glyphStartIndex),$,Y,v,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,n,V);if(!Se||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};de=[Se]}for(const Se of de)o.au(M,Se.point,Se.angle);return{}}function vs(y,n,l,f,p){const v=y.add(y.sub(n)._unit()),C=Jt(v.x,v.y,p).point,F=l.sub(C);return l.add(F._mult(f/F.mag()))}function _s(y,n,l){const f=n.projectionCache;if(f.projections[y])return f.projections[y];const p=new o.P(n.lineVertexArray.getx(y),n.lineVertexArray.gety(y)),v=Jt(p.x,p.y,n);if(v.signedDistanceFromCamera>0)return f.projections[y]=v.point,f.anyProjectionOccluded=f.anyProjectionOccluded||v.isOccluded,v.point;const C=y-l.direction;return vs(l.distanceFromAnchor===0?n.tileAnchorPoint:new o.P(n.lineVertexArray.getx(C),n.lineVertexArray.gety(C)),p,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,n)}function Jt(y,n,l){const f=y+l.translation[0],p=n+l.translation[1];let v;return l.pitchWithMap?(v=Or(f,p,l.pitchedLabelPlaneMatrix,l.getElevation),v.isOccluded=!1):(v=l.transform.projectTileCoordinates(f,p,l.unwrappedTileID,l.getElevation),v.point.x=(.5*v.point.x+.5)*l.width,v.point.y=(.5*-v.point.y+.5)*l.height),v}function zr(y,n,l,f){if(l.pitchWithMap){const p=[y,n,0,1];return o.av(p,p,f),l.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],l.unwrappedTileID,l.getElevation).point}return{x:y/l.width*2-1,y:1-n/l.height*2}}function Wr(y,n,l){return l.transform.projectTileCoordinates(y,n,l.unwrappedTileID,l.getElevation)}function _i(y,n,l){return y._unit()._perp()._mult(n*l)}function xa(y,n,l,f,p,v,C,F,M){if(F.projectionCache.offsets[y])return F.projectionCache.offsets[y];const O=l.add(n);if(y+M.direction<f||y+M.direction>=p)return F.projectionCache.offsets[y]=O,O;const V=_s(y+M.direction,F,M),q=_i(V.sub(l),C,M.direction),$=l.add(q),Y=V.add(q);return F.projectionCache.offsets[y]=o.aw(v,O,$,Y)||O,F.projectionCache.offsets[y]}function Gs(y,n,l,f,p,v,C,F,M){const O=f?y-n:y+n;let V=O>0?1:-1,q=0;f&&(V*=-1,q=Math.PI),V<0&&(q+=Math.PI);let $,Y=V>0?v+p:v+p+1;F.projectionCache.cachedAnchorPoint?$=F.projectionCache.cachedAnchorPoint:($=Jt(F.tileAnchorPoint.x,F.tileAnchorPoint.y,F).point,F.projectionCache.cachedAnchorPoint=$);let de,Se,Ce=$,Te=$,De=0,$e=0;const He=Math.abs(O),Xe=[];let tt;for(;De+$e<=He;){if(Y+=V,Y<v||Y>=C)return null;De+=$e,Te=Ce,Se=de;const Ft={absOffsetX:He,direction:V,distanceFromAnchor:De,previousVertex:Te};if(Ce=_s(Y,F,Ft),l===0)Xe.push(Te),tt=Ce.sub(Te);else{let vt;const _t=Ce.sub(Te);vt=_t.mag()===0?_i(_s(Y+V,F,Ft).sub(Ce),l,V):_i(_t,l,V),Se||(Se=Te.add(vt)),de=xa(Y,vt,Ce,v,C,Se,l,F,Ft),Xe.push(Se),tt=de.sub(Se)}$e=tt.mag()}const je=tt._mult((He-De)/$e)._add(Se||Te),ut=q+Math.atan2(Ce.y-Te.y,Ce.x-Te.x);return Xe.push(je),{point:je,angle:M?ut:0,path:Xe}}const Xr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ao(y,n){for(let l=0;l<y;l++){const f=n.length;n.resize(f+4),n.float32.set(Xr,3*f)}}function za(y,n,l){const f=n[0],p=n[1];return y[0]=l[0]*f+l[4]*p+l[12],y[1]=l[1]*f+l[5]*p+l[13],y[3]=l[3]*f+l[7]*p+l[15],y}const ri=100;class vl{constructor(n,l=new Qt(n.width+200,n.height+200,25),f=new Qt(n.width+200,n.height+200,25)){this.transform=n,this.grid=l,this.ignoredGrid=f,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+ri,this.screenBottomBoundary=n.height+ri,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,l,f,p,v,C,F,M,O,V,q,$){const Y=this.projectAndGetPerspectiveRatio(n.anchorPointX+M[0],n.anchorPointY+M[1],v,V,$),de=f*Y.perspectiveRatio;let Se;if(C||F)Se=this._projectCollisionBox(n,de,p,v,C,F,M,Y,V,q,$);else{const tt=Y.x+(q?q.x*de:0),je=Y.y+(q?q.y*de:0);Se={allPointsOccluded:!1,box:[tt+n.x1*de,je+n.y1*de,tt+n.x2*de,je+n.y2*de]}}const[Ce,Te,De,$e]=Se.box,He=C?Se.allPointsOccluded:Y.isOccluded;let Xe=He;return Xe||(Xe=Y.perspectiveRatio<this.perspectiveRatioCutoff),Xe||(Xe=!this.isInsideGrid(Ce,Te,De,$e)),Xe||l!=="always"&&this.grid.hitTest(Ce,Te,De,$e,l,O)?{box:[Ce,Te,De,$e],placeable:!1,offscreen:!1,occluded:He}:{box:[Ce,Te,De,$e],placeable:!0,offscreen:this.isOffscreen(Ce,Te,De,$e),occluded:He}}placeCollisionCircles(n,l,f,p,v,C,F,M,O,V,q,$,Y,de){const Se=[],Ce=new o.P(l.anchorX,l.anchorY),Te=this.getPerspectiveRatio(Ce.x,Ce.y,C,de),De=(O?v*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,C)/Te:v*Te)/o.aA,$e={getElevation:de,pitchedLabelPlaneMatrix:F,lineVertexArray:f,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ce,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:Y},He=Xt(De,p,l.lineOffsetX*De,l.lineOffsetY*De,!1,l,!1,$e);let Xe=!1,tt=!1,je=!0;if(He){const ut=.5*q*Te+$,Ft=new o.P(-100,-100),vt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),_t=new or,xt=He.first,ir=He.last;let nr=[];for(let sn=xt.path.length-1;sn>=1;sn--)nr.push(xt.path[sn]);for(let sn=1;sn<ir.path.length;sn++)nr.push(ir.path[sn]);const zt=2.5*ut;if(O){const sn=this.projectPathToScreenSpace(nr,$e);nr=sn.some(xn=>xn.signedDistanceFromCamera<=0)?[]:sn.map(xn=>xn.point)}let ur=[];if(nr.length>0){const sn=nr[0].clone(),xn=nr[0].clone();for(let Jn=1;Jn<nr.length;Jn++)sn.x=Math.min(sn.x,nr[Jn].x),sn.y=Math.min(sn.y,nr[Jn].y),xn.x=Math.max(xn.x,nr[Jn].x),xn.y=Math.max(xn.y,nr[Jn].y);ur=sn.x>=Ft.x&&xn.x<=vt.x&&sn.y>=Ft.y&&xn.y<=vt.y?[nr]:xn.x<Ft.x||sn.x>vt.x||xn.y<Ft.y||sn.y>vt.y?[]:o.ax([nr],Ft.x,Ft.y,vt.x,vt.y)}for(const sn of ur){_t.reset(sn,.25*ut);let xn=0;xn=_t.length<=.5*ut?1:Math.ceil(_t.paddedLength/zt)+1;for(let Jn=0;Jn<xn;Jn++){const kn=Jn/Math.max(xn-1,1),Un=_t.lerp(kn),En=Un.x+ri,Sn=Un.y+ri;Se.push(En,Sn,ut,0);const Dn=En-ut,is=Sn-ut,vn=En+ut,fs=Sn+ut;if(je=je&&this.isOffscreen(Dn,is,vn,fs),tt=tt||this.isInsideGrid(Dn,is,vn,fs),n!=="always"&&this.grid.hitTestCircle(En,Sn,ut,n,V)&&(Xe=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Xe}}}}return{circles:!M&&Xe||!tt||Te<this.perspectiveRatioCutoff?[]:Se,offscreen:je,collisionDetected:Xe}}projectPathToScreenSpace(n,l){const f=function(p,v){const C=o.L();return o.ap(C,v.pitchedLabelPlaneMatrix),p.map(F=>{const M=Or(F.x,F.y,C,v.getElevation),O=v.transform.projectTileCoordinates(M.point.x,M.point.y,v.unwrappedTileID,v.getElevation);return O.point.x=(.5*O.point.x+.5)*v.width,O.point.y=(.5*-O.point.y+.5)*v.height,O})}(n,l);return function(p){let v=0,C=0,F=0,M=0;for(let O=0;O<p.length;O++)p[O].isOccluded?(F=O+1,M=0):(M++,M>C&&(C=M,v=F));return p.slice(v,v+C)}(f)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[],f=new o.a1;for(const q of n){const $=new o.P(q.x+ri,q.y+ri);f.extend($),l.push($)}const{minX:p,minY:v,maxX:C,maxY:F}=f,M=this.grid.query(p,v,C,F).concat(this.ignoredGrid.query(p,v,C,F)),O={},V={};for(const q of M){const $=q.key;if(O[$.bucketInstanceId]===void 0&&(O[$.bucketInstanceId]={}),O[$.bucketInstanceId][$.featureIndex])continue;const Y=[new o.P(q.x1,q.y1),new o.P(q.x2,q.y1),new o.P(q.x2,q.y2),new o.P(q.x1,q.y2)];o.ay(l,Y)&&(O[$.bucketInstanceId][$.featureIndex]=!0,V[$.bucketInstanceId]===void 0&&(V[$.bucketInstanceId]=[]),V[$.bucketInstanceId].push($.featureIndex))}return V}insertCollisionBox(n,l,f,p,v,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:v,collisionGroupID:C,overlapMode:l},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,l,f,p,v,C){const F=f?this.ignoredGrid:this.grid,M={bucketInstanceId:p,featureIndex:v,collisionGroupID:C,overlapMode:l};for(let O=0;O<n.length;O+=4)F.insertCircle(M,n[O],n[O+1],n[O+2])}projectAndGetPerspectiveRatio(n,l,f,p,v){if(v){let C;p?(C=[n,l,p(n,l),1],o.av(C,C,v)):(C=[n,l,0,1],za(C,C,v));const F=C[3];return{x:(C[0]/F+1)/2*this.transform.width+ri,y:(-C[1]/F+1)/2*this.transform.height+ri,perspectiveRatio:.5+this.transform.cameraToCenterDistance/F*.5,isOccluded:!1,signedDistanceFromCamera:F}}{const C=this.transform.projectTileCoordinates(n,l,f,p);return{x:(C.point.x+1)/2*this.transform.width+ri,y:(1-C.point.y)/2*this.transform.height+ri,perspectiveRatio:.5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5,isOccluded:C.isOccluded,signedDistanceFromCamera:C.signedDistanceFromCamera}}}getPerspectiveRatio(n,l,f,p){const v=this.transform.projectTileCoordinates(n,l,f,p);return .5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5}isOffscreen(n,l,f,p){return f<ri||n>=this.screenRightBoundary||p<ri||l>this.screenBottomBoundary}isInsideGrid(n,l,f,p){return f>=0&&n<this.gridRightBoundary&&p>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const n=o.af([]);return o.M(n,n,[-100,-100,0]),n}_projectCollisionBox(n,l,f,p,v,C,F,M,O,V,q){let $=1,Y=0,de=0,Se=1;const Ce=n.anchorPointX+F[0],Te=n.anchorPointY+F[1];if(C&&!v){const nr=this.projectAndGetPerspectiveRatio(Ce+1,Te,p,O,q),zt=nr.x-M.x,ur=Math.atan((nr.y-M.y)/zt)+(zt<0?Math.PI:0),sn=Math.sin(ur),xn=Math.cos(ur);$=xn,Y=sn,de=-sn,Se=xn}else if(!C&&v){const nr=Qr(this.transform);$=nr.vecEast[0],Y=nr.vecEast[1],de=nr.vecSouth[0],Se=nr.vecSouth[1]}let De=M.x,$e=M.y,He=l;v&&(De=Ce,$e=Te,He=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),He*=this.transform.getPitchedTextCorrection(Ce,Te,p),V||(He*=o.ag(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(De+=$*V.x*He+de*V.y*He,$e+=Y*V.x*He+Se*V.y*He);const Xe=n.x1*He,tt=n.x2*He,je=(Xe+tt)/2,ut=n.y1*He,Ft=n.y2*He,vt=(ut+Ft)/2,_t=[{offsetX:Xe,offsetY:ut},{offsetX:je,offsetY:ut},{offsetX:tt,offsetY:ut},{offsetX:tt,offsetY:vt},{offsetX:tt,offsetY:Ft},{offsetX:je,offsetY:Ft},{offsetX:Xe,offsetY:Ft},{offsetX:Xe,offsetY:vt}];let xt=[];for(const{offsetX:nr,offsetY:zt}of _t)xt.push(new o.P(De+$*nr+de*zt,$e+Y*nr+Se*zt));let ir=!1;if(v){const nr=xt.map(zt=>this.projectAndGetPerspectiveRatio(zt.x,zt.y,p,O,q));ir=nr.some(zt=>!zt.isOccluded),xt=nr.map(zt=>new o.P(zt.x,zt.y))}else ir=!0;return{box:o.az(xt),allPointsOccluded:!ir}}}class _l{constructor(n,l,f,p){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?l:-l))):p&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Oi{constructor(n,l,f,p,v){this.text=new _l(n?n.text:null,l,f,v),this.icon=new _l(n?n.icon:null,l,p,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ha{constructor(n,l,f){this.text=n,this.icon=l,this.skipFade=f}}class Ls{constructor(n,l,f,p,v){this.bucketInstanceId=n,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=p,this.tileID=v}}class Vn{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const l=++this.maxGroupID;this.collisionGroups[n]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[n]}}function Tc(y,n,l,f,p){const{horizontalAlign:v,verticalAlign:C}=o.aG(y);return new o.P(-(v-.5)*n+f[0]*p,-(C-.5)*l+f[1]*p)}class wl{constructor(n,l,f,p,v){this.transform=n.clone(),this.terrain=l,this.collisionIndex=new vl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Vn(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const l=this.terrain;return l?(f,p)=>l.getElevation(n,f,p):null}getBucketParts(n,l,f,p){const v=f.getBucket(l),C=f.latestFeatureIndex;if(!v||!C||l.id!==v.layerIds[0])return;const F=f.collisionBoxArray,M=v.layers[0].layout,O=v.layers[0].paint,V=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),q=f.tileSize/o.$,$=f.tileID.toUnwrapped(),Y=M.get("text-rotation-alignment")==="map",de=o.aB(f,1,this.transform.zoom),Se=o.aC(this.collisionIndex.transform,f,O.get("text-translate"),O.get("text-translate-anchor")),Ce=o.aC(this.collisionIndex.transform,f,O.get("icon-translate"),O.get("icon-translate-anchor")),Te=gr(Y,this.transform,de);this.retainedQueryData[v.bucketInstanceId]=new Ls(v.bucketInstanceId,C,v.sourceLayerIndex,v.index,f.tileID);const De={bucket:v,layout:M,translationText:Se,translationIcon:Ce,unwrappedTileID:$,pitchedLabelPlaneMatrix:Te,scale:V,textPixelRatio:q,holdingForFade:f.holdingForFade(),collisionBoxArray:F,partiallyEvaluatedTextSize:o.am(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(p)for(const $e of v.sortKeyRanges){const{sortKey:He,symbolInstanceStart:Xe,symbolInstanceEnd:tt}=$e;n.push({sortKey:He,symbolInstanceStart:Xe,symbolInstanceEnd:tt,parameters:De})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:De})}attemptAnchorPlacement(n,l,f,p,v,C,F,M,O,V,q,$,Y,de,Se,Ce,Te,De,$e,He){const Xe=o.aD[n.textAnchor],tt=[n.textOffset0,n.textOffset1],je=Tc(Xe,f,p,tt,v),ut=this.collisionIndex.placeCollisionBox(l,$,M,O,V,F,C,Ce,q.predicate,$e,je,He);if((!De||this.collisionIndex.placeCollisionBox(De,$,M,O,V,F,C,Te,q.predicate,$e,je,He).placeable)&&ut.placeable){let Ft;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(Ft=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),Y.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Y.crossTileID]={textOffset:tt,width:f,height:p,anchor:Xe,textBoxScale:v,prevAnchor:Ft},this.markUsedJustification(de,Xe,Y,Se),de.allowVerticalPlacement&&(this.markUsedOrientation(de,Se,Y),this.placedOrientations[Y.crossTileID]=Se),{shift:je,placedGlyphBoxes:ut}}}placeLayerBucketPart(n,l,f){const{bucket:p,layout:v,translationText:C,translationIcon:F,unwrappedTileID:M,pitchedLabelPlaneMatrix:O,textPixelRatio:V,holdingForFade:q,collisionBoxArray:$,partiallyEvaluatedTextSize:Y,collisionGroup:de}=n.parameters,Se=v.get("text-optional"),Ce=v.get("icon-optional"),Te=o.aE(v,"text-overlap","text-allow-overlap"),De=Te==="always",$e=o.aE(v,"icon-overlap","icon-allow-overlap"),He=$e==="always",Xe=v.get("text-rotation-alignment")==="map",tt=v.get("text-pitch-alignment")==="map",je=v.get("icon-text-fit")!=="none",ut=v.get("symbol-z-order")==="viewport-y",Ft=De&&(He||!p.hasIconData()||Ce),vt=He&&(De||!p.hasTextData()||Se);!p.collisionArrays&&$&&p.deserializeCollisionBoxes($);const _t=this.retainedQueryData[p.bucketInstanceId].tileID,xt=this._getTerrainElevationFunc(_t),ir=this.transform.getFastPathSimpleProjectionMatrix(_t),nr=(zt,ur,sn)=>{var xn,Jn;if(l[zt.crossTileID])return;if(q)return void(this.placements[zt.crossTileID]=new Ha(!1,!1,!1));let kn=!1,Un=!1,En=!0,Sn=null,Dn={box:null,placeable:!1,offscreen:null,occluded:!1},is={placeable:!1},vn=null,fs=null,ss=null,Ta=0,ic=0,sc=0;ur.textFeatureIndex?Ta=ur.textFeatureIndex:zt.useRuntimeCollisionCircles&&(Ta=zt.featureIndex),ur.verticalTextFeatureIndex&&(ic=ur.verticalTextFeatureIndex);const Nl=ur.textBox;if(Nl){const zo=Gi=>{let ui=o.an.horizontal;if(p.allowVerticalPlacement&&!Gi&&this.prevPlacement){const xo=this.prevPlacement.placedOrientations[zt.crossTileID];xo&&(this.placedOrientations[zt.crossTileID]=xo,ui=xo,this.markUsedOrientation(p,ui,zt))}return ui},nl=(Gi,ui)=>{if(p.allowVerticalPlacement&&zt.numVerticalGlyphVertices>0&&ur.verticalTextBox){for(const xo of p.writingModes)if(xo===o.an.vertical?(Dn=ui(),is=Dn):Dn=Gi(),Dn&&Dn.placeable)break}else Dn=Gi()},oc=zt.textAnchorOffsetStartIndex,Jc=zt.textAnchorOffsetEndIndex;if(Jc===oc){const Gi=(ui,xo)=>{const bs=this.collisionIndex.placeCollisionBox(ui,Te,V,_t,M,tt,Xe,C,de.predicate,xt,void 0,ir);return bs&&bs.placeable&&(this.markUsedOrientation(p,xo,zt),this.placedOrientations[zt.crossTileID]=xo),bs};nl(()=>Gi(Nl,o.an.horizontal),()=>{const ui=ur.verticalTextBox;return p.allowVerticalPlacement&&zt.numVerticalGlyphVertices>0&&ui?Gi(ui,o.an.vertical):{box:null,offscreen:null}}),zo(Dn&&Dn.placeable)}else{let Gi=o.aD[(Jn=(xn=this.prevPlacement)===null||xn===void 0?void 0:xn.variableOffsets[zt.crossTileID])===null||Jn===void 0?void 0:Jn.anchor];const ui=(bs,$g,K1)=>{const Hp=bs.x2-bs.x1,Xh=bs.y2-bs.y1,Du=zt.textBoxScale,dA=je&&$e==="never"?$g:null;let eo=null,fA=Te==="never"?1:2,jp="never";Gi&&fA++;for(let ac=0;ac<fA;ac++){for(let Vp=oc;Vp<Jc;Vp++){const Kp=p.textAnchorOffsets.get(Vp);if(Gi&&Kp.textAnchor!==Gi)continue;const Yh=this.attemptAnchorPlacement(Kp,bs,Hp,Xh,Du,Xe,tt,V,_t,M,de,jp,zt,p,K1,C,F,dA,xt);if(Yh&&(eo=Yh.placedGlyphBoxes,eo&&eo.placeable))return kn=!0,Sn=Yh.shift,eo}Gi?Gi=null:jp=Te}return f&&!eo&&(eo={box:this.collisionIndex.placeCollisionBox(Nl,"always",V,_t,M,tt,Xe,C,de.predicate,xt,void 0,ir).box,offscreen:!1,placeable:!1,occluded:!1}),eo};nl(()=>ui(Nl,ur.iconBox,o.an.horizontal),()=>{const bs=ur.verticalTextBox;return p.allowVerticalPlacement&&(!Dn||!Dn.placeable)&&zt.numVerticalGlyphVertices>0&&bs?ui(bs,ur.verticalIconBox,o.an.vertical):{box:null,occluded:!0,offscreen:null}}),Dn&&(kn=Dn.placeable,En=Dn.offscreen);const xo=zo(Dn&&Dn.placeable);if(!kn&&this.prevPlacement){const bs=this.prevPlacement.variableOffsets[zt.crossTileID];bs&&(this.variableOffsets[zt.crossTileID]=bs,this.markUsedJustification(p,bs.anchor,zt,xo))}}}if(vn=Dn,kn=vn&&vn.placeable,En=vn&&vn.offscreen,zt.useRuntimeCollisionCircles){const zo=p.text.placedSymbolArray.get(zt.centerJustifiedTextSymbolIndex),nl=o.ao(p.textSizeData,Y,zo),oc=v.get("text-padding");fs=this.collisionIndex.placeCollisionCircles(Te,zo,p.lineVertexArray,p.glyphOffsetArray,nl,M,O,f,tt,de.predicate,zt.collisionCircleDiameter,oc,C,xt),fs.circles.length&&fs.collisionDetected&&!f&&o.w("Collisions detected, but collision boxes are not shown"),kn=De||fs.circles.length>0&&!fs.collisionDetected,En=En&&fs.offscreen}if(ur.iconFeatureIndex&&(sc=ur.iconFeatureIndex),ur.iconBox){const zo=nl=>this.collisionIndex.placeCollisionBox(nl,$e,V,_t,M,tt,Xe,F,de.predicate,xt,je&&Sn?Sn:void 0,ir);is&&is.placeable&&ur.verticalIconBox?(ss=zo(ur.verticalIconBox),Un=ss.placeable):(ss=zo(ur.iconBox),Un=ss.placeable),En=En&&ss.offscreen}const Wh=Se||zt.numHorizontalGlyphVertices===0&&zt.numVerticalGlyphVertices===0,Zh=Ce||zt.numIconVertices===0;Wh||Zh?Zh?Wh||(Un=Un&&kn):kn=Un&&kn:Un=kn=Un&&kn;const Nu=Un&&ss.placeable;if(kn&&vn.placeable&&this.collisionIndex.insertCollisionBox(vn.box,Te,v.get("text-ignore-placement"),p.bucketInstanceId,is&&is.placeable&&ic?ic:Ta,de.ID),Nu&&this.collisionIndex.insertCollisionBox(ss.box,$e,v.get("icon-ignore-placement"),p.bucketInstanceId,sc,de.ID),fs&&kn&&this.collisionIndex.insertCollisionCircles(fs.circles,Te,v.get("text-ignore-placement"),p.bucketInstanceId,Ta,de.ID),f&&this.storeCollisionData(p.bucketInstanceId,sn,ur,vn,ss,fs),zt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[zt.crossTileID]=new Ha((kn||Ft)&&!(vn!=null&&vn.occluded),(Un||vt)&&!(ss!=null&&ss.occluded),En||p.justReloaded),l[zt.crossTileID]=!0};if(ut){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const zt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ur=zt.length-1;ur>=0;--ur){const sn=zt[ur];nr(p.symbolInstances.get(sn),p.collisionArrays[sn],sn)}}else for(let zt=n.symbolInstanceStart;zt<n.symbolInstanceEnd;zt++)nr(p.symbolInstances.get(zt),p.collisionArrays[zt],zt);p.justReloaded=!1}storeCollisionData(n,l,f,p,v,C){if(f.textBox||f.iconBox){let F,M;this.collisionBoxArrays.has(n)?F=this.collisionBoxArrays.get(n):(F=new Map,this.collisionBoxArrays.set(n,F)),F.has(l)?M=F.get(l):(M={text:null,icon:null},F.set(l,M)),f.textBox&&(M.text=p.box),f.iconBox&&(M.icon=v.box)}if(C){let F=this.collisionCircleArrays[n];F===void 0&&(F=this.collisionCircleArrays[n]=[]);for(let M=0;M<C.circles.length;M+=4)F.push(C.circles[M+0]-ri),F.push(C.circles[M+1]-ri),F.push(C.circles[M+2]),F.push(C.collisionDetected?1:0)}}markUsedJustification(n,l,f,p){let v;v=p===o.an.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[o.aF(l)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const F of C)F>=0&&(n.text.placedSymbolArray.get(F).crossTileID=v>=0&&F!==v?0:f.crossTileID)}markUsedOrientation(n,l,f){const p=l===o.an.horizontal||l===o.an.horizontalOnly?l:0,v=l===o.an.vertical?l:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const F of C)n.text.placedSymbolArray.get(F).placedOrientation=p;f.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const p=l?l.symbolFadeChange(n):1,v=l?l.opacities:{},C=l?l.variableOffsets:{},F=l?l.placedOrientations:{};for(const M in this.placements){const O=this.placements[M],V=v[M];V?(this.opacities[M]=new Oi(V,p,O.text,O.icon),f=f||O.text!==V.text.placed||O.icon!==V.icon.placed):(this.opacities[M]=new Oi(null,p,O.text,O.icon,O.skipFade),f=f||O.text||O.icon)}for(const M in v){const O=v[M];if(!this.opacities[M]){const V=new Oi(O,p,!1,!1);V.isHidden()||(this.opacities[M]=V,f=f||O.text.placed||O.icon.placed)}}for(const M in C)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=C[M]);for(const M in F)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=F[M]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:n)}updateLayerOpacities(n,l){const f={};for(const p of l){const v=p.getBucket(n);v&&p.latestFeatureIndex&&n.id===v.layerIds[0]&&this.updateBucketOpacities(v,p.tileID,f,p.collisionBoxArray)}}updateBucketOpacities(n,l,f,p){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const v=n.layers[0],C=v.layout,F=new Oi(null,0,!1,!1,!0),M=C.get("text-allow-overlap"),O=C.get("icon-allow-overlap"),V=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),q=C.get("text-rotation-alignment")==="map",$=C.get("text-pitch-alignment")==="map",Y=C.get("icon-text-fit")!=="none",de=new Oi(null,0,M&&(O||!n.hasIconData()||C.get("icon-optional")),O&&(M||!n.hasTextData()||C.get("text-optional")),!0);!n.collisionArrays&&p&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(p);const Se=(Te,De,$e)=>{for(let He=0;He<De/4;He++)Te.opacityVertexArray.emplaceBack($e);Te.hasVisibleVertices=Te.hasVisibleVertices||$e!==ra},Ce=this.collisionBoxArrays.get(n.bucketInstanceId);for(let Te=0;Te<n.symbolInstances.length;Te++){const De=n.symbolInstances.get(Te),{numHorizontalGlyphVertices:$e,numVerticalGlyphVertices:He,crossTileID:Xe}=De;let tt=this.opacities[Xe];f[Xe]?tt=F:tt||(tt=de,this.opacities[Xe]=tt),f[Xe]=!0;const je=De.numIconVertices>0,ut=this.placedOrientations[De.crossTileID],Ft=ut===o.an.vertical,vt=ut===o.an.horizontal||ut===o.an.horizontalOnly;if($e>0||He>0){const xt=Po(tt.text);Se(n.text,$e,Ft?ra:xt),Se(n.text,He,vt?ra:xt);const ir=tt.text.isHidden();[De.rightJustifiedTextSymbolIndex,De.centerJustifiedTextSymbolIndex,De.leftJustifiedTextSymbolIndex].forEach(ur=>{ur>=0&&(n.text.placedSymbolArray.get(ur).hidden=ir||Ft?1:0)}),De.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(De.verticalPlacedTextSymbolIndex).hidden=ir||vt?1:0);const nr=this.variableOffsets[De.crossTileID];nr&&this.markUsedJustification(n,nr.anchor,De,ut);const zt=this.placedOrientations[De.crossTileID];zt&&(this.markUsedJustification(n,"left",De,zt),this.markUsedOrientation(n,zt,De))}if(je){const xt=Po(tt.icon),ir=!(Y&&De.verticalPlacedIconSymbolIndex&&Ft);De.placedIconSymbolIndex>=0&&(Se(n.icon,De.numIconVertices,ir?xt:ra),n.icon.placedSymbolArray.get(De.placedIconSymbolIndex).hidden=tt.icon.isHidden()),De.verticalPlacedIconSymbolIndex>=0&&(Se(n.icon,De.numVerticalIconVertices,ir?ra:xt),n.icon.placedSymbolArray.get(De.verticalPlacedIconSymbolIndex).hidden=tt.icon.isHidden())}const _t=Ce&&Ce.has(Te)?Ce.get(Te):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const xt=n.collisionArrays[Te];if(xt){let ir=new o.P(0,0);if(xt.textBox||xt.verticalTextBox){let nr=!0;if(V){const zt=this.variableOffsets[Xe];zt?(ir=Tc(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),q&&ir._rotate($?-this.transform.bearingInRadians:this.transform.bearingInRadians)):nr=!1}if(xt.textBox||xt.verticalTextBox){let zt;xt.textBox&&(zt=Ft),xt.verticalTextBox&&(zt=vt),Xl(n.textCollisionBox.collisionVertexArray,tt.text.placed,!nr||zt,_t.text,ir.x,ir.y)}}if(xt.iconBox||xt.verticalIconBox){const nr=!!(!vt&&xt.verticalIconBox);let zt;xt.iconBox&&(zt=nr),xt.verticalIconBox&&(zt=!nr),Xl(n.iconCollisionBox.collisionVertexArray,tt.icon.placed,zt,_t.icon,Y?ir.x:0,Y?ir.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,l){const f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>n}setStale(){this.stale=!0}}function Xl(y,n,l,f,p,v){f&&f.length!==0||(f=[0,0,0,0]);const C=f[0]-ri,F=f[1]-ri,M=f[2]-ri,O=f[3]-ri;y.emplaceBack(n?1:0,l?1:0,p||0,v||0,C,F),y.emplaceBack(n?1:0,l?1:0,p||0,v||0,M,F),y.emplaceBack(n?1:0,l?1:0,p||0,v||0,M,O),y.emplaceBack(n?1:0,l?1:0,p||0,v||0,C,O)}const To=Math.pow(2,25),ba=Math.pow(2,24),Fi=Math.pow(2,17),Pc=Math.pow(2,16),Lc=Math.pow(2,9),lo=Math.pow(2,8),xl=Math.pow(2,1);function Po(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const n=y.placed?1:0,l=Math.floor(127*y.opacity);return l*To+n*ba+l*Fi+n*Pc+l*Lc+n*lo+l*xl+n}const ra=0;class Ti{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,l,f,p,v){const C=this._bucketParts;for(;this._currentTileIndex<n.length;)if(l.getBucketParts(C,p,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((F,M)=>F.sortKey-M.sortKey));this._currentPartIndex<C.length;)if(l.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class OA{constructor(n,l,f,p,v,C,F,M){this.placement=new wl(n,l,C,F,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(n,l,f){const p=P.now(),v=()=>!this._forceFullPlacement&&P.now()-p>2;for(;this._currentPlacementIndex>=0;){const C=l[n[this._currentPlacementIndex]],F=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=F)&&(!C.maxzoom||C.maxzoom>F)){if(this._inProgressLayer||(this._inProgressLayer=new Ti(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const bl=512/o.$/2;class Mc{constructor(n,l,f){this.tileID=n,this.bucketInstanceId=f,this._symbolsByKey={};const p=new Map;for(let v=0;v<l.length;v++){const C=l.get(v),F=C.key,M=p.get(F);M?M.push(C):p.set(F,[C])}for(const[v,C]of p){const F={positions:C.map(M=>({x:Math.floor(M.anchorX*bl),y:Math.floor(M.anchorY*bl)})),crossTileIDs:C.map(M=>M.crossTileID)};if(F.positions.length>128){const M=new o.aH(F.positions.length,16,Uint16Array);for(const{x:O,y:V}of F.positions)M.add(O,V);M.finish(),delete F.positions,F.index=M}this._symbolsByKey[v]=F}}getScaledCoordinates(n,l){const{x:f,y:p,z:v}=this.tileID.canonical,{x:C,y:F,z:M}=l.canonical,O=bl/Math.pow(2,M-v),V=(F*o.$+n.anchorY)*O,q=p*o.$*bl;return{x:Math.floor((C*o.$+n.anchorX)*O-f*o.$*bl),y:Math.floor(V-q)}}findMatches(n,l,f){const p=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let v=0;v<n.length;v++){const C=n.get(v);if(C.crossTileID)continue;const F=this._symbolsByKey[C.key];if(!F)continue;const M=this.getScaledCoordinates(C,l);if(F.index){const O=F.index.range(M.x-p,M.y-p,M.x+p,M.y+p).sort();for(const V of O){const q=F.crossTileIDs[V];if(!f[q]){f[q]=!0,C.crossTileID=q;break}}}else if(F.positions)for(let O=0;O<F.positions.length;O++){const V=F.positions[O],q=F.crossTileIDs[O];if(Math.abs(V.x-M.x)<=p&&Math.abs(V.y-M.y)<=p&&!f[q]){f[q]=!0,C.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class kc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class na{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const l=Math.round((n-this.lng)/360);if(l!==0)for(const f in this.indexes){const p=this.indexes[f],v={};for(const C in p){const F=p[C];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+l),v[F.tileID.key]=F}this.indexes[f]=v}this.lng=n}addBucket(n,l,f){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let v=0;v<l.symbolInstances.length;v++)l.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const p=this.usedCrossTileIDs[n.overscaledZ];for(const v in this.indexes){const C=this.indexes[v];if(Number(v)>n.overscaledZ)for(const F in C){const M=C[F];M.tileID.isChildOf(n)&&M.findMatches(l.symbolInstances,n,p)}else{const F=C[n.scaledTo(Number(v)).key];F&&F.findMatches(l.symbolInstances,n,p)}}for(let v=0;v<l.symbolInstances.length;v++){const C=l.symbolInstances.get(v);C.crossTileID||(C.crossTileID=f.generate(),p[C.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Mc(n,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(n,l){for(const f of l.getCrossTileIDsLists())for(const p of f)delete this.usedCrossTileIDs[n][p]}removeStaleBuckets(n){let l=!1;for(const f in this.indexes){const p=this.indexes[f];for(const v in p)n[p[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,p[v]),delete p[v],l=!0)}return l}}class Yl{constructor(){this.layerIndexes={},this.crossTileIDs=new kc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,l,f){let p=this.layerIndexes[n.id];p===void 0&&(p=this.layerIndexes[n.id]=new na);let v=!1;const C={};p.handleWrapJump(f);for(const F of l){const M=F.getBucket(n);M&&n.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(F.tileID,M,this.crossTileIDs)&&(v=!0),C[M.bucketInstanceId]=!0)}return p.removeStaleBuckets(C)&&(v=!0),v}pruneUnusedLayers(n){const l={};n.forEach(f=>{l[f]=!0});for(const f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}var Jl="void main() {fragColor=vec4(1.0);}";const ws={prelude:nn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:nn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:nn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:nn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:nn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:nn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:nn(Jl,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:nn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:nn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:nn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:nn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:nn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:nn(Jl,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:nn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:nn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:nn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:nn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:nn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:nn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:nn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:nn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:nn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:nn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:nn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:nn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:nn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:nn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:nn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:nn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function nn(y,n){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=n.match(/in ([\w]+) ([\w]+)/g),p=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=v?v.concat(p):p,F={};return{fragmentSource:y=y.replace(l,(M,O,V,q,$)=>(F[$]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${$}
in ${V} ${q} ${$};
#else
uniform ${V} ${q} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${V} ${q} ${$} = u_${$};
#endif
`)),vertexSource:n=n.replace(l,(M,O,V,q,$)=>{const Y=q==="float"?"vec2":"vec4",de=$.match(/color/)?"color":Y;return F[$]?O==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${V} ${Y} a_${$};
out ${V} ${q} ${$};
#else
uniform ${V} ${q} u_${$};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${V} ${q} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${de}(a_${$}, u_${$}_t);
#else
    ${V} ${q} ${$} = u_${$};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${V} ${Y} a_${$};
#else
uniform ${V} ${q} u_${$};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${V} ${q} ${$} = a_${$};
#else
    ${V} ${q} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${V} ${q} ${$} = unpack_mix_${de}(a_${$}, u_${$}_t);
#else
    ${V} ${q} ${$} = u_${$};
#endif
`}),staticAttributes:f,staticUniforms:C}}class ia{constructor(n,l,f){this.vertexBuffer=n,this.indexBuffer=l,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var sa=o.aI([{name:"a_pos",type:"Int16",components:2}]);const ja="#define PROJECTION_MERCATOR",eA="mercator";class Va{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return eA}get shaderDefine(){return ja}get shaderPreludeCode(){return ws.projectionMercator}get vertexShaderPreludeCode(){return ws.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,l,f,p,v){if(this._cachedMesh)return this._cachedMesh;const C=new o.aK;C.emplaceBack(0,0),C.emplaceBack(o.$,0),C.emplaceBack(0,o.$),C.emplaceBack(o.$,o.$);const F=n.createVertexBuffer(C,sa.members),M=o.aL.simpleSegment(0,0,4,2),O=new o.aM;O.emplaceBack(1,0,2),O.emplaceBack(1,2,3);const V=n.createIndexBuffer(O);return this._cachedMesh=new ia(F,V,M),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class Zi{constructor(n=0,l=0,f=0,p=0){if(isNaN(n)||n<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=l,this.left=f,this.right=p}interpolate(n,l,f){return l.top!=null&&n.top!=null&&(this.top=o.C.number(n.top,l.top,f)),l.bottom!=null&&n.bottom!=null&&(this.bottom=o.C.number(n.bottom,l.bottom,f)),l.left!=null&&n.left!=null&&(this.left=o.C.number(n.left,l.left,f)),l.right!=null&&n.right!=null&&(this.right=o.C.number(n.right,l.right,f)),this}getCenter(n,l){const f=o.ag((this.left+n-this.right)/2,0,n),p=o.ag((this.top+l-this.bottom)/2,0,l);return new o.P(f,p)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Zi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function oa(y,n){if(!y.renderWorldCopies||y.lngRange)return;const l=n.lng-y.center.lng;n.lng+=l>180?-360:l<-180?360:0}function en(y){return Math.max(0,Math.floor(y))}class Ka{constructor(n,l,f,p,v,C){this._callbacks=n,this._tileSize=512,this._renderWorldCopies=C===void 0||!!C,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=p??0,this._maxPitch=v??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=en(this._zoom),this._scale=o.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Zi,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,l,f){this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=en(this._zoom),this._scale=o.ae(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new Zi(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!f&&n.autoCalculateNearFarZ,l&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const l=o.aN(n,-180,180)*Math.PI/180;var f,p,v,C,F,M,O,V,q;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=w(),f=this._rotationMatrix,v=-this._bearingInRadians,C=(p=this._rotationMatrix)[0],F=p[1],M=p[2],O=p[3],V=Math.sin(v),q=Math.cos(v),f[0]=C*q+M*V,f[1]=F*q+O*V,f[2]=C*-V+M*q,f[3]=F*-V+O*q)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const l=o.ag(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const l=n/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aO(this._fovInRadians)}setFov(n){n=o.ag(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=o.ad(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const l=this.getConstrained(this._center,n).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=o.ae(l),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,l){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,l,f){this._unmodified=!1,this._edgeInsets.interpolate(n,l,f),this._constrain(),this._calcMatrices()}resize(n,l,f=!0){this._width=n,this._height=l,f&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Gt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ah,o.ah])}getConstrained(n,l){return this._callbacks.getConstrained(n,l)}getCameraQueryGeometry(n,l){if(l.length===1)return[l[0],n];{const{minX:f,minY:p,maxX:v,maxY:C}=o.a1.fromPoints(l).extend(n);return[new o.P(f,p),new o.P(v,p),new o.P(v,C),new o.P(f,C),new o.P(f,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:l,zoom:f}=this.getConstrained(this.center,this.zoom);this.setCenter(l),this.setZoom(f),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=o.af(new Float64Array(16));o.N(n,n,[this._width/2,-this._height/2,1]),o.M(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=o.af(new Float64Array(16)),o.N(n,n,[1,-1,1]),o.M(n,n,[-1,-1,0]),o.N(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,l,f,p){const v=f!==void 0?f:this.bearing,C=p=p!==void 0?p:this.pitch,F=o.a0.fromLngLat(n,l),M=-Math.cos(o.ad(C)),O=Math.sin(o.ad(C)),V=O*Math.sin(o.ad(v)),q=-O*Math.cos(o.ad(v));let $=this.elevation;const Y=l-$;let de;M*Y>=0||Math.abs(M)<.1?(de=1e4,$=l+de*M):de=-Y/M;let Se,Ce,Te=o.aP(1,F.y),De=0;do{if(De+=1,De>10)break;Ce=de/Te,Se=new o.a0(F.x+V*Ce,F.y+q*Ce),Te=1/Se.meterInMercatorCoordinateUnits()}while(Math.abs(de-Ce*Te)>1e-12);return{center:Se.toLngLat(),elevation:$,zoom:o.aj(this.height/2/Math.tan(this.fovInRadians/2)/Ce/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const l=o.ai(1,this.center.lat)*this.worldSize,f=this.cameraToCenterDistance/l,p=o.a0.fromLngLat(this.center,this.elevation),v=Ue(this.center,this.elevation,this.pitch,this.bearing,f);this._elevation=n;const C=this.calculateCenterFromCameraLngLatAlt(v.toLngLat(),o.aP(v.z,p.y),this.bearing,this.pitch);this._elevation=C.elevation,this._center=C.center,this.setZoom(C.zoom)}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=o.ai(1,this.center.lat)*this.worldSize;return Ue(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const l=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/l,n.canonical.y/l,1/l/o.$,1/l/o.$]}}class Yr{constructor(n,l){this.min=n,this.max=l,this.center=o.aQ([],o.aR([],this.min,this.max),.5)}quadrant(n){const l=[n%2==0,n<2],f=o.aS(this.min),p=o.aS(this.max);for(let v=0;v<l.length;v++)f[v]=l[v]?this.min[v]:this.center[v],p[v]=l[v]?this.center[v]:this.max[v];return p[2]=this.max[2],new Yr(f,p)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let l=!0;for(let f=0;f<n.planes.length;f++){const p=this.intersectsPlane(n.planes[f]);if(p===0)return 0;p===1&&(l=!1)}return l?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let l=n[3],f=n[3];for(let p=0;p<3;p++)n[p]>0?(l+=n[p]*this.min[p],f+=n[p]*this.max[p]):(f+=n[p]*this.min[p],l+=n[p]*this.max[p]);return l>=0?2:f<0?0:1}}class Uc{distanceToTile2d(n,l,f,p){const v=p.distanceX([n,l]),C=p.distanceY([n,l]);return Math.hypot(v,C)}getWrap(n,l,f){return f}getTileBoundingVolume(n,l,f,p){var v,C;let F=f,M=f;if(p!=null&&p.terrain){const V=new o.Z(n.z,l,n.z,n.x,n.y),q=p.terrain.getMinMaxElevation(V);F=(v=q.minElevation)!==null&&v!==void 0?v:f,M=(C=q.maxElevation)!==null&&C!==void 0?C:f}const O=1<<n.z;return new Yr([l+n.x/O,n.y/O,F],[l+(n.x+1)/O,(n.y+1)/O,M])}allowVariableZoom(n,l){const f=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,p=o.ag(78.5-f/2,0,60);return!!l.terrain||n.pitch>p}allowWorldCopies(){return!0}prepareNextFrame(){}}class cs{constructor(n,l,f){this.points=n,this.planes=l,this.aabb=f}static fromInvProjectionMatrix(n,l=1,f=0,p,v){const C=v?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],F=Math.pow(2,f),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($=>function(Y,de,Se,Ce){const Te=o.av([],Y,de),De=1/Te[3]/Se*Ce;return o.aX(Te,Te,[De,De,1/Te[3],De])}($,n,l,F));p&&function($,Y,de,Se){const Ce=Se?4:0,Te=Se?0:4;let De=0;const $e=[],He=[];for(let je=0;je<4;je++){const ut=o.aT([],$[je+Te],$[je+Ce]),Ft=o.aY(ut);o.aQ(ut,ut,1/Ft),$e.push(Ft),He.push(ut)}for(let je=0;je<4;je++){const ut=o.aZ($[je+Ce],He[je],de);De=ut!==null&&ut>=0?Math.max(De,ut):Math.max(De,$e[je])}const Xe=function(je,ut){const Ft=o.aT([],je[ut[0]],je[ut[1]]),vt=o.aT([],je[ut[2]],je[ut[1]]),_t=[0,0,0,0];return o.aU(_t,o.aV([],Ft,vt)),_t[3]=-o.aW(_t,je[ut[0]]),_t}($,Y),tt=function(je,ut){const Ft=o.a_(je),vt=o.a$([],je,1/Ft),_t=o.aT([],ut,o.aQ([],vt,o.aW(ut,vt))),xt=o.a_(_t);if(xt>0){const ir=Math.sqrt(1-vt[3]*vt[3]),nr=o.aQ([],vt,-vt[3]),zt=o.aR([],nr,o.aQ([],_t,ir/xt));return o.b0(ut,zt)}return null}(de,Xe);if(tt!==null){const je=tt/o.aW(He[0],Xe);De=Math.min(De,je)}for(let je=0;je<4;je++){const ut=Math.min(De,$e[je]);$[je+Te]=[$[je+Ce][0]+He[je][0]*ut,$[je+Ce][1]+He[je][1]*ut,$[je+Ce][2]+He[je][2]*ut,1]}}(M,C[0],p,v);const O=C.map($=>{const Y=o.aT([],M[$[0]],M[$[1]]),de=o.aT([],M[$[2]],M[$[1]]),Se=o.aU([],o.aV([],Y,de)),Ce=-o.aW(Se,M[$[1]]);return Se.concat(Ce)}),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],q=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const $ of M)for(let Y=0;Y<3;Y++)V[Y]=Math.min(V[Y],$[Y]),q[Y]=Math.max(q[Y],$[Y]);return new cs(M,O,new Yr(V,q))}}class wi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,f){return this._helper.interpolatePadding(n,l,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l,f=!0){this._helper.resize(n,l,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,l){}constructor(n,l,f,p,v){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ka({calcMatrices:()=>{this._calcMatrices()},getConstrained:(C,F)=>this.getConstrained(C,F)},n,l,f,p,v),this._coveringTilesDetailsProvider=new Uc}clone(){const n=new wi;return n.apply(this),n}apply(n,l,f){this._helper.apply(n,l,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const l=[new o.b1(0,n)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new o.P(0,0)),p=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),v=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),C=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),F=Math.floor(Math.min(f.x,p.x,v.x,C.x)),M=Math.floor(Math.max(f.x,p.x,v.x,C.x)),O=1;for(let V=F-O;V<=M+O;V++)V!==0&&l.push(new o.b1(V,n))}return l}getCameraFrustum(){return cs.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const l=this.screenPointToLocation(this.centerPoint,n),f=n?n.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(n,l){const f=o.ai(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(l,f),v=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),C=o.a0.fromLngLat(n),F=new o.a0(C.x-(p.x-v.x),C.y-(p.y-v.y));this.setCenter(F==null?void 0:F.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,l){return l?this.coordinatePoint(o.a0.fromLngLat(n),l.getElevationForLngLatZoom(n,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a0.fromLngLat(n))}screenPointToLocation(n,l){var f;return(f=this.screenPointToMercatorCoordinate(n,l))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(n,l){if(l){const f=l.pointCoordinate(n);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,l){const f=l||0,p=[n.x,n.y,0,1],v=[n.x,n.y,1,1];o.av(p,p,this._pixelMatrixInverse),o.av(v,v,this._pixelMatrixInverse);const C=p[3],F=v[3],M=p[1]/C,O=v[1]/F,V=p[2]/C,q=v[2]/F,$=V===q?0:(f-V)/(q-V);return new o.a0(o.C.number(p[0]/C,v[0]/F,$)/this.worldSize,o.C.number(M,O,$)/this.worldSize,f)}coordinatePoint(n,l=0,f=this._pixelMatrix){const p=[n.x*this.worldSize,n.y*this.worldSize,l,1];return o.av(p,p,f),new o.P(p[0]/p[3],p[1]/p[3])}getBounds(){const n=Math.max(0,this._helper._height/2-se(this));return new Gt().extend(this.screenPointToLocation(new o.P(0,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(n,l){return l?l.pointCoordinate(n)!=null:n.y>this.height/2-se(this)}calculatePosMatrix(n,l=!1,f){var p;const v=(p=n.key)!==null&&p!==void 0?p:o.b2(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),C=l?this._alignedPosMatrixCache:this._posMatrixCache;if(C.has(v)){const O=C.get(v);return f?O.f32:O.f64}const F=ve(n,this.worldSize);o.O(F,l?this._alignedProjMatrix:this._viewProjMatrix,F);const M={f64:F,f32:new Float32Array(F)};return C.set(v,M),f?M.f32:M.f64}calculateFogMatrix(n){const l=n.key,f=this._fogMatrixCacheF32;if(f.has(l))return f.get(l);const p=ve(n,this.worldSize);return o.O(p,this._fogMatrix,p),f.set(l,new Float32Array(p)),f.get(l)}getConstrained(n,l){l=o.ag(+l,this.minZoom,this.maxZoom);const f={center:new o.S(n.lng,n.lat),zoom:l};let p=this._helper._lngRange;if(!this._helper._renderWorldCopies&&p===null){const $e=179.9999999999;p=[-$e,$e]}const v=this.tileSize*o.ae(f.zoom);let C=0,F=v,M=0,O=v,V=0,q=0;const{x:$,y:Y}=this.size;if(this._helper._latRange){const $e=this._helper._latRange;C=o.U($e[1])*v,F=o.U($e[0])*v,F-C<Y&&(V=Y/(F-C))}p&&(M=o.aN(o.V(p[0])*v,0,v),O=o.aN(o.V(p[1])*v,0,v),O<M&&(O+=v),O-M<$&&(q=$/(O-M)));const{x:de,y:Se}=ot(v,n);let Ce,Te;const De=Math.max(q||0,V||0);if(De){const $e=new o.P(q?(O+M)/2:de,V?(F+C)/2:Se);return f.center=le(v,$e).wrap(),f.zoom+=o.aj(De),f}if(this._helper._latRange){const $e=Y/2;Se-$e<C&&(Te=C+$e),Se+$e>F&&(Te=F-$e)}if(p){const $e=(M+O)/2;let He=de;this._helper._renderWorldCopies&&(He=o.aN(de,$e-v/2,$e+v/2));const Xe=$/2;He-Xe<M&&(Ce=M+Xe),He+Xe>O&&(Ce=O-Xe)}if(Ce!==void 0||Te!==void 0){const $e=new o.P(Ce??de,Te??Se);f.center=le(v,$e).wrap()}return f}calculateCenterFromCameraLngLatAlt(n,l,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,f,p)}_calculateNearFarZIfNeeded(n,l,f){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),v=n-p*this._helper._pixelPerMeter/Math.cos(l),C=p<0?v:n,F=Math.PI/2+this.pitchInRadians,M=o.ad(this.fov)*(Math.abs(Math.cos(o.ad(this.roll)))*this.height+Math.abs(Math.sin(o.ad(this.roll)))*this.width)/this.height*(.5+f.y/this.height),O=Math.sin(M)*C/Math.sin(o.ag(Math.PI-F-M,.01,Math.PI-.01)),V=se(this),q=Math.atan(V/this._helper.cameraToCenterDistance),$=o.ad(.75),Y=q>$?2*q*(.5+f.y/(2*V)):$,de=Math.sin(Y)*C/Math.sin(o.ag(Math.PI-F-Y,.01,Math.PI-.01)),Se=Math.min(O,de);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*Se+C),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,l=ot(this.worldSize,this.center),f=l.x,p=l.y;this._helper._pixelPerMeter=o.ai(1,this.center.lat)*this.worldSize;const v=o.ad(Math.min(this.pitch,br)),C=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(v));let F;this._calculateNearFarZIfNeeded(C,v,n),F=new Float64Array(16),o.b3(F,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.ap(this._invProjMatrix,F),F[8]=2*-n.x/this._helper._width,F[9]=2*n.y/this._helper._height,this._projectionMatrix=o.b4(F),o.N(F,F,[1,-1,1]),o.M(F,F,[0,0,-this._helper.cameraToCenterDistance]),o.b5(F,F,-this.rollInRadians),o.b6(F,F,this.pitchInRadians),o.b5(F,F,-this.bearingInRadians),o.M(F,F,[-f,-p,0]),this._mercatorMatrix=o.N([],F,[this.worldSize,this.worldSize,this.worldSize]),o.N(F,F,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,F),o.M(F,F,[0,0,-this.elevation]),this._viewProjMatrix=F,this._invViewProjMatrix=o.ap([],F);const M=[0,0,-1,1];o.av(M,M,this._invViewProjMatrix),this._cameraPosition=[M[0]/M[3],M[1]/M[3],M[2]/M[3]],this._fogMatrix=new Float64Array(16),o.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,C,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-f,-p,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,F);const O=this._helper._width%2/2,V=this._helper._height%2/2,q=Math.cos(this.bearingInRadians),$=Math.sin(-this.bearingInRadians),Y=f-Math.round(f)+q*O+$*V,de=p-Math.round(p)+q*V+$*O,Se=new Float64Array(F);if(o.M(Se,Se,[Y>.5?Y-1:Y,de>.5?de-1:de,0]),this._alignedProjMatrix=Se,F=o.ap(new Float64Array(16),this._pixelMatrix),!F)throw new Error("failed to invert matrix");this._pixelMatrixInverse=F,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new o.P(0,0)),l=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.av(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=o.ai(1,this.center.lat)*this.worldSize;return Ue(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,l){const f=o.a0.fromLngLat(n),p=[f.x*this.worldSize,f.y*this.worldSize,l,1];return o.av(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(n){const{overscaledTileID:l,aligned:f,applyTerrainMatrix:p}=n,v=this._helper.getMercatorTileCoordinates(l),C=l?this.calculatePosMatrix(l,f,!0):null;let F;return F=l&&l.terrainRttPosMatrix32f&&p?l.terrainRttPosMatrix32f:C||o.b7(),{mainMatrix:F,tileMercatorCoords:v,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:F}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,l,f){return 1}transformLightDirection(n){return o.aS(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,l,f,p){const v=this.calculatePosMatrix(f);let C;p?(C=[n,l,p(n,l),1],o.av(C,C,v)):(C=[n,l,0,1],za(C,C,v));const F=C[3];return{point:new o.P(C[0]/F,C[1]/F),signedDistanceFromCamera:F,isOccluded:!1}}populateCache(n){for(const l of n)this.calculatePosMatrix(l)}getMatrixForModel(n,l){const f=o.a0.fromLngLat(n,l),p=f.meterInMercatorCoordinateUnits(),v=o.b8();return o.M(v,v,[f.x,f.y,f.z]),o.b5(v,v,Math.PI),o.b6(v,v,Math.PI/2),o.N(v,v,[-p,p,p]),v}getProjectionDataForCustomLayer(n=!0){const l=new o.Z(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:n}),p=ve(l,this.worldSize);o.O(p,this._viewProjMatrix,p),f.tileMercatorCoords=[0,0,1,1];const v=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],C=o.b9();return o.N(C,p,v),f.fallbackMatrix=C,f.mainMatrix=C,f}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function us(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Yn(y){if(y.useSlerp)if(y.k<1){const n=o.ba(y.startEulerAngles.roll,y.startEulerAngles.pitch,y.startEulerAngles.bearing),l=o.ba(y.endEulerAngles.roll,y.endEulerAngles.pitch,y.endEulerAngles.bearing),f=new Float64Array(4);o.bb(f,n,l,y.k);const p=o.bc(f);y.tr.setRoll(p.roll),y.tr.setPitch(p.pitch),y.tr.setBearing(p.bearing)}else y.tr.setRoll(y.endEulerAngles.roll),y.tr.setPitch(y.endEulerAngles.pitch),y.tr.setBearing(y.endEulerAngles.bearing);else y.tr.setRoll(o.C.number(y.startEulerAngles.roll,y.endEulerAngles.roll,y.k)),y.tr.setPitch(o.C.number(y.startEulerAngles.pitch,y.endEulerAngles.pitch,y.k)),y.tr.setBearing(o.C.number(y.startEulerAngles.bearing,y.endEulerAngles.bearing,y.k))}function Ln(y,n,l,f,p){const v=p.padding,C=ot(p.worldSize,l.getNorthWest()),F=ot(p.worldSize,l.getNorthEast()),M=ot(p.worldSize,l.getSouthEast()),O=ot(p.worldSize,l.getSouthWest()),V=o.ad(-f),q=C.rotate(V),$=F.rotate(V),Y=M.rotate(V),de=O.rotate(V),Se=new o.P(Math.max(q.x,$.x,de.x,Y.x),Math.max(q.y,$.y,de.y,Y.y)),Ce=new o.P(Math.min(q.x,$.x,de.x,Y.x),Math.min(q.y,$.y,de.y,Y.y)),Te=Se.sub(Ce),De=(p.width-(v.left+v.right+n.left+n.right))/Te.x,$e=(p.height-(v.top+v.bottom+n.top+n.bottom))/Te.y;if($e<0||De<0)return void us();const He=Math.min(o.aj(p.scale*Math.min(De,$e)),y.maxZoom),Xe=o.P.convert(y.offset),tt=new o.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(o.ad(f)),je=Xe.add(tt).mult(p.scale/o.ae(He));return{center:le(p.worldSize,C.add(M).div(2).sub(je)),zoom:He,bearing:f}}class zA{get useGlobeControls(){return!1}handlePanInertia(n,l){return{easingOffset:n,easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(n,l){n.bearingDelta&&l.setBearing(l.bearing+n.bearingDelta),n.pitchDelta&&l.setPitch(l.pitch+n.pitchDelta),n.rollDelta&&l.setRoll(l.roll+n.rollDelta),n.zoomDelta&&l.setZoom(l.zoom+n.zoomDelta)}handleMapControlsPan(n,l,f){n.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(f,n.around)}cameraForBoxAndBearing(n,l,f,p,v){return Ln(n,l,f,p,v)}handleJumpToCenterZoom(n,l){n.zoom!==(l.zoom!==void 0?+l.zoom:n.zoom)&&n.setZoom(+l.zoom),l.center!==void 0&&n.setCenter(o.S.convert(l.center))}handleEaseTo(n,l){const f=n.zoom,p=n.padding,v={roll:n.roll,pitch:n.pitch,bearing:n.bearing},C={roll:l.roll===void 0?n.roll:l.roll,pitch:l.pitch===void 0?n.pitch:l.pitch,bearing:l.bearing===void 0?n.bearing:l.bearing},F=l.zoom!==void 0,M=!n.isPaddingEqual(l.padding);let O=!1;const V=F?+l.zoom:n.zoom;let q=n.centerPoint.add(l.offsetAsPoint);const $=n.screenPointToLocation(q),{center:Y,zoom:de}=n.getConstrained(o.S.convert(l.center||$),V??f);oa(n,Y);const Se=ot(n.worldSize,$),Ce=ot(n.worldSize,Y).sub(Se),Te=o.ae(de-f);return O=de!==f,{easeFunc:De=>{if(O&&n.setZoom(o.C.number(f,de,De)),o.bd(v,C)||Yn({startEulerAngles:v,endEulerAngles:C,tr:n,k:De,useSlerp:v.roll!=C.roll}),M&&(n.interpolatePadding(p,l.padding,De),q=n.centerPoint.add(l.offsetAsPoint)),l.around)n.setLocationAtPoint(l.around,l.aroundPoint);else{const $e=o.ae(n.zoom-f),He=de>f?Math.min(2,Te):Math.max(.5,Te),Xe=Math.pow(He,1-De),tt=le(n.worldSize,Se.add(Ce.mult(De*Xe)).mult($e));n.setLocationAtPoint(n.renderWorldCopies?tt.wrap():tt,q)}},isZooming:O,elevationCenter:Y}}handleFlyTo(n,l){const f=l.zoom!==void 0,p=n.zoom,v=n.getConstrained(o.S.convert(l.center||l.locationAtOffset),f?+l.zoom:p),C=v.center,F=v.zoom;oa(n,C);const M=ot(n.worldSize,l.locationAtOffset),O=ot(n.worldSize,C).sub(M),V=O.mag(),q=o.ae(F-p);let $;if(l.minZoom!==void 0){const Y=Math.min(+l.minZoom,p,F),de=n.getConstrained(C,Y).zoom;$=o.ae(de-p)}return{easeFunc:(Y,de,Se,Ce)=>{n.setZoom(Y===1?F:p+o.aj(de));const Te=Y===1?C:le(n.worldSize,M.add(O.mult(Se)).mult(de));n.setLocationAtPoint(n.renderWorldCopies?Te.wrap():Te,Ce)},scaleOfZoom:q,targetCenter:C,scaleOfMinZoom:$,pixelPathLength:V}}}class pn{constructor(n,l,f){this.blendFunction=n,this.blendColor=l,this.mask=f}}pn.Replace=[1,0],pn.disabled=new pn(pn.Replace,o.be.transparent,[!1,!1,!1,!1]),pn.unblended=new pn(pn.Replace,o.be.transparent,[!0,!0,!0,!0]),pn.alphaBlended=new pn([1,771],o.be.transparent,[!0,!0,!0,!0]);const Xi=2305;class Kr{constructor(n,l,f){this.enable=n,this.mode=l,this.frontFace=f}}Kr.disabled=new Kr(!1,1029,Xi),Kr.backCCW=new Kr(!0,1029,Xi),Kr.frontCCW=new Kr(!0,1028,Xi);class $r{constructor(n,l,f){this.func=n,this.mask=l,this.range=f}}$r.ReadOnly=!1,$r.ReadWrite=!0,$r.disabled=new $r(519,$r.ReadOnly,[0,1]);const Lo=7680;class Mr{constructor(n,l,f,p,v,C){this.test=n,this.ref=l,this.mask=f,this.fail=p,this.depthFail=v,this.pass=C}}Mr.disabled=new Mr({func:519,mask:0},0,0,Lo,Lo,Lo);const Ga=new WeakMap;function Yi(y){var n;if(Ga.has(y))return Ga.get(y);{const l=(n=y.getParameter(y.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Ga.set(y,l),l}}class Ba{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const l=n.context,f=l.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const p=new o.aK;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const v=new o.aM;v.emplaceBack(0,1,2),this._fullscreenTriangle=new ia(l.createVertexBuffer(p,sa.members),l.createIndexBuffer(v),o.aL.simpleSegment(0,0,p.length,v.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(f.TEXTURE1);const C=f.createTexture();f.bindTexture(f.TEXTURE_2D,C),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(C),Yi(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,l){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,l),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,l=n.gl;n.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,l){const f=this._cachedRenderContext.context,p=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:o.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,p.TRIANGLES,$r.disabled,Mr.disabled,pn.unblended,Kr.disabled,((v,C)=>({u_input:v,u_output_expected:C}))(n,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Yi(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const v=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:v}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Yi(n)){const l=n.clientWaitSync(this._readbackQueue.sync,0,0);if(l===n.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ba._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let l=0;return l+=n[0]/256,l+=n[1]/65536,l+=n[2]/16777216,n[3]<127&&(l=-l),l/128}}const zi=o.$/128;function $a(y,n){const l=y.granularity!==void 0?Math.max(y.granularity,1):1,f=l+(y.generateBorders?2:0),p=l+(y.extendToNorthPole||y.generateBorders?1:0)+(y.extendToSouthPole||y.generateBorders?1:0),v=f+1,C=p+1,F=y.generateBorders?-1:0,M=y.generateBorders||y.extendToNorthPole?-1:0,O=l+(y.generateBorders?1:0),V=l+(y.generateBorders||y.extendToSouthPole?1:0),q=v*C,$=f*p*6,Y=v*C>65536;if(Y&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const de=Y||n==="32bit",Se=new Int16Array(2*q);let Ce=0;for(let $e=M;$e<=V;$e++)for(let He=F;He<=O;He++){let Xe=He/l*o.$;He===-1&&(Xe=-zi),He===l+1&&(Xe=o.$+zi);let tt=$e/l*o.$;$e===-1&&(tt=y.extendToNorthPole?o.bg:-zi),$e===l+1&&(tt=y.extendToSouthPole?o.bh:o.$+zi),Se[Ce++]=Xe,Se[Ce++]=tt}const Te=de?new Uint32Array($):new Uint16Array($);let De=0;for(let $e=0;$e<p;$e++)for(let He=0;He<f;He++){const Xe=He+1+$e*v,tt=He+($e+1)*v,je=He+1+($e+1)*v;Te[De++]=He+$e*v,Te[De++]=tt,Te[De++]=Xe,Te[De++]=Xe,Te[De++]=tt,Te[De++]=je}return{vertices:Se.buffer.slice(0),indices:Te.buffer.slice(0),uses32bitIndices:de}}const Ao=new o.aJ({fill:new o.bi(128,2),line:new o.bi(512,0),tile:new o.bi(128,32),stencil:new o.bi(128,1),circle:3});class tA{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ws.projectionGlobe}get vertexShaderPreludeCode(){return ws.projectionMercator.vertexSource}get subdivisionGranularity(){return Ao}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new Ba(n));const l=o.U(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(l,f),v=P.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=v);const C=Math.min(Math.max((v-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bk(C))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,l,f,p,v){const C=(v==="stencil"?Ao.stencil:Ao.tile).getGranularityForZoomLevel(l.z);return this._getMesh(n,{granularity:C,generateBorders:f,extendToNorthPole:l.y===0&&p,extendToSouthPole:l.y===(1<<l.z)-1&&p})}_getMesh(n,l){const f=this._getMeshKey(l);if(f in this._tileMeshCache)return this._tileMeshCache[f];const p=function(v,C){const F=$a(C,"16bit"),M=o.aK.deserialize({arrayBuffer:F.vertices,length:F.vertices.byteLength/2/2}),O=o.aM.deserialize({arrayBuffer:F.indices,length:F.indices.byteLength/2/3});return new ia(v.createVertexBuffer(M,sa.members),v.createIndexBuffer(O),o.aL.simpleSegment(0,0,M.length,O.length))}(n,l);return this._tileMeshCache[f]=p,p}recalculate(n){}hasTransition(){const n=P.now();let l=!1;return l=l||(n-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const HA=new o.r({type:new o.D(o.v.projection.type)});class aa extends o.E{constructor(n){super(),this._transitionable=new o.t(HA),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new Va,this._verticalPerspectiveProjection=new tA}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof o.bl){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,l,f,p,v){return this.currentProjection.getMeshFromTileID(n,l,f,p,v)}setProjection(n){this._transitionable.setValue("type",(n==null?void 0:n.type)||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function qa(y){const n=qs(y.worldSize,y.center.lat);return 2*Math.PI*n}function $s(y,n,l,f,p){const v=1/(1<<p),C=n/o.$*v+f*v,F=o.bn((y/o.$*v+l*v)*Math.PI*2+Math.PI,2*Math.PI),M=2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI,O=Math.cos(M),V=new Float64Array(3);return V[0]=Math.sin(F)*O,V[1]=Math.sin(M),V[2]=Math.cos(F)*O,V}function Qn(y){return function(n,l){const f=Math.cos(l),p=new Float64Array(3);return p[0]=Math.sin(n)*f,p[1]=Math.sin(l),p[2]=Math.cos(n)*f,p}(y.lng*Math.PI/180,y.lat*Math.PI/180)}function qs(y,n){return y/(2*Math.PI)/Math.cos(n*Math.PI/180)}function D(y){const n=Math.asin(y[1])/Math.PI*180,l=Math.sqrt(y[0]*y[0]+y[2]*y[2]);if(l>1e-6){const f=y[0]/l,p=Math.acos(y[2]/l),v=(f>0?p:-p)/Math.PI*180;return new o.S(o.aN(v,-180,180),n)}return new o.S(0,n)}function ce(y){return Math.cos(y*Math.PI/180)}function ke(y,n){const l=ce(y),f=ce(n);return o.aj(f/l)}function st(y,n){const l=y.rotate(n.bearingInRadians),f=n.zoom+ke(n.center.lat,0),p=o.bj(1/ce(n.center.lat),1/ce(Math.min(Math.abs(n.center.lat),60)),o.bm(f,7,3,0,1)),v=360/qa({worldSize:n.worldSize,center:{lat:n.center.lat}});return new o.S(n.center.lng-l.x*v*p,o.ag(n.center.lat+l.y*v,-o.ah,o.ah))}function ft(y){const n=.5*y,l=Math.sin(n),f=Math.cos(n);return Math.log(l+f)-Math.log(f-l)}function Dt(y,n,l,f){const p=y.lat+l*f;if(Math.abs(l)>1){const v=(Math.sign(y.lat+l)!==Math.sign(y.lat)?-Math.abs(y.lat):Math.abs(y.lat))*Math.PI/180,C=Math.abs(y.lat+l)*Math.PI/180,F=ft(v+f*(C-v)),M=ft(v),O=ft(C);return new o.S(y.lng+n*((F-M)/(O-M)),p)}return new o.S(y.lng+n*f,p)}class Wt{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,l,f,p){const v=`${n.z}_${n.x}_${n.y}_${p!=null&&p.terrain?"t":""}`,C=this._cache.get(v);if(C)return C;const F=this._cachePrevious.get(v);if(F)return this._cache.set(v,F),F;const M=this._boundingVolumeFactory(n,l,f,p);return this._cache.set(v,M),this._hadAnyChanges=!0,M}}class pr{constructor(n,l,f,p){this.min=f,this.max=p,this.points=n,this.planes=l}static fromAabb(n,l){const f=[];for(let p=0;p<8;p++)f.push([1&~p?n[0]:l[0],(p>>1&1)==1?l[1]:n[1],(p>>2&1)==1?l[2]:n[2]]);return new pr(f,[[-1,0,0,l[0]],[1,0,0,-n[0]],[0,-1,0,l[1]],[0,1,0,-n[1]],[0,0,-1,l[2]],[0,0,1,-n[2]]],n,l)}static fromCenterSizeAngles(n,l,f){const p=o.bq([],f[0],f[1],f[2]),v=o.br([],[l[0],0,0],p),C=o.br([],[0,l[1],0],p),F=o.br([],[0,0,l[2]],p),M=[...n],O=[...n];for(let q=0;q<8;q++)for(let $=0;$<3;$++){const Y=n[$]+v[$]*(1&~q?-1:1)+C[$]*((q>>1&1)==1?1:-1)+F[$]*((q>>2&1)==1?1:-1);M[$]=Math.min(M[$],Y),O[$]=Math.max(O[$],Y)}const V=[];for(let q=0;q<8;q++){const $=[...n];o.aR($,$,o.aQ([],v,1&~q?-1:1)),o.aR($,$,o.aQ([],C,(q>>1&1)==1?1:-1)),o.aR($,$,o.aQ([],F,(q>>2&1)==1?1:-1)),V.push($)}return new pr(V,[[...v,-o.aW(v,V[0])],[...C,-o.aW(C,V[0])],[...F,-o.aW(F,V[0])],[-v[0],-v[1],-v[2],-o.aW(v,V[7])],[-C[0],-C[1],-C[2],-o.aW(C,V[7])],[-F[0],-F[1],-F[2],-o.aW(F,V[7])]],M,O)}intersectsFrustum(n){let l=!0;const f=this.points.length,p=this.planes.length,v=n.planes.length,C=n.points.length;for(let F=0;F<v;F++){const M=n.planes[F];let O=0;for(let V=0;V<f;V++){const q=this.points[V];M[0]*q[0]+M[1]*q[1]+M[2]*q[2]+M[3]>=0&&O++}if(O===0)return 0;O<f&&(l=!1)}if(l)return 2;for(let F=0;F<p;F++){const M=this.planes[F];let O=0;for(let V=0;V<C;V++){const q=n.points[V];M[0]*q[0]+M[1]*q[1]+M[2]*q[2]+M[3]>=0&&O++}if(O===0)return 0}return 1}intersectsPlane(n){const l=this.points.length;let f=0;for(let p=0;p<l;p++){const v=this.points[p];n[0]*v[0]+n[1]*v[1]+n[2]*v[2]+n[3]>=0&&f++}return f===l?2:f===0?0:1}}function Ir(y,n,l){const f=y-n;return f<0?-f:Math.max(0,f-l)}function Zr(y,n,l,f,p){const v=y-l;let C;return C=v<0?Math.min(-v,1+v-p):v>1?Math.min(Math.max(v-p,0),1-v):0,Math.max(C,Ir(n,f,p))}class un{constructor(){this._boundingVolumeCache=new Wt(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,l,f,p){const v=1<<f.z,C=1/v,F=f.x/v,M=f.y/v;let O=2;return O=Math.min(O,Zr(n,l,F,M,C)),O=Math.min(O,Zr(n,l,F+.5,-M-C,C)),O=Math.min(O,Zr(n,l,F+.5,2-M-C,C)),O}getWrap(n,l,f){const p=1<<l.z,v=1/p,C=l.x/p,F=Ir(n.x,C,v),M=Ir(n.x,C-1,v),O=Ir(n.x,C+1,v),V=Math.min(F,M,O);return V===O?1:V===M?-1:0}allowVariableZoom(n,l){return St(n,l)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,l,f,p){return this._boundingVolumeCache.getTileBoundingVolume(n,l,f,p)}_computeTileBoundingVolume(n,l,f,p){var v,C;let F=f,M=f;if(p!=null&&p.terrain){const O=new o.Z(n.z,l,n.z,n.x,n.y),V=p.terrain.getMinMaxElevation(O);F=(v=V.minElevation)!==null&&v!==void 0?v:f,M=(C=V.maxElevation)!==null&&C!==void 0?C:f}if(F/=o.bt,M/=o.bt,F+=1,M+=1,n.z<=0)return pr.fromAabb([-M,-M,-M],[M,M,M]);if(n.z===1)return pr.fromAabb([n.x===0?-M:0,n.y===0?0:-M,-M],[n.x===0?0:M,n.y===0?M:0,M]);{const O=[$s(0,0,n.x,n.y,n.z),$s(o.$,0,n.x,n.y,n.z),$s(o.$,o.$,n.x,n.y,n.z),$s(0,o.$,n.x,n.y,n.z)],V=[];for(const _t of O)V.push(o.aQ([],_t,M));if(M!==F)for(const _t of O)V.push(o.aQ([],_t,F));n.y===0&&V.push([0,1,0]),n.y===(1<<n.z)-1&&V.push([0,-1,0]);const q=[1,1,1],$=[-1,-1,-1];for(const _t of V)for(let xt=0;xt<3;xt++)q[xt]=Math.min(q[xt],_t[xt]),$[xt]=Math.max($[xt],_t[xt]);const Y=$s(o.$/2,o.$/2,n.x,n.y,n.z),de=o.aV([],[0,1,0],Y);o.aU(de,de);const Se=o.aV([],Y,de);o.aU(Se,Se);const Ce=o.aV([],O[2],O[1]);o.aU(Ce,Ce);const Te=o.aV([],O[0],O[3]);o.aU(Te,Te),V.push(o.aQ([],Y,M)),n.y>=(1<<n.z)/2&&V.push(o.aQ([],$s(o.$/2,0,n.x,n.y,n.z),M)),n.y<(1<<n.z)/2&&V.push(o.aQ([],$s(o.$/2,o.$,n.x,n.y,n.z),M));const De=tn(Y,V),$e=tn(Se,V),He=[-Y[0],-Y[1],-Y[2],De.max],Xe=[Y[0],Y[1],Y[2],-De.min],tt=[-Se[0],-Se[1],-Se[2],$e.max],je=[Se[0],Se[1],Se[2],-$e.min],ut=[...Ce,0],Ft=[...Te,0],vt=[];return n.y===0?vt.push(o.bs(Ft,ut,He),o.bs(Ft,ut,Xe)):vt.push(o.bs(tt,ut,He),o.bs(tt,ut,Xe),o.bs(tt,Ft,He),o.bs(tt,Ft,Xe)),n.y===(1<<n.z)-1?vt.push(o.bs(Ft,ut,He),o.bs(Ft,ut,Xe)):vt.push(o.bs(je,ut,He),o.bs(je,ut,Xe),o.bs(je,Ft,He),o.bs(je,Ft,Xe)),new pr(vt,[He,Xe,tt,je,ut,Ft],q,$)}}}function tn(y,n){let l=1/0,f=-1/0;for(const p of n){const v=o.aW(y,p);l=Math.min(l,v),f=Math.max(f,v)}return{min:l,max:f}}class Kn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,f){return this._helper.interpolatePadding(n,l,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l){this._helper.resize(n,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(){this._cachedClippingPlane=o.bu(),this._projectionMatrix=o.b8(),this._globeViewProjMatrix32f=o.b7(),this._globeViewProjMatrixNoCorrection=o.b8(),this._globeViewProjMatrixNoCorrectionInverted=o.b8(),this._globeProjMatrixInverted=o.b8(),this._cameraPosition=o.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ka({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,l)=>this.getConstrained(n,l)}),this._coveringTilesDetailsProvider=new un}clone(){const n=new Kn;return n.apply(this),n}apply(n,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=o.bo();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:l,applyGlobeMatrix:f}=n,p=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const l=this.pitchInRadians,f=this.cameraToCenterDistance/n,p=Math.sin(l)*f,v=Math.cos(l)*f+1,C=1/Math.sqrt(p*p+v*v)*1;let F=-p,M=v;const O=Math.sqrt(F*F+M*M);F/=O,M/=O;const V=[0,F,M];o.bv(V,V,[0,0,0],-this.bearingInRadians),o.bw(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),o.bx(V,V,[0,0,0],this.center.lng*Math.PI/180);const q=1/o.aY(V);return o.aQ(V,V,q),[...V,-C*q]}isLocationOccluded(n){return!this.isSurfacePointVisible(Qn(n))}transformLightDirection(n){const l=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,p=Math.cos(f),v=[Math.sin(l)*p,Math.sin(f),Math.cos(l)*p],C=[v[2],0,-v[0]],F=[0,0,0];o.aV(F,C,v),o.aU(C,C),o.aU(F,F);const M=[0,0,0];return o.aU(M,[C[0]*n[0]+F[0]*n[1]+v[0]*n[2],C[1]*n[0]+F[1]*n[1]+v[1]*n[2],C[2]*n[0]+F[2]*n[1]+v[2]*n[2]]),M}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,l,f){const p=function(F,M,O){const V=1/(1<<O.z);return new o.a0(F/o.$*V+O.x*V,M/o.$*V+O.y*V)}(n,l,f.canonical),v=(C=p.y,[o.bn(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI]);var C;return this.getCircleRadiusCorrection()/Math.cos(v[1])}projectTileCoordinates(n,l,f,p){const v=f.canonical,C=$s(n,l,v.x,v.y,v.z),F=1+(p?p(n,l):0)/o.bt,M=[C[0]*F,C[1]*F,C[2]*F,1];o.av(M,M,this._globeViewProjMatrixNoCorrection);const O=this._cachedClippingPlane,V=O[0]*C[0]+O[1]*C[1]+O[2]*C[2]+O[3]<0;return{point:new o.P(M[0]/M[3],M[1]/M[3]),signedDistanceFromCamera:M[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=qs(this.worldSize,this.center.lat),l=o.b9(),f=o.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),o.b3(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;l[8]=2*-p.x/this._helper._width,l[9]=2*p.y/this._helper._height,this._projectionMatrix=o.b4(l),this._globeProjMatrixInverted=o.b9(),o.ap(this._globeProjMatrixInverted,l),o.M(l,l,[0,0,-this.cameraToCenterDistance]),o.b5(l,l,this.rollInRadians),o.b6(l,l,-this.pitchInRadians),o.b5(l,l,this.bearingInRadians),o.M(l,l,[0,0,-n]);const v=o.bo();v[0]=n,v[1]=n,v[2]=n,o.b6(f,l,this.center.lat*Math.PI/180),o.by(f,f,-this.center.lng*Math.PI/180),o.N(f,f,v),this._globeViewProjMatrixNoCorrection=f,o.b6(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.by(l,l,-this.center.lng*Math.PI/180),o.N(l,l,v),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),o.ap(this._globeViewProjMatrixNoCorrectionInverted,f);const C=o.bo();this._cameraPosition=o.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/n,o.bv(this._cameraPosition,this._cameraPosition,C,-this.rollInRadians),o.bw(this._cameraPosition,this._cameraPosition,C,this.pitchInRadians),o.bv(this._cameraPosition,this._cameraPosition,C,-this.bearingInRadians),o.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bw(this._cameraPosition,this._cameraPosition,C,-this.center.lat*Math.PI/180),o.bx(this._cameraPosition,this._cameraPosition,C,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const F=o.b4(this._globeViewProjMatrixNoCorrectionInverted);o.N(F,F,[1,1,-1]),this._cachedFrustum=cs.fromInvProjectionMatrix(F,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){o.w("calculateFogMatrix is not supported on globe projection.");const l=o.b9();return o.af(l),l}getVisibleUnwrappedCoordinates(n){return[new o.b1(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,l){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=Qn(n);o.aQ(f,f,1+l/o.bt);const p=o.bu();return o.av(p,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(n){}getBounds(){const n=.5*this.width,l=.5*this.height,f=[new o.P(0,0),new o.P(n,0),new o.P(this.width,0),new o.P(this.width,l),new o.P(this.width,this.height),new o.P(n,this.height),new o.P(0,this.height),new o.P(0,l)],p=[];for(const q of f)p.push(this.unprojectScreenPoint(q));let v=0,C=0,F=0,M=0;const O=this.center;for(const q of p){const $=o.bz(O.lng,q.lng),Y=o.bz(O.lat,q.lat);$<C&&(C=$),$>v&&(v=$),Y<M&&(M=Y),Y>F&&(F=Y)}const V=[O.lng+C,O.lat+M,O.lng+v,O.lat+F];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new Gt(V)}getConstrained(n,l){const f=o.ag(n.lat,-o.ah,o.ah),p=o.ag(+l,this.minZoom+ke(0,f),this.maxZoom);return{center:new o.S(n.lng,f),zoom:p}}calculateCenterFromCameraLngLatAlt(n,l,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,f,p)}setLocationAtPoint(n,l){const f=Qn(this.unprojectScreenPoint(l)),p=Qn(n),v=o.bo();o.bA(v);const C=o.bo();o.bx(C,f,v,-this.center.lng*Math.PI/180),o.bw(C,C,v,this.center.lat*Math.PI/180);const F=p[0]*p[0]+p[2]*p[2],M=C[0]*C[0];if(F<M)return;const O=Math.sqrt(F-M),V=-O,q=o.bB(p[0],p[2],C[0],O),$=o.bB(p[0],p[2],C[0],V),Y=o.bo();o.bx(Y,p,v,-q);const de=o.bB(Y[1],Y[2],C[1],C[2]),Se=o.bo();o.bx(Se,p,v,-$);const Ce=o.bB(Se[1],Se[2],C[1],C[2]),Te=.5*Math.PI,De=de>=-Te&&de<=Te,$e=Ce>=-Te&&Ce<=Te;let He,Xe;if(De&&$e){const Ft=this.center.lng*Math.PI/180,vt=this.center.lat*Math.PI/180;o.bC(q,Ft)+o.bC(de,vt)<o.bC($,Ft)+o.bC(Ce,vt)?(He=q,Xe=de):(He=$,Xe=Ce)}else if(De)He=q,Xe=de;else{if(!$e)return;He=$,Xe=Ce}const tt=He/Math.PI*180,je=Xe/Math.PI*180,ut=this.center.lat;this.setCenter(new o.S(tt,o.ag(je,-90,90))),this.setZoom(this.zoom+ke(ut,this.center.lat))}locationToScreenPoint(n,l){const f=Qn(n);if(l){const p=l.getElevationForLngLatZoom(n,this._helper._tileZoom);o.aQ(f,f,1+p/o.bt)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(n){const l=o.bu();return o.av(l,[...n,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new o.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,l){if(l){const f=l.pointCoordinate(n);if(f)return f}return o.a0.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,l){var f;return(f=this.screenPointToMercatorCoordinate(n,l))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(n,l){const f=this._cameraPosition,p=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(f,p)}getRayDirectionFromPixel(n){const l=o.bu();l[0]=n.x/this.width*2-1,l[1]=-1*(n.y/this.height*2-1),l[2]=1,l[3]=1,o.av(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];const f=o.bo();f[0]=l[0]-this._cameraPosition[0],f[1]=l[1]-this._cameraPosition[1],f[2]=l[2]-this._cameraPosition[2];const p=o.bo();return o.aU(p,f),p}isSurfacePointVisible(n){const l=this._cachedClippingPlane;return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const l=o.bu();return o.av(l,[...n,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(n,l){const f=o.aW(n,l),p=o.bo(),v=o.bo();o.aQ(v,l,f),o.aT(p,n,v);const C=1-o.aW(p,p);if(C<0)return null;const F=o.aW(n,n)-1,M=-f+(f<0?1:-1)*Math.sqrt(C),O=F/M,V=M;return{tMin:Math.min(O,V),tMax:Math.max(O,V)}}unprojectScreenPoint(n){const l=this._cameraPosition,f=this.getRayDirectionFromPixel(n),p=this.rayPlanetIntersection(l,f);if(p){const V=o.bo();o.aR(V,l,[f[0]*p.tMin,f[1]*p.tMin,f[2]*p.tMin]);const q=o.bo();return o.aU(q,V),D(q)}const v=this._cachedClippingPlane,C=v[0]*f[0]+v[1]*f[1]+v[2]*f[2],F=-o.b0(v,l)/C,M=o.bo();if(F>0)o.aR(M,l,[f[0]*F,f[1]*F,f[2]*F]);else{const V=o.bo();o.aR(V,l,[2*f[0],2*f[1],2*f[2]]);const q=o.b0(this._cachedClippingPlane,V);o.aT(M,V,[this._cachedClippingPlane[0]*q,this._cachedClippingPlane[1]*q,this._cachedClippingPlane[2]*q])}const O=function(V){const q=o.bo();return q[0]=V[0]*-V[3],q[1]=V[1]*-V[3],q[2]=V[2]*-V[3],{center:q,radius:Math.sqrt(1-V[3]*V[3])}}(v);return D(function(V,q,$){const Y=o.bo();o.aT(Y,$,V);const de=o.bo();return o.bp(de,V,Y,q/o.a_(Y)),de}(O.center,O.radius,M))}getMatrixForModel(n,l){const f=o.S.convert(n),p=1/o.bt,v=o.b8();return o.by(v,v,f.lng/180*Math.PI),o.b6(v,v,-f.lat/180*Math.PI),o.M(v,v,[0,0,1+l/o.bt]),o.b6(v,v,.5*Math.PI),o.N(v,v,[p,p,p]),v}getProjectionDataForCustomLayer(n=!0){const l=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:n});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(n){}}class Mn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,f){return this._helper.interpolatePadding(n,l,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l,f=!0){this._helper.resize(n,l,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,l){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ka({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,l)=>this.getConstrained(n,l)}),this._globeness=1,this._mercatorTransform=new wi,this._verticalPerspectiveTransform=new Kn}clone(){const n=new Mn;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this),n}apply(n){this._helper.apply(n),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const l=this._mercatorTransform.getProjectionData(n),f=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:l.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return o.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,l,f){const p=this._mercatorTransform.getPitchedTextCorrection(n,l,f),v=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,l,f);return o.bj(p,v,this._globeness)}projectTileCoordinates(n,l,f,p){return this.currentTransform.projectTileCoordinates(n,l,f,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,l){return this.currentTransform.lngLatToCameraDepth(n,l)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}getConstrained(n,l){return this.currentTransform.getConstrained(n,l)}calculateCenterFromCameraLngLatAlt(n,l,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,f,p)}setLocationAtPoint(n,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,l),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(n,l),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(n,l){return this.currentTransform.locationToScreenPoint(n,l)}screenPointToMercatorCoordinate(n,l){return this.currentTransform.screenPointToMercatorCoordinate(n,l)}screenPointToLocation(n,l){return this.currentTransform.screenPointToLocation(n,l)}isPointOnMapSurface(n,l){return this.currentTransform.isPointOnMapSurface(n,l)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,l){return this.currentTransform.getMatrixForModel(n,l)}getProjectionDataForCustomLayer(n=!0){const l=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return l;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return f.fallbackMatrix=l.mainMatrix,f}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class dn{get useGlobeControls(){return!0}handlePanInertia(n,l){const f=st(n,l);return Math.abs(f.lng-l.center.lng)>180&&(f.lng=l.center.lng+179.5*Math.sign(f.lng-l.center.lng)),{easingCenter:f,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,l){const f=n.around,p=l.screenPointToLocation(f);n.bearingDelta&&l.setBearing(l.bearing+n.bearingDelta),n.pitchDelta&&l.setPitch(l.pitch+n.pitchDelta),n.rollDelta&&l.setRoll(l.roll+n.rollDelta);const v=l.zoom;n.zoomDelta&&l.setZoom(l.zoom+n.zoomDelta);const C=l.zoom-v;if(C===0)return;const F=o.bz(l.center.lng,p.lng),M=F/(Math.abs(F/180)+1),O=o.bz(l.center.lat,p.lat),V=l.getRayDirectionFromPixel(f),q=l.cameraPosition,$=-1*o.aW(q,V),Y=o.bo();o.aR(Y,q,[V[0]*$,V[1]*$,V[2]*$]);const de=o.aY(Y)-1,Se=Math.exp(.5*-Math.max(de-.3,0)),Ce=qs(l.worldSize,l.center.lat)/Math.min(l.width,l.height),Te=o.bm(Ce,.9,.5,1,.25),De=(1-o.ae(-C))*Math.min(Se,Te),$e=l.center.lat,He=l.zoom,Xe=new o.S(l.center.lng+M*De,o.ag(l.center.lat+O*De,-o.ah,o.ah));l.setLocationAtPoint(p,f);const tt=l.center,je=o.bm(Math.abs(F),45,85,0,1),ut=o.bm(Ce,.75,.35,0,1),Ft=Math.pow(Math.max(je,ut),.25),vt=o.bz(tt.lng,Xe.lng),_t=o.bz(tt.lat,Xe.lat);l.setCenter(new o.S(tt.lng+vt*Ft,tt.lat+_t*Ft).wrap()),l.setZoom(He+ke($e,l.center.lat))}handleMapControlsPan(n,l,f){if(!n.panDelta)return;const p=l.center.lat,v=l.zoom;l.setCenter(st(n.panDelta,l).wrap()),l.setZoom(v+ke(p,l.center.lat))}cameraForBoxAndBearing(n,l,f,p,v){const C=Ln(n,l,f,p,v),F=l.left/v.width*2-1,M=(v.width-l.right)/v.width*2-1,O=l.top/v.height*-2+1,V=(v.height-l.bottom)/v.height*-2+1,q=o.bz(f.getWest(),f.getEast())<0,$=q?f.getEast():f.getWest(),Y=q?f.getWest():f.getEast(),de=Math.max(f.getNorth(),f.getSouth()),Se=Math.min(f.getNorth(),f.getSouth()),Ce=$+.5*o.bz($,Y),Te=de+.5*o.bz(de,Se),De=v.clone();De.setCenter(C.center),De.setBearing(C.bearing),De.setPitch(0),De.setRoll(0),De.setZoom(C.zoom);const $e=De.modelViewProjectionMatrix,He=[Qn(f.getNorthWest()),Qn(f.getNorthEast()),Qn(f.getSouthWest()),Qn(f.getSouthEast()),Qn(new o.S(Y,Te)),Qn(new o.S($,Te)),Qn(new o.S(Ce,de)),Qn(new o.S(Ce,Se))],Xe=Qn(C.center);let tt=Number.POSITIVE_INFINITY;for(const je of He)F<0&&(tt=dn.getLesserNonNegativeNonNull(tt,dn.solveVectorScale(je,Xe,$e,"x",F))),M>0&&(tt=dn.getLesserNonNegativeNonNull(tt,dn.solveVectorScale(je,Xe,$e,"x",M))),O>0&&(tt=dn.getLesserNonNegativeNonNull(tt,dn.solveVectorScale(je,Xe,$e,"y",O))),V<0&&(tt=dn.getLesserNonNegativeNonNull(tt,dn.solveVectorScale(je,Xe,$e,"y",V)));if(Number.isFinite(tt)&&tt!==0)return C.zoom=De.zoom+o.aj(tt),C;us()}handleJumpToCenterZoom(n,l){const f=n.center.lat,p=n.getConstrained(l.center?o.S.convert(l.center):n.center,n.zoom).center;n.setCenter(p.wrap());const v=l.zoom!==void 0?+l.zoom:n.zoom+ke(f,p.lat);n.zoom!==v&&n.setZoom(v)}handleEaseTo(n,l){const f=n.zoom,p=n.center,v=n.padding,C={roll:n.roll,pitch:n.pitch,bearing:n.bearing},F={roll:l.roll===void 0?n.roll:l.roll,pitch:l.pitch===void 0?n.pitch:l.pitch,bearing:l.bearing===void 0?n.bearing:l.bearing},M=l.zoom!==void 0,O=!n.isPaddingEqual(l.padding);let V=!1;const q=l.center?o.S.convert(l.center):p,$=n.getConstrained(q,f).center;oa(n,$);const Y=n.clone();Y.setCenter($),Y.setZoom(M?+l.zoom:f+ke(p.lat,q.lat)),Y.setBearing(l.bearing);const de=new o.P(o.ag(n.centerPoint.x+l.offsetAsPoint.x,0,n.width),o.ag(n.centerPoint.y+l.offsetAsPoint.y,0,n.height));Y.setLocationAtPoint($,de);const Se=(l.offset&&l.offsetAsPoint.mag())>0?Y.center:$,Ce=M?+l.zoom:f+ke(p.lat,Se.lat),Te=f+ke(p.lat,0),De=Ce+ke(Se.lat,0),$e=o.bz(p.lng,Se.lng),He=o.bz(p.lat,Se.lat),Xe=o.ae(De-Te);return V=Ce!==f,{easeFunc:tt=>{if(o.bd(C,F)||Yn({startEulerAngles:C,endEulerAngles:F,tr:n,k:tt,useSlerp:C.roll!=F.roll}),O&&n.interpolatePadding(v,l.padding,tt),l.around)o.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(l.around,l.aroundPoint);else{const je=De>Te?Math.min(2,Xe):Math.max(.5,Xe),ut=Math.pow(je,1-tt),Ft=Dt(p,$e,He,tt*ut);n.setCenter(Ft.wrap())}if(V){const je=o.C.number(Te,De,tt)+ke(0,n.center.lat);n.setZoom(je)}},isZooming:V,elevationCenter:Se}}handleFlyTo(n,l){const f=l.zoom!==void 0,p=n.center,v=n.zoom,C=n.padding,F=!n.isPaddingEqual(l.padding),M=n.getConstrained(o.S.convert(l.center||l.locationAtOffset),v).center,O=f?+l.zoom:n.zoom+ke(n.center.lat,M.lat),V=n.clone();V.setCenter(M),V.setZoom(O),V.setBearing(l.bearing);const q=new o.P(o.ag(n.centerPoint.x+l.offsetAsPoint.x,0,n.width),o.ag(n.centerPoint.y+l.offsetAsPoint.y,0,n.height));V.setLocationAtPoint(M,q);const $=V.center;oa(n,$);const Y=function(He,Xe,tt){const je=Qn(Xe),ut=Qn(tt),Ft=o.aW(je,ut),vt=Math.acos(Ft),_t=qa(He);return vt/(2*Math.PI)*_t}(n,p,$),de=v+ke(p.lat,0),Se=O+ke($.lat,0),Ce=o.ae(Se-de);let Te;if(typeof l.minZoom=="number"){const He=+l.minZoom+ke($.lat,0),Xe=Math.min(He,de,Se)+ke(0,$.lat),tt=n.getConstrained($,Xe).zoom+ke($.lat,0);Te=o.ae(tt-de)}const De=o.bz(p.lng,$.lng),$e=o.bz(p.lat,$.lat);return{easeFunc:(He,Xe,tt,je)=>{const ut=Dt(p,De,$e,tt);F&&n.interpolatePadding(C,l.padding,He);const Ft=He===1?$:ut;n.setCenter(Ft.wrap());const vt=de+o.aj(Xe);n.setZoom(He===1?O:vt+ke(0,Ft.lat))},scaleOfZoom:Ce,targetCenter:$,scaleOfMinZoom:Te,pixelPathLength:Y}}static solveVectorScale(n,l,f,p,v){const C=p==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],F=[f[3],f[7],f[11],f[15]],M=n[0]*C[0]+n[1]*C[1]+n[2]*C[2],O=n[0]*F[0]+n[1]*F[1]+n[2]*F[2],V=l[0]*C[0]+l[1]*C[1]+l[2]*C[2],q=l[0]*F[0]+l[1]*F[1]+l[2]*F[2];return V+v*O===M+v*q||F[3]*(M-V)+C[3]*(q-O)+M*q==V*O?null:(V+C[3]-v*q-v*F[3])/(V-M-v*q+v*O)}static getLesserNonNegativeNonNull(n,l){return l!==null&&l>=0&&l<n?l:n}}class Pi{constructor(n){this._globe=n,this._mercatorCameraHelper=new zA,this._verticalPerspectiveCameraHelper=new dn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,l){return this.currentHelper.handlePanInertia(n,l)}handleMapControlsRollPitchBearingZoom(n,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,l)}handleMapControlsPan(n,l,f){this.currentHelper.handleMapControlsPan(n,l,f)}cameraForBoxAndBearing(n,l,f,p,v){return this.currentHelper.cameraForBoxAndBearing(n,l,f,p,v)}handleJumpToCenterZoom(n,l){this.currentHelper.handleJumpToCenterZoom(n,l)}handleEaseTo(n,l){return this.currentHelper.handleEaseTo(n,l)}handleFlyTo(n,l){return this.currentHelper.handleFlyTo(n,l)}}const Ai=(y,n)=>o.y(y,n&&n.filter(l=>l.identifier!=="source.canvas")),xi=o.bD();class la extends o.E{constructor(n,l={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const p=this.sourceCaches[f].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[f].reload()}},this.map=n,this.dispatcher=new at(Ye(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,p)=>this.getGlyphs(f,p)),this.dispatcher.registerMessageHandler("GI",(f,p)=>this.getImages(f,p)),this.imageManager=new ae,this.imageManager.setEventedParent(this),this.glyphManager=new Ie(n._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Ve(256,512),this.crossTileSymbolIndex=new Yl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bF()),Jr().on(hn,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const p=this.sourceCaches[f.sourceId];if(!p)return;const v=p.getSource();if(v&&v.vectorLayerIds)for(const C in this._layers){const F=this._layers[C];F.source===v.id&&this._validateLayer(F)}})}setGlobalStateProperty(n,l){var f,p,v;this._checkLoaded();const C=l===null?(v=(p=(f=this.stylesheet.state)===null||f===void 0?void 0:f[n])===null||p===void 0?void 0:p.default)!==null&&v!==void 0?v:null:l;if(o.bG(C,this._globalState[n]))return this;this._globalState[n]=C;const F=this._findGlobalStateAffectedSources([n]);for(const M in this.sourceCaches)F.has(M)&&(this._reloadSource(M),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const l=[];for(const p in n)!o.bG(this._globalState[p],n[p].default)&&(l.push(p),this._globalState[p]=n[p].default);const f=this._findGlobalStateAffectedSources(l);for(const p in this.sourceCaches)f.has(p)&&(this._reloadSource(p),this._changed=!0)}_findGlobalStateAffectedSources(n){if(n.length===0)return new Set;const l=new Set;for(const f in this._layers){const p=this._layers[f],v=p.getLayoutAffectingGlobalStateRefs();for(const C of n)v.has(C)&&l.add(p.source)}return l}loadURL(n,l={},f){this.fire(new o.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const p=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const v=this._loadStyleRequest;o.j(p,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,l,f)}).catch(C=>{this._loadStyleRequest=null,C&&!v.signal.aborted&&this.fire(new o.k(C))})}loadJSON(n,l={},f){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(n,l,f)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(xi,{validate:!1})}_load(n,l,f){var p,v,C;const F=l.transformStyle?l.transformStyle(f,n):n;if(!l.validate||!Ai(this,o.z(F))){this._loaded=!0,this.stylesheet=F;for(const M in F.sources)this.addSource(M,F.sources[M],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs),this._createLayers(),this.light=new rt(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new Pe(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.setGlobalState((C=this.stylesheet.state)!==null&&C!==void 0?C:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const n=o.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of n){const f=o.bI(l);f.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=f}}_loadSprite(n,l=!1,f=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,C,F,M){return o._(this,void 0,void 0,function*(){const O=fe(v),V=F>1?"@2x":"",q={},$={};for(const{id:Y,url:de}of O){const Se=C.transformRequest(ge(de,V,".json"),"SpriteJSON");q[Y]=o.j(Se,M);const Ce=C.transformRequest(ge(de,V,".png"),"SpriteImage");$[Y]=Z.getImage(Ce,M)}return yield Promise.all([...Object.values(q),...Object.values($)]),function(Y,de){return o._(this,void 0,void 0,function*(){const Se={};for(const Ce in Y){Se[Ce]={};const Te=P.getImageCanvasContext((yield de[Ce]).data),De=(yield Y[Ce]).data;for(const $e in De){const{width:He,height:Xe,x:tt,y:je,sdf:ut,pixelRatio:Ft,stretchX:vt,stretchY:_t,content:xt,textFitWidth:ir,textFitHeight:nr}=De[$e];Se[Ce][$e]={data:null,pixelRatio:Ft,sdf:ut,stretchX:vt,stretchY:_t,content:xt,textFitWidth:ir,textFitHeight:nr,spriteData:{width:He,height:Xe,x:tt,y:je,context:Te}}}}return Se})}(q,$)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const C in v){this._spritesImagesIds[C]=[];const F=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(M=>!(M in v)):[];for(const M of F)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in v[C]){const O=C==="default"?M:`${C}:${M}`;this._spritesImagesIds[C].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,v[C][M],!1):this.imageManager.addImage(O,v[C][M]),l&&(this._changedImages[O]=!0)}}}).catch(v=>{this._spriteRequest=null,p=v,this.fire(new o.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),f&&f(p)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(n){const l=this.sourceCaches[n.source];if(!l)return;const f=n.sourceLayer;if(!f)return;const p=l.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(f)===-1)&&this.fire(new o.k(new Error(`Source layer "${f}" does not exist on source "${p.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,l=!1){const f=this._serializedAllLayers();if(!n||n.length===0)return Object.values(l?o.bJ(f):f);const p=[];for(const v of n)if(f[v]){const C=l?o.bJ(f[v]):f[v];p.push(C)}return p}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const l=Object.keys(this._layers);for(const f of l){const p=this._layers[f];p.type!=="custom"&&(n[f]=p.serialize())}return n}hasTransitions(){var n,l,f;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const l=this._changed;if(l){const p=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(p.length||v.length)&&this._updateWorkerLayers(p,v);for(const C in this._updatedSources){const F=this._updatedSources[C];if(F==="reload")this._reloadSource(C);else{if(F!=="clear")throw new Error(`Invalid action ${F}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const f={};for(const p in this.sourceCaches){const v=this.sourceCaches[p];f[p]=v.used,v.used=!1}for(const p of this._order){const v=this._layers[p];v.recalculate(n,this._availableImages),!v.isHidden(n.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const p in f){const v=this.sourceCaches[p];!!f[p]!=!!v.used&&v.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,l&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,l={}){var f;this._checkLoaded();const p=this.serialize();if(n=l.transformStyle?l.transformStyle(p,n):n,((f=l.validate)===null||f===void 0||f)&&Ai(this,o.z(n)))return!1;(n=o.bJ(n)).layers=o.bH(n.layers);const v=o.bK(p,n),C=this._getOperationsToPerform(v);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const F of C.operations)F();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const l=[],f=[];for(const p of n)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":l.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":l.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":l.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setGlobalState":l.push(()=>this.setGlobalState.apply(this,p.args));break;case"setTransition":l.push(()=>{});break;default:f.push(p.command)}return{operations:l,unimplemented:f}}addImage(n,l){if(this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,l),this._afterImageUpdated(n)}updateImage(n,l){this.imageManager.updateImage(n,l)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,l,f={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(o.z.source,`sources.${n}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const p=this.sourceCaches[n]=new Et(n,l,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:n})),p.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===n)return this.fire(new o.k(new Error(`Source "${n}" cannot be removed while layer "${f}" is using it.`)));const l=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],l.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,l){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const f=this.sourceCaches[n].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(l),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,l,f={}){this._checkLoaded();const p=n.id;if(this.getLayer(p))return void this.fire(new o.k(new Error(`Layer "${p}" already exists on this map.`)));let v;if(n.type==="custom"){if(Ai(this,o.bL(n)))return;v=o.bI(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(p,n.source),n=o.bJ(n),n=o.e(n,{source:p})),this._validate(o.z.layer,`layers.${p}`,n,{arrayIndex:-1},f))return;v=o.bI(n),this._validateLayer(v),v.setEventedParent(this,{layer:{id:p}})}const C=l?this._order.indexOf(l):this._order.length;if(l&&C===-1)this.fire(new o.k(new Error(`Cannot add layer "${p}" before non-existing layer "${l}".`)));else{if(this._order.splice(C,0,p),this._layerOrderChanged=!0,this._layers[p]=v,this._removedLayers[p]&&v.source&&v.type!=="custom"){const F=this._removedLayers[p];delete this._removedLayers[p],F.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(n,l){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new o.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===l)return;const f=this._order.indexOf(n);this._order.splice(f,1);const p=l?this._order.indexOf(l):this._order.length;l&&p===-1?this.fire(new o.k(new Error(`Cannot move layer "${n}" before non-existing layer "${l}".`))):(this._order.splice(p,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const l=this._layers[n];if(!l)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${n}".`)));l.setEventedParent(null);const f=this._order.indexOf(n);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=l,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],l.onRemove&&l.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,l,f){this._checkLoaded();const p=this.getLayer(n);p?p.minzoom===l&&p.maxzoom===f||(l!=null&&(p.minzoom=l),f!=null&&(p.maxzoom=f),this._updateLayer(p)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,l,f={}){this._checkLoaded();const p=this.getLayer(n);if(p){if(!o.bG(p.filter,l))return l==null?(p.setFilter(void 0),void this._updateLayer(p)):void(this._validate(o.z.filter,`layers.${p.id}.filter`,l,null,f)||(p.setFilter(o.bJ(l)),this._updateLayer(p)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return o.bJ(this.getLayer(n).filter)}setLayoutProperty(n,l,f,p={}){this._checkLoaded();const v=this.getLayer(n);v?o.bG(v.getLayoutProperty(l),f)||(v.setLayoutProperty(l,f,p),this._updateLayer(v)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,l){const f=this.getLayer(n);if(f)return f.getLayoutProperty(l);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,l,f,p={}){this._checkLoaded();const v=this.getLayer(n);v?o.bG(v.getPaintProperty(l),f)||(v.setPaintProperty(l,f,p)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,l){return this.getLayer(n).getPaintProperty(l)}setFeatureState(n,l){this._checkLoaded();const f=n.source,p=n.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const C=v.getSource().type;C==="geojson"&&p?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||p?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),v.setFeatureState(p,n.id,l)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,l){this._checkLoaded();const f=n.source,p=this.sourceCaches[f];if(p===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const v=p.getSource().type,C=v==="vector"?n.sourceLayer:void 0;v!=="vector"||C?l&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(C,n.id,l):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const l=n.source,f=n.sourceLayer,p=this.sourceCaches[l];if(p!==void 0)return p.getSource().type!=="vector"||f?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(f,n.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=o.bM(this.sourceCaches,v=>v.serialize()),l=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,p=this.stylesheet;return o.bN({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:n,layers:l,terrain:f},v=>v!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const l=C=>this._layers[C].type==="fill-extrusion",f={},p=[];for(let C=this._order.length-1;C>=0;C--){const F=this._order[C];if(l(F)){f[F]=C;for(const M of n){const O=M[F];if(O)for(const V of O)p.push(V)}}}p.sort((C,F)=>F.intersectionZ-C.intersectionZ);const v=[];for(let C=this._order.length-1;C>=0;C--){const F=this._order[C];if(l(F))for(let M=p.length-1;M>=0;M--){const O=p[M].feature;if(f[O.layer.id]<C)break;v.push(O),p.pop()}else for(const M of n){const O=M[F];if(O)for(const V of O)v.push(V.feature)}}return v}queryRenderedFeatures(n,l,f){l&&l.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",l.filter,null,l);const p={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const O of l.layers){const V=this._layers[O];if(!V)return this.fire(new o.k(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];p[V.source]=!0}}const v=[];l.availableImages=this._availableImages;const C=this._serializedAllLayers(),F=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,M=Object.assign(Object.assign({},l),{layers:F});for(const O in this.sourceCaches)l.layers&&!p[O]||v.push(dt(this.sourceCaches[O],this._layers,C,n,M,f,this.map.terrain?(V,q,$)=>this.map.terrain.getElevation(V,q,$):void 0));return this.placement&&v.push(function(O,V,q,$,Y,de,Se){const Ce={},Te=de.queryRenderedSymbols($),De=[];for(const $e of Object.keys(Te).map(Number))De.push(Se[$e]);De.sort(Lt);for(const $e of De){const He=$e.featureIndex.lookupSymbolFeatures(Te[$e.bucketInstanceId],V,$e.bucketIndex,$e.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,O);for(const Xe in He){const tt=Ce[Xe]=Ce[Xe]||[],je=He[Xe];je.sort((ut,Ft)=>{const vt=$e.featureSortOrder;if(vt){const _t=vt.indexOf(ut.featureIndex);return vt.indexOf(Ft.featureIndex)-_t}return Ft.featureIndex-ut.featureIndex});for(const ut of je)tt.push(ut)}}return function($e,He,Xe){for(const tt in $e)for(const je of $e[tt])kt(je,Xe[He[tt].source]);return $e}(Ce,O,q)}(this._layers,C,this.sourceCaches,n,M,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(n,l){l&&l.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",l.filter,null,l);const f=this.sourceCaches[n];return f?function(p,v){const C=p.getRenderableIds().map(O=>p.getTileByID(O)),F=[],M={};for(let O=0;O<C.length;O++){const V=C[O],q=V.tileID.canonical.key;M[q]||(M[q]=!0,V.querySourceFeatures(F,v))}return F}(f,l):[]}getLight(){return this.light.getLight()}setLight(n,l={}){this._checkLoaded();const f=this.light.getLight();let p=!1;for(const C in n)if(!o.bG(n[C],f[C])){p=!0;break}if(!p)return;const v={now:P.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,l),this.light.updateTransitions(v)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=n,this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,l={}){this._checkLoaded();const f=this.getSky();let p=!1;if(!n&&!f)return;if(n&&!f)p=!0;else if(!n&&f)p=!0;else for(const C in n)if(!o.bG(n[C],f[C])){p=!0;break}if(!p)return;const v={now:P.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,l),this.sky.updateTransitions(v)}_setProjectionInternal(n){const l=function(f){if(Array.isArray(f)){const p=new aa({type:f});return{projection:p,transform:new Mn,cameraHelper:new Pi(p)}}switch(f){case"mercator":return{projection:new Va,transform:new wi,cameraHelper:new zA};case"globe":{const p=new aa({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new Mn,cameraHelper:new Pi(p)}}case"vertical-perspective":return{projection:new tA,transform:new Kn,cameraHelper:new dn};default:return o.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new Va,transform:new wi,cameraHelper:new zA}}}(n);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(const f in this.sourceCaches)this.sourceCaches[f].reload()}_validate(n,l,f,p,v={}){return(!v||v.validate!==!1)&&Ai(this,n.call(o.z,o.e({key:l,style:this.serialize(),value:f,styleSpec:o.v},p)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Jr().off(hn,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const f=this.sourceCaches[l];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const l in this.sourceCaches)this.sourceCaches[l].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,l,f,p,v=!1){let C=!1,F=!1;const M={};for(const O of this._order){const V=this._layers[O];if(V.type!=="symbol")continue;if(!M[V.source]){const $=this.sourceCaches[V.source];M[V.source]=$.getRenderableIds(!0).map(Y=>$.getTileByID(Y)).sort((Y,de)=>de.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(de.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(V,M[V.source],n.center.lng);C=C||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(P.now(),n.zoom))&&(this.pauseablePlacement=new OA(n,this.map.terrain,this._order,v,l,f,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(P.now()),F=!0),C&&this.pauseablePlacement.placement.setStale()),F||C)for(const O of this._order){const V=this._layers[O];V.type==="symbol"&&this.placement.updateLayerOpacities(V,M[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(P.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,l){return o._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,l.icons),f})}getGlyphs(n,l){return o._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(l.stacks),p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,l={}){this._checkLoaded(),n&&this._validate(o.z.glyphs,"glyphs",n,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,l,f={},p){this._checkLoaded();const v=[{id:n,url:l}],C=[...fe(this.stylesheet.sprite),...v];this._validate(o.z.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(v,!0,p))}removeSprite(n){this._checkLoaded();const l=fe(this.stylesheet.sprite);if(l.find(f=>f.id===n)){if(this._spritesImagesIds[n])for(const f of this._spritesImagesIds[n])this.imageManager.removeImage(f),this._changedImages[f]=!0;l.splice(l.findIndex(f=>f.id===n),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return fe(this.stylesheet.sprite)}setSprite(n,l={},f){this._checkLoaded(),n&&this._validate(o.z.sprite,"sprite",n,null,l)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,f):(this._unloadSprite(),f&&f(null)))}}var Bl=o.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Oh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,l,f,p,v,C,F,M,O){this.context=n;let V=this.boundPaintVertexBuffers.length!==p.length;for(let q=0;!V&&q<p.length;q++)this.boundPaintVertexBuffers[q]!==p[q]&&(V=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||V||this.boundIndexBuffer!==v||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==F||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==O?this.freshBind(l,f,p,v,C,F,M,O):(n.bindVertexArray.set(this.vao),F&&F.bind(),v&&v.dynamicDraw&&v.bind(),M&&M.bind(),O&&O.bind())}freshBind(n,l,f,p,v,C,F,M){const O=n.numAttributes,V=this.context,q=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=p,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=F,this.boundDynamicVertexBuffer3=M,l.enableAttributes(q,n);for(const $ of f)$.enableAttributes(q,n);C&&C.enableAttributes(q,n),F&&F.enableAttributes(q,n),M&&M.enableAttributes(q,n),l.bind(),l.setVertexAttribPointers(q,n,v);for(const $ of f)$.bind(),$.setVertexAttribPointers(q,n,v);C&&(C.bind(),C.setVertexAttribPointers(q,n,v)),p&&p.bind(),F&&(F.bind(),F.setVertexAttribPointers(q,n,v)),M&&(M.bind(),M.setVertexAttribPointers(q,n,v)),V.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Cu=(y,n,l,f,p)=>({u_texture:0,u_ele_delta:y,u_fog_matrix:n,u_fog_color:l?l.properties.get("fog-color"):o.be.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:l?l.calculateFogBlendOpacity(f):0,u_horizon_color:l?l.properties.get("horizon-color"):o.be.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),rA={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function co(y){const n=[];for(let l=0;l<y.length;l++){if(y[l]===null)continue;const f=y[l].split(" ");n.push(f.pop())}return n}class Cl{constructor(n,l,f,p,v,C,F,M,O=[]){const V=n.gl;this.program=V.createProgram();const q=co(l.staticAttributes),$=f?f.getBinderAttributes():[],Y=q.concat($),de=ws.prelude.staticUniforms?co(ws.prelude.staticUniforms):[],Se=F.staticUniforms?co(F.staticUniforms):[],Ce=l.staticUniforms?co(l.staticUniforms):[],Te=f?f.getBinderUniforms():[],De=de.concat(Se).concat(Ce).concat(Te),$e=[];for(const vt of De)$e.indexOf(vt)<0&&$e.push(vt);const He=f?f.defines():[];Yi(V)&&He.unshift("#version 300 es"),v&&He.push("#define OVERDRAW_INSPECTOR;"),C&&He.push("#define TERRAIN3D;"),M&&He.push(M),O&&He.push(...O);let Xe=He.concat(ws.prelude.fragmentSource,F.fragmentSource,l.fragmentSource).join(`
`),tt=He.concat(ws.prelude.vertexSource,F.vertexSource,l.vertexSource).join(`
`);Yi(V)||(Xe=function(vt){return vt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Xe),tt=function(vt){return vt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(tt));const je=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(je,Xe),V.compileShader(je),!V.getShaderParameter(je,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(je)}`);V.attachShader(this.program,je);const ut=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(ut,tt),V.compileShader(ut),!V.getShaderParameter(ut,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(ut)}`);V.attachShader(this.program,ut),this.attributes={};const Ft={};this.numAttributes=Y.length;for(let vt=0;vt<this.numAttributes;vt++)Y[vt]&&(V.bindAttribLocation(this.program,vt,Y[vt]),this.attributes[Y[vt]]=vt);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(ut),V.deleteShader(je);for(let vt=0;vt<$e.length;vt++){const _t=$e[vt];if(_t&&!Ft[_t]){const xt=V.getUniformLocation(this.program,_t);xt&&(Ft[_t]=xt)}}this.fixedUniforms=p(n,Ft),this.terrainUniforms=((vt,_t)=>({u_depth:new o.bO(vt,_t.u_depth),u_terrain:new o.bO(vt,_t.u_terrain),u_terrain_dim:new o.bf(vt,_t.u_terrain_dim),u_terrain_matrix:new o.bQ(vt,_t.u_terrain_matrix),u_terrain_unpack:new o.bR(vt,_t.u_terrain_unpack),u_terrain_exaggeration:new o.bf(vt,_t.u_terrain_exaggeration)}))(n,Ft),this.projectionUniforms=((vt,_t)=>({u_projection_matrix:new o.bQ(vt,_t.u_projection_matrix),u_projection_tile_mercator_coords:new o.bR(vt,_t.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bR(vt,_t.u_projection_clipping_plane),u_projection_transition:new o.bf(vt,_t.u_projection_transition),u_projection_fallback_matrix:new o.bQ(vt,_t.u_projection_fallback_matrix)}))(n,Ft),this.binderUniforms=f?f.getUniforms(n,Ft):[]}draw(n,l,f,p,v,C,F,M,O,V,q,$,Y,de,Se,Ce,Te,De,$e){const He=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(f),n.setStencilMode(p),n.setColorMode(v),n.setCullFace(C),M){n.activeTexture.set(He.TEXTURE2),He.bindTexture(He.TEXTURE_2D,M.depthTexture),n.activeTexture.set(He.TEXTURE3),He.bindTexture(He.TEXTURE_2D,M.texture);for(const tt in this.terrainUniforms)this.terrainUniforms[tt].set(M[tt])}if(O)for(const tt in O)this.projectionUniforms[rA[tt]].set(O[tt]);if(F)for(const tt in this.fixedUniforms)this.fixedUniforms[tt].set(F[tt]);Ce&&Ce.setUniforms(n,this.binderUniforms,de,{zoom:Se});let Xe=0;switch(l){case He.LINES:Xe=2;break;case He.TRIANGLES:Xe=3;break;case He.LINE_STRIP:Xe=1}for(const tt of Y.get()){const je=tt.vaos||(tt.vaos={});(je[V]||(je[V]=new Oh)).bind(n,this,q,Ce?Ce.getPaintVertexBuffers():[],$,tt.vertexOffset,Te,De,$e),He.drawElements(l,tt.primitiveLength*Xe,He.UNSIGNED_SHORT,tt.primitiveOffset*Xe*2)}}}function Wa(y,n,l){const f=1/o.aB(l,1,n.transform.tileZoom),p=Math.pow(2,l.tileID.overscaledZ),v=l.tileSize*Math.pow(2,n.transform.tileZoom)/p,C=v*(l.tileID.canonical.x+l.tileID.wrap*p),F=v*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,F>>16],u_pixel_coord_lower:[65535&C,65535&F]}}const Mo=(y,n,l,f)=>{const p=y.style.light,v=p.properties.get("position"),C=[v.x,v.y,v.z],F=o.bU();p.properties.get("anchor")==="viewport"&&o.bV(F,y.transform.bearingInRadians),o.bW(C,C,F);const M=y.transform.transformLightDirection(C),O=p.properties.get("color");return{u_lightpos:C,u_lightpos_globe:M,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+n,u_opacity:l,u_fill_translate:f}},Hi=(y,n,l,f,p,v,C)=>o.e(Mo(y,n,l,f),Wa(v,y,C),{u_height_factor:-Math.pow(2,p.overscaledZ)/C.tileSize/8}),ko=(y,n,l,f)=>o.e(Wa(n,y,l),{u_fill_translate:f}),hs=(y,n)=>({u_world:y,u_fill_translate:n}),jA=(y,n,l,f,p)=>o.e(ko(y,n,l,p),{u_world:f}),nA=(y,n,l,f,p)=>{const v=y.transform;let C,F,M=0;if(l.paint.get("circle-pitch-alignment")==="map"){const O=o.aB(n,1,v.zoom);C=!0,F=[O,O],M=O/(o.$*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*p}else C=!1,F=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+C,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:F,u_globe_extrude_scale:M,u_translate:f}},Ji=y=>({u_pixel_extrude_scale:[1/y.width,1/y.height]}),Sl=y=>({u_viewport_size:[y.width,y.height]}),iA=(y,n=1)=>({u_color:y,u_overlay:0,u_overlay_scale:n}),El=(y,n,l,f)=>{const p=o.aB(y,1,n)/(o.$*Math.pow(2,y.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:o.aB(y,1,n),u_intensity:l,u_globe_extrude_scale:p}},ji=(y,n,l,f)=>{const p=o.L();o.bX(p,0,y.width,y.height,0,0,1);const v=y.context.gl;return{u_matrix:p,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:l,u_color_ramp:f,u_opacity:n.paint.get("heatmap-opacity")}},xs=(y,n,l)=>{const f=l.paint.get("hillshade-accent-color");let p;switch(l.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const v=l.getIlluminationProperties();for(let C=0;C<v.directionRadians.length;C++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(v.directionRadians[C]+=y.transform.bearingInRadians);return{u_image:0,u_latrange:VA(0,n.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:v.altitudeRadians,u_azimuths:v.directionRadians,u_accent:f,u_method:p,u_highlights:v.highlightColor,u_shadows:v.shadowColor}},Rc=(y,n)=>{const l=n.stride,f=o.L();return o.bX(f,0,o.$,-o.$,0,0,1),o.M(f,f,[0,-o.$,0]),{u_matrix:f,u_image:1,u_dimension:[l,l],u_zoom:y.overscaledZ,u_unpack:n.getUnpackVector()}};function VA(y,n){const l=Math.pow(2,n.canonical.z),f=n.canonical.y;return[new o.a0(0,f/l).toLngLat().lat,new o.a0(0,(f+1)/l).toLngLat().lat]}const Il=(y,n,l=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:l,u_opacity:y.paint.get("color-relief-opacity")}),Za=(y,n,l,f)=>{const p=y.transform;return{u_translation:Ca(y,n,l),u_ratio:f/o.aB(n,1,p.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Ms=(y,n,l,f,p)=>o.e(Za(y,n,l,f),{u_image:0,u_image_height:p}),Ws=(y,n,l,f,p)=>{const v=y.transform,C=Uo(n,v);return{u_translation:Ca(y,n,l),u_texsize:n.imageAtlasTexture.size,u_ratio:f/o.aB(n,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Fl=(y,n,l,f,p,v)=>{const C=y.lineAtlas,F=Uo(n,y.transform),M=l.layout.get("line-cap")==="round",O=C.getDash(p.from,M),V=C.getDash(p.to,M),q=O.width*v.fromScale,$=V.width*v.toScale;return o.e(Za(y,n,l,f),{u_patternscale_a:[F/q,-O.height/2],u_patternscale_b:[F/$,-V.height/2],u_sdfgamma:C.width/(256*Math.min(q,$)*y.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:V.y,u_mix:v.t})};function Uo(y,n){return 1/o.aB(y,1,n.tileZoom)}function Ca(y,n,l){return o.aC(y.transform,n,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Aa=(y,n,l,f,p)=>{return{u_tl_parent:y,u_scale_parent:n,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(C=f.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(v=f.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:Xa(f.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var v,C};function Xa(y){y*=Math.PI/180;const n=Math.sin(y),l=Math.cos(y);return[(2*l+1)/3,(-Math.sqrt(3)*n-l+1)/3,(Math.sqrt(3)*n-l+1)/3]}const pi=(y,n,l,f,p,v,C,F,M,O,V,q,$)=>{const Y=C.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Y.width/Y.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_label_plane_matrix:F,u_coord_matrix:M,u_is_text:+V,u_pitch_with_map:+f,u_is_along_line:p,u_is_variable_anchor:v,u_texsize:q,u_texture:0,u_translation:O,u_pitched_scale:$}},Tl=(y,n,l,f,p,v,C,F,M,O,V,q,$,Y)=>{const de=C.transform;return o.e(pi(y,n,l,f,p,v,C,F,M,O,V,q,Y),{u_gamma_scale:f?Math.cos(de.pitch*Math.PI/180)*de.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:1})},Sa=(y,n,l,f,p,v,C,F,M,O,V,q,$)=>o.e(Tl(y,n,l,f,p,v,C,F,M,O,!0,V,0,$),{u_texsize_icon:q,u_texture_icon:1}),wo=(y,n)=>({u_opacity:y,u_color:n}),KA=(y,n,l,f,p)=>o.e(function(v,C,F,M){const O=F.imageManager.getPattern(v.from.toString()),V=F.imageManager.getPattern(v.to.toString()),{width:q,height:$}=F.imageManager.getPixelSize(),Y=Math.pow(2,M.tileID.overscaledZ),de=M.tileSize*Math.pow(2,F.transform.tileZoom)/Y,Se=de*(M.tileID.canonical.x+M.tileID.wrap*Y),Ce=de*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[q,$],u_mix:C.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/o.aB(M,1,F.transform.tileZoom),u_pixel_coord_upper:[Se>>16,Ce>>16],u_pixel_coord_lower:[65535&Se,65535&Ce]}}(l,p,n,f),{u_opacity:y}),GA=(y,n)=>{},sA={fillExtrusion:(y,n)=>({u_lightpos:new o.bS(y,n.u_lightpos),u_lightpos_globe:new o.bS(y,n.u_lightpos_globe),u_lightintensity:new o.bf(y,n.u_lightintensity),u_lightcolor:new o.bS(y,n.u_lightcolor),u_vertical_gradient:new o.bf(y,n.u_vertical_gradient),u_opacity:new o.bf(y,n.u_opacity),u_fill_translate:new o.bT(y,n.u_fill_translate)}),fillExtrusionPattern:(y,n)=>({u_lightpos:new o.bS(y,n.u_lightpos),u_lightpos_globe:new o.bS(y,n.u_lightpos_globe),u_lightintensity:new o.bf(y,n.u_lightintensity),u_lightcolor:new o.bS(y,n.u_lightcolor),u_vertical_gradient:new o.bf(y,n.u_vertical_gradient),u_height_factor:new o.bf(y,n.u_height_factor),u_opacity:new o.bf(y,n.u_opacity),u_fill_translate:new o.bT(y,n.u_fill_translate),u_image:new o.bO(y,n.u_image),u_texsize:new o.bT(y,n.u_texsize),u_pixel_coord_upper:new o.bT(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(y,n.u_pixel_coord_lower),u_scale:new o.bS(y,n.u_scale),u_fade:new o.bf(y,n.u_fade)}),fill:(y,n)=>({u_fill_translate:new o.bT(y,n.u_fill_translate)}),fillPattern:(y,n)=>({u_image:new o.bO(y,n.u_image),u_texsize:new o.bT(y,n.u_texsize),u_pixel_coord_upper:new o.bT(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(y,n.u_pixel_coord_lower),u_scale:new o.bS(y,n.u_scale),u_fade:new o.bf(y,n.u_fade),u_fill_translate:new o.bT(y,n.u_fill_translate)}),fillOutline:(y,n)=>({u_world:new o.bT(y,n.u_world),u_fill_translate:new o.bT(y,n.u_fill_translate)}),fillOutlinePattern:(y,n)=>({u_world:new o.bT(y,n.u_world),u_image:new o.bO(y,n.u_image),u_texsize:new o.bT(y,n.u_texsize),u_pixel_coord_upper:new o.bT(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(y,n.u_pixel_coord_lower),u_scale:new o.bS(y,n.u_scale),u_fade:new o.bf(y,n.u_fade),u_fill_translate:new o.bT(y,n.u_fill_translate)}),circle:(y,n)=>({u_camera_to_center_distance:new o.bf(y,n.u_camera_to_center_distance),u_scale_with_map:new o.bO(y,n.u_scale_with_map),u_pitch_with_map:new o.bO(y,n.u_pitch_with_map),u_extrude_scale:new o.bT(y,n.u_extrude_scale),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_globe_extrude_scale:new o.bf(y,n.u_globe_extrude_scale),u_translate:new o.bT(y,n.u_translate)}),collisionBox:(y,n)=>({u_pixel_extrude_scale:new o.bT(y,n.u_pixel_extrude_scale)}),collisionCircle:(y,n)=>({u_viewport_size:new o.bT(y,n.u_viewport_size)}),debug:(y,n)=>({u_color:new o.bP(y,n.u_color),u_overlay:new o.bO(y,n.u_overlay),u_overlay_scale:new o.bf(y,n.u_overlay_scale)}),depth:GA,clippingMask:GA,heatmap:(y,n)=>({u_extrude_scale:new o.bf(y,n.u_extrude_scale),u_intensity:new o.bf(y,n.u_intensity),u_globe_extrude_scale:new o.bf(y,n.u_globe_extrude_scale)}),heatmapTexture:(y,n)=>({u_matrix:new o.bQ(y,n.u_matrix),u_world:new o.bT(y,n.u_world),u_image:new o.bO(y,n.u_image),u_color_ramp:new o.bO(y,n.u_color_ramp),u_opacity:new o.bf(y,n.u_opacity)}),hillshade:(y,n)=>({u_image:new o.bO(y,n.u_image),u_latrange:new o.bT(y,n.u_latrange),u_exaggeration:new o.bf(y,n.u_exaggeration),u_altitudes:new o.bZ(y,n.u_altitudes),u_azimuths:new o.bZ(y,n.u_azimuths),u_accent:new o.bP(y,n.u_accent),u_method:new o.bO(y,n.u_method),u_shadows:new o.bY(y,n.u_shadows),u_highlights:new o.bY(y,n.u_highlights)}),hillshadePrepare:(y,n)=>({u_matrix:new o.bQ(y,n.u_matrix),u_image:new o.bO(y,n.u_image),u_dimension:new o.bT(y,n.u_dimension),u_zoom:new o.bf(y,n.u_zoom),u_unpack:new o.bR(y,n.u_unpack)}),colorRelief:(y,n)=>({u_image:new o.bO(y,n.u_image),u_unpack:new o.bR(y,n.u_unpack),u_dimension:new o.bT(y,n.u_dimension),u_elevation_stops:new o.bO(y,n.u_elevation_stops),u_color_stops:new o.bO(y,n.u_color_stops),u_color_ramp_size:new o.bO(y,n.u_color_ramp_size),u_opacity:new o.bf(y,n.u_opacity)}),line:(y,n)=>({u_translation:new o.bT(y,n.u_translation),u_ratio:new o.bf(y,n.u_ratio),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(y,n.u_units_to_pixels)}),lineGradient:(y,n)=>({u_translation:new o.bT(y,n.u_translation),u_ratio:new o.bf(y,n.u_ratio),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(y,n.u_units_to_pixels),u_image:new o.bO(y,n.u_image),u_image_height:new o.bf(y,n.u_image_height)}),linePattern:(y,n)=>({u_translation:new o.bT(y,n.u_translation),u_texsize:new o.bT(y,n.u_texsize),u_ratio:new o.bf(y,n.u_ratio),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_image:new o.bO(y,n.u_image),u_units_to_pixels:new o.bT(y,n.u_units_to_pixels),u_scale:new o.bS(y,n.u_scale),u_fade:new o.bf(y,n.u_fade)}),lineSDF:(y,n)=>({u_translation:new o.bT(y,n.u_translation),u_ratio:new o.bf(y,n.u_ratio),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(y,n.u_units_to_pixels),u_patternscale_a:new o.bT(y,n.u_patternscale_a),u_patternscale_b:new o.bT(y,n.u_patternscale_b),u_sdfgamma:new o.bf(y,n.u_sdfgamma),u_image:new o.bO(y,n.u_image),u_tex_y_a:new o.bf(y,n.u_tex_y_a),u_tex_y_b:new o.bf(y,n.u_tex_y_b),u_mix:new o.bf(y,n.u_mix)}),raster:(y,n)=>({u_tl_parent:new o.bT(y,n.u_tl_parent),u_scale_parent:new o.bf(y,n.u_scale_parent),u_buffer_scale:new o.bf(y,n.u_buffer_scale),u_fade_t:new o.bf(y,n.u_fade_t),u_opacity:new o.bf(y,n.u_opacity),u_image0:new o.bO(y,n.u_image0),u_image1:new o.bO(y,n.u_image1),u_brightness_low:new o.bf(y,n.u_brightness_low),u_brightness_high:new o.bf(y,n.u_brightness_high),u_saturation_factor:new o.bf(y,n.u_saturation_factor),u_contrast_factor:new o.bf(y,n.u_contrast_factor),u_spin_weights:new o.bS(y,n.u_spin_weights),u_coords_top:new o.bR(y,n.u_coords_top),u_coords_bottom:new o.bR(y,n.u_coords_bottom)}),symbolIcon:(y,n)=>({u_is_size_zoom_constant:new o.bO(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(y,n.u_is_size_feature_constant),u_size_t:new o.bf(y,n.u_size_t),u_size:new o.bf(y,n.u_size),u_camera_to_center_distance:new o.bf(y,n.u_camera_to_center_distance),u_pitch:new o.bf(y,n.u_pitch),u_rotate_symbol:new o.bO(y,n.u_rotate_symbol),u_aspect_ratio:new o.bf(y,n.u_aspect_ratio),u_fade_change:new o.bf(y,n.u_fade_change),u_label_plane_matrix:new o.bQ(y,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(y,n.u_coord_matrix),u_is_text:new o.bO(y,n.u_is_text),u_pitch_with_map:new o.bO(y,n.u_pitch_with_map),u_is_along_line:new o.bO(y,n.u_is_along_line),u_is_variable_anchor:new o.bO(y,n.u_is_variable_anchor),u_texsize:new o.bT(y,n.u_texsize),u_texture:new o.bO(y,n.u_texture),u_translation:new o.bT(y,n.u_translation),u_pitched_scale:new o.bf(y,n.u_pitched_scale)}),symbolSDF:(y,n)=>({u_is_size_zoom_constant:new o.bO(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(y,n.u_is_size_feature_constant),u_size_t:new o.bf(y,n.u_size_t),u_size:new o.bf(y,n.u_size),u_camera_to_center_distance:new o.bf(y,n.u_camera_to_center_distance),u_pitch:new o.bf(y,n.u_pitch),u_rotate_symbol:new o.bO(y,n.u_rotate_symbol),u_aspect_ratio:new o.bf(y,n.u_aspect_ratio),u_fade_change:new o.bf(y,n.u_fade_change),u_label_plane_matrix:new o.bQ(y,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(y,n.u_coord_matrix),u_is_text:new o.bO(y,n.u_is_text),u_pitch_with_map:new o.bO(y,n.u_pitch_with_map),u_is_along_line:new o.bO(y,n.u_is_along_line),u_is_variable_anchor:new o.bO(y,n.u_is_variable_anchor),u_texsize:new o.bT(y,n.u_texsize),u_texture:new o.bO(y,n.u_texture),u_gamma_scale:new o.bf(y,n.u_gamma_scale),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_is_halo:new o.bO(y,n.u_is_halo),u_translation:new o.bT(y,n.u_translation),u_pitched_scale:new o.bf(y,n.u_pitched_scale)}),symbolTextAndIcon:(y,n)=>({u_is_size_zoom_constant:new o.bO(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(y,n.u_is_size_feature_constant),u_size_t:new o.bf(y,n.u_size_t),u_size:new o.bf(y,n.u_size),u_camera_to_center_distance:new o.bf(y,n.u_camera_to_center_distance),u_pitch:new o.bf(y,n.u_pitch),u_rotate_symbol:new o.bO(y,n.u_rotate_symbol),u_aspect_ratio:new o.bf(y,n.u_aspect_ratio),u_fade_change:new o.bf(y,n.u_fade_change),u_label_plane_matrix:new o.bQ(y,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(y,n.u_coord_matrix),u_is_text:new o.bO(y,n.u_is_text),u_pitch_with_map:new o.bO(y,n.u_pitch_with_map),u_is_along_line:new o.bO(y,n.u_is_along_line),u_is_variable_anchor:new o.bO(y,n.u_is_variable_anchor),u_texsize:new o.bT(y,n.u_texsize),u_texsize_icon:new o.bT(y,n.u_texsize_icon),u_texture:new o.bO(y,n.u_texture),u_texture_icon:new o.bO(y,n.u_texture_icon),u_gamma_scale:new o.bf(y,n.u_gamma_scale),u_device_pixel_ratio:new o.bf(y,n.u_device_pixel_ratio),u_is_halo:new o.bO(y,n.u_is_halo),u_translation:new o.bT(y,n.u_translation),u_pitched_scale:new o.bf(y,n.u_pitched_scale)}),background:(y,n)=>({u_opacity:new o.bf(y,n.u_opacity),u_color:new o.bP(y,n.u_color)}),backgroundPattern:(y,n)=>({u_opacity:new o.bf(y,n.u_opacity),u_image:new o.bO(y,n.u_image),u_pattern_tl_a:new o.bT(y,n.u_pattern_tl_a),u_pattern_br_a:new o.bT(y,n.u_pattern_br_a),u_pattern_tl_b:new o.bT(y,n.u_pattern_tl_b),u_pattern_br_b:new o.bT(y,n.u_pattern_br_b),u_texsize:new o.bT(y,n.u_texsize),u_mix:new o.bf(y,n.u_mix),u_pattern_size_a:new o.bT(y,n.u_pattern_size_a),u_pattern_size_b:new o.bT(y,n.u_pattern_size_b),u_scale_a:new o.bf(y,n.u_scale_a),u_scale_b:new o.bf(y,n.u_scale_b),u_pixel_coord_upper:new o.bT(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(y,n.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bf(y,n.u_tile_units_to_pixels)}),terrain:(y,n)=>({u_texture:new o.bO(y,n.u_texture),u_ele_delta:new o.bf(y,n.u_ele_delta),u_fog_matrix:new o.bQ(y,n.u_fog_matrix),u_fog_color:new o.bP(y,n.u_fog_color),u_fog_ground_blend:new o.bf(y,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bf(y,n.u_fog_ground_blend_opacity),u_horizon_color:new o.bP(y,n.u_horizon_color),u_horizon_fog_blend:new o.bf(y,n.u_horizon_fog_blend),u_is_globe_mode:new o.bf(y,n.u_is_globe_mode)}),terrainDepth:(y,n)=>({u_ele_delta:new o.bf(y,n.u_ele_delta)}),terrainCoords:(y,n)=>({u_texture:new o.bO(y,n.u_texture),u_terrain_coords_id:new o.bf(y,n.u_terrain_coords_id),u_ele_delta:new o.bf(y,n.u_ele_delta)}),projectionErrorMeasurement:(y,n)=>({u_input:new o.bf(y,n.u_input),u_output_expected:new o.bf(y,n.u_output_expected)}),atmosphere:(y,n)=>({u_sun_pos:new o.bS(y,n.u_sun_pos),u_atmosphere_blend:new o.bf(y,n.u_atmosphere_blend),u_globe_position:new o.bS(y,n.u_globe_position),u_globe_radius:new o.bf(y,n.u_globe_radius),u_inv_proj_matrix:new o.bQ(y,n.u_inv_proj_matrix)}),sky:(y,n)=>({u_sky_color:new o.bP(y,n.u_sky_color),u_horizon_color:new o.bP(y,n.u_horizon_color),u_horizon:new o.bT(y,n.u_horizon),u_horizon_normal:new o.bT(y,n.u_horizon_normal),u_sky_horizon_blend:new o.bf(y,n.u_sky_horizon_blend),u_sky_blend:new o.bf(y,n.u_sky_blend)})};class oA{constructor(n,l,f){this.context=n;const p=n.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ya{constructor(n,l,f,p){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=p,this.context=n;const v=n.gl;this.buffer=v.createBuffer(),n.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,l){for(let f=0;f<this.attributes.length;f++){const p=l.attributes[this.attributes[f].name];p!==void 0&&n.enableVertexAttribArray(p)}}setVertexAttribPointers(n,l,f){for(let p=0;p<this.attributes.length;p++){const v=this.attributes[p],C=l.attributes[v.name];C!==void 0&&n.vertexAttribPointer(C,v.components,n[Pl[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class fn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ll extends fn{getDefault(){return o.be.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Li extends fn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Ro extends fn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Gn extends fn{getDefault(){return[!0,!0,!0,!0]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class $n extends fn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class bi extends fn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class mi extends fn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const l=this.current;(n.func!==l.func||n.ref!==l.ref||n.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Zs extends fn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Ml extends fn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=n,this.dirty=!1}}class Ea extends fn{getDefault(){return[0,1]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Nc extends fn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=n,this.dirty=!1}}class Kd extends fn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Gd extends fn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.BLEND):l.disable(l.BLEND),this.current=n,this.dirty=!1}}class zh extends fn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class $d extends fn{getDefault(){return o.be.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Hh extends fn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Dc extends fn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=n,this.dirty=!1}}class Qc extends fn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Oc extends fn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Su extends fn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class kl extends fn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class $A extends fn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class aA extends fn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class ks extends fn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class jh extends fn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Vh extends fn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Eu extends fn{getDefault(){return null}set(n){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Ul extends fn{getDefault(){return null}set(n){var l;if(n===this.current&&!this.dirty)return;const f=this.gl;Yi(f)?f.bindVertexArray(n):(l=f.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class zc extends fn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Hc extends fn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class qA extends fn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class lA extends fn{constructor(n,l){super(n),this.context=n,this.parent=l}getDefault(){return null}}class Iu extends lA{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Ja extends lA{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class ds extends lA{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const uo="Framebuffer is not complete";class WA{constructor(n,l,f,p,v){this.context=n,this.width=l,this.height=f;const C=n.gl,F=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Iu(n,F),p)this.depthAttachment=v?new ds(n,F):new Ja(n,F);else if(v)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error(uo)}destroy(){const n=this.context.gl,l=this.colorAttachment.get();if(l&&n.deleteTexture(l),this.depthAttachment){const f=this.depthAttachment.get();f&&n.deleteRenderbuffer(f)}n.deleteFramebuffer(this.framebuffer)}}class an{constructor(n){var l,f;if(this.gl=n,this.clearColor=new Ll(this),this.clearDepth=new Li(this),this.clearStencil=new Ro(this),this.colorMask=new Gn(this),this.depthMask=new $n(this),this.stencilMask=new bi(this),this.stencilFunc=new mi(this),this.stencilOp=new Zs(this),this.stencilTest=new Ml(this),this.depthRange=new Ea(this),this.depthTest=new Nc(this),this.depthFunc=new Kd(this),this.blend=new Gd(this),this.blendFunc=new zh(this),this.blendColor=new $d(this),this.blendEquation=new Hh(this),this.cullFace=new Dc(this),this.cullFaceSide=new Qc(this),this.frontFace=new Oc(this),this.program=new Su(this),this.activeTexture=new kl(this),this.viewport=new $A(this),this.bindFramebuffer=new aA(this),this.bindRenderbuffer=new ks(this),this.bindTexture=new jh(this),this.bindVertexBuffer=new Vh(this),this.bindElementBuffer=new Eu(this),this.bindVertexArray=new Ul(this),this.pixelStoreUnpack=new zc(this),this.pixelStoreUnpackPremultiplyAlpha=new Hc(this),this.pixelStoreUnpackFlipY=new qA(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Yi(n)){this.HALF_FLOAT=n.HALF_FLOAT;const p=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=n.RGBA16F)!==null&&l!==void 0?l:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(f=n.RGB16F)!==null&&f!==void 0?f:p==null?void 0:p.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const p=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,l){return new oA(this,n,l)}createVertexBuffer(n,l,f){return new Ya(this,n,l,f)}createRenderbuffer(n,l,f){const p=this.gl,v=p.createRenderbuffer();return this.bindRenderbuffer.set(v),p.renderbufferStorage(p.RENDERBUFFER,n,l,f),this.bindRenderbuffer.set(null),v}createFramebuffer(n,l,f,p){return new WA(this,n,l,f,p)}clear({color:n,depth:l,stencil:f}){const p=this.gl;let v=0;n&&(v|=p.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(v|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(v|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),p.clear(v)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){o.bG(n.blendFunction,pn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Yi(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var l;return Yi(this.gl)?this.gl.deleteVertexArray(n):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let Rl;function jc(y,n,l,f,p){const v=y.context,C=y.transform,F=v.gl,M=y.useProgram("collisionBox"),O=[];let V=0,q=0;for(let Te=0;Te<f.length;Te++){const De=f[Te],$e=n.getTile(De).getBucket(l);if(!$e)continue;const He=p?$e.textCollisionBox:$e.iconCollisionBox,Xe=$e.collisionCircleArray;Xe.length>0&&(O.push({circleArray:Xe,circleOffset:q,coord:De}),V+=Xe.length/4,q=V),He&&M.draw(v,F.LINES,$r.disabled,Mr.disabled,y.colorModeForRenderPass(),Kr.disabled,Ji(y.transform),y.style.map.terrain&&y.style.map.terrain.getTerrainData(De),C.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,null,y.transform.zoom,null,null,He.collisionVertexBuffer)}if(!p||!O.length)return;const $=y.useProgram("collisionCircle"),Y=new o.b_;Y.resize(4*V),Y._trim();let de=0;for(const Te of O)for(let De=0;De<Te.circleArray.length/4;De++){const $e=4*De,He=Te.circleArray[$e+0],Xe=Te.circleArray[$e+1],tt=Te.circleArray[$e+2],je=Te.circleArray[$e+3];Y.emplace(de++,He,Xe,tt,je,0),Y.emplace(de++,He,Xe,tt,je,1),Y.emplace(de++,He,Xe,tt,je,2),Y.emplace(de++,He,Xe,tt,je,3)}(!Rl||Rl.length<2*V)&&(Rl=function(Te){const De=2*Te,$e=new o.c0;$e.resize(De),$e._trim();for(let He=0;He<De;He++){const Xe=6*He;$e.uint16[Xe+0]=4*He+0,$e.uint16[Xe+1]=4*He+1,$e.uint16[Xe+2]=4*He+2,$e.uint16[Xe+3]=4*He+2,$e.uint16[Xe+4]=4*He+3,$e.uint16[Xe+5]=4*He+0}return $e}(V));const Se=v.createIndexBuffer(Rl,!0),Ce=v.createVertexBuffer(Y,o.b$.members,!0);for(const Te of O){const De=Sl(y.transform);$.draw(v,F.TRIANGLES,$r.disabled,Mr.disabled,y.colorModeForRenderPass(),Kr.disabled,De,y.style.map.terrain&&y.style.map.terrain.getTerrainData(Te.coord),null,l.id,Ce,Se,o.aL.simpleSegment(0,2*Te.circleOffset,Te.circleArray.length,Te.circleArray.length/2),null,y.transform.zoom,null,null,null)}Ce.destroy(),Se.destroy()}const Vc=o.af(new Float32Array(16));function AA(y,n,l,f,p,v){const{horizontalAlign:C,verticalAlign:F}=o.aG(y);return new o.P((-(C-.5)*n/p+f[0])*v,(-(F-.5)*l/p+f[1])*v)}function qd(y,n,l,f,p,v){const C=n.tileAnchorPoint.add(new o.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let F=f.mult(v);l||(F=F.rotate(-p));const M=C.add(F);return Or(M.x,M.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(l){const F=Jt(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(y),M=Math.atan(F.y/F.x)+(F.x<0?Math.PI:0);return y.add(f.rotate(M))}return y.add(f)}function Kh(y,n,l,f,p,v,C,F,M,O,V,q){const $=y.text.placedSymbolArray,Y=y.text.dynamicLayoutVertexArray,de=y.icon.dynamicLayoutVertexArray,Se={};Y.clear();for(let Ce=0;Ce<$.length;Ce++){const Te=$.get(Ce),De=Te.hidden||!Te.crossTileID||y.allowVerticalPlacement&&!Te.placedOrientation?null:f[Te.crossTileID];if(De){const $e=new o.P(Te.anchorX,Te.anchorY),He={getElevation:q,width:p.width,height:p.height,pitchedLabelPlaneMatrix:v,pitchWithMap:l,transform:p,tileAnchorPoint:$e,translation:O,unwrappedTileID:V},Xe=l?Wr($e.x,$e.y,He):Jt($e.x,$e.y,He),tt=hr(p.cameraToCenterDistance,Xe.signedDistanceFromCamera);let je=o.ao(y.textSizeData,F,Te)*tt/o.aA;l&&(je*=y.tilePixelRatio/C);const{width:ut,height:Ft,anchor:vt,textOffset:_t,textBoxScale:xt}=De,ir=AA(vt,ut,Ft,_t,xt,je),nr=p.getPitchedTextCorrection($e.x+O[0],$e.y+O[1],V),zt=qd(Xe.point,He,n,ir,-p.bearingInRadians,nr),ur=y.allowVerticalPlacement&&Te.placedOrientation===o.an.vertical?Math.PI/2:0;for(let sn=0;sn<Te.numGlyphs;sn++)o.au(Y,zt,ur);M&&Te.associatedIconIndex>=0&&(Se[Te.associatedIconIndex]={shiftedAnchor:zt,angle:ur})}else ao(Te.numGlyphs,Y)}if(M){de.clear();const Ce=y.icon.placedSymbolArray;for(let Te=0;Te<Ce.length;Te++){const De=Ce.get(Te);if(De.hidden)ao(De.numGlyphs,de);else{const $e=Se[Te];if($e)for(let He=0;He<De.numGlyphs;He++)o.au(de,$e.shiftedAnchor,$e.angle);else ao(De.numGlyphs,de)}}y.icon.dynamicLayoutVertexBuffer.updateData(de)}y.text.dynamicLayoutVertexBuffer.updateData(Y)}function Fu(y,n,l){return l.iconsInText&&n?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Kc(y,n,l,f,p,v,C,F,M,O,V,q,$){const Y=y.context,de=Y.gl,Se=y.transform,Ce=F==="map",Te=M==="map",De=F!=="viewport"&&l.layout.get("symbol-placement")!=="point",$e=Ce&&!Te&&!De,He=!l.layout.get("symbol-sort-key").isConstant();let Xe=!1;const tt=y.getDepthModeForSublayer(0,$r.ReadOnly),je=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ut=[],Ft=Se.getCircleRadiusCorrection();for(const vt of f){const _t=n.getTile(vt),xt=_t.getBucket(l);if(!xt)continue;const ir=p?xt.text:xt.icon;if(!ir||!ir.segments.get().length||!ir.hasVisibleVertices)continue;const nr=ir.programConfigurations.get(l.id),zt=p||xt.sdfIcons,ur=p?xt.textSizeData:xt.iconSizeData,sn=Te||Se.pitch!==0,xn=y.useProgram(Fu(zt,p,xt),nr),Jn=o.am(ur,Se.zoom),kn=y.style.map.terrain&&y.style.map.terrain.getTerrainData(vt);let Un,En,Sn,Dn,is=[0,0],vn=null;if(p)En=_t.glyphAtlasTexture,Sn=de.LINEAR,Un=_t.glyphAtlasTexture.size,xt.iconsInText&&(is=_t.imageAtlasTexture.size,vn=_t.imageAtlasTexture,Dn=sn||y.options.rotating||y.options.zooming||ur.kind==="composite"||ur.kind==="camera"?de.LINEAR:de.NEAREST);else{const Gi=l.layout.get("icon-size").constantOr(0)!==1||xt.iconsNeedLinear;En=_t.imageAtlasTexture,Sn=zt||y.options.rotating||y.options.zooming||Gi||sn?de.LINEAR:de.NEAREST,Un=_t.imageAtlasTexture.size}const fs=o.aB(_t,1,y.transform.zoom),ss=gr(Ce,y.transform,fs),Ta=o.L();o.ap(Ta,ss);const ic=on(Te,Ce,y.transform,fs),sc=o.aC(Se,_t,v,C),Nl=Se.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Wh=je&&xt.hasTextData(),Zh=l.layout.get("icon-text-fit")!=="none"&&Wh&&xt.hasIconData();if(De){const Gi=y.style.map.terrain?(xo,bs)=>y.style.map.terrain.getElevation(vt,xo,bs):null,ui=l.layout.get("text-rotation-alignment")==="map";Fn(xt,y,p,ss,Ta,Te,O,ui,vt.toUnwrapped(),Se.width,Se.height,sc,Gi)}const Nu=p&&je||Zh,zo=De||Nu?Vc:Te?ss:y.transform.clipSpaceToPixelsMatrix,nl=zt&&l.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oc;oc=zt?xt.iconsInText?Sa(ur.kind,Jn,$e,Te,De,Nu,y,zo,ic,sc,Un,is,Ft):Tl(ur.kind,Jn,$e,Te,De,Nu,y,zo,ic,sc,p,Un,0,Ft):pi(ur.kind,Jn,$e,Te,De,Nu,y,zo,ic,sc,p,Un,Ft);const Jc={program:xn,buffers:ir,uniformValues:oc,projectionData:Nl,atlasTexture:En,atlasTextureIcon:vn,atlasInterpolation:Sn,atlasInterpolationIcon:Dn,isSDF:zt,hasHalo:nl};if(He&&xt.canOverlap){Xe=!0;const Gi=ir.segments.get();for(const ui of Gi)ut.push({segments:new o.aL([ui]),sortKey:ui.sortKey,state:Jc,terrainData:kn})}else ut.push({segments:ir.segments,sortKey:0,state:Jc,terrainData:kn})}Xe&&ut.sort((vt,_t)=>vt.sortKey-_t.sortKey);for(const vt of ut){const _t=vt.state;if(Y.activeTexture.set(de.TEXTURE0),_t.atlasTexture.bind(_t.atlasInterpolation,de.CLAMP_TO_EDGE),_t.atlasTextureIcon&&(Y.activeTexture.set(de.TEXTURE1),_t.atlasTextureIcon&&_t.atlasTextureIcon.bind(_t.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),_t.isSDF){const xt=_t.uniformValues;_t.hasHalo&&(xt.u_is_halo=1,ZA(_t.buffers,vt.segments,l,y,_t.program,tt,V,q,xt,_t.projectionData,vt.terrainData)),xt.u_is_halo=0}ZA(_t.buffers,vt.segments,l,y,_t.program,tt,V,q,_t.uniformValues,_t.projectionData,vt.terrainData)}}function ZA(y,n,l,f,p,v,C,F,M,O,V){const q=f.context;p.draw(q,q.gl.TRIANGLES,v,C,F,Kr.backCCW,M,V,O,l.id,y.layoutVertexBuffer,y.indexBuffer,n,l.paint,f.transform.zoom,y.programConfigurations.get(l.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Tu(y,n,l,f,p){const v=y.context,C=v.gl,F=Mr.disabled,M=new pn([C.ONE,C.ONE],o.be.transparent,[!0,!0,!0,!0]),O=n.getBucket(l);if(!O)return;const V=f.key;let q=l.heatmapFbos.get(V);q||(q=XA(v,n.tileSize,n.tileSize),l.heatmapFbos.set(V,q)),v.bindFramebuffer.set(q.framebuffer),v.viewport.set([0,0,n.tileSize,n.tileSize]),v.clear({color:o.be.transparent});const $=O.programConfigurations.get(l.id),Y=y.useProgram("heatmap",$,!p),de=y.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Se=y.style.map.terrain.getTerrainData(f);Y.draw(v,C.TRIANGLES,$r.disabled,F,M,Kr.disabled,El(n,y.transform.zoom,l.paint.get("heatmap-intensity"),1),Se,de,l.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,l.paint,y.transform.zoom,$)}function Pu(y,n,l,f,p){const v=y.context,C=v.gl,F=y.transform;v.setColorMode(y.colorModeForRenderPass());const M=Lu(v,n),O=l.key,V=n.heatmapFbos.get(O);if(!V)return;v.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,V.colorAttachment.get()),v.activeTexture.set(C.TEXTURE1),M.bind(C.LINEAR,C.CLAMP_TO_EDGE);const q=F.getProjectionData({overscaledTileID:l,applyTerrainMatrix:p,applyGlobeMatrix:!f});y.useProgram("heatmapTexture").draw(v,C.TRIANGLES,$r.disabled,Mr.disabled,y.colorModeForRenderPass(),Kr.disabled,ji(y,n,0,1),null,q,n.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,n.paint,F.zoom),V.destroy(),n.heatmapFbos.delete(O)}function XA(y,n,l){var f,p;const v=y.gl,C=v.createTexture();v.bindTexture(v.TEXTURE_2D,C),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);const F=(f=y.HALF_FLOAT)!==null&&f!==void 0?f:v.UNSIGNED_BYTE,M=(p=y.RGBA16F)!==null&&p!==void 0?p:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,M,n,l,0,v.RGBA,F,null);const O=y.createFramebuffer(n,l,!1,!1);return O.colorAttachment.set(C),O}function Lu(y,n){return n.colorRampTexture||(n.colorRampTexture=new o.T(y,n.colorRamp,y.gl.RGBA)),n.colorRampTexture}function Gh(y,n,l,f,p){if(!l||!f||!f.imageAtlas)return;const v=f.imageAtlas.patternPositions;let C=v[l.to.toString()],F=v[l.from.toString()];if(!C&&F&&(C=F),!F&&C&&(F=C),!C||!F){const M=p.getPaintProperty(n);C=v[M],F=v[M]}C&&F&&y.setConstantPatternPositions(C,F)}function Gc(y,n,l,f,p,v,C,F){const M=y.context.gl,O="fill-pattern",V=l.paint.get(O),q=V&&V.constantOr(1),$=l.getCrossfadeParameters();let Y,de,Se,Ce,Te;const De=y.transform,$e=l.paint.get("fill-translate"),He=l.paint.get("fill-translate-anchor");C?(de=q&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Y=M.LINES):(de=q?"fillPattern":"fill",Y=M.TRIANGLES);const Xe=V.constantOr(null);for(const tt of f){const je=n.getTile(tt);if(q&&!je.patternsLoaded())continue;const ut=je.getBucket(l);if(!ut)continue;const Ft=ut.programConfigurations.get(l.id),vt=y.useProgram(de,Ft),_t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(tt);q&&(y.context.activeTexture.set(M.TEXTURE0),je.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),Ft.updatePaintBuffers($)),Gh(Ft,O,Xe,je,l);const xt=De.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),ir=o.aC(De,je,$e,He);if(C){Ce=ut.indexBuffer2,Te=ut.segments2;const zt=[M.drawingBufferWidth,M.drawingBufferHeight];Se=de==="fillOutlinePattern"&&q?jA(y,$,je,zt,ir):hs(zt,ir)}else Ce=ut.indexBuffer,Te=ut.segments,Se=q?ko(y,$,je,ir):{u_fill_translate:ir};const nr=y.stencilModeForClipping(tt);vt.draw(y.context,Y,p,nr,v,Kr.backCCW,Se,_t,xt,l.id,ut.layoutVertexBuffer,Ce,Te,l.paint,y.transform.zoom,Ft)}}function YA(y,n,l,f,p,v,C,F){const M=y.context,O=M.gl,V="fill-extrusion-pattern",q=l.paint.get(V),$=q.constantOr(1),Y=l.getCrossfadeParameters(),de=l.paint.get("fill-extrusion-opacity"),Se=q.constantOr(null),Ce=y.transform;for(const Te of f){const De=n.getTile(Te),$e=De.getBucket(l);if(!$e)continue;const He=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Te),Xe=$e.programConfigurations.get(l.id),tt=y.useProgram($?"fillExtrusionPattern":"fillExtrusion",Xe);$&&(y.context.activeTexture.set(O.TEXTURE0),De.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Xe.updatePaintBuffers(Y));const je=Ce.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!F,applyTerrainMatrix:!0});Gh(Xe,V,Se,De,l);const ut=o.aC(Ce,De,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Ft=l.paint.get("fill-extrusion-vertical-gradient"),vt=$?Hi(y,Ft,de,ut,Te,Y,De):Mo(y,Ft,de,ut);tt.draw(M,M.gl.TRIANGLES,p,v,C,Kr.backCCW,vt,He,je,l.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,l.paint,y.transform.zoom,Xe,y.style.map.terrain&&$e.centroidVertexBuffer)}}function JA(y,n,l,f,p,v,C,F,M){var O;const V=y.style.projection,q=y.context,$=y.transform,Y=q.gl,de=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],Se=y.useProgram("hillshade",null,!1,de),Ce=!y.options.moving;for(const Te of f){const De=n.getTile(Te),$e=De.fbo;if(!$e)continue;const He=V.getMeshFromTileID(q,Te.canonical,F,!0,"raster"),Xe=(O=y.style.map.terrain)===null||O===void 0?void 0:O.getTerrainData(Te);q.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,$e.colorAttachment.get());const tt=$.getProjectionData({overscaledTileID:Te,aligned:Ce,applyGlobeMatrix:!M,applyTerrainMatrix:!0});Se.draw(q,Y.TRIANGLES,v,p[Te.overscaledZ],C,Kr.backCCW,xs(y,De,l),Xe,tt,l.id,He.vertexBuffer,He.indexBuffer,He.segments)}}function cA(y,n,l,f,p,v,C,F,M){var O;const V=y.style.projection,q=y.context,$=y.transform,Y=q.gl,de=y.useProgram("colorRelief"),Se=!y.options.moving;let Ce=!0,Te=0;for(const De of f){const $e=n.getTile(De),He=$e.dem;if(Ce){const vt=Y.getParameter(Y.MAX_TEXTURE_SIZE),{elevationTexture:_t,colorTexture:xt}=l.getColorRampTextures(q,vt,He.getUnpackVector());q.activeTexture.set(Y.TEXTURE1),_t.bind(Y.NEAREST,Y.CLAMP_TO_EDGE),q.activeTexture.set(Y.TEXTURE4),xt.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Ce=!1,Te=_t.size[0]}if(!He||!He.data)continue;const Xe=He.stride,tt=He.getPixels();if(q.activeTexture.set(Y.TEXTURE0),q.pixelStoreUnpackPremultiplyAlpha.set(!1),$e.demTexture=$e.demTexture||y.getTileTexture(Xe),$e.demTexture){const vt=$e.demTexture;vt.update(tt,{premultiply:!1}),vt.bind(Y.LINEAR,Y.CLAMP_TO_EDGE)}else $e.demTexture=new o.T(q,tt,Y.RGBA,{premultiply:!1}),$e.demTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const je=V.getMeshFromTileID(q,De.canonical,F,!0,"raster"),ut=(O=y.style.map.terrain)===null||O===void 0?void 0:O.getTerrainData(De),Ft=$.getProjectionData({overscaledTileID:De,aligned:Se,applyGlobeMatrix:!M,applyTerrainMatrix:!0});de.draw(q,Y.TRIANGLES,v,p[De.overscaledZ],C,Kr.backCCW,Il(l,$e.dem,Te),ut,Ft,l.id,je.vertexBuffer,je.indexBuffer,je.segments)}}const $c=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function No(y,n,l,f,p,v,C,F,M=!1,O=!1){const V=f[f.length-1].overscaledZ,q=y.context,$=q.gl,Y=y.useProgram("raster"),de=y.transform,Se=y.style.projection,Ce=y.colorModeForRenderPass(),Te=!y.options.moving;for(const De of f){const $e=y.getDepthModeForSublayer(De.overscaledZ-V,l.paint.get("raster-opacity")===1?$r.ReadWrite:$r.ReadOnly,$.LESS),He=n.getTile(De);He.registerFadeDuration(l.paint.get("raster-fade-duration"));const Xe=n.findLoadedParent(De,0),tt=n.findLoadedSibling(De),je=zp(He,Xe||tt||null,n,l,y.transform,y.style.map.terrain);let ut,Ft;const vt=l.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;q.activeTexture.set($.TEXTURE0),He.texture.bind(vt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),q.activeTexture.set($.TEXTURE1),Xe?(Xe.texture.bind(vt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),ut=Math.pow(2,Xe.tileID.overscaledZ-He.tileID.overscaledZ),Ft=[He.tileID.canonical.x*ut%1,He.tileID.canonical.y*ut%1]):He.texture.bind(vt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),He.texture.useMipmap&&q.extTextureFilterAnisotropic&&y.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,q.extTextureFilterAnisotropicMax);const _t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(De),xt=de.getProjectionData({overscaledTileID:De,aligned:Te,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),ir=Aa(Ft||[0,0],ut||1,je,l,F),nr=Se.getMeshFromTileID(q,De.canonical,v,C,"raster");Y.draw(q,$.TRIANGLES,$e,p?p[De.overscaledZ]:Mr.disabled,Ce,M?Kr.frontCCW:Kr.backCCW,ir,_t,xt,l.id,nr.vertexBuffer,nr.indexBuffer,nr.segments)}}function zp(y,n,l,f,p,v){const C=f.paint.get("raster-fade-duration");if(!v&&C>0){const F=P.now(),M=(F-y.timeAdded)/C,O=n?(F-n.timeAdded)/C:-1,V=l.getSource(),q=St(p,{tileSize:V.tileSize,roundZoom:V.roundZoom}),$=!n||Math.abs(n.tileID.overscaledZ-q)>Math.abs(y.tileID.overscaledZ-q),Y=$&&y.refreshedUponExpiration?1:o.ag($?M:1-O,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),n?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}const Wd=new o.be(1,0,0,1),qc=new o.be(0,1,0,1),$h=new o.be(0,0,1,1),Zd=new o.be(1,0,1,1),Xd=new o.be(0,1,1,1);function Wc(y,n,l,f){ho(y,0,n+l/2,y.transform.width,l,f)}function ca(y,n,l,f){ho(y,n-l/2,0,l,y.transform.height,f)}function ho(y,n,l,f,p,v){const C=y.context,F=C.gl;F.enable(F.SCISSOR_TEST),F.scissor(n*y.pixelRatio,l*y.pixelRatio,f*y.pixelRatio,p*y.pixelRatio),C.clear({color:v}),F.disable(F.SCISSOR_TEST)}function Ia(y,n,l){const f=y.context,p=f.gl,v=y.useProgram("debug"),C=$r.disabled,F=Mr.disabled,M=y.colorModeForRenderPass(),O="$debug",V=y.style.map.terrain&&y.style.map.terrain.getTerrainData(l);f.activeTexture.set(p.TEXTURE0);const q=n.getTileByID(l.key).latestRawTileData,$=Math.floor((q&&q.byteLength||0)/1024),Y=n.getTile(l).tileSize,de=512/Math.min(Y,512)*(l.overscaledZ/y.transform.zoom)*.5;let Se=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Se+=` => ${l.overscaledZ}`),function(Te,De){Te.initDebugOverlayCanvas();const $e=Te.debugOverlayCanvas,He=Te.context.gl,Xe=Te.debugOverlayCanvas.getContext("2d");Xe.clearRect(0,0,$e.width,$e.height),Xe.shadowColor="white",Xe.shadowBlur=2,Xe.lineWidth=1.5,Xe.strokeStyle="white",Xe.textBaseline="top",Xe.font="bold 36px Open Sans, sans-serif",Xe.fillText(De,5,5),Xe.strokeText(De,5,5),Te.debugOverlayTexture.update($e),Te.debugOverlayTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE)}(y,`${Se} ${$}kB`);const Ce=y.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(f,p.TRIANGLES,C,F,pn.alphaBlended,Kr.disabled,iA(o.be.transparent,de),null,Ce,O,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),v.draw(f,p.LINE_STRIP,C,F,M,Kr.disabled,iA(o.be.red),V,Ce,O,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function gi(y,n,l,f){const{isRenderingGlobe:p}=f,v=y.context,C=v.gl,F=y.transform,M=y.colorModeForRenderPass(),O=y.getDepthModeFor3D(),V=y.useProgram("terrain");v.bindFramebuffer.set(null),v.viewport.set([0,0,y.width,y.height]);for(const q of l){const $=n.getTerrainMesh(q.tileID),Y=y.renderToTexture.getTexture(q),de=n.getTerrainData(q.tileID);v.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,Y.texture);const Se=n.getMeshFrameDelta(F.zoom),Ce=F.calculateFogMatrix(q.tileID.toUnwrapped()),Te=Cu(Se,Ce,y.style.sky,F.pitch,p),De=F.getProjectionData({overscaledTileID:q.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(v,C.TRIANGLES,O,Mr.disabled,M,Kr.backCCW,Te,de,De,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}function el(y,n){if(!n.mesh){const l=new o.aK;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);const f=new o.aM;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),n.mesh=new ia(y.createVertexBuffer(l,sa.members),y.createIndexBuffer(f),o.aL.simpleSegment(0,0,l.length,f.length))}return n.mesh}class es{constructor(n,l){this.context=new an(n),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Et.maxUnderzooming+Et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yl}resize(n,l,f){if(this.width=Math.floor(n*f),this.height=Math.floor(l*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const n=this.context,l=new o.aK;l.emplaceBack(0,0),l.emplaceBack(o.$,0),l.emplaceBack(0,o.$),l.emplaceBack(o.$,o.$),this.tileExtentBuffer=n.createVertexBuffer(l,sa.members),this.tileExtentSegments=o.aL.simpleSegment(0,0,4,2);const f=new o.aK;f.emplaceBack(0,0),f.emplaceBack(o.$,0),f.emplaceBack(0,o.$),f.emplaceBack(o.$,o.$),this.debugBuffer=n.createVertexBuffer(f,sa.members),this.debugSegments=o.aL.simpleSegment(0,0,4,5);const p=new o.c5;p.emplaceBack(0,0,0,0),p.emplaceBack(o.$,0,o.$,0),p.emplaceBack(0,o.$,0,o.$),p.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=n.createVertexBuffer(p,Bl.members),this.rasterBoundsSegments=o.aL.simpleSegment(0,0,4,2);const v=new o.aK;v.emplaceBack(0,0),v.emplaceBack(o.$,0),v.emplaceBack(0,o.$),v.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(v,sa.members),this.rasterBoundsSegmentsPosOnly=o.aL.simpleSegment(0,0,4,5);const C=new o.aK;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(C,sa.members),this.viewportSegments=o.aL.simpleSegment(0,0,4,2);const F=new o.c6;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(F);const M=new o.aM;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(M);const O=this.context.gl;this.stencilClearMode=new Mr({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.tileExtentMesh=new ia(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,l=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=o.L();o.bX(f,0,this.width,this.height,0,0,1),o.N(f,f,[l.drawingBufferWidth,l.drawingBufferHeight,0]);const p={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(n,l.TRIANGLES,$r.disabled,this.stencilClearMode,pn.disabled,Kr.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,l,f){if(this.currentStencilSource===n.source||!n.isTileClipped()||!l||!l.length)return;this.currentStencilSource=n.source,this.nextStencilID+l.length>256&&this.clearStencil();const p=this.context;p.setColorMode(pn.disabled),p.setDepthMode($r.disabled);const v={};for(const C of l)v[C.key]=this.nextStencilID++;this._renderTileMasks(v,l,f,!0),this._renderTileMasks(v,l,f,!1),this._tileClippingMaskIDs=v}_renderTileMasks(n,l,f,p){const v=this.context,C=v.gl,F=this.style.projection,M=this.transform,O=this.useProgram("clippingMask");for(const V of l){const q=n[V.key],$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),Y=F.getMeshFromTileID(this.context,V.canonical,p,!0,"stencil"),de=M.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!f,applyTerrainMatrix:!0});O.draw(v,C.TRIANGLES,$r.disabled,new Mr({func:C.ALWAYS,mask:0},q,255,C.KEEP,C.KEEP,C.REPLACE),pn.disabled,f?Kr.disabled:Kr.backCCW,null,$,de,"$clipping",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}_renderTilesDepthBuffer(){const n=this.context,l=n.gl,f=this.style.projection,p=this.transform,v=this.useProgram("depth"),C=this.getDepthModeFor3D(),F=pt(p,{tileSize:p.tileSize});for(const M of F){const O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M),V=f.getMeshFromTileID(this.context,M.canonical,!0,!0,"raster"),q=p.getProjectionData({overscaledTileID:M,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(n,l.TRIANGLES,C,Mr.disabled,pn.disabled,Kr.backCCW,null,O,q,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,l=this.context.gl;return new Mr({func:l.NOTEQUAL,mask:255},n,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(n){const l=this.context.gl;return new Mr({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const l=this.context.gl,f=n.sort((C,F)=>F.overscaledZ-C.overscaledZ),p=f[f.length-1].overscaledZ,v=f[0].overscaledZ-p+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const C={};for(let F=0;F<v;F++)C[F+p]=new Mr({func:l.GEQUAL,mask:255},F+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=v,[C,f]}return[{[p]:Mr.disabled},f]}stencilConfigForOverlapTwoPass(n){const l=this.context.gl,f=n.sort((C,F)=>F.overscaledZ-C.overscaledZ),p=f[f.length-1].overscaledZ,v=f[0].overscaledZ-p+1;if(this.clearStencil(),v>1){const C={},F={};for(let M=0;M<v;M++)C[M+p]=new Mr({func:l.GREATER,mask:255},v+1+M,255,l.KEEP,l.KEEP,l.REPLACE),F[M+p]=new Mr({func:l.GREATER,mask:255},1+M,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*v+1,[C,F,f]}return this.nextStencilID=3,[{[p]:new Mr({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[p]:new Mr({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},f]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new pn([n.CONSTANT_COLOR,n.ONE],new o.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pn.unblended:pn.alphaBlended}getDepthModeForSublayer(n,l,f){if(!this.opaquePassEnabledForLayer())return $r.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new $r(f||this.context.gl.LEQUAL,l,[p,p])}getDepthModeFor3D(){return new $r(this.context.gl.LEQUAL,$r.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,l){var f,p;this.style=n,this.options=l,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(P.now()),this.imageManager.beginFrame();const v=this.style._order,C=this.style.sourceCaches,F={},M={},O={},V={isRenderingToTexture:!1,isRenderingGlobe:((f=n.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const $ in C){const Y=C[$];Y.used&&Y.prepare(this.context),F[$]=Y.getVisibleCoordinates(!1),M[$]=F[$].slice().reverse(),O[$]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<v.length;$++)if(this.style._layers[v[$]].is3D()){this.opaquePassCutoff=$;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const $ of v){const Y=this.style._layers[$];if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const de=M[Y.source];(Y.type==="custom"||de.length)&&this.renderLayer(this,C[Y.source],Y,de,V)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:$=>this.useProgram($)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?o.be.black:o.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function($,Y){const de=$.context,Se=de.gl,Ce=((tt,je,ut)=>{const Ft=Math.cos(je.rollInRadians),vt=Math.sin(je.rollInRadians),_t=se(je),xt=je.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:tt.properties.get("sky-color"),u_horizon_color:tt.properties.get("horizon-color"),u_horizon:[(je.width/2-_t*vt)*ut,(je.height/2+_t*Ft)*ut],u_horizon_normal:[-vt,Ft],u_sky_horizon_blend:tt.properties.get("sky-horizon-blend")*je.height/2*ut,u_sky_blend:xt}})(Y,$.style.map.transform,$.pixelRatio),Te=new $r(Se.LEQUAL,$r.ReadWrite,[0,1]),De=Mr.disabled,$e=$.colorModeForRenderPass(),He=$.useProgram("sky"),Xe=el(de,Y);He.draw(de,Se.TRIANGLES,Te,De,$e,Kr.disabled,Ce,null,void 0,"sky",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[v[this.currentLayer]],Y=C[$.source],de=F[$.source];this._renderTileClippingMasks($,de,!1),this.renderLayer(this,Y,$,de,V)}this.renderPass="translucent";let q=!1;for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const $=this.style._layers[v[this.currentLayer]],Y=C[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($,V))continue;this.opaquePassEnabledForLayer()||q||(q=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const de=($.type==="symbol"?O:M)[$.source];this._renderTileClippingMasks($,F[$.source],!!this.renderToTexture),this.renderLayer(this,Y,$,de,V)}if(V.isRenderingGlobe&&function($,Y,de){const Se=$.context,Ce=Se.gl,Te=$.useProgram("atmosphere"),De=new $r(Ce.LEQUAL,$r.ReadOnly,[0,1]),$e=$.transform,He=function(xt,ir){const nr=xt.properties.get("position"),zt=[-nr.x,-nr.y,-nr.z],ur=o.af(new Float64Array(16));return xt.properties.get("anchor")==="map"&&(o.b5(ur,ur,ir.rollInRadians),o.b6(ur,ur,-ir.pitchInRadians),o.b5(ur,ur,ir.bearingInRadians),o.b6(ur,ur,ir.center.lat*Math.PI/180),o.by(ur,ur,-ir.center.lng*Math.PI/180)),o.c4(zt,zt,ur),zt}(de,$.transform),Xe=$e.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),tt=Y.properties.get("atmosphere-blend")*Xe.projectionTransition;if(tt===0)return;const je=qs($e.worldSize,$e.center.lat),ut=$e.inverseProjectionMatrix,Ft=new Float64Array(4);Ft[3]=1,o.av(Ft,Ft,$e.modelViewProjectionMatrix),Ft[0]/=Ft[3],Ft[1]/=Ft[3],Ft[2]/=Ft[3],Ft[3]=1,o.av(Ft,Ft,ut),Ft[0]/=Ft[3],Ft[1]/=Ft[3],Ft[2]/=Ft[3],Ft[3]=1;const vt=((xt,ir,nr,zt,ur)=>({u_sun_pos:xt,u_atmosphere_blend:ir,u_globe_position:nr,u_globe_radius:zt,u_inv_proj_matrix:ur}))(He,tt,[Ft[0],Ft[1],Ft[2]],je,ut),_t=el(Se,Y);Te.draw(Se,Ce.TRIANGLES,De,Mr.disabled,pn.alphaBlended,Kr.disabled,vt,null,null,"atmosphere",_t.vertexBuffer,_t.indexBuffer,_t.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const $=function(Y,de){let Se=null;const Ce=Object.values(Y._layers).flatMap(He=>He.source&&!He.isHidden(de)?[Y.sourceCaches[He.source]]:[]),Te=Ce.filter(He=>He.getSource().type==="vector"),De=Ce.filter(He=>He.getSource().type!=="vector"),$e=He=>{(!Se||Se.getSource().maxzoom<He.getSource().maxzoom)&&(Se=He)};return Te.forEach(He=>$e(He)),Se||De.forEach(He=>$e(He)),Se}(this.style,this.transform.zoom);$&&function(Y,de,Se){for(let Ce=0;Ce<Se.length;Ce++)Ia(Y,de,Se[Ce])}(this,$,$.getVisibleCoordinates())}this.options.showPadding&&function($){const Y=$.transform.padding;Wc($,$.transform.height-(Y.top||0),3,Wd),Wc($,Y.bottom||0,3,qc),ca($,Y.left||0,3,$h),ca($,$.transform.width-(Y.right||0),3,Zd);const de=$.transform.centerPoint;(function(Se,Ce,Te,De){ho(Se,Ce-1,Te-10,2,20,De),ho(Se,Ce-10,Te-1,20,2,De)})($,de.x,$.transform.height-de.y,Xd)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=n?!o.c7(l,f):!o.c8(l,f)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(o.c9(l,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,C){const F=v.context,M=F.gl,O=v.transform,V=pn.unblended,q=new $r(M.LEQUAL,$r.ReadWrite,[0,1]),$=C.sourceCache.getRenderableTiles(),Y=v.useProgram("terrainDepth");F.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),F.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),F.clear({color:o.be.transparent,depth:1});for(const de of $){const Se=C.getTerrainMesh(de.tileID),Ce=C.getTerrainData(de.tileID),Te=O.getProjectionData({overscaledTileID:de.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),De={u_ele_delta:C.getMeshFrameDelta(O.zoom)};Y.draw(F,M.TRIANGLES,q,Mr.disabled,V,Kr.backCCW,De,Ce,Te,"terrain",Se.vertexBuffer,Se.indexBuffer,Se.segments)}F.bindFramebuffer.set(null),F.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,C){const F=v.context,M=F.gl,O=v.transform,V=pn.unblended,q=new $r(M.LEQUAL,$r.ReadWrite,[0,1]),$=C.getCoordsTexture(),Y=C.sourceCache.getRenderableTiles(),de=v.useProgram("terrainCoords");F.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),F.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),F.clear({color:o.be.transparent,depth:1}),C.coordsIndex=[];for(const Se of Y){const Ce=C.getTerrainMesh(Se.tileID),Te=C.getTerrainData(Se.tileID);F.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,$.texture);const De={u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(O.zoom)},$e=O.getProjectionData({overscaledTileID:Se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});de.draw(F,M.TRIANGLES,q,Mr.disabled,V,Kr.backCCW,De,Te,$e,"terrain",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments),C.coordsIndex.push(Se.tileID.key)}F.bindFramebuffer.set(null),F.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(n,l,f,p,v){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(p||[]).length)&&(this.id=f.id,o.ca(f)?function(C,F,M,O,V,q){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:$}=q,Y=Mr.disabled,de=C.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Se,Ce,Te,De,$e,He,Xe,tt,je){const ut=Ce.transform,Ft=Ce.style.map.terrain,vt=$e==="map",_t=He==="map";for(const xt of Se){const ir=De.getTile(xt),nr=ir.getBucket(Te);if(!nr||!nr.text||!nr.text.segments.get().length)continue;const zt=o.am(nr.textSizeData,ut.zoom),ur=o.aB(ir,1,Ce.transform.zoom),sn=gr(vt,Ce.transform,ur),xn=Te.layout.get("icon-text-fit")!=="none"&&nr.hasIconData();if(zt){const Jn=Math.pow(2,ut.zoom-ir.tileID.overscaledZ),kn=Ft?(Un,En)=>Ft.getElevation(xt,Un,En):null;Kh(nr,vt,_t,je,ut,sn,Jn,zt,xn,o.aC(ut,ir,Xe,tt),xt.toUnwrapped(),kn)}}}(O,C,M,F,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),V),M.paint.get("icon-opacity").constantOr(1)!==0&&Kc(C,F,M,O,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),Y,de,$),M.paint.get("text-opacity").constantOr(1)!==0&&Kc(C,F,M,O,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),Y,de,$),F.map.showCollisionBoxes&&(jc(C,F,M,O,!0),jc(C,F,M,O,!1))}(n,l,f,p,this.style.placement.variableOffsets,v):o.cb(f)?function(C,F,M,O,V){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:q}=V,$=M.paint.get("circle-opacity"),Y=M.paint.get("circle-stroke-width"),de=M.paint.get("circle-stroke-opacity"),Se=!M.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(Y.constantOr(1)===0||de.constantOr(1)===0))return;const Ce=C.context,Te=Ce.gl,De=C.transform,$e=C.getDepthModeForSublayer(0,$r.ReadOnly),He=Mr.disabled,Xe=C.colorModeForRenderPass(),tt=[],je=De.getCircleRadiusCorrection();for(let ut=0;ut<O.length;ut++){const Ft=O[ut],vt=F.getTile(Ft),_t=vt.getBucket(M);if(!_t)continue;const xt=M.paint.get("circle-translate"),ir=M.paint.get("circle-translate-anchor"),nr=o.aC(De,vt,xt,ir),zt=_t.programConfigurations.get(M.id),ur=C.useProgram("circle",zt),sn=_t.layoutVertexBuffer,xn=_t.indexBuffer,Jn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ft),kn={programConfiguration:zt,program:ur,layoutVertexBuffer:sn,indexBuffer:xn,uniformValues:nA(C,vt,M,nr,je),terrainData:Jn,projectionData:De.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!q,applyTerrainMatrix:!0})};if(Se){const Un=_t.segments.get();for(const En of Un)tt.push({segments:new o.aL([En]),sortKey:En.sortKey,state:kn})}else tt.push({segments:_t.segments,sortKey:0,state:kn})}Se&&tt.sort((ut,Ft)=>ut.sortKey-Ft.sortKey);for(const ut of tt){const{programConfiguration:Ft,program:vt,layoutVertexBuffer:_t,indexBuffer:xt,uniformValues:ir,terrainData:nr,projectionData:zt}=ut.state;vt.draw(Ce,Te.TRIANGLES,$e,He,Xe,Kr.backCCW,ir,nr,zt,M.id,_t,xt,ut.segments,M.paint,C.transform.zoom,Ft)}}(n,l,f,p,v):o.cc(f)?function(C,F,M,O,V){if(M.paint.get("heatmap-opacity")===0)return;const q=C.context,{isRenderingToTexture:$,isRenderingGlobe:Y}=V;if(C.style.map.terrain){for(const de of O){const Se=F.getTile(de);F.hasRenderableParent(de)||(C.renderPass==="offscreen"?Tu(C,Se,M,de,Y):C.renderPass==="translucent"&&Pu(C,M,de,$,Y))}q.viewport.set([0,0,C.width,C.height])}else C.renderPass==="offscreen"?function(de,Se,Ce,Te){const De=de.context,$e=De.gl,He=de.transform,Xe=Mr.disabled,tt=new pn([$e.ONE,$e.ONE],o.be.transparent,[!0,!0,!0,!0]);(function(je,ut,Ft){const vt=je.gl;je.activeTexture.set(vt.TEXTURE1),je.viewport.set([0,0,ut.width/4,ut.height/4]);let _t=Ft.heatmapFbos.get(o.c1);_t?(vt.bindTexture(vt.TEXTURE_2D,_t.colorAttachment.get()),je.bindFramebuffer.set(_t.framebuffer)):(_t=XA(je,ut.width/4,ut.height/4),Ft.heatmapFbos.set(o.c1,_t))})(De,de,Ce),De.clear({color:o.be.transparent});for(let je=0;je<Te.length;je++){const ut=Te[je];if(Se.hasRenderableParent(ut))continue;const Ft=Se.getTile(ut),vt=Ft.getBucket(Ce);if(!vt)continue;const _t=vt.programConfigurations.get(Ce.id),xt=de.useProgram("heatmap",_t),ir=He.getProjectionData({overscaledTileID:ut,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),nr=He.getCircleRadiusCorrection();xt.draw(De,$e.TRIANGLES,$r.disabled,Xe,tt,Kr.backCCW,El(Ft,He.zoom,Ce.paint.get("heatmap-intensity"),nr),null,ir,Ce.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,Ce.paint,He.zoom,_t)}De.viewport.set([0,0,de.width,de.height])}(C,F,M,O):C.renderPass==="translucent"&&function(de,Se){const Ce=de.context,Te=Ce.gl;Ce.setColorMode(de.colorModeForRenderPass());const De=Se.heatmapFbos.get(o.c1);De&&(Ce.activeTexture.set(Te.TEXTURE0),Te.bindTexture(Te.TEXTURE_2D,De.colorAttachment.get()),Ce.activeTexture.set(Te.TEXTURE1),Lu(Ce,Se).bind(Te.LINEAR,Te.CLAMP_TO_EDGE),de.useProgram("heatmapTexture").draw(Ce,Te.TRIANGLES,$r.disabled,Mr.disabled,de.colorModeForRenderPass(),Kr.disabled,ji(de,Se,0,1),null,null,Se.id,de.viewportBuffer,de.quadTriangleIndexBuffer,de.viewportSegments,Se.paint,de.transform.zoom))}(C,M)}(n,l,f,p,v):o.cd(f)?function(C,F,M,O,V){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:q}=V,$=M.paint.get("line-opacity"),Y=M.paint.get("line-width");if($.constantOr(1)===0||Y.constantOr(1)===0)return;const de=C.getDepthModeForSublayer(0,$r.ReadOnly),Se=C.colorModeForRenderPass(),Ce=M.paint.get("line-dasharray"),Te=M.paint.get("line-pattern"),De=Te.constantOr(1),$e=M.paint.get("line-gradient"),He=M.getCrossfadeParameters(),Xe=De?"linePattern":Ce?"lineSDF":$e?"lineGradient":"line",tt=C.context,je=tt.gl,ut=C.transform;let Ft=!0;for(const vt of O){const _t=F.getTile(vt);if(De&&!_t.patternsLoaded())continue;const xt=_t.getBucket(M);if(!xt)continue;const ir=xt.programConfigurations.get(M.id),nr=C.context.program.get(),zt=C.useProgram(Xe,ir),ur=Ft||zt.program!==nr,sn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(vt),xn=Te.constantOr(null);if(xn&&_t.imageAtlas){const Sn=_t.imageAtlas,Dn=Sn.patternPositions[xn.to.toString()],is=Sn.patternPositions[xn.from.toString()];Dn&&is&&ir.setConstantPatternPositions(Dn,is)}const Jn=ut.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),kn=ut.getPixelScale(),Un=De?Ws(C,_t,M,kn,He):Ce?Fl(C,_t,M,kn,Ce,He):$e?Ms(C,_t,M,kn,xt.lineClipsArray.length):Za(C,_t,M,kn);if(De)tt.activeTexture.set(je.TEXTURE0),_t.imageAtlasTexture.bind(je.LINEAR,je.CLAMP_TO_EDGE),ir.updatePaintBuffers(He);else if(Ce&&(ur||C.lineAtlas.dirty))tt.activeTexture.set(je.TEXTURE0),C.lineAtlas.bind(tt);else if($e){const Sn=xt.gradients[M.id];let Dn=Sn.texture;if(M.gradientVersion!==Sn.version){let is=256;if(M.stepInterpolant){const vn=F.getSource().maxzoom,fs=vt.canonical.z===vn?Math.ceil(1<<C.transform.maxZoom-vt.canonical.z):1;is=o.ag(o.c2(xt.maxLineLength/o.$*1024*fs),256,tt.maxTextureSize)}Sn.gradient=o.c3({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:is,image:Sn.gradient||void 0,clips:xt.lineClipsArray}),Sn.texture?Sn.texture.update(Sn.gradient):Sn.texture=new o.T(tt,Sn.gradient,je.RGBA),Sn.version=M.gradientVersion,Dn=Sn.texture}tt.activeTexture.set(je.TEXTURE0),Dn.bind(M.stepInterpolant?je.NEAREST:je.LINEAR,je.CLAMP_TO_EDGE)}const En=C.stencilModeForClipping(vt);zt.draw(tt,je.TRIANGLES,de,En,Se,Kr.disabled,Un,sn,Jn,M.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,M.paint,C.transform.zoom,ir,xt.layoutVertexBuffer2),Ft=!1}}(n,l,f,p,v):o.ce(f)?function(C,F,M,O,V){const q=M.paint.get("fill-color"),$=M.paint.get("fill-opacity");if($.constantOr(1)===0)return;const{isRenderingToTexture:Y}=V,de=C.colorModeForRenderPass(),Se=M.paint.get("fill-pattern"),Ce=C.opaquePassEnabledForLayer()&&!Se.constantOr(1)&&q.constantOr(o.be.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Ce){const Te=C.getDepthModeForSublayer(1,C.renderPass==="opaque"?$r.ReadWrite:$r.ReadOnly);Gc(C,F,M,O,Te,de,!1,Y)}if(C.renderPass==="translucent"&&M.paint.get("fill-antialias")){const Te=C.getDepthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,$r.ReadOnly);Gc(C,F,M,O,Te,de,!0,Y)}}(n,l,f,p,v):o.cf(f)?function(C,F,M,O,V){const q=M.paint.get("fill-extrusion-opacity");if(q===0)return;const{isRenderingToTexture:$}=V;if(C.renderPass==="translucent"){const Y=new $r(C.context.gl.LEQUAL,$r.ReadWrite,C.depthRangeFor3D);if(q!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))YA(C,F,M,O,Y,Mr.disabled,pn.disabled,$),YA(C,F,M,O,Y,C.stencilModeFor3D(),C.colorModeForRenderPass(),$);else{const de=C.colorModeForRenderPass();YA(C,F,M,O,Y,Mr.disabled,de,$)}}}(n,l,f,p,v):o.cg(f)?function(C,F,M,O,V){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const{isRenderingToTexture:q}=V,$=C.context,Y=C.style.projection.useSubdivision,de=C.getDepthModeForSublayer(0,$r.ReadOnly),Se=C.colorModeForRenderPass();if(C.renderPass==="offscreen")(function(Ce,Te,De,$e,He,Xe,tt){const je=Ce.context,ut=je.gl;for(const Ft of De){const vt=Te.getTile(Ft),_t=vt.dem;if(!_t||!_t.data||!vt.needsHillshadePrepare)continue;const xt=_t.dim,ir=_t.stride,nr=_t.getPixels();if(je.activeTexture.set(ut.TEXTURE1),je.pixelStoreUnpackPremultiplyAlpha.set(!1),vt.demTexture=vt.demTexture||Ce.getTileTexture(ir),vt.demTexture){const ur=vt.demTexture;ur.update(nr,{premultiply:!1}),ur.bind(ut.NEAREST,ut.CLAMP_TO_EDGE)}else vt.demTexture=new o.T(je,nr,ut.RGBA,{premultiply:!1}),vt.demTexture.bind(ut.NEAREST,ut.CLAMP_TO_EDGE);je.activeTexture.set(ut.TEXTURE0);let zt=vt.fbo;if(!zt){const ur=new o.T(je,{width:xt,height:xt,data:null},ut.RGBA);ur.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),zt=vt.fbo=je.createFramebuffer(xt,xt,!0,!1),zt.colorAttachment.set(ur.texture)}je.bindFramebuffer.set(zt.framebuffer),je.viewport.set([0,0,xt,xt]),Ce.useProgram("hillshadePrepare").draw(je,ut.TRIANGLES,He,Xe,tt,Kr.disabled,Rc(vt.tileID,_t),null,null,$e.id,Ce.rasterBoundsBuffer,Ce.quadTriangleIndexBuffer,Ce.rasterBoundsSegments),vt.needsHillshadePrepare=!1}})(C,F,O,M,de,Mr.disabled,Se),$.viewport.set([0,0,C.width,C.height]);else if(C.renderPass==="translucent")if(Y){const[Ce,Te,De]=C.stencilConfigForOverlapTwoPass(O);JA(C,F,M,De,Ce,de,Se,!1,q),JA(C,F,M,De,Te,de,Se,!0,q)}else{const[Ce,Te]=C.getStencilConfigForOverlapAndUpdateStencilID(O);JA(C,F,M,Te,Ce,de,Se,!1,q)}}(n,l,f,p,v):o.ch(f)?function(C,F,M,O,V){if(C.renderPass!=="translucent"||!O.length)return;const{isRenderingToTexture:q}=V,$=C.style.projection.useSubdivision,Y=C.getDepthModeForSublayer(0,$r.ReadOnly),de=C.colorModeForRenderPass();if($){const[Se,Ce,Te]=C.stencilConfigForOverlapTwoPass(O);cA(C,F,M,Te,Se,Y,de,!1,q),cA(C,F,M,Te,Ce,Y,de,!0,q)}else{const[Se,Ce]=C.getStencilConfigForOverlapAndUpdateStencilID(O);cA(C,F,M,Ce,Se,Y,de,!1,q)}}(n,l,f,p,v):o.ci(f)?function(C,F,M,O,V){if(C.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!O.length)return;const{isRenderingToTexture:q}=V,$=F.getSource(),Y=C.style.projection.useSubdivision;if($ instanceof Vt)No(C,F,M,O,null,!1,!1,$.tileCoords,$.flippedWindingOrder,q);else if(Y){const[de,Se,Ce]=C.stencilConfigForOverlapTwoPass(O);No(C,F,M,Ce,de,!1,!0,$c,!1,q),No(C,F,M,Ce,Se,!0,!0,$c,!1,q)}else{const[de,Se]=C.getStencilConfigForOverlapAndUpdateStencilID(O);No(C,F,M,Se,de,!1,!0,$c,!1,q)}}(n,l,f,p,v):o.cj(f)?function(C,F,M,O,V){const q=M.paint.get("background-color"),$=M.paint.get("background-opacity");if($===0)return;const{isRenderingToTexture:Y}=V,de=C.context,Se=de.gl,Ce=C.style.projection,Te=C.transform,De=Te.tileSize,$e=M.paint.get("background-pattern");if(C.isPatternMissing($e))return;const He=!$e&&q.a===1&&$===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==He)return;const Xe=Mr.disabled,tt=C.getDepthModeForSublayer(0,He==="opaque"?$r.ReadWrite:$r.ReadOnly),je=C.colorModeForRenderPass(),ut=C.useProgram($e?"backgroundPattern":"background"),Ft=O||pt(Te,{tileSize:De,terrain:C.style.map.terrain});$e&&(de.activeTexture.set(Se.TEXTURE0),C.imageManager.bind(C.context));const vt=M.getCrossfadeParameters();for(const _t of Ft){const xt=Te.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),ir=$e?KA($,C,$e,{tileID:_t,tileSize:De},vt):wo($,q),nr=C.style.map.terrain&&C.style.map.terrain.getTerrainData(_t),zt=Ce.getMeshFromTileID(de,_t.canonical,!1,!0,"raster");ut.draw(de,Se.TRIANGLES,tt,Xe,je,Kr.backCCW,ir,nr,xt,M.id,zt.vertexBuffer,zt.indexBuffer,zt.segments)}}(n,0,f,p,v):o.ck(f)&&function(C,F,M,O){const{isRenderingGlobe:V}=O,q=C.context,$=M.implementation,Y=C.style.projection,de=C.transform,Se=de.getProjectionDataForCustomLayer(V),Ce={farZ:de.farZ,nearZ:de.nearZ,fov:de.fov*Math.PI/180,modelViewProjectionMatrix:de.modelViewProjectionMatrix,projectionMatrix:de.projectionMatrix,shaderData:{variantName:Y.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Y.shaderPreludeCode.vertexSource}`,define:Y.shaderDefine},defaultProjectionData:Se},Te=$.renderingMode?$.renderingMode:"2d";if(C.renderPass==="offscreen"){const De=$.prerender;De&&(C.setCustomLayerDefaults(),q.setColorMode(C.colorModeForRenderPass()),De.call($,q.gl,Ce),q.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),q.setColorMode(C.colorModeForRenderPass()),q.setStencilMode(Mr.disabled);const De=Te==="3d"?C.getDepthModeFor3D():C.getDepthModeForSublayer(0,$r.ReadOnly);q.setDepthMode(De),$.render(q.gl,Ce),q.setDirty(),C.setBaseState(),q.bindFramebuffer.set(null)}}(n,0,f,v))}saveTileTexture(n){const l=this._tileTextures[n.size[0]];l?l.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const l=this._tileTextures[n];return l&&l.length>0?l.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const l=this.imageManager.getPattern(n.from.toString()),f=this.imageManager.getPattern(n.to.toString());return!l||!f}useProgram(n,l,f=!1,p=[]){this.cache=this.cache||{};const v=!!this.style.map.terrain,C=this.style.projection,F=f?ws.projectionMercator:C.shaderPreludeCode,M=f?ja:C.shaderDefine,O=n+(l?l.cacheKey:"")+`/${f?eA:C.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(v?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[O]||(this.cache[O]=new Cl(this.context,ws[n],l,sA[n],this._showOverdrawInspector,v,F,M,p)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:l}=this.context.gl;return this.width!==n||this.height!==l}}function Xs(y,n){let l,f=!1,p=null,v=null;const C=()=>{p=null,f&&(y.apply(v,l),p=setTimeout(C,n),f=!1)};return(...F)=>(f=!0,v=this,l=F,p||C(),p)}class Zc{constructor(n){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(f=p)}),(f&&f[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(!this._isValidHash(l))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{const l=this._getCurrentHash();if(l.length===0)return;const f=l.join("/");let p=f;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${f}`);let v=window.location.hash.replace(p,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let C=window.location.href.replace(/(#.+)?$/,v);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Xs(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const l=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,p=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,p),C=Math.round(l.lng*v)/v,F=Math.round(l.lat*v)/v,M=this._map.getBearing(),O=this._map.getPitch();let V="";if(V+=n?`/${C}/${F}/${f}`:`${f}/${F}/${C}`,(M||O)&&(V+="/"+Math.round(10*M)/10),O&&(V+=`/${Math.round(O)}`),this._hashName){const q=this._hashName;let $=!1;const Y=window.location.hash.slice(1).split("&").map(de=>{const Se=de.split("=")[0];return Se===q?($=!0,`${Se}=${V}`):de}).filter(de=>de);return $||Y.push(`${q}=${V}`),`#${Y.join("&")}`}return`#${V}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new o.S(+n[2],+n[1])}catch{return!1}const l=+n[0],f=+(n[3]||0),p=+(n[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&f>=-180&&f<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const ec={linearity:.3,easing:o.cl(0,0,.3,1)},uA=o.e({deceleration:2500,maxSpeed:1400},ec),Mu=o.e({deceleration:20,maxSpeed:1400},ec),tc=o.e({deceleration:1e3,maxSpeed:360},ec),ku=o.e({deceleration:1e3,maxSpeed:90},ec),Yd=o.e({deceleration:1e3,maxSpeed:360},ec);class Xc{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:P.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,l=P.now();for(;n.length>0&&l-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)l.zoom+=v.zoomDelta||0,l.bearing+=v.bearingDelta||0,l.pitch+=v.pitchDelta||0,l.roll+=v.rollDelta||0,v.panDelta&&l.pan._add(v.panDelta),v.around&&(l.around=v.around),v.pinchAround&&(l.pinchAround=v.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(l.pan.mag()){const v=Fa(l.pan.mag(),f,o.e({},uA,n||{})),C=l.pan.mult(v.amount/l.pan.mag()),F=this._map.cameraHelper.handlePanInertia(C,this._map.transform);p.center=F.easingCenter,p.offset=F.easingOffset,tl(p,v)}if(l.zoom){const v=Fa(l.zoom,f,Mu);p.zoom=this._map.transform.zoom+v.amount,tl(p,v)}if(l.bearing){const v=Fa(l.bearing,f,tc);p.bearing=this._map.transform.bearing+o.ag(v.amount,-179,179),tl(p,v)}if(l.pitch){const v=Fa(l.pitch,f,ku);p.pitch=this._map.transform.pitch+v.amount,tl(p,v)}if(l.roll){const v=Fa(l.roll,f,Yd);p.roll=this._map.transform.roll+o.ag(v.amount,-179,179),tl(p,v)}if(p.zoom||p.bearing){const v=l.pinchAround===void 0?l.around:l.pinchAround;p.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),o.e(p,{noMoveStart:!0})}}function tl(y,n){(!y.duration||y.duration<n.duration)&&(y.duration=n.duration,y.easing=n.easing)}function Fa(y,n,l){const{maxSpeed:f,linearity:p,deceleration:v}=l,C=o.ag(y*p/(n/1e3),-f,f),F=Math.abs(C)/(v*p);return{easing:l.easing,duration:1e3*F,amount:C*(F/2)}}class Us extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f,p={}){f=f instanceof MouseEvent?f:new MouseEvent(n,f);const v=b.mousePos(l.getCanvas(),f),C=l.unproject(v);super(n,o.e({point:v,lngLat:C,originalEvent:f},p)),this._defaultPrevented=!1,this.target=l}}class ua extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f){const p=n==="touchend"?f.changedTouches:f.touches,v=b.touchPos(l.getCanvasContainer(),p),C=v.map(M=>l.unproject(M)),F=v.reduce((M,O,V,q)=>M.add(O.div(q.length)),new o.P(0,0));super(n,{points:v,point:F,lngLats:C,lngLat:l.unproject(F),originalEvent:f}),this._defaultPrevented=!1}}class Uu extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f){super(n,{originalEvent:f}),this._defaultPrevented=!1}}class Jd{constructor(n,l){this._map=n,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Uu(n.type,this._map,n))}mousedown(n,l){return this._mousedownPos=l,this._firePreventable(new Us(n.type,this._map,n))}mouseup(n){this._map.fire(new Us(n.type,this._map,n))}click(n,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new Us(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Us(n.type,this._map,n))}mouseover(n){this._map.fire(new Us(n.type,this._map,n))}mouseout(n){this._map.fire(new Us(n.type,this._map,n))}touchstart(n){return this._firePreventable(new ua(n.type,this._map,n))}touchmove(n){this._map.fire(new ua(n.type,this._map,n))}touchend(n){this._map.fire(new ua(n.type,this._map,n))}touchcancel(n){this._map.fire(new ua(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ef{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Us(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Us("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Us(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rc{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(o.P.convert(n),this._map.terrain)}}class qh{constructor(n,l){this._map=n,this._tr=new rc(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,l){this.isEnabled()&&n.shiftKey&&n.button===0&&(b.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(n,l){if(!this._active)return;const f=l;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=f,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const v=Math.min(p.x,f.x),C=Math.max(p.x,f.x),F=Math.min(p.y,f.y),M=Math.max(p.y,f.y);b.setTransform(this._box,`translate(${v}px,${F}px)`),this._box.style.width=C-v+"px",this._box.style.height=M-F+"px"}mouseupWindow(n,l){if(!this._active||n.button!==0)return;const f=this._startPos,p=l;if(this.reset(),b.suppressClick(),f.x!==p.x||f.y!==p.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:n})),{cameraAnimation:v=>v.fitScreenCoordinates(f,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,l){return this._map.fire(new o.l(n,{originalEvent:l}))}}function Ru(y,n){if(y.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${n.length}`);const l={};for(let f=0;f<y.length;f++)l[y[f].identifier]=n[f];return l}class tf{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),f.length===this.numTouches&&(this.centroid=function(p){const v=new o.P(0,0);for(const C of p)v._add(C);return v.div(p.length)}(l),this.touches=Ru(f,l)))}touchmove(n,l,f){if(this.aborted||!this.centroid)return;const p=Ru(f,l);for(const v in this.touches){const C=p[v];(!C||C.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(n,l,f){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Yc{constructor(n){this.singleTap=new tf(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,l,f){this.singleTap.touchstart(n,l,f)}touchmove(n,l,f){this.singleTap.touchmove(n,l,f)}touchend(n,l,f){const p=this.singleTap.touchend(n,l,f);if(p){const v=n.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(p)<30;if(v&&C||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class hA{constructor(n){this._tr=new rc(n),this._zoomIn=new Yc({numTouches:1,numTaps:2}),this._zoomOut=new Yc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,l,f){this._zoomIn.touchstart(n,l,f),this._zoomOut.touchstart(n,l,f)}touchmove(n,l,f){this._zoomIn.touchmove(n,l,f),this._zoomOut.touchmove(n,l,f)}touchend(n,l,f){const p=this._zoomIn.touchend(n,l,f),v=this._zoomOut.touchend(n,l,f),C=this._tr;return p?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(p)},{originalEvent:n})}):v?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(v)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nc{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const l=this._moveFunction(...n);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(n,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,l){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const p=Array.isArray(l)?l[0]:l;return!this._moved&&p.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(f,p))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&b.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Do=0,Qo=2,S={[Do]:1,[Qo]:2};class T{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const l=b.mouseButton(n);this._eventButton=l}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(l,f){const p=S[f];return l.buttons===void 0||(l.buttons&p)!==p}(n,this._eventButton)}isValidEndEvent(n){return b.mouseButton(n)===this._eventButton}}class j{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class W{constructor(n=new T({checkCorrectEvent:()=>!0}),l=new j){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(n,l,f){return n instanceof MouseEvent?l(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?f(n):void 0}startMove(n){this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.startMove(l),l=>this.oneFingerTouchMoveStateManager.startMove(l))}endMove(n){this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.endMove(l),l=>this.oneFingerTouchMoveStateManager.endMove(l))}isValidStartEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidStartEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l))}isValidMoveEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidMoveEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l))}isValidEndEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidEndEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l))}}const ue=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=n=>{n.preventDefault()}};class ye{constructor(n,l){this._clickTolerance=n.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,l,f){return this._calculateTransform(n,l,f)}touchmove(n,l,f){if(this._active){if(!this._shouldBePrevented(f.length))return n.preventDefault(),this._calculateTransform(n,l,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,l,f){this._calculateTransform(n,l,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,l,f){f.length>0&&(this._active=!0);const p=Ru(f,l),v=new o.P(0,0),C=new o.P(0,0);let F=0;for(const O in p){const V=p[O],q=this._touches[O];q&&(v._add(V),C._add(V.sub(q)),F++,p[O]=V)}if(this._touches=p,this._shouldBePrevented(F)||!C.mag())return;const M=C.div(F);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(F),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _e{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(n,l,f){if(!this._firstTwoTouches)return;n.preventDefault();const[p,v]=this._firstTwoTouches,C=be(f,l,p),F=be(f,l,v);if(!C||!F)return;const M=this._aroundCenter?null:C.add(F).div(2);return this._move([C,F],M,n)}touchend(n,l,f){if(!this._firstTwoTouches)return;const[p,v]=this._firstTwoTouches,C=be(f,l,p),F=be(f,l,v);C&&F||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function be(y,n,l){for(let f=0;f<y.length;f++)if(y[f].identifier===l)return n[f]}function Fe(y,n){return Math.log(y/n)/Math.LN2}class Ne extends _e{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,l){const f=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Fe(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fe(this._distance,f),pinchAround:l}}}function Qe(y,n){return 180*y.angleWith(n)/Math.PI}class It extends _e{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,l,f){const p=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qe(this._vector,p),pinchAround:l}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const l=25/(Math.PI*this._minDiameter)*360,f=Qe(n,this._startVector);return Math.abs(f)<l}}function Oe(y){return Math.abs(y.y)>Math.abs(y.x)}class ht extends _e{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,l,f){super.touchstart(n,l,f),this._currentTouchCount=f.length}_start(n){this._lastPoints=n,Oe(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,l,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=n[0].sub(this._lastPoints[0]),v=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,v,f.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(p.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(n,l,f){if(this._valid!==void 0)return this._valid;const p=n.mag()>=2,v=l.mag()>=2;if(!p&&!v)return;if(!p||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=n.y>0==l.y>0;return Oe(n)&&Oe(l)&&C}}const yt={panStep:100,bearingStep:15,pitchStep:10};class Rt{constructor(n){this._tr=new rc(n);const l=yt;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let l=0,f=0,p=0,v=0,C=0;switch(n.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:n.shiftKey?f=-1:(n.preventDefault(),v=-1);break;case 39:n.shiftKey?f=1:(n.preventDefault(),v=1);break;case 38:n.shiftKey?p=1:(n.preventDefault(),C=-1);break;case 40:n.shiftKey?p=-1:(n.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,p=0),{cameraAnimation:F=>{const M=this._tr;F.easeTo({duration:300,easeId:"keyboardHandler",easing:Bt,zoom:l?Math.round(M.zoom)+l*(n.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+p*this._pitchStep,offset:[-v*this._panStep,-C*this._panStep],center:M.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bt(y){return y*(2-y)}const wt=4.000244140625,Ot=1/450;class rr{constructor(n,l){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=n,this._tr=new rc(n),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ot}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let l=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const f=P.now(),p=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%wt==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(p*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),n.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=n,this._delta-=l,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=b.mousePos(this._map.getCanvas(),n),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(o.S.convert(f.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const F=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=F),typeof this._targetZoom=="number"&&(this._targetZoom+=F)}if(this._delta!==0){const F=this._type==="wheel"&&Math.abs(this._delta)>wt?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&M!==0&&(M=1/M);const O=typeof this._targetZoom!="number"?n.scale:o.ae(this._targetZoom);this._targetZoom=n.getConstrained(n.getCameraLngLat(),o.aj(O*M)).zoom,this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,f=this._startZoom,p=this._easing;let v,C=!1;if(this._type==="wheel"&&f&&p){const F=P.now()-this._lastWheelEventTime,M=Math.min((F+5)/200,1),O=p(M);v=o.C.number(f,l,O),M<1?this._frameId||(this._frameId=!0):C=!0}else v=l,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=v,{noInertia:!0,needsRenderFrame:!C,zoomDelta:v-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let l=o.cn;if(this._prevEase){const f=this._prevEase,p=(P.now()-f.start)/f.duration,v=f.easing(p+.01)-f.easing(p),C=.27/Math.sqrt(v*v+1e-4)*.01,F=Math.sqrt(.0729-C*C);l=o.cl(C,F,.25,1)}return this._prevEase={start:P.now(),duration:n,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class qt{constructor(n,l){this._clickZoom=n,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ur{constructor(n){this._tr=new rc(n),this.reset()}reset(){this._active=!1}dblclick(n,l){return n.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Br{constructor(){this._tap=new Yc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,l,f){if(!this._swipePoint)if(this._tapTime){const p=l[0],v=n.timeStamp-this._tapTime<500,C=this._tapPoint.dist(p)<30;v&&C?f.length>0&&(this._swipePoint=p,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(n,l,f)}touchmove(n,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const p=l[0],v=p.y-this._swipePoint.y;return this._swipePoint=p,n.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(n,l,f)}touchend(n,l,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const p=this._tap.touchend(n,l,f);p&&(this._tapTime=n.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ln{constructor(n,l,f){this._el=n,this._mousePan=l,this._touchPan=f}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Er{constructor(n,l,f,p){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=l,this._mousePitch=f,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class _n{constructor(n,l,f,p){this._el=n,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Vi{constructor(n,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",n);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=l,this._container.appendChild(p);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=f,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,l){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:n,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const rn=y=>y.zoom||y.drag||y.roll||y.pitch||y.rotate;class Pr extends o.l{}function Ar(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta||y.rollDelta}class qn{constructor(n,l){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,v)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=p.type==="renderFrame"?void 0:p,F={needsRenderFrame:!1},M={},O={};for(const{handlerName:$,handler:Y,allowed:de}of this._handlers){if(!Y.isEnabled())continue;let Se;if(this._blockedByActive(O,de,$))Y.reset();else if(Y[v||p.type]){if(o.co(p,v||p.type)){const Ce=b.mousePos(this._map.getCanvas(),p);Se=Y[v||p.type](p,Ce)}else if(o.cp(p,v||p.type)){const Ce=this._getMapTouches(p.touches),Te=b.touchPos(this._map.getCanvas(),Ce);Se=Y[v||p.type](p,Te,Ce)}else o.cq(v||p.type)||(Se=Y[v||p.type](p));this.mergeHandlerResult(F,M,Se,$,C),Se&&Se.needsRenderFrame&&this._triggerRenderFrame()}(Se||Y.isActive())&&(O[$]=Y)}const V={};for(const $ in this._previousActiveHandlers)O[$]||(V[$]=C);this._previousActiveHandlers=O,(Object.keys(V).length||Ar(F))&&(this._changes.push([F,M,V]),this._triggerRenderFrame()),(Object.keys(O).length||Ar(F))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=F;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xc(n),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,v,C]of this._listeners)b.addEventListener(p,v,p===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[n,l,f]of this._listeners)b.removeEventListener(n,l,n===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(n){const l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Jd(l,n));const p=l.boxZoom=new qh(l,n);this._add("boxZoom",p),n.interactive&&n.boxZoom&&p.enable();const v=l.cooperativeGestures=new Vi(l,n.cooperativeGestures);this._add("cooperativeGestures",v),n.cooperativeGestures&&v.enable();const C=new hA(l),F=new Ur(l);l.doubleClickZoom=new qt(F,C),this._add("tapZoom",C),this._add("clickZoom",F),n.interactive&&n.doubleClickZoom&&l.doubleClickZoom.enable();const M=new Br;this._add("tapDragZoom",M);const O=l.touchPitch=new ht(l);this._add("touchPitch",O),n.interactive&&n.touchPitch&&l.touchPitch.enable(n.touchPitch);const V=()=>l.project(l.getCenter()),q=function({enable:He,clickTolerance:Xe,aroundCenter:tt=!0,minPixelCenterThreshold:je=100,rotateDegreesPerPixelMoved:ut=.8},Ft){const vt=new T({checkCorrectEvent:_t=>b.mouseButton(_t)===0&&_t.ctrlKey||b.mouseButton(_t)===2&&!_t.ctrlKey});return new nc({clickTolerance:Xe,move:(_t,xt)=>{const ir=Ft();if(tt&&Math.abs(ir.y-_t.y)>je)return{bearingDelta:o.cm(new o.P(_t.x,xt.y),xt,ir)};let nr=(xt.x-_t.x)*ut;return tt&&xt.y<ir.y&&(nr=-nr),{bearingDelta:nr}},moveStateManager:vt,enable:He,assignEvents:ue})}(n,V),$=function({enable:He,clickTolerance:Xe,pitchDegreesPerPixelMoved:tt=-.5}){const je=new T({checkCorrectEvent:ut=>b.mouseButton(ut)===0&&ut.ctrlKey||b.mouseButton(ut)===2});return new nc({clickTolerance:Xe,move:(ut,Ft)=>({pitchDelta:(Ft.y-ut.y)*tt}),moveStateManager:je,enable:He,assignEvents:ue})}(n),Y=function({enable:He,clickTolerance:Xe,rollDegreesPerPixelMoved:tt=.3},je){const ut=new T({checkCorrectEvent:Ft=>b.mouseButton(Ft)===2&&Ft.ctrlKey});return new nc({clickTolerance:Xe,move:(Ft,vt)=>{const _t=je();let xt=(vt.x-Ft.x)*tt;return vt.y<_t.y&&(xt=-xt),{rollDelta:xt}},moveStateManager:ut,enable:He,assignEvents:ue})}(n,V);l.dragRotate=new Er(n,q,$,Y),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",$,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Y,["mousePitch"]),n.interactive&&n.dragRotate&&l.dragRotate.enable();const de=function({enable:He,clickTolerance:Xe}){const tt=new T({checkCorrectEvent:je=>b.mouseButton(je)===0&&!je.ctrlKey});return new nc({clickTolerance:Xe,move:(je,ut)=>({around:ut,panDelta:ut.sub(je)}),activateOnStart:!0,moveStateManager:tt,enable:He,assignEvents:ue})}(n),Se=new ye(n,l);l.dragPan=new ln(f,de,Se),this._add("mousePan",de),this._add("touchPan",Se,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&l.dragPan.enable(n.dragPan);const Ce=new It,Te=new Ne;l.touchZoomRotate=new _n(f,Te,Ce,M),this._add("touchRotate",Ce,["touchPan","touchZoom"]),this._add("touchZoom",Te,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&l.touchZoomRotate.enable(n.touchZoomRotate);const De=l.scrollZoom=new rr(l,()=>this._triggerRenderFrame());this._add("scrollZoom",De,["mousePan"]),n.interactive&&n.scrollZoom&&l.scrollZoom.enable(n.scrollZoom);const $e=l.keyboard=new Rt(l);this._add("keyboard",$e),n.interactive&&n.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new ef(l))}_add(n,l,f){this._handlers.push({handlerName:n,handler:l,allowed:f}),this._handlersById[n]=l}stop(n){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!rn(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,l,f){for(const p in n)if(p!==f&&(!l||l.indexOf(p)<0))return!0;return!1}_getMapTouches(n){const l=[];for(const f of n)this._el.contains(f.target)&&l.push(f);return l}mergeHandlerResult(n,l,f,p,v){if(!f)return;o.e(n,f);const C={handlerName:p,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(l.zoom=C),f.panDelta!==void 0&&(l.drag=C),f.rollDelta!==void 0&&(l.roll=C),f.pitchDelta!==void 0&&(l.pitch=C),f.bearingDelta!==void 0&&(l.rotate=C)}_applyChanges(){const n={},l={},f={};for(const[p,v,C]of this._changes)p.panDelta&&(n.panDelta=(n.panDelta||new o.P(0,0))._add(p.panDelta)),p.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(n.rollDelta=(n.rollDelta||0)+p.rollDelta),p.around!==void 0&&(n.around=p.around),p.pinchAround!==void 0&&(n.pinchAround=p.pinchAround),p.noInertia&&(n.noInertia=p.noInertia),o.e(l,v),o.e(f,C);this._updateMapTransform(n,l,f),this._changes=[]}_updateMapTransform(n,l,f){const p=this._map,v=p._getTransformForUpdate(),C=p.terrain;if(!(Ar(n)||C&&this._terrainMovement))return this._fireEvents(l,f,!0);p._stop(!0);let{panDelta:F,zoomDelta:M,bearingDelta:O,pitchDelta:V,rollDelta:q,around:$,pinchAround:Y}=n;Y!==void 0&&($=Y),$=$||p.transform.centerPoint,C&&!v.isPointOnMapSurface($)&&($=v.centerPoint);const de={panDelta:F,zoomDelta:M,rollDelta:q,pitchDelta:V,bearingDelta:O,around:$};this._map.cameraHelper.useGlobeControls&&!v.isPointOnMapSurface($)&&($=v.centerPoint);const Se=$.distSqr(v.centerPoint)<.01?v.center:v.screenPointToLocation(F?$.sub(F):$);C?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(de,v),this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?v.setCenter(v.screenPointToLocation(v.centerPoint.sub(F))):this._map.cameraHelper.handleMapControlsPan(de,v,Se):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(de,v,Se))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(de,v),this._map.cameraHelper.handleMapControlsPan(de,v,Se)),p._applyUpdatedTransform(v),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(l,f,!0)}_fireEvents(n,l,f){const p=rn(this._eventsInProgress),v=rn(n),C={};for(const q in n){const{originalEvent:$}=n[q];this._eventsInProgress[q]||(C[`${q}start`]=$),this._eventsInProgress[q]=n[q]}!p&&v&&this._fireEvent("movestart",v.originalEvent);for(const q in C)this._fireEvent(q,C[q]);v&&this._fireEvent("move",v.originalEvent);for(const q in n){const{originalEvent:$}=n[q];this._fireEvent(q,$)}const F={};let M;for(const q in this._eventsInProgress){const{handlerName:$,originalEvent:Y}=this._eventsInProgress[q];this._handlersById[$].isActive()||(delete this._eventsInProgress[q],M=l[$]||Y,F[`${q}end`]=M)}for(const q in F)this._fireEvent(q,F[q]);const O=rn(this._eventsInProgress),V=(p||v)&&!O;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const q=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&q.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(q)}if(f&&V){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;!q||!q.essential&&P.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:M})),$(this._map.getBearing())&&this._map.resetNorth()):($(q.bearing||this._map.getBearing())&&(q.bearing=0),q.freezeElevation=!0,this._map.easeTo(q,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(n,l){this._map.fire(new o.l(n,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Pr("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class vr extends o.E{constructor(n,l,f){super(),this._renderFrameCallback=()=>{const p=Math.min((P.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=f.bearingSnap,this.cameraHelper=l,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(n,l){n.apply(this.transform),this.transform=n,this.cameraHelper=l}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(n,l){return this.jumpTo({center:n},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,l){return this.jumpTo({elevation:n},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,l,f){return n=o.P.convert(n).mult(-1),this.panTo(this.transform.center,o.e({offset:n},l),f)}panTo(n,l,f){return this.easeTo(o.e({center:n},l),f)}getZoom(){return this.transform.zoom}setZoom(n,l){return this.jumpTo({zoom:n},l),this}zoomTo(n,l,f){return this.easeTo(o.e({zoom:n},l),f)}zoomIn(n,l){return this.zoomTo(this.getZoom()+1,n,l),this}zoomOut(n,l){return this.zoomTo(this.getZoom()-1,n,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,l){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new o.l("movestart",l)).fire(new o.l("move",l)).fire(new o.l("moveend",l))),this}getBearing(){return this.transform.bearing}setBearing(n,l){return this.jumpTo({bearing:n},l),this}getPadding(){return this.transform.padding}setPadding(n,l){return this.jumpTo({padding:n},l),this}rotateTo(n,l,f){return this.easeTo(o.e({bearing:n},l),f)}resetNorth(n,l){return this.rotateTo(0,o.e({duration:1e3},n),l),this}resetNorthPitch(n,l){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},n),l),this}snapToNorth(n,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,l):this}getPitch(){return this.transform.pitch}setPitch(n,l){return this.jumpTo({pitch:n},l),this}getRoll(){return this.transform.roll}setRoll(n,l){return this.jumpTo({roll:n},l),this}cameraForBounds(n,l){n=Gt.convert(n).adjustAntiMeridian();const f=l&&l.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),f,l)}_cameraForBoxAndBearing(n,l,f,p){const v={top:0,bottom:0,right:0,left:0};if(typeof(p=o.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const O=p.padding;p.padding={top:O,bottom:O,right:O,left:O}}const C=o.e(v,p.padding);p.padding=C;const F=this.transform,M=new Gt(n,l);return this.cameraHelper.cameraForBoxAndBearing(p,C,M,f,F)}fitBounds(n,l,f){return this._fitInternal(this.cameraForBounds(n,l),l,f)}fitScreenCoordinates(n,l,f,p,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(n)),this.transform.screenPointToLocation(o.P.convert(l)),f,p),p,v)}_fitInternal(n,l,f){return n?(delete(l=o.e(n,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(n,l){this.stop();const f=this._getTransformForUpdate();let p=!1,v=!1,C=!1;const F=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,n);const M=f.zoom!==F;return"elevation"in n&&f.elevation!==+n.elevation&&f.setElevation(+n.elevation),"bearing"in n&&f.bearing!==+n.bearing&&(p=!0,f.setBearing(+n.bearing)),"pitch"in n&&f.pitch!==+n.pitch&&(v=!0,f.setPitch(+n.pitch)),"roll"in n&&f.roll!==+n.roll&&(C=!0,f.setRoll(+n.roll)),n.padding==null||f.isPaddingEqual(n.padding)||f.setPadding(n.padding),this._applyUpdatedTransform(f),this.fire(new o.l("movestart",l)).fire(new o.l("move",l)),M&&this.fire(new o.l("zoomstart",l)).fire(new o.l("zoom",l)).fire(new o.l("zoomend",l)),p&&this.fire(new o.l("rotatestart",l)).fire(new o.l("rotate",l)).fire(new o.l("rotateend",l)),v&&this.fire(new o.l("pitchstart",l)).fire(new o.l("pitch",l)).fire(new o.l("pitchend",l)),C&&this.fire(new o.l("rollstart",l)).fire(new o.l("roll",l)).fire(new o.l("rollend",l)),this.fire(new o.l("moveend",l))}calculateCameraOptionsFromTo(n,l,f,p=0){const v=o.a0.fromLngLat(n,l),C=o.a0.fromLngLat(f,p),F=C.x-v.x,M=C.y-v.y,O=C.z-v.z,V=Math.hypot(F,M,O);if(V===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(F,M),$=o.aj(this.transform.cameraToCenterDistance/V/this.transform.tileSize),Y=180*Math.atan2(F,-M)/Math.PI;let de=180*Math.acos(q/V)/Math.PI;return de=O<0?90-de:90+de,{center:C.toLngLat(),elevation:p,zoom:$,pitch:de,bearing:Y}}calculateCameraOptionsFromCameraLngLatAltRotation(n,l,f,p,v){const C=this.transform.calculateCenterFromCameraLngLatAlt(n,l,f,p);return{center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:f,pitch:p,roll:v}}easeTo(n,l){this._stop(!1,n.easeId),((n=o.e({offset:[0,0],duration:500,easing:o.cn},n)).animate===!1||!n.essential&&P.prefersReducedMotion)&&(n.duration=0);const f=this._getTransformForUpdate(),p=this.getBearing(),v=f.pitch,C=f.roll,F="bearing"in n?this._normalizeBearing(n.bearing,p):p,M="pitch"in n?+n.pitch:v,O="roll"in n?this._normalizeBearing(n.roll,C):C,V="padding"in n?n.padding:f.padding,q=o.P.convert(n.offset);let $,Y;n.around&&($=o.S.convert(n.around),Y=f.locationToScreenPoint($));const de={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Se=this.cameraHelper.handleEaseTo(f,{bearing:F,pitch:M,roll:O,padding:V,around:$,aroundPoint:Y,offsetAsPoint:q,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||p!==F,this._pitching=this._pitching||M!==v,this._rolling=this._rolling||O!==C,this._padding=!f.isPaddingEqual(V),this._zooming=this._zooming||Se.isZooming,this._easeId=n.easeId,this._prepareEase(l,n.noMoveStart,de),this.terrain&&this._prepareElevation(Se.elevationCenter),this._ease(Ce=>{Se.easeFunc(Ce),this.terrain&&!n.freezeElevation&&this._updateElevation(Ce),this._applyUpdatedTransform(f),this._fireMoveEvents(l)},Ce=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l,Ce)},n),this}_prepareEase(n,l,f={}){this._moving=!0,l||f.moving||this.fire(new o.l("movestart",n)),this._zooming&&!f.zooming&&this.fire(new o.l("zoomstart",n)),this._rotating&&!f.rotating&&this.fire(new o.l("rotatestart",n)),this._pitching&&!f.pitching&&this.fire(new o.l("pitchstart",n)),this._rolling&&!f.rolling&&this.fire(new o.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&l!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(f-(l-(f*n+this._elevationStart))/(1-n)),this._elevationTarget=l}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const l=n.getCameraLngLat(),f=n.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(l,n.zoom):0;if(f<p){const v=this.calculateCameraOptionsFromTo(l,p,n.center,n.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(n){const l=[];if(l.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&l.push(p=>this.transformCameraUpdate(p)),!l.length)return;const f=n.clone();for(const p of l){const v=f.clone(),{center:C,zoom:F,roll:M,pitch:O,bearing:V,elevation:q}=p(v);C&&v.setCenter(C),q!==void 0&&v.setElevation(q),F!==void 0&&v.setZoom(F),M!==void 0&&v.setRoll(M),O!==void 0&&v.setPitch(O),V!==void 0&&v.setBearing(V),f.apply(v)}this.transform.apply(f)}_fireMoveEvents(n){this.fire(new o.l("move",n)),this._zooming&&this.fire(new o.l("zoom",n)),this._rotating&&this.fire(new o.l("rotate",n)),this._pitching&&this.fire(new o.l("pitch",n)),this._rolling&&this.fire(new o.l("roll",n))}_afterEase(n,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const f=this._zooming,p=this._rotating,v=this._pitching,C=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new o.l("zoomend",n)),p&&this.fire(new o.l("rotateend",n)),v&&this.fire(new o.l("pitchend",n)),C&&this.fire(new o.l("rollend",n)),this.fire(new o.l("moveend",n))}flyTo(n,l){if(!n.essential&&P.prefersReducedMotion){const xt=o.Q(n,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(xt,l)}this.stop(),n=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cn},n);const f=this._getTransformForUpdate(),p=f.bearing,v=f.pitch,C=f.roll,F=f.padding,M="bearing"in n?this._normalizeBearing(n.bearing,p):p,O="pitch"in n?+n.pitch:v,V="roll"in n?this._normalizeBearing(n.roll,C):C,q="padding"in n?n.padding:f.padding,$=o.P.convert(n.offset);let Y=f.centerPoint.add($);const de=f.screenPointToLocation(Y),Se=this.cameraHelper.handleFlyTo(f,{bearing:M,pitch:O,roll:V,padding:q,locationAtOffset:de,offsetAsPoint:$,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let Ce=n.curve;const Te=Math.max(f.width,f.height),De=Te/Se.scaleOfZoom,$e=Se.pixelPathLength;typeof Se.scaleOfMinZoom=="number"&&(Ce=Math.sqrt(Te/Se.scaleOfMinZoom/$e*2));const He=Ce*Ce;function Xe(xt){const ir=(De*De-Te*Te+(xt?-1:1)*He*He*$e*$e)/(2*(xt?De:Te)*He*$e);return Math.log(Math.sqrt(ir*ir+1)-ir)}function tt(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function je(xt){return(Math.exp(xt)+Math.exp(-xt))/2}const ut=Xe(!1);let Ft=function(xt){return je(ut)/je(ut+Ce*xt)},vt=function(xt){return Te*((je(ut)*(tt(ir=ut+Ce*xt)/je(ir))-tt(ut))/He)/$e;var ir},_t=(Xe(!0)-ut)/Ce;if(Math.abs($e)<2e-6||!isFinite(_t)){if(Math.abs(Te-De)<1e-6)return this.easeTo(n,l);const xt=De<Te?-1:1;_t=Math.abs(Math.log(De/Te))/Ce,vt=()=>0,Ft=ir=>Math.exp(xt*Ce*ir)}return n.duration="duration"in n?+n.duration:1e3*_t/("screenSpeed"in n?+n.screenSpeed/Ce:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=p!==M,this._pitching=O!==v,this._rolling=V!==C,this._padding=!f.isPaddingEqual(q),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Se.targetCenter),this._ease(xt=>{const ir=xt*_t,nr=1/Ft(ir),zt=vt(ir);this._rotating&&f.setBearing(o.C.number(p,M,xt)),this._pitching&&f.setPitch(o.C.number(v,O,xt)),this._rolling&&f.setRoll(o.C.number(C,V,xt)),this._padding&&(f.interpolatePadding(F,q,xt),Y=f.centerPoint.add($)),Se.easeFunc(xt,nr,zt,Y),this.terrain&&!n.freezeElevation&&this._updateElevation(xt),this._applyUpdatedTransform(f),this._fireMoveEvents(l)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,l){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,l)}return n||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(n,l,f){f.animate===!1||f.duration===0?(n(1),l()):(this._easeStart=P.now(),this._easeOptions=f,this._onEaseFrame=n,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,l){n=o.aN(n,-180,180);const f=Math.abs(n-l);return Math.abs(n-360-l)<f&&(n-=360),Math.abs(n+360-l)<f&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(n),this.transform.tileZoom):null}}const yn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Wn{constructor(n=yn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,l){const f=this._map._getUIString(`AttributionControl.${l}`);n.title=f,n.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const l=this._map.style.sourceCaches;for(const p in l){const v=l[p];if(v.used||v.usedForTerrain){const C=v.getSource();C.attribution&&n.indexOf(C.attribution)<0&&n.push(C.attribution)}}n=n.filter(p=>String(p).trim()),n.sort((p,v)=>p.length-v.length),n=n.filter((p,v)=>{for(let C=v+1;C<n.length;C++)if(n[C].indexOf(p)>=0)return!1;return!0});const f=n.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,n.length?(this._innerContainer.innerHTML=b.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ts{constructor(n={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const l=b.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Rs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const l=++this._id;return this._queue.push({callback:n,id:l,cancelled:!1}),l}remove(n){const l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(const p of f)if(p.id===n)return void(p.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const f of l)if(!f.cancelled&&(f.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var yi=o.aI([{name:"a_pos3d",type:"Int16",components:3}]);class Ns extends o.E{constructor(n){super(),this._lastTilesetChange=P.now(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,l){this.sourceCache.update(n,l),this._renderableTilesKeys=[];const f={};for(const p of pt(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))f[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),o.bX(p.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[p.key]=new jr(p,this.tileSize),this._lastTilesetChange=P.now());for(const p in this._tiles)f[p]||delete this._tiles[p]}freeRtt(n){for(const l in this._tiles){const f=this._tiles[l];(!n||f.tileID.equals(n)||f.tileID.isChildOf(n)||n.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,l){return l?this._getTerrainCoordsForTileRanges(n,l):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const l={};for(const f of this._renderableTilesKeys){const p=this._tiles[f].tileID,v=n.clone(),C=o.b9();if(p.canonical.equals(n.canonical))o.bX(C,0,o.$,o.$,0,0,1);else if(p.canonical.isChildOf(n.canonical)){const F=p.canonical.z-n.canonical.z,M=p.canonical.x-(p.canonical.x>>F<<F),O=p.canonical.y-(p.canonical.y>>F<<F),V=o.$>>F;o.bX(C,0,V,V,0,0,1),o.M(C,C,[-M*V,-O*V,0])}else{if(!n.canonical.isChildOf(p.canonical))continue;{const F=n.canonical.z-p.canonical.z,M=n.canonical.x-(n.canonical.x>>F<<F),O=n.canonical.y-(n.canonical.y>>F<<F),V=o.$>>F;o.bX(C,0,o.$,o.$,0,0,1),o.M(C,C,[M*V,O*V,0]),o.N(C,C,[1/2**F,1/2**F,0])}}v.terrainRttPosMatrix32f=new Float32Array(C),l[f]=v}return l}_getTerrainCoordsForTileRanges(n,l){const f={};for(const p of this._renderableTilesKeys){const v=this._tiles[p].tileID;if(!this._isWithinTileRanges(v,l))continue;const C=n.clone(),F=o.b9();if(v.canonical.z===n.canonical.z){const M=n.canonical.x-v.canonical.x,O=n.canonical.y-v.canonical.y;o.bX(F,0,o.$,o.$,0,0,1),o.M(F,F,[M*o.$,O*o.$,0])}else if(v.canonical.z>n.canonical.z){const M=v.canonical.z-n.canonical.z,O=v.canonical.x-(v.canonical.x>>M<<M),V=v.canonical.y-(v.canonical.y>>M<<M),q=n.canonical.x-(v.canonical.x>>M),$=n.canonical.y-(v.canonical.y>>M),Y=o.$>>M;o.bX(F,0,Y,Y,0,0,1),o.M(F,F,[-O*Y+q*o.$,-V*Y+$*o.$,0])}else{const M=n.canonical.z-v.canonical.z,O=n.canonical.x-(n.canonical.x>>M<<M),V=n.canonical.y-(n.canonical.y>>M<<M),q=(n.canonical.x>>M)-v.canonical.x,$=(n.canonical.y>>M)-v.canonical.y,Y=o.$<<M;o.bX(F,0,Y,Y,0,0,1),o.M(F,F,[O*o.$+q*Y,V*o.$+$*Y,0])}C.terrainRttPosMatrix32f=new Float32Array(F),f[p]=C}return f}getSourceTile(n,l){const f=this.sourceCache._source;let p=n.overscaledZ-this.deltaZoom;if(p>f.maxzoom&&(p=f.maxzoom),p<f.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(p).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!v||!v.dem)&&l)for(;p>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(n.scaledTo(p--).key);return v}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,l){return l[n.canonical.z]&&n.canonical.x>=l[n.canonical.z].minTileX&&n.canonical.x<=l[n.canonical.z].maxTileX&&n.canonical.y>=l[n.canonical.z].minTileY&&n.canonical.y<=l[n.canonical.z].maxTileY}}class ci{constructor(n,l,f){this._meshCache={},this.painter=n,this.sourceCache=new Ns(l),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,l,f,p=o.$){var v;if(!(l>=0&&l<p&&f>=0&&f<p))return 0;const C=this.getTerrainData(n),F=(v=C.tile)===null||v===void 0?void 0:v.dem;if(!F)return 0;const M=o.cr([],[l/p*o.$,f/p*o.$],C.u_terrain_matrix),O=[M[0]*F.dim,M[1]*F.dim],V=Math.floor(O[0]),q=Math.floor(O[1]),$=O[0]-V,Y=O[1]-q;return F.get(V,q)*(1-$)*(1-Y)+F.get(V+1,q)*$*(1-Y)+F.get(V,q+1)*(1-$)*Y+F.get(V+1,q+1)*$*Y}getElevationForLngLatZoom(n,l){if(!o.cs(l,n.wrap()))return 0;const{tileID:f,mercatorX:p,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(n,l);return this.getElevation(f,p%o.$,v%o.$,o.$)}getElevation(n,l,f,p=o.$){return this.getDEMElevation(n,l,f,p)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const p=this.painter.context,v=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(p,v,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(p,new o.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.af([])}const l=this.sourceCache.getSourceTile(n,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const p=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new o.T(p,l.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),l.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const f=l&&l+l.tileID.key+n.key;if(f&&!this._demMatrixCache[f]){const p=this.sourceCache.sourceCache._source.maxzoom;let v=n.canonical.z-l.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=p?v=n.canonical.z-p:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=n.canonical.x-(n.canonical.x>>v<<v),F=n.canonical.y-(n.canonical.y>>v<<v),M=o.ct(new Float64Array(16),[1/(o.$<<v),1/(o.$<<v),0]);o.M(M,M,[C*o.$,F*o.$,0]),this._demMatrixCache[n.key]={matrix:M,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(n){const l=this.painter,f=l.width/devicePixelRatio,p=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(l.context,{width:f,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(l.context,{width:f,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(f,p,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,f,p))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,C=0;v<this._coordsTextureSize;v++)for(let F=0;F<this._coordsTextureSize;F++,C+=4)l[C+0]=255&F,l[C+1]=255&v,l[C+2]=F>>8<<4|v>>8,l[C+3]=0;const f=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),p=new o.T(n,f,n.gl.RGBA,{premultiply:!1});return p.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),f=this.painter.context,p=f.gl,v=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),F=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(v,F-C-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null);const M=l[0]+(l[2]>>4<<8),O=l[1]+((15&l[2])<<8),V=this.coordsIndex[255-l[3]],q=V&&this.sourceCache.getTileByID(V);if(!q)return null;const $=this._coordsTextureSize,Y=(1<<q.tileID.canonical.z)*$;return new o.a0((q.tileID.canonical.x*$+M)/Y+q.tileID.wrap,(q.tileID.canonical.y*$+O)/Y,this.getElevation(q.tileID,M,O,$))}depthAtPoint(n){const l=new Uint8Array(4),f=this.painter.context,p=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(n){var l;const f=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,p=f&&n.canonical.y===0,v=f&&n.canonical.y===(1<<n.canonical.z)-1,C=`m_${p?"n":""}_${v?"s":""}`;if(this._meshCache[C])return this._meshCache[C];const F=this.painter.context,M=new o.cu,O=new o.aM,V=this.meshSize,q=o.$/V,$=V*V;for(let je=0;je<=V;je++)for(let ut=0;ut<=V;ut++)M.emplaceBack(ut*q,je*q,0);for(let je=0;je<$;je+=V+1)for(let ut=0;ut<V;ut++)O.emplaceBack(ut+je,V+ut+je+1,V+ut+je+2),O.emplaceBack(ut+je,V+ut+je+2,ut+je+1);const Y=M.length,de=Y+(V+1),Se=(V+1)*V,Ce=p?o.bg:0,Te=p?0:1,De=v?o.bh:o.$,$e=v?0:1;for(let je=0;je<=V;je++)M.emplaceBack(je*q,Ce,Te);for(let je=0;je<=V;je++)M.emplaceBack(je*q,De,$e);for(let je=0;je<V;je++)O.emplaceBack(Se+je,de+je,de+je+1),O.emplaceBack(Se+je,de+je+1,Se+je+1),O.emplaceBack(0+je,Y+je+1,Y+je),O.emplaceBack(0+je,0+je+1,Y+je+1);const He=M.length,Xe=He+2*(V+1);for(const je of[0,1])for(let ut=0;ut<=V;ut++)for(const Ft of[0,1])M.emplaceBack(je*o.$,ut*q,Ft);for(let je=0;je<2*V;je+=2)O.emplaceBack(He+je,He+je+1,He+je+3),O.emplaceBack(He+je,He+je+3,He+je+2),O.emplaceBack(Xe+je,Xe+je+3,Xe+je+1),O.emplaceBack(Xe+je,Xe+je+2,Xe+je+3);const tt=new ia(F.createVertexBuffer(M,yi.members),F.createIndexBuffer(O),o.aL.simpleSegment(0,0,M.length,O.length));return this._meshCache[C]=tt,tt}getMeshFrameDelta(n){return 2*Math.PI*o.bt/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,l){var f;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(n,l);return(f=this.getMinMaxElevation(p).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(n){const l=this.getTerrainData(n).tile,f={minElevation:null,maxElevation:null};return l&&l.dem&&(f.minElevation=l.dem.min*this.exaggeration,f.maxElevation=l.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(n,l){const f=o.a0.fromLngLat(n.wrap()),p=(1<<l)*o.$,v=f.x*p,C=f.y*p,F=Math.floor(v/o.$),M=Math.floor(C/o.$);return{tileID:new o.Z(l,0,l,F,M),mercatorX:v,mercatorY:C}}}class Bi{constructor(n,l,f){this._context=n,this._size=l,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(f.texture),{id:n,fbo:l,texture:f,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>n.id!==l),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const Zt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class lr{constructor(n,l){this.painter=n,this.terrain=l,this.pool=new Bi(n.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(f=>!n._layers[f].isHidden(l)),this._coordsAscending={};for(const f in n.sourceCaches){this._coordsAscending[f]={};const p=n.sourceCaches[f].getVisibleCoordinates(),v=n.sourceCaches[f].getSource(),C=v instanceof Vt?v.terrainTileRanges:null;for(const F of p){const M=this.terrain.sourceCache.getTerrainCoords(F,C);for(const O in M)this._coordsAscending[f][O]||(this._coordsAscending[f][O]=[]),this._coordsAscending[f][O].push(M[O])}}this._coordsAscendingStr={};for(const f of n._order){const p=n._layers[f],v=p.source;if(Zt[p.type]&&!this._coordsAscendingStr[v]){this._coordsAscendingStr[v]={};for(const C in this._coordsAscending[v])this._coordsAscendingStr[v][C]=this._coordsAscending[v][C].map(F=>F.key).sort().join()}}for(const f of this._renderableTiles)for(const p in this._coordsAscendingStr){const v=this._coordsAscendingStr[p][f.tileID.key];v&&v!==f.rttCoords[p]&&(f.rtt=[])}}renderLayer(n,l){if(n.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),p=n.type,v=this.painter,C=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(Zt[p]&&(this._prevType&&Zt[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(n.id),!C))return!0;if(Zt[this._prevType]||Zt[p]&&C){this._prevType=p;const F=this._stacks.length-1,M=this._stacks[F]||[];for(const O of this._renderableTiles){if(this.pool.isFull()&&(gi(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[F]){const q=this.pool.getObjectForId(O.rtt[F].id);if(q.stamp===O.rtt[F].stamp){this.pool.useObject(q);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),O.rtt[F]={id:V.id,stamp:V.stamp},v.context.bindFramebuffer.set(V.fbo.framebuffer),v.context.clear({color:o.be.transparent,stencil:0}),v.currentStencilSource=void 0;for(let q=0;q<M.length;q++){const $=v.style._layers[M[q]],Y=$.source?this._coordsAscending[$.source][O.tileID.key]:[O.tileID];v.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),v._renderTileClippingMasks($,Y,!0),v.renderLayer(v,v.style.sourceCaches[$.source],$,Y,f),$.source&&(O.rttCoords[$.source]=this._coordsAscendingStr[$.source][O.tileID.key])}}return gi(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),Zt[p]}return!1}}const ni={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Nn=g,Mi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:yn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},ii={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ci{constructor(n,l,f=!1){this.mousedown=v=>{this.startMove(v,b.mousePos(this.element,v)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=v=>{this.move(v,b.mousePos(this.element,v))},this.mouseup=v=>{this._rotatePitchHanlder.dragEnd(v),this.offTemp()},this.touchstart=v=>{v.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,v.targetTouches)[0],this.startMove(v,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=v=>{v.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,v.targetTouches)[0],this.move(v,this._lastPos))},this.touchend=v=>{v.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;const p=new W;this._rotatePitchHanlder=new nc({clickTolerance:3,move:(v,C)=>{const F=l.getBoundingClientRect(),M=new o.P((F.bottom-F.top)/2,(F.right-F.left)/2);return{bearingDelta:o.cm(new o.P(v.x,C.y),C,M),pitchDelta:f?-.5*(C.y-v.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=n,b.addEventListener(l,"mousedown",this.mousedown),b.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(l,"touchcancel",this.reset)}startMove(n,l){this._rotatePitchHanlder.dragStart(n,l),b.disableDrag()}move(n,l){const f=this.map,{bearingDelta:p,pitchDelta:v}=this._rotatePitchHanlder.dragMove(n,l)||{};p&&f.setBearing(f.getBearing()+p),v&&f.setPitch(f.getPitch()+v)}off(){const n=this.element;b.removeEventListener(n,"mousedown",this.mousedown),b.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let On;function Zn(y,n,l,f=!1){if(f||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return y==null?void 0:y.wrap();const p=new o.S(y.lng,y.lat);if(y=new o.S(y.lng,y.lat),n){const v=new o.S(y.lng-360,y.lat),C=new o.S(y.lng+360,y.lat),F=l.locationToScreenPoint(y).distSqr(n);l.locationToScreenPoint(v).distSqr(n)<F?y=v:l.locationToScreenPoint(C).distSqr(n)<F&&(y=C)}for(;Math.abs(y.lng-l.center.lng)>180;){const v=l.locationToScreenPoint(y);if(v.x>=0&&v.y>=0&&v.x<=l.width&&v.y<=l.height)break;y.lng>l.center.lng?y.lng-=360:y.lng+=360}return y.lng!==p.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(y))?y:p}const si={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cn(y,n,l){const f=y.classList;for(const p in si)f.remove(`maplibregl-${l}-anchor-${p}`);f.add(`maplibregl-${l}-anchor-${n}`)}class wn extends o.E{constructor(n){if(super(),this._onKeyPress=l=>{const f=l.code,p=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=l=>{const f=l.originalEvent.target,p=this._element;this._popup&&(f===p||p.contains(f))&&this.togglePopup()},this._update=l=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=Zn(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${si[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${p}`),P.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=o.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");const l=b.createNS("http://www.w3.org/2000/svg","svg"),f=41,p=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${f}px`),l.setAttributeNS(null,"width",`${p}px`),l.setAttributeNS(null,"viewBox",`0 0 ${p} ${f}`);const v=b.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const C=b.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const F=b.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"transform","translate(3.0, 29.0)"),F.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Te of M){const De=b.createNS("http://www.w3.org/2000/svg","ellipse");De.setAttributeNS(null,"opacity","0.04"),De.setAttributeNS(null,"cx","10.5"),De.setAttributeNS(null,"cy","5.80029008"),De.setAttributeNS(null,"rx",Te.rx),De.setAttributeNS(null,"ry",Te.ry),F.appendChild(De)}const O=b.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);const V=b.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(V);const q=b.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const $=b.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild($);const Y=b.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const de=b.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Se=b.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#000000"),Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962");const Ce=b.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),de.appendChild(Se),de.appendChild(Ce),C.appendChild(F),C.appendChild(O),C.appendChild(q),C.appendChild(Y),C.appendChild(de),l.appendChild(C),l.setAttributeNS(null,"height",f*this._scale+"px"),l.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(l),this._offset=o.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Cn(this._element,this._anchor,"marker"),n&&n.className)for(const l of n.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=o.S.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const p=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var l,f;const p=(l=this._map)===null||l===void 0?void 0:l.terrain,v=this._map.transform.isLocationOccluded(this._lngLat);if(!p||v){const Y=v?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Y&&(this._element.style.opacity=Y))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const C=this._map,F=C.terrain.depthAtPoint(this._pos),M=C.terrain.getElevationForLngLatZoom(this._lngLat,C.transform.tileZoom);if(C.transform.lngLatToCameraDepth(this._lngLat,M)-F<.006)return void(this._element.style.opacity=this._opacity);const O=-this._offset.y/C.transform.pixelsPerMeter,V=Math.sin(C.getPitch()*Math.PI/180)*O,q=C.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),$=C.transform.lngLatToCameraDepth(this._lngLat,M+V)-q>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&$&&this._popup.remove(),this._element.style.opacity=$?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=o.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,l){return(this._opacity===void 0||n===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const fo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ki=0,ki=!1;const Ys={maxWidth:100,unit:"metric"};function zn(y,n,l){const f=l&&l.maxWidth||100,p=y._container.clientHeight/2,v=y._container.clientWidth/2,C=y.unproject([v-f/2,p]),F=y.unproject([v+f/2,p]),M=Math.round(y.project(F).x-y.project(C).x),O=Math.min(f,M,y._container.clientWidth),V=C.distanceTo(F);if(l&&l.unit==="imperial"){const q=3.2808*V;q>5280?rs(n,O,q/5280,y._getUIString("ScaleControl.Miles")):rs(n,O,q,y._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?rs(n,O,V/1852,y._getUIString("ScaleControl.NauticalMiles")):V>=1e3?rs(n,O,V/1e3,y._getUIString("ScaleControl.Kilometers")):rs(n,O,V,y._getUIString("ScaleControl.Meters"))}function rs(y,n,l,f){const p=function(v){const C=Math.pow(10,`${Math.floor(v)}`.length-1);let F=v/C;return F=F>=10?10:F>=5?5:F>=3?3:F>=2?2:F>=1?1:function(M){const O=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*O)/O}(F),C*F}(l);y.style.width=n*(p/l)+"px",y.innerHTML=`${p}&nbsp;${f}`}const Js={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},rl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oo(y){if(y){if(typeof y=="number"){const n=Math.round(Math.abs(y)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,y),"top-left":new o.P(n,n),"top-right":new o.P(-n,n),bottom:new o.P(0,-y),"bottom-left":new o.P(n,-n),"bottom-right":new o.P(-n,-n),left:new o.P(y,0),right:new o.P(-y,0)}}if(y instanceof o.P||Array.isArray(y)){const n=o.P.convert(y);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:o.P.convert(y.center||[0,0]),top:o.P.convert(y.top||[0,0]),"top-left":o.P.convert(y["top-left"]||[0,0]),"top-right":o.P.convert(y["top-right"]||[0,0]),bottom:o.P.convert(y.bottom||[0,0]),"bottom-left":o.P.convert(y["bottom-left"]||[0,0]),"bottom-right":o.P.convert(y["bottom-right"]||[0,0]),left:o.P.convert(y.left||[0,0]),right:o.P.convert(y.right||[0,0])}}return Oo(new o.P(0,0))}const ns=g;h.AJAXError=o.cy,h.Event=o.l,h.Evented=o.E,h.LngLat=o.S,h.MercatorCoordinate=o.a0,h.Point=o.P,h.addProtocol=o.cz,h.config=o.a,h.removeProtocol=o.cA,h.AttributionControl=Wn,h.BoxZoomHandler=qh,h.CanvasSource=ar,h.CooperativeGesturesHandler=Vi,h.DoubleClickZoomHandler=qt,h.DragPanHandler=ln,h.DragRotateHandler=Er,h.EdgeInsets=Zi,h.FullscreenControl=class extends o.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var n;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=l==null?void 0:l.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=fr,h.GeolocateControl=class extends o.E{constructor(y){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const l=new o.S(n.coords.longitude,n.coords.latitude),f=n.coords.accuracy,p=this._map.getBearing(),v=o.e({bearing:p},this.options.fitBoundsOptions),C=Gt.fromLngLat(l,f);this._map.fitBounds(C,v,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const l=new o.S(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&ki)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new wn({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},fo,y)}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(n=!1){if(On!==void 0&&!n)return On;if(window.navigator.permissions===void 0)return On=!!window.navigator.geolocation,On;try{On=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{On=!!window.navigator.geolocation}return On})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ki=0,ki=!1}_isOutOfMapMaxBounds(y){const n=this._map.getMaxBounds(),l=y.coords;return n&&(l.longitude<n.getWest()||l.longitude>n.getEast()||l.latitude<n.getSouth()||l.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),n=y.getSouthEast(),l=y.getNorthEast(),f=n.distanceTo(l),p=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ki--,ki=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ki++,Ki>1?(y={maximumAge:6e5,timeout:0},ki=!0):(y=this.options.positionOptions,ki=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.GlobeControl=class{constructor(){this._toggleProjection=()=>{var y;const n=(y=this._map.getProjection())===null||y===void 0?void 0:y.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var y;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((y=this._map.getProjection())===null||y===void 0?void 0:y.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=b.create("button","maplibregl-ctrl-globe",this._container),b.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},h.Hash=Zc,h.ImageSource=Vt,h.KeyboardHandler=Rt,h.LngLatBounds=Gt,h.LogoControl=ts,h.Map=class extends vr{constructor(y){var n,l;o.cv.mark(o.cw.create);const f=Object.assign(Object.assign(Object.assign({},Mi),y),{canvasContextAttributes:Object.assign(Object.assign({},Mi.canvasContextAttributes),y.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new wi,v=new zA;if(f.minZoom!==void 0&&p.setMinZoom(f.minZoom),f.maxZoom!==void 0&&p.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&p.setMinPitch(f.minPitch),f.maxPitch!==void 0&&p.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&p.setRenderWorldCopies(f.renderWorldCopies),super(p,v,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Rs,this._controls=[],this._mapId=o.a6(),this._contextLost=F=>{F.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:F}))},this._contextRestored=F=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:F}))},this._onMapScroll=F=>{if(F.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ni),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Z.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ae(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let F=!1;const M=Xs(O=>{this._trackResize&&!this._removed&&(this.resize(O),this.redraw())},50);this._resizeObserver=new ResizeObserver(O=>{F?M(O):F=!0}),this._resizeObserver.observe(this._container)}this.handlers=new qn(this,f),this._hash=f.hash&&new Zc(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,o.e({},f.fitBoundsOptions,{duration:0}))));const C=typeof f.style=="string"||((l=(n=f.style)===null||n===void 0?void 0:n.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,C),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new Wn(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new ts,f.logoPosition),this.on("style.load",()=>{if(C||this._resizeTransform(),this.transform.unmodified){const F=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(F)}}),this.on("data",F=>{this._update(F.dataType==="style"),this.fire(new o.l(`${F.dataType}data`,F))}),this.on("dataloading",F=>{this.fire(new o.l(`${F.dataType}dataloading`,F))}),this.on("dataabort",F=>{this.fire(new o.l("sourcedataabort",F))})}_getMapId(){return this._mapId}setGlobalStateProperty(y,n){return this.style.setGlobalStateProperty(y,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(y,n){if(n===void 0&&(n=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[n];return n.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(y);return n>-1&&this._controls.splice(n,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,n,l,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,n,l,f)}resize(y,n=!0){const[l,f]=this._containerDimensions(),p=this._getClampedPixelRatio(l,f);if(this._resizeCanvas(l,f,p),this.painter.resize(l,f,p),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const F=this._getClampedPixelRatio(l,f);this._resizeCanvas(l,f,F),this.painter.resize(l,f,F)}this._resizeTransform(n);const v=!this._moving;return v&&(this.stop(),this.fire(new o.l("movestart",y)).fire(new o.l("move",y))),this.fire(new o.l("resize",y)),v&&this.fire(new o.l("moveend",y)),this}_resizeTransform(y=!0){var n;const[l,f]=this._containerDimensions();this.transform.resize(l,f,y),(n=this._requestedCameraState)===null||n===void 0||n.resize(l,f,y)}_getClampedPixelRatio(y,n){const{0:l,1:f}=this._maxCanvasSize,p=this.getPixelRatio(),v=y*p,C=n*p;return Math.min(v>l?l/v:1,C>f?f/C:1)*p}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Gt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.setMinZoom(y),this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.setMaxZoom(y),this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.setMinPitch(y),this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(y>=this.transform.minPitch)return this.transform.setMaxPitch(y),this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.setRenderWorldCopies(y),this._update()}project(y){return this.transform.locationToScreenPoint(o.S.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.screenPointToLocation(o.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,n,l){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layers:n,listener:l,delegates:{mousemove:v=>{const C=n.filter(M=>this.getLayer(M)),F=C.length!==0?this.queryRenderedFeatures(v.point,{layers:C}):[];F.length?f||(f=!0,l.call(this,new Us(y,this,v.originalEvent,{features:F}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layers:n,listener:l,delegates:{mousemove:C=>{const F=n.filter(M=>this.getLayer(M));(F.length!==0?this.queryRenderedFeatures(C.point,{layers:F}):[]).length?f=!0:f&&(f=!1,l.call(this,new Us(y,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,l.call(this,new Us(y,this,C.originalEvent)))}}}}{const f=p=>{const v=n.filter(F=>this.getLayer(F)),C=v.length!==0?this.queryRenderedFeatures(p.point,{layers:v}):[];C.length&&(p.features=C,l.call(this,p),delete p.features)};return{layers:n,listener:l,delegates:{[y]:f}}}}_saveDelegatedListener(y,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(n)}_removeDelegatedListener(y,n,l){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const f=this._delegatedListeners[y];for(let p=0;p<f.length;p++){const v=f[p];if(v.listener===l&&v.layers.length===n.length&&v.layers.every(C=>n.includes(C))){for(const C in v.delegates)this.off(C,v.delegates[C]);return void f.splice(p,1)}}}on(y,n,l){if(l===void 0)return super.on(y,n);const f=typeof n=="string"?[n]:n,p=this._createDelegatedListener(y,f,l);this._saveDelegatedListener(y,p);for(const v in p.delegates)this.on(v,p.delegates[v]);return{unsubscribe:()=>{this._removeDelegatedListener(y,f,l)}}}once(y,n,l){if(l===void 0)return super.once(y,n);const f=typeof n=="string"?[n]:n,p=this._createDelegatedListener(y,f,l);for(const v in p.delegates){const C=p.delegates[v];p.delegates[v]=(...F)=>{this._removeDelegatedListener(y,f,l),C(...F)}}this._saveDelegatedListener(y,p);for(const v in p.delegates)this.once(v,p.delegates[v]);return this}off(y,n,l){return l===void 0?super.off(y,n):(this._removeDelegatedListener(y,typeof n=="string"?[n]:n,l),this)}queryRenderedFeatures(y,n){if(!this.style)return[];let l;const f=y instanceof o.P||Array.isArray(y),p=f?y:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(f?{}:y)||{},p instanceof o.P||typeof p[0]=="number")l=[o.P.convert(p)];else{const v=o.P.convert(p[0]),C=o.P.convert(p[1]);l=[v,new o.P(C.x,v.y),C,new o.P(v.x,C.y),v]}return this.style.queryRenderedFeatures(l,n,this.transform)}querySourceFeatures(y,n){return this.style.querySourceFeatures(y,n)}setStyle(y,n){return(n=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(y,n))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const n=this._locale[y];if(n==null)throw new Error(`Missing UI string '${y}'`);return n}_updateStyle(y,n){var l,f;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,n));const p=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new la(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,n,p):this.style.loadJSON(y,n,p),this):((f=(l=this.style)===null||l===void 0?void 0:l.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new la(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,n){if(typeof y=="string"){const l=this._requestManager.transformRequest(y,"Style");o.j(l,new AbortController).then(f=>{this._updateDiff(f.data,n)}).catch(f=>{f&&this.fire(new o.k(f))})}else typeof y=="object"&&this._updateDiff(y,n)}_updateDiff(y,n){try{this.style.setState(y,n)&&this._update(!0)}catch(l){o.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(y,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(y,n){return this._lazyInitEmptyStyle(),this.style.addSource(y,n),this._update(!0)}isSourceLoaded(y){const n=this.style&&this.style.sourceCaches[y];if(n!==void 0)return n.loaded();this.fire(new o.k(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const n=this.style.sourceCaches[y.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&n.reload();for(const l in this.style._layers){const f=this.style._layers[l];f.type==="hillshade"&&f.source===y.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===y.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ci(this.painter,n,y),this.painter.renderToTexture=new lr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var f;l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==y.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=l.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:y})),this}getTerrain(){var y,n;return(n=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const n in y){const l=y[n]._tiles;for(const f in l){const p=l[f];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}setSourceTileLodParams(y,n,l){if(l){const f=this.getSource(l);if(!f)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);f.calculateTileZoom=At(Math.max(1,y),Math.max(1,n))}else for(const f in this.style.sourceCaches)this.style.sourceCaches[f].getSource().calculateTileZoom=At(Math.max(1,y),Math.max(1,n));return this._update(!0),this}refreshTiles(y,n){const l=this.style.sourceCaches[y];if(!l)throw new Error(`There is no source cache with ID "${y}", cannot refresh tile`);n===void 0?l.reload(!0):l.refreshTiles(n.map(f=>new o.a3(f.z,f.x,f.y)))}addImage(y,n,l={}){const{pixelRatio:f=1,sdf:p=!1,stretchX:v,stretchY:C,content:F,textFitWidth:M,textFitHeight:O}=l;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||o.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:V,height:q,data:$}=n,Y=n;return this.style.addImage(y,{data:new o.R({width:V,height:q},new Uint8Array($)),pixelRatio:f,stretchX:v,stretchY:C,content:F,textFitWidth:M,textFitHeight:O,sdf:p,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,y),this}}{const{width:V,height:q,data:$}=P.getImageData(n);this.style.addImage(y,{data:new o.R({width:V,height:q},$),pixelRatio:f,stretchX:v,stretchY:C,content:F,textFitWidth:M,textFitHeight:O,sdf:p,version:0})}}updateImage(y,n){const l=this.style.getImage(y);if(!l)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=n instanceof HTMLImageElement||o.b(n)?P.getImageData(n):n,{width:p,height:v,data:C}=f;if(p===void 0||v===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==l.data.width||v!==l.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const F=!(n instanceof HTMLImageElement||o.b(n));return l.data.replace(C,F),this.style.updateImage(y,l),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return Z.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,n){return this._lazyInitEmptyStyle(),this.style.addLayer(y,n),this._update(!0)}moveLayer(y,n){return this.style.moveLayer(y,n),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,n,l){return this.style.setLayerZoomRange(y,n,l),this._update(!0)}setFilter(y,n,l={}){return this.style.setFilter(y,n,l),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,n,l,f={}){return this.style.setPaintProperty(y,n,l,f),this._update(!0)}getPaintProperty(y,n){return this.style.getPaintProperty(y,n)}setLayoutProperty(y,n,l,f={}){return this.style.setLayoutProperty(y,n,l,f),this._update(!0)}getLayoutProperty(y,n){return this.style.getLayoutProperty(y,n)}setGlyphs(y,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,n,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,n,l,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,n,l=>{l||this._update(!0)}),this}setLight(y,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(y,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(y,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,n){return this.style.setFeatureState(y,n),this._update()}removeFeatureState(y,n){return this.style.removeFeatureState(y,n),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,n=0;return this._container&&(y=this._container.clientWidth||400,n=this._container.clientHeight||300),[y,n]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const n=this._canvasContainer=b.create("div","maplibregl-canvas-container",y);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),f=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],f);const p=this._controlContainer=b.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{v[C]=b.create("div",`maplibregl-ctrl-${C} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,n,l){this._canvas.width=Math.floor(l*y),this._canvas.height=Math.floor(l*n),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const y=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{n={requestedAttributes:y},f&&(n.statusMessage=f.statusMessage,n.type=f.type)},{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,y):this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y),!l){const f="Failed to initialize WebGL";throw n?(n.message=f,new Error(JSON.stringify(n))):new Error(f)}this.painter=new es(l,this.transform),N.testSupport(l)}migrateProjection(y,n){super.migrateProjection(y,n),this.painter.transform=y,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){var n,l,f,p,v;const C=this._idleTriggered?this._fadeDuration:0,F=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const q=this.transform.zoom,$=P.now();this.style.zoomHistory.update(q,$);const Y=new o.F(q,{now:$,fadeDuration:C,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),de=Y.crossFadingFactor();de===1&&de===this._crossFadingFactor||(M=!0,this._crossFadingFactor=de),this.style.update(Y)}const O=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==F;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(v=this.style.projection)===null||v===void 0?void 0:v.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||O)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,O),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cv.mark(o.cw.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,o.cv.mark(o.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cv.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,y=>{o.cv.frame(y),this._frameRequest=null;try{this._render(y)}catch(n){if(!o.cx(n)&&!function(l){return l.message===uo}(n))throw n}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Nn}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(y){return this._lazyInitEmptyStyle(),this.style.setProjection(y),this._update(!0)}},h.MapMouseEvent=Us,h.MapTouchEvent=ua,h.MapWheelEvent=Uu,h.Marker=wn,h.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const n=this._map.getZoom(),l=n===this._map.getMaxZoom(),f=n===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,l)=>{const f=this._map._getUIString(`NavigationControl.${l}`);n.title=f,n.setAttribute("aria-label",f)},this.options=o.e({},ii,y),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ci(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,n){const l=b.create("button",y,this._container);return l.type="button",l.addEventListener("click",n),l}},h.Popup=class extends o.E{constructor(y){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Zn(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const l=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const p=Oo(this.options.offset);if(!f){const C=this._container.offsetWidth,F=this._container.offsetHeight;let M;M=l.y+p.bottom.y<F?["top"]:l.y>this._map.transform.height-F?["bottom"]:[],l.x<C/2?M.push("left"):l.x>this._map.transform.width-C/2&&M.push("right"),f=M.length===0?"bottom":M.join("-")}let v=l.add(p[f]);this.options.subpixelPositioning||(v=v.round()),b.setTransform(this._container,`${si[f]} translate(${v.x}px,${v.y}px)`),Cn(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Js),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=o.S.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const n=document.createDocumentFragment(),l=document.createElement("body");let f;for(l.innerHTML=y;f=l.firstChild,f;)n.appendChild(f);return this.setDOMContent(n)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(rl);y&&y.focus()}},h.RasterDEMTileSource=wr,h.RasterTileSource=Gr,h.ScaleControl=class{constructor(y){this._onMove=()=>{zn(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,zn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ys),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=rr,h.Style=la,h.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=ht,h.TwoFingersTouchRotateHandler=It,h.TwoFingersTouchZoomHandler=Ne,h.TwoFingersTouchZoomRotateHandler=_n,h.VectorTileSource=Ke,h.VideoSource=xr,h.addSourceType=(y,n)=>o._(void 0,void 0,void 0,function*(){if(mr(y))throw new Error(`A source type called "${y}" already exists.`);((l,f)=>{qr[l]=f})(y,n)}),h.clearPrewarmedResources=function(){const y=Ee;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(mt),Ee=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.createTileMesh=$a,h.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return Jr().getRTLTextPluginStatus()},h.getVersion=function(){return ns},h.getWorkerCount=function(){return gt.workerCount},h.getWorkerUrl=function(){return o.a.WORKER_URL},h.importScriptInWorkers=function(y){return Ze().broadcast("IS",y)},h.prewarm=function(){Ye().acquire(mt)},h.setMaxParallelImageRequests=function(y){o.a.MAX_PARALLEL_IMAGE_REQUESTS=y},h.setRTLTextPlugin=function(y,n){return Jr().setRTLTextPlugin(y,n)},h.setWorkerCount=function(y){gt.workerCount=y},h.setWorkerUrl=function(y){o.a.WORKER_URL=y}});var u=r;return u})})(ck);var lV=ck.exports;const qm=_2(lV);function Ry(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function AV(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hk(e){let t,r,i;e.length!==2?(t=Ry,r=(o,g)=>Ry(e(o),g),i=(o,g)=>e(o)-g):(t=e===Ry||e===AV?e:cV,r=e,i=e);function a(o,g,w=0,B=o.length){if(w<B){if(t(g,g)!==0)return B;do{const I=w+B>>>1;r(o[I],g)<0?w=I+1:B=I}while(w<B)}return w}function u(o,g,w=0,B=o.length){if(w<B){if(t(g,g)!==0)return B;do{const I=w+B>>>1;r(o[I],g)<=0?w=I+1:B=I}while(w<B)}return w}function h(o,g,w=0,B=o.length){const I=a(o,g,w,B-1);return I>w&&i(o[I-1],g)>-i(o[I],g)?I-1:I}return{left:a,center:h,right:u}}function cV(){return 0}function uV(e){return e===null?NaN:+e}const hV=hk(Ry),dV=hV.right;hk(uV).center;const fV=Math.sqrt(50),pV=Math.sqrt(10),mV=Math.sqrt(2);function Iv(e,t,r){const i=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(i)),u=i/Math.pow(10,a),h=u>=fV?10:u>=pV?5:u>=mV?2:1;let o,g,w;return a<0?(w=Math.pow(10,-a)/h,o=Math.round(e*w),g=Math.round(t*w),o/w<e&&++o,g/w>t&&--g,w=-w):(w=Math.pow(10,a)*h,o=Math.round(e/w),g=Math.round(t/w),o*w<e&&++o,g*w>t&&--g),g<o&&.5<=r&&r<2?Iv(e,t,r*2):[o,g,w]}function gV(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const i=t<e,[a,u,h]=i?Iv(t,e,r):Iv(e,t,r);if(!(u>=a))return[];const o=u-a+1,g=new Array(o);if(i)if(h<0)for(let w=0;w<o;++w)g[w]=(u-w)/-h;else for(let w=0;w<o;++w)g[w]=(u-w)*h;else if(h<0)for(let w=0;w<o;++w)g[w]=(a+w)/-h;else for(let w=0;w<o;++w)g[w]=(a+w)*h;return g}function kb(e,t,r){return t=+t,e=+e,r=+r,Iv(e,t,r)[2]}function yV(e,t,r){t=+t,e=+e,r=+r;const i=t<e,a=i?kb(t,e,r):kb(e,t,r);return(i?-1:1)*(a<0?1/-a:a)}function vV(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function HB(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function dk(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function jg(){}var Bg=.7,Fv=1/Bg,op="\\s*([+-]?\\d+)\\s*",Cg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_V=/^#([0-9a-f]{3,8})$/,wV=new RegExp(`^rgb\\(${op},${op},${op}\\)$`),xV=new RegExp(`^rgb\\(${Bc},${Bc},${Bc}\\)$`),bV=new RegExp(`^rgba\\(${op},${op},${op},${Cg}\\)$`),BV=new RegExp(`^rgba\\(${Bc},${Bc},${Bc},${Cg}\\)$`),CV=new RegExp(`^hsl\\(${Cg},${Bc},${Bc}\\)$`),SV=new RegExp(`^hsla\\(${Cg},${Bc},${Bc},${Cg}\\)$`),e4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HB(jg,Sg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:t4,formatHex:t4,formatHex8:EV,formatHsl:IV,formatRgb:r4,toString:r4});function t4(){return this.rgb().formatHex()}function EV(){return this.rgb().formatHex8()}function IV(){return fk(this).formatHsl()}function r4(){return this.rgb().formatRgb()}function Sg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=_V.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?n4(t):r===3?new Ua(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?D0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?D0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wV.exec(e))?new Ua(t[1],t[2],t[3],1):(t=xV.exec(e))?new Ua(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bV.exec(e))?D0(t[1],t[2],t[3],t[4]):(t=BV.exec(e))?D0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=CV.exec(e))?o4(t[1],t[2]/100,t[3]/100,1):(t=SV.exec(e))?o4(t[1],t[2]/100,t[3]/100,t[4]):e4.hasOwnProperty(e)?n4(e4[e]):e==="transparent"?new Ua(NaN,NaN,NaN,0):null}function n4(e){return new Ua(e>>16&255,e>>8&255,e&255,1)}function D0(e,t,r,i){return i<=0&&(e=t=r=NaN),new Ua(e,t,r,i)}function FV(e){return e instanceof jg||(e=Sg(e)),e?(e=e.rgb(),new Ua(e.r,e.g,e.b,e.opacity)):new Ua}function Ub(e,t,r,i){return arguments.length===1?FV(e):new Ua(e,t,r,i??1)}function Ua(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}HB(Ua,Ub,dk(jg,{brighter(e){return e=e==null?Fv:Math.pow(Fv,e),new Ua(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bg:Math.pow(Bg,e),new Ua(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ua(Sd(this.r),Sd(this.g),Sd(this.b),Tv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i4,formatHex:i4,formatHex8:TV,formatRgb:s4,toString:s4}));function i4(){return`#${md(this.r)}${md(this.g)}${md(this.b)}`}function TV(){return`#${md(this.r)}${md(this.g)}${md(this.b)}${md((isNaN(this.opacity)?1:this.opacity)*255)}`}function s4(){const e=Tv(this.opacity);return`${e===1?"rgb(":"rgba("}${Sd(this.r)}, ${Sd(this.g)}, ${Sd(this.b)}${e===1?")":`, ${e})`}`}function Tv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function md(e){return e=Sd(e),(e<16?"0":"")+e.toString(16)}function o4(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new TA(e,t,r,i)}function fk(e){if(e instanceof TA)return new TA(e.h,e.s,e.l,e.opacity);if(e instanceof jg||(e=Sg(e)),!e)return new TA;if(e instanceof TA)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),u=Math.max(t,r,i),h=NaN,o=u-a,g=(u+a)/2;return o?(t===u?h=(r-i)/o+(r<i)*6:r===u?h=(i-t)/o+2:h=(t-r)/o+4,o/=g<.5?u+a:2-u-a,h*=60):o=g>0&&g<1?0:h,new TA(h,o,g,e.opacity)}function PV(e,t,r,i){return arguments.length===1?fk(e):new TA(e,t,r,i??1)}function TA(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}HB(TA,PV,dk(jg,{brighter(e){return e=e==null?Fv:Math.pow(Fv,e),new TA(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bg:Math.pow(Bg,e),new TA(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,a=2*r-i;return new Ua(bw(e>=240?e-240:e+120,a,i),bw(e,a,i),bw(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new TA(a4(this.h),Q0(this.s),Q0(this.l),Tv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Tv(this.opacity);return`${e===1?"hsl(":"hsla("}${a4(this.h)}, ${Q0(this.s)*100}%, ${Q0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function a4(e){return e=(e||0)%360,e<0?e+360:e}function Q0(e){return Math.max(0,Math.min(1,e||0))}function bw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const jB=e=>()=>e;function LV(e,t){return function(r){return e+r*t}}function MV(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function kV(e){return(e=+e)==1?pk:function(t,r){return r-t?MV(t,r,e):jB(isNaN(t)?r:t)}}function pk(e,t){var r=t-e;return r?LV(e,r):jB(isNaN(e)?t:e)}const l4=function e(t){var r=kV(t);function i(a,u){var h=r((a=Ub(a)).r,(u=Ub(u)).r),o=r(a.g,u.g),g=r(a.b,u.b),w=pk(a.opacity,u.opacity);return function(B){return a.r=h(B),a.g=o(B),a.b=g(B),a.opacity=w(B),a+""}}return i.gamma=e,i}(1);function UV(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(u){for(a=0;a<r;++a)i[a]=e[a]*(1-u)+t[a]*u;return i}}function RV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function NV(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),u=new Array(r),h;for(h=0;h<i;++h)a[h]=VB(e[h],t[h]);for(;h<r;++h)u[h]=t[h];return function(o){for(h=0;h<i;++h)u[h]=a[h](o);return u}}function DV(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}function Pv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function QV(e,t){var r={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=VB(e[a],t[a]):i[a]=t[a];return function(u){for(a in r)i[a]=r[a](u);return i}}var Rb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bw=new RegExp(Rb.source,"g");function OV(e){return function(){return e}}function zV(e){return function(t){return e(t)+""}}function HV(e,t){var r=Rb.lastIndex=Bw.lastIndex=0,i,a,u,h=-1,o=[],g=[];for(e=e+"",t=t+"";(i=Rb.exec(e))&&(a=Bw.exec(t));)(u=a.index)>r&&(u=t.slice(r,u),o[h]?o[h]+=u:o[++h]=u),(i=i[0])===(a=a[0])?o[h]?o[h]+=a:o[++h]=a:(o[++h]=null,g.push({i:h,x:Pv(i,a)})),r=Bw.lastIndex;return r<t.length&&(u=t.slice(r),o[h]?o[h]+=u:o[++h]=u),o.length<2?g[0]?zV(g[0].x):OV(t):(t=g.length,function(w){for(var B=0,I;B<t;++B)o[(I=g[B]).i]=I.x(w);return o.join("")})}function VB(e,t){var r=typeof t,i;return t==null||r==="boolean"?jB(t):(r==="number"?Pv:r==="string"?(i=Sg(t))?(t=i,l4):HV:t instanceof Sg?l4:t instanceof Date?DV:RV(t)?UV:Array.isArray(t)?NV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?QV:Pv)(e,t)}function jV(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function VV(e){return function(){return e}}function KV(e){return+e}var A4=[0,1];function Gf(e){return e}function Nb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:VV(isNaN(t)?NaN:.5)}function GV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function $V(e,t,r){var i=e[0],a=e[1],u=t[0],h=t[1];return a<i?(i=Nb(a,i),u=r(h,u)):(i=Nb(i,a),u=r(u,h)),function(o){return u(i(o))}}function qV(e,t,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),u=new Array(i),h=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<i;)a[h]=Nb(e[h],e[h+1]),u[h]=r(t[h],t[h+1]);return function(o){var g=dV(e,o,1,i)-1;return u[g](a[g](o))}}function WV(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ZV(){var e=A4,t=A4,r=VB,i,a,u,h=Gf,o,g,w;function B(){var P=Math.min(e.length,t.length);return h!==Gf&&(h=GV(e[0],e[P-1])),o=P>2?qV:$V,g=w=null,I}function I(P){return P==null||isNaN(P=+P)?u:(g||(g=o(e.map(i),t,r)))(i(h(P)))}return I.invert=function(P){return h(a((w||(w=o(t,e.map(i),Pv)))(P)))},I.domain=function(P){return arguments.length?(e=Array.from(P,KV),B()):e.slice()},I.range=function(P){return arguments.length?(t=Array.from(P),B()):t.slice()},I.rangeRound=function(P){return t=Array.from(P),r=jV,B()},I.clamp=function(P){return arguments.length?(h=P?!0:Gf,B()):h!==Gf},I.interpolate=function(P){return arguments.length?(r=P,B()):r},I.unknown=function(P){return arguments.length?(u=P,I):u},function(P,b){return i=P,a=b,B()}}function XV(){return ZV()(Gf,Gf)}function YV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Lv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function Tp(e){return e=Lv(Math.abs(e)),e?e[1]:NaN}function JV(e,t){return function(r,i){for(var a=r.length,u=[],h=0,o=e[0],g=0;a>0&&o>0&&(g+o+1>i&&(o=Math.max(1,i-g)),u.push(r.substring(a-=o,a+o)),!((g+=o+1)>i));)o=e[h=(h+1)%e.length];return u.reverse().join(t)}}function eK(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var tK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mv(e){if(!(t=tK.exec(e)))throw new Error("invalid format: "+e);var t;return new KB({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Mv.prototype=KB.prototype;function KB(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}KB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rK(e){e:for(var t=e.length,r=1,i=-1,a;r<t;++r)switch(e[r]){case".":i=a=r;break;case"0":i===0&&(i=r),a=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var mk;function nK(e,t){var r=Lv(e,t);if(!r)return e+"";var i=r[0],a=r[1],u=a-(mk=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,h=i.length;return u===h?i:u>h?i+new Array(u-h+1).join("0"):u>0?i.slice(0,u)+"."+i.slice(u):"0."+new Array(1-u).join("0")+Lv(e,Math.max(0,t+u-1))[0]}function c4(e,t){var r=Lv(e,t);if(!r)return e+"";var i=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const u4={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:YV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>c4(e*100,t),r:c4,s:nK,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function h4(e){return e}var d4=Array.prototype.map,f4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function iK(e){var t=e.grouping===void 0||e.thousands===void 0?h4:JV(d4.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",u=e.numerals===void 0?h4:eK(d4.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",g=e.nan===void 0?"NaN":e.nan+"";function w(I){I=Mv(I);var P=I.fill,b=I.align,N=I.sign,k=I.symbol,H=I.zero,U=I.width,Q=I.comma,K=I.precision,Z=I.trim,Ae=I.type;Ae==="n"?(Q=!0,Ae="g"):u4[Ae]||(K===void 0&&(K=12),Z=!0,Ae="g"),(H||P==="0"&&b==="=")&&(H=!0,P="0",b="=");var fe=k==="$"?r:k==="#"&&/[boxX]/.test(Ae)?"0"+Ae.toLowerCase():"",ge=k==="$"?i:/[%p]/.test(Ae)?h:"",me=u4[Ae],ae=/[defgprs%]/.test(Ae);K=K===void 0?6:/[gprs]/.test(Ae)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function Le(re){var he=fe,Ie=ge,we,nt,rt;if(Ae==="c")Ie=me(re)+Ie,re="";else{re=+re;var ct=re<0||1/re<0;if(re=isNaN(re)?g:me(Math.abs(re),K),Z&&(re=rK(re)),ct&&+re==0&&N!=="+"&&(ct=!1),he=(ct?N==="("?N:o:N==="-"||N==="("?"":N)+he,Ie=(Ae==="s"?f4[8+mk/3]:"")+Ie+(ct&&N==="("?")":""),ae){for(we=-1,nt=re.length;++we<nt;)if(rt=re.charCodeAt(we),48>rt||rt>57){Ie=(rt===46?a+re.slice(we+1):re.slice(we))+Ie,re=re.slice(0,we);break}}}Q&&!H&&(re=t(re,1/0));var Pe=he.length+re.length+Ie.length,Ve=Pe<U?new Array(U-Pe+1).join(P):"";switch(Q&&H&&(re=t(Ve+re,Ve.length?U-Ie.length:1/0),Ve=""),b){case"<":re=he+re+Ie+Ve;break;case"=":re=he+Ve+re+Ie;break;case"^":re=Ve.slice(0,Pe=Ve.length>>1)+he+re+Ie+Ve.slice(Pe);break;default:re=Ve+he+re+Ie;break}return u(re)}return Le.toString=function(){return I+""},Le}function B(I,P){var b=w((I=Mv(I),I.type="f",I)),N=Math.max(-8,Math.min(8,Math.floor(Tp(P)/3)))*3,k=Math.pow(10,-N),H=f4[8+N/3];return function(U){return b(k*U)+H}}return{format:w,formatPrefix:B}}var O0,gk,yk;sK({thousands:",",grouping:[3],currency:["$",""]});function sK(e){return O0=iK(e),gk=O0.format,yk=O0.formatPrefix,O0}function oK(e){return Math.max(0,-Tp(Math.abs(e)))}function aK(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tp(t)/3)))*3-Tp(Math.abs(e)))}function lK(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Tp(t)-Tp(e))+1}function AK(e,t,r,i){var a=yV(e,t,r),u;switch(i=Mv(i??",f"),i.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(u=aK(a,h))&&(i.precision=u),yk(i,h)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(u=lK(a,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=u-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(u=oK(a))&&(i.precision=u-(i.type==="%")*2);break}}return gk(i)}function cK(e){var t=e.domain;return e.ticks=function(r){var i=t();return gV(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var a=t();return AK(a[0],a[a.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),a=0,u=i.length-1,h=i[a],o=i[u],g,w,B=10;for(o<h&&(w=h,h=o,o=w,w=a,a=u,u=w);B-- >0;){if(w=kb(h,o,r),w===g)return i[a]=h,i[u]=o,t(i);if(w>0)h=Math.floor(h/w)*w,o=Math.ceil(o/w)*w;else if(w<0)h=Math.ceil(h*w)/w,o=Math.floor(o*w)/w;else break;g=w}return e},e}function GB(){var e=XV();return e.copy=function(){return WV(e,GB())},vV.apply(e,arguments),cK(e)}function uK({filteredData:e,geoJSON:t,selectedMetric:r,regionScope:i,onRenderComplete:a}){const u=ee.useRef(null),h=ee.useRef(null),o=ee.useRef(null),g=ee.useRef({}).current,w=ee.useMemo(()=>{const b=e.map(N=>N[r]).filter(N=>typeof N=="number"&&N>0).sort((N,k)=>N-k);return b.length<2?null:GB().domain([b[0],b[b.length-1]]).range(["#FFF9B0","#E84C61","#2E0B59"])},[e,r]),{continental:B,alaska:I,hawaii:P}=ee.useMemo(()=>{if(i!=="national"||!t)return{continental:t,alaska:null,hawaii:null};const b=[],N=[],k=[],H=new Set(e.filter(Q=>Q.state==="Alaska").map(Q=>Q.zipCode)),U=new Set(e.filter(Q=>Q.state==="Hawaii").map(Q=>Q.zipCode));return t.features.forEach(Q=>{const K=Q.properties.zipCode;H.has(K)?N.push(Q):U.has(K)?k.push(Q):b.push(Q)}),{continental:{type:"FeatureCollection",features:b},alaska:{type:"FeatureCollection",features:N},hawaii:{type:"FeatureCollection",features:k}}},[t,i,e]);return ee.useEffect(()=>{const b=[{key:"main",ref:u,center:[-98.5,39.8],zoom:3.5,data:B},...i==="national"?[{key:"alaska",ref:h,center:[-152,64],zoom:2.5,data:I},{key:"hawaii",ref:o,center:[-157,21],zoom:5,data:P}]:[]];let N=b.length,k=0;const H=()=>{k++,k===N&&a&&a()};return b.forEach(({key:U,ref:Q,center:K,zoom:Z,data:Ae})=>{if(!Q.current||g[U])return;const fe=new qm.Map({container:Q.current,style:{version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"#ffffff"}}]},center:K,zoom:Z,interactive:!1,attributionControl:!1});g[U]=fe,fe.on("load",()=>{if(!Ae||!w||Ae.features.length===0){H();return}const ge={...Ae,features:Ae.features.map(me=>{const ae=e.find(re=>re.zipCode===me.properties.zipCode),Le=ae?ae[r]:0;return{...me,properties:{...me.properties,metricValue:Le}}})};if(fe.addSource(U,{type:"geojson",data:ge}),fe.addLayer({id:`${U}-fill`,type:"fill",source:U,paint:{"fill-color":["case",["!",["has","metricValue"]],"#ccc",["interpolate",["linear"],["get","metricValue"],...w.domain().flatMap(me=>[me,w(me)])]],"fill-opacity":.8}}),U==="main"&&(i==="state"||i==="metro")){const me=new qm.LngLatBounds;Ae.features.forEach(ae=>{var Le,re;((Le=ae.geometry)==null?void 0:Le.type)==="Polygon"&&ae.geometry.coordinates[0].forEach(he=>me.extend(he)),((re=ae.geometry)==null?void 0:re.type)==="MultiPolygon"&&ae.geometry.coordinates.forEach(he=>he[0].forEach(Ie=>me.extend(Ie)))}),me.isEmpty()||fe.fitBounds(me,{padding:40,duration:0})}fe.once("idle",H)})}),()=>{Object.values(g).forEach(U=>U==null?void 0:U.remove())}},[B,I,P,w,a,i,r,e]),X.jsxs("div",{className:"relative w-full h-full",children:[X.jsx("div",{ref:u,className:"w-full h-full"}),i==="national"&&X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"absolute bottom-4 left-4 w-40 h-32 border border-gray-300 rounded bg-white",children:X.jsx("div",{ref:h,className:"w-full h-full"})}),X.jsx("div",{className:"absolute bottom-4 left-48 w-32 h-24 border border-gray-300 rounded bg-white",children:X.jsx("div",{ref:o,className:"w-full h-full"})})]})]})}function Cw(e,t){if(e==null||isNaN(e))return"N/A";switch(t){case"currency":return`$${e.toLocaleString()}`;case"percent":return`${e.toFixed(1)}%`;case"ratio":return`${(e*100).toFixed(1)}%`;case"number":return e.toLocaleString();default:return e.toString()}}function hK(e,t){if(!e||!e.zipCode)return'<div class="p-2">No data available</div>';const i={median_sale_price:{key:"median_sale_price",label:"Median Sale Price",format:"currency"},median_list_price:{key:"median_list_price",label:"Median List Price",format:"currency"},median_dom:{key:"median_dom",label:"Median Days on Market",format:"number"},inventory:{key:"inventory",label:"Inventory",format:"number"},new_listings:{key:"new_listings",label:"New Listings",format:"number"},homes_sold:{key:"homes_sold",label:"Homes Sold",format:"number"},avg_sale_to_list_ratio:{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",format:"ratio"},sold_above_list:{key:"sold_above_list",label:"% Sold Above List",format:"percent"},off_market_in_two_weeks:{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",format:"percent"}}[t],a=i?e[i.key]:null;let u="N/A";if(typeof a=="number"&&isFinite(a))switch(i.format){case"currency":u=`$${a.toLocaleString()}`;break;case"percent":u=`${a.toFixed(1)}%`;break;case"ratio":u=`${(a*100).toFixed(1)}%`;break;case"number":u=a.toLocaleString();break}return`
    <div class="p-2 bg-white rounded shadow-lg border text-black font-sans">
      <div class="font-bold text-base">${e.zipCode}</div>
      <div class="text-sm text-gray-600">${e.city||"Unknown City"}, ${e.state}</div>
      <div class="text-sm mt-2">
        <span class="font-semibold">${(i==null?void 0:i.label)||t}:</span>
        <span class="font-normal"> ${u}</span>
      </div>
    </div>
  `}function dK({filteredZipData:e,selectedMetric:t,className:r=""}){const i=ee.useMemo(()=>{const w={"median-sale-price":{key:"median_sale_price",format:"currency"},"median-list-price":{key:"median_list_price",format:"currency"},"median-dom":{key:"median_dom",format:"number"},inventory:{key:"inventory",format:"number"},"new-listings":{key:"new_listings",format:"number"},"homes-sold":{key:"homes_sold",format:"number"},"sale-to-list-ratio":{key:"avg_sale_to_list_ratio",format:"ratio"},"homes-sold-above-list":{key:"sold_above_list",format:"percent"},"off-market-2-weeks":{key:"off_market_in_two_weeks",format:"percent"}}[t];if(!w||!Array.isArray(e)||e.length===0)return{minDisplay:"N/A",maxDisplay:"N/A",quintileDisplays:[],zipCount:0};const B=e.map(P=>P[w.key]).filter(P=>typeof P=="number"&&isFinite(P)&&P>0).sort((P,b)=>P-b);if(B.length<2)return{minDisplay:"N/A",maxDisplay:"N/A",quintileDisplays:[],zipCount:e.length};const I=[];for(let P=0;P<=4;P++){const b=Math.floor((B.length-1)*(P/4));I.push(Cw(B[b],w.format))}return{minDisplay:Cw(B[0],w.format),maxDisplay:Cw(B[B.length-1],w.format),quintileDisplays:I,zipCount:e.length}},[e,t]),{minDisplay:a,maxDisplay:u,quintileDisplays:h,zipCount:o}=i;return X.jsxs("div",{className:`bg-white border border-gray-300 rounded p-4 inline-block ${r}`,children:[X.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-900",children:"Legend"}),X.jsxs("div",{className:"mb-3",children:[X.jsx("div",{className:"h-4 rounded-lg",style:{background:"linear-gradient(to right, #FFF9B0, #FFA873, #E84C61, #922C7E, #2E0B59)"}}),X.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[X.jsx("span",{children:a}),X.jsx("span",{children:u})]})]}),X.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:h.map((g,w)=>{const B=["#FFF9B0","#FFA873","#E84C61","#922C7E","#2E0B59"];return X.jsxs("div",{className:"text-center",children:[X.jsx("div",{className:"w-4 h-4 rounded mx-auto mb-1",style:{backgroundColor:B[w]}}),X.jsx("span",{className:"text-[10px] text-gray-600 leading-tight block",children:g})]},w)})}),X.jsxs("div",{className:"text-xs text-gray-500 text-center pt-2 border-t border-gray-200",children:[o.toLocaleString()," ZIP codes"]})]})}function fK({className:e,showText:t=!0,size:r="md"}){const i={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"},a={sm:"text-sm",md:"text-base",lg:"text-xl"};return X.jsxs("div",{className:jn("flex items-center space-x-2",e),children:[X.jsx("div",{className:jn("relative",i[r]),children:X.jsxs("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[X.jsx("path",{d:"M4 6h24c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V8c0-1.1.9-2 2-2z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),X.jsx("path",{d:"M12 10l4-3 4 3v8h-2v-4h-4v4h-2v-8z",fill:"currentColor"}),X.jsx("path",{d:"M8 12h16M8 16h16M8 20h16M12 8v16M20 8v16",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.3"}),X.jsx("circle",{cx:"10",cy:"14",r:"1",fill:"currentColor",opacity:"0.6"}),X.jsx("circle",{cx:"14",cy:"18",r:"1",fill:"currentColor",opacity:"0.6"}),X.jsx("circle",{cx:"22",cy:"12",r:"1",fill:"currentColor",opacity:"0.6"}),X.jsx("circle",{cx:"24",cy:"20",r:"1",fill:"currentColor",opacity:"0.6"})]})}),t&&X.jsx("span",{className:jn("font-bold text-gray-800",a[r]),children:"Domapus"})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Db=function(e,t){return Db=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},Db(e,t)};function NA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Db(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Qb=function(){return Qb=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Qb.apply(this,arguments)};function ma(e,t,r,i){function a(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function o(B){try{w(i.next(B))}catch(I){h(I)}}function g(B){try{w(i.throw(B))}catch(I){h(I)}}function w(B){B.done?u(B.value):a(B.value).then(o,g)}w((i=i.apply(e,[])).next())})}function Xo(e,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,h;return h={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function o(w){return function(B){return g([w,B])}}function g(w){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(u=w[0]&2?a.return:w[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,w[1])).done)return u;switch(a=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,a=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){r.label=w[1];break}if(w[0]===6&&r.label<u[1]){r.label=u[1],u=w;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(w);break}u[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(e,r)}catch(B){w=[6,B],a=0}finally{i=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}function z0(e,t,r){if(arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||t)}var xu=function(){function e(t,r,i,a){this.left=t,this.top=r,this.width=i,this.height=a}return e.prototype.add=function(t,r,i,a){return new e(this.left+t,this.top+r,this.width+i,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var i=Array.from(r).find(function(a){return a.width!==0});return i?new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),M1=function(e,t){return xu.fromClientRect(e,t.getBoundingClientRect())},pK=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new xu(0,0,i,a)},k1=function(e){for(var t=[],r=0,i=e.length;r<i;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){var u=e.charCodeAt(r++);(u&64512)===56320?t.push(((a&1023)<<10)+(u&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Es=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],a=-1,u="";++a<r;){var h=e[a];h<=65535?i.push(h):(h-=65536,i.push((h>>10)+55296,h%1024+56320)),(a+1===r||i.length>16384)&&(u+=String.fromCharCode.apply(String,i),i.length=0)}return u},p4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var H0=0;H0<p4.length;H0++)mK[p4.charCodeAt(H0)]=H0;var m4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var j0=0;j0<m4.length;j0++)Fm[m4.charCodeAt(j0)]=j0;var gK=function(e){var t=e.length*.75,r=e.length,i,a=0,u,h,o,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var w=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),B=Array.isArray(w)?w:new Uint8Array(w);for(i=0;i<r;i+=4)u=Fm[e.charCodeAt(i)],h=Fm[e.charCodeAt(i+1)],o=Fm[e.charCodeAt(i+2)],g=Fm[e.charCodeAt(i+3)],B[a++]=u<<2|h>>4,B[a++]=(h&15)<<4|o>>2,B[a++]=(o&3)<<6|g&63;return w},yK=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},vK=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},Ed=5,$B=11,Sw=2,_K=$B-Ed,vk=65536>>Ed,wK=1<<Ed,Ew=wK-1,xK=1024>>Ed,bK=vk+xK,BK=bK,CK=32,SK=BK+CK,EK=65536>>$B,IK=1<<_K,FK=IK-1,g4=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},TK=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},PK=function(e,t){var r=gK(e),i=Array.isArray(r)?vK(r):new Uint32Array(r),a=Array.isArray(r)?yK(r):new Uint16Array(r),u=24,h=g4(a,u/2,i[4]/2),o=i[5]===2?g4(a,(u+i[4])/2):TK(i,Math.ceil((u+i[4])/4));return new LK(i[0],i[1],i[2],i[3],h,o)},LK=function(){function e(t,r,i,a,u,h){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=a,this.index=u,this.data=h}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Ed],r=(r<<Sw)+(t&Ew),this.data[r];if(t<=65535)return r=this.index[vk+(t-55296>>Ed)],r=(r<<Sw)+(t&Ew),this.data[r];if(t<this.highStart)return r=SK-EK+(t>>$B),r=this.index[r],r+=t>>Ed&FK,r=this.index[r],r=(r<<Sw)+(t&Ew),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),y4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",MK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var V0=0;V0<y4.length;V0++)MK[y4.charCodeAt(V0)]=V0;var kK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",v4=50,UK=1,_k=2,wk=3,RK=4,NK=5,_4=7,xk=8,w4=9,hh=10,Ob=11,x4=12,zb=13,DK=14,Tm=15,Hb=16,K0=17,ym=18,QK=19,b4=20,jb=21,vm=22,Iw=23,_f=24,Al=25,Pm=26,Lm=27,wf=28,OK=29,ud=30,zK=31,G0=32,$0=33,Vb=34,Kb=35,Gb=36,Eg=37,$b=38,Ny=39,Dy=40,Fw=41,bk=42,HK=43,jK=[9001,65288],Bk="!",Rn="×",q0="÷",qb=PK(kK),nu=[ud,Gb],Wb=[UK,_k,wk,NK],Ck=[hh,xk],B4=[Lm,Pm],VK=Wb.concat(Ck),C4=[$b,Ny,Dy,Vb,Kb],KK=[Tm,zb],GK=function(e,t){t===void 0&&(t="strict");var r=[],i=[],a=[];return e.forEach(function(u,h){var o=qb.get(u);if(o>v4?(a.push(!0),o-=v4):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(u)!==-1)return i.push(h),r.push(Hb);if(o===RK||o===Ob){if(h===0)return i.push(h),r.push(ud);var g=r[h-1];return VK.indexOf(g)===-1?(i.push(i[h-1]),r.push(g)):(i.push(h),r.push(ud))}if(i.push(h),o===zK)return r.push(t==="strict"?jb:Eg);if(o===bk||o===OK)return r.push(ud);if(o===HK)return u>=131072&&u<=196605||u>=196608&&u<=262141?r.push(Eg):r.push(ud);r.push(o)}),[i,r,a]},Tw=function(e,t,r,i){var a=i[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var u=r;u<=i.length;){u++;var h=i[u];if(h===t)return!0;if(h!==hh)break}if(a===hh)for(var u=r;u>0;){u--;var o=i[u];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var g=r;g<=i.length;){g++;var h=i[g];if(h===t)return!0;if(h!==hh)break}if(o!==hh)break}return!1},S4=function(e,t){for(var r=e;r>=0;){var i=t[r];if(i===hh)r--;else return i}return 0},$K=function(e,t,r,i,a){if(r[i]===0)return Rn;var u=i-1;if(Array.isArray(a)&&a[u]===!0)return Rn;var h=u-1,o=u+1,g=t[u],w=h>=0?t[h]:0,B=t[o];if(g===_k&&B===wk)return Rn;if(Wb.indexOf(g)!==-1)return Bk;if(Wb.indexOf(B)!==-1||Ck.indexOf(B)!==-1)return Rn;if(S4(u,t)===xk)return q0;if(qb.get(e[u])===Ob||(g===G0||g===$0)&&qb.get(e[o])===Ob||g===_4||B===_4||g===w4||[hh,zb,Tm].indexOf(g)===-1&&B===w4||[K0,ym,QK,_f,wf].indexOf(B)!==-1||S4(u,t)===vm||Tw(Iw,vm,u,t)||Tw([K0,ym],jb,u,t)||Tw(x4,x4,u,t))return Rn;if(g===hh)return q0;if(g===Iw||B===Iw)return Rn;if(B===Hb||g===Hb)return q0;if([zb,Tm,jb].indexOf(B)!==-1||g===DK||w===Gb&&KK.indexOf(g)!==-1||g===wf&&B===Gb||B===b4||nu.indexOf(B)!==-1&&g===Al||nu.indexOf(g)!==-1&&B===Al||g===Lm&&[Eg,G0,$0].indexOf(B)!==-1||[Eg,G0,$0].indexOf(g)!==-1&&B===Pm||nu.indexOf(g)!==-1&&B4.indexOf(B)!==-1||B4.indexOf(g)!==-1&&nu.indexOf(B)!==-1||[Lm,Pm].indexOf(g)!==-1&&(B===Al||[vm,Tm].indexOf(B)!==-1&&t[o+1]===Al)||[vm,Tm].indexOf(g)!==-1&&B===Al||g===Al&&[Al,wf,_f].indexOf(B)!==-1)return Rn;if([Al,wf,_f,K0,ym].indexOf(B)!==-1)for(var I=u;I>=0;){var P=t[I];if(P===Al)return Rn;if([wf,_f].indexOf(P)!==-1)I--;else break}if([Lm,Pm].indexOf(B)!==-1)for(var I=[K0,ym].indexOf(g)!==-1?h:u;I>=0;){var P=t[I];if(P===Al)return Rn;if([wf,_f].indexOf(P)!==-1)I--;else break}if($b===g&&[$b,Ny,Vb,Kb].indexOf(B)!==-1||[Ny,Vb].indexOf(g)!==-1&&[Ny,Dy].indexOf(B)!==-1||[Dy,Kb].indexOf(g)!==-1&&B===Dy||C4.indexOf(g)!==-1&&[b4,Pm].indexOf(B)!==-1||C4.indexOf(B)!==-1&&g===Lm||nu.indexOf(g)!==-1&&nu.indexOf(B)!==-1||g===_f&&nu.indexOf(B)!==-1||nu.concat(Al).indexOf(g)!==-1&&B===vm&&jK.indexOf(e[o])===-1||nu.concat(Al).indexOf(B)!==-1&&g===ym)return Rn;if(g===Fw&&B===Fw){for(var b=r[u],N=1;b>0&&(b--,t[b]===Fw);)N++;if(N%2!==0)return Rn}return g===G0&&B===$0?Rn:q0},qK=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=GK(e,t.lineBreak),i=r[0],a=r[1],u=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[Al,ud,bk].indexOf(o)!==-1?Eg:o}));var h=t.wordBreak==="keep-all"?u.map(function(o,g){return o&&e[g]>=19968&&e[g]<=40959}):void 0;return[i,a,h]},WK=function(){function e(t,r,i,a){this.codePoints=t,this.required=r===Bk,this.start=i,this.end=a}return e.prototype.slice=function(){return Es.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),ZK=function(e,t){var r=k1(e),i=qK(r,t),a=i[0],u=i[1],h=i[2],o=r.length,g=0,w=0;return{next:function(){if(w>=o)return{done:!0,value:null};for(var B=Rn;w<o&&(B=$K(r,u,a,++w,h))===Rn;);if(B!==Rn||w===o){var I=new WK(r,B,g,w);return g=w,{value:I,done:!1}}return{done:!0,value:null}}}},XK=1,YK=2,Vg=4,E4=8,kv=10,I4=47,Wm=92,JK=9,eG=32,W0=34,_m=61,tG=35,rG=36,nG=37,Z0=39,X0=40,wm=41,iG=95,La=45,sG=33,oG=60,aG=62,lG=64,AG=91,cG=93,uG=61,hG=123,Y0=63,dG=125,F4=124,fG=126,pG=128,T4=65533,Pw=42,gd=43,mG=44,gG=58,yG=59,Ig=46,vG=0,_G=8,wG=11,xG=14,bG=31,BG=127,cc=-1,Sk=48,Ek=97,Ik=101,CG=102,SG=117,EG=122,Fk=65,Tk=69,Pk=70,IG=85,FG=90,Yo=function(e){return e>=Sk&&e<=57},TG=function(e){return e>=55296&&e<=57343},xf=function(e){return Yo(e)||e>=Fk&&e<=Pk||e>=Ek&&e<=CG},PG=function(e){return e>=Ek&&e<=EG},LG=function(e){return e>=Fk&&e<=FG},MG=function(e){return PG(e)||LG(e)},kG=function(e){return e>=pG},J0=function(e){return e===kv||e===JK||e===eG},Uv=function(e){return MG(e)||kG(e)||e===iG},P4=function(e){return Uv(e)||Yo(e)||e===La},UG=function(e){return e>=vG&&e<=_G||e===wG||e>=xG&&e<=bG||e===BG},th=function(e,t){return e!==Wm?!1:t!==kv},ey=function(e,t,r){return e===La?Uv(t)||th(t,r):Uv(e)?!0:!!(e===Wm&&th(e,t))},Lw=function(e,t,r){return e===gd||e===La?Yo(t)?!0:t===Ig&&Yo(r):Yo(e===Ig?t:e)},RG=function(e){var t=0,r=1;(e[t]===gd||e[t]===La)&&(e[t]===La&&(r=-1),t++);for(var i=[];Yo(e[t]);)i.push(e[t++]);var a=i.length?parseInt(Es.apply(void 0,i),10):0;e[t]===Ig&&t++;for(var u=[];Yo(e[t]);)u.push(e[t++]);var h=u.length,o=h?parseInt(Es.apply(void 0,u),10):0;(e[t]===Tk||e[t]===Ik)&&t++;var g=1;(e[t]===gd||e[t]===La)&&(e[t]===La&&(g=-1),t++);for(var w=[];Yo(e[t]);)w.push(e[t++]);var B=w.length?parseInt(Es.apply(void 0,w),10):0;return r*(a+o*Math.pow(10,-h))*Math.pow(10,g*B)},NG={type:2},DG={type:3},QG={type:4},OG={type:13},zG={type:8},HG={type:21},jG={type:9},VG={type:10},KG={type:11},GG={type:12},$G={type:14},ty={type:23},qG={type:1},WG={type:25},ZG={type:24},XG={type:26},YG={type:27},JG={type:28},e$={type:29},t$={type:31},Zb={type:32},Lk=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(k1(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==Zb;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case W0:return this.consumeStringToken(W0);case tG:var r=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(P4(r)||th(i,a)){var u=ey(r,i,a)?YK:XK,h=this.consumeName();return{type:5,value:h,flags:u}}break;case rG:if(this.peekCodePoint(0)===_m)return this.consumeCodePoint(),OG;break;case Z0:return this.consumeStringToken(Z0);case X0:return NG;case wm:return DG;case Pw:if(this.peekCodePoint(0)===_m)return this.consumeCodePoint(),$G;break;case gd:if(Lw(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case mG:return QG;case La:var o=t,g=this.peekCodePoint(0),w=this.peekCodePoint(1);if(Lw(o,g,w))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(ey(o,g,w))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(g===La&&w===aG)return this.consumeCodePoint(),this.consumeCodePoint(),ZG;break;case Ig:if(Lw(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case I4:if(this.peekCodePoint(0)===Pw)for(this.consumeCodePoint();;){var B=this.consumeCodePoint();if(B===Pw&&(B=this.consumeCodePoint(),B===I4))return this.consumeToken();if(B===cc)return this.consumeToken()}break;case gG:return XG;case yG:return YG;case oG:if(this.peekCodePoint(0)===sG&&this.peekCodePoint(1)===La&&this.peekCodePoint(2)===La)return this.consumeCodePoint(),this.consumeCodePoint(),WG;break;case lG:var I=this.peekCodePoint(0),P=this.peekCodePoint(1),b=this.peekCodePoint(2);if(ey(I,P,b)){var h=this.consumeName();return{type:7,value:h}}break;case AG:return JG;case Wm:if(th(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case cG:return e$;case uG:if(this.peekCodePoint(0)===_m)return this.consumeCodePoint(),zG;break;case hG:return KG;case dG:return GG;case SG:case IG:var N=this.peekCodePoint(0),k=this.peekCodePoint(1);return N===gd&&(xf(k)||k===Y0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case F4:if(this.peekCodePoint(0)===_m)return this.consumeCodePoint(),jG;if(this.peekCodePoint(0)===F4)return this.consumeCodePoint(),HG;break;case fG:if(this.peekCodePoint(0)===_m)return this.consumeCodePoint(),VG;break;case cc:return Zb}return J0(t)?(this.consumeWhiteSpace(),t$):Yo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Uv(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Es(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();xf(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var i=!1;r===Y0&&t.length<6;)t.push(r),r=this.consumeCodePoint(),i=!0;if(i){var a=parseInt(Es.apply(void 0,t.map(function(g){return g===Y0?Sk:g})),16),u=parseInt(Es.apply(void 0,t.map(function(g){return g===Y0?Pk:g})),16);return{type:30,start:a,end:u}}var h=parseInt(Es.apply(void 0,t),16);if(this.peekCodePoint(0)===La&&xf(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];xf(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var u=parseInt(Es.apply(void 0,o),16);return{type:30,start:h,end:u}}else return{type:30,start:h,end:h}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===X0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===X0?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===cc)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Z0||r===W0){var i=this.consumeStringToken(this.consumeCodePoint());return i.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===cc||this.peekCodePoint(0)===wm)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),ty)}for(;;){var a=this.consumeCodePoint();if(a===cc||a===wm)return{type:22,value:Es.apply(void 0,t)};if(J0(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===cc||this.peekCodePoint(0)===wm?(this.consumeCodePoint(),{type:22,value:Es.apply(void 0,t)}):(this.consumeBadUrlRemnants(),ty);if(a===W0||a===Z0||a===X0||UG(a))return this.consumeBadUrlRemnants(),ty;if(a===Wm)if(th(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ty;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;J0(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===wm||t===cc)return;th(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,i="";t>0;){var a=Math.min(r,t);i+=Es.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),i},e.prototype.consumeStringToken=function(t){var r="",i=0;do{var a=this._value[i];if(a===cc||a===void 0||a===t)return r+=this.consumeStringSlice(i),{type:0,value:r};if(a===kv)return this._value.splice(0,i),qG;if(a===Wm){var u=this._value[i+1];u!==cc&&u!==void 0&&(u===kv?(r+=this.consumeStringSlice(i),i=-1,this._value.shift()):th(a,u)&&(r+=this.consumeStringSlice(i),r+=Es(this.consumeEscapedCodePoint()),i=-1))}i++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=Vg,i=this.peekCodePoint(0);for((i===gd||i===La)&&t.push(this.consumeCodePoint());Yo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(i===Ig&&Yo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=E4;Yo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),a=this.peekCodePoint(1);var u=this.peekCodePoint(2);if((i===Tk||i===Ik)&&((a===gd||a===La)&&Yo(u)||Yo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=E4;Yo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[RG(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],i=t[1],a=this.peekCodePoint(0),u=this.peekCodePoint(1),h=this.peekCodePoint(2);if(ey(a,u,h)){var o=this.consumeName();return{type:15,number:r,flags:i,unit:o}}return a===nG?(this.consumeCodePoint(),{type:16,number:r,flags:i}):{type:17,number:r,flags:i}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(xf(t)){for(var r=Es(t);xf(this.peekCodePoint(0))&&r.length<6;)r+=Es(this.consumeCodePoint());J0(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(r,16);return i===0||TG(i)||i>1114111?T4:i}return t===cc?T4:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(P4(r))t+=Es(r);else if(th(r,this.peekCodePoint(0)))t+=Es(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),Mk=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new Lk;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},i=this.consumeToken();;){if(i.type===32||n$(i,t))return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue()),i=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(i.type===32||i.type===3)return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?Zb:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),Kg=function(e){return e.type===15},Qp=function(e){return e.type===17},di=function(e){return e.type===20},r$=function(e){return e.type===0},Xb=function(e,t){return di(e)&&e.value===t},kk=function(e){return e.type!==31},Pp=function(e){return e.type!==31&&e.type!==4},Ec=function(e){var t=[],r=[];return e.forEach(function(i){if(i.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}i.type!==31&&r.push(i)}),r.length&&t.push(r),t},n$=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Mh=function(e){return e.type===17||e.type===15},js=function(e){return e.type===16||Mh(e)},Uk=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},So={type:17,number:0,flags:Vg},qB={type:16,number:50,flags:Vg},dh={type:16,number:100,flags:Vg},Mm=function(e,t,r){var i=e[0],a=e[1];return[Ei(i,t),Ei(typeof a<"u"?a:i,r)]},Ei=function(e,t){if(e.type===16)return e.number/100*t;if(Kg(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Rk="deg",Nk="grad",Dk="rad",Qk="turn",U1={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Rk:return Math.PI*t.number/180;case Nk:return Math.PI/200*t.number;case Dk:return t.number;case Qk:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},Ok=function(e){return e.type===15&&(e.unit===Rk||e.unit===Nk||e.unit===Dk||e.unit===Qk)},zk=function(e){var t=e.filter(di).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[So,So];case"to top":case"bottom":return Vl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[So,dh];case"to right":case"left":return Vl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[dh,dh];case"to bottom":case"top":return Vl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[dh,So];case"to left":case"right":return Vl(270)}return 0},Vl=function(e){return Math.PI*e/180},Eh={name:"color",parse:function(e,t){if(t.type===18){var r=i$[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var i=t.value.substring(0,1),a=t.value.substring(1,2),u=t.value.substring(2,3);return fh(parseInt(i+i,16),parseInt(a+a,16),parseInt(u+u,16),1)}if(t.value.length===4){var i=t.value.substring(0,1),a=t.value.substring(1,2),u=t.value.substring(2,3),h=t.value.substring(3,4);return fh(parseInt(i+i,16),parseInt(a+a,16),parseInt(u+u,16),parseInt(h+h,16)/255)}if(t.value.length===6){var i=t.value.substring(0,2),a=t.value.substring(2,4),u=t.value.substring(4,6);return fh(parseInt(i,16),parseInt(a,16),parseInt(u,16),1)}if(t.value.length===8){var i=t.value.substring(0,2),a=t.value.substring(2,4),u=t.value.substring(4,6),h=t.value.substring(6,8);return fh(parseInt(i,16),parseInt(a,16),parseInt(u,16),parseInt(h,16)/255)}}if(t.type===20){var o=pu[t.value.toUpperCase()];if(typeof o<"u")return o}return pu.TRANSPARENT}},Ih=function(e){return(255&e)===0},go=function(e){var t=255&e,r=255&e>>8,i=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+i+","+r+","+t/255+")":"rgb("+a+","+i+","+r+")"},fh=function(e,t,r,i){return(e<<24|t<<16|r<<8|Math.round(i*255)<<0)>>>0},L4=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},M4=function(e,t){var r=t.filter(Pp);if(r.length===3){var i=r.map(L4),a=i[0],u=i[1],h=i[2];return fh(a,u,h,1)}if(r.length===4){var o=r.map(L4),a=o[0],u=o[1],h=o[2],g=o[3];return fh(a,u,h,g)}return 0};function Mw(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var k4=function(e,t){var r=t.filter(Pp),i=r[0],a=r[1],u=r[2],h=r[3],o=(i.type===17?Vl(i.number):U1.parse(e,i))/(Math.PI*2),g=js(a)?a.number/100:0,w=js(u)?u.number/100:0,B=typeof h<"u"&&js(h)?Ei(h,1):1;if(g===0)return fh(w*255,w*255,w*255,1);var I=w<=.5?w*(g+1):w+g-w*g,P=w*2-I,b=Mw(P,I,o+1/3),N=Mw(P,I,o),k=Mw(P,I,o-1/3);return fh(b*255,N*255,k*255,B)},i$={hsl:k4,hsla:k4,rgb:M4,rgba:M4},Zm=function(e,t){return Eh.parse(e,Mk.create(t).parseComponentValue())},pu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},s$={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(di(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},o$={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},R1=function(e,t){var r=Eh.parse(e,t[0]),i=t[1];return i&&js(i)?{color:r,stop:i}:{color:r,stop:null}},U4=function(e,t){var r=e[0],i=e[e.length-1];r.stop===null&&(r.stop=So),i.stop===null&&(i.stop=dh);for(var a=[],u=0,h=0;h<e.length;h++){var o=e[h].stop;if(o!==null){var g=Ei(o,t);g>u?a.push(g):a.push(u),u=g}else a.push(null)}for(var w=null,h=0;h<a.length;h++){var B=a[h];if(B===null)w===null&&(w=h);else if(w!==null){for(var I=h-w,P=a[w-1],b=(B-P)/(I+1),N=1;N<=I;N++)a[w+N-1]=b*N;w=null}}return e.map(function(k,H){var U=k.color;return{color:U,stop:Math.max(Math.min(1,a[H]/t),0)}})},a$=function(e,t,r){var i=t/2,a=r/2,u=Ei(e[0],t)-i,h=a-Ei(e[1],r);return(Math.atan2(h,u)+Math.PI*2)%(Math.PI*2)},l$=function(e,t,r){var i=typeof e=="number"?e:a$(e,t,r),a=Math.abs(t*Math.sin(i))+Math.abs(r*Math.cos(i)),u=t/2,h=r/2,o=a/2,g=Math.sin(i-Math.PI/2)*o,w=Math.cos(i-Math.PI/2)*o;return[a,u-w,u+w,h-g,h+g]},xA=function(e,t){return Math.sqrt(e*e+t*t)},R4=function(e,t,r,i,a){var u=[[0,0],[0,t],[e,0],[e,t]];return u.reduce(function(h,o){var g=o[0],w=o[1],B=xA(r-g,i-w);return(a?B<h.optimumDistance:B>h.optimumDistance)?{optimumCorner:o,optimumDistance:B}:h},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},A$=function(e,t,r,i,a){var u=0,h=0;switch(e.size){case 0:e.shape===0?u=h=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-a)):e.shape===1&&(u=Math.min(Math.abs(t),Math.abs(t-i)),h=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)u=h=Math.min(xA(t,r),xA(t,r-a),xA(t-i,r),xA(t-i,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-i)),g=R4(i,a,t,r,!0),w=g[0],B=g[1];u=xA(w-t,(B-r)/o),h=o*u}break;case 1:e.shape===0?u=h=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-a)):e.shape===1&&(u=Math.max(Math.abs(t),Math.abs(t-i)),h=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)u=h=Math.max(xA(t,r),xA(t,r-a),xA(t-i,r),xA(t-i,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-i)),I=R4(i,a,t,r,!1),w=I[0],B=I[1];u=xA(w-t,(B-r)/o),h=o*u}break}return Array.isArray(e.size)&&(u=Ei(e.size[0],i),h=e.size.length===2?Ei(e.size[1],a):u),[u,h]},c$=function(e,t){var r=Vl(180),i=[];return Ec(t).forEach(function(a,u){if(u===0){var h=a[0];if(h.type===20&&h.value==="to"){r=zk(a);return}else if(Ok(h)){r=U1.parse(e,h);return}}var o=R1(e,a);i.push(o)}),{angle:r,stops:i,type:1}},ry=function(e,t){var r=Vl(180),i=[];return Ec(t).forEach(function(a,u){if(u===0){var h=a[0];if(h.type===20&&["top","left","right","bottom"].indexOf(h.value)!==-1){r=zk(a);return}else if(Ok(h)){r=(U1.parse(e,h)+Vl(270))%Vl(360);return}}var o=R1(e,a);i.push(o)}),{angle:r,stops:i,type:1}},u$=function(e,t){var r=Vl(180),i=[],a=1,u=0,h=3,o=[];return Ec(t).forEach(function(g,w){var B=g[0];if(w===0){if(di(B)&&B.value==="linear"){a=1;return}else if(di(B)&&B.value==="radial"){a=2;return}}if(B.type===18){if(B.name==="from"){var I=Eh.parse(e,B.values[0]);i.push({stop:So,color:I})}else if(B.name==="to"){var I=Eh.parse(e,B.values[0]);i.push({stop:dh,color:I})}else if(B.name==="color-stop"){var P=B.values.filter(Pp);if(P.length===2){var I=Eh.parse(e,P[1]),b=P[0];Qp(b)&&i.push({stop:{type:16,number:b.number*100,flags:b.flags},color:I})}}}}),a===1?{angle:(r+Vl(180))%Vl(360),stops:i,type:a}:{size:h,shape:u,stops:i,position:o,type:a}},Hk="closest-side",jk="farthest-side",Vk="closest-corner",Kk="farthest-corner",Gk="circle",$k="ellipse",qk="cover",Wk="contain",h$=function(e,t){var r=0,i=3,a=[],u=[];return Ec(t).forEach(function(h,o){var g=!0;if(o===0){var w=!1;g=h.reduce(function(I,P){if(w)if(di(P))switch(P.value){case"center":return u.push(qB),I;case"top":case"left":return u.push(So),I;case"right":case"bottom":return u.push(dh),I}else(js(P)||Mh(P))&&u.push(P);else if(di(P))switch(P.value){case Gk:return r=0,!1;case $k:return r=1,!1;case"at":return w=!0,!1;case Hk:return i=0,!1;case qk:case jk:return i=1,!1;case Wk:case Vk:return i=2,!1;case Kk:return i=3,!1}else if(Mh(P)||js(P))return Array.isArray(i)||(i=[]),i.push(P),!1;return I},g)}if(g){var B=R1(e,h);a.push(B)}}),{size:i,shape:r,stops:a,position:u,type:2}},ny=function(e,t){var r=0,i=3,a=[],u=[];return Ec(t).forEach(function(h,o){var g=!0;if(o===0?g=h.reduce(function(B,I){if(di(I))switch(I.value){case"center":return u.push(qB),!1;case"top":case"left":return u.push(So),!1;case"right":case"bottom":return u.push(dh),!1}else if(js(I)||Mh(I))return u.push(I),!1;return B},g):o===1&&(g=h.reduce(function(B,I){if(di(I))switch(I.value){case Gk:return r=0,!1;case $k:return r=1,!1;case Wk:case Hk:return i=0,!1;case jk:return i=1,!1;case Vk:return i=2,!1;case qk:case Kk:return i=3,!1}else if(Mh(I)||js(I))return Array.isArray(i)||(i=[]),i.push(I),!1;return B},g)),g){var w=R1(e,h);a.push(w)}}),{size:i,shape:r,stops:a,position:u,type:2}},d$=function(e){return e.type===1},f$=function(e){return e.type===2},WB={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var i=Zk[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function p$(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Zk[e.name])}var Zk={"linear-gradient":c$,"-moz-linear-gradient":ry,"-ms-linear-gradient":ry,"-o-linear-gradient":ry,"-webkit-linear-gradient":ry,"radial-gradient":h$,"-moz-radial-gradient":ny,"-ms-radial-gradient":ny,"-o-radial-gradient":ny,"-webkit-radial-gradient":ny,"-webkit-gradient":u$},m$={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(i){return Pp(i)&&p$(i)}).map(function(i){return WB.parse(e,i)})}},g$={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(di(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},y$={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Ec(t).map(function(r){return r.filter(js)}).map(Uk)}},v$={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Ec(t).map(function(r){return r.filter(di).map(function(i){return i.value}).join(" ")}).map(_$)}},_$=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ap;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(ap||(ap={}));var w$={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Ec(t).map(function(r){return r.filter(x$)})}},x$=function(e){return di(e)||js(e)},N1=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},b$=N1("top"),B$=N1("right"),C$=N1("bottom"),S$=N1("left"),D1=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Uk(r.filter(js))}}},E$=D1("top-left"),I$=D1("top-right"),F$=D1("bottom-right"),T$=D1("bottom-left"),Q1=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},P$=Q1("top"),L$=Q1("right"),M$=Q1("bottom"),k$=Q1("left"),O1=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return Kg(r)?r.number:0}}},U$=O1("top"),R$=O1("right"),N$=O1("bottom"),D$=O1("left"),Q$={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},O$={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},z$={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(di).reduce(function(r,i){return r|H$(i.value)},0)}},H$=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},j$={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},V$={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Rv;(function(e){e.NORMAL="normal",e.STRICT="strict"})(Rv||(Rv={}));var K$={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return Rv.STRICT;case"normal":default:return Rv.NORMAL}}},G$={name:"line-height",initialValue:"normal",prefix:!1,type:4},N4=function(e,t){return di(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:js(e)?Ei(e,t):t},$$={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:WB.parse(e,t)}},q$={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},Yb={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},z1=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},W$=z1("top"),Z$=z1("right"),X$=z1("bottom"),Y$=z1("left"),J$={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(di).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},eq={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},H1=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},tq=H1("top"),rq=H1("right"),nq=H1("bottom"),iq=H1("left"),sq={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},oq={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},aq={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&Xb(t[0],"none")?[]:Ec(t).map(function(r){for(var i={color:pu.TRANSPARENT,offsetX:So,offsetY:So,blur:So},a=0,u=0;u<r.length;u++){var h=r[u];Mh(h)?(a===0?i.offsetX=h:a===1?i.offsetY=h:i.blur=h,a++):i.color=Eh.parse(e,h)}return i})}},lq={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Aq={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=hq[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},cq=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},uq=function(e){var t=e.filter(function(g){return g.type===17}).map(function(g){return g.number}),r=t[0],i=t[1];t[2],t[3];var a=t[4],u=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var h=t[12],o=t[13];return t[14],t[15],t.length===16?[r,i,a,u,h,o]:null},hq={matrix:cq,matrix3d:uq},D4={type:16,number:50,flags:Vg},dq=[D4,D4],fq={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(js);return r.length!==2?dq:[r[0],r[1]]}},pq={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Xm;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Xm||(Xm={}));var mq={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Xm.BREAK_ALL;case"keep-all":return Xm.KEEP_ALL;case"normal":default:return Xm.NORMAL}}},gq={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Qp(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Xk={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},yq={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Qp(t)?t.number:1}},vq={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_q={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(di).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},wq={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],i=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:i.push(r.join(" ")),r.length=0;break}}),r.length&&i.push(r.join(" ")),i.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},xq={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},bq={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Qp(t))return t.number;if(di(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Bq={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(di).map(function(r){return r.value})}},Cq={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},so=function(e,t){return(e&t)!==0},Sq={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},Eq={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var i=[],a=t.filter(kk),u=0;u<a.length;u++){var h=a[u],o=a[u+1];if(h.type===20){var g=o&&Qp(o)?o.number:1;i.push({counter:h.value,increment:g})}}return i}},Iq={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],i=t.filter(kk),a=0;a<i.length;a++){var u=i[a],h=i[a+1];if(di(u)&&u.value!=="none"){var o=h&&Qp(h)?h.number:0;r.push({counter:u.value,reset:o})}}return r}},Fq={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Kg).map(function(r){return Xk.parse(e,r)})}},Tq={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var i=[],a=t.filter(r$);if(a.length%2!==0)return null;for(var u=0;u<a.length;u+=2){var h=a[u].value,o=a[u+1].value;i.push({open:h,close:o})}return i}},Q4=function(e,t,r){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?r?i.open:i.close:""},Pq={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&Xb(t[0],"none")?[]:Ec(t).map(function(r){for(var i={color:255,offsetX:So,offsetY:So,blur:So,spread:So,inset:!1},a=0,u=0;u<r.length;u++){var h=r[u];Xb(h,"inset")?i.inset=!0:Mh(h)?(a===0?i.offsetX=h:a===1?i.offsetY=h:a===2?i.blur=h:i.spread=h,a++):i.color=Eh.parse(e,h)}return i})}},Lq={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],i=[];return t.filter(di).forEach(function(a){switch(a.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2);break}}),r.forEach(function(a){i.indexOf(a)===-1&&i.push(a)}),i}},Mq={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},kq={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Kg(t)?t.number:0}},Uq=function(){function e(t,r){var i,a;this.animationDuration=Cr(t,Fq,r.animationDuration),this.backgroundClip=Cr(t,s$,r.backgroundClip),this.backgroundColor=Cr(t,o$,r.backgroundColor),this.backgroundImage=Cr(t,m$,r.backgroundImage),this.backgroundOrigin=Cr(t,g$,r.backgroundOrigin),this.backgroundPosition=Cr(t,y$,r.backgroundPosition),this.backgroundRepeat=Cr(t,v$,r.backgroundRepeat),this.backgroundSize=Cr(t,w$,r.backgroundSize),this.borderTopColor=Cr(t,b$,r.borderTopColor),this.borderRightColor=Cr(t,B$,r.borderRightColor),this.borderBottomColor=Cr(t,C$,r.borderBottomColor),this.borderLeftColor=Cr(t,S$,r.borderLeftColor),this.borderTopLeftRadius=Cr(t,E$,r.borderTopLeftRadius),this.borderTopRightRadius=Cr(t,I$,r.borderTopRightRadius),this.borderBottomRightRadius=Cr(t,F$,r.borderBottomRightRadius),this.borderBottomLeftRadius=Cr(t,T$,r.borderBottomLeftRadius),this.borderTopStyle=Cr(t,P$,r.borderTopStyle),this.borderRightStyle=Cr(t,L$,r.borderRightStyle),this.borderBottomStyle=Cr(t,M$,r.borderBottomStyle),this.borderLeftStyle=Cr(t,k$,r.borderLeftStyle),this.borderTopWidth=Cr(t,U$,r.borderTopWidth),this.borderRightWidth=Cr(t,R$,r.borderRightWidth),this.borderBottomWidth=Cr(t,N$,r.borderBottomWidth),this.borderLeftWidth=Cr(t,D$,r.borderLeftWidth),this.boxShadow=Cr(t,Pq,r.boxShadow),this.color=Cr(t,Q$,r.color),this.direction=Cr(t,O$,r.direction),this.display=Cr(t,z$,r.display),this.float=Cr(t,j$,r.cssFloat),this.fontFamily=Cr(t,wq,r.fontFamily),this.fontSize=Cr(t,xq,r.fontSize),this.fontStyle=Cr(t,Cq,r.fontStyle),this.fontVariant=Cr(t,Bq,r.fontVariant),this.fontWeight=Cr(t,bq,r.fontWeight),this.letterSpacing=Cr(t,V$,r.letterSpacing),this.lineBreak=Cr(t,K$,r.lineBreak),this.lineHeight=Cr(t,G$,r.lineHeight),this.listStyleImage=Cr(t,$$,r.listStyleImage),this.listStylePosition=Cr(t,q$,r.listStylePosition),this.listStyleType=Cr(t,Yb,r.listStyleType),this.marginTop=Cr(t,W$,r.marginTop),this.marginRight=Cr(t,Z$,r.marginRight),this.marginBottom=Cr(t,X$,r.marginBottom),this.marginLeft=Cr(t,Y$,r.marginLeft),this.opacity=Cr(t,yq,r.opacity);var u=Cr(t,J$,r.overflow);this.overflowX=u[0],this.overflowY=u[u.length>1?1:0],this.overflowWrap=Cr(t,eq,r.overflowWrap),this.paddingTop=Cr(t,tq,r.paddingTop),this.paddingRight=Cr(t,rq,r.paddingRight),this.paddingBottom=Cr(t,nq,r.paddingBottom),this.paddingLeft=Cr(t,iq,r.paddingLeft),this.paintOrder=Cr(t,Lq,r.paintOrder),this.position=Cr(t,oq,r.position),this.textAlign=Cr(t,sq,r.textAlign),this.textDecorationColor=Cr(t,vq,(i=r.textDecorationColor)!==null&&i!==void 0?i:r.color),this.textDecorationLine=Cr(t,_q,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Cr(t,aq,r.textShadow),this.textTransform=Cr(t,lq,r.textTransform),this.transform=Cr(t,Aq,r.transform),this.transformOrigin=Cr(t,fq,r.transformOrigin),this.visibility=Cr(t,pq,r.visibility),this.webkitTextStrokeColor=Cr(t,Mq,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Cr(t,kq,r.webkitTextStrokeWidth),this.wordBreak=Cr(t,mq,r.wordBreak),this.zIndex=Cr(t,gq,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Ih(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return so(this.display,4)||so(this.display,33554432)||so(this.display,268435456)||so(this.display,536870912)||so(this.display,67108864)||so(this.display,134217728)},e}(),Rq=function(){function e(t,r){this.content=Cr(t,Sq,r.content),this.quotes=Cr(t,Tq,r.quotes)}return e}(),O4=function(){function e(t,r){this.counterIncrement=Cr(t,Eq,r.counterIncrement),this.counterReset=Cr(t,Iq,r.counterReset)}return e}(),Cr=function(e,t,r){var i=new Lk,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;i.write(a);var u=new Mk(i.read());switch(t.type){case 2:var h=u.parseComponentValue();return t.parse(e,di(h)?h.value:t.initialValue);case 0:return t.parse(e,u.parseComponentValue());case 1:return t.parse(e,u.parseComponentValues());case 4:return u.parseComponentValue();case 3:switch(t.format){case"angle":return U1.parse(e,u.parseComponentValue());case"color":return Eh.parse(e,u.parseComponentValue());case"image":return WB.parse(e,u.parseComponentValue());case"length":var o=u.parseComponentValue();return Mh(o)?o:So;case"length-percentage":var g=u.parseComponentValue();return js(g)?g:So;case"time":return Xk.parse(e,u.parseComponentValue())}break}},Nq="data-html2canvas-debug",Dq=function(e){var t=e.getAttribute(Nq);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Jb=function(e,t){var r=Dq(e);return r===1||t===r},Ic=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,Jb(r,3))debugger;this.styles=new Uq(t,window.getComputedStyle(r,null)),r2(r)&&(this.styles.animationDuration.some(function(i){return i>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=M1(this.context,r),Jb(r,4)&&(this.flags|=16)}return e}(),Qq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",z4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",km=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var iy=0;iy<z4.length;iy++)km[z4.charCodeAt(iy)]=iy;var Oq=function(e){var t=e.length*.75,r=e.length,i,a=0,u,h,o,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var w=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),B=Array.isArray(w)?w:new Uint8Array(w);for(i=0;i<r;i+=4)u=km[e.charCodeAt(i)],h=km[e.charCodeAt(i+1)],o=km[e.charCodeAt(i+2)],g=km[e.charCodeAt(i+3)],B[a++]=u<<2|h>>4,B[a++]=(h&15)<<4|o>>2,B[a++]=(o&3)<<6|g&63;return w},zq=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},Hq=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},Id=5,ZB=11,kw=2,jq=ZB-Id,Yk=65536>>Id,Vq=1<<Id,Uw=Vq-1,Kq=1024>>Id,Gq=Yk+Kq,$q=Gq,qq=32,Wq=$q+qq,Zq=65536>>ZB,Xq=1<<jq,Yq=Xq-1,H4=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Jq=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},eW=function(e,t){var r=Oq(e),i=Array.isArray(r)?Hq(r):new Uint32Array(r),a=Array.isArray(r)?zq(r):new Uint16Array(r),u=24,h=H4(a,u/2,i[4]/2),o=i[5]===2?H4(a,(u+i[4])/2):Jq(i,Math.ceil((u+i[4])/4));return new tW(i[0],i[1],i[2],i[3],h,o)},tW=function(){function e(t,r,i,a,u,h){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=a,this.index=u,this.data=h}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Id],r=(r<<kw)+(t&Uw),this.data[r];if(t<=65535)return r=this.index[Yk+(t-55296>>Id)],r=(r<<kw)+(t&Uw),this.data[r];if(t<this.highStart)return r=Wq-Zq+(t>>ZB),r=this.index[r],r+=t>>Id&Yq,r=this.index[r],r=(r<<kw)+(t&Uw),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),j4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rW=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sy=0;sy<j4.length;sy++)rW[j4.charCodeAt(sy)]=sy;var nW=1,Rw=2,Nw=3,V4=4,K4=5,iW=7,G4=8,Dw=9,Qw=10,$4=11,q4=12,W4=13,Z4=14,Ow=15,sW=function(e){for(var t=[],r=0,i=e.length;r<i;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){var u=e.charCodeAt(r++);(u&64512)===56320?t.push(((a&1023)<<10)+(u&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},oW=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],a=-1,u="";++a<r;){var h=e[a];h<=65535?i.push(h):(h-=65536,i.push((h>>10)+55296,h%1024+56320)),(a+1===r||i.length>16384)&&(u+=String.fromCharCode.apply(String,i),i.length=0)}return u},aW=eW(Qq),Dl="×",zw="÷",lW=function(e){return aW.get(e)},AW=function(e,t,r){var i=r-2,a=t[i],u=t[r-1],h=t[r];if(u===Rw&&h===Nw)return Dl;if(u===Rw||u===Nw||u===V4||h===Rw||h===Nw||h===V4)return zw;if(u===G4&&[G4,Dw,$4,q4].indexOf(h)!==-1||(u===$4||u===Dw)&&(h===Dw||h===Qw)||(u===q4||u===Qw)&&h===Qw||h===W4||h===K4||h===iW||u===nW)return Dl;if(u===W4&&h===Z4){for(;a===K4;)a=t[--i];if(a===Z4)return Dl}if(u===Ow&&h===Ow){for(var o=0;a===Ow;)o++,a=t[--i];if(o%2===0)return Dl}return zw},cW=function(e){var t=sW(e),r=t.length,i=0,a=0,u=t.map(lW);return{next:function(){if(i>=r)return{done:!0,value:null};for(var h=Dl;i<r&&(h=AW(t,u,++i))===Dl;);if(h!==Dl||i===r){var o=oW.apply(null,t.slice(a,i));return a=i,{value:o,done:!1}}return{done:!0,value:null}}}},uW=function(e){for(var t=cW(e),r=[],i;!(i=t.next()).done;)i.value&&r.push(i.value.slice());return r},hW=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height=t+"px",i.style.display="block",e.body.appendChild(i),r.selectNode(i);var a=r.getBoundingClientRect(),u=Math.round(a.height);if(e.body.removeChild(i),u===t)return!0}}return!1},dW=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var i=t.firstChild,a=k1(i.data).map(function(g){return Es(g)}),u=0,h={},o=a.every(function(g,w){r.setStart(i,u),r.setEnd(i,u+g.length);var B=r.getBoundingClientRect();u+=g.length;var I=B.x>h.x||B.y>h.y;return h=B,w===0?!0:I});return e.body.removeChild(t),o},fW=function(){return typeof new Image().crossOrigin<"u"},pW=function(){return typeof new XMLHttpRequest().responseType=="string"},mW=function(e){var t=new Image,r=e.createElement("canvas"),i=r.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},X4=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},gW=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,r,r);var a=new Image,u=t.toDataURL();a.src=u;var h=e2(r,r,0,0,a);return i.fillStyle="red",i.fillRect(0,0,r,r),Y4(h).then(function(o){i.drawImage(o,0,0);var g=i.getImageData(0,0,r,r).data;i.fillStyle="red",i.fillRect(0,0,r,r);var w=e.createElement("div");return w.style.backgroundImage="url("+u+")",w.style.height=r+"px",X4(g)?Y4(e2(r,r,0,0,w)):Promise.reject(!1)}).then(function(o){return i.drawImage(o,0,0),X4(i.getImageData(0,0,r,r).data)}).catch(function(){return!1})},e2=function(e,t,r,i,a){var u="http://www.w3.org/2000/svg",h=document.createElementNS(u,"svg"),o=document.createElementNS(u,"foreignObject");return h.setAttributeNS(null,"width",e.toString()),h.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",i.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),h.appendChild(o),o.appendChild(a),h},Y4=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){return t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Co={get SUPPORT_RANGE_BOUNDS(){var e=hW(document);return Object.defineProperty(Co,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Co.SUPPORT_RANGE_BOUNDS&&dW(document);return Object.defineProperty(Co,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=mW(document);return Object.defineProperty(Co,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?gW(document):Promise.resolve(!1);return Object.defineProperty(Co,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=fW();return Object.defineProperty(Co,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=pW();return Object.defineProperty(Co,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Co,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Co,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ym=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),yW=function(e,t,r,i){var a=wW(t,r),u=[],h=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(Co.SUPPORT_RANGE_BOUNDS){var g=J4(i,h,o.length).getClientRects();if(g.length>1){var w=XB(o),B=0;w.forEach(function(P){u.push(new Ym(P,xu.fromDOMRectList(e,J4(i,B+h,P.length).getClientRects()))),B+=P.length})}else u.push(new Ym(o,xu.fromDOMRectList(e,g)))}else{var I=i.splitText(o.length);u.push(new Ym(o,vW(e,i))),i=I}else Co.SUPPORT_RANGE_BOUNDS||(i=i.splitText(o.length));h+=o.length}),u},vW=function(e,t){var r=t.ownerDocument;if(r){var i=r.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(i,t);var u=M1(e,i);return i.firstChild&&a.replaceChild(i.firstChild,i),u}}return xu.EMPTY},J4=function(e,t,r){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var a=i.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},XB=function(e){if(Co.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return uW(e)},_W=function(e,t){if(Co.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(i){return i.segment})}return bW(e,t)},wW=function(e,t){return t.letterSpacing!==0?XB(e):_W(e,t)},xW=[32,160,4961,65792,65793,4153,4241],bW=function(e,t){for(var r=ZK(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),i=[],a,u=function(){if(a.value){var h=a.value.slice(),o=k1(h),g="";o.forEach(function(w){xW.indexOf(w)===-1?g+=Es(w):(g.length&&i.push(g),i.push(Es(w)),g="")}),g.length&&i.push(g)}};!(a=r.next()).done;)u();return i},BW=function(){function e(t,r,i){this.text=CW(r.data,i.textTransform),this.textBounds=yW(t,this.text,i,r)}return e}(),CW=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(SW,EW);case 2:return e.toUpperCase();default:return e}},SW=/(^|\s|:|-|\(|\))([a-z])/g,EW=function(e,t,r){return e.length>0?t+r.toUpperCase():e},Jk=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.src=i.currentSrc||i.src,a.intrinsicWidth=i.naturalWidth,a.intrinsicHeight=i.naturalHeight,a.context.cache.addImage(a.src),a}return t}(Ic),eU=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.canvas=i,a.intrinsicWidth=i.width,a.intrinsicHeight=i.height,a}return t}(Ic),tU=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this,u=new XMLSerializer,h=M1(r,i);return i.setAttribute("width",h.width+"px"),i.setAttribute("height",h.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(u.serializeToString(i)),a.intrinsicWidth=i.width.baseVal.value,a.intrinsicHeight=i.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(Ic),rU=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.value=i.value,a}return t}(Ic),t2=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.start=i.start,a.reversed=typeof i.reversed=="boolean"&&i.reversed===!0,a}return t}(Ic),IW=[{type:15,flags:0,unit:"px",number:3}],FW=[{type:16,flags:0,number:50}],TW=function(e){return e.width>e.height?new xu(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new xu(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},PW=function(e){var t=e.type===LW?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},Nv="checkbox",Dv="radio",LW="password",eI=707406591,YB=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;switch(a.type=i.type.toLowerCase(),a.checked=i.checked,a.value=PW(i),(a.type===Nv||a.type===Dv)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=TW(a.bounds)),a.type){case Nv:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=IW;break;case Dv:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=FW;break}return a}return t}(Ic),nU=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this,u=i.options[i.selectedIndex||0];return a.value=u&&u.text||"",a}return t}(Ic),iU=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.value=i.value,a}return t}(Ic),sU=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;a.src=i.src,a.width=parseInt(i.width,10)||0,a.height=parseInt(i.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){a.tree=aU(r,i.contentWindow.document.documentElement);var u=i.contentWindow.document.documentElement?Zm(r,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):pu.TRANSPARENT,h=i.contentWindow.document.body?Zm(r,getComputedStyle(i.contentWindow.document.body).backgroundColor):pu.TRANSPARENT;a.backgroundColor=Ih(u)?Ih(h)?a.styles.backgroundColor:h:u}}catch{}return a}return t}(Ic),MW=["OL","UL","MENU"],Qy=function(e,t,r,i){for(var a=t.firstChild,u=void 0;a;a=u)if(u=a.nextSibling,lU(a)&&a.data.trim().length>0)r.textNodes.push(new BW(e,a,r.styles));else if($f(a))if(hU(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return Qy(e,o,r,i)});else{var h=oU(e,a);h.styles.isVisible()&&(kW(a,h,i)?h.flags|=4:UW(h.styles)&&(h.flags|=2),MW.indexOf(a.tagName)!==-1&&(h.flags|=8),r.elements.push(h),a.slot,a.shadowRoot?Qy(e,a.shadowRoot,h,i):!Qv(a)&&!AU(a)&&!Ov(a)&&Qy(e,a,h,i))}},oU=function(e,t){return n2(t)?new Jk(e,t):cU(t)?new eU(e,t):AU(t)?new tU(e,t):RW(t)?new rU(e,t):NW(t)?new t2(e,t):DW(t)?new YB(e,t):Ov(t)?new nU(e,t):Qv(t)?new iU(e,t):uU(t)?new sU(e,t):new Ic(e,t)},aU=function(e,t){var r=oU(e,t);return r.flags|=4,Qy(e,t,r,r),r},kW=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||JB(e)&&r.styles.isTransparent()},UW=function(e){return e.isPositioned()||e.isFloating()},lU=function(e){return e.nodeType===Node.TEXT_NODE},$f=function(e){return e.nodeType===Node.ELEMENT_NODE},r2=function(e){return $f(e)&&typeof e.style<"u"&&!Oy(e)},Oy=function(e){return typeof e.className=="object"},RW=function(e){return e.tagName==="LI"},NW=function(e){return e.tagName==="OL"},DW=function(e){return e.tagName==="INPUT"},QW=function(e){return e.tagName==="HTML"},AU=function(e){return e.tagName==="svg"},JB=function(e){return e.tagName==="BODY"},cU=function(e){return e.tagName==="CANVAS"},tI=function(e){return e.tagName==="VIDEO"},n2=function(e){return e.tagName==="IMG"},uU=function(e){return e.tagName==="IFRAME"},rI=function(e){return e.tagName==="STYLE"},OW=function(e){return e.tagName==="SCRIPT"},Qv=function(e){return e.tagName==="TEXTAREA"},Ov=function(e){return e.tagName==="SELECT"},hU=function(e){return e.tagName==="SLOT"},nI=function(e){return e.tagName.indexOf("-")>0},zW=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(i){return r.counters[i].pop()})},e.prototype.parse=function(t){var r=this,i=t.counterIncrement,a=t.counterReset,u=!0;i!==null&&i.forEach(function(o){var g=r.counters[o.counter];g&&o.increment!==0&&(u=!1,g.length||g.push(1),g[Math.max(0,g.length-1)]+=o.increment)});var h=[];return u&&a.forEach(function(o){var g=r.counters[o.counter];h.push(o.counter),g||(g=r.counters[o.counter]=[]),g.push(o.reset)}),h},e}(),iI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},sI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},HW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},jW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},bf=function(e,t,r,i,a,u){return e<t||e>r?Fg(e,a,u.length>0):i.integers.reduce(function(h,o,g){for(;e>=o;)e-=o,h+=i.values[g];return h},"")+u},dU=function(e,t,r,i){var a="";do r||e--,a=i(e)+a,e/=t;while(e*t>=t);return a},Ss=function(e,t,r,i,a){var u=r-t+1;return(e<0?"-":"")+(dU(Math.abs(e),u,i,function(h){return Es(Math.floor(h%u)+t)})+a)},ad=function(e,t,r){r===void 0&&(r=". ");var i=t.length;return dU(Math.abs(e),i,!1,function(a){return t[Math.floor(a%i)]})+r},Tf=1,Xu=2,Yu=4,Um=8,iu=function(e,t,r,i,a,u){if(e<-9999||e>9999)return Fg(e,4,a.length>0);var h=Math.abs(e),o=a;if(h===0)return t[0]+o;for(var g=0;h>0&&g<=4;g++){var w=h%10;w===0&&so(u,Tf)&&o!==""?o=t[w]+o:w>1||w===1&&g===0||w===1&&g===1&&so(u,Xu)||w===1&&g===1&&so(u,Yu)&&e>100||w===1&&g>1&&so(u,Um)?o=t[w]+(g>0?r[g-1]:"")+o:w===1&&g>0&&(o=r[g-1]+o),h=Math.floor(h/10)}return(e<0?i:"")+o},oI="十百千萬",aI="拾佰仟萬",lI="マイナス",Hw="마이너스",Fg=function(e,t,r){var i=r?". ":"",a=r?"、":"",u=r?", ":"",h=r?" ":"";switch(t){case 0:return"•"+h;case 1:return"◦"+h;case 2:return"◾"+h;case 5:var o=Ss(e,48,57,!0,i);return o.length<4?"0"+o:o;case 4:return ad(e,"〇一二三四五六七八九",a);case 6:return bf(e,1,3999,iI,3,i).toLowerCase();case 7:return bf(e,1,3999,iI,3,i);case 8:return Ss(e,945,969,!1,i);case 9:return Ss(e,97,122,!1,i);case 10:return Ss(e,65,90,!1,i);case 11:return Ss(e,1632,1641,!0,i);case 12:case 49:return bf(e,1,9999,sI,3,i);case 35:return bf(e,1,9999,sI,3,i).toLowerCase();case 13:return Ss(e,2534,2543,!0,i);case 14:case 30:return Ss(e,6112,6121,!0,i);case 15:return ad(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return ad(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return iu(e,"零一二三四五六七八九",oI,"負",a,Xu|Yu|Um);case 47:return iu(e,"零壹貳參肆伍陸柒捌玖",aI,"負",a,Tf|Xu|Yu|Um);case 42:return iu(e,"零一二三四五六七八九",oI,"负",a,Xu|Yu|Um);case 41:return iu(e,"零壹贰叁肆伍陆柒捌玖",aI,"负",a,Tf|Xu|Yu|Um);case 26:return iu(e,"〇一二三四五六七八九","十百千万",lI,a,0);case 25:return iu(e,"零壱弐参四伍六七八九","拾百千万",lI,a,Tf|Xu|Yu);case 31:return iu(e,"영일이삼사오육칠팔구","십백천만",Hw,u,Tf|Xu|Yu);case 33:return iu(e,"零一二三四五六七八九","十百千萬",Hw,u,0);case 32:return iu(e,"零壹貳參四五六七八九","拾百千",Hw,u,Tf|Xu|Yu);case 18:return Ss(e,2406,2415,!0,i);case 20:return bf(e,1,19999,jW,3,i);case 21:return Ss(e,2790,2799,!0,i);case 22:return Ss(e,2662,2671,!0,i);case 22:return bf(e,1,10999,HW,3,i);case 23:return ad(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return ad(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ss(e,3302,3311,!0,i);case 28:return ad(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return ad(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Ss(e,3792,3801,!0,i);case 37:return Ss(e,6160,6169,!0,i);case 38:return Ss(e,4160,4169,!0,i);case 39:return Ss(e,2918,2927,!0,i);case 40:return Ss(e,1776,1785,!0,i);case 43:return Ss(e,3046,3055,!0,i);case 44:return Ss(e,3174,3183,!0,i);case 45:return Ss(e,3664,3673,!0,i);case 46:return Ss(e,3872,3881,!0,i);case 3:default:return Ss(e,48,57,!0,i)}},fU="data-html2canvas-ignore",AI=function(){function e(t,r,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=r,this.counters=new zW,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var i=this,a=VW(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var u=t.defaultView.pageXOffset,h=t.defaultView.pageYOffset,o=a.contentWindow,g=o.document,w=$W(a).then(function(){return ma(i,void 0,void 0,function(){var B,I;return Xo(this,function(P){switch(P.label){case 0:return this.scrolledElements.forEach(XW),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),B=this.options.onclone,I=this.clonedReferenceElement,typeof I>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:g.fonts&&g.fonts.ready?[4,g.fonts.ready]:[3,2];case 1:P.sent(),P.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,GW(g)]:[3,4];case 3:P.sent(),P.label=4;case 4:return typeof B=="function"?[2,Promise.resolve().then(function(){return B(g,I)}).then(function(){return a})]:[2,a]}})})});return g.open(),g.write(WW(document.doctype)+"<html></html>"),ZW(this.referenceElement.ownerDocument,u,h),g.replaceChild(g.adoptNode(this.documentElement),g.documentElement),g.close(),w},e.prototype.createElementClone=function(t){if(Jb(t,2))debugger;if(cU(t))return this.createCanvasClone(t);if(tI(t))return this.createVideoClone(t);if(rI(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return n2(r)&&(n2(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),nI(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return jw(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var i=[].slice.call(r.cssRules,0).reduce(function(u,h){return h&&typeof h.cssText=="string"?u+h.cssText:u},""),a=t.cloneNode(!1);return a.textContent=i,a}}catch(u){if(this.context.logger.error("Unable to access cssRules property",u),u.name!=="SecurityError")throw u}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var u=t.getContext("2d"),h=a.getContext("2d");if(h)if(!this.options.allowTaint&&u)h.putImageData(u.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var g=o.getContextAttributes();(g==null?void 0:g.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}h.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var i=r.getContext("2d");try{return i&&(i.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||i.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,i){(!$f(r)||!OW(r)&&!r.hasAttribute(fU)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!$f(r)||!rI(r))&&t.appendChild(this.cloneNode(r,i))},e.prototype.cloneChildNodes=function(t,r,i){for(var a=this,u=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;u;u=u.nextSibling)if($f(u)&&hU(u)&&typeof u.assignedNodes=="function"){var h=u.assignedNodes();h.length&&h.forEach(function(o){return a.appendChildNode(r,o,i)})}else this.appendChildNode(r,u,i)},e.prototype.cloneNode=function(t,r){if(lU(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&$f(t)&&(r2(t)||Oy(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var u=i.getComputedStyle(t),h=i.getComputedStyle(t,":before"),o=i.getComputedStyle(t,":after");this.referenceElement===t&&r2(a)&&(this.clonedReferenceElement=a),JB(a)&&eZ(a);var g=this.counters.parse(new O4(this.context,u)),w=this.resolvePseudoContent(t,a,h,Jm.BEFORE);nI(t)&&(r=!0),tI(t)||this.cloneChildNodes(t,a,r),w&&a.insertBefore(w,a.firstChild);var B=this.resolvePseudoContent(t,a,o,Jm.AFTER);return B&&a.appendChild(B),this.counters.pop(g),(u&&(this.options.copyStyles||Oy(t))&&!uU(t)||r)&&jw(u,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(Qv(t)||Ov(t))&&(Qv(a)||Ov(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,i,a){var u=this;if(i){var h=i.content,o=r.ownerDocument;if(!(!o||!h||h==="none"||h==="-moz-alt-content"||i.display==="none")){this.counters.parse(new O4(this.context,i));var g=new Rq(this.context,i),w=o.createElement("html2canvaspseudoelement");jw(i,w),g.content.forEach(function(I){if(I.type===0)w.appendChild(o.createTextNode(I.value));else if(I.type===22){var P=o.createElement("img");P.src=I.value,P.style.opacity="1",w.appendChild(P)}else if(I.type===18){if(I.name==="attr"){var b=I.values.filter(di);b.length&&w.appendChild(o.createTextNode(t.getAttribute(b[0].value)||""))}else if(I.name==="counter"){var N=I.values.filter(Pp),k=N[0],H=N[1];if(k&&di(k)){var U=u.counters.getCounterValue(k.value),Q=H&&di(H)?Yb.parse(u.context,H.value):3;w.appendChild(o.createTextNode(Fg(U,Q,!1)))}}else if(I.name==="counters"){var K=I.values.filter(Pp),k=K[0],Z=K[1],H=K[2];if(k&&di(k)){var Ae=u.counters.getCounterValues(k.value),fe=H&&di(H)?Yb.parse(u.context,H.value):3,ge=Z&&Z.type===0?Z.value:"",me=Ae.map(function(re){return Fg(re,fe,!1)}).join(ge);w.appendChild(o.createTextNode(me))}}}else if(I.type===20)switch(I.value){case"open-quote":w.appendChild(o.createTextNode(Q4(g.quotes,u.quoteDepth++,!0)));break;case"close-quote":w.appendChild(o.createTextNode(Q4(g.quotes,--u.quoteDepth,!1)));break;default:w.appendChild(o.createTextNode(I.value))}}),w.className=i2+" "+s2;var B=a===Jm.BEFORE?" "+i2:" "+s2;return Oy(r)?r.className.baseValue+=B:r.className+=B,w}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Jm;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Jm||(Jm={}));var VW=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(fU,"true"),e.body.appendChild(r),r},KW=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},GW=function(e){return Promise.all([].slice.call(e.images,0).map(KW))},$W=function(e){return new Promise(function(t,r){var i=e.contentWindow;if(!i)return r("No window assigned for iframe");var a=i.document;i.onload=e.onload=function(){i.onload=e.onload=null;var u=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(u),t(e))},50)}})},qW=["all","d","content"],jw=function(e,t){for(var r=e.length-1;r>=0;r--){var i=e.item(r);qW.indexOf(i)===-1&&t.style.setProperty(i,e.getPropertyValue(i))}return t},WW=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},ZW=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},XW=function(e){var t=e[0],r=e[1],i=e[2];t.scrollLeft=r,t.scrollTop=i},YW=":before",JW=":after",i2="___html2canvas___pseudoelement_before",s2="___html2canvas___pseudoelement_after",cI=`{
    content: "" !important;
    display: none !important;
}`,eZ=function(e){tZ(e,"."+i2+YW+cI+`
         .`+s2+JW+cI)},tZ=function(e,t){var r=e.ownerDocument;if(r){var i=r.createElement("style");i.textContent=t,e.appendChild(i)}},pU=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),rZ=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(Kw(t)||oZ(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return ma(this,void 0,void 0,function(){var r,i,a,u,h=this;return Xo(this,function(o){switch(o.label){case 0:return r=pU.isSameOrigin(t),i=!Vw(t)&&this._options.useCORS===!0&&Co.SUPPORT_CORS_IMAGES&&!r,a=!Vw(t)&&!r&&!Kw(t)&&typeof this._options.proxy=="string"&&Co.SUPPORT_CORS_XHR&&!i,!r&&this._options.allowTaint===!1&&!Vw(t)&&!Kw(t)&&!a&&!i?[2]:(u=t,a?[4,this.proxy(u)]:[3,2]);case 1:u=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(g,w){var B=new Image;B.onload=function(){return g(B)},B.onerror=w,(aZ(u)||i)&&(B.crossOrigin="anonymous"),B.src=u,B.complete===!0&&setTimeout(function(){return g(B)},500),h._options.imageTimeout>0&&setTimeout(function(){return w("Timed out ("+h._options.imageTimeout+"ms) loading image")},h._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(u,h){var o=Co.SUPPORT_RESPONSE_TYPE?"blob":"text",g=new XMLHttpRequest;g.onload=function(){if(g.status===200)if(o==="text")u(g.response);else{var I=new FileReader;I.addEventListener("load",function(){return u(I.result)},!1),I.addEventListener("error",function(P){return h(P)},!1),I.readAsDataURL(g.response)}else h("Failed to proxy resource "+a+" with status code "+g.status)},g.onerror=h;var w=i.indexOf("?")>-1?"&":"?";if(g.open("GET",""+i+w+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&g instanceof XMLHttpRequest&&(g.responseType=o),r._options.imageTimeout){var B=r._options.imageTimeout;g.timeout=B,g.ontimeout=function(){return h("Timed out ("+B+"ms) proxying "+a)}}g.send()})},e}(),nZ=/^data:image\/svg\+xml/i,iZ=/^data:image\/.*;base64,/i,sZ=/^data:image\/.*/i,oZ=function(e){return Co.SUPPORT_SVG_DRAWING||!lZ(e)},Vw=function(e){return sZ.test(e)},aZ=function(e){return iZ.test(e)},Kw=function(e){return e.substr(0,4)==="blob"},lZ=function(e){return e.substr(-3).toLowerCase()==="svg"||nZ.test(e)},yr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Bf=function(e,t,r){return new yr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},oy=function(){function e(t,r,i,a){this.type=1,this.start=t,this.startControl=r,this.endControl=i,this.end=a}return e.prototype.subdivide=function(t,r){var i=Bf(this.start,this.startControl,t),a=Bf(this.startControl,this.endControl,t),u=Bf(this.endControl,this.end,t),h=Bf(i,a,t),o=Bf(a,u,t),g=Bf(h,o,t);return r?new e(this.start,i,h,g):new e(g,o,u,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Hl=function(e){return e.type===1},AZ=function(){function e(t){var r=t.styles,i=t.bounds,a=Mm(r.borderTopLeftRadius,i.width,i.height),u=a[0],h=a[1],o=Mm(r.borderTopRightRadius,i.width,i.height),g=o[0],w=o[1],B=Mm(r.borderBottomRightRadius,i.width,i.height),I=B[0],P=B[1],b=Mm(r.borderBottomLeftRadius,i.width,i.height),N=b[0],k=b[1],H=[];H.push((u+g)/i.width),H.push((N+I)/i.width),H.push((h+k)/i.height),H.push((w+P)/i.height);var U=Math.max.apply(Math,H);U>1&&(u/=U,h/=U,g/=U,w/=U,I/=U,P/=U,N/=U,k/=U);var Q=i.width-g,K=i.height-P,Z=i.width-I,Ae=i.height-k,fe=r.borderTopWidth,ge=r.borderRightWidth,me=r.borderBottomWidth,ae=r.borderLeftWidth,Le=Ei(r.paddingTop,t.bounds.width),re=Ei(r.paddingRight,t.bounds.width),he=Ei(r.paddingBottom,t.bounds.width),Ie=Ei(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=u>0||h>0?$i(i.left+ae/3,i.top+fe/3,u-ae/3,h-fe/3,ti.TOP_LEFT):new yr(i.left+ae/3,i.top+fe/3),this.topRightBorderDoubleOuterBox=u>0||h>0?$i(i.left+Q,i.top+fe/3,g-ge/3,w-fe/3,ti.TOP_RIGHT):new yr(i.left+i.width-ge/3,i.top+fe/3),this.bottomRightBorderDoubleOuterBox=I>0||P>0?$i(i.left+Z,i.top+K,I-ge/3,P-me/3,ti.BOTTOM_RIGHT):new yr(i.left+i.width-ge/3,i.top+i.height-me/3),this.bottomLeftBorderDoubleOuterBox=N>0||k>0?$i(i.left+ae/3,i.top+Ae,N-ae/3,k-me/3,ti.BOTTOM_LEFT):new yr(i.left+ae/3,i.top+i.height-me/3),this.topLeftBorderDoubleInnerBox=u>0||h>0?$i(i.left+ae*2/3,i.top+fe*2/3,u-ae*2/3,h-fe*2/3,ti.TOP_LEFT):new yr(i.left+ae*2/3,i.top+fe*2/3),this.topRightBorderDoubleInnerBox=u>0||h>0?$i(i.left+Q,i.top+fe*2/3,g-ge*2/3,w-fe*2/3,ti.TOP_RIGHT):new yr(i.left+i.width-ge*2/3,i.top+fe*2/3),this.bottomRightBorderDoubleInnerBox=I>0||P>0?$i(i.left+Z,i.top+K,I-ge*2/3,P-me*2/3,ti.BOTTOM_RIGHT):new yr(i.left+i.width-ge*2/3,i.top+i.height-me*2/3),this.bottomLeftBorderDoubleInnerBox=N>0||k>0?$i(i.left+ae*2/3,i.top+Ae,N-ae*2/3,k-me*2/3,ti.BOTTOM_LEFT):new yr(i.left+ae*2/3,i.top+i.height-me*2/3),this.topLeftBorderStroke=u>0||h>0?$i(i.left+ae/2,i.top+fe/2,u-ae/2,h-fe/2,ti.TOP_LEFT):new yr(i.left+ae/2,i.top+fe/2),this.topRightBorderStroke=u>0||h>0?$i(i.left+Q,i.top+fe/2,g-ge/2,w-fe/2,ti.TOP_RIGHT):new yr(i.left+i.width-ge/2,i.top+fe/2),this.bottomRightBorderStroke=I>0||P>0?$i(i.left+Z,i.top+K,I-ge/2,P-me/2,ti.BOTTOM_RIGHT):new yr(i.left+i.width-ge/2,i.top+i.height-me/2),this.bottomLeftBorderStroke=N>0||k>0?$i(i.left+ae/2,i.top+Ae,N-ae/2,k-me/2,ti.BOTTOM_LEFT):new yr(i.left+ae/2,i.top+i.height-me/2),this.topLeftBorderBox=u>0||h>0?$i(i.left,i.top,u,h,ti.TOP_LEFT):new yr(i.left,i.top),this.topRightBorderBox=g>0||w>0?$i(i.left+Q,i.top,g,w,ti.TOP_RIGHT):new yr(i.left+i.width,i.top),this.bottomRightBorderBox=I>0||P>0?$i(i.left+Z,i.top+K,I,P,ti.BOTTOM_RIGHT):new yr(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=N>0||k>0?$i(i.left,i.top+Ae,N,k,ti.BOTTOM_LEFT):new yr(i.left,i.top+i.height),this.topLeftPaddingBox=u>0||h>0?$i(i.left+ae,i.top+fe,Math.max(0,u-ae),Math.max(0,h-fe),ti.TOP_LEFT):new yr(i.left+ae,i.top+fe),this.topRightPaddingBox=g>0||w>0?$i(i.left+Math.min(Q,i.width-ge),i.top+fe,Q>i.width+ge?0:Math.max(0,g-ge),Math.max(0,w-fe),ti.TOP_RIGHT):new yr(i.left+i.width-ge,i.top+fe),this.bottomRightPaddingBox=I>0||P>0?$i(i.left+Math.min(Z,i.width-ae),i.top+Math.min(K,i.height-me),Math.max(0,I-ge),Math.max(0,P-me),ti.BOTTOM_RIGHT):new yr(i.left+i.width-ge,i.top+i.height-me),this.bottomLeftPaddingBox=N>0||k>0?$i(i.left+ae,i.top+Math.min(Ae,i.height-me),Math.max(0,N-ae),Math.max(0,k-me),ti.BOTTOM_LEFT):new yr(i.left+ae,i.top+i.height-me),this.topLeftContentBox=u>0||h>0?$i(i.left+ae+Ie,i.top+fe+Le,Math.max(0,u-(ae+Ie)),Math.max(0,h-(fe+Le)),ti.TOP_LEFT):new yr(i.left+ae+Ie,i.top+fe+Le),this.topRightContentBox=g>0||w>0?$i(i.left+Math.min(Q,i.width+ae+Ie),i.top+fe+Le,Q>i.width+ae+Ie?0:g-ae+Ie,w-(fe+Le),ti.TOP_RIGHT):new yr(i.left+i.width-(ge+re),i.top+fe+Le),this.bottomRightContentBox=I>0||P>0?$i(i.left+Math.min(Z,i.width-(ae+Ie)),i.top+Math.min(K,i.height+fe+Le),Math.max(0,I-(ge+re)),P-(me+he),ti.BOTTOM_RIGHT):new yr(i.left+i.width-(ge+re),i.top+i.height-(me+he)),this.bottomLeftContentBox=N>0||k>0?$i(i.left+ae+Ie,i.top+Ae,Math.max(0,N-(ae+Ie)),k-(me+he),ti.BOTTOM_LEFT):new yr(i.left+ae+Ie,i.top+i.height-(me+he))}return e}(),ti;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ti||(ti={}));var $i=function(e,t,r,i,a){var u=4*((Math.sqrt(2)-1)/3),h=r*u,o=i*u,g=e+r,w=t+i;switch(a){case ti.TOP_LEFT:return new oy(new yr(e,w),new yr(e,w-o),new yr(g-h,t),new yr(g,t));case ti.TOP_RIGHT:return new oy(new yr(e,t),new yr(e+h,t),new yr(g,w-o),new yr(g,w));case ti.BOTTOM_RIGHT:return new oy(new yr(g,t),new yr(g,t+o),new yr(e+h,w),new yr(e,w));case ti.BOTTOM_LEFT:default:return new oy(new yr(g,w),new yr(g-h,w),new yr(e,t+o),new yr(e,t))}},zv=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},cZ=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Hv=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},uZ=function(){function e(t,r,i){this.offsetX=t,this.offsetY=r,this.matrix=i,this.type=0,this.target=6}return e}(),ay=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),hZ=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),dZ=function(e){return e.type===0},mU=function(e){return e.type===1},fZ=function(e){return e.type===2},uI=function(e,t){return e.length===t.length?e.some(function(r,i){return r===t[i]}):!1},pZ=function(e,t,r,i,a){return e.map(function(u,h){switch(h){case 0:return u.add(t,r);case 1:return u.add(t+i,r);case 2:return u.add(t+i,r+a);case 3:return u.add(t,r+a)}return u})},gU=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),yU=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new AZ(this.container),this.container.styles.opacity<1&&this.effects.push(new hZ(this.container.styles.opacity)),this.container.styles.transform!==null){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,u=this.container.styles.transform;this.effects.push(new uZ(i,a,u))}if(this.container.styles.overflowX!==0){var h=zv(this.curves),o=Hv(this.curves);uI(h,o)?this.effects.push(new ay(h,6)):(this.effects.push(new ay(h,2)),this.effects.push(new ay(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,i=this.parent,a=this.effects.slice(0);i;){var u=i.effects.filter(function(g){return!mU(g)});if(r||i.container.styles.position!==0||!i.parent){if(a.unshift.apply(a,u),r=[2,3].indexOf(i.container.styles.position)===-1,i.container.styles.overflowX!==0){var h=zv(i.curves),o=Hv(i.curves);uI(h,o)||a.unshift(new ay(o,6))}}else a.unshift.apply(a,u);i=i.parent}return a.filter(function(g){return so(g.target,t)})},e}(),o2=function(e,t,r,i){e.container.elements.forEach(function(a){var u=so(a.flags,4),h=so(a.flags,2),o=new yU(a,e);so(a.styles.display,2048)&&i.push(o);var g=so(a.flags,8)?[]:i;if(u||h){var w=u||a.styles.isPositioned()?r:t,B=new gU(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var I=a.styles.zIndex.order;if(I<0){var P=0;w.negativeZIndex.some(function(N,k){return I>N.element.container.styles.zIndex.order?(P=k,!1):P>0}),w.negativeZIndex.splice(P,0,B)}else if(I>0){var b=0;w.positiveZIndex.some(function(N,k){return I>=N.element.container.styles.zIndex.order?(b=k+1,!1):b>0}),w.positiveZIndex.splice(b,0,B)}else w.zeroOrAutoZIndexOrTransformedOrOpacity.push(B)}else a.styles.isFloating()?w.nonPositionedFloats.push(B):w.nonPositionedInlineLevel.push(B);o2(o,B,u?B:r,g)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),o2(o,t,r,g);so(a.flags,8)&&vU(a,g)})},vU=function(e,t){for(var r=e instanceof t2?e.start:1,i=e instanceof t2?e.reversed:!1,a=0;a<t.length;a++){var u=t[a];u.container instanceof rU&&typeof u.container.value=="number"&&u.container.value!==0&&(r=u.container.value),u.listValue=Fg(r,u.container.styles.listStyleType,!0),r+=i?-1:1}},mZ=function(e){var t=new yU(e,null),r=new gU(t),i=[];return o2(t,r,r,i),vU(t.container,i),r},hI=function(e,t){switch(t){case 0:return Kl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Kl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Kl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Kl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},gZ=function(e,t){switch(t){case 0:return Kl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Kl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Kl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Kl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},yZ=function(e,t){switch(t){case 0:return Kl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Kl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Kl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Kl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},vZ=function(e,t){switch(t){case 0:return ly(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return ly(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return ly(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return ly(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},ly=function(e,t){var r=[];return Hl(e)?r.push(e.subdivide(.5,!1)):r.push(e),Hl(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Kl=function(e,t,r,i){var a=[];return Hl(e)?a.push(e.subdivide(.5,!1)):a.push(e),Hl(r)?a.push(r.subdivide(.5,!0)):a.push(r),Hl(i)?a.push(i.subdivide(.5,!0).reverse()):a.push(i),Hl(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},_U=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},jv=function(e){var t=e.styles,r=e.bounds,i=Ei(t.paddingLeft,r.width),a=Ei(t.paddingRight,r.width),u=Ei(t.paddingTop,r.width),h=Ei(t.paddingBottom,r.width);return r.add(i+t.borderLeftWidth,u+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+a),-(t.borderTopWidth+t.borderBottomWidth+u+h))},_Z=function(e,t){return e===0?t.bounds:e===2?jv(t):_U(t)},wZ=function(e,t){return e===0?t.bounds:e===2?jv(t):_U(t)},Gw=function(e,t,r){var i=_Z(Pf(e.styles.backgroundOrigin,t),e),a=wZ(Pf(e.styles.backgroundClip,t),e),u=xZ(Pf(e.styles.backgroundSize,t),r,i),h=u[0],o=u[1],g=Mm(Pf(e.styles.backgroundPosition,t),i.width-h,i.height-o),w=bZ(Pf(e.styles.backgroundRepeat,t),g,u,i,a),B=Math.round(i.left+g[0]),I=Math.round(i.top+g[1]);return[w,B,I,h,o]},Cf=function(e){return di(e)&&e.value===ap.AUTO},Ay=function(e){return typeof e=="number"},xZ=function(e,t,r){var i=t[0],a=t[1],u=t[2],h=e[0],o=e[1];if(!h)return[0,0];if(js(h)&&o&&js(o))return[Ei(h,r.width),Ei(o,r.height)];var g=Ay(u);if(di(h)&&(h.value===ap.CONTAIN||h.value===ap.COVER)){if(Ay(u)){var w=r.width/r.height;return w<u!=(h.value===ap.COVER)?[r.width,r.width/u]:[r.height*u,r.height]}return[r.width,r.height]}var B=Ay(i),I=Ay(a),P=B||I;if(Cf(h)&&(!o||Cf(o))){if(B&&I)return[i,a];if(!g&&!P)return[r.width,r.height];if(P&&g){var b=B?i:a*u,N=I?a:i/u;return[b,N]}var k=B?i:r.width,H=I?a:r.height;return[k,H]}if(g){var U=0,Q=0;return js(h)?U=Ei(h,r.width):js(o)&&(Q=Ei(o,r.height)),Cf(h)?U=Q*u:(!o||Cf(o))&&(Q=U/u),[U,Q]}var K=null,Z=null;if(js(h)?K=Ei(h,r.width):o&&js(o)&&(Z=Ei(o,r.height)),K!==null&&(!o||Cf(o))&&(Z=B&&I?K/i*a:r.height),Z!==null&&Cf(h)&&(K=B&&I?Z/a*i:r.width),K!==null&&Z!==null)return[K,Z];throw new Error("Unable to calculate background-size for element")},Pf=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},bZ=function(e,t,r,i,a){var u=t[0],h=t[1],o=r[0],g=r[1];switch(e){case 2:return[new yr(Math.round(i.left),Math.round(i.top+h)),new yr(Math.round(i.left+i.width),Math.round(i.top+h)),new yr(Math.round(i.left+i.width),Math.round(g+i.top+h)),new yr(Math.round(i.left),Math.round(g+i.top+h))];case 3:return[new yr(Math.round(i.left+u),Math.round(i.top)),new yr(Math.round(i.left+u+o),Math.round(i.top)),new yr(Math.round(i.left+u+o),Math.round(i.height+i.top)),new yr(Math.round(i.left+u),Math.round(i.height+i.top))];case 1:return[new yr(Math.round(i.left+u),Math.round(i.top+h)),new yr(Math.round(i.left+u+o),Math.round(i.top+h)),new yr(Math.round(i.left+u+o),Math.round(i.top+h+g)),new yr(Math.round(i.left+u),Math.round(i.top+h+g))];default:return[new yr(Math.round(a.left),Math.round(a.top)),new yr(Math.round(a.left+a.width),Math.round(a.top)),new yr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new yr(Math.round(a.left),Math.round(a.height+a.top))]}},BZ="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",dI="Hidden Text",CZ=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var i=this._document.createElement("div"),a=this._document.createElement("img"),u=this._document.createElement("span"),h=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",h.appendChild(i),a.src=BZ,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",u.style.fontFamily=t,u.style.fontSize=r,u.style.margin="0",u.style.padding="0",u.appendChild(this._document.createTextNode(dI)),i.appendChild(u),i.appendChild(a);var o=a.offsetTop-u.offsetTop+2;i.removeChild(u),i.appendChild(this._document.createTextNode(dI)),i.style.lineHeight="normal",a.style.verticalAlign="super";var g=a.offsetTop-i.offsetTop+2;return h.removeChild(i),{baseline:o,middle:g}},e.prototype.getMetrics=function(t,r){var i=t+" "+r;return typeof this._data[i]>"u"&&(this._data[i]=this.parseMetrics(t,r)),this._data[i]},e}(),wU=function(){function e(t,r){this.context=t,this.options=r}return e}(),SZ=1e4,EZ=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a._activeEffects=[],a.canvas=i.canvas?i.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),i.canvas||(a.canvas.width=Math.floor(i.width*i.scale),a.canvas.height=Math.floor(i.height*i.scale),a.canvas.style.width=i.width+"px",a.canvas.style.height=i.height+"px"),a.fontMetrics=new CZ(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-i.x,-i.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),a}return t.prototype.applyEffects=function(r){for(var i=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return i.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),fZ(r)&&(this.ctx.globalAlpha=r.opacity),dZ(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),mU(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return ma(this,void 0,void 0,function(){var i;return Xo(this,function(a){switch(a.label){case 0:return i=r.element.container.styles,i.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return ma(this,void 0,void 0,function(){return Xo(this,function(i){switch(i.label){case 0:if(so(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return i.sent(),[4,this.renderNodeContent(r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,i,a){var u=this;if(i===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var h=XB(r.text);h.reduce(function(o,g){return u.ctx.fillText(g,o,r.bounds.top+a),o+u.ctx.measureText(g).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var i=r.fontVariant.filter(function(h){return h==="normal"||h==="small-caps"}).join(""),a=LZ(r.fontFamily).join(", "),u=Kg(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,i,r.fontWeight,u,a].join(" "),a,u]},t.prototype.renderTextNode=function(r,i){return ma(this,void 0,void 0,function(){var a,u,h,o,g,w,B,I,P=this;return Xo(this,function(b){return a=this.createFontStyle(i),u=a[0],h=a[1],o=a[2],this.ctx.font=u,this.ctx.direction=i.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",g=this.fontMetrics.getMetrics(h,o),w=g.baseline,B=g.middle,I=i.paintOrder,r.textBounds.forEach(function(N){I.forEach(function(k){switch(k){case 0:P.ctx.fillStyle=go(i.color),P.renderTextWithLetterSpacing(N,i.letterSpacing,w);var H=i.textShadow;H.length&&N.text.trim().length&&(H.slice(0).reverse().forEach(function(U){P.ctx.shadowColor=go(U.color),P.ctx.shadowOffsetX=U.offsetX.number*P.options.scale,P.ctx.shadowOffsetY=U.offsetY.number*P.options.scale,P.ctx.shadowBlur=U.blur.number,P.renderTextWithLetterSpacing(N,i.letterSpacing,w)}),P.ctx.shadowColor="",P.ctx.shadowOffsetX=0,P.ctx.shadowOffsetY=0,P.ctx.shadowBlur=0),i.textDecorationLine.length&&(P.ctx.fillStyle=go(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(U){switch(U){case 1:P.ctx.fillRect(N.bounds.left,Math.round(N.bounds.top+w),N.bounds.width,1);break;case 2:P.ctx.fillRect(N.bounds.left,Math.round(N.bounds.top),N.bounds.width,1);break;case 3:P.ctx.fillRect(N.bounds.left,Math.ceil(N.bounds.top+B),N.bounds.width,1);break}}));break;case 1:i.webkitTextStrokeWidth&&N.text.trim().length&&(P.ctx.strokeStyle=go(i.webkitTextStrokeColor),P.ctx.lineWidth=i.webkitTextStrokeWidth,P.ctx.lineJoin=window.chrome?"miter":"round",P.ctx.strokeText(N.text,N.bounds.left,N.bounds.top+w)),P.ctx.strokeStyle="",P.ctx.lineWidth=0,P.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,i,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var u=jv(r),h=Hv(i);this.path(h),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,u.left,u.top,u.width,u.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return ma(this,void 0,void 0,function(){var i,a,u,h,o,g,Q,Q,w,B,I,P,Z,b,N,Ae,k,H,U,Q,K,Z,Ae;return Xo(this,function(fe){switch(fe.label){case 0:this.applyEffects(r.getEffects(4)),i=r.container,a=r.curves,u=i.styles,h=0,o=i.textNodes,fe.label=1;case 1:return h<o.length?(g=o[h],[4,this.renderTextNode(g,u)]):[3,4];case 2:fe.sent(),fe.label=3;case 3:return h++,[3,1];case 4:if(!(i instanceof Jk))return[3,8];fe.label=5;case 5:return fe.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return Q=fe.sent(),this.renderReplacedElement(i,a,Q),[3,8];case 7:return fe.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof eU&&this.renderReplacedElement(i,a,i.canvas),!(i instanceof tU))return[3,12];fe.label=9;case 9:return fe.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return Q=fe.sent(),this.renderReplacedElement(i,a,Q),[3,12];case 11:return fe.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof sU&&i.tree?(w=new t(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}),[4,w.render(i.tree)]):[3,14];case 13:B=fe.sent(),i.width&&i.height&&this.ctx.drawImage(B,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),fe.label=14;case 14:if(i instanceof YB&&(I=Math.min(i.bounds.width,i.bounds.height),i.type===Nv?i.checked&&(this.ctx.save(),this.path([new yr(i.bounds.left+I*.39363,i.bounds.top+I*.79),new yr(i.bounds.left+I*.16,i.bounds.top+I*.5549),new yr(i.bounds.left+I*.27347,i.bounds.top+I*.44071),new yr(i.bounds.left+I*.39694,i.bounds.top+I*.5649),new yr(i.bounds.left+I*.72983,i.bounds.top+I*.23),new yr(i.bounds.left+I*.84,i.bounds.top+I*.34085),new yr(i.bounds.left+I*.39363,i.bounds.top+I*.79)]),this.ctx.fillStyle=go(eI),this.ctx.fill(),this.ctx.restore()):i.type===Dv&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+I/2,i.bounds.top+I/2,I/4,0,Math.PI*2,!0),this.ctx.fillStyle=go(eI),this.ctx.fill(),this.ctx.restore())),IZ(i)&&i.value.length){switch(P=this.createFontStyle(u),Z=P[0],b=P[1],N=this.fontMetrics.getMetrics(Z,b).baseline,this.ctx.font=Z,this.ctx.fillStyle=go(u.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=TZ(i.styles.textAlign),Ae=jv(i),k=0,i.styles.textAlign){case 1:k+=Ae.width/2;break;case 2:k+=Ae.width;break}H=Ae.add(k,0,0,-Ae.height/2+1),this.ctx.save(),this.path([new yr(Ae.left,Ae.top),new yr(Ae.left+Ae.width,Ae.top),new yr(Ae.left+Ae.width,Ae.top+Ae.height),new yr(Ae.left,Ae.top+Ae.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ym(i.value,H),u.letterSpacing,N),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!so(i.styles.display,2048))return[3,20];if(i.styles.listStyleImage===null)return[3,19];if(U=i.styles.listStyleImage,U.type!==0)return[3,18];Q=void 0,K=U.url,fe.label=15;case 15:return fe.trys.push([15,17,,18]),[4,this.context.cache.match(K)];case 16:return Q=fe.sent(),this.ctx.drawImage(Q,i.bounds.left-(Q.width+10),i.bounds.top),[3,18];case 17:return fe.sent(),this.context.logger.error("Error loading list-style-image "+K),[3,18];case 18:return[3,20];case 19:r.listValue&&i.styles.listStyleType!==-1&&(Z=this.createFontStyle(u)[0],this.ctx.font=Z,this.ctx.fillStyle=go(u.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Ae=new xu(i.bounds.left,i.bounds.top+Ei(i.styles.paddingTop,i.bounds.width),i.bounds.width,N4(u.lineHeight,u.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ym(r.listValue,Ae),u.letterSpacing,N4(u.lineHeight,u.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),fe.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return ma(this,void 0,void 0,function(){var i,a,U,u,h,U,o,g,U,w,B,U,I,P,U,b,N,U,k,H,U;return Xo(this,function(Q){switch(Q.label){case 0:if(so(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:Q.sent(),i=0,a=r.negativeZIndex,Q.label=2;case 2:return i<a.length?(U=a[i],[4,this.renderStack(U)]):[3,5];case 3:Q.sent(),Q.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:Q.sent(),u=0,h=r.nonInlineLevel,Q.label=7;case 7:return u<h.length?(U=h[u],[4,this.renderNode(U)]):[3,10];case 8:Q.sent(),Q.label=9;case 9:return u++,[3,7];case 10:o=0,g=r.nonPositionedFloats,Q.label=11;case 11:return o<g.length?(U=g[o],[4,this.renderStack(U)]):[3,14];case 12:Q.sent(),Q.label=13;case 13:return o++,[3,11];case 14:w=0,B=r.nonPositionedInlineLevel,Q.label=15;case 15:return w<B.length?(U=B[w],[4,this.renderStack(U)]):[3,18];case 16:Q.sent(),Q.label=17;case 17:return w++,[3,15];case 18:I=0,P=r.inlineLevel,Q.label=19;case 19:return I<P.length?(U=P[I],[4,this.renderNode(U)]):[3,22];case 20:Q.sent(),Q.label=21;case 21:return I++,[3,19];case 22:b=0,N=r.zeroOrAutoZIndexOrTransformedOrOpacity,Q.label=23;case 23:return b<N.length?(U=N[b],[4,this.renderStack(U)]):[3,26];case 24:Q.sent(),Q.label=25;case 25:return b++,[3,23];case 26:k=0,H=r.positiveZIndex,Q.label=27;case 27:return k<H.length?(U=H[k],[4,this.renderStack(U)]):[3,30];case 28:Q.sent(),Q.label=29;case 29:return k++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var i=this;r.forEach(function(a,u){var h=Hl(a)?a.start:a;u===0?i.ctx.moveTo(h.x,h.y):i.ctx.lineTo(h.x,h.y),Hl(a)&&i.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,i,a,u){this.path(r),this.ctx.fillStyle=i,this.ctx.translate(a,u),this.ctx.fill(),this.ctx.translate(-a,-u)},t.prototype.resizeImage=function(r,i,a){var u;if(r.width===i&&r.height===a)return r;var h=(u=this.canvas.ownerDocument)!==null&&u!==void 0?u:document,o=h.createElement("canvas");o.width=Math.max(1,i),o.height=Math.max(1,a);var g=o.getContext("2d");return g.drawImage(r,0,0,r.width,r.height,0,0,i,a),o},t.prototype.renderBackgroundImage=function(r){return ma(this,void 0,void 0,function(){var i,a,u,h,o,g;return Xo(this,function(w){switch(w.label){case 0:i=r.styles.backgroundImage.length-1,a=function(B){var I,P,b,Le,rt,ct,Ie,we,me,N,Le,rt,ct,Ie,we,k,H,U,Q,K,Z,Ae,fe,ge,me,ae,Le,re,he,Ie,we,nt,rt,ct,Pe,Ve,mt,gt,ie,Ee,Me,Ye;return Xo(this,function(at){switch(at.label){case 0:if(B.type!==0)return[3,5];I=void 0,P=B.url,at.label=1;case 1:return at.trys.push([1,3,,4]),[4,u.context.cache.match(P)];case 2:return I=at.sent(),[3,4];case 3:return at.sent(),u.context.logger.error("Error loading background-image "+P),[3,4];case 4:return I&&(b=Gw(r,i,[I.width,I.height,I.width/I.height]),Le=b[0],rt=b[1],ct=b[2],Ie=b[3],we=b[4],me=u.ctx.createPattern(u.resizeImage(I,Ie,we),"repeat"),u.renderRepeat(Le,me,rt,ct)),[3,6];case 5:d$(B)?(N=Gw(r,i,[null,null,null]),Le=N[0],rt=N[1],ct=N[2],Ie=N[3],we=N[4],k=l$(B.angle,Ie,we),H=k[0],U=k[1],Q=k[2],K=k[3],Z=k[4],Ae=document.createElement("canvas"),Ae.width=Ie,Ae.height=we,fe=Ae.getContext("2d"),ge=fe.createLinearGradient(U,K,Q,Z),U4(B.stops,H).forEach(function(Ze){return ge.addColorStop(Ze.stop,go(Ze.color))}),fe.fillStyle=ge,fe.fillRect(0,0,Ie,we),Ie>0&&we>0&&(me=u.ctx.createPattern(Ae,"repeat"),u.renderRepeat(Le,me,rt,ct))):f$(B)&&(ae=Gw(r,i,[null,null,null]),Le=ae[0],re=ae[1],he=ae[2],Ie=ae[3],we=ae[4],nt=B.position.length===0?[qB]:B.position,rt=Ei(nt[0],Ie),ct=Ei(nt[nt.length-1],we),Pe=A$(B,rt,ct,Ie,we),Ve=Pe[0],mt=Pe[1],Ve>0&&mt>0&&(gt=u.ctx.createRadialGradient(re+rt,he+ct,0,re+rt,he+ct,Ve),U4(B.stops,Ve*2).forEach(function(Ze){return gt.addColorStop(Ze.stop,go(Ze.color))}),u.path(Le),u.ctx.fillStyle=gt,Ve!==mt?(ie=r.bounds.left+.5*r.bounds.width,Ee=r.bounds.top+.5*r.bounds.height,Me=mt/Ve,Ye=1/Me,u.ctx.save(),u.ctx.translate(ie,Ee),u.ctx.transform(1,0,0,Me,0,0),u.ctx.translate(-ie,-Ee),u.ctx.fillRect(re,Ye*(he-Ee)+Ee,Ie,we*Ye),u.ctx.restore()):u.ctx.fill())),at.label=6;case 6:return i--,[2]}})},u=this,h=0,o=r.styles.backgroundImage.slice(0).reverse(),w.label=1;case 1:return h<o.length?(g=o[h],[5,a(g)]):[3,4];case 2:w.sent(),w.label=3;case 3:return h++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,i,a){return ma(this,void 0,void 0,function(){return Xo(this,function(u){return this.path(hI(a,i)),this.ctx.fillStyle=go(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,i,a,u){return ma(this,void 0,void 0,function(){var h,o;return Xo(this,function(g){switch(g.label){case 0:return i<3?[4,this.renderSolidBorder(r,a,u)]:[3,2];case 1:return g.sent(),[2];case 2:return h=gZ(u,a),this.path(h),this.ctx.fillStyle=go(r),this.ctx.fill(),o=yZ(u,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return ma(this,void 0,void 0,function(){var i,a,u,h,o,g,w,B,I=this;return Xo(this,function(P){switch(P.label){case 0:return this.applyEffects(r.getEffects(2)),i=r.container.styles,a=!Ih(i.backgroundColor)||i.backgroundImage.length,u=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],h=FZ(Pf(i.backgroundClip,0),r.curves),a||i.boxShadow.length?(this.ctx.save(),this.path(h),this.ctx.clip(),Ih(i.backgroundColor)||(this.ctx.fillStyle=go(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:P.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(b){I.ctx.save();var N=zv(r.curves),k=b.inset?0:SZ,H=pZ(N,-k+(b.inset?1:-1)*b.spread.number,(b.inset?1:-1)*b.spread.number,b.spread.number*(b.inset?-2:2),b.spread.number*(b.inset?-2:2));b.inset?(I.path(N),I.ctx.clip(),I.mask(H)):(I.mask(N),I.ctx.clip(),I.path(H)),I.ctx.shadowOffsetX=b.offsetX.number+k,I.ctx.shadowOffsetY=b.offsetY.number,I.ctx.shadowColor=go(b.color),I.ctx.shadowBlur=b.blur.number,I.ctx.fillStyle=b.inset?go(b.color):"rgba(0,0,0,1)",I.ctx.fill(),I.ctx.restore()}),P.label=2;case 2:o=0,g=0,w=u,P.label=3;case 3:return g<w.length?(B=w[g],B.style!==0&&!Ih(B.color)&&B.width>0?B.style!==2?[3,5]:[4,this.renderDashedDottedBorder(B.color,B.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return P.sent(),[3,11];case 5:return B.style!==3?[3,7]:[4,this.renderDashedDottedBorder(B.color,B.width,o,r.curves,3)];case 6:return P.sent(),[3,11];case 7:return B.style!==4?[3,9]:[4,this.renderDoubleBorder(B.color,B.width,o,r.curves)];case 8:return P.sent(),[3,11];case 9:return[4,this.renderSolidBorder(B.color,o,r.curves)];case 10:P.sent(),P.label=11;case 11:o++,P.label=12;case 12:return g++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,i,a,u,h){return ma(this,void 0,void 0,function(){var o,g,w,B,I,P,b,N,k,H,U,Q,K,Z,Ae,fe,Ae,fe;return Xo(this,function(ge){return this.ctx.save(),o=vZ(u,a),g=hI(u,a),h===2&&(this.path(g),this.ctx.clip()),Hl(g[0])?(w=g[0].start.x,B=g[0].start.y):(w=g[0].x,B=g[0].y),Hl(g[1])?(I=g[1].end.x,P=g[1].end.y):(I=g[1].x,P=g[1].y),a===0||a===2?b=Math.abs(w-I):b=Math.abs(B-P),this.ctx.beginPath(),h===3?this.formatPath(o):this.formatPath(g.slice(0,2)),N=i<3?i*3:i*2,k=i<3?i*2:i,h===3&&(N=i,k=i),H=!0,b<=N*2?H=!1:b<=N*2+k?(U=b/(2*N+k),N*=U,k*=U):(Q=Math.floor((b+k)/(N+k)),K=(b-Q*N)/(Q-1),Z=(b-(Q+1)*N)/Q,k=Z<=0||Math.abs(k-K)<Math.abs(k-Z)?K:Z),H&&(h===3?this.ctx.setLineDash([0,N+k]):this.ctx.setLineDash([N,k])),h===3?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=i*2+1.1,this.ctx.strokeStyle=go(r),this.ctx.stroke(),this.ctx.setLineDash([]),h===2&&(Hl(g[0])&&(Ae=g[3],fe=g[0],this.ctx.beginPath(),this.formatPath([new yr(Ae.end.x,Ae.end.y),new yr(fe.start.x,fe.start.y)]),this.ctx.stroke()),Hl(g[1])&&(Ae=g[1],fe=g[2],this.ctx.beginPath(),this.formatPath([new yr(Ae.end.x,Ae.end.y),new yr(fe.start.x,fe.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return ma(this,void 0,void 0,function(){var i;return Xo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=go(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=mZ(r),[4,this.renderStack(i)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(wU),IZ=function(e){return e instanceof iU||e instanceof nU?!0:e instanceof YB&&e.type!==Dv&&e.type!==Nv},FZ=function(e,t){switch(e){case 0:return zv(t);case 2:return cZ(t);case 1:default:return Hv(t)}},TZ=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},PZ=["-apple-system","system-ui"],LZ=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return PZ.indexOf(t)===-1}):e},MZ=function(e){NA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.canvas=i.canvas?i.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=i,a.canvas.width=Math.floor(i.width*i.scale),a.canvas.height=Math.floor(i.height*i.scale),a.canvas.style.width=i.width+"px",a.canvas.style.height=i.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-i.x,-i.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),a}return t.prototype.render=function(r){return ma(this,void 0,void 0,function(){var i,a;return Xo(this,function(u){switch(u.label){case 0:return i=e2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,kZ(i)];case 1:return a=u.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=go(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(wU),kZ=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},UZ=function(){function e(t){var r=t.id,i=t.enabled;this.id=r,this.enabled=i,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,z0([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,z0([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,z0([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,z0([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),RZ=function(){function e(t,r){var i;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new UZ({id:this.instanceName,enabled:t.logging}),this.cache=(i=t.cache)!==null&&i!==void 0?i:new rZ(this,t)}return e.instanceCount=1,e}(),xU=function(e,t){return t===void 0&&(t={}),NZ(e,t)};typeof window<"u"&&pU.setContext(window);var NZ=function(e,t){return ma(void 0,void 0,void 0,function(){var r,i,a,u,h,o,g,w,B,I,P,b,N,k,H,U,Q,K,Z,Ae,ge,fe,ge,me,ae,Le,re,he,Ie,we,nt,rt,ct,Pe,Ve,mt,gt,ie,Ee,Me;return Xo(this,function(Ye){switch(Ye.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(i=r.defaultView,!i)throw new Error("Document is not attached to a Window");return a={allowTaint:(me=t.allowTaint)!==null&&me!==void 0?me:!1,imageTimeout:(ae=t.imageTimeout)!==null&&ae!==void 0?ae:15e3,proxy:t.proxy,useCORS:(Le=t.useCORS)!==null&&Le!==void 0?Le:!1},u=Qb({logging:(re=t.logging)!==null&&re!==void 0?re:!0,cache:t.cache},a),h={windowWidth:(he=t.windowWidth)!==null&&he!==void 0?he:i.innerWidth,windowHeight:(Ie=t.windowHeight)!==null&&Ie!==void 0?Ie:i.innerHeight,scrollX:(we=t.scrollX)!==null&&we!==void 0?we:i.pageXOffset,scrollY:(nt=t.scrollY)!==null&&nt!==void 0?nt:i.pageYOffset},o=new xu(h.scrollX,h.scrollY,h.windowWidth,h.windowHeight),g=new RZ(u,o),w=(rt=t.foreignObjectRendering)!==null&&rt!==void 0?rt:!1,B={allowTaint:(ct=t.allowTaint)!==null&&ct!==void 0?ct:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:w,copyStyles:w},g.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),I=new AI(g,e,B),P=I.clonedReferenceElement,P?[4,I.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return b=Ye.sent(),N=JB(P)||QW(P)?pK(P.ownerDocument):M1(g,P),k=N.width,H=N.height,U=N.left,Q=N.top,K=DZ(g,P,t.backgroundColor),Z={canvas:t.canvas,backgroundColor:K,scale:(Ve=(Pe=t.scale)!==null&&Pe!==void 0?Pe:i.devicePixelRatio)!==null&&Ve!==void 0?Ve:1,x:((mt=t.x)!==null&&mt!==void 0?mt:0)+U,y:((gt=t.y)!==null&&gt!==void 0?gt:0)+Q,width:(ie=t.width)!==null&&ie!==void 0?ie:Math.ceil(k),height:(Ee=t.height)!==null&&Ee!==void 0?Ee:Math.ceil(H)},w?(g.logger.debug("Document cloned, using foreign object rendering"),ge=new MZ(g,Z),[4,ge.render(P)]):[3,3];case 2:return Ae=Ye.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+U+","+Q+" with size "+k+"x"+H+" using computed rendering"),g.logger.debug("Starting DOM parsing"),fe=aU(g,P),K===fe.styles.backgroundColor&&(fe.styles.backgroundColor=pu.TRANSPARENT),g.logger.debug("Starting renderer for element at "+Z.x+","+Z.y+" with size "+Z.width+"x"+Z.height),ge=new EZ(g,Z),[4,ge.render(fe)];case 4:Ae=Ye.sent(),Ye.label=5;case 5:return(!((Me=t.removeContainer)!==null&&Me!==void 0)||Me)&&(AI.destroy(b)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),g.logger.debug("Finished rendering"),[2,Ae]}})})},DZ=function(e,t,r){var i=t.ownerDocument,a=i.documentElement?Zm(e,getComputedStyle(i.documentElement).backgroundColor):pu.TRANSPARENT,u=i.body?Zm(e,getComputedStyle(i.body).backgroundColor):pu.TRANSPARENT,h=typeof r=="string"?Zm(e,r):r===null?pu.TRANSPARENT:4294967295;return t===i.documentElement?Ih(a)?Ih(u)?h:u:a:h};const QZ=Object.freeze(Object.defineProperty({__proto__:null,default:xU},Symbol.toStringTag,{value:"Module"}));function oi(e){"@babel/helpers - typeof";return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(e)}var RA=Uint8Array,dl=Uint16Array,eC=Int32Array,tC=new RA([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rC=new RA([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fI=new RA([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bU=function(e,t){for(var r=new dl(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var a=new eC(r[30]),i=1;i<30;++i)for(var u=r[i];u<r[i+1];++u)a[u]=u-r[i]<<5|i;return{b:r,r:a}},BU=bU(tC,2),OZ=BU.b,a2=BU.r;OZ[28]=258,a2[258]=28;var zZ=bU(rC,0),pI=zZ.r,l2=new dl(32768);for(var Di=0;Di<32768;++Di){var Gu=(Di&43690)>>1|(Di&21845)<<1;Gu=(Gu&52428)>>2|(Gu&13107)<<2,Gu=(Gu&61680)>>4|(Gu&3855)<<4,l2[Di]=((Gu&65280)>>8|(Gu&255)<<8)>>1}var eg=function(e,t,r){for(var i=e.length,a=0,u=new dl(t);a<i;++a)e[a]&&++u[e[a]-1];var h=new dl(t);for(a=1;a<t;++a)h[a]=h[a-1]+u[a-1]<<1;var o;if(r){o=new dl(1<<t);var g=15-t;for(a=0;a<i;++a)if(e[a])for(var w=a<<4|e[a],B=t-e[a],I=h[e[a]-1]++<<B,P=I|(1<<B)-1;I<=P;++I)o[l2[I]>>g]=w}else for(o=new dl(i),a=0;a<i;++a)e[a]&&(o[a]=l2[h[e[a]-1]++]>>15-e[a]);return o},Dd=new RA(288);for(var Di=0;Di<144;++Di)Dd[Di]=8;for(var Di=144;Di<256;++Di)Dd[Di]=9;for(var Di=256;Di<280;++Di)Dd[Di]=7;for(var Di=280;Di<288;++Di)Dd[Di]=8;var Vv=new RA(32);for(var Di=0;Di<32;++Di)Vv[Di]=5;var HZ=eg(Dd,9,0),jZ=eg(Vv,5,0),CU=function(e){return(e+7)/8|0},VZ=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new RA(e.subarray(t,r))},su=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8},xm=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},$w=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var a=r.length,u=r.slice();if(!a)return{t:EU,l:0};if(a==1){var h=new RA(r[0].s+1);return h[r[0].s]=1,{t:h,l:1}}r.sort(function(Ae,fe){return Ae.f-fe.f}),r.push({s:-1,f:25001});var o=r[0],g=r[1],w=0,B=1,I=2;for(r[0]={s:-1,f:o.f+g.f,l:o,r:g};B!=a-1;)o=r[r[w].f<r[I].f?w++:I++],g=r[w!=B&&r[w].f<r[I].f?w++:I++],r[B++]={s:-1,f:o.f+g.f,l:o,r:g};for(var P=u[0].s,i=1;i<a;++i)u[i].s>P&&(P=u[i].s);var b=new dl(P+1),N=A2(r[B-1],b,0);if(N>t){var i=0,k=0,H=N-t,U=1<<H;for(u.sort(function(fe,ge){return b[ge.s]-b[fe.s]||fe.f-ge.f});i<a;++i){var Q=u[i].s;if(b[Q]>t)k+=U-(1<<N-b[Q]),b[Q]=t;else break}for(k>>=H;k>0;){var K=u[i].s;b[K]<t?k-=1<<t-b[K]++-1:++i}for(;i>=0&&k;--i){var Z=u[i].s;b[Z]==t&&(--b[Z],++k)}N=t}return{t:new RA(b),l:N}},A2=function(e,t,r){return e.s==-1?Math.max(A2(e.l,t,r+1),A2(e.r,t,r+1)):t[e.s]=r},mI=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new dl(++t),i=0,a=e[0],u=1,h=function(g){r[i++]=g},o=1;o<=t;++o)if(e[o]==a&&o!=t)++u;else{if(!a&&u>2){for(;u>138;u-=138)h(32754);u>2&&(h(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(h(a),--u;u>6;u-=6)h(8304);u>2&&(h(u-3<<5|8208),u=0)}for(;u--;)h(a);u=1,a=e[o]}return{c:r.subarray(0,i),n:t}},bm=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},SU=function(e,t,r){var i=r.length,a=CU(t+2);e[a]=i&255,e[a+1]=i>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var u=0;u<i;++u)e[a+u+4]=r[u];return(a+4+i)*8},gI=function(e,t,r,i,a,u,h,o,g,w,B){su(t,B++,r),++a[256];for(var I=$w(a,15),P=I.t,b=I.l,N=$w(u,15),k=N.t,H=N.l,U=mI(P),Q=U.c,K=U.n,Z=mI(k),Ae=Z.c,fe=Z.n,ge=new dl(19),me=0;me<Q.length;++me)++ge[Q[me]&31];for(var me=0;me<Ae.length;++me)++ge[Ae[me]&31];for(var ae=$w(ge,7),Le=ae.t,re=ae.l,he=19;he>4&&!Le[fI[he-1]];--he);var Ie=w+5<<3,we=bm(a,Dd)+bm(u,Vv)+h,nt=bm(a,P)+bm(u,k)+h+14+3*he+bm(ge,Le)+2*ge[16]+3*ge[17]+7*ge[18];if(g>=0&&Ie<=we&&Ie<=nt)return SU(t,B,e.subarray(g,g+w));var rt,ct,Pe,Ve;if(su(t,B,1+(nt<we)),B+=2,nt<we){rt=eg(P,b,0),ct=P,Pe=eg(k,H,0),Ve=k;var mt=eg(Le,re,0);su(t,B,K-257),su(t,B+5,fe-1),su(t,B+10,he-4),B+=14;for(var me=0;me<he;++me)su(t,B+3*me,Le[fI[me]]);B+=3*he;for(var gt=[Q,Ae],ie=0;ie<2;++ie)for(var Ee=gt[ie],me=0;me<Ee.length;++me){var Me=Ee[me]&31;su(t,B,mt[Me]),B+=Le[Me],Me>15&&(su(t,B,Ee[me]>>5&127),B+=Ee[me]>>12)}}else rt=HZ,ct=Dd,Pe=jZ,Ve=Vv;for(var me=0;me<o;++me){var Ye=i[me];if(Ye>255){var Me=Ye>>18&31;xm(t,B,rt[Me+257]),B+=ct[Me+257],Me>7&&(su(t,B,Ye>>23&31),B+=tC[Me]);var at=Ye&31;xm(t,B,Pe[at]),B+=Ve[at],at>3&&(xm(t,B,Ye>>5&8191),B+=rC[at])}else xm(t,B,rt[Ye]),B+=ct[Ye]}return xm(t,B,rt[256]),B+ct[256]},KZ=new eC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),EU=new RA(0),GZ=function(e,t,r,i,a,u){var h=u.z||e.length,o=new RA(i+h+5*(1+Math.ceil(h/7e3))+a),g=o.subarray(i,o.length-a),w=u.l,B=(u.r||0)&7;if(t){B&&(g[0]=u.r>>3);for(var I=KZ[t-1],P=I>>13,b=I&8191,N=(1<<r)-1,k=u.p||new dl(32768),H=u.h||new dl(N+1),U=Math.ceil(r/3),Q=2*U,K=function(Pt){return(e[Pt]^e[Pt+1]<<U^e[Pt+2]<<Q)&N},Z=new eC(25e3),Ae=new dl(288),fe=new dl(32),ge=0,me=0,ae=u.i||0,Le=0,re=u.w||0,he=0;ae+2<h;++ae){var Ie=K(ae),we=ae&32767,nt=H[Ie];if(k[we]=nt,H[Ie]=we,re<=ae){var rt=h-ae;if((ge>7e3||Le>24576)&&(rt>423||!w)){B=gI(e,g,0,Z,Ae,fe,me,Le,he,ae-he,B),Le=ge=me=0,he=ae;for(var ct=0;ct<286;++ct)Ae[ct]=0;for(var ct=0;ct<30;++ct)fe[ct]=0}var Pe=2,Ve=0,mt=b,gt=we-nt&32767;if(rt>2&&Ie==K(ae-gt))for(var ie=Math.min(P,rt)-1,Ee=Math.min(32767,ae),Me=Math.min(258,rt);gt<=Ee&&--mt&&we!=nt;){if(e[ae+Pe]==e[ae+Pe-gt]){for(var Ye=0;Ye<Me&&e[ae+Ye]==e[ae+Ye-gt];++Ye);if(Ye>Pe){if(Pe=Ye,Ve=gt,Ye>ie)break;for(var at=Math.min(gt,Ye-2),Ze=0,ct=0;ct<at;++ct){var Ct=ae-gt+ct&32767,dt=k[Ct],Lt=Ct-dt&32767;Lt>Ze&&(Ze=Lt,nt=Ct)}}}we=nt,nt=k[we],gt+=we-nt&32767}if(Ve){Z[Le++]=268435456|a2[Pe]<<18|pI[Ve];var kt=a2[Pe]&31,$t=pI[Ve]&31;me+=tC[kt]+rC[$t],++Ae[257+kt],++fe[$t],re=ae+Pe,++ge}else Z[Le++]=e[ae],++Ae[e[ae]]}}for(ae=Math.max(ae,re);ae<h;++ae)Z[Le++]=e[ae],++Ae[e[ae]];B=gI(e,g,w,Z,Ae,fe,me,Le,he,ae-he,B),w||(u.r=B&7|g[B/8|0]<<3,B-=7,u.h=H,u.p=k,u.i=ae,u.w=re)}else{for(var ae=u.w||0;ae<h+w;ae+=65535){var Gt=ae+65535;Gt>=h&&(g[B/8|0]=w,Gt=h),B=SU(g,B+1,e.subarray(ae,Gt))}u.i=h}return VZ(o,0,i+CU(B)+a)},IU=function(){var e=1,t=0;return{p:function(r){for(var i=e,a=t,u=r.length|0,h=0;h!=u;){for(var o=Math.min(h+2655,u);h<o;++h)a+=i+=r[h];i=(i&65535)+15*(i>>16),a=(a&65535)+15*(a>>16)}e=i,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},$Z=function(e,t,r,i,a){if(!a&&(a={l:1},t.dictionary)){var u=t.dictionary.subarray(-32768),h=new RA(u.length+e.length);h.set(u),h.set(e,u.length),e=h,a.w=u.length}return GZ(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,i,a)},FU=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},qZ=function(e,t){var r=t.level,i=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=IU();a.p(t.dictionary),FU(e,2,a.d())}};function c2(e,t){t||(t={});var r=IU();r.p(e);var i=$Z(e,t,t.dictionary?6:2,4);return qZ(i,t),FU(i,i.length-4,r.d()),i}var WZ=typeof TextDecoder<"u"&&new TextDecoder,ZZ=0;try{WZ.decode(EU,{stream:!0}),ZZ=1}catch{}function XZ(e){if(Array.isArray(e))return e}function YZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,u,h,o=[],g=!0,w=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(g=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);g=!0);}catch(B){w=!0,a=B}finally{try{if(!g&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw a}}return o}}function yI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function JZ(e,t){if(e){if(typeof e=="string")return yI(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yI(e,t):void 0}}function eX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vI(e,t){return XZ(e)||YZ(e,t)||JZ(e,t)||eX()}function _I(e,t="utf8"){return new TextDecoder(t).decode(e)}const tX=new TextEncoder;function rX(e){return tX.encode(e)}const nX=1024*8,iX=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),qw={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class nC{constructor(t=nX,r={}){ei(this,"buffer");ei(this,"byteLength");ei(this,"byteOffset");ei(this,"length");ei(this,"offset");ei(this,"lastWrittenByte");ei(this,"littleEndian");ei(this,"_data");ei(this,"_mark");ei(this,"_marks");let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,u=t.byteLength-a;let h=a;(ArrayBuffer.isView(t)||t instanceof nC)&&(t.byteLength!==t.buffer.byteLength&&(h=t.byteOffset+a),t=t.buffer),i?this.lastWrittenByte=u:this.lastWrittenByte=0,this.buffer=t,this.length=u,this.byteLength=u,this.byteOffset=h,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,h,u),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const i=(this.offset+t)*2,a=new Uint8Array(i);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const i=qw[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,u=this.buffer.slice(a,a+i);if(this.littleEndian===iX&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(a,a+i));o.reverse();const g=new qw[r](o.buffer);return this.offset+=i,g.reverse(),g}const h=new qw[r](u);return this.offset+=i,h}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let i=0;i<t;i++)r+=this.readChar();return r}readUtf8(t=1){return _I(this.readBytes(t))}decodeText(t=1,r="utf8"){return _I(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(rX(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Op(e){let t=e.length;for(;--t>=0;)e[t]=0}const sX=3,oX=258,TU=29,aX=256,lX=aX+1+TU,PU=30,AX=512,cX=new Array((lX+2)*2);Op(cX);const uX=new Array(PU*2);Op(uX);const hX=new Array(AX);Op(hX);const dX=new Array(oX-sX+1);Op(dX);const fX=new Array(TU);Op(fX);const pX=new Array(PU);Op(pX);const mX=(e,t,r,i)=>{let a=e&65535|0,u=e>>>16&65535|0,h=0;for(;r!==0;){h=r>2e3?2e3:r,r-=h;do a=a+t[i++]|0,u=u+a|0;while(--h);a%=65521,u%=65521}return a|u<<16|0};var u2=mX;const gX=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},yX=new Uint32Array(gX()),vX=(e,t,r,i)=>{const a=yX,u=i+r;e^=-1;for(let h=i;h<u;h++)e=e>>>8^a[(e^t[h])&255];return e^-1};var uc=vX,h2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},LU={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _X=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var wX=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const i in r)_X(r,i)&&(e[i]=r[i])}}return e},xX=e=>{let t=0;for(let i=0,a=e.length;i<a;i++)t+=e[i].length;const r=new Uint8Array(t);for(let i=0,a=0,u=e.length;i<u;i++){let h=e[i];r.set(h,a),a+=h.length}return r},MU={assign:wX,flattenChunks:xX};let kU=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{kU=!1}const Tg=new Uint8Array(256);for(let e=0;e<256;e++)Tg[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Tg[254]=Tg[254]=1;var bX=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,i,a,u,h=e.length,o=0;for(a=0;a<h;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<h&&(i=e.charCodeAt(a+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),u=0,a=0;u<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<h&&(i=e.charCodeAt(a+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),a++)),r<128?t[u++]=r:r<2048?(t[u++]=192|r>>>6,t[u++]=128|r&63):r<65536?(t[u++]=224|r>>>12,t[u++]=128|r>>>6&63,t[u++]=128|r&63):(t[u++]=240|r>>>18,t[u++]=128|r>>>12&63,t[u++]=128|r>>>6&63,t[u++]=128|r&63);return t};const BX=(e,t)=>{if(t<65534&&e.subarray&&kU)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r};var CX=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,a;const u=new Array(r*2);for(a=0,i=0;i<r;){let h=e[i++];if(h<128){u[a++]=h;continue}let o=Tg[h];if(o>4){u[a++]=65533,i+=o-1;continue}for(h&=o===2?31:o===3?15:7;o>1&&i<r;)h=h<<6|e[i++]&63,o--;if(o>1){u[a++]=65533;continue}h<65536?u[a++]=h:(h-=65536,u[a++]=55296|h>>10&1023,u[a++]=56320|h&1023)}return BX(u,a)},SX=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Tg[e[r]]>t?r:t},d2={string2buf:bX,buf2string:CX,utf8border:SX};function EX(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var IX=EX;const cy=16209,FX=16191;var TX=function(t,r){let i,a,u,h,o,g,w,B,I,P,b,N,k,H,U,Q,K,Z,Ae,fe,ge,me,ae,Le;const re=t.state;i=t.next_in,ae=t.input,a=i+(t.avail_in-5),u=t.next_out,Le=t.output,h=u-(r-t.avail_out),o=u+(t.avail_out-257),g=re.dmax,w=re.wsize,B=re.whave,I=re.wnext,P=re.window,b=re.hold,N=re.bits,k=re.lencode,H=re.distcode,U=(1<<re.lenbits)-1,Q=(1<<re.distbits)-1;e:do{N<15&&(b+=ae[i++]<<N,N+=8,b+=ae[i++]<<N,N+=8),K=k[b&U];t:for(;;){if(Z=K>>>24,b>>>=Z,N-=Z,Z=K>>>16&255,Z===0)Le[u++]=K&65535;else if(Z&16){Ae=K&65535,Z&=15,Z&&(N<Z&&(b+=ae[i++]<<N,N+=8),Ae+=b&(1<<Z)-1,b>>>=Z,N-=Z),N<15&&(b+=ae[i++]<<N,N+=8,b+=ae[i++]<<N,N+=8),K=H[b&Q];r:for(;;){if(Z=K>>>24,b>>>=Z,N-=Z,Z=K>>>16&255,Z&16){if(fe=K&65535,Z&=15,N<Z&&(b+=ae[i++]<<N,N+=8,N<Z&&(b+=ae[i++]<<N,N+=8)),fe+=b&(1<<Z)-1,fe>g){t.msg="invalid distance too far back",re.mode=cy;break e}if(b>>>=Z,N-=Z,Z=u-h,fe>Z){if(Z=fe-Z,Z>B&&re.sane){t.msg="invalid distance too far back",re.mode=cy;break e}if(ge=0,me=P,I===0){if(ge+=w-Z,Z<Ae){Ae-=Z;do Le[u++]=P[ge++];while(--Z);ge=u-fe,me=Le}}else if(I<Z){if(ge+=w+I-Z,Z-=I,Z<Ae){Ae-=Z;do Le[u++]=P[ge++];while(--Z);if(ge=0,I<Ae){Z=I,Ae-=Z;do Le[u++]=P[ge++];while(--Z);ge=u-fe,me=Le}}}else if(ge+=I-Z,Z<Ae){Ae-=Z;do Le[u++]=P[ge++];while(--Z);ge=u-fe,me=Le}for(;Ae>2;)Le[u++]=me[ge++],Le[u++]=me[ge++],Le[u++]=me[ge++],Ae-=3;Ae&&(Le[u++]=me[ge++],Ae>1&&(Le[u++]=me[ge++]))}else{ge=u-fe;do Le[u++]=Le[ge++],Le[u++]=Le[ge++],Le[u++]=Le[ge++],Ae-=3;while(Ae>2);Ae&&(Le[u++]=Le[ge++],Ae>1&&(Le[u++]=Le[ge++]))}}else if(Z&64){t.msg="invalid distance code",re.mode=cy;break e}else{K=H[(K&65535)+(b&(1<<Z)-1)];continue r}break}}else if(Z&64)if(Z&32){re.mode=FX;break e}else{t.msg="invalid literal/length code",re.mode=cy;break e}else{K=k[(K&65535)+(b&(1<<Z)-1)];continue t}break}}while(i<a&&u<o);Ae=N>>3,i-=Ae,N-=Ae<<3,b&=(1<<N)-1,t.next_in=i,t.next_out=u,t.avail_in=i<a?5+(a-i):5-(i-a),t.avail_out=u<o?257+(o-u):257-(u-o),re.hold=b,re.bits=N};const Sf=15,wI=852,xI=592,bI=0,Ww=1,BI=2,PX=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),LX=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),MX=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),kX=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),UX=(e,t,r,i,a,u,h,o)=>{const g=o.bits;let w=0,B=0,I=0,P=0,b=0,N=0,k=0,H=0,U=0,Q=0,K,Z,Ae,fe,ge,me=null,ae;const Le=new Uint16Array(Sf+1),re=new Uint16Array(Sf+1);let he=null,Ie,we,nt;for(w=0;w<=Sf;w++)Le[w]=0;for(B=0;B<i;B++)Le[t[r+B]]++;for(b=g,P=Sf;P>=1&&Le[P]===0;P--);if(b>P&&(b=P),P===0)return a[u++]=1<<24|64<<16|0,a[u++]=1<<24|64<<16|0,o.bits=1,0;for(I=1;I<P&&Le[I]===0;I++);for(b<I&&(b=I),H=1,w=1;w<=Sf;w++)if(H<<=1,H-=Le[w],H<0)return-1;if(H>0&&(e===bI||P!==1))return-1;for(re[1]=0,w=1;w<Sf;w++)re[w+1]=re[w]+Le[w];for(B=0;B<i;B++)t[r+B]!==0&&(h[re[t[r+B]]++]=B);if(e===bI?(me=he=h,ae=20):e===Ww?(me=PX,he=LX,ae=257):(me=MX,he=kX,ae=0),Q=0,B=0,w=I,ge=u,N=b,k=0,Ae=-1,U=1<<b,fe=U-1,e===Ww&&U>wI||e===BI&&U>xI)return 1;for(;;){Ie=w-k,h[B]+1<ae?(we=0,nt=h[B]):h[B]>=ae?(we=he[h[B]-ae],nt=me[h[B]-ae]):(we=96,nt=0),K=1<<w-k,Z=1<<N,I=Z;do Z-=K,a[ge+(Q>>k)+Z]=Ie<<24|we<<16|nt|0;while(Z!==0);for(K=1<<w-1;Q&K;)K>>=1;if(K!==0?(Q&=K-1,Q+=K):Q=0,B++,--Le[w]===0){if(w===P)break;w=t[r+h[B]]}if(w>b&&(Q&fe)!==Ae){for(k===0&&(k=b),ge+=I,N=w-k,H=1<<N;N+k<P&&(H-=Le[N+k],!(H<=0));)N++,H<<=1;if(U+=1<<N,e===Ww&&U>wI||e===BI&&U>xI)return 1;Ae=Q&fe,a[Ae]=b<<24|N<<16|ge-u|0}}return Q!==0&&(a[ge+Q]=w-k<<24|64<<16|0),o.bits=b,0};var tg=UX;const RX=0,UU=1,RU=2,{Z_FINISH:CI,Z_BLOCK:NX,Z_TREES:uy,Z_OK:Qd,Z_STREAM_END:DX,Z_NEED_DICT:QX,Z_STREAM_ERROR:Zl,Z_DATA_ERROR:NU,Z_MEM_ERROR:DU,Z_BUF_ERROR:OX,Z_DEFLATED:SI}=LU,j1=16180,EI=16181,II=16182,FI=16183,TI=16184,PI=16185,LI=16186,MI=16187,kI=16188,UI=16189,Kv=16190,ou=16191,Zw=16192,RI=16193,Xw=16194,NI=16195,DI=16196,QI=16197,OI=16198,hy=16199,dy=16200,zI=16201,HI=16202,jI=16203,VI=16204,KI=16205,Yw=16206,GI=16207,$I=16208,qi=16209,QU=16210,OU=16211,zX=852,HX=592,jX=15,VX=jX,qI=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function KX(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const jd=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<j1||t.mode>OU?1:0},zU=e=>{if(jd(e))return Zl;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=j1,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(zX),t.distcode=t.distdyn=new Int32Array(HX),t.sane=1,t.back=-1,Qd},HU=e=>{if(jd(e))return Zl;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,zU(e)},jU=(e,t)=>{let r;if(jd(e))return Zl;const i=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Zl:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,HU(e))},VU=(e,t)=>{if(!e)return Zl;const r=new KX;e.state=r,r.strm=e,r.window=null,r.mode=j1;const i=jU(e,t);return i!==Qd&&(e.state=null),i},GX=e=>VU(e,VX);let WI=!0,Jw,ex;const $X=e=>{if(WI){Jw=new Int32Array(512),ex=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tg(UU,e.lens,0,288,Jw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tg(RU,e.lens,0,32,ex,0,e.work,{bits:5}),WI=!1}e.lencode=Jw,e.lenbits=9,e.distcode=ex,e.distbits=5},KU=(e,t,r,i)=>{let a;const u=e.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),i>=u.wsize?(u.window.set(t.subarray(r-u.wsize,r),0),u.wnext=0,u.whave=u.wsize):(a=u.wsize-u.wnext,a>i&&(a=i),u.window.set(t.subarray(r-i,r-i+a),u.wnext),i-=a,i?(u.window.set(t.subarray(r-i,r),0),u.wnext=i,u.whave=u.wsize):(u.wnext+=a,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=a))),0},qX=(e,t)=>{let r,i,a,u,h,o,g,w,B,I,P,b,N,k,H=0,U,Q,K,Z,Ae,fe,ge,me;const ae=new Uint8Array(4);let Le,re;const he=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(jd(e)||!e.output||!e.input&&e.avail_in!==0)return Zl;r=e.state,r.mode===ou&&(r.mode=Zw),h=e.next_out,a=e.output,g=e.avail_out,u=e.next_in,i=e.input,o=e.avail_in,w=r.hold,B=r.bits,I=o,P=g,me=Qd;e:for(;;)switch(r.mode){case j1:if(r.wrap===0){r.mode=Zw;break}for(;B<16;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(r.wrap&2&&w===35615){r.wbits===0&&(r.wbits=15),r.check=0,ae[0]=w&255,ae[1]=w>>>8&255,r.check=uc(r.check,ae,2,0),w=0,B=0,r.mode=EI;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((w&255)<<8)+(w>>8))%31){e.msg="incorrect header check",r.mode=qi;break}if((w&15)!==SI){e.msg="unknown compression method",r.mode=qi;break}if(w>>>=4,B-=4,ge=(w&15)+8,r.wbits===0&&(r.wbits=ge),ge>15||ge>r.wbits){e.msg="invalid window size",r.mode=qi;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=w&512?UI:ou,w=0,B=0;break;case EI:for(;B<16;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(r.flags=w,(r.flags&255)!==SI){e.msg="unknown compression method",r.mode=qi;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=qi;break}r.head&&(r.head.text=w>>8&1),r.flags&512&&r.wrap&4&&(ae[0]=w&255,ae[1]=w>>>8&255,r.check=uc(r.check,ae,2,0)),w=0,B=0,r.mode=II;case II:for(;B<32;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}r.head&&(r.head.time=w),r.flags&512&&r.wrap&4&&(ae[0]=w&255,ae[1]=w>>>8&255,ae[2]=w>>>16&255,ae[3]=w>>>24&255,r.check=uc(r.check,ae,4,0)),w=0,B=0,r.mode=FI;case FI:for(;B<16;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}r.head&&(r.head.xflags=w&255,r.head.os=w>>8),r.flags&512&&r.wrap&4&&(ae[0]=w&255,ae[1]=w>>>8&255,r.check=uc(r.check,ae,2,0)),w=0,B=0,r.mode=TI;case TI:if(r.flags&1024){for(;B<16;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}r.length=w,r.head&&(r.head.extra_len=w),r.flags&512&&r.wrap&4&&(ae[0]=w&255,ae[1]=w>>>8&255,r.check=uc(r.check,ae,2,0)),w=0,B=0}else r.head&&(r.head.extra=null);r.mode=PI;case PI:if(r.flags&1024&&(b=r.length,b>o&&(b=o),b&&(r.head&&(ge=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(u,u+b),ge)),r.flags&512&&r.wrap&4&&(r.check=uc(r.check,i,b,u)),o-=b,u+=b,r.length-=b),r.length))break e;r.length=0,r.mode=LI;case LI:if(r.flags&2048){if(o===0)break e;b=0;do ge=i[u+b++],r.head&&ge&&r.length<65536&&(r.head.name+=String.fromCharCode(ge));while(ge&&b<o);if(r.flags&512&&r.wrap&4&&(r.check=uc(r.check,i,b,u)),o-=b,u+=b,ge)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=MI;case MI:if(r.flags&4096){if(o===0)break e;b=0;do ge=i[u+b++],r.head&&ge&&r.length<65536&&(r.head.comment+=String.fromCharCode(ge));while(ge&&b<o);if(r.flags&512&&r.wrap&4&&(r.check=uc(r.check,i,b,u)),o-=b,u+=b,ge)break e}else r.head&&(r.head.comment=null);r.mode=kI;case kI:if(r.flags&512){for(;B<16;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(r.wrap&4&&w!==(r.check&65535)){e.msg="header crc mismatch",r.mode=qi;break}w=0,B=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=ou;break;case UI:for(;B<32;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}e.adler=r.check=qI(w),w=0,B=0,r.mode=Kv;case Kv:if(r.havedict===0)return e.next_out=h,e.avail_out=g,e.next_in=u,e.avail_in=o,r.hold=w,r.bits=B,QX;e.adler=r.check=1,r.mode=ou;case ou:if(t===NX||t===uy)break e;case Zw:if(r.last){w>>>=B&7,B-=B&7,r.mode=Yw;break}for(;B<3;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}switch(r.last=w&1,w>>>=1,B-=1,w&3){case 0:r.mode=RI;break;case 1:if($X(r),r.mode=hy,t===uy){w>>>=2,B-=2;break e}break;case 2:r.mode=DI;break;case 3:e.msg="invalid block type",r.mode=qi}w>>>=2,B-=2;break;case RI:for(w>>>=B&7,B-=B&7;B<32;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if((w&65535)!==(w>>>16^65535)){e.msg="invalid stored block lengths",r.mode=qi;break}if(r.length=w&65535,w=0,B=0,r.mode=Xw,t===uy)break e;case Xw:r.mode=NI;case NI:if(b=r.length,b){if(b>o&&(b=o),b>g&&(b=g),b===0)break e;a.set(i.subarray(u,u+b),h),o-=b,u+=b,g-=b,h+=b,r.length-=b;break}r.mode=ou;break;case DI:for(;B<14;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(r.nlen=(w&31)+257,w>>>=5,B-=5,r.ndist=(w&31)+1,w>>>=5,B-=5,r.ncode=(w&15)+4,w>>>=4,B-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=qi;break}r.have=0,r.mode=QI;case QI:for(;r.have<r.ncode;){for(;B<3;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}r.lens[he[r.have++]]=w&7,w>>>=3,B-=3}for(;r.have<19;)r.lens[he[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Le={bits:r.lenbits},me=tg(RX,r.lens,0,19,r.lencode,0,r.work,Le),r.lenbits=Le.bits,me){e.msg="invalid code lengths set",r.mode=qi;break}r.have=0,r.mode=OI;case OI:for(;r.have<r.nlen+r.ndist;){for(;H=r.lencode[w&(1<<r.lenbits)-1],U=H>>>24,Q=H>>>16&255,K=H&65535,!(U<=B);){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(K<16)w>>>=U,B-=U,r.lens[r.have++]=K;else{if(K===16){for(re=U+2;B<re;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(w>>>=U,B-=U,r.have===0){e.msg="invalid bit length repeat",r.mode=qi;break}ge=r.lens[r.have-1],b=3+(w&3),w>>>=2,B-=2}else if(K===17){for(re=U+3;B<re;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}w>>>=U,B-=U,ge=0,b=3+(w&7),w>>>=3,B-=3}else{for(re=U+7;B<re;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}w>>>=U,B-=U,ge=0,b=11+(w&127),w>>>=7,B-=7}if(r.have+b>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=qi;break}for(;b--;)r.lens[r.have++]=ge}}if(r.mode===qi)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=qi;break}if(r.lenbits=9,Le={bits:r.lenbits},me=tg(UU,r.lens,0,r.nlen,r.lencode,0,r.work,Le),r.lenbits=Le.bits,me){e.msg="invalid literal/lengths set",r.mode=qi;break}if(r.distbits=6,r.distcode=r.distdyn,Le={bits:r.distbits},me=tg(RU,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Le),r.distbits=Le.bits,me){e.msg="invalid distances set",r.mode=qi;break}if(r.mode=hy,t===uy)break e;case hy:r.mode=dy;case dy:if(o>=6&&g>=258){e.next_out=h,e.avail_out=g,e.next_in=u,e.avail_in=o,r.hold=w,r.bits=B,TX(e,P),h=e.next_out,a=e.output,g=e.avail_out,u=e.next_in,i=e.input,o=e.avail_in,w=r.hold,B=r.bits,r.mode===ou&&(r.back=-1);break}for(r.back=0;H=r.lencode[w&(1<<r.lenbits)-1],U=H>>>24,Q=H>>>16&255,K=H&65535,!(U<=B);){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(Q&&!(Q&240)){for(Z=U,Ae=Q,fe=K;H=r.lencode[fe+((w&(1<<Z+Ae)-1)>>Z)],U=H>>>24,Q=H>>>16&255,K=H&65535,!(Z+U<=B);){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}w>>>=Z,B-=Z,r.back+=Z}if(w>>>=U,B-=U,r.back+=U,r.length=K,Q===0){r.mode=KI;break}if(Q&32){r.back=-1,r.mode=ou;break}if(Q&64){e.msg="invalid literal/length code",r.mode=qi;break}r.extra=Q&15,r.mode=zI;case zI:if(r.extra){for(re=r.extra;B<re;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}r.length+=w&(1<<r.extra)-1,w>>>=r.extra,B-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=HI;case HI:for(;H=r.distcode[w&(1<<r.distbits)-1],U=H>>>24,Q=H>>>16&255,K=H&65535,!(U<=B);){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(!(Q&240)){for(Z=U,Ae=Q,fe=K;H=r.distcode[fe+((w&(1<<Z+Ae)-1)>>Z)],U=H>>>24,Q=H>>>16&255,K=H&65535,!(Z+U<=B);){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}w>>>=Z,B-=Z,r.back+=Z}if(w>>>=U,B-=U,r.back+=U,Q&64){e.msg="invalid distance code",r.mode=qi;break}r.offset=K,r.extra=Q&15,r.mode=jI;case jI:if(r.extra){for(re=r.extra;B<re;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}r.offset+=w&(1<<r.extra)-1,w>>>=r.extra,B-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=qi;break}r.mode=VI;case VI:if(g===0)break e;if(b=P-g,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=qi;break}b>r.wnext?(b-=r.wnext,N=r.wsize-b):N=r.wnext-b,b>r.length&&(b=r.length),k=r.window}else k=a,N=h-r.offset,b=r.length;b>g&&(b=g),g-=b,r.length-=b;do a[h++]=k[N++];while(--b);r.length===0&&(r.mode=dy);break;case KI:if(g===0)break e;a[h++]=r.length,g--,r.mode=dy;break;case Yw:if(r.wrap){for(;B<32;){if(o===0)break e;o--,w|=i[u++]<<B,B+=8}if(P-=g,e.total_out+=P,r.total+=P,r.wrap&4&&P&&(e.adler=r.check=r.flags?uc(r.check,a,P,h-P):u2(r.check,a,P,h-P)),P=g,r.wrap&4&&(r.flags?w:qI(w))!==r.check){e.msg="incorrect data check",r.mode=qi;break}w=0,B=0}r.mode=GI;case GI:if(r.wrap&&r.flags){for(;B<32;){if(o===0)break e;o--,w+=i[u++]<<B,B+=8}if(r.wrap&4&&w!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=qi;break}w=0,B=0}r.mode=$I;case $I:me=DX;break e;case qi:me=NU;break e;case QU:return DU;case OU:default:return Zl}return e.next_out=h,e.avail_out=g,e.next_in=u,e.avail_in=o,r.hold=w,r.bits=B,(r.wsize||P!==e.avail_out&&r.mode<qi&&(r.mode<Yw||t!==CI))&&KU(e,e.output,e.next_out,P-e.avail_out),I-=e.avail_in,P-=e.avail_out,e.total_in+=I,e.total_out+=P,r.total+=P,r.wrap&4&&P&&(e.adler=r.check=r.flags?uc(r.check,a,P,e.next_out-P):u2(r.check,a,P,e.next_out-P)),e.data_type=r.bits+(r.last?64:0)+(r.mode===ou?128:0)+(r.mode===hy||r.mode===Xw?256:0),(I===0&&P===0||t===CI)&&me===Qd&&(me=OX),me},WX=e=>{if(jd(e))return Zl;let t=e.state;return t.window&&(t.window=null),e.state=null,Qd},ZX=(e,t)=>{if(jd(e))return Zl;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,Qd):Zl},XX=(e,t)=>{const r=t.length;let i,a,u;return jd(e)||(i=e.state,i.wrap!==0&&i.mode!==Kv)?Zl:i.mode===Kv&&(a=1,a=u2(a,t,r,0),a!==i.check)?NU:(u=KU(e,t,r,r),u?(i.mode=QU,DU):(i.havedict=1,Qd))};var YX=HU,JX=jU,eY=zU,tY=GX,rY=VU,nY=qX,iY=WX,sY=ZX,oY=XX,aY="pako inflate (from Nodeca project)",cu={inflateReset:YX,inflateReset2:JX,inflateResetKeep:eY,inflateInit:tY,inflateInit2:rY,inflate:nY,inflateEnd:iY,inflateGetHeader:sY,inflateSetDictionary:oY,inflateInfo:aY};function lY(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var AY=lY;const GU=Object.prototype.toString,{Z_NO_FLUSH:cY,Z_FINISH:uY,Z_OK:Pg,Z_STREAM_END:tx,Z_NEED_DICT:rx,Z_STREAM_ERROR:hY,Z_DATA_ERROR:ZI,Z_MEM_ERROR:dY}=LU;function Gg(e){this.options=MU.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new IX,this.strm.avail_out=0;let r=cu.inflateInit2(this.strm,t.windowBits);if(r!==Pg)throw new Error(h2[r]);if(this.header=new AY,cu.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=d2.string2buf(t.dictionary):GU.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=cu.inflateSetDictionary(this.strm,t.dictionary),r!==Pg)))throw new Error(h2[r])}Gg.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let u,h,o;if(this.ended)return!1;for(t===~~t?h=t:h=t===!0?uY:cY,GU.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),u=cu.inflate(r,h),u===rx&&a&&(u=cu.inflateSetDictionary(r,a),u===Pg?u=cu.inflate(r,h):u===ZI&&(u=rx));r.avail_in>0&&u===tx&&r.state.wrap>0&&e[r.next_in]!==0;)cu.inflateReset(r),u=cu.inflate(r,h);switch(u){case hY:case ZI:case rx:case dY:return this.onEnd(u),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||u===tx))if(this.options.to==="string"){let g=d2.utf8border(r.output,r.next_out),w=r.next_out-g,B=d2.buf2string(r.output,g);r.next_out=w,r.avail_out=i-w,w&&r.output.set(r.output.subarray(g,g+w),0),this.onData(B)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(u===Pg&&o===0)){if(u===tx)return u=cu.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Gg.prototype.onData=function(e){this.chunks.push(e)};Gg.prototype.onEnd=function(e){e===Pg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=MU.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function fY(e,t){const r=new Gg(t);if(r.push(e),r.err)throw r.msg||h2[r.err];return r.result}var pY=Gg,mY=fY,gY={Inflate:pY,inflate:mY};const{Inflate:yY,inflate:vY}=gY;var f2=yY,$U=vY;const p2=Object.freeze(Object.defineProperty({__proto__:null,Inflate:f2,inflate:$U},Symbol.toStringTag,{value:"Module"})),qU=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;qU[e]=t}const XI=4294967295;function _Y(e,t,r){let i=e;for(let a=0;a<r;a++)i=qU[(i^t[a])&255]^i>>>8;return i}function wY(e,t){return(_Y(XI,e,t)^XI)>>>0}function YI(e,t,r){const i=e.readUint32(),a=wY(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==i)throw new Error(`CRC mismatch for chunk ${r}. Expected ${i}, found ${a}`)}function WU(e,t,r){for(let i=0;i<r;i++)t[i]=e[i]}function ZU(e,t,r,i){let a=0;for(;a<i;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-i]&255}function XU(e,t,r,i){let a=0;if(r.length===0)for(;a<i;a++)t[a]=e[a];else for(;a<i;a++)t[a]=e[a]+r[a]&255}function YU(e,t,r,i,a){let u=0;if(r.length===0){for(;u<a;u++)t[u]=e[u];for(;u<i;u++)t[u]=e[u]+(t[u-a]>>1)&255}else{for(;u<a;u++)t[u]=e[u]+(r[u]>>1)&255;for(;u<i;u++)t[u]=e[u]+(t[u-a]+r[u]>>1)&255}}function JU(e,t,r,i,a){let u=0;if(r.length===0){for(;u<a;u++)t[u]=e[u];for(;u<i;u++)t[u]=e[u]+t[u-a]&255}else{for(;u<a;u++)t[u]=e[u]+r[u]&255;for(;u<i;u++)t[u]=e[u]+xY(t[u-a],r[u],r[u-a])&255}}function xY(e,t,r){const i=e+t-r,a=Math.abs(i-e),u=Math.abs(i-t),h=Math.abs(i-r);return a<=u&&a<=h?e:u<=h?t:r}function bY(e,t,r,i,a,u){switch(e){case 0:WU(t,r,a);break;case 1:ZU(t,r,a,u);break;case 2:XU(t,r,i,a);break;case 3:YU(t,r,i,a,u);break;case 4:JU(t,r,i,a,u);break;default:throw new Error(`Unsupported filter: ${e}`)}}const BY=new Uint16Array([255]),CY=new Uint8Array(BY.buffer),SY=CY[0]===255;function EY(e){const{data:t,width:r,height:i,channels:a,depth:u}=e,h=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(u/8)*a,g=new Uint8Array(i*r*o);let w=0;for(let B=0;B<7;B++){const I=h[B],P=Math.ceil((r-I.x)/I.xStep),b=Math.ceil((i-I.y)/I.yStep);if(P<=0||b<=0)continue;const N=P*o,k=new Uint8Array(N);for(let H=0;H<b;H++){const U=t[w++],Q=t.subarray(w,w+N);w+=N;const K=new Uint8Array(N);bY(U,Q,K,k,N,o),k.set(K);for(let Z=0;Z<P;Z++){const Ae=I.x+Z*I.xStep,fe=I.y+H*I.yStep;if(!(Ae>=r||fe>=i))for(let ge=0;ge<o;ge++)g[(fe*r+Ae)*o+ge]=K[Z*o+ge]}}}if(u===16){const B=new Uint16Array(g.buffer);if(SY)for(let I=0;I<B.length;I++)B[I]=IY(B[I]);return B}else return g}function IY(e){return(e&255)<<8|e>>8&255}const FY=new Uint16Array([255]),TY=new Uint8Array(FY.buffer),PY=TY[0]===255,LY=new Uint8Array(0);function JI(e){const{data:t,width:r,height:i,channels:a,depth:u}=e,h=Math.ceil(u/8)*a,o=Math.ceil(u/8*a*r),g=new Uint8Array(i*o);let w=LY,B=0,I,P;for(let b=0;b<i;b++){switch(I=t.subarray(B+1,B+1+o),P=g.subarray(b*o,(b+1)*o),t[B]){case 0:WU(I,P,o);break;case 1:ZU(I,P,o,h);break;case 2:XU(I,P,w,o);break;case 3:YU(I,P,w,o,h);break;case 4:JU(I,P,w,o,h);break;default:throw new Error(`Unsupported filter: ${t[B]}`)}w=P,B+=o+1}if(u===16){const b=new Uint16Array(g.buffer);if(PY)for(let N=0;N<b.length;N++)b[N]=MY(b[N]);return b}else return g}function MY(e){return(e&255)<<8|e>>8&255}const zy=Uint8Array.of(137,80,78,71,13,10,26,10);function eF(e){if(!kY(e.readBytes(zy.length)))throw new Error("wrong PNG signature")}function kY(e){if(e.length<zy.length)return!1;for(let t=0;t<zy.length;t++)if(e[t]!==zy[t])return!1;return!0}const UY="tEXt",RY=0,e6=new TextDecoder("latin1");function NY(e){if(QY(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const DY=/^[\u0000-\u00FF]*$/;function QY(e){if(!DY.test(e))throw new Error("invalid latin1 text")}function OY(e,t,r){const i=t6(t);e[i]=zY(t,r-i.length-1)}function t6(e){for(e.mark();e.readByte()!==RY;);const t=e.offset;e.reset();const r=e6.decode(e.readBytes(t-e.offset-1));return e.skip(1),NY(r),r}function zY(e,t){return e6.decode(e.readBytes(t))}const ll={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},nx={UNKNOWN:-1,DEFLATE:0},tF={UNKNOWN:-1,ADAPTIVE:0},ix={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},fy={NONE:0,BACKGROUND:1,PREVIOUS:2},sx={SOURCE:0,OVER:1};class HY extends nC{constructor(r,i={}){super(r);ei(this,"_checkCrc");ei(this,"_inflator");ei(this,"_png");ei(this,"_apng");ei(this,"_end");ei(this,"_hasPalette");ei(this,"_palette");ei(this,"_hasTransparency");ei(this,"_transparency");ei(this,"_compressionMethod");ei(this,"_filterMethod");ei(this,"_interlaceMethod");ei(this,"_colorType");ei(this,"_isAnimated");ei(this,"_numberOfFrames");ei(this,"_numberOfPlays");ei(this,"_frames");ei(this,"_writingDataChunks");const{checkCrc:a=!1}=i;this._checkCrc=a,this._inflator=new f2,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=nx.UNKNOWN,this._filterMethod=tF.UNKNOWN,this._interlaceMethod=ix.UNKNOWN,this._colorType=ll.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(eF(this);!this._end;){const r=this.readUint32(),i=this.readChars(4);this.decodeChunk(r,i)}return this.decodeImage(),this._png}decodeApng(){for(eF(this);!this._end;){const r=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(r,i)}return this.decodeApngImage(),this._apng}decodeChunk(r,i){const a=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case UY:OY(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?YI(this,r+4,i):this.skip(4)}decodeApngChunk(r,i){const a=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,i),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?YI(this,r+4,i):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=jY(this.readUint8());const i=this.readUint8();this._colorType=i;let a;switch(i){case ll.GREYSCALE:a=1;break;case ll.TRUECOLOUR:a=3;break;case ll.INDEXED_COLOUR:a=1;break;case ll.GREYSCALE_ALPHA:a=2;break;case ll.TRUECOLOUR_ALPHA:a=4;break;case ll.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==nx.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const i=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let u=0;u<i;u++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const i=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let i=r,a=this.offset+this.byteOffset;if(a+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,a,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ll.GREYSCALE:case ll.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let i=0;i<r/2;i++)this._transparency[i]=this.readUint16();break}case ll.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let i=0;for(;i<r;i++){const a=this.readByte();this._palette[i].push(a)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case ll.UNKNOWN:case ll.GREYSCALE_ALPHA:case ll.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const i=t6(this),a=this.readUint8();if(a!==nx.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const u=this.readBytes(r-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:$U(u)}}decodepHYs(){const r=this.readUint32(),i=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:i,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const i={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=JI({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)i.data=a.data;else{const u=this._apng.frames.at(r-1);this.disposeFrame(a,u,i),this.addFrameDataToCanvas(i,a)}this._apng.frames.push(i)}}return this._apng}disposeFrame(r,i,a){switch(r.disposeOp){case fy.NONE:break;case fy.BACKGROUND:for(let u=0;u<this._png.height;u++)for(let h=0;h<this._png.width;h++){const o=(u*r.width+h)*this._png.channels;for(let g=0;g<this._png.channels;g++)a.data[o+g]=0}break;case fy.PREVIOUS:a.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,i){const a=1<<this._png.depth,u=(h,o)=>{const g=((h+i.yOffset)*this._png.width+i.xOffset+o)*this._png.channels,w=(h*i.width+o)*this._png.channels;return{index:g,frameIndex:w}};switch(i.blendOp){case sx.SOURCE:for(let h=0;h<i.height;h++)for(let o=0;o<i.width;o++){const{index:g,frameIndex:w}=u(h,o);for(let B=0;B<this._png.channels;B++)r.data[g+B]=i.data[w+B]}break;case sx.OVER:for(let h=0;h<i.height;h++)for(let o=0;o<i.width;o++){const{index:g,frameIndex:w}=u(h,o);for(let B=0;B<this._png.channels;B++){const I=i.data[w+this._png.channels-1]/a,P=B%(this._png.channels-1)===0?1:i.data[w+B],b=Math.floor(I*P+(1-I)*r.data[g+B]);r.data[g+B]+=b}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var i;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((i=this._frames)==null?void 0:i.at(0)).data:this._inflator.result;if(this._filterMethod!==tF.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===ix.NO_INTERLACE)this._png.data=JI({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===ix.ADAM7)this._png.data=EY({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,i=this._frames.at(-1);i?i.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:fy.NONE,blendOp:sx.SOURCE,data:r}),this._inflator=new f2,this._writingDataChunks=!1}}function jY(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var rF;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(rF||(rF={}));function VY(e,t){return new HY(e,t).decode()}var An=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ox(){An.console&&typeof An.console.log=="function"&&An.console.log.apply(An.console,arguments)}var vi={log:ox,warn:function(e){An.console&&(typeof An.console.warn=="function"?An.console.warn.apply(An.console,arguments):ox.call(null,arguments))},error:function(e){An.console&&(typeof An.console.error=="function"?An.console.error.apply(An.console,arguments):ox(e))}};function ax(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){cd(i.response,t,r)},i.onerror=function(){vi.error("could not download file")},i.send()}function nF(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function py(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var cd=An.saveAs||((typeof window>"u"?"undefined":oi(window))!=="object"||window!==An?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var i=An.URL||An.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?nF(a.href)?ax(e,t,r):py(a,a.target="_blank"):py(a)):(a.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){py(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(nF(e))ax(e,t,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){py(i)})}else navigator.msSaveOrOpenBlob(function(a,u){return u===void 0?u={autoBom:!1}:oi(u)!=="object"&&(vi.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return ax(e,t,r);var a=e.type==="application/octet-stream",u=/constructor/i.test(An.HTMLElement)||An.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||a&&u)&&(typeof FileReader>"u"?"undefined":oi(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var B=o.result;B=h?B:B.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=B:location=B,i=null},o.readAsDataURL(e)}else{var g=An.URL||An.webkitURL,w=g.createObjectURL(e);i?i.location=w:location.href=w,i=null,setTimeout(function(){g.revokeObjectURL(w)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function r6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<r.length;i++){var a=r[i].re,u=r[i].process,h=a.exec(e);h&&(t=u(h),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),g=this.g.toString(16),w=this.b.toString(16);return o.length==1&&(o="0"+o),g.length==1&&(g="0"+g),w.length==1&&(w="0"+w),"#"+o+g+w}}var Hy=An.atob.bind(An),iF=An.btoa.bind(An);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function lx(e,t){var r=e[0],i=e[1],a=e[2],u=e[3];r=Go(r,i,a,u,t[0],7,-680876936),u=Go(u,r,i,a,t[1],12,-389564586),a=Go(a,u,r,i,t[2],17,606105819),i=Go(i,a,u,r,t[3],22,-1044525330),r=Go(r,i,a,u,t[4],7,-176418897),u=Go(u,r,i,a,t[5],12,1200080426),a=Go(a,u,r,i,t[6],17,-1473231341),i=Go(i,a,u,r,t[7],22,-45705983),r=Go(r,i,a,u,t[8],7,1770035416),u=Go(u,r,i,a,t[9],12,-1958414417),a=Go(a,u,r,i,t[10],17,-42063),i=Go(i,a,u,r,t[11],22,-1990404162),r=Go(r,i,a,u,t[12],7,1804603682),u=Go(u,r,i,a,t[13],12,-40341101),a=Go(a,u,r,i,t[14],17,-1502002290),r=$o(r,i=Go(i,a,u,r,t[15],22,1236535329),a,u,t[1],5,-165796510),u=$o(u,r,i,a,t[6],9,-1069501632),a=$o(a,u,r,i,t[11],14,643717713),i=$o(i,a,u,r,t[0],20,-373897302),r=$o(r,i,a,u,t[5],5,-701558691),u=$o(u,r,i,a,t[10],9,38016083),a=$o(a,u,r,i,t[15],14,-660478335),i=$o(i,a,u,r,t[4],20,-405537848),r=$o(r,i,a,u,t[9],5,568446438),u=$o(u,r,i,a,t[14],9,-1019803690),a=$o(a,u,r,i,t[3],14,-187363961),i=$o(i,a,u,r,t[8],20,1163531501),r=$o(r,i,a,u,t[13],5,-1444681467),u=$o(u,r,i,a,t[2],9,-51403784),a=$o(a,u,r,i,t[7],14,1735328473),r=qo(r,i=$o(i,a,u,r,t[12],20,-1926607734),a,u,t[5],4,-378558),u=qo(u,r,i,a,t[8],11,-2022574463),a=qo(a,u,r,i,t[11],16,1839030562),i=qo(i,a,u,r,t[14],23,-35309556),r=qo(r,i,a,u,t[1],4,-1530992060),u=qo(u,r,i,a,t[4],11,1272893353),a=qo(a,u,r,i,t[7],16,-155497632),i=qo(i,a,u,r,t[10],23,-1094730640),r=qo(r,i,a,u,t[13],4,681279174),u=qo(u,r,i,a,t[0],11,-358537222),a=qo(a,u,r,i,t[3],16,-722521979),i=qo(i,a,u,r,t[6],23,76029189),r=qo(r,i,a,u,t[9],4,-640364487),u=qo(u,r,i,a,t[12],11,-421815835),a=qo(a,u,r,i,t[15],16,530742520),r=Wo(r,i=qo(i,a,u,r,t[2],23,-995338651),a,u,t[0],6,-198630844),u=Wo(u,r,i,a,t[7],10,1126891415),a=Wo(a,u,r,i,t[14],15,-1416354905),i=Wo(i,a,u,r,t[5],21,-57434055),r=Wo(r,i,a,u,t[12],6,1700485571),u=Wo(u,r,i,a,t[3],10,-1894986606),a=Wo(a,u,r,i,t[10],15,-1051523),i=Wo(i,a,u,r,t[1],21,-2054922799),r=Wo(r,i,a,u,t[8],6,1873313359),u=Wo(u,r,i,a,t[15],10,-30611744),a=Wo(a,u,r,i,t[6],15,-1560198380),i=Wo(i,a,u,r,t[13],21,1309151649),r=Wo(r,i,a,u,t[4],6,-145523070),u=Wo(u,r,i,a,t[11],10,-1120210379),a=Wo(a,u,r,i,t[2],15,718787259),i=Wo(i,a,u,r,t[9],21,-343485551),e[0]=ph(r,e[0]),e[1]=ph(i,e[1]),e[2]=ph(a,e[2]),e[3]=ph(u,e[3])}function V1(e,t,r,i,a,u){return t=ph(ph(t,e),ph(i,u)),ph(t<<a|t>>>32-a,r)}function Go(e,t,r,i,a,u,h){return V1(t&r|~t&i,e,t,a,u,h)}function $o(e,t,r,i,a,u,h){return V1(t&i|r&~i,e,t,a,u,h)}function qo(e,t,r,i,a,u,h){return V1(t^r^i,e,t,a,u,h)}function Wo(e,t,r,i,a,u,h){return V1(r^(t|~i),e,t,a,u,h)}function n6(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)lx(i,KY(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(lx(i,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,lx(i,a),i}function KY(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var sF="0123456789abcdef".split("");function GY(e){for(var t="",r=0;r<4;r++)t+=sF[e>>8*r+4&15]+sF[e>>8*r&15];return t}function $Y(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function m2(e){return n6(e).map($Y).join("")}var qY=function(e){for(var t=0;t<e.length;t++)e[t]=GY(e[t]);return e.join("")}(n6("hello"))!="5d41402abc4b2a76b9719d911017c592";function ph(e,t){if(qY){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function g2(e,t){var r,i,a,u;if(e!==r){for(var h=(a=e,u=1+(256/e.length|0),new Array(u+1).join(a)),o=[],g=0;g<256;g++)o[g]=g;var w=0;for(g=0;g<256;g++){var B=o[g];w=(w+B+h.charCodeAt(g))%256,o[g]=o[w],o[w]=B}r=e,i=o}else o=i;var I=t.length,P=0,b=0,N="";for(g=0;g<I;g++)b=(b+(B=o[P=(P+1)%256]))%256,o[P]=o[b],o[b]=B,h=o[(o[P]+o[b])%256],N+=String.fromCharCode(t.charCodeAt(g)^h);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var oF={print:4,modify:8,copy:16,"annot-forms":32};function Lf(e,t,r,i){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(oF.perm!==void 0)throw new Error("Invalid permission: "+o);a+=oF[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var u=(t+this.padding).substr(0,32),h=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,h),this.P=-(1+(255^a)),this.encryptionKey=m2(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=g2(this.encryptionKey,this.padding)}function Mf(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,i=0;i<r;i++){var a=e.charCodeAt(i);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[i]}return t}function aF(e){if(oi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,i,a){if(a=a||!1,typeof r!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var u=Math.random().toString(35);return t[r][u]=[i,!!a],u},this.unsubscribe=function(r){for(var i in t)if(t[i][r])return delete t[i][r],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var u in t[r]){var h=t[r][u];try{h[0].apply(e,i)}catch(o){An.console&&vi.error("jsPDF PubSub Error",o.message,o)}h[1]&&a.push(u)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Gv(e){if(!(this instanceof Gv))return new Gv(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function i6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function hd(e,t,r,i,a){if(!(this instanceof hd))return new hd(e,t,r,i,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,i6.call(this,i,a)}function qf(e,t,r,i,a){if(!(this instanceof qf))return new qf(e,t,r,i,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,i6.call(this,i,a)}function Hr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],u=arguments[3],h=[],o=1,g=16,w="S",B=null;oi(e=e||{})==="object"&&(r=e.orientation,i=e.unit||i,a=e.format||a,u=e.compress||e.compressPdf||u,(B=e.encryption||null)!==null&&(B.userPassword=B.userPassword||"",B.ownerPassword=B.ownerPassword||"",B.userPermissions=B.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(g=e.floatPrecision),w=e.defaultPathOperation||"S"),h=e.filters||(u===!0?["FlateEncode"]:h),i=i||"mm",r=(""+(r||"P")).toLowerCase();var I=e.putOnlyUsedFonts||!1,P={},b={internal:{},__private__:{}};b.__private__.PubSub=aF;var N="1.3",k=b.__private__.getPdfVersion=function(){return N};b.__private__.setPdfVersion=function(D){N=D};var H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return H};var U=b.__private__.getPageFormat=function(D){return H[D]};a=a||"a4";var Q="compat",K="advanced",Z=Q;function Ae(){this.saveGraphicsState(),Ke(new Qt(Nr,0,0,-Nr,0,Qn()*Nr).toString()+" cm"),this.setFontSize(this.getFontSize()/Nr),w="n",Z=K}function fe(){this.restoreGraphicsState(),w="S",Z=Q}var ge=b.__private__.combineFontStyleAndFontWeight=function(D,ce){if(D=="bold"&&ce=="normal"||D=="bold"&&ce==400||D=="normal"&&ce=="italic"||D=="bold"&&ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ce&&(D=ce==400||ce==="normal"?D==="italic"?"italic":"normal":ce!=700&&ce!=="bold"||D!=="normal"?(ce==700?"bold":ce)+""+D:"bold"),D};b.advancedAPI=function(D){var ce=Z===Q;return ce&&Ae.call(this),typeof D!="function"||(D(this),ce&&fe.call(this)),this},b.compatAPI=function(D){var ce=Z===K;return ce&&fe.call(this),typeof D!="function"||(D(this),ce&&Ae.call(this)),this},b.isAdvancedAPI=function(){return Z===K};var me,ae=function(D){if(Z!==K)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Le=b.roundToPrecision=b.__private__.roundToPrecision=function(D,ce){var ke=t||ce;if(isNaN(D)||isNaN(ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(ke).replace(/0+$/,"")};me=b.hpf=b.__private__.hpf=typeof g=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return Le(D,g)}:g==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return Le(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return Le(D,16)};var re=b.f2=b.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return Le(D,2)},he=b.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return Le(D,3)},Ie=b.scale=b.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return Z===Q?D*Nr:Z===K?D:void 0},we=function(D){return Ie(function(ce){return Z===Q?Qn()-ce:Z===K?ce:void 0}(D))};b.__private__.setPrecision=b.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(t=parseInt(D,10))};var nt,rt="00000000000000000000000000000000",ct=b.__private__.getFileId=function(){return rt},Pe=b.__private__.setFileId=function(D){return rt=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():rt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),B!==null&&(Ti=new Lf(B.userPermissions,B.userPassword,B.ownerPassword,rt)),rt};b.setFileId=function(D){return Pe(D),this},b.getFileId=function(){return ct()};var Ve=b.__private__.convertDateToPDFDate=function(D){var ce=D.getTimezoneOffset(),ke=ce<0?"+":"-",st=Math.floor(Math.abs(ce/60)),ft=Math.abs(ce%60),Dt=[ke,Me(st),"'",Me(ft),"'"].join("");return["D:",D.getFullYear(),Me(D.getMonth()+1),Me(D.getDate()),Me(D.getHours()),Me(D.getMinutes()),Me(D.getSeconds()),Dt].join("")},mt=b.__private__.convertPDFDateToDate=function(D){var ce=parseInt(D.substr(2,4),10),ke=parseInt(D.substr(6,2),10)-1,st=parseInt(D.substr(8,2),10),ft=parseInt(D.substr(10,2),10),Dt=parseInt(D.substr(12,2),10),Wt=parseInt(D.substr(14,2),10);return new Date(ce,ke,st,ft,Dt,Wt,0)},gt=b.__private__.setCreationDate=function(D){var ce;if(D===void 0&&(D=new Date),D instanceof Date)ce=Ve(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ce=D}return nt=ce},ie=b.__private__.getCreationDate=function(D){var ce=nt;return D==="jsDate"&&(ce=mt(nt)),ce};b.setCreationDate=function(D){return gt(D),this},b.getCreationDate=function(D){return ie(D)};var Ee,Me=b.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},Ye=b.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},at=0,Ze=[],Ct=[],dt=0,Lt=[],kt=[],$t=!1,Gt=Ct;b.__private__.setCustomOutputDestination=function(D){$t=!0,Gt=D};var Pt=function(D){$t||(Gt=D)};b.__private__.resetCustomOutputDestination=function(){$t=!1,Gt=Ct};var Ke=b.__private__.out=function(D){return D=D.toString(),dt+=D.length+1,Gt.push(D),Gt},Gr=b.__private__.write=function(D){return Ke(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},wr=b.__private__.getArrayBuffer=function(D){for(var ce=D.length,ke=new ArrayBuffer(ce),st=new Uint8Array(ke);ce--;)st[ce]=D.charCodeAt(ce);return ke},fr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return fr};var Vt=e.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(D){return Vt=Z===K?D/Nr:D,this};var xr,ar=b.__private__.getFontSize=b.getFontSize=function(){return Z===Q?Vt:Vt*Nr},qr=e.R2L||!1;b.__private__.setR2L=b.setR2L=function(D){return qr=D,this},b.__private__.getR2L=b.getR2L=function(){return qr};var mr,hn=b.__private__.setZoomMode=function(D){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))xr=D;else if(isNaN(D)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');xr=D}else xr=parseInt(D,10)};b.__private__.getZoomMode=function(){return xr};var Vr,Sr=b.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');mr=D};b.__private__.getPageMode=function(){return mr};var Jr=b.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');Vr=D};b.__private__.getLayoutMode=function(){return Vr},b.__private__.setDisplayMode=b.setDisplayMode=function(D,ce,ke){return hn(D),Jr(ce),Sr(ke),this};var jr={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(D){if(Object.keys(jr).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return jr[D]},b.__private__.getDocumentProperties=function(){return jr},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(D){for(var ce in jr)jr.hasOwnProperty(ce)&&D[ce]&&(jr[ce]=D[ce]);return this},b.__private__.setDocumentProperty=function(D,ce){if(Object.keys(jr).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return jr[D]=ce};var Tr,Nr,br,ot,le,se={},ve={},Ue=[],Ge={},et={},At={},it={},St=null,pt=0,Je=[],Et=new aF(b),ze=e.hotfixes||[],Nt={},or={},tr=[],Qt=function D(ce,ke,st,ft,Dt,Wt){if(!(this instanceof D))return new D(ce,ke,st,ft,Dt,Wt);isNaN(ce)&&(ce=1),isNaN(ke)&&(ke=0),isNaN(st)&&(st=0),isNaN(ft)&&(ft=1),isNaN(Dt)&&(Dt=0),isNaN(Wt)&&(Wt=0),this._matrix=[ce,ke,st,ft,Dt,Wt]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(me).join(D)},Qt.prototype.multiply=function(D){var ce=D.sx*this.sx+D.shy*this.shx,ke=D.sx*this.shy+D.shy*this.sy,st=D.shx*this.sx+D.sy*this.shx,ft=D.shx*this.shy+D.sy*this.sy,Dt=D.tx*this.sx+D.ty*this.shx+this.tx,Wt=D.tx*this.shy+D.ty*this.sy+this.ty;return new Qt(ce,ke,st,ft,Dt,Wt)},Qt.prototype.decompose=function(){var D=this.sx,ce=this.shy,ke=this.shx,st=this.sy,ft=this.tx,Dt=this.ty,Wt=Math.sqrt(D*D+ce*ce),pr=(D/=Wt)*ke+(ce/=Wt)*st;ke-=D*pr,st-=ce*pr;var Ir=Math.sqrt(ke*ke+st*st);return pr/=Ir,D*(st/=Ir)<ce*(ke/=Ir)&&(D=-D,ce=-ce,pr=-pr,Wt=-Wt),{scale:new Qt(Wt,0,0,Ir,0,0),translate:new Qt(1,0,0,1,ft,Dt),rotate:new Qt(D,ce,-ce,D,0,0),skew:new Qt(1,0,pr,1,0,0)}},Qt.prototype.toString=function(D){return this.join(" ")},Qt.prototype.inversed=function(){var D=this.sx,ce=this.shy,ke=this.shx,st=this.sy,ft=this.tx,Dt=this.ty,Wt=1/(D*st-ce*ke),pr=st*Wt,Ir=-ce*Wt,Zr=-ke*Wt,un=D*Wt;return new Qt(pr,Ir,Zr,un,-pr*ft-Zr*Dt,-Ir*ft-un*Dt)},Qt.prototype.applyToPoint=function(D){var ce=D.x*this.sx+D.y*this.shx+this.tx,ke=D.x*this.shy+D.y*this.sy+this.ty;return new $a(ce,ke)},Qt.prototype.applyToRectangle=function(D){var ce=this.applyToPoint(D),ke=this.applyToPoint(new $a(D.x+D.w,D.y+D.h));return new Ao(ce.x,ce.y,ke.x-ce.x,ke.y-ce.y)},Qt.prototype.clone=function(){var D=this.sx,ce=this.shy,ke=this.shx,st=this.sy,ft=this.tx,Dt=this.ty;return new Qt(D,ce,ke,st,ft,Dt)},b.Matrix=Qt;var gr=b.matrixMult=function(D,ce){return ce.multiply(D)},on=new Qt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=on;var Qr=function(D,ce){if(!et[D]){var ke=(ce instanceof hd?"Sh":"P")+(Object.keys(Ge).length+1).toString(10);ce.id=ke,et[D]=ke,Ge[ke]=ce,Et.publish("addPattern",ce)}};b.ShadingPattern=hd,b.TilingPattern=qf,b.addShadingPattern=function(D,ce){return ae("addShadingPattern()"),Qr(D,ce),this},b.beginTilingPattern=function(D){ae("beginTilingPattern()"),HA(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},b.endTilingPattern=function(D,ce){ae("endTilingPattern()"),ce.stream=kt[Ee].join(`
`),Qr(D,ce),Et.publish("endTilingPattern",ce),tr.pop().restore()};var Or,hr=b.__private__.newObject=function(){var D=Dr();return Fn(D,!0),D},Dr=b.__private__.newObjectDeferred=function(){return at++,Ze[at]=function(){return dt},at},Fn=function(D,ce){return ce=typeof ce=="boolean"&&ce,Ze[D]=dt,ce&&Ke(D+" 0 obj"),D},Xt=b.__private__.newAdditionalObject=function(){var D={objId:Dr(),content:""};return Lt.push(D),D},li=Dr(),Tn=Dr(),vs=b.__private__.decodeColorString=function(D){var ce=D.split(" ");if(ce.length!==2||ce[1]!=="g"&&ce[1]!=="G")ce.length!==5||ce[4]!=="k"&&ce[4]!=="K"||(ce=[(1-ce[0])*(1-ce[3]),(1-ce[1])*(1-ce[3]),(1-ce[2])*(1-ce[3]),"r"]);else{var ke=parseFloat(ce[0]);ce=[ke,ke,ke,"r"]}for(var st="#",ft=0;ft<3;ft++)st+=("0"+Math.floor(255*parseFloat(ce[ft])).toString(16)).slice(-2);return st},_s=b.__private__.encodeColorString=function(D){var ce;typeof D=="string"&&(D={ch1:D});var ke=D.ch1,st=D.ch2,ft=D.ch3,Dt=D.ch4,Wt=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ke=="string"&&ke.charAt(0)!=="#"){var pr=new r6(ke);if(pr.ok)ke=pr.toHex();else if(!/^\d*\.?\d*$/.test(ke))throw new Error('Invalid color "'+ke+'" passed to jsPDF.encodeColorString.')}if(typeof ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ke)&&(ke="#"+ke[1]+ke[1]+ke[2]+ke[2]+ke[3]+ke[3]),typeof ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ke)){var Ir=parseInt(ke.substr(1),16);ke=Ir>>16&255,st=Ir>>8&255,ft=255&Ir}if(st===void 0||Dt===void 0&&ke===st&&st===ft)ce=typeof ke=="string"?ke+" "+Wt[0]:D.precision===2?re(ke/255)+" "+Wt[0]:he(ke/255)+" "+Wt[0];else if(Dt===void 0||oi(Dt)==="object"){if(Dt&&!isNaN(Dt.a)&&Dt.a===0)return["1.","1.","1.",Wt[1]].join(" ");ce=typeof ke=="string"?[ke,st,ft,Wt[1]].join(" "):D.precision===2?[re(ke/255),re(st/255),re(ft/255),Wt[1]].join(" "):[he(ke/255),he(st/255),he(ft/255),Wt[1]].join(" ")}else ce=typeof ke=="string"?[ke,st,ft,Dt,Wt[2]].join(" "):D.precision===2?[re(ke),re(st),re(ft),re(Dt),Wt[2]].join(" "):[he(ke),he(st),he(ft),he(Dt),Wt[2]].join(" ");return ce},Jt=b.__private__.getFilters=function(){return h},zr=b.__private__.putStream=function(D){var ce=(D=D||{}).data||"",ke=D.filters||Jt(),st=D.alreadyAppliedFilters||[],ft=D.addLength1||!1,Dt=ce.length,Wt=D.objectId,pr=function(Pi){return Pi};if(B!==null&&Wt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");B!==null&&(pr=Ti.encryptor(Wt,0));var Ir={};ke===!0&&(ke=["FlateEncode"]);var Zr=D.additionalKeyValues||[],un=(Ir=Hr.API.processDataByFilters!==void 0?Hr.API.processDataByFilters(ce,ke):{data:ce,reverseChain:[]}).reverseChain+(Array.isArray(st)?st.join(" "):st.toString());if(Ir.data.length!==0&&(Zr.push({key:"Length",value:Ir.data.length}),ft===!0&&Zr.push({key:"Length1",value:Dt})),un.length!=0)if(un.split("/").length-1==1)Zr.push({key:"Filter",value:un});else{Zr.push({key:"Filter",value:"["+un+"]"});for(var tn=0;tn<Zr.length;tn+=1)if(Zr[tn].key==="DecodeParms"){for(var Kn=[],Mn=0;Mn<Ir.reverseChain.split("/").length-1;Mn+=1)Kn.push("null");Kn.push(Zr[tn].value),Zr[tn].value="["+Kn.join(" ")+"]"}}Ke("<<");for(var dn=0;dn<Zr.length;dn++)Ke("/"+Zr[dn].key+" "+Zr[dn].value);Ke(">>"),Ir.data.length!==0&&(Ke("stream"),Ke(pr(Ir.data)),Ke("endstream"))},Wr=b.__private__.putPage=function(D){var ce=D.number,ke=D.data,st=D.objId,ft=D.contentsObjId;Fn(st,!0),Ke("<</Type /Page"),Ke("/Parent "+D.rootDictionaryObjId+" 0 R"),Ke("/Resources "+D.resourceDictionaryObjId+" 0 R"),Ke("/MediaBox ["+parseFloat(me(D.mediaBox.bottomLeftX))+" "+parseFloat(me(D.mediaBox.bottomLeftY))+" "+me(D.mediaBox.topRightX)+" "+me(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&Ke("/CropBox ["+me(D.cropBox.bottomLeftX)+" "+me(D.cropBox.bottomLeftY)+" "+me(D.cropBox.topRightX)+" "+me(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&Ke("/BleedBox ["+me(D.bleedBox.bottomLeftX)+" "+me(D.bleedBox.bottomLeftY)+" "+me(D.bleedBox.topRightX)+" "+me(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&Ke("/TrimBox ["+me(D.trimBox.bottomLeftX)+" "+me(D.trimBox.bottomLeftY)+" "+me(D.trimBox.topRightX)+" "+me(D.trimBox.topRightY)+"]"),D.artBox!==null&&Ke("/ArtBox ["+me(D.artBox.bottomLeftX)+" "+me(D.artBox.bottomLeftY)+" "+me(D.artBox.topRightX)+" "+me(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&Ke("/UserUnit "+D.userUnit),Et.publish("putPage",{objId:st,pageContext:Je[ce],pageNumber:ce,page:ke}),Ke("/Contents "+ft+" 0 R"),Ke(">>"),Ke("endobj");var Dt=ke.join(`
`);return Z===K&&(Dt+=`
Q`),Fn(ft,!0),zr({data:Dt,filters:Jt(),objectId:ft}),Ke("endobj"),st},_i=b.__private__.putPages=function(){var D,ce,ke=[];for(D=1;D<=pt;D++)Je[D].objId=Dr(),Je[D].contentsObjId=Dr();for(D=1;D<=pt;D++)ke.push(Wr({number:D,data:kt[D],objId:Je[D].objId,contentsObjId:Je[D].contentsObjId,mediaBox:Je[D].mediaBox,cropBox:Je[D].cropBox,bleedBox:Je[D].bleedBox,trimBox:Je[D].trimBox,artBox:Je[D].artBox,userUnit:Je[D].userUnit,rootDictionaryObjId:li,resourceDictionaryObjId:Tn}));Fn(li,!0),Ke("<</Type /Pages");var st="/Kids [";for(ce=0;ce<pt;ce++)st+=ke[ce]+" 0 R ";Ke(st+"]"),Ke("/Count "+pt),Ke(">>"),Ke("endobj"),Et.publish("postPutPages")},xa=function(D){Et.publish("putFont",{font:D,out:Ke,newObject:hr,putStream:zr}),D.isAlreadyPutted!==!0&&(D.objectNumber=hr(),Ke("<<"),Ke("/Type /Font"),Ke("/BaseFont /"+Mf(D.postScriptName)),Ke("/Subtype /Type1"),typeof D.encoding=="string"&&Ke("/Encoding /"+D.encoding),Ke("/FirstChar 32"),Ke("/LastChar 255"),Ke(">>"),Ke("endobj"))},Gs=function(D){D.objectNumber=hr();var ce=[];ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Form"}),ce.push({key:"BBox",value:"["+[me(D.x),me(D.y),me(D.x+D.width),me(D.y+D.height)].join(" ")+"]"}),ce.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var ke=D.pages[1].join(`
`);zr({data:ke,additionalKeyValues:ce,objectId:D.objectNumber}),Ke("endobj")},Xr=function(D,ce){ce||(ce=21);var ke=hr(),st=function(Wt,pr){var Ir,Zr=[],un=1/(pr-1);for(Ir=0;Ir<1;Ir+=un)Zr.push(Ir);if(Zr.push(1),Wt[0].offset!=0){var tn={offset:0,color:Wt[0].color};Wt.unshift(tn)}if(Wt[Wt.length-1].offset!=1){var Kn={offset:1,color:Wt[Wt.length-1].color};Wt.push(Kn)}for(var Mn="",dn=0,Pi=0;Pi<Zr.length;Pi++){for(Ir=Zr[Pi];Ir>Wt[dn+1].offset;)dn++;var Ai=Wt[dn].offset,xi=(Ir-Ai)/(Wt[dn+1].offset-Ai),la=Wt[dn].color,Bl=Wt[dn+1].color;Mn+=Ye(Math.round((1-xi)*la[0]+xi*Bl[0]).toString(16))+Ye(Math.round((1-xi)*la[1]+xi*Bl[1]).toString(16))+Ye(Math.round((1-xi)*la[2]+xi*Bl[2]).toString(16))}return Mn.trim()}(D.colors,ce),ft=[];ft.push({key:"FunctionType",value:"0"}),ft.push({key:"Domain",value:"[0.0 1.0]"}),ft.push({key:"Size",value:"["+ce+"]"}),ft.push({key:"BitsPerSample",value:"8"}),ft.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ft.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),zr({data:st,additionalKeyValues:ft,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ke}),Ke("endobj"),D.objectNumber=hr(),Ke("<< /ShadingType "+D.type),Ke("/ColorSpace /DeviceRGB");var Dt="/Coords ["+me(parseFloat(D.coords[0]))+" "+me(parseFloat(D.coords[1]))+" ";D.type===2?Dt+=me(parseFloat(D.coords[2]))+" "+me(parseFloat(D.coords[3])):Dt+=me(parseFloat(D.coords[2]))+" "+me(parseFloat(D.coords[3]))+" "+me(parseFloat(D.coords[4]))+" "+me(parseFloat(D.coords[5])),Ke(Dt+="]"),D.matrix&&Ke("/Matrix ["+D.matrix.toString()+"]"),Ke("/Function "+ke+" 0 R"),Ke("/Extend [true true]"),Ke(">>"),Ke("endobj")},ao=function(D,ce){var ke=Dr(),st=hr();ce.push({resourcesOid:ke,objectOid:st}),D.objectNumber=st;var ft=[];ft.push({key:"Type",value:"/Pattern"}),ft.push({key:"PatternType",value:"1"}),ft.push({key:"PaintType",value:"1"}),ft.push({key:"TilingType",value:"1"}),ft.push({key:"BBox",value:"["+D.boundingBox.map(me).join(" ")+"]"}),ft.push({key:"XStep",value:me(D.xStep)}),ft.push({key:"YStep",value:me(D.yStep)}),ft.push({key:"Resources",value:ke+" 0 R"}),D.matrix&&ft.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),zr({data:D.stream,additionalKeyValues:ft,objectId:D.objectNumber}),Ke("endobj")},za=function(D){for(var ce in D.objectNumber=hr(),Ke("<<"),D)switch(ce){case"opacity":Ke("/ca "+re(D[ce]));break;case"stroke-opacity":Ke("/CA "+re(D[ce]))}Ke(">>"),Ke("endobj")},ri=function(D){Fn(D.resourcesOid,!0),Ke("<<"),Ke("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ce in Ke("/Font <<"),se)se.hasOwnProperty(ce)&&(I===!1||I===!0&&P.hasOwnProperty(ce))&&Ke("/"+ce+" "+se[ce].objectNumber+" 0 R");Ke(">>")}(),function(){if(Object.keys(Ge).length>0){for(var ce in Ke("/Shading <<"),Ge)Ge.hasOwnProperty(ce)&&Ge[ce]instanceof hd&&Ge[ce].objectNumber>=0&&Ke("/"+ce+" "+Ge[ce].objectNumber+" 0 R");Et.publish("putShadingPatternDict"),Ke(">>")}}(),function(ce){if(Object.keys(Ge).length>0){for(var ke in Ke("/Pattern <<"),Ge)Ge.hasOwnProperty(ke)&&Ge[ke]instanceof b.TilingPattern&&Ge[ke].objectNumber>=0&&Ge[ke].objectNumber<ce&&Ke("/"+ke+" "+Ge[ke].objectNumber+" 0 R");Et.publish("putTilingPatternDict"),Ke(">>")}}(D.objectOid),function(){if(Object.keys(At).length>0){var ce;for(ce in Ke("/ExtGState <<"),At)At.hasOwnProperty(ce)&&At[ce].objectNumber>=0&&Ke("/"+ce+" "+At[ce].objectNumber+" 0 R");Et.publish("putGStateDict"),Ke(">>")}}(),function(){for(var ce in Ke("/XObject <<"),Nt)Nt.hasOwnProperty(ce)&&Nt[ce].objectNumber>=0&&Ke("/"+ce+" "+Nt[ce].objectNumber+" 0 R");Et.publish("putXobjectDict"),Ke(">>")}(),Ke(">>"),Ke("endobj")},vl=function(D){ve[D.fontName]=ve[D.fontName]||{},ve[D.fontName][D.fontStyle]=D.id},_l=function(D,ce,ke,st,ft){var Dt={id:"F"+(Object.keys(se).length+1).toString(10),postScriptName:D,fontName:ce,fontStyle:ke,encoding:st,isStandardFont:ft||!1,metadata:{}};return Et.publish("addFont",{font:Dt,instance:this}),se[Dt.id]=Dt,vl(Dt),Dt.id},Oi=b.__private__.pdfEscape=b.pdfEscape=function(D,ce){return function(ke,st){var ft,Dt,Wt,pr,Ir,Zr,un,tn,Kn;if(Wt=(st=st||{}).sourceEncoding||"Unicode",Ir=st.outputEncoding,(st.autoencode||Ir)&&se[Tr].metadata&&se[Tr].metadata[Wt]&&se[Tr].metadata[Wt].encoding&&(pr=se[Tr].metadata[Wt].encoding,!Ir&&se[Tr].encoding&&(Ir=se[Tr].encoding),!Ir&&pr.codePages&&(Ir=pr.codePages[0]),typeof Ir=="string"&&(Ir=pr[Ir]),Ir)){for(un=!1,Zr=[],ft=0,Dt=ke.length;ft<Dt;ft++)(tn=Ir[ke.charCodeAt(ft)])?Zr.push(String.fromCharCode(tn)):Zr.push(ke[ft]),Zr[ft].charCodeAt(0)>>8&&(un=!0);ke=Zr.join("")}for(ft=ke.length;un===void 0&&ft!==0;)ke.charCodeAt(ft-1)>>8&&(un=!0),ft--;if(!un)return ke;for(Zr=st.noBOM?[]:[254,255],ft=0,Dt=ke.length;ft<Dt;ft++){if((Kn=(tn=ke.charCodeAt(ft))>>8)>>8)throw new Error("Character at position "+ft+" of string '"+ke+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zr.push(Kn),Zr.push(tn-(Kn<<8))}return String.fromCharCode.apply(void 0,Zr)}(D,ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ha=b.__private__.beginPage=function(D){kt[++pt]=[],Je[pt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},Tc(pt),Pt(kt[Ee])},Ls=function(D,ce){var ke,st,ft;switch(r=ce||r,typeof D=="string"&&(ke=U(D.toLowerCase()),Array.isArray(ke)&&(st=ke[0],ft=ke[1])),Array.isArray(D)&&(st=D[0]*Nr,ft=D[1]*Nr),isNaN(st)&&(st=a[0],ft=a[1]),(st>14400||ft>14400)&&(vi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),st=Math.min(14400,st),ft=Math.min(14400,ft)),a=[st,ft],r.substr(0,1)){case"l":ft>st&&(a=[ft,st]);break;case"p":st>ft&&(a=[ft,st])}Ha(a),Uc(Ka),Ke(Xi),Yi!==0&&Ke(Yi+" J"),Ba!==0&&Ke(Ba+" j"),Et.publish("addPage",{pageNumber:pt})},Vn=function(D){D>0&&D<=pt&&(kt.splice(D,1),Je.splice(D,1),pt--,Ee>pt&&(Ee=pt),this.setPage(Ee))},Tc=function(D){D>0&&D<=pt&&(Ee=D)},wl=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return kt.length-1},Xl=function(D,ce,ke){var st,ft=void 0;return ke=ke||{},D=D!==void 0?D:se[Tr].fontName,ce=ce!==void 0?ce:se[Tr].fontStyle,st=D.toLowerCase(),ve[st]!==void 0&&ve[st][ce]!==void 0?ft=ve[st][ce]:ve[D]!==void 0&&ve[D][ce]!==void 0?ft=ve[D][ce]:ke.disableWarning===!1&&vi.warn("Unable to look up font label for font '"+D+"', '"+ce+"'. Refer to getFontList() for available fonts."),ft||ke.noFallback||(ft=ve.times[ce])==null&&(ft=ve.times.normal),ft},To=b.__private__.putInfo=function(){var D=hr(),ce=function(st){return st};for(var ke in B!==null&&(ce=Ti.encryptor(D,0)),Ke("<<"),Ke("/Producer ("+Oi(ce("jsPDF "+Hr.version))+")"),jr)jr.hasOwnProperty(ke)&&jr[ke]&&Ke("/"+ke.substr(0,1).toUpperCase()+ke.substr(1)+" ("+Oi(ce(jr[ke]))+")");Ke("/CreationDate ("+Oi(ce(nt))+")"),Ke(">>"),Ke("endobj")},ba=b.__private__.putCatalog=function(D){var ce=(D=D||{}).rootDictionaryObjId||li;switch(hr(),Ke("<<"),Ke("/Type /Catalog"),Ke("/Pages "+ce+" 0 R"),xr||(xr="fullwidth"),xr){case"fullwidth":Ke("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ke("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ke("/OpenAction [3 0 R /Fit]");break;case"original":Ke("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ke=""+xr;ke.substr(ke.length-1)==="%"&&(xr=parseInt(xr)/100),typeof xr=="number"&&Ke("/OpenAction [3 0 R /XYZ null null "+re(xr)+"]")}switch(Vr||(Vr="continuous"),Vr){case"continuous":Ke("/PageLayout /OneColumn");break;case"single":Ke("/PageLayout /SinglePage");break;case"two":case"twoleft":Ke("/PageLayout /TwoColumnLeft");break;case"tworight":Ke("/PageLayout /TwoColumnRight")}mr&&Ke("/PageMode /"+mr),Et.publish("putCatalog"),Ke(">>"),Ke("endobj")},Fi=b.__private__.putTrailer=function(){Ke("trailer"),Ke("<<"),Ke("/Size "+(at+1)),Ke("/Root "+at+" 0 R"),Ke("/Info "+(at-1)+" 0 R"),B!==null&&Ke("/Encrypt "+Ti.oid+" 0 R"),Ke("/ID [ <"+rt+"> <"+rt+"> ]"),Ke(">>")},Pc=b.__private__.putHeader=function(){Ke("%PDF-"+N),Ke("%ºß¬à")},Lc=b.__private__.putXRef=function(){var D="0000000000";Ke("xref"),Ke("0 "+(at+1)),Ke("0000000000 65535 f ");for(var ce=1;ce<=at;ce++)typeof Ze[ce]=="function"?Ke((D+Ze[ce]()).slice(-10)+" 00000 n "):Ze[ce]!==void 0?Ke((D+Ze[ce]).slice(-10)+" 00000 n "):Ke("0000000000 00000 n ")},lo=b.__private__.buildDocument=function(){var D;at=0,dt=0,Ct=[],Ze=[],Lt=[],li=Dr(),Tn=Dr(),Pt(Ct),Et.publish("buildDocument"),Pc(),_i(),function(){Et.publish("putAdditionalObjects");for(var ke=0;ke<Lt.length;ke++){var st=Lt[ke];Fn(st.objId,!0),Ke(st.content),Ke("endobj")}Et.publish("postPutAdditionalObjects")}(),D=[],function(){for(var ke in se)se.hasOwnProperty(ke)&&(I===!1||I===!0&&P.hasOwnProperty(ke))&&xa(se[ke])}(),function(){var ke;for(ke in At)At.hasOwnProperty(ke)&&za(At[ke])}(),function(){for(var ke in Nt)Nt.hasOwnProperty(ke)&&Gs(Nt[ke])}(),function(ke){var st;for(st in Ge)Ge.hasOwnProperty(st)&&(Ge[st]instanceof hd?Xr(Ge[st]):Ge[st]instanceof qf&&ao(Ge[st],ke))}(D),Et.publish("putResources"),D.forEach(ri),ri({resourcesOid:Tn,objectOid:Number.MAX_SAFE_INTEGER}),Et.publish("postPutResources"),B!==null&&(Ti.oid=hr(),Ke("<<"),Ke("/Filter /Standard"),Ke("/V "+Ti.v),Ke("/R "+Ti.r),Ke("/U <"+Ti.toHexString(Ti.U)+">"),Ke("/O <"+Ti.toHexString(Ti.O)+">"),Ke("/P "+Ti.P),Ke(">>"),Ke("endobj")),To(),ba();var ce=dt;return Lc(),Fi(),Ke("startxref"),Ke(""+ce),Ke("%%EOF"),Pt(kt[Ee]),Ct.join(`
`)},xl=b.__private__.getBlob=function(D){return new Blob([wr(D)],{type:"application/pdf"})},Po=b.output=b.__private__.output=(Or=function(D,ce){switch(typeof(ce=ce||{})=="string"?ce={filename:ce}:ce.filename=ce.filename||"generated.pdf",D){case void 0:return lo();case"save":b.save(ce.filename);break;case"arraybuffer":return wr(lo());case"blob":return xl(lo());case"bloburi":case"bloburl":if(An.URL!==void 0&&typeof An.URL.createObjectURL=="function")return An.URL&&An.URL.createObjectURL(xl(lo()))||void 0;vi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ke="",st=lo();try{ke=iF(st)}catch{ke=iF(unescape(encodeURIComponent(st)))}return"data:application/pdf;filename="+ce.filename+";base64,"+ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(An)==="[object Window]"){var ft="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Dt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ce.pdfObjectUrl&&(ft=ce.pdfObjectUrl,Dt="");var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ft+'"'+Dt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ce)+");<\/script></body></html>",pr=An.open();return pr!==null&&pr.document.write(Wt),pr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(An)==="[object Window]"){var Ir='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ce.filename+'" width="500px" height="400px" /></body></html>',Zr=An.open();if(Zr!==null){Zr.document.write(Ir);var un=this;Zr.document.documentElement.querySelector("#pdfViewer").onload=function(){Zr.document.title=ce.filename,Zr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(un.output("bloburl"))}}return Zr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(An)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ce)+'"></iframe></body></html>',Kn=An.open();if(Kn!==null&&(Kn.document.write(tn),Kn.document.title=ce.filename),Kn||typeof safari>"u")return Kn;break;case"datauri":case"dataurl":return An.document.location.href=this.output("datauristring",ce);default:return null}},Or.foo=function(){try{return Or.apply(this,arguments)}catch(ke){var D=ke.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var ce="Error in function "+D.split(`
`)[0].split("<")[0]+": "+ke.message;if(!An.console)throw new Error(ce);An.console.error(ce,ke),An.alert&&alert(ce)}},Or.foo.bar=Or,Or.foo),ra=function(D){return Array.isArray(ze)===!0&&ze.indexOf(D)>-1};switch(i){case"pt":Nr=1;break;case"mm":Nr=72/25.4;break;case"cm":Nr=72/2.54;break;case"in":Nr=72;break;case"px":Nr=ra("px_scaling")==1?.75:96/72;break;case"pc":case"em":Nr=12;break;case"ex":Nr=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Nr=i}var Ti=null;gt(),Pe();var OA=b.__private__.getPageInfo=b.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Je[D].objId,pageNumber:D,pageContext:Je[D]}},bl=b.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ce in Je)if(Je[ce].objId===D)break;return OA(ce)},Mc=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:Je[Ee].objId,pageNumber:Ee,pageContext:Je[Ee]}};b.addPage=function(){return Ls.apply(this,arguments),this},b.setPage=function(){return Tc.apply(this,arguments),Pt.call(this,kt[Ee]),this},b.insertPage=function(D){return this.addPage(),this.movePage(Ee,D),this},b.movePage=function(D,ce){var ke,st;if(D>ce){ke=kt[D],st=Je[D];for(var ft=D;ft>ce;ft--)kt[ft]=kt[ft-1],Je[ft]=Je[ft-1];kt[ce]=ke,Je[ce]=st,this.setPage(ce)}else if(D<ce){ke=kt[D],st=Je[D];for(var Dt=D;Dt<ce;Dt++)kt[Dt]=kt[Dt+1],Je[Dt]=Je[Dt+1];kt[ce]=ke,Je[ce]=st,this.setPage(ce)}return this},b.deletePage=function(){return Vn.apply(this,arguments),this},b.__private__.text=b.text=function(D,ce,ke,st,ft){var Dt,Wt,pr,Ir,Zr,un,tn,Kn,Mn,dn=(st=st||{}).scope||this;if(typeof D=="number"&&typeof ce=="number"&&(typeof ke=="string"||Array.isArray(ke))){var Pi=ke;ke=ce,ce=D,D=Pi}if(arguments[3]instanceof Qt==0?(pr=arguments[4],Ir=arguments[5],oi(tn=arguments[3])==="object"&&tn!==null||(typeof pr=="string"&&(Ir=pr,pr=null),typeof tn=="string"&&(Ir=tn,tn=null),typeof tn=="number"&&(pr=tn,tn=null),st={flags:tn,angle:pr,align:Ir})):(ae("The transform parameter of text() with a Matrix value"),Mn=ft),isNaN(ce)||isNaN(ke)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return dn;var Ai,xi="",la=typeof st.lineHeightFactor=="number"?st.lineHeightFactor:en,Bl=dn.internal.scaleFactor;function Oh(Gn){return Gn=Gn.split("	").join(Array(st.TabLen||9).join(" ")),Oi(Gn,tn)}function Cu(Gn){for(var $n,bi=Gn.concat(),mi=[],Zs=bi.length;Zs--;)typeof($n=bi.shift())=="string"?mi.push($n):Array.isArray(Gn)&&($n.length===1||$n[1]===void 0&&$n[2]===void 0)?mi.push($n[0]):mi.push([$n[0],$n[1],$n[2]]);return mi}function rA(Gn,$n){var bi;if(typeof Gn=="string")bi=$n(Gn)[0];else if(Array.isArray(Gn)){for(var mi,Zs,Ml=Gn.concat(),Ea=[],Nc=Ml.length;Nc--;)typeof(mi=Ml.shift())=="string"?Ea.push($n(mi)[0]):Array.isArray(mi)&&typeof mi[0]=="string"&&(Zs=$n(mi[0],mi[1],mi[2]),Ea.push([Zs[0],Zs[1],Zs[2]]));bi=Ea}return bi}var co=!1,Cl=!0;if(typeof D=="string")co=!0;else if(Array.isArray(D)){var Wa=D.concat();Wt=[];for(var Mo,Hi=Wa.length;Hi--;)(typeof(Mo=Wa.shift())!="string"||Array.isArray(Mo)&&typeof Mo[0]!="string")&&(Cl=!1);co=Cl}if(co===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var ko=Vt/dn.internal.scaleFactor,hs=ko*(la-1);switch(st.baseline){case"bottom":ke-=hs;break;case"top":ke+=ko-hs;break;case"hanging":ke+=ko-2*hs;break;case"middle":ke+=ko/2-hs}if((un=st.maxWidth||0)>0&&(typeof D=="string"?D=dn.splitTextToSize(D,un):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(Gn,$n){return Gn.concat(dn.splitTextToSize($n,un))},[]))),Dt={text:D,x:ce,y:ke,options:st,mutex:{pdfEscape:Oi,activeFontKey:Tr,fonts:se,activeFontSize:Vt}},Et.publish("preProcessText",Dt),D=Dt.text,pr=(st=Dt.options).angle,Mn instanceof Qt==0&&pr&&typeof pr=="number"){pr*=Math.PI/180,st.rotationDirection===0&&(pr=-pr),Z===K&&(pr=-pr);var jA=Math.cos(pr),nA=Math.sin(pr);Mn=new Qt(jA,nA,-nA,jA,0,0)}else pr&&pr instanceof Qt&&(Mn=pr);Z!==K||Mn||(Mn=on),(Zr=st.charSpace||Mr)!==void 0&&(xi+=me(Ie(Zr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Kn=st.horizontalScale)!==void 0&&(xi+=me(100*Kn)+` Tz
`),st.lang;var Ji=-1,Sl=st.renderingMode!==void 0?st.renderingMode:st.stroke,iA=dn.internal.getCurrentPageInfo().pageContext;switch(Sl){case 0:case!1:case"fill":Ji=0;break;case 1:case!0:case"stroke":Ji=1;break;case 2:case"fillThenStroke":Ji=2;break;case 3:case"invisible":Ji=3;break;case 4:case"fillAndAddForClipping":Ji=4;break;case 5:case"strokeAndAddPathForClipping":Ji=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ji=6;break;case 7:case"addToPathForClipping":Ji=7}var El=iA.usedRenderingMode!==void 0?iA.usedRenderingMode:-1;Ji!==-1?xi+=Ji+` Tr
`:El!==-1&&(xi+=`0 Tr
`),Ji!==-1&&(iA.usedRenderingMode=Ji),Ir=st.align||"left";var ji,xs=Vt*la,Rc=dn.internal.pageSize.getWidth(),VA=se[Tr];Zr=st.charSpace||Mr,un=st.maxWidth||0,tn=Object.assign({autoencode:!0,noBOM:!0},st.flags);var Il=[],Za=function(Gn){return dn.getStringUnitWidth(Gn,{font:VA,charSpace:Zr,fontSize:Vt,doKerning:!1})*Vt/Bl};if(Object.prototype.toString.call(D)==="[object Array]"){var Ms;Wt=Cu(D),Ir!=="left"&&(ji=Wt.map(Za));var Ws,Fl=0;if(Ir==="right"){ce-=ji[0],D=[],Hi=Wt.length;for(var Uo=0;Uo<Hi;Uo++)Uo===0?(Ws=Yn(ce),Ms=Ln(ke)):(Ws=Ie(Fl-ji[Uo]),Ms=-xs),D.push([Wt[Uo],Ws,Ms]),Fl=ji[Uo]}else if(Ir==="center"){ce-=ji[0]/2,D=[],Hi=Wt.length;for(var Ca=0;Ca<Hi;Ca++)Ca===0?(Ws=Yn(ce),Ms=Ln(ke)):(Ws=Ie((Fl-ji[Ca])/2),Ms=-xs),D.push([Wt[Ca],Ws,Ms]),Fl=ji[Ca]}else if(Ir==="left"){D=[],Hi=Wt.length;for(var Aa=0;Aa<Hi;Aa++)D.push(Wt[Aa])}else if(Ir==="justify"&&VA.encoding==="Identity-H"){D=[],Hi=Wt.length,un=un!==0?un:Rc;for(var Xa=0,pi=0;pi<Hi;pi++)if(Ms=pi===0?Ln(ke):-xs,Ws=pi===0?Yn(ce):Xa,pi<Hi-1){var Tl=Ie((un-ji[pi])/(Wt[pi].split(" ").length-1)),Sa=Wt[pi].split(" ");D.push([Sa[0]+" ",Ws,Ms]),Xa=0;for(var wo=1;wo<Sa.length;wo++){var KA=(Za(Sa[wo-1]+" "+Sa[wo])-Za(Sa[wo]))*Bl+Tl;wo==Sa.length-1?D.push([Sa[wo],KA,0]):D.push([Sa[wo]+" ",KA,0]),Xa-=KA}}else D.push([Wt[pi],Ws,Ms]);D.push(["",Xa,0])}else{if(Ir!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],Hi=Wt.length,un=un!==0?un:Rc,pi=0;pi<Hi;pi++)Ms=pi===0?Ln(ke):-xs,Ws=pi===0?Yn(ce):0,pi<Hi-1?Il.push(me(Ie((un-ji[pi])/(Wt[pi].split(" ").length-1)))):Il.push(0),D.push([Wt[pi],Ws,Ms])}}(typeof st.R2L=="boolean"?st.R2L:qr)===!0&&(D=rA(D,function(Gn,$n,bi){return[Gn.split("").reverse().join(""),$n,bi]})),Dt={text:D,x:ce,y:ke,options:st,mutex:{pdfEscape:Oi,activeFontKey:Tr,fonts:se,activeFontSize:Vt}},Et.publish("postProcessText",Dt),D=Dt.text,Ai=Dt.mutex.isHex||!1;var GA=se[Tr].encoding;GA!=="WinAnsiEncoding"&&GA!=="StandardEncoding"||(D=rA(D,function(Gn,$n,bi){return[Oh(Gn),$n,bi]})),Wt=Cu(D),D=[];for(var sA,oA,Pl,Ya=Array.isArray(Wt[0])?1:0,fn="",Ll=function(Gn,$n,bi){var mi="";return bi instanceof Qt?(bi=typeof st.angle=="number"?gr(bi,new Qt(1,0,0,1,Gn,$n)):gr(new Qt(1,0,0,1,Gn,$n),bi),Z===K&&(bi=gr(new Qt(1,0,0,-1,0,0),bi)),mi=bi.join(" ")+` Tm
`):mi=me(Gn)+" "+me($n)+` Td
`,mi},Li=0;Li<Wt.length;Li++){switch(fn="",Ya){case 1:Pl=(Ai?"<":"(")+Wt[Li][0]+(Ai?">":")"),sA=parseFloat(Wt[Li][1]),oA=parseFloat(Wt[Li][2]);break;case 0:Pl=(Ai?"<":"(")+Wt[Li]+(Ai?">":")"),sA=Yn(ce),oA=Ln(ke)}Il!==void 0&&Il[Li]!==void 0&&(fn=Il[Li]+` Tw
`),Li===0?D.push(fn+Ll(sA,oA,Mn)+Pl):Ya===0?D.push(fn+Pl):Ya===1&&D.push(fn+Ll(sA,oA,Mn)+Pl)}D=Ya===0?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var Ro=`BT
/`;return Ro+=Tr+" "+Vt+` Tf
`,Ro+=me(Vt*la)+` TL
`,Ro+=$r+`
`,Ro+=xi,Ro+=D,Ke(Ro+="ET"),P[Tr]=!0,dn};var kc=b.__private__.clip=b.clip=function(D){return Ke(D==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return kc("evenodd")},b.__private__.discardPath=b.discardPath=function(){return Ke("n"),this};var na=b.__private__.isValidStyle=function(D){var ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(ce=!0),ce};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(D){return na(D)&&(w=D),this};var Yl=b.__private__.getStyle=b.getStyle=function(D){var ce=w;switch(D){case"D":case"S":ce="S";break;case"F":ce="f";break;case"FD":case"DF":ce="B";break;case"f":case"f*":case"B":case"B*":ce=D}return ce},Jl=b.close=function(){return Ke("h"),this};b.stroke=function(){return Ke("S"),this},b.fill=function(D){return ws("f",D),this},b.fillEvenOdd=function(D){return ws("f*",D),this},b.fillStroke=function(D){return ws("B",D),this},b.fillStrokeEvenOdd=function(D){return ws("B*",D),this};var ws=function(D,ce){oi(ce)==="object"?sa(ce,D):Ke(D)},nn=function(D){D===null||Z===K&&D===void 0||(D=Yl(D),Ke(D))};function ia(D,ce,ke,st,ft){var Dt=new qf(ce||this.boundingBox,ke||this.xStep,st||this.yStep,this.gState,ft||this.matrix);Dt.stream=this.stream;var Wt=D+"$$"+this.cloneIndex+++"$$";return Qr(Wt,Dt),Dt}var sa=function(D,ce){var ke=et[D.key],st=Ge[ke];if(st instanceof hd)Ke("q"),Ke(ja(ce)),st.gState&&b.setGState(st.gState),Ke(D.matrix.toString()+" cm"),Ke("/"+ke+" sh"),Ke("Q");else if(st instanceof qf){var ft=new Qt(1,0,0,-1,0,Qn());D.matrix&&(ft=ft.multiply(D.matrix||on),ke=ia.call(st,D.key,D.boundingBox,D.xStep,D.yStep,ft).id),Ke("q"),Ke("/Pattern cs"),Ke("/"+ke+" scn"),st.gState&&b.setGState(st.gState),Ke(ce),Ke("Q")}},ja=function(D){switch(D){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},eA=b.moveTo=function(D,ce){return Ke(me(Ie(D))+" "+me(we(ce))+" m"),this},Va=b.lineTo=function(D,ce){return Ke(me(Ie(D))+" "+me(we(ce))+" l"),this},Zi=b.curveTo=function(D,ce,ke,st,ft,Dt){return Ke([me(Ie(D)),me(we(ce)),me(Ie(ke)),me(we(st)),me(Ie(ft)),me(we(Dt)),"c"].join(" ")),this};b.__private__.line=b.line=function(D,ce,ke,st,ft){if(isNaN(D)||isNaN(ce)||isNaN(ke)||isNaN(st)||!na(ft))throw new Error("Invalid arguments passed to jsPDF.line");return Z===Q?this.lines([[ke-D,st-ce]],D,ce,[1,1],ft||"S"):this.lines([[ke-D,st-ce]],D,ce,[1,1]).stroke()},b.__private__.lines=b.lines=function(D,ce,ke,st,ft,Dt){var Wt,pr,Ir,Zr,un,tn,Kn,Mn,dn,Pi,Ai,xi;if(typeof D=="number"&&(xi=ke,ke=ce,ce=D,D=xi),st=st||[1,1],Dt=Dt||!1,isNaN(ce)||isNaN(ke)||!Array.isArray(D)||!Array.isArray(st)||!na(ft)||typeof Dt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(eA(ce,ke),Wt=st[0],pr=st[1],Zr=D.length,Pi=ce,Ai=ke,Ir=0;Ir<Zr;Ir++)(un=D[Ir]).length===2?(Pi=un[0]*Wt+Pi,Ai=un[1]*pr+Ai,Va(Pi,Ai)):(tn=un[0]*Wt+Pi,Kn=un[1]*pr+Ai,Mn=un[2]*Wt+Pi,dn=un[3]*pr+Ai,Pi=un[4]*Wt+Pi,Ai=un[5]*pr+Ai,Zi(tn,Kn,Mn,dn,Pi,Ai));return Dt&&Jl(),nn(ft),this},b.path=function(D){for(var ce=0;ce<D.length;ce++){var ke=D[ce],st=ke.c;switch(ke.op){case"m":eA(st[0],st[1]);break;case"l":Va(st[0],st[1]);break;case"c":Zi.apply(this,st);break;case"h":Jl()}}return this},b.__private__.rect=b.rect=function(D,ce,ke,st,ft){if(isNaN(D)||isNaN(ce)||isNaN(ke)||isNaN(st)||!na(ft))throw new Error("Invalid arguments passed to jsPDF.rect");return Z===Q&&(st=-st),Ke([me(Ie(D)),me(we(ce)),me(Ie(ke)),me(Ie(st)),"re"].join(" ")),nn(ft),this},b.__private__.triangle=b.triangle=function(D,ce,ke,st,ft,Dt,Wt){if(isNaN(D)||isNaN(ce)||isNaN(ke)||isNaN(st)||isNaN(ft)||isNaN(Dt)||!na(Wt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ke-D,st-ce],[ft-ke,Dt-st],[D-ft,ce-Dt]],D,ce,[1,1],Wt,!0),this},b.__private__.roundedRect=b.roundedRect=function(D,ce,ke,st,ft,Dt,Wt){if(isNaN(D)||isNaN(ce)||isNaN(ke)||isNaN(st)||isNaN(ft)||isNaN(Dt)||!na(Wt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pr=4/3*(Math.SQRT2-1);return ft=Math.min(ft,.5*ke),Dt=Math.min(Dt,.5*st),this.lines([[ke-2*ft,0],[ft*pr,0,ft,Dt-Dt*pr,ft,Dt],[0,st-2*Dt],[0,Dt*pr,-ft*pr,Dt,-ft,Dt],[2*ft-ke,0],[-ft*pr,0,-ft,-Dt*pr,-ft,-Dt],[0,2*Dt-st],[0,-Dt*pr,ft*pr,-Dt,ft,-Dt]],D+ft,ce,[1,1],Wt,!0),this},b.__private__.ellipse=b.ellipse=function(D,ce,ke,st,ft){if(isNaN(D)||isNaN(ce)||isNaN(ke)||isNaN(st)||!na(ft))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Dt=4/3*(Math.SQRT2-1)*ke,Wt=4/3*(Math.SQRT2-1)*st;return eA(D+ke,ce),Zi(D+ke,ce-Wt,D+Dt,ce-st,D,ce-st),Zi(D-Dt,ce-st,D-ke,ce-Wt,D-ke,ce),Zi(D-ke,ce+Wt,D-Dt,ce+st,D,ce+st),Zi(D+Dt,ce+st,D+ke,ce+Wt,D+ke,ce),nn(ft),this},b.__private__.circle=b.circle=function(D,ce,ke,st){if(isNaN(D)||isNaN(ce)||isNaN(ke)||!na(st))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,ce,ke,ke,st)},b.setFont=function(D,ce,ke){return ke&&(ce=ge(ce,ke)),Tr=Xl(D,ce,{disableWarning:!1}),this};var oa=b.__private__.getFont=b.getFont=function(){return se[Xl.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var D,ce,ke={};for(D in ve)if(ve.hasOwnProperty(D))for(ce in ke[D]=[],ve[D])ve[D].hasOwnProperty(ce)&&ke[D].push(ce);return ke},b.addFont=function(D,ce,ke,st,ft){var Dt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Dt.indexOf(arguments[3])!==-1?ft=arguments[3]:arguments[3]&&Dt.indexOf(arguments[3])==-1&&(ke=ge(ke,st)),_l.call(this,D,ce,ke,ft=ft||"Identity-H")};var en,Ka=e.lineWidth||.200025,Yr=b.__private__.getLineWidth=b.getLineWidth=function(){return Ka},Uc=b.__private__.setLineWidth=b.setLineWidth=function(D){return Ka=D,Ke(me(Ie(D))+" w"),this};b.__private__.setLineDash=Hr.API.setLineDash=Hr.API.setLineDashPattern=function(D,ce){if(D=D||[],ce=ce||0,isNaN(ce)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(ke){return me(Ie(ke))}).join(" "),ce=me(Ie(ce)),Ke("["+D+"] "+ce+" d"),this};var cs=b.__private__.getLineHeight=b.getLineHeight=function(){return Vt*en};b.__private__.getLineHeight=b.getLineHeight=function(){return Vt*en};var wi=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&(en=D),this},us=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return en};wi(e.lineHeight);var Yn=b.__private__.getHorizontalCoordinate=function(D){return Ie(D)},Ln=b.__private__.getVerticalCoordinate=function(D){return Z===K?D:Je[Ee].mediaBox.topRightY-Je[Ee].mediaBox.bottomLeftY-Ie(D)},zA=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(D){return me(Yn(D))},pn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(D){return me(Ln(D))},Xi=e.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return vs(Xi)},b.__private__.setStrokeColor=b.setDrawColor=function(D,ce,ke,st){return Xi=_s({ch1:D,ch2:ce,ch3:ke,ch4:st,pdfColorType:"draw",precision:2}),Ke(Xi),this};var Kr=e.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return vs(Kr)},b.__private__.setFillColor=b.setFillColor=function(D,ce,ke,st){return Kr=_s({ch1:D,ch2:ce,ch3:ke,ch4:st,pdfColorType:"fill",precision:2}),Ke(Kr),this};var $r=e.textColor||"0 g",Lo=b.__private__.getTextColor=b.getTextColor=function(){return vs($r)};b.__private__.setTextColor=b.setTextColor=function(D,ce,ke,st){return $r=_s({ch1:D,ch2:ce,ch3:ke,ch4:st,pdfColorType:"text",precision:3}),this};var Mr=e.charSpace,Ga=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Mr||0)};b.__private__.setCharSpace=b.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Mr=D,this};var Yi=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(D){var ce=b.CapJoinStyles[D];if(ce===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yi=ce,Ke(ce+" J"),this};var Ba=0;b.__private__.setLineJoin=b.setLineJoin=function(D){var ce=b.CapJoinStyles[D];if(ce===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ba=ce,Ke(ce+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ke(me(Ie(D))+" M"),this},b.GState=Gv,b.setGState=function(D){(D=typeof D=="string"?At[it[D]]:zi(null,D)).equals(St)||(Ke("/"+D.id+" gs"),St=D)};var zi=function(D,ce){if(!D||!it[D]){var ke=!1;for(var st in At)if(At.hasOwnProperty(st)&&At[st].equals(ce)){ke=!0;break}if(ke)ce=At[st];else{var ft="GS"+(Object.keys(At).length+1).toString(10);At[ft]=ce,ce.id=ft}return D&&(it[D]=ce.id),Et.publish("addGState",ce),ce}};b.addGState=function(D,ce){return zi(D,ce),this},b.saveGraphicsState=function(){return Ke("q"),Ue.push({key:Tr,size:Vt,color:$r}),this},b.restoreGraphicsState=function(){Ke("Q");var D=Ue.pop();return Tr=D.key,Vt=D.size,$r=D.color,St=null,this},b.setCurrentTransformationMatrix=function(D){return Ke(D.toString()+" cm"),this},b.comment=function(D){return Ke("#"+D),this};var $a=function(D,ce){var ke=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ke},set:function(Dt){isNaN(Dt)||(ke=parseFloat(Dt))}});var st=ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return st},set:function(Dt){isNaN(Dt)||(st=parseFloat(Dt))}});var ft="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ft},set:function(Dt){ft=Dt.toString()}}),this},Ao=function(D,ce,ke,st){$a.call(this,D,ce),this.type="rect";var ft=ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ft},set:function(Wt){isNaN(Wt)||(ft=parseFloat(Wt))}});var Dt=st||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Dt},set:function(Wt){isNaN(Wt)||(Dt=parseFloat(Wt))}}),this},tA=function(){this.page=pt,this.currentPage=Ee,this.pages=kt.slice(0),this.pagesContext=Je.slice(0),this.x=br,this.y=ot,this.matrix=le,this.width=qa(Ee),this.height=Qn(Ee),this.outputDestination=Gt,this.id="",this.objectNumber=-1};tA.prototype.restore=function(){pt=this.page,Ee=this.currentPage,Je=this.pagesContext,kt=this.pages,br=this.x,ot=this.y,le=this.matrix,$s(Ee,this.width),qs(Ee,this.height),Gt=this.outputDestination};var HA=function(D,ce,ke,st,ft){tr.push(new tA),pt=Ee=0,kt=[],br=D,ot=ce,le=ft,Ha([ke,st])};for(var aa in b.beginFormObject=function(D,ce,ke,st,ft){return HA(D,ce,ke,st,ft),this},b.endFormObject=function(D){return function(ce){if(or[ce])tr.pop().restore();else{var ke=new tA,st="Xo"+(Object.keys(Nt).length+1).toString(10);ke.id=st,or[ce]=st,Nt[st]=ke,Et.publish("addFormObject",ke),tr.pop().restore()}}(D),this},b.doFormObject=function(D,ce){var ke=Nt[or[D]];return Ke("q"),Ke(ce.toString()+" cm"),Ke("/"+ke.id+" Do"),Ke("Q"),this},b.getFormObject=function(D){var ce=Nt[or[D]];return{x:ce.x,y:ce.y,width:ce.width,height:ce.height,matrix:ce.matrix}},b.save=function(D,ce){return D=D||"generated.pdf",(ce=ce||{}).returnPromise=ce.returnPromise||!1,ce.returnPromise===!1?(cd(xl(lo()),D),typeof cd.unload=="function"&&An.setTimeout&&setTimeout(cd.unload,911),this):new Promise(function(ke,st){try{var ft=cd(xl(lo()),D);typeof cd.unload=="function"&&An.setTimeout&&setTimeout(cd.unload,911),ke(ft)}catch(Dt){st(Dt.message)}})},Hr.API)Hr.API.hasOwnProperty(aa)&&(aa==="events"&&Hr.API.events.length?function(D,ce){var ke,st,ft;for(ft=ce.length-1;ft!==-1;ft--)ke=ce[ft][0],st=ce[ft][1],D.subscribe.apply(D,[ke].concat(typeof st=="function"?[st]:st))}(Et,Hr.API.events):b[aa]=Hr.API[aa]);var qa=b.getPageWidth=function(D){return(Je[D=D||Ee].mediaBox.topRightX-Je[D].mediaBox.bottomLeftX)/Nr},$s=b.setPageWidth=function(D,ce){Je[D].mediaBox.topRightX=ce*Nr+Je[D].mediaBox.bottomLeftX},Qn=b.getPageHeight=function(D){return(Je[D=D||Ee].mediaBox.topRightY-Je[D].mediaBox.bottomLeftY)/Nr},qs=b.setPageHeight=function(D,ce){Je[D].mediaBox.topRightY=ce*Nr+Je[D].mediaBox.bottomLeftY};return b.internal={pdfEscape:Oi,getStyle:Yl,getFont:oa,getFontSize:ar,getCharSpace:Ga,getTextColor:Lo,getLineHeight:cs,getLineHeightFactor:us,getLineWidth:Yr,write:Gr,getHorizontalCoordinate:Yn,getVerticalCoordinate:Ln,getCoordinateString:zA,getVerticalCoordinateString:pn,collections:{},newObject:hr,newAdditionalObject:Xt,newObjectDeferred:Dr,newObjectDeferredBegin:Fn,getFilters:Jt,putStream:zr,events:Et,scaleFactor:Nr,pageSize:{getWidth:function(){return qa(Ee)},setWidth:function(D){$s(Ee,D)},getHeight:function(){return Qn(Ee)},setHeight:function(D){qs(Ee,D)}},encryptionOptions:B,encryption:Ti,getEncryptor:function(D){return B!==null?Ti.encryptor(D,0):function(ce){return ce}},output:Po,getNumberOfPages:wl,pages:kt,out:Ke,f2:re,f3:he,getPageInfo:OA,getPageInfoByObjId:bl,getCurrentPageInfo:Mc,getPDFVersion:k,Point:$a,Rectangle:Ao,Matrix:Qt,hasHotfix:ra},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return qa(Ee)},set:function(D){$s(Ee,D)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Qn(Ee)},set:function(D){qs(Ee,D)},enumerable:!0,configurable:!0}),(function(D){for(var ce=0,ke=fr.length;ce<ke;ce++){var st=_l.call(this,D[ce][0],D[ce][1],D[ce][2],fr[ce][3],!0);I===!1&&(P[st]=!0);var ft=D[ce][0].split("-");vl({id:st,fontName:ft[0],fontStyle:ft[1]||""})}Et.publish("addFonts",{fonts:se,dictionary:ve})}).call(b,fr),Tr="F1",Ls(a,r),Et.publish("initialized"),b}Lf.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Lf.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Lf.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Lf.prototype.processOwnerPassword=function(e,t){return g2(m2(t).substr(0,5),e)},Lf.prototype.encryptor=function(e,t){var r=m2(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return g2(r,i)}},Gv.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||oi(e)!==oi(this))return!1;var i=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&i--;return i===0},Hr.API={events:[]},Hr.version="3.0.2";var gs=Hr.API,iC=1,Vd=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ef=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mn=function(e){return e.toFixed(2)},$u=function(e){return e.toFixed(5)};gs.__acroform__={};var Oa=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},lF=function(e){return e*iC},hc=function(e){var t=new o6,r=Lr.internal.getHeight(e)||0,i=Lr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(mn(i)),Number(mn(r))],t},WY=gs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},ZY=gs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},XY=gs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Fs=gs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return XY(e,t-1)},Ts=gs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return WY(e,t-1)},Ps=gs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ZY(e,t-1)},YY=gs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,a=e[0],u=e[1],h=e[2],o=e[3],g={};return g.lowerLeft_X=r(a)||0,g.lowerLeft_Y=i(u+o)||0,g.upperRight_X=r(a+h)||0,g.upperRight_Y=i(u)||0,[Number(mn(g.lowerLeft_X)),Number(mn(g.lowerLeft_Y)),Number(mn(g.upperRight_X)),Number(mn(g.upperRight_Y))]},JY=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,i=y2(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+mn(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var u=hc(e);return u.scope=e.scope,u.stream=t.join(`
`),u}},y2=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(re){return re.split(`
`)}):a.map(function(re){return[re]});var u=r,h=Lr.internal.getHeight(e)||0;h=h<0?-h:h;var o=Lr.internal.getWidth(e)||0;o=o<0?-o:o;var g=function(re,he,Ie){if(re+1<a.length){var we=he+" "+a[re+1][0];return my(we,e,Ie).width<=o-4}return!1};u++;e:for(;u>0;){t="",u--;var w,B,I=my("3",e,u).height,P=e.multiline?h-u:(h-I)/2,b=P+=2,N=0,k=0,H=0;if(u<=0){t=`(...) Tj
`,t+="% Width of Text: "+my(t,e,u=12).width+", FieldWidth:"+o+`
`;break}for(var U="",Q=0,K=0;K<a.length;K++)if(a.hasOwnProperty(K)){var Z=!1;if(a[K].length!==1&&H!==a[K].length-1){if((I+2)*(Q+2)+2>h)continue e;U+=a[K][H],Z=!0,k=K,K--}else{U=(U+=a[K][H]+" ").substr(U.length-1)==" "?U.substr(0,U.length-1):U;var Ae=parseInt(K),fe=g(Ae,U,u),ge=K>=a.length-1;if(fe&&!ge){U+=" ",H=0;continue}if(fe||ge){if(ge)k=Ae;else if(e.multiline&&(I+2)*(Q+2)+2>h)continue e}else{if(!e.multiline||(I+2)*(Q+2)+2>h)continue e;k=Ae}}for(var me="",ae=N;ae<=k;ae++){var Le=a[ae];if(e.multiline){if(ae===k){me+=Le[H]+" ",H=(H+1)%Le.length;continue}if(ae===N){me+=Le[Le.length-1]+" ";continue}}me+=Le[0]+" "}switch(me=me.substr(me.length-1)==" "?me.substr(0,me.length-1):me,B=my(me,e,u).width,e.textAlign){case"right":w=o-B-2;break;case"center":w=(o-B)/2;break;default:w=2}t+=mn(w)+" "+mn(b)+` Td
`,t+="("+Vd(me)+`) Tj
`,t+=-mn(w)+` 0 Td
`,b=-(u+2),B=0,N=Z?k:k+1,Q++,U=""}break}return i.text=t,i.fontSize=u,i},my=function(e,t,r){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},eJ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},tJ=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},rJ=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(DA.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(eJ)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");iC=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new a6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var u=i[a];u.objId=void 0,u.hasAnnotation&&tJ(u,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(i,a){var u=!i;for(var h in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(h)){var o=i[h],g=[],w=o.Rect;if(o.Rect&&(o.Rect=YY(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Lr.createDefaultAppearanceStream(o),oi(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(g=o.getKeyValueListForStream()),o.Rect=w,o.hasAppearanceStream&&!o.appearanceStreamContent){var B=JY(o);g.push({key:"AP",value:"<</N "+B+">>"}),a.internal.acroformPlugin.xForms.push(B)}if(o.appearanceStreamContent){var I="";for(var P in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(P)){var b=o.appearanceStreamContent[P];if(I+="/"+P+" ",I+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var h in b)if(b.hasOwnProperty(h)){var N=b[h];typeof N=="function"&&(N=N.call(a,o)),I+="/"+h+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=b)=="function"&&(N=N.call(a,o)),I+="/"+h+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);I+=">>"}g.push({key:"AP",value:`<<
`+I+">>"})}a.internal.putStream({additionalKeyValues:g,objectId:o.objId}),a.internal.out("endobj")}u&&function(k,H){for(var U in k)if(k.hasOwnProperty(U)){var Q=U,K=k[U];H.internal.newObjectDeferredBegin(K.objId,!0),oi(K)==="object"&&typeof K.putStream=="function"&&K.putStream(),delete k[Q]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},s6=gs.__acroform__.arrayToPdfArray=function(e,t,r){var i=function(h){return h};if(Array.isArray(e)){for(var a="[",u=0;u<e.length;u++)switch(u!==0&&(a+=" "),oi(e[u])){case"boolean":case"number":case"object":a+=e[u].toString();break;case"string":e[u].substr(0,1)!=="/"?(t!==void 0&&r&&(i=r.internal.getEncryptor(t)),a+="("+Vd(i(e[u].toString()))+")"):a+=e[u].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ax=function(e,t,r){var i=function(a){return a};return t!==void 0&&r&&(i=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Vd(i(e))+")"},_c=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};_c.prototype.toString=function(){return this.objId+" 0 R"},_c.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},_c.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var i=t[r],a=this[i];a&&(Array.isArray(a)?e.push({key:i,value:s6(a,this.objId,this.scope)}):a instanceof _c?(a.scope=this.scope,e.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:i,value:a}))}return e};var o6=function(){_c.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Oa(o6,_c);var a6=function(){_c.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Vd(r(e))+")"}},set:function(r){e=r}})};Oa(a6,_c);var DA=function e(){_c.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(U){if(isNaN(U))throw new Error('Invalid value "'+U+'" for attribute F supplied.');t=U}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fs(t,3)},set:function(U){U?this.F=Ts(t,3):this.F=Ps(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(U){if(isNaN(U))throw new Error('Invalid value "'+U+'" for attribute Ff supplied.');r=U}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(U){i=U!==void 0?U:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(U){i[0]=U}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(U){i[1]=U}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(U){i[2]=U}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(U){i[3]=U}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(U){switch(U){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=U;break;default:throw new Error('Invalid value "'+U+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof $v)return;u="FieldObject"+e.FieldNum++}var U=function(Q){return Q};return this.scope&&(U=this.scope.internal.getEncryptor(this.objId)),"("+Vd(U(u))+")"},set:function(U){u=U.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(U){u=U}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(U){h=U}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(U){o=U}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(U){g=U}});var w=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return w===void 0?50/iC:w},set:function(U){w=U}});var B="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return B},set:function(U){B=U}});var I="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!I||this instanceof $v||this instanceof Fd))return Ax(I,this.objId,this.scope)},set:function(U){U=U.toString(),I=U}});var P=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof vo==0?Ax(P,this.objId,this.scope):P},set:function(U){U=U.toString(),P=this instanceof vo==0?U.substr(0,1)==="("?Ef(U.substr(1,U.length-2)):Ef(U):U}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vo==1?Ef(P.substr(1,P.length-1)):P},set:function(U){U=U.toString(),P=this instanceof vo==1?"/"+U:U}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(U){this.V=U}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof vo==0?Ax(b,this.objId,this.scope):b},set:function(U){U=U.toString(),b=this instanceof vo==0?U.substr(0,1)==="("?Ef(U.substr(1,U.length-2)):Ef(U):U}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vo==1?Ef(b.substr(1,b.length-1)):b},set:function(U){U=U.toString(),b=this instanceof vo==1?"/"+U:U}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(U){U=!!U,k=U}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(U){N=U}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,1)},set:function(U){U?this.Ff=Ts(this.Ff,1):this.Ff=Ps(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,2)},set:function(U){U?this.Ff=Ts(this.Ff,2):this.Ff=Ps(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,3)},set:function(U){U?this.Ff=Ts(this.Ff,3):this.Ff=Ps(this.Ff,3)}});var H=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(H!==null)return H},set:function(U){if([0,1,2].indexOf(U)===-1)throw new Error('Invalid value "'+U+'" for attribute Q supplied.');H=U}}),Object.defineProperty(this,"textAlign",{get:function(){var U;switch(H){case 0:default:U="left";break;case 1:U="center";break;case 2:U="right"}return U},configurable:!0,enumerable:!0,set:function(U){switch(U){case"right":case 2:H=2;break;case"center":case 1:H=1;break;default:H=0}}})};Oa(DA,_c);var lp=function(){DA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return s6(t,this.objId,this.scope)},set:function(r){var i,a;a=[],typeof(i=r)=="string"&&(a=function(u,h,o){o||(o=1);for(var g,w=[];g=h.exec(u);)w.push(g[o]);return w}(i,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,18)},set:function(r){r?this.Ff=Ts(this.Ff,18):this.Ff=Ps(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ts(this.Ff,19):this.Ff=Ps(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,20)},set:function(r){r?(this.Ff=Ts(this.Ff,20),t.sort()):this.Ff=Ps(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,22)},set:function(r){r?this.Ff=Ts(this.Ff,22):this.Ff=Ps(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,23)},set:function(r){r?this.Ff=Ts(this.Ff,23):this.Ff=Ps(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,27)},set:function(r){r?this.Ff=Ts(this.Ff,27):this.Ff=Ps(this.Ff,27)}}),this.hasAppearanceStream=!1};Oa(lp,DA);var Ap=function(){lp.call(this),this.fontName="helvetica",this.combo=!1};Oa(Ap,lp);var cp=function(){Ap.call(this),this.combo=!0};Oa(cp,Ap);var jy=function(){cp.call(this),this.edit=!0};Oa(jy,cp);var vo=function(){DA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,15)},set:function(r){r?this.Ff=Ts(this.Ff,15):this.Ff=Ps(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,16)},set:function(r){r?this.Ff=Ts(this.Ff,16):this.Ff=Ps(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,17)},set:function(r){r?this.Ff=Ts(this.Ff,17):this.Ff=Ps(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,26)},set:function(r){r?this.Ff=Ts(this.Ff,26):this.Ff=Ps(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(u){return u};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,a=[];for(i in a.push("<<"),t)a.push("/"+i+" ("+Vd(r(t[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){oi(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Oa(vo,DA);var Vy=function(){vo.call(this),this.pushButton=!0};Oa(Vy,vo);var up=function(){vo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Oa(up,vo);var $v=function(){var e,t;DA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var u,h=[];for(u in h.push("<<"),i)h.push("/"+u+" ("+Vd(a(i[u]))+")");return h.push(">>"),h.join(`
`)},set:function(a){oi(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oa($v,DA),up.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},up.prototype.createOption=function(e){var t=new $v;return t.Parent=this,t.optionName=e,this.Kids.push(t),nJ.call(this.scope,t),t};var Ky=function(){vo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lr.CheckBox.createAppearanceStream()};Oa(Ky,vo);var Fd=function(){DA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,13)},set:function(t){t?this.Ff=Ts(this.Ff,13):this.Ff=Ps(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,21)},set:function(t){t?this.Ff=Ts(this.Ff,21):this.Ff=Ps(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,23)},set:function(t){t?this.Ff=Ts(this.Ff,23):this.Ff=Ps(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,24)},set:function(t){t?this.Ff=Ts(this.Ff,24):this.Ff=Ps(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,25)},set:function(t){t?this.Ff=Ts(this.Ff,25):this.Ff=Ps(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,26)},set:function(t){t?this.Ff=Ts(this.Ff,26):this.Ff=Ps(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oa(Fd,DA);var Gy=function(){Fd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fs(this.Ff,14)},set:function(e){e?this.Ff=Ts(this.Ff,14):this.Ff=Ps(this.Ff,14)}}),this.password=!0};Oa(Gy,Fd);var Lr={CheckBox:{createAppearanceStream:function(){return{N:{On:Lr.CheckBox.YesNormal},D:{On:Lr.CheckBox.YesPushDown,Off:Lr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),u=y2(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(e))+" "+mn(Lr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+mn(u.fontSize)+" Tf "+a),r.push("BT"),r.push(u.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=hc(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=[],u=Lr.internal.getHeight(e),h=Lr.internal.getWidth(e),o=y2(e,e.caption);return a.push("1 g"),a.push("0 0 "+mn(h)+" "+mn(u)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+mn(h-1)+" "+mn(u-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+mn(o.fontSize)+" Tf "+i),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(e))+" "+mn(Lr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Lr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Lr.RadioButton.Circle.YesNormal,t.D[e]=Lr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=hc(e);t.scope=e.scope;var r=[],i=Lr.internal.getWidth(e)<=Lr.internal.getHeight(e)?Lr.internal.getWidth(e)/4:Lr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Lr.internal.Bezier_C,u=Number((i*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+$u(Lr.internal.getWidth(e)/2)+" "+$u(Lr.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+u+" "+u+" "+i+" 0 "+i+" c"),r.push("-"+u+" "+i+" -"+i+" "+u+" -"+i+" 0 c"),r.push("-"+i+" -"+u+" -"+u+" -"+i+" 0 -"+i+" c"),r.push(u+" -"+i+" "+i+" -"+u+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[],i=Lr.internal.getWidth(e)<=Lr.internal.getHeight(e)?Lr.internal.getWidth(e)/4:Lr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),u=Number((a*Lr.internal.Bezier_C).toFixed(5)),h=Number((i*Lr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$u(Lr.internal.getWidth(e)/2)+" "+$u(Lr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+u+" "+u+" "+a+" 0 "+a+" c"),r.push("-"+u+" "+a+" -"+a+" "+u+" -"+a+" 0 c"),r.push("-"+a+" -"+u+" -"+u+" -"+a+" 0 -"+a+" c"),r.push(u+" -"+a+" "+a+" -"+u+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+$u(Lr.internal.getWidth(e)/2)+" "+$u(Lr.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+h+" "+h+" "+i+" 0 "+i+" c"),r.push("-"+h+" "+i+" -"+i+" "+h+" -"+i+" 0 c"),r.push("-"+i+" -"+h+" -"+h+" -"+i+" 0 -"+i+" c"),r.push(h+" -"+i+" "+i+" -"+h+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[],i=Lr.internal.getWidth(e)<=Lr.internal.getHeight(e)?Lr.internal.getWidth(e)/4:Lr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),u=Number((a*Lr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$u(Lr.internal.getWidth(e)/2)+" "+$u(Lr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+u+" "+u+" "+a+" 0 "+a+" c"),r.push("-"+u+" "+a+" -"+a+" "+u+" -"+a+" 0 c"),r.push("-"+a+" -"+u+" -"+u+" -"+a+" 0 -"+a+" c"),r.push(u+" -"+a+" "+a+" -"+u+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Lr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Lr.RadioButton.Cross.YesNormal,t.D[e]=Lr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=hc(e);t.scope=e.scope;var r=[],i=Lr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+mn(Lr.internal.getWidth(e)-2)+" "+mn(Lr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(mn(i.x1.x)+" "+mn(i.x1.y)+" m"),r.push(mn(i.x2.x)+" "+mn(i.x2.y)+" l"),r.push(mn(i.x4.x)+" "+mn(i.x4.y)+" m"),r.push(mn(i.x3.x)+" "+mn(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=Lr.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+mn(Lr.internal.getWidth(e))+" "+mn(Lr.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+mn(Lr.internal.getWidth(e)-2)+" "+mn(Lr.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(mn(r.x1.x)+" "+mn(r.x1.y)+" m"),i.push(mn(r.x2.x)+" "+mn(r.x2.y)+" l"),i.push(mn(r.x4.x)+" "+mn(r.x4.y)+" m"),i.push(mn(r.x3.x)+" "+mn(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(e))+" "+mn(Lr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Lr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Lr.internal.getWidth(e),r=Lr.internal.getHeight(e),i=Math.min(t,r);return{x1:{x:(t-i)/2,y:(r-i)/2+i},x2:{x:(t-i)/2+i,y:(r-i)/2},x3:{x:(t-i)/2,y:(r-i)/2},x4:{x:(t-i)/2+i,y:(r-i)/2+i}}}},Lr.internal.getWidth=function(e){var t=0;return oi(e)==="object"&&(t=lF(e.Rect[2])),t},Lr.internal.getHeight=function(e){var t=0;return oi(e)==="object"&&(t=lF(e.Rect[3])),t};var nJ=gs.addField=function(e){if(rJ(this,e),!(e instanceof DA))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};gs.AcroFormChoiceField=lp,gs.AcroFormListBox=Ap,gs.AcroFormComboBox=cp,gs.AcroFormEditBox=jy,gs.AcroFormButton=vo,gs.AcroFormPushButton=Vy,gs.AcroFormRadioButton=up,gs.AcroFormCheckBox=Ky,gs.AcroFormTextField=Fd,gs.AcroFormPasswordField=Gy,gs.AcroFormAppearance=Lr,gs.AcroForm={ChoiceField:lp,ListBox:Ap,ComboBox:cp,EditBox:jy,Button:vo,PushButton:Vy,RadioButton:up,CheckBox:Ky,TextField:Fd,PasswordField:Gy,Appearance:Lr},Hr.AcroForm={ChoiceField:lp,ListBox:Ap,ComboBox:cp,EditBox:jy,Button:vo,PushButton:Vy,RadioButton:up,CheckBox:Ky,TextField:Fd,PasswordField:Gy,Appearance:Lr};Hr.AcroForm;function l6(e){return e.reduce(function(t,r,i){return t[r]=i,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(re,he){var Ie,we,nt,rt,ct,Pe=r;if((he=he||r)==="RGBA"||re.data!==void 0&&re.data instanceof Uint8ClampedArray&&"height"in re&&"width"in re)return"RGBA";if(fe(re))for(ct in i)for(nt=i[ct],Ie=0;Ie<nt.length;Ie+=1){for(rt=!0,we=0;we<nt[Ie].length;we+=1)if(nt[Ie][we]!==void 0&&nt[Ie][we]!==re[we]){rt=!1;break}if(rt===!0){Pe=ct;break}}else for(ct in i)for(nt=i[ct],Ie=0;Ie<nt.length;Ie+=1){for(rt=!0,we=0;we<nt[Ie].length;we+=1)if(nt[Ie][we]!==void 0&&nt[Ie][we]!==re.charCodeAt(we)){rt=!1;break}if(rt===!0){Pe=ct;break}}return Pe===r&&he!==r&&(Pe=he),Pe},u=function re(he){for(var Ie=this.internal.write,we=this.internal.putStream,nt=(0,this.internal.getFilters)();nt.indexOf("FlateEncode")!==-1;)nt.splice(nt.indexOf("FlateEncode"),1);he.objectId=this.internal.newObject();var rt=[];if(rt.push({key:"Type",value:"/XObject"}),rt.push({key:"Subtype",value:"/Image"}),rt.push({key:"Width",value:he.width}),rt.push({key:"Height",value:he.height}),he.colorSpace===U.INDEXED?rt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(he.palette.length/3-1)+" "+("sMask"in he&&he.sMask!==void 0?he.objectId+2:he.objectId+1)+" 0 R]"}):(rt.push({key:"ColorSpace",value:"/"+he.colorSpace}),he.colorSpace===U.DEVICE_CMYK&&rt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),rt.push({key:"BitsPerComponent",value:he.bitsPerComponent}),"decodeParameters"in he&&he.decodeParameters!==void 0&&rt.push({key:"DecodeParms",value:"<<"+he.decodeParameters+">>"}),"transparency"in he&&Array.isArray(he.transparency)){for(var ct="",Pe=0,Ve=he.transparency.length;Pe<Ve;Pe++)ct+=he.transparency[Pe]+" "+he.transparency[Pe]+" ";rt.push({key:"Mask",value:"["+ct+"]"})}he.sMask!==void 0&&rt.push({key:"SMask",value:he.objectId+1+" 0 R"});var mt=he.filter!==void 0?["/"+he.filter]:void 0;if(we({data:he.data,additionalKeyValues:rt,alreadyAppliedFilters:mt,objectId:he.objectId}),Ie("endobj"),"sMask"in he&&he.sMask!==void 0){var gt=(he.predictor!=null?"/Predictor "+he.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+he.width,ie={width:he.width,height:he.height,colorSpace:"DeviceGray",bitsPerComponent:he.bitsPerComponent,decodeParameters:gt,data:he.sMask};"filter"in he&&(ie.filter=he.filter),re.call(this,ie)}if(he.colorSpace===U.INDEXED){var Ee=this.internal.newObject();we({data:me(new Uint8Array(he.palette)),objectId:Ee}),Ie("endobj")}},h=function(){var re=this.internal.collections[t+"images"];for(var he in re)u.call(this,re[he])},o=function(){var re,he=this.internal.collections[t+"images"],Ie=this.internal.write;for(var we in he)Ie("/I"+(re=he[we]).index,re.objectId,"0","R")},g=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",h),this.internal.events.subscribe("putXobjectDict",o))},w=function(){var re=this.internal.collections[t+"images"];return g.call(this),re},B=function(){return Object.keys(this.internal.collections[t+"images"]).length},I=function(re){return typeof e["process"+re.toUpperCase()]=="function"},P=function(re){return oi(re)==="object"&&re.nodeType===1},b=function(re,he){if(re.nodeName==="IMG"&&re.hasAttribute("src")){var Ie=""+re.getAttribute("src");if(Ie.indexOf("data:image/")===0)return Hy(unescape(Ie).split("base64,").pop());var we=e.loadFile(Ie,!0);if(we!==void 0)return we}if(re.nodeName==="CANVAS"){if(re.width===0||re.height===0)throw new Error("Given canvas must have data. Canvas width: "+re.width+", height: "+re.height);var nt;switch(he){case"PNG":nt="image/png";break;case"WEBP":nt="image/webp";break;default:nt="image/jpeg"}return Hy(re.toDataURL(nt,1).split("base64,").pop())}},N=function(re){var he=this.internal.collections[t+"images"];if(he){for(var Ie in he)if(re===he[Ie].alias)return he[Ie]}},k=function(re,he,Ie){return re||he||(re=-96,he=-96),re<0&&(re=-1*Ie.width*72/re/this.internal.scaleFactor),he<0&&(he=-1*Ie.height*72/he/this.internal.scaleFactor),re===0&&(re=he*Ie.width/Ie.height),he===0&&(he=re*Ie.height/Ie.width),[re,he]},H=function(re,he,Ie,we,nt,rt){var ct=k.call(this,Ie,we,nt),Pe=this.internal.getCoordinateString,Ve=this.internal.getVerticalCoordinateString,mt=w.call(this);if(Ie=ct[0],we=ct[1],mt[nt.index]=nt,rt){rt*=Math.PI/180;var gt=Math.cos(rt),ie=Math.sin(rt),Ee=function(Ye){return Ye.toFixed(4)},Me=[Ee(gt),Ee(ie),Ee(-1*ie),Ee(gt),0,0,"cm"]}this.internal.write("q"),rt?(this.internal.write([1,"0","0",1,Pe(re),Ve(he+we),"cm"].join(" ")),this.internal.write(Me.join(" ")),this.internal.write([Pe(Ie),"0","0",Pe(we),"0","0","cm"].join(" "))):this.internal.write([Pe(Ie),"0","0",Pe(we),Pe(re),Ve(he+we),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+nt.index+" Do"),this.internal.write("Q")},U=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Q=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},K=e.__addimage__.sHashCode=function(re){var he,Ie,we=0;if(typeof re=="string")for(Ie=re.length,he=0;he<Ie;he++)we=(we<<5)-we+re.charCodeAt(he),we|=0;else if(fe(re))for(Ie=re.byteLength/2,he=0;he<Ie;he++)we=(we<<5)-we+re[he],we|=0;return we},Z=e.__addimage__.validateStringAsBase64=function(re){(re=re||"").toString().trim();var he=!0;return re.length===0&&(he=!1),re.length%4!=0&&(he=!1),/^[A-Za-z0-9+/]+$/.test(re.substr(0,re.length-2))===!1&&(he=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(re.substr(-2))===!1&&(he=!1),he},Ae=e.__addimage__.extractImageFromDataUrl=function(re){if(re==null||!(re=re.trim()).startsWith("data:"))return null;var he=re.indexOf(",");return he<0?null:re.substring(0,he).trim().endsWith("base64")?re.substring(he+1):null};e.__addimage__.isArrayBuffer=function(re){return re instanceof ArrayBuffer};var fe=e.__addimage__.isArrayBufferView=function(re){return re instanceof Int8Array||re instanceof Uint8Array||re instanceof Uint8ClampedArray||re instanceof Int16Array||re instanceof Uint16Array||re instanceof Int32Array||re instanceof Uint32Array||re instanceof Float32Array||re instanceof Float64Array},ge=e.__addimage__.binaryStringToUint8Array=function(re){for(var he=re.length,Ie=new Uint8Array(he),we=0;we<he;we++)Ie[we]=re.charCodeAt(we);return Ie},me=e.__addimage__.arrayBufferToBinaryString=function(re){for(var he="",Ie=fe(re)?re:new Uint8Array(re),we=0;we<Ie.length;we+=8192)he+=String.fromCharCode.apply(null,Ie.subarray(we,we+8192));return he};e.addImage=function(){var re,he,Ie,we,nt,rt,ct,Pe,Ve;if(typeof arguments[1]=="number"?(he=r,Ie=arguments[1],we=arguments[2],nt=arguments[3],rt=arguments[4],ct=arguments[5],Pe=arguments[6],Ve=arguments[7]):(he=arguments[1],Ie=arguments[2],we=arguments[3],nt=arguments[4],rt=arguments[5],ct=arguments[6],Pe=arguments[7],Ve=arguments[8]),oi(re=arguments[0])==="object"&&!P(re)&&"imageData"in re){var mt=re;re=mt.imageData,he=mt.format||he||r,Ie=mt.x||Ie||0,we=mt.y||we||0,nt=mt.w||mt.width||nt,rt=mt.h||mt.height||rt,ct=mt.alias||ct,Pe=mt.compression||Pe,Ve=mt.rotation||mt.angle||Ve}var gt=this.internal.getFilters();if(Pe===void 0&&gt.indexOf("FlateEncode")!==-1&&(Pe="SLOW"),isNaN(Ie)||isNaN(we))throw new Error("Invalid coordinates passed to jsPDF.addImage");g.call(this);var ie=ae.call(this,re,he,ct,Pe);return H.call(this,Ie,we,nt,rt,ie,Ve),this};var ae=function(re,he,Ie,we){var nt,rt,ct;if(typeof re=="string"&&a(re)===r){re=unescape(re);var Pe=Le(re,!1);(Pe!==""||(Pe=e.loadFile(re,!0))!==void 0)&&(re=Pe)}if(P(re)&&(re=b(re,he)),he=a(re,he),!I(he))throw new Error("addImage does not support files of type '"+he+"', please ensure that a plugin for '"+he+"' support is added.");if(((ct=Ie)==null||ct.length===0)&&(Ie=function(Ve){return typeof Ve=="string"||fe(Ve)?K(Ve):fe(Ve.data)?K(Ve.data):null}(re)),(nt=N.call(this,Ie))||(re instanceof Uint8Array||he==="RGBA"||(rt=re,re=ge(re)),nt=this["process"+he.toUpperCase()](re,B.call(this),Ie,function(Ve){return Ve&&typeof Ve=="string"&&(Ve=Ve.toUpperCase()),Ve in e.image_compression?Ve:Q.NONE}(we),rt)),!nt)throw new Error("An unknown error occurred whilst processing the image.");return nt},Le=e.__addimage__.convertBase64ToBinaryString=function(re,he){he=typeof he!="boolean"||he;var Ie,we="";if(typeof re=="string"){var nt;Ie=(nt=Ae(re))!==null&&nt!==void 0?nt:re;try{we=Hy(Ie)}catch(rt){if(he)throw Z(Ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+rt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return we};e.getImageProperties=function(re){var he,Ie,we="";if(P(re)&&(re=b(re)),typeof re=="string"&&a(re)===r&&((we=Le(re,!1))===""&&(we=e.loadFile(re)||""),re=we),Ie=a(re),!I(Ie))throw new Error("addImage does not support files of type '"+Ie+"', please ensure that a plugin for '"+Ie+"' support is added.");if(re instanceof Uint8Array||(re=ge(re)),!(he=this["process"+Ie.toUpperCase()](re)))throw new Error("An unknown error occurred whilst processing the image");return he.fileType=Ie,he}})(Hr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Hr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var i,a,u,h=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(r.objId),w=r.pageContext.annotations,B=!1,I=0;I<w.length&&!B;I++)switch((i=w[I]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(B=!0);break;case"reference":case"text":case"freetext":B=!0}if(B!=0){this.internal.write("/Annots [");for(var P=0;P<w.length;P++){i=w[P];var b=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),H=this.internal.newAdditionalObject(),U=this.internal.getEncryptor(k.objId),Q=i.title||"Note";u="<</Type /Annot /Subtype /Text "+(a="/Rect ["+h(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+h(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+b(U(i.contents))+")",u+=" /Popup "+H.objId+" 0 R",u+=" /P "+g.objId+" 0 R",u+=" /T ("+b(U(Q))+") >>",k.content=u;var K=k.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+h(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+h(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+K,i.open&&(u+=" /Open true"),u+=" >>",H.content=u,this.internal.write(k.objId,"0 R",H.objId,"0 R");break;case"freetext":a="/Rect ["+h(i.bounds.x)+" "+o(i.bounds.y)+" "+h(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var Z=i.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(N(i.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(i.options.name){var Ae=this.annotations._nameMap[i.options.name];i.options.pageNumber=Ae.page,i.options.top=Ae.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",u="",i.options.url)u="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(N(i.options.url))+") >>";else if(i.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,u+=" /FitV "+i.options.left+"]";break;default:var fe=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),u+=" /XYZ "+i.options.left+" "+fe+" "+i.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},e.link=function(r,i,a,u,h){var o=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,w=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:g(r),y:w(i),w:g(r+a),h:w(i+u)},options:h,type:"link"})},e.textWithLink=function(r,i,a,u){var h,o,g=this.getTextWidth(r),w=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){o=u.maxWidth;var B=this.splitTextToSize(r,o).length;h=Math.ceil(w*B)}else o=g,h=w;return this.text(r,i,a,u),a+=.2*w,u.align==="center"&&(i-=g/2),u.align==="right"&&(i-=g),this.link(i,a-w,o,h,u),g},e.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(Hr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var u=e.__arabicParser__.isInArabicSubstitutionA=function(k){return t[k.charCodeAt(0)]!==void 0},h=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},o=e.__arabicParser__.isArabicEndLetter=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length<=2},g=e.__arabicParser__.isArabicAlfLetter=function(k){return h(k)&&a.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length>=1};var w=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length>=3};var B=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return h(k)&&u(k)&&t[k.charCodeAt(0)].length==4},I=e.__arabicParser__.resolveLigatures=function(k){var H=0,U=r,Q="",K=0;for(H=0;H<k.length;H+=1)U[k.charCodeAt(H)]!==void 0?(K++,typeof(U=U[k.charCodeAt(H)])=="number"&&(Q+=String.fromCharCode(U),U=r,K=0),H===k.length-1&&(U=r,Q+=k.charAt(H-(K-1)),H-=K-1,K=0)):(U=r,Q+=k.charAt(H-K),H-=K,K=0);return Q};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&i[k.charCodeAt(0)]!==void 0};var P=e.__arabicParser__.getCorrectForm=function(k,H,U){return h(k)?u(k)===!1?-1:!w(k)||!h(H)&&!h(U)||!h(U)&&o(H)||o(k)&&!h(H)||o(k)&&g(H)||o(k)&&o(H)?0:B(k)&&h(H)&&!o(H)&&h(U)&&w(U)?3:o(k)||!h(U)?1:2:-1},b=function(k){var H=0,U=0,Q=0,K="",Z="",Ae="",fe=(k=k||"").split("\\s+"),ge=[];for(H=0;H<fe.length;H+=1){for(ge.push(""),U=0;U<fe[H].length;U+=1)K=fe[H][U],Z=fe[H][U-1],Ae=fe[H][U+1],h(K)?(Q=P(K,Z,Ae),ge[H]+=Q!==-1?String.fromCharCode(t[K.charCodeAt(0)][Q]):K):ge[H]+=K;ge[H]=I(ge[H])}return ge.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var k,H=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,U=[];if(Array.isArray(H)){var Q=0;for(U=[],Q=0;Q<H.length;Q+=1)Array.isArray(H[Q])?U.push([b(H[Q][0]),H[Q][1],H[Q][2]]):U.push([b(H[Q])]);k=U}else k=b(H);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",N])}(Hr.API),Hr.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(o){u=o}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(o){h=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,i){var a;if((r=r||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Hr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var w=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return w},set:function(k){w=k}});var B=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return B},set:function(k){B=k}});var I=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return I},set:function(k){I=k}});var P=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return P},set:function(k){P=k}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(k){b=k}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(k){N=k}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(g){return i.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},e.getTextDimensions=function(g,w){i.call(this);var B=(w=w||{}).fontSize||this.getFontSize(),I=w.font||this.getFont(),P=w.scaleFactor||this.internal.scaleFactor,b=0,N=0,k=0,H=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var U=w.maxWidth;U>0?typeof g=="string"?g=this.splitTextToSize(g,U):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(K,Z){return K.concat(H.splitTextToSize(Z,U))},[])):g=Array.isArray(g)?g:[g];for(var Q=0;Q<g.length;Q++)b<(k=this.getStringUnitWidth(g[Q],{font:I})*B)&&(b=k);return b!==0&&(N=g.length),{w:b/=P,h:Math.max((N*B*this.getLineHeightFactor()-B*(this.getLineHeightFactor()-1))/P,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var g=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new u(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=e.cell=function(){var g;g=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var w=this.internal.__cell__.lastCell,B=this.internal.__cell__.padding,I=this.internal.__cell__.margins||t,P=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return w.lineNumber!==void 0&&(w.lineNumber===g.lineNumber?(g.x=(w.x||0)+(w.width||0),g.y=w.y||0):w.y+w.height+g.height+I.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=I.top,b&&P&&(this.printHeaderRow(g.lineNumber,!0),g.y+=P[0].height)):g.y=w.y+w.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,r===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-B,g.y+B,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+B,{align:"center",baseline:"top",maxWidth:g.width-B-B}):this.text(g.text,g.x+B,g.y+B,{align:"left",baseline:"top",maxWidth:g.width-B-B})),this.internal.__cell__.lastCell=g,this};e.table=function(g,w,B,I,P){if(i.call(this),!B)throw new Error("No data for PDF table.");var b,N,k,H,U=[],Q=[],K=[],Z={},Ae={},fe=[],ge=[],me=(P=P||{}).autoSize||!1,ae=P.printHeaders!==!1,Le=P.css&&P.css["font-size"]!==void 0?16*P.css["font-size"]:P.fontSize||12,re=P.margins||Object.assign({width:this.getPageWidth()},t),he=typeof P.padding=="number"?P.padding:3,Ie=P.headerBackgroundColor||"#c8c8c8",we=P.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=ae,this.internal.__cell__.margins=re,this.internal.__cell__.table_font_size=Le,this.internal.__cell__.padding=he,this.internal.__cell__.headerBackgroundColor=Ie,this.internal.__cell__.headerTextColor=we,this.setFontSize(Le),I==null)Q=U=Object.keys(B[0]),K=U.map(function(){return"left"});else if(Array.isArray(I)&&oi(I[0])==="object")for(U=I.map(function(mt){return mt.name}),Q=I.map(function(mt){return mt.prompt||mt.name||""}),K=I.map(function(mt){return mt.align||"left"}),b=0;b<I.length;b+=1)Ae[I[b].name]=.7499990551181103*I[b].width;else Array.isArray(I)&&typeof I[0]=="string"&&(Q=U=I,K=U.map(function(){return"left"}));if(me||Array.isArray(I)&&typeof I[0]=="string")for(b=0;b<U.length;b+=1){for(Z[H=U[b]]=B.map(function(mt){return mt[H]}),this.setFont(void 0,"bold"),fe.push(this.getTextDimensions(Q[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=Z[H],this.setFont(void 0,"normal"),k=0;k<N.length;k+=1)fe.push(this.getTextDimensions(N[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Ae[H]=Math.max.apply(null,fe)+he+he,fe=[]}if(ae){var nt={};for(b=0;b<U.length;b+=1)nt[U[b]]={},nt[U[b]].text=Q[b],nt[U[b]].align=K[b];var rt=o.call(this,nt,Ae);ge=U.map(function(mt){return new u(g,w,Ae[mt],rt,nt[mt].text,void 0,nt[mt].align)}),this.setTableHeaderRow(ge),this.printHeaderRow(1,!1)}var ct=I.reduce(function(mt,gt){return mt[gt.name]=gt.align,mt},{});for(b=0;b<B.length;b+=1){"rowStart"in P&&P.rowStart instanceof Function&&P.rowStart({row:b,data:B[b]},this);var Pe=o.call(this,B[b],Ae);for(k=0;k<U.length;k+=1){var Ve=B[b][U[k]];"cellStart"in P&&P.cellStart instanceof Function&&P.cellStart({row:b,col:k,data:Ve},this),h.call(this,new u(g,w,Ae[U[k]],Pe,Ve,b+2,ct[U[k]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=w,this};var o=function(g,w){var B=this.internal.__cell__.padding,I=this.internal.__cell__.table_font_size,P=this.internal.scaleFactor;return Object.keys(g).map(function(b){var N=g[b];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,w[b]-B-B)},this).map(function(b){return this.getLineHeightFactor()*b.length*I/P+B+B},this).reduce(function(b,N){return Math.max(b,N)},0)};e.setTableHeaderRow=function(g){i.call(this),this.internal.__cell__.tableHeaderRow=g},e.printHeaderRow=function(g,w){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var B;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var I=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(I[0],I[1],I[2],I[3],void 0,-1)}this.setFont(void 0,"bold");for(var P=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){B=this.internal.__cell__.tableHeaderRow[b].clone(),w&&(B.y=this.internal.__cell__.margins.top||0,P.push(B)),B.lineNumber=g;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,B),this.setTextColor(N)}P.length>0&&this.setTableHeaderRow(P),this.setFont(void 0,"normal"),r=!1}}(Hr.API);var A6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},c6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],v2=l6(c6),u6=[100,200,300,400,500,600,700,800,900],iJ=l6(u6);function cx(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(u){return A6[u=u||"normal"]?u:"normal"}(e.style),i=function(u){return u?typeof u=="number"?u>=100&&u<=900&&u%100==0?u:400:/^\d00$/.test(u)?parseInt(u):u==="bold"?700:400:400}(e.weight),a=function(u){return typeof v2[u=u||"normal"]=="number"?u:"normal"}(e.stretch);return{family:t,style:r,weight:i,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,i].join(" ")}}}function AF(e,t,r,i){var a;for(a=r;a>=0&&a<t.length;a+=i)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=i)if(e[t[a]])return e[t[a]]}var sJ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},cF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function uF(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function hF(e){return e.trimLeft()}function oJ(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function aJ(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var gy,dF,fF,If,yy,pF,mF,gF,ux=["times"];function yF(e,t,r,i){var a=4,u=_F;switch(i){case Hr.API.image_compression.FAST:a=1,u=vF;break;case Hr.API.image_compression.MEDIUM:a=6,u=wF;break;case Hr.API.image_compression.SLOW:a=9,u=xF}e=function(o,g,w,B){for(var I,P=o.length/g,b=new Uint8Array(o.length+P),N=[lJ,vF,_F,wF,xF],k=0;k<P;k+=1){var H=k*g,U=o.subarray(H,H+g);if(B)b.set(B(U,w,I),H+k);else{for(var Q=N.length,K=[],Z=0;Z<Q;Z+=1)K[Z]=N[Z](U,w,I);var Ae=cJ(K.concat());b.set(K[Ae],H+k)}I=U}return b}(e,t,r,u);var h=c2(e,{level:a});return Hr.API.__addimage__.arrayBufferToBinaryString(h)}function lJ(e){var t=Array.apply([],e);return t.unshift(0),t}function vF(e,t){var r=e.length,i=[];i[0]=1;for(var a=0;a<r;a+=1){var u=e[a-t]||0;i[a+1]=e[a]-u+256&255}return i}function _F(e,t,r){var i=e.length,a=[];a[0]=2;for(var u=0;u<i;u+=1){var h=r&&r[u]||0;a[u+1]=e[u]-h+256&255}return a}function wF(e,t,r){var i=e.length,a=[];a[0]=3;for(var u=0;u<i;u+=1){var h=e[u-t]||0,o=r&&r[u]||0;a[u+1]=e[u]+256-(h+o>>>1)&255}return a}function xF(e,t,r){var i=e.length,a=[];a[0]=4;for(var u=0;u<i;u+=1){var h=AJ(e[u-t]||0,r&&r[u]||0,r&&r[u-t]||0);a[u+1]=e[u]-h+256&255}return a}function AJ(e,t,r){if(e===t&&t===r)return e;var i=Math.abs(t-r),a=Math.abs(e-r),u=Math.abs(e+t-r-r);return i<=a&&i<=u?e:a<=u?t:r}function cJ(e){var t=e.map(function(r){return r.reduce(function(i,a){return i+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function hx(e,t,r){var i=t*r,a=Math.floor(i/8),u=16-(i-8*a+r),h=(1<<r)-1;return h6(e,a)>>u&h}function bF(e,t,r,i){var a=r*i,u=Math.floor(a/8),h=16-(a-8*u+i),o=(1<<i)-1,g=(t&o)<<h;(function(w,B,I){if(B+1<w.byteLength)w.setUint16(B,I,!1);else{var P=I>>8&255;w.setUint8(B,P)}})(e,u,h6(e,u)&~(o<<h)&65535|g)}function h6(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function uJ(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,a=e[t++],u=a>>7,h=1<<1+(7&a);e[t++],e[t++];var o=null,g=null;u&&(o=t,g=h,t+=3*h);var w=!0,B=[],I=0,P=null,b=0,N=null;for(this.width=r,this.height=i;w&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[t++];I=e[t++]|e[t++]<<8,P=e[t++],1&k||(P=null),b=k>>2&7,t++;break;case 254:for(;;){if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var H=e[t++]|e[t++]<<8,U=e[t++]|e[t++]<<8,Q=e[t++]|e[t++]<<8,K=e[t++]|e[t++]<<8,Z=e[t++],Ae=Z>>6&1,fe=1<<1+(7&Z),ge=o,me=g,ae=!1;Z>>7&&(ae=!0,ge=t,me=fe,t+=3*fe);var Le=t;for(t++;;){var re;if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}B.push({x:H,y:U,width:Q,height:K,has_local_palette:ae,palette_offset:ge,palette_size:me,data_offset:Le,data_length:t-Le,transparent_index:P,interlaced:!!Ae,delay:I,disposal:b});break;case 59:w=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return B.length},this.loopCount=function(){return N},this.frameInfo=function(he){if(he<0||he>=B.length)throw new Error("Frame index out of range.");return B[he]},this.decodeAndBlitFrameBGRA=function(he,Ie){var we=this.frameInfo(he),nt=we.width*we.height,rt=new Uint8Array(nt);BF(e,we.data_offset,rt,nt);var ct=we.palette_offset,Pe=we.transparent_index;Pe===null&&(Pe=256);var Ve=we.width,mt=r-Ve,gt=Ve,ie=4*(we.y*r+we.x),Ee=4*((we.y+we.height)*r+we.x),Me=ie,Ye=4*mt;we.interlaced===!0&&(Ye+=4*r*7);for(var at=8,Ze=0,Ct=rt.length;Ze<Ct;++Ze){var dt=rt[Ze];if(gt===0&&(gt=Ve,(Me+=Ye)>=Ee&&(Ye=4*mt+4*r*(at-1),Me=ie+(Ve+mt)*(at<<1),at>>=1)),dt===Pe)Me+=4;else{var Lt=e[ct+3*dt],kt=e[ct+3*dt+1],$t=e[ct+3*dt+2];Ie[Me++]=$t,Ie[Me++]=kt,Ie[Me++]=Lt,Ie[Me++]=255}--gt}},this.decodeAndBlitFrameRGBA=function(he,Ie){var we=this.frameInfo(he),nt=we.width*we.height,rt=new Uint8Array(nt);BF(e,we.data_offset,rt,nt);var ct=we.palette_offset,Pe=we.transparent_index;Pe===null&&(Pe=256);var Ve=we.width,mt=r-Ve,gt=Ve,ie=4*(we.y*r+we.x),Ee=4*((we.y+we.height)*r+we.x),Me=ie,Ye=4*mt;we.interlaced===!0&&(Ye+=4*r*7);for(var at=8,Ze=0,Ct=rt.length;Ze<Ct;++Ze){var dt=rt[Ze];if(gt===0&&(gt=Ve,(Me+=Ye)>=Ee&&(Ye=4*mt+4*r*(at-1),Me=ie+(Ve+mt)*(at<<1),at>>=1)),dt===Pe)Me+=4;else{var Lt=e[ct+3*dt],kt=e[ct+3*dt+1],$t=e[ct+3*dt+2];Ie[Me++]=Lt,Ie[Me++]=kt,Ie[Me++]=$t,Ie[Me++]=255}--gt}}}function BF(e,t,r,i){for(var a=e[t++],u=1<<a,h=u+1,o=h+1,g=a+1,w=(1<<g)-1,B=0,I=0,P=0,b=e[t++],N=new Int32Array(4096),k=null;;){for(;B<16&&b!==0;)I|=e[t++]<<B,B+=8,b===1?b=e[t++]:--b;if(B<g)break;var H=I&w;if(I>>=g,B-=g,H!==u){if(H===h)break;for(var U=H<o?H:k,Q=0,K=U;K>u;)K=N[K]>>8,++Q;var Z=K;if(P+Q+(U!==H?1:0)>i)return void vi.log("Warning, gif stream longer than expected.");r[P++]=Z;var Ae=P+=Q;for(U!==H&&(r[P++]=Z),K=U;Q--;)K=N[K],r[--Ae]=255&K,K>>=8;k!==null&&o<4096&&(N[o++]=k<<8|Z,o>=w+1&&g<12&&(++g,w=w<<1|1)),k=H}else o=h+1,w=(1<<(g=a+1))-1,k=null}return P!==i&&vi.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function dx(e){var t,r,i,a,u,h=Math.floor,o=new Array(64),g=new Array(64),w=new Array(64),B=new Array(64),I=new Array(65535),P=new Array(65535),b=new Array(64),N=new Array(64),k=[],H=0,U=7,Q=new Array(64),K=new Array(64),Z=new Array(64),Ae=new Array(256),fe=new Array(2048),ge=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],me=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ae=[0,1,2,3,4,5,6,7,8,9,10,11],Le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],re=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],he=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ie=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],nt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function rt(ie,Ee){for(var Me=0,Ye=0,at=new Array,Ze=1;Ze<=16;Ze++){for(var Ct=1;Ct<=ie[Ze];Ct++)at[Ee[Ye]]=[],at[Ee[Ye]][0]=Me,at[Ee[Ye]][1]=Ze,Ye++,Me++;Me*=2}return at}function ct(ie){for(var Ee=ie[0],Me=ie[1]-1;Me>=0;)Ee&1<<Me&&(H|=1<<U),Me--,--U<0&&(H==255?(Pe(255),Pe(0)):Pe(H),U=7,H=0)}function Pe(ie){k.push(ie)}function Ve(ie){Pe(ie>>8&255),Pe(255&ie)}function mt(ie,Ee,Me,Ye,at){for(var Ze,Ct=at[0],dt=at[240],Lt=function(Vt,xr){var ar,qr,mr,hn,Vr,Sr,Jr,jr,Tr,Nr,br=0;for(Tr=0;Tr<8;++Tr){ar=Vt[br],qr=Vt[br+1],mr=Vt[br+2],hn=Vt[br+3],Vr=Vt[br+4],Sr=Vt[br+5],Jr=Vt[br+6];var ot=ar+(jr=Vt[br+7]),le=ar-jr,se=qr+Jr,ve=qr-Jr,Ue=mr+Sr,Ge=mr-Sr,et=hn+Vr,At=hn-Vr,it=ot+et,St=ot-et,pt=se+Ue,Je=se-Ue;Vt[br]=it+pt,Vt[br+4]=it-pt;var Et=.707106781*(Je+St);Vt[br+2]=St+Et,Vt[br+6]=St-Et;var ze=.382683433*((it=At+Ge)-(Je=ve+le)),Nt=.5411961*it+ze,or=1.306562965*Je+ze,tr=.707106781*(pt=Ge+ve),Qt=le+tr,gr=le-tr;Vt[br+5]=gr+Nt,Vt[br+3]=gr-Nt,Vt[br+1]=Qt+or,Vt[br+7]=Qt-or,br+=8}for(br=0,Tr=0;Tr<8;++Tr){ar=Vt[br],qr=Vt[br+8],mr=Vt[br+16],hn=Vt[br+24],Vr=Vt[br+32],Sr=Vt[br+40],Jr=Vt[br+48];var on=ar+(jr=Vt[br+56]),Qr=ar-jr,Or=qr+Jr,hr=qr-Jr,Dr=mr+Sr,Fn=mr-Sr,Xt=hn+Vr,li=hn-Vr,Tn=on+Xt,vs=on-Xt,_s=Or+Dr,Jt=Or-Dr;Vt[br]=Tn+_s,Vt[br+32]=Tn-_s;var zr=.707106781*(Jt+vs);Vt[br+16]=vs+zr,Vt[br+48]=vs-zr;var Wr=.382683433*((Tn=li+Fn)-(Jt=hr+Qr)),_i=.5411961*Tn+Wr,xa=1.306562965*Jt+Wr,Gs=.707106781*(_s=Fn+hr),Xr=Qr+Gs,ao=Qr-Gs;Vt[br+40]=ao+_i,Vt[br+24]=ao-_i,Vt[br+8]=Xr+xa,Vt[br+56]=Xr-xa,br++}for(Tr=0;Tr<64;++Tr)Nr=Vt[Tr]*xr[Tr],b[Tr]=Nr>0?Nr+.5|0:Nr-.5|0;return b}(ie,Ee),kt=0;kt<64;++kt)N[ge[kt]]=Lt[kt];var $t=N[0]-Me;Me=N[0],$t==0?ct(Ye[0]):(ct(Ye[P[Ze=32767+$t]]),ct(I[Ze]));for(var Gt=63;Gt>0&&N[Gt]==0;)Gt--;if(Gt==0)return ct(Ct),Me;for(var Pt,Ke=1;Ke<=Gt;){for(var Gr=Ke;N[Ke]==0&&Ke<=Gt;)++Ke;var wr=Ke-Gr;if(wr>=16){Pt=wr>>4;for(var fr=1;fr<=Pt;++fr)ct(dt);wr&=15}Ze=32767+N[Ke],ct(at[(wr<<4)+P[Ze]]),ct(I[Ze]),Ke++}return Gt!=63&&ct(Ct),Me}function gt(ie){ie=Math.min(Math.max(ie,1),100),u!=ie&&(function(Ee){for(var Me=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ye=0;Ye<64;Ye++){var at=h((Me[Ye]*Ee+50)/100);at=Math.min(Math.max(at,1),255),o[ge[Ye]]=at}for(var Ze=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ct=0;Ct<64;Ct++){var dt=h((Ze[Ct]*Ee+50)/100);dt=Math.min(Math.max(dt,1),255),g[ge[Ct]]=dt}for(var Lt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],kt=0,$t=0;$t<8;$t++)for(var Gt=0;Gt<8;Gt++)w[kt]=1/(o[ge[kt]]*Lt[$t]*Lt[Gt]*8),B[kt]=1/(g[ge[kt]]*Lt[$t]*Lt[Gt]*8),kt++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),u=ie)}this.encode=function(ie,Ee){Ee&&gt(Ee),k=new Array,H=0,U=7,Ve(65496),Ve(65504),Ve(16),Pe(74),Pe(70),Pe(73),Pe(70),Pe(0),Pe(1),Pe(1),Pe(0),Ve(1),Ve(1),Pe(0),Pe(0),function(){Ve(65499),Ve(132),Pe(0);for(var qr=0;qr<64;qr++)Pe(o[qr]);Pe(1);for(var mr=0;mr<64;mr++)Pe(g[mr])}(),function(qr,mr){Ve(65472),Ve(17),Pe(8),Ve(mr),Ve(qr),Pe(3),Pe(1),Pe(17),Pe(0),Pe(2),Pe(17),Pe(1),Pe(3),Pe(17),Pe(1)}(ie.width,ie.height),function(){Ve(65476),Ve(418),Pe(0);for(var qr=0;qr<16;qr++)Pe(me[qr+1]);for(var mr=0;mr<=11;mr++)Pe(ae[mr]);Pe(16);for(var hn=0;hn<16;hn++)Pe(Le[hn+1]);for(var Vr=0;Vr<=161;Vr++)Pe(re[Vr]);Pe(1);for(var Sr=0;Sr<16;Sr++)Pe(he[Sr+1]);for(var Jr=0;Jr<=11;Jr++)Pe(Ie[Jr]);Pe(17);for(var jr=0;jr<16;jr++)Pe(we[jr+1]);for(var Tr=0;Tr<=161;Tr++)Pe(nt[Tr])}(),Ve(65498),Ve(12),Pe(3),Pe(1),Pe(0),Pe(2),Pe(17),Pe(3),Pe(17),Pe(0),Pe(63),Pe(0);var Me=0,Ye=0,at=0;H=0,U=7,this.encode.displayName="_encode_";for(var Ze,Ct,dt,Lt,kt,$t,Gt,Pt,Ke,Gr=ie.data,wr=ie.width,fr=ie.height,Vt=4*wr,xr=0;xr<fr;){for(Ze=0;Ze<Vt;){for(kt=Vt*xr+Ze,Gt=-1,Pt=0,Ke=0;Ke<64;Ke++)$t=kt+(Pt=Ke>>3)*Vt+(Gt=4*(7&Ke)),xr+Pt>=fr&&($t-=Vt*(xr+1+Pt-fr)),Ze+Gt>=Vt&&($t-=Ze+Gt-Vt+4),Ct=Gr[$t++],dt=Gr[$t++],Lt=Gr[$t++],Q[Ke]=(fe[Ct]+fe[dt+256|0]+fe[Lt+512|0]>>16)-128,K[Ke]=(fe[Ct+768|0]+fe[dt+1024|0]+fe[Lt+1280|0]>>16)-128,Z[Ke]=(fe[Ct+1280|0]+fe[dt+1536|0]+fe[Lt+1792|0]>>16)-128;Me=mt(Q,w,Me,t,i),Ye=mt(K,B,Ye,r,a),at=mt(Z,B,at,r,a),Ze+=32}xr+=8}if(U>=0){var ar=[];ar[1]=U+1,ar[0]=(1<<U+1)-1,ct(ar)}return Ve(65497),new Uint8Array(k)},e=e||50,function(){for(var ie=String.fromCharCode,Ee=0;Ee<256;Ee++)Ae[Ee]=ie(Ee)}(),t=rt(me,ae),r=rt(he,Ie),i=rt(Le,re),a=rt(we,nt),function(){for(var ie=1,Ee=2,Me=1;Me<=15;Me++){for(var Ye=ie;Ye<Ee;Ye++)P[32767+Ye]=Me,I[32767+Ye]=[],I[32767+Ye][1]=Me,I[32767+Ye][0]=Ye;for(var at=-(Ee-1);at<=-ie;at++)P[32767+at]=Me,I[32767+at]=[],I[32767+at][1]=Me,I[32767+at][0]=Ee-1+at;ie<<=1,Ee<<=1}}(),function(){for(var ie=0;ie<256;ie++)fe[ie]=19595*ie,fe[ie+256|0]=38470*ie,fe[ie+512|0]=7471*ie+32768,fe[ie+768|0]=-11059*ie,fe[ie+1024|0]=-21709*ie,fe[ie+1280|0]=32768*ie+8421375,fe[ie+1536|0]=-27439*ie,fe[ie+1792|0]=-5329*ie}(),gt(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wA(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function CF(e){function t(ae){if(!ae)throw Error("assert :P")}function r(ae,Le,re){for(var he=0;4>he;he++)if(ae[Le+he]!=re.charCodeAt(he))return!0;return!1}function i(ae,Le,re,he,Ie){for(var we=0;we<Ie;we++)ae[Le+we]=re[he+we]}function a(ae,Le,re,he){for(var Ie=0;Ie<he;Ie++)ae[Le+Ie]=re}function u(ae){return new Int32Array(ae)}function h(ae,Le){for(var re=[],he=0;he<ae;he++)re.push(new Le);return re}function o(ae,Le){var re=[];return function he(Ie,we,nt){for(var rt=nt[we],ct=0;ct<rt&&(Ie.push(nt.length>we+1?[]:new Le),!(nt.length<we+1));ct++)he(Ie[ct],we+1,nt)}(re,0,ae),re}var g=function(){var ae=this;function Le(S,T){for(var j=1<<T-1>>>0;S&j;)j>>>=1;return j?(S&j-1)+j:S}function re(S,T,j,W,ue){t(!(W%j));do S[T+(W-=j)]=ue;while(0<W)}function he(S,T,j,W,ue){if(t(2328>=ue),512>=ue)var ye=u(512);else if((ye=u(ue))==null)return 0;return function(_e,be,Fe,Ne,Qe,It){var Oe,ht,yt=be,Rt=1<<Fe,Bt=u(16),wt=u(16);for(t(Qe!=0),t(Ne!=null),t(_e!=null),t(0<Fe),ht=0;ht<Qe;++ht){if(15<Ne[ht])return 0;++Bt[Ne[ht]]}if(Bt[0]==Qe)return 0;for(wt[1]=0,Oe=1;15>Oe;++Oe){if(Bt[Oe]>1<<Oe)return 0;wt[Oe+1]=wt[Oe]+Bt[Oe]}for(ht=0;ht<Qe;++ht)Oe=Ne[ht],0<Ne[ht]&&(It[wt[Oe]++]=ht);if(wt[15]==1)return(Ne=new Ie).g=0,Ne.value=It[0],re(_e,yt,1,Rt,Ne),Rt;var Ot,rr=-1,qt=Rt-1,Ur=0,Br=1,ln=1,Er=1<<Fe;for(ht=0,Oe=1,Qe=2;Oe<=Fe;++Oe,Qe<<=1){if(Br+=ln<<=1,0>(ln-=Bt[Oe]))return 0;for(;0<Bt[Oe];--Bt[Oe])(Ne=new Ie).g=Oe,Ne.value=It[ht++],re(_e,yt+Ur,Qe,Er,Ne),Ur=Le(Ur,Oe)}for(Oe=Fe+1,Qe=2;15>=Oe;++Oe,Qe<<=1){if(Br+=ln<<=1,0>(ln-=Bt[Oe]))return 0;for(;0<Bt[Oe];--Bt[Oe]){if(Ne=new Ie,(Ur&qt)!=rr){for(yt+=Er,Ot=1<<(rr=Oe)-Fe;15>rr&&!(0>=(Ot-=Bt[rr]));)++rr,Ot<<=1;Rt+=Er=1<<(Ot=rr-Fe),_e[be+(rr=Ur&qt)].g=Ot+Fe,_e[be+rr].value=yt-be-rr}Ne.g=Oe-Fe,Ne.value=It[ht++],re(_e,yt+(Ur>>Fe),Qe,Er,Ne),Ur=Le(Ur,Oe)}}return Br!=2*wt[15]-1?0:Rt}(S,T,j,W,ue,ye)}function Ie(){this.value=this.g=0}function we(){this.value=this.g=0}function nt(){this.G=h(5,Ie),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(Uo,we)}function rt(S,T,j,W){t(S!=null),t(T!=null),t(2147483648>W),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=T,S.pa=j,S.Jd=T,S.Yc=j+W,S.Zc=4<=W?j+W-4+1:j,Ct(S)}function ct(S,T){for(var j=0;0<T--;)j|=Lt(S,128)<<T;return j}function Pe(S,T){var j=ct(S,T);return dt(S)?-j:j}function Ve(S,T,j,W){var ue,ye=0;for(t(S!=null),t(T!=null),t(4294967288>W),S.Sb=W,S.Ra=0,S.u=0,S.h=0,4<W&&(W=4),ue=0;ue<W;++ue)ye+=T[j+ue]<<8*ue;S.Ra=ye,S.bb=W,S.oa=T,S.pa=j}function mt(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<Xa-8>>>0,++S.bb,S.u-=8;Ye(S)&&(S.h=1,S.u=0)}function gt(S,T){if(t(0<=T),!S.h&&T<=Aa){var j=Me(S)&Ca[T];return S.u+=T,mt(S),j}return S.h=1,S.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Me(S){return S.Ra>>>(S.u&Xa-1)>>>0}function Ye(S){return t(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>Xa}function at(S,T){S.u=T,S.h=Ye(S)}function Ze(S){S.u>=pi&&(t(S.u>=pi),mt(S))}function Ct(S){t(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(t(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function dt(S){return ct(S,1)}function Lt(S,T){var j=S.Ca;0>S.b&&Ct(S);var W=S.b,ue=j*T>>>8,ye=(S.I>>>W>ue)+0;for(ye?(j-=ue,S.I-=ue+1<<W>>>0):j=ue+1,W=j,ue=0;256<=W;)ue+=8,W>>=8;return W=7^ue+Tl[W],S.b-=W,S.Ca=(j<<W)-1,ye}function kt(S,T,j){S[T+0]=j>>24&255,S[T+1]=j>>16&255,S[T+2]=j>>8&255,S[T+3]=255&j}function $t(S,T){return S[T+0]|S[T+1]<<8}function Gt(S,T){return $t(S,T)|S[T+2]<<16}function Pt(S,T){return $t(S,T)|$t(S,T+2)<<16}function Ke(S,T){var j=1<<T;return t(S!=null),t(0<T),S.X=u(j),S.X==null?0:(S.Mb=32-T,S.Xa=T,1)}function Gr(S,T){t(S!=null),t(T!=null),t(S.Xa==T.Xa),i(T.X,0,S.X,0,1<<T.Xa)}function wr(){this.X=[],this.Xa=this.Mb=0}function fr(S,T,j,W){t(j!=null),t(W!=null);var ue=j[0],ye=W[0];return ue==0&&(ue=(S*ye+T/2)/T),ye==0&&(ye=(T*ue+S/2)/S),0>=ue||0>=ye?0:(j[0]=ue,W[0]=ye,1)}function Vt(S,T){return S+(1<<T)-1>>>T}function xr(S,T){return((4278255360&S)+(4278255360&T)>>>0&4278255360)+((16711935&S)+(16711935&T)>>>0&16711935)>>>0}function ar(S,T){ae[T]=function(j,W,ue,ye,_e,be,Fe){var Ne;for(Ne=0;Ne<_e;++Ne){var Qe=ae[S](be[Fe+Ne-1],ue,ye+Ne);be[Fe+Ne]=xr(j[W+Ne],Qe)}}}function qr(){this.ud=this.hd=this.jd=0}function mr(S,T){return((4278124286&(S^T))>>>1)+(S&T)>>>0}function hn(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function Vr(S,T){return hn(S+(S-T+.5>>1))}function Sr(S,T,j){return Math.abs(T-j)-Math.abs(S-j)}function Jr(S,T,j,W,ue,ye,_e){for(W=ye[_e-1],j=0;j<ue;++j)ye[_e+j]=W=xr(S[T+j],W)}function jr(S,T,j,W,ue){var ye;for(ye=0;ye<j;++ye){var _e=S[T+ye],be=_e>>8&255,Fe=16711935&(Fe=(Fe=16711935&_e)+((be<<16)+be));W[ue+ye]=(4278255360&_e)+Fe>>>0}}function Tr(S,T){T.jd=255&S,T.hd=S>>8&255,T.ud=S>>16&255}function Nr(S,T,j,W,ue,ye){var _e;for(_e=0;_e<W;++_e){var be=T[j+_e],Fe=be>>>8,Ne=be,Qe=255&(Qe=(Qe=be>>>16)+((S.jd<<24>>24)*(Fe<<24>>24)>>>5));Ne=255&(Ne=(Ne+=(S.hd<<24>>24)*(Fe<<24>>24)>>>5)+((S.ud<<24>>24)*(Qe<<24>>24)>>>5)),ue[ye+_e]=(4278255360&be)+(Qe<<16)+Ne}}function br(S,T,j,W,ue){ae[T]=function(ye,_e,be,Fe,Ne,Qe,It,Oe,ht){for(Fe=It;Fe<Oe;++Fe)for(It=0;It<ht;++It)Ne[Qe++]=ue(be[W(ye[_e++])])},ae[S]=function(ye,_e,be,Fe,Ne,Qe,It){var Oe=8>>ye.b,ht=ye.Ea,yt=ye.K[0],Rt=ye.w;if(8>Oe)for(ye=(1<<ye.b)-1,Rt=(1<<Oe)-1;_e<be;++_e){var Bt,wt=0;for(Bt=0;Bt<ht;++Bt)Bt&ye||(wt=W(Fe[Ne++])),Qe[It++]=ue(yt[wt&Rt]),wt>>=Oe}else ae["VP8LMapColor"+j](Fe,Ne,yt,Rt,Qe,It,_e,be,ht)}}function ot(S,T,j,W,ue){for(j=T+j;T<j;){var ye=S[T++];W[ue++]=ye>>16&255,W[ue++]=ye>>8&255,W[ue++]=255&ye}}function le(S,T,j,W,ue){for(j=T+j;T<j;){var ye=S[T++];W[ue++]=ye>>16&255,W[ue++]=ye>>8&255,W[ue++]=255&ye,W[ue++]=ye>>24&255}}function se(S,T,j,W,ue){for(j=T+j;T<j;){var ye=(_e=S[T++])>>16&240|_e>>12&15,_e=240&_e|_e>>28&15;W[ue++]=ye,W[ue++]=_e}}function ve(S,T,j,W,ue){for(j=T+j;T<j;){var ye=(_e=S[T++])>>16&248|_e>>13&7,_e=_e>>5&224|_e>>3&31;W[ue++]=ye,W[ue++]=_e}}function Ue(S,T,j,W,ue){for(j=T+j;T<j;){var ye=S[T++];W[ue++]=255&ye,W[ue++]=ye>>8&255,W[ue++]=ye>>16&255}}function Ge(S,T,j,W,ue,ye){if(ye==0)for(j=T+j;T<j;)kt(W,((ye=S[T++])[0]>>24|ye[1]>>8&65280|ye[2]<<8&16711680|ye[3]<<24)>>>0),ue+=32;else i(W,ue,S,T,j)}function et(S,T){ae[T][0]=ae[S+"0"],ae[T][1]=ae[S+"1"],ae[T][2]=ae[S+"2"],ae[T][3]=ae[S+"3"],ae[T][4]=ae[S+"4"],ae[T][5]=ae[S+"5"],ae[T][6]=ae[S+"6"],ae[T][7]=ae[S+"7"],ae[T][8]=ae[S+"8"],ae[T][9]=ae[S+"9"],ae[T][10]=ae[S+"10"],ae[T][11]=ae[S+"11"],ae[T][12]=ae[S+"12"],ae[T][13]=ae[S+"13"],ae[T][14]=ae[S+"0"],ae[T][15]=ae[S+"0"]}function At(S){return S==Kh||S==Fu||S==Kc||S==ZA}function it(){this.eb=[],this.size=this.A=this.fb=0}function St(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new St,this.sd=null}function Je(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Et(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ze(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function Nt(S,T){var j=S.T,W=T.ba.f.RGBA,ue=W.eb,ye=W.fb+S.ka*W.A,_e=Xs[T.ba.S],be=S.y,Fe=S.O,Ne=S.f,Qe=S.N,It=S.ea,Oe=S.W,ht=T.cc,yt=T.dc,Rt=T.Mc,Bt=T.Nc,wt=S.ka,Ot=S.ka+S.T,rr=S.U,qt=rr+1>>1;for(wt==0?_e(be,Fe,null,null,Ne,Qe,It,Oe,Ne,Qe,It,Oe,ue,ye,null,null,rr):(_e(T.ec,T.fc,be,Fe,ht,yt,Rt,Bt,Ne,Qe,It,Oe,ue,ye-W.A,ue,ye,rr),++j);wt+2<Ot;wt+=2)ht=Ne,yt=Qe,Rt=It,Bt=Oe,Qe+=S.Rc,Oe+=S.Rc,ye+=2*W.A,_e(be,(Fe+=2*S.fa)-S.fa,be,Fe,ht,yt,Rt,Bt,Ne,Qe,It,Oe,ue,ye-W.A,ue,ye,rr);return Fe+=S.fa,S.j+Ot<S.o?(i(T.ec,T.fc,be,Fe,rr),i(T.cc,T.dc,Ne,Qe,qt),i(T.Mc,T.Nc,It,Oe,qt),j--):1&Ot||_e(be,Fe,null,null,Ne,Qe,It,Oe,Ne,Qe,It,Oe,ue,ye+W.A,null,null,rr),j}function or(S,T,j){var W=S.F,ue=[S.J];if(W!=null){var ye=S.U,_e=T.ba.S,be=_e==Vc||_e==Kc;T=T.ba.f.RGBA;var Fe=[0],Ne=S.ka;Fe[0]=S.T,S.Kb&&(Ne==0?--Fe[0]:(--Ne,ue[0]-=S.width),S.j+S.ka+S.T==S.o&&(Fe[0]=S.o-S.j-Ne));var Qe=T.eb;Ne=T.fb+Ne*T.A,S=Vh(W,ue[0],S.width,ye,Fe,Qe,Ne+(be?0:3),T.A),t(j==Fe),S&&At(_e)&&ks(Qe,Ne,be,ye,Fe,T.A)}return 0}function tr(S){var T=S.ma,j=T.ba.S,W=11>j,ue=j==an||j==jc||j==Vc||j==AA||j==12||At(j);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Ms(T.Oa,S,ue?11:12))return 0;if(ue&&At(j)&&Cl(),S.da)alert("todo:use_scaling");else{if(W){if(T.Ib=ze,S.Kb){if(j=S.U+1>>1,T.memory=u(S.U+2*j),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+S.U,T.Mc=T.cc,T.Nc=T.dc+j,T.Ib=Nt,Cl()}}else alert("todo:EmitYUV");ue&&(T.Jb=or,W&&rA())}if(W&&!Uu){for(S=0;256>S;++S)Jd[S]=89858*(S-128)+tl>>Xc,qh[S]=-22014*(S-128)+tl,rc[S]=-45773*(S-128),ef[S]=113618*(S-128)+tl>>Xc;for(S=Fa;S<Us;++S)T=76283*(S-16)+tl>>Xc,Ru[S-Fa]=ji(T,255),tf[S-Fa]=ji(T+8>>4,15);Uu=1}return 1}function Qt(S){var T=S.ma,j=S.U,W=S.T;return t(!(1&S.ka)),0>=j||0>=W?0:(j=T.Ib(S,T),T.Jb!=null&&T.Jb(S,T,j),T.Dc+=j,1)}function gr(S){S.ma.memory=null}function on(S,T,j,W){return gt(S,8)!=47?0:(T[0]=gt(S,14)+1,j[0]=gt(S,14)+1,W[0]=gt(S,1),gt(S,3)!=0?0:!S.h)}function Qr(S,T){if(4>S)return S+1;var j=S-2>>1;return(2+(1&S)<<j)+gt(T,j)+1}function Or(S,T){return 120<T?T-120:1<=(j=((j=Gc[T-1])>>4)*S+(8-(15&j)))?j:1;var j}function hr(S,T,j){var W=Me(j),ue=S[T+=255&W].g-8;return 0<ue&&(at(j,j.u+8),W=Me(j),T+=S[T].value,T+=W&(1<<ue)-1),at(j,j.u+S[T].g),S[T].value}function Dr(S,T,j){return j.g+=S.g,j.value+=S.value<<T>>>0,t(8>=j.g),S.g}function Fn(S,T,j){var W=S.xc;return t((T=W==0?0:S.vc[S.md*(j>>W)+(T>>W)])<S.Wb),S.Ya[T]}function Xt(S,T,j,W){var ue=S.ab,ye=S.c*T,_e=S.C;T=_e+T;var be=j,Fe=W;for(W=S.Ta,j=S.Ua;0<ue--;){var Ne=S.gc[ue],Qe=_e,It=T,Oe=be,ht=Fe,yt=(Fe=W,be=j,Ne.Ea);switch(t(Qe<It),t(It<=Ne.nc),Ne.hc){case 2:KA(Oe,ht,(It-Qe)*yt,Fe,be);break;case 0:var Rt=Qe,Bt=It,wt=Fe,Ot=be,rr=(Er=Ne).Ea;Rt==0&&(Sa(Oe,ht,null,null,1,wt,Ot),Jr(Oe,ht+1,0,0,rr-1,wt,Ot+1),ht+=rr,Ot+=rr,++Rt);for(var qt=1<<Er.b,Ur=qt-1,Br=Vt(rr,Er.b),ln=Er.K,Er=Er.w+(Rt>>Er.b)*Br;Rt<Bt;){var _n=ln,Vi=Er,rn=1;for(wo(Oe,ht,wt,Ot-rr,1,wt,Ot);rn<rr;){var Pr=(rn&~Ur)+qt;Pr>rr&&(Pr=rr),(0,Ya[_n[Vi++]>>8&15])(Oe,ht+ +rn,wt,Ot+rn-rr,Pr-rn,wt,Ot+rn),rn=Pr}ht+=rr,Ot+=rr,++Rt&Ur||(Er+=Br)}It!=Ne.nc&&i(Fe,be-yt,Fe,be+(It-Qe-1)*yt,yt);break;case 1:for(yt=Oe,Bt=ht,rr=(Oe=Ne.Ea)-(Ot=Oe&~(wt=(ht=1<<Ne.b)-1)),Rt=Vt(Oe,Ne.b),qt=Ne.K,Ne=Ne.w+(Qe>>Ne.b)*Rt;Qe<It;){for(Ur=qt,Br=Ne,ln=new qr,Er=Bt+Ot,_n=Bt+Oe;Bt<Er;)Tr(Ur[Br++],ln),fn(ln,yt,Bt,ht,Fe,be),Bt+=ht,be+=ht;Bt<_n&&(Tr(Ur[Br++],ln),fn(ln,yt,Bt,rr,Fe,be),Bt+=rr,be+=rr),++Qe&wt||(Ne+=Rt)}break;case 3:if(Oe==Fe&&ht==be&&0<Ne.b){for(Bt=Fe,Oe=yt=be+(It-Qe)*yt-(Ot=(It-Qe)*Vt(Ne.Ea,Ne.b)),ht=Fe,wt=be,Rt=[],Ot=(rr=Ot)-1;0<=Ot;--Ot)Rt[Ot]=ht[wt+Ot];for(Ot=rr-1;0<=Ot;--Ot)Bt[Oe+Ot]=Rt[Ot];GA(Ne,Qe,It,Fe,yt,Fe,be)}else GA(Ne,Qe,It,Oe,ht,Fe,be)}be=W,Fe=j}Fe!=j&&i(W,j,be,Fe,ye)}function li(S,T){var j=S.V,W=S.Ba+S.c*S.C,ue=T-S.C;if(t(T<=S.l.o),t(16>=ue),0<ue){var ye=S.l,_e=S.Ta,be=S.Ua,Fe=ye.width;if(Xt(S,ue,j,W),ue=be=[be],t((j=S.C)<(W=T)),t(ye.v<ye.va),W>ye.o&&(W=ye.o),j<ye.j){var Ne=ye.j-j;j=ye.j,ue[0]+=Ne*Fe}if(j>=W?j=0:(ue[0]+=4*ye.v,ye.ka=j-ye.j,ye.U=ye.va-ye.v,ye.T=W-j,j=1),j){if(be=be[0],11>(j=S.ca).S){var Qe=j.f.RGBA,It=(W=j.S,ue=ye.U,ye=ye.T,Ne=Qe.eb,Qe.A),Oe=ye;for(Qe=Qe.fb+S.Ma*Qe.A;0<Oe--;){var ht=_e,yt=be,Rt=ue,Bt=Ne,wt=Qe;switch(W){case WA:Ll(ht,yt,Rt,Bt,wt);break;case an:Li(ht,yt,Rt,Bt,wt);break;case Kh:Li(ht,yt,Rt,Bt,wt),ks(Bt,wt,0,Rt,1,0);break;case Rl:$n(ht,yt,Rt,Bt,wt);break;case jc:Ge(ht,yt,Rt,Bt,wt,1);break;case Fu:Ge(ht,yt,Rt,Bt,wt,1),ks(Bt,wt,0,Rt,1,0);break;case Vc:Ge(ht,yt,Rt,Bt,wt,0);break;case Kc:Ge(ht,yt,Rt,Bt,wt,0),ks(Bt,wt,1,Rt,1,0);break;case AA:Ro(ht,yt,Rt,Bt,wt);break;case ZA:Ro(ht,yt,Rt,Bt,wt),jh(Bt,wt,Rt,1,0);break;case qd:Gn(ht,yt,Rt,Bt,wt);break;default:t(0)}be+=Fe,Qe+=It}S.Ma+=ye}else alert("todo:EmitRescaledRowsYUVA");t(S.Ma<=j.height)}}S.C=T,t(S.C<=S.i)}function Tn(S){var T;if(0<S.ua)return 0;for(T=0;T<S.Wb;++T){var j=S.Ya[T].G,W=S.Ya[T].H;if(0<j[1][W[1]+0].g||0<j[2][W[2]+0].g||0<j[3][W[3]+0].g)return 0}return 1}function vs(S,T,j,W,ue,ye){if(S.Z!=0){var _e=S.qd,be=S.rd;for(t(es[S.Z]!=null);T<j;++T)es[S.Z](_e,be,W,ue,W,ue,ye),_e=W,be=ue,ue+=ye;S.qd=_e,S.rd=be}}function _s(S,T){var j=S.l.ma,W=j.Z==0||j.Z==1?S.l.j:S.C;if(W=S.C<W?W:S.C,t(T<=S.l.o),T>W){var ue=S.l.width,ye=j.ca,_e=j.tb+ue*W,be=S.V,Fe=S.Ba+S.c*W,Ne=S.gc;t(S.ab==1),t(Ne[0].hc==3),oA(Ne[0],W,T,be,Fe,ye,_e),vs(j,W,T,ye,_e,ue)}S.C=S.Ma=T}function Jt(S,T,j,W,ue,ye,_e){var be=S.$/W,Fe=S.$%W,Ne=S.m,Qe=S.s,It=j+S.$,Oe=It;ue=j+W*ue;var ht=j+W*ye,yt=280+Qe.ua,Rt=S.Pb?be:16777216,Bt=0<Qe.ua?Qe.Wa:null,wt=Qe.wc,Ot=It<ht?Fn(Qe,Fe,be):null;t(S.C<ye),t(ht<=ue);var rr=!1;e:for(;;){for(;rr||It<ht;){var qt=0;if(be>=Rt){var Ur=It-j;t((Rt=S).Pb),Rt.wd=Rt.m,Rt.xd=Ur,0<Rt.s.ua&&Gr(Rt.s.Wa,Rt.s.vb),Rt=be+JA}if(Fe&wt||(Ot=Fn(Qe,Fe,be)),t(Ot!=null),Ot.Qb&&(T[It]=Ot.qb,rr=!0),!rr)if(Ze(Ne),Ot.jc){qt=Ne,Ur=T;var Br=It,ln=Ot.pd[Me(qt)&Uo-1];t(Ot.jc),256>ln.g?(at(qt,qt.u+ln.g),Ur[Br]=ln.value,qt=0):(at(qt,qt.u+ln.g-256),t(256<=ln.value),qt=ln.value),qt==0&&(rr=!0)}else qt=hr(Ot.G[0],Ot.H[0],Ne);if(Ne.h)break;if(rr||256>qt){if(!rr)if(Ot.nd)T[It]=(Ot.qb|qt<<8)>>>0;else{if(Ze(Ne),rr=hr(Ot.G[1],Ot.H[1],Ne),Ze(Ne),Ur=hr(Ot.G[2],Ot.H[2],Ne),Br=hr(Ot.G[3],Ot.H[3],Ne),Ne.h)break;T[It]=(Br<<24|rr<<16|qt<<8|Ur)>>>0}if(rr=!1,++It,++Fe>=W&&(Fe=0,++be,_e!=null&&be<=ye&&!(be%16)&&_e(S,be),Bt!=null))for(;Oe<It;)qt=T[Oe++],Bt.X[(506832829*qt&4294967295)>>>Bt.Mb]=qt}else if(280>qt){if(qt=Qr(qt-256,Ne),Ur=hr(Ot.G[4],Ot.H[4],Ne),Ze(Ne),Ur=Or(W,Ur=Qr(Ur,Ne)),Ne.h)break;if(It-j<Ur||ue-It<qt)break e;for(Br=0;Br<qt;++Br)T[It+Br]=T[It+Br-Ur];for(It+=qt,Fe+=qt;Fe>=W;)Fe-=W,++be,_e!=null&&be<=ye&&!(be%16)&&_e(S,be);if(t(It<=ue),Fe&wt&&(Ot=Fn(Qe,Fe,be)),Bt!=null)for(;Oe<It;)qt=T[Oe++],Bt.X[(506832829*qt&4294967295)>>>Bt.Mb]=qt}else{if(!(qt<yt))break e;for(rr=qt-280,t(Bt!=null);Oe<It;)qt=T[Oe++],Bt.X[(506832829*qt&4294967295)>>>Bt.Mb]=qt;qt=It,t(!(rr>>>(Ur=Bt).Xa)),T[qt]=Ur.X[rr],rr=!0}rr||t(Ne.h==Ye(Ne))}if(S.Pb&&Ne.h&&It<ue)t(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Gr(S.s.vb,S.s.Wa);else{if(Ne.h)break e;_e!=null&&_e(S,be>ye?ye:be),S.a=0,S.$=It-j}return 1}return S.a=3,0}function zr(S){t(S!=null),S.vc=null,S.yc=null,S.Ya=null;var T=S.Wa;T!=null&&(T.X=null),S.vb=null,t(S!=null)}function Wr(){var S=new Kn;return S==null?null:(S.a=0,S.xb=el,et("Predictor","VP8LPredictors"),et("Predictor","VP8LPredictors_C"),et("PredictorAdd","VP8LPredictorsAdd"),et("PredictorAdd","VP8LPredictorsAdd_C"),KA=jr,fn=Nr,Ll=ot,Li=le,Ro=se,Gn=ve,$n=Ue,ae.VP8LMapColor32b=sA,ae.VP8LMapColor8b=Pl,S)}function _i(S,T,j,W,ue){var ye=1,_e=[S],be=[T],Fe=W.m,Ne=W.s,Qe=null,It=0;e:for(;;){if(j)for(;ye&&gt(Fe,1);){var Oe=_e,ht=be,yt=W,Rt=1,Bt=yt.m,wt=yt.gc[yt.ab],Ot=gt(Bt,2);if(yt.Oc&1<<Ot)ye=0;else{switch(yt.Oc|=1<<Ot,wt.hc=Ot,wt.Ea=Oe[0],wt.nc=ht[0],wt.K=[null],++yt.ab,t(4>=yt.ab),Ot){case 0:case 1:wt.b=gt(Bt,3)+2,Rt=_i(Vt(wt.Ea,wt.b),Vt(wt.nc,wt.b),0,yt,wt.K),wt.K=wt.K[0];break;case 3:var rr,qt=gt(Bt,8)+1,Ur=16<qt?0:4<qt?1:2<qt?2:3;if(Oe[0]=Vt(wt.Ea,Ur),wt.b=Ur,rr=Rt=_i(qt,1,0,yt,wt.K)){var Br,ln=qt,Er=wt,_n=1<<(8>>Er.b),Vi=u(_n);if(Vi==null)rr=0;else{var rn=Er.K[0],Pr=Er.w;for(Vi[0]=Er.K[0][0],Br=1;Br<1*ln;++Br)Vi[Br]=xr(rn[Pr+Br],Vi[Br-1]);for(;Br<4*_n;++Br)Vi[Br]=0;Er.K[0]=null,Er.K[0]=Vi,rr=1}}Rt=rr;break;case 2:break;default:t(0)}ye=Rt}}if(_e=_e[0],be=be[0],ye&&gt(Fe,1)&&!(ye=1<=(It=gt(Fe,4))&&11>=It)){W.a=3;break e}var Ar;if(Ar=ye)t:{var qn,vr,yn,Wn=W,ts=_e,Rs=be,yi=It,Ns=j,ci=Wn.m,Bi=Wn.s,Zt=[null],lr=1,ni=0,Nn=YA[yi];r:for(;;){if(Ns&&gt(ci,1)){var Mi=gt(ci,3)+2,ii=Vt(ts,Mi),Ci=Vt(Rs,Mi),On=ii*Ci;if(!_i(ii,Ci,0,Wn,Zt))break r;for(Zt=Zt[0],Bi.xc=Mi,qn=0;qn<On;++qn){var Zn=Zt[qn]>>8&65535;Zt[qn]=Zn,Zn>=lr&&(lr=Zn+1)}}if(ci.h)break r;for(vr=0;5>vr;++vr){var si=XA[vr];!vr&&0<yi&&(si+=1<<yi),ni<si&&(ni=si)}var Cn=h(lr*Nn,Ie),wn=lr,fo=h(wn,nt);if(fo==null)var Ki=null;else t(65536>=wn),Ki=fo;var ki=u(ni);if(Ki==null||ki==null||Cn==null){Wn.a=1;break r}var Ys=Cn;for(qn=yn=0;qn<lr;++qn){var zn=Ki[qn],rs=zn.G,Js=zn.H,rl=0,Oo=1,ns=0;for(vr=0;5>vr;++vr){si=XA[vr],rs[vr]=Ys,Js[vr]=yn,!vr&&0<yi&&(si+=1<<yi);i:{var y,n=si,l=Wn,f=ki,p=Ys,v=yn,C=0,F=l.m,M=gt(F,1);if(a(f,0,0,n),M){var O=gt(F,1)+1,V=gt(F,1),q=gt(F,V==0?1:8);f[q]=1,O==2&&(f[q=gt(F,8)]=1);var $=1}else{var Y=u(19),de=gt(F,4)+4;if(19<de){l.a=3;var Se=0;break i}for(y=0;y<de;++y)Y[Gh[y]]=gt(F,3);var Ce=void 0,Te=void 0,De=l,$e=Y,He=n,Xe=f,tt=0,je=De.m,ut=8,Ft=h(128,Ie);n:for(;he(Ft,0,7,$e,19);){if(gt(je,1)){var vt=2+2*gt(je,3);if((Ce=2+gt(je,vt))>He)break n}else Ce=He;for(Te=0;Te<He&&Ce--;){Ze(je);var _t=Ft[0+(127&Me(je))];at(je,je.u+_t.g);var xt=_t.value;if(16>xt)Xe[Te++]=xt,xt!=0&&(ut=xt);else{var ir=xt==16,nr=xt-16,zt=Pu[nr],ur=gt(je,Tu[nr])+zt;if(Te+ur>He)break n;for(var sn=ir?ut:0;0<ur--;)Xe[Te++]=sn}}tt=1;break n}tt||(De.a=3),$=tt}($=$&&!F.h)&&(C=he(p,v,8,f,n)),$&&C!=0?Se=C:(l.a=3,Se=0)}if(Se==0)break r;if(Oo&&Lu[vr]==1&&(Oo=Ys[yn].g==0),rl+=Ys[yn].g,yn+=Se,3>=vr){var xn,Jn=ki[0];for(xn=1;xn<si;++xn)ki[xn]>Jn&&(Jn=ki[xn]);ns+=Jn}}if(zn.nd=Oo,zn.Qb=0,Oo&&(zn.qb=(rs[3][Js[3]+0].value<<24|rs[1][Js[1]+0].value<<16|rs[2][Js[2]+0].value)>>>0,rl==0&&256>rs[0][Js[0]+0].value&&(zn.Qb=1,zn.qb+=rs[0][Js[0]+0].value<<8)),zn.jc=!zn.Qb&&6>ns,zn.jc){var kn,Un=zn;for(kn=0;kn<Uo;++kn){var En=kn,Sn=Un.pd[En],Dn=Un.G[0][Un.H[0]+En];256<=Dn.value?(Sn.g=Dn.g+256,Sn.value=Dn.value):(Sn.g=0,Sn.value=0,En>>=Dr(Dn,8,Sn),En>>=Dr(Un.G[1][Un.H[1]+En],16,Sn),En>>=Dr(Un.G[2][Un.H[2]+En],0,Sn),Dr(Un.G[3][Un.H[3]+En],24,Sn))}}}Bi.vc=Zt,Bi.Wb=lr,Bi.Ya=Ki,Bi.yc=Cn,Ar=1;break t}Ar=0}if(!(ye=Ar)){W.a=3;break e}if(0<It){if(Ne.ua=1<<It,!Ke(Ne.Wa,It)){W.a=1,ye=0;break e}}else Ne.ua=0;var is=W,vn=_e,fs=be,ss=is.s,Ta=ss.xc;if(is.c=vn,is.i=fs,ss.md=Vt(vn,Ta),ss.wc=Ta==0?-1:(1<<Ta)-1,j){W.xb=gi;break e}if((Qe=u(_e*be))==null){W.a=1,ye=0;break e}ye=(ye=Jt(W,Qe,0,_e,be,be,null))&&!Fe.h;break e}return ye?(ue!=null?ue[0]=Qe:(t(Qe==null),t(j)),W.$=0,j||zr(Ne)):zr(Ne),ye}function xa(S,T){var j=S.c*S.i,W=j+T+16*T;return t(S.c<=T),S.V=u(W),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+j+T,1)}function Gs(S,T){var j=S.C,W=T-j,ue=S.V,ye=S.Ba+S.c*j;for(t(T<=S.l.o);0<W;){var _e=16<W?16:W,be=S.l.ma,Fe=S.l.width,Ne=Fe*_e,Qe=be.ca,It=be.tb+Fe*j,Oe=S.Ta,ht=S.Ua;Xt(S,_e,ue,ye),Eu(Oe,ht,Qe,It,Ne),vs(be,j,j+_e,Qe,It,Fe),W-=_e,ue+=_e*S.c,j+=_e}t(j==T),S.C=S.Ma=T}function Xr(){this.ub=this.yd=this.td=this.Rb=0}function ao(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function za(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function ri(){this.Yb=function(){var S=[];return function T(j,W,ue){for(var ye=ue[W],_e=0;_e<ye&&(j.push(ue.length>W+1?[]:0),!(ue.length<W+1));_e++)T(j[_e],W+1,ue)}(S,0,[3,11]),S}()}function vl(){this.jb=u(3),this.Wc=o([4,8],ri),this.Xc=o([4,17],ri)}function _l(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Oi(){this.ld=this.La=this.dd=this.tc=0}function Ha(){this.Na=this.la=0}function Ls(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vn(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Tc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oi),this.Y=0,this.ya=Array(new Vn),this.aa=0,this.l=new To}function wl(){this.y=u(16),this.f=u(8),this.ea=u(8)}function Xl(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new Xr,this.Kc=new ao,this.ed=new _l,this.Qa=new za,this.Ic=this.$c=this.Aa=0,this.D=new Tc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,ie),this.ia=0,this.pb=h(4,Ls),this.Pa=new vl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wl),this.Hd=0,this.rb=Array(new Ha),this.sb=0,this.wa=Array(new Oi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vn),this.L=this.aa=0,this.gd=o([4,2],Oi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function To(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ba(){var S=new Xl;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,No||(No=lo)),S}function Fi(S,T,j){return S.a==0&&(S.a=T,S.sc=j,S.cb=0),0}function Pc(S,T,j){return 3<=j&&S[T+0]==157&&S[T+1]==1&&S[T+2]==42}function Lc(S,T){if(S==null)return 0;if(S.a=0,S.sc="OK",T==null)return Fi(S,2,"null VP8Io passed to VP8GetHeaders()");var j=T.data,W=T.w,ue=T.ha;if(4>ue)return Fi(S,7,"Truncated header.");var ye=j[W+0]|j[W+1]<<8|j[W+2]<<16,_e=S.Od;if(_e.Rb=!(1&ye),_e.td=ye>>1&7,_e.yd=ye>>4&1,_e.ub=ye>>5,3<_e.td)return Fi(S,3,"Incorrect keyframe parameters.");if(!_e.yd)return Fi(S,4,"Frame not displayable.");W+=3,ue-=3;var be=S.Kc;if(_e.Rb){if(7>ue)return Fi(S,7,"cannot parse picture header");if(!Pc(j,W,ue))return Fi(S,3,"Bad code word");be.c=16383&(j[W+4]<<8|j[W+3]),be.Td=j[W+4]>>6,be.i=16383&(j[W+6]<<8|j[W+5]),be.Ud=j[W+6]>>6,W+=7,ue-=7,S.za=be.c+15>>4,S.Ub=be.i+15>>4,T.width=be.c,T.height=be.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,a((ye=S.Pa).jb,0,255,ye.jb.length),t((ye=S.Qa)!=null),ye.Cb=0,ye.Bb=0,ye.Fb=1,a(ye.Zb,0,0,ye.Zb.length),a(ye.Lb,0,0,ye.Lb)}if(_e.ub>ue)return Fi(S,7,"bad partition length");rt(ye=S.m,j,W,_e.ub),W+=_e.ub,ue-=_e.ub,_e.Rb&&(be.Ld=dt(ye),be.Kd=dt(ye)),be=S.Qa;var Fe,Ne=S.Pa;if(t(ye!=null),t(be!=null),be.Cb=dt(ye),be.Cb){if(be.Bb=dt(ye),dt(ye)){for(be.Fb=dt(ye),Fe=0;4>Fe;++Fe)be.Zb[Fe]=dt(ye)?Pe(ye,7):0;for(Fe=0;4>Fe;++Fe)be.Lb[Fe]=dt(ye)?Pe(ye,6):0}if(be.Bb)for(Fe=0;3>Fe;++Fe)Ne.jb[Fe]=dt(ye)?ct(ye,8):255}else be.Bb=0;if(ye.Ka)return Fi(S,3,"cannot parse segment header");if((be=S.ed).zd=dt(ye),be.Tb=ct(ye,6),be.wb=ct(ye,3),be.Pc=dt(ye),be.Pc&&dt(ye)){for(Ne=0;4>Ne;++Ne)dt(ye)&&(be.vd[Ne]=Pe(ye,6));for(Ne=0;4>Ne;++Ne)dt(ye)&&(be.od[Ne]=Pe(ye,6))}if(S.L=be.Tb==0?0:be.zd?1:2,ye.Ka)return Fi(S,3,"cannot parse filter header");var Qe=ue;if(ue=Fe=W,W=Fe+Qe,be=Qe,S.Xb=(1<<ct(S.m,2))-1,Qe<3*(Ne=S.Xb))j=7;else{for(Fe+=3*Ne,be-=3*Ne,Qe=0;Qe<Ne;++Qe){var It=j[ue+0]|j[ue+1]<<8|j[ue+2]<<16;It>be&&(It=be),rt(S.Jc[+Qe],j,Fe,It),Fe+=It,be-=It,ue+=3}rt(S.Jc[+Ne],j,Fe,be),j=Fe<W?0:5}if(j!=0)return Fi(S,j,"cannot parse partitions");for(j=ct(Fe=S.m,7),ue=dt(Fe)?Pe(Fe,4):0,W=dt(Fe)?Pe(Fe,4):0,be=dt(Fe)?Pe(Fe,4):0,Ne=dt(Fe)?Pe(Fe,4):0,Fe=dt(Fe)?Pe(Fe,4):0,Qe=S.Qa,It=0;4>It;++It){if(Qe.Cb){var Oe=Qe.Zb[It];Qe.Fb||(Oe+=j)}else{if(0<It){S.pb[It]=S.pb[0];continue}Oe=j}var ht=S.pb[It];ht.Sc[0]=cA[ji(Oe+ue,127)],ht.Sc[1]=$c[ji(Oe+0,127)],ht.Eb[0]=2*cA[ji(Oe+W,127)],ht.Eb[1]=101581*$c[ji(Oe+be,127)]>>16,8>ht.Eb[1]&&(ht.Eb[1]=8),ht.Qc[0]=cA[ji(Oe+Ne,117)],ht.Qc[1]=$c[ji(Oe+Fe,127)],ht.lc=Oe+Fe}if(!_e.Rb)return Fi(S,4,"Not a key frame.");for(dt(ye),_e=S.Pa,j=0;4>j;++j){for(ue=0;8>ue;++ue)for(W=0;3>W;++W)for(be=0;11>be;++be)Ne=Lt(ye,Xd[j][ue][W][be])?ct(ye,8):$h[j][ue][W][be],_e.Wc[j][ue].Yb[W][be]=Ne;for(ue=0;17>ue;++ue)_e.Xc[j][ue]=_e.Wc[j][Wc[ue]]}return S.kc=dt(ye),S.kc&&(S.Bd=ct(ye,8)),S.cb=1}function lo(S,T,j,W,ue,ye,_e){var be=T[ue].Yb[j];for(j=0;16>ue;++ue){if(!Lt(S,be[j+0]))return ue;for(;!Lt(S,be[j+1]);)if(be=T[++ue].Yb[0],j=0,ue==16)return 16;var Fe=T[ue+1].Yb;if(Lt(S,be[j+2])){var Ne=S,Qe=0;if(Lt(Ne,(Oe=be)[(It=j)+3]))if(Lt(Ne,Oe[It+6])){for(be=0,It=2*(Qe=Lt(Ne,Oe[It+8]))+(Oe=Lt(Ne,Oe[It+9+Qe])),Qe=0,Oe=zp[It];Oe[be];++be)Qe+=Qe+Lt(Ne,Oe[be]);Qe+=3+(8<<It)}else Lt(Ne,Oe[It+7])?(Qe=7+2*Lt(Ne,165),Qe+=Lt(Ne,145)):Qe=5+Lt(Ne,159);else Qe=Lt(Ne,Oe[It+4])?3+Lt(Ne,Oe[It+5]):2;be=Fe[2]}else Qe=1,be=Fe[1];Fe=_e+Wd[ue],0>(Ne=S).b&&Ct(Ne);var It,Oe=Ne.b,ht=(It=Ne.Ca>>1)-(Ne.I>>Oe)>>31;--Ne.b,Ne.Ca+=ht,Ne.Ca|=1,Ne.I-=(It+1&ht)<<Oe,ye[Fe]=((Qe^ht)-ht)*W[(0<ue)+0]}return 16}function xl(S){var T=S.rb[S.sb-1];T.la=0,T.Na=0,a(S.zc,0,0,S.zc.length),S.ja=0}function Po(S,T,j,W,ue){ue=S[T+j+32*W]+(ue>>3),S[T+j+32*W]=-256&ue?0>ue?0:255:ue}function ra(S,T,j,W,ue,ye){Po(S,T,0,j,W+ue),Po(S,T,1,j,W+ye),Po(S,T,2,j,W-ye),Po(S,T,3,j,W-ue)}function Ti(S){return(20091*S>>16)+S}function OA(S,T,j,W){var ue,ye=0,_e=u(16);for(ue=0;4>ue;++ue){var be=S[T+0]+S[T+8],Fe=S[T+0]-S[T+8],Ne=(35468*S[T+4]>>16)-Ti(S[T+12]),Qe=Ti(S[T+4])+(35468*S[T+12]>>16);_e[ye+0]=be+Qe,_e[ye+1]=Fe+Ne,_e[ye+2]=Fe-Ne,_e[ye+3]=be-Qe,ye+=4,T++}for(ue=ye=0;4>ue;++ue)be=(S=_e[ye+0]+4)+_e[ye+8],Fe=S-_e[ye+8],Ne=(35468*_e[ye+4]>>16)-Ti(_e[ye+12]),Po(j,W,0,0,be+(Qe=Ti(_e[ye+4])+(35468*_e[ye+12]>>16))),Po(j,W,1,0,Fe+Ne),Po(j,W,2,0,Fe-Ne),Po(j,W,3,0,be-Qe),ye++,W+=32}function bl(S,T,j,W){var ue=S[T+0]+4,ye=35468*S[T+4]>>16,_e=Ti(S[T+4]),be=35468*S[T+1]>>16;ra(j,W,0,ue+_e,S=Ti(S[T+1]),be),ra(j,W,1,ue+ye,S,be),ra(j,W,2,ue-ye,S,be),ra(j,W,3,ue-_e,S,be)}function Mc(S,T,j,W,ue){OA(S,T,j,W),ue&&OA(S,T+16,j,W+4)}function kc(S,T,j,W){mi(S,T+0,j,W,1),mi(S,T+32,j,W+128,1)}function na(S,T,j,W){var ue;for(S=S[T+0]+4,ue=0;4>ue;++ue)for(T=0;4>T;++T)Po(j,W,T,ue,S)}function Yl(S,T,j,W){S[T+0]&&Ea(S,T+0,j,W),S[T+16]&&Ea(S,T+16,j,W+4),S[T+32]&&Ea(S,T+32,j,W+128),S[T+48]&&Ea(S,T+48,j,W+128+4)}function Jl(S,T,j,W){var ue,ye=u(16);for(ue=0;4>ue;++ue){var _e=S[T+0+ue]+S[T+12+ue],be=S[T+4+ue]+S[T+8+ue],Fe=S[T+4+ue]-S[T+8+ue],Ne=S[T+0+ue]-S[T+12+ue];ye[0+ue]=_e+be,ye[8+ue]=_e-be,ye[4+ue]=Ne+Fe,ye[12+ue]=Ne-Fe}for(ue=0;4>ue;++ue)_e=(S=ye[0+4*ue]+3)+ye[3+4*ue],be=ye[1+4*ue]+ye[2+4*ue],Fe=ye[1+4*ue]-ye[2+4*ue],Ne=S-ye[3+4*ue],j[W+0]=_e+be>>3,j[W+16]=Ne+Fe>>3,j[W+32]=_e-be>>3,j[W+48]=Ne-Fe>>3,W+=64}function ws(S,T,j){var W,ue=T-32,ye=ds,_e=255-S[ue-1];for(W=0;W<j;++W){var be,Fe=ye,Ne=_e+S[T-1];for(be=0;be<j;++be)S[T+be]=Fe[Ne+S[ue+be]];T+=32}}function nn(S,T){ws(S,T,4)}function ia(S,T){ws(S,T,8)}function sa(S,T){ws(S,T,16)}function ja(S,T){var j;for(j=0;16>j;++j)i(S,T+32*j,S,T-32,16)}function eA(S,T){var j;for(j=16;0<j;--j)a(S,T,S[T-1],16),T+=32}function Va(S,T,j){var W;for(W=0;16>W;++W)a(T,j+32*W,S,16)}function Zi(S,T){var j,W=16;for(j=0;16>j;++j)W+=S[T-1+32*j]+S[T+j-32];Va(W>>5,S,T)}function oa(S,T){var j,W=8;for(j=0;16>j;++j)W+=S[T-1+32*j];Va(W>>4,S,T)}function en(S,T){var j,W=8;for(j=0;16>j;++j)W+=S[T+j-32];Va(W>>4,S,T)}function Ka(S,T){Va(128,S,T)}function Yr(S,T,j){return S+2*T+j+2>>2}function Uc(S,T){var j,W=T-32;for(W=new Uint8Array([Yr(S[W-1],S[W+0],S[W+1]),Yr(S[W+0],S[W+1],S[W+2]),Yr(S[W+1],S[W+2],S[W+3]),Yr(S[W+2],S[W+3],S[W+4])]),j=0;4>j;++j)i(S,T+32*j,W,0,W.length)}function cs(S,T){var j=S[T-1],W=S[T-1+32],ue=S[T-1+64],ye=S[T-1+96];kt(S,T+0,16843009*Yr(S[T-1-32],j,W)),kt(S,T+32,16843009*Yr(j,W,ue)),kt(S,T+64,16843009*Yr(W,ue,ye)),kt(S,T+96,16843009*Yr(ue,ye,ye))}function wi(S,T){var j,W=4;for(j=0;4>j;++j)W+=S[T+j-32]+S[T-1+32*j];for(W>>=3,j=0;4>j;++j)a(S,T+32*j,W,4)}function us(S,T){var j=S[T-1+0],W=S[T-1+32],ue=S[T-1+64],ye=S[T-1-32],_e=S[T+0-32],be=S[T+1-32],Fe=S[T+2-32],Ne=S[T+3-32];S[T+0+96]=Yr(W,ue,S[T-1+96]),S[T+1+96]=S[T+0+64]=Yr(j,W,ue),S[T+2+96]=S[T+1+64]=S[T+0+32]=Yr(ye,j,W),S[T+3+96]=S[T+2+64]=S[T+1+32]=S[T+0+0]=Yr(_e,ye,j),S[T+3+64]=S[T+2+32]=S[T+1+0]=Yr(be,_e,ye),S[T+3+32]=S[T+2+0]=Yr(Fe,be,_e),S[T+3+0]=Yr(Ne,Fe,be)}function Yn(S,T){var j=S[T+1-32],W=S[T+2-32],ue=S[T+3-32],ye=S[T+4-32],_e=S[T+5-32],be=S[T+6-32],Fe=S[T+7-32];S[T+0+0]=Yr(S[T+0-32],j,W),S[T+1+0]=S[T+0+32]=Yr(j,W,ue),S[T+2+0]=S[T+1+32]=S[T+0+64]=Yr(W,ue,ye),S[T+3+0]=S[T+2+32]=S[T+1+64]=S[T+0+96]=Yr(ue,ye,_e),S[T+3+32]=S[T+2+64]=S[T+1+96]=Yr(ye,_e,be),S[T+3+64]=S[T+2+96]=Yr(_e,be,Fe),S[T+3+96]=Yr(be,Fe,Fe)}function Ln(S,T){var j=S[T-1+0],W=S[T-1+32],ue=S[T-1+64],ye=S[T-1-32],_e=S[T+0-32],be=S[T+1-32],Fe=S[T+2-32],Ne=S[T+3-32];S[T+0+0]=S[T+1+64]=ye+_e+1>>1,S[T+1+0]=S[T+2+64]=_e+be+1>>1,S[T+2+0]=S[T+3+64]=be+Fe+1>>1,S[T+3+0]=Fe+Ne+1>>1,S[T+0+96]=Yr(ue,W,j),S[T+0+64]=Yr(W,j,ye),S[T+0+32]=S[T+1+96]=Yr(j,ye,_e),S[T+1+32]=S[T+2+96]=Yr(ye,_e,be),S[T+2+32]=S[T+3+96]=Yr(_e,be,Fe),S[T+3+32]=Yr(be,Fe,Ne)}function zA(S,T){var j=S[T+0-32],W=S[T+1-32],ue=S[T+2-32],ye=S[T+3-32],_e=S[T+4-32],be=S[T+5-32],Fe=S[T+6-32],Ne=S[T+7-32];S[T+0+0]=j+W+1>>1,S[T+1+0]=S[T+0+64]=W+ue+1>>1,S[T+2+0]=S[T+1+64]=ue+ye+1>>1,S[T+3+0]=S[T+2+64]=ye+_e+1>>1,S[T+0+32]=Yr(j,W,ue),S[T+1+32]=S[T+0+96]=Yr(W,ue,ye),S[T+2+32]=S[T+1+96]=Yr(ue,ye,_e),S[T+3+32]=S[T+2+96]=Yr(ye,_e,be),S[T+3+64]=Yr(_e,be,Fe),S[T+3+96]=Yr(be,Fe,Ne)}function pn(S,T){var j=S[T-1+0],W=S[T-1+32],ue=S[T-1+64],ye=S[T-1+96];S[T+0+0]=j+W+1>>1,S[T+2+0]=S[T+0+32]=W+ue+1>>1,S[T+2+32]=S[T+0+64]=ue+ye+1>>1,S[T+1+0]=Yr(j,W,ue),S[T+3+0]=S[T+1+32]=Yr(W,ue,ye),S[T+3+32]=S[T+1+64]=Yr(ue,ye,ye),S[T+3+64]=S[T+2+64]=S[T+0+96]=S[T+1+96]=S[T+2+96]=S[T+3+96]=ye}function Xi(S,T){var j=S[T-1+0],W=S[T-1+32],ue=S[T-1+64],ye=S[T-1+96],_e=S[T-1-32],be=S[T+0-32],Fe=S[T+1-32],Ne=S[T+2-32];S[T+0+0]=S[T+2+32]=j+_e+1>>1,S[T+0+32]=S[T+2+64]=W+j+1>>1,S[T+0+64]=S[T+2+96]=ue+W+1>>1,S[T+0+96]=ye+ue+1>>1,S[T+3+0]=Yr(be,Fe,Ne),S[T+2+0]=Yr(_e,be,Fe),S[T+1+0]=S[T+3+32]=Yr(j,_e,be),S[T+1+32]=S[T+3+64]=Yr(W,j,_e),S[T+1+64]=S[T+3+96]=Yr(ue,W,j),S[T+1+96]=Yr(ye,ue,W)}function Kr(S,T){var j;for(j=0;8>j;++j)i(S,T+32*j,S,T-32,8)}function $r(S,T){var j;for(j=0;8>j;++j)a(S,T,S[T-1],8),T+=32}function Lo(S,T,j){var W;for(W=0;8>W;++W)a(T,j+32*W,S,8)}function Mr(S,T){var j,W=8;for(j=0;8>j;++j)W+=S[T+j-32]+S[T-1+32*j];Lo(W>>4,S,T)}function Ga(S,T){var j,W=4;for(j=0;8>j;++j)W+=S[T+j-32];Lo(W>>3,S,T)}function Yi(S,T){var j,W=4;for(j=0;8>j;++j)W+=S[T-1+32*j];Lo(W>>3,S,T)}function Ba(S,T){Lo(128,S,T)}function zi(S,T,j){var W=S[T-j],ue=S[T+0],ye=3*(ue-W)+Iu[1020+S[T-2*j]-S[T+j]],_e=Ja[112+(ye+4>>3)];S[T-j]=ds[255+W+Ja[112+(ye+3>>3)]],S[T+0]=ds[255+ue-_e]}function $a(S,T,j,W){var ue=S[T+0],ye=S[T+j];return uo[255+S[T-2*j]-S[T-j]]>W||uo[255+ye-ue]>W}function Ao(S,T,j,W){return 4*uo[255+S[T-j]-S[T+0]]+uo[255+S[T-2*j]-S[T+j]]<=W}function tA(S,T,j,W,ue){var ye=S[T-3*j],_e=S[T-2*j],be=S[T-j],Fe=S[T+0],Ne=S[T+j],Qe=S[T+2*j],It=S[T+3*j];return 4*uo[255+be-Fe]+uo[255+_e-Ne]>W?0:uo[255+S[T-4*j]-ye]<=ue&&uo[255+ye-_e]<=ue&&uo[255+_e-be]<=ue&&uo[255+It-Qe]<=ue&&uo[255+Qe-Ne]<=ue&&uo[255+Ne-Fe]<=ue}function HA(S,T,j,W){var ue=2*W+1;for(W=0;16>W;++W)Ao(S,T+W,j,ue)&&zi(S,T+W,j)}function aa(S,T,j,W){var ue=2*W+1;for(W=0;16>W;++W)Ao(S,T+W*j,1,ue)&&zi(S,T+W*j,1)}function qa(S,T,j,W){var ue;for(ue=3;0<ue;--ue)HA(S,T+=4*j,j,W)}function $s(S,T,j,W){var ue;for(ue=3;0<ue;--ue)aa(S,T+=4,j,W)}function Qn(S,T,j,W,ue,ye,_e,be){for(ye=2*ye+1;0<ue--;){if(tA(S,T,j,ye,_e))if($a(S,T,j,be))zi(S,T,j);else{var Fe=S,Ne=T,Qe=j,It=Fe[Ne-2*Qe],Oe=Fe[Ne-Qe],ht=Fe[Ne+0],yt=Fe[Ne+Qe],Rt=Fe[Ne+2*Qe],Bt=27*(Ot=Iu[1020+3*(ht-Oe)+Iu[1020+It-yt]])+63>>7,wt=18*Ot+63>>7,Ot=9*Ot+63>>7;Fe[Ne-3*Qe]=ds[255+Fe[Ne-3*Qe]+Ot],Fe[Ne-2*Qe]=ds[255+It+wt],Fe[Ne-Qe]=ds[255+Oe+Bt],Fe[Ne+0]=ds[255+ht-Bt],Fe[Ne+Qe]=ds[255+yt-wt],Fe[Ne+2*Qe]=ds[255+Rt-Ot]}T+=W}}function qs(S,T,j,W,ue,ye,_e,be){for(ye=2*ye+1;0<ue--;){if(tA(S,T,j,ye,_e))if($a(S,T,j,be))zi(S,T,j);else{var Fe=S,Ne=T,Qe=j,It=Fe[Ne-Qe],Oe=Fe[Ne+0],ht=Fe[Ne+Qe],yt=Ja[112+(4+(Rt=3*(Oe-It))>>3)],Rt=Ja[112+(Rt+3>>3)],Bt=yt+1>>1;Fe[Ne-2*Qe]=ds[255+Fe[Ne-2*Qe]+Bt],Fe[Ne-Qe]=ds[255+It+Rt],Fe[Ne+0]=ds[255+Oe-yt],Fe[Ne+Qe]=ds[255+ht-Bt]}T+=W}}function D(S,T,j,W,ue,ye){Qn(S,T,j,1,16,W,ue,ye)}function ce(S,T,j,W,ue,ye){Qn(S,T,1,j,16,W,ue,ye)}function ke(S,T,j,W,ue,ye){var _e;for(_e=3;0<_e;--_e)qs(S,T+=4*j,j,1,16,W,ue,ye)}function st(S,T,j,W,ue,ye){var _e;for(_e=3;0<_e;--_e)qs(S,T+=4,1,j,16,W,ue,ye)}function ft(S,T,j,W,ue,ye,_e,be){Qn(S,T,ue,1,8,ye,_e,be),Qn(j,W,ue,1,8,ye,_e,be)}function Dt(S,T,j,W,ue,ye,_e,be){Qn(S,T,1,ue,8,ye,_e,be),Qn(j,W,1,ue,8,ye,_e,be)}function Wt(S,T,j,W,ue,ye,_e,be){qs(S,T+4*ue,ue,1,8,ye,_e,be),qs(j,W+4*ue,ue,1,8,ye,_e,be)}function pr(S,T,j,W,ue,ye,_e,be){qs(S,T+4,1,ue,8,ye,_e,be),qs(j,W+4,1,ue,8,ye,_e,be)}function Ir(){this.ba=new pt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Et,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Zr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function un(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tn(){this.ua=0,this.Wa=new wr,this.vb=new wr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new nt,this.yc=new Ie}function Kn(){this.xb=this.a=0,this.l=new To,this.ca=new pt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ee,this.Pb=0,this.wd=new Ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tn,this.ab=0,this.gc=h(4,un),this.Oc=0}function Mn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new To,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function dn(S,T,j,W,ue,ye,_e){for(S=S==null?0:S[T+0],T=0;T<_e;++T)ue[ye+T]=S+j[W+T]&255,S=ue[ye+T]}function Pi(S,T,j,W,ue,ye,_e){var be;if(S==null)dn(null,null,j,W,ue,ye,_e);else for(be=0;be<_e;++be)ue[ye+be]=S[T+be]+j[W+be]&255}function Ai(S,T,j,W,ue,ye,_e){if(S==null)dn(null,null,j,W,ue,ye,_e);else{var be,Fe=S[T+0],Ne=Fe,Qe=Fe;for(be=0;be<_e;++be)Ne=Qe+(Fe=S[T+be])-Ne,Qe=j[W+be]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=Fe,ue[ye+be]=Qe}}function xi(S,T,j,W){var ue=T.width,ye=T.o;if(t(S!=null&&T!=null),0>j||0>=W||j+W>ye)return null;if(!S.Cc){if(S.ga==null){var _e;if(S.ga=new Mn,(_e=S.ga==null)||(_e=T.width*T.o,t(S.Gb.length==0),S.Gb=u(_e),S.Uc=0,S.Gb==null?_e=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,_e=1),_e=!_e),!_e){_e=S.ga;var be=S.Fa,Fe=S.P,Ne=S.qc,Qe=S.mb,It=S.nb,Oe=Fe+1,ht=Ne-1,yt=_e.l;if(t(be!=null&&Qe!=null&&T!=null),es[0]=null,es[1]=dn,es[2]=Pi,es[3]=Ai,_e.ca=Qe,_e.tb=It,_e.c=T.width,_e.i=T.height,t(0<_e.c&&0<_e.i),1>=Ne)T=0;else if(_e.$a=3&be[Fe+0],_e.Z=be[Fe+0]>>2&3,_e.Lc=be[Fe+0]>>4&3,Fe=be[Fe+0]>>6&3,0>_e.$a||1<_e.$a||4<=_e.Z||1<_e.Lc||Fe)T=0;else if(yt.put=Qt,yt.ac=tr,yt.bc=gr,yt.ma=_e,yt.width=T.width,yt.height=T.height,yt.Da=T.Da,yt.v=T.v,yt.va=T.va,yt.j=T.j,yt.o=T.o,_e.$a)e:{t(_e.$a==1),T=Wr();t:for(;;){if(T==null){T=0;break e}if(t(_e!=null),_e.mc=T,T.c=_e.c,T.i=_e.i,T.l=_e.l,T.l.ma=_e,T.l.width=_e.c,T.l.height=_e.i,T.a=0,Ve(T.m,be,Oe,ht),!_i(_e.c,_e.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&Tn(T.s)?(_e.ic=1,be=T.c*T.i,T.Ta=null,T.Ua=0,T.V=u(be),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(_e.ic=0,T=xa(T,_e.c)),!T))break t;T=1;break e}_e.mc=null,T=0}else T=ht>=_e.c*_e.i;_e=!T}if(_e)return null;S.ga.Lc!=1?S.Ga=0:W=ye-j}t(S.ga!=null),t(j+W<=ye);e:{if(T=(be=S.ga).c,ye=be.l.o,be.$a==0){if(Oe=S.rc,ht=S.Vc,yt=S.Fa,Fe=S.P+1+j*T,Ne=S.mb,Qe=S.nb+j*T,t(Fe<=S.P+S.qc),be.Z!=0)for(t(es[be.Z]!=null),_e=0;_e<W;++_e)es[be.Z](Oe,ht,yt,Fe,Ne,Qe,T),Oe=Ne,ht=Qe,Qe+=T,Fe+=T;else for(_e=0;_e<W;++_e)i(Ne,Qe,yt,Fe,T),Oe=Ne,ht=Qe,Qe+=T,Fe+=T;S.rc=Oe,S.Vc=ht}else{if(t(be.mc!=null),T=j+W,t((_e=be.mc)!=null),t(T<=_e.i),_e.C>=T)T=1;else if(be.ic||rA(),be.ic){be=_e.V,Oe=_e.Ba,ht=_e.c;var Rt=_e.i,Bt=(yt=1,Fe=_e.$/ht,Ne=_e.$%ht,Qe=_e.m,It=_e.s,_e.$),wt=ht*Rt,Ot=ht*T,rr=It.wc,qt=Bt<Ot?Fn(It,Ne,Fe):null;t(Bt<=wt),t(T<=Rt),t(Tn(It));t:for(;;){for(;!Qe.h&&Bt<Ot;){if(Ne&rr||(qt=Fn(It,Ne,Fe)),t(qt!=null),Ze(Qe),256>(Rt=hr(qt.G[0],qt.H[0],Qe)))be[Oe+Bt]=Rt,++Bt,++Ne>=ht&&(Ne=0,++Fe<=T&&!(Fe%16)&&_s(_e,Fe));else{if(!(280>Rt)){yt=0;break t}Rt=Qr(Rt-256,Qe);var Ur,Br=hr(qt.G[4],qt.H[4],Qe);if(Ze(Qe),!(Bt>=(Br=Or(ht,Br=Qr(Br,Qe)))&&wt-Bt>=Rt)){yt=0;break t}for(Ur=0;Ur<Rt;++Ur)be[Oe+Bt+Ur]=be[Oe+Bt+Ur-Br];for(Bt+=Rt,Ne+=Rt;Ne>=ht;)Ne-=ht,++Fe<=T&&!(Fe%16)&&_s(_e,Fe);Bt<Ot&&Ne&rr&&(qt=Fn(It,Ne,Fe))}t(Qe.h==Ye(Qe))}_s(_e,Fe>T?T:Fe);break t}!yt||Qe.h&&Bt<wt?(yt=0,_e.a=Qe.h?5:3):_e.$=Bt,T=yt}else T=Jt(_e,_e.V,_e.Ba,_e.c,_e.i,T,Gs);if(!T){W=0;break e}}j+W>=ye&&(S.Cc=1),W=1}if(!W)return null;if(S.Cc&&((W=S.ga)!=null&&(W.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+j*ue}function la(S,T,j,W,ue,ye){for(;0<ue--;){var _e,be=S,Fe=T+(j?1:0),Ne=S,Qe=T+(j?0:3);for(_e=0;_e<W;++_e){var It=Ne[Qe+4*_e];It!=255&&(It*=32897,be[Fe+4*_e+0]=be[Fe+4*_e+0]*It>>23,be[Fe+4*_e+1]=be[Fe+4*_e+1]*It>>23,be[Fe+4*_e+2]=be[Fe+4*_e+2]*It>>23)}T+=ye}}function Bl(S,T,j,W,ue){for(;0<W--;){var ye;for(ye=0;ye<j;++ye){var _e=S[T+2*ye+0],be=15&(Ne=S[T+2*ye+1]),Fe=4369*be,Ne=(240&Ne|Ne>>4)*Fe>>16;S[T+2*ye+0]=(240&_e|_e>>4)*Fe>>16&240|(15&_e|_e<<4)*Fe>>16>>4&15,S[T+2*ye+1]=240&Ne|be}T+=ue}}function Oh(S,T,j,W,ue,ye,_e,be){var Fe,Ne,Qe=255;for(Ne=0;Ne<ue;++Ne){for(Fe=0;Fe<W;++Fe){var It=S[T+Fe];ye[_e+4*Fe]=It,Qe&=It}T+=j,_e+=be}return Qe!=255}function Cu(S,T,j,W,ue){var ye;for(ye=0;ye<ue;++ye)j[W+ye]=S[T+ye]>>8}function rA(){ks=la,jh=Bl,Vh=Oh,Eu=Cu}function co(S,T,j){ae[S]=function(W,ue,ye,_e,be,Fe,Ne,Qe,It,Oe,ht,yt,Rt,Bt,wt,Ot,rr){var qt,Ur=rr-1>>1,Br=be[Fe+0]|Ne[Qe+0]<<16,ln=It[Oe+0]|ht[yt+0]<<16;t(W!=null);var Er=3*Br+ln+131074>>2;for(T(W[ue+0],255&Er,Er>>16,Rt,Bt),ye!=null&&(Er=3*ln+Br+131074>>2,T(ye[_e+0],255&Er,Er>>16,wt,Ot)),qt=1;qt<=Ur;++qt){var _n=be[Fe+qt]|Ne[Qe+qt]<<16,Vi=It[Oe+qt]|ht[yt+qt]<<16,rn=Br+_n+ln+Vi+524296,Pr=rn+2*(_n+ln)>>3;Er=Pr+Br>>1,Br=(rn=rn+2*(Br+Vi)>>3)+_n>>1,T(W[ue+2*qt-1],255&Er,Er>>16,Rt,Bt+(2*qt-1)*j),T(W[ue+2*qt-0],255&Br,Br>>16,Rt,Bt+(2*qt-0)*j),ye!=null&&(Er=rn+ln>>1,Br=Pr+Vi>>1,T(ye[_e+2*qt-1],255&Er,Er>>16,wt,Ot+(2*qt-1)*j),T(ye[_e+2*qt+0],255&Br,Br>>16,wt,Ot+(2*qt+0)*j)),Br=_n,ln=Vi}1&rr||(Er=3*Br+ln+131074>>2,T(W[ue+rr-1],255&Er,Er>>16,Rt,Bt+(rr-1)*j),ye!=null&&(Er=3*ln+Br+131074>>2,T(ye[_e+rr-1],255&Er,Er>>16,wt,Ot+(rr-1)*j)))}}function Cl(){Xs[WA]=Zc,Xs[an]=uA,Xs[Rl]=ec,Xs[jc]=Mu,Xs[Vc]=tc,Xs[AA]=ku,Xs[qd]=Yd,Xs[Kh]=uA,Xs[Fu]=Mu,Xs[Kc]=tc,Xs[ZA]=ku}function Wa(S){return S&-16384?0>S?0:255:S>>ua}function Mo(S,T){return Wa((19077*S>>8)+(26149*T>>8)-14234)}function Hi(S,T,j){return Wa((19077*S>>8)-(6419*T>>8)-(13320*j>>8)+8708)}function ko(S,T){return Wa((19077*S>>8)+(33050*T>>8)-17685)}function hs(S,T,j,W,ue){W[ue+0]=Mo(S,j),W[ue+1]=Hi(S,T,j),W[ue+2]=ko(S,T)}function jA(S,T,j,W,ue){W[ue+0]=ko(S,T),W[ue+1]=Hi(S,T,j),W[ue+2]=Mo(S,j)}function nA(S,T,j,W,ue){var ye=Hi(S,T,j);T=ye<<3&224|ko(S,T)>>3,W[ue+0]=248&Mo(S,j)|ye>>5,W[ue+1]=T}function Ji(S,T,j,W,ue){var ye=240&ko(S,T)|15;W[ue+0]=240&Mo(S,j)|Hi(S,T,j)>>4,W[ue+1]=ye}function Sl(S,T,j,W,ue){W[ue+0]=255,hs(S,T,j,W,ue+1)}function iA(S,T,j,W,ue){jA(S,T,j,W,ue),W[ue+3]=255}function El(S,T,j,W,ue){hs(S,T,j,W,ue),W[ue+3]=255}function ji(S,T){return 0>S?0:S>T?T:S}function xs(S,T,j){ae[S]=function(W,ue,ye,_e,be,Fe,Ne,Qe,It){for(var Oe=Qe+(-2&It)*j;Qe!=Oe;)T(W[ue+0],ye[_e+0],be[Fe+0],Ne,Qe),T(W[ue+1],ye[_e+0],be[Fe+0],Ne,Qe+j),ue+=2,++_e,++Fe,Qe+=2*j;1&It&&T(W[ue+0],ye[_e+0],be[Fe+0],Ne,Qe)}}function Rc(S,T,j){return j==0?S==0?T==0?6:5:T==0?4:0:j}function VA(S,T,j,W,ue){switch(S>>>30){case 3:mi(T,j,W,ue,0);break;case 2:Zs(T,j,W,ue);break;case 1:Ea(T,j,W,ue)}}function Il(S,T){var j,W,ue=T.M,ye=T.Nb,_e=S.oc,be=S.pc+40,Fe=S.oc,Ne=S.pc+584,Qe=S.oc,It=S.pc+600;for(j=0;16>j;++j)_e[be+32*j-1]=129;for(j=0;8>j;++j)Fe[Ne+32*j-1]=129,Qe[It+32*j-1]=129;for(0<ue?_e[be-1-32]=Fe[Ne-1-32]=Qe[It-1-32]=129:(a(_e,be-32-1,127,21),a(Fe,Ne-32-1,127,9),a(Qe,It-32-1,127,9)),W=0;W<S.za;++W){var Oe=T.ya[T.aa+W];if(0<W){for(j=-1;16>j;++j)i(_e,be+32*j-4,_e,be+32*j+12,4);for(j=-1;8>j;++j)i(Fe,Ne+32*j-4,Fe,Ne+32*j+4,4),i(Qe,It+32*j-4,Qe,It+32*j+4,4)}var ht=S.Gd,yt=S.Hd+W,Rt=Oe.ad,Bt=Oe.Hc;if(0<ue&&(i(_e,be-32,ht[yt].y,0,16),i(Fe,Ne-32,ht[yt].f,0,8),i(Qe,It-32,ht[yt].ea,0,8)),Oe.Za){var wt=_e,Ot=be-32+16;for(0<ue&&(W>=S.za-1?a(wt,Ot,ht[yt].y[15],4):i(wt,Ot,ht[yt+1].y,0,4)),j=0;4>j;j++)wt[Ot+128+j]=wt[Ot+256+j]=wt[Ot+384+j]=wt[Ot+0+j];for(j=0;16>j;++j,Bt<<=2)wt=_e,Ot=be+Yc[j],ho[Oe.Ob[j]](wt,Ot),VA(Bt,Rt,16*+j,wt,Ot)}else if(wt=Rc(W,ue,Oe.Ob[0]),ca[wt](_e,be),Bt!=0)for(j=0;16>j;++j,Bt<<=2)VA(Bt,Rt,16*+j,_e,be+Yc[j]);for(j=Oe.Gc,wt=Rc(W,ue,Oe.Dd),Ia[wt](Fe,Ne),Ia[wt](Qe,It),Bt=Rt,wt=Fe,Ot=Ne,255&(Oe=0|j)&&(170&Oe?Ml(Bt,256,wt,Ot):Nc(Bt,256,wt,Ot)),Oe=Qe,Bt=It,255&(j>>=8)&&(170&j?Ml(Rt,320,Oe,Bt):Nc(Rt,320,Oe,Bt)),ue<S.Ub-1&&(i(ht[yt].y,0,_e,be+480,16),i(ht[yt].f,0,Fe,Ne+224,8),i(ht[yt].ea,0,Qe,It+224,8)),j=8*ye*S.B,ht=S.sa,yt=S.ta+16*W+16*ye*S.R,Rt=S.qa,Oe=S.ra+8*W+j,Bt=S.Ha,wt=S.Ia+8*W+j,j=0;16>j;++j)i(ht,yt+j*S.R,_e,be+32*j,16);for(j=0;8>j;++j)i(Rt,Oe+j*S.B,Fe,Ne+32*j,8),i(Bt,wt+j*S.B,Qe,It+32*j,8)}}function Za(S,T,j,W,ue,ye,_e,be,Fe){var Ne=[0],Qe=[0],It=0,Oe=Fe!=null?Fe.kd:0,ht=Fe??new Zr;if(S==null||12>j)return 7;ht.data=S,ht.w=T,ht.ha=j,T=[T],j=[j],ht.gb=[ht.gb];e:{var yt=T,Rt=j,Bt=ht.gb;if(t(S!=null),t(Rt!=null),t(Bt!=null),Bt[0]=0,12<=Rt[0]&&!r(S,yt[0],"RIFF")){if(r(S,yt[0]+8,"WEBP")){Bt=3;break e}var wt=Pt(S,yt[0]+4);if(12>wt||4294967286<wt){Bt=3;break e}if(Oe&&wt>Rt[0]-8){Bt=7;break e}Bt[0]=wt,yt[0]+=12,Rt[0]-=12}Bt=0}if(Bt!=0)return Bt;for(wt=0<ht.gb[0],j=j[0];;){e:{var Ot=S;Rt=T,Bt=j;var rr=Ne,qt=Qe,Ur=yt=[0];if((Er=It=[It])[0]=0,8>Bt[0])Bt=7;else{if(!r(Ot,Rt[0],"VP8X")){if(Pt(Ot,Rt[0]+4)!=10){Bt=3;break e}if(18>Bt[0]){Bt=7;break e}var Br=Pt(Ot,Rt[0]+8),ln=1+Gt(Ot,Rt[0]+12);if(2147483648<=ln*(Ot=1+Gt(Ot,Rt[0]+15))){Bt=3;break e}Ur!=null&&(Ur[0]=Br),rr!=null&&(rr[0]=ln),qt!=null&&(qt[0]=Ot),Rt[0]+=18,Bt[0]-=18,Er[0]=1}Bt=0}}if(It=It[0],yt=yt[0],Bt!=0)return Bt;if(Rt=!!(2&yt),!wt&&It)return 3;if(ye!=null&&(ye[0]=!!(16&yt)),_e!=null&&(_e[0]=Rt),be!=null&&(be[0]=0),_e=Ne[0],yt=Qe[0],It&&Rt&&Fe==null){Bt=0;break}if(4>j){Bt=7;break}if(wt&&It||!wt&&!It&&!r(S,T[0],"ALPH")){j=[j],ht.na=[ht.na],ht.P=[ht.P],ht.Sa=[ht.Sa];e:{Br=S,Bt=T,wt=j;var Er=ht.gb;rr=ht.na,qt=ht.P,Ur=ht.Sa,ln=22,t(Br!=null),t(wt!=null),Ot=Bt[0];var _n=wt[0];for(t(rr!=null),t(Ur!=null),rr[0]=null,qt[0]=null,Ur[0]=0;;){if(Bt[0]=Ot,wt[0]=_n,8>_n){Bt=7;break e}var Vi=Pt(Br,Ot+4);if(4294967286<Vi){Bt=3;break e}var rn=8+Vi+1&-2;if(ln+=rn,0<Er&&ln>Er){Bt=3;break e}if(!r(Br,Ot,"VP8 ")||!r(Br,Ot,"VP8L")){Bt=0;break e}if(_n[0]<rn){Bt=7;break e}r(Br,Ot,"ALPH")||(rr[0]=Br,qt[0]=Ot+8,Ur[0]=Vi),Ot+=rn,_n-=rn}}if(j=j[0],ht.na=ht.na[0],ht.P=ht.P[0],ht.Sa=ht.Sa[0],Bt!=0)break}j=[j],ht.Ja=[ht.Ja],ht.xa=[ht.xa];e:if(Er=S,Bt=T,wt=j,rr=ht.gb[0],qt=ht.Ja,Ur=ht.xa,Br=Bt[0],Ot=!r(Er,Br,"VP8 "),ln=!r(Er,Br,"VP8L"),t(Er!=null),t(wt!=null),t(qt!=null),t(Ur!=null),8>wt[0])Bt=7;else{if(Ot||ln){if(Er=Pt(Er,Br+4),12<=rr&&Er>rr-12){Bt=3;break e}if(Oe&&Er>wt[0]-8){Bt=7;break e}qt[0]=Er,Bt[0]+=8,wt[0]-=8,Ur[0]=ln}else Ur[0]=5<=wt[0]&&Er[Br+0]==47&&!(Er[Br+4]>>5),qt[0]=wt[0];Bt=0}if(j=j[0],ht.Ja=ht.Ja[0],ht.xa=ht.xa[0],T=T[0],Bt!=0)break;if(4294967286<ht.Ja)return 3;if(be==null||Rt||(be[0]=ht.xa?2:1),_e=[_e],yt=[yt],ht.xa){if(5>j){Bt=7;break}be=_e,Oe=yt,Rt=ye,S==null||5>j?S=0:5<=j&&S[T+0]==47&&!(S[T+4]>>5)?(wt=[0],Er=[0],rr=[0],Ve(qt=new Ee,S,T,j),on(qt,wt,Er,rr)?(be!=null&&(be[0]=wt[0]),Oe!=null&&(Oe[0]=Er[0]),Rt!=null&&(Rt[0]=rr[0]),S=1):S=0):S=0}else{if(10>j){Bt=7;break}be=yt,S==null||10>j||!Pc(S,T+3,j-3)?S=0:(Oe=S[T+0]|S[T+1]<<8|S[T+2]<<16,Rt=16383&(S[T+7]<<8|S[T+6]),S=16383&(S[T+9]<<8|S[T+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=ht.Ja||!Rt||!S?S=0:(_e&&(_e[0]=Rt),be&&(be[0]=S),S=1))}if(!S||(_e=_e[0],yt=yt[0],It&&(Ne[0]!=_e||Qe[0]!=yt)))return 3;Fe!=null&&(Fe[0]=ht,Fe.offset=T-Fe.w,t(4294967286>T-Fe.w),t(Fe.offset==Fe.ha-j));break}return Bt==0||Bt==7&&It&&Fe==null?(ye!=null&&(ye[0]|=ht.na!=null&&0<ht.na.length),W!=null&&(W[0]=_e),ue!=null&&(ue[0]=yt),0):Bt}function Ms(S,T,j){var W=T.width,ue=T.height,ye=0,_e=0,be=W,Fe=ue;if(T.Da=S!=null&&0<S.Da,T.Da&&(be=S.cd,Fe=S.bd,ye=S.v,_e=S.j,11>j||(ye&=-2,_e&=-2),0>ye||0>_e||0>=be||0>=Fe||ye+be>W||_e+Fe>ue))return 0;if(T.v=ye,T.j=_e,T.va=ye+be,T.o=_e+Fe,T.U=be,T.T=Fe,T.da=S!=null&&0<S.da,T.da){if(!fr(be,Fe,j=[S.ib],ye=[S.hb]))return 0;T.ib=j[0],T.hb=ye[0]}return T.ob=S!=null&&S.ob,T.Kb=S==null||!S.Sd,T.da&&(T.ob=T.ib<3*W/4&&T.hb<3*ue/4,T.Kb=0),1}function Ws(S){if(S==null)return 2;if(11>S.S){var T=S.f.RGBA;T.fb+=(S.height-1)*T.A,T.A=-T.A}else T=S.f.kb,S=S.height,T.O+=(S-1)*T.fa,T.fa=-T.fa,T.N+=(S-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(S-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(S-1)*T.lb,T.lb=-T.lb);return 0}function Fl(S,T,j,W){if(W==null||0>=S||0>=T)return 2;if(j!=null){if(j.Da){var ue=j.cd,ye=j.bd,_e=-2&j.v,be=-2&j.j;if(0>_e||0>be||0>=ue||0>=ye||_e+ue>S||be+ye>T)return 2;S=ue,T=ye}if(j.da){if(!fr(S,T,ue=[j.ib],ye=[j.hb]))return 2;S=ue[0],T=ye[0]}}W.width=S,W.height=T;e:{var Fe=W.width,Ne=W.height;if(S=W.S,0>=Fe||0>=Ne||!(S>=WA&&13>S))S=2;else{if(0>=W.Rd&&W.sd==null){_e=ye=ue=T=0;var Qe=(be=Fe*Qo[S])*Ne;if(11>S||(ye=(Ne+1)/2*(T=(Fe+1)/2),S==12&&(_e=(ue=Fe)*Ne)),(Ne=u(Qe+2*ye+_e))==null){S=1;break e}W.sd=Ne,11>S?((Fe=W.f.RGBA).eb=Ne,Fe.fb=0,Fe.A=be,Fe.size=Qe):((Fe=W.f.kb).y=Ne,Fe.O=0,Fe.fa=be,Fe.Fd=Qe,Fe.f=Ne,Fe.N=0+Qe,Fe.Ab=T,Fe.Cd=ye,Fe.ea=Ne,Fe.W=0+Qe+ye,Fe.Db=T,Fe.Ed=ye,S==12&&(Fe.F=Ne,Fe.J=0+Qe+2*ye),Fe.Tc=_e,Fe.lb=ue)}if(T=1,ue=W.S,ye=W.width,_e=W.height,ue>=WA&&13>ue)if(11>ue)S=W.f.RGBA,T&=(be=Math.abs(S.A))*(_e-1)+ye<=S.size,T&=be>=ye*Qo[ue],T&=S.eb!=null;else{S=W.f.kb,be=(ye+1)/2,Qe=(_e+1)/2,Fe=Math.abs(S.fa),Ne=Math.abs(S.Ab);var It=Math.abs(S.Db),Oe=Math.abs(S.lb),ht=Oe*(_e-1)+ye;T&=Fe*(_e-1)+ye<=S.Fd,T&=Ne*(Qe-1)+be<=S.Cd,T=(T&=It*(Qe-1)+be<=S.Ed)&Fe>=ye&Ne>=be&It>=be,T&=S.y!=null,T&=S.f!=null,T&=S.ea!=null,ue==12&&(T&=Oe>=ye,T&=ht<=S.Tc,T&=S.F!=null)}else T=0;S=T?0:2}}return S!=0||j!=null&&j.fd&&(S=Ws(W)),S}var Uo=64,Ca=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Aa=24,Xa=32,pi=8,Tl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ar("Predictor0","PredictorAdd0"),ae.Predictor0=function(){return 4278190080},ae.Predictor1=function(S){return S},ae.Predictor2=function(S,T,j){return T[j+0]},ae.Predictor3=function(S,T,j){return T[j+1]},ae.Predictor4=function(S,T,j){return T[j-1]},ae.Predictor5=function(S,T,j){return mr(mr(S,T[j+1]),T[j+0])},ae.Predictor6=function(S,T,j){return mr(S,T[j-1])},ae.Predictor7=function(S,T,j){return mr(S,T[j+0])},ae.Predictor8=function(S,T,j){return mr(T[j-1],T[j+0])},ae.Predictor9=function(S,T,j){return mr(T[j+0],T[j+1])},ae.Predictor10=function(S,T,j){return mr(mr(S,T[j-1]),mr(T[j+0],T[j+1]))},ae.Predictor11=function(S,T,j){var W=T[j+0];return 0>=Sr(W>>24&255,S>>24&255,(T=T[j-1])>>24&255)+Sr(W>>16&255,S>>16&255,T>>16&255)+Sr(W>>8&255,S>>8&255,T>>8&255)+Sr(255&W,255&S,255&T)?W:S},ae.Predictor12=function(S,T,j){var W=T[j+0];return(hn((S>>24&255)+(W>>24&255)-((T=T[j-1])>>24&255))<<24|hn((S>>16&255)+(W>>16&255)-(T>>16&255))<<16|hn((S>>8&255)+(W>>8&255)-(T>>8&255))<<8|hn((255&S)+(255&W)-(255&T)))>>>0},ae.Predictor13=function(S,T,j){var W=T[j-1];return(Vr((S=mr(S,T[j+0]))>>24&255,W>>24&255)<<24|Vr(S>>16&255,W>>16&255)<<16|Vr(S>>8&255,W>>8&255)<<8|Vr(255&S,255&W))>>>0};var Sa=ae.PredictorAdd0;ae.PredictorAdd1=Jr,ar("Predictor2","PredictorAdd2"),ar("Predictor3","PredictorAdd3"),ar("Predictor4","PredictorAdd4"),ar("Predictor5","PredictorAdd5"),ar("Predictor6","PredictorAdd6"),ar("Predictor7","PredictorAdd7"),ar("Predictor8","PredictorAdd8"),ar("Predictor9","PredictorAdd9"),ar("Predictor10","PredictorAdd10"),ar("Predictor11","PredictorAdd11"),ar("Predictor12","PredictorAdd12"),ar("Predictor13","PredictorAdd13");var wo=ae.PredictorAdd2;br("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),br("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var KA,GA=ae.ColorIndexInverseTransform,sA=ae.MapARGB,oA=ae.VP8LColorIndexInverseTransformAlpha,Pl=ae.MapAlpha,Ya=ae.VP8LPredictorsAdd=[];Ya.length=16,(ae.VP8LPredictors=[]).length=16,(ae.VP8LPredictorsAdd_C=[]).length=16,(ae.VP8LPredictors_C=[]).length=16;var fn,Ll,Li,Ro,Gn,$n,bi,mi,Zs,Ml,Ea,Nc,Kd,Gd,zh,$d,Hh,Dc,Qc,Oc,Su,kl,$A,aA,ks,jh,Vh,Eu,Ul=u(511),zc=u(2041),Hc=u(225),qA=u(767),lA=0,Iu=zc,Ja=Hc,ds=qA,uo=Ul,WA=0,an=1,Rl=2,jc=3,Vc=4,AA=5,qd=6,Kh=7,Fu=8,Kc=9,ZA=10,Tu=[2,3,7],Pu=[3,3,11],XA=[280,256,256,256,40],Lu=[0,1,1,1,0],Gh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Gc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],YA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],JA=8,cA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$c=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],No=null,zp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Wd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],qc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],$h=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Zd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Xd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ca=[],ho=[],Ia=[],gi=1,el=2,es=[],Xs=[];co("UpsampleRgbLinePair",hs,3),co("UpsampleBgrLinePair",jA,3),co("UpsampleRgbaLinePair",El,4),co("UpsampleBgraLinePair",iA,4),co("UpsampleArgbLinePair",Sl,4),co("UpsampleRgba4444LinePair",Ji,2),co("UpsampleRgb565LinePair",nA,2);var Zc=ae.UpsampleRgbLinePair,ec=ae.UpsampleBgrLinePair,uA=ae.UpsampleRgbaLinePair,Mu=ae.UpsampleBgraLinePair,tc=ae.UpsampleArgbLinePair,ku=ae.UpsampleRgba4444LinePair,Yd=ae.UpsampleRgb565LinePair,Xc=16,tl=1<<Xc-1,Fa=-227,Us=482,ua=6,Uu=0,Jd=u(256),ef=u(256),rc=u(256),qh=u(256),Ru=u(Us-Fa),tf=u(Us-Fa);xs("YuvToRgbRow",hs,3),xs("YuvToBgrRow",jA,3),xs("YuvToRgbaRow",El,4),xs("YuvToBgraRow",iA,4),xs("YuvToArgbRow",Sl,4),xs("YuvToRgba4444Row",Ji,2),xs("YuvToRgb565Row",nA,2);var Yc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],hA=[0,2,8],nc=[8,7,6,4,4,2,2,2,1,1,1,1],Do=1;this.WebPDecodeRGBA=function(S,T,j,W,ue){var ye=an,_e=new Ir,be=new pt;_e.ba=be,be.S=ye,be.width=[be.width],be.height=[be.height];var Fe=be.width,Ne=be.height,Qe=new Je;if(Qe==null||S==null)var It=2;else t(Qe!=null),It=Za(S,T,j,Qe.width,Qe.height,Qe.Pd,Qe.Qd,Qe.format,null);if(It!=0?Fe=0:(Fe!=null&&(Fe[0]=Qe.width[0]),Ne!=null&&(Ne[0]=Qe.height[0]),Fe=1),Fe){be.width=be.width[0],be.height=be.height[0],W!=null&&(W[0]=be.width),ue!=null&&(ue[0]=be.height);e:{if(W=new To,(ue=new Zr).data=S,ue.w=T,ue.ha=j,ue.kd=1,T=[0],t(ue!=null),((S=Za(ue.data,ue.w,ue.ha,null,null,null,T,null,ue))==0||S==7)&&T[0]&&(S=4),(T=S)==0){if(t(_e!=null),W.data=ue.data,W.w=ue.w+ue.offset,W.ha=ue.ha-ue.offset,W.put=Qt,W.ac=tr,W.bc=gr,W.ma=_e,ue.xa){if((S=Wr())==null){_e=1;break e}if(function(Oe,ht){var yt=[0],Rt=[0],Bt=[0];t:for(;;){if(Oe==null)return 0;if(ht==null)return Oe.a=2,0;if(Oe.l=ht,Oe.a=0,Ve(Oe.m,ht.data,ht.w,ht.ha),!on(Oe.m,yt,Rt,Bt)){Oe.a=3;break t}if(Oe.xb=el,ht.width=yt[0],ht.height=Rt[0],!_i(yt[0],Rt[0],1,Oe,null))break t;return 1}return t(Oe.a!=0),0}(S,W)){if(W=(T=Fl(W.width,W.height,_e.Oa,_e.ba))==0){t:{W=S;r:for(;;){if(W==null){W=0;break t}if(t(W.s.yc!=null),t(W.s.Ya!=null),t(0<W.s.Wb),t((j=W.l)!=null),t((ue=j.ma)!=null),W.xb!=0){if(W.ca=ue.ba,W.tb=ue.tb,t(W.ca!=null),!Ms(ue.Oa,j,jc)){W.a=2;break r}if(!xa(W,j.width)||j.da)break r;if((j.da||At(W.ca.S))&&rA(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&rA()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!Ke(W.s.vb,W.s.Wa.Xa)){W.a=1;break r}W.xb=0}if(!Jt(W,W.V,W.Ba,W.c,W.i,j.o,li))break r;ue.Dc=W.Ma,W=1;break t}t(W.a!=0),W=0}W=!W}W&&(T=S.a)}else T=S.a}else{if((S=new ba)==null){_e=1;break e}if(S.Fa=ue.na,S.P=ue.P,S.qc=ue.Sa,Lc(S,W)){if((T=Fl(W.width,W.height,_e.Oa,_e.ba))==0){if(S.Aa=0,j=_e.Oa,t((ue=S)!=null),j!=null){if(0<(Fe=0>(Fe=j.Md)?0:100<Fe?255:255*Fe/100)){for(Ne=Qe=0;4>Ne;++Ne)12>(It=ue.pb[Ne]).lc&&(It.ia=Fe*nc[0>It.lc?0:It.lc]>>3),Qe|=It.ia;Qe&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=j.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}(function(Oe,ht){if(Oe==null)return 0;if(ht==null)return Fi(Oe,2,"NULL VP8Io parameter in VP8Decode().");if(!Oe.cb&&!Lc(Oe,ht))return 0;if(t(Oe.cb),ht.ac==null||ht.ac(ht)){ht.ob&&(Oe.L=0);var yt=hA[Oe.L];if(Oe.L==2?(Oe.yb=0,Oe.zb=0):(Oe.yb=ht.v-yt>>4,Oe.zb=ht.j-yt>>4,0>Oe.yb&&(Oe.yb=0),0>Oe.zb&&(Oe.zb=0)),Oe.Va=ht.o+15+yt>>4,Oe.Hb=ht.va+15+yt>>4,Oe.Hb>Oe.za&&(Oe.Hb=Oe.za),Oe.Va>Oe.Ub&&(Oe.Va=Oe.Ub),0<Oe.L){var Rt=Oe.ed;for(yt=0;4>yt;++yt){var Bt;if(Oe.Qa.Cb){var wt=Oe.Qa.Lb[yt];Oe.Qa.Fb||(wt+=Rt.Tb)}else wt=Rt.Tb;for(Bt=0;1>=Bt;++Bt){var Ot=Oe.gd[yt][Bt],rr=wt;if(Rt.Pc&&(rr+=Rt.vd[0],Bt&&(rr+=Rt.od[0])),0<(rr=0>rr?0:63<rr?63:rr)){var qt=rr;0<Rt.wb&&(qt=4<Rt.wb?qt>>2:qt>>1)>9-Rt.wb&&(qt=9-Rt.wb),1>qt&&(qt=1),Ot.dd=qt,Ot.tc=2*rr+qt,Ot.ld=40<=rr?2:15<=rr?1:0}else Ot.tc=0;Ot.La=Bt}}}yt=0}else Fi(Oe,6,"Frame setup failed"),yt=Oe.a;if(yt=yt==0){if(yt){Oe.$c=0,0<Oe.Aa||(Oe.Ic=Do);t:{yt=Oe.Ic,Rt=4*(qt=Oe.za);var Ur=32*qt,Br=qt+1,ln=0<Oe.L?qt*(0<Oe.Aa?2:1):0,Er=(Oe.Aa==2?2:1)*qt;if((Ot=Rt+832+(Bt=3*(16*yt+hA[Oe.L])/2*Ur)+(wt=Oe.Fa!=null&&0<Oe.Fa.length?Oe.Kc.c*Oe.Kc.i:0))!=Ot)yt=0;else{if(Ot>Oe.Vb){if(Oe.Vb=0,Oe.Ec=u(Ot),Oe.Fc=0,Oe.Ec==null){yt=Fi(Oe,1,"no memory during frame initialization.");break t}Oe.Vb=Ot}Ot=Oe.Ec,rr=Oe.Fc,Oe.Ac=Ot,Oe.Bc=rr,rr+=Rt,Oe.Gd=h(Ur,wl),Oe.Hd=0,Oe.rb=h(Br+1,Ha),Oe.sb=1,Oe.wa=ln?h(ln,Oi):null,Oe.Y=0,Oe.D.Nb=0,Oe.D.wa=Oe.wa,Oe.D.Y=Oe.Y,0<Oe.Aa&&(Oe.D.Y+=qt),t(!0),Oe.oc=Ot,Oe.pc=rr,rr+=832,Oe.ya=h(Er,Vn),Oe.aa=0,Oe.D.ya=Oe.ya,Oe.D.aa=Oe.aa,Oe.Aa==2&&(Oe.D.aa+=qt),Oe.R=16*qt,Oe.B=8*qt,qt=(Ur=hA[Oe.L])*Oe.R,Ur=Ur/2*Oe.B,Oe.sa=Ot,Oe.ta=rr+qt,Oe.qa=Oe.sa,Oe.ra=Oe.ta+16*yt*Oe.R+Ur,Oe.Ha=Oe.qa,Oe.Ia=Oe.ra+8*yt*Oe.B+Ur,Oe.$c=0,rr+=Bt,Oe.mb=wt?Ot:null,Oe.nb=wt?rr:null,t(rr+wt<=Oe.Fc+Oe.Vb),xl(Oe),a(Oe.Ac,Oe.Bc,0,Rt),yt=1}}if(yt){if(ht.ka=0,ht.y=Oe.sa,ht.O=Oe.ta,ht.f=Oe.qa,ht.N=Oe.ra,ht.ea=Oe.Ha,ht.Vd=Oe.Ia,ht.fa=Oe.R,ht.Rc=Oe.B,ht.F=null,ht.J=0,!lA){for(yt=-255;255>=yt;++yt)Ul[255+yt]=0>yt?-yt:yt;for(yt=-1020;1020>=yt;++yt)zc[1020+yt]=-128>yt?-128:127<yt?127:yt;for(yt=-112;112>=yt;++yt)Hc[112+yt]=-16>yt?-16:15<yt?15:yt;for(yt=-255;510>=yt;++yt)qA[255+yt]=0>yt?0:255<yt?255:yt;lA=1}bi=Jl,mi=Mc,Ml=kc,Ea=na,Nc=Yl,Zs=bl,Kd=D,Gd=ce,zh=ft,$d=Dt,Hh=ke,Dc=st,Qc=Wt,Oc=pr,Su=HA,kl=aa,$A=qa,aA=$s,ho[0]=wi,ho[1]=nn,ho[2]=Uc,ho[3]=cs,ho[4]=us,ho[5]=Ln,ho[6]=Yn,ho[7]=zA,ho[8]=Xi,ho[9]=pn,ca[0]=Zi,ca[1]=sa,ca[2]=ja,ca[3]=eA,ca[4]=oa,ca[5]=en,ca[6]=Ka,Ia[0]=Mr,Ia[1]=ia,Ia[2]=Kr,Ia[3]=$r,Ia[4]=Yi,Ia[5]=Ga,Ia[6]=Ba,yt=1}else yt=0}yt&&(yt=function(_n,Vi){for(_n.M=0;_n.M<_n.Va;++_n.M){var rn,Pr=_n.Jc[_n.M&_n.Xb],Ar=_n.m,qn=_n;for(rn=0;rn<qn.za;++rn){var vr=Ar,yn=qn,Wn=yn.Ac,ts=yn.Bc+4*rn,Rs=yn.zc,yi=yn.ya[yn.aa+rn];if(yn.Qa.Bb?yi.$b=Lt(vr,yn.Pa.jb[0])?2+Lt(vr,yn.Pa.jb[2]):Lt(vr,yn.Pa.jb[1]):yi.$b=0,yn.kc&&(yi.Ad=Lt(vr,yn.Bd)),yi.Za=!Lt(vr,145)+0,yi.Za){var Ns=yi.Ob,ci=0;for(yn=0;4>yn;++yn){var Bi,Zt=Rs[0+yn];for(Bi=0;4>Bi;++Bi){Zt=Zd[Wn[ts+Bi]][Zt];for(var lr=qc[Lt(vr,Zt[0])];0<lr;)lr=qc[2*lr+Lt(vr,Zt[lr])];Zt=-lr,Wn[ts+Bi]=Zt}i(Ns,ci,Wn,ts,4),ci+=4,Rs[0+yn]=Zt}}else Zt=Lt(vr,156)?Lt(vr,128)?1:3:Lt(vr,163)?2:0,yi.Ob[0]=Zt,a(Wn,ts,Zt,4),a(Rs,0,Zt,4);yi.Dd=Lt(vr,142)?Lt(vr,114)?Lt(vr,183)?1:3:2:0}if(qn.m.Ka)return Fi(_n,7,"Premature end-of-partition0 encountered.");for(;_n.ja<_n.za;++_n.ja){if(qn=Pr,vr=(Ar=_n).rb[Ar.sb-1],Wn=Ar.rb[Ar.sb+Ar.ja],rn=Ar.ya[Ar.aa+Ar.ja],ts=Ar.kc?rn.Ad:0)vr.la=Wn.la=0,rn.Za||(vr.Na=Wn.Na=0),rn.Hc=0,rn.Gc=0,rn.ia=0;else{var ni,Nn;if(vr=Wn,Wn=qn,ts=Ar.Pa.Xc,Rs=Ar.ya[Ar.aa+Ar.ja],yi=Ar.pb[Rs.$b],yn=Rs.ad,Ns=0,ci=Ar.rb[Ar.sb-1],Zt=Bi=0,a(yn,Ns,0,384),Rs.Za)var Mi=0,ii=ts[3];else{lr=u(16);var Ci=vr.Na+ci.Na;if(Ci=No(Wn,ts[1],Ci,yi.Eb,0,lr,0),vr.Na=ci.Na=(0<Ci)+0,1<Ci)bi(lr,0,yn,Ns);else{var On=lr[0]+3>>3;for(lr=0;256>lr;lr+=16)yn[Ns+lr]=On}Mi=1,ii=ts[0]}var Zn=15&vr.la,si=15&ci.la;for(lr=0;4>lr;++lr){var Cn=1&si;for(On=Nn=0;4>On;++On)Zn=Zn>>1|(Cn=(Ci=No(Wn,ii,Ci=Cn+(1&Zn),yi.Sc,Mi,yn,Ns))>Mi)<<7,Nn=Nn<<2|(3<Ci?3:1<Ci?2:yn[Ns+0]!=0),Ns+=16;Zn>>=4,si=si>>1|Cn<<7,Bi=(Bi<<8|Nn)>>>0}for(ii=Zn,Mi=si>>4,ni=0;4>ni;ni+=2){for(Nn=0,Zn=vr.la>>4+ni,si=ci.la>>4+ni,lr=0;2>lr;++lr){for(Cn=1&si,On=0;2>On;++On)Ci=Cn+(1&Zn),Zn=Zn>>1|(Cn=0<(Ci=No(Wn,ts[2],Ci,yi.Qc,0,yn,Ns)))<<3,Nn=Nn<<2|(3<Ci?3:1<Ci?2:yn[Ns+0]!=0),Ns+=16;Zn>>=2,si=si>>1|Cn<<5}Zt|=Nn<<4*ni,ii|=Zn<<4<<ni,Mi|=(240&si)<<ni}vr.la=ii,ci.la=Mi,Rs.Hc=Bi,Rs.Gc=Zt,Rs.ia=43690&Zt?0:yi.ia,ts=!(Bi|Zt)}if(0<Ar.L&&(Ar.wa[Ar.Y+Ar.ja]=Ar.gd[rn.$b][rn.Za],Ar.wa[Ar.Y+Ar.ja].La|=!ts),qn.Ka)return Fi(_n,7,"Premature end-of-file encountered.")}if(xl(_n),Ar=Vi,qn=1,rn=(Pr=_n).D,vr=0<Pr.L&&Pr.M>=Pr.zb&&Pr.M<=Pr.Va,Pr.Aa==0)t:{if(rn.M=Pr.M,rn.uc=vr,Il(Pr,rn),qn=1,rn=(Nn=Pr.D).Nb,vr=(Zt=hA[Pr.L])*Pr.R,Wn=Zt/2*Pr.B,lr=16*rn*Pr.R,On=8*rn*Pr.B,ts=Pr.sa,Rs=Pr.ta-vr+lr,yi=Pr.qa,yn=Pr.ra-Wn+On,Ns=Pr.Ha,ci=Pr.Ia-Wn+On,si=(Zn=Nn.M)==0,Bi=Zn>=Pr.Va-1,Pr.Aa==2&&Il(Pr,Nn),Nn.uc)for(Cn=(Ci=Pr).D.M,t(Ci.D.uc),Nn=Ci.yb;Nn<Ci.Hb;++Nn){Mi=Nn,ii=Cn;var wn=(fo=(ns=Ci).D).Nb;ni=ns.R;var fo=fo.wa[fo.Y+Mi],Ki=ns.sa,ki=ns.ta+16*wn*ni+16*Mi,Ys=fo.dd,zn=fo.tc;if(zn!=0)if(t(3<=zn),ns.L==1)0<Mi&&kl(Ki,ki,ni,zn+4),fo.La&&aA(Ki,ki,ni,zn),0<ii&&Su(Ki,ki,ni,zn+4),fo.La&&$A(Ki,ki,ni,zn);else{var rs=ns.B,Js=ns.qa,rl=ns.ra+8*wn*rs+8*Mi,Oo=ns.Ha,ns=ns.Ia+8*wn*rs+8*Mi;wn=fo.ld,0<Mi&&(Gd(Ki,ki,ni,zn+4,Ys,wn),$d(Js,rl,Oo,ns,rs,zn+4,Ys,wn)),fo.La&&(Dc(Ki,ki,ni,zn,Ys,wn),Oc(Js,rl,Oo,ns,rs,zn,Ys,wn)),0<ii&&(Kd(Ki,ki,ni,zn+4,Ys,wn),zh(Js,rl,Oo,ns,rs,zn+4,Ys,wn)),fo.La&&(Hh(Ki,ki,ni,zn,Ys,wn),Qc(Js,rl,Oo,ns,rs,zn,Ys,wn))}}if(Pr.ia&&alert("todo:DitherRow"),Ar.put!=null){if(Nn=16*Zn,Zn=16*(Zn+1),si?(Ar.y=Pr.sa,Ar.O=Pr.ta+lr,Ar.f=Pr.qa,Ar.N=Pr.ra+On,Ar.ea=Pr.Ha,Ar.W=Pr.Ia+On):(Nn-=Zt,Ar.y=ts,Ar.O=Rs,Ar.f=yi,Ar.N=yn,Ar.ea=Ns,Ar.W=ci),Bi||(Zn-=Zt),Zn>Ar.o&&(Zn=Ar.o),Ar.F=null,Ar.J=null,Pr.Fa!=null&&0<Pr.Fa.length&&Nn<Zn&&(Ar.J=xi(Pr,Ar,Nn,Zn-Nn),Ar.F=Pr.mb,Ar.F==null&&Ar.F.length==0)){qn=Fi(Pr,3,"Could not decode alpha data.");break t}Nn<Ar.j&&(Zt=Ar.j-Nn,Nn=Ar.j,t(!(1&Zt)),Ar.O+=Pr.R*Zt,Ar.N+=Pr.B*(Zt>>1),Ar.W+=Pr.B*(Zt>>1),Ar.F!=null&&(Ar.J+=Ar.width*Zt)),Nn<Zn&&(Ar.O+=Ar.v,Ar.N+=Ar.v>>1,Ar.W+=Ar.v>>1,Ar.F!=null&&(Ar.J+=Ar.v),Ar.ka=Nn-Ar.j,Ar.U=Ar.va-Ar.v,Ar.T=Zn-Nn,qn=Ar.put(Ar))}rn+1!=Pr.Ic||Bi||(i(Pr.sa,Pr.ta-vr,ts,Rs+16*Pr.R,vr),i(Pr.qa,Pr.ra-Wn,yi,yn+8*Pr.B,Wn),i(Pr.Ha,Pr.Ia-Wn,Ns,ci+8*Pr.B,Wn))}if(!qn)return Fi(_n,6,"Output aborted.")}return 1}(Oe,ht)),ht.bc!=null&&ht.bc(ht),yt&=1}return yt?(Oe.cb=0,yt):0})(S,W)||(T=S.a)}}else T=S.a}T==0&&_e.Oa!=null&&_e.Oa.fd&&(T=Ws(_e.ba))}_e=T}ye=_e!=0?null:11>ye?be.f.RGBA.eb:be.f.kb.y}else ye=null;return ye};var Qo=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function w(ae,Le){for(var re="",he=0;he<4;he++)re+=String.fromCharCode(ae[Le++]);return re}function B(ae,Le){return ae[Le+0]|ae[Le+1]<<8}function I(ae,Le){return(ae[Le+0]|ae[Le+1]<<8|ae[Le+2]<<16)>>>0}function P(ae,Le){return(ae[Le+0]|ae[Le+1]<<8|ae[Le+2]<<16|ae[Le+3]<<24)>>>0}new g;var b=[0],N=[0],k=[],H=new g,U=e,Q=function(ae,Le){var re={},he=0,Ie=!1,we=0,nt=0;if(re.frames=[],!function(ie,Ee){for(var Me=0;Me<4;Me++)if(ie[Ee+Me]!="RIFF".charCodeAt(Me))return!0;return!1}(ae,Le)){for(P(ae,Le+=4),Le+=8;Le<ae.length;){var rt=w(ae,Le),ct=P(ae,Le+=4);Le+=4;var Pe=ct+(1&ct);switch(rt){case"VP8 ":case"VP8L":re.frames[he]===void 0&&(re.frames[he]={}),(gt=re.frames[he]).src_off=Ie?nt:Le-8,gt.src_size=we+ct+8,he++,Ie&&(Ie=!1,we=0,nt=0);break;case"VP8X":(gt=re.header={}).feature_flags=ae[Le];var Ve=Le+4;gt.canvas_width=1+I(ae,Ve),Ve+=3,gt.canvas_height=1+I(ae,Ve),Ve+=3;break;case"ALPH":Ie=!0,we=Pe+8,nt=Le-8;break;case"ANIM":(gt=re.header).bgcolor=P(ae,Le),Ve=Le+4,gt.loop_count=B(ae,Ve),Ve+=2;break;case"ANMF":var mt,gt;(gt=re.frames[he]={}).offset_x=2*I(ae,Le),Le+=3,gt.offset_y=2*I(ae,Le),Le+=3,gt.width=1+I(ae,Le),Le+=3,gt.height=1+I(ae,Le),Le+=3,gt.duration=I(ae,Le),Le+=3,mt=ae[Le++],gt.dispose=1&mt,gt.blend=mt>>1&1}rt!="ANMF"&&(Le+=Pe)}return re}}(U,0);Q.response=U,Q.rgbaoutput=!0,Q.dataurl=!1;var K=Q.header?Q.header:null,Z=Q.frames?Q.frames:null;if(K){K.loop_counter=K.loop_count,b=[K.canvas_height],N=[K.canvas_width];for(var Ae=0;Ae<Z.length&&Z[Ae].blend!=0;Ae++);}var fe=Z[0],ge=H.WebPDecodeRGBA(U,fe.src_off,fe.src_size,N,b);fe.rgba=ge,fe.imgwidth=N[0],fe.imgheight=b[0];for(var me=0;me<N[0]*b[0]*4;me++)k[me]=ge[me];return this.width=N,this.height=b,this.data=k,this}(function(e){var t,r,i,a,u,h,o,g,w,B=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new g,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new h,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new h,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new I(this),t=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,h=this.internal.Point,o=this.internal.Rectangle,g=this.internal.Matrix,w=new B}]);var I=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ee=ie;Object.defineProperty(this,"pdf",{get:function(){return Ee}});var Me=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Me},set:function(Pt){Me=!!Pt}});var Ye=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ye},set:function(Pt){Ye=!!Pt}});var at=0;Object.defineProperty(this,"posX",{get:function(){return at},set:function(Pt){isNaN(Pt)||(at=Pt)}});var Ze=0;Object.defineProperty(this,"posY",{get:function(){return Ze},set:function(Pt){isNaN(Pt)||(Ze=Pt)}}),Object.defineProperty(this,"margin",{get:function(){return w.margin},set:function(Pt){var Ke;typeof Pt=="number"?Ke=[Pt,Pt,Pt,Pt]:((Ke=new Array(4))[0]=Pt[0],Ke[1]=Pt.length>=2?Pt[1]:Ke[0],Ke[2]=Pt.length>=3?Pt[2]:Ke[0],Ke[3]=Pt.length>=4?Pt[3]:Ke[1]),w.margin=Ke}});var Ct=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ct},set:function(Pt){Ct=Pt}});var dt=0;Object.defineProperty(this,"lastBreak",{get:function(){return dt},set:function(Pt){dt=Pt}});var Lt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Lt},set:function(Pt){Lt=Pt}}),Object.defineProperty(this,"ctx",{get:function(){return w},set:function(Pt){Pt instanceof B&&(w=Pt)}}),Object.defineProperty(this,"path",{get:function(){return w.path},set:function(Pt){w.path=Pt}});var kt=[];Object.defineProperty(this,"ctxStack",{get:function(){return kt},set:function(Pt){kt=Pt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pt){var Ke;Ke=P(Pt),this.ctx.fillStyle=Ke.style,this.ctx.isFillTransparent=Ke.a===0,this.ctx.fillOpacity=Ke.a,this.pdf.setFillColor(Ke.r,Ke.g,Ke.b,{a:Ke.a}),this.pdf.setTextColor(Ke.r,Ke.g,Ke.b,{a:Ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pt){var Ke=P(Pt);this.ctx.strokeStyle=Ke.style,this.ctx.isStrokeTransparent=Ke.a===0,this.ctx.strokeOpacity=Ke.a,Ke.a===0?this.pdf.setDrawColor(255,255,255):(Ke.a,this.pdf.setDrawColor(Ke.r,Ke.g,Ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pt){["butt","round","square"].indexOf(Pt)!==-1&&(this.ctx.lineCap=Pt,this.pdf.setLineCap(Pt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pt){isNaN(Pt)||(this.ctx.lineWidth=Pt,this.pdf.setLineWidth(Pt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pt){["bevel","round","miter"].indexOf(Pt)!==-1&&(this.ctx.lineJoin=Pt,this.pdf.setLineJoin(Pt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pt){isNaN(Pt)||(this.ctx.miterLimit=Pt,this.pdf.setMiterLimit(Pt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pt){this.ctx.textBaseline=Pt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pt){["right","end","center","left","start"].indexOf(Pt)!==-1&&(this.ctx.textAlign=Pt)}});var $t=null,Gt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Gt},set:function(Pt){$t=null,Gt=Pt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pt){var Ke;if(this.ctx.font=Pt,(Ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pt))!==null){var Gr=Ke[1];Ke[2];var wr=Ke[3],fr=Ke[4];Ke[5];var Vt=Ke[6],xr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(fr)[2];fr=Math.floor(xr==="px"?parseFloat(fr)*this.pdf.internal.scaleFactor:xr==="em"?parseFloat(fr)*this.pdf.getFontSize():parseFloat(fr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(fr);var ar=function(Nr){var br,ot,le=[],se=Nr.trim();if(se==="")return ux;if(se in cF)return[cF[se]];for(;se!=="";){switch(ot=null,br=(se=hF(se)).charAt(0)){case'"':case"'":ot=oJ(se.substring(1),br);break;default:ot=aJ(se)}if(ot===null||(le.push(ot[0]),(se=hF(ot[1]))!==""&&se.charAt(0)!==","))return ux;se=se.replace(/^,/,"")}return le}(Vt);if(this.fontFaces){var qr=function(Nr,br){if($t===null){var ot=function(le){var se=[];return Object.keys(le).forEach(function(ve){le[ve].forEach(function(Ue){var Ge=null;switch(Ue){case"bold":Ge={family:ve,weight:"bold"};break;case"italic":Ge={family:ve,style:"italic"};break;case"bolditalic":Ge={family:ve,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:ve}}Ge!==null&&(Ge.ref={name:ve,style:Ue},se.push(Ge))})}),se}(Nr.getFontList());$t=function(le){for(var se={},ve=0;ve<le.length;++ve){var Ue=cx(le[ve]),Ge=Ue.family,et=Ue.stretch,At=Ue.style,it=Ue.weight;se[Ge]=se[Ge]||{},se[Ge][et]=se[Ge][et]||{},se[Ge][et][At]=se[Ge][et][At]||{},se[Ge][et][At][it]=Ue}return se}(ot.concat(br))}return $t}(this.pdf,this.fontFaces),mr=ar.map(function(Nr){return{family:Nr,stretch:"normal",weight:wr,style:Gr}}),hn=function(Nr,br,ot){for(var le=(ot=ot||{}).defaultFontFamily||"times",se=Object.assign({},sJ,ot.genericFontFamilies||{}),ve=null,Ue=null,Ge=0;Ge<br.length;++Ge)if(se[(ve=cx(br[Ge])).family]&&(ve.family=se[ve.family]),Nr.hasOwnProperty(ve.family)){Ue=Nr[ve.family];break}if(!(Ue=Ue||Nr[le]))throw new Error("Could not find a font-family for the rule '"+uF(ve)+"' and default family '"+le+"'.");if(Ue=function(et,At){if(At[et])return At[et];var it=v2[et],St=it<=v2.normal?-1:1,pt=AF(At,c6,it,St);if(!pt)throw new Error("Could not find a matching font-stretch value for "+et);return pt}(ve.stretch,Ue),Ue=function(et,At){if(At[et])return At[et];for(var it=A6[et],St=0;St<it.length;++St)if(At[it[St]])return At[it[St]];throw new Error("Could not find a matching font-style for "+et)}(ve.style,Ue),!(Ue=function(et,At){if(At[et])return At[et];if(et===400&&At[500])return At[500];if(et===500&&At[400])return At[400];var it=iJ[et],St=AF(At,u6,it,et<400?-1:1);if(!St)throw new Error("Could not find a matching font-weight for value "+et);return St}(ve.weight,Ue)))throw new Error("Failed to resolve a font for the rule '"+uF(ve)+"'.");return Ue}(qr,mr);this.pdf.setFont(hn.ref.name,hn.ref.style)}else{var Vr="";(wr==="bold"||parseInt(wr,10)>=700||Gr==="bold")&&(Vr="bold"),Gr==="italic"&&(Vr+="italic"),Vr.length===0&&(Vr="normal");for(var Sr="",Jr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},jr=0;jr<ar.length;jr++){if(this.pdf.internal.getFont(ar[jr],Vr,{noFallback:!0,disableWarning:!0})!==void 0){Sr=ar[jr];break}if(Vr==="bolditalic"&&this.pdf.internal.getFont(ar[jr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Sr=ar[jr],Vr="bold";else if(this.pdf.internal.getFont(ar[jr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Sr=ar[jr],Vr="normal";break}}if(Sr===""){for(var Tr=0;Tr<ar.length;Tr++)if(Jr[ar[Tr]]){Sr=Jr[ar[Tr]];break}}Sr=Sr===""?"Times":Sr,this.pdf.setFont(Sr,Vr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pt){this.ctx.globalCompositeOperation=Pt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pt){this.ctx.globalAlpha=Pt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pt){this.ctx.lineDashOffset=Pt,gt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pt){this.ctx.lineDash=Pt,gt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pt){this.ctx.ignoreClearRect=!!Pt}})};I.prototype.setLineDash=function(ie){this.lineDash=ie},I.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},I.prototype.fill=function(){Z.call(this,"fill",!1)},I.prototype.stroke=function(){Z.call(this,"stroke",!1)},I.prototype.beginPath=function(){this.path=[{type:"begin"}]},I.prototype.moveTo=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw vi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Me=this.ctx.transform.applyToPoint(new h(ie,Ee));this.path.push({type:"mt",x:Me.x,y:Me.y}),this.ctx.lastPoint=new h(ie,Ee)},I.prototype.closePath=function(){var ie=new h(0,0),Ee=0;for(Ee=this.path.length-1;Ee!==-1;Ee--)if(this.path[Ee].type==="begin"&&oi(this.path[Ee+1])==="object"&&typeof this.path[Ee+1].x=="number"){ie=new h(this.path[Ee+1].x,this.path[Ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(ie.x,ie.y)},I.prototype.lineTo=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw vi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Me=this.ctx.transform.applyToPoint(new h(ie,Ee));this.path.push({type:"lt",x:Me.x,y:Me.y}),this.ctx.lastPoint=new h(Me.x,Me.y)},I.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},I.prototype.quadraticCurveTo=function(ie,Ee,Me,Ye){if(isNaN(Me)||isNaN(Ye)||isNaN(ie)||isNaN(Ee))throw vi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var at=this.ctx.transform.applyToPoint(new h(Me,Ye)),Ze=this.ctx.transform.applyToPoint(new h(ie,Ee));this.path.push({type:"qct",x1:Ze.x,y1:Ze.y,x:at.x,y:at.y}),this.ctx.lastPoint=new h(at.x,at.y)},I.prototype.bezierCurveTo=function(ie,Ee,Me,Ye,at,Ze){if(isNaN(at)||isNaN(Ze)||isNaN(ie)||isNaN(Ee)||isNaN(Me)||isNaN(Ye))throw vi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ct=this.ctx.transform.applyToPoint(new h(at,Ze)),dt=this.ctx.transform.applyToPoint(new h(ie,Ee)),Lt=this.ctx.transform.applyToPoint(new h(Me,Ye));this.path.push({type:"bct",x1:dt.x,y1:dt.y,x2:Lt.x,y2:Lt.y,x:Ct.x,y:Ct.y}),this.ctx.lastPoint=new h(Ct.x,Ct.y)},I.prototype.arc=function(ie,Ee,Me,Ye,at,Ze){if(isNaN(ie)||isNaN(Ee)||isNaN(Me)||isNaN(Ye)||isNaN(at))throw vi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ze=!!Ze,!this.ctx.transform.isIdentity){var Ct=this.ctx.transform.applyToPoint(new h(ie,Ee));ie=Ct.x,Ee=Ct.y;var dt=this.ctx.transform.applyToPoint(new h(0,Me)),Lt=this.ctx.transform.applyToPoint(new h(0,0));Me=Math.sqrt(Math.pow(dt.x-Lt.x,2)+Math.pow(dt.y-Lt.y,2))}Math.abs(at-Ye)>=2*Math.PI&&(Ye=0,at=2*Math.PI),this.path.push({type:"arc",x:ie,y:Ee,radius:Me,startAngle:Ye,endAngle:at,counterclockwise:Ze})},I.prototype.arcTo=function(ie,Ee,Me,Ye,at){throw new Error("arcTo not implemented.")},I.prototype.rect=function(ie,Ee,Me,Ye){if(isNaN(ie)||isNaN(Ee)||isNaN(Me)||isNaN(Ye))throw vi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,Ee),this.lineTo(ie+Me,Ee),this.lineTo(ie+Me,Ee+Ye),this.lineTo(ie,Ee+Ye),this.lineTo(ie,Ee),this.lineTo(ie+Me,Ee),this.lineTo(ie,Ee)},I.prototype.fillRect=function(ie,Ee,Me,Ye){if(isNaN(ie)||isNaN(Ee)||isNaN(Me)||isNaN(Ye))throw vi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var at={};this.lineCap!=="butt"&&(at.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(at.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,Ee,Me,Ye),this.fill(),at.hasOwnProperty("lineCap")&&(this.lineCap=at.lineCap),at.hasOwnProperty("lineJoin")&&(this.lineJoin=at.lineJoin)}},I.prototype.strokeRect=function(ie,Ee,Me,Ye){if(isNaN(ie)||isNaN(Ee)||isNaN(Me)||isNaN(Ye))throw vi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(ie,Ee,Me,Ye),this.stroke())},I.prototype.clearRect=function(ie,Ee,Me,Ye){if(isNaN(ie)||isNaN(Ee)||isNaN(Me)||isNaN(Ye))throw vi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,Ee,Me,Ye))},I.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Me=0;Me<this.pdf.internal.getNumberOfPages();Me++)this.pdf.setPage(Me+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ee),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ye=new B(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ye}},I.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Me=0;Me<this.pdf.internal.getNumberOfPages();Me++)this.pdf.setPage(Me+1),this.pdf.internal.out("Q");this.pdf.setPage(Ee),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},I.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var P=function(ie){var Ee,Me,Ye,at;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))Ee=0,Me=0,Ye=0,at=0;else{var Ze=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(Ze!==null)Ee=parseInt(Ze[1]),Me=parseInt(Ze[2]),Ye=parseInt(Ze[3]),at=1;else if((Ze=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)Ee=parseInt(Ze[1]),Me=parseInt(Ze[2]),Ye=parseInt(Ze[3]),at=parseFloat(Ze[4]);else{if(at=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var Ct=new r6(ie);ie=Ct.ok?Ct.toHex():"#000000"}ie.length===4?(Ee=ie.substring(1,2),Ee+=Ee,Me=ie.substring(2,3),Me+=Me,Ye=ie.substring(3,4),Ye+=Ye):(Ee=ie.substring(1,3),Me=ie.substring(3,5),Ye=ie.substring(5,7)),Ee=parseInt(Ee,16),Me=parseInt(Me,16),Ye=parseInt(Ye,16)}}return{r:Ee,g:Me,b:Ye,a:at,style:ie}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};I.prototype.fillText=function(ie,Ee,Me,Ye){if(isNaN(Ee)||isNaN(Me)||typeof ie!="string")throw vi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ye=isNaN(Ye)?void 0:Ye,!b.call(this)){var at=Pe(this.ctx.transform.rotation),Ze=this.ctx.transform.scaleX;he.call(this,{text:ie,x:Ee,y:Me,scale:Ze,angle:at,align:this.textAlign,maxWidth:Ye})}},I.prototype.strokeText=function(ie,Ee,Me,Ye){if(isNaN(Ee)||isNaN(Me)||typeof ie!="string")throw vi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){Ye=isNaN(Ye)?void 0:Ye;var at=Pe(this.ctx.transform.rotation),Ze=this.ctx.transform.scaleX;he.call(this,{text:ie,x:Ee,y:Me,scale:Ze,renderingMode:"stroke",angle:at,align:this.textAlign,maxWidth:Ye})}},I.prototype.measureText=function(ie){if(typeof ie!="string")throw vi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ee=this.pdf,Me=this.pdf.internal.scaleFactor,Ye=Ee.internal.getFontSize(),at=Ee.getStringUnitWidth(ie)*Ye/Ee.internal.scaleFactor;return new function(Ze){var Ct=(Ze=Ze||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ct}}),this}({width:at*=Math.round(96*Me/72*1e4)/1e4})},I.prototype.scale=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw vi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Me=new g(ie,0,0,Ee,0,0);this.ctx.transform=this.ctx.transform.multiply(Me)},I.prototype.rotate=function(ie){if(isNaN(ie))throw vi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ee=new g(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(Ee)},I.prototype.translate=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw vi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Me=new g(1,0,0,1,ie,Ee);this.ctx.transform=this.ctx.transform.multiply(Me)},I.prototype.transform=function(ie,Ee,Me,Ye,at,Ze){if(isNaN(ie)||isNaN(Ee)||isNaN(Me)||isNaN(Ye)||isNaN(at)||isNaN(Ze))throw vi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ct=new g(ie,Ee,Me,Ye,at,Ze);this.ctx.transform=this.ctx.transform.multiply(Ct)},I.prototype.setTransform=function(ie,Ee,Me,Ye,at,Ze){ie=isNaN(ie)?1:ie,Ee=isNaN(Ee)?0:Ee,Me=isNaN(Me)?0:Me,Ye=isNaN(Ye)?1:Ye,at=isNaN(at)?0:at,Ze=isNaN(Ze)?0:Ze,this.ctx.transform=new g(ie,Ee,Me,Ye,at,Ze)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};I.prototype.drawImage=function(ie,Ee,Me,Ye,at,Ze,Ct,dt,Lt){var kt=this.pdf.getImageProperties(ie),$t=1,Gt=1,Pt=1,Ke=1;Ye!==void 0&&dt!==void 0&&(Pt=dt/Ye,Ke=Lt/at,$t=kt.width/Ye*dt/Ye,Gt=kt.height/at*Lt/at),Ze===void 0&&(Ze=Ee,Ct=Me,Ee=0,Me=0),Ye!==void 0&&dt===void 0&&(dt=Ye,Lt=at),Ye===void 0&&dt===void 0&&(dt=kt.width,Lt=kt.height);for(var Gr,wr=this.ctx.transform.decompose(),fr=Pe(wr.rotate.shx),Vt=new g,xr=(Vt=(Vt=(Vt=Vt.multiply(wr.translate)).multiply(wr.skew)).multiply(wr.scale)).applyToRectangle(new o(Ze-Ee*Pt,Ct-Me*Ke,Ye*$t,at*Gt)),ar=H.call(this,xr),qr=[],mr=0;mr<ar.length;mr+=1)qr.indexOf(ar[mr])===-1&&qr.push(ar[mr]);if(K(qr),this.autoPaging)for(var hn=qr[0],Vr=qr[qr.length-1],Sr=hn;Sr<Vr+1;Sr++){this.pdf.setPage(Sr);var Jr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],jr=Sr===1?this.posY+this.margin[0]:this.margin[0],Tr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],br=Sr===1?0:Tr+(Sr-2)*Nr;if(this.ctx.clip_path.length!==0){var ot=this.path;Gr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Gr,this.posX+this.margin[3],-br+jr+this.ctx.prevPageLastElemOffset),Ae.call(this,"fill",!0),this.path=ot}var le=JSON.parse(JSON.stringify(xr));le=Q([le],this.posX+this.margin[3],-br+jr+this.ctx.prevPageLastElemOffset)[0];var se=(Sr>hn||Sr<Vr)&&k.call(this);se&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jr,Nr,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",le.x,le.y,le.w,le.h,null,null,fr),se&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",xr.x,xr.y,xr.w,xr.h,null,null,fr)};var H=function(ie,Ee,Me){var Ye=[];Ee=Ee||this.pdf.internal.pageSize.width,Me=Me||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var at=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":Ye.push(Math.floor((ie.y+at)/Me)+1);break;case"arc":Ye.push(Math.floor((ie.y+at-ie.radius)/Me)+1),Ye.push(Math.floor((ie.y+at+ie.radius)/Me)+1);break;case"qct":var Ze=Ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);Ye.push(Math.floor((Ze.y+at)/Me)+1),Ye.push(Math.floor((Ze.y+Ze.h+at)/Me)+1);break;case"bct":var Ct=mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);Ye.push(Math.floor((Ct.y+at)/Me)+1),Ye.push(Math.floor((Ct.y+Ct.h+at)/Me)+1);break;case"rect":Ye.push(Math.floor((ie.y+at)/Me)+1),Ye.push(Math.floor((ie.y+ie.h+at)/Me)+1)}for(var dt=0;dt<Ye.length;dt+=1)for(;this.pdf.internal.getNumberOfPages()<Ye[dt];)U.call(this);return Ye},U=function(){var ie=this.fillStyle,Ee=this.strokeStyle,Me=this.font,Ye=this.lineCap,at=this.lineWidth,Ze=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=Ee,this.font=Me,this.lineCap=Ye,this.lineWidth=at,this.lineJoin=Ze},Q=function(ie,Ee,Me){for(var Ye=0;Ye<ie.length;Ye++)switch(ie[Ye].type){case"bct":ie[Ye].x2+=Ee,ie[Ye].y2+=Me;case"qct":ie[Ye].x1+=Ee,ie[Ye].y1+=Me;default:ie[Ye].x+=Ee,ie[Ye].y+=Me}return ie},K=function(ie){return ie.sort(function(Ee,Me){return Ee-Me})},Z=function(ie,Ee){for(var Me,Ye,at=this.fillStyle,Ze=this.strokeStyle,Ct=this.lineCap,dt=this.lineWidth,Lt=Math.abs(dt*this.ctx.transform.scaleX),kt=this.lineJoin,$t=JSON.parse(JSON.stringify(this.path)),Gt=JSON.parse(JSON.stringify(this.path)),Pt=[],Ke=0;Ke<Gt.length;Ke++)if(Gt[Ke].x!==void 0)for(var Gr=H.call(this,Gt[Ke]),wr=0;wr<Gr.length;wr+=1)Pt.indexOf(Gr[wr])===-1&&Pt.push(Gr[wr]);for(var fr=0;fr<Pt.length;fr++)for(;this.pdf.internal.getNumberOfPages()<Pt[fr];)U.call(this);if(K(Pt),this.autoPaging)for(var Vt=Pt[0],xr=Pt[Pt.length-1],ar=Vt;ar<xr+1;ar++){this.pdf.setPage(ar),this.fillStyle=at,this.strokeStyle=Ze,this.lineCap=Ct,this.lineWidth=Lt,this.lineJoin=kt;var qr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mr=ar===1?this.posY+this.margin[0]:this.margin[0],hn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Sr=ar===1?0:hn+(ar-2)*Vr;if(this.ctx.clip_path.length!==0){var Jr=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Me,this.posX+this.margin[3],-Sr+mr+this.ctx.prevPageLastElemOffset),Ae.call(this,ie,!0),this.path=Jr}if(Ye=JSON.parse(JSON.stringify($t)),this.path=Q(Ye,this.posX+this.margin[3],-Sr+mr+this.ctx.prevPageLastElemOffset),Ee===!1||ar===0){var jr=(ar>Vt||ar<xr)&&k.call(this);jr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qr,Vr,null).clip().discardPath()),Ae.call(this,ie,Ee),jr&&this.pdf.restoreGraphicsState()}this.lineWidth=dt}else this.lineWidth=Lt,Ae.call(this,ie,Ee),this.lineWidth=dt;this.path=$t},Ae=function(ie,Ee){if((ie!=="stroke"||Ee||!N.call(this))&&(ie==="stroke"||Ee||!b.call(this))){for(var Me,Ye,at=[],Ze=this.path,Ct=0;Ct<Ze.length;Ct++){var dt=Ze[Ct];switch(dt.type){case"begin":at.push({begin:!0});break;case"close":at.push({close:!0});break;case"mt":at.push({start:dt,deltas:[],abs:[]});break;case"lt":var Lt=at.length;if(Ze[Ct-1]&&!isNaN(Ze[Ct-1].x)&&(Me=[dt.x-Ze[Ct-1].x,dt.y-Ze[Ct-1].y],Lt>0)){for(;Lt>=0;Lt--)if(at[Lt-1].close!==!0&&at[Lt-1].begin!==!0){at[Lt-1].deltas.push(Me),at[Lt-1].abs.push(dt);break}}break;case"bct":Me=[dt.x1-Ze[Ct-1].x,dt.y1-Ze[Ct-1].y,dt.x2-Ze[Ct-1].x,dt.y2-Ze[Ct-1].y,dt.x-Ze[Ct-1].x,dt.y-Ze[Ct-1].y],at[at.length-1].deltas.push(Me);break;case"qct":var kt=Ze[Ct-1].x+2/3*(dt.x1-Ze[Ct-1].x),$t=Ze[Ct-1].y+2/3*(dt.y1-Ze[Ct-1].y),Gt=dt.x+2/3*(dt.x1-dt.x),Pt=dt.y+2/3*(dt.y1-dt.y),Ke=dt.x,Gr=dt.y;Me=[kt-Ze[Ct-1].x,$t-Ze[Ct-1].y,Gt-Ze[Ct-1].x,Pt-Ze[Ct-1].y,Ke-Ze[Ct-1].x,Gr-Ze[Ct-1].y],at[at.length-1].deltas.push(Me);break;case"arc":at.push({deltas:[],abs:[],arc:!0}),Array.isArray(at[at.length-1].abs)&&at[at.length-1].abs.push(dt)}}Ye=Ee?null:ie==="stroke"?"stroke":"fill";for(var wr=!1,fr=0;fr<at.length;fr++)if(at[fr].arc)for(var Vt=at[fr].abs,xr=0;xr<Vt.length;xr++){var ar=Vt[xr];ar.type==="arc"?me.call(this,ar.x,ar.y,ar.radius,ar.startAngle,ar.endAngle,ar.counterclockwise,void 0,Ee,!wr):Ie.call(this,ar.x,ar.y),wr=!0}else if(at[fr].close===!0)this.pdf.internal.out("h"),wr=!1;else if(at[fr].begin!==!0){var qr=at[fr].start.x,mr=at[fr].start.y;we.call(this,at[fr].deltas,qr,mr),wr=!0}Ye&&ae.call(this,Ye),Ee&&Le.call(this)}},fe=function(ie){var Ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Me=Ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-Me;case"top":return ie+Ee-Me;case"hanging":return ie+Ee-2*Me;case"middle":return ie+Ee/2-Me;default:return ie}},ge=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};I.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(Ee,Me){this.colorStops.push([Ee,Me])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},I.prototype.createPattern=function(){return this.createLinearGradient()},I.prototype.createRadialGradient=function(){return this.createLinearGradient()};var me=function(ie,Ee,Me,Ye,at,Ze,Ct,dt,Lt){for(var kt=rt.call(this,Me,Ye,at,Ze),$t=0;$t<kt.length;$t++){var Gt=kt[$t];$t===0&&(Lt?re.call(this,Gt.x1+ie,Gt.y1+Ee):Ie.call(this,Gt.x1+ie,Gt.y1+Ee)),nt.call(this,ie,Ee,Gt.x2,Gt.y2,Gt.x3,Gt.y3,Gt.x4,Gt.y4)}dt?Le.call(this):ae.call(this,Ct)},ae=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Le=function(){this.pdf.clip(),this.pdf.discardPath()},re=function(ie,Ee){this.pdf.internal.out(r(ie)+" "+i(Ee)+" m")},he=function(ie){var Ee;switch(ie.align){case"right":case"end":Ee="right";break;case"center":Ee="center";break;default:Ee="left"}var Me=this.pdf.getTextDimensions(ie.text),Ye=fe.call(this,ie.y),at=ge.call(this,Ye)-Me.h,Ze=this.ctx.transform.applyToPoint(new h(ie.x,Ye)),Ct=this.ctx.transform.decompose(),dt=new g;dt=(dt=(dt=dt.multiply(Ct.translate)).multiply(Ct.skew)).multiply(Ct.scale);for(var Lt,kt,$t,Gt=this.ctx.transform.applyToRectangle(new o(ie.x,Ye,Me.w,Me.h)),Pt=dt.applyToRectangle(new o(ie.x,at,Me.w,Me.h)),Ke=H.call(this,Pt),Gr=[],wr=0;wr<Ke.length;wr+=1)Gr.indexOf(Ke[wr])===-1&&Gr.push(Ke[wr]);if(K(Gr),this.autoPaging)for(var fr=Gr[0],Vt=Gr[Gr.length-1],xr=fr;xr<Vt+1;xr++){this.pdf.setPage(xr);var ar=xr===1?this.posY+this.margin[0]:this.margin[0],qr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mr=this.pdf.internal.pageSize.height-this.margin[2],hn=mr-this.margin[0],Vr=this.pdf.internal.pageSize.width-this.margin[1],Sr=Vr-this.margin[3],Jr=xr===1?0:qr+(xr-2)*hn;if(this.ctx.clip_path.length!==0){var jr=this.path;Lt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Lt,this.posX+this.margin[3],-1*Jr+ar),Ae.call(this,"fill",!0),this.path=jr}var Tr=Q([JSON.parse(JSON.stringify(Pt))],this.posX+this.margin[3],-Jr+ar+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(kt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(kt*ie.scale),$t=this.lineWidth,this.lineWidth=$t*ie.scale);var Nr=this.autoPaging!=="text";if(Nr||Tr.y+Tr.h<=mr){if(Nr||Tr.y>=ar&&Tr.x<=Vr){var br=Nr?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||Vr-Tr.x)[0],ot=Q([JSON.parse(JSON.stringify(Gt))],this.posX+this.margin[3],-Jr+ar+this.ctx.prevPageLastElemOffset)[0],le=Nr&&(xr>fr||xr<Vt)&&k.call(this);le&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sr,hn,null).clip().discardPath()),this.pdf.text(br,ot.x,ot.y,{angle:ie.angle,align:Ee,renderingMode:ie.renderingMode}),le&&this.pdf.restoreGraphicsState()}}else Tr.y<mr&&(this.ctx.prevPageLastElemOffset+=mr-Tr.y);ie.scale>=.01&&(this.pdf.setFontSize(kt),this.lineWidth=$t)}else ie.scale>=.01&&(kt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(kt*ie.scale),$t=this.lineWidth,this.lineWidth=$t*ie.scale),this.pdf.text(ie.text,Ze.x+this.posX,Ze.y+this.posY,{angle:ie.angle,align:Ee,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(kt),this.lineWidth=$t)},Ie=function(ie,Ee,Me,Ye){Me=Me||0,Ye=Ye||0,this.pdf.internal.out(r(ie+Me)+" "+i(Ee+Ye)+" l")},we=function(ie,Ee,Me){return this.pdf.lines(ie,Ee,Me,null,null)},nt=function(ie,Ee,Me,Ye,at,Ze,Ct,dt){this.pdf.internal.out([t(a(Me+ie)),t(u(Ye+Ee)),t(a(at+ie)),t(u(Ze+Ee)),t(a(Ct+ie)),t(u(dt+Ee)),"c"].join(" "))},rt=function(ie,Ee,Me,Ye){for(var at=2*Math.PI,Ze=Math.PI/2;Ee>Me;)Ee-=at;var Ct=Math.abs(Me-Ee);Ct<at&&Ye&&(Ct=at-Ct);for(var dt=[],Lt=Ye?-1:1,kt=Ee;Ct>1e-5;){var $t=kt+Lt*Math.min(Ct,Ze);dt.push(ct.call(this,ie,kt,$t)),Ct-=Math.abs($t-kt),kt=$t}return dt},ct=function(ie,Ee,Me){var Ye=(Me-Ee)/2,at=ie*Math.cos(Ye),Ze=ie*Math.sin(Ye),Ct=at,dt=-Ze,Lt=Ct*Ct+dt*dt,kt=Lt+Ct*at+dt*Ze,$t=4/3*(Math.sqrt(2*Lt*kt)-kt)/(Ct*Ze-dt*at),Gt=Ct-$t*dt,Pt=dt+$t*Ct,Ke=Gt,Gr=-Pt,wr=Ye+Ee,fr=Math.cos(wr),Vt=Math.sin(wr);return{x1:ie*Math.cos(Ee),y1:ie*Math.sin(Ee),x2:Gt*fr-Pt*Vt,y2:Gt*Vt+Pt*fr,x3:Ke*fr-Gr*Vt,y3:Ke*Vt+Gr*fr,x4:ie*Math.cos(Me),y4:ie*Math.sin(Me)}},Pe=function(ie){return 180*ie/Math.PI},Ve=function(ie,Ee,Me,Ye,at,Ze){var Ct=ie+.5*(Me-ie),dt=Ee+.5*(Ye-Ee),Lt=at+.5*(Me-at),kt=Ze+.5*(Ye-Ze),$t=Math.min(ie,at,Ct,Lt),Gt=Math.max(ie,at,Ct,Lt),Pt=Math.min(Ee,Ze,dt,kt),Ke=Math.max(Ee,Ze,dt,kt);return new o($t,Pt,Gt-$t,Ke-Pt)},mt=function(ie,Ee,Me,Ye,at,Ze,Ct,dt){var Lt,kt,$t,Gt,Pt,Ke,Gr,wr,fr,Vt,xr,ar,qr,mr,hn=Me-ie,Vr=Ye-Ee,Sr=at-Me,Jr=Ze-Ye,jr=Ct-at,Tr=dt-Ze;for(kt=0;kt<41;kt++)fr=(Gr=($t=ie+(Lt=kt/40)*hn)+Lt*((Pt=Me+Lt*Sr)-$t))+Lt*(Pt+Lt*(at+Lt*jr-Pt)-Gr),Vt=(wr=(Gt=Ee+Lt*Vr)+Lt*((Ke=Ye+Lt*Jr)-Gt))+Lt*(Ke+Lt*(Ze+Lt*Tr-Ke)-wr),kt==0?(xr=fr,ar=Vt,qr=fr,mr=Vt):(xr=Math.min(xr,fr),ar=Math.min(ar,Vt),qr=Math.max(qr,fr),mr=Math.max(mr,Vt));return new o(Math.round(xr),Math.round(ar),Math.round(qr-xr),Math.round(mr-ar))},gt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,Ee,Me=(ie=this.ctx.lineDash,Ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:Ee}));this.prevLineDash!==Me&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Me)}}})(Hr.API),function(e){var t=function(h){var o,g,w,B,I,P,b,N,k,H;for(g=[],w=0,B=(h+=o="\0\0\0\0".slice(h.length%4||4)).length;B>w;w+=4)(I=(h.charCodeAt(w)<<24)+(h.charCodeAt(w+1)<<16)+(h.charCodeAt(w+2)<<8)+h.charCodeAt(w+3))!==0?(P=(I=((I=((I=((I=(I-(H=I%85))/85)-(k=I%85))/85)-(N=I%85))/85)-(b=I%85))/85)%85,g.push(P+33,b+33,N+33,k+33,H+33)):g.push(122);return function(U,Q){for(var K=Q;K>0;K--)U.pop()}(g,o.length),String.fromCharCode.apply(String,g)+"~>"},r=function(h){var o,g,w,B,I,P=String,b="length",N=255,k="charCodeAt",H="slice",U="replace";for(h[H](-2),h=h[H](0,-2)[U](/\s/g,"")[U]("z","!!!!!"),w=[],B=0,I=(h+=o="uuuuu"[H](h[b]%5||5))[b];I>B;B+=5)g=52200625*(h[k](B)-33)+614125*(h[k](B+1)-33)+7225*(h[k](B+2)-33)+85*(h[k](B+3)-33)+(h[k](B+4)-33),w.push(N&g>>24,N&g>>16,N&g>>8,N&g);return function(Q,K){for(var Z=K;Z>0;Z--)Q.pop()}(w,o[b]),P.fromCharCode.apply(P,w)},i=function(h){return h.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(h){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((h=h.replace(/\s/g,"")).indexOf(">")!==-1&&(h=h.substr(0,h.indexOf(">"))),h.length%2&&(h+="0"),o.test(h)===!1)return"";for(var g="",w=0;w<h.length;w+=2)g+=String.fromCharCode("0x"+(h[w]+h[w+1]));return g},u=function(h){for(var o=new Uint8Array(h.length),g=h.length;g--;)o[g]=h.charCodeAt(g);return(o=c2(o)).reduce(function(w,B){return w+String.fromCharCode(B)},"")};e.processDataByFilters=function(h,o){var g=0,w=h||"",B=[];for(typeof(o=o||[])=="string"&&(o=[o]),g=0;g<o.length;g+=1)switch(o[g]){case"ASCII85Decode":case"/ASCII85Decode":w=r(w),B.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":w=t(w),B.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":w=a(w),B.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":w=i(w),B.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":w=u(w),B.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[g]+'" is not implemented')}return{data:w,reverseChain:B.reverse().join(" ")}}}(Hr.API),function(e){e.loadFile=function(t,r,i){return function(a,u,h){u=u!==!1,h=typeof h=="function"?h:function(){};var o=void 0;try{o=function(g,w,B){var I=new XMLHttpRequest,P=0,b=function(N){var k=N.length,H=[],U=String.fromCharCode;for(P=0;P<k;P+=1)H.push(U(255&N.charCodeAt(P)));return H.join("")};if(I.open("GET",g,!w),I.overrideMimeType("text/plain; charset=x-user-defined"),w===!1&&(I.onload=function(){I.status===200?B(b(this.responseText)):B(void 0)}),I.send(null),w&&I.status===200)return b(I.responseText)}(a,u,h)}catch{}return o}(t,r,i)},e.loadImageFile=e.loadFile}(Hr.API),function(e){function t(){return(An.html2canvas?Promise.resolve(An.html2canvas):ip(()=>Promise.resolve().then(()=>QZ),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(An.DOMPurify?Promise.resolve(An.DOMPurify):ip(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var i=function(o){var g=oi(o);return g==="undefined"?"undefined":g==="string"||o instanceof String?"string":g==="number"||o instanceof Number?"number":g==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":g==="object"?"object":"unknown"},a=function(o,g){var w=document.createElement(o);for(var B in g.className&&(w.className=g.className),g.innerHTML&&g.dompurify&&(w.innerHTML=g.dompurify.sanitize(g.innerHTML)),g.style)w.style[B]=g.style[B];return w},u=function o(g,w){for(var B=g.nodeType===3?document.createTextNode(g.nodeValue):g.cloneNode(!1),I=g.firstChild;I;I=I.nextSibling)w!==!0&&I.nodeType===1&&I.nodeName==="SCRIPT"||B.appendChild(o(I,w));return g.nodeType===1&&(g.nodeName==="CANVAS"?(B.width=g.width,B.height=g.height,B.getContext("2d").drawImage(g,0,0)):g.nodeName!=="TEXTAREA"&&g.nodeName!=="SELECT"||(B.value=g.value),B.addEventListener("load",function(){B.scrollTop=g.scrollTop,B.scrollLeft=g.scrollLeft},!0)),B},h=function o(g){var w=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),B=o.convert(Promise.resolve(),w);return(B=B.setProgress(1,o,1,[o])).set(g)};(h.prototype=Object.create(Promise.prototype)).constructor=h,h.convert=function(o,g){return o.__proto__=g||h.prototype,o},h.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},h.prototype.from=function(o,g){return this.then(function(){switch(g=g||function(w){switch(i(w)){case"string":return"string";case"element":return w.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),g){case"string":return this.then(r).then(function(w){return this.set({src:a("div",{innerHTML:o,dompurify:w})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},h.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},h.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},g=u(this.prop.src,this.opt.html2canvas.javascriptEnabled);g.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(g),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},h.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(g){var w=Object.assign({},this.opt.html2canvas);return delete w.onrendered,g(this.prop.container,w)}).then(function(g){(this.opt.html2canvas.onrendered||function(){})(g),this.prop.canvas=g,document.body.removeChild(this.prop.overlay)})},h.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(g){var w=this.opt.jsPDF,B=this.opt.fontFaces,I=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,P=Object.assign({async:!0,allowTaint:!0,scale:I,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete P.onrendered,w.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,w.context2d.posX=this.opt.x,w.context2d.posY=this.opt.y,w.context2d.margin=this.opt.margin,w.context2d.fontFaces=B,B)for(var b=0;b<B.length;++b){var N=B[b],k=N.src.find(function(H){return H.format==="truetype"});k&&w.addFont(k.url,N.ref.name,N.ref.style)}return P.windowHeight=P.windowHeight||0,P.windowHeight=P.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):P.windowHeight,w.context2d.save(!0),g(this.prop.container,P)}).then(function(g){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(g),this.prop.canvas=g,document.body.removeChild(this.prop.overlay)})},h.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},h.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},h.prototype.output=function(o,g,w){return(w=w||"pdf").toLowerCase()==="img"||w.toLowerCase()==="image"?this.outputImg(o,g):this.outputPdf(o,g)},h.prototype.outputPdf=function(o,g){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,g)})},h.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},h.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},h.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},h.prototype.set=function(o){if(i(o)!=="object")return this;var g=Object.keys(o||{}).map(function(w){if(w in h.template.prop)return function(){this.prop[w]=o[w]};switch(w){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[w]=o[w]}}},this);return this.then(function(){return this.thenList(g)})},h.prototype.get=function(o,g){return this.then(function(){var w=o in h.template.prop?this.prop[o]:this.opt[o];return g?g(w):w})},h.prototype.setMargin=function(o){return this.then(function(){switch(i(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},h.prototype.setPageSize=function(o){function g(w,B){return Math.floor(w*B/72*96)}return this.then(function(){(o=o||Hr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:g(o.inner.width,o.k),height:g(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},h.prototype.setProgress=function(o,g,w,B){return o!=null&&(this.progress.val=o),g!=null&&(this.progress.state=g),w!=null&&(this.progress.n=w),B!=null&&(this.progress.stack=B),this.progress.ratio=this.progress.val/this.progress.state,this},h.prototype.updateProgress=function(o,g,w,B){return this.setProgress(o?this.progress.val+o:null,g||null,w?this.progress.n+w:null,B?this.progress.stack.concat(B):null)},h.prototype.then=function(o,g){var w=this;return this.thenCore(o,g,function(B,I){return w.updateProgress(null,null,1,[B]),Promise.prototype.then.call(this,function(P){return w.updateProgress(null,B),P}).then(B,I).then(function(P){return w.updateProgress(1),P})})},h.prototype.thenCore=function(o,g,w){w=w||Promise.prototype.then;var B=this;o&&(o=o.bind(B)),g&&(g=g.bind(B));var I=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?B:h.convert(Object.assign({},B),Promise.prototype),P=w.call(I,o,g);return h.convert(P,B.__proto__)},h.prototype.thenExternal=function(o,g){return Promise.prototype.then.call(this,o,g)},h.prototype.thenList=function(o){var g=this;return o.forEach(function(w){g=g.thenCore(w)}),g},h.prototype.catch=function(o){o&&(o=o.bind(this));var g=Promise.prototype.catch.call(this,o);return h.convert(g,this)},h.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},h.prototype.error=function(o){return this.then(function(){throw new Error(o)})},h.prototype.using=h.prototype.set,h.prototype.saveAs=h.prototype.save,h.prototype.export=h.prototype.output,h.prototype.run=h.prototype.then,Hr.getPageSize=function(o,g,w){if(oi(o)==="object"){var B=o;o=B.orientation,g=B.unit||g,w=B.format||w}g=g||"mm",w=w||"a4",o=(""+(o||"P")).toLowerCase();var I,P=(""+w).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(g){case"pt":I=1;break;case"mm":I=72/25.4;break;case"cm":I=72/2.54;break;case"in":I=72;break;case"px":I=.75;break;case"pc":case"em":I=12;break;case"ex":I=6;break;default:throw"Invalid unit: "+g}var N,k=0,H=0;if(b.hasOwnProperty(P))k=b[P][1]/I,H=b[P][0]/I;else try{k=w[1],H=w[0]}catch{throw new Error("Invalid format: "+w)}if(o==="p"||o==="portrait")o="p",H>k&&(N=H,H=k,k=N);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",k>H&&(N=H,H=k,k=N)}return{width:H,height:k,unit:g,k:I,orientation:o}},e.html=function(o,g){(g=g||{}).callback=g.callback||function(){},g.html2canvas=g.html2canvas||{},g.html2canvas.canvas=g.html2canvas.canvas||this.canvas,g.jsPDF=g.jsPDF||this,g.fontFaces=g.fontFaces?g.fontFaces.map(cx):null;var w=new h(g);return g.worker?w:w.from(o).doCallback()}}(Hr.API),Hr.API.addJS=function(e){return fF=e,this.internal.events.subscribe("postPutResources",function(){gy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),dF=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gy!==void 0&&dF!==void 0&&this.internal.out("/Names <</JavaScript "+gy+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),u=0;u<a.length;u++){var h=a[u],o=i.exec(h);if(o!=null){var g=o[1];r.internal.newObjectDeferredBegin(g,!1)}r.internal.write(h)}if(this.outline.createNamedDestinations){var w=this.internal.pages.length,B=[];for(u=0;u<w;u++){var I=r.internal.newObject();B.push(I);var P=r.internal.getPageInfo(u+1);r.internal.write("<< /D["+P.objId+" 0 R /XYZ null null null]>> endobj")}var b=r.internal.newObject();for(r.internal.write("<< /Names [ "),u=0;u<B.length;u++)r.internal.write("(page_"+(u+1)+")"+B[u]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+b+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,a,u){var h={title:a,options:u,children:[]};return i==null&&(i=this.root),i.children.push(h),h},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<i.children.length;u++){var h=i.children[u];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(i)),u>0&&this.line("/Prev "+this.makeRef(i.children[u-1])),u<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[u+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var o=this.count=this.count_r({count:0},h);if(o>0&&this.line("/Count "+o),h.options&&h.options.pageNumber){var g=r.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var w=0;w<i.children.length;w++)this.renderItems(i.children[w])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,a){for(var u=0;u<a.children.length;u++)i.count++,this.count_r(i,a.children[u]);return i.count}}])}(Hr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,i,a,u,h,o){var g,w=this.decode.DCT_DECODE,B=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=h||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,g=function(I){for(var P,b=256*I.charCodeAt(4)+I.charCodeAt(5),N=I.length,k={width:0,height:0,numcomponents:1},H=4;H<N;H+=2){if(H+=b,t.indexOf(I.charCodeAt(H+1))!==-1){P=256*I.charCodeAt(H+5)+I.charCodeAt(H+6),k={width:256*I.charCodeAt(H+7)+I.charCodeAt(H+8),height:P,numcomponents:I.charCodeAt(H+9)};break}b=256*I.charCodeAt(H+2)+I.charCodeAt(H+3)}return k}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),g.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}B={data:r,width:g.width,height:g.height,colorSpace:o,bitsPerComponent:8,filter:w,index:i,alias:a}}return B}}(Hr.API),Hr.API.processPNG=function(e,t,r,i){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,u=VY(e,{checkCrc:!0}),h=u.width,o=u.height,g=u.channels,w=u.palette,B=u.depth;a=w&&g===1?function(ge){for(var me=ge.width,ae=ge.height,Le=ge.data,re=ge.palette,he=ge.depth,Ie=!1,we=[],nt=[],rt=void 0,ct=!1,Pe=0,Ve=0;Ve<re.length;Ve++){var mt=vI(re[Ve],4),gt=mt[0],ie=mt[1],Ee=mt[2],Me=mt[3];we.push(gt,ie,Ee),Me!=null&&(Me===0?(Pe++,nt.length<1&&nt.push(Ve)):Me<255&&(ct=!0))}if(ct||Pe>1){Ie=!0,nt=void 0;var Ye=me*ae;rt=new Uint8Array(Ye);for(var at=new DataView(Le.buffer),Ze=0;Ze<Ye;Ze++){var Ct=hx(at,Ze,he),dt=vI(re[Ct],4)[3];rt[Ze]=dt}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:Le,alphaBytes:rt,needSMask:Ie,palette:we,mask:nt}}(u):g===2||g===4?function(ge){for(var me=ge.data,ae=ge.width,Le=ge.height,re=ge.channels,he=ge.depth,Ie=re===2?"DeviceGray":"DeviceRGB",we=re-1,nt=ae*Le,rt=we,ct=nt*rt,Pe=1*nt,Ve=Math.ceil(ct*he/8),mt=Math.ceil(Pe*he/8),gt=new Uint8Array(Ve),ie=new Uint8Array(mt),Ee=new DataView(me.buffer),Me=new DataView(gt.buffer),Ye=new DataView(ie.buffer),at=!1,Ze=0;Ze<nt;Ze++){for(var Ct=Ze*re,dt=0;dt<rt;dt++)bF(Me,hx(Ee,Ct+dt,he),Ze*rt+dt,he);var Lt=hx(Ee,Ct+rt,he);Lt<(1<<he)-1&&(at=!0),bF(Ye,Lt,1*Ze,he)}return{colorSpace:Ie,colorsPerPixel:we,colorBytes:gt,alphaBytes:ie,needSMask:at}}(u):function(ge){var me=ge.data,ae=ge.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ae,colorsPerPixel:ae==="DeviceGray"?1:3,colorBytes:me instanceof Uint8Array?me:new Uint8Array(me.buffer),needSMask:!1}}(u);var I,P,b,N=a,k=N.colorSpace,H=N.colorsPerPixel,U=N.colorBytes,Q=N.alphaBytes,K=N.needSMask,Z=N.palette,Ae=N.mask,fe=null;return i!==Hr.API.image_compression.NONE&&typeof c2=="function"?(fe=function(ge){var me;switch(ge){case Hr.API.image_compression.FAST:me=11;break;case Hr.API.image_compression.MEDIUM:me=13;break;case Hr.API.image_compression.SLOW:me=14;break;default:me=12}return me}(i),I=this.decode.FLATE_DECODE,P="/Predictor ".concat(fe," "),e=yF(U,h*H,H,i),K&&(b=yF(Q,h,1,i))):(I=void 0,P="",e=U,K&&(b=Q)),P+="/Colors ".concat(H," /BitsPerComponent ").concat(B," /Columns ").concat(h),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:r,data:e,index:t,filter:I,decodeParameters:P,transparency:Ae,palette:Z,sMask:b,predictor:fe,width:h,height:o,bitsPerComponent:B,colorSpace:k}}},function(e){e.processGIF89A=function(t,r,i,a){var u=new uJ(t),h=u.width,o=u.height,g=[];u.decodeAndBlitFrameRGBA(0,g);var w={data:g,width:h,height:o},B=new dx(100).encode(w,100);return e.processJPEG.call(this,B,r,i,a)},e.processGIF87A=e.processGIF89A}(Hr.API),wA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:i,blue:r,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wA.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){vi.log("bit decode error:"+r)}},wA.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var u=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var g=this.palette[u>>7-o&1];this.data[h+4*o]=g.blue,this.data[h+4*o+1]=g.green,this.data[h+4*o+2]=g.red,this.data[h+4*o+3]=255}r!==0&&(this.pos+=4-r)}},wA.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var u=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+2*a*4,o=u>>4,g=15&u,w=this.palette[o];if(this.data[h]=w.blue,this.data[h+1]=w.green,this.data[h+2]=w.red,this.data[h+3]=255,2*a+1>=this.width)break;w=this.palette[g],this.data[h+4]=w.blue,this.data[h+4+1]=w.green,this.data[h+4+2]=w.red,this.data[h+4+3]=255}t!==0&&(this.pos+=4-t)}},wA.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*i;if(a<this.palette.length){var h=this.palette[a];this.data[u]=h.red,this.data[u+1]=h.green,this.data[u+2]=h.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}e!==0&&(this.pos+=4-e)}},wA.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(u&t)/t*255|0,o=(u>>5&t)/t*255|0,g=(u>>10&t)/t*255|0,w=u>>15?255:0,B=i*this.width*4+4*a;this.data[B]=g,this.data[B+1]=o,this.data[B+2]=h,this.data[B+3]=w}this.pos+=e}},wA.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,u=0;u<this.width;u++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(h&t)/t*255|0,g=(h>>5&r)/r*255|0,w=(h>>11)/t*255|0,B=a*this.width*4+4*u;this.data[B]=w,this.data[B+1]=g,this.data[B+2]=o,this.data[B+3]=255}this.pos+=e}},wA.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*r;this.data[h]=u,this.data[h+1]=a,this.data[h+2]=i,this.data[h+3]=255}this.pos+=this.width%4}},wA.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=u,this.data[o+1]=a,this.data[o+2]=i,this.data[o+3]=h}},wA.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,i,a){var u=new wA(t,!1),h=u.width,o=u.height,g={data:u.getData(),width:h,height:o},w=new dx(100).encode(g,100);return e.processJPEG.call(this,w,r,i,a)}}(Hr.API),CF.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,i,a){var u=new CF(t),h=u.width,o=u.height,g={data:u.getData(),width:h,height:o},w=new dx(100).encode(g,100);return e.processJPEG.call(this,w,r,i,a)}}(Hr.API),Hr.API.processRGBA=function(e,t,r){for(var i=e.data,a=i.length,u=new Uint8Array(a/4*3),h=new Uint8Array(a/4),o=0,g=0,w=0;w<a;w+=4){var B=i[w],I=i[w+1],P=i[w+2],b=i[w+3];u[o++]=B,u[o++]=I,u[o++]=P,h[g++]=b}var N=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:N,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Hr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},If=Hr.API,yy=If.getCharWidthsArray=function(e,t){var r,i,a=(t=t||{}).font||this.internal.getFont(),u=t.fontSize||this.internal.getFontSize(),h=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,g=o.fof?o.fof:1,w=t.kerning?t.kerning:a.metadata.Unicode.kerning,B=w.fof?w.fof:1,I=t.doKerning!==!1,P=0,b=e.length,N=0,k=o[0]||g,H=[];for(r=0;r<b;r++)i=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?H.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+h*(1e3/u)||0)/1e3):(P=I&&oi(w[i])==="object"&&!isNaN(parseInt(w[i][N],10))?w[i][N]/B:0,H.push((o[i]||k)/g+P)),N=i;return H},pF=If.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return If.processArabic&&(e=If.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,r,a)/r:yy.apply(this,arguments).reduce(function(u,h){return u+h},0)},mF=function(e,t,r,i){for(var a=[],u=0,h=e.length,o=0;u!==h&&o+t[u]<r;)o+=t[u],u++;a.push(e.slice(0,u));var g=u;for(o=0;u!==h;)o+t[u]>i&&(a.push(e.slice(g,u)),o=0,g=u),o+=t[u],u++;return g!==u&&a.push(e.slice(g,u)),a},gF=function(e,t,r){r||(r={});var i,a,u,h,o,g,w,B=[],I=[B],P=r.textIndent||0,b=0,N=0,k=e.split(" "),H=yy.apply(this,[" ",r])[0];if(g=r.lineIndent===-1?k[0].length+2:r.lineIndent||0){var U=Array(g).join(" "),Q=[];k.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?Q=Q.concat(Z.map(function(Ae,fe){return(fe&&Ae.length?`
`:"")+Ae})):Q.push(Z[0])}),k=Q,g=pF.apply(this,[U,r])}for(u=0,h=k.length;u<h;u++){var K=0;if(i=k[u],g&&i[0]==`
`&&(i=i.substr(1),K=1),P+b+(N=(a=yy.apply(this,[i,r])).reduce(function(Z,Ae){return Z+Ae},0))>t||K){if(N>t){for(o=mF.apply(this,[i,a,t-(P+b),t]),B.push(o.shift()),B=[o.pop()];o.length;)I.push([o.shift()]);N=a.slice(i.length-(B[0]?B[0].length:0)).reduce(function(Z,Ae){return Z+Ae},0)}else B=[i];I.push(B),P=N+g,b=H}else B.push(i),P+=b+N,b=H}return w=g?function(Z,Ae){return(Ae?U:"")+Z.join(" ")}:function(Z){return Z.join(" ")},I.map(w)},If.splitTextToSize=function(e,t,r){var i,a=(r=r||{}).fontSize||this.internal.getFontSize(),u=(function(B){if(B.widths&&B.kerning)return{widths:B.widths,kerning:B.kerning};var I=this.internal.getFont(B.fontName,B.fontStyle),P="Unicode";return I.metadata[P]?{widths:I.metadata[P].widths||{0:1},kerning:I.metadata[P].kerning||{}}:{font:I.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var h=1*this.internal.scaleFactor*t/a;u.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,u.lineIndent=r.lineIndent;var o,g,w=[];for(o=0,g=i.length;o<g;o++)w=w.concat(gF.apply(this,[i[o],h,u]));return w},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",i={},a={},u=0;u<16;u++)i[r[u]]=t[u],a[t[u]]=r[u];var h=function(P){return"0x"+parseInt(P,10).toString(16)},o=e.__fontmetrics__.compress=function(P){var b,N,k,H,U=["{"];for(var Q in P){if(b=P[Q],isNaN(parseInt(Q,10))?N="'"+Q+"'":(Q=parseInt(Q,10),N=(N=h(Q).slice(2)).slice(0,-1)+a[N.slice(-1)]),typeof b=="number")b<0?(k=h(b).slice(3),H="-"):(k=h(b).slice(2),H=""),k=H+k.slice(0,-1)+a[k.slice(-1)];else{if(oi(b)!=="object")throw new Error("Don't know what to do with value type "+oi(b)+".");k=o(b)}U.push(N+k)}return U.push("}"),U.join("")},g=e.__fontmetrics__.uncompress=function(P){if(typeof P!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,N,k,H,U={},Q=1,K=U,Z=[],Ae="",fe="",ge=P.length-1,me=1;me<ge;me+=1)(H=P[me])=="'"?b?(k=b.join(""),b=void 0):b=[]:b?b.push(H):H=="{"?(Z.push([K,k]),K={},k=void 0):H=="}"?((N=Z.pop())[0][N[1]]=K,k=void 0,K=N[0]):H=="-"?Q=-1:k===void 0?i.hasOwnProperty(H)?(Ae+=i[H],k=parseInt(Ae,16)*Q,Q=1,Ae=""):Ae+=H:i.hasOwnProperty(H)?(fe+=i[H],K[k]=parseInt(fe,16)*Q,Q=1,k=void 0,fe=""):fe+=H;return U},w={codePages:["WinAnsiEncoding"],WinAnsiEncoding:g("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},B={Unicode:{Courier:w,"Courier-Bold":w,"Courier-BoldOblique":w,"Courier-Oblique":w,Helvetica:w,"Helvetica-Bold":w,"Helvetica-BoldOblique":w,"Helvetica-Oblique":w,"Times-Roman":w,"Times-Bold":w,"Times-BoldItalic":w,"Times-Italic":w}},I={Unicode:{"Courier-Oblique":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":g("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":g("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":g("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:g("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:g("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":g("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:g("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":g("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":g("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":g("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(P){var b=P.font,N=I.Unicode[b.postScriptName];N&&(b.metadata.Unicode={},b.metadata.Unicode.widths=N.widths,b.metadata.Unicode.kerning=N.kerning);var k=B.Unicode[b.postScriptName];k&&(b.metadata.Unicode.encoding=k,b.encoding=k.codePages[0])}])}(Hr.API),function(e){var t=function(r){for(var i=r.length,a=new Uint8Array(i),u=0;u<i;u++)a[u]=r.charCodeAt(u);return a};e.API.events.push(["addFont",function(r){var i=void 0,a=r.font,u=r.instance;if(!a.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=u.existsFileInVFS(a.postScriptName)===!1?u.loadFile(a.postScriptName):u.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(h,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Hy(o)),h.metadata=e.API.TTFFont.open(o),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(a,i)}}])}(Hr),Hr.API.addSvgAsImage=function(e,t,r,i,a,u,h,o){if(isNaN(t)||isNaN(r))throw vi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw vi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=i,g.height=a;var w=g.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,g.width,g.height);var B={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},I=this;return(An.canvg?Promise.resolve(An.canvg):ip(()=>import("./index.es-CbEycCCV.js"),[])).catch(function(P){return Promise.reject(new Error("Could not load canvg: "+P))}).then(function(P){return P.default?P.default:P}).then(function(P){return P.fromString(w,e,B)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(B)}).then(function(){I.addImage(g.toDataURL("image/jpeg",1),t,r,i,a,h,o)})},Hr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(t,r);return this},Hr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var i,a,u,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(h),g=[],w=0,B=0,I=0;function P(N,k){var H,U=!1;for(H=0;H<N.length;H+=1)N[H]===k&&(U=!0);return U}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var b=o.length;for(I=0;I<b;I+=1)r[o[I]].value=r[o[I]].defaultValue,r[o[I]].explicitSet=!1}if(oi(e)==="object"){for(a in e)if(u=e[a],P(o,a)&&u!==void 0){if(r[a].type==="boolean"&&typeof u=="boolean")r[a].value=u;else if(r[a].type==="name"&&P(r[a].valueSet,u))r[a].value=u;else if(r[a].type==="integer"&&Number.isInteger(u))r[a].value=u;else if(r[a].type==="array"){for(w=0;w<u.length;w+=1)if(i=!0,u[w].length===1&&typeof u[w][0]=="number")g.push(String(u[w]-1));else if(u[w].length>1){for(B=0;B<u[w].length;B+=1)typeof u[w][B]!="number"&&(i=!1);i===!0&&g.push([u[w][0]-1,u[w][1]-1].join(" "))}r[a].value="["+g.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,k=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?k.push("/"+N+" /"+r[N].value):k.push("/"+N+" "+r[N].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(i)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),w=u.length+h.length+o.length+a.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+w+" >>"),this.internal.write("stream"),this.internal.write(a+u+h+o+g),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Hr.API),function(e){var t=e.API,r=t.pdfEscape16=function(u,h){for(var o,g=h.metadata.Unicode.widths,w=["","0","00","000","0000"],B=[""],I=0,P=u.length;I<P;++I){if(o=h.metadata.characterToGlyph(u.charCodeAt(I)),h.metadata.glyIdsUsed.push(o),h.metadata.toUnicode[o]=u.charCodeAt(I),g.indexOf(o)==-1&&(g.push(o),g.push([parseInt(h.metadata.widthOfGlyph(o),10)])),o=="0")return B.join("");o=o.toString(16),B.push(w[4-o.length],o)}return B.join("")},i=function(u){var h,o,g,w,B,I,P;for(B=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],I=0,P=(o=Object.keys(u).sort(function(b,N){return b-N})).length;I<P;I++)h=o[I],g.length>=100&&(B+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),u[h]!==void 0&&u[h]!==null&&typeof u[h].toString=="function"&&(w=("0000"+u[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),g.push("<"+h+"><"+w+">"));return g.length&&(B+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),B+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(u){(function(h){var o=h.font,g=h.out,w=h.newObject,B=h.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var I=o.metadata.Unicode.widths,P=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),b="",N=0;N<P.length;N++)b+=String.fromCharCode(P[N]);var k=w();B({data:b,addLength1:!0,objectId:k}),g("endobj");var H=w();B({data:i(o.metadata.toUnicode),addLength1:!0,objectId:H}),g("endobj");var U=w();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+Mf(o.fontName)),g("/FontFile2 "+k+" 0 R"),g("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),g("/Flags "+o.metadata.flags),g("/StemV "+o.metadata.stemV),g("/ItalicAngle "+o.metadata.italicAngle),g("/Ascent "+o.metadata.ascender),g("/Descent "+o.metadata.decender),g("/CapHeight "+o.metadata.capHeight),g(">>"),g("endobj");var Q=w();g("<<"),g("/Type /Font"),g("/BaseFont /"+Mf(o.fontName)),g("/FontDescriptor "+U+" 0 R"),g("/W "+e.API.PDFObject.convert(I)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+o.encoding+")"),g(">>"),g(">>"),g("endobj"),o.objectNumber=w(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+H+" 0 R"),g("/BaseFont /"+Mf(o.fontName)),g("/Encoding /"+o.encoding),g("/DescendantFonts ["+Q+" 0 R]"),g(">>"),g("endobj"),o.isAlreadyPutted=!0}})(u)}]),t.events.push(["putFont",function(u){(function(h){var o=h.font,g=h.out,w=h.newObject,B=h.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var I=o.metadata.rawData,P="",b=0;b<I.length;b++)P+=String.fromCharCode(I[b]);var N=w();B({data:P,addLength1:!0,objectId:N}),g("endobj");var k=w();B({data:i(o.metadata.toUnicode),addLength1:!0,objectId:k}),g("endobj");var H=w();g("<<"),g("/Descent "+o.metadata.decender),g("/CapHeight "+o.metadata.capHeight),g("/StemV "+o.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+N+" 0 R"),g("/Flags 96"),g("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),g("/FontName /"+Mf(o.fontName)),g("/ItalicAngle "+o.metadata.italicAngle),g("/Ascent "+o.metadata.ascender),g(">>"),g("endobj"),o.objectNumber=w();for(var U=0;U<o.metadata.hmtx.widths.length;U++)o.metadata.hmtx.widths[U]=parseInt(o.metadata.hmtx.widths[U]*(1e3/o.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Mf(o.fontName)+"/FontDescriptor "+H+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),g("endobj"),o.isAlreadyPutted=!0}})(u)}]);var a=function(u){var h,o=u.text||"",g=u.x,w=u.y,B=u.options||{},I=u.mutex||{},P=I.pdfEscape,b=I.activeFontKey,N=I.fonts,k=b,H="",U=0,Q="",K=N[k].encoding;if(N[k].encoding!=="Identity-H")return{text:o,x:g,y:w,options:B,mutex:I};for(Q=o,k=b,Array.isArray(o)&&(Q=o[0]),U=0;U<Q.length;U+=1)N[k].metadata.hasOwnProperty("cmap")&&(h=N[k].metadata.cmap.unicode.codeMap[Q[U].charCodeAt(0)]),h||Q[U].charCodeAt(0)<256&&N[k].metadata.hasOwnProperty("Unicode")?H+=Q[U]:H+="";var Z="";return parseInt(k.slice(1))<14||K==="WinAnsiEncoding"?Z=P(H,k).split("").map(function(Ae){return Ae.charCodeAt(0).toString(16)}).join(""):K==="Identity-H"&&(Z=r(H,N[k])),I.isHex=!0,{text:Z,x:g,y:w,options:B,mutex:I}};t.events.push(["postProcessText",function(u){var h=u.text||"",o=[],g={text:h,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(h)){var w=0;for(w=0;w<h.length;w+=1)Array.isArray(h[w])&&h[w].length===3?o.push([a(Object.assign({},g,{text:h[w][0]})).text,h[w][1],h[w][2]]):o.push(a(Object.assign({},g,{text:h[w]})).text);u.text=o}else u.text=a(Object.assign({},g,{text:h})).text}])}(Hr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,i){return t.call(this),this.internal.vFS[r]=i,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Hr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var a,u,h,o,g,w,B,I=t,P=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},H=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],U=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Q=!1,K=0;this.__bidiEngine__={};var Z=function(re){var he=re.charCodeAt(),Ie=he>>8,we=k[Ie];return we!==void 0?I[256*we+(255&he)]:Ie===252||Ie===253?"AL":U.test(Ie)?"L":Ie===8?"R":"N"},Ae=function(re){for(var he,Ie=0;Ie<re.length;Ie++){if((he=Z(re.charAt(Ie)))==="L")return!1;if(he==="R")return!0}return!1},fe=function(re,he,Ie,we){var nt,rt,ct,Pe,Ve=he[we];switch(Ve){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Q=!1;break;case"N":case"AN":break;case"EN":Q&&(Ve="AN");break;case"AL":Q=!0,Ve="R";break;case"WS":case"BN":Ve="N";break;case"CS":we<1||we+1>=he.length||(nt=Ie[we-1])!=="EN"&&nt!=="AN"||(rt=he[we+1])!=="EN"&&rt!=="AN"?Ve="N":Q&&(rt="AN"),Ve=rt===nt?rt:"N";break;case"ES":Ve=(nt=we>0?Ie[we-1]:"B")==="EN"&&we+1<he.length&&he[we+1]==="EN"?"EN":"N";break;case"ET":if(we>0&&Ie[we-1]==="EN"){Ve="EN";break}if(Q){Ve="N";break}for(ct=we+1,Pe=he.length;ct<Pe&&he[ct]==="ET";)ct++;Ve=ct<Pe&&he[ct]==="EN"?"EN":"N";break;case"NSM":if(h&&!o){for(Pe=he.length,ct=we+1;ct<Pe&&he[ct]==="NSM";)ct++;if(ct<Pe){var mt=re[we],gt=mt>=1425&&mt<=2303||mt===64286;if(nt=he[ct],gt&&(nt==="R"||nt==="AL")){Ve="R";break}}}Ve=we<1||(nt=he[we-1])==="B"?"N":Ie[we-1];break;case"B":Q=!1,a=!0,Ve=K;break;case"S":u=!0,Ve="N"}return Ve},ge=function(re,he,Ie){var we=re.split("");return Ie&&me(we,Ie,{hiLevel:K}),we.reverse(),he&&he.reverse(),we.join("")},me=function(re,he,Ie){var we,nt,rt,ct,Pe,Ve=-1,mt=re.length,gt=0,ie=[],Ee=K?b:P,Me=[];for(Q=!1,a=!1,u=!1,nt=0;nt<mt;nt++)Me[nt]=Z(re[nt]);for(rt=0;rt<mt;rt++){if(Pe=gt,ie[rt]=fe(re,Me,ie,rt),we=240&(gt=Ee[Pe][N[ie[rt]]]),gt&=15,he[rt]=ct=Ee[gt][5],we>0)if(we===16){for(nt=Ve;nt<rt;nt++)he[nt]=1;Ve=-1}else Ve=-1;if(Ee[gt][6])Ve===-1&&(Ve=rt);else if(Ve>-1){for(nt=Ve;nt<rt;nt++)he[nt]=ct;Ve=-1}Me[rt]==="B"&&(he[rt]=0),Ie.hiLevel|=ct}u&&function(Ye,at,Ze){for(var Ct=0;Ct<Ze;Ct++)if(Ye[Ct]==="S"){at[Ct]=K;for(var dt=Ct-1;dt>=0&&Ye[dt]==="WS";dt--)at[dt]=K}}(Me,he,mt)},ae=function(re,he,Ie,we,nt){if(!(nt.hiLevel<re)){if(re===1&&K===1&&!a)return he.reverse(),void(Ie&&Ie.reverse());for(var rt,ct,Pe,Ve,mt=he.length,gt=0;gt<mt;){if(we[gt]>=re){for(Pe=gt+1;Pe<mt&&we[Pe]>=re;)Pe++;for(Ve=gt,ct=Pe-1;Ve<ct;Ve++,ct--)rt=he[Ve],he[Ve]=he[ct],he[ct]=rt,Ie&&(rt=Ie[Ve],Ie[Ve]=Ie[ct],Ie[ct]=rt);gt=Pe}gt++}}},Le=function(re,he,Ie){var we=re.split(""),nt={hiLevel:K};return Ie||(Ie=[]),me(we,Ie,nt),function(rt,ct,Pe){if(Pe.hiLevel!==0&&B)for(var Ve,mt=0;mt<rt.length;mt++)ct[mt]===1&&(Ve=H.indexOf(rt[mt]))>=0&&(rt[mt]=H[Ve+1])}(we,Ie,nt),ae(2,we,he,Ie,nt),ae(1,we,he,Ie,nt),we.join("")};return this.__bidiEngine__.doBidiReorder=function(re,he,Ie){if(function(nt,rt){if(rt)for(var ct=0;ct<nt.length;ct++)rt[ct]=ct;o===void 0&&(o=Ae(nt)),w===void 0&&(w=Ae(nt))}(re,he),h||!g||w)if(h&&g&&o^w)K=o?1:0,re=ge(re,he,Ie);else if(!h&&g&&w)K=o?1:0,re=Le(re,he,Ie),re=ge(re,he);else if(!h||o||g||w){if(h&&!g&&o^w)re=ge(re,he),o?(K=0,re=Le(re,he,Ie)):(K=1,re=Le(re,he,Ie),re=ge(re,he));else if(h&&o&&!g&&w)K=1,re=Le(re,he,Ie),re=ge(re,he);else if(!h&&!g&&o^w){var we=B;o?(K=1,re=Le(re,he,Ie),K=0,B=!1,re=Le(re,he,Ie),B=we):(K=0,re=Le(re,he,Ie),re=ge(re,he),K=1,B=!1,re=Le(re,he,Ie),B=we,re=ge(re,he))}}else K=0,re=Le(re,he,Ie);else K=o?1:0,re=Le(re,he,Ie);return re},this.__bidiEngine__.setOptions=function(re){re&&(h=re.isInputVisual,g=re.isOutputVisual,o=re.isInputRtl,w=re.isOutputRtl,B=re.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var a=i.text;i.x,i.y;var u=i.options||{};i.mutex,u.lang;var h=[];if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,r.setOptions(u),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(h=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?h.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):h.push([r.doBidiReorder(a[o])]);i.text=h}else i.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Hr),Hr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new kh(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new SJ(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new hJ(this.contents),this.head=new fJ(this),this.name=new vJ(this),this.cmap=new d6(this),this.toUnicode={},this.hhea=new pJ(this),this.maxp=new _J(this),this.hmtx=new wJ(this),this.post=new gJ(this),this.os2=new mJ(this),this.loca=new CJ(this),this.glyf=new xJ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,i,a,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,o,g,w;for(w=[],h=0,o=(g=this.bbox).length;h<o;h++)t=g[h],w.push(Math.round(t*this.scaleFactor));return w}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,i){var a,u,h,o;for(h=0,u=0,o=(t=""+t).length;0<=o?u<o:u>o;u=0<=o?++u:--u)a=t.charCodeAt(u),h+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/r)||0;return h*(r/1e3)},e.prototype.lineHeight=function(t,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var QA,kh=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,i;for(i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var r,i,a;for(a=[],r=0,i=t.length;0<=i?r<i:r>i;r=0<=i?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,i,a,u,h,o,g;return t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),u=this.readByte(),h=this.readByte(),o=this.readByte(),g=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^u)+65536*(255^h)+256*(255^o)+(255^g)+1):72057594037927940*t+281474976710656*r+1099511627776*i+4294967296*a+16777216*u+65536*h+256*o+g},e.prototype.writeLongLong=function(t){var r,i;return r=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,i;for(r=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)r.push(this.readByte());return r},e.prototype.write=function(t){var r,i,a,u;for(u=[],i=0,a=t.length;i<a;i++)r=t[i],u.push(this.writeByte(r));return u},e}(),hJ=function(){var e;function t(r){var i,a,u;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,u=this.tableCount;0<=u?a<u:a>u;a=0<=u?++a:--a)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(r){var i,a,u,h,o,g,w,B,I,P,b,N,k;for(k in b=Object.keys(r).length,g=Math.log(2),I=16*Math.floor(Math.log(b)/g),h=Math.floor(I/g),B=16*b-I,(a=new kh).writeInt(this.scalarType),a.writeShort(b),a.writeShort(I),a.writeShort(h),a.writeShort(B),u=16*b,w=a.pos+u,o=null,N=[],r)for(P=r[k],a.writeString(k),a.writeInt(e(P)),a.writeInt(w),a.writeInt(P.length),N=N.concat(P),k==="head"&&(o=w),w+=P.length;w%4;)N.push(0),w++;return a.write(N),i=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(i),a.data},e=function(r){var i,a,u,h;for(r=f6.call(r);r.length%4;)r.push(0);for(u=new kh(r),a=0,i=0,h=r.length;i<h;i=i+=4)a+=u.readUInt32();return 4294967295&a},t}(),dJ={}.hasOwnProperty,Fc=function(e,t){for(var r in t)dJ.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};QA=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var fJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new kh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),SF=function(){function e(t,r){var i,a,u,h,o,g,w,B,I,P,b,N,k,H,U,Q,K;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),I=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=t.readByte();break;case 4:for(b=t.readUInt16(),P=b/2,t.pos+=6,u=function(){var Z,Ae;for(Ae=[],g=Z=0;0<=P?Z<P:Z>P;g=0<=P?++Z:--Z)Ae.push(t.readUInt16());return Ae}(),t.pos+=2,k=function(){var Z,Ae;for(Ae=[],g=Z=0;0<=P?Z<P:Z>P;g=0<=P?++Z:--Z)Ae.push(t.readUInt16());return Ae}(),w=function(){var Z,Ae;for(Ae=[],g=Z=0;0<=P?Z<P:Z>P;g=0<=P?++Z:--Z)Ae.push(t.readUInt16());return Ae}(),B=function(){var Z,Ae;for(Ae=[],g=Z=0;0<=P?Z<P:Z>P;g=0<=P?++Z:--Z)Ae.push(t.readUInt16());return Ae}(),a=(this.length-t.pos+this.offset)/2,o=function(){var Z,Ae;for(Ae=[],g=Z=0;0<=a?Z<a:Z>a;g=0<=a?++Z:--Z)Ae.push(t.readUInt16());return Ae}(),g=U=0,K=u.length;U<K;g=++U)for(H=u[g],i=Q=N=k[g];N<=H?Q<=H:Q>=H;i=N<=H?++Q:--Q)B[g]===0?h=i+w[g]:(h=o[B[g]/2+(i-N)-(P-g)]||0)!==0&&(h+=w[g]),this.codeMap[i]=65535&h}t.pos=I}return e.encode=function(t,r){var i,a,u,h,o,g,w,B,I,P,b,N,k,H,U,Q,K,Z,Ae,fe,ge,me,ae,Le,re,he,Ie,we,nt,rt,ct,Pe,Ve,mt,gt,ie,Ee,Me,Ye,at,Ze,Ct,dt,Lt,kt,$t;switch(we=new kh,h=Object.keys(t).sort(function(Gt,Pt){return Gt-Pt}),r){case"macroman":for(k=0,H=function(){var Gt=[];for(N=0;N<256;++N)Gt.push(0);return Gt}(),Q={0:0},u={},nt=0,Ve=h.length;nt<Ve;nt++)Q[dt=t[a=h[nt]]]==null&&(Q[dt]=++k),u[a]={old:t[a],new:Q[t[a]]},H[a]=Q[t[a]];return we.writeUInt16(1),we.writeUInt16(0),we.writeUInt32(12),we.writeUInt16(0),we.writeUInt16(262),we.writeUInt16(0),we.write(H),{charMap:u,subtable:we.data,maxGlyphID:k+1};case"unicode":for(he=[],I=[],K=0,Q={},i={},U=w=null,rt=0,mt=h.length;rt<mt;rt++)Q[Ae=t[a=h[rt]]]==null&&(Q[Ae]=++K),i[a]={old:Ae,new:Q[Ae]},o=Q[Ae]-a,U!=null&&o===w||(U&&I.push(U),he.push(a),w=o),U=a;for(U&&I.push(U),I.push(65535),he.push(65535),Le=2*(ae=he.length),me=2*Math.pow(Math.log(ae)/Math.LN2,2),P=Math.log(me/2)/Math.LN2,ge=2*ae-me,g=[],fe=[],b=[],N=ct=0,gt=he.length;ct<gt;N=++ct){if(re=he[N],B=I[N],re===65535){g.push(0),fe.push(0);break}if(re-(Ie=i[re].new)>=32768)for(g.push(0),fe.push(2*(b.length+ae-N)),a=Pe=re;re<=B?Pe<=B:Pe>=B;a=re<=B?++Pe:--Pe)b.push(i[a].new);else g.push(Ie-re),fe.push(0)}for(we.writeUInt16(3),we.writeUInt16(1),we.writeUInt32(12),we.writeUInt16(4),we.writeUInt16(16+8*ae+2*b.length),we.writeUInt16(0),we.writeUInt16(Le),we.writeUInt16(me),we.writeUInt16(P),we.writeUInt16(ge),Ze=0,ie=I.length;Ze<ie;Ze++)a=I[Ze],we.writeUInt16(a);for(we.writeUInt16(0),Ct=0,Ee=he.length;Ct<Ee;Ct++)a=he[Ct],we.writeUInt16(a);for(Lt=0,Me=g.length;Lt<Me;Lt++)o=g[Lt],we.writeUInt16(o);for(kt=0,Ye=fe.length;kt<Ye;kt++)Z=fe[kt],we.writeUInt16(Z);for($t=0,at=b.length;$t<at;$t++)k=b[$t],we.writeUInt16(k);return{charMap:i,subtable:we.data,maxGlyphID:K+1}}},e}(),d6=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new SF(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,a;return r==null&&(r="macroman"),i=SF.encode(t,r),(a=new kh).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),pJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),mJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),gJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var u;for(i=t.readUInt16(),this.glyphNameIndex=[],u=0;0<=i?u<i:u>i;u=0<=i?++u:--u)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var h,o,g;for(g=[],u=h=0,o=this.file.maxp.numGlyphs;0<=o?h<o:h>o;u=0<=o?++h:--h)g.push(t.readUInt32());return g}).call(this)}},e}(),yJ=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},vJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,a,u,h,o,g,w,B,I,P;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),i=[],u=0;0<=r?u<r:u>r;u=0<=r?++u:--u)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(g={},u=B=0,I=i.length;B<I;u=++B)a=i[u],t.pos=a.offset,w=t.readString(a.length),h=new yJ(w,a),g[P=a.nameID]==null&&(g[P]=[]),g[a.nameID].push(h);this.strings=g,this.copyright=g[0],this.fontFamily=g[1],this.fontSubfamily=g[2],this.uniqueSubfamily=g[3],this.fontName=g[4],this.version=g[5];try{this.postscriptName=g[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=g[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=g[7],this.manufacturer=g[8],this.designer=g[9],this.description=g[10],this.vendorUrl=g[11],this.designerUrl=g[12],this.license=g[13],this.licenseUrl=g[14],this.preferredFamily=g[15],this.preferredSubfamily=g[17],this.compatibleFull=g[18],this.sampleText=g[19]},e}(),_J=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),wJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,a,u,h,o,g;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,B;for(B=[],r=w=0;0<=a?w<a:w>a;r=0<=a?++w:--w)B.push(t.readInt16());return B}(),this.widths=(function(){var w,B,I,P;for(P=[],w=0,B=(I=this.metrics).length;w<B;w++)u=I[w],P.push(u.advance);return P}).call(this),i=this.widths[this.widths.length-1],g=[],r=h=0;0<=a?h<a:h>a;r=0<=a?++h:--h)g.push(this.widths.push(i));return g},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),f6=[].slice,xJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,a,u,h,o,g,w,B,I;return t in this.cache?this.cache[t]:(u=this.file.loca,r=this.file.contents,i=u.indexOf(t),(a=u.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,h=(o=new kh(r.read(a))).readShort(),w=o.readShort(),I=o.readShort(),g=o.readShort(),B=o.readShort(),this.cache[t]=h===-1?new BJ(o,w,I,g,B):new bJ(o,h,w,I,g,B),this.cache[t]))},e.prototype.encode=function(t,r,i){var a,u,h,o,g;for(h=[],u=[],o=0,g=r.length;o<g;o++)a=t[r[o]],u.push(h.length),a&&(h=h.concat(a.encode(i)));return u.push(h.length),{table:h,offsets:u}},e}(),bJ=function(){function e(t,r,i,a,u,h){this.raw=t,this.numberOfContours=r,this.xMin=i,this.yMin=a,this.xMax=u,this.yMax=h,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),BJ=function(){function e(t,r,i,a,u){var h,o;for(this.raw=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;o=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&o;)h.pos+=1&o?4:2,128&o?h.pos+=8:64&o?h.pos+=4:8&o&&(h.pos+=2)}return e.prototype.encode=function(){var t,r,i;for(r=new kh(f6.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),CJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Fc(e,QA),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,u;for(u=[],i=0,a=this.length;i<a;i+=2)u.push(2*t.readUInt16());return u}).call(this):(function(){var a,u;for(u=[],i=0,a=this.length;i<a;i+=4)u.push(t.readUInt32());return u}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),a=0,u=0,h=0;h<i.length;++h)if(i[h]=a,u<r.length&&r[u]==h){++u,i[h]=a;var o=this.offsets[h],g=this.offsets[h+1]-o;g>0&&(a+=g)}for(var w=new Array(4*i.length),B=0;B<i.length;++B)w[4*B+3]=255&i[B],w[4*B+2]=(65280&i[B])>>8,w[4*B+1]=(16711680&i[B])>>16,w[4*B]=(4278190080&i[B])>>24;return w},e}(),SJ=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,i,a,u;for(r in a=this.font.cmap.tables[0].codeMap,t={},u=this.subset)i=u[r],t[r]=a[i];return t},e.prototype.glyphsFor=function(t){var r,i,a,u,h,o,g;for(a={},h=0,o=t.length;h<o;h++)a[u=t[h]]=this.font.glyf.glyphFor(u);for(u in r=[],a)(i=a[u])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(u in g=this.glyphsFor(r))i=g[u],a[u]=i;return a},e.prototype.encode=function(t,r){var i,a,u,h,o,g,w,B,I,P,b,N,k,H,U;for(a in i=d6.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(t),b={0:0},U=i.charMap)b[(g=U[a]).old]=g.new;for(N in P=i.maxGlyphID,h)N in b||(b[N]=P++);return B=function(Q){var K,Z;for(K in Z={},Q)Z[Q[K]]=K;return Z}(b),I=Object.keys(B).sort(function(Q,K){return Q-K}),k=function(){var Q,K,Z;for(Z=[],Q=0,K=I.length;Q<K;Q++)o=I[Q],Z.push(B[o]);return Z}(),u=this.font.glyf.encode(h,k,b),w=this.font.loca.encode(u.offsets,k),H={cmap:this.font.cmap.raw(),glyf:u.table,loca:w,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(H["OS/2"]=this.font.os2.raw()),this.font.directory.encode(H)},e}();Hr.API.PDFObject=function(){var e;function t(){}return e=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},t.convert=function(r){var i,a,u,h;if(Array.isArray(r))return"["+function(){var o,g,w;for(w=[],o=0,g=r.length;o<g;o++)i=r[o],w.push(t.convert(i));return w}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in u=["<<"],r)h=r[a],u.push("/"+a+" "+t.convert(h));return u.push(">>"),u.join(`
`)}return""+r},t}();function EJ({filteredData:e,filteredGeoJSON:t,selectedMetric:r,exportOptions:i,onExportComplete:a}){const u=ee.useRef(null),h=ee.useCallback(async()=>{if(!u.current){console.error("Export failed: Render container not found."),a();return}try{const B=await xU(u.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff"});if(i.fileFormat==="png"){const I=document.createElement("a");I.download=`domapus-map-${r}.png`,I.href=B.toDataURL("image/png"),I.click()}else{const I=B.toDataURL("image/png"),P=new Hr({orientation:"landscape",unit:"px",format:[B.width,B.height]});P.addImage(I,"PNG",0,0,B.width,B.height),P.save(`domapus-map-${r}.pdf`)}}catch(B){console.error("Export failed during screenshot process:",B)}finally{a()}},[i,r]),o=B=>({"median-sale-price":"Median Sale Price","median-list-price":"Median List Price","median-dom":"Median Days on Market",inventory:"Inventory","new-listings":"New Listings","homes-sold":"Homes Sold","sale-to-list-ratio":"Sale to List Ratio","homes-sold-above-list":"Homes Sold Above List","off-market-2-weeks":"Off Market in 2 Weeks"})[B]||B,g=()=>i.regionScope==="state"?i.selectedState||"State":i.regionScope==="metro"?i.selectedMetro||"Metro Area":"United States",w=()=>new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});return X.jsxs("div",{ref:u,className:"fixed top-0 left-0 w-[1200px] h-[900px] bg-white p-8 flex flex-col font-sans",style:{transform:"translateX(-9999px)"},children:[i.includeTitle&&X.jsxs("header",{className:"text-center mb-4",children:[X.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[o(r)," by ZIP Code"]}),X.jsxs("p",{className:"text-lg text-gray-600",children:[g(),", ",w()]})]}),X.jsx("main",{className:"flex-grow border border-gray-200 rounded-lg overflow-hidden bg-gray-50",children:t&&e.length>0?X.jsx(uK,{filteredData:e,geoJSON:t,selectedMetric:r,regionScope:i.regionScope,onRenderComplete:h}):X.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Preparing map data..."})}),X.jsxs("footer",{className:"pt-4 flex justify-between items-end",children:[i.includeLegend&&X.jsx(dK,{filteredZipData:e,selectedMetric:r,exportOptions:i}),X.jsxs("div",{className:"text-right",children:[X.jsx(fK,{size:"sm",className:"mb-1 justify-end"}),X.jsx("p",{className:"text-xs text-gray-500",children:"Analytics by Domapus"}),X.jsx("p",{className:"text-xs text-gray-400",children:"Data sourced from Redfin"})]})]})]})}function IJ({allZipData:e,fullGeoJSON:t,selectedMetric:r}){const[i,a]=ee.useState(!1),[u,h]=ee.useState(null),[o,g]=ee.useState(!1),{filteredData:w,filteredGeoJSON:B}=ee.useMemo(()=>{if(!u||Object.keys(e).length===0||!t)return{filteredData:[],filteredGeoJSON:null};const N=Object.values(e).filter(U=>u.regionScope==="state"&&u.selectedState?U.state===u.selectedState:u.regionScope==="metro"&&u.selectedMetro?U.parent_metro===u.selectedMetro:!0),k=new Set(N.map(U=>U.zipCode)),H=t.features.filter(U=>{var Q;return k.has((Q=U.properties)==null?void 0:Q.zipCode)});return{filteredData:N,filteredGeoJSON:{type:"FeatureCollection",features:H}}},[e,t,u]),I=N=>{h(N),g(!0)},P=()=>{g(!1),a(!1),h(null)},b=()=>{a(!1),g(!1),h(null)};return i?X.jsxs("div",{className:"fixed inset-0 bg-gray-100 z-50 flex",children:[X.jsx(aV,{allZipData:e,isExporting:o,onExport:I,onCancel:b}),X.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:X.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border text-center space-y-4",children:[X.jsx("div",{role:"progressbar","aria-label":"Loading export map data",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),X.jsxs("div",{children:[X.jsx("h3",{className:"font-semibold text-lg",children:"Generating Your Export"}),X.jsx("p",{className:"text-sm text-gray-600",children:"Please keep this window open. Your download will begin shortly."})]})]})}),o&&X.jsx(EJ,{filteredData:w,filteredGeoJSON:B,selectedMetric:r,exportOptions:u,onExportComplete:P})]}):X.jsxs(ea,{variant:"outline",size:"sm",onClick:()=>a(!0),children:[X.jsx(PP,{className:"h-4 w-4 mr-2"}),"Export"]})}const FJ={median_sale_price:"Median Sale Price",median_list_price:"Median List Price",median_dom:"Median Days on Market",inventory:"Inventory",new_listings:"New Listings",homes_sold:"Homes Sold",avg_sale_to_list_ratio:"Sale-to-List Price Ratio",sold_above_list:"% Homes Sold Above List",off_market_in_two_weeks:"% Off-Market in 2 Weeks"};function EF({selectedMetric:e,onMetricChange:t}){return X.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-sm",children:[X.jsx("label",{className:"block text-sm font-medium text-dashboard-text-secondary mb-2",children:"Visualization Metric"}),X.jsxs(Pb,{value:e,onValueChange:t,children:[X.jsx(Cv,{className:"w-64","aria-label":"Select visualization metric",children:X.jsx(Lb,{placeholder:"Select a metric"})}),X.jsx(Sv,{className:"z-[9999]",children:Object.entries(FJ).map(([r,i])=>X.jsx(Ev,{value:r,children:i},r))})]})]})}const sC=ee.forwardRef(({className:e,type:t,...r},i)=>X.jsx("input",{type:t,className:jn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));sC.displayName="Input";const TJ=(e,t)=>{const[r,i]=ee.useState(e);return ee.useEffect(()=>{const a=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(a)}},[e,t]),r};function IF({onSearch:e}){const[t,r]=ee.useState(""),i=TJ(t,300);ee.useEffect(()=>{i.trim()&&i.length>=3&&e(i.trim())},[i,e]);const a=h=>{const o=h.target.value.replace(/\D/g,"");r(o)},u=h=>{h.preventDefault(),t.trim()&&e(t.trim())};return X.jsxs("form",{onSubmit:u,className:"flex items-center space-x-2",children:[X.jsxs("div",{className:"relative flex-1",children:[X.jsx(LP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-dashboard-text-secondary"}),X.jsx(sC,{type:"text",pattern:"[0-9]*",inputMode:"numeric",placeholder:"Enter ZIP code...",value:t,onChange:a,className:"pl-10 w-48",maxLength:5,"aria-label":"Search for ZIP code"})]}),X.jsx(ea,{type:"submit",variant:"outline",size:"sm","aria-label":"Search",children:"Search"})]})}function PJ({lastUpdated:e,zipCodesChanged:t,dataPointsChanged:r}){const i=u=>{if(!u)return"July 1, 2025";try{return new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"July 1, 2025"}},a=t!==void 0||r!==void 0;return X.jsxs("div",{className:"flex items-center space-x-2 bg-dashboard-panel border border-dashboard-border rounded-lg px-3 py-2 shadow-sm",children:[X.jsx(F8,{className:"h-4 w-4 text-dashboard-text-secondary"}),X.jsxs("div",{className:"flex flex-col",children:[X.jsxs("span",{className:"text-sm text-dashboard-text-secondary",children:["Updated: ",i(e||"")]}),a&&X.jsxs("span",{className:"text-xs text-dashboard-text-secondary opacity-75",children:[t||0," ZIPs • ",r||0," data points changed"]})]})]})}const fx=768;function LJ(){const[e,t]=ee.useState(void 0);return ee.useEffect(()=>{const r=window.matchMedia(`(max-width: ${fx-1}px)`),i=()=>{t(window.innerWidth<fx)};return r.addEventListener("change",i),t(window.innerWidth<fx),()=>r.removeEventListener("change",i)},[]),!!e}function MJ({selectedMetric:e,onMetricChange:t,onSearch:r,lastUpdated:i,children:a}){const u=LJ();return X.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-4 bg-dashboard-panel border-b border-dashboard-border",children:[X.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-6",children:[X.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>window.location.reload(),title:"Click to reload page",children:[X.jsx("img",{src:"/Domapus/apple-touch-icon.png",alt:"Domapus Logo",className:"h-8 w-8 sm:h-10 sm:w-10"}),X.jsxs("div",{className:"flex flex-col font-logo",children:[X.jsx("h1",{className:"text-lg sm:text-xl font-bold text-dashboard-text-primary leading-tight",children:"Domapus"}),X.jsx("p",{className:"text-xs sm:text-sm text-dashboard-text-secondary leading-tight",children:"U.S. Housing Market Dashboard"})]})]}),!u&&X.jsx(EF,{selectedMetric:e,onMetricChange:t})]}),X.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[!u&&X.jsx(IF,{onSearch:r}),!u&&X.jsx(PJ,{lastUpdated:i}),!u&&a,X.jsx(ea,{variant:"outline",size:"sm",asChild:!0,className:"hidden sm:flex",children:X.jsxs("a",{href:"https://github.com/Jasperc2024/Domapus",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(R8,{className:"h-4 w-4 mr-2"}),X.jsx("span",{children:"GitHub"})]})}),X.jsx(ea,{variant:"default",size:"sm",asChild:!0,className:"hidden sm:flex bg-pink-600 hover:bg-pink-700 text-white",children:X.jsxs("a",{href:"https://buymeacoffee.com/JasperC",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(ub,{className:"h-4 w-4 mr-2"}),X.jsx("span",{children:"Sponsor"})]})})]}),u&&X.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[1001] bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-lg",children:X.jsxs("div",{className:"space-y-3",children:[X.jsx(EF,{selectedMetric:e,onMetricChange:t}),X.jsx(IF,{onSearch:r})]})})]})}const kJ="/Domapus/";function UJ({selectedMetric:e,onZipSelect:t,searchZip:r,zipData:i,colorScaleDomain:a,isLoading:u,progress:h,processData:o}){const g=ee.useRef(null),w=ee.useRef(null),[B,I]=ee.useState(!1),[P,b]=ee.useState(null),N=ee.useRef(!1),[k,H]=ee.useState(null),U=ee.useRef(!1),Q=ee.useRef(null),K=fe=>{const ge=new qm.Map({container:fe,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[-98.5795,39.8283],zoom:3.5,minZoom:3,maxZoom:12,maxBounds:[[-180,-85],[180,85]]});return ge.on("error",me=>{console.error("[Map] Internal error:",me==null?void 0:me.error),b("Map encountered an internal error. Please refresh the page.")}),ge.once("load",()=>{console.log("[Map] Loaded successfully"),ge.resize(),I(!0),["Place labels","Road labels","POI labels","Housenumber labels"].forEach(ae=>{if(ge.getLayer(ae))try{ge.moveLayer(ae)}catch(re){console.warn(`Could not move layer ${ae}:`,re)}})}),ge.addControl(new qm.NavigationControl,"top-right"),ge};ee.useEffect(()=>{if(!g.current||w.current)return;const{clientWidth:fe,clientHeight:ge}=g.current;if(!fe||!ge){console.warn("Container has no size yet; delaying init");const me=requestAnimationFrame(()=>{if(g.current&&!w.current){const ae=K(g.current);w.current=ae}});return()=>cancelAnimationFrame(me)}try{const me=K(g.current);return w.current=me,()=>{if(me)try{me.remove()}catch(ae){console.error("[MapLibreMap] Error during cleanup:",ae)}}}catch(me){console.error("[MapLibreMap] Failed to initialize map:",me),b("Failed to initialize map. Please refresh the page.")}},[]);const Z=ee.useMemo(()=>!a||a.length<2?null:GB().domain(a).range(["#FFF9B0","#E84C61","#2E0B59"]).clamp(!0),[a]);ee.useEffect(()=>{if(!B||k)return;async function fe(){const ge=new AbortController,me=setTimeout(()=>{console.warn("[MapLibreMap] GeoJSON load timeout"),ge.abort()},3e4);try{const ae=new URL(`${kJ}data/us-zip-codes.geojson.gz`,window.location.origin).href;console.log("[MapLibreMap] Loading base GeoJSON...");const Le=await fetch(ae,{signal:ge.signal,headers:{Accept:"application/octet-stream","Cache-Control":"max-age=86400"}});if(clearTimeout(me),!Le.ok)throw new Error(`Failed to load GeoJSON: ${Le.status} ${Le.statusText}`);const re=Le.headers.get("content-length");if(re&&parseInt(re)>50*1024*1024)throw new Error(`GeoJSON file too large: ${re} bytes`);console.log("[MapLibreMap] GeoJSON response received, decompressing...");const he=await Le.arrayBuffer(),{inflate:Ie}=await ip(async()=>{const{inflate:rt}=await Promise.resolve().then(()=>p2);return{inflate:rt}},void 0),we=Ie(he,{to:"string"});console.log("[MapLibreMap] Parsing GeoJSON...");const nt=JSON.parse(we);if(!nt||nt.type!=="FeatureCollection"||!Array.isArray(nt.features))throw new Error("Invalid GeoJSON structure");console.log(`[MapLibreMap] GeoJSON loaded successfully with ${nt.features.length} features`),H(nt)}catch(ae){clearTimeout(me),console.error("[MapLibreMap] Error loading GeoJSON:",ae),ae instanceof Error&&ae.name==="AbortError"?b("Map data loading timed out. Please refresh the page."):b("Failed to load map data. Please check your connection and refresh.")}}fe()},[B,k]),ee.useEffect(()=>{if(!(!B||!k||!Z||Object.keys(i).length===0)&&!U.current)return U.current=!0,Q.current=new AbortController,console.log("[MapLibreMap] Processing zip data for map update..."),(async()=>{var fe,ge,me;try{b(null);const ae=await o({type:"PROCESS_GEOJSON",data:{geojson:k,zipData:i,selectedMetric:e}});if((fe=Q.current)!=null&&fe.signal.aborted){console.log("[MapLibreMap] Processing aborted");return}if(!((ge=w.current)!=null&&ge.isStyleLoaded())){console.warn("[MapLibreMap] Map style not loaded");return}const Le=ae.features.map(he=>{var Ie;return(Ie=he.properties)!=null&&Ie.metricValue&&typeof he.properties.metricValue=="number"&&he.properties.metricValue>0&&(he.properties.metricColor=Z(he.properties.metricValue)),he}),re=w.current.getSource("zips");if(re)re.setData({type:"FeatureCollection",features:Le});else{console.error("[MapLibreMap] ZIP source not found"),b("Map data source not available");return}if(!N.current&&w.current)try{Ae(w.current),N.current=!0}catch(he){console.error("[MapLibreMap] Failed to setup interactions:",he)}}catch(ae){(me=Q.current)!=null&&me.signal.aborted||(console.error("[MapLibreMap] Failed to update map:",ae),b("Failed to update map visualization"))}finally{U.current=!1}})(),()=>{Q.current&&(Q.current.abort(),Q.current=null)}},[B,k,Z,i,e]),ee.useEffect(()=>{if(!(!B||!w.current||!r||!i[r]))try{const{longitude:fe,latitude:ge}=i[r];typeof fe=="number"&&typeof ge=="number"?(console.log(`[MapLibreMap] Navigating to ZIP ${r} at [${fe}, ${ge}]`),w.current.flyTo({center:[fe,ge],zoom:10,duration:2e3})):console.warn(`[MapLibreMap] Invalid coordinates for ZIP ${r}:`,{longitude:fe,latitude:ge})}catch(fe){console.error(`[MapLibreMap] Error navigating to ZIP ${r}:`,fe)}},[B,r,i]);const Ae=fe=>{console.log("[MapLibreMap] Setting up map interactions...");let ge=null;const me=["zips-fill"];try{fe.on("mousemove",me,ae=>{var Le,re,he,Ie;try{if(fe.getCanvas().style.cursor=(Le=ae.features)!=null&&Le.length?"pointer":"",(Ie=(he=(re=ae.features)==null?void 0:re[0])==null?void 0:he.properties)!=null&&Ie.zipCode){const nt=ae.features[0].properties.zipCode;if(!i[nt]){console.warn(`[MapLibreMap] No data found for ZIP: ${nt}`);return}const rt=ae.features[0].geometry.type==="Point"?ae.features[0].geometry.coordinates:ae.lngLat;ge==null||ge.remove(),ge=new qm.Popup({closeButton:!1,offset:[0,-10],maxWidth:"300px"}).setLngLat(rt).setHTML(hK(i[nt],e)).addTo(fe)}}catch(we){console.error("[MapLibreMap] Error in mousemove handler:",we)}}),fe.on("mouseleave",me,()=>{try{fe.getCanvas().style.cursor="",ge==null||ge.remove()}catch(ae){console.error("[MapLibreMap] Error in mouseleave handler:",ae)}}),fe.on("click",me,ae=>{var Le,re;try{const he=(re=(Le=ae.features)==null?void 0:Le[0])==null?void 0:re.properties;he!=null&&he.zipCode&&i[he.zipCode]&&(console.log(`[MapLibreMap] ZIP selected: ${he.zipCode}`),t(i[he.zipCode]))}catch(he){console.error("[MapLibreMap] Error in click handler:",he)}}),console.log("[MapLibreMap] Map interactions setup successfully")}catch(ae){throw console.error("[MapLibreMap] Failed to setup map interactions:",ae),ae}};return X.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[X.jsx("div",{ref:g,"data-testid":"map-container",role:"application",className:"w-full h-full"}),(u||!B||P)&&X.jsx("div",{role:"status","aria-label":"Loading...",className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-10",children:P?X.jsxs("div",{className:"text-center space-y-4",children:[X.jsx("div",{className:"text-red-500 font-bold",children:P}),X.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary/90",children:"Refresh Page"})]}):X.jsxs("div",{className:"text-center space-y-4",children:[X.jsx("div",{role:"progressbar","aria-label":"Loading map data",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),X.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[h.phase||"Loading","..."]})]})})]})}function FF(e,t){return t.includes("price")?`$${(e/1e3).toFixed(0)}k`:t.includes("ratio")||t.includes("above-list")?`${(e*100).toFixed(0)}%`:t.includes("dom")?`${Math.round(e)}`:e.toLocaleString()}function RJ({selectedMetric:e,colorScaleDomain:t}){const r=ee.useMemo(()=>{if(!t)return{min:"N/A",max:"N/A"};const[a,u]=t;return{min:FF(a,e),max:FF(u,e)}},[e,t]),i=a=>({"median-sale-price":"Median Sale Price","median-list-price":"Median List Price","median-dom":"Median Days on Market",inventory:"Current Inventory","homes-sold":"Homes Sold","sale-to-list-ratio":"Sale-to-List Ratio"})[a]||"Metric";return X.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-lg p-3 shadow-lg w-full max-w-xs",children:[X.jsx("h3",{className:"text-xs font-semibold mb-2 text-gray-800",children:i(e)}),X.jsx("div",{className:"h-3 rounded",style:{background:"linear-gradient(to right, #FFF9B0, #E84C61, #2E0B59)"}}),X.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600 mt-1 font-medium",children:[X.jsx("span",{children:r.min}),X.jsx("span",{children:r.max})]})]})}function NJ({onClose:e}){return ee.useEffect(()=>{const t=setTimeout(e,2e4);return()=>clearTimeout(t)},[e]),X.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:X.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg shadow-lg p-4",children:[X.jsxs("div",{className:"flex items-start justify-between",children:[X.jsxs("div",{className:"flex items-start space-x-3",children:[X.jsx(ub,{className:"h-5 w-5 text-pink-600 mt-0.5 flex-shrink-0"}),X.jsxs("div",{className:"text-sm text-dashboard-text-primary",children:[X.jsx("p",{className:"font-semibold mb-1",children:"This site is proudly ad-free and built to serve the public."}),X.jsx("p",{className:"text-dashboard-text-secondary",children:"If you find it useful, please consider sponsoring or supporting us to keep the data flowing and the site improving."})]})]}),X.jsx(ea,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0 flex-shrink-0",children:X.jsx(f1,{className:"h-4 w-4"})})]}),X.jsxs("div",{className:"mt-3 flex space-x-2",children:[X.jsx(ea,{size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:X.jsxs("a",{href:"https://buymeacoffee.com/jasperc",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(ub,{className:"h-4 w-4 mr-2"}),"Sponsor"]})}),X.jsx(ea,{variant:"outline",size:"sm",onClick:e,children:"Maybe later"})]})]})})}const DJ=d1("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function TF({className:e,variant:t,...r}){return X.jsx("div",{className:jn(DJ({variant:t}),e),...r})}function QJ({currentZip:e,allZipData:t,onClose:r}){const[i,a]=ee.useState(""),[u,h]=ee.useState(null),[o,g]=ee.useState(""),w=()=>{if(!i.trim())return;g("");const b=t[i.trim()];b?h(b):(g("ZIP code not found in our database."),h(null))},B=(b,N)=>{if(b==null)return"N/A";const k=Number(b);if(isNaN(k))return"N/A";switch(N){case"price":return`$${k.toLocaleString()}`;case"days":return`${k} days`;case"percentage":return`${k.toFixed(1)}%`;case"ratio":return`${(k*100).toFixed(1)}%`;default:return k.toLocaleString()}},I=(b,N)=>{const k=Number(b),H=Number(N);if(isNaN(k)||isNaN(H))return"same";const U=k-H;return Math.abs(U)<.01?"same":U>0?"higher":"lower"},P=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"inventory",label:"Inventory",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"}];return X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),X.jsx(ea,{variant:"ghost",size:"sm",onClick:r,"aria-label":"Close comparison",children:X.jsx(f1,{className:"h-4 w-4"})})]}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx(sC,{type:"text",pattern:"[0-9]*",inputMode:"numeric",maxLength:5,placeholder:"Enter ZIP code...",value:i,onChange:b=>a(b.target.value.replace(/\D/g,"")),onKeyDown:b=>{b.key==="Enter"&&w()},"aria-label":"ZIP code to compare"}),X.jsx(ea,{onClick:w,size:"sm","aria-label":"Search",children:X.jsx(LP,{className:"h-4 w-4"})})]}),o&&X.jsx("div",{className:"text-sm text-red-500 p-2 rounded bg-red-50",children:o}),u&&X.jsxs("div",{className:"space-y-3 pt-2",children:[X.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[X.jsxs("div",{children:[X.jsx(TF,{variant:"secondary",children:e.zipCode}),X.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.city})]}),X.jsx("div",{className:"text-xs text-muted-foreground self-center",children:"vs"}),X.jsxs("div",{children:[X.jsx(TF,{variant:"secondary",children:u.zipCode}),X.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:u.city})]})]}),X.jsx("div",{className:"space-y-2",children:P.map(b=>{const N=e[b.key],k=u[b.key],H=I(N,k),U=!b.key.includes("dom");return X.jsx(Bh,{children:X.jsxs(Ch,{className:"p-3",children:[X.jsx("div",{className:"text-center mb-2 text-xs font-medium text-muted-foreground",children:b.label}),X.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[X.jsx("div",{className:`text-center font-bold text-sm ${H==="higher"?U?"text-green-600":"text-red-600":H==="lower"?U?"text-red-600":"text-green-600":""}`,children:B(N,b.type)}),X.jsx("div",{className:`text-center font-bold text-sm ${H==="lower"?U?"text-green-600":"text-red-600":H==="higher"?U?"text-red-600":"text-green-600":""}`,children:B(k,b.type)})]})]})},b.key)})})]})]})}function OJ({isOpen:e,isCollapsed:t,zipData:r,allZipData:i,onClose:a,onToggleCollapse:u}){const[h,o]=ee.useState(!1);if(!e||!r)return null;const g=(I,P)=>{if(I==null)return"N/A";const b=Number(I);if(isNaN(b))return"N/A";switch(P){case"price":return`$${b.toLocaleString()}`;case"days":return`${b} days`;case"percentage":return`${b.toFixed(1)}%`;case"ratio":return`${(b*100).toFixed(1)}%`;case"coordinate":return b.toFixed(4);default:return b.toLocaleString()}},w=I=>{if(I==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const P=Number(I);if(isNaN(P))return{formatted:"N/A",isPositive:!1,isZero:!0};const b=P>0,N=P===0;return{formatted:`${b?"+":""}${P.toFixed(1)}%`,isPositive:b,isZero:N}},B=[{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom_pct",yoyKey:"median_sale_price_yoy_pct"},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom_pct",yoyKey:"median_list_price_yoy_pct"},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom_pct",yoyKey:"median_dom_yoy_pct"},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom_pct",yoyKey:"inventory_yoy_pct"},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom_pct",yoyKey:"new_listings_yoy_pct"},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom_pct",yoyKey:"homes_sold_yoy_pct"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:"avg_sale_to_list_ratio_mom_pct",yoyKey:"avg_sale_to_list_ratio_yoy_pct"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:"sold_above_list_mom_pct",yoyKey:"sold_above_list_yoy_pct"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:"off_market_in_two_weeks_mom_pct",yoyKey:"off_market_in_two_weeks_yoy_pct"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:"median_ppsf_mom_pct",yoyKey:"median_ppsf_yoy_pct"},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:"pending_sales_mom_pct",yoyKey:"pending_sales_yoy_pct"}].map(I=>({...I,value:r[I.key]})).filter(I=>I.value!==null&&I.value!==void 0);return X.jsxs("div",{className:`fixed left-0 top-0 h-full bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 ${t?"w-16":"w-96"}`,children:[X.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dashboard-border",role:"banner",children:[!t&&X.jsxs("div",{children:[X.jsx("h2",{className:"text-lg font-semibold",children:r.zipCode}),X.jsx("p",{className:"text-sm text-muted-foreground",children:r.city})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(ea,{variant:"ghost",size:"sm",onClick:u,"aria-label":t?"Expand sidebar":"Collapse sidebar",children:t?X.jsx(L8,{className:"h-4 w-4"}):X.jsx(P8,{className:"h-4 w-4"})}),!t&&X.jsx(ea,{variant:"ghost",size:"sm",onClick:a,"aria-label":"Close sidebar",children:X.jsx(f1,{className:"h-4 w-4"})})]})]}),!t&&X.jsxs("div",{className:"flex flex-col h-[calc(100vh-73px)]",children:[h?X.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:X.jsx(QJ,{currentZip:r,allZipData:i,onClose:()=>o(!1)})}):X.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[X.jsxs(Bh,{children:[X.jsx(Gm,{children:X.jsxs($m,{className:"text-sm flex items-center",children:[X.jsx(N8,{className:"h-4 w-4 mr-2"}),"Location Information"]})}),X.jsxs(Ch,{className:"space-y-2 text-sm",children:[X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{children:"City:"}),X.jsx("span",{className:"font-medium",children:r.city})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{children:"County:"}),X.jsx("span",{className:"font-medium",children:r.county})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{children:"Metro Area:"}),X.jsx("span",{className:"font-medium",children:r.parent_metro})]})]})]}),X.jsxs("h3",{className:"text-sm font-medium pt-2 flex items-center",children:[X.jsx(I8,{className:"h-4 w-4 mr-2"}),"Market Data"]}),X.jsx("div",{className:"space-y-3",children:B.map((I,P)=>{const b=I.momKey?w(r[I.momKey]):null,N=I.yoyKey?w(r[I.yoyKey]):null;return X.jsx(Bh,{children:X.jsx(Ch,{className:"p-4",children:X.jsxs("div",{className:"space-y-2",children:[X.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:I.label}),X.jsx("p",{className:"text-xl font-bold",children:g(I.value,I.type)}),X.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[b&&!b.isZero&&X.jsxs("span",{className:`flex items-center ${b.isPositive?"text-green-600":"text-red-600"}`,children:[b.isPositive?X.jsx(cE,{className:"h-3 w-3 mr-1"}):X.jsx(AE,{className:"h-3 w-3 mr-1"}),b.formatted," vs last month"]}),N&&!N.isZero&&X.jsxs("span",{className:`flex items-center ${N.isPositive?"text-green-600":"text-red-600"}`,children:[N.isPositive?X.jsx(cE,{className:"h-3 w-3 mr-1"}):X.jsx(AE,{className:"h-3 w-3 mr-1"}),N.formatted," vs last year"]})]})]})})},P)})})]}),X.jsxs("div",{className:"p-4 mt-auto space-y-3 border-t border-dashboard-border bg-dashboard-panel",children:[X.jsxs(ea,{variant:"outline",className:"w-full",onClick:()=>o(!h),children:[X.jsx(T8,{className:"h-4 w-4 mr-2"}),h?"Back to Details":"Compare ZIP Codes"]}),X.jsx(Bh,{children:X.jsx(Ch,{className:"p-3",children:X.jsx("p",{className:"text-xs text-muted-foreground",children:"Data sourced from Redfin Data Center."})})})]})]})]})}const PF="/Domapus/";function zJ(){const[e,t]=ee.useState("median_sale_price"),[r,i]=ee.useState(null),[a,u]=ee.useState(""),[h,o]=ee.useState({}),[g,w]=ee.useState(null),[B,I]=ee.useState(null),[P,b]=ee.useState(""),[N,k]=ee.useState(!1),[H,U]=ee.useState(!1),[Q,K]=ee.useState(!1),{processData:Z,isLoading:Ae,progress:fe}=tj();ee.useEffect(()=>{let ae=!0;(async()=>{const he=new URL(`${PF}data/zip-data.json.gz`,window.location.origin).href,Ie=new URL(`${PF}data/us-zip-codes.geojson.gz`,window.location.origin).href;try{const we=await Z({type:"LOAD_AND_PROCESS_DATA",data:{url:he,selectedMetric:"median_sale_price"}});if(!ae)return;we&&(o(we.zip_codes),w(we.bounds),b(we.last_updated_utc));const nt=await fetch(Ie);if(!nt.ok)throw new Error(`Failed to fetch GeoJSON: ${nt.status}`);if(!ae)return;const ct=(nt.headers.get("content-encoding")||"").includes("gzip")||Ie.endsWith(".gz"),Pe=await nt.arrayBuffer();let Ve;if(ct)try{Ve=JSON.parse(new TextDecoder().decode(Pe))}catch{const{inflate:mt}=await ip(async()=>{const{inflate:ie}=await Promise.resolve().then(()=>p2);return{inflate:ie}},void 0),gt=mt(new Uint8Array(Pe),{to:"string"});Ve=JSON.parse(gt)}else try{const{inflate:mt}=await ip(async()=>{const{inflate:ie}=await Promise.resolve().then(()=>p2);return{inflate:ie}},void 0),gt=mt(new Uint8Array(Pe),{to:"string"});Ve=JSON.parse(gt)}catch{Ve=JSON.parse(new TextDecoder().decode(Pe))}if(!ae)return;I(Ve)}catch(we){console.error("[HousingDashboard] Failed to load initial data:",we)}})();const re=setTimeout(()=>K(!0),3e4);return()=>{ae=!1,clearTimeout(re)}},[]);const ge=ae=>{i(ae),k(!0)},me=()=>{U(!H)};return X.jsxs("div",{className:"w-full h-screen bg-dashboard-bg overflow-hidden flex flex-col",children:[Q&&X.jsx(NJ,{onClose:()=>K(!1)}),X.jsx(MJ,{selectedMetric:e,onMetricChange:t,onSearch:u,lastUpdated:P,children:X.jsx(IJ,{allZipData:h,fullGeoJSON:B,selectedMetric:e})}),X.jsxs("div",{className:"flex flex-1 relative",children:[N&&X.jsx(OJ,{isOpen:N,isCollapsed:H,zipData:r,allZipData:h,onClose:()=>k(!1),onToggleCollapse:me}),X.jsxs("div",{className:`flex-1 relative transition-all duration-300 ${N?H?"ml-16":"ml-96":"ml-0"}`,children:[X.jsx("div",{className:"absolute inset-0",children:X.jsx(UJ,{selectedMetric:e,onZipSelect:ge,searchZip:a,zipData:h,colorScaleDomain:g?[g.min,g.max]:null,isLoading:Ae||!B,progress:fe,processData:Z})}),X.jsx("div",{className:"absolute bottom-4 right-4 w-64 z-[1000] pointer-events-auto",children:X.jsx(RJ,{selectedMetric:e,colorScaleDomain:g?[g.min,g.max]:null})})]})]})]})}const HJ=()=>X.jsx(zJ,{}),jJ=()=>{const e=RL();return ee.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:X.jsxs("div",{className:"text-center",children:[X.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),X.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),X.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},VJ=new l7,KJ=()=>X.jsx(c7,{client:VJ,children:X.jsxs(DH,{children:[X.jsx(wO,{}),X.jsx(JO,{}),X.jsx(X7,{basename:"/Domapus",children:X.jsxs(q7,{children:[X.jsx(wb,{path:"/",element:X.jsx(HJ,{})}),X.jsx(wb,{path:"*",element:X.jsx(jJ,{})})]})})]})});class GJ extends cr.Component{constructor(r){super(r);ei(this,"handleTryAgain",()=>{this.setState({hasError:!1})});this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(r,i){console.error("Error Boundary Caught:",r,i)}render(){return this.state.hasError?X.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center p-4",children:[X.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Something went wrong."}),X.jsx("p",{className:"text-gray-700 mb-6",children:"We've logged the issue and will look into it. Please try again."}),X.jsx(ea,{onClick:this.handleTryAgain,children:"Try Again"})]}):this.props.children}}J3(document.getElementById("root")).render(X.jsx(GJ,{children:X.jsx(KJ,{})}));export{oi as _,nN as c,_2 as g};
